const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/JournalEntries-Bjl2lSqN.js","assets/filter-l9oGDiCq.js","assets/ChartOfAccounts-CNlU7eBI.js"])))=>i.map(i=>d[i]);
var Are=Object.defineProperty;var fD=t=>{throw TypeError(t)};var Tre=(t,e,n)=>e in t?Are(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var xb=(t,e,n)=>Tre(t,typeof e!="symbol"?e+"":e,n),gS=(t,e,n)=>e.has(t)||fD("Cannot "+n);var Q=(t,e,n)=>(gS(t,e,"read from private field"),n?n.call(t):e.get(t)),mt=(t,e,n)=>e.has(t)?fD("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),qe=(t,e,n,r)=>(gS(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ut=(t,e,n)=>(gS(t,e,"access private method"),n);var bb=(t,e,n,r)=>({set _(s){qe(t,e,s,n)},get _(){return Q(t,e,r)}});function Cre(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var wb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var D6={exports:{}},Pj={},L6={exports:{}},Gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var px=Symbol.for("react.element"),Pre=Symbol.for("react.portal"),Ire=Symbol.for("react.fragment"),kre=Symbol.for("react.strict_mode"),Rre=Symbol.for("react.profiler"),Ore=Symbol.for("react.provider"),Mre=Symbol.for("react.context"),Dre=Symbol.for("react.forward_ref"),Lre=Symbol.for("react.suspense"),$re=Symbol.for("react.memo"),Fre=Symbol.for("react.lazy"),mD=Symbol.iterator;function Vre(t){return t===null||typeof t!="object"?null:(t=mD&&t[mD]||t["@@iterator"],typeof t=="function"?t:null)}var $6={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F6=Object.assign,V6={};function vp(t,e,n){this.props=t,this.context=e,this.refs=V6,this.updater=n||$6}vp.prototype.isReactComponent={};vp.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vp.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function B6(){}B6.prototype=vp.prototype;function PI(t,e,n){this.props=t,this.context=e,this.refs=V6,this.updater=n||$6}var II=PI.prototype=new B6;II.constructor=PI;F6(II,vp.prototype);II.isPureReactComponent=!0;var pD=Array.isArray,U6=Object.prototype.hasOwnProperty,kI={current:null},z6={key:!0,ref:!0,__self:!0,__source:!0};function q6(t,e,n){var r,s={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)U6.call(e,r)&&!z6.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:px,type:t,key:a,ref:o,props:s,_owner:kI.current}}function Bre(t,e){return{$$typeof:px,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function RI(t){return typeof t=="object"&&t!==null&&t.$$typeof===px}function Ure(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var gD=/\/+/g;function yS(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ure(""+t.key):e.toString(36)}function w0(t,e,n,r,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case px:case Pre:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+yS(o,0):r,pD(s)?(n="",t!=null&&(n=t.replace(gD,"$&/")+"/"),w0(s,e,n,"",function(u){return u})):s!=null&&(RI(s)&&(s=Bre(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(gD,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",pD(t))for(var l=0;l<t.length;l++){a=t[l];var c=r+yS(a,l);o+=w0(a,e,n,c,s)}else if(c=Vre(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=r+yS(a,l++),o+=w0(a,e,n,c,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function _b(t,e,n){if(t==null)return t;var r=[],s=0;return w0(t,r,"","",function(a){return e.call(n,a,s++)}),r}function zre(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qs={current:null},_0={transition:null},qre={ReactCurrentDispatcher:qs,ReactCurrentBatchConfig:_0,ReactCurrentOwner:kI};function W6(){throw Error("act(...) is not supported in production builds of React.")}Gt.Children={map:_b,forEach:function(t,e,n){_b(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return _b(t,function(){e++}),e},toArray:function(t){return _b(t,function(e){return e})||[]},only:function(t){if(!RI(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Gt.Component=vp;Gt.Fragment=Ire;Gt.Profiler=Rre;Gt.PureComponent=PI;Gt.StrictMode=kre;Gt.Suspense=Lre;Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qre;Gt.act=W6;Gt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=F6({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=kI.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)U6.call(e,c)&&!z6.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:px,type:t.type,key:s,ref:a,props:r,_owner:o}};Gt.createContext=function(t){return t={$$typeof:Mre,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ore,_context:t},t.Consumer=t};Gt.createElement=q6;Gt.createFactory=function(t){var e=q6.bind(null,t);return e.type=t,e};Gt.createRef=function(){return{current:null}};Gt.forwardRef=function(t){return{$$typeof:Dre,render:t}};Gt.isValidElement=RI;Gt.lazy=function(t){return{$$typeof:Fre,_payload:{_status:-1,_result:t},_init:zre}};Gt.memo=function(t,e){return{$$typeof:$re,type:t,compare:e===void 0?null:e}};Gt.startTransition=function(t){var e=_0.transition;_0.transition={};try{t()}finally{_0.transition=e}};Gt.unstable_act=W6;Gt.useCallback=function(t,e){return qs.current.useCallback(t,e)};Gt.useContext=function(t){return qs.current.useContext(t)};Gt.useDebugValue=function(){};Gt.useDeferredValue=function(t){return qs.current.useDeferredValue(t)};Gt.useEffect=function(t,e){return qs.current.useEffect(t,e)};Gt.useId=function(){return qs.current.useId()};Gt.useImperativeHandle=function(t,e,n){return qs.current.useImperativeHandle(t,e,n)};Gt.useInsertionEffect=function(t,e){return qs.current.useInsertionEffect(t,e)};Gt.useLayoutEffect=function(t,e){return qs.current.useLayoutEffect(t,e)};Gt.useMemo=function(t,e){return qs.current.useMemo(t,e)};Gt.useReducer=function(t,e,n){return qs.current.useReducer(t,e,n)};Gt.useRef=function(t){return qs.current.useRef(t)};Gt.useState=function(t){return qs.current.useState(t)};Gt.useSyncExternalStore=function(t,e,n){return qs.current.useSyncExternalStore(t,e,n)};Gt.useTransition=function(){return qs.current.useTransition()};Gt.version="18.3.1";L6.exports=Gt;var N=L6.exports;const D=gn(N),OI=Cre({__proto__:null,default:D},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wre=N,Hre=Symbol.for("react.element"),Kre=Symbol.for("react.fragment"),Gre=Object.prototype.hasOwnProperty,Yre=Wre.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qre={key:!0,ref:!0,__self:!0,__source:!0};function H6(t,e,n){var r,s={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Gre.call(e,r)&&!Qre.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Hre,type:t,key:a,ref:o,props:s,_owner:Yre.current}}Pj.Fragment=Kre;Pj.jsx=H6;Pj.jsxs=H6;D6.exports=Pj;var i=D6.exports,K6={exports:{}},Di={},G6={exports:{}},Y6={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,F){var Y=V.length;V.push(F);e:for(;0<Y;){var ae=Y-1>>>1,oe=V[ae];if(0<s(oe,F))V[ae]=F,V[Y]=oe,Y=ae;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var F=V[0],Y=V.pop();if(Y!==F){V[0]=Y;e:for(var ae=0,oe=V.length,me=oe>>>1;ae<me;){var ke=2*(ae+1)-1,ut=V[ke],jt=ke+1,Ne=V[jt];if(0>s(ut,Y))jt<oe&&0>s(Ne,ut)?(V[ae]=Ne,V[jt]=Y,ae=jt):(V[ae]=ut,V[ke]=Y,ae=ke);else if(jt<oe&&0>s(Ne,Y))V[ae]=Ne,V[jt]=Y,ae=jt;else break e}}return F}function s(V,F){var Y=V.sortIndex-F.sortIndex;return Y!==0?Y:V.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,v=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(V){for(var F=n(u);F!==null;){if(F.callback===null)r(u);else if(F.startTime<=V)r(u),F.sortIndex=F.expirationTime,e(c,F);else break;F=n(u)}}function T(V){if(g=!1,E(V),!v)if(n(c)!==null)v=!0,W(x);else{var F=n(u);F!==null&&M(T,F.startTime-V)}}function x(V,F){v=!1,g&&(g=!1,w(p),p=-1),m=!0;var Y=f;try{for(E(F),h=n(c);h!==null&&(!(h.expirationTime>F)||V&&!C());){var ae=h.callback;if(typeof ae=="function"){h.callback=null,f=h.priorityLevel;var oe=ae(h.expirationTime<=F);F=t.unstable_now(),typeof oe=="function"?h.callback=oe:h===n(c)&&r(c),E(F)}else r(c);h=n(c)}if(h!==null)var me=!0;else{var ke=n(u);ke!==null&&M(T,ke.startTime-F),me=!1}return me}finally{h=null,f=Y,m=!1}}var S=!1,_=null,p=-1,A=5,P=-1;function C(){return!(t.unstable_now()-P<A)}function I(){if(_!==null){var V=t.unstable_now();P=V;var F=!0;try{F=_(!0,V)}finally{F?R():(S=!1,_=null)}}else S=!1}var R;if(typeof b=="function")R=function(){b(I)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,z=L.port2;L.port1.onmessage=I,R=function(){z.postMessage(null)}}else R=function(){y(I,0)};function W(V){_=V,S||(S=!0,R())}function M(V,F){p=y(function(){V(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,W(x))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(V){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var Y=f;f=F;try{return V()}finally{f=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,F){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Y=f;f=V;try{return F()}finally{f=Y}},t.unstable_scheduleCallback=function(V,F,Y){var ae=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ae+Y:ae):Y=ae,V){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=Y+oe,V={id:d++,callback:F,priorityLevel:V,startTime:Y,expirationTime:oe,sortIndex:-1},Y>ae?(V.sortIndex=Y,e(u,V),n(c)===null&&V===n(u)&&(g?(w(p),p=-1):g=!0,M(T,Y-ae))):(V.sortIndex=oe,e(c,V),v||m||(v=!0,W(x))),V},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(V){var F=f;return function(){var Y=f;f=F;try{return V.apply(this,arguments)}finally{f=Y}}}})(Y6);G6.exports=Y6;var Xre=G6.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zre=N,Oi=Xre;function Ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Q6=new Set,My={};function Nh(t,e){ym(t,e),ym(t+"Capture",e)}function ym(t,e){for(My[t]=e,t=0;t<e.length;t++)Q6.add(e[t])}var wl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_A=Object.prototype.hasOwnProperty,Jre=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yD={},vD={};function ese(t){return _A.call(vD,t)?!0:_A.call(yD,t)?!1:Jre.test(t)?vD[t]=!0:(yD[t]=!0,!1)}function tse(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nse(t,e,n,r){if(e===null||typeof e>"u"||tse(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ws(t,e,n,r,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var cs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){cs[t]=new Ws(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];cs[e]=new Ws(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){cs[t]=new Ws(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){cs[t]=new Ws(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){cs[t]=new Ws(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){cs[t]=new Ws(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){cs[t]=new Ws(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){cs[t]=new Ws(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){cs[t]=new Ws(t,5,!1,t.toLowerCase(),null,!1,!1)});var MI=/[\-:]([a-z])/g;function DI(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(MI,DI);cs[e]=new Ws(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(MI,DI);cs[e]=new Ws(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(MI,DI);cs[e]=new Ws(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){cs[t]=new Ws(t,1,!1,t.toLowerCase(),null,!1,!1)});cs.xlinkHref=new Ws("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){cs[t]=new Ws(t,1,!1,t.toLowerCase(),null,!0,!0)});function LI(t,e,n,r){var s=cs.hasOwnProperty(e)?cs[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nse(e,n,s,r)&&(n=null),r||s===null?ese(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Vl=Zre.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jb=Symbol.for("react.element"),df=Symbol.for("react.portal"),hf=Symbol.for("react.fragment"),$I=Symbol.for("react.strict_mode"),jA=Symbol.for("react.profiler"),X6=Symbol.for("react.provider"),Z6=Symbol.for("react.context"),FI=Symbol.for("react.forward_ref"),NA=Symbol.for("react.suspense"),SA=Symbol.for("react.suspense_list"),VI=Symbol.for("react.memo"),mc=Symbol.for("react.lazy"),J6=Symbol.for("react.offscreen"),xD=Symbol.iterator;function pg(t){return t===null||typeof t!="object"?null:(t=xD&&t[xD]||t["@@iterator"],typeof t=="function"?t:null)}var tr=Object.assign,vS;function qg(t){if(vS===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);vS=e&&e[1]||""}return`
`+vS+t}var xS=!1;function bS(t,e){if(!t||xS)return"";xS=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=r.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{xS=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?qg(t):""}function rse(t){switch(t.tag){case 5:return qg(t.type);case 16:return qg("Lazy");case 13:return qg("Suspense");case 19:return qg("SuspenseList");case 0:case 2:case 15:return t=bS(t.type,!1),t;case 11:return t=bS(t.type.render,!1),t;case 1:return t=bS(t.type,!0),t;default:return""}}function EA(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case hf:return"Fragment";case df:return"Portal";case jA:return"Profiler";case $I:return"StrictMode";case NA:return"Suspense";case SA:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Z6:return(t.displayName||"Context")+".Consumer";case X6:return(t._context.displayName||"Context")+".Provider";case FI:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case VI:return e=t.displayName||null,e!==null?e:EA(t.type)||"Memo";case mc:e=t._payload,t=t._init;try{return EA(t(e))}catch{}}return null}function sse(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return EA(e);case 8:return e===$I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ou(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ez(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ise(t){var e=ez(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nb(t){t._valueTracker||(t._valueTracker=ise(t))}function tz(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ez(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function rw(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function AA(t,e){var n=e.checked;return tr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function bD(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ou(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function nz(t,e){e=e.checked,e!=null&&LI(t,"checked",e,!1)}function TA(t,e){nz(t,e);var n=ou(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?CA(t,e.type,n):e.hasOwnProperty("defaultValue")&&CA(t,e.type,ou(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function wD(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function CA(t,e,n){(e!=="number"||rw(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wg=Array.isArray;function Of(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ou(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function PA(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ae(91));return tr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _D(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ae(92));if(Wg(n)){if(1<n.length)throw Error(Ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ou(n)}}function rz(t,e){var n=ou(e.value),r=ou(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function jD(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function sz(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function IA(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?sz(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Sb,iz=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Sb=Sb||document.createElement("div"),Sb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Sb.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Dy(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ay={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ase=["Webkit","ms","Moz","O"];Object.keys(ay).forEach(function(t){ase.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ay[e]=ay[t]})});function az(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ay.hasOwnProperty(t)&&ay[t]?(""+e).trim():e+"px"}function oz(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=az(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var ose=tr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kA(t,e){if(e){if(ose[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ae(62))}}function RA(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var OA=null;function BI(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var MA=null,Mf=null,Df=null;function ND(t){if(t=vx(t)){if(typeof MA!="function")throw Error(Ae(280));var e=t.stateNode;e&&(e=Mj(e),MA(t.stateNode,t.type,e))}}function lz(t){Mf?Df?Df.push(t):Df=[t]:Mf=t}function cz(){if(Mf){var t=Mf,e=Df;if(Df=Mf=null,ND(t),e)for(t=0;t<e.length;t++)ND(e[t])}}function uz(t,e){return t(e)}function dz(){}var wS=!1;function hz(t,e,n){if(wS)return t(e,n);wS=!0;try{return uz(t,e,n)}finally{wS=!1,(Mf!==null||Df!==null)&&(dz(),cz())}}function Ly(t,e){var n=t.stateNode;if(n===null)return null;var r=Mj(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ae(231,e,typeof n));return n}var DA=!1;if(wl)try{var gg={};Object.defineProperty(gg,"passive",{get:function(){DA=!0}}),window.addEventListener("test",gg,gg),window.removeEventListener("test",gg,gg)}catch{DA=!1}function lse(t,e,n,r,s,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var oy=!1,sw=null,iw=!1,LA=null,cse={onError:function(t){oy=!0,sw=t}};function use(t,e,n,r,s,a,o,l,c){oy=!1,sw=null,lse.apply(cse,arguments)}function dse(t,e,n,r,s,a,o,l,c){if(use.apply(this,arguments),oy){if(oy){var u=sw;oy=!1,sw=null}else throw Error(Ae(198));iw||(iw=!0,LA=u)}}function Sh(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function fz(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function SD(t){if(Sh(t)!==t)throw Error(Ae(188))}function hse(t){var e=t.alternate;if(!e){if(e=Sh(t),e===null)throw Error(Ae(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return SD(s),t;if(a===r)return SD(s),e;a=a.sibling}throw Error(Ae(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(Ae(189))}}if(n.alternate!==r)throw Error(Ae(190))}if(n.tag!==3)throw Error(Ae(188));return n.stateNode.current===n?t:e}function mz(t){return t=hse(t),t!==null?pz(t):null}function pz(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=pz(t);if(e!==null)return e;t=t.sibling}return null}var gz=Oi.unstable_scheduleCallback,ED=Oi.unstable_cancelCallback,fse=Oi.unstable_shouldYield,mse=Oi.unstable_requestPaint,vr=Oi.unstable_now,pse=Oi.unstable_getCurrentPriorityLevel,UI=Oi.unstable_ImmediatePriority,yz=Oi.unstable_UserBlockingPriority,aw=Oi.unstable_NormalPriority,gse=Oi.unstable_LowPriority,vz=Oi.unstable_IdlePriority,Ij=null,wo=null;function yse(t){if(wo&&typeof wo.onCommitFiberRoot=="function")try{wo.onCommitFiberRoot(Ij,t,void 0,(t.current.flags&128)===128)}catch{}}var Fa=Math.clz32?Math.clz32:bse,vse=Math.log,xse=Math.LN2;function bse(t){return t>>>=0,t===0?32:31-(vse(t)/xse|0)|0}var Eb=64,Ab=4194304;function Hg(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ow(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Hg(l):(a&=o,a!==0&&(r=Hg(a)))}else o=n&~s,o!==0?r=Hg(o):a!==0&&(r=Hg(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Fa(e),s=1<<n,r|=t[n],e&=~s;return r}function wse(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _se(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Fa(a),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=wse(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function $A(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function xz(){var t=Eb;return Eb<<=1,!(Eb&4194240)&&(Eb=64),t}function _S(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gx(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fa(e),t[e]=n}function jse(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Fa(n),a=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~a}}function zI(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Fa(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var xn=0;function bz(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var wz,qI,_z,jz,Nz,FA=!1,Tb=[],qc=null,Wc=null,Hc=null,$y=new Map,Fy=new Map,vc=[],Nse="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function AD(t,e){switch(t){case"focusin":case"focusout":qc=null;break;case"dragenter":case"dragleave":Wc=null;break;case"mouseover":case"mouseout":Hc=null;break;case"pointerover":case"pointerout":$y.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fy.delete(e.pointerId)}}function yg(t,e,n,r,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},e!==null&&(e=vx(e),e!==null&&qI(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Sse(t,e,n,r,s){switch(e){case"focusin":return qc=yg(qc,t,e,n,r,s),!0;case"dragenter":return Wc=yg(Wc,t,e,n,r,s),!0;case"mouseover":return Hc=yg(Hc,t,e,n,r,s),!0;case"pointerover":var a=s.pointerId;return $y.set(a,yg($y.get(a)||null,t,e,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Fy.set(a,yg(Fy.get(a)||null,t,e,n,r,s)),!0}return!1}function Sz(t){var e=pd(t.target);if(e!==null){var n=Sh(e);if(n!==null){if(e=n.tag,e===13){if(e=fz(n),e!==null){t.blockedOn=e,Nz(t.priority,function(){_z(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function j0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=VA(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);OA=r,n.target.dispatchEvent(r),OA=null}else return e=vx(n),e!==null&&qI(e),t.blockedOn=n,!1;e.shift()}return!0}function TD(t,e,n){j0(t)&&n.delete(e)}function Ese(){FA=!1,qc!==null&&j0(qc)&&(qc=null),Wc!==null&&j0(Wc)&&(Wc=null),Hc!==null&&j0(Hc)&&(Hc=null),$y.forEach(TD),Fy.forEach(TD)}function vg(t,e){t.blockedOn===e&&(t.blockedOn=null,FA||(FA=!0,Oi.unstable_scheduleCallback(Oi.unstable_NormalPriority,Ese)))}function Vy(t){function e(s){return vg(s,t)}if(0<Tb.length){vg(Tb[0],t);for(var n=1;n<Tb.length;n++){var r=Tb[n];r.blockedOn===t&&(r.blockedOn=null)}}for(qc!==null&&vg(qc,t),Wc!==null&&vg(Wc,t),Hc!==null&&vg(Hc,t),$y.forEach(e),Fy.forEach(e),n=0;n<vc.length;n++)r=vc[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<vc.length&&(n=vc[0],n.blockedOn===null);)Sz(n),n.blockedOn===null&&vc.shift()}var Lf=Vl.ReactCurrentBatchConfig,lw=!0;function Ase(t,e,n,r){var s=xn,a=Lf.transition;Lf.transition=null;try{xn=1,WI(t,e,n,r)}finally{xn=s,Lf.transition=a}}function Tse(t,e,n,r){var s=xn,a=Lf.transition;Lf.transition=null;try{xn=4,WI(t,e,n,r)}finally{xn=s,Lf.transition=a}}function WI(t,e,n,r){if(lw){var s=VA(t,e,n,r);if(s===null)kS(t,e,r,cw,n),AD(t,r);else if(Sse(s,t,e,n,r))r.stopPropagation();else if(AD(t,r),e&4&&-1<Nse.indexOf(t)){for(;s!==null;){var a=vx(s);if(a!==null&&wz(a),a=VA(t,e,n,r),a===null&&kS(t,e,r,cw,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else kS(t,e,r,null,n)}}var cw=null;function VA(t,e,n,r){if(cw=null,t=BI(r),t=pd(t),t!==null)if(e=Sh(t),e===null)t=null;else if(n=e.tag,n===13){if(t=fz(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return cw=t,null}function Ez(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pse()){case UI:return 1;case yz:return 4;case aw:case gse:return 16;case vz:return 536870912;default:return 16}default:return 16}}var Dc=null,HI=null,N0=null;function Az(){if(N0)return N0;var t,e=HI,n=e.length,r,s="value"in Dc?Dc.value:Dc.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[a-r];r++);return N0=s.slice(t,1<r?1-r:void 0)}function S0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Cb(){return!0}function CD(){return!1}function Li(t){function e(n,r,s,a,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Cb:CD,this.isPropagationStopped=CD,this}return tr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cb)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cb)},persist:function(){},isPersistent:Cb}),e}var xp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},KI=Li(xp),yx=tr({},xp,{view:0,detail:0}),Cse=Li(yx),jS,NS,xg,kj=tr({},yx,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:GI,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xg&&(xg&&t.type==="mousemove"?(jS=t.screenX-xg.screenX,NS=t.screenY-xg.screenY):NS=jS=0,xg=t),jS)},movementY:function(t){return"movementY"in t?t.movementY:NS}}),PD=Li(kj),Pse=tr({},kj,{dataTransfer:0}),Ise=Li(Pse),kse=tr({},yx,{relatedTarget:0}),SS=Li(kse),Rse=tr({},xp,{animationName:0,elapsedTime:0,pseudoElement:0}),Ose=Li(Rse),Mse=tr({},xp,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Dse=Li(Mse),Lse=tr({},xp,{data:0}),ID=Li(Lse),$se={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fse={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vse={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bse(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Vse[t])?!!e[t]:!1}function GI(){return Bse}var Use=tr({},yx,{key:function(t){if(t.key){var e=$se[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=S0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Fse[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:GI,charCode:function(t){return t.type==="keypress"?S0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?S0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zse=Li(Use),qse=tr({},kj,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kD=Li(qse),Wse=tr({},yx,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:GI}),Hse=Li(Wse),Kse=tr({},xp,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gse=Li(Kse),Yse=tr({},kj,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Qse=Li(Yse),Xse=[9,13,27,32],YI=wl&&"CompositionEvent"in window,ly=null;wl&&"documentMode"in document&&(ly=document.documentMode);var Zse=wl&&"TextEvent"in window&&!ly,Tz=wl&&(!YI||ly&&8<ly&&11>=ly),RD=" ",OD=!1;function Cz(t,e){switch(t){case"keyup":return Xse.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pz(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ff=!1;function Jse(t,e){switch(t){case"compositionend":return Pz(e);case"keypress":return e.which!==32?null:(OD=!0,RD);case"textInput":return t=e.data,t===RD&&OD?null:t;default:return null}}function eie(t,e){if(ff)return t==="compositionend"||!YI&&Cz(t,e)?(t=Az(),N0=HI=Dc=null,ff=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Tz&&e.locale!=="ko"?null:e.data;default:return null}}var tie={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function MD(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tie[t.type]:e==="textarea"}function Iz(t,e,n,r){lz(r),e=uw(e,"onChange"),0<e.length&&(n=new KI("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var cy=null,By=null;function nie(t){Uz(t,0)}function Rj(t){var e=gf(t);if(tz(e))return t}function rie(t,e){if(t==="change")return e}var kz=!1;if(wl){var ES;if(wl){var AS="oninput"in document;if(!AS){var DD=document.createElement("div");DD.setAttribute("oninput","return;"),AS=typeof DD.oninput=="function"}ES=AS}else ES=!1;kz=ES&&(!document.documentMode||9<document.documentMode)}function LD(){cy&&(cy.detachEvent("onpropertychange",Rz),By=cy=null)}function Rz(t){if(t.propertyName==="value"&&Rj(By)){var e=[];Iz(e,By,t,BI(t)),hz(nie,e)}}function sie(t,e,n){t==="focusin"?(LD(),cy=e,By=n,cy.attachEvent("onpropertychange",Rz)):t==="focusout"&&LD()}function iie(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Rj(By)}function aie(t,e){if(t==="click")return Rj(e)}function oie(t,e){if(t==="input"||t==="change")return Rj(e)}function lie(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wa=typeof Object.is=="function"?Object.is:lie;function Uy(t,e){if(Wa(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!_A.call(e,s)||!Wa(t[s],e[s]))return!1}return!0}function $D(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function FD(t,e){var n=$D(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$D(n)}}function Oz(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Oz(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Mz(){for(var t=window,e=rw();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=rw(t.document)}return e}function QI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function cie(t){var e=Mz(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Oz(n.ownerDocument.documentElement,n)){if(r!==null&&QI(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!t.extend&&a>r&&(s=r,r=a,a=s),s=FD(n,a);var o=FD(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uie=wl&&"documentMode"in document&&11>=document.documentMode,mf=null,BA=null,uy=null,UA=!1;function VD(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;UA||mf==null||mf!==rw(r)||(r=mf,"selectionStart"in r&&QI(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),uy&&Uy(uy,r)||(uy=r,r=uw(BA,"onSelect"),0<r.length&&(e=new KI("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=mf)))}function Pb(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var pf={animationend:Pb("Animation","AnimationEnd"),animationiteration:Pb("Animation","AnimationIteration"),animationstart:Pb("Animation","AnimationStart"),transitionend:Pb("Transition","TransitionEnd")},TS={},Dz={};wl&&(Dz=document.createElement("div").style,"AnimationEvent"in window||(delete pf.animationend.animation,delete pf.animationiteration.animation,delete pf.animationstart.animation),"TransitionEvent"in window||delete pf.transitionend.transition);function Oj(t){if(TS[t])return TS[t];if(!pf[t])return t;var e=pf[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Dz)return TS[t]=e[n];return t}var Lz=Oj("animationend"),$z=Oj("animationiteration"),Fz=Oj("animationstart"),Vz=Oj("transitionend"),Bz=new Map,BD="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cu(t,e){Bz.set(t,e),Nh(e,[t])}for(var CS=0;CS<BD.length;CS++){var PS=BD[CS],die=PS.toLowerCase(),hie=PS[0].toUpperCase()+PS.slice(1);Cu(die,"on"+hie)}Cu(Lz,"onAnimationEnd");Cu($z,"onAnimationIteration");Cu(Fz,"onAnimationStart");Cu("dblclick","onDoubleClick");Cu("focusin","onFocus");Cu("focusout","onBlur");Cu(Vz,"onTransitionEnd");ym("onMouseEnter",["mouseout","mouseover"]);ym("onMouseLeave",["mouseout","mouseover"]);ym("onPointerEnter",["pointerout","pointerover"]);ym("onPointerLeave",["pointerout","pointerover"]);Nh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Nh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Nh("onBeforeInput",["compositionend","keypress","textInput","paste"]);Nh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Nh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Nh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fie=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kg));function UD(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,dse(r,e,void 0,t),t.currentTarget=null}function Uz(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;UD(s,l,u),a=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;UD(s,l,u),a=c}}}if(iw)throw t=LA,iw=!1,LA=null,t}function $n(t,e){var n=e[KA];n===void 0&&(n=e[KA]=new Set);var r=t+"__bubble";n.has(r)||(zz(e,t,2,!1),n.add(r))}function IS(t,e,n){var r=0;e&&(r|=4),zz(n,t,r,e)}var Ib="_reactListening"+Math.random().toString(36).slice(2);function zy(t){if(!t[Ib]){t[Ib]=!0,Q6.forEach(function(n){n!=="selectionchange"&&(fie.has(n)||IS(n,!1,t),IS(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ib]||(e[Ib]=!0,IS("selectionchange",!1,e))}}function zz(t,e,n,r){switch(Ez(e)){case 1:var s=Ase;break;case 4:s=Tse;break;default:s=WI}n=s.bind(null,e,n,t),s=void 0,!DA||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function kS(t,e,n,r,s){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=pd(l),o===null)return;if(c=o.tag,c===5||c===6){r=a=o;continue e}l=l.parentNode}}r=r.return}hz(function(){var u=a,d=BI(n),h=[];e:{var f=Bz.get(t);if(f!==void 0){var m=KI,v=t;switch(t){case"keypress":if(S0(n)===0)break e;case"keydown":case"keyup":m=zse;break;case"focusin":v="focus",m=SS;break;case"focusout":v="blur",m=SS;break;case"beforeblur":case"afterblur":m=SS;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=PD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Ise;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Hse;break;case Lz:case $z:case Fz:m=Ose;break;case Vz:m=Gse;break;case"scroll":m=Cse;break;case"wheel":m=Qse;break;case"copy":case"cut":case"paste":m=Dse;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=kD}var g=(e&4)!==0,y=!g&&t==="scroll",w=g?f!==null?f+"Capture":null:f;g=[];for(var b=u,E;b!==null;){E=b;var T=E.stateNode;if(E.tag===5&&T!==null&&(E=T,w!==null&&(T=Ly(b,w),T!=null&&g.push(qy(b,T,E)))),y)break;b=b.return}0<g.length&&(f=new m(f,v,null,n,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==OA&&(v=n.relatedTarget||n.fromElement)&&(pd(v)||v[_l]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=u,v=v?pd(v):null,v!==null&&(y=Sh(v),v!==y||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(g=PD,T="onMouseLeave",w="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=kD,T="onPointerLeave",w="onPointerEnter",b="pointer"),y=m==null?f:gf(m),E=v==null?f:gf(v),f=new g(T,b+"leave",m,n,d),f.target=y,f.relatedTarget=E,T=null,pd(d)===u&&(g=new g(w,b+"enter",v,n,d),g.target=E,g.relatedTarget=y,T=g),y=T,m&&v)t:{for(g=m,w=v,b=0,E=g;E;E=qh(E))b++;for(E=0,T=w;T;T=qh(T))E++;for(;0<b-E;)g=qh(g),b--;for(;0<E-b;)w=qh(w),E--;for(;b--;){if(g===w||w!==null&&g===w.alternate)break t;g=qh(g),w=qh(w)}g=null}else g=null;m!==null&&zD(h,f,m,g,!1),v!==null&&y!==null&&zD(h,y,v,g,!0)}}e:{if(f=u?gf(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var x=rie;else if(MD(f))if(kz)x=oie;else{x=iie;var S=sie}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(x=aie);if(x&&(x=x(t,u))){Iz(h,x,n,d);break e}S&&S(t,f,u),t==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&CA(f,"number",f.value)}switch(S=u?gf(u):window,t){case"focusin":(MD(S)||S.contentEditable==="true")&&(mf=S,BA=u,uy=null);break;case"focusout":uy=BA=mf=null;break;case"mousedown":UA=!0;break;case"contextmenu":case"mouseup":case"dragend":UA=!1,VD(h,n,d);break;case"selectionchange":if(uie)break;case"keydown":case"keyup":VD(h,n,d)}var _;if(YI)e:{switch(t){case"compositionstart":var p="onCompositionStart";break e;case"compositionend":p="onCompositionEnd";break e;case"compositionupdate":p="onCompositionUpdate";break e}p=void 0}else ff?Cz(t,n)&&(p="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(p="onCompositionStart");p&&(Tz&&n.locale!=="ko"&&(ff||p!=="onCompositionStart"?p==="onCompositionEnd"&&ff&&(_=Az()):(Dc=d,HI="value"in Dc?Dc.value:Dc.textContent,ff=!0)),S=uw(u,p),0<S.length&&(p=new ID(p,t,null,n,d),h.push({event:p,listeners:S}),_?p.data=_:(_=Pz(n),_!==null&&(p.data=_)))),(_=Zse?Jse(t,n):eie(t,n))&&(u=uw(u,"onBeforeInput"),0<u.length&&(d=new ID("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=_))}Uz(h,e)})}function qy(t,e,n){return{instance:t,listener:e,currentTarget:n}}function uw(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Ly(t,n),a!=null&&r.unshift(qy(t,a,s)),a=Ly(t,e),a!=null&&r.push(qy(t,a,s))),t=t.return}return r}function qh(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function zD(t,e,n,r,s){for(var a=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Ly(n,a),c!=null&&o.unshift(qy(n,c,l))):s||(c=Ly(n,a),c!=null&&o.push(qy(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var mie=/\r\n?/g,pie=/\u0000|\uFFFD/g;function qD(t){return(typeof t=="string"?t:""+t).replace(mie,`
`).replace(pie,"")}function kb(t,e,n){if(e=qD(e),qD(t)!==e&&n)throw Error(Ae(425))}function dw(){}var zA=null,qA=null;function WA(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var HA=typeof setTimeout=="function"?setTimeout:void 0,gie=typeof clearTimeout=="function"?clearTimeout:void 0,WD=typeof Promise=="function"?Promise:void 0,yie=typeof queueMicrotask=="function"?queueMicrotask:typeof WD<"u"?function(t){return WD.resolve(null).then(t).catch(vie)}:HA;function vie(t){setTimeout(function(){throw t})}function RS(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Vy(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Vy(e)}function Kc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function HD(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var bp=Math.random().toString(36).slice(2),mo="__reactFiber$"+bp,Wy="__reactProps$"+bp,_l="__reactContainer$"+bp,KA="__reactEvents$"+bp,xie="__reactListeners$"+bp,bie="__reactHandles$"+bp;function pd(t){var e=t[mo];if(e)return e;for(var n=t.parentNode;n;){if(e=n[_l]||n[mo]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=HD(t);t!==null;){if(n=t[mo])return n;t=HD(t)}return e}t=n,n=t.parentNode}return null}function vx(t){return t=t[mo]||t[_l],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function gf(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ae(33))}function Mj(t){return t[Wy]||null}var GA=[],yf=-1;function Pu(t){return{current:t}}function Un(t){0>yf||(t.current=GA[yf],GA[yf]=null,yf--)}function kn(t,e){yf++,GA[yf]=t.current,t.current=e}var lu={},As=Pu(lu),ui=Pu(!1),Wd=lu;function vm(t,e){var n=t.type.contextTypes;if(!n)return lu;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function di(t){return t=t.childContextTypes,t!=null}function hw(){Un(ui),Un(As)}function KD(t,e,n){if(As.current!==lu)throw Error(Ae(168));kn(As,e),kn(ui,n)}function qz(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Ae(108,sse(t)||"Unknown",s));return tr({},n,r)}function fw(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||lu,Wd=As.current,kn(As,t),kn(ui,ui.current),!0}function GD(t,e,n){var r=t.stateNode;if(!r)throw Error(Ae(169));n?(t=qz(t,e,Wd),r.__reactInternalMemoizedMergedChildContext=t,Un(ui),Un(As),kn(As,t)):Un(ui),kn(ui,n)}var rl=null,Dj=!1,OS=!1;function Wz(t){rl===null?rl=[t]:rl.push(t)}function wie(t){Dj=!0,Wz(t)}function Iu(){if(!OS&&rl!==null){OS=!0;var t=0,e=xn;try{var n=rl;for(xn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}rl=null,Dj=!1}catch(s){throw rl!==null&&(rl=rl.slice(t+1)),gz(UI,Iu),s}finally{xn=e,OS=!1}}return null}var vf=[],xf=0,mw=null,pw=0,Wi=[],Hi=0,Hd=null,ol=1,ll="";function ad(t,e){vf[xf++]=pw,vf[xf++]=mw,mw=t,pw=e}function Hz(t,e,n){Wi[Hi++]=ol,Wi[Hi++]=ll,Wi[Hi++]=Hd,Hd=t;var r=ol;t=ll;var s=32-Fa(r)-1;r&=~(1<<s),n+=1;var a=32-Fa(e)+s;if(30<a){var o=s-s%5;a=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ol=1<<32-Fa(e)+s|n<<s|r,ll=a+t}else ol=1<<a|n<<s|r,ll=t}function XI(t){t.return!==null&&(ad(t,1),Hz(t,1,0))}function ZI(t){for(;t===mw;)mw=vf[--xf],vf[xf]=null,pw=vf[--xf],vf[xf]=null;for(;t===Hd;)Hd=Wi[--Hi],Wi[Hi]=null,ll=Wi[--Hi],Wi[Hi]=null,ol=Wi[--Hi],Wi[Hi]=null}var Ti=null,Si=null,zn=!1,ka=null;function Kz(t,e){var n=Yi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function YD(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ti=t,Si=Kc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ti=t,Si=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Hd!==null?{id:ol,overflow:ll}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ti=t,Si=null,!0):!1;default:return!1}}function YA(t){return(t.mode&1)!==0&&(t.flags&128)===0}function QA(t){if(zn){var e=Si;if(e){var n=e;if(!YD(t,e)){if(YA(t))throw Error(Ae(418));e=Kc(n.nextSibling);var r=Ti;e&&YD(t,e)?Kz(r,n):(t.flags=t.flags&-4097|2,zn=!1,Ti=t)}}else{if(YA(t))throw Error(Ae(418));t.flags=t.flags&-4097|2,zn=!1,Ti=t}}}function QD(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ti=t}function Rb(t){if(t!==Ti)return!1;if(!zn)return QD(t),zn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!WA(t.type,t.memoizedProps)),e&&(e=Si)){if(YA(t))throw Gz(),Error(Ae(418));for(;e;)Kz(t,e),e=Kc(e.nextSibling)}if(QD(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Si=Kc(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Si=null}}else Si=Ti?Kc(t.stateNode.nextSibling):null;return!0}function Gz(){for(var t=Si;t;)t=Kc(t.nextSibling)}function xm(){Si=Ti=null,zn=!1}function JI(t){ka===null?ka=[t]:ka.push(t)}var _ie=Vl.ReactCurrentBatchConfig;function bg(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ae(309));var r=n.stateNode}if(!r)throw Error(Ae(147,t));var s=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(Ae(284));if(!n._owner)throw Error(Ae(290,t))}return t}function Ob(t,e){throw t=Object.prototype.toString.call(e),Error(Ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function XD(t){var e=t._init;return e(t._payload)}function Yz(t){function e(w,b){if(t){var E=w.deletions;E===null?(w.deletions=[b],w.flags|=16):E.push(b)}}function n(w,b){if(!t)return null;for(;b!==null;)e(w,b),b=b.sibling;return null}function r(w,b){for(w=new Map;b!==null;)b.key!==null?w.set(b.key,b):w.set(b.index,b),b=b.sibling;return w}function s(w,b){return w=Xc(w,b),w.index=0,w.sibling=null,w}function a(w,b,E){return w.index=E,t?(E=w.alternate,E!==null?(E=E.index,E<b?(w.flags|=2,b):E):(w.flags|=2,b)):(w.flags|=1048576,b)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,b,E,T){return b===null||b.tag!==6?(b=BS(E,w.mode,T),b.return=w,b):(b=s(b,E),b.return=w,b)}function c(w,b,E,T){var x=E.type;return x===hf?d(w,b,E.props.children,T,E.key):b!==null&&(b.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===mc&&XD(x)===b.type)?(T=s(b,E.props),T.ref=bg(w,b,E),T.return=w,T):(T=k0(E.type,E.key,E.props,null,w.mode,T),T.ref=bg(w,b,E),T.return=w,T)}function u(w,b,E,T){return b===null||b.tag!==4||b.stateNode.containerInfo!==E.containerInfo||b.stateNode.implementation!==E.implementation?(b=US(E,w.mode,T),b.return=w,b):(b=s(b,E.children||[]),b.return=w,b)}function d(w,b,E,T,x){return b===null||b.tag!==7?(b=Ld(E,w.mode,T,x),b.return=w,b):(b=s(b,E),b.return=w,b)}function h(w,b,E){if(typeof b=="string"&&b!==""||typeof b=="number")return b=BS(""+b,w.mode,E),b.return=w,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case jb:return E=k0(b.type,b.key,b.props,null,w.mode,E),E.ref=bg(w,null,b),E.return=w,E;case df:return b=US(b,w.mode,E),b.return=w,b;case mc:var T=b._init;return h(w,T(b._payload),E)}if(Wg(b)||pg(b))return b=Ld(b,w.mode,E,null),b.return=w,b;Ob(w,b)}return null}function f(w,b,E,T){var x=b!==null?b.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return x!==null?null:l(w,b,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case jb:return E.key===x?c(w,b,E,T):null;case df:return E.key===x?u(w,b,E,T):null;case mc:return x=E._init,f(w,b,x(E._payload),T)}if(Wg(E)||pg(E))return x!==null?null:d(w,b,E,T,null);Ob(w,E)}return null}function m(w,b,E,T,x){if(typeof T=="string"&&T!==""||typeof T=="number")return w=w.get(E)||null,l(b,w,""+T,x);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case jb:return w=w.get(T.key===null?E:T.key)||null,c(b,w,T,x);case df:return w=w.get(T.key===null?E:T.key)||null,u(b,w,T,x);case mc:var S=T._init;return m(w,b,E,S(T._payload),x)}if(Wg(T)||pg(T))return w=w.get(E)||null,d(b,w,T,x,null);Ob(b,T)}return null}function v(w,b,E,T){for(var x=null,S=null,_=b,p=b=0,A=null;_!==null&&p<E.length;p++){_.index>p?(A=_,_=null):A=_.sibling;var P=f(w,_,E[p],T);if(P===null){_===null&&(_=A);break}t&&_&&P.alternate===null&&e(w,_),b=a(P,b,p),S===null?x=P:S.sibling=P,S=P,_=A}if(p===E.length)return n(w,_),zn&&ad(w,p),x;if(_===null){for(;p<E.length;p++)_=h(w,E[p],T),_!==null&&(b=a(_,b,p),S===null?x=_:S.sibling=_,S=_);return zn&&ad(w,p),x}for(_=r(w,_);p<E.length;p++)A=m(_,w,p,E[p],T),A!==null&&(t&&A.alternate!==null&&_.delete(A.key===null?p:A.key),b=a(A,b,p),S===null?x=A:S.sibling=A,S=A);return t&&_.forEach(function(C){return e(w,C)}),zn&&ad(w,p),x}function g(w,b,E,T){var x=pg(E);if(typeof x!="function")throw Error(Ae(150));if(E=x.call(E),E==null)throw Error(Ae(151));for(var S=x=null,_=b,p=b=0,A=null,P=E.next();_!==null&&!P.done;p++,P=E.next()){_.index>p?(A=_,_=null):A=_.sibling;var C=f(w,_,P.value,T);if(C===null){_===null&&(_=A);break}t&&_&&C.alternate===null&&e(w,_),b=a(C,b,p),S===null?x=C:S.sibling=C,S=C,_=A}if(P.done)return n(w,_),zn&&ad(w,p),x;if(_===null){for(;!P.done;p++,P=E.next())P=h(w,P.value,T),P!==null&&(b=a(P,b,p),S===null?x=P:S.sibling=P,S=P);return zn&&ad(w,p),x}for(_=r(w,_);!P.done;p++,P=E.next())P=m(_,w,p,P.value,T),P!==null&&(t&&P.alternate!==null&&_.delete(P.key===null?p:P.key),b=a(P,b,p),S===null?x=P:S.sibling=P,S=P);return t&&_.forEach(function(I){return e(w,I)}),zn&&ad(w,p),x}function y(w,b,E,T){if(typeof E=="object"&&E!==null&&E.type===hf&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case jb:e:{for(var x=E.key,S=b;S!==null;){if(S.key===x){if(x=E.type,x===hf){if(S.tag===7){n(w,S.sibling),b=s(S,E.props.children),b.return=w,w=b;break e}}else if(S.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===mc&&XD(x)===S.type){n(w,S.sibling),b=s(S,E.props),b.ref=bg(w,S,E),b.return=w,w=b;break e}n(w,S);break}else e(w,S);S=S.sibling}E.type===hf?(b=Ld(E.props.children,w.mode,T,E.key),b.return=w,w=b):(T=k0(E.type,E.key,E.props,null,w.mode,T),T.ref=bg(w,b,E),T.return=w,w=T)}return o(w);case df:e:{for(S=E.key;b!==null;){if(b.key===S)if(b.tag===4&&b.stateNode.containerInfo===E.containerInfo&&b.stateNode.implementation===E.implementation){n(w,b.sibling),b=s(b,E.children||[]),b.return=w,w=b;break e}else{n(w,b);break}else e(w,b);b=b.sibling}b=US(E,w.mode,T),b.return=w,w=b}return o(w);case mc:return S=E._init,y(w,b,S(E._payload),T)}if(Wg(E))return v(w,b,E,T);if(pg(E))return g(w,b,E,T);Ob(w,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,b!==null&&b.tag===6?(n(w,b.sibling),b=s(b,E),b.return=w,w=b):(n(w,b),b=BS(E,w.mode,T),b.return=w,w=b),o(w)):n(w,b)}return y}var bm=Yz(!0),Qz=Yz(!1),gw=Pu(null),yw=null,bf=null,ek=null;function tk(){ek=bf=yw=null}function nk(t){var e=gw.current;Un(gw),t._currentValue=e}function XA(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function $f(t,e){yw=t,ek=bf=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(oi=!0),t.firstContext=null)}function aa(t){var e=t._currentValue;if(ek!==t)if(t={context:t,memoizedValue:e,next:null},bf===null){if(yw===null)throw Error(Ae(308));bf=t,yw.dependencies={lanes:0,firstContext:t}}else bf=bf.next=t;return e}var gd=null;function rk(t){gd===null?gd=[t]:gd.push(t)}function Xz(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,rk(e)):(n.next=s.next,s.next=n),e.interleaved=n,jl(t,r)}function jl(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var pc=!1;function sk(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zz(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ml(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gc(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,sn&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,jl(t,n)}return s=r.interleaved,s===null?(e.next=e,rk(r)):(e.next=s.next,s.next=e),r.interleaved=e,jl(t,n)}function E0(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,zI(t,n)}}function ZD(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function vw(t,e,n,r){var s=t.updateQueue;pc=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var h=s.baseState;o=0,d=u=c=null,l=a;do{var f=l.lane,m=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,g=l;switch(f=e,m=n,g.tag){case 1:if(v=g.payload,typeof v=="function"){h=v.call(m,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=g.payload,f=typeof v=="function"?v.call(m,h,f):v,f==null)break e;h=tr({},h,f);break e;case 2:pc=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);Gd|=o,t.lanes=o,t.memoizedState=h}}function JD(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Ae(191,s));s.call(r)}}}var xx={},_o=Pu(xx),Hy=Pu(xx),Ky=Pu(xx);function yd(t){if(t===xx)throw Error(Ae(174));return t}function ik(t,e){switch(kn(Ky,e),kn(Hy,t),kn(_o,xx),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:IA(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=IA(e,t)}Un(_o),kn(_o,e)}function wm(){Un(_o),Un(Hy),Un(Ky)}function Jz(t){yd(Ky.current);var e=yd(_o.current),n=IA(e,t.type);e!==n&&(kn(Hy,t),kn(_o,n))}function ak(t){Hy.current===t&&(Un(_o),Un(Hy))}var Qn=Pu(0);function xw(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var MS=[];function ok(){for(var t=0;t<MS.length;t++)MS[t]._workInProgressVersionPrimary=null;MS.length=0}var A0=Vl.ReactCurrentDispatcher,DS=Vl.ReactCurrentBatchConfig,Kd=0,Jn=null,Dr=null,Gr=null,bw=!1,dy=!1,Gy=0,jie=0;function ms(){throw Error(Ae(321))}function lk(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wa(t[n],e[n]))return!1;return!0}function ck(t,e,n,r,s,a){if(Kd=a,Jn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,A0.current=t===null||t.memoizedState===null?Aie:Tie,t=n(r,s),dy){a=0;do{if(dy=!1,Gy=0,25<=a)throw Error(Ae(301));a+=1,Gr=Dr=null,e.updateQueue=null,A0.current=Cie,t=n(r,s)}while(dy)}if(A0.current=ww,e=Dr!==null&&Dr.next!==null,Kd=0,Gr=Dr=Jn=null,bw=!1,e)throw Error(Ae(300));return t}function uk(){var t=Gy!==0;return Gy=0,t}function oo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gr===null?Jn.memoizedState=Gr=t:Gr=Gr.next=t,Gr}function oa(){if(Dr===null){var t=Jn.alternate;t=t!==null?t.memoizedState:null}else t=Dr.next;var e=Gr===null?Jn.memoizedState:Gr.next;if(e!==null)Gr=e,Dr=t;else{if(t===null)throw Error(Ae(310));Dr=t,t={memoizedState:Dr.memoizedState,baseState:Dr.baseState,baseQueue:Dr.baseQueue,queue:Dr.queue,next:null},Gr===null?Jn.memoizedState=Gr=t:Gr=Gr.next=t}return Gr}function Yy(t,e){return typeof e=="function"?e(t):e}function LS(t){var e=oa(),n=e.queue;if(n===null)throw Error(Ae(311));n.lastRenderedReducer=t;var r=Dr,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((Kd&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,Jn.lanes|=d,Gd|=d}u=u.next}while(u!==null&&u!==a);c===null?o=r:c.next=l,Wa(r,e.memoizedState)||(oi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do a=s.lane,Jn.lanes|=a,Gd|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function $S(t){var e=oa(),n=e.queue;if(n===null)throw Error(Ae(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);Wa(a,e.memoizedState)||(oi=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function e9(){}function t9(t,e){var n=Jn,r=oa(),s=e(),a=!Wa(r.memoizedState,s);if(a&&(r.memoizedState=s,oi=!0),r=r.queue,dk(s9.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Gr!==null&&Gr.memoizedState.tag&1){if(n.flags|=2048,Qy(9,r9.bind(null,n,r,s,e),void 0,null),Qr===null)throw Error(Ae(349));Kd&30||n9(n,e,s)}return s}function n9(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Jn.updateQueue,e===null?(e={lastEffect:null,stores:null},Jn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function r9(t,e,n,r){e.value=n,e.getSnapshot=r,i9(e)&&a9(t)}function s9(t,e,n){return n(function(){i9(e)&&a9(t)})}function i9(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wa(t,n)}catch{return!0}}function a9(t){var e=jl(t,1);e!==null&&Va(e,t,1,-1)}function eL(t){var e=oo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yy,lastRenderedState:t},e.queue=t,t=t.dispatch=Eie.bind(null,Jn,t),[e.memoizedState,t]}function Qy(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Jn.updateQueue,e===null?(e={lastEffect:null,stores:null},Jn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function o9(){return oa().memoizedState}function T0(t,e,n,r){var s=oo();Jn.flags|=t,s.memoizedState=Qy(1|e,n,void 0,r===void 0?null:r)}function Lj(t,e,n,r){var s=oa();r=r===void 0?null:r;var a=void 0;if(Dr!==null){var o=Dr.memoizedState;if(a=o.destroy,r!==null&&lk(r,o.deps)){s.memoizedState=Qy(e,n,a,r);return}}Jn.flags|=t,s.memoizedState=Qy(1|e,n,a,r)}function tL(t,e){return T0(8390656,8,t,e)}function dk(t,e){return Lj(2048,8,t,e)}function l9(t,e){return Lj(4,2,t,e)}function c9(t,e){return Lj(4,4,t,e)}function u9(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function d9(t,e,n){return n=n!=null?n.concat([t]):null,Lj(4,4,u9.bind(null,e,t),n)}function hk(){}function h9(t,e){var n=oa();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lk(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function f9(t,e){var n=oa();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lk(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function m9(t,e,n){return Kd&21?(Wa(n,e)||(n=xz(),Jn.lanes|=n,Gd|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,oi=!0),t.memoizedState=n)}function Nie(t,e){var n=xn;xn=n!==0&&4>n?n:4,t(!0);var r=DS.transition;DS.transition={};try{t(!1),e()}finally{xn=n,DS.transition=r}}function p9(){return oa().memoizedState}function Sie(t,e,n){var r=Qc(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},g9(t))y9(e,n);else if(n=Xz(t,e,n,r),n!==null){var s=Us();Va(n,t,r,s),v9(n,e,r)}}function Eie(t,e,n){var r=Qc(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(g9(t))y9(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,n);if(s.hasEagerState=!0,s.eagerState=l,Wa(l,o)){var c=e.interleaved;c===null?(s.next=s,rk(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=Xz(t,e,s,r),n!==null&&(s=Us(),Va(n,t,r,s),v9(n,e,r))}}function g9(t){var e=t.alternate;return t===Jn||e!==null&&e===Jn}function y9(t,e){dy=bw=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function v9(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,zI(t,n)}}var ww={readContext:aa,useCallback:ms,useContext:ms,useEffect:ms,useImperativeHandle:ms,useInsertionEffect:ms,useLayoutEffect:ms,useMemo:ms,useReducer:ms,useRef:ms,useState:ms,useDebugValue:ms,useDeferredValue:ms,useTransition:ms,useMutableSource:ms,useSyncExternalStore:ms,useId:ms,unstable_isNewReconciler:!1},Aie={readContext:aa,useCallback:function(t,e){return oo().memoizedState=[t,e===void 0?null:e],t},useContext:aa,useEffect:tL,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,T0(4194308,4,u9.bind(null,e,t),n)},useLayoutEffect:function(t,e){return T0(4194308,4,t,e)},useInsertionEffect:function(t,e){return T0(4,2,t,e)},useMemo:function(t,e){var n=oo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=oo();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Sie.bind(null,Jn,t),[r.memoizedState,t]},useRef:function(t){var e=oo();return t={current:t},e.memoizedState=t},useState:eL,useDebugValue:hk,useDeferredValue:function(t){return oo().memoizedState=t},useTransition:function(){var t=eL(!1),e=t[0];return t=Nie.bind(null,t[1]),oo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Jn,s=oo();if(zn){if(n===void 0)throw Error(Ae(407));n=n()}else{if(n=e(),Qr===null)throw Error(Ae(349));Kd&30||n9(r,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,tL(s9.bind(null,r,a,t),[t]),r.flags|=2048,Qy(9,r9.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=oo(),e=Qr.identifierPrefix;if(zn){var n=ll,r=ol;n=(r&~(1<<32-Fa(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Gy++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jie++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Tie={readContext:aa,useCallback:h9,useContext:aa,useEffect:dk,useImperativeHandle:d9,useInsertionEffect:l9,useLayoutEffect:c9,useMemo:f9,useReducer:LS,useRef:o9,useState:function(){return LS(Yy)},useDebugValue:hk,useDeferredValue:function(t){var e=oa();return m9(e,Dr.memoizedState,t)},useTransition:function(){var t=LS(Yy)[0],e=oa().memoizedState;return[t,e]},useMutableSource:e9,useSyncExternalStore:t9,useId:p9,unstable_isNewReconciler:!1},Cie={readContext:aa,useCallback:h9,useContext:aa,useEffect:dk,useImperativeHandle:d9,useInsertionEffect:l9,useLayoutEffect:c9,useMemo:f9,useReducer:$S,useRef:o9,useState:function(){return $S(Yy)},useDebugValue:hk,useDeferredValue:function(t){var e=oa();return Dr===null?e.memoizedState=t:m9(e,Dr.memoizedState,t)},useTransition:function(){var t=$S(Yy)[0],e=oa().memoizedState;return[t,e]},useMutableSource:e9,useSyncExternalStore:t9,useId:p9,unstable_isNewReconciler:!1};function Ea(t,e){if(t&&t.defaultProps){e=tr({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ZA(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:tr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $j={isMounted:function(t){return(t=t._reactInternals)?Sh(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Us(),s=Qc(t),a=ml(r,s);a.payload=e,n!=null&&(a.callback=n),e=Gc(t,a,s),e!==null&&(Va(e,t,s,r),E0(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Us(),s=Qc(t),a=ml(r,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Gc(t,a,s),e!==null&&(Va(e,t,s,r),E0(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Us(),r=Qc(t),s=ml(n,r);s.tag=2,e!=null&&(s.callback=e),e=Gc(t,s,r),e!==null&&(Va(e,t,r,n),E0(e,t,r))}};function nL(t,e,n,r,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!Uy(n,r)||!Uy(s,a):!0}function x9(t,e,n){var r=!1,s=lu,a=e.contextType;return typeof a=="object"&&a!==null?a=aa(a):(s=di(e)?Wd:As.current,r=e.contextTypes,a=(r=r!=null)?vm(t,s):lu),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$j,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function rL(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&$j.enqueueReplaceState(e,e.state,null)}function JA(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},sk(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=aa(a):(a=di(e)?Wd:As.current,s.context=vm(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(ZA(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&$j.enqueueReplaceState(s,s.state,null),vw(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function _m(t,e){try{var n="",r=e;do n+=rse(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function FS(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function eT(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Pie=typeof WeakMap=="function"?WeakMap:Map;function b9(t,e,n){n=ml(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jw||(jw=!0,uT=r),eT(t,e)},n}function w9(t,e,n){n=ml(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){eT(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){eT(t,e),typeof r!="function"&&(Yc===null?Yc=new Set([this]):Yc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function sL(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Pie;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=qie.bind(null,t,e,n),e.then(t,t))}function iL(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function aL(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ml(-1,1),e.tag=2,Gc(n,e,1))),n.lanes|=1),t)}var Iie=Vl.ReactCurrentOwner,oi=!1;function Rs(t,e,n,r){e.child=t===null?Qz(e,null,n,r):bm(e,t.child,n,r)}function oL(t,e,n,r,s){n=n.render;var a=e.ref;return $f(e,s),r=ck(t,e,n,r,a,s),n=uk(),t!==null&&!oi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Nl(t,e,s)):(zn&&n&&XI(e),e.flags|=1,Rs(t,e,r,s),e.child)}function lL(t,e,n,r,s){if(t===null){var a=n.type;return typeof a=="function"&&!bk(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,_9(t,e,a,r,s)):(t=k0(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Uy,n(o,r)&&t.ref===e.ref)return Nl(t,e,s)}return e.flags|=1,t=Xc(a,r),t.ref=e.ref,t.return=e,e.child=t}function _9(t,e,n,r,s){if(t!==null){var a=t.memoizedProps;if(Uy(a,r)&&t.ref===e.ref)if(oi=!1,e.pendingProps=r=a,(t.lanes&s)!==0)t.flags&131072&&(oi=!0);else return e.lanes=t.lanes,Nl(t,e,s)}return tT(t,e,n,r,s)}function j9(t,e,n){var r=e.pendingProps,s=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},kn(_f,bi),bi|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,kn(_f,bi),bi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,kn(_f,bi),bi|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,kn(_f,bi),bi|=r;return Rs(t,e,s,n),e.child}function N9(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function tT(t,e,n,r,s){var a=di(n)?Wd:As.current;return a=vm(e,a),$f(e,s),n=ck(t,e,n,r,a,s),r=uk(),t!==null&&!oi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Nl(t,e,s)):(zn&&r&&XI(e),e.flags|=1,Rs(t,e,n,s),e.child)}function cL(t,e,n,r,s){if(di(n)){var a=!0;fw(e)}else a=!1;if($f(e,s),e.stateNode===null)C0(t,e),x9(e,n,r),JA(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=aa(u):(u=di(n)?Wd:As.current,u=vm(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&rL(e,o,r,u),pc=!1;var f=e.memoizedState;o.state=f,vw(e,r,o,s),c=e.memoizedState,l!==r||f!==c||ui.current||pc?(typeof d=="function"&&(ZA(e,n,d,r),c=e.memoizedState),(l=pc||nL(e,n,l,r,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Zz(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Ea(e.type,l),o.props=u,h=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=aa(c):(c=di(n)?Wd:As.current,c=vm(e,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&rL(e,o,r,c),pc=!1,f=e.memoizedState,o.state=f,vw(e,r,o,s);var v=e.memoizedState;l!==h||f!==v||ui.current||pc?(typeof m=="function"&&(ZA(e,n,m,r),v=e.memoizedState),(u=pc||nL(e,n,u,r,f,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return nT(t,e,n,r,a,s)}function nT(t,e,n,r,s,a){N9(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&GD(e,n,!1),Nl(t,e,a);r=e.stateNode,Iie.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=bm(e,t.child,null,a),e.child=bm(e,null,l,a)):Rs(t,e,l,a),e.memoizedState=r.state,s&&GD(e,n,!0),e.child}function S9(t){var e=t.stateNode;e.pendingContext?KD(t,e.pendingContext,e.pendingContext!==e.context):e.context&&KD(t,e.context,!1),ik(t,e.containerInfo)}function uL(t,e,n,r,s){return xm(),JI(s),e.flags|=256,Rs(t,e,n,r),e.child}var rT={dehydrated:null,treeContext:null,retryLane:0};function sT(t){return{baseLanes:t,cachePool:null,transitions:null}}function E9(t,e,n){var r=e.pendingProps,s=Qn.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),kn(Qn,s&1),t===null)return QA(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Bj(o,r,0,null),t=Ld(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=sT(n),e.memoizedState=rT,t):fk(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return kie(t,e,o,r,l,s,n);if(a){a=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Xc(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=Xc(l,a):(a=Ld(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?sT(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=rT,r}return a=t.child,t=a.sibling,r=Xc(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function fk(t,e){return e=Bj({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Mb(t,e,n,r){return r!==null&&JI(r),bm(e,t.child,null,n),t=fk(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kie(t,e,n,r,s,a,o){if(n)return e.flags&256?(e.flags&=-257,r=FS(Error(Ae(422))),Mb(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,s=e.mode,r=Bj({mode:"visible",children:r.children},s,0,null),a=Ld(a,s,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&bm(e,t.child,null,o),e.child.memoizedState=sT(o),e.memoizedState=rT,a);if(!(e.mode&1))return Mb(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(Ae(419)),r=FS(a,r,void 0),Mb(t,e,o,r)}if(l=(o&t.childLanes)!==0,oi||l){if(r=Qr,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,jl(t,s),Va(r,t,s,-1))}return xk(),r=FS(Error(Ae(421))),Mb(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Wie.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,Si=Kc(s.nextSibling),Ti=e,zn=!0,ka=null,t!==null&&(Wi[Hi++]=ol,Wi[Hi++]=ll,Wi[Hi++]=Hd,ol=t.id,ll=t.overflow,Hd=e),e=fk(e,r.children),e.flags|=4096,e)}function dL(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),XA(t.return,e,n)}function VS(t,e,n,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function A9(t,e,n){var r=e.pendingProps,s=r.revealOrder,a=r.tail;if(Rs(t,e,r.children,n),r=Qn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&dL(t,n,e);else if(t.tag===19)dL(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(kn(Qn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&xw(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),VS(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&xw(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}VS(e,!0,n,null,a);break;case"together":VS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function C0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Nl(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Gd|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ae(153));if(e.child!==null){for(t=e.child,n=Xc(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xc(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Rie(t,e,n){switch(e.tag){case 3:S9(e),xm();break;case 5:Jz(e);break;case 1:di(e.type)&&fw(e);break;case 4:ik(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;kn(gw,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(kn(Qn,Qn.current&1),e.flags|=128,null):n&e.child.childLanes?E9(t,e,n):(kn(Qn,Qn.current&1),t=Nl(t,e,n),t!==null?t.sibling:null);kn(Qn,Qn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return A9(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),kn(Qn,Qn.current),r)break;return null;case 22:case 23:return e.lanes=0,j9(t,e,n)}return Nl(t,e,n)}var T9,iT,C9,P9;T9=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};iT=function(){};C9=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,yd(_o.current);var a=null;switch(n){case"input":s=AA(t,s),r=AA(t,r),a=[];break;case"select":s=tr({},s,{value:void 0}),r=tr({},r,{value:void 0}),a=[];break;case"textarea":s=PA(t,s),r=PA(t,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=dw)}kA(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(My.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(My.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&$n("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};P9=function(t,e,n,r){n!==r&&(e.flags|=4)};function wg(t,e){if(!zn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ps(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Oie(t,e,n){var r=e.pendingProps;switch(ZI(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ps(e),null;case 1:return di(e.type)&&hw(),ps(e),null;case 3:return r=e.stateNode,wm(),Un(ui),Un(As),ok(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Rb(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ka!==null&&(fT(ka),ka=null))),iT(t,e),ps(e),null;case 5:ak(e);var s=yd(Ky.current);if(n=e.type,t!==null&&e.stateNode!=null)C9(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ae(166));return ps(e),null}if(t=yd(_o.current),Rb(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[mo]=e,r[Wy]=a,t=(e.mode&1)!==0,n){case"dialog":$n("cancel",r),$n("close",r);break;case"iframe":case"object":case"embed":$n("load",r);break;case"video":case"audio":for(s=0;s<Kg.length;s++)$n(Kg[s],r);break;case"source":$n("error",r);break;case"img":case"image":case"link":$n("error",r),$n("load",r);break;case"details":$n("toggle",r);break;case"input":bD(r,a),$n("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},$n("invalid",r);break;case"textarea":_D(r,a),$n("invalid",r)}kA(n,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&kb(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&kb(r.textContent,l,t),s=["children",""+l]):My.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&$n("scroll",r)}switch(n){case"input":Nb(r),wD(r,a,!0);break;case"textarea":Nb(r),jD(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=dw)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=sz(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[mo]=e,t[Wy]=r,T9(t,e,!1,!1),e.stateNode=t;e:{switch(o=RA(n,r),n){case"dialog":$n("cancel",t),$n("close",t),s=r;break;case"iframe":case"object":case"embed":$n("load",t),s=r;break;case"video":case"audio":for(s=0;s<Kg.length;s++)$n(Kg[s],t);s=r;break;case"source":$n("error",t),s=r;break;case"img":case"image":case"link":$n("error",t),$n("load",t),s=r;break;case"details":$n("toggle",t),s=r;break;case"input":bD(t,r),s=AA(t,r),$n("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=tr({},r,{value:void 0}),$n("invalid",t);break;case"textarea":_D(t,r),s=PA(t,r),$n("invalid",t);break;default:s=r}kA(n,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?oz(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&iz(t,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Dy(t,c):typeof c=="number"&&Dy(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(My.hasOwnProperty(a)?c!=null&&a==="onScroll"&&$n("scroll",t):c!=null&&LI(t,a,c,o))}switch(n){case"input":Nb(t),wD(t,r,!1);break;case"textarea":Nb(t),jD(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ou(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Of(t,!!r.multiple,a,!1):r.defaultValue!=null&&Of(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=dw)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ps(e),null;case 6:if(t&&e.stateNode!=null)P9(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ae(166));if(n=yd(Ky.current),yd(_o.current),Rb(e)){if(r=e.stateNode,n=e.memoizedProps,r[mo]=e,(a=r.nodeValue!==n)&&(t=Ti,t!==null))switch(t.tag){case 3:kb(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&kb(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[mo]=e,e.stateNode=r}return ps(e),null;case 13:if(Un(Qn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(zn&&Si!==null&&e.mode&1&&!(e.flags&128))Gz(),xm(),e.flags|=98560,a=!1;else if(a=Rb(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(Ae(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Ae(317));a[mo]=e}else xm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ps(e),a=!1}else ka!==null&&(fT(ka),ka=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Qn.current&1?Fr===0&&(Fr=3):xk())),e.updateQueue!==null&&(e.flags|=4),ps(e),null);case 4:return wm(),iT(t,e),t===null&&zy(e.stateNode.containerInfo),ps(e),null;case 10:return nk(e.type._context),ps(e),null;case 17:return di(e.type)&&hw(),ps(e),null;case 19:if(Un(Qn),a=e.memoizedState,a===null)return ps(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)wg(a,!1);else{if(Fr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=xw(t),o!==null){for(e.flags|=128,wg(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return kn(Qn,Qn.current&1|2),e.child}t=t.sibling}a.tail!==null&&vr()>jm&&(e.flags|=128,r=!0,wg(a,!1),e.lanes=4194304)}else{if(!r)if(t=xw(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),wg(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!zn)return ps(e),null}else 2*vr()-a.renderingStartTime>jm&&n!==1073741824&&(e.flags|=128,r=!0,wg(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=vr(),e.sibling=null,n=Qn.current,kn(Qn,r?n&1|2:n&1),e):(ps(e),null);case 22:case 23:return vk(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?bi&1073741824&&(ps(e),e.subtreeFlags&6&&(e.flags|=8192)):ps(e),null;case 24:return null;case 25:return null}throw Error(Ae(156,e.tag))}function Mie(t,e){switch(ZI(e),e.tag){case 1:return di(e.type)&&hw(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wm(),Un(ui),Un(As),ok(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ak(e),null;case 13:if(Un(Qn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ae(340));xm()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Un(Qn),null;case 4:return wm(),null;case 10:return nk(e.type._context),null;case 22:case 23:return vk(),null;case 24:return null;default:return null}}var Db=!1,_s=!1,Die=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function wf(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){or(t,e,r)}else n.current=null}function aT(t,e,n){try{n()}catch(r){or(t,e,r)}}var hL=!1;function Lie(t,e){if(zA=lw,t=Mz(),QI(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==a||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++u===s&&(l=o),f===a&&++d===r&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(qA={focusedElem:t,selectionRange:n},lw=!1,Ye=e;Ye!==null;)if(e=Ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ye=t;else for(;Ye!==null;){e=Ye;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var g=v.memoizedProps,y=v.memoizedState,w=e.stateNode,b=w.getSnapshotBeforeUpdate(e.elementType===e.type?g:Ea(e.type,g),y);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ae(163))}}catch(T){or(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,Ye=t;break}Ye=e.return}return v=hL,hL=!1,v}function hy(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&aT(e,n,a)}s=s.next}while(s!==r)}}function Fj(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function oT(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function I9(t){var e=t.alternate;e!==null&&(t.alternate=null,I9(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[mo],delete e[Wy],delete e[KA],delete e[xie],delete e[bie])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function k9(t){return t.tag===5||t.tag===3||t.tag===4}function fL(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||k9(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lT(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=dw));else if(r!==4&&(t=t.child,t!==null))for(lT(t,e,n),t=t.sibling;t!==null;)lT(t,e,n),t=t.sibling}function cT(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(cT(t,e,n),t=t.sibling;t!==null;)cT(t,e,n),t=t.sibling}var ns=null,Ca=!1;function nc(t,e,n){for(n=n.child;n!==null;)R9(t,e,n),n=n.sibling}function R9(t,e,n){if(wo&&typeof wo.onCommitFiberUnmount=="function")try{wo.onCommitFiberUnmount(Ij,n)}catch{}switch(n.tag){case 5:_s||wf(n,e);case 6:var r=ns,s=Ca;ns=null,nc(t,e,n),ns=r,Ca=s,ns!==null&&(Ca?(t=ns,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ns.removeChild(n.stateNode));break;case 18:ns!==null&&(Ca?(t=ns,n=n.stateNode,t.nodeType===8?RS(t.parentNode,n):t.nodeType===1&&RS(t,n),Vy(t)):RS(ns,n.stateNode));break;case 4:r=ns,s=Ca,ns=n.stateNode.containerInfo,Ca=!0,nc(t,e,n),ns=r,Ca=s;break;case 0:case 11:case 14:case 15:if(!_s&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&aT(n,e,o),s=s.next}while(s!==r)}nc(t,e,n);break;case 1:if(!_s&&(wf(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){or(n,e,l)}nc(t,e,n);break;case 21:nc(t,e,n);break;case 22:n.mode&1?(_s=(r=_s)||n.memoizedState!==null,nc(t,e,n),_s=r):nc(t,e,n);break;default:nc(t,e,n)}}function mL(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Die),e.forEach(function(r){var s=Hie.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ba(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ns=l.stateNode,Ca=!1;break e;case 3:ns=l.stateNode.containerInfo,Ca=!0;break e;case 4:ns=l.stateNode.containerInfo,Ca=!0;break e}l=l.return}if(ns===null)throw Error(Ae(160));R9(a,o,s),ns=null,Ca=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){or(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)O9(e,t),e=e.sibling}function O9(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ba(e,t),ao(t),r&4){try{hy(3,t,t.return),Fj(3,t)}catch(g){or(t,t.return,g)}try{hy(5,t,t.return)}catch(g){or(t,t.return,g)}}break;case 1:ba(e,t),ao(t),r&512&&n!==null&&wf(n,n.return);break;case 5:if(ba(e,t),ao(t),r&512&&n!==null&&wf(n,n.return),t.flags&32){var s=t.stateNode;try{Dy(s,"")}catch(g){or(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&nz(s,a),RA(l,o);var u=RA(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?oz(s,h):d==="dangerouslySetInnerHTML"?iz(s,h):d==="children"?Dy(s,h):LI(s,d,h,u)}switch(l){case"input":TA(s,a);break;case"textarea":rz(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?Of(s,!!a.multiple,m,!1):f!==!!a.multiple&&(a.defaultValue!=null?Of(s,!!a.multiple,a.defaultValue,!0):Of(s,!!a.multiple,a.multiple?[]:"",!1))}s[Wy]=a}catch(g){or(t,t.return,g)}}break;case 6:if(ba(e,t),ao(t),r&4){if(t.stateNode===null)throw Error(Ae(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(g){or(t,t.return,g)}}break;case 3:if(ba(e,t),ao(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Vy(e.containerInfo)}catch(g){or(t,t.return,g)}break;case 4:ba(e,t),ao(t);break;case 13:ba(e,t),ao(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(gk=vr())),r&4&&mL(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(_s=(u=_s)||d,ba(e,t),_s=u):ba(e,t),ao(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Ye=t,d=t.child;d!==null;){for(h=Ye=d;Ye!==null;){switch(f=Ye,m=f.child,f.tag){case 0:case 11:case 14:case 15:hy(4,f,f.return);break;case 1:wf(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(g){or(r,n,g)}}break;case 5:wf(f,f.return);break;case 22:if(f.memoizedState!==null){gL(h);continue}}m!==null?(m.return=f,Ye=m):gL(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=az("display",o))}catch(g){or(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){or(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ba(e,t),ao(t),r&4&&mL(t);break;case 21:break;default:ba(e,t),ao(t)}}function ao(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(k9(n)){var r=n;break e}n=n.return}throw Error(Ae(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Dy(s,""),r.flags&=-33);var a=fL(t);cT(t,a,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=fL(t);lT(t,l,o);break;default:throw Error(Ae(161))}}catch(c){or(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $ie(t,e,n){Ye=t,M9(t)}function M9(t,e,n){for(var r=(t.mode&1)!==0;Ye!==null;){var s=Ye,a=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Db;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||_s;l=Db;var u=_s;if(Db=o,(_s=c)&&!u)for(Ye=s;Ye!==null;)o=Ye,c=o.child,o.tag===22&&o.memoizedState!==null?yL(s):c!==null?(c.return=o,Ye=c):yL(s);for(;a!==null;)Ye=a,M9(a),a=a.sibling;Ye=s,Db=l,_s=u}pL(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,Ye=a):pL(t)}}function pL(t){for(;Ye!==null;){var e=Ye;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_s||Fj(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!_s)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ea(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&JD(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}JD(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Vy(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ae(163))}_s||e.flags&512&&oT(e)}catch(f){or(e,e.return,f)}}if(e===t){Ye=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ye=n;break}Ye=e.return}}function gL(t){for(;Ye!==null;){var e=Ye;if(e===t){Ye=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ye=n;break}Ye=e.return}}function yL(t){for(;Ye!==null;){var e=Ye;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Fj(4,e)}catch(c){or(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){or(e,s,c)}}var a=e.return;try{oT(e)}catch(c){or(e,a,c)}break;case 5:var o=e.return;try{oT(e)}catch(c){or(e,o,c)}}}catch(c){or(e,e.return,c)}if(e===t){Ye=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Ye=l;break}Ye=e.return}}var Fie=Math.ceil,_w=Vl.ReactCurrentDispatcher,mk=Vl.ReactCurrentOwner,Zi=Vl.ReactCurrentBatchConfig,sn=0,Qr=null,Er=null,ls=0,bi=0,_f=Pu(0),Fr=0,Xy=null,Gd=0,Vj=0,pk=0,fy=null,ti=null,gk=0,jm=1/0,tl=null,jw=!1,uT=null,Yc=null,Lb=!1,Lc=null,Nw=0,my=0,dT=null,P0=-1,I0=0;function Us(){return sn&6?vr():P0!==-1?P0:P0=vr()}function Qc(t){return t.mode&1?sn&2&&ls!==0?ls&-ls:_ie.transition!==null?(I0===0&&(I0=xz()),I0):(t=xn,t!==0||(t=window.event,t=t===void 0?16:Ez(t.type)),t):1}function Va(t,e,n,r){if(50<my)throw my=0,dT=null,Error(Ae(185));gx(t,n,r),(!(sn&2)||t!==Qr)&&(t===Qr&&(!(sn&2)&&(Vj|=n),Fr===4&&xc(t,ls)),hi(t,r),n===1&&sn===0&&!(e.mode&1)&&(jm=vr()+500,Dj&&Iu()))}function hi(t,e){var n=t.callbackNode;_se(t,e);var r=ow(t,t===Qr?ls:0);if(r===0)n!==null&&ED(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ED(n),e===1)t.tag===0?wie(vL.bind(null,t)):Wz(vL.bind(null,t)),yie(function(){!(sn&6)&&Iu()}),n=null;else{switch(bz(r)){case 1:n=UI;break;case 4:n=yz;break;case 16:n=aw;break;case 536870912:n=vz;break;default:n=aw}n=z9(n,D9.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function D9(t,e){if(P0=-1,I0=0,sn&6)throw Error(Ae(327));var n=t.callbackNode;if(Ff()&&t.callbackNode!==n)return null;var r=ow(t,t===Qr?ls:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Sw(t,r);else{e=r;var s=sn;sn|=2;var a=$9();(Qr!==t||ls!==e)&&(tl=null,jm=vr()+500,Dd(t,e));do try{Uie();break}catch(l){L9(t,l)}while(!0);tk(),_w.current=a,sn=s,Er!==null?e=0:(Qr=null,ls=0,e=Fr)}if(e!==0){if(e===2&&(s=$A(t),s!==0&&(r=s,e=hT(t,s))),e===1)throw n=Xy,Dd(t,0),xc(t,r),hi(t,vr()),n;if(e===6)xc(t,r);else{if(s=t.current.alternate,!(r&30)&&!Vie(s)&&(e=Sw(t,r),e===2&&(a=$A(t),a!==0&&(r=a,e=hT(t,a))),e===1))throw n=Xy,Dd(t,0),xc(t,r),hi(t,vr()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Ae(345));case 2:od(t,ti,tl);break;case 3:if(xc(t,r),(r&130023424)===r&&(e=gk+500-vr(),10<e)){if(ow(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Us(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=HA(od.bind(null,t,ti,tl),e);break}od(t,ti,tl);break;case 4:if(xc(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Fa(r);a=1<<o,o=e[o],o>s&&(s=o),r&=~a}if(r=s,r=vr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Fie(r/1960))-r,10<r){t.timeoutHandle=HA(od.bind(null,t,ti,tl),r);break}od(t,ti,tl);break;case 5:od(t,ti,tl);break;default:throw Error(Ae(329))}}}return hi(t,vr()),t.callbackNode===n?D9.bind(null,t):null}function hT(t,e){var n=fy;return t.current.memoizedState.isDehydrated&&(Dd(t,e).flags|=256),t=Sw(t,e),t!==2&&(e=ti,ti=n,e!==null&&fT(e)),t}function fT(t){ti===null?ti=t:ti.push.apply(ti,t)}function Vie(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!Wa(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xc(t,e){for(e&=~pk,e&=~Vj,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Fa(e),r=1<<n;t[n]=-1,e&=~r}}function vL(t){if(sn&6)throw Error(Ae(327));Ff();var e=ow(t,0);if(!(e&1))return hi(t,vr()),null;var n=Sw(t,e);if(t.tag!==0&&n===2){var r=$A(t);r!==0&&(e=r,n=hT(t,r))}if(n===1)throw n=Xy,Dd(t,0),xc(t,e),hi(t,vr()),n;if(n===6)throw Error(Ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,od(t,ti,tl),hi(t,vr()),null}function yk(t,e){var n=sn;sn|=1;try{return t(e)}finally{sn=n,sn===0&&(jm=vr()+500,Dj&&Iu())}}function Yd(t){Lc!==null&&Lc.tag===0&&!(sn&6)&&Ff();var e=sn;sn|=1;var n=Zi.transition,r=xn;try{if(Zi.transition=null,xn=1,t)return t()}finally{xn=r,Zi.transition=n,sn=e,!(sn&6)&&Iu()}}function vk(){bi=_f.current,Un(_f)}function Dd(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gie(n)),Er!==null)for(n=Er.return;n!==null;){var r=n;switch(ZI(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&hw();break;case 3:wm(),Un(ui),Un(As),ok();break;case 5:ak(r);break;case 4:wm();break;case 13:Un(Qn);break;case 19:Un(Qn);break;case 10:nk(r.type._context);break;case 22:case 23:vk()}n=n.return}if(Qr=t,Er=t=Xc(t.current,null),ls=bi=e,Fr=0,Xy=null,pk=Vj=Gd=0,ti=fy=null,gd!==null){for(e=0;e<gd.length;e++)if(n=gd[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=s,r.next=o}n.pending=r}gd=null}return t}function L9(t,e){do{var n=Er;try{if(tk(),A0.current=ww,bw){for(var r=Jn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}bw=!1}if(Kd=0,Gr=Dr=Jn=null,dy=!1,Gy=0,mk.current=null,n===null||n.return===null){Fr=1,Xy=e,Er=null;break}e:{var a=t,o=n.return,l=n,c=e;if(e=ls,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=iL(o);if(m!==null){m.flags&=-257,aL(m,o,l,a,e),m.mode&1&&sL(a,u,e),e=m,c=u;var v=e.updateQueue;if(v===null){var g=new Set;g.add(c),e.updateQueue=g}else v.add(c);break e}else{if(!(e&1)){sL(a,u,e),xk();break e}c=Error(Ae(426))}}else if(zn&&l.mode&1){var y=iL(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),aL(y,o,l,a,e),JI(_m(c,l));break e}}a=c=_m(c,l),Fr!==4&&(Fr=2),fy===null?fy=[a]:fy.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var w=b9(a,c,e);ZD(a,w);break e;case 1:l=c;var b=a.type,E=a.stateNode;if(!(a.flags&128)&&(typeof b.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Yc===null||!Yc.has(E)))){a.flags|=65536,e&=-e,a.lanes|=e;var T=w9(a,l,e);ZD(a,T);break e}}a=a.return}while(a!==null)}V9(n)}catch(x){e=x,Er===n&&n!==null&&(Er=n=n.return);continue}break}while(!0)}function $9(){var t=_w.current;return _w.current=ww,t===null?ww:t}function xk(){(Fr===0||Fr===3||Fr===2)&&(Fr=4),Qr===null||!(Gd&268435455)&&!(Vj&268435455)||xc(Qr,ls)}function Sw(t,e){var n=sn;sn|=2;var r=$9();(Qr!==t||ls!==e)&&(tl=null,Dd(t,e));do try{Bie();break}catch(s){L9(t,s)}while(!0);if(tk(),sn=n,_w.current=r,Er!==null)throw Error(Ae(261));return Qr=null,ls=0,Fr}function Bie(){for(;Er!==null;)F9(Er)}function Uie(){for(;Er!==null&&!fse();)F9(Er)}function F9(t){var e=U9(t.alternate,t,bi);t.memoizedProps=t.pendingProps,e===null?V9(t):Er=e,mk.current=null}function V9(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Mie(n,e),n!==null){n.flags&=32767,Er=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fr=6,Er=null;return}}else if(n=Oie(n,e,bi),n!==null){Er=n;return}if(e=e.sibling,e!==null){Er=e;return}Er=e=t}while(e!==null);Fr===0&&(Fr=5)}function od(t,e,n){var r=xn,s=Zi.transition;try{Zi.transition=null,xn=1,zie(t,e,n,r)}finally{Zi.transition=s,xn=r}return null}function zie(t,e,n,r){do Ff();while(Lc!==null);if(sn&6)throw Error(Ae(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ae(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(jse(t,a),t===Qr&&(Er=Qr=null,ls=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Lb||(Lb=!0,z9(aw,function(){return Ff(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Zi.transition,Zi.transition=null;var o=xn;xn=1;var l=sn;sn|=4,mk.current=null,Lie(t,n),O9(n,t),cie(qA),lw=!!zA,qA=zA=null,t.current=n,$ie(n),mse(),sn=l,xn=o,Zi.transition=a}else t.current=n;if(Lb&&(Lb=!1,Lc=t,Nw=s),a=t.pendingLanes,a===0&&(Yc=null),yse(n.stateNode),hi(t,vr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(jw)throw jw=!1,t=uT,uT=null,t;return Nw&1&&t.tag!==0&&Ff(),a=t.pendingLanes,a&1?t===dT?my++:(my=0,dT=t):my=0,Iu(),null}function Ff(){if(Lc!==null){var t=bz(Nw),e=Zi.transition,n=xn;try{if(Zi.transition=null,xn=16>t?16:t,Lc===null)var r=!1;else{if(t=Lc,Lc=null,Nw=0,sn&6)throw Error(Ae(331));var s=sn;for(sn|=4,Ye=t.current;Ye!==null;){var a=Ye,o=a.child;if(Ye.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Ye=u;Ye!==null;){var d=Ye;switch(d.tag){case 0:case 11:case 15:hy(8,d,a)}var h=d.child;if(h!==null)h.return=d,Ye=h;else for(;Ye!==null;){d=Ye;var f=d.sibling,m=d.return;if(I9(d),d===u){Ye=null;break}if(f!==null){f.return=m,Ye=f;break}Ye=m}}}var v=a.alternate;if(v!==null){var g=v.child;if(g!==null){v.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}Ye=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Ye=o;else e:for(;Ye!==null;){if(a=Ye,a.flags&2048)switch(a.tag){case 0:case 11:case 15:hy(9,a,a.return)}var w=a.sibling;if(w!==null){w.return=a.return,Ye=w;break e}Ye=a.return}}var b=t.current;for(Ye=b;Ye!==null;){o=Ye;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,Ye=E;else e:for(o=b;Ye!==null;){if(l=Ye,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Fj(9,l)}}catch(x){or(l,l.return,x)}if(l===o){Ye=null;break e}var T=l.sibling;if(T!==null){T.return=l.return,Ye=T;break e}Ye=l.return}}if(sn=s,Iu(),wo&&typeof wo.onPostCommitFiberRoot=="function")try{wo.onPostCommitFiberRoot(Ij,t)}catch{}r=!0}return r}finally{xn=n,Zi.transition=e}}return!1}function xL(t,e,n){e=_m(n,e),e=b9(t,e,1),t=Gc(t,e,1),e=Us(),t!==null&&(gx(t,1,e),hi(t,e))}function or(t,e,n){if(t.tag===3)xL(t,t,n);else for(;e!==null;){if(e.tag===3){xL(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Yc===null||!Yc.has(r))){t=_m(n,t),t=w9(e,t,1),e=Gc(e,t,1),t=Us(),e!==null&&(gx(e,1,t),hi(e,t));break}}e=e.return}}function qie(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Us(),t.pingedLanes|=t.suspendedLanes&n,Qr===t&&(ls&n)===n&&(Fr===4||Fr===3&&(ls&130023424)===ls&&500>vr()-gk?Dd(t,0):pk|=n),hi(t,e)}function B9(t,e){e===0&&(t.mode&1?(e=Ab,Ab<<=1,!(Ab&130023424)&&(Ab=4194304)):e=1);var n=Us();t=jl(t,e),t!==null&&(gx(t,e,n),hi(t,n))}function Wie(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),B9(t,n)}function Hie(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ae(314))}r!==null&&r.delete(e),B9(t,n)}var U9;U9=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ui.current)oi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return oi=!1,Rie(t,e,n);oi=!!(t.flags&131072)}else oi=!1,zn&&e.flags&1048576&&Hz(e,pw,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;C0(t,e),t=e.pendingProps;var s=vm(e,As.current);$f(e,n),s=ck(null,e,r,t,s,n);var a=uk();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,di(r)?(a=!0,fw(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,sk(e),s.updater=$j,e.stateNode=s,s._reactInternals=e,JA(e,r,t,n),e=nT(null,e,r,!0,a,n)):(e.tag=0,zn&&a&&XI(e),Rs(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(C0(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Gie(r),t=Ea(r,t),s){case 0:e=tT(null,e,r,t,n);break e;case 1:e=cL(null,e,r,t,n);break e;case 11:e=oL(null,e,r,t,n);break e;case 14:e=lL(null,e,r,Ea(r.type,t),n);break e}throw Error(Ae(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ea(r,s),tT(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ea(r,s),cL(t,e,r,s,n);case 3:e:{if(S9(e),t===null)throw Error(Ae(387));r=e.pendingProps,a=e.memoizedState,s=a.element,Zz(t,e),vw(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=_m(Error(Ae(423)),e),e=uL(t,e,r,n,s);break e}else if(r!==s){s=_m(Error(Ae(424)),e),e=uL(t,e,r,n,s);break e}else for(Si=Kc(e.stateNode.containerInfo.firstChild),Ti=e,zn=!0,ka=null,n=Qz(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xm(),r===s){e=Nl(t,e,n);break e}Rs(t,e,r,n)}e=e.child}return e;case 5:return Jz(e),t===null&&QA(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,WA(r,s)?o=null:a!==null&&WA(r,a)&&(e.flags|=32),N9(t,e),Rs(t,e,o,n),e.child;case 6:return t===null&&QA(e),null;case 13:return E9(t,e,n);case 4:return ik(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=bm(e,null,r,n):Rs(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ea(r,s),oL(t,e,r,s,n);case 7:return Rs(t,e,e.pendingProps,n),e.child;case 8:return Rs(t,e,e.pendingProps.children,n),e.child;case 12:return Rs(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,kn(gw,r._currentValue),r._currentValue=o,a!==null)if(Wa(a.value,o)){if(a.children===s.children&&!ui.current){e=Nl(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=ml(-1,n&-n),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),XA(a.return,n,e),l.lanes|=n;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Ae(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),XA(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Rs(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,$f(e,n),s=aa(s),r=r(s),e.flags|=1,Rs(t,e,r,n),e.child;case 14:return r=e.type,s=Ea(r,e.pendingProps),s=Ea(r.type,s),lL(t,e,r,s,n);case 15:return _9(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ea(r,s),C0(t,e),e.tag=1,di(r)?(t=!0,fw(e)):t=!1,$f(e,n),x9(e,r,s),JA(e,r,s,n),nT(null,e,r,!0,t,n);case 19:return A9(t,e,n);case 22:return j9(t,e,n)}throw Error(Ae(156,e.tag))};function z9(t,e){return gz(t,e)}function Kie(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yi(t,e,n,r){return new Kie(t,e,n,r)}function bk(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Gie(t){if(typeof t=="function")return bk(t)?1:0;if(t!=null){if(t=t.$$typeof,t===FI)return 11;if(t===VI)return 14}return 2}function Xc(t,e){var n=t.alternate;return n===null?(n=Yi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function k0(t,e,n,r,s,a){var o=2;if(r=t,typeof t=="function")bk(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case hf:return Ld(n.children,s,a,e);case $I:o=8,s|=8;break;case jA:return t=Yi(12,n,e,s|2),t.elementType=jA,t.lanes=a,t;case NA:return t=Yi(13,n,e,s),t.elementType=NA,t.lanes=a,t;case SA:return t=Yi(19,n,e,s),t.elementType=SA,t.lanes=a,t;case J6:return Bj(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case X6:o=10;break e;case Z6:o=9;break e;case FI:o=11;break e;case VI:o=14;break e;case mc:o=16,r=null;break e}throw Error(Ae(130,t==null?t:typeof t,""))}return e=Yi(o,n,e,s),e.elementType=t,e.type=r,e.lanes=a,e}function Ld(t,e,n,r){return t=Yi(7,t,r,e),t.lanes=n,t}function Bj(t,e,n,r){return t=Yi(22,t,r,e),t.elementType=J6,t.lanes=n,t.stateNode={isHidden:!1},t}function BS(t,e,n){return t=Yi(6,t,null,e),t.lanes=n,t}function US(t,e,n){return e=Yi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Yie(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_S(0),this.expirationTimes=_S(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_S(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function wk(t,e,n,r,s,a,o,l,c){return t=new Yie(t,e,n,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Yi(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sk(a),t}function Qie(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:df,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function q9(t){if(!t)return lu;t=t._reactInternals;e:{if(Sh(t)!==t||t.tag!==1)throw Error(Ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(di(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ae(171))}if(t.tag===1){var n=t.type;if(di(n))return qz(t,n,e)}return e}function W9(t,e,n,r,s,a,o,l,c){return t=wk(n,r,!0,t,s,a,o,l,c),t.context=q9(null),n=t.current,r=Us(),s=Qc(n),a=ml(r,s),a.callback=e??null,Gc(n,a,s),t.current.lanes=s,gx(t,s,r),hi(t,r),t}function Uj(t,e,n,r){var s=e.current,a=Us(),o=Qc(s);return n=q9(n),e.context===null?e.context=n:e.pendingContext=n,e=ml(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Gc(s,e,o),t!==null&&(Va(t,s,o,a),E0(t,s,o)),o}function Ew(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function bL(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function _k(t,e){bL(t,e),(t=t.alternate)&&bL(t,e)}function Xie(){return null}var H9=typeof reportError=="function"?reportError:function(t){console.error(t)};function jk(t){this._internalRoot=t}zj.prototype.render=jk.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ae(409));Uj(t,e,null,null)};zj.prototype.unmount=jk.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Yd(function(){Uj(null,t,null,null)}),e[_l]=null}};function zj(t){this._internalRoot=t}zj.prototype.unstable_scheduleHydration=function(t){if(t){var e=jz();t={blockedOn:null,target:t,priority:e};for(var n=0;n<vc.length&&e!==0&&e<vc[n].priority;n++);vc.splice(n,0,t),n===0&&Sz(t)}};function Nk(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function qj(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function wL(){}function Zie(t,e,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var u=Ew(o);a.call(u)}}var o=W9(e,r,t,0,null,!1,!1,"",wL);return t._reactRootContainer=o,t[_l]=o.current,zy(t.nodeType===8?t.parentNode:t),Yd(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Ew(c);l.call(u)}}var c=wk(t,0,!1,null,null,!1,!1,"",wL);return t._reactRootContainer=c,t[_l]=c.current,zy(t.nodeType===8?t.parentNode:t),Yd(function(){Uj(e,c,n,r)}),c}function Wj(t,e,n,r,s){var a=n._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var c=Ew(o);l.call(c)}}Uj(e,o,t,s)}else o=Zie(n,e,t,s,r);return Ew(o)}wz=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Hg(e.pendingLanes);n!==0&&(zI(e,n|1),hi(e,vr()),!(sn&6)&&(jm=vr()+500,Iu()))}break;case 13:Yd(function(){var r=jl(t,1);if(r!==null){var s=Us();Va(r,t,1,s)}}),_k(t,1)}};qI=function(t){if(t.tag===13){var e=jl(t,134217728);if(e!==null){var n=Us();Va(e,t,134217728,n)}_k(t,134217728)}};_z=function(t){if(t.tag===13){var e=Qc(t),n=jl(t,e);if(n!==null){var r=Us();Va(n,t,e,r)}_k(t,e)}};jz=function(){return xn};Nz=function(t,e){var n=xn;try{return xn=t,e()}finally{xn=n}};MA=function(t,e,n){switch(e){case"input":if(TA(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Mj(r);if(!s)throw Error(Ae(90));tz(r),TA(r,s)}}}break;case"textarea":rz(t,n);break;case"select":e=n.value,e!=null&&Of(t,!!n.multiple,e,!1)}};uz=yk;dz=Yd;var Jie={usingClientEntryPoint:!1,Events:[vx,gf,Mj,lz,cz,yk]},_g={findFiberByHostInstance:pd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eae={bundleType:_g.bundleType,version:_g.version,rendererPackageName:_g.rendererPackageName,rendererConfig:_g.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vl.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mz(t),t===null?null:t.stateNode},findFiberByHostInstance:_g.findFiberByHostInstance||Xie,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$b.isDisabled&&$b.supportsFiber)try{Ij=$b.inject(eae),wo=$b}catch{}}Di.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jie;Di.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nk(e))throw Error(Ae(200));return Qie(t,e,null,n)};Di.createRoot=function(t,e){if(!Nk(t))throw Error(Ae(299));var n=!1,r="",s=H9;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=wk(t,1,!1,null,null,n,!1,r,s),t[_l]=e.current,zy(t.nodeType===8?t.parentNode:t),new jk(e)};Di.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ae(188)):(t=Object.keys(t).join(","),Error(Ae(268,t)));return t=mz(e),t=t===null?null:t.stateNode,t};Di.flushSync=function(t){return Yd(t)};Di.hydrate=function(t,e,n){if(!qj(e))throw Error(Ae(200));return Wj(null,t,e,!0,n)};Di.hydrateRoot=function(t,e,n){if(!Nk(t))throw Error(Ae(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",o=H9;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=W9(e,null,t,1,n??null,s,!1,a,o),t[_l]=e.current,zy(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new zj(e)};Di.render=function(t,e,n){if(!qj(e))throw Error(Ae(200));return Wj(null,t,e,!1,n)};Di.unmountComponentAtNode=function(t){if(!qj(t))throw Error(Ae(40));return t._reactRootContainer?(Yd(function(){Wj(null,null,t,!1,function(){t._reactRootContainer=null,t[_l]=null})}),!0):!1};Di.unstable_batchedUpdates=yk;Di.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!qj(n))throw Error(Ae(200));if(t==null||t._reactInternals===void 0)throw Error(Ae(38));return Wj(t,e,n,!1,r)};Di.version="18.3.1-next-f1338f8080-20240426";function K9(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(K9)}catch(t){console.error(t)}}K9(),K6.exports=Di;var Eh=K6.exports;const G9=gn(Eh);var Y9,_L=Eh;Y9=_L.createRoot,_L.hydrateRoot;const tae="modulepreload",nae=function(t){return"/"+t},jL={},bx=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=nae(c),c in jL)return;jL[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":tae,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},rae=1,sae=1e6;let zS=0;function iae(){return zS=(zS+1)%Number.MAX_SAFE_INTEGER,zS.toString()}const qS=new Map,NL=t=>{if(qS.has(t))return;const e=setTimeout(()=>{qS.delete(t),py({type:"REMOVE_TOAST",toastId:t})},sae);qS.set(t,e)},aae=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,rae)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?NL(n):t.toasts.forEach(r=>{NL(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},R0=[];let O0={toasts:[]};function py(t){O0=aae(O0,t),R0.forEach(e=>{e(O0)})}function oae({...t}){const e=iae(),n=s=>py({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>py({type:"DISMISS_TOAST",toastId:e});return py({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function lae(){const[t,e]=N.useState(O0);return N.useEffect(()=>(R0.push(e),()=>{const n=R0.indexOf(e);n>-1&&R0.splice(n,1)}),[t]),{...t,toast:oae,dismiss:n=>py({type:"DISMISS_TOAST",toastId:n})}}function Pe(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function SL(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Hj(...t){return e=>{let n=!1;const r=t.map(s=>{const a=SL(s,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():SL(t[s],null)}}}}function Dt(...t){return N.useCallback(Hj(...t),t)}function cae(t,e){const n=N.createContext(e),r=a=>{const{children:o,...l}=a,c=N.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(a){const o=N.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,s]}function ds(t,e=[]){let n=[];function r(a,o){const l=N.createContext(o),c=n.length;n=[...n,o];const u=h=>{var w;const{scope:f,children:m,...v}=h,g=((w=f==null?void 0:f[t])==null?void 0:w[c])||l,y=N.useMemo(()=>v,Object.values(v));return i.jsx(g.Provider,{value:y,children:m})};u.displayName=a+"Provider";function d(h,f){var g;const m=((g=f==null?void 0:f[t])==null?void 0:g[c])||l,v=N.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[u,d]}const s=()=>{const a=n.map(o=>N.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return N.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,uae(s,...e)]}function uae(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return N.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Qd(t){const e=dae(t),n=N.forwardRef((r,s)=>{const{children:a,...o}=r,l=N.Children.toArray(a),c=l.find(hae);if(c){const u=c.props.children,d=l.map(h=>h===c?N.Children.count(u)>1?N.Children.only(null):N.isValidElement(u)?u.props.children:null:h);return i.jsx(e,{...o,ref:s,children:N.isValidElement(u)?N.cloneElement(u,void 0,d):null})}return i.jsx(e,{...o,ref:s,children:a})});return n.displayName=`${t}.Slot`,n}var Ah=Qd("Slot");function dae(t){const e=N.forwardRef((n,r)=>{const{children:s,...a}=n;if(N.isValidElement(s)){const o=mae(s),l=fae(a,s.props);return s.type!==N.Fragment&&(l.ref=r?Hj(r,o):o),N.cloneElement(s,l)}return N.Children.count(s)>1?N.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Q9=Symbol("radix.slottable");function X9(t){const e=({children:n})=>i.jsx(i.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=Q9,e}function hae(t){return N.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Q9}function fae(t,e){const n={...e};for(const r in e){const s=t[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...t,...n}}function mae(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Kj(t){const e=t+"CollectionProvider",[n,r]=ds(e),[s,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:y,children:w}=g,b=D.useRef(null),E=D.useRef(new Map).current;return i.jsx(s,{scope:y,itemMap:E,collectionRef:b,children:w})};o.displayName=e;const l=t+"CollectionSlot",c=Qd(l),u=D.forwardRef((g,y)=>{const{scope:w,children:b}=g,E=a(l,w),T=Dt(y,E.collectionRef);return i.jsx(c,{ref:T,children:b})});u.displayName=l;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=Qd(d),m=D.forwardRef((g,y)=>{const{scope:w,children:b,...E}=g,T=D.useRef(null),x=Dt(y,T),S=a(d,w);return D.useEffect(()=>(S.itemMap.set(T,{ref:T,...E}),()=>void S.itemMap.delete(T))),i.jsx(f,{[h]:"",ref:x,children:b})});m.displayName=d;function v(g){const y=a(t+"CollectionConsumer",g);return D.useCallback(()=>{const b=y.collectionRef.current;if(!b)return[];const E=Array.from(b.querySelectorAll(`[${h}]`));return Array.from(y.itemMap.values()).sort((S,_)=>E.indexOf(S.ref.current)-E.indexOf(_.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},v,r]}var pae=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Je=pae.reduce((t,e)=>{const n=Qd(`Primitive.${e}`),r=N.forwardRef((s,a)=>{const{asChild:o,...l}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Sk(t,e){t&&Eh.flushSync(()=>t.dispatchEvent(e))}function ur(t){const e=N.useRef(t);return N.useEffect(()=>{e.current=t}),N.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function gae(t,e=globalThis==null?void 0:globalThis.document){const n=ur(t);N.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var yae="DismissableLayer",mT="dismissableLayer.update",vae="dismissableLayer.pointerDownOutside",xae="dismissableLayer.focusOutside",EL,Z9=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),wp=N.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=t,u=N.useContext(Z9),[d,h]=N.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=N.useState({}),v=Dt(e,_=>h(_)),g=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=g.indexOf(y),b=d?g.indexOf(d):-1,E=u.layersWithOutsidePointerEventsDisabled.size>0,T=b>=w,x=wae(_=>{const p=_.target,A=[...u.branches].some(P=>P.contains(p));!T||A||(s==null||s(_),o==null||o(_),_.defaultPrevented||l==null||l())},f),S=_ae(_=>{const p=_.target;[...u.branches].some(P=>P.contains(p))||(a==null||a(_),o==null||o(_),_.defaultPrevented||l==null||l())},f);return gae(_=>{b===u.layers.size-1&&(r==null||r(_),!_.defaultPrevented&&l&&(_.preventDefault(),l()))},f),N.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(EL=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),AL(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=EL)}},[d,f,n,u]),N.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),AL())},[d,u]),N.useEffect(()=>{const _=()=>m({});return document.addEventListener(mT,_),()=>document.removeEventListener(mT,_)},[]),i.jsx(Je.div,{...c,ref:v,style:{pointerEvents:E?T?"auto":"none":void 0,...t.style},onFocusCapture:Pe(t.onFocusCapture,S.onFocusCapture),onBlurCapture:Pe(t.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Pe(t.onPointerDownCapture,x.onPointerDownCapture)})});wp.displayName=yae;var bae="DismissableLayerBranch",J9=N.forwardRef((t,e)=>{const n=N.useContext(Z9),r=N.useRef(null),s=Dt(e,r);return N.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),i.jsx(Je.div,{...t,ref:s})});J9.displayName=bae;function wae(t,e=globalThis==null?void 0:globalThis.document){const n=ur(t),r=N.useRef(!1),s=N.useRef(()=>{});return N.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let c=function(){e8(vae,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function _ae(t,e=globalThis==null?void 0:globalThis.document){const n=ur(t),r=N.useRef(!1);return N.useEffect(()=>{const s=a=>{a.target&&!r.current&&e8(xae,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function AL(){const t=new CustomEvent(mT);document.dispatchEvent(t)}function e8(t,e,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Sk(s,a):s.dispatchEvent(a)}var jae=wp,Nae=J9,fr=globalThis!=null&&globalThis.document?N.useLayoutEffect:()=>{},Sae="Portal",wx=N.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,a]=N.useState(!1);fr(()=>a(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?G9.createPortal(i.jsx(Je.div,{...r,ref:e}),o):null});wx.displayName=Sae;function Eae(t,e){return N.useReducer((n,r)=>e[n][r]??n,t)}var hs=t=>{const{present:e,children:n}=t,r=Aae(e),s=typeof n=="function"?n({present:r.isPresent}):N.Children.only(n),a=Dt(r.ref,Tae(s));return typeof n=="function"||r.isPresent?N.cloneElement(s,{ref:a}):null};hs.displayName="Presence";function Aae(t){const[e,n]=N.useState(),r=N.useRef(null),s=N.useRef(t),a=N.useRef("none"),o=t?"mounted":"unmounted",[l,c]=Eae(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const u=Fb(r.current);a.current=l==="mounted"?u:"none"},[l]),fr(()=>{const u=r.current,d=s.current;if(d!==t){const f=a.current,m=Fb(u);t?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),fr(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=m=>{const g=Fb(r.current).includes(m.animationName);if(m.target===e&&g&&(c("ANIMATION_END"),!s.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},f=m=>{m.target===e&&(a.current=Fb(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:N.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Fb(t){return(t==null?void 0:t.animationName)||"none"}function Tae(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Cae=OI[" useInsertionEffect ".trim().toString()]||fr;function Ha({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,a,o]=Pae({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:s;{const d=N.useRef(t!==void 0);N.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const u=N.useCallback(d=>{var h;if(l){const f=Iae(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else a(d)},[l,t,a,o]);return[c,u]}function Pae({defaultProp:t,onChange:e}){const[n,r]=N.useState(t),s=N.useRef(n),a=N.useRef(e);return Cae(()=>{a.current=e},[e]),N.useEffect(()=>{var o;s.current!==n&&((o=a.current)==null||o.call(a,n),s.current=n)},[n,s]),[n,r,a]}function Iae(t){return typeof t=="function"}var t8=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),kae="VisuallyHidden",Gj=N.forwardRef((t,e)=>i.jsx(Je.span,{...t,ref:e,style:{...t8,...t.style}}));Gj.displayName=kae;var Rae=Gj,Ek="ToastProvider",[Ak,Oae,Mae]=Kj("Toast"),[n8,Bet]=ds("Toast",[Mae]),[Dae,Yj]=n8(Ek),r8=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:o}=t,[l,c]=N.useState(null),[u,d]=N.useState(0),h=N.useRef(!1),f=N.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Ek}\`. Expected non-empty \`string\`.`),i.jsx(Ak.Provider,{scope:e,children:i.jsx(Dae,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:a,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:N.useCallback(()=>d(m=>m+1),[]),onToastRemove:N.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};r8.displayName=Ek;var s8="ToastViewport",Lae=["F8"],pT="toast.viewportPause",gT="toast.viewportResume",i8=N.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=Lae,label:s="Notifications ({hotkey})",...a}=t,o=Yj(s8,n),l=Oae(n),c=N.useRef(null),u=N.useRef(null),d=N.useRef(null),h=N.useRef(null),f=Dt(e,h,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;N.useEffect(()=>{const y=w=>{var E;r.length!==0&&r.every(T=>w[T]||w.code===T)&&((E=h.current)==null||E.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[r]),N.useEffect(()=>{const y=c.current,w=h.current;if(v&&y&&w){const b=()=>{if(!o.isClosePausedRef.current){const S=new CustomEvent(pT);w.dispatchEvent(S),o.isClosePausedRef.current=!0}},E=()=>{if(o.isClosePausedRef.current){const S=new CustomEvent(gT);w.dispatchEvent(S),o.isClosePausedRef.current=!1}},T=S=>{!y.contains(S.relatedTarget)&&E()},x=()=>{y.contains(document.activeElement)||E()};return y.addEventListener("focusin",b),y.addEventListener("focusout",T),y.addEventListener("pointermove",b),y.addEventListener("pointerleave",x),window.addEventListener("blur",b),window.addEventListener("focus",E),()=>{y.removeEventListener("focusin",b),y.removeEventListener("focusout",T),y.removeEventListener("pointermove",b),y.removeEventListener("pointerleave",x),window.removeEventListener("blur",b),window.removeEventListener("focus",E)}}},[v,o.isClosePausedRef]);const g=N.useCallback(({tabbingDirection:y})=>{const b=l().map(E=>{const T=E.ref.current,x=[T,...Qae(T)];return y==="forwards"?x:x.reverse()});return(y==="forwards"?b.reverse():b).flat()},[l]);return N.useEffect(()=>{const y=h.current;if(y){const w=b=>{var x,S,_;const E=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!E){const p=document.activeElement,A=b.shiftKey;if(b.target===y&&A){(x=u.current)==null||x.focus();return}const I=g({tabbingDirection:A?"backwards":"forwards"}),R=I.findIndex(L=>L===p);WS(I.slice(R+1))?b.preventDefault():A?(S=u.current)==null||S.focus():(_=d.current)==null||_.focus()}};return y.addEventListener("keydown",w),()=>y.removeEventListener("keydown",w)}},[l,g]),i.jsxs(Nae,{ref:c,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&i.jsx(yT,{ref:u,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"forwards"});WS(y)}}),i.jsx(Ak.Slot,{scope:n,children:i.jsx(Je.ol,{tabIndex:-1,...a,ref:f})}),v&&i.jsx(yT,{ref:d,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"backwards"});WS(y)}})]})});i8.displayName=s8;var a8="ToastFocusProxy",yT=N.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,a=Yj(a8,n);return i.jsx(Gj,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=a.viewport)!=null&&u.contains(l))&&r()}})});yT.displayName=a8;var _x="Toast",$ae="toast.swipeStart",Fae="toast.swipeMove",Vae="toast.swipeCancel",Bae="toast.swipeEnd",o8=N.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:a,...o}=t,[l,c]=Ha({prop:r,defaultProp:s??!0,onChange:a,caller:_x});return i.jsx(hs,{present:n||l,children:i.jsx(qae,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:ur(t.onPause),onResume:ur(t.onResume),onSwipeStart:Pe(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Pe(t.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Pe(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Pe(t.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});o8.displayName=_x;var[Uae,zae]=n8(_x,{onClose(){}}),qae=N.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...v}=t,g=Yj(_x,n),[y,w]=N.useState(null),b=Dt(e,L=>w(L)),E=N.useRef(null),T=N.useRef(null),x=s||g.duration,S=N.useRef(0),_=N.useRef(x),p=N.useRef(0),{onToastAdd:A,onToastRemove:P}=g,C=ur(()=>{var z;(y==null?void 0:y.contains(document.activeElement))&&((z=g.viewport)==null||z.focus()),o()}),I=N.useCallback(L=>{!L||L===1/0||(window.clearTimeout(p.current),S.current=new Date().getTime(),p.current=window.setTimeout(C,L))},[C]);N.useEffect(()=>{const L=g.viewport;if(L){const z=()=>{I(_.current),u==null||u()},W=()=>{const M=new Date().getTime()-S.current;_.current=_.current-M,window.clearTimeout(p.current),c==null||c()};return L.addEventListener(pT,W),L.addEventListener(gT,z),()=>{L.removeEventListener(pT,W),L.removeEventListener(gT,z)}}},[g.viewport,x,c,u,I]),N.useEffect(()=>{a&&!g.isClosePausedRef.current&&I(x)},[a,x,g.isClosePausedRef,I]),N.useEffect(()=>(A(),()=>P()),[A,P]);const R=N.useMemo(()=>y?m8(y):null,[y]);return g.viewport?i.jsxs(i.Fragment,{children:[R&&i.jsx(Wae,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),i.jsx(Uae,{scope:n,onClose:C,children:Eh.createPortal(i.jsx(Ak.ItemSlot,{scope:n,children:i.jsx(jae,{asChild:!0,onEscapeKeyDown:Pe(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||C(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(Je.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":g.swipeDirection,...v,ref:b,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Pe(t.onKeyDown,L=>{L.key==="Escape"&&(l==null||l(L.nativeEvent),L.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,C()))}),onPointerDown:Pe(t.onPointerDown,L=>{L.button===0&&(E.current={x:L.clientX,y:L.clientY})}),onPointerMove:Pe(t.onPointerMove,L=>{if(!E.current)return;const z=L.clientX-E.current.x,W=L.clientY-E.current.y,M=!!T.current,V=["left","right"].includes(g.swipeDirection),F=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,Y=V?F(0,z):0,ae=V?0:F(0,W),oe=L.pointerType==="touch"?10:2,me={x:Y,y:ae},ke={originalEvent:L,delta:me};M?(T.current=me,Vb(Fae,h,ke,{discrete:!1})):TL(me,g.swipeDirection,oe)?(T.current=me,Vb($ae,d,ke,{discrete:!1}),L.target.setPointerCapture(L.pointerId)):(Math.abs(z)>oe||Math.abs(W)>oe)&&(E.current=null)}),onPointerUp:Pe(t.onPointerUp,L=>{const z=T.current,W=L.target;if(W.hasPointerCapture(L.pointerId)&&W.releasePointerCapture(L.pointerId),T.current=null,E.current=null,z){const M=L.currentTarget,V={originalEvent:L,delta:z};TL(z,g.swipeDirection,g.swipeThreshold)?Vb(Bae,m,V,{discrete:!0}):Vb(Vae,f,V,{discrete:!0}),M.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),Wae=t=>{const{__scopeToast:e,children:n,...r}=t,s=Yj(_x,e),[a,o]=N.useState(!1),[l,c]=N.useState(!1);return Gae(()=>o(!0)),N.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(wx,{asChild:!0,children:i.jsx(Gj,{...r,children:a&&i.jsxs(i.Fragment,{children:[s.label," ",n]})})})},Hae="ToastTitle",l8=N.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return i.jsx(Je.div,{...r,ref:e})});l8.displayName=Hae;var Kae="ToastDescription",c8=N.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return i.jsx(Je.div,{...r,ref:e})});c8.displayName=Kae;var u8="ToastAction",d8=N.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?i.jsx(f8,{altText:n,asChild:!0,children:i.jsx(Tk,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${u8}\`. Expected non-empty \`string\`.`),null)});d8.displayName=u8;var h8="ToastClose",Tk=N.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=zae(h8,n);return i.jsx(f8,{asChild:!0,children:i.jsx(Je.button,{type:"button",...r,ref:e,onClick:Pe(t.onClick,s.onClose)})})});Tk.displayName=h8;var f8=N.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return i.jsx(Je.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function m8(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),Yae(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...m8(r))}}),e}function Vb(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Sk(s,a):s.dispatchEvent(a)}var TL=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),a=r>s;return e==="left"||e==="right"?a&&r>n:!a&&s>n};function Gae(t=()=>{}){const e=ur(t);fr(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function Yae(t){return t.nodeType===t.ELEMENT_NODE}function Qae(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function WS(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Xae=r8,p8=i8,g8=o8,y8=l8,v8=c8,x8=d8,b8=Tk;function w8(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=w8(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function $t(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=w8(t))&&(r&&(r+=" "),r+=e);return r}const CL=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,PL=$t,Th=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return PL(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:a}=e,o=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],h=a==null?void 0:a[u];if(d===null)return null;const f=CL(d)||CL(h);return s[u][f]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(v=>{let[g,y]=v;return Array.isArray(y)?y.includes({...a,...l}[g]):{...a,...l}[g]===y})?[...u,h,f]:u},[]);return PL(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zae=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_8=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jae={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eoe=N.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:o,...l},c)=>N.createElement("svg",{ref:c,...Jae,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:_8("lucide",s),...l},[...o.map(([u,d])=>N.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=(t,e)=>{const n=N.forwardRef(({className:r,...s},a)=>N.createElement(eoe,{ref:a,iconNode:e,className:_8(`lucide-${Zae(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toe=Ie("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const noe=Ie("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const roe=Ie("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=Ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const soe=Ie("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ioe=Ie("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=Ie("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aoe=Ie("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ooe=Ie("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=Ie("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=Ie("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=Ie("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const loe=Ie("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=Ie("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const coe=Ie("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=Ie("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8=Ie("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=Ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=Ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S8=Ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uoe=Ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=Ie("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=Ie("CircleArrowDown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const doe=Ie("CircleArrowUp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=Ie("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=Ie("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=Ie("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hoe=Ie("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const foe=Ie("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=Ie("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=Ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=Ie("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=Ie("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=Ie("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const moe=Ie("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8=Ie("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const poe=Ie("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=Ie("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const goe=Ie("FileX",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=Ie("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=Ie("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C8=Ie("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=Ie("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yoe=Ie("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const voe=Ie("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xoe=Ie("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=Ie("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=Ie("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=Ie("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const boe=Ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=Ie("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const woe=Ie("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _oe=Ie("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const joe=Ie("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=Ie("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Noe=Ie("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Soe=Ie("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _p=Ie("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8=Ie("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I8=Ie("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=Ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=Ie("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k8=Ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eoe=Ie("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=Ie("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aoe=Ie("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=Ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=Ie("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=Ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ik=Ie("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eh=Ie("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=Ie("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=Ie("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Toe=Ie("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=Ie("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=Ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=Ie("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=Ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=Ie("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=Ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Coe=Ie("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8=Ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=Ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=Ie("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=Ie("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=Ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Rk="-",Poe=t=>{const e=koe(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(Rk);return l[0]===""&&l.length!==1&&l.shift(),M8(l,e)||Ioe(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},M8=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?M8(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const a=t.join(Rk);return(o=e.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},$L=/^\[(.+)\]$/,Ioe=t=>{if($L.test(t)){const e=$L.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},koe=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return Ooe(Object.entries(t.classGroups),n).forEach(([a,o])=>{xT(o,r,a,e)}),r},xT=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const a=s===""?e:FL(e,s);a.classGroupId=n;return}if(typeof s=="function"){if(Roe(s)){xT(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([a,o])=>{xT(o,FL(e,a),n,r)})})},FL=(t,e)=>{let n=t;return e.split(Rk).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Roe=t=>t.isThemeGetter,Ooe=(t,e)=>e?t.map(([n,r])=>{const s=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[e+o,l])):a);return[n,s]}):t,Moe=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(a,o)=>{n.set(a,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return s(a,o),o},set(a,o){n.has(a)?n.set(a,o):s(a,o)}}},D8="!",Doe=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],a=e.length,o=l=>{const c=[];let u=0,d=0,h;for(let y=0;y<l.length;y++){let w=l[y];if(u===0){if(w===s&&(r||l.slice(y,y+a)===e)){c.push(l.slice(d,y)),d=y+a;continue}if(w==="/"){h=y;continue}}w==="["?u++:w==="]"&&u--}const f=c.length===0?l:l.substring(d),m=f.startsWith(D8),v=m?f.substring(1):f,g=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:g}};return n?l=>n({className:l,parseClassName:o}):o},Loe=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},$oe=t=>({cache:Moe(t.cacheSize),parseClassName:Doe(t),...Poe(t)}),Foe=/\s+/,Voe=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,a=[],o=t.trim().split(Foe);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=n(u);let v=!!m,g=r(v?f.substring(0,m):f);if(!g){if(!v){l=u+(l.length>0?" "+l:l);continue}if(g=r(f),!g){l=u+(l.length>0?" "+l:l);continue}v=!1}const y=Loe(d).join(":"),w=h?y+D8:y,b=w+g;if(a.includes(b))continue;a.push(b);const E=s(g,v);for(let T=0;T<E.length;++T){const x=E[T];a.push(w+x)}l=u+(l.length>0?" "+l:l)}return l};function Boe(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=L8(e))&&(r&&(r+=" "),r+=n);return r}const L8=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=L8(t[r]))&&(n&&(n+=" "),n+=e);return n};function Uoe(t,...e){let n,r,s,a=o;function o(c){const u=e.reduce((d,h)=>h(d),t());return n=$oe(u),r=n.cache.get,s=n.cache.set,a=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=Voe(c,n);return s(c,d),d}return function(){return a(Boe.apply(null,arguments))}}const Ln=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},$8=/^\[(?:([a-z-]+):)?(.+)\]$/i,zoe=/^\d+\/\d+$/,qoe=new Set(["px","full","screen"]),Woe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Hoe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Koe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Goe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Yoe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Xo=t=>Vf(t)||qoe.has(t)||zoe.test(t),rc=t=>jp(t,"length",rle),Vf=t=>!!t&&!Number.isNaN(Number(t)),HS=t=>jp(t,"number",Vf),jg=t=>!!t&&Number.isInteger(Number(t)),Qoe=t=>t.endsWith("%")&&Vf(t.slice(0,-1)),Vt=t=>$8.test(t),sc=t=>Woe.test(t),Xoe=new Set(["length","size","percentage"]),Zoe=t=>jp(t,Xoe,F8),Joe=t=>jp(t,"position",F8),ele=new Set(["image","url"]),tle=t=>jp(t,ele,ile),nle=t=>jp(t,"",sle),Ng=()=>!0,jp=(t,e,n)=>{const r=$8.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},rle=t=>Hoe.test(t)&&!Koe.test(t),F8=()=>!1,sle=t=>Goe.test(t),ile=t=>Yoe.test(t),ale=()=>{const t=Ln("colors"),e=Ln("spacing"),n=Ln("blur"),r=Ln("brightness"),s=Ln("borderColor"),a=Ln("borderRadius"),o=Ln("borderSpacing"),l=Ln("borderWidth"),c=Ln("contrast"),u=Ln("grayscale"),d=Ln("hueRotate"),h=Ln("invert"),f=Ln("gap"),m=Ln("gradientColorStops"),v=Ln("gradientColorStopPositions"),g=Ln("inset"),y=Ln("margin"),w=Ln("opacity"),b=Ln("padding"),E=Ln("saturate"),T=Ln("scale"),x=Ln("sepia"),S=Ln("skew"),_=Ln("space"),p=Ln("translate"),A=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto",Vt,e],I=()=>[Vt,e],R=()=>["",Xo,rc],L=()=>["auto",Vf,Vt],z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],W=()=>["solid","dashed","dotted","double","none"],M=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],F=()=>["","0",Vt],Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ae=()=>[Vf,Vt];return{cacheSize:500,separator:":",theme:{colors:[Ng],spacing:[Xo,rc],blur:["none","",sc,Vt],brightness:ae(),borderColor:[t],borderRadius:["none","","full",sc,Vt],borderSpacing:I(),borderWidth:R(),contrast:ae(),grayscale:F(),hueRotate:ae(),invert:F(),gap:I(),gradientColorStops:[t],gradientColorStopPositions:[Qoe,rc],inset:C(),margin:C(),opacity:ae(),padding:I(),saturate:ae(),scale:ae(),sepia:F(),skew:ae(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",Vt]}],container:["container"],columns:[{columns:[sc]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...z(),Vt]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",jg,Vt]}],basis:[{basis:C()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Vt]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",jg,Vt]}],"grid-cols":[{"grid-cols":[Ng]}],"col-start-end":[{col:["auto",{span:["full",jg,Vt]},Vt]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[Ng]}],"row-start-end":[{row:["auto",{span:[jg,Vt]},Vt]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Vt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Vt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[_]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[_]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Vt,e]}],"min-w":[{"min-w":[Vt,e,"min","max","fit"]}],"max-w":[{"max-w":[Vt,e,"none","full","min","max","fit","prose",{screen:[sc]},sc]}],h:[{h:[Vt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Vt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Vt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Vt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",sc,rc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",HS]}],"font-family":[{font:[Ng]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Vt]}],"line-clamp":[{"line-clamp":["none",Vf,HS]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Xo,Vt]}],"list-image":[{"list-image":["none",Vt]}],"list-style-type":[{list:["none","disc","decimal",Vt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...W(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Xo,rc]}],"underline-offset":[{"underline-offset":["auto",Xo,Vt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Vt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Vt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...z(),Joe]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Zoe]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},tle]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...W(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:W()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...W()]}],"outline-offset":[{"outline-offset":[Xo,Vt]}],"outline-w":[{outline:[Xo,rc]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[Xo,rc]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",sc,nle]}],"shadow-color":[{shadow:[Ng]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...M(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":M()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",sc,Vt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[E]}],sepia:[{sepia:[x]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[x]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Vt]}],duration:[{duration:ae()}],ease:[{ease:["linear","in","out","in-out",Vt]}],delay:[{delay:ae()}],animate:[{animate:["none","spin","ping","pulse","bounce",Vt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[T]}],"scale-x":[{"scale-x":[T]}],"scale-y":[{"scale-y":[T]}],rotate:[{rotate:[jg,Vt]}],"translate-x":[{"translate-x":[p]}],"translate-y":[{"translate-y":[p]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Vt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Vt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Vt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Xo,rc,HS]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},ole=Uoe(ale);function pe(...t){return ole($t(t))}const lle=Xae,V8=N.forwardRef(({className:t,...e},n)=>i.jsx(p8,{ref:n,className:pe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));V8.displayName=p8.displayName;const cle=Th("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),B8=N.forwardRef(({className:t,variant:e,...n},r)=>i.jsx(g8,{ref:r,className:pe(cle({variant:e}),t),...n}));B8.displayName=g8.displayName;const ule=N.forwardRef(({className:t,...e},n)=>i.jsx(x8,{ref:n,className:pe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));ule.displayName=x8.displayName;const U8=N.forwardRef(({className:t,...e},n)=>i.jsx(b8,{ref:n,className:pe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:i.jsx(kk,{className:"h-4 w-4"})}));U8.displayName=b8.displayName;const z8=N.forwardRef(({className:t,...e},n)=>i.jsx(y8,{ref:n,className:pe("text-sm font-semibold",t),...e}));z8.displayName=y8.displayName;const q8=N.forwardRef(({className:t,...e},n)=>i.jsx(v8,{ref:n,className:pe("text-sm opacity-90",t),...e}));q8.displayName=v8.displayName;function dle(){const{toasts:t}=lae();return i.jsxs(lle,{children:[t.map(function({id:e,title:n,description:r,action:s,...a}){return i.jsxs(B8,{...a,children:[i.jsxs("div",{className:"grid gap-1",children:[n&&i.jsx(z8,{children:n}),r&&i.jsx(q8,{children:r})]}),s,i.jsx(U8,{})]},e)}),i.jsx(V8,{})]})}var VL=["light","dark"],hle="(prefers-color-scheme: dark)",fle=N.createContext(void 0),mle={setTheme:t=>{},themes:[]},ple=()=>{var t;return(t=N.useContext(fle))!=null?t:mle};N.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:o,attrs:l,nonce:c})=>{let u=a==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?VL.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(v,g=!1,y=!0)=>{let w=o?o[v]:v,b=g?v+"|| ''":`'${w}'`,E="";return s&&y&&!g&&VL.includes(v)&&(E+=`d.style.colorScheme = '${v}';`),n==="class"?g||w?E+=`c.add(${b})`:E+="null":w&&(E+=`d[s](n,${b})`),E},m=t?`!function(){${d}${f(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${hle}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${u?"":"else{"+f(a,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(a,!1,!1)};}${h}}catch(t){}}();`;return N.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var gle=t=>{switch(t){case"success":return xle;case"info":return wle;case"warning":return ble;case"error":return _le;default:return null}},yle=Array(12).fill(0),vle=({visible:t,className:e})=>D.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},D.createElement("div",{className:"sonner-spinner"},yle.map((n,r)=>D.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),xle=D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},D.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),ble=D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},D.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),wle=D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},D.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),_le=D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},D.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),jle=D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},D.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),D.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Nle=()=>{let[t,e]=D.useState(document.hidden);return D.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},bT=1,Sle=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:bT++,a=this.toasts.find(l=>l.id===s),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),a?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...t,id:s,title:n}),{...l,...t,id:s,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:s}),s},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),s=n!==void 0,a,o=r.then(async c=>{if(a=["resolve",c],D.isValidElement(c))s=!1,this.create({id:n,type:"default",message:c});else if(Ale(c)&&!c.ok){s=!1;let u=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:n,type:"error",message:u,description:d})}else if(e.success!==void 0){s=!1;let u=typeof e.success=="function"?await e.success(c):e.success,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(a=["reject",c],e.error!==void 0){s=!1;let u=typeof e.error=="function"?await e.error(c):e.error,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;s&&(this.dismiss(n),n=void 0),(c=e.finally)==null||c.call(e)}),l=()=>new Promise((c,u)=>o.then(()=>a[0]==="reject"?u(a[1]):c(a[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||bT++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Js=new Sle,Ele=(t,e)=>{let n=(e==null?void 0:e.id)||bT++;return Js.addToast({title:t,...e,id:n}),n},Ale=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Tle=Ele,Cle=()=>Js.toasts,Ple=()=>Js.getActiveToasts(),J=Object.assign(Tle,{success:Js.success,info:Js.info,warning:Js.warning,error:Js.error,custom:Js.custom,message:Js.message,promise:Js.promise,dismiss:Js.dismiss,loading:Js.loading},{getHistory:Cle,getToasts:Ple});function Ile(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}Ile(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Bb(t){return t.label!==void 0}var kle=3,Rle="32px",Ole="16px",BL=4e3,Mle=356,Dle=14,Lle=20,$le=200;function wa(...t){return t.filter(Boolean).join(" ")}function Fle(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var Vle=t=>{var e,n,r,s,a,o,l,c,u,d,h;let{invert:f,toast:m,unstyled:v,interacting:g,setHeights:y,visibleToasts:w,heights:b,index:E,toasts:T,expanded:x,removeToast:S,defaultRichColors:_,closeButton:p,style:A,cancelButtonStyle:P,actionButtonStyle:C,className:I="",descriptionClassName:R="",duration:L,position:z,gap:W,loadingIcon:M,expandByDefault:V,classNames:F,icons:Y,closeButtonAriaLabel:ae="Close toast",pauseWhenPageIsHidden:oe}=t,[me,ke]=D.useState(null),[ut,jt]=D.useState(null),[Ne,ht]=D.useState(!1),[we,Me]=D.useState(!1),[Fe,ue]=D.useState(!1),[Ct,gt]=D.useState(!1),[on,Jt]=D.useState(!1),[_n,zr]=D.useState(0),[rn,q]=D.useState(0),se=D.useRef(m.duration||L||BL),de=D.useRef(null),Re=D.useRef(null),Oe=E===0,Se=E+1<=w,ze=m.type,zt=m.dismissible!==!1,ln=m.className||"",fs=m.descriptionClassName||"",ya=D.useMemo(()=>b.findIndex(bt=>bt.toastId===m.id)||0,[b,m.id]),pi=D.useMemo(()=>{var bt;return(bt=m.closeButton)!=null?bt:p},[m.closeButton,p]),Qu=D.useMemo(()=>m.duration||L||BL,[m.duration,L]),gi=D.useRef(0),Ks=D.useRef(0),Gl=D.useRef(0),es=D.useRef(null),[Bh,Qo]=z.split("-"),rg=D.useMemo(()=>b.reduce((bt,hn,An)=>An>=ya?bt:bt+hn.height,0),[b,ya]),Yl=Nle(),cb=m.invert||f,Pr=ze==="loading";Ks.current=D.useMemo(()=>ya*W+rg,[ya,rg]),D.useEffect(()=>{se.current=Qu},[Qu]),D.useEffect(()=>{ht(!0)},[]),D.useEffect(()=>{let bt=Re.current;if(bt){let hn=bt.getBoundingClientRect().height;return q(hn),y(An=>[{toastId:m.id,height:hn,position:m.position},...An]),()=>y(An=>An.filter(qr=>qr.toastId!==m.id))}},[y,m.id]),D.useLayoutEffect(()=>{if(!Ne)return;let bt=Re.current,hn=bt.style.height;bt.style.height="auto";let An=bt.getBoundingClientRect().height;bt.style.height=hn,q(An),y(qr=>qr.find(yi=>yi.toastId===m.id)?qr.map(yi=>yi.toastId===m.id?{...yi,height:An}:yi):[{toastId:m.id,height:An,position:m.position},...qr])},[Ne,m.title,m.description,y,m.id]);let va=D.useCallback(()=>{Me(!0),zr(Ks.current),y(bt=>bt.filter(hn=>hn.toastId!==m.id)),setTimeout(()=>{S(m)},$le)},[m,S,y,Ks]);D.useEffect(()=>{if(m.promise&&ze==="loading"||m.duration===1/0||m.type==="loading")return;let bt;return x||g||oe&&Yl?(()=>{if(Gl.current<gi.current){let hn=new Date().getTime()-gi.current;se.current=se.current-hn}Gl.current=new Date().getTime()})():se.current!==1/0&&(gi.current=new Date().getTime(),bt=setTimeout(()=>{var hn;(hn=m.onAutoClose)==null||hn.call(m,m),va()},se.current)),()=>clearTimeout(bt)},[x,g,m,ze,oe,Yl,va]),D.useEffect(()=>{m.delete&&va()},[va,m.delete]);function Xu(){var bt,hn,An;return Y!=null&&Y.loading?D.createElement("div",{className:wa(F==null?void 0:F.loader,(bt=m==null?void 0:m.classNames)==null?void 0:bt.loader,"sonner-loader"),"data-visible":ze==="loading"},Y.loading):M?D.createElement("div",{className:wa(F==null?void 0:F.loader,(hn=m==null?void 0:m.classNames)==null?void 0:hn.loader,"sonner-loader"),"data-visible":ze==="loading"},M):D.createElement(vle,{className:wa(F==null?void 0:F.loader,(An=m==null?void 0:m.classNames)==null?void 0:An.loader),visible:ze==="loading"})}return D.createElement("li",{tabIndex:0,ref:Re,className:wa(I,ln,F==null?void 0:F.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,F==null?void 0:F.default,F==null?void 0:F[ze],(n=m==null?void 0:m.classNames)==null?void 0:n[ze]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:_,"data-styled":!(m.jsx||m.unstyled||v),"data-mounted":Ne,"data-promise":!!m.promise,"data-swiped":on,"data-removed":we,"data-visible":Se,"data-y-position":Bh,"data-x-position":Qo,"data-index":E,"data-front":Oe,"data-swiping":Fe,"data-dismissible":zt,"data-type":ze,"data-invert":cb,"data-swipe-out":Ct,"data-swipe-direction":ut,"data-expanded":!!(x||V&&Ne),style:{"--index":E,"--toasts-before":E,"--z-index":T.length-E,"--offset":`${we?_n:Ks.current}px`,"--initial-height":V?"auto":`${rn}px`,...A,...m.style},onDragEnd:()=>{ue(!1),ke(null),es.current=null},onPointerDown:bt=>{Pr||!zt||(de.current=new Date,zr(Ks.current),bt.target.setPointerCapture(bt.pointerId),bt.target.tagName!=="BUTTON"&&(ue(!0),es.current={x:bt.clientX,y:bt.clientY}))},onPointerUp:()=>{var bt,hn,An,qr;if(Ct||!zt)return;es.current=null;let yi=Number(((bt=Re.current)==null?void 0:bt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ro=Number(((hn=Re.current)==null?void 0:hn.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Fi=new Date().getTime()-((An=de.current)==null?void 0:An.getTime()),Gs=me==="x"?yi:ro,xa=Math.abs(Gs)/Fi;if(Math.abs(Gs)>=Lle||xa>.11){zr(Ks.current),(qr=m.onDismiss)==null||qr.call(m,m),jt(me==="x"?yi>0?"right":"left":ro>0?"down":"up"),va(),gt(!0),Jt(!1);return}ue(!1),ke(null)},onPointerMove:bt=>{var hn,An,qr,yi;if(!es.current||!zt||((hn=window.getSelection())==null?void 0:hn.toString().length)>0)return;let ro=bt.clientY-es.current.y,Fi=bt.clientX-es.current.x,Gs=(An=t.swipeDirections)!=null?An:Fle(z);!me&&(Math.abs(Fi)>1||Math.abs(ro)>1)&&ke(Math.abs(Fi)>Math.abs(ro)?"x":"y");let xa={x:0,y:0};me==="y"?(Gs.includes("top")||Gs.includes("bottom"))&&(Gs.includes("top")&&ro<0||Gs.includes("bottom")&&ro>0)&&(xa.y=ro):me==="x"&&(Gs.includes("left")||Gs.includes("right"))&&(Gs.includes("left")&&Fi<0||Gs.includes("right")&&Fi>0)&&(xa.x=Fi),(Math.abs(xa.x)>0||Math.abs(xa.y)>0)&&Jt(!0),(qr=Re.current)==null||qr.style.setProperty("--swipe-amount-x",`${xa.x}px`),(yi=Re.current)==null||yi.style.setProperty("--swipe-amount-y",`${xa.y}px`)}},pi&&!m.jsx?D.createElement("button",{"aria-label":ae,"data-disabled":Pr,"data-close-button":!0,onClick:Pr||!zt?()=>{}:()=>{var bt;va(),(bt=m.onDismiss)==null||bt.call(m,m)},className:wa(F==null?void 0:F.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(a=Y==null?void 0:Y.close)!=null?a:jle):null,m.jsx||N.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:D.createElement(D.Fragment,null,ze||m.icon||m.promise?D.createElement("div",{"data-icon":"",className:wa(F==null?void 0:F.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Xu():null,m.type!=="loading"?m.icon||(Y==null?void 0:Y[ze])||gle(ze):null):null,D.createElement("div",{"data-content":"",className:wa(F==null?void 0:F.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},D.createElement("div",{"data-title":"",className:wa(F==null?void 0:F.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?D.createElement("div",{"data-description":"",className:wa(R,fs,F==null?void 0:F.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),N.isValidElement(m.cancel)?m.cancel:m.cancel&&Bb(m.cancel)?D.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||P,onClick:bt=>{var hn,An;Bb(m.cancel)&&zt&&((An=(hn=m.cancel).onClick)==null||An.call(hn,bt),va())},className:wa(F==null?void 0:F.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,N.isValidElement(m.action)?m.action:m.action&&Bb(m.action)?D.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||C,onClick:bt=>{var hn,An;Bb(m.action)&&((An=(hn=m.action).onClick)==null||An.call(hn,bt),!bt.defaultPrevented&&va())},className:wa(F==null?void 0:F.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function UL(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Ble(t,e){let n={};return[t,e].forEach((r,s)=>{let a=s===1,o=a?"--mobile-offset":"--offset",l=a?Ole:Rle;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=l:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var Ule=N.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:a,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:f,style:m,visibleToasts:v=kle,toastOptions:g,dir:y=UL(),gap:w=Dle,loadingIcon:b,icons:E,containerAriaLabel:T="Notifications",pauseWhenPageIsHidden:x}=t,[S,_]=D.useState([]),p=D.useMemo(()=>Array.from(new Set([r].concat(S.filter(oe=>oe.position).map(oe=>oe.position)))),[S,r]),[A,P]=D.useState([]),[C,I]=D.useState(!1),[R,L]=D.useState(!1),[z,W]=D.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),M=D.useRef(null),V=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=D.useRef(null),Y=D.useRef(!1),ae=D.useCallback(oe=>{_(me=>{var ke;return(ke=me.find(ut=>ut.id===oe.id))!=null&&ke.delete||Js.dismiss(oe.id),me.filter(({id:ut})=>ut!==oe.id)})},[]);return D.useEffect(()=>Js.subscribe(oe=>{if(oe.dismiss){_(me=>me.map(ke=>ke.id===oe.id?{...ke,delete:!0}:ke));return}setTimeout(()=>{G9.flushSync(()=>{_(me=>{let ke=me.findIndex(ut=>ut.id===oe.id);return ke!==-1?[...me.slice(0,ke),{...me[ke],...oe},...me.slice(ke+1)]:[oe,...me]})})})}),[]),D.useEffect(()=>{if(d!=="system"){W(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?W("dark"):W("light")),typeof window>"u")return;let oe=window.matchMedia("(prefers-color-scheme: dark)");try{oe.addEventListener("change",({matches:me})=>{W(me?"dark":"light")})}catch{oe.addListener(({matches:ke})=>{try{W(ke?"dark":"light")}catch(ut){console.error(ut)}})}},[d]),D.useEffect(()=>{S.length<=1&&I(!1)},[S]),D.useEffect(()=>{let oe=me=>{var ke,ut;s.every(jt=>me[jt]||me.code===jt)&&(I(!0),(ke=M.current)==null||ke.focus()),me.code==="Escape"&&(document.activeElement===M.current||(ut=M.current)!=null&&ut.contains(document.activeElement))&&I(!1)};return document.addEventListener("keydown",oe),()=>document.removeEventListener("keydown",oe)},[s]),D.useEffect(()=>{if(M.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,Y.current=!1)}},[M.current]),D.createElement("section",{ref:e,"aria-label":`${T} ${V}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},p.map((oe,me)=>{var ke;let[ut,jt]=oe.split("-");return S.length?D.createElement("ol",{key:oe,dir:y==="auto"?UL():y,tabIndex:-1,ref:M,className:l,"data-sonner-toaster":!0,"data-theme":z,"data-y-position":ut,"data-lifted":C&&S.length>1&&!a,"data-x-position":jt,style:{"--front-toast-height":`${((ke=A[0])==null?void 0:ke.height)||0}px`,"--width":`${Mle}px`,"--gap":`${w}px`,...m,...Ble(c,u)},onBlur:Ne=>{Y.current&&!Ne.currentTarget.contains(Ne.relatedTarget)&&(Y.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:Ne=>{Ne.target instanceof HTMLElement&&Ne.target.dataset.dismissible==="false"||Y.current||(Y.current=!0,F.current=Ne.relatedTarget)},onMouseEnter:()=>I(!0),onMouseMove:()=>I(!0),onMouseLeave:()=>{R||I(!1)},onDragEnd:()=>I(!1),onPointerDown:Ne=>{Ne.target instanceof HTMLElement&&Ne.target.dataset.dismissible==="false"||L(!0)},onPointerUp:()=>L(!1)},S.filter(Ne=>!Ne.position&&me===0||Ne.position===oe).map((Ne,ht)=>{var we,Me;return D.createElement(Vle,{key:Ne.id,icons:E,index:ht,toast:Ne,defaultRichColors:h,duration:(we=g==null?void 0:g.duration)!=null?we:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:n,visibleToasts:v,closeButton:(Me=g==null?void 0:g.closeButton)!=null?Me:o,interacting:R,position:oe,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:ae,toasts:S.filter(Fe=>Fe.position==Ne.position),heights:A.filter(Fe=>Fe.position==Ne.position),setHeights:P,expandByDefault:a,gap:w,loadingIcon:b,expanded:C,pauseWhenPageIsHidden:x,swipeDirections:t.swipeDirections})})):null}))});const zle=({...t})=>{const{theme:e="system"}=ple();return i.jsx(Ule,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var qle=OI[" useId ".trim().toString()]||(()=>{}),Wle=0;function ea(t){const[e,n]=N.useState(qle());return fr(()=>{n(r=>r??String(Wle++))},[t]),e?`radix-${e}`:""}const Hle=["top","right","bottom","left"],cu=Math.min,ji=Math.max,Tw=Math.round,Ub=Math.floor,jo=t=>({x:t,y:t}),Kle={left:"right",right:"left",bottom:"top",top:"bottom"},Gle={start:"end",end:"start"};function wT(t,e,n){return ji(t,cu(e,n))}function Sl(t,e){return typeof t=="function"?t(e):t}function El(t){return t.split("-")[0]}function Np(t){return t.split("-")[1]}function Ok(t){return t==="x"?"y":"x"}function Mk(t){return t==="y"?"height":"width"}const Yle=new Set(["top","bottom"]);function go(t){return Yle.has(El(t))?"y":"x"}function Dk(t){return Ok(go(t))}function Qle(t,e,n){n===void 0&&(n=!1);const r=Np(t),s=Dk(t),a=Mk(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=Cw(o)),[o,Cw(o)]}function Xle(t){const e=Cw(t);return[_T(t),e,_T(e)]}function _T(t){return t.replace(/start|end/g,e=>Gle[e])}const zL=["left","right"],qL=["right","left"],Zle=["top","bottom"],Jle=["bottom","top"];function ece(t,e,n){switch(t){case"top":case"bottom":return n?e?qL:zL:e?zL:qL;case"left":case"right":return e?Zle:Jle;default:return[]}}function tce(t,e,n,r){const s=Np(t);let a=ece(El(t),n==="start",r);return s&&(a=a.map(o=>o+"-"+s),e&&(a=a.concat(a.map(_T)))),a}function Cw(t){return t.replace(/left|right|bottom|top/g,e=>Kle[e])}function nce(t){return{top:0,right:0,bottom:0,left:0,...t}}function W8(t){return typeof t!="number"?nce(t):{top:t,right:t,bottom:t,left:t}}function Pw(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function WL(t,e,n){let{reference:r,floating:s}=t;const a=go(e),o=Dk(e),l=Mk(o),c=El(e),u=a==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[l]/2-s[l]/2;let m;switch(c){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch(Np(e)){case"start":m[o]-=f*(n&&u?-1:1);break;case"end":m[o]+=f*(n&&u?-1:1);break}return m}const rce=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=WL(u,r,c),f=r,m={},v=0;for(let g=0;g<l.length;g++){const{name:y,fn:w}=l[g],{x:b,y:E,data:T,reset:x}=await w({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:m,rects:u,platform:o,elements:{reference:t,floating:e}});d=b??d,h=E??h,m={...m,[y]:{...m[y],...T}},x&&v<=50&&(v++,typeof x=="object"&&(x.placement&&(f=x.placement),x.rects&&(u=x.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):x.rects),{x:d,y:h}=WL(u,f,c)),g=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:m}};async function ev(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:a,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=Sl(e,t),v=W8(m),y=l[f?h==="floating"?"reference":"floating":h],w=Pw(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(y)))==null||n?y:y.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),b=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,E=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),T=await(a.isElement==null?void 0:a.isElement(E))?await(a.getScale==null?void 0:a.getScale(E))||{x:1,y:1}:{x:1,y:1},x=Pw(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:E,strategy:c}):b);return{top:(w.top-x.top+v.top)/T.y,bottom:(x.bottom-w.bottom+v.bottom)/T.y,left:(w.left-x.left+v.left)/T.x,right:(x.right-w.right+v.right)/T.x}}const sce=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:a,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=Sl(t,e)||{};if(u==null)return{};const h=W8(d),f={x:n,y:r},m=Dk(s),v=Mk(m),g=await o.getDimensions(u),y=m==="y",w=y?"top":"left",b=y?"bottom":"right",E=y?"clientHeight":"clientWidth",T=a.reference[v]+a.reference[m]-f[m]-a.floating[v],x=f[m]-a.reference[m],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let _=S?S[E]:0;(!_||!await(o.isElement==null?void 0:o.isElement(S)))&&(_=l.floating[E]||a.floating[v]);const p=T/2-x/2,A=_/2-g[v]/2-1,P=cu(h[w],A),C=cu(h[b],A),I=P,R=_-g[v]-C,L=_/2-g[v]/2+p,z=wT(I,L,R),W=!c.arrow&&Np(s)!=null&&L!==z&&a.reference[v]/2-(L<I?P:C)-g[v]/2<0,M=W?L<I?L-I:L-R:0;return{[m]:f[m]+M,data:{[m]:z,centerOffset:L-z-M,...W&&{alignmentOffset:M}},reset:W}}}),ice=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:g=!0,...y}=Sl(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const w=El(s),b=go(l),E=El(l)===l,T=await(c.isRTL==null?void 0:c.isRTL(u.floating)),x=f||(E||!g?[Cw(l)]:Xle(l)),S=v!=="none";!f&&S&&x.push(...tce(l,g,v,T));const _=[l,...x],p=await ev(e,y),A=[];let P=((r=a.flip)==null?void 0:r.overflows)||[];if(d&&A.push(p[w]),h){const L=Qle(s,o,T);A.push(p[L[0]],p[L[1]])}if(P=[...P,{placement:s,overflows:A}],!A.every(L=>L<=0)){var C,I;const L=(((C=a.flip)==null?void 0:C.index)||0)+1,z=_[L];if(z&&(!(h==="alignment"?b!==go(z):!1)||P.every(V=>V.overflows[0]>0&&go(V.placement)===b)))return{data:{index:L,overflows:P},reset:{placement:z}};let W=(I=P.filter(M=>M.overflows[0]<=0).sort((M,V)=>M.overflows[1]-V.overflows[1])[0])==null?void 0:I.placement;if(!W)switch(m){case"bestFit":{var R;const M=(R=P.filter(V=>{if(S){const F=go(V.placement);return F===b||F==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(F=>F>0).reduce((F,Y)=>F+Y,0)]).sort((V,F)=>V[1]-F[1])[0])==null?void 0:R[0];M&&(W=M);break}case"initialPlacement":W=l;break}if(s!==W)return{reset:{placement:W}}}return{}}}};function HL(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function KL(t){return Hle.some(e=>t[e]>=0)}const ace=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Sl(t,e);switch(r){case"referenceHidden":{const a=await ev(e,{...s,elementContext:"reference"}),o=HL(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:KL(o)}}}case"escaped":{const a=await ev(e,{...s,altBoundary:!0}),o=HL(a,n.floating);return{data:{escapedOffsets:o,escaped:KL(o)}}}default:return{}}}}},H8=new Set(["left","top"]);async function oce(t,e){const{placement:n,platform:r,elements:s}=t,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=El(n),l=Np(n),c=go(n)==="y",u=H8.has(o)?-1:1,d=a&&c?-1:1,h=Sl(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof v=="number"&&(m=l==="end"?v*-1:v),c?{x:m*d,y:f*u}:{x:f*u,y:m*d}}const lce=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:a,placement:o,middlewareData:l}=e,c=await oce(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:o}}}}},cce=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:y=>{let{x:w,y:b}=y;return{x:w,y:b}}},...c}=Sl(t,e),u={x:n,y:r},d=await ev(e,c),h=go(El(s)),f=Ok(h);let m=u[f],v=u[h];if(a){const y=f==="y"?"top":"left",w=f==="y"?"bottom":"right",b=m+d[y],E=m-d[w];m=wT(b,m,E)}if(o){const y=h==="y"?"top":"left",w=h==="y"?"bottom":"right",b=v+d[y],E=v-d[w];v=wT(b,v,E)}const g=l.fn({...e,[f]:m,[h]:v});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:a,[h]:o}}}}}},uce=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:a,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Sl(t,e),d={x:n,y:r},h=go(s),f=Ok(h);let m=d[f],v=d[h];const g=Sl(l,e),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const E=f==="y"?"height":"width",T=a.reference[f]-a.floating[E]+y.mainAxis,x=a.reference[f]+a.reference[E]-y.mainAxis;m<T?m=T:m>x&&(m=x)}if(u){var w,b;const E=f==="y"?"width":"height",T=H8.has(El(s)),x=a.reference[h]-a.floating[E]+(T&&((w=o.offset)==null?void 0:w[h])||0)+(T?0:y.crossAxis),S=a.reference[h]+a.reference[E]+(T?0:((b=o.offset)==null?void 0:b[h])||0)-(T?y.crossAxis:0);v<x?v=x:v>S&&(v=S)}return{[f]:m,[h]:v}}}},dce=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:a,platform:o,elements:l}=e,{apply:c=()=>{},...u}=Sl(t,e),d=await ev(e,u),h=El(s),f=Np(s),m=go(s)==="y",{width:v,height:g}=a.floating;let y,w;h==="top"||h==="bottom"?(y=h,w=f===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(w=h,y=f==="end"?"top":"bottom");const b=g-d.top-d.bottom,E=v-d.left-d.right,T=cu(g-d[y],b),x=cu(v-d[w],E),S=!e.middlewareData.shift;let _=T,p=x;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(p=E),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(_=b),S&&!f){const P=ji(d.left,0),C=ji(d.right,0),I=ji(d.top,0),R=ji(d.bottom,0);m?p=v-2*(P!==0||C!==0?P+C:ji(d.left,d.right)):_=g-2*(I!==0||R!==0?I+R:ji(d.top,d.bottom))}await c({...e,availableWidth:p,availableHeight:_});const A=await o.getDimensions(l.floating);return v!==A.width||g!==A.height?{reset:{rects:!0}}:{}}}};function Zj(){return typeof window<"u"}function Sp(t){return K8(t)?(t.nodeName||"").toLowerCase():"#document"}function Ii(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function qo(t){var e;return(e=(K8(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function K8(t){return Zj()?t instanceof Node||t instanceof Ii(t).Node:!1}function Ya(t){return Zj()?t instanceof Element||t instanceof Ii(t).Element:!1}function Do(t){return Zj()?t instanceof HTMLElement||t instanceof Ii(t).HTMLElement:!1}function GL(t){return!Zj()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ii(t).ShadowRoot}const hce=new Set(["inline","contents"]);function Sx(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Qa(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!hce.has(s)}const fce=new Set(["table","td","th"]);function mce(t){return fce.has(Sp(t))}const pce=[":popover-open",":modal"];function Jj(t){return pce.some(e=>{try{return t.matches(e)}catch{return!1}})}const gce=["transform","translate","scale","rotate","perspective"],yce=["transform","translate","scale","rotate","perspective","filter"],vce=["paint","layout","strict","content"];function Lk(t){const e=$k(),n=Ya(t)?Qa(t):t;return gce.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||yce.some(r=>(n.willChange||"").includes(r))||vce.some(r=>(n.contain||"").includes(r))}function xce(t){let e=uu(t);for(;Do(e)&&!Em(e);){if(Lk(e))return e;if(Jj(e))return null;e=uu(e)}return null}function $k(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const bce=new Set(["html","body","#document"]);function Em(t){return bce.has(Sp(t))}function Qa(t){return Ii(t).getComputedStyle(t)}function eN(t){return Ya(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function uu(t){if(Sp(t)==="html")return t;const e=t.assignedSlot||t.parentNode||GL(t)&&t.host||qo(t);return GL(e)?e.host:e}function G8(t){const e=uu(t);return Em(e)?t.ownerDocument?t.ownerDocument.body:t.body:Do(e)&&Sx(e)?e:G8(e)}function tv(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=G8(t),a=s===((r=t.ownerDocument)==null?void 0:r.body),o=Ii(s);if(a){const l=jT(o);return e.concat(o,o.visualViewport||[],Sx(s)?s:[],l&&n?tv(l):[])}return e.concat(s,tv(s,[],n))}function jT(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Y8(t){const e=Qa(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Do(t),a=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=Tw(n)!==a||Tw(r)!==o;return l&&(n=a,r=o),{width:n,height:r,$:l}}function Fk(t){return Ya(t)?t:t.contextElement}function Bf(t){const e=Fk(t);if(!Do(e))return jo(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:a}=Y8(e);let o=(a?Tw(n.width):n.width)/r,l=(a?Tw(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const wce=jo(0);function Q8(t){const e=Ii(t);return!$k()||!e.visualViewport?wce:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function _ce(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ii(t)?!1:e}function th(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),a=Fk(t);let o=jo(1);e&&(r?Ya(r)&&(o=Bf(r)):o=Bf(t));const l=_ce(a,n,r)?Q8(a):jo(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(a){const f=Ii(a),m=r&&Ya(r)?Ii(r):r;let v=f,g=jT(v);for(;g&&r&&m!==v;){const y=Bf(g),w=g.getBoundingClientRect(),b=Qa(g),E=w.left+(g.clientLeft+parseFloat(b.paddingLeft))*y.x,T=w.top+(g.clientTop+parseFloat(b.paddingTop))*y.y;c*=y.x,u*=y.y,d*=y.x,h*=y.y,c+=E,u+=T,v=Ii(g),g=jT(v)}}return Pw({width:d,height:h,x:c,y:u})}function Vk(t,e){const n=eN(t).scrollLeft;return e?e.left+n:th(qo(t)).left+n}function X8(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Vk(t,r)),a=r.top+e.scrollTop;return{x:s,y:a}}function jce(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const a=s==="fixed",o=qo(r),l=e?Jj(e.floating):!1;if(r===o||l&&a)return n;let c={scrollLeft:0,scrollTop:0},u=jo(1);const d=jo(0),h=Do(r);if((h||!h&&!a)&&((Sp(r)!=="body"||Sx(o))&&(c=eN(r)),Do(r))){const m=th(r);u=Bf(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const f=o&&!h&&!a?X8(o,c,!0):jo(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:n.y*u.y-c.scrollTop*u.y+d.y+f.y}}function Nce(t){return Array.from(t.getClientRects())}function Sce(t){const e=qo(t),n=eN(t),r=t.ownerDocument.body,s=ji(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=ji(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Vk(t);const l=-n.scrollTop;return Qa(r).direction==="rtl"&&(o+=ji(e.clientWidth,r.clientWidth)-s),{width:s,height:a,x:o,y:l}}function Ece(t,e){const n=Ii(t),r=qo(t),s=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){a=s.width,o=s.height;const u=$k();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:a,height:o,x:l,y:c}}const Ace=new Set(["absolute","fixed"]);function Tce(t,e){const n=th(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,a=Do(t)?Bf(t):jo(1),o=t.clientWidth*a.x,l=t.clientHeight*a.y,c=s*a.x,u=r*a.y;return{width:o,height:l,x:c,y:u}}function YL(t,e,n){let r;if(e==="viewport")r=Ece(t,n);else if(e==="document")r=Sce(qo(t));else if(Ya(e))r=Tce(e,n);else{const s=Q8(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Pw(r)}function Z8(t,e){const n=uu(t);return n===e||!Ya(n)||Em(n)?!1:Qa(n).position==="fixed"||Z8(n,e)}function Cce(t,e){const n=e.get(t);if(n)return n;let r=tv(t,[],!1).filter(l=>Ya(l)&&Sp(l)!=="body"),s=null;const a=Qa(t).position==="fixed";let o=a?uu(t):t;for(;Ya(o)&&!Em(o);){const l=Qa(o),c=Lk(o);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&Ace.has(s.position)||Sx(o)&&!c&&Z8(t,o))?r=r.filter(d=>d!==o):s=l,o=uu(o)}return e.set(t,r),r}function Pce(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Jj(e)?[]:Cce(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,d)=>{const h=YL(e,d,s);return u.top=ji(h.top,u.top),u.right=cu(h.right,u.right),u.bottom=cu(h.bottom,u.bottom),u.left=ji(h.left,u.left),u},YL(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Ice(t){const{width:e,height:n}=Y8(t);return{width:e,height:n}}function kce(t,e,n){const r=Do(e),s=qo(e),a=n==="fixed",o=th(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const c=jo(0);function u(){c.x=Vk(s)}if(r||!r&&!a)if((Sp(e)!=="body"||Sx(s))&&(l=eN(e)),r){const m=th(e,!0,a,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else s&&u();a&&!r&&s&&u();const d=s&&!r&&!a?X8(s,l):jo(0),h=o.left+l.scrollLeft-c.x-d.x,f=o.top+l.scrollTop-c.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function KS(t){return Qa(t).position==="static"}function QL(t,e){if(!Do(t)||Qa(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return qo(t)===n&&(n=n.ownerDocument.body),n}function J8(t,e){const n=Ii(t);if(Jj(t))return n;if(!Do(t)){let s=uu(t);for(;s&&!Em(s);){if(Ya(s)&&!KS(s))return s;s=uu(s)}return n}let r=QL(t,e);for(;r&&mce(r)&&KS(r);)r=QL(r,e);return r&&Em(r)&&KS(r)&&!Lk(r)?n:r||xce(t)||n}const Rce=async function(t){const e=this.getOffsetParent||J8,n=this.getDimensions,r=await n(t.floating);return{reference:kce(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Oce(t){return Qa(t).direction==="rtl"}const Mce={convertOffsetParentRelativeRectToViewportRelativeRect:jce,getDocumentElement:qo,getClippingRect:Pce,getOffsetParent:J8,getElementRects:Rce,getClientRects:Nce,getDimensions:Ice,getScale:Bf,isElement:Ya,isRTL:Oce};function eq(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Dce(t,e){let n=null,r;const s=qo(t);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const u=t.getBoundingClientRect(),{left:d,top:h,width:f,height:m}=u;if(l||e(),!f||!m)return;const v=Ub(h),g=Ub(s.clientWidth-(d+f)),y=Ub(s.clientHeight-(h+m)),w=Ub(d),E={rootMargin:-v+"px "+-g+"px "+-y+"px "+-w+"px",threshold:ji(0,cu(1,c))||1};let T=!0;function x(S){const _=S[0].intersectionRatio;if(_!==c){if(!T)return o();_?o(!1,_):r=setTimeout(()=>{o(!1,1e-7)},1e3)}_===1&&!eq(u,t.getBoundingClientRect())&&o(),T=!1}try{n=new IntersectionObserver(x,{...E,root:s.ownerDocument})}catch{n=new IntersectionObserver(x,E)}n.observe(t)}return o(!0),a}function Lce(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Fk(t),d=s||a?[...u?tv(u):[],...tv(e)]:[];d.forEach(w=>{s&&w.addEventListener("scroll",n,{passive:!0}),a&&w.addEventListener("resize",n)});const h=u&&l?Dce(u,n):null;let f=-1,m=null;o&&(m=new ResizeObserver(w=>{let[b]=w;b&&b.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var E;(E=m)==null||E.observe(e)})),n()}),u&&!c&&m.observe(u),m.observe(e));let v,g=c?th(t):null;c&&y();function y(){const w=th(t);g&&!eq(g,w)&&n(),g=w,v=requestAnimationFrame(y)}return n(),()=>{var w;d.forEach(b=>{s&&b.removeEventListener("scroll",n),a&&b.removeEventListener("resize",n)}),h==null||h(),(w=m)==null||w.disconnect(),m=null,c&&cancelAnimationFrame(v)}}const $ce=lce,Fce=cce,Vce=ice,Bce=dce,Uce=ace,XL=sce,zce=uce,qce=(t,e,n)=>{const r=new Map,s={platform:Mce,...n},a={...s.platform,_c:r};return rce(t,e,{...s,platform:a})};var Wce=typeof document<"u",Hce=function(){},M0=Wce?N.useLayoutEffect:Hce;function Iw(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Iw(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&t.$$typeof)&&!Iw(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function tq(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function ZL(t,e){const n=tq(t);return Math.round(e*n)/n}function GS(t){const e=N.useRef(t);return M0(()=>{e.current=t}),e}function Kce(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,h]=N.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=N.useState(r);Iw(f,r)||m(r);const[v,g]=N.useState(null),[y,w]=N.useState(null),b=N.useCallback(V=>{V!==S.current&&(S.current=V,g(V))},[]),E=N.useCallback(V=>{V!==_.current&&(_.current=V,w(V))},[]),T=a||v,x=o||y,S=N.useRef(null),_=N.useRef(null),p=N.useRef(d),A=c!=null,P=GS(c),C=GS(s),I=GS(u),R=N.useCallback(()=>{if(!S.current||!_.current)return;const V={placement:e,strategy:n,middleware:f};C.current&&(V.platform=C.current),qce(S.current,_.current,V).then(F=>{const Y={...F,isPositioned:I.current!==!1};L.current&&!Iw(p.current,Y)&&(p.current=Y,Eh.flushSync(()=>{h(Y)}))})},[f,e,n,C,I]);M0(()=>{u===!1&&p.current.isPositioned&&(p.current.isPositioned=!1,h(V=>({...V,isPositioned:!1})))},[u]);const L=N.useRef(!1);M0(()=>(L.current=!0,()=>{L.current=!1}),[]),M0(()=>{if(T&&(S.current=T),x&&(_.current=x),T&&x){if(P.current)return P.current(T,x,R);R()}},[T,x,R,P,A]);const z=N.useMemo(()=>({reference:S,floating:_,setReference:b,setFloating:E}),[b,E]),W=N.useMemo(()=>({reference:T,floating:x}),[T,x]),M=N.useMemo(()=>{const V={position:n,left:0,top:0};if(!W.floating)return V;const F=ZL(W.floating,d.x),Y=ZL(W.floating,d.y);return l?{...V,transform:"translate("+F+"px, "+Y+"px)",...tq(W.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:Y}},[n,l,W.floating,d.x,d.y]);return N.useMemo(()=>({...d,update:R,refs:z,elements:W,floatingStyles:M}),[d,R,z,W,M])}const Gce=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?XL({element:r.current,padding:s}).fn(n):{}:r?XL({element:r,padding:s}).fn(n):{}}}},Yce=(t,e)=>({...$ce(t),options:[t,e]}),Qce=(t,e)=>({...Fce(t),options:[t,e]}),Xce=(t,e)=>({...zce(t),options:[t,e]}),Zce=(t,e)=>({...Vce(t),options:[t,e]}),Jce=(t,e)=>({...Bce(t),options:[t,e]}),eue=(t,e)=>({...Uce(t),options:[t,e]}),tue=(t,e)=>({...Gce(t),options:[t,e]});var nue="Arrow",nq=N.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...a}=t;return i.jsx(Je.svg,{...a,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});nq.displayName=nue;var rue=nq;function Bk(t){const[e,n]=N.useState(void 0);return fr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Uk="Popper",[rq,Ep]=ds(Uk),[sue,sq]=rq(Uk),iq=t=>{const{__scopePopper:e,children:n}=t,[r,s]=N.useState(null);return i.jsx(sue,{scope:e,anchor:r,onAnchorChange:s,children:n})};iq.displayName=Uk;var aq="PopperAnchor",oq=N.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,a=sq(aq,n),o=N.useRef(null),l=Dt(e,o);return N.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:i.jsx(Je.div,{...s,ref:l})});oq.displayName=aq;var zk="PopperContent",[iue,aue]=rq(zk),lq=N.forwardRef((t,e)=>{var Ne,ht,we,Me,Fe,ue;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:v,...g}=t,y=sq(zk,n),[w,b]=N.useState(null),E=Dt(e,Ct=>b(Ct)),[T,x]=N.useState(null),S=Bk(T),_=(S==null?void 0:S.width)??0,p=(S==null?void 0:S.height)??0,A=r+(a!=="center"?"-"+a:""),P=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},C=Array.isArray(u)?u:[u],I=C.length>0,R={padding:P,boundary:C.filter(lue),altBoundary:I},{refs:L,floatingStyles:z,placement:W,isPositioned:M,middlewareData:V}=Kce({strategy:"fixed",placement:A,whileElementsMounted:(...Ct)=>Lce(...Ct,{animationFrame:m==="always"}),elements:{reference:y.anchor},middleware:[Yce({mainAxis:s+p,alignmentAxis:o}),c&&Qce({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Xce():void 0,...R}),c&&Zce({...R}),Jce({...R,apply:({elements:Ct,rects:gt,availableWidth:on,availableHeight:Jt})=>{const{width:_n,height:zr}=gt.reference,rn=Ct.floating.style;rn.setProperty("--radix-popper-available-width",`${on}px`),rn.setProperty("--radix-popper-available-height",`${Jt}px`),rn.setProperty("--radix-popper-anchor-width",`${_n}px`),rn.setProperty("--radix-popper-anchor-height",`${zr}px`)}}),T&&tue({element:T,padding:l}),cue({arrowWidth:_,arrowHeight:p}),f&&eue({strategy:"referenceHidden",...R})]}),[F,Y]=dq(W),ae=ur(v);fr(()=>{M&&(ae==null||ae())},[M,ae]);const oe=(Ne=V.arrow)==null?void 0:Ne.x,me=(ht=V.arrow)==null?void 0:ht.y,ke=((we=V.arrow)==null?void 0:we.centerOffset)!==0,[ut,jt]=N.useState();return fr(()=>{w&&jt(window.getComputedStyle(w).zIndex)},[w]),i.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:M?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ut,"--radix-popper-transform-origin":[(Me=V.transformOrigin)==null?void 0:Me.x,(Fe=V.transformOrigin)==null?void 0:Fe.y].join(" "),...((ue=V.hide)==null?void 0:ue.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:i.jsx(iue,{scope:n,placedSide:F,onArrowChange:x,arrowX:oe,arrowY:me,shouldHideArrow:ke,children:i.jsx(Je.div,{"data-side":F,"data-align":Y,...g,ref:E,style:{...g.style,animation:M?void 0:"none"}})})})});lq.displayName=zk;var cq="PopperArrow",oue={top:"bottom",right:"left",bottom:"top",left:"right"},uq=N.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,a=aue(cq,r),o=oue[a.placedSide];return i.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:i.jsx(rue,{...s,ref:n,style:{...s.style,display:"block"}})})});uq.displayName=cq;function lue(t){return t!==null}var cue=t=>({name:"transformOrigin",options:t,fn(e){var y,w,b;const{placement:n,rects:r,middlewareData:s}=e,o=((y=s.arrow)==null?void 0:y.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,d]=dq(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((w=s.arrow)==null?void 0:w.x)??0)+l/2,m=(((b=s.arrow)==null?void 0:b.y)??0)+c/2;let v="",g="";return u==="bottom"?(v=o?h:`${f}px`,g=`${-c}px`):u==="top"?(v=o?h:`${f}px`,g=`${r.floating.height+c}px`):u==="right"?(v=`${-c}px`,g=o?h:`${m}px`):u==="left"&&(v=`${r.floating.width+c}px`,g=o?h:`${m}px`),{data:{x:v,y:g}}}});function dq(t){const[e,n="center"]=t.split("-");return[e,n]}var qk=iq,Wk=oq,Hk=lq,Kk=uq,[tN,Uet]=ds("Tooltip",[Ep]),nN=Ep(),hq="TooltipProvider",uue=700,NT="tooltip.open",[due,Gk]=tN(hq),fq=t=>{const{__scopeTooltip:e,delayDuration:n=uue,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=t,o=N.useRef(!0),l=N.useRef(!1),c=N.useRef(0);return N.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),i.jsx(due,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:N.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:N.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:N.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:a})};fq.displayName=hq;var nv="Tooltip",[hue,rN]=tN(nv),mq=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s,onOpenChange:a,disableHoverableContent:o,delayDuration:l}=t,c=Gk(nv,t.__scopeTooltip),u=nN(e),[d,h]=N.useState(null),f=ea(),m=N.useRef(0),v=o??c.disableHoverableContent,g=l??c.delayDuration,y=N.useRef(!1),[w,b]=Ha({prop:r,defaultProp:s??!1,onChange:_=>{_?(c.onOpen(),document.dispatchEvent(new CustomEvent(NT))):c.onClose(),a==null||a(_)},caller:nv}),E=N.useMemo(()=>w?y.current?"delayed-open":"instant-open":"closed",[w]),T=N.useCallback(()=>{window.clearTimeout(m.current),m.current=0,y.current=!1,b(!0)},[b]),x=N.useCallback(()=>{window.clearTimeout(m.current),m.current=0,b(!1)},[b]),S=N.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{y.current=!0,b(!0),m.current=0},g)},[g,b]);return N.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),i.jsx(qk,{...u,children:i.jsx(hue,{scope:e,contentId:f,open:w,stateAttribute:E,trigger:d,onTriggerChange:h,onTriggerEnter:N.useCallback(()=>{c.isOpenDelayedRef.current?S():T()},[c.isOpenDelayedRef,S,T]),onTriggerLeave:N.useCallback(()=>{v?x():(window.clearTimeout(m.current),m.current=0)},[x,v]),onOpen:T,onClose:x,disableHoverableContent:v,children:n})})};mq.displayName=nv;var ST="TooltipTrigger",pq=N.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=rN(ST,n),a=Gk(ST,n),o=nN(n),l=N.useRef(null),c=Dt(e,l,s.onTriggerChange),u=N.useRef(!1),d=N.useRef(!1),h=N.useCallback(()=>u.current=!1,[]);return N.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),i.jsx(Wk,{asChild:!0,...o,children:i.jsx(Je.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:Pe(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Pe(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Pe(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Pe(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:Pe(t.onBlur,s.onClose),onClick:Pe(t.onClick,s.onClose)})})});pq.displayName=ST;var fue="TooltipPortal",[zet,mue]=tN(fue,{forceMount:void 0}),Am="TooltipContent",gq=N.forwardRef((t,e)=>{const n=mue(Am,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=t,o=rN(Am,t.__scopeTooltip);return i.jsx(hs,{present:r||o.open,children:o.disableHoverableContent?i.jsx(yq,{side:s,...a,ref:e}):i.jsx(pue,{side:s,...a,ref:e})})}),pue=N.forwardRef((t,e)=>{const n=rN(Am,t.__scopeTooltip),r=Gk(Am,t.__scopeTooltip),s=N.useRef(null),a=Dt(e,s),[o,l]=N.useState(null),{trigger:c,onClose:u}=n,d=s.current,{onPointerInTransitChange:h}=r,f=N.useCallback(()=>{l(null),h(!1)},[h]),m=N.useCallback((v,g)=>{const y=v.currentTarget,w={x:v.clientX,y:v.clientY},b=bue(w,y.getBoundingClientRect()),E=wue(w,b),T=_ue(g.getBoundingClientRect()),x=Nue([...E,...T]);l(x),h(!0)},[h]);return N.useEffect(()=>()=>f(),[f]),N.useEffect(()=>{if(c&&d){const v=y=>m(y,d),g=y=>m(y,c);return c.addEventListener("pointerleave",v),d.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",g)}}},[c,d,m,f]),N.useEffect(()=>{if(o){const v=g=>{const y=g.target,w={x:g.clientX,y:g.clientY},b=(c==null?void 0:c.contains(y))||(d==null?void 0:d.contains(y)),E=!jue(w,o);b?f():E&&(f(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,d,o,u,f]),i.jsx(yq,{...t,ref:a})}),[gue,yue]=tN(nv,{isInside:!1}),vue=X9("TooltipContent"),yq=N.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=t,c=rN(Am,n),u=nN(n),{onClose:d}=c;return N.useEffect(()=>(document.addEventListener(NT,d),()=>document.removeEventListener(NT,d)),[d]),N.useEffect(()=>{if(c.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),i.jsx(wp,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:i.jsxs(Hk,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(vue,{children:r}),i.jsx(gue,{scope:n,isInside:!0,children:i.jsx(Rae,{id:c.contentId,role:"tooltip",children:s||r})})]})})});gq.displayName=Am;var vq="TooltipArrow",xue=N.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=nN(n);return yue(vq,n).isInside?null:i.jsx(Kk,{...s,...r,ref:e})});xue.displayName=vq;function bue(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function wue(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function _ue(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function jue(t,e){const{x:n,y:r}=t;let s=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a],c=e[o],u=l.x,d=l.y,h=c.x,f=c.y;d>r!=f>r&&n<(h-u)*(r-d)/(f-d)+u&&(s=!s)}return s}function Nue(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Sue(e)}function Sue(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const a=e[e.length-1],o=e[e.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const a=n[n.length-1],o=n[n.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var Eue=fq,Aue=mq,Tue=pq,xq=gq;const bq=Eue,Cue=Aue,Pue=Tue,wq=N.forwardRef(({className:t,sideOffset:e=4,...n},r)=>i.jsx(xq,{ref:r,sideOffset:e,className:pe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));wq.displayName=xq.displayName;var Ap=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},nh=typeof window>"u"||"Deno"in globalThis;function Os(){}function Iue(t,e){return typeof t=="function"?t(e):t}function ET(t){return typeof t=="number"&&t>=0&&t!==1/0}function _q(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Zc(t,e){return typeof t=="function"?t(e):t}function qi(t,e){return typeof t=="function"?t(e):t}function JL(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==Yk(o,e.options))return!1}else if(!rv(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||a&&!a(e))}function e4(t,e){const{exact:n,status:r,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(rh(e.options.mutationKey)!==rh(a))return!1}else if(!rv(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Yk(t,e){return((e==null?void 0:e.queryKeyHashFn)||rh)(t)}function rh(t){return JSON.stringify(t,(e,n)=>AT(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function rv(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>rv(t[n],e[n])):!1}function jq(t,e){if(t===e)return t;const n=t4(t)&&t4(e);if(n||AT(t)&&AT(e)){const r=n?t:Object.keys(t),s=r.length,a=n?e:Object.keys(e),o=a.length,l=n?[]:{},c=new Set(r);let u=0;for(let d=0;d<o;d++){const h=n?d:a[d];(!n&&c.has(h)||n)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,u++):(l[h]=jq(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&u++)}return s===o&&u===s?t:l}return e}function kw(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function t4(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function AT(t){if(!n4(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!n4(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function n4(t){return Object.prototype.toString.call(t)==="[object Object]"}function kue(t){return new Promise(e=>{setTimeout(e,t)})}function TT(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?jq(t,e):e}function Rue(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function Oue(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Qk=Symbol();function Nq(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Qk?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Sq(t,e){return typeof t=="function"?t(...e):!!t}var Ad,Ec,im,E6,Mue=(E6=class extends Ap{constructor(){super();mt(this,Ad);mt(this,Ec);mt(this,im);qe(this,im,e=>{if(!nh&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Q(this,Ec)||this.setEventListener(Q(this,im))}onUnsubscribe(){var e;this.hasListeners()||((e=Q(this,Ec))==null||e.call(this),qe(this,Ec,void 0))}setEventListener(e){var n;qe(this,im,e),(n=Q(this,Ec))==null||n.call(this),qe(this,Ec,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Q(this,Ad)!==e&&(qe(this,Ad,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Q(this,Ad)=="boolean"?Q(this,Ad):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ad=new WeakMap,Ec=new WeakMap,im=new WeakMap,E6),Xk=new Mue,am,Ac,om,A6,Due=(A6=class extends Ap{constructor(){super();mt(this,am,!0);mt(this,Ac);mt(this,om);qe(this,om,e=>{if(!nh&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Q(this,Ac)||this.setEventListener(Q(this,om))}onUnsubscribe(){var e;this.hasListeners()||((e=Q(this,Ac))==null||e.call(this),qe(this,Ac,void 0))}setEventListener(e){var n;qe(this,om,e),(n=Q(this,Ac))==null||n.call(this),qe(this,Ac,e(this.setOnline.bind(this)))}setOnline(e){Q(this,am)!==e&&(qe(this,am,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Q(this,am)}},am=new WeakMap,Ac=new WeakMap,om=new WeakMap,A6),Rw=new Due;function CT(){let t,e;const n=new Promise((s,a)=>{t=s,e=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function Lue(t){return Math.min(1e3*2**t,3e4)}function Eq(t){return(t??"online")==="online"?Rw.isOnline():!0}var Aq=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function YS(t){return t instanceof Aq}function Tq(t){let e=!1,n=0,r=!1,s;const a=CT(),o=g=>{var y;r||(f(new Aq(g)),(y=t.abort)==null||y.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>Xk.isFocused()&&(t.networkMode==="always"||Rw.isOnline())&&t.canRun(),d=()=>Eq(t.networkMode)&&t.canRun(),h=g=>{var y;r||(r=!0,(y=t.onSuccess)==null||y.call(t,g),s==null||s(),a.resolve(g))},f=g=>{var y;r||(r=!0,(y=t.onError)==null||y.call(t,g),s==null||s(),a.reject(g))},m=()=>new Promise(g=>{var y;s=w=>{(r||u())&&g(w)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),v=()=>{if(r)return;let g;const y=n===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(w){g=Promise.reject(w)}Promise.resolve(g).then(h).catch(w=>{var S;if(r)return;const b=t.retry??(nh?0:3),E=t.retryDelay??Lue,T=typeof E=="function"?E(n,w):E,x=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,w);if(e||!x){f(w);return}n++,(S=t.onFail)==null||S.call(t,n,w),kue(T).then(()=>u()?void 0:m()).then(()=>{e?f(w):v()})})};return{promise:a,cancel:o,continue:()=>(s==null||s(),a),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?v():m().then(v),a)}}var $ue=t=>setTimeout(t,0);function Fue(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=$ue;const a=l=>{e?t.push(l):s(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Lr=Fue(),Td,T6,Cq=(T6=class{constructor(){mt(this,Td)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ET(this.gcTime)&&qe(this,Td,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(nh?1/0:5*60*1e3))}clearGcTimeout(){Q(this,Td)&&(clearTimeout(Q(this,Td)),qe(this,Td,void 0))}},Td=new WeakMap,T6),lm,Cd,zi,Pd,ys,dx,Id,Aa,el,C6,Vue=(C6=class extends Cq{constructor(n){super();mt(this,Aa);mt(this,lm);mt(this,Cd);mt(this,zi);mt(this,Pd);mt(this,ys);mt(this,dx);mt(this,Id);qe(this,Id,!1),qe(this,dx,n.defaultOptions),this.setOptions(n.options),this.observers=[],qe(this,Pd,n.client),qe(this,zi,Q(this,Pd).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,qe(this,lm,Bue(this.options)),this.state=n.state??Q(this,lm),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=Q(this,ys))==null?void 0:n.promise}setOptions(n){this.options={...Q(this,dx),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Q(this,zi).remove(this)}setData(n,r){const s=TT(this.state.data,n,this.options);return Ut(this,Aa,el).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Ut(this,Aa,el).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,a;const r=(s=Q(this,ys))==null?void 0:s.promise;return(a=Q(this,ys))==null||a.cancel(n),r?r.then(Os).catch(Os):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Q(this,lm))}isActive(){return this.observers.some(n=>qi(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Qk||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Zc(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!_q(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=Q(this,ys))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=Q(this,ys))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),Q(this,zi).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(Q(this,ys)&&(Q(this,Id)?Q(this,ys).cancel({revert:!0}):Q(this,ys).cancelRetry()),this.scheduleGc()),Q(this,zi).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ut(this,Aa,el).call(this,{type:"invalidate"})}fetch(n,r){var d,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Q(this,ys))return Q(this,ys).continueRetry(),Q(this,ys).promise}if(n&&this.setOptions(n),!this.options.queryFn){const m=this.observers.find(v=>v.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,a=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(qe(this,Id,!0),s.signal)})},o=()=>{const m=Nq(this.options,r),g=(()=>{const y={client:Q(this,Pd),queryKey:this.queryKey,meta:this.meta};return a(y),y})();return qe(this,Id,!1),this.options.persister?this.options.persister(m,g,this):m(g)},c=(()=>{const m={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Q(this,Pd),state:this.state,fetchFn:o};return a(m),m})();(d=this.options.behavior)==null||d.onFetch(c,this),qe(this,Cd,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=c.fetchOptions)==null?void 0:h.meta))&&Ut(this,Aa,el).call(this,{type:"fetch",meta:(f=c.fetchOptions)==null?void 0:f.meta});const u=m=>{var v,g,y,w;YS(m)&&m.silent||Ut(this,Aa,el).call(this,{type:"error",error:m}),YS(m)||((g=(v=Q(this,zi).config).onError)==null||g.call(v,m,this),(w=(y=Q(this,zi).config).onSettled)==null||w.call(y,this.state.data,m,this)),this.scheduleGc()};return qe(this,ys,Tq({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var v,g,y,w;if(m===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(b){u(b);return}(g=(v=Q(this,zi).config).onSuccess)==null||g.call(v,m,this),(w=(y=Q(this,zi).config).onSettled)==null||w.call(y,m,this.state.error,this),this.scheduleGc()},onError:u,onFail:(m,v)=>{Ut(this,Aa,el).call(this,{type:"failed",failureCount:m,error:v})},onPause:()=>{Ut(this,Aa,el).call(this,{type:"pause"})},onContinue:()=>{Ut(this,Aa,el).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),Q(this,ys).start()}},lm=new WeakMap,Cd=new WeakMap,zi=new WeakMap,Pd=new WeakMap,ys=new WeakMap,dx=new WeakMap,Id=new WeakMap,Aa=new WeakSet,el=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Pq(s.data,this.options),fetchMeta:n.meta??null};case"success":return qe(this,Cd,void 0),{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=n.error;return YS(a)&&a.revert&&Q(this,Cd)?{...Q(this,Cd),fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Lr.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),Q(this,zi).notify({query:this,type:"updated",action:n})})},C6);function Pq(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Eq(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Bue(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var uo,P6,Uue=(P6=class extends Ap{constructor(e={}){super();mt(this,uo);this.config=e,qe(this,uo,new Map)}build(e,n,r){const s=n.queryKey,a=n.queryHash??Yk(s,n);let o=this.get(a);return o||(o=new Vue({client:e,queryKey:s,queryHash:a,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){Q(this,uo).has(e.queryHash)||(Q(this,uo).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Q(this,uo).get(e.queryHash);n&&(e.destroy(),n===e&&Q(this,uo).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Lr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Q(this,uo).get(e)}getAll(){return[...Q(this,uo).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>JL(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>JL(e,r)):n}notify(e){Lr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Lr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Lr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},uo=new WeakMap,P6),ho,Is,kd,fo,lc,I6,zue=(I6=class extends Cq{constructor(n){super();mt(this,fo);mt(this,ho);mt(this,Is);mt(this,kd);this.mutationId=n.mutationId,qe(this,Is,n.mutationCache),qe(this,ho,[]),this.state=n.state||Iq(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){Q(this,ho).includes(n)||(Q(this,ho).push(n),this.clearGcTimeout(),Q(this,Is).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){qe(this,ho,Q(this,ho).filter(r=>r!==n)),this.scheduleGc(),Q(this,Is).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){Q(this,ho).length||(this.state.status==="pending"?this.scheduleGc():Q(this,Is).remove(this))}continue(){var n;return((n=Q(this,kd))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var o,l,c,u,d,h,f,m,v,g,y,w,b,E,T,x,S,_,p,A;const r=()=>{Ut(this,fo,lc).call(this,{type:"continue"})};qe(this,kd,Tq({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(P,C)=>{Ut(this,fo,lc).call(this,{type:"failed",failureCount:P,error:C})},onPause:()=>{Ut(this,fo,lc).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Q(this,Is).canRun(this)}));const s=this.state.status==="pending",a=!Q(this,kd).canStart();try{if(s)r();else{Ut(this,fo,lc).call(this,{type:"pending",variables:n,isPaused:a}),await((l=(o=Q(this,Is).config).onMutate)==null?void 0:l.call(o,n,this));const C=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,n));C!==this.state.context&&Ut(this,fo,lc).call(this,{type:"pending",context:C,variables:n,isPaused:a})}const P=await Q(this,kd).start();return await((h=(d=Q(this,Is).config).onSuccess)==null?void 0:h.call(d,P,n,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,P,n,this.state.context)),await((g=(v=Q(this,Is).config).onSettled)==null?void 0:g.call(v,P,null,this.state.variables,this.state.context,this)),await((w=(y=this.options).onSettled)==null?void 0:w.call(y,P,null,n,this.state.context)),Ut(this,fo,lc).call(this,{type:"success",data:P}),P}catch(P){try{throw await((E=(b=Q(this,Is).config).onError)==null?void 0:E.call(b,P,n,this.state.context,this)),await((x=(T=this.options).onError)==null?void 0:x.call(T,P,n,this.state.context)),await((_=(S=Q(this,Is).config).onSettled)==null?void 0:_.call(S,void 0,P,this.state.variables,this.state.context,this)),await((A=(p=this.options).onSettled)==null?void 0:A.call(p,void 0,P,n,this.state.context)),P}finally{Ut(this,fo,lc).call(this,{type:"error",error:P})}}finally{Q(this,Is).runNext(this)}}},ho=new WeakMap,Is=new WeakMap,kd=new WeakMap,fo=new WeakSet,lc=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Lr.batch(()=>{Q(this,ho).forEach(s=>{s.onMutationUpdate(n)}),Q(this,Is).notify({mutation:this,type:"updated",action:n})})},I6);function Iq(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var sl,Ta,hx,k6,que=(k6=class extends Ap{constructor(e={}){super();mt(this,sl);mt(this,Ta);mt(this,hx);this.config=e,qe(this,sl,new Set),qe(this,Ta,new Map),qe(this,hx,0)}build(e,n,r){const s=new zue({mutationCache:this,mutationId:++bb(this,hx)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){Q(this,sl).add(e);const n=zb(e);if(typeof n=="string"){const r=Q(this,Ta).get(n);r?r.push(e):Q(this,Ta).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Q(this,sl).delete(e)){const n=zb(e);if(typeof n=="string"){const r=Q(this,Ta).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&Q(this,Ta).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=zb(e);if(typeof n=="string"){const r=Q(this,Ta).get(n),s=r==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=zb(e);if(typeof n=="string"){const s=(r=Q(this,Ta).get(n))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Lr.batch(()=>{Q(this,sl).forEach(e=>{this.notify({type:"removed",mutation:e})}),Q(this,sl).clear(),Q(this,Ta).clear()})}getAll(){return Array.from(Q(this,sl))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>e4(n,r))}findAll(e={}){return this.getAll().filter(n=>e4(e,n))}notify(e){Lr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Lr.batch(()=>Promise.all(e.map(n=>n.continue().catch(Os))))}},sl=new WeakMap,Ta=new WeakMap,hx=new WeakMap,k6);function zb(t){var e;return(e=t.options.scope)==null?void 0:e.id}function r4(t){return{onFetch:(e,n)=>{var d,h,f,m,v;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,a=((m=e.state.data)==null?void 0:m.pages)||[],o=((v=e.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const y=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},w=Nq(e.options,e.fetchOptions),b=async(E,T,x)=>{if(g)return Promise.reject();if(T==null&&E.pages.length)return Promise.resolve(E);const _=(()=>{const C={client:e.client,queryKey:e.queryKey,pageParam:T,direction:x?"backward":"forward",meta:e.options.meta};return y(C),C})(),p=await w(_),{maxPages:A}=e.options,P=x?Oue:Rue;return{pages:P(E.pages,p,A),pageParams:P(E.pageParams,T,A)}};if(s&&a.length){const E=s==="backward",T=E?Wue:s4,x={pages:a,pageParams:o},S=T(r,x);l=await b(x,S,E)}else{const E=t??a.length;do{const T=c===0?o[0]??r.initialPageParam:s4(r,l);if(c>0&&T==null)break;l=await b(l,T),c++}while(c<E)}return l};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function s4(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Wue(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var ir,Tc,Cc,cm,um,Pc,dm,hm,R6,Hue=(R6=class{constructor(t={}){mt(this,ir);mt(this,Tc);mt(this,Cc);mt(this,cm);mt(this,um);mt(this,Pc);mt(this,dm);mt(this,hm);qe(this,ir,t.queryCache||new Uue),qe(this,Tc,t.mutationCache||new que),qe(this,Cc,t.defaultOptions||{}),qe(this,cm,new Map),qe(this,um,new Map),qe(this,Pc,0)}mount(){bb(this,Pc)._++,Q(this,Pc)===1&&(qe(this,dm,Xk.subscribe(async t=>{t&&(await this.resumePausedMutations(),Q(this,ir).onFocus())})),qe(this,hm,Rw.subscribe(async t=>{t&&(await this.resumePausedMutations(),Q(this,ir).onOnline())})))}unmount(){var t,e;bb(this,Pc)._--,Q(this,Pc)===0&&((t=Q(this,dm))==null||t.call(this),qe(this,dm,void 0),(e=Q(this,hm))==null||e.call(this),qe(this,hm,void 0))}isFetching(t){return Q(this,ir).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Q(this,Tc).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Q(this,ir).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=Q(this,ir).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Zc(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return Q(this,ir).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=Q(this,ir).get(r.queryHash),a=s==null?void 0:s.state.data,o=Iue(e,a);if(o!==void 0)return Q(this,ir).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Lr.batch(()=>Q(this,ir).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Q(this,ir).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Q(this,ir);Lr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Q(this,ir);return Lr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Lr.batch(()=>Q(this,ir).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Os).catch(Os)}invalidateQueries(t,e={}){return Lr.batch(()=>(Q(this,ir).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Lr.batch(()=>Q(this,ir).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(Os)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Os)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Q(this,ir).build(this,e);return n.isStaleByTime(Zc(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Os).catch(Os)}fetchInfiniteQuery(t){return t.behavior=r4(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Os).catch(Os)}ensureInfiniteQueryData(t){return t.behavior=r4(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Rw.isOnline()?Q(this,Tc).resumePausedMutations():Promise.resolve()}getQueryCache(){return Q(this,ir)}getMutationCache(){return Q(this,Tc)}getDefaultOptions(){return Q(this,Cc)}setDefaultOptions(t){qe(this,Cc,t)}setQueryDefaults(t,e){Q(this,cm).set(rh(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Q(this,cm).values()],n={};return e.forEach(r=>{rv(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){Q(this,um).set(rh(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Q(this,um).values()],n={};return e.forEach(r=>{rv(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Q(this,Cc).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Yk(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Qk&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Q(this,Cc).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Q(this,ir).clear(),Q(this,Tc).clear()}},ir=new WeakMap,Tc=new WeakMap,Cc=new WeakMap,cm=new WeakMap,um=new WeakMap,Pc=new WeakMap,dm=new WeakMap,hm=new WeakMap,R6),Qs,Zt,fx,ks,Rd,fm,Ic,kc,mx,mm,pm,Od,Md,Rc,gm,mn,Gg,PT,IT,kT,RT,OT,MT,DT,kq,O6,Kue=(O6=class extends Ap{constructor(e,n){super();mt(this,mn);mt(this,Qs);mt(this,Zt);mt(this,fx);mt(this,ks);mt(this,Rd);mt(this,fm);mt(this,Ic);mt(this,kc);mt(this,mx);mt(this,mm);mt(this,pm);mt(this,Od);mt(this,Md);mt(this,Rc);mt(this,gm,new Set);this.options=n,qe(this,Qs,e),qe(this,kc,null),qe(this,Ic,CT()),this.options.experimental_prefetchInRender||Q(this,Ic).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Q(this,Zt).addObserver(this),i4(Q(this,Zt),this.options)?Ut(this,mn,Gg).call(this):this.updateResult(),Ut(this,mn,RT).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return LT(Q(this,Zt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return LT(Q(this,Zt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ut(this,mn,OT).call(this),Ut(this,mn,MT).call(this),Q(this,Zt).removeObserver(this)}setOptions(e){const n=this.options,r=Q(this,Zt);if(this.options=Q(this,Qs).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof qi(this.options.enabled,Q(this,Zt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ut(this,mn,DT).call(this),Q(this,Zt).setOptions(this.options),n._defaulted&&!kw(this.options,n)&&Q(this,Qs).getQueryCache().notify({type:"observerOptionsUpdated",query:Q(this,Zt),observer:this});const s=this.hasListeners();s&&a4(Q(this,Zt),r,this.options,n)&&Ut(this,mn,Gg).call(this),this.updateResult(),s&&(Q(this,Zt)!==r||qi(this.options.enabled,Q(this,Zt))!==qi(n.enabled,Q(this,Zt))||Zc(this.options.staleTime,Q(this,Zt))!==Zc(n.staleTime,Q(this,Zt)))&&Ut(this,mn,PT).call(this);const a=Ut(this,mn,IT).call(this);s&&(Q(this,Zt)!==r||qi(this.options.enabled,Q(this,Zt))!==qi(n.enabled,Q(this,Zt))||a!==Q(this,Rc))&&Ut(this,mn,kT).call(this,a)}getOptimisticResult(e){const n=Q(this,Qs).getQueryCache().build(Q(this,Qs),e),r=this.createResult(n,e);return Yue(this,r)&&(qe(this,ks,r),qe(this,fm,this.options),qe(this,Rd,Q(this,Zt).state)),r}getCurrentResult(){return Q(this,ks)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){Q(this,gm).add(e)}getCurrentQuery(){return Q(this,Zt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=Q(this,Qs).defaultQueryOptions(e),r=Q(this,Qs).getQueryCache().build(Q(this,Qs),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Ut(this,mn,Gg).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),Q(this,ks)))}createResult(e,n){var A;const r=Q(this,Zt),s=this.options,a=Q(this,ks),o=Q(this,Rd),l=Q(this,fm),u=e!==r?e.state:Q(this,fx),{state:d}=e;let h={...d},f=!1,m;if(n._optimisticResults){const P=this.hasListeners(),C=!P&&i4(e,n),I=P&&a4(e,r,n,s);(C||I)&&(h={...h,...Pq(d.data,e.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:v,errorUpdatedAt:g,status:y}=h;m=h.data;let w=!1;if(n.placeholderData!==void 0&&m===void 0&&y==="pending"){let P;a!=null&&a.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(P=a.data,w=!0):P=typeof n.placeholderData=="function"?n.placeholderData((A=Q(this,pm))==null?void 0:A.state.data,Q(this,pm)):n.placeholderData,P!==void 0&&(y="success",m=TT(a==null?void 0:a.data,P,n),f=!0)}if(n.select&&m!==void 0&&!w)if(a&&m===(o==null?void 0:o.data)&&n.select===Q(this,mx))m=Q(this,mm);else try{qe(this,mx,n.select),m=n.select(m),m=TT(a==null?void 0:a.data,m,n),qe(this,mm,m),qe(this,kc,null)}catch(P){qe(this,kc,P)}Q(this,kc)&&(v=Q(this,kc),m=Q(this,mm),g=Date.now(),y="error");const b=h.fetchStatus==="fetching",E=y==="pending",T=y==="error",x=E&&b,S=m!==void 0,p={status:y,fetchStatus:h.fetchStatus,isPending:E,isSuccess:y==="success",isError:T,isInitialLoading:x,isLoading:x,data:m,dataUpdatedAt:h.dataUpdatedAt,error:v,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:b,isRefetching:b&&!E,isLoadingError:T&&!S,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:T&&S,isStale:Zk(e,n),refetch:this.refetch,promise:Q(this,Ic),isEnabled:qi(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const P=R=>{p.status==="error"?R.reject(p.error):p.data!==void 0&&R.resolve(p.data)},C=()=>{const R=qe(this,Ic,p.promise=CT());P(R)},I=Q(this,Ic);switch(I.status){case"pending":e.queryHash===r.queryHash&&P(I);break;case"fulfilled":(p.status==="error"||p.data!==I.value)&&C();break;case"rejected":(p.status!=="error"||p.error!==I.reason)&&C();break}}return p}updateResult(){const e=Q(this,ks),n=this.createResult(Q(this,Zt),this.options);if(qe(this,Rd,Q(this,Zt).state),qe(this,fm,this.options),Q(this,Rd).data!==void 0&&qe(this,pm,Q(this,Zt)),kw(n,e))return;qe(this,ks,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!Q(this,gm).size)return!0;const o=new Set(a??Q(this,gm));return this.options.throwOnError&&o.add("error"),Object.keys(Q(this,ks)).some(l=>{const c=l;return Q(this,ks)[c]!==e[c]&&o.has(c)})};Ut(this,mn,kq).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ut(this,mn,RT).call(this)}},Qs=new WeakMap,Zt=new WeakMap,fx=new WeakMap,ks=new WeakMap,Rd=new WeakMap,fm=new WeakMap,Ic=new WeakMap,kc=new WeakMap,mx=new WeakMap,mm=new WeakMap,pm=new WeakMap,Od=new WeakMap,Md=new WeakMap,Rc=new WeakMap,gm=new WeakMap,mn=new WeakSet,Gg=function(e){Ut(this,mn,DT).call(this);let n=Q(this,Zt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Os)),n},PT=function(){Ut(this,mn,OT).call(this);const e=Zc(this.options.staleTime,Q(this,Zt));if(nh||Q(this,ks).isStale||!ET(e))return;const r=_q(Q(this,ks).dataUpdatedAt,e)+1;qe(this,Od,setTimeout(()=>{Q(this,ks).isStale||this.updateResult()},r))},IT=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Q(this,Zt)):this.options.refetchInterval)??!1},kT=function(e){Ut(this,mn,MT).call(this),qe(this,Rc,e),!(nh||qi(this.options.enabled,Q(this,Zt))===!1||!ET(Q(this,Rc))||Q(this,Rc)===0)&&qe(this,Md,setInterval(()=>{(this.options.refetchIntervalInBackground||Xk.isFocused())&&Ut(this,mn,Gg).call(this)},Q(this,Rc)))},RT=function(){Ut(this,mn,PT).call(this),Ut(this,mn,kT).call(this,Ut(this,mn,IT).call(this))},OT=function(){Q(this,Od)&&(clearTimeout(Q(this,Od)),qe(this,Od,void 0))},MT=function(){Q(this,Md)&&(clearInterval(Q(this,Md)),qe(this,Md,void 0))},DT=function(){const e=Q(this,Qs).getQueryCache().build(Q(this,Qs),this.options);if(e===Q(this,Zt))return;const n=Q(this,Zt);qe(this,Zt,e),qe(this,fx,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},kq=function(e){Lr.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(Q(this,ks))}),Q(this,Qs).getQueryCache().notify({query:Q(this,Zt),type:"observerResultsUpdated"})})},O6);function Gue(t,e){return qi(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function i4(t,e){return Gue(t,e)||t.state.data!==void 0&&LT(t,e,e.refetchOnMount)}function LT(t,e,n){if(qi(e.enabled,t)!==!1&&Zc(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Zk(t,e)}return!1}function a4(t,e,n,r){return(t!==e||qi(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Zk(t,n)}function Zk(t,e){return qi(e.enabled,t)!==!1&&t.isStaleByTime(Zc(e.staleTime,t))}function Yue(t,e){return!kw(t.getCurrentResult(),e)}var Oc,Mc,Xs,il,bl,D0,$T,M6,Que=(M6=class extends Ap{constructor(n,r){super();mt(this,bl);mt(this,Oc);mt(this,Mc);mt(this,Xs);mt(this,il);qe(this,Oc,n),this.setOptions(r),this.bindMethods(),Ut(this,bl,D0).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=Q(this,Oc).defaultMutationOptions(n),kw(this.options,r)||Q(this,Oc).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Q(this,Xs),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&rh(r.mutationKey)!==rh(this.options.mutationKey)?this.reset():((s=Q(this,Xs))==null?void 0:s.state.status)==="pending"&&Q(this,Xs).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=Q(this,Xs))==null||n.removeObserver(this)}onMutationUpdate(n){Ut(this,bl,D0).call(this),Ut(this,bl,$T).call(this,n)}getCurrentResult(){return Q(this,Mc)}reset(){var n;(n=Q(this,Xs))==null||n.removeObserver(this),qe(this,Xs,void 0),Ut(this,bl,D0).call(this),Ut(this,bl,$T).call(this)}mutate(n,r){var s;return qe(this,il,r),(s=Q(this,Xs))==null||s.removeObserver(this),qe(this,Xs,Q(this,Oc).getMutationCache().build(Q(this,Oc),this.options)),Q(this,Xs).addObserver(this),Q(this,Xs).execute(n)}},Oc=new WeakMap,Mc=new WeakMap,Xs=new WeakMap,il=new WeakMap,bl=new WeakSet,D0=function(){var r;const n=((r=Q(this,Xs))==null?void 0:r.state)??Iq();qe(this,Mc,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},$T=function(n){Lr.batch(()=>{var r,s,a,o,l,c,u,d;if(Q(this,il)&&this.hasListeners()){const h=Q(this,Mc).variables,f=Q(this,Mc).context;(n==null?void 0:n.type)==="success"?((s=(r=Q(this,il)).onSuccess)==null||s.call(r,n.data,h,f),(o=(a=Q(this,il)).onSettled)==null||o.call(a,n.data,null,h,f)):(n==null?void 0:n.type)==="error"&&((c=(l=Q(this,il)).onError)==null||c.call(l,n.error,h,f),(d=(u=Q(this,il)).onSettled)==null||d.call(u,void 0,n.error,h,f))}this.listeners.forEach(h=>{h(Q(this,Mc))})})},M6),Rq=N.createContext(void 0),dn=t=>{const e=N.useContext(Rq);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Xue=({client:t,children:e})=>(N.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),i.jsx(Rq.Provider,{value:t,children:e})),Oq=N.createContext(!1),Zue=()=>N.useContext(Oq);Oq.Provider;function Jue(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var ede=N.createContext(Jue()),tde=()=>N.useContext(ede),nde=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},rde=t=>{N.useEffect(()=>{t.clearReset()},[t])},sde=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||Sq(n,[t.error,r])),ide=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},ade=(t,e)=>t.isLoading&&t.isFetching&&!e,ode=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,o4=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function lde(t,e,n){var h,f,m,v,g;const r=Zue(),s=tde(),a=dn(),o=a.defaultQueryOptions(t);(f=(h=a.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o),o._optimisticResults=r?"isRestoring":"optimistic",ide(o),nde(o,s),rde(s);const l=!a.getQueryCache().get(o.queryHash),[c]=N.useState(()=>new e(a,o)),u=c.getOptimisticResult(o),d=!r&&t.subscribed!==!1;if(N.useSyncExternalStore(N.useCallback(y=>{const w=d?c.subscribe(Lr.batchCalls(y)):Os;return c.updateResult(),w},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),N.useEffect(()=>{c.setOptions(o)},[o,c]),ode(o,u))throw o4(o,c,s);if(sde({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:a.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((v=(m=a.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||v.call(m,o,u),o.experimental_prefetchInRender&&!nh&&ade(u,r)){const y=l?o4(o,c,s):(g=a.getQueryCache().get(o.queryHash))==null?void 0:g.promise;y==null||y.catch(Os).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function je(t,e){return lde(t,Kue)}function ot(t,e){const n=dn(),[r]=N.useState(()=>new Que(n,t));N.useEffect(()=>{r.setOptions(t)},[r,t]);const s=N.useSyncExternalStore(N.useCallback(o=>r.subscribe(Lr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=N.useCallback((o,l)=>{r.mutate(o,l).catch(Os)},[r]);if(s.error&&Sq(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sv(){return sv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sv.apply(this,arguments)}var $c;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})($c||($c={}));const l4="popstate";function cde(t){t===void 0&&(t={});function e(r,s){let{pathname:a,search:o,hash:l}=r.location;return FT("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Ow(s)}return dde(e,n,null,t)}function br(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Mq(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ude(){return Math.random().toString(36).substr(2,8)}function c4(t,e){return{usr:t.state,key:t.key,idx:e}}function FT(t,e,n,r){return n===void 0&&(n=null),sv({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Tp(e):e,{state:n,key:e&&e.key||r||ude()})}function Ow(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Tp(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function dde(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,o=s.history,l=$c.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(sv({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=$c.Pop;let y=d(),w=y==null?null:y-u;u=y,c&&c({action:l,location:g.location,delta:w})}function f(y,w){l=$c.Push;let b=FT(g.location,y,w);u=d()+1;let E=c4(b,u),T=g.createHref(b);try{o.pushState(E,"",T)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;s.location.assign(T)}a&&c&&c({action:l,location:g.location,delta:1})}function m(y,w){l=$c.Replace;let b=FT(g.location,y,w);u=d();let E=c4(b,u),T=g.createHref(b);o.replaceState(E,"",T),a&&c&&c({action:l,location:g.location,delta:0})}function v(y){let w=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof y=="string"?y:Ow(y);return b=b.replace(/ $/,"%20"),br(w,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,w)}let g={get action(){return l},get location(){return t(s,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(l4,h),c=y,()=>{s.removeEventListener(l4,h),c=null}},createHref(y){return e(s,y)},createURL:v,encodeLocation(y){let w=v(y);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:m,go(y){return o.go(y)}};return g}var u4;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(u4||(u4={}));function hde(t,e,n){return n===void 0&&(n="/"),fde(t,e,n,!1)}function fde(t,e,n,r){let s=typeof e=="string"?Tp(e):e,a=Jk(s.pathname||"/",n);if(a==null)return null;let o=Dq(t);mde(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=Sde(a);l=jde(o[c],u,r)}return l}function Dq(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(br(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Jc([r,c.relativePath]),d=n.concat(c);a.children&&a.children.length>0&&(br(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Dq(a.children,e,d,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:wde(u,a.index),routesMeta:d})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let c of Lq(a.path))s(a,o,c)}),e}function Lq(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let o=Lq(r.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function mde(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:_de(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const pde=/^:[\w-]+$/,gde=3,yde=2,vde=1,xde=10,bde=-2,d4=t=>t==="*";function wde(t,e){let n=t.split("/"),r=n.length;return n.some(d4)&&(r+=bde),e&&(r+=yde),n.filter(s=>!d4(s)).reduce((s,a)=>s+(pde.test(a)?gde:a===""?vde:xde),r)}function _de(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function jde(t,e,n){let{routesMeta:r}=t,s={},a="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=a==="/"?e:e.slice(a.length)||"/",h=h4({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=h4({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Jc([a,h.pathname]),pathnameBase:Cde(Jc([a,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(a=Jc([a,h.pathnameBase]))}return o}function h4(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Nde(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let g=l[h]||"";o=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const v=l[h];return m&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:t}}function Nde(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Mq(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Sde(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Mq(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Jk(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Ede(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Tp(t):t;return{pathname:n?n.startsWith("/")?n:Ade(n,e):e,search:Pde(r),hash:Ide(s)}}function Ade(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function QS(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Tde(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function eR(t,e){let n=Tde(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function tR(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Tp(t):(s=sv({},t),br(!s.pathname||!s.pathname.includes("?"),QS("?","pathname","search",s)),br(!s.pathname||!s.pathname.includes("#"),QS("#","pathname","hash",s)),br(!s.search||!s.search.includes("#"),QS("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?e[h]:"/"}let c=Ede(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Jc=t=>t.join("/").replace(/\/\/+/g,"/"),Cde=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Pde=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Ide=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function kde(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const $q=["post","put","patch","delete"];new Set($q);const Rde=["get",...$q];new Set(Rde);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function iv(){return iv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iv.apply(this,arguments)}const nR=N.createContext(null),Ode=N.createContext(null),Ru=N.createContext(null),sN=N.createContext(null),Bl=N.createContext({outlet:null,matches:[],isDataRoute:!1}),Fq=N.createContext(null);function Mde(t,e){let{relative:n}=e===void 0?{}:e;Cp()||br(!1);let{basename:r,navigator:s}=N.useContext(Ru),{hash:a,pathname:o,search:l}=Bq(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Jc([r,o])),s.createHref({pathname:c,search:l,hash:a})}function Cp(){return N.useContext(sN)!=null}function Wo(){return Cp()||br(!1),N.useContext(sN).location}function Vq(t){N.useContext(Ru).static||N.useLayoutEffect(t)}function Gn(){let{isDataRoute:t}=N.useContext(Bl);return t?Gde():Dde()}function Dde(){Cp()||br(!1);let t=N.useContext(nR),{basename:e,future:n,navigator:r}=N.useContext(Ru),{matches:s}=N.useContext(Bl),{pathname:a}=Wo(),o=JSON.stringify(eR(s,n.v7_relativeSplatPath)),l=N.useRef(!1);return Vq(()=>{l.current=!0}),N.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=tR(u,JSON.parse(o),a,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Jc([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,a,t])}function Pp(){let{matches:t}=N.useContext(Bl),e=t[t.length-1];return e?e.params:{}}function Bq(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=N.useContext(Ru),{matches:s}=N.useContext(Bl),{pathname:a}=Wo(),o=JSON.stringify(eR(s,r.v7_relativeSplatPath));return N.useMemo(()=>tR(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function Lde(t,e){return $de(t,e)}function $de(t,e,n,r){Cp()||br(!1);let{navigator:s}=N.useContext(Ru),{matches:a}=N.useContext(Bl),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Wo(),d;if(e){var h;let y=typeof e=="string"?Tp(e):e;c==="/"||(h=y.pathname)!=null&&h.startsWith(c)||br(!1),d=y}else d=u;let f=d.pathname||"/",m=f;if(c!=="/"){let y=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let v=hde(t,{pathname:m}),g=zde(v&&v.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:Jc([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:Jc([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),a,n,r);return e&&g?N.createElement(sN.Provider,{value:{location:iv({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:$c.Pop}},g):g}function Fde(){let t=Kde(),e=kde(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:s},n):null,null)}const Vde=N.createElement(Fde,null);class Bde extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?N.createElement(Bl.Provider,{value:this.props.routeContext},N.createElement(Fq.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ude(t){let{routeContext:e,match:n,children:r}=t,s=N.useContext(nR);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(Bl.Provider,{value:e},r)}function zde(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||br(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:m}=n,v=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,v=!1,g=null,y=null;n&&(m=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||Vde,c&&(u<0&&f===0?(v=!0,y=null):u===f&&(v=!0,y=h.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,f+1)),b=()=>{let E;return m?E=g:v?E=y:h.route.Component?E=N.createElement(h.route.Component,null):h.route.element?E=h.route.element:E=d,N.createElement(Ude,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:E})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?N.createElement(Bde,{location:n.location,revalidation:n.revalidation,component:g,error:m,children:b(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):b()},null)}var Uq=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Uq||{}),Mw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Mw||{});function qde(t){let e=N.useContext(nR);return e||br(!1),e}function Wde(t){let e=N.useContext(Ode);return e||br(!1),e}function Hde(t){let e=N.useContext(Bl);return e||br(!1),e}function zq(t){let e=Hde(),n=e.matches[e.matches.length-1];return n.route.id||br(!1),n.route.id}function Kde(){var t;let e=N.useContext(Fq),n=Wde(Mw.UseRouteError),r=zq(Mw.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Gde(){let{router:t}=qde(Uq.UseNavigateStable),e=zq(Mw.UseNavigateStable),n=N.useRef(!1);return Vq(()=>{n.current=!0}),N.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,iv({fromRouteId:e},a)))},[t,e])}function Yde(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function VT(t){let{to:e,replace:n,state:r,relative:s}=t;Cp()||br(!1);let{future:a,static:o}=N.useContext(Ru),{matches:l}=N.useContext(Bl),{pathname:c}=Wo(),u=Gn(),d=tR(e,eR(l,a.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return N.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:s}),[u,h,s,n,r]),null}function yt(t){br(!1)}function Qde(t){let{basename:e="/",children:n=null,location:r,navigationType:s=$c.Pop,navigator:a,static:o=!1,future:l}=t;Cp()&&br(!1);let c=e.replace(/^\/*/,"/"),u=N.useMemo(()=>({basename:c,navigator:a,static:o,future:iv({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof r=="string"&&(r=Tp(r));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:v="default"}=r,g=N.useMemo(()=>{let y=Jk(d,c);return y==null?null:{location:{pathname:y,search:h,hash:f,state:m,key:v},navigationType:s}},[c,d,h,f,m,v,s]);return g==null?null:N.createElement(Ru.Provider,{value:u},N.createElement(sN.Provider,{children:n,value:g}))}function Xde(t){let{children:e,location:n}=t;return Lde(BT(e),n)}new Promise(()=>{});function BT(t,e){e===void 0&&(e=[]);let n=[];return N.Children.forEach(t,(r,s)=>{if(!N.isValidElement(r))return;let a=[...e,s];if(r.type===N.Fragment){n.push.apply(n,BT(r.props.children,a));return}r.type!==yt&&br(!1),!r.props.index||!r.props.children||br(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=BT(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function UT(){return UT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UT.apply(this,arguments)}function Zde(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Jde(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ehe(t,e){return t.button===0&&(!e||e==="_self")&&!Jde(t)}function zT(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function the(t,e){let n=zT(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(a=>{n.append(s,a)})}),n}const nhe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],rhe="6";try{window.__reactRouterVersion=rhe}catch{}const she="startTransition",f4=OI[she];function ihe(t){let{basename:e,children:n,future:r,window:s}=t,a=N.useRef();a.current==null&&(a.current=cde({window:s,v5Compat:!0}));let o=a.current,[l,c]=N.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=N.useCallback(h=>{u&&f4?f4(()=>c(h)):c(h)},[c,u]);return N.useLayoutEffect(()=>o.listen(d),[o,d]),N.useEffect(()=>Yde(r),[r]),N.createElement(Qde,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const ahe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ohe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oa=N.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=e,f=Zde(e,nhe),{basename:m}=N.useContext(Ru),v,g=!1;if(typeof u=="string"&&ohe.test(u)&&(v=u,ahe))try{let E=new URL(window.location.href),T=u.startsWith("//")?new URL(E.protocol+u):new URL(u),x=Jk(T.pathname,m);T.origin===E.origin&&x!=null?u=x+T.search+T.hash:g=!0}catch{}let y=Mde(u,{relative:s}),w=lhe(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function b(E){r&&r(E),E.defaultPrevented||w(E)}return N.createElement("a",UT({},f,{href:v||y,onClick:g||a?r:b,ref:n,target:c}))});var m4;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(m4||(m4={}));var p4;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(p4||(p4={}));function lhe(t,e){let{target:n,replace:r,state:s,preventScrollReset:a,relative:o,viewTransition:l}=e===void 0?{}:e,c=Gn(),u=Wo(),d=Bq(t,{relative:o});return N.useCallback(h=>{if(ehe(h,n)){h.preventDefault();let f=r!==void 0?r:Ow(u)===Ow(d);c(t,{replace:f,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,r,s,n,t,a,o,l])}function qq(t){let e=N.useRef(zT(t)),n=N.useRef(!1),r=Wo(),s=N.useMemo(()=>the(r.search,n.current?null:e.current),[r.search]),a=Gn(),o=N.useCallback((l,c)=>{const u=zT(typeof l=="function"?l(s):l);n.current=!0,a("?"+u,c)},[a,s]);return[s,o]}const che=()=>{};var g4={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wq=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},uhe=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},Hq={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,d=a>>2,h=(a&3)<<4|l>>4;let f=(l&15)<<2|u>>6,m=u&63;c||(m=64,o||(f=64)),r.push(n[d],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Wq(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):uhe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||l==null||u==null||h==null)throw new dhe;const f=a<<2|l>>4;if(r.push(f),u!==64){const m=l<<4&240|u>>2;if(r.push(m),h!==64){const v=u<<6&192|h;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class dhe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hhe=function(t){const e=Wq(t);return Hq.encodeByteArray(e,!0)},Dw=function(t){return hhe(t).replace(/\./g,"")},Kq=function(t){try{return Hq.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fhe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mhe=()=>fhe().__FIREBASE_DEFAULTS__,phe=()=>{if(typeof process>"u"||typeof g4>"u")return;const t=g4.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ghe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Kq(t[1]);return e&&JSON.parse(e)},iN=()=>{try{return che()||mhe()||phe()||ghe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Gq=t=>{var e,n;return(n=(e=iN())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},rR=t=>{const e=Gq(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Yq=()=>{var t;return(t=iN())==null?void 0:t.config},Qq=t=>{var e;return(e=iN())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yhe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function aN(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xq(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Dw(JSON.stringify(n)),Dw(JSON.stringify(o)),""].join(".")}const gy={};function vhe(){const t={prod:[],emulator:[]};for(const e of Object.keys(gy))gy[e]?t.emulator.push(e):t.prod.push(e);return t}function xhe(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let y4=!1;function oN(t,e){if(typeof window>"u"||typeof document>"u"||!Ho(window.location.host)||gy[t]===e||gy[t]||y4)return;gy[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",a=vhe().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function l(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{y4=!0,o()},f}function d(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=xhe(r),m=n("text"),v=document.getElementById(m)||document.createElement("span"),g=n("learnmore"),y=document.getElementById(g)||document.createElement("a"),w=n("preprendIcon"),b=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const E=f.element;l(E),d(y,g);const T=u();c(b,w),E.append(b,v,y,T),document.body.appendChild(E)}a?(v.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bhe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cs())}function whe(){var e;const t=(e=iN())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _he(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jhe(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Nhe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function She(){const t=Cs();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Ehe(){return!whe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ahe(){try{return typeof indexedDB=="object"}catch{return!1}}function The(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Che="FirebaseError";class Ja extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Che,Object.setPrototypeOf(this,Ja.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ex.prototype.create)}}class Ex{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?Phe(a,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Ja(s,l,r)}}function Phe(t,e){return t.replace(Ihe,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Ihe=/\{\$([^}]+)}/g;function khe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function sh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],o=e[s];if(v4(a)&&v4(o)){if(!sh(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function v4(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Yg(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Qg(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Rhe(t,e){const n=new Ohe(t,e);return n.subscribe.bind(n)}class Ohe{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Mhe(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=XS),s.error===void 0&&(s.error=XS),s.complete===void 0&&(s.complete=XS);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Mhe(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function XS(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(t){return t&&t._delegate?t._delegate:t}class Al{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dhe{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new yhe;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($he(e))try{this.getOrInitializeService({instanceIdentifier:ld})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=ld){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ld){return this.instances.has(e)}getOptions(e=ld){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Lhe(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ld){return this.component?this.component.multipleInstances?e:ld:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Lhe(t){return t===ld?void 0:t}function $he(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fhe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Dhe(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Yt||(Yt={}));const Vhe={debug:Yt.DEBUG,verbose:Yt.VERBOSE,info:Yt.INFO,warn:Yt.WARN,error:Yt.ERROR,silent:Yt.SILENT},Bhe=Yt.INFO,Uhe={[Yt.DEBUG]:"log",[Yt.VERBOSE]:"log",[Yt.INFO]:"info",[Yt.WARN]:"warn",[Yt.ERROR]:"error"},zhe=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Uhe[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sR{constructor(e){this.name=e,this._logLevel=Bhe,this._logHandler=zhe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Yt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Vhe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Yt.DEBUG,...e),this._logHandler(this,Yt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Yt.VERBOSE,...e),this._logHandler(this,Yt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Yt.INFO,...e),this._logHandler(this,Yt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Yt.WARN,...e),this._logHandler(this,Yt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Yt.ERROR,...e),this._logHandler(this,Yt.ERROR,...e)}}const qhe=(t,e)=>e.some(n=>t instanceof n);let x4,b4;function Whe(){return x4||(x4=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Hhe(){return b4||(b4=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Zq=new WeakMap,qT=new WeakMap,Jq=new WeakMap,ZS=new WeakMap,iR=new WeakMap;function Khe(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(eu(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Zq.set(n,t)}).catch(()=>{}),iR.set(e,t),e}function Ghe(t){if(qT.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});qT.set(t,e)}let WT={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return qT.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Jq.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return eu(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Yhe(t){WT=t(WT)}function Qhe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(JS(this),e,...n);return Jq.set(r,e.sort?e.sort():[e]),eu(r)}:Hhe().includes(t)?function(...e){return t.apply(JS(this),e),eu(Zq.get(this))}:function(...e){return eu(t.apply(JS(this),e))}}function Xhe(t){return typeof t=="function"?Qhe(t):(t instanceof IDBTransaction&&Ghe(t),qhe(t,Whe())?new Proxy(t,WT):t)}function eu(t){if(t instanceof IDBRequest)return Khe(t);if(ZS.has(t))return ZS.get(t);const e=Xhe(t);return e!==t&&(ZS.set(t,e),iR.set(e,t)),e}const JS=t=>iR.get(t);function Zhe(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),l=eu(o);return r&&o.addEventListener("upgradeneeded",c=>{r(eu(o.result),c.oldVersion,c.newVersion,eu(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const Jhe=["get","getKey","getAll","getAllKeys","count"],efe=["put","add","delete","clear"],eE=new Map;function w4(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(eE.get(e))return eE.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=efe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Jhe.includes(n)))return;const a=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return eE.set(e,a),a}Yhe(t=>({...t,get:(e,n,r)=>w4(e,n)||t.get(e,n,r),has:(e,n)=>!!w4(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tfe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nfe(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function nfe(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const HT="@firebase/app",_4="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=new sR("@firebase/app"),rfe="@firebase/app-compat",sfe="@firebase/analytics-compat",ife="@firebase/analytics",afe="@firebase/app-check-compat",ofe="@firebase/app-check",lfe="@firebase/auth",cfe="@firebase/auth-compat",ufe="@firebase/database",dfe="@firebase/data-connect",hfe="@firebase/database-compat",ffe="@firebase/functions",mfe="@firebase/functions-compat",pfe="@firebase/installations",gfe="@firebase/installations-compat",yfe="@firebase/messaging",vfe="@firebase/messaging-compat",xfe="@firebase/performance",bfe="@firebase/performance-compat",wfe="@firebase/remote-config",_fe="@firebase/remote-config-compat",jfe="@firebase/storage",Nfe="@firebase/storage-compat",Sfe="@firebase/firestore",Efe="@firebase/ai",Afe="@firebase/firestore-compat",Tfe="firebase",Cfe="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT="[DEFAULT]",Pfe={[HT]:"fire-core",[rfe]:"fire-core-compat",[ife]:"fire-analytics",[sfe]:"fire-analytics-compat",[ofe]:"fire-app-check",[afe]:"fire-app-check-compat",[lfe]:"fire-auth",[cfe]:"fire-auth-compat",[ufe]:"fire-rtdb",[dfe]:"fire-data-connect",[hfe]:"fire-rtdb-compat",[ffe]:"fire-fn",[mfe]:"fire-fn-compat",[pfe]:"fire-iid",[gfe]:"fire-iid-compat",[yfe]:"fire-fcm",[vfe]:"fire-fcm-compat",[xfe]:"fire-perf",[bfe]:"fire-perf-compat",[wfe]:"fire-rc",[_fe]:"fire-rc-compat",[jfe]:"fire-gcs",[Nfe]:"fire-gcs-compat",[Sfe]:"fire-fst",[Afe]:"fire-fst-compat",[Efe]:"fire-vertex","fire-js":"fire-js",[Tfe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av=new Map,Ife=new Map,GT=new Map;function j4(t,e){try{t.container.addComponent(e)}catch(n){Tl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function du(t){const e=t.name;if(GT.has(e))return Tl.debug(`There were multiple attempts to register component ${e}.`),!1;GT.set(e,t);for(const n of av.values())j4(n,t);for(const n of Ife.values())j4(n,t);return!0}function Tx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ii(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kfe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},tu=new Ex("app","Firebase",kfe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rfe{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Al("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch=Cfe;function eW(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:KT,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw tu.create("bad-app-name",{appName:String(s)});if(n||(n=Yq()),!n)throw tu.create("no-options");const a=av.get(s);if(a){if(sh(n,a.options)&&sh(r,a.config))return a;throw tu.create("duplicate-app",{appName:s})}const o=new Fhe(s);for(const c of GT.values())o.addComponent(c);const l=new Rfe(n,r,o);return av.set(s,l),l}function Cx(t=KT){const e=av.get(t);if(!e&&t===KT&&Yq())return eW();if(!e)throw tu.create("no-app",{appName:t});return e}function Ofe(){return Array.from(av.values())}function ta(t,e,n){let r=Pfe[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Tl.warn(o.join(" "));return}du(new Al(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mfe="firebase-heartbeat-database",Dfe=1,ov="firebase-heartbeat-store";let tE=null;function tW(){return tE||(tE=Zhe(Mfe,Dfe,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ov)}catch(n){console.warn(n)}}}}).catch(t=>{throw tu.create("idb-open",{originalErrorMessage:t.message})})),tE}async function Lfe(t){try{const n=(await tW()).transaction(ov),r=await n.objectStore(ov).get(nW(t));return await n.done,r}catch(e){if(e instanceof Ja)Tl.warn(e.message);else{const n=tu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Tl.warn(n.message)}}}async function N4(t,e){try{const r=(await tW()).transaction(ov,"readwrite");await r.objectStore(ov).put(e,nW(t)),await r.done}catch(n){if(n instanceof Ja)Tl.warn(n.message);else{const r=tu.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Tl.warn(r.message)}}}function nW(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $fe=1024,Ffe=30;class Vfe{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ufe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=S4();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>Ffe){const o=zfe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Tl.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=S4(),{heartbeatsToSend:r,unsentEntries:s}=Bfe(this._heartbeatsCache.heartbeats),a=Dw(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Tl.warn(n),""}}}function S4(){return new Date().toISOString().substring(0,10)}function Bfe(t,e=$fe){const n=[];let r=t.slice();for(const s of t){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),E4(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),E4(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Ufe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ahe()?The().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Lfe(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return N4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return N4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function E4(t){return Dw(JSON.stringify({version:2,heartbeats:t})).length}function zfe(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qfe(t){du(new Al("platform-logger",e=>new tfe(e),"PRIVATE")),du(new Al("heartbeat",e=>new Vfe(e),"PRIVATE")),ta(HT,_4,t),ta(HT,_4,"esm2020"),ta("fire-js","")}qfe("");var Wfe="firebase",Hfe="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ta(Wfe,Hfe,"app");function rW(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Kfe=rW,sW=new Ex("auth","Firebase",rW());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw=new sR("@firebase/auth");function Gfe(t,...e){Lw.logLevel<=Yt.WARN&&Lw.warn(`Auth (${Ch}): ${t}`,...e)}function L0(t,...e){Lw.logLevel<=Yt.ERROR&&Lw.error(`Auth (${Ch}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(t,...e){throw aR(t,...e)}function No(t,...e){return aR(t,...e)}function iW(t,e,n){const r={...Kfe(),[e]:n};return new Ex("auth","Firebase",r).create(e,{appName:t.name})}function pl(t){return iW(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function aR(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return sW.create(t,...e)}function pt(t,e,...n){if(!t)throw aR(e,...n)}function cl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw L0(e),new Error(e)}function Cl(t,e){t||cl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Yfe(){return A4()==="http:"||A4()==="https:"}function A4(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qfe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Yfe()||jhe()||"connection"in navigator)?navigator.onLine:!0}function Xfe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,n){this.shortDelay=e,this.longDelay=n,Cl(n>e,"Short delay should be less than long delay!"),this.isMobile=bhe()||Nhe()}get(){return Qfe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(t,e){Cl(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aW{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zfe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jfe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],eme=new Px(3e4,6e4);function eo(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function $i(t,e,n,r,s={}){return oW(t,s,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const l=Ax({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...a};return _he()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Ho(t.emulatorConfig.host)&&(u.credentials="include"),aW.fetch()(await lW(t,t.config.apiHost,n,l),u)})}async function oW(t,e,n){t._canInitEmulator=!1;const r={...Zfe,...e};try{const s=new nme(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw qb(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw qb(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw qb(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw qb(t,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw iW(t,d,u);ca(t,d)}}catch(s){if(s instanceof Ja)throw s;ca(t,"network-request-failed",{message:String(s)})}}async function Ix(t,e,n,r,s={}){const a=await $i(t,e,n,r,s);return"mfaPendingCredential"in a&&ca(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function lW(t,e,n,r){const s=`${e}${n}?${r}`,a=t,o=a.config.emulator?oR(t.config,s):`${t.config.apiScheme}://${s}`;return Jfe.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function tme(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nme{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(No(this.auth,"network-request-failed")),eme.get())})}}function qb(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=No(t,e,r);return s.customData._tokenResponse=n,s}function T4(t){return t!==void 0&&t.enterprise!==void 0}class rme{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return tme(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function sme(t,e){return $i(t,"GET","/v2/recaptchaConfig",eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ime(t,e){return $i(t,"POST","/v1/accounts:delete",e)}async function $w(t,e){return $i(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ame(t,e=!1){const n=nn(t),r=await n.getIdToken(e),s=lR(r);pt(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:yy(nE(s.auth_time)),issuedAtTime:yy(nE(s.iat)),expirationTime:yy(nE(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function nE(t){return Number(t)*1e3}function lR(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return L0("JWT malformed, contained fewer than 3 sections"),null;try{const s=Kq(n);return s?JSON.parse(s):(L0("Failed to decode base64 JWT payload"),null)}catch(s){return L0("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function C4(t){const e=lR(t);return pt(e,"internal-error"),pt(typeof e.exp<"u","internal-error"),pt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ih(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ja&&ome(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ome({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lme{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=yy(this.lastLoginAt),this.creationTime=yy(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fw(t){var h;const e=t.auth,n=await t.getIdToken(),r=await ih(t,$w(e,{idToken:n}));pt(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=(h=s.providerUserInfo)!=null&&h.length?cW(s.providerUserInfo):[],o=ume(t.providerData,a),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new QT(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function cme(t){const e=nn(t);await Fw(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ume(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function cW(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dme(t,e){const n=await oW(t,{},async()=>{const r=Ax({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=await lW(t,s,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&Ho(t.emulatorConfig.host)&&(c.credentials="include"),aW.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hme(t,e){return $i(t,"POST","/v2/accounts:revokeToken",eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pt(e.idToken,"internal-error"),pt(typeof e.idToken<"u","internal-error"),pt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):C4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){pt(e.length!==0,"internal-error");const n=C4(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(pt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await dme(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,o=new Uf;return r&&(pt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(pt(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(pt(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Uf,this.toJSON())}_performRefresh(){return cl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(t,e){pt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class $a{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new lme(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new QT(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ih(this,this.stsTokenManager.getToken(this.auth,e));return pt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ame(this,e)}reload(){return cme(this)}_assign(e){this!==e&&(pt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new $a({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){pt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Fw(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ii(this.auth.app))return Promise.reject(pl(this.auth));const e=await this.getIdToken();return await ih(this,ime(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:m,providerData:v,stsTokenManager:g}=n;pt(h&&g,e,"internal-error");const y=Uf.fromJSON(this.name,g);pt(typeof h=="string",e,"internal-error"),ic(r,e.name),ic(s,e.name),pt(typeof f=="boolean",e,"internal-error"),pt(typeof m=="boolean",e,"internal-error"),ic(a,e.name),ic(o,e.name),ic(l,e.name),ic(c,e.name),ic(u,e.name),ic(d,e.name);const w=new $a({uid:h,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:a,tenantId:l,stsTokenManager:y,createdAt:u,lastLoginAt:d});return v&&Array.isArray(v)&&(w.providerData=v.map(b=>({...b}))),c&&(w._redirectEventId=c),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new Uf;s.updateFromServerResponse(n);const a=new $a({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Fw(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];pt(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?cW(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),l=new Uf;l.updateFromIdToken(r);const c=new $a({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new QT(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=new Map;function ul(t){Cl(t instanceof Function,"Expected a class definition");let e=P4.get(t);return e?(Cl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,P4.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uW{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}uW.type="NONE";const I4=uW;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(t,e,n){return`firebase:${t}:${e}:${n}`}class zf{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=$0(this.userKey,s.apiKey,a),this.fullPersistenceKey=$0("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await $w(this.auth,{idToken:e}).catch(()=>{});return n?$a._fromGetAccountInfoResponse(this.auth,n,e):null}return $a._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new zf(ul(I4),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=s[0]||ul(I4);const o=$0(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const d=await u._get(o);if(d){let h;if(typeof d=="string"){const f=await $w(e,{idToken:d}).catch(()=>{});if(!f)break;h=await $a._fromGetAccountInfoResponse(e,f,d)}else h=$a._fromJSON(e,d);u!==a&&(l=h),a=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new zf(a,e,r):(a=c[0],l&&await a._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==a)try{await u._remove(o)}catch{}})),new zf(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mW(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dW(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gW(e))return"Blackberry";if(yW(e))return"Webos";if(hW(e))return"Safari";if((e.includes("chrome/")||fW(e))&&!e.includes("edge/"))return"Chrome";if(pW(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function dW(t=Cs()){return/firefox\//i.test(t)}function hW(t=Cs()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fW(t=Cs()){return/crios\//i.test(t)}function mW(t=Cs()){return/iemobile/i.test(t)}function pW(t=Cs()){return/android/i.test(t)}function gW(t=Cs()){return/blackberry/i.test(t)}function yW(t=Cs()){return/webos/i.test(t)}function cR(t=Cs()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function fme(t=Cs()){var e;return cR(t)&&!!((e=window.navigator)!=null&&e.standalone)}function mme(){return She()&&document.documentMode===10}function vW(t=Cs()){return cR(t)||pW(t)||yW(t)||gW(t)||/windows phone/i.test(t)||mW(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xW(t,e=[]){let n;switch(t){case"Browser":n=k4(Cs());break;case"Worker":n=`${k4(Cs())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ch}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pme{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,l)=>{try{const c=e(a);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gme(t,e={}){return $i(t,"GET","/v2/passwordPolicy",eo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yme=6;class vme{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??yme,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xme{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new R4(this),this.idTokenSubscription=new R4(this),this.beforeStateQueue=new pme(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sW,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ul(n)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await zf.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $w(this,{idToken:e}),r=await $a._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(ii(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(a=this.redirectUser)==null?void 0:a._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return pt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fw(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Xfe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ii(this.app))return Promise.reject(pl(this));const n=e?nn(e):null;return n&&pt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&pt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ii(this.app)?Promise.reject(pl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ii(this.app)?Promise.reject(pl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ul(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gme(this),n=new vme(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ex("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await hme(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ul(e)||this._popupRedirectResolver;pt(n,this,"argument-error"),this.redirectPersistenceManager=await zf.create(this,[ul(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(pt(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xW(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(ii(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Gfe(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ul(t){return nn(t)}class R4{constructor(e){this.auth=e,this.observer=null,this.addObserver=Rhe(n=>this.observer=n)}get next(){return pt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lN={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bme(t){lN=t}function bW(t){return lN.loadJS(t)}function wme(){return lN.recaptchaEnterpriseScript}function _me(){return lN.gapiScript}function jme(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Nme{constructor(){this.enterprise=new Sme}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Sme{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Eme="recaptcha-enterprise",wW="NO_RECAPTCHA";class Ame{constructor(e){this.type=Eme,this.auth=Ul(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{sme(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new rme(c);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function s(a,o,l){const c=window.grecaptcha;T4(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(u=>{o(u)}).catch(()=>{o(wW)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Nme().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(l=>{if(!n&&T4(window.grecaptcha))s(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=wme();c.length!==0&&(c+=l),bW(c).then(()=>{s(l,a,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function O4(t,e,n,r=!1,s=!1){const a=new Ame(t);let o;if(s)o=wW;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Vw(t,e,n,r,s){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await O4(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await O4(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tme(t,e){const n=Tx(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(sh(a,e??{}))return s;ca(s,"already-initialized")}return n.initialize({options:e})}function Cme(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ul);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Pme(t,e,n){const r=Ul(t);pt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),a=_W(e),{host:o,port:l}=Ime(e),c=l===null?"":`:${l}`,u={url:`${a}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){pt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),pt(sh(u,r.config.emulator)&&sh(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Ho(o)?(aN(`${a}//${o}${c}`),oN("Auth",!0)):kme()}function _W(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Ime(t){const e=_W(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:M4(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:M4(o)}}}function M4(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function kme(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return cl("not implemented")}_getIdTokenResponse(e){return cl("not implemented")}_linkToIdToken(e,n){return cl("not implemented")}_getReauthenticationResolver(e){return cl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jW(t,e){return $i(t,"POST","/v1/accounts:resetPassword",eo(t,e))}async function Rme(t,e){return $i(t,"POST","/v1/accounts:update",e)}async function Ome(t,e){return $i(t,"POST","/v1/accounts:signUp",e)}async function Mme(t,e){return $i(t,"POST","/v1/accounts:update",eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dme(t,e){return Ix(t,"POST","/v1/accounts:signInWithPassword",eo(t,e))}async function NW(t,e){return $i(t,"POST","/v1/accounts:sendOobCode",eo(t,e))}async function Lme(t,e){return NW(t,e)}async function $me(t,e){return NW(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fme(t,e){return Ix(t,"POST","/v1/accounts:signInWithEmailLink",eo(t,e))}async function Vme(t,e){return Ix(t,"POST","/v1/accounts:signInWithEmailLink",eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv extends uR{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new lv(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new lv(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vw(e,n,"signInWithPassword",Dme);case"emailLink":return Fme(e,{email:this._email,oobCode:this._password});default:ca(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vw(e,r,"signUpPassword",Ome);case"emailLink":return Vme(e,{idToken:n,email:this._email,oobCode:this._password});default:ca(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qf(t,e){return Ix(t,"POST","/v1/accounts:signInWithIdp",eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bme="http://localhost";class ah extends uR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ah(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ca("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...a}=n;if(!r||!s)return null;const o=new ah(r,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return qf(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,qf(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qf(e,n)}buildRequest(){const e={requestUri:Bme,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ax(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ume(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zme(t){const e=Yg(Qg(t)).link,n=e?Yg(Qg(e)).deep_link_id:null,r=Yg(Qg(t)).deep_link_id;return(r?Yg(Qg(r)).link:null)||r||n||e||t}class dR{constructor(e){const n=Yg(Qg(e)),r=n.apiKey??null,s=n.oobCode??null,a=Ume(n.mode??null);pt(r&&s&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=zme(e);try{return new dR(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(){this.providerId=Ip.PROVIDER_ID}static credential(e,n){return lv._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=dR.parseLink(n);return pt(r,"argument-error"),lv._fromEmailAndCode(e,r.code,r.tenantId)}}Ip.PROVIDER_ID="password";Ip.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ip.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SW{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx extends SW{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc extends kx{constructor(){super("facebook.com")}static credential(e){return ah._fromParams({providerId:bc.PROVIDER_ID,signInMethod:bc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bc.credentialFromTaggedObject(e)}static credentialFromError(e){return bc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bc.credential(e.oauthAccessToken)}catch{return null}}}bc.FACEBOOK_SIGN_IN_METHOD="facebook.com";bc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends kx{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ah._fromParams({providerId:wc.PROVIDER_ID,signInMethod:wc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return wc.credentialFromTaggedObject(e)}static credentialFromError(e){return wc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return wc.credential(n,r)}catch{return null}}}wc.GOOGLE_SIGN_IN_METHOD="google.com";wc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends kx{constructor(){super("github.com")}static credential(e){return ah._fromParams({providerId:_c.PROVIDER_ID,signInMethod:_c.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _c.credentialFromTaggedObject(e)}static credentialFromError(e){return _c.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _c.credential(e.oauthAccessToken)}catch{return null}}}_c.GITHUB_SIGN_IN_METHOD="github.com";_c.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends kx{constructor(){super("twitter.com")}static credential(e,n){return ah._fromParams({providerId:jc.PROVIDER_ID,signInMethod:jc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return jc.credentialFromTaggedObject(e)}static credentialFromError(e){return jc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return jc.credential(n,r)}catch{return null}}}jc.TWITTER_SIGN_IN_METHOD="twitter.com";jc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qme(t,e){return Ix(t,"POST","/v1/accounts:signUp",eo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await $a._fromIdTokenResponse(e,r,s),o=D4(r);return new oh({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=D4(r);return new oh({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function D4(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw extends Ja{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Bw.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Bw(e,n,r,s)}}function EW(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Bw._fromErrorAndOperation(t,a,e,r):a})}async function Wme(t,e,n=!1){const r=await ih(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return oh._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hme(t,e,n=!1){const{auth:r}=t;if(ii(r.app))return Promise.reject(pl(r));const s="reauthenticate";try{const a=await ih(t,EW(r,s,e,t),n);pt(a.idToken,r,"internal-error");const o=lR(a.idToken);pt(o,r,"internal-error");const{sub:l}=o;return pt(t.uid===l,r,"user-mismatch"),oh._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ca(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AW(t,e,n=!1){if(ii(t.app))return Promise.reject(pl(t));const r="signIn",s=await EW(t,r,e),a=await oh._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function Kme(t,e){return AW(Ul(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?fR._fromServerResponse(e,n):"totpInfo"in n?mR._fromServerResponse(e,n):ca(e,"internal-error")}}class fR extends hR{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new fR(n)}}class mR extends hR{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new mR(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pR(t){const e=Ul(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Gme(t,e,n){const r=Ul(t);await Vw(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",$me)}async function Yme(t,e,n){await jW(nn(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&pR(t),r})}async function Qme(t,e){await Mme(nn(t),{oobCode:e})}async function Xme(t,e){const n=nn(t),r=await jW(n,{oobCode:e}),s=r.requestType;switch(pt(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":pt(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":pt(r.mfaInfo,n,"internal-error");default:pt(r.email,n,"internal-error")}let a=null;return r.mfaInfo&&(a=hR._fromServerResponse(Ul(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:a},operation:s}}async function Zme(t,e){const{data:n}=await Xme(nn(t),e);return n.email}async function Jme(t,e,n){if(ii(t.app))return Promise.reject(pl(t));const r=Ul(t),o=await Vw(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qme).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&pR(t),c}),l=await oh._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function epe(t,e,n){return ii(t.app)?Promise.reject(pl(t)):Kme(nn(t),Ip.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&pR(t),r})}async function L4(t,e){const n=nn(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:a}=await Lme(n.auth,s);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tpe(t,e){return $i(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function npe(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=nn(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await ih(r,tpe(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function rpe(t,e){return spe(nn(t),null,e)}async function spe(t,e,n){const{auth:r}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(a.password=n);const o=await ih(t,Rme(r,a));await t._updateTokensIfNecessary(o,!0)}function ipe(t,e,n,r){return nn(t).onIdTokenChanged(e,n,r)}function ape(t,e,n){return nn(t).beforeAuthStateChanged(e,n)}function ope(t,e,n,r){return nn(t).onAuthStateChanged(e,n,r)}function lpe(t){return nn(t).signOut()}const Uw="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TW{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Uw,"1"),this.storage.removeItem(Uw),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cpe=1e3,upe=10;class CW extends TW{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vW(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);mme()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,upe):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},cpe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}CW.type="LOCAL";const dpe=CW;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PW extends TW{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}PW.type="SESSION";const IW=PW;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hpe(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new cN(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,a)),c=await hpe(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cN.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fpe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((l,c)=>{const u=gR("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(f.data.response);break;default:clearTimeout(d),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function So(){return window}function mpe(t){So().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kW(){return typeof So().WorkerGlobalScope<"u"&&typeof So().importScripts=="function"}async function ppe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gpe(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function ype(){return kW()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RW="firebaseLocalStorageDb",vpe=1,zw="firebaseLocalStorage",OW="fbase_key";class Rx{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function uN(t,e){return t.transaction([zw],e?"readwrite":"readonly").objectStore(zw)}function xpe(){const t=indexedDB.deleteDatabase(RW);return new Rx(t).toPromise()}function XT(){const t=indexedDB.open(RW,vpe);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(zw,{keyPath:OW})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(zw)?e(r):(r.close(),await xpe(),e(await XT()))})})}async function $4(t,e,n){const r=uN(t,!0).put({[OW]:e,value:n});return new Rx(r).toPromise()}async function bpe(t,e){const n=uN(t,!1).get(e),r=await new Rx(n).toPromise();return r===void 0?null:r.value}function F4(t,e){const n=uN(t,!0).delete(e);return new Rx(n).toPromise()}const wpe=800,_pe=3;class MW{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await XT(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>_pe)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kW()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cN._getInstance(ype()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await ppe(),!this.activeServiceWorker)return;this.sender=new fpe(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gpe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await XT();return await $4(e,Uw,"1"),await F4(e,Uw),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>$4(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>bpe(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>F4(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=uN(s,!1).getAll();return new Rx(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wpe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}MW.type="LOCAL";const jpe=MW;new Px(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Npe(t,e){return e?ul(e):(pt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR extends uR{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qf(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qf(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qf(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Spe(t){return AW(t.auth,new yR(t),t.bypassAuthState)}function Epe(t){const{auth:e,user:n}=t;return pt(n,e,"internal-error"),Hme(n,new yR(t),t.bypassAuthState)}async function Ape(t){const{auth:e,user:n}=t;return pt(n,e,"internal-error"),Wme(n,new yR(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DW{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Spe;case"linkViaPopup":case"linkViaRedirect":return Ape;case"reauthViaPopup":case"reauthViaRedirect":return Epe;default:ca(this.auth,"internal-error")}}resolve(e){Cl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Cl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tpe=new Px(2e3,1e4);class jf extends DW{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,jf.currentPopupAction&&jf.currentPopupAction.cancel(),jf.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pt(e,this.auth,"internal-error"),e}async onExecution(){Cl(this.filter.length===1,"Popup operations only handle one event");const e=gR();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(No(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(No(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,jf.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(No(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Tpe.get())};e()}}jf.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cpe="pendingRedirect",F0=new Map;class Ppe extends DW{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=F0.get(this.auth._key());if(!e){try{const r=await Ipe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}F0.set(this.auth._key(),e)}return this.bypassAuthState||F0.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ipe(t,e){const n=Ope(e),r=Rpe(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function kpe(t,e){F0.set(t._key(),e)}function Rpe(t){return ul(t._redirectPersistence)}function Ope(t){return $0(Cpe,t.config.apiKey,t.name)}async function Mpe(t,e,n=!1){if(ii(t.app))return Promise.reject(pl(t));const r=Ul(t),s=Npe(r,e),o=await new Ppe(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dpe=10*60*1e3;class Lpe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$pe(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!LW(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(No(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Dpe&&this.cachedEventUids.clear(),this.cachedEventUids.has(V4(e))}saveEventToCache(e){this.cachedEventUids.add(V4(e)),this.lastProcessedEventTime=Date.now()}}function V4(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function LW({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function $pe(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LW(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fpe(t,e={}){return $i(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vpe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bpe=/^https?/;async function Upe(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Fpe(t);for(const n of e)try{if(zpe(n))return}catch{}ca(t,"unauthorized-domain")}function zpe(t){const e=YT(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Bpe.test(n))return!1;if(Vpe.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qpe=new Px(3e4,6e4);function B4(){const t=So().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Wpe(t){return new Promise((e,n)=>{var s,a,o;function r(){B4(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{B4(),n(No(t,"network-request-failed"))},timeout:qpe.get()})}if((a=(s=So().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((o=So().gapi)!=null&&o.load)r();else{const l=jme("iframefcb");return So()[l]=()=>{gapi.load?r():n(No(t,"network-request-failed"))},bW(`${_me()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw V0=null,e})}let V0=null;function Hpe(t){return V0=V0||Wpe(t),V0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kpe=new Px(5e3,15e3),Gpe="__/auth/iframe",Ype="emulator/auth/iframe",Qpe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xpe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Zpe(t){const e=t.config;pt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?oR(e,Ype):`https://${t.config.authDomain}/${Gpe}`,r={apiKey:e.apiKey,appName:t.name,v:Ch},s=Xpe.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Ax(r).slice(1)}`}async function Jpe(t){const e=await Hpe(t),n=So().gapi;return pt(n,t,"internal-error"),e.open({where:document.body,url:Zpe(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qpe,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const o=No(t,"network-request-failed"),l=So().setTimeout(()=>{a(o)},Kpe.get());function c(){So().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ege={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tge=500,nge=600,rge="_blank",sge="http://localhost";class U4{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ige(t,e,n,r=tge,s=nge){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...ege,width:r.toString(),height:s.toString(),top:a,left:o},u=Cs().toLowerCase();n&&(l=fW(u)?rge:n),dW(u)&&(e=e||sge,c.scrollbars="yes");const d=Object.entries(c).reduce((f,[m,v])=>`${f}${m}=${v},`,"");if(fme(u)&&l!=="_self")return age(e||"",l),new U4(null);const h=window.open(e||"",l,d);pt(h,t,"popup-blocked");try{h.focus()}catch{}return new U4(h)}function age(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oge="__/auth/handler",lge="emulator/auth/handler",cge=encodeURIComponent("fac");async function z4(t,e,n,r,s,a){pt(t.config.authDomain,t,"auth-domain-config-required"),pt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ch,eventId:s};if(e instanceof SW){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",khe(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof kx){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${cge}=${encodeURIComponent(c)}`:"";return`${uge(t)}?${Ax(l).slice(1)}${u}`}function uge({config:t}){return t.emulator?oR(t,lge):`https://${t.authDomain}/${oge}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="webStorageSupport";class dge{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=IW,this._completeRedirectFn=Mpe,this._overrideRedirectResult=kpe}async _openPopup(e,n,r,s){var o;Cl((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await z4(e,n,r,YT(),s);return ige(e,a,gR())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await z4(e,n,r,YT(),s);return mpe(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(Cl(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Jpe(e),r=new Lpe(e);return n.register("authEvent",s=>(pt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(rE,{type:rE},s=>{var o;const a=(o=s==null?void 0:s[0])==null?void 0:o[rE];a!==void 0&&n(!!a),ca(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Upe(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return vW()||hW()||cR()}}const hge=dge;var q4="@firebase/auth",W4="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fge{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){pt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mge(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pge(t){du(new Al("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;pt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xW(t)},u=new xme(r,s,a,c);return Cme(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),du(new Al("auth-internal",e=>{const n=Ul(e.getProvider("auth").getImmediate());return(r=>new fge(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ta(q4,W4,mge(t)),ta(q4,W4,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gge=5*60,yge=Qq("authIdTokenMaxAge")||gge;let H4=null;const vge=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>yge)return;const s=n==null?void 0:n.token;H4!==s&&(H4=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function xge(t=Cx()){const e=Tx(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Tme(t,{popupRedirectResolver:hge,persistence:[jpe,dpe,IW]}),r=Qq("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=vge(a.toString());ape(n,o,()=>o(n.currentUser)),ipe(n,l=>o(l))}}const s=Gq("auth");return s&&Pme(n,`http://${s}`),n}function bge(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}bme({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=No("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",bge().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pge("Browser");var K4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nu,$W;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,p){function A(){}A.prototype=p.prototype,_.F=p.prototype,_.prototype=new A,_.prototype.constructor=_,_.D=function(P,C,I){for(var R=Array(arguments.length-2),L=2;L<arguments.length;L++)R[L-2]=arguments[L];return p.prototype[C].apply(P,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(_,p,A){A||(A=0);const P=Array(16);if(typeof p=="string")for(var C=0;C<16;++C)P[C]=p.charCodeAt(A++)|p.charCodeAt(A++)<<8|p.charCodeAt(A++)<<16|p.charCodeAt(A++)<<24;else for(C=0;C<16;++C)P[C]=p[A++]|p[A++]<<8|p[A++]<<16|p[A++]<<24;p=_.g[0],A=_.g[1],C=_.g[2];let I=_.g[3],R;R=p+(I^A&(C^I))+P[0]+3614090360&4294967295,p=A+(R<<7&4294967295|R>>>25),R=I+(C^p&(A^C))+P[1]+3905402710&4294967295,I=p+(R<<12&4294967295|R>>>20),R=C+(A^I&(p^A))+P[2]+606105819&4294967295,C=I+(R<<17&4294967295|R>>>15),R=A+(p^C&(I^p))+P[3]+3250441966&4294967295,A=C+(R<<22&4294967295|R>>>10),R=p+(I^A&(C^I))+P[4]+4118548399&4294967295,p=A+(R<<7&4294967295|R>>>25),R=I+(C^p&(A^C))+P[5]+1200080426&4294967295,I=p+(R<<12&4294967295|R>>>20),R=C+(A^I&(p^A))+P[6]+2821735955&4294967295,C=I+(R<<17&4294967295|R>>>15),R=A+(p^C&(I^p))+P[7]+4249261313&4294967295,A=C+(R<<22&4294967295|R>>>10),R=p+(I^A&(C^I))+P[8]+1770035416&4294967295,p=A+(R<<7&4294967295|R>>>25),R=I+(C^p&(A^C))+P[9]+2336552879&4294967295,I=p+(R<<12&4294967295|R>>>20),R=C+(A^I&(p^A))+P[10]+4294925233&4294967295,C=I+(R<<17&4294967295|R>>>15),R=A+(p^C&(I^p))+P[11]+2304563134&4294967295,A=C+(R<<22&4294967295|R>>>10),R=p+(I^A&(C^I))+P[12]+1804603682&4294967295,p=A+(R<<7&4294967295|R>>>25),R=I+(C^p&(A^C))+P[13]+4254626195&4294967295,I=p+(R<<12&4294967295|R>>>20),R=C+(A^I&(p^A))+P[14]+2792965006&4294967295,C=I+(R<<17&4294967295|R>>>15),R=A+(p^C&(I^p))+P[15]+1236535329&4294967295,A=C+(R<<22&4294967295|R>>>10),R=p+(C^I&(A^C))+P[1]+4129170786&4294967295,p=A+(R<<5&4294967295|R>>>27),R=I+(A^C&(p^A))+P[6]+3225465664&4294967295,I=p+(R<<9&4294967295|R>>>23),R=C+(p^A&(I^p))+P[11]+643717713&4294967295,C=I+(R<<14&4294967295|R>>>18),R=A+(I^p&(C^I))+P[0]+3921069994&4294967295,A=C+(R<<20&4294967295|R>>>12),R=p+(C^I&(A^C))+P[5]+3593408605&4294967295,p=A+(R<<5&4294967295|R>>>27),R=I+(A^C&(p^A))+P[10]+38016083&4294967295,I=p+(R<<9&4294967295|R>>>23),R=C+(p^A&(I^p))+P[15]+3634488961&4294967295,C=I+(R<<14&4294967295|R>>>18),R=A+(I^p&(C^I))+P[4]+3889429448&4294967295,A=C+(R<<20&4294967295|R>>>12),R=p+(C^I&(A^C))+P[9]+568446438&4294967295,p=A+(R<<5&4294967295|R>>>27),R=I+(A^C&(p^A))+P[14]+3275163606&4294967295,I=p+(R<<9&4294967295|R>>>23),R=C+(p^A&(I^p))+P[3]+4107603335&4294967295,C=I+(R<<14&4294967295|R>>>18),R=A+(I^p&(C^I))+P[8]+1163531501&4294967295,A=C+(R<<20&4294967295|R>>>12),R=p+(C^I&(A^C))+P[13]+2850285829&4294967295,p=A+(R<<5&4294967295|R>>>27),R=I+(A^C&(p^A))+P[2]+4243563512&4294967295,I=p+(R<<9&4294967295|R>>>23),R=C+(p^A&(I^p))+P[7]+1735328473&4294967295,C=I+(R<<14&4294967295|R>>>18),R=A+(I^p&(C^I))+P[12]+2368359562&4294967295,A=C+(R<<20&4294967295|R>>>12),R=p+(A^C^I)+P[5]+4294588738&4294967295,p=A+(R<<4&4294967295|R>>>28),R=I+(p^A^C)+P[8]+2272392833&4294967295,I=p+(R<<11&4294967295|R>>>21),R=C+(I^p^A)+P[11]+1839030562&4294967295,C=I+(R<<16&4294967295|R>>>16),R=A+(C^I^p)+P[14]+4259657740&4294967295,A=C+(R<<23&4294967295|R>>>9),R=p+(A^C^I)+P[1]+2763975236&4294967295,p=A+(R<<4&4294967295|R>>>28),R=I+(p^A^C)+P[4]+1272893353&4294967295,I=p+(R<<11&4294967295|R>>>21),R=C+(I^p^A)+P[7]+4139469664&4294967295,C=I+(R<<16&4294967295|R>>>16),R=A+(C^I^p)+P[10]+3200236656&4294967295,A=C+(R<<23&4294967295|R>>>9),R=p+(A^C^I)+P[13]+681279174&4294967295,p=A+(R<<4&4294967295|R>>>28),R=I+(p^A^C)+P[0]+3936430074&4294967295,I=p+(R<<11&4294967295|R>>>21),R=C+(I^p^A)+P[3]+3572445317&4294967295,C=I+(R<<16&4294967295|R>>>16),R=A+(C^I^p)+P[6]+76029189&4294967295,A=C+(R<<23&4294967295|R>>>9),R=p+(A^C^I)+P[9]+3654602809&4294967295,p=A+(R<<4&4294967295|R>>>28),R=I+(p^A^C)+P[12]+3873151461&4294967295,I=p+(R<<11&4294967295|R>>>21),R=C+(I^p^A)+P[15]+530742520&4294967295,C=I+(R<<16&4294967295|R>>>16),R=A+(C^I^p)+P[2]+3299628645&4294967295,A=C+(R<<23&4294967295|R>>>9),R=p+(C^(A|~I))+P[0]+4096336452&4294967295,p=A+(R<<6&4294967295|R>>>26),R=I+(A^(p|~C))+P[7]+1126891415&4294967295,I=p+(R<<10&4294967295|R>>>22),R=C+(p^(I|~A))+P[14]+2878612391&4294967295,C=I+(R<<15&4294967295|R>>>17),R=A+(I^(C|~p))+P[5]+4237533241&4294967295,A=C+(R<<21&4294967295|R>>>11),R=p+(C^(A|~I))+P[12]+1700485571&4294967295,p=A+(R<<6&4294967295|R>>>26),R=I+(A^(p|~C))+P[3]+2399980690&4294967295,I=p+(R<<10&4294967295|R>>>22),R=C+(p^(I|~A))+P[10]+4293915773&4294967295,C=I+(R<<15&4294967295|R>>>17),R=A+(I^(C|~p))+P[1]+2240044497&4294967295,A=C+(R<<21&4294967295|R>>>11),R=p+(C^(A|~I))+P[8]+1873313359&4294967295,p=A+(R<<6&4294967295|R>>>26),R=I+(A^(p|~C))+P[15]+4264355552&4294967295,I=p+(R<<10&4294967295|R>>>22),R=C+(p^(I|~A))+P[6]+2734768916&4294967295,C=I+(R<<15&4294967295|R>>>17),R=A+(I^(C|~p))+P[13]+1309151649&4294967295,A=C+(R<<21&4294967295|R>>>11),R=p+(C^(A|~I))+P[4]+4149444226&4294967295,p=A+(R<<6&4294967295|R>>>26),R=I+(A^(p|~C))+P[11]+3174756917&4294967295,I=p+(R<<10&4294967295|R>>>22),R=C+(p^(I|~A))+P[2]+718787259&4294967295,C=I+(R<<15&4294967295|R>>>17),R=A+(I^(C|~p))+P[9]+3951481745&4294967295,_.g[0]=_.g[0]+p&4294967295,_.g[1]=_.g[1]+(C+(R<<21&4294967295|R>>>11))&4294967295,_.g[2]=_.g[2]+C&4294967295,_.g[3]=_.g[3]+I&4294967295}r.prototype.v=function(_,p){p===void 0&&(p=_.length);const A=p-this.blockSize,P=this.C;let C=this.h,I=0;for(;I<p;){if(C==0)for(;I<=A;)s(this,_,I),I+=this.blockSize;if(typeof _=="string"){for(;I<p;)if(P[C++]=_.charCodeAt(I++),C==this.blockSize){s(this,P),C=0;break}}else for(;I<p;)if(P[C++]=_[I++],C==this.blockSize){s(this,P),C=0;break}}this.h=C,this.o+=p},r.prototype.A=function(){var _=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);_[0]=128;for(var p=1;p<_.length-8;++p)_[p]=0;p=this.o*8;for(var A=_.length-8;A<_.length;++A)_[A]=p&255,p/=256;for(this.v(_),_=Array(16),p=0,A=0;A<4;++A)for(let P=0;P<32;P+=8)_[p++]=this.g[A]>>>P&255;return _};function a(_,p){var A=l;return Object.prototype.hasOwnProperty.call(A,_)?A[_]:A[_]=p(_)}function o(_,p){this.h=p;const A=[];let P=!0;for(let C=_.length-1;C>=0;C--){const I=_[C]|0;P&&I==p||(A[C]=I,P=!1)}this.g=A}var l={};function c(_){return-128<=_&&_<128?a(_,function(p){return new o([p|0],p<0?-1:0)}):new o([_|0],_<0?-1:0)}function u(_){if(isNaN(_)||!isFinite(_))return h;if(_<0)return y(u(-_));const p=[];let A=1;for(let P=0;_>=A;P++)p[P]=_/A|0,A*=4294967296;return new o(p,0)}function d(_,p){if(_.length==0)throw Error("number format error: empty string");if(p=p||10,p<2||36<p)throw Error("radix out of range: "+p);if(_.charAt(0)=="-")return y(d(_.substring(1),p));if(_.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=u(Math.pow(p,8));let P=h;for(let I=0;I<_.length;I+=8){var C=Math.min(8,_.length-I);const R=parseInt(_.substring(I,I+C),p);C<8?(C=u(Math.pow(p,C)),P=P.j(C).add(u(R))):(P=P.j(A),P=P.add(u(R)))}return P}var h=c(0),f=c(1),m=c(16777216);t=o.prototype,t.m=function(){if(g(this))return-y(this).m();let _=0,p=1;for(let A=0;A<this.g.length;A++){const P=this.i(A);_+=(P>=0?P:4294967296+P)*p,p*=4294967296}return _},t.toString=function(_){if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(v(this))return"0";if(g(this))return"-"+y(this).toString(_);const p=u(Math.pow(_,6));var A=this;let P="";for(;;){const C=T(A,p).g;A=w(A,C.j(p));let I=((A.g.length>0?A.g[0]:A.h)>>>0).toString(_);if(A=C,v(A))return I+P;for(;I.length<6;)I="0"+I;P=I+P}},t.i=function(_){return _<0?0:_<this.g.length?this.g[_]:this.h};function v(_){if(_.h!=0)return!1;for(let p=0;p<_.g.length;p++)if(_.g[p]!=0)return!1;return!0}function g(_){return _.h==-1}t.l=function(_){return _=w(this,_),g(_)?-1:v(_)?0:1};function y(_){const p=_.g.length,A=[];for(let P=0;P<p;P++)A[P]=~_.g[P];return new o(A,~_.h).add(f)}t.abs=function(){return g(this)?y(this):this},t.add=function(_){const p=Math.max(this.g.length,_.g.length),A=[];let P=0;for(let C=0;C<=p;C++){let I=P+(this.i(C)&65535)+(_.i(C)&65535),R=(I>>>16)+(this.i(C)>>>16)+(_.i(C)>>>16);P=R>>>16,I&=65535,R&=65535,A[C]=R<<16|I}return new o(A,A[A.length-1]&-2147483648?-1:0)};function w(_,p){return _.add(y(p))}t.j=function(_){if(v(this)||v(_))return h;if(g(this))return g(_)?y(this).j(y(_)):y(y(this).j(_));if(g(_))return y(this.j(y(_)));if(this.l(m)<0&&_.l(m)<0)return u(this.m()*_.m());const p=this.g.length+_.g.length,A=[];for(var P=0;P<2*p;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(let C=0;C<_.g.length;C++){const I=this.i(P)>>>16,R=this.i(P)&65535,L=_.i(C)>>>16,z=_.i(C)&65535;A[2*P+2*C]+=R*z,b(A,2*P+2*C),A[2*P+2*C+1]+=I*z,b(A,2*P+2*C+1),A[2*P+2*C+1]+=R*L,b(A,2*P+2*C+1),A[2*P+2*C+2]+=I*L,b(A,2*P+2*C+2)}for(_=0;_<p;_++)A[_]=A[2*_+1]<<16|A[2*_];for(_=p;_<2*p;_++)A[_]=0;return new o(A,0)};function b(_,p){for(;(_[p]&65535)!=_[p];)_[p+1]+=_[p]>>>16,_[p]&=65535,p++}function E(_,p){this.g=_,this.h=p}function T(_,p){if(v(p))throw Error("division by zero");if(v(_))return new E(h,h);if(g(_))return p=T(y(_),p),new E(y(p.g),y(p.h));if(g(p))return p=T(_,y(p)),new E(y(p.g),p.h);if(_.g.length>30){if(g(_)||g(p))throw Error("slowDivide_ only works with positive integers.");for(var A=f,P=p;P.l(_)<=0;)A=x(A),P=x(P);var C=S(A,1),I=S(P,1);for(P=S(P,2),A=S(A,2);!v(P);){var R=I.add(P);R.l(_)<=0&&(C=C.add(A),I=R),P=S(P,1),A=S(A,1)}return p=w(_,C.j(p)),new E(C,p)}for(C=h;_.l(p)>=0;){for(A=Math.max(1,Math.floor(_.m()/p.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),I=u(A),R=I.j(p);g(R)||R.l(_)>0;)A-=P,I=u(A),R=I.j(p);v(I)&&(I=f),C=C.add(I),_=w(_,R)}return new E(C,_)}t.B=function(_){return T(this,_).h},t.and=function(_){const p=Math.max(this.g.length,_.g.length),A=[];for(let P=0;P<p;P++)A[P]=this.i(P)&_.i(P);return new o(A,this.h&_.h)},t.or=function(_){const p=Math.max(this.g.length,_.g.length),A=[];for(let P=0;P<p;P++)A[P]=this.i(P)|_.i(P);return new o(A,this.h|_.h)},t.xor=function(_){const p=Math.max(this.g.length,_.g.length),A=[];for(let P=0;P<p;P++)A[P]=this.i(P)^_.i(P);return new o(A,this.h^_.h)};function x(_){const p=_.g.length+1,A=[];for(let P=0;P<p;P++)A[P]=_.i(P)<<1|_.i(P-1)>>>31;return new o(A,_.h)}function S(_,p){const A=p>>5;p%=32;const P=_.g.length-A,C=[];for(let I=0;I<P;I++)C[I]=p>0?_.i(I+A)>>>p|_.i(I+A+1)<<32-p:_.i(I+A);return new o(C,_.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,$W=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,nu=o}).apply(typeof K4<"u"?K4:typeof self<"u"?self:typeof window<"u"?window:{});var Wb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var FW,Xg,VW,B0,ZT,BW,UW,zW;(function(){var t,e=Object.defineProperty;function n(j){j=[typeof globalThis=="object"&&globalThis,j,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wb=="object"&&Wb];for(var k=0;k<j.length;++k){var O=j[k];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var r=n(this);function s(j,k){if(k)e:{var O=r;j=j.split(".");for(var $=0;$<j.length-1;$++){var ie=j[$];if(!(ie in O))break e;O=O[ie]}j=j[j.length-1],$=O[j],k=k($),k!=$&&k!=null&&e(O,j,{configurable:!0,writable:!0,value:k})}}s("Symbol.dispose",function(j){return j||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(j){return j||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(j){return j||function(k){var O=[],$;for($ in k)Object.prototype.hasOwnProperty.call(k,$)&&O.push([$,k[$]]);return O}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(j){var k=typeof j;return k=="object"&&j!=null||k=="function"}function c(j,k,O){return j.call.apply(j.bind,arguments)}function u(j,k,O){return u=c,u.apply(null,arguments)}function d(j,k){var O=Array.prototype.slice.call(arguments,1);return function(){var $=O.slice();return $.push.apply($,arguments),j.apply(this,$)}}function h(j,k){function O(){}O.prototype=k.prototype,j.Z=k.prototype,j.prototype=new O,j.prototype.constructor=j,j.Ob=function($,ie,ce){for(var Le=Array(arguments.length-2),Bt=2;Bt<arguments.length;Bt++)Le[Bt-2]=arguments[Bt];return k.prototype[ie].apply($,Le)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?j=>j&&AsyncContext.Snapshot.wrap(j):j=>j;function m(j){const k=j.length;if(k>0){const O=Array(k);for(let $=0;$<k;$++)O[$]=j[$];return O}return[]}function v(j,k){for(let $=1;$<arguments.length;$++){const ie=arguments[$];var O=typeof ie;if(O=O!="object"?O:ie?Array.isArray(ie)?"array":O:"null",O=="array"||O=="object"&&typeof ie.length=="number"){O=j.length||0;const ce=ie.length||0;j.length=O+ce;for(let Le=0;Le<ce;Le++)j[O+Le]=ie[Le]}else j.push(ie)}}class g{constructor(k,O){this.i=k,this.j=O,this.h=0,this.g=null}get(){let k;return this.h>0?(this.h--,k=this.g,this.g=k.next,k.next=null):k=this.i(),k}}function y(j){o.setTimeout(()=>{throw j},0)}function w(){var j=_;let k=null;return j.g&&(k=j.g,j.g=j.g.next,j.g||(j.h=null),k.next=null),k}class b{constructor(){this.h=this.g=null}add(k,O){const $=E.get();$.set(k,O),this.h?this.h.next=$:this.g=$,this.h=$}}var E=new g(()=>new T,j=>j.reset());class T{constructor(){this.next=this.g=this.h=null}set(k,O){this.h=k,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let x,S=!1,_=new b,p=()=>{const j=Promise.resolve(void 0);x=()=>{j.then(A)}};function A(){for(var j;j=w();){try{j.h.call(j.g)}catch(O){y(O)}var k=E;k.j(j),k.h<100&&(k.h++,j.next=k.g,k.g=j)}S=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(j,k){this.type=j,this.g=this.target=k,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var I=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var j=!1,k=Object.defineProperty({},"passive",{get:function(){j=!0}});try{const O=()=>{};o.addEventListener("test",O,k),o.removeEventListener("test",O,k)}catch{}return j}();function R(j){return/^[\s\xa0]*$/.test(j)}function L(j,k){C.call(this,j?j.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,j&&this.init(j,k)}h(L,C),L.prototype.init=function(j,k){const O=this.type=j.type,$=j.changedTouches&&j.changedTouches.length?j.changedTouches[0]:null;this.target=j.target||j.srcElement,this.g=k,k=j.relatedTarget,k||(O=="mouseover"?k=j.fromElement:O=="mouseout"&&(k=j.toElement)),this.relatedTarget=k,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0),this.button=j.button,this.key=j.key||"",this.ctrlKey=j.ctrlKey,this.altKey=j.altKey,this.shiftKey=j.shiftKey,this.metaKey=j.metaKey,this.pointerId=j.pointerId||0,this.pointerType=j.pointerType,this.state=j.state,this.i=j,j.defaultPrevented&&L.Z.h.call(this)},L.prototype.h=function(){L.Z.h.call(this);const j=this.i;j.preventDefault?j.preventDefault():j.returnValue=!1};var z="closure_listenable_"+(Math.random()*1e6|0),W=0;function M(j,k,O,$,ie){this.listener=j,this.proxy=null,this.src=k,this.type=O,this.capture=!!$,this.ha=ie,this.key=++W,this.da=this.fa=!1}function V(j){j.da=!0,j.listener=null,j.proxy=null,j.src=null,j.ha=null}function F(j,k,O){for(const $ in j)k.call(O,j[$],$,j)}function Y(j,k){for(const O in j)k.call(void 0,j[O],O,j)}function ae(j){const k={};for(const O in j)k[O]=j[O];return k}const oe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function me(j,k){let O,$;for(let ie=1;ie<arguments.length;ie++){$=arguments[ie];for(O in $)j[O]=$[O];for(let ce=0;ce<oe.length;ce++)O=oe[ce],Object.prototype.hasOwnProperty.call($,O)&&(j[O]=$[O])}}function ke(j){this.src=j,this.g={},this.h=0}ke.prototype.add=function(j,k,O,$,ie){const ce=j.toString();j=this.g[ce],j||(j=this.g[ce]=[],this.h++);const Le=jt(j,k,$,ie);return Le>-1?(k=j[Le],O||(k.fa=!1)):(k=new M(k,this.src,ce,!!$,ie),k.fa=O,j.push(k)),k};function ut(j,k){const O=k.type;if(O in j.g){var $=j.g[O],ie=Array.prototype.indexOf.call($,k,void 0),ce;(ce=ie>=0)&&Array.prototype.splice.call($,ie,1),ce&&(V(k),j.g[O].length==0&&(delete j.g[O],j.h--))}}function jt(j,k,O,$){for(let ie=0;ie<j.length;++ie){const ce=j[ie];if(!ce.da&&ce.listener==k&&ce.capture==!!O&&ce.ha==$)return ie}return-1}var Ne="closure_lm_"+(Math.random()*1e6|0),ht={};function we(j,k,O,$,ie){if(Array.isArray(k)){for(let ce=0;ce<k.length;ce++)we(j,k[ce],O,$,ie);return null}return O=zr(O),j&&j[z]?j.J(k,O,l($)?!!$.capture:!!$,ie):Me(j,k,O,!1,$,ie)}function Me(j,k,O,$,ie,ce){if(!k)throw Error("Invalid event type");const Le=l(ie)?!!ie.capture:!!ie;let Bt=Jt(j);if(Bt||(j[Ne]=Bt=new ke(j)),O=Bt.add(k,O,$,Le,ce),O.proxy)return O;if($=Fe(),O.proxy=$,$.src=j,$.listener=O,j.addEventListener)I||(ie=Le),ie===void 0&&(ie=!1),j.addEventListener(k.toString(),$,ie);else if(j.attachEvent)j.attachEvent(gt(k.toString()),$);else if(j.addListener&&j.removeListener)j.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return O}function Fe(){function j(O){return k.call(j.src,j.listener,O)}const k=on;return j}function ue(j,k,O,$,ie){if(Array.isArray(k))for(var ce=0;ce<k.length;ce++)ue(j,k[ce],O,$,ie);else $=l($)?!!$.capture:!!$,O=zr(O),j&&j[z]?(j=j.i,ce=String(k).toString(),ce in j.g&&(k=j.g[ce],O=jt(k,O,$,ie),O>-1&&(V(k[O]),Array.prototype.splice.call(k,O,1),k.length==0&&(delete j.g[ce],j.h--)))):j&&(j=Jt(j))&&(k=j.g[k.toString()],j=-1,k&&(j=jt(k,O,$,ie)),(O=j>-1?k[j]:null)&&Ct(O))}function Ct(j){if(typeof j!="number"&&j&&!j.da){var k=j.src;if(k&&k[z])ut(k.i,j);else{var O=j.type,$=j.proxy;k.removeEventListener?k.removeEventListener(O,$,j.capture):k.detachEvent?k.detachEvent(gt(O),$):k.addListener&&k.removeListener&&k.removeListener($),(O=Jt(k))?(ut(O,j),O.h==0&&(O.src=null,k[Ne]=null)):V(j)}}}function gt(j){return j in ht?ht[j]:ht[j]="on"+j}function on(j,k){if(j.da)j=!0;else{k=new L(k,this);const O=j.listener,$=j.ha||j.src;j.fa&&Ct(j),j=O.call($,k)}return j}function Jt(j){return j=j[Ne],j instanceof ke?j:null}var _n="__closure_events_fn_"+(Math.random()*1e9>>>0);function zr(j){return typeof j=="function"?j:(j[_n]||(j[_n]=function(k){return j.handleEvent(k)}),j[_n])}function rn(){P.call(this),this.i=new ke(this),this.M=this,this.G=null}h(rn,P),rn.prototype[z]=!0,rn.prototype.removeEventListener=function(j,k,O,$){ue(this,j,k,O,$)};function q(j,k){var O,$=j.G;if($)for(O=[];$;$=$.G)O.push($);if(j=j.M,$=k.type||k,typeof k=="string")k=new C(k,j);else if(k instanceof C)k.target=k.target||j;else{var ie=k;k=new C($,j),me(k,ie)}ie=!0;let ce,Le;if(O)for(Le=O.length-1;Le>=0;Le--)ce=k.g=O[Le],ie=se(ce,$,!0,k)&&ie;if(ce=k.g=j,ie=se(ce,$,!0,k)&&ie,ie=se(ce,$,!1,k)&&ie,O)for(Le=0;Le<O.length;Le++)ce=k.g=O[Le],ie=se(ce,$,!1,k)&&ie}rn.prototype.N=function(){if(rn.Z.N.call(this),this.i){var j=this.i;for(const k in j.g){const O=j.g[k];for(let $=0;$<O.length;$++)V(O[$]);delete j.g[k],j.h--}}this.G=null},rn.prototype.J=function(j,k,O,$){return this.i.add(String(j),k,!1,O,$)},rn.prototype.K=function(j,k,O,$){return this.i.add(String(j),k,!0,O,$)};function se(j,k,O,$){if(k=j.i.g[String(k)],!k)return!0;k=k.concat();let ie=!0;for(let ce=0;ce<k.length;++ce){const Le=k[ce];if(Le&&!Le.da&&Le.capture==O){const Bt=Le.listener,Ir=Le.ha||Le.src;Le.fa&&ut(j.i,Le),ie=Bt.call(Ir,$)!==!1&&ie}}return ie&&!$.defaultPrevented}function de(j,k){if(typeof j!="function")if(j&&typeof j.handleEvent=="function")j=u(j.handleEvent,j);else throw Error("Invalid listener argument");return Number(k)>2147483647?-1:o.setTimeout(j,k||0)}function Re(j){j.g=de(()=>{j.g=null,j.i&&(j.i=!1,Re(j))},j.l);const k=j.h;j.h=null,j.m.apply(null,k)}class Oe extends P{constructor(k,O){super(),this.m=k,this.l=O,this.h=null,this.i=!1,this.g=null}j(k){this.h=arguments,this.g?this.i=!0:Re(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Se(j){P.call(this),this.h=j,this.g={}}h(Se,P);var ze=[];function zt(j){F(j.g,function(k,O){this.g.hasOwnProperty(O)&&Ct(k)},j),j.g={}}Se.prototype.N=function(){Se.Z.N.call(this),zt(this)},Se.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ln=o.JSON.stringify,fs=o.JSON.parse,ya=class{stringify(j){return o.JSON.stringify(j,void 0)}parse(j){return o.JSON.parse(j,void 0)}};function pi(){}function Qu(){}var gi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ks(){C.call(this,"d")}h(Ks,C);function Gl(){C.call(this,"c")}h(Gl,C);var es={},Bh=null;function Qo(){return Bh=Bh||new rn}es.Ia="serverreachability";function rg(j){C.call(this,es.Ia,j)}h(rg,C);function Yl(j){const k=Qo();q(k,new rg(k))}es.STAT_EVENT="statevent";function cb(j,k){C.call(this,es.STAT_EVENT,j),this.stat=k}h(cb,C);function Pr(j){const k=Qo();q(k,new cb(k,j))}es.Ja="timingevent";function va(j,k){C.call(this,es.Ja,j),this.size=k}h(va,C);function Xu(j,k){if(typeof j!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){j()},k)}function bt(){this.g=!0}bt.prototype.ua=function(){this.g=!1};function hn(j,k,O,$,ie,ce){j.info(function(){if(j.g)if(ce){var Le="",Bt=ce.split("&");for(let Sn=0;Sn<Bt.length;Sn++){var Ir=Bt[Sn].split("=");if(Ir.length>1){const Wr=Ir[0];Ir=Ir[1];const io=Wr.split("_");Le=io.length>=2&&io[1]=="type"?Le+(Wr+"="+Ir+"&"):Le+(Wr+"=redacted&")}}}else Le=null;else Le=ce;return"XMLHTTP REQ ("+$+") [attempt "+ie+"]: "+k+`
`+O+`
`+Le})}function An(j,k,O,$,ie,ce,Le){j.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+ie+"]: "+k+`
`+O+`
`+ce+" "+Le})}function qr(j,k,O,$){j.info(function(){return"XMLHTTP TEXT ("+k+"): "+ro(j,O)+($?" "+$:"")})}function yi(j,k){j.info(function(){return"TIMEOUT: "+k})}bt.prototype.info=function(){};function ro(j,k){if(!j.g)return k;if(!k)return null;try{const ce=JSON.parse(k);if(ce){for(j=0;j<ce.length;j++)if(Array.isArray(ce[j])){var O=ce[j];if(!(O.length<2)){var $=O[1];if(Array.isArray($)&&!($.length<1)){var ie=$[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(let Le=1;Le<$.length;Le++)$[Le]=""}}}}return ln(ce)}catch{return k}}var Fi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Gs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xa;function nS(){}h(nS,pi),nS.prototype.g=function(){return new XMLHttpRequest},xa=new nS;function sg(j){return encodeURIComponent(String(j))}function cre(j){var k=1;j=j.split(":");const O=[];for(;k>0&&j.length;)O.push(j.shift()),k--;return j.length&&O.push(j.join(":")),O}function Ql(j,k,O,$){this.j=j,this.i=k,this.l=O,this.S=$||1,this.V=new Se(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new PM}function PM(){this.i=null,this.g="",this.h=!1}var IM={},rS={};function sS(j,k,O){j.M=1,j.A=db(so(k)),j.u=O,j.R=!0,kM(j,null)}function kM(j,k){j.F=Date.now(),ub(j),j.B=so(j.A);var O=j.B,$=j.S;Array.isArray($)||($=[String($)]),WM(O.i,"t",$),j.C=0,O=j.j.L,j.h=new PM,j.g=cD(j.j,O?k:null,!j.u),j.P>0&&(j.O=new Oe(u(j.Y,j,j.g),j.P)),k=j.V,O=j.g,$=j.ba;var ie="readystatechange";Array.isArray(ie)||(ie&&(ze[0]=ie.toString()),ie=ze);for(let ce=0;ce<ie.length;ce++){const Le=we(O,ie[ce],$||k.handleEvent,!1,k.h||k);if(!Le)break;k.g[Le.key]=Le}k=j.J?ae(j.J):{},j.u?(j.v||(j.v="POST"),k["Content-Type"]="application/x-www-form-urlencoded",j.g.ea(j.B,j.v,j.u,k)):(j.v="GET",j.g.ea(j.B,j.v,null,k)),Yl(),hn(j.i,j.v,j.B,j.l,j.S,j.u)}Ql.prototype.ba=function(j){j=j.target;const k=this.O;k&&Jl(j)==3?k.j():this.Y(j)},Ql.prototype.Y=function(j){try{if(j==this.g)e:{const Bt=Jl(this.g),Ir=this.g.ya(),Sn=this.g.ca();if(!(Bt<3)&&(Bt!=3||this.g&&(this.h.h||this.g.la()||ZM(this.g)))){this.K||Bt!=4||Ir==7||(Ir==8||Sn<=0?Yl(3):Yl(2)),iS(this);var k=this.g.ca();this.X=k;var O=ure(this);if(this.o=k==200,An(this.i,this.v,this.B,this.l,this.S,Bt,k),this.o){if(this.U&&!this.L){t:{if(this.g){var $,ie=this.g;if(($=ie.g?ie.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R($)){var ce=$;break t}}ce=null}if(j=ce)qr(this.i,this.l,j,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,aS(this,j);else{this.o=!1,this.m=3,Pr(12),Zu(this),ig(this);break e}}if(this.R){j=!0;let Wr;for(;!this.K&&this.C<O.length;)if(Wr=dre(this,O),Wr==rS){Bt==4&&(this.m=4,Pr(14),j=!1),qr(this.i,this.l,null,"[Incomplete Response]");break}else if(Wr==IM){this.m=4,Pr(15),qr(this.i,this.l,O,"[Invalid Chunk]"),j=!1;break}else qr(this.i,this.l,Wr,null),aS(this,Wr);if(RM(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Bt!=4||O.length!=0||this.h.h||(this.m=1,Pr(16),j=!1),this.o=this.o&&j,!j)qr(this.i,this.l,O,"[Invalid Chunked Response]"),Zu(this),ig(this);else if(O.length>0&&!this.W){this.W=!0;var Le=this.j;Le.g==this&&Le.aa&&!Le.P&&(Le.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),mS(Le),Le.P=!0,Pr(11))}}else qr(this.i,this.l,O,null),aS(this,O);Bt==4&&Zu(this),this.o&&!this.K&&(Bt==4?iD(this.j,this):(this.o=!1,ub(this)))}else Sre(this.g),k==400&&O.indexOf("Unknown SID")>0?(this.m=3,Pr(12)):(this.m=0,Pr(13)),Zu(this),ig(this)}}}catch{}finally{}};function ure(j){if(!RM(j))return j.g.la();const k=ZM(j.g);if(k==="")return"";let O="";const $=k.length,ie=Jl(j.g)==4;if(!j.h.i){if(typeof TextDecoder>"u")return Zu(j),ig(j),"";j.h.i=new o.TextDecoder}for(let ce=0;ce<$;ce++)j.h.h=!0,O+=j.h.i.decode(k[ce],{stream:!(ie&&ce==$-1)});return k.length=0,j.h.g+=O,j.C=0,j.h.g}function RM(j){return j.g?j.v=="GET"&&j.M!=2&&j.j.Aa:!1}function dre(j,k){var O=j.C,$=k.indexOf(`
`,O);return $==-1?rS:(O=Number(k.substring(O,$)),isNaN(O)?IM:($+=1,$+O>k.length?rS:(k=k.slice($,$+O),j.C=$+O,k)))}Ql.prototype.cancel=function(){this.K=!0,Zu(this)};function ub(j){j.T=Date.now()+j.H,OM(j,j.H)}function OM(j,k){if(j.D!=null)throw Error("WatchDog timer not null");j.D=Xu(u(j.aa,j),k)}function iS(j){j.D&&(o.clearTimeout(j.D),j.D=null)}Ql.prototype.aa=function(){this.D=null;const j=Date.now();j-this.T>=0?(yi(this.i,this.B),this.M!=2&&(Yl(),Pr(17)),Zu(this),this.m=2,ig(this)):OM(this,this.T-j)};function ig(j){j.j.I==0||j.K||iD(j.j,j)}function Zu(j){iS(j);var k=j.O;k&&typeof k.dispose=="function"&&k.dispose(),j.O=null,zt(j.V),j.g&&(k=j.g,j.g=null,k.abort(),k.dispose())}function aS(j,k){try{var O=j.j;if(O.I!=0&&(O.g==j||oS(O.h,j))){if(!j.L&&oS(O.h,j)&&O.I==3){try{var $=O.Ba.g.parse(k)}catch{$=null}if(Array.isArray($)&&$.length==3){var ie=$;if(ie[0]==0){e:if(!O.v){if(O.g)if(O.g.F+3e3<j.F)gb(O),mb(O);else break e;fS(O),Pr(18)}}else O.xa=ie[1],0<O.xa-O.K&&ie[2]<37500&&O.F&&O.A==0&&!O.C&&(O.C=Xu(u(O.Va,O),6e3));LM(O.h)<=1&&O.ta&&(O.ta=void 0)}else ed(O,11)}else if((j.L||O.g==j)&&gb(O),!R(k))for(ie=O.Ba.g.parse(k),k=0;k<ie.length;k++){let Sn=ie[k];const Wr=Sn[0];if(!(Wr<=O.K))if(O.K=Wr,Sn=Sn[1],O.I==2)if(Sn[0]=="c"){O.M=Sn[1],O.ba=Sn[2];const io=Sn[3];io!=null&&(O.ka=io,O.j.info("VER="+O.ka));const td=Sn[4];td!=null&&(O.za=td,O.j.info("SVER="+O.za));const ec=Sn[5];ec!=null&&typeof ec=="number"&&ec>0&&($=1.5*ec,O.O=$,O.j.info("backChannelRequestTimeoutMs_="+$)),$=O;const tc=j.g;if(tc){const vb=tc.g?tc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vb){var ce=$.h;ce.g||vb.indexOf("spdy")==-1&&vb.indexOf("quic")==-1&&vb.indexOf("h2")==-1||(ce.j=ce.l,ce.g=new Set,ce.h&&(lS(ce,ce.h),ce.h=null))}if($.G){const pS=tc.g?tc.g.getResponseHeader("X-HTTP-Session-Id"):null;pS&&($.wa=pS,Dn($.J,$.G,pS))}}O.I=3,O.l&&O.l.ra(),O.aa&&(O.T=Date.now()-j.F,O.j.info("Handshake RTT: "+O.T+"ms")),$=O;var Le=j;if($.na=lD($,$.L?$.ba:null,$.W),Le.L){$M($.h,Le);var Bt=Le,Ir=$.O;Ir&&(Bt.H=Ir),Bt.D&&(iS(Bt),ub(Bt)),$.g=Le}else rD($);O.i.length>0&&pb(O)}else Sn[0]!="stop"&&Sn[0]!="close"||ed(O,7);else O.I==3&&(Sn[0]=="stop"||Sn[0]=="close"?Sn[0]=="stop"?ed(O,7):hS(O):Sn[0]!="noop"&&O.l&&O.l.qa(Sn),O.A=0)}}Yl(4)}catch{}}var hre=class{constructor(j,k){this.g=j,this.map=k}};function MM(j){this.l=j||10,o.PerformanceNavigationTiming?(j=o.performance.getEntriesByType("navigation"),j=j.length>0&&(j[0].nextHopProtocol=="hq"||j[0].nextHopProtocol=="h2")):j=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=j?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function DM(j){return j.h?!0:j.g?j.g.size>=j.j:!1}function LM(j){return j.h?1:j.g?j.g.size:0}function oS(j,k){return j.h?j.h==k:j.g?j.g.has(k):!1}function lS(j,k){j.g?j.g.add(k):j.h=k}function $M(j,k){j.h&&j.h==k?j.h=null:j.g&&j.g.has(k)&&j.g.delete(k)}MM.prototype.cancel=function(){if(this.i=FM(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const j of this.g.values())j.cancel();this.g.clear()}};function FM(j){if(j.h!=null)return j.i.concat(j.h.G);if(j.g!=null&&j.g.size!==0){let k=j.i;for(const O of j.g.values())k=k.concat(O.G);return k}return m(j.i)}var VM=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fre(j,k){if(j){j=j.split("&");for(let O=0;O<j.length;O++){const $=j[O].indexOf("=");let ie,ce=null;$>=0?(ie=j[O].substring(0,$),ce=j[O].substring($+1)):ie=j[O],k(ie,ce?decodeURIComponent(ce.replace(/\+/g," ")):"")}}}function Xl(j){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let k;j instanceof Xl?(this.l=j.l,ag(this,j.j),this.o=j.o,this.g=j.g,og(this,j.u),this.h=j.h,cS(this,HM(j.i)),this.m=j.m):j&&(k=String(j).match(VM))?(this.l=!1,ag(this,k[1]||"",!0),this.o=lg(k[2]||""),this.g=lg(k[3]||"",!0),og(this,k[4]),this.h=lg(k[5]||"",!0),cS(this,k[6]||"",!0),this.m=lg(k[7]||"")):(this.l=!1,this.i=new ug(null,this.l))}Xl.prototype.toString=function(){const j=[];var k=this.j;k&&j.push(cg(k,BM,!0),":");var O=this.g;return(O||k=="file")&&(j.push("//"),(k=this.o)&&j.push(cg(k,BM,!0),"@"),j.push(sg(O).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.u,O!=null&&j.push(":",String(O))),(O=this.h)&&(this.g&&O.charAt(0)!="/"&&j.push("/"),j.push(cg(O,O.charAt(0)=="/"?gre:pre,!0))),(O=this.i.toString())&&j.push("?",O),(O=this.m)&&j.push("#",cg(O,vre)),j.join("")},Xl.prototype.resolve=function(j){const k=so(this);let O=!!j.j;O?ag(k,j.j):O=!!j.o,O?k.o=j.o:O=!!j.g,O?k.g=j.g:O=j.u!=null;var $=j.h;if(O)og(k,j.u);else if(O=!!j.h){if($.charAt(0)!="/")if(this.g&&!this.h)$="/"+$;else{var ie=k.h.lastIndexOf("/");ie!=-1&&($=k.h.slice(0,ie+1)+$)}if(ie=$,ie==".."||ie==".")$="";else if(ie.indexOf("./")!=-1||ie.indexOf("/.")!=-1){$=ie.lastIndexOf("/",0)==0,ie=ie.split("/");const ce=[];for(let Le=0;Le<ie.length;){const Bt=ie[Le++];Bt=="."?$&&Le==ie.length&&ce.push(""):Bt==".."?((ce.length>1||ce.length==1&&ce[0]!="")&&ce.pop(),$&&Le==ie.length&&ce.push("")):(ce.push(Bt),$=!0)}$=ce.join("/")}else $=ie}return O?k.h=$:O=j.i.toString()!=="",O?cS(k,HM(j.i)):O=!!j.m,O&&(k.m=j.m),k};function so(j){return new Xl(j)}function ag(j,k,O){j.j=O?lg(k,!0):k,j.j&&(j.j=j.j.replace(/:$/,""))}function og(j,k){if(k){if(k=Number(k),isNaN(k)||k<0)throw Error("Bad port number "+k);j.u=k}else j.u=null}function cS(j,k,O){k instanceof ug?(j.i=k,xre(j.i,j.l)):(O||(k=cg(k,yre)),j.i=new ug(k,j.l))}function Dn(j,k,O){j.i.set(k,O)}function db(j){return Dn(j,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),j}function lg(j,k){return j?k?decodeURI(j.replace(/%25/g,"%2525")):decodeURIComponent(j):""}function cg(j,k,O){return typeof j=="string"?(j=encodeURI(j).replace(k,mre),O&&(j=j.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j):null}function mre(j){return j=j.charCodeAt(0),"%"+(j>>4&15).toString(16)+(j&15).toString(16)}var BM=/[#\/\?@]/g,pre=/[#\?:]/g,gre=/[#\?]/g,yre=/[#\?@]/g,vre=/#/g;function ug(j,k){this.h=this.g=null,this.i=j||null,this.j=!!k}function Ju(j){j.g||(j.g=new Map,j.h=0,j.i&&fre(j.i,function(k,O){j.add(decodeURIComponent(k.replace(/\+/g," ")),O)}))}t=ug.prototype,t.add=function(j,k){Ju(this),this.i=null,j=Uh(this,j);let O=this.g.get(j);return O||this.g.set(j,O=[]),O.push(k),this.h+=1,this};function UM(j,k){Ju(j),k=Uh(j,k),j.g.has(k)&&(j.i=null,j.h-=j.g.get(k).length,j.g.delete(k))}function zM(j,k){return Ju(j),k=Uh(j,k),j.g.has(k)}t.forEach=function(j,k){Ju(this),this.g.forEach(function(O,$){O.forEach(function(ie){j.call(k,ie,$,this)},this)},this)};function qM(j,k){Ju(j);let O=[];if(typeof k=="string")zM(j,k)&&(O=O.concat(j.g.get(Uh(j,k))));else for(j=Array.from(j.g.values()),k=0;k<j.length;k++)O=O.concat(j[k]);return O}t.set=function(j,k){return Ju(this),this.i=null,j=Uh(this,j),zM(this,j)&&(this.h-=this.g.get(j).length),this.g.set(j,[k]),this.h+=1,this},t.get=function(j,k){return j?(j=qM(this,j),j.length>0?String(j[0]):k):k};function WM(j,k,O){UM(j,k),O.length>0&&(j.i=null,j.g.set(Uh(j,k),m(O)),j.h+=O.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const j=[],k=Array.from(this.g.keys());for(let $=0;$<k.length;$++){var O=k[$];const ie=sg(O);O=qM(this,O);for(let ce=0;ce<O.length;ce++){let Le=ie;O[ce]!==""&&(Le+="="+sg(O[ce])),j.push(Le)}}return this.i=j.join("&")};function HM(j){const k=new ug;return k.i=j.i,j.g&&(k.g=new Map(j.g),k.h=j.h),k}function Uh(j,k){return k=String(k),j.j&&(k=k.toLowerCase()),k}function xre(j,k){k&&!j.j&&(Ju(j),j.i=null,j.g.forEach(function(O,$){const ie=$.toLowerCase();$!=ie&&(UM(this,$),WM(this,ie,O))},j)),j.j=k}function bre(j,k){const O=new bt;if(o.Image){const $=new Image;$.onload=d(Zl,O,"TestLoadImage: loaded",!0,k,$),$.onerror=d(Zl,O,"TestLoadImage: error",!1,k,$),$.onabort=d(Zl,O,"TestLoadImage: abort",!1,k,$),$.ontimeout=d(Zl,O,"TestLoadImage: timeout",!1,k,$),o.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=j}else k(!1)}function wre(j,k){const O=new bt,$=new AbortController,ie=setTimeout(()=>{$.abort(),Zl(O,"TestPingServer: timeout",!1,k)},1e4);fetch(j,{signal:$.signal}).then(ce=>{clearTimeout(ie),ce.ok?Zl(O,"TestPingServer: ok",!0,k):Zl(O,"TestPingServer: server error",!1,k)}).catch(()=>{clearTimeout(ie),Zl(O,"TestPingServer: error",!1,k)})}function Zl(j,k,O,$,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),$(O)}catch{}}function _re(){this.g=new ya}function uS(j){this.i=j.Sb||null,this.h=j.ab||!1}h(uS,pi),uS.prototype.g=function(){return new hb(this.i,this.h)};function hb(j,k){rn.call(this),this.H=j,this.o=k,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(hb,rn),t=hb.prototype,t.open=function(j,k){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=j,this.D=k,this.readyState=1,hg(this)},t.send=function(j){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const k={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};j&&(k.body=j),(this.H||o).fetch(new Request(this.D,k)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,dg(this)),this.readyState=0},t.Pa=function(j){if(this.g&&(this.l=j,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=j.headers,this.readyState=2,hg(this)),this.g&&(this.readyState=3,hg(this),this.g)))if(this.responseType==="arraybuffer")j.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in j){if(this.j=j.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;KM(this)}else j.text().then(this.Oa.bind(this),this.ga.bind(this))};function KM(j){j.j.read().then(j.Ma.bind(j)).catch(j.ga.bind(j))}t.Ma=function(j){if(this.g){if(this.o&&j.value)this.response.push(j.value);else if(!this.o){var k=j.value?j.value:new Uint8Array(0);(k=this.B.decode(k,{stream:!j.done}))&&(this.response=this.responseText+=k)}j.done?dg(this):hg(this),this.readyState==3&&KM(this)}},t.Oa=function(j){this.g&&(this.response=this.responseText=j,dg(this))},t.Na=function(j){this.g&&(this.response=j,dg(this))},t.ga=function(){this.g&&dg(this)};function dg(j){j.readyState=4,j.l=null,j.j=null,j.B=null,hg(j)}t.setRequestHeader=function(j,k){this.A.append(j,k)},t.getResponseHeader=function(j){return this.h&&this.h.get(j.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const j=[],k=this.h.entries();for(var O=k.next();!O.done;)O=O.value,j.push(O[0]+": "+O[1]),O=k.next();return j.join(`\r
`)};function hg(j){j.onreadystatechange&&j.onreadystatechange.call(j)}Object.defineProperty(hb.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(j){this.m=j?"include":"same-origin"}});function GM(j){let k="";return F(j,function(O,$){k+=$,k+=":",k+=O,k+=`\r
`}),k}function dS(j,k,O){e:{for($ in O){var $=!1;break e}$=!0}$||(O=GM(O),typeof j=="string"?O!=null&&sg(O):Dn(j,k,O))}function sr(j){rn.call(this),this.headers=new Map,this.L=j||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(sr,rn);var jre=/^https?$/i,Nre=["POST","PUT"];t=sr.prototype,t.Fa=function(j){this.H=j},t.ea=function(j,k,O,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+j);k=k?k.toUpperCase():"GET",this.D=j,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xa.g(),this.g.onreadystatechange=f(u(this.Ca,this));try{this.B=!0,this.g.open(k,String(j),!0),this.B=!1}catch(ce){YM(this,ce);return}if(j=O||"",O=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var ie in $)O.set(ie,$[ie]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const ce of $.keys())O.set(ce,$.get(ce));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(O.keys()).find(ce=>ce.toLowerCase()=="content-type"),ie=o.FormData&&j instanceof o.FormData,!(Array.prototype.indexOf.call(Nre,k,void 0)>=0)||$||ie||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ce,Le]of O)this.g.setRequestHeader(ce,Le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(j),this.v=!1}catch(ce){YM(this,ce)}};function YM(j,k){j.h=!1,j.g&&(j.j=!0,j.g.abort(),j.j=!1),j.l=k,j.o=5,QM(j),fb(j)}function QM(j){j.A||(j.A=!0,q(j,"complete"),q(j,"error"))}t.abort=function(j){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=j||7,q(this,"complete"),q(this,"abort"),fb(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fb(this,!0)),sr.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?XM(this):this.Xa())},t.Xa=function(){XM(this)};function XM(j){if(j.h&&typeof a<"u"){if(j.v&&Jl(j)==4)setTimeout(j.Ca.bind(j),0);else if(q(j,"readystatechange"),Jl(j)==4){j.h=!1;try{const ce=j.ca();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var k=!0;break e;default:k=!1}var O;if(!(O=k)){var $;if($=ce===0){let Le=String(j.D).match(VM)[1]||null;!Le&&o.self&&o.self.location&&(Le=o.self.location.protocol.slice(0,-1)),$=!jre.test(Le?Le.toLowerCase():"")}O=$}if(O)q(j,"complete"),q(j,"success");else{j.o=6;try{var ie=Jl(j)>2?j.g.statusText:""}catch{ie=""}j.l=ie+" ["+j.ca()+"]",QM(j)}}finally{fb(j)}}}}function fb(j,k){if(j.g){j.m&&(clearTimeout(j.m),j.m=null);const O=j.g;j.g=null,k||q(j,"ready");try{O.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Jl(j){return j.g?j.g.readyState:0}t.ca=function(){try{return Jl(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(j){if(this.g){var k=this.g.responseText;return j&&k.indexOf(j)==0&&(k=k.substring(j.length)),fs(k)}};function ZM(j){try{if(!j.g)return null;if("response"in j.g)return j.g.response;switch(j.F){case"":case"text":return j.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in j.g)return j.g.mozResponseArrayBuffer}return null}catch{return null}}function Sre(j){const k={};j=(j.g&&Jl(j)>=2&&j.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<j.length;$++){if(R(j[$]))continue;var O=cre(j[$]);const ie=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const ce=k[ie]||[];k[ie]=ce,ce.push(O)}Y(k,function($){return $.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fg(j,k,O){return O&&O.internalChannelParams&&O.internalChannelParams[j]||k}function JM(j){this.za=0,this.i=[],this.j=new bt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fg("failFast",!1,j),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fg("baseRetryDelayMs",5e3,j),this.Za=fg("retryDelaySeedMs",1e4,j),this.Ta=fg("forwardChannelMaxRetries",2,j),this.va=fg("forwardChannelRequestTimeoutMs",2e4,j),this.ma=j&&j.xmlHttpFactory||void 0,this.Ua=j&&j.Rb||void 0,this.Aa=j&&j.useFetchStreams||!1,this.O=void 0,this.L=j&&j.supportsCrossDomainXhr||!1,this.M="",this.h=new MM(j&&j.concurrentRequestLimit),this.Ba=new _re,this.S=j&&j.fastHandshake||!1,this.R=j&&j.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=j&&j.Pb||!1,j&&j.ua&&this.j.ua(),j&&j.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&j&&j.detectBufferingProxy||!1,this.ia=void 0,j&&j.longPollingTimeout&&j.longPollingTimeout>0&&(this.ia=j.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=JM.prototype,t.ka=8,t.I=1,t.connect=function(j,k,O,$){Pr(0),this.W=j,this.H=k||{},O&&$!==void 0&&(this.H.OSID=O,this.H.OAID=$),this.F=this.X,this.J=lD(this,null,this.W),pb(this)};function hS(j){if(eD(j),j.I==3){var k=j.V++,O=so(j.J);if(Dn(O,"SID",j.M),Dn(O,"RID",k),Dn(O,"TYPE","terminate"),mg(j,O),k=new Ql(j,j.j,k),k.M=2,k.A=db(so(O)),O=!1,o.navigator&&o.navigator.sendBeacon)try{O=o.navigator.sendBeacon(k.A.toString(),"")}catch{}!O&&o.Image&&(new Image().src=k.A,O=!0),O||(k.g=cD(k.j,null),k.g.ea(k.A)),k.F=Date.now(),ub(k)}oD(j)}function mb(j){j.g&&(mS(j),j.g.cancel(),j.g=null)}function eD(j){mb(j),j.v&&(o.clearTimeout(j.v),j.v=null),gb(j),j.h.cancel(),j.m&&(typeof j.m=="number"&&o.clearTimeout(j.m),j.m=null)}function pb(j){if(!DM(j.h)&&!j.m){j.m=!0;var k=j.Ea;x||p(),S||(x(),S=!0),_.add(k,j),j.D=0}}function Ere(j,k){return LM(j.h)>=j.h.j-(j.m?1:0)?!1:j.m?(j.i=k.G.concat(j.i),!0):j.I==1||j.I==2||j.D>=(j.Sa?0:j.Ta)?!1:(j.m=Xu(u(j.Ea,j,k),aD(j,j.D)),j.D++,!0)}t.Ea=function(j){if(this.m)if(this.m=null,this.I==1){if(!j){this.V=Math.floor(Math.random()*1e5),j=this.V++;const ie=new Ql(this,this.j,j);let ce=this.o;if(this.U&&(ce?(ce=ae(ce),me(ce,this.U)):ce=this.U),this.u!==null||this.R||(ie.J=ce,ce=null),this.S)e:{for(var k=0,O=0;O<this.i.length;O++){t:{var $=this.i[O];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(k+=$,k>4096){k=O;break e}if(k===4096||O===this.i.length-1){k=O+1;break e}}k=1e3}else k=1e3;k=nD(this,ie,k),O=so(this.J),Dn(O,"RID",j),Dn(O,"CVER",22),this.G&&Dn(O,"X-HTTP-Session-Id",this.G),mg(this,O),ce&&(this.R?k="headers="+sg(GM(ce))+"&"+k:this.u&&dS(O,this.u,ce)),lS(this.h,ie),this.Ra&&Dn(O,"TYPE","init"),this.S?(Dn(O,"$req",k),Dn(O,"SID","null"),ie.U=!0,sS(ie,O,null)):sS(ie,O,k),this.I=2}}else this.I==3&&(j?tD(this,j):this.i.length==0||DM(this.h)||tD(this))};function tD(j,k){var O;k?O=k.l:O=j.V++;const $=so(j.J);Dn($,"SID",j.M),Dn($,"RID",O),Dn($,"AID",j.K),mg(j,$),j.u&&j.o&&dS($,j.u,j.o),O=new Ql(j,j.j,O,j.D+1),j.u===null&&(O.J=j.o),k&&(j.i=k.G.concat(j.i)),k=nD(j,O,1e3),O.H=Math.round(j.va*.5)+Math.round(j.va*.5*Math.random()),lS(j.h,O),sS(O,$,k)}function mg(j,k){j.H&&F(j.H,function(O,$){Dn(k,$,O)}),j.l&&F({},function(O,$){Dn(k,$,O)})}function nD(j,k,O){O=Math.min(j.i.length,O);const $=j.l?u(j.l.Ka,j.l,j):null;e:{var ie=j.i;let Bt=-1;for(;;){const Ir=["count="+O];Bt==-1?O>0?(Bt=ie[0].g,Ir.push("ofs="+Bt)):Bt=0:Ir.push("ofs="+Bt);let Sn=!0;for(let Wr=0;Wr<O;Wr++){var ce=ie[Wr].g;const io=ie[Wr].map;if(ce-=Bt,ce<0)Bt=Math.max(0,ie[Wr].g-100),Sn=!1;else try{ce="req"+ce+"_"||"";try{var Le=io instanceof Map?io:Object.entries(io);for(const[td,ec]of Le){let tc=ec;l(ec)&&(tc=ln(ec)),Ir.push(ce+td+"="+encodeURIComponent(tc))}}catch(td){throw Ir.push(ce+"type="+encodeURIComponent("_badmap")),td}}catch{$&&$(io)}}if(Sn){Le=Ir.join("&");break e}}Le=void 0}return j=j.i.splice(0,O),k.G=j,Le}function rD(j){if(!j.g&&!j.v){j.Y=1;var k=j.Da;x||p(),S||(x(),S=!0),_.add(k,j),j.A=0}}function fS(j){return j.g||j.v||j.A>=3?!1:(j.Y++,j.v=Xu(u(j.Da,j),aD(j,j.A)),j.A++,!0)}t.Da=function(){if(this.v=null,sD(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var j=4*this.T;this.j.info("BP detection timer enabled: "+j),this.B=Xu(u(this.Wa,this),j)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Pr(10),mb(this),sD(this))};function mS(j){j.B!=null&&(o.clearTimeout(j.B),j.B=null)}function sD(j){j.g=new Ql(j,j.j,"rpc",j.Y),j.u===null&&(j.g.J=j.o),j.g.P=0;var k=so(j.na);Dn(k,"RID","rpc"),Dn(k,"SID",j.M),Dn(k,"AID",j.K),Dn(k,"CI",j.F?"0":"1"),!j.F&&j.ia&&Dn(k,"TO",j.ia),Dn(k,"TYPE","xmlhttp"),mg(j,k),j.u&&j.o&&dS(k,j.u,j.o),j.O&&(j.g.H=j.O);var O=j.g;j=j.ba,O.M=1,O.A=db(so(k)),O.u=null,O.R=!0,kM(O,j)}t.Va=function(){this.C!=null&&(this.C=null,mb(this),fS(this),Pr(19))};function gb(j){j.C!=null&&(o.clearTimeout(j.C),j.C=null)}function iD(j,k){var O=null;if(j.g==k){gb(j),mS(j),j.g=null;var $=2}else if(oS(j.h,k))O=k.G,$M(j.h,k),$=1;else return;if(j.I!=0){if(k.o)if($==1){O=k.u?k.u.length:0,k=Date.now()-k.F;var ie=j.D;$=Qo(),q($,new va($,O)),pb(j)}else rD(j);else if(ie=k.m,ie==3||ie==0&&k.X>0||!($==1&&Ere(j,k)||$==2&&fS(j)))switch(O&&O.length>0&&(k=j.h,k.i=k.i.concat(O)),ie){case 1:ed(j,5);break;case 4:ed(j,10);break;case 3:ed(j,6);break;default:ed(j,2)}}}function aD(j,k){let O=j.Qa+Math.floor(Math.random()*j.Za);return j.isActive()||(O*=2),O*k}function ed(j,k){if(j.j.info("Error code "+k),k==2){var O=u(j.bb,j),$=j.Ua;const ie=!$;$=new Xl($||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ag($,"https"),db($),ie?bre($.toString(),O):wre($.toString(),O)}else Pr(2);j.I=0,j.l&&j.l.pa(k),oD(j),eD(j)}t.bb=function(j){j?(this.j.info("Successfully pinged google.com"),Pr(2)):(this.j.info("Failed to ping google.com"),Pr(1))};function oD(j){if(j.I=0,j.ja=[],j.l){const k=FM(j.h);(k.length!=0||j.i.length!=0)&&(v(j.ja,k),v(j.ja,j.i),j.h.i.length=0,m(j.i),j.i.length=0),j.l.oa()}}function lD(j,k,O){var $=O instanceof Xl?so(O):new Xl(O);if($.g!="")k&&($.g=k+"."+$.g),og($,$.u);else{var ie=o.location;$=ie.protocol,k=k?k+"."+ie.hostname:ie.hostname,ie=+ie.port;const ce=new Xl(null);$&&ag(ce,$),k&&(ce.g=k),ie&&og(ce,ie),O&&(ce.h=O),$=ce}return O=j.G,k=j.wa,O&&k&&Dn($,O,k),Dn($,"VER",j.ka),mg(j,$),$}function cD(j,k,O){if(k&&!j.L)throw Error("Can't create secondary domain capable XhrIo object.");return k=j.Aa&&!j.ma?new sr(new uS({ab:O})):new sr(j.ma),k.Fa(j.L),k}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function uD(){}t=uD.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function yb(){}yb.prototype.g=function(j,k){return new vi(j,k)};function vi(j,k){rn.call(this),this.g=new JM(k),this.l=j,this.h=k&&k.messageUrlParams||null,j=k&&k.messageHeaders||null,k&&k.clientProtocolHeaderRequired&&(j?j["X-Client-Protocol"]="webchannel":j={"X-Client-Protocol":"webchannel"}),this.g.o=j,j=k&&k.initMessageHeaders||null,k&&k.messageContentType&&(j?j["X-WebChannel-Content-Type"]=k.messageContentType:j={"X-WebChannel-Content-Type":k.messageContentType}),k&&k.sa&&(j?j["X-WebChannel-Client-Profile"]=k.sa:j={"X-WebChannel-Client-Profile":k.sa}),this.g.U=j,(j=k&&k.Qb)&&!R(j)&&(this.g.u=j),this.A=k&&k.supportsCrossDomainXhr||!1,this.v=k&&k.sendRawJson||!1,(k=k&&k.httpSessionIdParam)&&!R(k)&&(this.g.G=k,j=this.h,j!==null&&k in j&&(j=this.h,k in j&&delete j[k])),this.j=new zh(this)}h(vi,rn),vi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vi.prototype.close=function(){hS(this.g)},vi.prototype.o=function(j){var k=this.g;if(typeof j=="string"){var O={};O.__data__=j,j=O}else this.v&&(O={},O.__data__=ln(j),j=O);k.i.push(new hre(k.Ya++,j)),k.I==3&&pb(k)},vi.prototype.N=function(){this.g.l=null,delete this.j,hS(this.g),delete this.g,vi.Z.N.call(this)};function dD(j){Ks.call(this),j.__headers__&&(this.headers=j.__headers__,this.statusCode=j.__status__,delete j.__headers__,delete j.__status__);var k=j.__sm__;if(k){e:{for(const O in k){j=O;break e}j=void 0}(this.i=j)&&(j=this.i,k=k!==null&&j in k?k[j]:void 0),this.data=k}else this.data=j}h(dD,Ks);function hD(){Gl.call(this),this.status=1}h(hD,Gl);function zh(j){this.g=j}h(zh,uD),zh.prototype.ra=function(){q(this.g,"a")},zh.prototype.qa=function(j){q(this.g,new dD(j))},zh.prototype.pa=function(j){q(this.g,new hD)},zh.prototype.oa=function(){q(this.g,"b")},yb.prototype.createWebChannel=yb.prototype.g,vi.prototype.send=vi.prototype.o,vi.prototype.open=vi.prototype.m,vi.prototype.close=vi.prototype.close,zW=function(){return new yb},UW=function(){return Qo()},BW=es,ZT={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fi.NO_ERROR=0,Fi.TIMEOUT=8,Fi.HTTP_ERROR=6,B0=Fi,Gs.COMPLETE="complete",VW=Gs,Qu.EventType=gi,gi.OPEN="a",gi.CLOSE="b",gi.ERROR="c",gi.MESSAGE="d",rn.prototype.listen=rn.prototype.J,Xg=Qu,sr.prototype.listenOnce=sr.prototype.K,sr.prototype.getLastError=sr.prototype.Ha,sr.prototype.getLastErrorCode=sr.prototype.ya,sr.prototype.getStatus=sr.prototype.ca,sr.prototype.getResponseJson=sr.prototype.La,sr.prototype.getResponseText=sr.prototype.la,sr.prototype.send=sr.prototype.ea,sr.prototype.setWithCredentials=sr.prototype.Fa,FW=sr}).apply(typeof Wb<"u"?Wb:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xs.UNAUTHENTICATED=new xs(null),xs.GOOGLE_CREDENTIALS=new xs("google-credentials-uid"),xs.FIRST_PARTY=new xs("first-party-uid"),xs.MOCK_USER=new xs("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kp="12.9.0";function wge(t){kp=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=new sR("@firebase/firestore");function sf(){return lh.logLevel}function Ge(t,...e){if(lh.logLevel<=Yt.DEBUG){const n=e.map(vR);lh.debug(`Firestore (${kp}): ${t}`,...n)}}function Pl(t,...e){if(lh.logLevel<=Yt.ERROR){const n=e.map(vR);lh.error(`Firestore (${kp}): ${t}`,...n)}}function ch(t,...e){if(lh.logLevel<=Yt.WARN){const n=e.map(vR);lh.warn(`Firestore (${kp}): ${t}`,...n)}}function vR(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,qW(t,r,n)}function qW(t,e,n){let r=`FIRESTORE (${kp}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Pl(r),new Error(r)}function pn(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||qW(e,s,r)}function Lt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Be extends Ja{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WW{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _ge{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(xs.UNAUTHENTICATED))}shutdown(){}}class jge{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Nge{constructor(e){this.t=e,this.currentUser=xs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pn(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let a=new gl;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new gl,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new gl)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pn(typeof r.accessToken=="string",31837,{l:r}),new WW(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pn(e===null||typeof e=="string",2055,{h:e}),new xs(e)}}class Sge{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=xs.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Ege{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Sge(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(xs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class G4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Age{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ii(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){pn(this.o===void 0,3512);const r=a=>{a.error!=null&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,Ge("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new G4(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new G4(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tge(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Tge(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function Qt(t,e){return t<e?-1:t>e?1:0}function JT(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),a=e.charAt(r);if(s!==a)return sE(s)===sE(a)?Qt(s,a):sE(s)?1:-1}return Qt(t.length,e.length)}const Cge=55296,Pge=57343;function sE(t){const e=t.charCodeAt(0);return e>=Cge&&e<=Pge}function Tm(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="__name__";class co{constructor(e,n,r){n===void 0?n=0:n>e.length&&_t(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&_t(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return co.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof co?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=co.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return Qt(e.length,n.length)}static compareSegments(e,n){const r=co.isNumericId(e),s=co.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?co.extractNumericId(e).compare(co.extractNumericId(n)):JT(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return nu.fromString(e.substring(4,e.length-2))}}class In extends co{construct(e,n,r){return new In(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Be(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new In(n)}static emptyPath(){return new In([])}}const Ige=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class as extends co{construct(e,n,r){return new as(e,n,r)}static isValidIdentifier(e){return Ige.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),as.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===eC}static keyField(){return new as([eC])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new Be(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Be(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Be(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(a(),s++)}if(a(),o)throw new Be(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new as(n)}static emptyPath(){return new as([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.path=e}static fromPath(e){return new dt(In.fromString(e))}static fromName(e){return new dt(In.fromString(e).popFirst(5))}static empty(){return new dt(In.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&In.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return In.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new dt(new In(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HW(t,e,n){if(!n)throw new Be(fe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kge(t,e,n,r){if(e===!0&&r===!0)throw new Be(fe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Y4(t){if(!dt.isDocumentKey(t))throw new Be(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Q4(t){if(dt.isDocumentKey(t))throw new Be(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function KW(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function dN(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_t(12329,{type:typeof t})}function ua(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Be(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dN(t);throw new Be(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Rge(t,e){if(e<=0)throw new Be(fe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ox(t,e){if(!KW(t))throw new Be(fe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Be(fe.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4=-62135596800,Z4=1e6;class Bn{static now(){return Bn.fromMillis(Date.now())}static fromDate(e){return Bn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Z4);return new Bn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Be(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Be(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<X4)throw new Be(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Be(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Z4}_compareTo(e){return this.seconds===e.seconds?Qt(this.nanoseconds,e.nanoseconds):Qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Bn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ox(e,Bn._jsonSchema))return new Bn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-X4;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Bn._jsonSchemaVersion="firestore/timestamp/1.0",Bn._jsonSchema={type:Tr("string",Bn._jsonSchemaVersion),seconds:Tr("number"),nanoseconds:Tr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{static fromTimestamp(e){return new It(e)}static min(){return new It(new Bn(0,0))}static max(){return new It(new Bn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=-1;function Oge(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=It.fromTimestamp(r===1e9?new Bn(n+1,0):new Bn(n,r));return new hu(s,dt.empty(),e)}function Mge(t){return new hu(t.readTime,t.key,cv)}class hu{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new hu(It.min(),dt.empty(),cv)}static max(){return new hu(It.max(),dt.empty(),cv)}}function Dge(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=dt.comparator(t.documentKey,e.documentKey),n!==0?n:Qt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lge="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $ge{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rp(t){if(t.code!==fe.FAILED_PRECONDITION||t.message!==Lge)throw t;Ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_t(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new xe((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof xe?n:xe.resolve(n)}catch(n){return xe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):xe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):xe.reject(n)}static resolve(e){return new xe((n,r)=>{n(e)})}static reject(e){return new xe((n,r)=>{r(e)})}static waitFor(e){return new xe((n,r)=>{let s=0,a=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++a,o&&a===s&&n()},c=>r(c))}),o=!0,a===s&&n()})}static or(e){let n=xe.resolve(!1);for(const r of e)n=n.next(s=>s?xe.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new xe((r,s)=>{const a=e.length,o=new Array(a);let l=0;for(let c=0;c<a;c++){const u=c;n(e[u]).next(d=>{o[u]=d,++l,l===a&&r(o)},d=>s(d))}})}static doWhile(e,n){return new xe((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function Fge(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Op(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}hN.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=-1;function fN(t){return t==null}function qw(t){return t===0&&1/t==-1/0}function Vge(t){return typeof t=="number"&&Number.isInteger(t)&&!qw(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GW="";function Bge(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=J4(e)),e=Uge(t.get(n),e);return J4(e)}function Uge(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case GW:n+="";break;default:n+=a}}return n}function J4(t){return t+GW+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e$(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ou(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function YW(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,n){this.comparator=e,this.root=n||ss.EMPTY}insert(e,n){return new nr(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ss.BLACK,null,null))}remove(e){return new nr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ss.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hb(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hb(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hb(this.root,e,this.comparator,!0)}}class Hb{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ss{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??ss.RED,this.left=s??ss.EMPTY,this.right=a??ss.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new ss(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ss.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ss.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ss.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ss.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _t(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _t(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _t(27949);return e+(this.isRed()?0:1)}}ss.EMPTY=null,ss.RED=!0,ss.BLACK=!1;ss.EMPTY=new class{constructor(){this.size=0}get key(){throw _t(57766)}get value(){throw _t(16141)}get color(){throw _t(16727)}get left(){throw _t(29726)}get right(){throw _t(36894)}copy(e,n,r,s,a){return this}insert(e,n,r){return new ss(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.comparator=e,this.data=new nr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new t$(this.data.getIterator())}getIteratorFrom(e){return new t$(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Br)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Br(this.comparator);return n.data=e,n}}class t${constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this.fields=e,e.sort(as.comparator)}static empty(){return new Ei([])}unionWith(e){let n=new Br(as.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ei(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Tm(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QW extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new QW("Invalid base64 string: "+a):a}}(e);return new us(n)}static fromUint8Array(e){const n=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new us(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}us.EMPTY_BYTE_STRING=new us("");const zge=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fu(t){if(pn(!!t,39018),typeof t=="string"){let e=0;const n=zge.exec(t);if(pn(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gr(t.seconds),nanos:gr(t.nanos)}}function gr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function mu(t){return typeof t=="string"?us.fromBase64String(t):us.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XW="server_timestamp",ZW="__type__",JW="__previous_value__",eH="__local_write_time__";function wR(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ZW])==null?void 0:r.stringValue)===XW}function mN(t){const e=t.mapValue.fields[JW];return wR(e)?mN(e):e}function uv(t){const e=fu(t.mapValue.fields[eH].timestampValue);return new Bn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qge{constructor(e,n,r,s,a,o,l,c,u,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d,this.apiKey=h}}const Ww="(default)";class dv{constructor(e,n){this.projectId=e,this.database=n||Ww}static empty(){return new dv("","")}get isDefaultDatabase(){return this.database===Ww}isEqual(e){return e instanceof dv&&e.projectId===this.projectId&&e.database===this.database}}function Wge(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Be(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dv(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tH="__type__",nH="__max__",Kb={mapValue:{fields:{__type__:{stringValue:nH}}}},rH="__vector__",Hw="value";function pu(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wR(t)?4:Kge(t)?9007199254740991:Hge(t)?10:11:_t(28295,{value:t})}function Lo(t,e){if(t===e)return!0;const n=pu(t);if(n!==pu(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return uv(t).isEqual(uv(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=fu(s.timestampValue),l=fu(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return mu(s.bytesValue).isEqual(mu(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return gr(s.geoPointValue.latitude)===gr(a.geoPointValue.latitude)&&gr(s.geoPointValue.longitude)===gr(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return gr(s.integerValue)===gr(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=gr(s.doubleValue),l=gr(a.doubleValue);return o===l?qw(o)===qw(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Tm(t.arrayValue.values||[],e.arrayValue.values||[],Lo);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},l=a.mapValue.fields||{};if(e$(o)!==e$(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Lo(o[c],l[c])))return!1;return!0}(t,e);default:return _t(52216,{left:t})}}function hv(t,e){return(t.values||[]).find(n=>Lo(n,e))!==void 0}function Cm(t,e){if(t===e)return 0;const n=pu(t),r=pu(e);if(n!==r)return Qt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qt(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=gr(a.integerValue||a.doubleValue),c=gr(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return n$(t.timestampValue,e.timestampValue);case 4:return n$(uv(t),uv(e));case 5:return JT(t.stringValue,e.stringValue);case 6:return function(a,o){const l=mu(a),c=mu(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=Qt(l[u],c[u]);if(d!==0)return d}return Qt(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=Qt(gr(a.latitude),gr(o.latitude));return l!==0?l:Qt(gr(a.longitude),gr(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return r$(t.arrayValue,e.arrayValue);case 10:return function(a,o){var f,m,v,g;const l=a.fields||{},c=o.fields||{},u=(f=l[Hw])==null?void 0:f.arrayValue,d=(m=c[Hw])==null?void 0:m.arrayValue,h=Qt(((v=u==null?void 0:u.values)==null?void 0:v.length)||0,((g=d==null?void 0:d.values)==null?void 0:g.length)||0);return h!==0?h:r$(u,d)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===Kb.mapValue&&o===Kb.mapValue)return 0;if(a===Kb.mapValue)return 1;if(o===Kb.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){const f=JT(c[h],d[h]);if(f!==0)return f;const m=Cm(l[c[h]],u[d[h]]);if(m!==0)return m}return Qt(c.length,d.length)}(t.mapValue,e.mapValue);default:throw _t(23264,{he:n})}}function n$(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Qt(t,e);const n=fu(t),r=fu(e),s=Qt(n.seconds,r.seconds);return s!==0?s:Qt(n.nanos,r.nanos)}function r$(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=Cm(n[s],r[s]);if(a)return a}return Qt(n.length,r.length)}function Pm(t){return tC(t)}function tC(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=fu(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return mu(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return dt.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=tC(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const o of r)a?a=!1:s+=",",s+=`${o}:${tC(n.fields[o])}`;return s+"}"}(t.mapValue):_t(61005,{value:t})}function U0(t){switch(pu(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mN(t);return e?16+U0(e):16;case 5:return 2*t.stringValue.length;case 6:return mu(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+U0(a),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ou(r.fields,(a,o)=>{s+=a.length+U0(o)}),s}(t.mapValue);default:throw _t(13486,{value:t})}}function s$(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function nC(t){return!!t&&"integerValue"in t}function _R(t){return!!t&&"arrayValue"in t}function i$(t){return!!t&&"nullValue"in t}function a$(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function z0(t){return!!t&&"mapValue"in t}function Hge(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[tH])==null?void 0:r.stringValue)===rH}function vy(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ou(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=vy(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vy(t.arrayValue.values[n]);return e}return{...t}}function Kge(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===nH}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.value=e}static empty(){return new ai({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!z0(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vy(n)}setAll(e){let n=as.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=vy(o):s.push(l.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());z0(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Lo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];z0(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ou(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new ai(vy(this.value))}}function sH(t){const e=[];return Ou(t.fields,(n,r)=>{const s=new as([n]);if(z0(r)){const a=sH(r.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new Ei(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n,r,s,a,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new js(e,0,It.min(),It.min(),It.min(),ai.empty(),0)}static newFoundDocument(e,n,r,s){return new js(e,1,n,It.min(),r,s,0)}static newNoDocument(e,n){return new js(e,2,n,It.min(),It.min(),ai.empty(),0)}static newUnknownDocument(e,n){return new js(e,3,n,It.min(),It.min(),ai.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(It.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ai.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ai.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=It.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof js&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new js(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,n){this.position=e,this.inclusive=n}}function o$(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?r=dt.comparator(dt.fromName(o.referenceValue),n.key):r=Cm(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function l$(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Lo(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,n="asc"){this.field=e,this.dir=n}}function Gge(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iH{}class Ar extends iH{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Qge(e,n,r):n==="array-contains"?new Jge(e,r):n==="in"?new eye(e,r):n==="not-in"?new tye(e,r):n==="array-contains-any"?new nye(e,r):new Ar(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Xge(e,r):new Zge(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Cm(n,this.value)):n!==null&&pu(this.value)===pu(n)&&this.matchesComparison(Cm(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _t(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xa extends iH{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Xa(e,n)}matches(e){return aH(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function aH(t){return t.op==="and"}function oH(t){return Yge(t)&&aH(t)}function Yge(t){for(const e of t.filters)if(e instanceof Xa)return!1;return!0}function rC(t){if(t instanceof Ar)return t.field.canonicalString()+t.op.toString()+Pm(t.value);if(oH(t))return t.filters.map(e=>rC(e)).join(",");{const e=t.filters.map(n=>rC(n)).join(",");return`${t.op}(${e})`}}function lH(t,e){return t instanceof Ar?function(r,s){return s instanceof Ar&&r.op===s.op&&r.field.isEqual(s.field)&&Lo(r.value,s.value)}(t,e):t instanceof Xa?function(r,s){return s instanceof Xa&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,o,l)=>a&&lH(o,s.filters[l]),!0):!1}(t,e):void _t(19439)}function cH(t){return t instanceof Ar?function(n){return`${n.field.canonicalString()} ${n.op} ${Pm(n.value)}`}(t):t instanceof Xa?function(n){return n.op.toString()+" {"+n.getFilters().map(cH).join(" ,")+"}"}(t):"Filter"}class Qge extends Ar{constructor(e,n,r){super(e,n,r),this.key=dt.fromName(r.referenceValue)}matches(e){const n=dt.comparator(e.key,this.key);return this.matchesComparison(n)}}class Xge extends Ar{constructor(e,n){super(e,"in",n),this.keys=uH("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Zge extends Ar{constructor(e,n){super(e,"not-in",n),this.keys=uH("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function uH(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>dt.fromName(r.referenceValue))}class Jge extends Ar{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return _R(n)&&hv(n.arrayValue,this.value)}}class eye extends Ar{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&hv(this.value.arrayValue,n)}}class tye extends Ar{constructor(e,n){super(e,"not-in",n)}matches(e){if(hv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!hv(this.value.arrayValue,n)}}class nye extends Ar{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!_R(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>hv(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rye{constructor(e,n=null,r=[],s=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=o,this.endAt=l,this.Te=null}}function c$(t,e=null,n=[],r=[],s=null,a=null,o=null){return new rye(t,e,n,r,s,a,o)}function jR(t){const e=Lt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>rC(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),fN(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Pm(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Pm(r)).join(",")),e.Te=n}return e.Te}function NR(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Gge(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!lH(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!l$(t.startAt,e.startAt)&&l$(t.endAt,e.endAt)}function sC(t){return dt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n=null,r=[],s=[],a=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function sye(t,e,n,r,s,a,o,l){return new Mp(t,e,n,r,s,a,o,l)}function SR(t){return new Mp(t)}function u$(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function iye(t){return dt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function dH(t){return t.collectionGroup!==null}function xy(t){const e=Lt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Br(as.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new fv(a,r))}),n.has(as.keyField().canonicalString())||e.Ie.push(new fv(as.keyField(),r))}return e.Ie}function Eo(t){const e=Lt(t);return e.Ee||(e.Ee=aye(e,xy(t))),e.Ee}function aye(t,e){if(t.limitType==="F")return c$(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new fv(s.field,a)});const n=t.endAt?new Kw(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Kw(t.startAt.position,t.startAt.inclusive):null;return c$(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function iC(t,e){const n=t.filters.concat([e]);return new Mp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function oye(t,e){const n=t.explicitOrderBy.concat([e]);return new Mp(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function Gw(t,e,n){return new Mp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pN(t,e){return NR(Eo(t),Eo(e))&&t.limitType===e.limitType}function hH(t){return`${jR(Eo(t))}|lt:${t.limitType}`}function af(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>cH(s)).join(", ")}]`),fN(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Pm(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Pm(s)).join(",")),`Target(${r})`}(Eo(t))}; limitType=${t.limitType})`}function gN(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):dt.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of xy(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const u=o$(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,xy(r),s)||r.endAt&&!function(o,l,c){const u=o$(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,xy(r),s))}(t,e)}function lye(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function fH(t){return(e,n)=>{let r=!1;for(const s of xy(t)){const a=cye(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function cye(t,e,n){const r=t.field.isKeyField()?dt.comparator(e.key,n.key):function(a,o,l){const c=o.data.field(a),u=l.data.field(a);return c!==null&&u!==null?Cm(c,u):_t(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return _t(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ou(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return YW(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uye=new nr(dt.comparator);function Il(){return uye}const mH=new nr(dt.comparator);function Zg(...t){let e=mH;for(const n of t)e=e.insert(n.key,n);return e}function pH(t){let e=mH;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function vd(){return by()}function gH(){return by()}function by(){return new Ph(t=>t.toString(),(t,e)=>t.isEqual(e))}const dye=new nr(dt.comparator),hye=new Br(dt.comparator);function Xt(...t){let e=hye;for(const n of t)e=e.add(n);return e}const fye=new Br(Qt);function mye(){return fye}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qw(e)?"-0":e}}function yH(t){return{integerValue:""+t}}function pye(t,e){return Vge(e)?yH(e):ER(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(){this._=void 0}}function gye(t,e,n){return t instanceof mv?function(s,a){const o={fields:{[ZW]:{stringValue:XW},[eH]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&wR(a)&&(a=mN(a)),a&&(o.fields[JW]=a),{mapValue:o}}(n,e):t instanceof pv?xH(t,e):t instanceof gv?bH(t,e):function(s,a){const o=vH(s,a),l=d$(o)+d$(s.Ae);return nC(o)&&nC(s.Ae)?yH(l):ER(s.serializer,l)}(t,e)}function yye(t,e,n){return t instanceof pv?xH(t,e):t instanceof gv?bH(t,e):n}function vH(t,e){return t instanceof Yw?function(r){return nC(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class mv extends yN{}class pv extends yN{constructor(e){super(),this.elements=e}}function xH(t,e){const n=wH(e);for(const r of t.elements)n.some(s=>Lo(s,r))||n.push(r);return{arrayValue:{values:n}}}class gv extends yN{constructor(e){super(),this.elements=e}}function bH(t,e){let n=wH(e);for(const r of t.elements)n=n.filter(s=>!Lo(s,r));return{arrayValue:{values:n}}}class Yw extends yN{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function d$(t){return gr(t.integerValue||t.doubleValue)}function wH(t){return _R(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vye{constructor(e,n){this.field=e,this.transform=n}}function xye(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof pv&&s instanceof pv||r instanceof gv&&s instanceof gv?Tm(r.elements,s.elements,Lo):r instanceof Yw&&s instanceof Yw?Lo(r.Ae,s.Ae):r instanceof mv&&s instanceof mv}(t.transform,e.transform)}class bye{constructor(e,n){this.version=e,this.transformResults=n}}class zs{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new zs}static exists(e){return new zs(void 0,e)}static updateTime(e){return new zs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function q0(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class vN{}function _H(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xN(t.key,zs.none()):new Mx(t.key,t.data,zs.none());{const n=t.data,r=ai.empty();let s=new Br(as.comparator);for(let a of e.fields)if(!s.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),s=s.add(a)}return new Mu(t.key,r,new Ei(s.toArray()),zs.none())}}function wye(t,e,n){t instanceof Mx?function(s,a,o){const l=s.value.clone(),c=f$(s.fieldTransforms,a,o.transformResults);l.setAll(c),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Mu?function(s,a,o){if(!q0(s.precondition,a))return void a.convertToUnknownDocument(o.version);const l=f$(s.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(jH(s)),c.setAll(l),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function wy(t,e,n,r){return t instanceof Mx?function(a,o,l,c){if(!q0(a.precondition,o))return l;const u=a.value.clone(),d=m$(a.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Mu?function(a,o,l,c){if(!q0(a.precondition,o))return l;const u=m$(a.fieldTransforms,c,o),d=o.data;return d.setAll(jH(a)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(a,o,l){return q0(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function _ye(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=vH(r.transform,s||null);a!=null&&(n===null&&(n=ai.empty()),n.set(r.field,a))}return n||null}function h$(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Tm(r,s,(a,o)=>xye(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Mx extends vN{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Mu extends vN{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function jH(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function f$(t,e,n){const r=new Map;pn(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const a=t[s],o=a.transform,l=e.data.field(a.field);r.set(a.field,yye(o,l,n[s]))}return r}function m$(t,e,n){const r=new Map;for(const s of t){const a=s.transform,o=n.data.field(s.field);r.set(s.field,gye(a,o,e))}return r}class xN extends vN{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jye extends vN{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nye{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&wye(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=wy(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=wy(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=gH();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=n.has(s.key)?null:l;const c=_H(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(It.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Xt())}isEqual(e){return this.batchId===e.batchId&&Tm(this.mutations,e.mutations,(n,r)=>h$(n,r))&&Tm(this.baseMutations,e.baseMutations,(n,r)=>h$(n,r))}}class AR{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){pn(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return dye}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,r[o].version);return new AR(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sye=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eye{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jr,en;function Aye(t){switch(t){case fe.OK:return _t(64938);case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0;default:return _t(15467,{code:t})}}function NH(t){if(t===void 0)return Pl("GRPC error has no .code"),fe.UNKNOWN;switch(t){case jr.OK:return fe.OK;case jr.CANCELLED:return fe.CANCELLED;case jr.UNKNOWN:return fe.UNKNOWN;case jr.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case jr.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case jr.INTERNAL:return fe.INTERNAL;case jr.UNAVAILABLE:return fe.UNAVAILABLE;case jr.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case jr.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case jr.NOT_FOUND:return fe.NOT_FOUND;case jr.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case jr.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case jr.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case jr.ABORTED:return fe.ABORTED;case jr.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case jr.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case jr.DATA_LOSS:return fe.DATA_LOSS;default:return _t(39323,{code:t})}}(en=jr||(jr={}))[en.OK=0]="OK",en[en.CANCELLED=1]="CANCELLED",en[en.UNKNOWN=2]="UNKNOWN",en[en.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",en[en.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",en[en.NOT_FOUND=5]="NOT_FOUND",en[en.ALREADY_EXISTS=6]="ALREADY_EXISTS",en[en.PERMISSION_DENIED=7]="PERMISSION_DENIED",en[en.UNAUTHENTICATED=16]="UNAUTHENTICATED",en[en.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",en[en.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",en[en.ABORTED=10]="ABORTED",en[en.OUT_OF_RANGE=11]="OUT_OF_RANGE",en[en.UNIMPLEMENTED=12]="UNIMPLEMENTED",en[en.INTERNAL=13]="INTERNAL",en[en.UNAVAILABLE=14]="UNAVAILABLE",en[en.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tye(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cye=new nu([4294967295,4294967295],0);function p$(t){const e=Tye().encode(t),n=new $W;return n.update(e),new Uint8Array(n.digest())}function g$(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new nu([n,r],0),new nu([s,a],0)]}class TR{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Jg(`Invalid padding: ${n}`);if(r<0)throw new Jg(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Jg(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Jg(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=nu.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(nu.fromNumber(r)));return s.compare(Cye)===1&&(s=new nu([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=p$(e),[r,s]=g$(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,s,a);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new TR(a,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=p$(e),[r,s]=g$(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,s,a);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Jg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Dx.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new bN(It.min(),s,new nr(Qt),Il(),Xt())}}class Dx{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Dx(r,n,Xt(),Xt(),Xt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class SH{constructor(e,n){this.targetId=e,this.Ce=n}}class EH{constructor(e,n,r=us.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class y${constructor(){this.ve=0,this.Fe=v$(),this.Me=us.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Xt(),n=Xt(),r=Xt();return this.Fe.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:_t(38017,{changeType:a})}}),new Dx(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=v$()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,pn(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class Pye{constructor(e){this.Ge=e,this.ze=new Map,this.je=Il(),this.He=Gb(),this.Je=Gb(),this.Ze=new nr(Qt)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:_t(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const a=s.target;if(sC(a))if(r===0){const o=new dt(a.path);this.et(n,o,js.newNoDocument(o,It.min()))}else pn(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let o,l;try{o=mu(r).toUint8Array()}catch(c){if(c instanceof QW)return ch("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new TR(o,s,a)}catch(c){return ch(c instanceof Jg?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.et(n,a,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((a,o)=>{const l=this.ot(o);if(l){if(a.current&&sC(l.target)){const c=new dt(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,js.newNoDocument(c,e))}a.Be&&(n.set(o,a.ke()),a.Ke())}});let r=Xt();this.Je.forEach((a,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(a))}),this.je.forEach((a,o)=>o.setReadTime(e));const s=new bN(e,n,this.Ze,this.je,r);return this.je=Il(),this.He=Gb(),this.Je=Gb(),this.Ze=new nr(Qt),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new y$,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Br(Qt),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Br(Qt),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ge("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new y$),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Gb(){return new nr(dt.comparator)}function v$(){return new nr(dt.comparator)}const Iye={asc:"ASCENDING",desc:"DESCENDING"},kye={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Rye={and:"AND",or:"OR"};class Oye{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function aC(t,e){return t.useProto3Json||fN(e)?e:{value:e}}function Qw(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AH(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Mye(t,e){return Qw(t,e.toTimestamp())}function Ao(t){return pn(!!t,49232),It.fromTimestamp(function(n){const r=fu(n);return new Bn(r.seconds,r.nanos)}(t))}function CR(t,e){return oC(t,e).canonicalString()}function oC(t,e){const n=function(s){return new In(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function TH(t){const e=In.fromString(t);return pn(RH(e),10190,{key:e.toString()}),e}function lC(t,e){return CR(t.databaseId,e.path)}function iE(t,e){const n=TH(e);if(n.get(1)!==t.databaseId.projectId)throw new Be(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Be(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new dt(PH(n))}function CH(t,e){return CR(t.databaseId,e)}function Dye(t){const e=TH(t);return e.length===4?In.emptyPath():PH(e)}function cC(t){return new In(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function PH(t){return pn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function x$(t,e,n){return{name:lC(t,e),fields:n.value.mapValue.fields}}function Lye(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:_t(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(u,d){return u.useProto3Json?(pn(d===void 0||typeof d=="string",58123),us.fromBase64String(d||"")):(pn(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),us.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?fe.UNKNOWN:NH(u.code);return new Be(d,u.message||"")}(o);n=new EH(r,s,a,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=iE(t,r.document.name),a=Ao(r.document.updateTime),o=r.document.createTime?Ao(r.document.createTime):It.min(),l=new ai({mapValue:{fields:r.document.fields}}),c=js.newFoundDocument(s,a,o,l),u=r.targetIds||[],d=r.removedTargetIds||[];n=new W0(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=iE(t,r.document),a=r.readTime?Ao(r.readTime):It.min(),o=js.newNoDocument(s,a),l=r.removedTargetIds||[];n=new W0([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=iE(t,r.document),a=r.removedTargetIds||[];n=new W0([],a,s,null)}else{if(!("filter"in e))return _t(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,o=new Eye(s,a),l=r.targetId;n=new SH(l,o)}}return n}function $ye(t,e){let n;if(e instanceof Mx)n={update:x$(t,e.key,e.value)};else if(e instanceof xN)n={delete:lC(t,e.key)};else if(e instanceof Mu)n={update:x$(t,e.key,e.data),updateMask:Kye(e.fieldMask)};else{if(!(e instanceof jye))return _t(16599,{dt:e.type});n={verify:lC(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const l=o.transform;if(l instanceof mv)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof pv)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof gv)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Yw)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw _t(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:Mye(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:_t(27497)}(t,e.precondition)),n}function Fye(t,e){return t&&t.length>0?(pn(e!==void 0,14353),t.map(n=>function(s,a){let o=s.updateTime?Ao(s.updateTime):Ao(a);return o.isEqual(It.min())&&(o=Ao(a)),new bye(o,s.transformResults||[])}(n,e))):[]}function Vye(t,e){return{documents:[CH(t,e.path)]}}function Bye(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=CH(t,s);const a=function(u){if(u.length!==0)return kH(Xa.create(u,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(u){if(u.length!==0)return u.map(d=>function(f){return{field:of(f.field),direction:qye(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=aC(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function Uye(t){let e=Dye(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){pn(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let a=[];n.where&&(a=function(h){const f=IH(h);return f instanceof Xa&&oH(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(v){return new fv(lf(v.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(n.orderBy));let l=null;n.limit&&(l=function(h){let f;return f=typeof h=="object"?h.value:h,fN(f)?null:f}(n.limit));let c=null;n.startAt&&(c=function(h){const f=!!h.before,m=h.values||[];return new Kw(m,f)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const f=!h.before,m=h.values||[];return new Kw(m,f)}(n.endAt)),sye(e,s,o,a,l,"F",c,u)}function zye(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _t(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function IH(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=lf(n.unaryFilter.field);return Ar.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=lf(n.unaryFilter.field);return Ar.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=lf(n.unaryFilter.field);return Ar.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=lf(n.unaryFilter.field);return Ar.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _t(61313);default:return _t(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ar.create(lf(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _t(58110);default:return _t(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Xa.create(n.compositeFilter.filters.map(r=>IH(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return _t(1026)}}(n.compositeFilter.op))}(t):_t(30097,{filter:t})}function qye(t){return Iye[t]}function Wye(t){return kye[t]}function Hye(t){return Rye[t]}function of(t){return{fieldPath:t.canonicalString()}}function lf(t){return as.fromServerFormat(t.fieldPath)}function kH(t){return t instanceof Ar?function(n){if(n.op==="=="){if(a$(n.value))return{unaryFilter:{field:of(n.field),op:"IS_NAN"}};if(i$(n.value))return{unaryFilter:{field:of(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(a$(n.value))return{unaryFilter:{field:of(n.field),op:"IS_NOT_NAN"}};if(i$(n.value))return{unaryFilter:{field:of(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:of(n.field),op:Wye(n.op),value:n.value}}}(t):t instanceof Xa?function(n){const r=n.getFilters().map(s=>kH(s));return r.length===1?r[0]:{compositeFilter:{op:Hye(n.op),filters:r}}}(t):_t(54877,{filter:t})}function Kye(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function RH(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function OH(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n,r,s,a=It.min(),o=It.min(),l=us.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Fc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fc(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gye{constructor(e){this.yt=e}}function Yye(t){const e=Uye({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Gw(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qye{constructor(){this.Sn=new Xye}addToCollectionParentIndex(e,n){return this.Sn.add(n),xe.resolve()}getCollectionParents(e,n){return xe.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return xe.resolve()}deleteFieldIndex(e,n){return xe.resolve()}deleteAllFieldIndexes(e){return xe.resolve()}createTargetIndexes(e,n){return xe.resolve()}getDocumentsMatchingTarget(e,n){return xe.resolve(null)}getIndexType(e,n){return xe.resolve(0)}getFieldIndexes(e,n){return xe.resolve([])}getNextCollectionGroupToUpdate(e){return xe.resolve(null)}getMinOffset(e,n){return xe.resolve(hu.min())}getMinOffsetFromCollectionGroup(e,n){return xe.resolve(hu.min())}updateCollectionGroup(e,n,r){return xe.resolve()}updateIndexEntries(e,n){return xe.resolve()}}class Xye{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Br(In.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Br(In.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b$={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},MH=41943040;class ei{static withCacheSize(e){return new ei(e,ei.DEFAULT_COLLECTION_PERCENTILE,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ei.DEFAULT_COLLECTION_PERCENTILE=10,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ei.DEFAULT=new ei(MH,ei.DEFAULT_COLLECTION_PERCENTILE,ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ei.DISABLED=new ei(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Im(0)}static ar(){return new Im(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w$="LruGarbageCollector",Zye=1048576;function _$([t,e],[n,r]){const s=Qt(t,n);return s===0?Qt(e,r):s}class Jye{constructor(e){this.Pr=e,this.buffer=new Br(_$),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();_$(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class eve{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ge(w$,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Op(n)?Ge(w$,"Ignoring IndexedDB error during garbage collection: ",n):await Rp(n)}await this.Ar(3e5)})}}class tve{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return xe.resolve(hN.ce);const r=new Jye(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ge("LruGarbageCollector","Garbage collection skipped; disabled"),xe.resolve(b$)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),b$):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,a,o,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,l=Date.now(),this.removeTargets(e,r,n))).next(h=>(a=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),sf()<=Yt.DEBUG&&Ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${a} targets in `+(c-l)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),xe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:h})))}}function nve(t,e){return new tve(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rve{constructor(){this.changes=new Ph(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,js.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?xe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sve{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ive{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&wy(r.mutation,s,Ei.empty(),Bn.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Xt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Xt()){const s=vd();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let o=Zg();return a.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=vd();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Xt()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let a=Il();const o=by(),l=function(){return by()}();return n.forEach((c,u)=>{const d=r.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof Mu)?a=a.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),wy(d.mutation,u,d.mutation.getFieldMask(),Bn.now())):o.set(u.key,Ei.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>l.set(u,new sve(d,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=by();let s=new nr((o,l)=>o-l),a=Xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=r.get(c)||Ei.empty();d=l.applyToLocalView(u,d),r.set(c,d);const h=(s.get(l.batchId)||Xt()).add(c);s=s.insert(l.batchId,h)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,h=gH();d.forEach(f=>{if(!a.has(f)){const m=_H(n.get(f),r.get(f));m!==null&&h.set(f,m),a=a.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return xe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return iye(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):dH(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):xe.resolve(vd());let l=cv,c=a;return o.next(u=>xe.forEach(u,(d,h)=>(l<h.largestBatchId&&(l=h.largestBatchId),a.get(d)?xe.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{c=c.insert(d,f)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,c,u,Xt())).next(d=>({batchId:l,changes:pH(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new dt(n)).next(r=>{let s=Zg();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let o=Zg();return this.indexManager.getCollectionParents(e,a).next(l=>xe.forEach(l,c=>{const u=function(h,f){return new Mp(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(o=>{a.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,js.newInvalidDocument(d)))});let l=Zg();return o.forEach((c,u)=>{const d=a.get(c);d!==void 0&&wy(d.mutation,u,Ei.empty(),Bn.now()),gN(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ave{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return xe.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ao(s.createTime)}}(n)),xe.resolve()}getNamedQuery(e,n){return xe.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:Yye(s.bundledQuery),readTime:Ao(s.readTime)}}(n)),xe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ove{constructor(){this.overlays=new nr(dt.comparator),this.Lr=new Map}getOverlay(e,n){return xe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=vd();return xe.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.bt(e,n,a)}),xe.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Lr.delete(r)),xe.resolve()}getOverlaysForCollection(e,n,r){const s=vd(),a=n.length+1,o=new dt(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&c.largestBatchId>r&&s.set(c.getKey(),c)}return xe.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new nr((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=a.get(u.largestBatchId);d===null&&(d=vd(),a=a.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=vd(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=s)););return xe.resolve(l)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Sye(n,r));let a=this.Lr.get(n);a===void 0&&(a=Xt(),this.Lr.set(n,a)),this.Lr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lve{constructor(){this.sessionToken=us.EMPTY_BYTE_STRING}getSessionToken(e){return xe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,xe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this.kr=new Br(Hr.Kr),this.qr=new Br(Hr.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Hr(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Hr(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new dt(new In([])),r=new Hr(n,e),s=new Hr(n,e+1),a=[];return this.qr.forEachInRange([r,s],o=>{this.Wr(o),a.push(o.key)}),a}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new dt(new In([])),r=new Hr(n,e),s=new Hr(n,e+1);let a=Xt();return this.qr.forEachInRange([r,s],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new Hr(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Hr{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return dt.comparator(e.key,n.key)||Qt(e.Hr,n.Hr)}static Ur(e,n){return Qt(e.Hr,n.Hr)||dt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cve{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Br(Hr.Kr)}checkEmpty(e){return xe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Nye(a,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Jr=this.Jr.add(new Hr(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return xe.resolve(o)}lookupMutationBatch(e,n){return xe.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),a=s<0?0:s;return xe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(this.mutationQueue.length===0?bR:this.Yn-1)}getAllMutationBatches(e){return xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Hr(n,0),s=new Hr(n,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([r,s],o=>{const l=this.Zr(o.Hr);a.push(l)}),xe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Br(Qt);return n.forEach(s=>{const a=new Hr(s,0),o=new Hr(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,o],l=>{r=r.add(l.Hr)})}),xe.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;dt.isDocumentKey(a)||(a=a.child(""));const o=new Hr(new dt(a),0);let l=new Br(Qt);return this.Jr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Hr)),!0)},o),xe.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){pn(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return xe.forEach(n.mutations,s=>{const a=new Hr(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new Hr(n,0),s=this.Jr.firstAfterOrEqual(r);return xe.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,xe.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uve{constructor(e){this.ti=e,this.docs=function(){return new nr(dt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return xe.resolve(r?r.document.mutableCopy():js.newInvalidDocument(n))}getEntries(e,n){let r=Il();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():js.newInvalidDocument(s))}),xe.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=Il();const o=n.path,l=new dt(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Dge(Mge(d),r)<=0||(s.has(d.key)||gN(n,d))&&(a=a.insert(d.key,d.mutableCopy()))}return xe.resolve(a)}getAllFromCollectionGroup(e,n,r,s){_t(9500)}ni(e,n){return xe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new dve(this)}getSize(e){return xe.resolve(this.size)}}class dve extends rve{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),xe.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hve{constructor(e){this.persistence=e,this.ri=new Ph(n=>jR(n),NR),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.ii=0,this.si=new PR,this.targetCount=0,this.oi=Im._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),xe.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Im(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,xe.resolve()}updateTargetData(e,n){return this.lr(n),xe.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.ri.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ri.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),xe.waitFor(a).next(()=>s)}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return xe.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),xe.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),xe.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),xe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return xe.resolve(r)}containsKey(e,n){return xe.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DH{constructor(e,n){this._i={},this.overlays={},this.ai=new hN(0),this.ui=!1,this.ui=!0,this.ci=new lve,this.referenceDelegate=e(this),this.li=new hve(this),this.indexManager=new Qye,this.remoteDocumentCache=function(s){return new uve(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new Gye(n),this.Pi=new ave(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ove,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new cve(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){Ge("MemoryPersistence","Starting transaction:",e);const s=new fve(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(a=>this.referenceDelegate.Ii(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ei(e,n){return xe.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class fve extends $ge{constructor(e){super(),this.currentSequenceNumber=e}}class IR{constructor(e){this.persistence=e,this.Ri=new PR,this.Ai=null}static Vi(e){return new IR(e)}get di(){if(this.Ai)return this.Ai;throw _t(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),xe.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),xe.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),xe.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.di.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.di,r=>{const s=dt.fromPath(r);return this.mi(e,s).next(a=>{a||n.removeEntry(s,It.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return xe.or([()=>xe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Xw{constructor(e,n){this.persistence=e,this.fi=new Ph(r=>Bge(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=nve(this,n)}static Vi(e,n){return new Xw(e,n)}Ti(){}Ii(e){return xe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return xe.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(a=>a?xe.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ni(e,o=>this.wr(e,o,n).next(l=>{l||(r++,a.removeEntry(o,It.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),xe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),xe.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),xe.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),xe.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=U0(e.data.value)),n}wr(e,n,r){return xe.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return xe.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=Xt(),s=Xt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new kR(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mve{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pve{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return Ehe()?8:Fge(Cs())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.gs(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.ps(e,n,s,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new mve;return this.ys(e,n,o).next(l=>{if(a.result=l,this.As)return this.ws(e,n,o,l.size)})}).next(()=>a.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?(sf()<=Yt.DEBUG&&Ge("QueryEngine","SDK will not create cache indexes for query:",af(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),xe.resolve()):(sf()<=Yt.DEBUG&&Ge("QueryEngine","Query:",af(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(sf()<=Yt.DEBUG&&Ge("QueryEngine","The SDK decides to create cache indexes for query:",af(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Eo(n))):xe.resolve())}gs(e,n){if(u$(n))return xe.resolve(null);let r=Eo(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Gw(n,null,"F"),r=Eo(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=Xt(...a);return this.fs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.bs(n,l);return this.Ss(n,u,o,c.readTime)?this.gs(e,Gw(n,null,"F")):this.Ds(e,u,n,c)}))})))}ps(e,n,r,s){return u$(n)||s.isEqual(It.min())?xe.resolve(null):this.fs.getDocuments(e,r).next(a=>{const o=this.bs(n,a);return this.Ss(n,o,r,s)?xe.resolve(null):(sf()<=Yt.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),af(n)),this.Ds(e,o,n,Oge(s,cv)).next(l=>l))})}bs(e,n){let r=new Br(fH(e));return n.forEach((s,a)=>{gN(e,a)&&(r=r.add(a))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ys(e,n,r){return sf()<=Yt.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",af(n)),this.fs.getDocumentsMatchingQuery(e,n,hu.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="LocalStore",gve=3e8;class yve{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new nr(Qt),this.Fs=new Ph(a=>jR(a),NR),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ive(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function vve(t,e,n,r){return new yve(t,e,n,r)}async function LH(t,e){const n=Lt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],l=[];let c=Xt();for(const u of s){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of a){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ns:u,removedBatchIds:o,addedBatchIds:l}))})})}function xve(t,e){const n=Lt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const h=u.batch,f=h.keys();let m=xe.resolve();return f.forEach(v=>{m=m.next(()=>d.getEntry(c,v)).next(g=>{const y=u.docVersions.get(v);pn(y!==null,48541),g.version.compareTo(y)<0&&(h.applyToRemoteDocument(g,u),g.isValidDocument()&&(g.setReadTime(u.commitVersion),d.addEntry(g)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(c,h))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Xt();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function $H(t){const e=Lt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function bve(t,e){const n=Lt(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const l=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;l.push(n.li.removeMatchingKeys(a,d.removedDocuments,h).next(()=>n.li.addMatchingKeys(a,d.addedDocuments,h)));let m=f.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(us.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(h,m),function(g,y,w){return g.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=gve?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,m,d)&&l.push(n.li.updateTargetData(a,m))});let c=Il(),u=Xt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(a,d))}),l.push(wve(a,o,e.documentUpdates).next(d=>{c=d.Bs,u=d.Ls})),!r.isEqual(It.min())){const d=n.li.getLastRemoteSnapshotVersion(a).next(h=>n.li.setTargetsMetadata(a,a.currentSequenceNumber,r));l.push(d)}return xe.waitFor(l).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,c,u)).next(()=>c)}).then(a=>(n.vs=s,a))}function wve(t,e,n){let r=Xt(),s=Xt();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=Il();return n.forEach((l,c)=>{const u=a.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(It.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):Ge(RR,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Bs:o,Ls:s}})}function _ve(t,e){const n=Lt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=bR),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function jve(t,e){const n=Lt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(a=>a?(s=a,xe.resolve(s)):n.li.allocateTargetId(r).next(o=>(s=new Fc(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function uC(t,e,n){const r=Lt(t),s=r.vs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Op(o))throw o;Ge(RR,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function j$(t,e,n){const r=Lt(t);let s=It.min(),a=Xt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const h=Lt(c),f=h.Fs.get(d);return f!==void 0?xe.resolve(h.vs.get(f)):h.li.getTargetData(u,d)}(r,o,Eo(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,l.targetId).next(c=>{a=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:It.min(),n?a:Xt())).next(l=>(Nve(r,lye(e),l),{documents:l,ks:a})))}function Nve(t,e,n){let r=t.Ms.get(e)||It.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Ms.set(e,r)}class N${constructor(){this.activeTargetIds=mye()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Sve{constructor(){this.vo=new N$,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new N$,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eve{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S$="ConnectivityMonitor";class E${constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ge(S$,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ge(S$,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yb=null;function dC(){return Yb===null?Yb=function(){return 268435456+Math.round(2147483648*Math.random())}():Yb++,"0x"+Yb.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="RestConnection",Ave={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Tve{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===Ww?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,a){const o=dC(),l=this.Qo(e,n.toUriEncodedString());Ge(aE,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,s,a);const{host:u}=new URL(l),d=Ho(u);return this.zo(e,l,c,r,d).then(h=>(Ge(aE,`Received RPC '${e}' ${o}: `,h),h),h=>{throw ch(aE,`RPC '${e}' ${o} failed with error: `,h,"url: ",l,"request:",r),h})}jo(e,n,r,s,a,o){return this.Wo(e,n,r,s,a)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+kp}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}Qo(e,n){const r=Ave[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cve{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="WebChannelConnection",Sg=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class Wf extends Tve{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Wf.c_){const e=UW();Sg(e,BW.STAT_EVENT,n=>{n.stat===ZT.PROXY?Ge(gs,"STAT_EVENT: detected buffering proxy"):n.stat===ZT.NOPROXY&&Ge(gs,"STAT_EVENT: detected no buffering proxy")}),Wf.c_=!0}}zo(e,n,r,s,a){const o=dC();return new Promise((l,c)=>{const u=new FW;u.setWithCredentials(!0),u.listenOnce(VW.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case B0.NO_ERROR:const h=u.getResponseJson();Ge(gs,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),l(h);break;case B0.TIMEOUT:Ge(gs,`RPC '${e}' ${o} timed out`),c(new Be(fe.DEADLINE_EXCEEDED,"Request time out"));break;case B0.HTTP_ERROR:const f=u.getStatus();if(Ge(gs,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m==null?void 0:m.error;if(v&&v.status&&v.message){const g=function(w){const b=w.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(b)>=0?b:fe.UNKNOWN}(v.status);c(new Be(g,v.message))}else c(new Be(fe.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Be(fe.UNAVAILABLE,"Connection failed."));break;default:_t(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Ge(gs,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);Ge(gs,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",d,r,15)})}T_(e,n,r){const s=dC(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=a.join("");Ge(gs,`Creating RPC '${e}' stream ${s}: ${u}`,l);const d=o.createWebChannel(u,l);this.I_(d);let h=!1,f=!1;const m=new Cve({Ho:v=>{f?Ge(gs,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(h||(Ge(gs,`Opening RPC '${e}' stream ${s} transport.`),d.open(),h=!0),Ge(gs,`RPC '${e}' stream ${s} sending:`,v),d.send(v))},Jo:()=>d.close()});return Sg(d,Xg.EventType.OPEN,()=>{f||(Ge(gs,`RPC '${e}' stream ${s} transport opened.`),m.i_())}),Sg(d,Xg.EventType.CLOSE,()=>{f||(f=!0,Ge(gs,`RPC '${e}' stream ${s} transport closed`),m.o_(),this.E_(d))}),Sg(d,Xg.EventType.ERROR,v=>{f||(f=!0,ch(gs,`RPC '${e}' stream ${s} transport errored. Name:`,v.name,"Message:",v.message),m.o_(new Be(fe.UNAVAILABLE,"The operation could not be completed")))}),Sg(d,Xg.EventType.MESSAGE,v=>{var g;if(!f){const y=v.data[0];pn(!!y,16349);const w=y,b=(w==null?void 0:w.error)||((g=w[0])==null?void 0:g.error);if(b){Ge(gs,`RPC '${e}' stream ${s} received error:`,b);const E=b.status;let T=function(_){const p=jr[_];if(p!==void 0)return NH(p)}(E),x=b.message;E==="NOT_FOUND"&&x.includes("database")&&x.includes("does not exist")&&x.includes(this.databaseId.database)&&ch(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),T===void 0&&(T=fe.INTERNAL,x="Unknown error status: "+E+" with message "+b.message),f=!0,m.o_(new Be(T,x)),d.close()}else Ge(gs,`RPC '${e}' stream ${s} received:`,y),m.__(y)}}),Wf.u_(),setTimeout(()=>{m.s_()},0),m}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return zW()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pve(t){return new Wf(t)}function oE(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(t){return new Oye(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wf.c_=!1;class FH{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Ge("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A$="PersistentStream";class VH{constructor(e,n,r,s,a,o,l,c){this.Ci=e,this.b_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new FH(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===fe.RESOURCE_EXHAUSTED?(Pl(n.toString()),Pl("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Be(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Ge(A$,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(Ge(A$,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ive extends VH{constructor(e,n,r,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Lye(this.serializer,e),r=function(a){if(!("targetChange"in a))return It.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?It.min():o.readTime?Ao(o.readTime):It.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=cC(this.serializer),n.addTarget=function(a,o){let l;const c=o.target;if(l=sC(c)?{documents:Vye(a,c)}:{query:Bye(a,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=AH(a,o.resumeToken);const u=aC(a,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(It.min())>0){l.readTime=Qw(a,o.snapshotVersion.toTimestamp());const u=aC(a,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=zye(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=cC(this.serializer),n.removeTarget=e,this.K_(n)}}class kve extends VH{constructor(e,n,r,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return pn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){pn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Fye(e.writeResults,e.commitTime),r=Ao(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=cC(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>$ye(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rve{}class Ove extends Rve{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Be(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Wo(e,oC(n,r),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Be(fe.UNKNOWN,a.toString())})}jo(e,n,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.jo(e,oC(n,r),s,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Be(fe.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function Mve(t,e,n,r){return new Ove(t,e,n,r)}class Dve{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Pl(n),this.aa=!1):Ge("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh="RemoteStore";class Lve{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{Ih(this)&&(Ge(uh,"Restarting streams for network reachability change."),await async function(c){const u=Lt(c);u.Ea.add(4),await Lx(u),u.Va.set("Unknown"),u.Ea.delete(4),await _N(u)}(this))})}),this.Va=new Dve(r,s)}}async function _N(t){if(Ih(t))for(const e of t.Ra)await e(!0)}async function Lx(t){for(const e of t.Ra)await e(!1)}function BH(t,e){const n=Lt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),LR(n)?DR(n):Dp(n).O_()&&MR(n,e))}function OR(t,e){const n=Lt(t),r=Dp(n);n.Ia.delete(e),r.O_()&&UH(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ih(n)&&n.Va.set("Unknown"))}function MR(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(It.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Dp(t).Z_(e)}function UH(t,e){t.da.$e(e),Dp(t).X_(e)}function DR(t){t.da=new Pye({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Dp(t).start(),t.Va.ua()}function LR(t){return Ih(t)&&!Dp(t).x_()&&t.Ia.size>0}function Ih(t){return Lt(t).Ea.size===0}function zH(t){t.da=void 0}async function $ve(t){t.Va.set("Online")}async function Fve(t){t.Ia.forEach((e,n)=>{MR(t,e)})}async function Vve(t,e){zH(t),LR(t)?(t.Va.ha(e),DR(t)):t.Va.set("Unknown")}async function Bve(t,e,n){if(t.Va.set("Online"),e instanceof EH&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const l of a.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.da.removeTarget(l))}(t,e)}catch(r){Ge(uh,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Zw(t,r)}else if(e instanceof W0?t.da.Xe(e):e instanceof SH?t.da.st(e):t.da.tt(e),!n.isEqual(It.min()))try{const r=await $H(t.localStore);n.compareTo(r)>=0&&await function(a,o){const l=a.da.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=a.Ia.get(u);d&&a.Ia.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=a.Ia.get(c);if(!d)return;a.Ia.set(c,d.withResumeToken(us.EMPTY_BYTE_STRING,d.snapshotVersion)),UH(a,c);const h=new Fc(d.target,c,u,d.sequenceNumber);MR(a,h)}),a.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Ge(uh,"Failed to raise snapshot:",r),await Zw(t,r)}}async function Zw(t,e,n){if(!Op(e))throw e;t.Ea.add(1),await Lx(t),t.Va.set("Offline"),n||(n=()=>$H(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ge(uh,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await _N(t)})}function qH(t,e){return e().catch(n=>Zw(t,n,e))}async function jN(t){const e=Lt(t),n=gu(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bR;for(;Uve(e);)try{const s=await _ve(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,zve(e,s)}catch(s){await Zw(e,s)}WH(e)&&HH(e)}function Uve(t){return Ih(t)&&t.Ta.length<10}function zve(t,e){t.Ta.push(e);const n=gu(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function WH(t){return Ih(t)&&!gu(t).x_()&&t.Ta.length>0}function HH(t){gu(t).start()}async function qve(t){gu(t).ra()}async function Wve(t){const e=gu(t);for(const n of t.Ta)e.ea(n.mutations)}async function Hve(t,e,n){const r=t.Ta.shift(),s=AR.from(r,e,n);await qH(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await jN(t)}async function Kve(t,e){e&&gu(t).Y_&&await async function(r,s){if(function(o){return Aye(o)&&o!==fe.ABORTED}(s.code)){const a=r.Ta.shift();gu(r).B_(),await qH(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await jN(r)}}(t,e),WH(t)&&HH(t)}async function T$(t,e){const n=Lt(t);n.asyncQueue.verifyOperationInProgress(),Ge(uh,"RemoteStore received new credentials");const r=Ih(n);n.Ea.add(3),await Lx(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await _N(n)}async function Gve(t,e){const n=Lt(t);e?(n.Ea.delete(2),await _N(n)):e||(n.Ea.add(2),await Lx(n),n.Va.set("Unknown"))}function Dp(t){return t.ma||(t.ma=function(n,r,s){const a=Lt(n);return a.sa(),new Ive(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Zo:$ve.bind(null,t),Yo:Fve.bind(null,t),t_:Vve.bind(null,t),J_:Bve.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),LR(t)?DR(t):t.Va.set("Unknown")):(await t.ma.stop(),zH(t))})),t.ma}function gu(t){return t.fa||(t.fa=function(n,r,s){const a=Lt(n);return a.sa(),new kve(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:qve.bind(null,t),t_:Kve.bind(null,t),ta:Wve.bind(null,t),na:Hve.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await jN(t)):(await t.fa.stop(),t.Ta.length>0&&(Ge(uh,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new gl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const o=Date.now()+r,l=new $R(e,n,o,s,a);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Be(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function FR(t,e){if(Pl("AsyncQueue",`${e}: ${t}`),Op(t))return new Be(fe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{static emptySet(e){return new Hf(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||dt.comparator(n.key,r.key):(n,r)=>dt.comparator(n.key,r.key),this.keyedMap=Zg(),this.sortedSet=new nr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Hf)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Hf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C${constructor(){this.ga=new nr(dt.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):_t(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class km{constructor(e,n,r,s,a,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,a){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new km(e,n,Hf.emptySet(n),o,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pN(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yve{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class Qve{constructor(){this.queries=P$(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Lt(n),a=s.queries;s.queries=P$(),a.forEach((o,l)=>{for(const c of l.ba)c.onError(r)})})(this,new Be(fe.ABORTED,"Firestore shutting down"))}}function P$(){return new Ph(t=>hH(t),pN)}async function KH(t,e){const n=Lt(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.Sa()&&e.Da()&&(r=2):(a=new Yve,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(s,!0);break;case 1:a.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=FR(o,`Initialization of query '${af(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,a),a.ba.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&VR(n)}async function GH(t,e){const n=Lt(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const o=a.ba.indexOf(e);o>=0&&(a.ba.splice(o,1),a.ba.length===0?s=e.Da()?0:1:!a.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Xve(t,e){const n=Lt(t);let r=!1;for(const s of e){const a=s.query,o=n.queries.get(a);if(o){for(const l of o.ba)l.Fa(s)&&(r=!0);o.wa=s}}r&&VR(n)}function Zve(t,e,n){const r=Lt(t),s=r.queries.get(e);if(s)for(const a of s.ba)a.onError(n);r.queries.delete(e)}function VR(t){t.Ca.forEach(e=>{e.next()})}var hC,I$;(I$=hC||(hC={})).Ma="default",I$.Cache="cache";class YH{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new km(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=km.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==hC.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QH{constructor(e){this.key=e}}class XH{constructor(e){this.key=e}}class Jve{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Xt(),this.mutatedKeys=Xt(),this.eu=fH(e),this.tu=new Hf(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new C$,s=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),m=gN(this.query,h)?h:null,v=!!f&&this.mutatedKeys.has(f.key),g=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let y=!1;f&&m?f.data.isEqual(m.data)?v!==g&&(r.track({type:3,doc:m}),y=!0):this.su(f,m)||(r.track({type:2,doc:m}),y=!0,(c&&this.eu(m,c)>0||u&&this.eu(m,u)<0)&&(l=!0)):!f&&m?(r.track({type:0,doc:m}),y=!0):f&&!m&&(r.track({type:1,doc:f}),y=!0,(c||u)&&(l=!0)),y&&(m?(o=o.add(m),a=g?a.add(d):a.delete(d)):(o=o.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),a=a.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Ss:l,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(m,v){const g=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t(20277,{Vt:y})}};return g(m)-g(v)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Ya.size===0&&this.current&&!s?1:0,u=c!==this.Xa;return this.Xa=c,o.length!==0||u?{snapshot:new km(this.query,e.tu,a,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new C$,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Xt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new XH(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new QH(r))}),n}cu(e){this.Za=e.ks,this.Ya=Xt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return km.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const BR="SyncEngine";class exe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class txe{constructor(e){this.key=e,this.hu=!1}}class nxe{constructor(e,n,r,s,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ph(l=>hH(l),pN),this.Iu=new Map,this.Eu=new Set,this.Ru=new nr(dt.comparator),this.Au=new Map,this.Vu=new PR,this.du={},this.mu=new Map,this.fu=Im.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rxe(t,e,n=!0){const r=r7(t);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await ZH(r,e,n,!0),s}async function sxe(t,e){const n=r7(t);await ZH(n,e,!0,!1)}async function ZH(t,e,n,r){const s=await jve(t.localStore,Eo(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let l;return r&&(l=await ixe(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&BH(t.remoteStore,s),l}async function ixe(t,e,n,r,s){t.pu=(h,f,m)=>async function(g,y,w,b){let E=y.view.ru(w);E.Ss&&(E=await j$(g.localStore,y.query,!1).then(({documents:_})=>y.view.ru(_,E)));const T=b&&b.targetChanges.get(y.targetId),x=b&&b.targetMismatches.get(y.targetId)!=null,S=y.view.applyChanges(E,g.isPrimaryClient,T,x);return R$(g,y.targetId,S.au),S.snapshot}(t,h,f,m);const a=await j$(t.localStore,e,!0),o=new Jve(e,a.ks),l=o.ru(a.documents),c=Dx.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);R$(t,n,u.au);const d=new exe(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function axe(t,e,n){const r=Lt(t),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter(o=>!pN(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await uC(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&OR(r.remoteStore,s.targetId),fC(r,s.targetId)}).catch(Rp)):(fC(r,s.targetId),await uC(r.localStore,s.targetId,!0))}async function oxe(t,e){const n=Lt(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),OR(n.remoteStore,r.targetId))}async function lxe(t,e,n){const r=pxe(t);try{const s=await function(o,l){const c=Lt(o),u=Bn.now(),d=l.reduce((m,v)=>m.add(v.key),Xt());let h,f;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=Il(),g=Xt();return c.xs.getEntries(m,d).next(y=>{v=y,v.forEach((w,b)=>{b.isValidDocument()||(g=g.add(w))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,v)).next(y=>{h=y;const w=[];for(const b of l){const E=_ye(b,h.get(b.key).overlayedDocument);E!=null&&w.push(new Mu(b.key,E,sH(E.value.mapValue),zs.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,w,l)}).next(y=>{f=y;const w=y.applyToLocalDocumentSet(h,g);return c.documentOverlayCache.saveOverlays(m,y.batchId,w)})}).then(()=>({batchId:f.batchId,changes:pH(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.du[o.currentUser.toKey()];u||(u=new nr(Qt)),u=u.insert(l,c),o.du[o.currentUser.toKey()]=u}(r,s.batchId,n),await $x(r,s.changes),await jN(r.remoteStore)}catch(s){const a=FR(s,"Failed to persist write");n.reject(a)}}async function JH(t,e){const n=Lt(t);try{const r=await bve(n.localStore,e);e.targetChanges.forEach((s,a)=>{const o=n.Au.get(a);o&&(pn(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?pn(o.hu,14607):s.removedDocuments.size>0&&(pn(o.hu,42227),o.hu=!1))}),await $x(n,r,e)}catch(r){await Rp(r)}}function k$(t,e,n){const r=Lt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((a,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=Lt(o);c.onlineState=l;let u=!1;c.queries.forEach((d,h)=>{for(const f of h.ba)f.va(l)&&(u=!0)}),u&&VR(c)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function cxe(t,e,n){const r=Lt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),a=s&&s.key;if(a){let o=new nr(dt.comparator);o=o.insert(a,js.newNoDocument(a,It.min()));const l=Xt().add(a),c=new bN(It.min(),new Map,new nr(Qt),o,l);await JH(r,c),r.Ru=r.Ru.remove(a),r.Au.delete(e),UR(r)}else await uC(r.localStore,e,!1).then(()=>fC(r,e,n)).catch(Rp)}async function uxe(t,e){const n=Lt(t),r=e.batch.batchId;try{const s=await xve(n.localStore,e);t7(n,r,null),e7(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await $x(n,s)}catch(s){await Rp(s)}}async function dxe(t,e,n){const r=Lt(t);try{const s=await function(o,l){const c=Lt(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(h=>(pn(h!==null,37113),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);t7(r,e,n),e7(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await $x(r,s)}catch(s){await Rp(s)}}function e7(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function t7(t,e,n){const r=Lt(t);let s=r.du[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function fC(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||n7(t,r)})}function n7(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(OR(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),UR(t))}function R$(t,e,n){for(const r of n)r instanceof QH?(t.Vu.addReference(r.key,e),hxe(t,r)):r instanceof XH?(Ge(BR,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||n7(t,r.key)):_t(19791,{wu:r})}function hxe(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(Ge(BR,"New document in limbo: "+n),t.Eu.add(r),UR(t))}function UR(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new dt(In.fromString(e)),r=t.fu.next();t.Au.set(r,new txe(n)),t.Ru=t.Ru.insert(n,r),BH(t.remoteStore,new Fc(Eo(SR(n.path)),r,"TargetPurposeLimboResolution",hN.ce))}}async function $x(t,e,n){const r=Lt(t),s=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){s.push(u);const h=kR.Es(c.targetId,u);a.push(h)}}))}),await Promise.all(o),r.Pu.J_(s),await async function(c,u){const d=Lt(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>xe.forEach(u,f=>xe.forEach(f.Ts,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>xe.forEach(f.Is,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!Op(h))throw h;Ge(RR,"Failed to update sequence numbers: "+h)}for(const h of u){const f=h.targetId;if(!h.fromCache){const m=d.vs.get(f),v=m.snapshotVersion,g=m.withLastLimboFreeSnapshotVersion(v);d.vs=d.vs.insert(f,g)}}}(r.localStore,a))}async function fxe(t,e){const n=Lt(t);if(!n.currentUser.isEqual(e)){Ge(BR,"User change. New user:",e.toKey());const r=await LH(n.localStore,e);n.currentUser=e,function(a,o){a.mu.forEach(l=>{l.forEach(c=>{c.reject(new Be(fe.CANCELLED,o))})}),a.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await $x(n,r.Ns)}}function mxe(t,e){const n=Lt(t),r=n.Au.get(e);if(r&&r.hu)return Xt().add(r.key);{let s=Xt();const a=n.Iu.get(e);if(!a)return s;for(const o of a){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function r7(t){const e=Lt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=JH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mxe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cxe.bind(null,e),e.Pu.J_=Xve.bind(null,e.eventManager),e.Pu.yu=Zve.bind(null,e.eventManager),e}function pxe(t){const e=Lt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uxe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dxe.bind(null,e),e}class Jw{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wN(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return vve(this.persistence,new pve,e.initialUser,this.serializer)}Cu(e){return new DH(IR.Vi,this.serializer)}Du(e){return new Sve}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jw.provider={build:()=>new Jw};class gxe extends Jw{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){pn(this.persistence.referenceDelegate instanceof Xw,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new eve(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ei.withCacheSize(this.cacheSizeBytes):ei.DEFAULT;return new DH(r=>Xw.Vi(r,n),this.serializer)}}class mC{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>k$(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=fxe.bind(null,this.syncEngine),await Gve(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Qve}()}createDatastore(e){const n=wN(e.databaseInfo.databaseId),r=Pve(e.databaseInfo);return Mve(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,o,l){return new Lve(r,s,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>k$(this.syncEngine,n,0),function(){return E$.v()?new E$:new Eve}())}createSyncEngine(e,n){return function(s,a,o,l,c,u,d){const h=new nxe(s,a,o,l,c,u);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=Lt(s);Ge(uh,"RemoteStore shutting down."),a.Ea.add(5),await Lx(a),a.Aa.shutdown(),a.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}mC.provider={build:()=>new mC};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Pl("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yu="FirestoreClient";class yxe{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=xs.UNAUTHENTICATED,this.clientId=xR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{Ge(yu,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Ge(yu,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=FR(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function lE(t,e){t.asyncQueue.verifyOperationInProgress(),Ge(yu,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await LH(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function O$(t,e){t.asyncQueue.verifyOperationInProgress();const n=await vxe(t);Ge(yu,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>T$(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>T$(e.remoteStore,s)),t._onlineComponents=e}async function vxe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ge(yu,"Using user provided OfflineComponentProvider");try{await lE(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===fe.FAILED_PRECONDITION||s.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ch("Error using user provided cache. Falling back to memory cache: "+n),await lE(t,new Jw)}}else Ge(yu,"Using default OfflineComponentProvider"),await lE(t,new gxe(void 0));return t._offlineComponents}async function i7(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ge(yu,"Using user provided OnlineComponentProvider"),await O$(t,t._uninitializedComponentsProvider._online)):(Ge(yu,"Using default OnlineComponentProvider"),await O$(t,new mC))),t._onlineComponents}function xxe(t){return i7(t).then(e=>e.syncEngine)}async function a7(t){const e=await i7(t),n=e.eventManager;return n.onListen=rxe.bind(null,e.syncEngine),n.onUnlisten=axe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=sxe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=oxe.bind(null,e.syncEngine),n}function bxe(t,e,n={}){const r=new gl;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const d=new s7({next:f=>{d.Nu(),o.enqueueAndForget(()=>GH(a,h));const m=f.docs.has(l);!m&&f.fromCache?u.reject(new Be(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&c&&c.source==="server"?u.reject(new Be(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new YH(SR(l.path),d,{includeMetadataChanges:!0,Ka:!0});return KH(a,h)}(await a7(t),t.asyncQueue,e,n,r)),r.promise}function wxe(t,e,n={}){const r=new gl;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const d=new s7({next:f=>{d.Nu(),o.enqueueAndForget(()=>GH(a,h)),f.fromCache&&c.source==="server"?u.reject(new Be(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new YH(l,d,{includeMetadataChanges:!0,Ka:!0});return KH(a,h)}(await a7(t),t.asyncQueue,e,n,r)),r.promise}function _xe(t,e){const n=new gl;return t.asyncQueue.enqueueAndForget(async()=>lxe(await xxe(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o7(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jxe="ComponentProvider",M$=new Map;function Nxe(t,e,n,r,s){return new qge(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,o7(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l7="firestore.googleapis.com",D$=!0;class L${constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Be(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=l7,this.ssl=D$}else this.host=e.host,this.ssl=e.ssl??D$;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=MH;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Zye)throw new Be(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kge("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=o7(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Be(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Be(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Be(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class NN{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new L$({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Be(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Be(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new L$(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new _ge;switch(r.type){case"firstParty":return new Ege(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Be(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=M$.get(n);r&&(Ge(jxe,"Removing Datastore"),M$.delete(n),r.terminate())}(this),Promise.resolve()}}function Sxe(t,e,n,r={}){var u;t=ua(t,NN);const s=Ho(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(aN(`https://${l}`),oN("Firestore",!0)),a.host!==l7&&a.host!==l&&ch("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...a,host:l,ssl:s,emulatorOptions:r};if(!sh(c,o)&&(t._setSettings(c),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=xs.MOCK_USER;else{d=Xq(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Be(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new xs(f)}t._authCredentials=new jge(new WW(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Du(this.firestore,e,this._query)}}class xr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ru(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xr(this.firestore,e,this._key)}toJSON(){return{type:xr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ox(n,xr._jsonSchema))return new xr(e,r||null,new dt(In.fromString(n.referencePath)))}}xr._jsonSchemaVersion="firestore/documentReference/1.0",xr._jsonSchema={type:Tr("string",xr._jsonSchemaVersion),referencePath:Tr("string")};class ru extends Du{constructor(e,n,r){super(e,n,SR(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xr(this.firestore,null,new dt(e))}withConverter(e){return new ru(this.firestore,e,this._path)}}function ve(t,e,...n){if(t=nn(t),HW("collection","path",e),t instanceof NN){const r=In.fromString(e,...n);return Q4(r),new ru(t,null,r)}{if(!(t instanceof xr||t instanceof ru))throw new Be(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(In.fromString(e,...n));return Q4(r),new ru(t.firestore,null,r)}}function He(t,e,...n){if(t=nn(t),arguments.length===1&&(e=xR.newId()),HW("doc","path",e),t instanceof NN){const r=In.fromString(e,...n);return Y4(r),new xr(t,null,new dt(r))}{if(!(t instanceof xr||t instanceof ru))throw new Be(fe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(In.fromString(e,...n));return Y4(r),new xr(t.firestore,t instanceof ru?t.converter:null,new dt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $$="AsyncQueue";class F${constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new FH(this,"async_queue_retry"),this._c=()=>{const r=oE();r&&Ge($$,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=oE();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=oE();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new gl;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Op(e))throw e;Ge($$,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Pl("INTERNAL UNHANDLED ERROR: ",V$(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=$R.createAndSchedule(this,e,n,r,a=>this.hc(a));return this.tc.push(s),s}uc(){this.nc&&_t(47125,{Pc:V$(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function V$(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Lu extends NN{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new F$,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new F$(e),this._firestoreClient=void 0,await e}}}function Exe(t,e){const n=typeof t=="object"?t:Cx(),r=typeof t=="string"?t:Ww,s=Tx(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=rR("firestore");a&&Sxe(s,...a)}return s}function SN(t){if(t._terminated)throw new Be(fe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Axe(t),t._firestoreClient}function Axe(t){var r,s,a,o;const e=t._freezeSettings(),n=Nxe(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new yxe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ki(us.fromBase64String(e))}catch(n){throw new Be(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ki(us.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ki._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ox(e,Ki._jsonSchema))return Ki.fromBase64String(e.bytes)}}Ki._jsonSchemaVersion="firestore/bytes/1.0",Ki._jsonSchema={type:Tr("string",Ki._jsonSchemaVersion),bytes:Tr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Be(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new as(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function kh(){return new Fx(eC)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Be(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Be(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qt(this._lat,e._lat)||Qt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:To._jsonSchemaVersion}}static fromJSON(e){if(Ox(e,To._jsonSchema))return new To(e.latitude,e.longitude)}}To._jsonSchemaVersion="firestore/geoPoint/1.0",To._jsonSchema={type:Tr("string",To._jsonSchemaVersion),latitude:Tr("number"),longitude:Tr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ba._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ox(e,Ba._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ba(e.vectorValues);throw new Be(fe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ba._jsonSchemaVersion="firestore/vectorValue/1.0",Ba._jsonSchema={type:Tr("string",Ba._jsonSchemaVersion),vectorValues:Tr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Txe=/^__.*__$/;class Cxe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Mu(e,this.data,this.fieldMask,n,this.fieldTransforms):new Mx(e,this.data,n,this.fieldTransforms)}}class c7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Mu(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function u7(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t(40011,{dataSource:t})}}class zR{constructor(e,n,r,s,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new zR({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return e_(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(u7(this.dataSource)&&Txe.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class Pxe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||wN(e)}createContext(e,n,r,s=!1){return new zR({dataSource:e,methodName:n,targetDoc:r,path:as.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vx(t){const e=t._freezeSettings(),n=wN(t._databaseId);return new Pxe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qR(t,e,n,r,s,a={}){const o=t.createContext(a.merge||a.mergeFields?2:0,e,n,s);HR("Data must be an object, but it was:",o,r);const l=f7(r,o);let c,u;if(a.merge)c=new Ei(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){const d=[];for(const h of a.mergeFields){const f=dh(e,h,n);if(!o.contains(f))throw new Be(fe.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);g7(d,f)||d.push(f)}c=new Ei(d),u=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=o.fieldTransforms;return new Cxe(new ai(l),c,u)}class AN extends EN{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof AN}}class WR extends EN{_toFieldTransform(e){return new vye(e.path,new mv)}isEqual(e){return e instanceof WR}}function d7(t,e,n,r){const s=t.createContext(1,e,n);HR("Data must be an object, but it was:",s,r);const a=[],o=ai.empty();Ou(r,(c,u)=>{const d=p7(e,c,n);u=nn(u);const h=s.childContextForFieldPath(d);if(u instanceof AN)a.push(d);else{const f=Bx(u,h);f!=null&&(a.push(d),o.set(d,f))}});const l=new Ei(a);return new c7(o,l,s.fieldTransforms)}function h7(t,e,n,r,s,a){const o=t.createContext(1,e,n),l=[dh(e,r,n)],c=[s];if(a.length%2!=0)throw new Be(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<a.length;f+=2)l.push(dh(e,a[f])),c.push(a[f+1]);const u=[],d=ai.empty();for(let f=l.length-1;f>=0;--f)if(!g7(u,l[f])){const m=l[f];let v=c[f];v=nn(v);const g=o.childContextForFieldPath(m);if(v instanceof AN)u.push(m);else{const y=Bx(v,g);y!=null&&(u.push(m),d.set(m,y))}}const h=new Ei(u);return new c7(d,h,o.fieldTransforms)}function Ixe(t,e,n,r=!1){return Bx(n,t.createContext(r?4:3,e))}function Bx(t,e){if(m7(t=nn(t)))return HR("Unsupported field value:",e,t),f7(t,e);if(t instanceof EN)return function(r,s){if(!u7(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const a=[];let o=0;for(const l of r){let c=Bx(l,s.childContextForArray(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=nn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return pye(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Bn.fromDate(r);return{timestampValue:Qw(s.serializer,a)}}if(r instanceof Bn){const a=new Bn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qw(s.serializer,a)}}if(r instanceof To)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ki)return{bytesValue:AH(s.serializer,r._byteString)};if(r instanceof xr){const a=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:CR(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ba)return function(o,l){const c=o instanceof Ba?o.toArray():o;return{mapValue:{fields:{[tH]:{stringValue:rH},[Hw]:{arrayValue:{values:c.map(d=>{if(typeof d!="number")throw l.createError("VectorValues must only contain numeric values.");return ER(l.serializer,d)})}}}}}}(r,s);if(OH(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${dN(r)}`)}(t,e)}function f7(t,e){const n={};return YW(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ou(t,(r,s)=>{const a=Bx(s,e.childContextForField(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function m7(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Bn||t instanceof To||t instanceof Ki||t instanceof xr||t instanceof EN||t instanceof Ba||OH(t))}function HR(t,e,n){if(!m7(n)||!KW(n)){const r=dN(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function dh(t,e,n){if((e=nn(e))instanceof Fx)return e._internalPath;if(typeof e=="string")return p7(t,e);throw e_("Field path arguments must be of type string or ",t,!1,void 0,n)}const kxe=new RegExp("[~\\*/\\[\\]]");function p7(t,e,n){if(e.search(kxe)>=0)throw e_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fx(...e.split("."))._internalPath}catch{throw e_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function e_(t,e,n,r,s){const a=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Be(fe.INVALID_ARGUMENT,l+t+c)}function g7(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rxe{convertValue(e,n="none"){switch(pu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(mu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _t(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ou(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var r,s,a;const n=(a=(s=(r=e.fields)==null?void 0:r[Hw].arrayValue)==null?void 0:s.values)==null?void 0:a.map(o=>gr(o.doubleValue));return new Ba(n)}convertGeoPoint(e){return new To(gr(e.latitude),gr(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=mN(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(uv(e));default:return null}}convertTimestamp(e){const n=fu(e);return new Bn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=In.fromString(e);pn(RH(r),9688,{name:e});const s=new dv(r.get(1),r.get(3)),a=new dt(r.popFirst(5));return s.isEqual(n)||Pl(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y7 extends Rxe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ki(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xr(this.firestore,null,n)}}function ye(){return new WR("serverTimestamp")}const B$="@firebase/firestore",U$="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v7{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new xr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Oxe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(dh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Oxe extends v7{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mxe(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Be(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class KR{}class GR extends KR{}function Ce(t,e,...n){let r=[];e instanceof KR&&r.push(e),r=r.concat(n),function(a){const o=a.filter(c=>c instanceof YR).length,l=a.filter(c=>c instanceof TN).length;if(o>1||o>0&&l>0)throw new Be(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class TN extends GR{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new TN(e,n,r)}_apply(e){const n=this._parse(e);return x7(e._query,n),new Du(e.firestore,e.converter,iC(e._query,n))}_parse(e){const n=Vx(e.firestore);return function(a,o,l,c,u,d,h){let f;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Be(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){q$(h,d);const v=[];for(const g of h)v.push(z$(c,a,g));f={arrayValue:{values:v}}}else f=z$(c,a,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||q$(h,d),f=Ixe(l,o,h,d==="in"||d==="not-in");return Ar.create(u,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ge(t,e,n){const r=e,s=dh("where",t);return TN._create(s,r,n)}class YR extends KR{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new YR(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Xa.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let o=s;const l=a.getFlattenedFilters();for(const c of l)x7(o,c),o=iC(o,c)}(e._query,n),new Du(e.firestore,e.converter,iC(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class QR extends GR{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new QR(e,n)}_apply(e){const n=function(s,a,o){if(s.startAt!==null)throw new Be(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Be(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fv(a,o)}(e._query,this._field,this._direction);return new Du(e.firestore,e.converter,oye(e._query,n))}}function CN(t,e="asc"){const n=e,r=dh("orderBy",t);return QR._create(r,n)}class XR extends GR{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new XR(e,n,r)}_apply(e){return new Du(e.firestore,e.converter,Gw(e._query,this._limit,this._limitType))}}function ni(t){return Rge("limit",t),XR._create("limit",t,"F")}function z$(t,e,n){if(typeof(n=nn(n))=="string"){if(n==="")throw new Be(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dH(e)&&n.indexOf("/")!==-1)throw new Be(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(In.fromString(n));if(!dt.isDocumentKey(r))throw new Be(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return s$(t,new dt(r))}if(n instanceof xr)return s$(t,n._key);throw new Be(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dN(n)}.`)}function q$(t,e){if(!Array.isArray(t)||t.length===0)throw new Be(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function x7(t,e){const n=function(s,a){for(const o of s)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Be(fe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Be(fe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function ZR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ey{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $d extends v7{constructor(e,n,r,s,a,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new H0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(dh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Be(fe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=$d._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}$d._jsonSchemaVersion="firestore/documentSnapshot/1.0",$d._jsonSchema={type:Tr("string",$d._jsonSchemaVersion),bundleSource:Tr("string","DocumentSnapshot"),bundleName:Tr("string"),bundle:Tr("string")};class H0 extends $d{data(e={}){return super.data(e)}}class Kf{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ey(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new H0(this._firestore,this._userDataWriter,r.key,r,new ey(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Be(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new H0(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ey(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const c=new H0(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ey(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:Dxe(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Be(fe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Kf._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xR.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Dxe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kf._jsonSchemaVersion="firestore/querySnapshot/1.0",Kf._jsonSchema={type:Tr("string",Kf._jsonSchemaVersion),bundleSource:Tr("string","QuerySnapshot"),bundleName:Tr("string"),bundle:Tr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lxe{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Vx(e)}set(e,n,r){this._verifyNotCommitted();const s=cE(e,this._firestore),a=ZR(s.converter,n,r),o=qR(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,zs.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const a=cE(e,this._firestore);let o;return o=typeof(n=nn(n))=="string"||n instanceof Fx?h7(this._dataReader,"WriteBatch.update",a._key,n,r,s):d7(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(o.toMutation(a._key,zs.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=cE(e,this._firestore);return this._mutations=this._mutations.concat(new xN(n._key,zs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Be(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function cE(t,e){if((t=nn(t)).firestore!==e)throw new Be(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(t){t=ua(t,xr);const e=ua(t.firestore,Lu),n=SN(e);return bxe(n,t._key).then(r=>$xe(e,t,r))}function $e(t){t=ua(t,Du);const e=ua(t.firestore,Lu),n=SN(e),r=new y7(e);return Mxe(t._query),wxe(n,t._query).then(s=>new Kf(e,r,t,s))}function dr(t,e,n){t=ua(t,xr);const r=ua(t.firestore,Lu),s=ZR(t.converter,e,n),a=Vx(r);return Ux(r,[qR(a,"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,zs.none())])}function $o(t,e,n,...r){t=ua(t,xr);const s=ua(t.firestore,Lu),a=Vx(s);let o;return o=typeof(e=nn(e))=="string"||e instanceof Fx?h7(a,"updateDoc",t._key,e,n,r):d7(a,"updateDoc",t._key,e),Ux(s,[o.toMutation(t._key,zs.exists(!0))])}function Za(t){return Ux(ua(t.firestore,Lu),[new xN(t._key,zs.none())])}function Nn(t,e){const n=ua(t.firestore,Lu),r=He(t),s=ZR(t.converter,e),a=Vx(t.firestore);return Ux(n,[qR(a,"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,zs.exists(!1))]).then(()=>r)}function Ux(t,e){const n=SN(t);return _xe(n,e)}function $xe(t,e,n){const r=n.docs.get(e._key),s=new y7(t);return new $d(t,s,e._key,r,new ey(n.hasPendingWrites,n.fromCache),e.converter)}function kl(t){return t=ua(t,Lu),SN(t),new Lxe(t,e=>Ux(t,e))}(function(e,n=!0){wge(Ch),du(new Al("firestore",(r,{instanceIdentifier:s,options:a})=>{const o=r.getProvider("app").getImmediate(),l=new Lu(new Nge(r.getProvider("auth-internal")),new Age(o,r.getProvider("app-check-internal")),Wge(o,s),o);return a={useFetchStreams:n,...a},l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),ta(B$,U$,e),ta(B$,U$,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fxe="type.googleapis.com/google.protobuf.Int64Value",Vxe="type.googleapis.com/google.protobuf.UInt64Value";function b7(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function t_(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>t_(e));if(typeof t=="function"||typeof t=="object")return b7(t,e=>t_(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Rm(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case Fxe:case Vxe:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Rm(e)):typeof t=="function"||typeof t=="object"?b7(t,e=>Rm(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W$={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class li extends Ja{constructor(e,n,r){super(`${JR}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,li.prototype)}}function Bxe(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function n_(t,e){let n=Bxe(t),r=n,s;try{const a=e&&e.error;if(a){const o=a.status;if(typeof o=="string"){if(!W$[o])return new li("internal","internal");n=W$[o],r=o}const l=a.message;typeof l=="string"&&(r=l),s=a.details,s!==void 0&&(s=Rm(s))}}catch{}return n==="ok"?null:new li(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uxe{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ii(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s==null||s.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="us-central1",zxe=/^data: (.*?)(?:\n|$)/;function qxe(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new li("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class Wxe{constructor(e,n,r,s,a=pC,o=(...l)=>fetch(...l)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new Uxe(e,n,r,s),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(a);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=pC}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Hxe(t,e,n){const r=Ho(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(aN(t.emulatorOrigin+"/backends"),oN("Functions",!0))}function Kxe(t,e,n){const r=s=>Yxe(t,e,s,{});return r.stream=(s,a)=>Xxe(t,e,s,a),r}function w7(t){return t.emulatorOrigin&&Ho(t.emulatorOrigin)?"include":void 0}async function Gxe(t,e,n,r,s){n["Content-Type"]="application/json";let a;try{a=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:w7(s)})}catch{return{status:0,json:null}}let o=null;try{o=await a.json()}catch{}return{status:a.status,json:o}}async function _7(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function Yxe(t,e,n,r){const s=t._url(e);return Qxe(t,s,n,r)}async function Qxe(t,e,n,r){n=t_(n);const s={data:n},a=await _7(t,r),o=r.timeout||7e4,l=qxe(o),c=await Promise.race([Gxe(e,s,a,t.fetchImpl,t),l.promise,t.cancelAllRequests]);if(l.cancel(),!c)throw new li("cancelled","Firebase Functions instance was deleted.");const u=n_(c.status,c.json);if(u)throw u;if(!c.json)throw new li("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new li("internal","Response is missing data field.");return{data:Rm(d)}}function Xxe(t,e,n,r){const s=t._url(e);return Zxe(t,s,n,r||{})}async function Zxe(t,e,n,r){var f;n=t_(n);const s={data:n},a=await _7(t,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:a,signal:r==null?void 0:r.signal,credentials:w7(t)})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const g=new li("cancelled","Request was cancelled.");return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}const v=n_(0,null);return{data:Promise.reject(v),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(v)}}}}}}let l,c;const u=new Promise((m,v)=>{l=m,c=v});(f=r==null?void 0:r.signal)==null||f.addEventListener("abort",()=>{const m=new li("cancelled","Request was cancelled.");c(m)});const d=o.body.getReader(),h=Jxe(d,l,c,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const m=h.getReader();return{async next(){const{value:v,done:g}=await m.read();return{value:v,done:g}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:u}}function Jxe(t,e,n,r){const s=(o,l)=>{const c=o.match(zxe);if(!c)return;const u=c[1];try{const d=JSON.parse(u);if("result"in d){e(Rm(d.result));return}if("message"in d){l.enqueue(Rm(d.message));return}if("error"in d){const h=n_(0,d);l.error(h),n(h);return}}catch(d){if(d instanceof li){l.error(d),n(d);return}}},a=new TextDecoder;return new ReadableStream({start(o){let l="";return c();async function c(){if(r!=null&&r.aborted){const u=new li("cancelled","Request was cancelled");return o.error(u),n(u),Promise.resolve()}try{const{value:u,done:d}=await t.read();if(d){l.trim()&&s(l.trim(),o),o.close();return}if(r!=null&&r.aborted){const f=new li("cancelled","Request was cancelled");o.error(f),n(f),await t.cancel();return}l+=a.decode(u,{stream:!0});const h=l.split(`
`);l=h.pop()||"";for(const f of h)f.trim()&&s(f.trim(),o);return c()}catch(u){const d=u instanceof li?u:n_(0,null);o.error(d),n(d)}}},cancel(){return t.cancel()}})}const H$="@firebase/functions",K$="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ebe="auth-internal",tbe="app-check-internal",nbe="messaging-internal";function rbe(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),a=n.getProvider(ebe),o=n.getProvider(nbe),l=n.getProvider(tbe);return new Wxe(s,a,o,l,r)};du(new Al(JR,e,"PUBLIC").setMultipleInstances(!0)),ta(H$,K$,t),ta(H$,K$,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sbe(t=Cx(),e=pC){const r=Tx(nn(t),JR).getImmediate({identifier:e}),s=rR("functions");return s&&ibe(r,...s),r}function ibe(t,e,n){Hxe(nn(t),e,n)}function abe(t,e,n){return Kxe(nn(t),e)}rbe();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j7="firebasestorage.googleapis.com",N7="storageBucket",obe=2*60*1e3,lbe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends Ja{constructor(e,n,r=0){super(uE(e),`Firebase Storage: ${n} (${uE(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return uE(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var mr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(mr||(mr={}));function uE(t){return"storage/"+t}function eO(){const t="An unknown error occurred, please check the error payload for server response.";return new pr(mr.UNKNOWN,t)}function cbe(t){return new pr(mr.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function ube(t){return new pr(mr.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function dbe(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new pr(mr.UNAUTHENTICATED,t)}function hbe(){return new pr(mr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function fbe(t){return new pr(mr.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function mbe(){return new pr(mr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function pbe(){return new pr(mr.CANCELED,"User canceled the upload/download.")}function gbe(t){return new pr(mr.INVALID_URL,"Invalid URL '"+t+"'.")}function ybe(t){return new pr(mr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function vbe(){return new pr(mr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+N7+"' property when initializing the app?")}function xbe(){return new pr(mr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function bbe(){return new pr(mr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function wbe(t){return new pr(mr.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function gC(t){return new pr(mr.INVALID_ARGUMENT,t)}function S7(){return new pr(mr.APP_DELETED,"The Firebase app was deleted.")}function _be(t){return new pr(mr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _y(t,e){return new pr(mr.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Eg(t){throw new pr(mr.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ai.makeFromUrl(e,n)}catch{return new Ai(e,"")}if(r.path==="")return r;throw ybe(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(T){T.path.charAt(T.path.length-1)==="/"&&(T.path_=T.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(T){T.path_=decodeURIComponent(T.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${s}/o${f}`,"i"),v={bucket:1,path:3},g=n===j7?"(?:storage.googleapis.com|storage.cloud.google.com)":n,y="([^?#]*)",w=new RegExp(`^https?://${g}/${s}/${y}`,"i"),E=[{regex:l,indices:c,postModify:a},{regex:m,indices:v,postModify:u},{regex:w,indices:{bucket:1,path:2},postModify:u}];for(let T=0;T<E.length;T++){const x=E[T],S=x.regex.exec(e);if(S){const _=S[x.indices.bucket];let p=S[x.indices.path];p||(p=""),r=new Ai(_,p),x.postModify(r);break}}if(r==null)throw gbe(e);return r}}class jbe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nbe(t,e,n){let r=1,s=null,a=null,o=!1,l=0;function c(){return l===2}let u=!1;function d(...y){u||(u=!0,e.apply(null,y))}function h(y){s=setTimeout(()=>{s=null,t(m,c())},y)}function f(){a&&clearTimeout(a)}function m(y,...w){if(u){f();return}if(y){f(),d.call(null,y,...w);return}if(c()||o){f(),d.call(null,y,...w);return}r<64&&(r*=2);let E;l===1?(l=2,E=0):E=(r+Math.random())*1e3,h(E)}let v=!1;function g(y){v||(v=!0,f(),!u&&(s!==null?(y||(l=2),clearTimeout(s),h(0)):y||(l=1)))}return h(0),a=setTimeout(()=>{o=!0,g(!0)},n),g}function Sbe(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ebe(t){return t!==void 0}function Abe(t){return typeof t=="object"&&!Array.isArray(t)}function tO(t){return typeof t=="string"||t instanceof String}function G$(t){return nO()&&t instanceof Blob}function nO(){return typeof Blob<"u"}function Y$(t,e,n,r){if(r<e)throw gC(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw gC(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function E7(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Fd;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Fd||(Fd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tbe(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cbe{constructor(e,n,r,s,a,o,l,c,u,d,h,f=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,g)=>{this.resolve_=v,this.reject_=g,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Qb(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===Fd.NO_ERROR,c=a.getStatus();if(!l||Tbe(c,this.additionalRetryCodes_)&&this.retry){const d=a.getErrorCode()===Fd.ABORT;r(!1,new Qb(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new Qb(u,a))})},n=(r,s)=>{const a=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());Ebe(c)?a(c):a()}catch(c){o(c)}else if(l!==null){const c=eO();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?S7():pbe();o(c)}else{const c=mbe();o(c)}};this.canceled_?n(!1,new Qb(!1,null,!0)):this.backoffId_=Nbe(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Sbe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Qb{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Pbe(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Ibe(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function kbe(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Rbe(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Obe(t,e,n,r,s,a,o=!0,l=!1){const c=E7(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return kbe(d,e),Pbe(d,n),Ibe(d,a),Rbe(d,r),new Cbe(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mbe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Dbe(...t){const e=Mbe();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(nO())return new Blob(t);throw new pr(mr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Lbe(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $be(t){if(typeof atob>"u")throw wbe("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class dE{constructor(e,n){this.data=e,this.contentType=n||null}}function Fbe(t,e){switch(t){case yo.RAW:return new dE(A7(e));case yo.BASE64:case yo.BASE64URL:return new dE(T7(t,e));case yo.DATA_URL:return new dE(Bbe(e),Ube(e))}throw eO()}function A7(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,o=t.charCodeAt(++n);r=65536|(a&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Vbe(t){let e;try{e=decodeURIComponent(t)}catch{throw _y(yo.DATA_URL,"Malformed data URL.")}return A7(e)}function T7(t,e){switch(t){case yo.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw _y(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case yo.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw _y(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=$be(e)}catch(s){throw s.message.includes("polyfill")?s:_y(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class C7{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw _y(yo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=zbe(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Bbe(t){const e=new C7(t);return e.base64?T7(yo.BASE64,e.rest):Vbe(e.rest)}function Ube(t){return new C7(t).contentType}function zbe(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n){let r=0,s="";G$(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(G$(this.data_)){const r=this.data_,s=Lbe(r,e,n);return s===null?null:new Nc(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Nc(r,!0)}}static getBlob(...e){if(nO()){const n=e.map(r=>r instanceof Nc?r.data_:r);return new Nc(Dbe.apply(null,n))}else{const n=e.map(o=>tO(o)?Fbe(yo.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let a=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[a++]=o[l]}),new Nc(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P7(t){let e;try{e=JSON.parse(t)}catch{return null}return Abe(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qbe(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Wbe(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function I7(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hbe(t,e){return e}class Ps{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||Hbe}}let Xb=null;function Kbe(t){return!tO(t)||t.length<2?t:I7(t)}function k7(){if(Xb)return Xb;const t=[];t.push(new Ps("bucket")),t.push(new Ps("generation")),t.push(new Ps("metageneration")),t.push(new Ps("name","fullPath",!0));function e(a,o){return Kbe(o)}const n=new Ps("name");n.xform=e,t.push(n);function r(a,o){return o!==void 0?Number(o):o}const s=new Ps("size");return s.xform=r,t.push(s),t.push(new Ps("timeCreated")),t.push(new Ps("updated")),t.push(new Ps("md5Hash",null,!0)),t.push(new Ps("cacheControl",null,!0)),t.push(new Ps("contentDisposition",null,!0)),t.push(new Ps("contentEncoding",null,!0)),t.push(new Ps("contentLanguage",null,!0)),t.push(new Ps("contentType",null,!0)),t.push(new Ps("metadata","customMetadata",!0)),Xb=t,Xb}function Gbe(t,e){function n(){const r=t.bucket,s=t.fullPath,a=new Ai(r,s);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function Ybe(t,e,n){const r={};r.type="file";const s=n.length;for(let a=0;a<s;a++){const o=n[a];r[o.local]=o.xform(r,e[o.server])}return Gbe(r,t),r}function R7(t,e,n){const r=P7(e);return r===null?null:Ybe(t,r,n)}function Qbe(t,e,n,r){const s=P7(e);if(s===null||!tO(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(u=>{const d=t.bucket,h=t.fullPath,f="/b/"+o(d)+"/o/"+o(h),m=rO(f,n,r),v=E7({alt:"media",token:u});return m+v})[0]}function Xbe(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const a=e[s];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class O7{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M7(t){if(!t)throw eO()}function Zbe(t,e){function n(r,s){const a=R7(t,s,e);return M7(a!==null),a}return n}function Jbe(t,e){function n(r,s){const a=R7(t,s,e);return M7(a!==null),Qbe(a,s,t.host,t._protocol)}return n}function D7(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=hbe():s=dbe():n.getStatus()===402?s=ube(t.bucket):n.getStatus()===403?s=fbe(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function e0e(t){const e=D7(t);function n(r,s){let a=e(r,s);return r.getStatus()===404&&(a=cbe(t.path)),a.serverResponse=s.serverResponse,a}return n}function t0e(t,e,n){const r=e.fullServerUrl(),s=rO(r,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,l=new O7(s,a,Jbe(t,n),o);return l.errorHandler=e0e(e),l}function n0e(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function r0e(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=n0e(null,e)),r}function s0e(t,e,n,r,s){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let E="";for(let T=0;T<2;T++)E=E+Math.random().toString().slice(2);return E}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=r0e(e,r,s),d=Xbe(u,n),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,f=`\r
--`+c+"--",m=Nc.getBlob(h,r,f);if(m===null)throw xbe();const v={name:u.fullPath},g=rO(a,t.host,t._protocol),y="POST",w=t.maxUploadRetryTime,b=new O7(g,y,Zbe(t,n),w);return b.urlParams=v,b.headers=o,b.body=m.uploadData(),b.errorHandler=D7(e),b}class i0e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,a){if(this.sent_)throw Eg("cannot .send() more than once");if(Ho(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const o in a)a.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,a[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Eg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Eg("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Eg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Eg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class a0e extends i0e{initXhr(){this.xhr_.responseType="text"}}function L7(){return new a0e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n){this._service=e,n instanceof Ai?this._location=n:this._location=Ai.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new hh(e,n)}get root(){const e=new Ai(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return I7(this._location.path)}get storage(){return this._service}get parent(){const e=qbe(this._location.path);if(e===null)return null;const n=new Ai(this._location.bucket,e);return new hh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw _be(e)}}function o0e(t,e,n){t._throwIfRoot("uploadBytes");const r=s0e(t.storage,t._location,k7(),new Nc(e,!0),n);return t.storage.makeRequestWithTokens(r,L7).then(s=>({metadata:s,ref:t}))}function l0e(t){t._throwIfRoot("getDownloadURL");const e=t0e(t.storage,t._location,k7());return t.storage.makeRequestWithTokens(e,L7).then(n=>{if(n===null)throw bbe();return n})}function c0e(t,e){const n=Wbe(t._location.path,e),r=new Ai(t._location.bucket,n);return new hh(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0e(t){return/^[A-Za-z]+:\/\//.test(t)}function d0e(t,e){return new hh(t,e)}function $7(t,e){if(t instanceof sO){const n=t;if(n._bucket==null)throw vbe();const r=new hh(n,n._bucket);return e!=null?$7(r,e):r}else return e!==void 0?c0e(t,e):t}function h0e(t,e){if(e&&u0e(e)){if(t instanceof sO)return d0e(t,e);throw gC("To use ref(service, url), the first argument must be a Storage instance.")}else return $7(t,e)}function Q$(t,e){const n=e==null?void 0:e[N7];return n==null?null:Ai.makeFromBucketSpec(n,t)}function f0e(t,e,n,r={}){t.host=`${e}:${n}`;const s=Ho(e);s&&(aN(`https://${t.host}/b`),oN("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:Xq(a,t.app.options.projectId))}class sO{constructor(e,n,r,s,a,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=o,this._bucket=null,this._host=j7,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=obe,this._maxUploadRetryTime=lbe,this._requests=new Set,s!=null?this._bucket=Ai.makeFromBucketSpec(s,this._host):this._bucket=Q$(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ai.makeFromBucketSpec(this._url,e):this._bucket=Q$(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Y$("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Y$("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(ii(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new hh(this,e)}_makeRequest(e,n,r,s,a=!0){if(this._deleted)return new jbe(S7());{const o=Obe(e,this._appId,r,s,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const X$="@firebase/storage",Z$="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F7="storage";function m0e(t,e,n){return t=nn(t),o0e(t,e,n)}function p0e(t){return t=nn(t),l0e(t)}function g0e(t,e){return t=nn(t),h0e(t,e)}function y0e(t=Cx(),e){t=nn(t);const r=Tx(t,F7).getImmediate({identifier:e}),s=rR("storage");return s&&v0e(r,...s),r}function v0e(t,e,n,r={}){f0e(t,e,n,r)}function x0e(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new sO(n,r,s,e,Ch)}function b0e(){du(new Al(F7,x0e,"PUBLIC").setMultipleInstances(!0)),ta(X$,Z$,""),ta(X$,Z$,"esm2020")}b0e();const Wh=t=>t==null?void 0:t.replace(/^"|"$/g,"").replace(/^'|'$/g,""),V7={apiKey:Wh('"AIzaSyBDWUqW91mg2wvCJ6lAJ1wrBb5az6elfUU"')??"FIREBASE_API_KEY_PLACEHOLDER",authDomain:Wh('"zedbooks-53601.firebaseapp.com"')??"FIREBASE_AUTH_DOMAIN_PLACEHOLDER",projectId:Wh('"zedbooks-53601"')??"FIREBASE_PROJECT_ID_PLACEHOLDER",storageBucket:Wh('"zedbooks-53601.firebasestorage.app"')??"FIREBASE_STORAGE_BUCKET_PLACEHOLDER",messagingSenderId:Wh('"938148277875"')??"FIREBASE_MESSAGING_SENDER_ID_PLACEHOLDER",appId:Wh('"1:938148277875:web:c98c15ac02f3625d20c406"')??"FIREBASE_APP_ID_PLACEHOLDER"},w0e="us-central1",_0e=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"],Co=_0e.every(t=>{const e=V7[t];return!!e&&!e.includes("PLACEHOLDER")}),Cn=()=>{if(!Co)throw new Error("Firebase is not configured. Set VITE_FIREBASE_* environment variables before running the migrated backend.")},PN=Ofe().length?Cx():eW(V7),r_=xge(PN),te=Exe(PN),j0e=sbe(PN,w0e),N0e=y0e(PN),Xn=async(t,e)=>(Cn(),(await abe(j0e,t)(e)).data),Hh=()=>r_,Ds={async signIn(t,e){return Cn(),epe(Hh(),t,e)},async signUp(t){Cn();const e=await Jme(Hh(),t.email,t.password);return t.fullName&&await npe(e.user,{displayName:t.fullName}),await L4(e.user),await Xn("bootstrapUserAccount",{...t,uid:e.user.uid}),e},async resendVerificationEmail(){Cn();const t=this.getCurrentUser();if(!t)throw new Error("No authenticated user found.");await L4(t)},async sendResetPasswordEmail(t){Cn(),await Gme(Hh(),t)},async updateUserPassword(t){Cn();const e=this.getCurrentUser();if(!e)throw new Error("No authenticated user found.");await rpe(e,t)},async logout(){Cn(),await lpe(Hh())},async getIdToken(t=!1){const e=this.getCurrentUser();return e?e.getIdToken(t):null},getCurrentUser(){return Co?Hh().currentUser:null},onAuthStateChanged(t){return Co?{unsubscribe:ope(Hh(),t)}:(t(null),{unsubscribe:()=>{}})},async sendInvitation(t){Cn(),await Xn("createInvitation",t)},async acceptInvitation(t){return Cn(),Xn("acceptInvitation",{token:t})},async ensureCurrentMembership(){return Cn(),Xn("ensureCurrentMembership",{})}},B7=N.createContext(void 0),hE=t=>({id:t.uid,uid:t.uid,email:t.email,displayName:t.displayName,phoneNumber:t.phoneNumber,emailVerified:t.emailVerified}),fE=async t=>({userId:t.uid,email:t.email,emailVerified:t.emailVerified,idToken:await t.getIdToken()});function S0e({children:t}){const[e,n]=N.useState(null),[r,s]=N.useState(null),[a,o]=N.useState(!0),l=N.useCallback(()=>{n(null),s(null)},[]),c=N.useCallback(async()=>{if(!Co){l();return}try{const h=Ds.getCurrentUser();if(!h){l();return}await h.reload();const f=Ds.getCurrentUser();if(!f){l();return}s(hE(f)),n(await fE(f))}catch(h){l(),console.error("Failed to refresh Firebase session:",h)}},[l]),u=N.useCallback(async()=>{try{Co&&await Ds.logout()}catch(h){console.error("Firebase sign out failed:",h)}finally{l(),J.success("Signed out successfully")}},[l]);N.useEffect(()=>{let h=!0;if(!Co){o(!1);return}const f=Ds.getCurrentUser();f?(s(hE(f)),fE(f).then(v=>{h&&n(v)}).finally(()=>{h&&o(!1)})):o(!1);const m=Ds.onAuthStateChanged(async v=>{if(h){if(!v){l(),o(!1);return}s(hE(v)),n(await fE(v)),o(!1)}});return()=>{h=!1,m.unsubscribe()}},[l]);const d={session:e,user:r,isLoading:a,isAuthenticated:!!(e&&r),signOut:u,refreshSession:c};return i.jsx(B7.Provider,{value:d,children:t})}function ct(){const t=N.useContext(B7);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const iO=Th("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),H=N.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},a)=>{const o=r?Ah:"button";return i.jsx(o,{className:pe(iO({variant:e,size:n,className:t})),ref:a,...s})});H.displayName="Button";const Z=N.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:pe("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Z.displayName="Card";const ee=N.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:pe("flex flex-col space-y-1.5 p-6",t),...e}));ee.displayName="CardHeader";const ne=N.forwardRef(({className:t,...e},n)=>i.jsx("h3",{ref:n,className:pe("text-2xl font-semibold leading-none tracking-tight",t),...e}));ne.displayName="CardTitle";const St=N.forwardRef(({className:t,...e},n)=>i.jsx("p",{ref:n,className:pe("text-sm text-muted-foreground",t),...e}));St.displayName="CardDescription";const re=N.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:pe("p-6 pt-0",t),...e}));re.displayName="CardContent";const E0e=N.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:pe("flex items-center p-6 pt-0",t),...e}));E0e.displayName="CardFooter";class A0e extends N.Component{constructor(){super(...arguments);xb(this,"state",{hasError:!1,error:null,errorInfo:null});xb(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});xb(this,"handleGoHome",()=>{window.location.href="/"})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r),this.setState({errorInfo:r})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:i.jsxs(Z,{className:"w-full max-w-md",children:[i.jsxs(ee,{className:"text-center",children:[i.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-destructive/10",children:i.jsx(Ga,{className:"h-6 w-6 text-destructive"})}),i.jsx(ne,{children:"Something went wrong"}),i.jsx(St,{children:"An unexpected error occurred. Please try again or return to the home page."})]}),i.jsxs(re,{className:"space-y-4",children:[!1,i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(H,{onClick:this.handleRetry,className:"flex-1",children:[i.jsx(k8,{className:"mr-2 h-4 w-4"}),"Try Again"]}),i.jsxs(H,{onClick:this.handleGoHome,variant:"outline",className:"flex-1",children:[i.jsx(yoe,{className:"mr-2 h-4 w-4"}),"Go Home"]})]})]})]})}):this.props.children}}function Gf({message:t="Loading...",className:e,size:n="md",fullScreen:r=!1}){const s={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"},a=i.jsxs("div",{className:pe("flex flex-col items-center justify-center gap-3",e),children:[i.jsx(Rn,{className:pe("animate-spin text-primary",s[n])}),t&&i.jsx("p",{className:"text-sm text-muted-foreground animate-pulse",children:t})]});return r?i.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-background/80 backdrop-blur-sm z-50",children:a}):a}var T0e=N.createContext(void 0);function zx(t){const e=N.useContext(T0e);return t||e||"ltr"}var mE=0;function aO(){N.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??J$()),document.body.insertAdjacentElement("beforeend",t[1]??J$()),mE++,()=>{mE===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),mE--}},[])}function J$(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var pE="focusScope.autoFocusOnMount",gE="focusScope.autoFocusOnUnmount",eF={bubbles:!1,cancelable:!0},C0e="FocusScope",IN=N.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=t,[l,c]=N.useState(null),u=ur(s),d=ur(a),h=N.useRef(null),f=Dt(e,g=>c(g)),m=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(r){let g=function(E){if(m.paused||!l)return;const T=E.target;l.contains(T)?h.current=T:cc(h.current,{select:!0})},y=function(E){if(m.paused||!l)return;const T=E.relatedTarget;T!==null&&(l.contains(T)||cc(h.current,{select:!0}))},w=function(E){if(document.activeElement===document.body)for(const x of E)x.removedNodes.length>0&&cc(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const b=new MutationObserver(w);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),b.disconnect()}}},[r,l,m.paused]),N.useEffect(()=>{if(l){nF.add(m);const g=document.activeElement;if(!l.contains(g)){const w=new CustomEvent(pE,eF);l.addEventListener(pE,u),l.dispatchEvent(w),w.defaultPrevented||(P0e(M0e(U7(l)),{select:!0}),document.activeElement===g&&cc(l))}return()=>{l.removeEventListener(pE,u),setTimeout(()=>{const w=new CustomEvent(gE,eF);l.addEventListener(gE,d),l.dispatchEvent(w),w.defaultPrevented||cc(g??document.body,{select:!0}),l.removeEventListener(gE,d),nF.remove(m)},0)}}},[l,u,d,m]);const v=N.useCallback(g=>{if(!n&&!r||m.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,w=document.activeElement;if(y&&w){const b=g.currentTarget,[E,T]=I0e(b);E&&T?!g.shiftKey&&w===T?(g.preventDefault(),n&&cc(E,{select:!0})):g.shiftKey&&w===E&&(g.preventDefault(),n&&cc(T,{select:!0})):w===b&&g.preventDefault()}},[n,r,m.paused]);return i.jsx(Je.div,{tabIndex:-1,...o,ref:f,onKeyDown:v})});IN.displayName=C0e;function P0e(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(cc(r,{select:e}),document.activeElement!==n)return}function I0e(t){const e=U7(t),n=tF(e,t),r=tF(e.reverse(),t);return[n,r]}function U7(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function tF(t,e){for(const n of t)if(!k0e(n,{upTo:e}))return n}function k0e(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function R0e(t){return t instanceof HTMLInputElement&&"select"in t}function cc(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&R0e(t)&&e&&t.select()}}var nF=O0e();function O0e(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=rF(t,e),t.unshift(e)},remove(e){var n;t=rF(t,e),(n=t[0])==null||n.resume()}}}function rF(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function M0e(t){return t.filter(e=>e.tagName!=="A")}var yE="rovingFocusGroup.onEntryFocus",D0e={bubbles:!1,cancelable:!0},qx="RovingFocusGroup",[yC,z7,L0e]=Kj(qx),[$0e,kN]=ds(qx,[L0e]),[F0e,V0e]=$0e(qx),q7=N.forwardRef((t,e)=>i.jsx(yC.Provider,{scope:t.__scopeRovingFocusGroup,children:i.jsx(yC.Slot,{scope:t.__scopeRovingFocusGroup,children:i.jsx(B0e,{...t,ref:e})})}));q7.displayName=qx;var B0e=N.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,f=N.useRef(null),m=Dt(e,f),v=zx(a),[g,y]=Ha({prop:o,defaultProp:l??null,onChange:c,caller:qx}),[w,b]=N.useState(!1),E=ur(u),T=z7(n),x=N.useRef(!1),[S,_]=N.useState(0);return N.useEffect(()=>{const p=f.current;if(p)return p.addEventListener(yE,E),()=>p.removeEventListener(yE,E)},[E]),i.jsx(F0e,{scope:n,orientation:r,dir:v,loop:s,currentTabStopId:g,onItemFocus:N.useCallback(p=>y(p),[y]),onItemShiftTab:N.useCallback(()=>b(!0),[]),onFocusableItemAdd:N.useCallback(()=>_(p=>p+1),[]),onFocusableItemRemove:N.useCallback(()=>_(p=>p-1),[]),children:i.jsx(Je.div,{tabIndex:w||S===0?-1:0,"data-orientation":r,...h,ref:m,style:{outline:"none",...t.style},onMouseDown:Pe(t.onMouseDown,()=>{x.current=!0}),onFocus:Pe(t.onFocus,p=>{const A=!x.current;if(p.target===p.currentTarget&&A&&!w){const P=new CustomEvent(yE,D0e);if(p.currentTarget.dispatchEvent(P),!P.defaultPrevented){const C=T().filter(W=>W.focusable),I=C.find(W=>W.active),R=C.find(W=>W.id===g),z=[I,R,...C].filter(Boolean).map(W=>W.ref.current);K7(z,d)}}x.current=!1}),onBlur:Pe(t.onBlur,()=>b(!1))})})}),W7="RovingFocusGroupItem",H7=N.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:o,...l}=t,c=ea(),u=a||c,d=V0e(W7,n),h=d.currentTabStopId===u,f=z7(n),{onFocusableItemAdd:m,onFocusableItemRemove:v,currentTabStopId:g}=d;return N.useEffect(()=>{if(r)return m(),()=>v()},[r,m,v]),i.jsx(yC.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:i.jsx(Je.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:e,onMouseDown:Pe(t.onMouseDown,y=>{r?d.onItemFocus(u):y.preventDefault()}),onFocus:Pe(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:Pe(t.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){d.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const w=q0e(y,d.orientation,d.dir);if(w!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let E=f().filter(T=>T.focusable).map(T=>T.ref.current);if(w==="last")E.reverse();else if(w==="prev"||w==="next"){w==="prev"&&E.reverse();const T=E.indexOf(y.currentTarget);E=d.loop?W0e(E,T+1):E.slice(T+1)}setTimeout(()=>K7(E))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:g!=null}):o})})});H7.displayName=W7;var U0e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function z0e(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function q0e(t,e,n){const r=z0e(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return U0e[r]}function K7(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function W0e(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var G7=q7,Y7=H7,H0e=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Kh=new WeakMap,Zb=new WeakMap,Jb={},vE=0,Q7=function(t){return t&&(t.host||Q7(t.parentNode))},K0e=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Q7(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},G0e=function(t,e,n,r){var s=K0e(e,Array.isArray(t)?t:[t]);Jb[n]||(Jb[n]=new WeakMap);var a=Jb[n],o=[],l=new Set,c=new Set(s),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(l.has(f))d(f);else try{var m=f.getAttribute(r),v=m!==null&&m!=="false",g=(Kh.get(f)||0)+1,y=(a.get(f)||0)+1;Kh.set(f,g),a.set(f,y),o.push(f),g===1&&v&&Zb.set(f,!0),y===1&&f.setAttribute(n,"true"),v||f.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",f,w)}})};return d(e),l.clear(),vE++,function(){o.forEach(function(h){var f=Kh.get(h)-1,m=a.get(h)-1;Kh.set(h,f),a.set(h,m),f||(Zb.has(h)||h.removeAttribute(r),Zb.delete(h)),m||h.removeAttribute(n)}),vE--,vE||(Kh=new WeakMap,Kh=new WeakMap,Zb=new WeakMap,Jb={})}},oO=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=H0e(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),G0e(r,s,n,"aria-hidden")):function(){return null}},po=function(){return po=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},po.apply(this,arguments)};function X7(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Y0e(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}var K0="right-scroll-bar-position",G0="width-before-scroll-bar",Q0e="with-scroll-bars-hidden",X0e="--removed-body-scroll-bar-size";function xE(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Z0e(t,e){var n=N.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var J0e=typeof window<"u"?N.useLayoutEffect:N.useEffect,sF=new WeakMap;function ewe(t,e){var n=Z0e(null,function(r){return t.forEach(function(s){return xE(s,r)})});return J0e(function(){var r=sF.get(n);if(r){var s=new Set(r),a=new Set(t),o=n.current;s.forEach(function(l){a.has(l)||xE(l,null)}),a.forEach(function(l){s.has(l)||xE(l,o)})}sF.set(n,t)},[t]),n}function twe(t){return t}function nwe(t,e){e===void 0&&(e=twe);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var o=e(a,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var c=function(){var d=o;o=[],d.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return s}function rwe(t){t===void 0&&(t={});var e=nwe(null);return e.options=po({async:!0,ssr:!1},t),e}var Z7=function(t){var e=t.sideCar,n=X7(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return N.createElement(r,po({},n))};Z7.isSideCarExport=!0;function swe(t,e){return t.useMedium(e),Z7}var J7=rwe(),bE=function(){},RN=N.forwardRef(function(t,e){var n=N.useRef(null),r=N.useState({onScrollCapture:bE,onWheelCapture:bE,onTouchMoveCapture:bE}),s=r[0],a=r[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,m=t.noRelative,v=t.noIsolation,g=t.inert,y=t.allowPinchZoom,w=t.as,b=w===void 0?"div":w,E=t.gapMode,T=X7(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),x=f,S=ewe([n,e]),_=po(po({},T),s);return N.createElement(N.Fragment,null,d&&N.createElement(x,{sideCar:J7,removeScrollBar:u,shards:h,noRelative:m,noIsolation:v,inert:g,setCallbacks:a,allowPinchZoom:!!y,lockRef:n,gapMode:E}),o?N.cloneElement(N.Children.only(l),po(po({},_),{ref:S})):N.createElement(b,po({},_,{className:c,ref:S}),l))});RN.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RN.classNames={fullWidth:G0,zeroRight:K0};var iwe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function awe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=iwe();return e&&t.setAttribute("nonce",e),t}function owe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function lwe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var cwe=function(){var t=0,e=null;return{add:function(n){t==0&&(e=awe())&&(owe(e,n),lwe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},uwe=function(){var t=cwe();return function(e,n){N.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},eK=function(){var t=uwe(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},dwe={left:0,top:0,right:0,gap:0},wE=function(t){return parseInt(t||"",10)||0},hwe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[wE(n),wE(r),wE(s)]},fwe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return dwe;var e=hwe(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},mwe=eK(),Yf="data-scroll-locked",pwe=function(t,e,n,r){var s=t.left,a=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Q0e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Yf,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(K0,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(G0,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(K0," .").concat(K0,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(G0," .").concat(G0,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Yf,`] {
    `).concat(X0e,": ").concat(l,`px;
  }
`)},iF=function(){var t=parseInt(document.body.getAttribute(Yf)||"0",10);return isFinite(t)?t:0},gwe=function(){N.useEffect(function(){return document.body.setAttribute(Yf,(iF()+1).toString()),function(){var t=iF()-1;t<=0?document.body.removeAttribute(Yf):document.body.setAttribute(Yf,t.toString())}},[])},ywe=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;gwe();var a=N.useMemo(function(){return fwe(s)},[s]);return N.createElement(mwe,{styles:pwe(a,!e,s,n?"":"!important")})},vC=!1;if(typeof window<"u")try{var e0=Object.defineProperty({},"passive",{get:function(){return vC=!0,!0}});window.addEventListener("test",e0,e0),window.removeEventListener("test",e0,e0)}catch{vC=!1}var Gh=vC?{passive:!1}:!1,vwe=function(t){return t.tagName==="TEXTAREA"},tK=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!vwe(t)&&n[e]==="visible")},xwe=function(t){return tK(t,"overflowY")},bwe=function(t){return tK(t,"overflowX")},aF=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=nK(t,r);if(s){var a=rK(t,r),o=a[1],l=a[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},wwe=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},_we=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},nK=function(t,e){return t==="v"?xwe(e):bwe(e)},rK=function(t,e){return t==="v"?wwe(e):_we(e)},jwe=function(t,e){return t==="h"&&e==="rtl"?-1:1},Nwe=function(t,e,n,r,s){var a=jwe(t,window.getComputedStyle(e).direction),o=a*r,l=n.target,c=e.contains(l),u=!1,d=o>0,h=0,f=0;do{if(!l)break;var m=rK(t,l),v=m[0],g=m[1],y=m[2],w=g-y-a*v;(v||w)&&nK(t,l)&&(h+=w,f+=v);var b=l.parentNode;l=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(f)<1||!s))&&(u=!0),u},t0=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},oF=function(t){return[t.deltaX,t.deltaY]},lF=function(t){return t&&"current"in t?t.current:t},Swe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Ewe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Awe=0,Yh=[];function Twe(t){var e=N.useRef([]),n=N.useRef([0,0]),r=N.useRef(),s=N.useState(Awe++)[0],a=N.useState(eK)[0],o=N.useRef(t);N.useEffect(function(){o.current=t},[t]),N.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var g=Y0e([t.lockRef.current],(t.shards||[]).map(lF),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=N.useCallback(function(g,y){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var w=t0(g),b=n.current,E="deltaX"in g?g.deltaX:b[0]-w[0],T="deltaY"in g?g.deltaY:b[1]-w[1],x,S=g.target,_=Math.abs(E)>Math.abs(T)?"h":"v";if("touches"in g&&_==="h"&&S.type==="range")return!1;var p=aF(_,S);if(!p)return!0;if(p?x=_:(x=_==="v"?"h":"v",p=aF(_,S)),!p)return!1;if(!r.current&&"changedTouches"in g&&(E||T)&&(r.current=x),!x)return!0;var A=r.current||x;return Nwe(A,y,g,A==="h"?E:T,!0)},[]),c=N.useCallback(function(g){var y=g;if(!(!Yh.length||Yh[Yh.length-1]!==a)){var w="deltaY"in y?oF(y):t0(y),b=e.current.filter(function(x){return x.name===y.type&&(x.target===y.target||y.target===x.shadowParent)&&Swe(x.delta,w)})[0];if(b&&b.should){y.cancelable&&y.preventDefault();return}if(!b){var E=(o.current.shards||[]).map(lF).filter(Boolean).filter(function(x){return x.contains(y.target)}),T=E.length>0?l(y,E[0]):!o.current.noIsolation;T&&y.cancelable&&y.preventDefault()}}},[]),u=N.useCallback(function(g,y,w,b){var E={name:g,delta:y,target:w,should:b,shadowParent:Cwe(w)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(T){return T!==E})},1)},[]),d=N.useCallback(function(g){n.current=t0(g),r.current=void 0},[]),h=N.useCallback(function(g){u(g.type,oF(g),g.target,l(g,t.lockRef.current))},[]),f=N.useCallback(function(g){u(g.type,t0(g),g.target,l(g,t.lockRef.current))},[]);N.useEffect(function(){return Yh.push(a),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,Gh),document.addEventListener("touchmove",c,Gh),document.addEventListener("touchstart",d,Gh),function(){Yh=Yh.filter(function(g){return g!==a}),document.removeEventListener("wheel",c,Gh),document.removeEventListener("touchmove",c,Gh),document.removeEventListener("touchstart",d,Gh)}},[]);var m=t.removeScrollBar,v=t.inert;return N.createElement(N.Fragment,null,v?N.createElement(a,{styles:Ewe(s)}):null,m?N.createElement(ywe,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Cwe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Pwe=swe(J7,Twe);var ON=N.forwardRef(function(t,e){return N.createElement(RN,po({},t,{ref:e,sideCar:Pwe}))});ON.classNames=RN.classNames;var xC=["Enter"," "],Iwe=["ArrowDown","PageUp","Home"],sK=["ArrowUp","PageDown","End"],kwe=[...Iwe,...sK],Rwe={ltr:[...xC,"ArrowRight"],rtl:[...xC,"ArrowLeft"]},Owe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Wx="Menu",[yv,Mwe,Dwe]=Kj(Wx),[Rh,iK]=ds(Wx,[Dwe,Ep,kN]),MN=Ep(),aK=kN(),[Lwe,Oh]=Rh(Wx),[$we,Hx]=Rh(Wx),oK=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:a,modal:o=!0}=t,l=MN(e),[c,u]=N.useState(null),d=N.useRef(!1),h=ur(a),f=zx(s);return N.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),i.jsx(qk,{...l,children:i.jsx(Lwe,{scope:e,open:n,onOpenChange:h,content:c,onContentChange:u,children:i.jsx($we,{scope:e,onClose:N.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:f,modal:o,children:r})})})};oK.displayName=Wx;var Fwe="MenuAnchor",lO=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=MN(n);return i.jsx(Wk,{...s,...r,ref:e})});lO.displayName=Fwe;var cO="MenuPortal",[Vwe,lK]=Rh(cO,{forceMount:void 0}),cK=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,a=Oh(cO,e);return i.jsx(Vwe,{scope:e,forceMount:n,children:i.jsx(hs,{present:n||a.open,children:i.jsx(wx,{asChild:!0,container:s,children:r})})})};cK.displayName=cO;var na="MenuContent",[Bwe,uO]=Rh(na),uK=N.forwardRef((t,e)=>{const n=lK(na,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,a=Oh(na,t.__scopeMenu),o=Hx(na,t.__scopeMenu);return i.jsx(yv.Provider,{scope:t.__scopeMenu,children:i.jsx(hs,{present:r||a.open,children:i.jsx(yv.Slot,{scope:t.__scopeMenu,children:o.modal?i.jsx(Uwe,{...s,ref:e}):i.jsx(zwe,{...s,ref:e})})})})}),Uwe=N.forwardRef((t,e)=>{const n=Oh(na,t.__scopeMenu),r=N.useRef(null),s=Dt(e,r);return N.useEffect(()=>{const a=r.current;if(a)return oO(a)},[]),i.jsx(dO,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Pe(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),zwe=N.forwardRef((t,e)=>{const n=Oh(na,t.__scopeMenu);return i.jsx(dO,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),qwe=Qd("MenuContent.ScrollLock"),dO=N.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,disableOutsideScroll:v,...g}=t,y=Oh(na,n),w=Hx(na,n),b=MN(n),E=aK(n),T=Mwe(n),[x,S]=N.useState(null),_=N.useRef(null),p=Dt(e,_,y.onContentChange),A=N.useRef(0),P=N.useRef(""),C=N.useRef(0),I=N.useRef(null),R=N.useRef("right"),L=N.useRef(0),z=v?ON:N.Fragment,W=v?{as:qwe,allowPinchZoom:!0}:void 0,M=F=>{var Ne,ht;const Y=P.current+F,ae=T().filter(we=>!we.disabled),oe=document.activeElement,me=(Ne=ae.find(we=>we.ref.current===oe))==null?void 0:Ne.textValue,ke=ae.map(we=>we.textValue),ut=n_e(ke,Y,me),jt=(ht=ae.find(we=>we.textValue===ut))==null?void 0:ht.ref.current;(function we(Me){P.current=Me,window.clearTimeout(A.current),Me!==""&&(A.current=window.setTimeout(()=>we(""),1e3))})(Y),jt&&setTimeout(()=>jt.focus())};N.useEffect(()=>()=>window.clearTimeout(A.current),[]),aO();const V=N.useCallback(F=>{var ae,oe;return R.current===((ae=I.current)==null?void 0:ae.side)&&s_e(F,(oe=I.current)==null?void 0:oe.area)},[]);return i.jsx(Bwe,{scope:n,searchRef:P,onItemEnter:N.useCallback(F=>{V(F)&&F.preventDefault()},[V]),onItemLeave:N.useCallback(F=>{var Y;V(F)||((Y=_.current)==null||Y.focus(),S(null))},[V]),onTriggerLeave:N.useCallback(F=>{V(F)&&F.preventDefault()},[V]),pointerGraceTimerRef:C,onPointerGraceIntentChange:N.useCallback(F=>{I.current=F},[]),children:i.jsx(z,{...W,children:i.jsx(IN,{asChild:!0,trapped:s,onMountAutoFocus:Pe(a,F=>{var Y;F.preventDefault(),(Y=_.current)==null||Y.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:i.jsx(wp,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,children:i.jsx(G7,{asChild:!0,...E,dir:w.dir,orientation:"vertical",loop:r,currentTabStopId:x,onCurrentTabStopIdChange:S,onEntryFocus:Pe(c,F=>{w.isUsingKeyboardRef.current||F.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(Hk,{role:"menu","aria-orientation":"vertical","data-state":EK(y.open),"data-radix-menu-content":"",dir:w.dir,...b,...g,ref:p,style:{outline:"none",...g.style},onKeyDown:Pe(g.onKeyDown,F=>{const ae=F.target.closest("[data-radix-menu-content]")===F.currentTarget,oe=F.ctrlKey||F.altKey||F.metaKey,me=F.key.length===1;ae&&(F.key==="Tab"&&F.preventDefault(),!oe&&me&&M(F.key));const ke=_.current;if(F.target!==ke||!kwe.includes(F.key))return;F.preventDefault();const jt=T().filter(Ne=>!Ne.disabled).map(Ne=>Ne.ref.current);sK.includes(F.key)&&jt.reverse(),e_e(jt)}),onBlur:Pe(t.onBlur,F=>{F.currentTarget.contains(F.target)||(window.clearTimeout(A.current),P.current="")}),onPointerMove:Pe(t.onPointerMove,vv(F=>{const Y=F.target,ae=L.current!==F.clientX;if(F.currentTarget.contains(Y)&&ae){const oe=F.clientX>L.current?"right":"left";R.current=oe,L.current=F.clientX}}))})})})})})})});uK.displayName=na;var Wwe="MenuGroup",hO=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(Je.div,{role:"group",...r,ref:e})});hO.displayName=Wwe;var Hwe="MenuLabel",dK=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(Je.div,{...r,ref:e})});dK.displayName=Hwe;var s_="MenuItem",cF="menu.itemSelect",DN=N.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,a=N.useRef(null),o=Hx(s_,t.__scopeMenu),l=uO(s_,t.__scopeMenu),c=Dt(e,a),u=N.useRef(!1),d=()=>{const h=a.current;if(!n&&h){const f=new CustomEvent(cF,{bubbles:!0,cancelable:!0});h.addEventListener(cF,m=>r==null?void 0:r(m),{once:!0}),Sk(h,f),f.defaultPrevented?u.current=!1:o.onClose()}};return i.jsx(hK,{...s,ref:c,disabled:n,onClick:Pe(t.onClick,d),onPointerDown:h=>{var f;(f=t.onPointerDown)==null||f.call(t,h),u.current=!0},onPointerUp:Pe(t.onPointerUp,h=>{var f;u.current||(f=h.currentTarget)==null||f.click()}),onKeyDown:Pe(t.onKeyDown,h=>{const f=l.searchRef.current!=="";n||f&&h.key===" "||xC.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});DN.displayName=s_;var hK=N.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...a}=t,o=uO(s_,n),l=aK(n),c=N.useRef(null),u=Dt(e,c),[d,h]=N.useState(!1),[f,m]=N.useState("");return N.useEffect(()=>{const v=c.current;v&&m((v.textContent??"").trim())},[a.children]),i.jsx(yv.ItemSlot,{scope:n,disabled:r,textValue:s??f,children:i.jsx(Y7,{asChild:!0,...l,focusable:!r,children:i.jsx(Je.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:u,onPointerMove:Pe(t.onPointerMove,vv(v=>{r?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Pe(t.onPointerLeave,vv(v=>o.onItemLeave(v))),onFocus:Pe(t.onFocus,()=>h(!0)),onBlur:Pe(t.onBlur,()=>h(!1))})})})}),Kwe="MenuCheckboxItem",fK=N.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return i.jsx(vK,{scope:t.__scopeMenu,checked:n,children:i.jsx(DN,{role:"menuitemcheckbox","aria-checked":i_(n)?"mixed":n,...s,ref:e,"data-state":mO(n),onSelect:Pe(s.onSelect,()=>r==null?void 0:r(i_(n)?!0:!n),{checkForDefaultPrevented:!1})})})});fK.displayName=Kwe;var mK="MenuRadioGroup",[Gwe,Ywe]=Rh(mK,{value:void 0,onValueChange:()=>{}}),pK=N.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,a=ur(r);return i.jsx(Gwe,{scope:t.__scopeMenu,value:n,onValueChange:a,children:i.jsx(hO,{...s,ref:e})})});pK.displayName=mK;var gK="MenuRadioItem",yK=N.forwardRef((t,e)=>{const{value:n,...r}=t,s=Ywe(gK,t.__scopeMenu),a=n===s.value;return i.jsx(vK,{scope:t.__scopeMenu,checked:a,children:i.jsx(DN,{role:"menuitemradio","aria-checked":a,...r,ref:e,"data-state":mO(a),onSelect:Pe(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});yK.displayName=gK;var fO="MenuItemIndicator",[vK,Qwe]=Rh(fO,{checked:!1}),xK=N.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,a=Qwe(fO,n);return i.jsx(hs,{present:r||i_(a.checked)||a.checked===!0,children:i.jsx(Je.span,{...s,ref:e,"data-state":mO(a.checked)})})});xK.displayName=fO;var Xwe="MenuSeparator",bK=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(Je.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});bK.displayName=Xwe;var Zwe="MenuArrow",wK=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=MN(n);return i.jsx(Kk,{...s,...r,ref:e})});wK.displayName=Zwe;var Jwe="MenuSub",[Yet,_K]=Rh(Jwe),ty="MenuSubTrigger",jK=N.forwardRef((t,e)=>{const n=Oh(ty,t.__scopeMenu),r=Hx(ty,t.__scopeMenu),s=_K(ty,t.__scopeMenu),a=uO(ty,t.__scopeMenu),o=N.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,u={__scopeMenu:t.__scopeMenu},d=N.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return N.useEffect(()=>d,[d]),N.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),i.jsx(lO,{asChild:!0,...u,children:i.jsx(hK,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":EK(n.open),...t,ref:Hj(e,s.onTriggerChange),onClick:h=>{var f;(f=t.onClick)==null||f.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Pe(t.onPointerMove,vv(h=>{a.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:Pe(t.onPointerLeave,vv(h=>{var m,v;d();const f=(m=n.content)==null?void 0:m.getBoundingClientRect();if(f){const g=(v=n.content)==null?void 0:v.dataset.side,y=g==="right",w=y?-5:5,b=f[y?"left":"right"],E=f[y?"right":"left"];a.onPointerGraceIntentChange({area:[{x:h.clientX+w,y:h.clientY},{x:b,y:f.top},{x:E,y:f.top},{x:E,y:f.bottom},{x:b,y:f.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(h),h.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Pe(t.onKeyDown,h=>{var m;const f=a.searchRef.current!=="";t.disabled||f&&h.key===" "||Rwe[r.dir].includes(h.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),h.preventDefault())})})})});jK.displayName=ty;var NK="MenuSubContent",SK=N.forwardRef((t,e)=>{const n=lK(na,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,a=Oh(na,t.__scopeMenu),o=Hx(na,t.__scopeMenu),l=_K(NK,t.__scopeMenu),c=N.useRef(null),u=Dt(e,c);return i.jsx(yv.Provider,{scope:t.__scopeMenu,children:i.jsx(hs,{present:r||a.open,children:i.jsx(yv.Slot,{scope:t.__scopeMenu,children:i.jsx(dO,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Pe(t.onFocusOutside,d=>{d.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Pe(t.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:Pe(t.onKeyDown,d=>{var m;const h=d.currentTarget.contains(d.target),f=Owe[o.dir].includes(d.key);h&&f&&(a.onOpenChange(!1),(m=l.trigger)==null||m.focus(),d.preventDefault())})})})})})});SK.displayName=NK;function EK(t){return t?"open":"closed"}function i_(t){return t==="indeterminate"}function mO(t){return i_(t)?"indeterminate":t?"checked":"unchecked"}function e_e(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function t_e(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function n_e(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=t_e(t,Math.max(a,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function r_e(t,e){const{x:n,y:r}=t;let s=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a],c=e[o],u=l.x,d=l.y,h=c.x,f=c.y;d>r!=f>r&&n<(h-u)*(r-d)/(f-d)+u&&(s=!s)}return s}function s_e(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return r_e(n,e)}function vv(t){return e=>e.pointerType==="mouse"?t(e):void 0}var i_e=oK,a_e=lO,o_e=cK,l_e=uK,c_e=hO,u_e=dK,d_e=DN,h_e=fK,f_e=pK,m_e=yK,p_e=xK,g_e=bK,y_e=wK,v_e=jK,x_e=SK,LN="DropdownMenu",[b_e,Qet]=ds(LN,[iK]),Hs=iK(),[w_e,AK]=b_e(LN),TK=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:a,onOpenChange:o,modal:l=!0}=t,c=Hs(e),u=N.useRef(null),[d,h]=Ha({prop:s,defaultProp:a??!1,onChange:o,caller:LN});return i.jsx(w_e,{scope:e,triggerId:ea(),triggerRef:u,contentId:ea(),open:d,onOpenChange:h,onOpenToggle:N.useCallback(()=>h(f=>!f),[h]),modal:l,children:i.jsx(i_e,{...c,open:d,onOpenChange:h,dir:r,modal:l,children:n})})};TK.displayName=LN;var CK="DropdownMenuTrigger",PK=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,a=AK(CK,n),o=Hs(n);return i.jsx(a_e,{asChild:!0,...o,children:i.jsx(Je.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Hj(e,a.triggerRef),onPointerDown:Pe(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:Pe(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});PK.displayName=CK;var __e="DropdownMenuPortal",IK=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Hs(e);return i.jsx(o_e,{...r,...n})};IK.displayName=__e;var kK="DropdownMenuContent",RK=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=AK(kK,n),a=Hs(n),o=N.useRef(!1);return i.jsx(l_e,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...r,ref:e,onCloseAutoFocus:Pe(t.onCloseAutoFocus,l=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Pe(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});RK.displayName=kK;var j_e="DropdownMenuGroup",N_e=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Hs(n);return i.jsx(c_e,{...s,...r,ref:e})});N_e.displayName=j_e;var S_e="DropdownMenuLabel",OK=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Hs(n);return i.jsx(u_e,{...s,...r,ref:e})});OK.displayName=S_e;var E_e="DropdownMenuItem",MK=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Hs(n);return i.jsx(d_e,{...s,...r,ref:e})});MK.displayName=E_e;var A_e="DropdownMenuCheckboxItem",DK=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Hs(n);return i.jsx(h_e,{...s,...r,ref:e})});DK.displayName=A_e;var T_e="DropdownMenuRadioGroup",C_e=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Hs(n);return i.jsx(f_e,{...s,...r,ref:e})});C_e.displayName=T_e;var P_e="DropdownMenuRadioItem",LK=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Hs(n);return i.jsx(m_e,{...s,...r,ref:e})});LK.displayName=P_e;var I_e="DropdownMenuItemIndicator",$K=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Hs(n);return i.jsx(p_e,{...s,...r,ref:e})});$K.displayName=I_e;var k_e="DropdownMenuSeparator",FK=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Hs(n);return i.jsx(g_e,{...s,...r,ref:e})});FK.displayName=k_e;var R_e="DropdownMenuArrow",O_e=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Hs(n);return i.jsx(y_e,{...s,...r,ref:e})});O_e.displayName=R_e;var M_e="DropdownMenuSubTrigger",VK=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Hs(n);return i.jsx(v_e,{...s,...r,ref:e})});VK.displayName=M_e;var D_e="DropdownMenuSubContent",BK=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Hs(n);return i.jsx(x_e,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});BK.displayName=D_e;var L_e=TK,$_e=PK,F_e=IK,UK=RK,zK=OK,qK=MK,WK=DK,HK=LK,KK=$K,GK=FK,YK=VK,QK=BK;const V_e=L_e,B_e=$_e,U_e=N.forwardRef(({className:t,inset:e,children:n,...r},s)=>i.jsxs(YK,{ref:s,className:pe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",e&&"pl-8",t),...r,children:[n,i.jsx(S8,{className:"ml-auto h-4 w-4"})]}));U_e.displayName=YK.displayName;const z_e=N.forwardRef(({className:t,...e},n)=>i.jsx(QK,{ref:n,className:pe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));z_e.displayName=QK.displayName;const XK=N.forwardRef(({className:t,sideOffset:e=4,...n},r)=>i.jsx(F_e,{children:i.jsx(UK,{ref:r,sideOffset:e,className:pe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));XK.displayName=UK.displayName;const ZK=N.forwardRef(({className:t,inset:e,...n},r)=>i.jsx(qK,{ref:r,className:pe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e&&"pl-8",t),...n}));ZK.displayName=qK.displayName;const q_e=N.forwardRef(({className:t,children:e,checked:n,...r},s)=>i.jsxs(WK,{ref:s,className:pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),checked:n,...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(KK,{children:i.jsx(Nx,{className:"h-4 w-4"})})}),e]}));q_e.displayName=WK.displayName;const W_e=N.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(HK,{ref:r,className:pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(KK,{children:i.jsx(hoe,{className:"h-2 w-2 fill-current"})})}),e]}));W_e.displayName=HK.displayName;const JK=N.forwardRef(({className:t,inset:e,...n},r)=>i.jsx(zK,{ref:r,className:pe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));JK.displayName=zK.displayName;const eG=N.forwardRef(({className:t,...e},n)=>i.jsx(GK,{ref:n,className:pe("-mx-1 my-1 h-px bg-muted",t),...e}));eG.displayName=GK.displayName;function H_e(){const t=Gn(),{user:e,signOut:n}=ct(),r=async()=>{await n(),t("/auth")};return i.jsxs(V_e,{children:[i.jsx(B_e,{asChild:!0,children:i.jsx(H,{variant:"ghost",size:"icon",className:"rounded-full",children:i.jsx(O8,{className:"h-5 w-5"})})}),i.jsxs(XK,{align:"end",className:"w-56",children:[i.jsx(JK,{children:i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"text-sm",children:"My Account"}),i.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:(e==null?void 0:e.email)||""})]})}),i.jsx(eG,{}),i.jsxs(ZK,{onClick:r,children:[i.jsx(boe,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Log out"})]})]})]})}const K={COMPANIES:"companies",USERS:"users",COMPANY_USERS:"companyUsers",COMPANY_SETTINGS:"companySettings",INVITATIONS:"invitations",USER_ROLES:"userRoles",CHART_OF_ACCOUNTS:"chartOfAccounts",JOURNAL_ENTRIES:"journalEntries",JOURNAL_LINES:"journalLines",INVOICES:"invoices",INVOICE_ITEMS:"invoiceItems",BILLS:"bills",EXPENSES:"expenses",SALES_ORDERS:"salesOrders",PURCHASE_ORDERS:"purchaseOrders",EMPLOYEES:"employees",CONTRACTORS:"contractors",ADVANCES:"advances",TIME_ENTRIES:"timeEntries",EMPLOYEE_ALLOWANCES:"employeeAllowances",EMPLOYEE_PAYROLL_PROFILES:"employeePayrollProfiles",PAYROLL_RUNS:"payrollRuns",PAYROLL_ITEMS:"payrollItems",PAYROLL_ADDITIONS:"payrollAdditions",PAYROLL_JOURNALS:"payrollJournals",PAYE_TAX_BANDS:"payeTaxBands",PAYROLL_STATUTORY_RATES:"payrollStatutoryRates",CUSTOMERS:"customers",VENDORS:"vendors",PROJECTS:"projects",PROJECT_EXPENSES:"projectExpenses",APPROVAL_REQUESTS:"approvalRequests",PRODUCTS:"products",FIXED_ASSETS:"fixedAssets",ASSET_CATEGORIES:"assetCategories",DEPRECIATION_ENTRIES:"depreciationEntries",INVENTORY_ITEMS:"inventoryItems",STOCK_MOVEMENTS:"stockMovements",PRICE_LISTS:"priceLists",PRICE_LIST_ITEMS:"priceListItems",BANK_ACCOUNTS:"bankAccounts",BANK_TRANSACTIONS:"bankTransactions",FINANCIAL_YEARS:"financialYears",FINANCIAL_PERIODS:"financialPeriods",CASH_RECONCILIATIONS:"cashReconciliations",RECONCILIATIONS:"reconciliations",PERIOD_LOCKS:"periodLocks",NOTIFICATIONS:"notifications",AUDIT_LOGS:"auditLogs"},K_e=["super_admin","admin","financial_manager","accountant","bookkeeper","assistant_accountant","finance_officer","hr_manager","project_manager","inventory_manager","cashier","auditor","staff","read_only"],G_e=t=>{if(!t.length)return"read_only";for(const e of K_e)if(t.includes(e))return e;return"read_only"};function $N(){const{user:t,isAuthenticated:e}=ct();return je({queryKey:["user-role",t==null?void 0:t.id],queryFn:async()=>{if(!t||!Co)return"read_only";try{const n=new Set,r=ve(te,K.COMPANY_USERS),s=[Ce(r,ge("userId","==",t.id),ge("status","==","active"),ni(20)),Ce(r,ge("user_id","==",t.id),ge("status","==","active"),ni(20)),Ce(r,ge("userId","==",t.id),ni(20)),Ce(r,ge("user_id","==",t.id),ni(20))];for(const a of s)if((await $e(a)).docs.forEach(l=>{const c=l.data().role;c&&n.add(c)}),n.size)break;if(!n.size){const a=ve(te,K.USER_ROLES),o=[Ce(a,ge("userId","==",t.id),ni(20)),Ce(a,ge("user_id","==",t.id),ni(20))];for(const l of o)if((await $e(l)).docs.forEach(u=>{const d=u.data().role;d&&n.add(d)}),n.size)break}return n.size?G_e(Array.from(n)):"read_only"}catch{return"read_only"}},enabled:e&&!!t,staleTime:1e3*60*5})}function Y_e(t){const{data:e,isLoading:n}=$N();return{hasRole:(e?t.includes(e):!1)||e==="super_admin",isLoading:n,userRole:e}}const Q_e={super_admin:["*"],admin:["*"],financial_manager:["dashboard","invoices","customers","estimates","sales-orders","vendors","bills","purchase-orders","expenses","bank-accounts","reconciliation","reports","settings","chart-of-accounts","journal-entries","accounts-payable","accounts-receivable","payroll","payroll-reports","employees","fixed-assets","asset-depreciation","financial-periods","zra-compliance","tax-calculator"],accountant:["dashboard","invoices","customers","estimates","sales-orders","vendors","bills","purchase-orders","expenses","bank-accounts","reconciliation","reports","settings","chart-of-accounts","journal-entries","accounts-payable","accounts-receivable","fixed-assets","asset-depreciation","financial-periods","tax-calculator"],assistant_accountant:["dashboard","invoices","customers","estimates","sales-orders","vendors","bills","purchase-orders","expenses","chart-of-accounts","accounts-payable","accounts-receivable"],finance_officer:["dashboard","invoices","expenses","bills","bank-accounts","reconciliation","reports","chart-of-accounts","journal-entries","accounts-payable","accounts-receivable"],bookkeeper:["dashboard","invoices","customers","estimates","sales-orders","vendors","bills","purchase-orders","expenses","chart-of-accounts","reconciliation","accounts-payable","accounts-receivable"],cashier:["dashboard","bank-accounts","expenses","reconciliation"],inventory_manager:["dashboard","inventory","products","purchase-orders","vendors"],hr_manager:["dashboard","employees","payroll","advances","payroll-reports","time-tracking"],project_manager:["dashboard","projects","donors","time-tracking","reports"],auditor:["dashboard","reports","payroll-reports","audit-logs","journal-entries","chart-of-accounts"],staff:["dashboard","time-tracking"],read_only:["dashboard"]};function tG(t,e){if(!t)return!1;if(t==="super_admin"||t==="admin")return!0;const n=Q_e[t]||[],r=e.replace(/^\//,"").split("/")[0];return n.includes(r)||n.includes("*")}function bC(t,[e,n]){return Math.min(n,Math.max(e,t))}function X_e(t,e){return N.useReducer((n,r)=>e[n][r]??n,t)}var pO="ScrollArea",[nG,Xet]=ds(pO),[Z_e,ha]=nG(pO),rG=N.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:a=600,...o}=t,[l,c]=N.useState(null),[u,d]=N.useState(null),[h,f]=N.useState(null),[m,v]=N.useState(null),[g,y]=N.useState(null),[w,b]=N.useState(0),[E,T]=N.useState(0),[x,S]=N.useState(!1),[_,p]=N.useState(!1),A=Dt(e,C=>c(C)),P=zx(s);return i.jsx(Z_e,{scope:n,type:r,dir:P,scrollHideDelay:a,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:f,scrollbarX:m,onScrollbarXChange:v,scrollbarXEnabled:x,onScrollbarXEnabledChange:S,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:_,onScrollbarYEnabledChange:p,onCornerWidthChange:b,onCornerHeightChange:T,children:i.jsx(Je.div,{dir:P,...o,ref:A,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":E+"px",...t.style}})})});rG.displayName=pO;var sG="ScrollAreaViewport",iG=N.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...a}=t,o=ha(sG,n),l=N.useRef(null),c=Dt(e,l,o.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),i.jsx(Je.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:i.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});iG.displayName=sG;var Ko="ScrollAreaScrollbar",gO=N.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=ha(Ko,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=s,l=t.orientation==="horizontal";return N.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),s.type==="hover"?i.jsx(J_e,{...r,ref:e,forceMount:n}):s.type==="scroll"?i.jsx(eje,{...r,ref:e,forceMount:n}):s.type==="auto"?i.jsx(aG,{...r,ref:e,forceMount:n}):s.type==="always"?i.jsx(yO,{...r,ref:e}):null});gO.displayName=Ko;var J_e=N.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=ha(Ko,t.__scopeScrollArea),[a,o]=N.useState(!1);return N.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),i.jsx(hs,{present:n||a,children:i.jsx(aG,{"data-state":a?"visible":"hidden",...r,ref:e})})}),eje=N.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=ha(Ko,t.__scopeScrollArea),a=t.orientation==="horizontal",o=VN(()=>c("SCROLL_END"),100),[l,c]=X_e("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return N.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),N.useEffect(()=>{const u=s.viewport,d=a?"scrollLeft":"scrollTop";if(u){let h=u[d];const f=()=>{const m=u[d];h!==m&&(c("SCROLL"),o()),h=m};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[s.viewport,a,c,o]),i.jsx(hs,{present:n||l!=="hidden",children:i.jsx(yO,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Pe(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Pe(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),aG=N.forwardRef((t,e)=>{const n=ha(Ko,t.__scopeScrollArea),{forceMount:r,...s}=t,[a,o]=N.useState(!1),l=t.orientation==="horizontal",c=VN(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?u:d)}},10);return Om(n.viewport,c),Om(n.content,c),i.jsx(hs,{present:r||a,children:i.jsx(yO,{"data-state":a?"visible":"hidden",...s,ref:e})})}),yO=N.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=ha(Ko,t.__scopeScrollArea),a=N.useRef(null),o=N.useRef(0),[l,c]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=dG(l.viewport,l.content),d={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:f=>a.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function h(f,m){return aje(f,o.current,l,m)}return n==="horizontal"?i.jsx(tje,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&a.current){const f=s.viewport.scrollLeft,m=uF(f,l,s.dir);a.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollLeft=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollLeft=h(f,s.dir))}}):n==="vertical"?i.jsx(nje,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&a.current){const f=s.viewport.scrollTop,m=uF(f,l);a.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollTop=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollTop=h(f))}}):null}),tje=N.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,a=ha(Ko,t.__scopeScrollArea),[o,l]=N.useState(),c=N.useRef(null),u=Dt(e,c,a.onScrollbarXChange);return N.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(lG,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":FN(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(a.viewport){const f=a.viewport.scrollLeft+d.deltaX;t.onWheelScroll(f),fG(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:o_(o.paddingLeft),paddingEnd:o_(o.paddingRight)}})}})}),nje=N.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,a=ha(Ko,t.__scopeScrollArea),[o,l]=N.useState(),c=N.useRef(null),u=Dt(e,c,a.onScrollbarYChange);return N.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(lG,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":FN(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(a.viewport){const f=a.viewport.scrollTop+d.deltaY;t.onWheelScroll(f),fG(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:o_(o.paddingTop),paddingEnd:o_(o.paddingBottom)}})}})}),[rje,oG]=nG(Ko),lG=N.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...f}=t,m=ha(Ko,n),[v,g]=N.useState(null),y=Dt(e,A=>g(A)),w=N.useRef(null),b=N.useRef(""),E=m.viewport,T=r.content-r.viewport,x=ur(d),S=ur(c),_=VN(h,10);function p(A){if(w.current){const P=A.clientX-w.current.left,C=A.clientY-w.current.top;u({x:P,y:C})}}return N.useEffect(()=>{const A=P=>{const C=P.target;(v==null?void 0:v.contains(C))&&x(P,T)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[E,v,T,x]),N.useEffect(S,[r,S]),Om(v,_),Om(m.content,_),i.jsx(rje,{scope:n,scrollbar:v,hasThumb:s,onThumbChange:ur(a),onThumbPointerUp:ur(o),onThumbPositionChange:S,onThumbPointerDown:ur(l),children:i.jsx(Je.div,{...f,ref:y,style:{position:"absolute",...f.style},onPointerDown:Pe(t.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),w.current=v.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),p(A))}),onPointerMove:Pe(t.onPointerMove,p),onPointerUp:Pe(t.onPointerUp,A=>{const P=A.target;P.hasPointerCapture(A.pointerId)&&P.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=b.current,m.viewport&&(m.viewport.style.scrollBehavior=""),w.current=null})})})}),a_="ScrollAreaThumb",cG=N.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=oG(a_,t.__scopeScrollArea);return i.jsx(hs,{present:n||s.hasThumb,children:i.jsx(sje,{ref:e,...r})})}),sje=N.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,a=ha(a_,n),o=oG(a_,n),{onThumbPositionChange:l}=o,c=Dt(e,h=>o.onThumbChange(h)),u=N.useRef(void 0),d=VN(()=>{u.current&&(u.current(),u.current=void 0)},100);return N.useEffect(()=>{const h=a.viewport;if(h){const f=()=>{if(d(),!u.current){const m=oje(h,l);u.current=m,l()}};return l(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[a.viewport,d,l]),i.jsx(Je.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Pe(t.onPointerDownCapture,h=>{const m=h.target.getBoundingClientRect(),v=h.clientX-m.left,g=h.clientY-m.top;o.onThumbPointerDown({x:v,y:g})}),onPointerUp:Pe(t.onPointerUp,o.onThumbPointerUp)})});cG.displayName=a_;var vO="ScrollAreaCorner",uG=N.forwardRef((t,e)=>{const n=ha(vO,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(ije,{...t,ref:e}):null});uG.displayName=vO;var ije=N.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=ha(vO,n),[a,o]=N.useState(0),[l,c]=N.useState(0),u=!!(a&&l);return Om(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),Om(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),o(d)}),u?i.jsx(Je.div,{...r,ref:e,style:{width:a,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function o_(t){return t?parseInt(t,10):0}function dG(t,e){const n=t/e;return isNaN(n)?0:n}function FN(t){const e=dG(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function aje(t,e,n,r="ltr"){const s=FN(n),a=s/2,o=e||a,l=s-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return hG([c,u],h)(t)}function uF(t,e,n="ltr"){const r=FN(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-s,o=e.content-e.viewport,l=a-r,c=n==="ltr"?[0,o]:[o*-1,0],u=bC(t,c);return hG([0,o],[0,l])(u)}function hG(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function fG(t,e){return t>0&&t<e}var oje=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const a={left:t.scrollLeft,top:t.scrollTop},o=n.left!==a.left,l=n.top!==a.top;(o||l)&&e(),n=a,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function VN(t,e){const n=ur(t),r=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),N.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Om(t,e){const n=ur(e);fr(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var mG=rG,lje=iG,cje=uG;const Vd=N.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(mG,{ref:r,className:pe("relative overflow-hidden",t),...n,children:[i.jsx(lje,{className:"h-full w-full rounded-[inherit]",children:e}),i.jsx(pG,{}),i.jsx(cje,{})]}));Vd.displayName=mG.displayName;const pG=N.forwardRef(({className:t,orientation:e="vertical",...n},r)=>i.jsx(gO,{ref:r,orientation:e,className:pe("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:i.jsx(cG,{className:"relative flex-1 rounded-full bg-border"})}));pG.displayName=gO.displayName;const _E=768;function gG(){const[t,e]=N.useState(void 0);return N.useEffect(()=>{const n=window.matchMedia(`(max-width: ${_E-1}px)`),r=()=>{e(window.innerWidth<_E)};return n.addEventListener("change",r),e(window.innerWidth<_E),()=>n.removeEventListener("change",r)},[]),!!t}const G=N.forwardRef(({className:t,type:e,...n},r)=>i.jsx("input",{type:e,className:pe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));G.displayName="Input";var uje="Separator",dF="horizontal",dje=["horizontal","vertical"],yG=N.forwardRef((t,e)=>{const{decorative:n,orientation:r=dF,...s}=t,a=hje(r)?r:dF,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return i.jsx(Je.div,{"data-orientation":a,...l,...s,ref:e})});yG.displayName=uje;function hje(t){return dje.includes(t)}var vG=yG;const xG=N.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>i.jsx(vG,{ref:s,decorative:n,orientation:e,className:pe("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));xG.displayName=vG.displayName;var BN="Dialog",[bG,wG]=ds(BN),[fje,to]=bG(BN),_G=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:o=!0}=t,l=N.useRef(null),c=N.useRef(null),[u,d]=Ha({prop:r,defaultProp:s??!1,onChange:a,caller:BN});return i.jsx(fje,{scope:e,triggerRef:l,contentRef:c,contentId:ea(),titleId:ea(),descriptionId:ea(),open:u,onOpenChange:d,onOpenToggle:N.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};_G.displayName=BN;var jG="DialogTrigger",NG=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=to(jG,n),a=Dt(e,s.triggerRef);return i.jsx(Je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":wO(s.open),...r,ref:a,onClick:Pe(t.onClick,s.onOpenToggle)})});NG.displayName=jG;var xO="DialogPortal",[mje,SG]=bG(xO,{forceMount:void 0}),EG=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,a=to(xO,e);return i.jsx(mje,{scope:e,forceMount:n,children:N.Children.map(r,o=>i.jsx(hs,{present:n||a.open,children:i.jsx(wx,{asChild:!0,container:s,children:o})}))})};EG.displayName=xO;var l_="DialogOverlay",AG=N.forwardRef((t,e)=>{const n=SG(l_,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=to(l_,t.__scopeDialog);return a.modal?i.jsx(hs,{present:r||a.open,children:i.jsx(gje,{...s,ref:e})}):null});AG.displayName=l_;var pje=Qd("DialogOverlay.RemoveScroll"),gje=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=to(l_,n);return i.jsx(ON,{as:pje,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(Je.div,{"data-state":wO(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),fh="DialogContent",TG=N.forwardRef((t,e)=>{const n=SG(fh,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=to(fh,t.__scopeDialog);return i.jsx(hs,{present:r||a.open,children:a.modal?i.jsx(yje,{...s,ref:e}):i.jsx(vje,{...s,ref:e})})});TG.displayName=fh;var yje=N.forwardRef((t,e)=>{const n=to(fh,t.__scopeDialog),r=N.useRef(null),s=Dt(e,n.contentRef,r);return N.useEffect(()=>{const a=r.current;if(a)return oO(a)},[]),i.jsx(CG,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Pe(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Pe(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:Pe(t.onFocusOutside,a=>a.preventDefault())})}),vje=N.forwardRef((t,e)=>{const n=to(fh,t.__scopeDialog),r=N.useRef(!1),s=N.useRef(!1);return i.jsx(CG,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),CG=N.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...o}=t,l=to(fh,n),c=N.useRef(null),u=Dt(e,c);return aO(),i.jsxs(i.Fragment,{children:[i.jsx(IN,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(wp,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":wO(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(bje,{titleId:l.titleId}),i.jsx(_je,{contentRef:c,descriptionId:l.descriptionId})]})]})}),bO="DialogTitle",PG=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=to(bO,n);return i.jsx(Je.h2,{id:s.titleId,...r,ref:e})});PG.displayName=bO;var IG="DialogDescription",kG=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=to(IG,n);return i.jsx(Je.p,{id:s.descriptionId,...r,ref:e})});kG.displayName=IG;var RG="DialogClose",OG=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=to(RG,n);return i.jsx(Je.button,{type:"button",...r,ref:e,onClick:Pe(t.onClick,()=>s.onOpenChange(!1))})});OG.displayName=RG;function wO(t){return t?"open":"closed"}var MG="DialogTitleWarning",[xje,DG]=cae(MG,{contentName:fh,titleName:bO,docsSlug:"dialog"}),bje=({titleId:t})=>{const e=DG(MG),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return N.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},wje="DialogDescriptionWarning",_je=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${DG(wje).contentName}}.`;return N.useEffect(()=>{var a;const s=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},_O=_G,LG=NG,jO=EG,Kx=AG,Gx=TG,Yx=PG,Qx=kG,UN=OG;const jje=_O,Nje=jO,$G=N.forwardRef(({className:t,...e},n)=>i.jsx(Kx,{className:pe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));$G.displayName=Kx.displayName;const Sje=Th("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),FG=N.forwardRef(({side:t="right",className:e,children:n,...r},s)=>i.jsxs(Nje,{children:[i.jsx($G,{}),i.jsxs(Gx,{ref:s,className:pe(Sje({side:t}),e),...r,children:[n,i.jsxs(UN,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[i.jsx(kk,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));FG.displayName=Gx.displayName;const Eje=N.forwardRef(({className:t,...e},n)=>i.jsx(Yx,{ref:n,className:pe("text-lg font-semibold text-foreground",t),...e}));Eje.displayName=Yx.displayName;const Aje=N.forwardRef(({className:t,...e},n)=>i.jsx(Qx,{ref:n,className:pe("text-sm text-muted-foreground",t),...e}));Aje.displayName=Qx.displayName;function hF({className:t,...e}){return i.jsx("div",{className:pe("animate-pulse rounded-md bg-muted",t),...e})}const Tje="sidebar:state",Cje=60*60*24*7,Pje="16rem",Ije="18rem",kje="3rem",Rje="b",VG=N.createContext(null);function zN(){const t=N.useContext(VG);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}const BG=N.forwardRef(({defaultOpen:t=!0,open:e,onOpenChange:n,className:r,style:s,children:a,...o},l)=>{const c=gG(),[u,d]=N.useState(!1),[h,f]=N.useState(t),m=e??h,v=N.useCallback(b=>{const E=typeof b=="function"?b(m):b;n?n(E):f(E),document.cookie=`${Tje}=${E}; path=/; max-age=${Cje}`},[n,m]),g=N.useCallback(()=>c?d(b=>!b):v(b=>!b),[c,v,d]);N.useEffect(()=>{const b=E=>{E.key===Rje&&(E.metaKey||E.ctrlKey)&&(E.preventDefault(),g())};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[g]);const y=m?"expanded":"collapsed",w=N.useMemo(()=>({state:y,open:m,setOpen:v,isMobile:c,openMobile:u,setOpenMobile:d,toggleSidebar:g}),[y,m,v,c,u,d,g]);return i.jsx(VG.Provider,{value:w,children:i.jsx(bq,{delayDuration:0,children:i.jsx("div",{style:{"--sidebar-width":Pje,"--sidebar-width-icon":kje,...s},className:pe("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:l,...o,children:a})})})});BG.displayName="SidebarProvider";const UG=N.forwardRef(({side:t="left",variant:e="sidebar",collapsible:n="offcanvas",className:r,children:s,...a},o)=>{const{isMobile:l,state:c,openMobile:u,setOpenMobile:d}=zN();return n==="none"?i.jsx("div",{className:pe("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:o,...a,children:s}):l?i.jsx(jje,{open:u,onOpenChange:d,...a,children:i.jsx(FG,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":Ije},side:t,children:i.jsx("div",{className:"flex h-full w-full flex-col",children:s})})}):i.jsxs("div",{ref:o,className:"group peer hidden text-sidebar-foreground md:block","data-state":c,"data-collapsible":c==="collapsed"?n:"","data-variant":e,"data-side":t,children:[i.jsx("div",{className:pe("relative h-svh w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),i.jsx("div",{className:pe("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...a,children:i.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:s})})]})});UG.displayName="Sidebar";const zG=N.forwardRef(({className:t,onClick:e,...n},r)=>{const{toggleSidebar:s}=zN();return i.jsxs(H,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:pe("h-7 w-7",t),onClick:a=>{e==null||e(a),s()},...n,children:[i.jsx(Noe,{}),i.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});zG.displayName="SidebarTrigger";const Oje=N.forwardRef(({className:t,...e},n)=>{const{toggleSidebar:r}=zN();return i.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:pe("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] group-data-[side=left]:-right-4 group-data-[side=right]:left-0 hover:after:bg-sidebar-border sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t),...e})});Oje.displayName="SidebarRail";const qG=N.forwardRef(({className:t,...e},n)=>i.jsx("main",{ref:n,className:pe("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",t),...e}));qG.displayName="SidebarInset";const Mje=N.forwardRef(({className:t,...e},n)=>i.jsx(G,{ref:n,"data-sidebar":"input",className:pe("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",t),...e}));Mje.displayName="SidebarInput";const WG=N.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,"data-sidebar":"header",className:pe("flex flex-col gap-2 p-2",t),...e}));WG.displayName="SidebarHeader";const HG=N.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,"data-sidebar":"footer",className:pe("flex flex-col gap-2 p-2",t),...e}));HG.displayName="SidebarFooter";const Dje=N.forwardRef(({className:t,...e},n)=>i.jsx(xG,{ref:n,"data-sidebar":"separator",className:pe("mx-2 w-auto bg-sidebar-border",t),...e}));Dje.displayName="SidebarSeparator";const KG=N.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,"data-sidebar":"content",className:pe("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...e}));KG.displayName="SidebarContent";const GG=N.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,"data-sidebar":"group",className:pe("relative flex w-full min-w-0 flex-col p-2",t),...e}));GG.displayName="SidebarGroup";const Lje=N.forwardRef(({className:t,asChild:e=!1,...n},r)=>{const s=e?Ah:"div";return i.jsx(s,{ref:r,"data-sidebar":"group-label",className:pe("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...n})});Lje.displayName="SidebarGroupLabel";const $je=N.forwardRef(({className:t,asChild:e=!1,...n},r)=>{const s=e?Ah:"button";return i.jsx(s,{ref:r,"data-sidebar":"group-action",className:pe("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",t),...n})});$je.displayName="SidebarGroupAction";const YG=N.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,"data-sidebar":"group-content",className:pe("w-full text-sm",t),...e}));YG.displayName="SidebarGroupContent";const QG=N.forwardRef(({className:t,...e},n)=>i.jsx("ul",{ref:n,"data-sidebar":"menu",className:pe("flex w-full min-w-0 flex-col gap-1",t),...e}));QG.displayName="SidebarMenu";const XG=N.forwardRef(({className:t,...e},n)=>i.jsx("li",{ref:n,"data-sidebar":"menu-item",className:pe("group/menu-item relative",t),...e}));XG.displayName="SidebarMenuItem";const Fje=Th("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),ZG=N.forwardRef(({asChild:t=!1,isActive:e=!1,variant:n="default",size:r="default",tooltip:s,className:a,...o},l)=>{const c=t?Ah:"button",{isMobile:u,state:d}=zN(),h=i.jsx(c,{ref:l,"data-sidebar":"menu-button","data-size":r,"data-active":e,className:pe(Fje({variant:n,size:r}),a),...o});return s?(typeof s=="string"&&(s={children:s}),i.jsxs(Cue,{children:[i.jsx(Pue,{asChild:!0,children:h}),i.jsx(wq,{side:"right",align:"center",hidden:d!=="collapsed"||u,...s})]})):h});ZG.displayName="SidebarMenuButton";const Vje=N.forwardRef(({className:t,asChild:e=!1,showOnHover:n=!1,...r},s)=>{const a=e?Ah:"button";return i.jsx(a,{ref:s,"data-sidebar":"menu-action",className:pe("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform peer-hover/menu-button:text-sidebar-accent-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",t),...r})});Vje.displayName="SidebarMenuAction";const Bje=N.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:pe("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t),...e}));Bje.displayName="SidebarMenuBadge";const Uje=N.forwardRef(({className:t,showIcon:e=!1,...n},r)=>{const s=N.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return i.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:pe("flex h-8 items-center gap-2 rounded-md px-2",t),...n,children:[e&&i.jsx(hF,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),i.jsx(hF,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":s}})]})});Uje.displayName="SidebarMenuSkeleton";const zje=N.forwardRef(({className:t,...e},n)=>i.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:pe("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",t),...e}));zje.displayName="SidebarMenuSub";const qje=N.forwardRef(({...t},e)=>i.jsx("li",{ref:e,...t}));qje.displayName="SidebarMenuSubItem";const Wje=N.forwardRef(({asChild:t=!1,size:e="md",isActive:n,className:r,...s},a)=>{const o=t?Ah:"a";return i.jsx(o,{ref:a,"data-sidebar":"menu-sub-button","data-size":e,"data-active":n,className:pe("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring aria-disabled:pointer-events-none aria-disabled:opacity-50 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",e==="sm"&&"text-xs",e==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...s})});Wje.displayName="SidebarMenuSubButton";var qN="Collapsible",[Hje,Zet]=ds(qN),[Kje,NO]=Hje(qN),JG=N.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:a,onOpenChange:o,...l}=t,[c,u]=Ha({prop:r,defaultProp:s??!1,onChange:o,caller:qN});return i.jsx(Kje,{scope:n,disabled:a,contentId:ea(),open:c,onOpenToggle:N.useCallback(()=>u(d=>!d),[u]),children:i.jsx(Je.div,{"data-state":EO(c),"data-disabled":a?"":void 0,...l,ref:e})})});JG.displayName=qN;var eY="CollapsibleTrigger",tY=N.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,s=NO(eY,n);return i.jsx(Je.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":EO(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:e,onClick:Pe(t.onClick,s.onOpenToggle)})});tY.displayName=eY;var SO="CollapsibleContent",nY=N.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=NO(SO,t.__scopeCollapsible);return i.jsx(hs,{present:n||s.open,children:({present:a})=>i.jsx(Gje,{...r,ref:e,present:a})})});nY.displayName=SO;var Gje=N.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:s,...a}=t,o=NO(SO,n),[l,c]=N.useState(r),u=N.useRef(null),d=Dt(e,u),h=N.useRef(0),f=h.current,m=N.useRef(0),v=m.current,g=o.open||l,y=N.useRef(g),w=N.useRef(void 0);return N.useEffect(()=>{const b=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(b)},[]),fr(()=>{const b=u.current;if(b){w.current=w.current||{transitionDuration:b.style.transitionDuration,animationName:b.style.animationName},b.style.transitionDuration="0s",b.style.animationName="none";const E=b.getBoundingClientRect();h.current=E.height,m.current=E.width,y.current||(b.style.transitionDuration=w.current.transitionDuration,b.style.animationName=w.current.animationName),c(r)}},[o.open,r]),i.jsx(Je.div,{"data-state":EO(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...a,ref:d,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...t.style},children:g&&s})});function EO(t){return t?"open":"closed"}var Yje=JG;const Qje=Yje,Xje=tY,Zje=nY;function xv({variant:t="full",size:e="md",className:n}){const r={sm:"h-8 w-8",md:"h-10 w-10",lg:"h-12 w-12",xl:"h-16 w-16"},s={sm:"text-base",md:"text-xl",lg:"text-2xl",xl:"text-3xl"},a={sm:"text-[8px]",md:"text-[10px]",lg:"text-xs",xl:"text-sm"};return i.jsxs("div",{className:pe("flex items-center gap-3",n),children:[t!=="text"&&i.jsxs("div",{className:pe("relative flex items-center justify-center transition-all duration-300",r[e]),children:[i.jsx("img",{src:"/logo_new.png",alt:"ZedBooks",className:"h-full w-full object-contain drop-shadow-sm"}),i.jsx("div",{className:"absolute inset-0 bg-blue-500/10 rounded-full blur-xl -z-10 scale-150 opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),(t==="full"||t==="text")&&i.jsxs("div",{className:"flex flex-col select-none",children:[i.jsx("span",{className:pe("font-bold leading-none tracking-tight",s[e]),children:"ZedBooks"}),i.jsx("span",{className:pe("font-medium uppercase tracking-[0.2em] opacity-70",a[e]),children:"Purpose Ledger"})]})]})}const Jje=[{title:"Overview",items:[{title:"Dashboard",icon:xoe,href:"/dashboard"}]},{title:"Sales & Receivables",items:[{title:"Customers",icon:si,href:"/customers"},{title:"Invoices",icon:cr,href:"/invoices"},{title:"Accounts Receivable",icon:Ra,href:"/accounts-receivable"},{title:"Estimates",icon:cr,href:"/estimates"},{title:"Sales Orders",icon:OL,href:"/sales-orders"}]},{title:"Purchasing & Payables",items:[{title:"Vendors",icon:si,href:"/vendors"},{title:"Bills",icon:cr,href:"/bills"},{title:"Accounts Payable",icon:Ra,href:"/accounts-payable"},{title:"Purchase Orders",icon:OL,href:"/purchase-orders"},{title:"Expenses",icon:er,href:"/expenses"}]},{title:"Inventory & Assets",items:[{title:"Products & Services",icon:Ji,href:"/products"},{title:"Inventory",icon:Ji,href:"/inventory"},{title:"Fixed Assets",icon:Ji,href:"/fixed-assets"},{title:"Depreciation",icon:Zy,href:"/asset-depreciation"}]},{title:"Banking",items:[{title:"Bank Accounts",icon:Ra,href:"/bank-accounts"},{title:"Reconciliation",icon:Ra,href:"/reconciliation"}]},{title:"People",items:[{title:"Employees",icon:si,href:"/employees"},{title:"Payroll",icon:er,href:"/payroll"},{title:"Advances",icon:Ra,href:"/advances"},{title:"Time & Contractors",icon:Pi,href:"/time-tracking"}]},{title:"Projects & Grants",items:[{title:"Projects",icon:Aw,href:"/projects"},{title:"Donors & Grants",icon:si,href:"/donors"}]},{title:"Accounting",items:[{title:"Chart of Accounts",icon:Qj,href:"/chart-of-accounts"},{title:"Journal Entries",icon:cr,href:"/journal-entries"},{title:"Financial Periods",icon:Pi,href:"/financial-periods"}]},{title:"Reports",items:[{title:"Financial Reports",icon:N8,href:"/reports"},{title:"Payroll Reports",icon:cr,href:"/payroll-reports"},{title:"ZRA Compliance",icon:cr,href:"/zra-compliance"},{title:"Tax Calculator",icon:Zy,href:"/tax-calculator"}]},{title:"Administration",items:[{title:"Users & Roles",icon:si,href:"/users"},{title:"Audit Logs",icon:cr,href:"/audit-logs"},{title:"Payroll Settings",icon:Jy,href:"/payroll-settings"},{title:"Company Settings",icon:Jy,href:"/company-settings"}]}];function eNe(t,e){return e?e==="super_admin"||e==="admin"?t:t.map(n=>({...n,items:n.items.filter(r=>tG(e,r.href))})).filter(n=>n.items.length>0):t.map(n=>({...n,items:n.items.filter(r=>r.href==="/dashboard")})).filter(n=>n.items.length>0)}function tNe(){const t=Wo(),{data:e}=$N(),n=eNe(Jje,e||null);return i.jsxs(UG,{className:"border-r border-sidebar-border",children:[i.jsx(WG,{className:"border-b border-sidebar-border p-4",children:i.jsx(Oa,{to:"/dashboard",className:"flex items-center gap-3",children:i.jsx(xv,{variant:"full",size:"lg"})})}),i.jsx(KG,{children:i.jsx(Vd,{className:"h-full",children:i.jsx("div",{className:"space-y-1 p-2",children:n.map((r,s)=>{const a=r.items.some(o=>t.pathname===o.href);return i.jsx(Qje,{defaultOpen:a||s<3,className:"group/collapsible",children:i.jsxs(GG,{className:"p-0",children:[i.jsxs(Xje,{className:"flex w-full items-center justify-between rounded-lg px-3 py-2 text-sm font-medium text-sidebar-foreground/70 hover:bg-sidebar-accent hover:text-sidebar-foreground transition-colors",children:[i.jsx("span",{children:r.title}),i.jsx(Ck,{className:"h-4 w-4 transition-transform group-data-[state=open]/collapsible:rotate-180"})]}),i.jsx(Zje,{children:i.jsx(YG,{className:"mt-1",children:i.jsx(QG,{children:r.items.map(o=>{const l=t.pathname===o.href;return i.jsx(XG,{children:i.jsx(ZG,{asChild:!0,isActive:l,className:pe("ml-2 transition-all",l&&"bg-primary/10 text-primary font-medium border-l-2 border-primary"),children:i.jsxs(Oa,{to:o.href,children:[i.jsx(o.icon,{className:"h-4 w-4"}),i.jsx("span",{children:o.title})]})})},o.href)})})})})]})},r.title)})})})}),i.jsx(HG,{className:"border-t border-sidebar-border p-4",children:i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsxs(Oa,{to:"/settings",className:"flex items-center gap-2 rounded-lg px-3 py-2 text-sm text-sidebar-foreground hover:bg-sidebar-accent transition-colors",children:[i.jsx(Jy,{className:"h-4 w-4"}),i.jsx("span",{children:"Settings"})]}),i.jsx(H_e,{})]})})]})}function Nt({children:t}){const{isAuthenticated:e,isLoading:n}=ct(),r=Wo();return n?i.jsx("div",{className:"flex min-h-screen items-center justify-center",children:i.jsx(Gf,{message:"Verifying authentication...",size:"lg"})}):e?i.jsx(i.Fragment,{children:t}):i.jsx(VT,{to:"/auth",state:{from:r},replace:!0})}function AO({className:t}){return i.jsx("a",{href:"https://byteandberry.com/",target:"_blank",rel:"noopener noreferrer",className:pe("fixed bottom-4 right-4 z-50 flex items-center gap-1 text-xs font-medium text-muted-foreground/40 hover:text-primary transition-all duration-200 bg-background/50 hover:bg-background px-2 py-1 rounded-full backdrop-blur-[2px]",t),"aria-label":"Made by Byte & Berry - Visit Website",children:i.jsx("span",{children:"Made by Byte & Berry"})})}function Et({children:t}){return gG(),i.jsx(Nt,{children:i.jsx(BG,{children:i.jsxs("div",{className:"flex min-h-screen w-full",children:[i.jsx(tNe,{}),i.jsxs(qG,{className:"flex-1",children:[i.jsxs("header",{className:"sticky top-0 z-40 flex h-14 items-center gap-4 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4 md:hidden",children:[i.jsx(zG,{className:"h-9 w-9",children:i.jsx(_oe,{className:"h-5 w-5"})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-7 w-7 rounded-lg bg-primary flex items-center justify-center text-primary-foreground",children:i.jsx("span",{className:"text-xs font-bold",children:"Z"})}),i.jsx("span",{className:"font-semibold text-foreground",children:"ZedBooks"})]})]}),i.jsx("main",{className:"flex flex-col gap-4 p-4 md:p-6 lg:p-8",children:t}),i.jsx(AO,{})]})]})})})}function Pt({children:t,allowedRoles:e}){const n=Wo(),{hasRole:r,isLoading:s,userRole:a}=Y_e(e||[]);return s?i.jsx("div",{className:"flex min-h-screen items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Checking permissions..."})]})}):e&&e.length>0?r?i.jsx(i.Fragment,{children:t}):i.jsx(VT,{to:"/dashboard",replace:!0,state:{from:n,unauthorized:!0}}):tG(a,n.pathname)?i.jsx(i.Fragment,{children:t}):i.jsx(VT,{to:"/dashboard",replace:!0,state:{from:n,unauthorized:!0}})}const uc=t=>{if(t==null)return null;const e=String(t);return e.trim()?e:null},nNe=(t,e)=>({id:t,companyId:String(e.companyId??e.company_id??""),userId:String(e.userId??e.user_id??""),role:e.role??"read_only",status:e.status??"active",createdAt:String(e.createdAt??e.created_at??""),updatedAt:String(e.updatedAt??e.updated_at??"")}),rNe=(t,e)=>({id:t,name:String(e.name??e.companyName??e.company_name??""),organizationType:e.organizationType??e.organization_type??"business",businessType:uc(e.businessType??e.business_type)??void 0,taxType:uc(e.taxType??e.tax_type)??void 0,taxClassification:uc(e.taxClassification??e.tax_classification)??void 0,tpin:uc(e.tpin)??void 0,phone:uc(e.phone)??void 0,email:uc(e.email)??void 0,logoUrl:uc(e.logoUrl??e.logo_url)??null,createdAt:String(e.createdAt??e.created_at??""),updatedAt:String(e.updatedAt??e.updated_at??"")}),sNe=(t,e)=>({id:t,companyId:String(e.companyId??e.company_id??t),companyName:String(e.companyName??e.company_name??""),isVatRegistered:!!(e.isVatRegistered??e.is_vat_registered??!1),vatRate:e.vatRate===null||e.vatRate===void 0?Number(e.vat_rate??0)||null:Number(e.vatRate),logoUrl:uc(e.logoUrl??e.logo_url)??null,createdAt:String(e.createdAt??e.created_at??""),updatedAt:String(e.updatedAt??e.updated_at??"")}),Ke={async getPrimaryMembershipByUser(t){Cn();const e=ve(te,K.COMPANY_USERS),n=[Ce(e,ge("userId","==",t),ge("status","==","active"),ni(1)),Ce(e,ge("user_id","==",t),ge("status","==","active"),ni(1)),Ce(e,ge("userId","==",t),ni(1)),Ce(e,ge("user_id","==",t),ni(1))];for(const r of n){const s=await $e(r);if(s.empty)continue;const a=s.docs[0];return nNe(a.id,a.data())}return null},async getCompanyById(t){Cn();const e=He(te,K.COMPANIES,t),n=await ki(e);return n.exists()?rNe(n.id,n.data()):null},async getCompanySettings(t){Cn();const e=He(te,K.COMPANY_SETTINGS,t),n=await ki(e);return n.exists()?sNe(n.id,n.data()):null},async completeCompanySetup(t){Cn();const e=He(te,K.COMPANIES,t.companyId);await dr(e,{name:t.name,organizationType:t.organizationType,businessType:t.businessType??null,taxType:t.taxType??null,taxClassification:t.taxClassification??null,address:t.address??null,phone:t.phone??null,email:t.email??null,tpin:t.tpin??null,registrationNumber:t.registrationNumber??null,industryType:t.industryType??null,logoUrl:t.logoUrl??null,updatedAt:ye()},{merge:!0});const n=He(te,K.COMPANY_SETTINGS,t.companyId);await dr(n,{companyId:t.companyId,companyName:t.name,logoUrl:t.logoUrl??null,isVatRegistered:!!t.isVatRegistered,vatRate:t.vatRate??null,updatedAt:ye()},{merge:!0})},async updateCompanyLogo(t,e){Cn();const n=He(te,K.COMPANIES,t);await $o(n,{logoUrl:e,updatedAt:ye()});const r=He(te,K.COMPANY_SETTINGS,t);await dr(r,{companyId:t,logoUrl:e,updatedAt:ye()},{merge:!0})},async updateCompanyBasics(t){Cn();const e=He(te,K.COMPANIES,t.companyId),n=He(te,K.COMPANY_SETTINGS,t.companyId),r={updatedAt:ye()},s={companyId:t.companyId,updatedAt:ye()};typeof t.name=="string"&&(r.name=t.name,s.companyName=t.name),t.logoUrl!==void 0&&(r.logoUrl=t.logoUrl,s.logoUrl=t.logoUrl),await dr(e,r,{merge:!0}),await dr(n,s,{merge:!0})},async listCompanyUsers(t){return Cn(),Xn("listCompanyUsers",{companyId:t})},async updateUserRole(t){return Cn(),Xn("updateUserRole",t)},async removeCompanyUser(t){return Cn(),Xn("removeCompanyUser",t)},async suspendUser(t){return Cn(),Xn("suspendUser",t)},async reactivateUser(t){return Cn(),Xn("reactivateUser",t)},async revokeInvitation(t){return Cn(),Xn("revokeInvitation",t)}},iNe={async getPostedJournalLines(t,e,n){Cn();const r=ve(te,K.JOURNAL_LINES),s=[ge("companyId","==",t),ge("isPosted","==",!0),CN("entryDate","desc"),ni(5e3)];return e&&s.push(ge("entryDate",">=",e)),n&&s.push(ge("entryDate","<=",n)),(await $e(Ce(r,...s))).docs.map(o=>({id:o.id,...o.data()}))},async postJournalEntry(t){return Xn("postJournalEntry",t)},async getGLBalances(t){return Xn("getGLBalances",t)},async getTrialBalance(t){return Xn("getTrialBalance",t)},async postInvoiceToGL(t){return Xn("postInvoiceToGL",{invoiceId:t})},async postBillToGL(t){return Xn("postBillToGL",{billId:t})},async postExpenseToGL(t){return Xn("postExpenseToGL",{expenseId:t})}},Qf={async getPayrollRuns(t){Cn();const e=ve(te,K.PAYROLL_RUNS);return(await $e(Ce(e,ge("companyId","==",t),CN("runDate","desc")))).docs.map(r=>({id:r.id,...r.data()}))},async createPayrollDraft(t){return Xn("createPayrollDraft",t)},async runPayrollTrial(t){return Xn("runPayrollTrial",t)},async finalizePayroll(t){return Xn("finalizePayroll",t)},async sendPayslipEmail(t){return Xn("sendPayslipEmail",t)},async runDepreciation(t){return Xn("runDepreciation",t)}},aNe={async uploadCompanyLogo(t,e){Cn();const n=e.name.split(".").pop()??"png",r=`company-logos/${t}/logo.${n}`,s=g0e(N0e,r);try{await m0e(s,e,{contentType:e.type})}catch(a){throw(typeof a=="object"&&a!==null&&"code"in a?String(a.code):"")==="storage/bucket-not-found"?new Error("Firebase Storage is not enabled for this project. Open Firebase Console > Storage > Get Started."):a}return p0e(s)}},oNe=(t,e)=>{var r;const n=[ge("companyId","==",t)];return(r=e.filters)==null||r.forEach(s=>{n.push(ge(s.field,s.op,s.value))}),e.orderByField&&n.push(CN(e.orderByField,e.orderDirection??"desc")),typeof e.limitCount=="number"&&e.limitCount>0&&n.push(ni(e.limitCount)),n},fF=async(t,e)=>{const n=oNe(t,e);return(await $e(Ce(ve(te,e.collectionName),...n))).docs.map(s=>({id:s.id,...s.data()}))},fa={async getCompanyIdForUser(t){Cn();const e=await Ke.getPrimaryMembershipByUser(t);if(!(e!=null&&e.companyId))throw new Error("No active company membership found for this user.");return e.companyId},async runQuery(t,e){const n=await this.getCompanyIdForUser(t);return fF(n,e)},async runQueries(t,e){const n=await this.getCompanyIdForUser(t),r=Object.entries(e),s=await Promise.all(r.map(async([a,o])=>{const l=await fF(n,o);return[a,l]}));return Object.fromEntries(s)}};var Xx=t=>t.type==="checkbox",xd=t=>t instanceof Date,Ms=t=>t==null;const rY=t=>typeof t=="object";var wr=t=>!Ms(t)&&!Array.isArray(t)&&rY(t)&&!xd(t),sY=t=>wr(t)&&t.target?Xx(t.target)?t.target.checked:t.target.value:t,lNe=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,iY=(t,e)=>t.has(lNe(e)),cNe=t=>{const e=t.constructor&&t.constructor.prototype;return wr(e)&&e.hasOwnProperty("isPrototypeOf")},TO=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Or(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(TO&&(t instanceof Blob||r))&&(n||wr(t)))if(e=n?[]:{},!n&&!cNe(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=Or(t[s]));else return t;return e}var WN=t=>/^\w*$/.test(t),yr=t=>t===void 0,CO=t=>Array.isArray(t)?t.filter(Boolean):[],PO=t=>CO(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Ve=(t,e,n)=>{if(!e||!wr(t))return n;const r=(WN(e)?[e]:PO(e)).reduce((s,a)=>Ms(s)?s:s[a],t);return yr(r)||r===t?yr(t[e])?n:t[e]:r},_i=t=>typeof t=="boolean",yn=(t,e,n)=>{let r=-1;const s=WN(e)?[e]:PO(e),a=s.length,o=a-1;for(;++r<a;){const l=s[r];let c=n;if(r!==o){const u=t[l];c=wr(u)||Array.isArray(u)?u:isNaN(+s[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=c,t=t[l]}};const c_={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ma={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Zo={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},IO=D.createContext(null);IO.displayName="HookFormContext";const HN=()=>D.useContext(IO),uNe=t=>{const{children:e,...n}=t;return D.createElement(IO.Provider,{value:n},e)};var aY=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(s,a,{get:()=>{const o=a;return e._proxyFormState[o]!==Ma.all&&(e._proxyFormState[o]=!r||Ma.all),n&&(n[o]=!0),t[o]}});return s};const kO=typeof window<"u"?D.useLayoutEffect:D.useEffect;function dNe(t){const e=HN(),{control:n=e.control,disabled:r,name:s,exact:a}=t||{},[o,l]=D.useState(n._formState),c=D.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return kO(()=>n._subscribe({name:s,formState:c.current,exact:a,callback:u=>{!r&&l({...n._formState,...u})}}),[s,r,a]),D.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),D.useMemo(()=>aY(o,n,c.current,!1),[o,n])}var vo=t=>typeof t=="string",oY=(t,e,n,r,s)=>vo(t)?(r&&e.watch.add(t),Ve(n,t,s)):Array.isArray(t)?t.map(a=>(r&&e.watch.add(a),Ve(n,a))):(r&&(e.watchAll=!0),n),wC=t=>Ms(t)||!rY(t);function al(t,e,n=new WeakSet){if(wC(t)||wC(e))return t===e;if(xd(t)&&xd(e))return t.getTime()===e.getTime();const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const a of r){const o=t[a];if(!s.includes(a))return!1;if(a!=="ref"){const l=e[a];if(xd(o)&&xd(l)||wr(o)&&wr(l)||Array.isArray(o)&&Array.isArray(l)?!al(o,l,n):o!==l)return!1}}return!0}function hNe(t){const e=HN(),{control:n=e.control,name:r,defaultValue:s,disabled:a,exact:o,compute:l}=t||{},c=D.useRef(s),u=D.useRef(l),d=D.useRef(void 0);u.current=l;const h=D.useMemo(()=>n._getWatch(r,c.current),[n,r]),[f,m]=D.useState(u.current?u.current(h):h);return kO(()=>n._subscribe({name:r,formState:{values:!0},exact:o,callback:v=>{if(!a){const g=oY(r,n._names,v.values||n._formValues,!1,c.current);if(u.current){const y=u.current(g);al(y,d.current)||(m(y),d.current=y)}else m(g)}}}),[n,a,r,o]),D.useEffect(()=>n._removeUnmounted()),f}function fNe(t){const e=HN(),{name:n,disabled:r,control:s=e.control,shouldUnregister:a,defaultValue:o}=t,l=iY(s._names.array,n),c=D.useMemo(()=>Ve(s._formValues,n,Ve(s._defaultValues,n,o)),[s,n,o]),u=hNe({control:s,name:n,defaultValue:c,exact:!0}),d=dNe({control:s,name:n,exact:!0}),h=D.useRef(t),f=D.useRef(s.register(n,{...t.rules,value:u,..._i(t.disabled)?{disabled:t.disabled}:{}}));h.current=t;const m=D.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ve(d.errors,n)},isDirty:{enumerable:!0,get:()=>!!Ve(d.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Ve(d.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Ve(d.validatingFields,n)},error:{enumerable:!0,get:()=>Ve(d.errors,n)}}),[d,n]),v=D.useCallback(b=>f.current.onChange({target:{value:sY(b),name:n},type:c_.CHANGE}),[n]),g=D.useCallback(()=>f.current.onBlur({target:{value:Ve(s._formValues,n),name:n},type:c_.BLUR}),[n,s._formValues]),y=D.useCallback(b=>{const E=Ve(s._fields,n);E&&b&&(E._f.ref={focus:()=>b.focus&&b.focus(),select:()=>b.select&&b.select(),setCustomValidity:T=>b.setCustomValidity(T),reportValidity:()=>b.reportValidity()})},[s._fields,n]),w=D.useMemo(()=>({name:n,value:u,..._i(r)||d.disabled?{disabled:d.disabled||r}:{},onChange:v,onBlur:g,ref:y}),[n,r,d.disabled,v,g,y,u]);return D.useEffect(()=>{const b=s._options.shouldUnregister||a;s.register(n,{...h.current.rules,..._i(h.current.disabled)?{disabled:h.current.disabled}:{}});const E=(T,x)=>{const S=Ve(s._fields,T);S&&S._f&&(S._f.mount=x)};if(E(n,!0),b){const T=Or(Ve(s._options.defaultValues,n));yn(s._defaultValues,n,T),yr(Ve(s._formValues,n))&&yn(s._formValues,n,T)}return!l&&s.register(n),()=>{(l?b&&!s._state.action:b)?s.unregister(n):E(n,!1)}},[n,s,l,a]),D.useEffect(()=>{s._setDisabledField({disabled:r,name:n})},[r,n,s]),D.useMemo(()=>({field:w,formState:d,fieldState:m}),[w,d,m])}const mNe=t=>t.render(fNe(t));var lY=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},jy=t=>Array.isArray(t)?t:[t],mF=()=>{let t=[];return{get observers(){return t},next:s=>{for(const a of t)a.next&&a.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(a=>a!==s)}}),unsubscribe:()=>{t=[]}}},Zs=t=>wr(t)&&!Object.keys(t).length,RO=t=>t.type==="file",Da=t=>typeof t=="function",u_=t=>{if(!TO)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},cY=t=>t.type==="select-multiple",OO=t=>t.type==="radio",pNe=t=>OO(t)||Xx(t),jE=t=>u_(t)&&t.isConnected;function gNe(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=yr(t)?r++:t[e[r++]];return t}function yNe(t){for(const e in t)if(t.hasOwnProperty(e)&&!yr(t[e]))return!1;return!0}function _r(t,e){const n=Array.isArray(e)?e:WN(e)?[e]:PO(e),r=n.length===1?t:gNe(t,n),s=n.length-1,a=n[s];return r&&delete r[a],s!==0&&(wr(r)&&Zs(r)||Array.isArray(r)&&yNe(r))&&_r(t,n.slice(0,-1)),t}var uY=t=>{for(const e in t)if(Da(t[e]))return!0;return!1};function d_(t,e={}){const n=Array.isArray(t);if(wr(t)||n)for(const r in t)Array.isArray(t[r])||wr(t[r])&&!uY(t[r])?(e[r]=Array.isArray(t[r])?[]:{},d_(t[r],e[r])):Ms(t[r])||(e[r]=!0);return e}function dY(t,e,n){const r=Array.isArray(t);if(wr(t)||r)for(const s in t)Array.isArray(t[s])||wr(t[s])&&!uY(t[s])?yr(e)||wC(n[s])?n[s]=Array.isArray(t[s])?d_(t[s],[]):{...d_(t[s])}:dY(t[s],Ms(e)?{}:e[s],n[s]):n[s]=!al(t[s],e[s]);return n}var Ag=(t,e)=>dY(t,e,d_(e));const pF={value:!1,isValid:!1},gF={value:!0,isValid:!0};var hY=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!yr(t[0].attributes.value)?yr(t[0].value)||t[0].value===""?gF:{value:t[0].value,isValid:!0}:gF:pF}return pF},fY=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>yr(t)?t:e?t===""?NaN:t&&+t:n&&vo(t)?new Date(t):r?r(t):t;const yF={isValid:!1,value:null};var mY=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,yF):yF;function vF(t){const e=t.ref;return RO(e)?e.files:OO(e)?mY(t.refs).value:cY(e)?[...e.selectedOptions].map(({value:n})=>n):Xx(e)?hY(t.refs).value:fY(yr(e.value)?t.ref.value:e.value,t)}var vNe=(t,e,n,r)=>{const s={};for(const a of t){const o=Ve(e,a);o&&yn(s,a,o._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},h_=t=>t instanceof RegExp,Tg=t=>yr(t)?t:h_(t)?t.source:wr(t)?h_(t.value)?t.value.source:t.value:t,xF=t=>({isOnSubmit:!t||t===Ma.onSubmit,isOnBlur:t===Ma.onBlur,isOnChange:t===Ma.onChange,isOnAll:t===Ma.all,isOnTouch:t===Ma.onTouched});const bF="AsyncFunction";var xNe=t=>!!t&&!!t.validate&&!!(Da(t.validate)&&t.validate.constructor.name===bF||wr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===bF)),bNe=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),wF=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Ny=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const a=Ve(t,s);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Ny(l,e))break}else if(wr(l)&&Ny(l,e))break}}};function _F(t,e,n){const r=Ve(t,n);if(r||WN(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const a=s.join("."),o=Ve(e,a),l=Ve(t,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(l&&l.type)return{name:a,error:l};if(l&&l.root&&l.root.type)return{name:`${a}.root`,error:l.root};s.pop()}return{name:n}}var wNe=(t,e,n,r)=>{n(t);const{name:s,...a}=t;return Zs(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(o=>e[o]===(!r||Ma.all))},_Ne=(t,e,n)=>!t||!e||t===e||jy(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),jNe=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,NNe=(t,e)=>!CO(Ve(t,e)).length&&_r(t,e),SNe=(t,e,n)=>{const r=jy(Ve(t,n));return yn(r,"root",e[n]),yn(t,n,r),t},Y0=t=>vo(t);function jF(t,e,n="validate"){if(Y0(t)||Array.isArray(t)&&t.every(Y0)||_i(t)&&!t)return{type:n,message:Y0(t)?t:"",ref:e}}var Qh=t=>wr(t)&&!h_(t)?t:{value:t,message:""},NF=async(t,e,n,r,s,a)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:h,max:f,pattern:m,validate:v,name:g,valueAsNumber:y,mount:w}=t._f,b=Ve(n,g);if(!w||e.has(g))return{};const E=l?l[0]:o,T=I=>{s&&E.reportValidity&&(E.setCustomValidity(_i(I)?"":I||""),E.reportValidity())},x={},S=OO(o),_=Xx(o),p=S||_,A=(y||RO(o))&&yr(o.value)&&yr(b)||u_(o)&&o.value===""||b===""||Array.isArray(b)&&!b.length,P=lY.bind(null,g,r,x),C=(I,R,L,z=Zo.maxLength,W=Zo.minLength)=>{const M=I?R:L;x[g]={type:I?z:W,message:M,ref:o,...P(I?z:W,M)}};if(a?!Array.isArray(b)||!b.length:c&&(!p&&(A||Ms(b))||_i(b)&&!b||_&&!hY(l).isValid||S&&!mY(l).isValid)){const{value:I,message:R}=Y0(c)?{value:!!c,message:c}:Qh(c);if(I&&(x[g]={type:Zo.required,message:R,ref:E,...P(Zo.required,R)},!r))return T(R),x}if(!A&&(!Ms(h)||!Ms(f))){let I,R;const L=Qh(f),z=Qh(h);if(!Ms(b)&&!isNaN(b)){const W=o.valueAsNumber||b&&+b;Ms(L.value)||(I=W>L.value),Ms(z.value)||(R=W<z.value)}else{const W=o.valueAsDate||new Date(b),M=Y=>new Date(new Date().toDateString()+" "+Y),V=o.type=="time",F=o.type=="week";vo(L.value)&&b&&(I=V?M(b)>M(L.value):F?b>L.value:W>new Date(L.value)),vo(z.value)&&b&&(R=V?M(b)<M(z.value):F?b<z.value:W<new Date(z.value))}if((I||R)&&(C(!!I,L.message,z.message,Zo.max,Zo.min),!r))return T(x[g].message),x}if((u||d)&&!A&&(vo(b)||a&&Array.isArray(b))){const I=Qh(u),R=Qh(d),L=!Ms(I.value)&&b.length>+I.value,z=!Ms(R.value)&&b.length<+R.value;if((L||z)&&(C(L,I.message,R.message),!r))return T(x[g].message),x}if(m&&!A&&vo(b)){const{value:I,message:R}=Qh(m);if(h_(I)&&!b.match(I)&&(x[g]={type:Zo.pattern,message:R,ref:o,...P(Zo.pattern,R)},!r))return T(R),x}if(v){if(Da(v)){const I=await v(b,n),R=jF(I,E);if(R&&(x[g]={...R,...P(Zo.validate,R.message)},!r))return T(R.message),x}else if(wr(v)){let I={};for(const R in v){if(!Zs(I)&&!r)break;const L=jF(await v[R](b,n),E,R);L&&(I={...L,...P(R,L.message)},T(L.message),r&&(x[g]=I))}if(!Zs(I)&&(x[g]={ref:E,...I},!r))return x}}return T(!0),x};const ENe={mode:Ma.onSubmit,reValidateMode:Ma.onChange,shouldFocusError:!0};function ANe(t={}){let e={...ENe,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Da(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},s=wr(e.defaultValues)||wr(e.values)?Or(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:Or(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...d};const f={array:mF(),state:mF()},m=e.criteriaMode===Ma.all,v=q=>se=>{clearTimeout(u),u=setTimeout(q,se)},g=async q=>{if(!e.disabled&&(d.isValid||h.isValid||q)){const se=e.resolver?Zs((await _()).errors):await A(r,!0);se!==n.isValid&&f.state.next({isValid:se})}},y=(q,se)=>{!e.disabled&&(d.isValidating||d.validatingFields||h.isValidating||h.validatingFields)&&((q||Array.from(l.mount)).forEach(de=>{de&&(se?yn(n.validatingFields,de,se):_r(n.validatingFields,de))}),f.state.next({validatingFields:n.validatingFields,isValidating:!Zs(n.validatingFields)}))},w=(q,se=[],de,Re,Oe=!0,Se=!0)=>{if(Re&&de&&!e.disabled){if(o.action=!0,Se&&Array.isArray(Ve(r,q))){const ze=de(Ve(r,q),Re.argA,Re.argB);Oe&&yn(r,q,ze)}if(Se&&Array.isArray(Ve(n.errors,q))){const ze=de(Ve(n.errors,q),Re.argA,Re.argB);Oe&&yn(n.errors,q,ze),NNe(n.errors,q)}if((d.touchedFields||h.touchedFields)&&Se&&Array.isArray(Ve(n.touchedFields,q))){const ze=de(Ve(n.touchedFields,q),Re.argA,Re.argB);Oe&&yn(n.touchedFields,q,ze)}(d.dirtyFields||h.dirtyFields)&&(n.dirtyFields=Ag(s,a)),f.state.next({name:q,isDirty:C(q,se),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else yn(a,q,se)},b=(q,se)=>{yn(n.errors,q,se),f.state.next({errors:n.errors})},E=q=>{n.errors=q,f.state.next({errors:n.errors,isValid:!1})},T=(q,se,de,Re)=>{const Oe=Ve(r,q);if(Oe){const Se=Ve(a,q,yr(de)?Ve(s,q):de);yr(Se)||Re&&Re.defaultChecked||se?yn(a,q,se?Se:vF(Oe._f)):L(q,Se),o.mount&&g()}},x=(q,se,de,Re,Oe)=>{let Se=!1,ze=!1;const zt={name:q};if(!e.disabled){if(!de||Re){(d.isDirty||h.isDirty)&&(ze=n.isDirty,n.isDirty=zt.isDirty=C(),Se=ze!==zt.isDirty);const ln=al(Ve(s,q),se);ze=!!Ve(n.dirtyFields,q),ln?_r(n.dirtyFields,q):yn(n.dirtyFields,q,!0),zt.dirtyFields=n.dirtyFields,Se=Se||(d.dirtyFields||h.dirtyFields)&&ze!==!ln}if(de){const ln=Ve(n.touchedFields,q);ln||(yn(n.touchedFields,q,de),zt.touchedFields=n.touchedFields,Se=Se||(d.touchedFields||h.touchedFields)&&ln!==de)}Se&&Oe&&f.state.next(zt)}return Se?zt:{}},S=(q,se,de,Re)=>{const Oe=Ve(n.errors,q),Se=(d.isValid||h.isValid)&&_i(se)&&n.isValid!==se;if(e.delayError&&de?(c=v(()=>b(q,de)),c(e.delayError)):(clearTimeout(u),c=null,de?yn(n.errors,q,de):_r(n.errors,q)),(de?!al(Oe,de):Oe)||!Zs(Re)||Se){const ze={...Re,...Se&&_i(se)?{isValid:se}:{},errors:n.errors,name:q};n={...n,...ze},f.state.next(ze)}},_=async q=>{y(q,!0);const se=await e.resolver(a,e.context,vNe(q||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return y(q),se},p=async q=>{const{errors:se}=await _(q);if(q)for(const de of q){const Re=Ve(se,de);Re?yn(n.errors,de,Re):_r(n.errors,de)}else n.errors=se;return se},A=async(q,se,de={valid:!0})=>{for(const Re in q){const Oe=q[Re];if(Oe){const{_f:Se,...ze}=Oe;if(Se){const zt=l.array.has(Se.name),ln=Oe._f&&xNe(Oe._f);ln&&d.validatingFields&&y([Re],!0);const fs=await NF(Oe,l.disabled,a,m,e.shouldUseNativeValidation&&!se,zt);if(ln&&d.validatingFields&&y([Re]),fs[Se.name]&&(de.valid=!1,se))break;!se&&(Ve(fs,Se.name)?zt?SNe(n.errors,fs,Se.name):yn(n.errors,Se.name,fs[Se.name]):_r(n.errors,Se.name))}!Zs(ze)&&await A(ze,se,de)}}return de.valid},P=()=>{for(const q of l.unMount){const se=Ve(r,q);se&&(se._f.refs?se._f.refs.every(de=>!jE(de)):!jE(se._f.ref))&&Ne(q)}l.unMount=new Set},C=(q,se)=>!e.disabled&&(q&&se&&yn(a,q,se),!al(Y(),s)),I=(q,se,de)=>oY(q,l,{...o.mount?a:yr(se)?s:vo(q)?{[q]:se}:se},de,se),R=q=>CO(Ve(o.mount?a:s,q,e.shouldUnregister?Ve(s,q,[]):[])),L=(q,se,de={})=>{const Re=Ve(r,q);let Oe=se;if(Re){const Se=Re._f;Se&&(!Se.disabled&&yn(a,q,fY(se,Se)),Oe=u_(Se.ref)&&Ms(se)?"":se,cY(Se.ref)?[...Se.ref.options].forEach(ze=>ze.selected=Oe.includes(ze.value)):Se.refs?Xx(Se.ref)?Se.refs.forEach(ze=>{(!ze.defaultChecked||!ze.disabled)&&(Array.isArray(Oe)?ze.checked=!!Oe.find(zt=>zt===ze.value):ze.checked=Oe===ze.value||!!Oe)}):Se.refs.forEach(ze=>ze.checked=ze.value===Oe):RO(Se.ref)?Se.ref.value="":(Se.ref.value=Oe,Se.ref.type||f.state.next({name:q,values:Or(a)})))}(de.shouldDirty||de.shouldTouch)&&x(q,Oe,de.shouldTouch,de.shouldDirty,!0),de.shouldValidate&&F(q)},z=(q,se,de)=>{for(const Re in se){if(!se.hasOwnProperty(Re))return;const Oe=se[Re],Se=q+"."+Re,ze=Ve(r,Se);(l.array.has(q)||wr(Oe)||ze&&!ze._f)&&!xd(Oe)?z(Se,Oe,de):L(Se,Oe,de)}},W=(q,se,de={})=>{const Re=Ve(r,q),Oe=l.array.has(q),Se=Or(se);yn(a,q,Se),Oe?(f.array.next({name:q,values:Or(a)}),(d.isDirty||d.dirtyFields||h.isDirty||h.dirtyFields)&&de.shouldDirty&&f.state.next({name:q,dirtyFields:Ag(s,a),isDirty:C(q,Se)})):Re&&!Re._f&&!Ms(Se)?z(q,Se,de):L(q,Se,de),wF(q,l)&&f.state.next({...n,name:q}),f.state.next({name:o.mount?q:void 0,values:Or(a)})},M=async q=>{o.mount=!0;const se=q.target;let de=se.name,Re=!0;const Oe=Ve(r,de),Se=ln=>{Re=Number.isNaN(ln)||xd(ln)&&isNaN(ln.getTime())||al(ln,Ve(a,de,ln))},ze=xF(e.mode),zt=xF(e.reValidateMode);if(Oe){let ln,fs;const ya=se.type?vF(Oe._f):sY(q),pi=q.type===c_.BLUR||q.type===c_.FOCUS_OUT,Qu=!bNe(Oe._f)&&!e.resolver&&!Ve(n.errors,de)&&!Oe._f.deps||jNe(pi,Ve(n.touchedFields,de),n.isSubmitted,zt,ze),gi=wF(de,l,pi);yn(a,de,ya),pi?(Oe._f.onBlur&&Oe._f.onBlur(q),c&&c(0)):Oe._f.onChange&&Oe._f.onChange(q);const Ks=x(de,ya,pi),Gl=!Zs(Ks)||gi;if(!pi&&f.state.next({name:de,type:q.type,values:Or(a)}),Qu)return(d.isValid||h.isValid)&&(e.mode==="onBlur"?pi&&g():pi||g()),Gl&&f.state.next({name:de,...gi?{}:Ks});if(!pi&&gi&&f.state.next({...n}),e.resolver){const{errors:es}=await _([de]);if(Se(ya),Re){const Bh=_F(n.errors,r,de),Qo=_F(es,r,Bh.name||de);ln=Qo.error,de=Qo.name,fs=Zs(es)}}else y([de],!0),ln=(await NF(Oe,l.disabled,a,m,e.shouldUseNativeValidation))[de],y([de]),Se(ya),Re&&(ln?fs=!1:(d.isValid||h.isValid)&&(fs=await A(r,!0)));Re&&(Oe._f.deps&&F(Oe._f.deps),S(de,fs,ln,Ks))}},V=(q,se)=>{if(Ve(n.errors,se)&&q.focus)return q.focus(),1},F=async(q,se={})=>{let de,Re;const Oe=jy(q);if(e.resolver){const Se=await p(yr(q)?q:Oe);de=Zs(Se),Re=q?!Oe.some(ze=>Ve(Se,ze)):de}else q?(Re=(await Promise.all(Oe.map(async Se=>{const ze=Ve(r,Se);return await A(ze&&ze._f?{[Se]:ze}:ze)}))).every(Boolean),!(!Re&&!n.isValid)&&g()):Re=de=await A(r);return f.state.next({...!vo(q)||(d.isValid||h.isValid)&&de!==n.isValid?{}:{name:q},...e.resolver||!q?{isValid:de}:{},errors:n.errors}),se.shouldFocus&&!Re&&Ny(r,V,q?Oe:l.mount),Re},Y=q=>{const se={...o.mount?a:s};return yr(q)?se:vo(q)?Ve(se,q):q.map(de=>Ve(se,de))},ae=(q,se)=>({invalid:!!Ve((se||n).errors,q),isDirty:!!Ve((se||n).dirtyFields,q),error:Ve((se||n).errors,q),isValidating:!!Ve(n.validatingFields,q),isTouched:!!Ve((se||n).touchedFields,q)}),oe=q=>{q&&jy(q).forEach(se=>_r(n.errors,se)),f.state.next({errors:q?n.errors:{}})},me=(q,se,de)=>{const Re=(Ve(r,q,{_f:{}})._f||{}).ref,Oe=Ve(n.errors,q)||{},{ref:Se,message:ze,type:zt,...ln}=Oe;yn(n.errors,q,{...ln,...se,ref:Re}),f.state.next({name:q,errors:n.errors,isValid:!1}),de&&de.shouldFocus&&Re&&Re.focus&&Re.focus()},ke=(q,se)=>Da(q)?f.state.subscribe({next:de=>"values"in de&&q(I(void 0,se),de)}):I(q,se,!0),ut=q=>f.state.subscribe({next:se=>{_Ne(q.name,se.name,q.exact)&&wNe(se,q.formState||d,_n,q.reRenderRoot)&&q.callback({values:{...a},...n,...se,defaultValues:s})}}).unsubscribe,jt=q=>(o.mount=!0,h={...h,...q.formState},ut({...q,formState:h})),Ne=(q,se={})=>{for(const de of q?jy(q):l.mount)l.mount.delete(de),l.array.delete(de),se.keepValue||(_r(r,de),_r(a,de)),!se.keepError&&_r(n.errors,de),!se.keepDirty&&_r(n.dirtyFields,de),!se.keepTouched&&_r(n.touchedFields,de),!se.keepIsValidating&&_r(n.validatingFields,de),!e.shouldUnregister&&!se.keepDefaultValue&&_r(s,de);f.state.next({values:Or(a)}),f.state.next({...n,...se.keepDirty?{isDirty:C()}:{}}),!se.keepIsValid&&g()},ht=({disabled:q,name:se})=>{(_i(q)&&o.mount||q||l.disabled.has(se))&&(q?l.disabled.add(se):l.disabled.delete(se))},we=(q,se={})=>{let de=Ve(r,q);const Re=_i(se.disabled)||_i(e.disabled);return yn(r,q,{...de||{},_f:{...de&&de._f?de._f:{ref:{name:q}},name:q,mount:!0,...se}}),l.mount.add(q),de?ht({disabled:_i(se.disabled)?se.disabled:e.disabled,name:q}):T(q,!0,se.value),{...Re?{disabled:se.disabled||e.disabled}:{},...e.progressive?{required:!!se.required,min:Tg(se.min),max:Tg(se.max),minLength:Tg(se.minLength),maxLength:Tg(se.maxLength),pattern:Tg(se.pattern)}:{},name:q,onChange:M,onBlur:M,ref:Oe=>{if(Oe){we(q,se),de=Ve(r,q);const Se=yr(Oe.value)&&Oe.querySelectorAll&&Oe.querySelectorAll("input,select,textarea")[0]||Oe,ze=pNe(Se),zt=de._f.refs||[];if(ze?zt.find(ln=>ln===Se):Se===de._f.ref)return;yn(r,q,{_f:{...de._f,...ze?{refs:[...zt.filter(jE),Se,...Array.isArray(Ve(s,q))?[{}]:[]],ref:{type:Se.type,name:q}}:{ref:Se}}}),T(q,!1,void 0,Se)}else de=Ve(r,q,{}),de._f&&(de._f.mount=!1),(e.shouldUnregister||se.shouldUnregister)&&!(iY(l.array,q)&&o.action)&&l.unMount.add(q)}}},Me=()=>e.shouldFocusError&&Ny(r,V,l.mount),Fe=q=>{_i(q)&&(f.state.next({disabled:q}),Ny(r,(se,de)=>{const Re=Ve(r,de);Re&&(se.disabled=Re._f.disabled||q,Array.isArray(Re._f.refs)&&Re._f.refs.forEach(Oe=>{Oe.disabled=Re._f.disabled||q}))},0,!1))},ue=(q,se)=>async de=>{let Re;de&&(de.preventDefault&&de.preventDefault(),de.persist&&de.persist());let Oe=Or(a);if(f.state.next({isSubmitting:!0}),e.resolver){const{errors:Se,values:ze}=await _();n.errors=Se,Oe=Or(ze)}else await A(r);if(l.disabled.size)for(const Se of l.disabled)_r(Oe,Se);if(_r(n.errors,"root"),Zs(n.errors)){f.state.next({errors:{}});try{await q(Oe,de)}catch(Se){Re=Se}}else se&&await se({...n.errors},de),Me(),setTimeout(Me);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Zs(n.errors)&&!Re,submitCount:n.submitCount+1,errors:n.errors}),Re)throw Re},Ct=(q,se={})=>{Ve(r,q)&&(yr(se.defaultValue)?W(q,Or(Ve(s,q))):(W(q,se.defaultValue),yn(s,q,Or(se.defaultValue))),se.keepTouched||_r(n.touchedFields,q),se.keepDirty||(_r(n.dirtyFields,q),n.isDirty=se.defaultValue?C(q,Or(Ve(s,q))):C()),se.keepError||(_r(n.errors,q),d.isValid&&g()),f.state.next({...n}))},gt=(q,se={})=>{const de=q?Or(q):s,Re=Or(de),Oe=Zs(q),Se=Oe?s:Re;if(se.keepDefaultValues||(s=de),!se.keepValues){if(se.keepDirtyValues){const ze=new Set([...l.mount,...Object.keys(Ag(s,a))]);for(const zt of Array.from(ze))Ve(n.dirtyFields,zt)?yn(Se,zt,Ve(a,zt)):W(zt,Ve(Se,zt))}else{if(TO&&yr(q))for(const ze of l.mount){const zt=Ve(r,ze);if(zt&&zt._f){const ln=Array.isArray(zt._f.refs)?zt._f.refs[0]:zt._f.ref;if(u_(ln)){const fs=ln.closest("form");if(fs){fs.reset();break}}}}if(se.keepFieldsRef)for(const ze of l.mount)W(ze,Ve(Se,ze));else r={}}a=e.shouldUnregister?se.keepDefaultValues?Or(s):{}:Or(Se),f.array.next({values:{...Se}}),f.state.next({values:{...Se}})}l={mount:se.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!se.keepIsValid||!!se.keepDirtyValues,o.watch=!!e.shouldUnregister,f.state.next({submitCount:se.keepSubmitCount?n.submitCount:0,isDirty:Oe?!1:se.keepDirty?n.isDirty:!!(se.keepDefaultValues&&!al(q,s)),isSubmitted:se.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Oe?{}:se.keepDirtyValues?se.keepDefaultValues&&a?Ag(s,a):n.dirtyFields:se.keepDefaultValues&&q?Ag(s,q):se.keepDirty?n.dirtyFields:{},touchedFields:se.keepTouched?n.touchedFields:{},errors:se.keepErrors?n.errors:{},isSubmitSuccessful:se.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},on=(q,se)=>gt(Da(q)?q(a):q,se),Jt=(q,se={})=>{const de=Ve(r,q),Re=de&&de._f;if(Re){const Oe=Re.refs?Re.refs[0]:Re.ref;Oe.focus&&(Oe.focus(),se.shouldSelect&&Da(Oe.select)&&Oe.select())}},_n=q=>{n={...n,...q}},rn={control:{register:we,unregister:Ne,getFieldState:ae,handleSubmit:ue,setError:me,_subscribe:ut,_runSchema:_,_focusError:Me,_getWatch:I,_getDirty:C,_setValid:g,_setFieldArray:w,_setDisabledField:ht,_setErrors:E,_getFieldArray:R,_reset:gt,_resetDefaultValues:()=>Da(e.defaultValues)&&e.defaultValues().then(q=>{on(q,e.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:P,_disableForm:Fe,_subjects:f,_proxyFormState:d,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(q){o=q},get _defaultValues(){return s},get _names(){return l},set _names(q){l=q},get _formState(){return n},get _options(){return e},set _options(q){e={...e,...q}}},subscribe:jt,trigger:F,register:we,handleSubmit:ue,watch:ke,setValue:W,getValues:Y,reset:on,resetField:Ct,clearErrors:oe,unregister:Ne,setError:me,setFocus:Jt,getFieldState:ae};return{...rn,formControl:rn}}function $u(t={}){const e=D.useRef(void 0),n=D.useRef(void 0),[r,s]=D.useState({isDirty:!1,isValidating:!1,isLoading:Da(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Da(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!Da(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...l}=ANe(t);e.current={...l,formState:r}}const a=e.current.control;return a._options=t,kO(()=>{const o=a._subscribe({formState:a._proxyFormState,callback:()=>s({...a._formState}),reRenderRoot:!0});return s(l=>({...l,isReady:!0})),a._formState.isReady=!0,o},[a]),D.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),D.useEffect(()=>{t.mode&&(a._options.mode=t.mode),t.reValidateMode&&(a._options.reValidateMode=t.reValidateMode)},[a,t.mode,t.reValidateMode]),D.useEffect(()=>{t.errors&&(a._setErrors(t.errors),a._focusError())},[a,t.errors]),D.useEffect(()=>{t.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,t.shouldUnregister]),D.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),D.useEffect(()=>{t.values&&!al(t.values,n.current)?(a._reset(t.values,{keepFieldsRef:!0,...a._options.resetOptions}),n.current=t.values,s(o=>({...o}))):a._resetDefaultValues()},[a,t.values]),D.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),e.current.formState=aY(r,a),e.current}const SF=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Ve(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},pY=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?SF(r.ref,n,t):r.refs&&r.refs.forEach(s=>SF(s,n,t))}},TNe=(t,e)=>{e.shouldUseNativeValidation&&pY(t,e);const n={};for(const r in t){const s=Ve(e.fields,r),a=Object.assign(t[r]||{},{ref:s&&s.ref});if(CNe(e.names||Object.keys(t),r)){const o=Object.assign({},Ve(n,r));yn(o,"root",a),yn(n,r,o)}else yn(n,r,a)}return n},CNe=(t,e)=>t.some(n=>n.startsWith(e+"."));var PNe=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,a=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:a,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(d){return d.errors.forEach(function(h){return t.push(h)})}),e){var c=n[o].types,u=c&&c[r.code];n[o]=lY(o,e,n,s,u?[].concat(u,r.message):r.message)}t.shift()}return n},Fu=function(t,e,n){return n===void 0&&(n={}),function(r,s,a){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return a.shouldUseNativeValidation&&pY({},a),{errors:{},values:n.raw?r:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:TNe(PNe(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},cn;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const a={};for(const o of s)a[o]=o;return a},t.getValidEnumValues=s=>{const a=t.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),o={};for(const l of a)o[l]=s[l];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(a){return s[a]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&a.push(o);return a},t.find=(s,a)=>{for(const o of s)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,a=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(cn||(cn={}));var EF;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(EF||(EF={}));const at=cn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),gc=t=>{switch(typeof t){case"undefined":return at.undefined;case"string":return at.string;case"number":return Number.isNaN(t)?at.nan:at.number;case"boolean":return at.boolean;case"function":return at.function;case"bigint":return at.bigint;case"symbol":return at.symbol;case"object":return Array.isArray(t)?at.array:t===null?at.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?at.promise:typeof Map<"u"&&t instanceof Map?at.map:typeof Set<"u"&&t instanceof Set?at.set:typeof Date<"u"&&t instanceof Date?at.date:at.object;default:return at.unknown}},Te=cn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Rl extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(a){return a.message},r={_errors:[]},s=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(n(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return s(this),r}static assert(e){if(!(e instanceof Rl))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,cn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)if(s.path.length>0){const a=s.path[0];n[a]=n[a]||[],n[a].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Rl.create=t=>new Rl(t);const _C=(t,e)=>{let n;switch(t.code){case Te.invalid_type:t.received===at.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Te.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,cn.jsonStringifyReplacer)}`;break;case Te.unrecognized_keys:n=`Unrecognized key(s) in object: ${cn.joinValues(t.keys,", ")}`;break;case Te.invalid_union:n="Invalid input";break;case Te.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${cn.joinValues(t.options)}`;break;case Te.invalid_enum_value:n=`Invalid enum value. Expected ${cn.joinValues(t.options)}, received '${t.received}'`;break;case Te.invalid_arguments:n="Invalid function arguments";break;case Te.invalid_return_type:n="Invalid function return type";break;case Te.invalid_date:n="Invalid date";break;case Te.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:cn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Te.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Te.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Te.custom:n="Invalid input";break;case Te.invalid_intersection_types:n="Intersection results could not be merged";break;case Te.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Te.not_finite:n="Number must be finite";break;default:n=e.defaultError,cn.assertNever(t)}return{message:n}};let INe=_C;function kNe(){return INe}const RNe=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,a=[...n,...s.path||[]],o={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let l="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:e,defaultError:l}).message;return{...s,path:a,message:l}};function We(t,e){const n=kNe(),r=RNe({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===_C?void 0:_C].filter(s=>!!s)});t.common.issues.push(r)}class Mi{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Ot;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const a=await s.key,o=await s.value;r.push({key:a,value:o})}return Mi.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:a,value:o}=s;if(a.status==="aborted"||o.status==="aborted")return Ot;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[a.value]=o.value)}return{status:e.value,value:r}}}const Ot=Object.freeze({status:"aborted"}),ny=t=>({status:"dirty",value:t}),ma=t=>({status:"valid",value:t}),AF=t=>t.status==="aborted",TF=t=>t.status==="dirty",Mm=t=>t.status==="valid",f_=t=>typeof Promise<"u"&&t instanceof Promise;var lt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(lt||(lt={}));class vu{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const CF=(t,e)=>{if(Mm(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Rl(t.common.issues);return this._error=n,this._error}}};function Kt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,l)=>{const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??r??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??n??l.defaultError}},description:s}}class an{get description(){return this._def.description}_getType(e){return gc(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:gc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Mi,ctx:{common:e.parent.common,data:e.data,parsedType:gc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(f_(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:gc(e)},s=this._parseSync({data:e,path:r.path,parent:r});return CF(r,s)}"~validate"(e){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:gc(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:n});return Mm(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(s=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(a=>Mm(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:gc(e)},s=this._parse({data:e,path:r.path,parent:r}),a=await(f_(s)?s:Promise.resolve(s));return CF(r,a)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,a)=>{const o=e(s),l=()=>a.addIssue({code:Te.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Lm({schema:this,typeName:Mt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return su.create(this,this._def)}nullable(){return $m.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Po.create(this)}promise(){return y_.create(this,this._def)}or(e){return p_.create([this,e],this._def)}and(e){return g_.create(this,e,this._def)}transform(e){return new Lm({...Kt(this._def),schema:this,typeName:Mt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new EC({...Kt(this._def),innerType:this,defaultValue:n,typeName:Mt.ZodDefault})}brand(){return new n1e({typeName:Mt.ZodBranded,type:this,...Kt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new AC({...Kt(this._def),innerType:this,catchValue:n,typeName:Mt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return MO.create(this,e)}readonly(){return TC.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ONe=/^c[^\s-]{8,}$/i,MNe=/^[0-9a-z]+$/,DNe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,LNe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,$Ne=/^[a-z0-9_-]{21}$/i,FNe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,VNe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,BNe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,UNe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let NE;const zNe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,qNe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,WNe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,HNe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,KNe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,GNe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,gY="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",YNe=new RegExp(`^${gY}$`);function yY(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function QNe(t){return new RegExp(`^${yY(t)}$`)}function XNe(t){let e=`${gY}T${yY(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function ZNe(t,e){return!!((e==="v4"||!e)&&zNe.test(t)||(e==="v6"||!e)&&WNe.test(t))}function JNe(t,e){if(!FNe.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function e1e(t,e){return!!((e==="v4"||!e)&&qNe.test(t)||(e==="v6"||!e)&&HNe.test(t))}class Vc extends an{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==at.string){const a=this._getOrReturnCtx(e);return We(a,{code:Te.invalid_type,expected:at.string,received:a.parsedType}),Ot}const r=new Mi;let s;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(s=this._getOrReturnCtx(e,s),We(s,{code:Te.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(s=this._getOrReturnCtx(e,s),We(s,{code:Te.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,l=e.data.length<a.value;(o||l)&&(s=this._getOrReturnCtx(e,s),o?We(s,{code:Te.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&We(s,{code:Te.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")BNe.test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"email",code:Te.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")NE||(NE=new RegExp(UNe,"u")),NE.test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"emoji",code:Te.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")LNe.test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"uuid",code:Te.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")$Ne.test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"nanoid",code:Te.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")ONe.test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"cuid",code:Te.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")MNe.test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"cuid2",code:Te.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")DNe.test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"ulid",code:Te.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),We(s,{validation:"url",code:Te.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"regex",code:Te.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(e,s),We(s,{code:Te.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(s=this._getOrReturnCtx(e,s),We(s,{code:Te.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(s=this._getOrReturnCtx(e,s),We(s,{code:Te.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?XNe(a).test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{code:Te.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?YNe.test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{code:Te.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?QNe(a).test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{code:Te.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?VNe.test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"duration",code:Te.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?ZNe(e.data,a.version)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"ip",code:Te.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?JNe(e.data,a.alg)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"jwt",code:Te.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?e1e(e.data,a.version)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"cidr",code:Te.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?KNe.test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"base64",code:Te.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?GNe.test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"base64url",code:Te.invalid_string,message:a.message}),r.dirty()):cn.assertNever(a);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Te.invalid_string,...lt.errToObj(r)})}_addCheck(e){return new Vc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...lt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...lt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...lt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...lt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...lt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...lt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...lt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...lt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...lt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...lt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...lt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...lt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...lt.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...lt.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...lt.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...lt.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...lt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...lt.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...lt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...lt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...lt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...lt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...lt.errToObj(n)})}nonempty(e){return this.min(1,lt.errToObj(e))}trim(){return new Vc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Vc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Vc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Vc.create=t=>new Vc({checks:[],typeName:Mt.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Kt(t)});function t1e(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,a=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return a%o/10**s}class bv extends an{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==at.number){const a=this._getOrReturnCtx(e);return We(a,{code:Te.invalid_type,expected:at.number,received:a.parsedType}),Ot}let r;const s=new Mi;for(const a of this._def.checks)a.kind==="int"?cn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),We(r,{code:Te.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),We(r,{code:Te.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),We(r,{code:Te.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?t1e(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),We(r,{code:Te.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),We(r,{code:Te.not_finite,message:a.message}),s.dirty()):cn.assertNever(a);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,lt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,lt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,lt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,lt.toString(n))}setLimit(e,n,r,s){return new bv({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:lt.toString(s)}]})}_addCheck(e){return new bv({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:lt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:lt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:lt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:lt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:lt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:lt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:lt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:lt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:lt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&cn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}bv.create=t=>new bv({checks:[],typeName:Mt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Kt(t)});class wv extends an{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==at.bigint)return this._getInvalidInput(e);let r;const s=new Mi;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),We(r,{code:Te.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),We(r,{code:Te.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),We(r,{code:Te.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):cn.assertNever(a);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return We(n,{code:Te.invalid_type,expected:at.bigint,received:n.parsedType}),Ot}gte(e,n){return this.setLimit("min",e,!0,lt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,lt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,lt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,lt.toString(n))}setLimit(e,n,r,s){return new wv({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:lt.toString(s)}]})}_addCheck(e){return new wv({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:lt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:lt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:lt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:lt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:lt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}wv.create=t=>new wv({checks:[],typeName:Mt.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Kt(t)});class jC extends an{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==at.boolean){const r=this._getOrReturnCtx(e);return We(r,{code:Te.invalid_type,expected:at.boolean,received:r.parsedType}),Ot}return ma(e.data)}}jC.create=t=>new jC({typeName:Mt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Kt(t)});class m_ extends an{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==at.date){const a=this._getOrReturnCtx(e);return We(a,{code:Te.invalid_type,expected:at.date,received:a.parsedType}),Ot}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return We(a,{code:Te.invalid_date}),Ot}const r=new Mi;let s;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(s=this._getOrReturnCtx(e,s),We(s,{code:Te.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(s=this._getOrReturnCtx(e,s),We(s,{code:Te.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):cn.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new m_({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:lt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:lt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}m_.create=t=>new m_({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Mt.ZodDate,...Kt(t)});class PF extends an{_parse(e){if(this._getType(e)!==at.symbol){const r=this._getOrReturnCtx(e);return We(r,{code:Te.invalid_type,expected:at.symbol,received:r.parsedType}),Ot}return ma(e.data)}}PF.create=t=>new PF({typeName:Mt.ZodSymbol,...Kt(t)});class IF extends an{_parse(e){if(this._getType(e)!==at.undefined){const r=this._getOrReturnCtx(e);return We(r,{code:Te.invalid_type,expected:at.undefined,received:r.parsedType}),Ot}return ma(e.data)}}IF.create=t=>new IF({typeName:Mt.ZodUndefined,...Kt(t)});class kF extends an{_parse(e){if(this._getType(e)!==at.null){const r=this._getOrReturnCtx(e);return We(r,{code:Te.invalid_type,expected:at.null,received:r.parsedType}),Ot}return ma(e.data)}}kF.create=t=>new kF({typeName:Mt.ZodNull,...Kt(t)});class RF extends an{constructor(){super(...arguments),this._any=!0}_parse(e){return ma(e.data)}}RF.create=t=>new RF({typeName:Mt.ZodAny,...Kt(t)});class OF extends an{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ma(e.data)}}OF.create=t=>new OF({typeName:Mt.ZodUnknown,...Kt(t)});class xu extends an{_parse(e){const n=this._getOrReturnCtx(e);return We(n,{code:Te.invalid_type,expected:at.never,received:n.parsedType}),Ot}}xu.create=t=>new xu({typeName:Mt.ZodNever,...Kt(t)});class MF extends an{_parse(e){if(this._getType(e)!==at.undefined){const r=this._getOrReturnCtx(e);return We(r,{code:Te.invalid_type,expected:at.void,received:r.parsedType}),Ot}return ma(e.data)}}MF.create=t=>new MF({typeName:Mt.ZodVoid,...Kt(t)});class Po extends an{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==at.array)return We(n,{code:Te.invalid_type,expected:at.array,received:n.parsedType}),Ot;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,l=n.data.length<s.exactLength.value;(o||l)&&(We(n,{code:o?Te.too_big:Te.too_small,minimum:l?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(We(n,{code:Te.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(We(n,{code:Te.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>s.type._parseAsync(new vu(n,o,n.path,l)))).then(o=>Mi.mergeArray(r,o));const a=[...n.data].map((o,l)=>s.type._parseSync(new vu(n,o,n.path,l)));return Mi.mergeArray(r,a)}get element(){return this._def.type}min(e,n){return new Po({...this._def,minLength:{value:e,message:lt.toString(n)}})}max(e,n){return new Po({...this._def,maxLength:{value:e,message:lt.toString(n)}})}length(e,n){return new Po({...this._def,exactLength:{value:e,message:lt.toString(n)}})}nonempty(e){return this.min(1,e)}}Po.create=(t,e)=>new Po({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Mt.ZodArray,...Kt(e)});function cf(t){if(t instanceof ar){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=su.create(cf(r))}return new ar({...t._def,shape:()=>e})}else return t instanceof Po?new Po({...t._def,type:cf(t.element)}):t instanceof su?su.create(cf(t.unwrap())):t instanceof $m?$m.create(cf(t.unwrap())):t instanceof mh?mh.create(t.items.map(e=>cf(e))):t}class ar extends an{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=cn.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==at.object){const u=this._getOrReturnCtx(e);return We(u,{code:Te.invalid_type,expected:at.object,received:u.parsedType}),Ot}const{status:r,ctx:s}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof xu&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const d=a[u],h=s.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new vu(s,h,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof xu){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(u==="strict")l.length>0&&(We(s,{code:Te.unrecognized_keys,keys:l}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const h=s.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new vu(s,h,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const h=await d.key,f=await d.value;u.push({key:h,value:f,alwaysSet:d.alwaysSet})}return u}).then(u=>Mi.mergeObjectSync(r,u)):Mi.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return lt.errToObj,new ar({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var a,o;const s=((o=(a=this._def).errorMap)==null?void 0:o.call(a,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:lt.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new ar({...this._def,unknownKeys:"strip"})}passthrough(){return new ar({...this._def,unknownKeys:"passthrough"})}extend(e){return new ar({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ar({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Mt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new ar({...this._def,catchall:e})}pick(e){const n={};for(const r of cn.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new ar({...this._def,shape:()=>n})}omit(e){const n={};for(const r of cn.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new ar({...this._def,shape:()=>n})}deepPartial(){return cf(this)}partial(e){const n={};for(const r of cn.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new ar({...this._def,shape:()=>n})}required(e){const n={};for(const r of cn.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof su;)a=a._def.innerType;n[r]=a}return new ar({...this._def,shape:()=>n})}keyof(){return vY(cn.objectKeys(this.shape))}}ar.create=(t,e)=>new ar({shape:()=>t,unknownKeys:"strip",catchall:xu.create(),typeName:Mt.ZodObject,...Kt(e)});ar.strictCreate=(t,e)=>new ar({shape:()=>t,unknownKeys:"strict",catchall:xu.create(),typeName:Mt.ZodObject,...Kt(e)});ar.lazycreate=(t,e)=>new ar({shape:t,unknownKeys:"strip",catchall:xu.create(),typeName:Mt.ZodObject,...Kt(e)});class p_ extends an{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new Rl(l.ctx.common.issues));return We(n,{code:Te.invalid_union,unionErrors:o}),Ot}if(n.common.async)return Promise.all(r.map(async a=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let a;const o=[];for(const c of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=c._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!a&&(a={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(c=>new Rl(c));return We(n,{code:Te.invalid_union,unionErrors:l}),Ot}}get options(){return this._def.options}}p_.create=(t,e)=>new p_({options:t,typeName:Mt.ZodUnion,...Kt(e)});function NC(t,e){const n=gc(t),r=gc(e);if(t===e)return{valid:!0,data:t};if(n===at.object&&r===at.object){const s=cn.objectKeys(e),a=cn.objectKeys(t).filter(l=>s.indexOf(l)!==-1),o={...t,...e};for(const l of a){const c=NC(t[l],e[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(n===at.array&&r===at.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let a=0;a<t.length;a++){const o=t[a],l=e[a],c=NC(o,l);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===at.date&&r===at.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class g_ extends an{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(a,o)=>{if(AF(a)||AF(o))return Ot;const l=NC(a.value,o.value);return l.valid?((TF(a)||TF(o))&&n.dirty(),{status:n.value,value:l.data}):(We(r,{code:Te.invalid_intersection_types}),Ot)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,o])=>s(a,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}g_.create=(t,e,n)=>new g_({left:t,right:e,typeName:Mt.ZodIntersection,...Kt(n)});class mh extends an{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==at.array)return We(r,{code:Te.invalid_type,expected:at.array,received:r.parsedType}),Ot;if(r.data.length<this._def.items.length)return We(r,{code:Te.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ot;!this._def.rest&&r.data.length>this._def.items.length&&(We(r,{code:Te.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new vu(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(a).then(o=>Mi.mergeArray(n,o)):Mi.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new mh({...this._def,rest:e})}}mh.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new mh({items:t,typeName:Mt.ZodTuple,rest:null,...Kt(e)})};class DF extends an{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==at.map)return We(r,{code:Te.invalid_type,expected:at.map,received:r.parsedType}),Ot;const s=this._def.keyType,a=this._def.valueType,o=[...r.data.entries()].map(([l,c],u)=>({key:s._parse(new vu(r,l,r.path,[u,"key"])),value:a._parse(new vu(r,c,r.path,[u,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return Ot;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return Ot;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}}}}DF.create=(t,e,n)=>new DF({valueType:e,keyType:t,typeName:Mt.ZodMap,...Kt(n)});class _v extends an{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==at.set)return We(r,{code:Te.invalid_type,expected:at.set,received:r.parsedType}),Ot;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(We(r,{code:Te.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(We(r,{code:Te.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const a=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return Ot;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const l=[...r.data.values()].map((c,u)=>a._parse(new vu(r,c,r.path,u)));return r.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(e,n){return new _v({...this._def,minSize:{value:e,message:lt.toString(n)}})}max(e,n){return new _v({...this._def,maxSize:{value:e,message:lt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}_v.create=(t,e)=>new _v({valueType:t,minSize:null,maxSize:null,typeName:Mt.ZodSet,...Kt(e)});class LF extends an{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}LF.create=(t,e)=>new LF({getter:t,typeName:Mt.ZodLazy,...Kt(e)});class SC extends an{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return We(n,{received:n.data,code:Te.invalid_literal,expected:this._def.value}),Ot}return{status:"valid",value:e.data}}get value(){return this._def.value}}SC.create=(t,e)=>new SC({value:t,typeName:Mt.ZodLiteral,...Kt(e)});function vY(t,e){return new Dm({values:t,typeName:Mt.ZodEnum,...Kt(e)})}class Dm extends an{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return We(n,{expected:cn.joinValues(r),received:n.parsedType,code:Te.invalid_type}),Ot}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return We(n,{received:n.data,code:Te.invalid_enum_value,options:r}),Ot}return ma(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Dm.create(e,{...this._def,...n})}exclude(e,n=this._def){return Dm.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Dm.create=vY;class $F extends an{_parse(e){const n=cn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==at.string&&r.parsedType!==at.number){const s=cn.objectValues(n);return We(r,{expected:cn.joinValues(s),received:r.parsedType,code:Te.invalid_type}),Ot}if(this._cache||(this._cache=new Set(cn.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=cn.objectValues(n);return We(r,{received:r.data,code:Te.invalid_enum_value,options:s}),Ot}return ma(e.data)}get enum(){return this._def.values}}$F.create=(t,e)=>new $F({values:t,typeName:Mt.ZodNativeEnum,...Kt(e)});class y_ extends an{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==at.promise&&n.common.async===!1)return We(n,{code:Te.invalid_type,expected:at.promise,received:n.parsedType}),Ot;const r=n.parsedType===at.promise?n.data:Promise.resolve(n.data);return ma(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}y_.create=(t,e)=>new y_({type:t,typeName:Mt.ZodPromise,...Kt(e)});class Lm extends an{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Mt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:o=>{We(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){const o=s.transform(r.data,a);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return Ot;const c=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return c.status==="aborted"?Ot:c.status==="dirty"||n.value==="dirty"?ny(c.value):c});{if(n.value==="aborted")return Ot;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?Ot:l.status==="dirty"||n.value==="dirty"?ny(l.value):l}}if(s.type==="refinement"){const o=l=>{const c=s.refinement(l,a);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?Ot:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?Ot:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Mm(o))return Ot;const l=s.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Mm(o)?Promise.resolve(s.transform(o.value,a)).then(l=>({status:n.value,value:l})):Ot);cn.assertNever(s)}}Lm.create=(t,e,n)=>new Lm({schema:t,typeName:Mt.ZodEffects,effect:e,...Kt(n)});Lm.createWithPreprocess=(t,e,n)=>new Lm({schema:e,effect:{type:"preprocess",transform:t},typeName:Mt.ZodEffects,...Kt(n)});class su extends an{_parse(e){return this._getType(e)===at.undefined?ma(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}su.create=(t,e)=>new su({innerType:t,typeName:Mt.ZodOptional,...Kt(e)});class $m extends an{_parse(e){return this._getType(e)===at.null?ma(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}$m.create=(t,e)=>new $m({innerType:t,typeName:Mt.ZodNullable,...Kt(e)});class EC extends an{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===at.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}EC.create=(t,e)=>new EC({innerType:t,typeName:Mt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Kt(e)});class AC extends an{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return f_(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Rl(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Rl(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}AC.create=(t,e)=>new AC({innerType:t,typeName:Mt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Kt(e)});class FF extends an{_parse(e){if(this._getType(e)!==at.nan){const r=this._getOrReturnCtx(e);return We(r,{code:Te.invalid_type,expected:at.nan,received:r.parsedType}),Ot}return{status:"valid",value:e.data}}}FF.create=t=>new FF({typeName:Mt.ZodNaN,...Kt(t)});class n1e extends an{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class MO extends an{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Ot:a.status==="dirty"?(n.dirty(),ny(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Ot:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new MO({in:e,out:n,typeName:Mt.ZodPipeline})}}class TC extends an{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Mm(s)&&(s.value=Object.freeze(s.value)),s);return f_(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}TC.create=(t,e)=>new TC({innerType:t,typeName:Mt.ZodReadonly,...Kt(e)});ar.lazycreate;var Mt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Mt||(Mt={}));const Ue=Vc.create,VF=jC.create;xu.create;Po.create;const Vu=ar.create;ar.strictCreate;p_.create;g_.create;mh.create;const xY=SC.create,bY=Dm.create;y_.create;su.create;$m.create;var r1e="Label",wY=N.forwardRef((t,e)=>i.jsx(Je.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));wY.displayName=r1e;var _Y=wY;const s1e=Th("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),X=N.forwardRef(({className:t,...e},n)=>i.jsx(_Y,{ref:n,className:pe(s1e(),t),...e}));X.displayName=_Y.displayName;const DO=N.createContext({});function LO(t){const e=N.useRef(null);return e.current===null&&(e.current=t()),e.current}const jY=typeof window<"u",NY=jY?N.useLayoutEffect:N.useEffect,KN=N.createContext(null);function $O(t,e){t.indexOf(e)===-1&&t.push(e)}function v_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Fo=(t,e,n)=>n>e?e:n<t?t:n;let GN=()=>{},Fm=()=>{};const Ol={},SY=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function EY(t){return typeof t=="object"&&t!==null}const AY=t=>/^0[^.\s]+$/u.test(t);function FO(t){let e;return()=>(e===void 0&&(e=t()),e)}const ra=t=>t,i1e=(t,e)=>n=>e(t(n)),Zx=(...t)=>t.reduce(i1e),jv=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class VO{constructor(){this.subscriptions=[]}add(e){return $O(this.subscriptions,e),()=>v_(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let a=0;a<s;a++){const o=this.subscriptions[a];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const sa=t=>t*1e3,Qi=t=>t/1e3;function TY(t,e){return e?t*(1e3/e):0}const CY=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,a1e=1e-7,o1e=12;function l1e(t,e,n,r,s){let a,o,l=0;do o=e+(n-e)/2,a=CY(o,r,s)-t,a>0?n=o:e=o;while(Math.abs(a)>a1e&&++l<o1e);return o}function Jx(t,e,n,r){if(t===e&&n===r)return ra;const s=a=>l1e(a,0,1,t,n);return a=>a===0||a===1?a:CY(s(a),e,r)}const PY=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,IY=t=>e=>1-t(1-e),kY=Jx(.33,1.53,.69,.99),BO=IY(kY),RY=PY(BO),OY=t=>(t*=2)<1?.5*BO(t):.5*(2-Math.pow(2,-10*(t-1))),UO=t=>1-Math.sin(Math.acos(t)),MY=IY(UO),DY=PY(UO),c1e=Jx(.42,0,1,1),u1e=Jx(0,0,.58,1),LY=Jx(.42,0,.58,1),d1e=t=>Array.isArray(t)&&typeof t[0]!="number",$Y=t=>Array.isArray(t)&&typeof t[0]=="number",BF={linear:ra,easeIn:c1e,easeInOut:LY,easeOut:u1e,circIn:UO,circInOut:DY,circOut:MY,backIn:BO,backInOut:RY,backOut:kY,anticipate:OY},h1e=t=>typeof t=="string",UF=t=>{if($Y(t)){Fm(t.length===4,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");const[e,n,r,s]=t;return Jx(e,n,r,s)}else if(h1e(t))return Fm(BF[t]!==void 0,`Invalid easing type '${t}'`,"invalid-easing-type"),BF[t];return t},n0=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],zF={value:null,addProjectionMetrics:null};function f1e(t,e){let n=new Set,r=new Set,s=!1,a=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},c=0;function u(h){o.has(h)&&(d.schedule(h),t()),c++,h(l)}const d={schedule:(h,f=!1,m=!1)=>{const g=m&&s?n:r;return f&&o.add(h),g.has(h)||g.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(l=h,s){a=!0;return}s=!0,[n,r]=[r,n],n.forEach(u),e&&zF.value&&zF.value.frameloop[e].push(c),c=0,n.clear(),s=!1,a&&(a=!1,d.process(h))}};return d}const m1e=40;function FY(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=n0.reduce((E,T)=>(E[T]=f1e(a,e?T:void 0),E),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:f,render:m,postRender:v}=o,g=()=>{const E=Ol.useManualTiming?s.timestamp:performance.now();n=!1,Ol.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(E-s.timestamp,m1e),1)),s.timestamp=E,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),f.process(s),m.process(s),v.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(g))},y=()=>{n=!0,r=!0,s.isProcessing||t(g)};return{schedule:n0.reduce((E,T)=>{const x=o[T];return E[T]=(S,_=!1,p=!1)=>(n||y(),x.schedule(S,_,p)),E},{}),cancel:E=>{for(let T=0;T<n0.length;T++)o[n0[T]].cancel(E)},state:s,steps:o}}const{schedule:On,cancel:bu,state:rs,steps:SE}=FY(typeof requestAnimationFrame<"u"?requestAnimationFrame:ra,!0);let Q0;function p1e(){Q0=void 0}const Ls={now:()=>(Q0===void 0&&Ls.set(rs.isProcessing||Ol.useManualTiming?rs.timestamp:performance.now()),Q0),set:t=>{Q0=t,queueMicrotask(p1e)}},VY=t=>e=>typeof e=="string"&&e.startsWith(t),BY=VY("--"),g1e=VY("var(--"),zO=t=>g1e(t)?y1e.test(t.split("/*")[0].trim()):!1,y1e=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function qF(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const Lp={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Nv={...Lp,transform:t=>Fo(0,1,t)},r0={...Lp,default:1},Sy=t=>Math.round(t*1e5)/1e5,qO=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function v1e(t){return t==null}const x1e=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,WO=(t,e)=>n=>!!(typeof n=="string"&&x1e.test(n)&&n.startsWith(t)||e&&!v1e(n)&&Object.prototype.hasOwnProperty.call(n,e)),UY=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,a,o,l]=r.match(qO);return{[t]:parseFloat(s),[e]:parseFloat(a),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},b1e=t=>Fo(0,255,t),EE={...Lp,transform:t=>Math.round(b1e(t))},bd={test:WO("rgb","red"),parse:UY("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+EE.transform(t)+", "+EE.transform(e)+", "+EE.transform(n)+", "+Sy(Nv.transform(r))+")"};function w1e(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const CC={test:WO("#"),parse:w1e,transform:bd.transform},eb=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),dc=eb("deg"),Io=eb("%"),et=eb("px"),_1e=eb("vh"),j1e=eb("vw"),WF={...Io,parse:t=>Io.parse(t)/100,transform:t=>Io.transform(t*100)},Nf={test:WO("hsl","hue"),parse:UY("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Io.transform(Sy(e))+", "+Io.transform(Sy(n))+", "+Sy(Nv.transform(r))+")"},Sr={test:t=>bd.test(t)||CC.test(t)||Nf.test(t),parse:t=>bd.test(t)?bd.parse(t):Nf.test(t)?Nf.parse(t):CC.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?bd.transform(t):Nf.transform(t),getAnimatableNone:t=>{const e=Sr.parse(t);return e.alpha=0,Sr.transform(e)}},N1e=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function S1e(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(qO))==null?void 0:e.length)||0)+(((n=t.match(N1e))==null?void 0:n.length)||0)>0}const zY="number",qY="color",E1e="var",A1e="var(",HF="${}",T1e=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Sv(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const l=e.replace(T1e,c=>(Sr.test(c)?(r.color.push(a),s.push(qY),n.push(Sr.parse(c))):c.startsWith(A1e)?(r.var.push(a),s.push(E1e),n.push(c)):(r.number.push(a),s.push(zY),n.push(parseFloat(c))),++a,HF)).split(HF);return{values:n,split:l,indexes:r,types:s}}function WY(t){return Sv(t).values}function HY(t){const{split:e,types:n}=Sv(t),r=e.length;return s=>{let a="";for(let o=0;o<r;o++)if(a+=e[o],s[o]!==void 0){const l=n[o];l===zY?a+=Sy(s[o]):l===qY?a+=Sr.transform(s[o]):a+=s[o]}return a}}const C1e=t=>typeof t=="number"?0:Sr.test(t)?Sr.getAnimatableNone(t):t;function P1e(t){const e=WY(t);return HY(t)(e.map(C1e))}const wu={test:S1e,parse:WY,createTransformer:HY,getAnimatableNone:P1e};function AE(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function I1e({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,a=0,o=0;if(!e)s=a=o=n;else{const l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;s=AE(c,l,t+1/3),a=AE(c,l,t),o=AE(c,l,t-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function x_(t,e){return n=>n>0?e:t}const Zn=(t,e,n)=>t+(e-t)*n,TE=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},k1e=[CC,bd,Nf],R1e=t=>k1e.find(e=>e.test(t));function KF(t){const e=R1e(t);if(GN(!!e,`'${t}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!e)return!1;let n=e.parse(t);return e===Nf&&(n=I1e(n)),n}const GF=(t,e)=>{const n=KF(t),r=KF(e);if(!n||!r)return x_(t,e);const s={...n};return a=>(s.red=TE(n.red,r.red,a),s.green=TE(n.green,r.green,a),s.blue=TE(n.blue,r.blue,a),s.alpha=Zn(n.alpha,r.alpha,a),bd.transform(s))},PC=new Set(["none","hidden"]);function O1e(t,e){return PC.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function M1e(t,e){return n=>Zn(t,e,n)}function HO(t){return typeof t=="number"?M1e:typeof t=="string"?zO(t)?x_:Sr.test(t)?GF:$1e:Array.isArray(t)?KY:typeof t=="object"?Sr.test(t)?GF:D1e:x_}function KY(t,e){const n=[...t],r=n.length,s=t.map((a,o)=>HO(a)(a,e[o]));return a=>{for(let o=0;o<r;o++)n[o]=s[o](a);return n}}function D1e(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=HO(t[s])(t[s],e[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function L1e(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=t.indexes[a][r[a]],l=t.values[o]??0;n[s]=l,r[a]++}return n}const $1e=(t,e)=>{const n=wu.createTransformer(e),r=Sv(t),s=Sv(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?PC.has(t)&&!s.values.length||PC.has(e)&&!r.values.length?O1e(t,e):Zx(KY(L1e(r,s),s.values),n):(GN(!0,`Complex values '${t}' and '${e}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),x_(t,e))};function GY(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Zn(t,e,n):HO(t)(t,e)}const F1e=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>On.update(e,n),stop:()=>bu(e),now:()=>rs.isProcessing?rs.timestamp:Ls.now()}},YY=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let a=0;a<s;a++)r+=Math.round(t(a/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},b_=2e4;function KO(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<b_;)e+=n,r=t.next(e);return e>=b_?1/0:e}function V1e(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(KO(r),b_);return{type:"keyframes",ease:a=>r.next(s*a).value/e,duration:Qi(s)}}const B1e=5;function QY(t,e,n){const r=Math.max(e-B1e,0);return TY(n-t(r),e-r)}const Yn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},CE=.001;function U1e({duration:t=Yn.duration,bounce:e=Yn.bounce,velocity:n=Yn.velocity,mass:r=Yn.mass}){let s,a;GN(t<=sa(Yn.maxDuration),"Spring duration must be 10 seconds or less","spring-duration-limit");let o=1-e;o=Fo(Yn.minDamping,Yn.maxDamping,o),t=Fo(Yn.minDuration,Yn.maxDuration,Qi(t)),o<1?(s=u=>{const d=u*o,h=d*t,f=d-n,m=IC(u,o),v=Math.exp(-h);return CE-f/m*v},a=u=>{const h=u*o*t,f=h*n+n,m=Math.pow(o,2)*Math.pow(u,2)*t,v=Math.exp(-h),g=IC(Math.pow(u,2),o);return(-s(u)+CE>0?-1:1)*((f-m)*v)/g}):(s=u=>{const d=Math.exp(-u*t),h=(u-n)*t+1;return-CE+d*h},a=u=>{const d=Math.exp(-u*t),h=(n-u)*(t*t);return d*h});const l=5/t,c=q1e(s,a,l);if(t=sa(t),isNaN(c))return{stiffness:Yn.stiffness,damping:Yn.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const z1e=12;function q1e(t,e,n){let r=n;for(let s=1;s<z1e;s++)r=r-t(r)/e(r);return r}function IC(t,e){return t*Math.sqrt(1-e*e)}const W1e=["duration","bounce"],H1e=["stiffness","damping","mass"];function YF(t,e){return e.some(n=>t[n]!==void 0)}function K1e(t){let e={velocity:Yn.velocity,stiffness:Yn.stiffness,damping:Yn.damping,mass:Yn.mass,isResolvedFromDuration:!1,...t};if(!YF(t,H1e)&&YF(t,W1e))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,a=2*Fo(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Yn.mass,stiffness:s,damping:a}}else{const n=U1e(t);e={...e,...n,mass:Yn.mass},e.isResolvedFromDuration=!0}return e}function w_(t=Yn.visualDuration,e=Yn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:a},{stiffness:c,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:m}=K1e({...n,velocity:-Qi(n.velocity||0)}),v=f||0,g=u/(2*Math.sqrt(c*d)),y=o-a,w=Qi(Math.sqrt(c/d)),b=Math.abs(y)<5;r||(r=b?Yn.restSpeed.granular:Yn.restSpeed.default),s||(s=b?Yn.restDelta.granular:Yn.restDelta.default);let E;if(g<1){const x=IC(w,g);E=S=>{const _=Math.exp(-g*w*S);return o-_*((v+g*w*y)/x*Math.sin(x*S)+y*Math.cos(x*S))}}else if(g===1)E=x=>o-Math.exp(-w*x)*(y+(v+w*y)*x);else{const x=w*Math.sqrt(g*g-1);E=S=>{const _=Math.exp(-g*w*S),p=Math.min(x*S,300);return o-_*((v+g*w*y)*Math.sinh(p)+x*y*Math.cosh(p))/x}}const T={calculatedDuration:m&&h||null,next:x=>{const S=E(x);if(m)l.done=x>=h;else{let _=x===0?v:0;g<1&&(_=x===0?sa(v):QY(E,x,S));const p=Math.abs(_)<=r,A=Math.abs(o-S)<=s;l.done=p&&A}return l.value=l.done?o:S,l},toString:()=>{const x=Math.min(KO(T),b_),S=YY(_=>T.next(x*_).value,x,30);return x+"ms "+S},toTransition:()=>{}};return T}w_.applyToOptions=t=>{const e=V1e(t,100,w_);return t.ease=e.ease,t.duration=sa(e.duration),t.type="keyframes",t};function kC({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=t[0],f={done:!1,value:h},m=p=>l!==void 0&&p<l||c!==void 0&&p>c,v=p=>l===void 0?c:c===void 0||Math.abs(l-p)<Math.abs(c-p)?l:c;let g=n*e;const y=h+g,w=o===void 0?y:o(y);w!==y&&(g=w-h);const b=p=>-g*Math.exp(-p/r),E=p=>w+b(p),T=p=>{const A=b(p),P=E(p);f.done=Math.abs(A)<=u,f.value=f.done?w:P};let x,S;const _=p=>{m(f.value)&&(x=p,S=w_({keyframes:[f.value,v(f.value)],velocity:QY(E,p,f.value),damping:s,stiffness:a,restDelta:u,restSpeed:d}))};return _(0),{calculatedDuration:null,next:p=>{let A=!1;return!S&&x===void 0&&(A=!0,T(p),_(p)),x!==void 0&&p>=x?S.next(p-x):(!A&&T(p),f)}}}function G1e(t,e,n){const r=[],s=n||Ol.mix||GY,a=t.length-1;for(let o=0;o<a;o++){let l=s(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||ra:e;l=Zx(c,l)}r.push(l)}return r}function Y1e(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const a=t.length;if(Fm(a===e.length,"Both input and output ranges must be the same length","range-length"),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=G1e(e,r,s),c=l.length,u=d=>{if(o&&d<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const f=jv(t[h],t[h+1],d);return l[h](f)};return n?d=>u(Fo(t[0],t[a-1],d)):u}function Q1e(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=jv(0,e,r);t.push(Zn(n,1,s))}}function X1e(t){const e=[0];return Q1e(e,t.length-1),e}function Z1e(t,e){return t.map(n=>n*e)}function J1e(t,e){return t.map(()=>e||LY).splice(0,t.length-1)}function Ey({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=d1e(r)?r.map(UF):UF(r),a={done:!1,value:e[0]},o=Z1e(n&&n.length===e.length?n:X1e(e),t),l=Y1e(o,e,{ease:Array.isArray(s)?s:J1e(e,s)});return{calculatedDuration:t,next:c=>(a.value=l(c),a.done=c>=t,a)}}const eSe=t=>t!==null;function GO(t,{repeat:e,repeatType:n="loop"},r,s=1){const a=t.filter(eSe),l=s<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!l||r===void 0?a[l]:r}const tSe={decay:kC,inertia:kC,tween:Ey,keyframes:Ey,spring:w_};function XY(t){typeof t.type=="string"&&(t.type=tSe[t.type])}class YO{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const nSe=t=>t/100;class QO extends YO{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==Ls.now()&&this.tick(Ls.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;XY(e);const{type:n=Ey,repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:o=0}=e;let{keyframes:l}=e;const c=n||Ey;c!==Ey&&typeof l[0]!="number"&&(this.mixKeyframes=Zx(nSe,GY(l[0],l[1])),l=[0,100]);const u=c({...e,keyframes:l});a==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=KO(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:f,repeatDelay:m,type:v,onUpdate:g,finalKeyframe:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const w=this.currentTime-u*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?w<0:w>s;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let E=this.currentTime,T=r;if(h){const p=Math.min(this.currentTime,s)/l;let A=Math.floor(p),P=p%1;!P&&p>=1&&(P=1),P===1&&A--,A=Math.min(A,h+1),!!(A%2)&&(f==="reverse"?(P=1-P,m&&(P-=m/l)):f==="mirror"&&(T=o)),E=Fo(0,1,P)*l}const x=b?{done:!1,value:d[0]}:T.next(E);a&&(x.value=a(x.value));let{done:S}=x;!b&&c!==null&&(S=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const _=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return _&&v!==kC&&(x.value=GO(d,this.options,y,this.speed)),g&&g(x.value),_&&this.finish(),x}then(e,n){return this.finished.then(e,n)}get duration(){return Qi(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Qi(e)}get time(){return Qi(this.currentTime)}set time(e){var n;e=sa(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ls.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Qi(this.currentTime))}play(){var s,a;if(this.isStopped)return;const{driver:e=F1e,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(a=(s=this.options).onPlay)==null||a.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ls.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function rSe(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const wd=t=>t*180/Math.PI,RC=t=>{const e=wd(Math.atan2(t[1],t[0]));return OC(e)},sSe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:RC,rotateZ:RC,skewX:t=>wd(Math.atan(t[1])),skewY:t=>wd(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},OC=t=>(t=t%360,t<0&&(t+=360),t),QF=RC,XF=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),ZF=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),iSe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:XF,scaleY:ZF,scale:t=>(XF(t)+ZF(t))/2,rotateX:t=>OC(wd(Math.atan2(t[6],t[5]))),rotateY:t=>OC(wd(Math.atan2(-t[2],t[0]))),rotateZ:QF,rotate:QF,skewX:t=>wd(Math.atan(t[4])),skewY:t=>wd(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function MC(t){return t.includes("scale")?1:0}function DC(t,e){if(!t||t==="none")return MC(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=iSe,s=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=sSe,s=l}if(!s)return MC(e);const a=r[e],o=s[1].split(",").map(oSe);return typeof a=="function"?a(o):o[a]}const aSe=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return DC(n,e)};function oSe(t){return parseFloat(t.trim())}const $p=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Fp=new Set($p),JF=t=>t===Lp||t===et,lSe=new Set(["x","y","z"]),cSe=$p.filter(t=>!lSe.has(t));function uSe(t){const e=[];return cSe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Bc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>DC(e,"x"),y:(t,{transform:e})=>DC(e,"y")};Bc.translateX=Bc.x;Bc.translateY=Bc.y;const Bd=new Set;let LC=!1,$C=!1,FC=!1;function ZY(){if($C){const t=Array.from(Bd).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=uSe(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,o])=>{var l;(l=r.getValue(a))==null||l.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}$C=!1,LC=!1,Bd.forEach(t=>t.complete(FC)),Bd.clear()}function JY(){Bd.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&($C=!0)})}function dSe(){FC=!0,JY(),ZY(),FC=!1}class XO{constructor(e,n,r,s,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Bd.add(this),LC||(LC=!0,On.read(JY),On.resolveKeyframes(ZY))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const a=s==null?void 0:s.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const l=r.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),s&&a===void 0&&s.set(e[0])}rSe(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Bd.delete(this)}cancel(){this.state==="scheduled"&&(Bd.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const hSe=t=>t.startsWith("--");function fSe(t,e,n){hSe(e)?t.style.setProperty(e,n):t.style[e]=n}const mSe=FO(()=>window.ScrollTimeline!==void 0),pSe={};function gSe(t,e){const n=FO(t);return()=>pSe[e]??n()}const eQ=gSe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ry=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,eV={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ry([0,.65,.55,1]),circOut:ry([.55,0,1,.45]),backIn:ry([.31,.01,.66,-.59]),backOut:ry([.33,1.53,.69,.99])};function tQ(t,e){if(t)return typeof t=="function"?eQ()?YY(t,e):"ease-out":$Y(t)?ry(t):Array.isArray(t)?t.map(n=>tQ(n,e)||eV.easeOut):eV[t]}function ySe(t,e,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:o="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[e]:n};c&&(d.offset=c);const h=tQ(l,s);Array.isArray(h)&&(d.easing=h);const f={delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),t.animate(d,f)}function nQ(t){return typeof t=="function"&&"applyToOptions"in t}function vSe({type:t,...e}){return nQ(t)&&eQ()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class rQ extends YO{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=e,Fm(typeof e.type!="string",`Mini animate() doesn't support "type" as a string.`,"mini-spring");const u=vSe(e);this.animation=ySe(n,r,s,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const d=GO(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):fSe(n,r,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var n,r,s;const e=(n=this.options)==null?void 0:n.element;!this.isPseudoElement&&(e!=null&&e.isConnected)&&((s=(r=this.animation).commitStyles)==null||s.call(r))}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Qi(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Qi(e)}get time(){return Qi(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=sa(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&mSe()?(this.animation.timeline=e,ra):n(this)}}const sQ={anticipate:OY,backInOut:RY,circInOut:DY};function xSe(t){return t in sQ}function bSe(t){typeof t.ease=="string"&&xSe(t.ease)&&(t.ease=sQ[t.ease])}const PE=10;class wSe extends rQ{constructor(e){bSe(e),XY(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:a,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new QO({...o,autoplay:!1}),c=Math.max(PE,Ls.now()-this.startTime),u=Fo(0,PE,c-PE);n.setWithVelocity(l.sample(Math.max(0,c-u)).value,l.sample(c).value,u),l.stop()}}const tV=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(wu.test(t)||t==="0")&&!t.startsWith("url("));function _Se(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function jSe(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],o=tV(s,e),l=tV(a,e);return GN(o===l,`You are trying to animate ${e} from "${s}" to "${a}". "${o?a:s}" is not an animatable value.`,"value-not-animatable"),!o||!l?!1:_Se(t)||(n==="spring"||nQ(n))&&r}function VC(t){t.duration=0,t.type="keyframes"}const NSe=new Set(["opacity","clipPath","filter","transform"]),SSe=FO(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function ESe(t){var d;const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:a,type:o}=t;if(!(((d=e==null?void 0:e.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return SSe()&&n&&NSe.has(n)&&(n!=="transform"||!u)&&!c&&!r&&s!=="mirror"&&a!==0&&o!=="inertia"}const ASe=40;class TSe extends YO{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:o="loop",keyframes:l,name:c,motionValue:u,element:d,...h}){var v;super(),this.stop=()=>{var g,y;this._animation&&(this._animation.stop(),(g=this.stopTimeline)==null||g.call(this)),(y=this.keyframeResolver)==null||y.cancel()},this.createdAt=Ls.now();const f={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:o,name:c,motionValue:u,element:d,...h},m=(d==null?void 0:d.KeyframeResolver)||XO;this.keyframeResolver=new m(l,(g,y,w)=>this.onKeyframesResolved(g,y,f,!w),c,u,d),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(e,n,r,s){var y,w;this.keyframeResolver=void 0;const{name:a,type:o,velocity:l,delay:c,isHandoff:u,onUpdate:d}=r;this.resolvedAt=Ls.now(),jSe(e,a,o,l)||((Ol.instantAnimations||!c)&&(d==null||d(GO(e,r,n))),e[0]=e[e.length-1],VC(r),r.repeat=0);const f={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>ASe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},m=!u&&ESe(f),v=(w=(y=f.motionValue)==null?void 0:y.owner)==null?void 0:w.current,g=m?new wSe({...f,element:v}):new QO(f);g.finished.then(()=>{this.notifyFinished()}).catch(ra),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),dSe()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function iQ(t,e,n,r=0,s=1){const a=Array.from(t).sort((u,d)=>u.sortNodePosition(d)).indexOf(e),o=t.size,l=(o-1)*r;return typeof n=="function"?n(a,o):s===1?a*r:l-a*r}const CSe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function PSe(t){const e=CSe.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}const ISe=4;function aQ(t,e,n=1){Fm(n<=ISe,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`,"max-css-var-depth");const[r,s]=PSe(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const o=a.trim();return SY(o)?parseFloat(o):o}return zO(s)?aQ(s,e,n+1):s}const kSe={type:"spring",stiffness:500,damping:25,restSpeed:10},RSe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),OSe={type:"keyframes",duration:.8},MSe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},DSe=(t,{keyframes:e})=>e.length>2?OSe:Fp.has(t)?t.startsWith("scale")?RSe(e[1]):kSe:MSe,LSe=t=>t!==null;function $Se(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(LSe),a=e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}function oQ(t,e){if(t!=null&&t.inherit&&e){const{inherit:n,...r}=t;return{...e,...r}}return t}function ZO(t,e){const n=(t==null?void 0:t[e])??(t==null?void 0:t.default)??t;return n!==t?oQ(n,t):n}function FSe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const JO=(t,e,n,r={},s,a)=>o=>{const l=ZO(r,t)||{},c=l.delay||r.delay||0;let{elapsed:u=0}=r;u=u-sa(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-u,onUpdate:f=>{e.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:a?void 0:s};FSe(l)||Object.assign(d,DSe(t,d)),d.duration&&(d.duration=sa(d.duration)),d.repeatDelay&&(d.repeatDelay=sa(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(VC(d),d.delay===0&&(h=!0)),(Ol.instantAnimations||Ol.skipAnimations||s!=null&&s.shouldSkipAnimations)&&(h=!0,VC(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,h&&!a&&e.get()!==void 0){const f=$Se(d.keyframes,l);if(f!==void 0){On.update(()=>{d.onUpdate(f),d.onComplete()});return}}return l.isSync?new QO(d):new TSe(d)};function nV(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function e2(t,e,n,r){if(typeof e=="function"){const[s,a]=nV(r);e=e(n!==void 0?n:t.custom,s,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,a]=nV(r);e=e(n!==void 0?n:t.custom,s,a)}return e}function Xf(t,e,n){const r=t.getProps();return e2(r,e,n!==void 0?n:r.custom,t)}const lQ=new Set(["width","height","top","left","right","bottom",...$p]),rV=30,VSe=t=>!isNaN(parseFloat(t));class BSe{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var a;const s=Ls.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ls.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=VSe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new VO);const r=this.events[e].add(n);return e==="change"?()=>{r(),On.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ls.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>rV)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,rV);return TY(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Vm(t,e){return new BSe(t,e)}const BC=t=>Array.isArray(t);function USe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Vm(n))}function zSe(t){return BC(t)?t[t.length-1]||0:t}function qSe(t,e){const n=Xf(t,e);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const o in a){const l=zSe(a[o]);USe(t,o,l)}}const Ss=t=>!!(t&&t.getVelocity);function WSe(t){return!!(Ss(t)&&t.add)}function UC(t,e){const n=t.getValue("willChange");if(WSe(n))return n.add(e);if(!n&&Ol.WillChange){const r=new Ol.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function t2(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const HSe="framerAppearId",cQ="data-"+t2(HSe);function uQ(t){return t.props[cQ]}function KSe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function dQ(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:a,transitionEnd:o,...l}=e;const c=t.getDefaultTransition();a=a?oQ(a,c):c;const u=a==null?void 0:a.reduceMotion;r&&(a=r);const d=[],h=s&&t.animationState&&t.animationState.getState()[s];for(const f in l){const m=t.getValue(f,t.latestValues[f]??null),v=l[f];if(v===void 0||h&&KSe(h,f))continue;const g={delay:n,...ZO(a||{},f)},y=m.get();if(y!==void 0&&!m.isAnimating&&!Array.isArray(v)&&v===y&&!g.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const T=uQ(t);if(T){const x=window.MotionHandoffAnimation(T,f,On);x!==null&&(g.startTime=x,w=!0)}}UC(t,f);const b=u??t.shouldReduceMotion;m.start(JO(f,m,v,b&&lQ.has(f)?{type:!1}:g,t,w));const E=m.animation;E&&d.push(E)}if(o){const f=()=>On.update(()=>{o&&qSe(t,o)});d.length?Promise.all(d).then(f):f()}return d}function zC(t,e,n={}){var c;const r=Xf(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(dQ(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=s;return GSe(t,e,u,d,h,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,d]=l==="beforeChildren"?[a,o]:[o,a];return u().then(()=>d())}else return Promise.all([a(),o(n.delay)])}function GSe(t,e,n=0,r=0,s=0,a=1,o){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(zC(c,e,{...o,delay:n+(typeof r=="function"?0:r)+iQ(t.variantChildren,c,r,s,a)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function YSe(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(a=>zC(t,a,n));r=Promise.all(s)}else if(typeof e=="string")r=zC(t,e,n);else{const s=typeof e=="function"?Xf(t,e,n.custom):e;r=Promise.all(dQ(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const QSe={test:t=>t==="auto",parse:t=>t},hQ=t=>e=>e.test(t),fQ=[Lp,et,Io,dc,j1e,_1e,QSe],sV=t=>fQ.find(hQ(t));function XSe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||AY(t):!0}const ZSe=new Set(["brightness","contrast","saturate","opacity"]);function JSe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(qO)||[];if(!r)return t;const s=n.replace(r,"");let a=ZSe.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+s+")"}const eEe=/\b([a-z-]*)\(.*?\)/gu,qC={...wu,getAnimatableNone:t=>{const e=t.match(eEe);return e?e.map(JSe).join(" "):t}},iV={...Lp,transform:Math.round},tEe={rotate:dc,rotateX:dc,rotateY:dc,rotateZ:dc,scale:r0,scaleX:r0,scaleY:r0,scaleZ:r0,skew:dc,skewX:dc,skewY:dc,distance:et,translateX:et,translateY:et,translateZ:et,x:et,y:et,z:et,perspective:et,transformPerspective:et,opacity:Nv,originX:WF,originY:WF,originZ:et},n2={borderWidth:et,borderTopWidth:et,borderRightWidth:et,borderBottomWidth:et,borderLeftWidth:et,borderRadius:et,borderTopLeftRadius:et,borderTopRightRadius:et,borderBottomRightRadius:et,borderBottomLeftRadius:et,width:et,maxWidth:et,height:et,maxHeight:et,top:et,right:et,bottom:et,left:et,inset:et,insetBlock:et,insetBlockStart:et,insetBlockEnd:et,insetInline:et,insetInlineStart:et,insetInlineEnd:et,padding:et,paddingTop:et,paddingRight:et,paddingBottom:et,paddingLeft:et,paddingBlock:et,paddingBlockStart:et,paddingBlockEnd:et,paddingInline:et,paddingInlineStart:et,paddingInlineEnd:et,margin:et,marginTop:et,marginRight:et,marginBottom:et,marginLeft:et,marginBlock:et,marginBlockStart:et,marginBlockEnd:et,marginInline:et,marginInlineStart:et,marginInlineEnd:et,fontSize:et,backgroundPositionX:et,backgroundPositionY:et,...tEe,zIndex:iV,fillOpacity:Nv,strokeOpacity:Nv,numOctaves:iV},nEe={...n2,color:Sr,backgroundColor:Sr,outlineColor:Sr,fill:Sr,stroke:Sr,borderColor:Sr,borderTopColor:Sr,borderRightColor:Sr,borderBottomColor:Sr,borderLeftColor:Sr,filter:qC,WebkitFilter:qC},mQ=t=>nEe[t];function pQ(t,e){let n=mQ(t);return n!==qC&&(n=wu),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const rEe=new Set(["auto","none","0"]);function sEe(t,e,n){let r=0,s;for(;r<t.length&&!s;){const a=t[r];typeof a=="string"&&!rEe.has(a)&&Sv(a).values.length&&(s=t[r]),r++}if(s&&n)for(const a of e)t[a]=pQ(n,s)}class iEe extends XO{constructor(e,n,r,s,a){super(e,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let h=e[d];if(typeof h=="string"&&(h=h.trim(),zO(h))){const f=aQ(h,n.current);f!==void 0&&(e[d]=f),d===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!lQ.has(r)||e.length!==2)return;const[s,a]=e,o=sV(s),l=sV(a),c=qF(s),u=qF(a);if(c!==u&&Bc[r]){this.needsMeasurement=!0;return}if(o!==l)if(JF(o)&&JF(l))for(let d=0;d<e.length;d++){const h=e[d];typeof h=="string"&&(e[d]=parseFloat(h))}else Bc[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||XSe(e[s]))&&r.push(s);r.length&&sEe(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Bc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var l;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=Bc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}const aEe=new Set(["opacity","clipPath","filter","transform"]);function gQ(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){const s=document.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t).filter(r=>r!=null)}const yQ=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function WC(t){return EY(t)&&"offsetHeight"in t}const{schedule:r2,cancel:Jet}=FY(queueMicrotask,!1),Na={x:!1,y:!1};function vQ(){return Na.x||Na.y}function oEe(t){return t==="x"||t==="y"?Na[t]?null:(Na[t]=!0,()=>{Na[t]=!1}):Na.x||Na.y?null:(Na.x=Na.y=!0,()=>{Na.x=Na.y=!1})}function xQ(t,e){const n=gQ(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function lEe(t){return!(t.pointerType==="touch"||vQ())}function cEe(t,e,n={}){const[r,s,a]=xQ(t,n);return r.forEach(o=>{let l=!1,c=!1,u;const d=()=>{o.removeEventListener("pointerleave",v)},h=y=>{u&&(u(y),u=void 0),d()},f=y=>{l=!1,window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",f),c&&(c=!1,h(y))},m=()=>{l=!0,window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",f,s)},v=y=>{if(y.pointerType!=="touch"){if(l){c=!0;return}h(y)}},g=y=>{if(!lEe(y))return;c=!1;const w=e(o,y);typeof w=="function"&&(u=w,o.addEventListener("pointerleave",v,s))};o.addEventListener("pointerenter",g,s),o.addEventListener("pointerdown",m,s)}),a}const bQ=(t,e)=>e?t===e?!0:bQ(t,e.parentElement):!1,s2=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,uEe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function dEe(t){return uEe.has(t.tagName)||t.isContentEditable===!0}const hEe=new Set(["INPUT","SELECT","TEXTAREA"]);function fEe(t){return hEe.has(t.tagName)||t.isContentEditable===!0}const X0=new WeakSet;function aV(t){return e=>{e.key==="Enter"&&t(e)}}function IE(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const mEe=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=aV(()=>{if(X0.has(n))return;IE(n,"down");const s=aV(()=>{IE(n,"up")}),a=()=>IE(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function oV(t){return s2(t)&&!vQ()}const lV=new WeakSet;function pEe(t,e,n={}){const[r,s,a]=xQ(t,n),o=l=>{const c=l.currentTarget;if(!oV(l)||lV.has(l))return;X0.add(c),n.stopPropagation&&lV.add(l);const u=e(c,l),d=(m,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),X0.has(c)&&X0.delete(c),oV(m)&&typeof u=="function"&&u(m,{success:v})},h=m=>{d(m,c===window||c===document||n.useGlobalTarget||bQ(c,m.target))},f=m=>{d(m,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,s),WC(l)&&(l.addEventListener("focus",u=>mEe(u,s)),!dEe(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),a}function i2(t){return EY(t)&&"ownerSVGElement"in t}const Z0=new WeakMap;let hc;const wQ=(t,e,n)=>(r,s)=>s&&s[0]?s[0][t+"Size"]:i2(r)&&"getBBox"in r?r.getBBox()[e]:r[n],gEe=wQ("inline","width","offsetWidth"),yEe=wQ("block","height","offsetHeight");function vEe({target:t,borderBoxSize:e}){var n;(n=Z0.get(t))==null||n.forEach(r=>{r(t,{get width(){return gEe(t,e)},get height(){return yEe(t,e)}})})}function xEe(t){t.forEach(vEe)}function bEe(){typeof ResizeObserver>"u"||(hc=new ResizeObserver(xEe))}function wEe(t,e){hc||bEe();const n=gQ(t);return n.forEach(r=>{let s=Z0.get(r);s||(s=new Set,Z0.set(r,s)),s.add(e),hc==null||hc.observe(r)}),()=>{n.forEach(r=>{const s=Z0.get(r);s==null||s.delete(e),s!=null&&s.size||hc==null||hc.unobserve(r)})}}const J0=new Set;let Sf;function _Ee(){Sf=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};J0.forEach(e=>e(t))},window.addEventListener("resize",Sf)}function jEe(t){return J0.add(t),Sf||_Ee(),()=>{J0.delete(t),!J0.size&&typeof Sf=="function"&&(window.removeEventListener("resize",Sf),Sf=void 0)}}function cV(t,e){return typeof t=="function"?jEe(t):wEe(t,e)}function NEe(t){return i2(t)&&t.tagName==="svg"}const SEe=[...fQ,Sr,wu],EEe=t=>SEe.find(hQ(t)),uV=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ef=()=>({x:uV(),y:uV()}),dV=()=>({min:0,max:0}),Mr=()=>({x:dV(),y:dV()}),AEe=new WeakMap;function YN(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Ev(t){return typeof t=="string"||Array.isArray(t)}const a2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],o2=["initial",...a2];function QN(t){return YN(t.animate)||o2.some(e=>Ev(t[e]))}function _Q(t){return!!(QN(t)||t.variants)}function TEe(t,e,n){for(const r in e){const s=e[r],a=n[r];if(Ss(s))t.addValue(r,s);else if(Ss(a))t.addValue(r,Vm(s,{owner:t}));else if(a!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,Vm(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const HC={current:null},jQ={current:!1},CEe=typeof window<"u";function PEe(){if(jQ.current=!0,!!CEe)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>HC.current=t.matches;t.addEventListener("change",e),e()}else HC.current=!1}const hV=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let __={};function NQ(t){__=t}function IEe(){return __}class kEe{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,skipAnimations:a,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=XO,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Ls.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,On.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=l;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.skipAnimationsConfig=a,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=QN(n),this.isVariantNode=_Q(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in f){const v=f[m];u[m]!==void 0&&Ss(v)&&v.set(u[m])}}mount(e){var n,r;if(this.hasBeenMounted)for(const s in this.initialValues)(n=this.values.get(s))==null||n.jump(this.initialValues[s]),this.latestValues[s]=this.initialValues[s];this.current=e,AEe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,a)=>this.bindToMotionValue(a,s)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(jQ.current||PEe(),this.shouldReduceMotion=HC.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var e;this.projection&&this.projection.unmount(),bu(this.notifyUpdate),bu(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),n.accelerate&&aEe.has(e)&&this.current instanceof HTMLElement){const{factory:o,keyframes:l,times:c,ease:u,duration:d}=n.accelerate,h=new rQ({element:this.current,name:e,keyframes:l,times:c,ease:u,duration:sa(d)}),f=o(h);this.valueSubscriptions.set(e,()=>{f(),h.cancel()});return}const r=Fp.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&On.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in __){const n=__[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Mr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<hV.length;r++){const s=hV[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,o=e[a];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=TEe(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Vm(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(SY(r)||AY(r))?r=parseFloat(r):!EEe(r)&&wu.test(n)&&(r=pQ(e,n)),this.setBaseTarget(e,Ss(r)?r.get():r)),Ss(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var a;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=e2(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Ss(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new VO),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){r2.render(this.render)}}class SQ extends kEe{constructor(){super(...arguments),this.KeyframeResolver=iEe}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const r=e.style;return r?r[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ss(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class Bu{constructor(e){this.isMounted=!1,this.node=e}update(){}}function EQ({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function REe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function OEe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function kE(t){return t===void 0||t===1}function KC({scale:t,scaleX:e,scaleY:n}){return!kE(t)||!kE(e)||!kE(n)}function cd(t){return KC(t)||AQ(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function AQ(t){return fV(t.x)||fV(t.y)}function fV(t){return t&&t!=="0%"}function j_(t,e,n){const r=t-n,s=e*r;return n+s}function mV(t,e,n,r,s){return s!==void 0&&(t=j_(t,s,r)),j_(t,n,r)+e}function GC(t,e=0,n=1,r,s){t.min=mV(t.min,e,n,r,s),t.max=mV(t.max,e,n,r,s)}function TQ(t,{x:e,y:n}){GC(t.x,e.translate,e.scale,e.originPoint),GC(t.y,n.translate,n.scale,n.originPoint)}const pV=.999999999999,gV=1.0000000000001;function MEe(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let a,o;for(let l=0;l<s;l++){a=n[l],o=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Tf(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,TQ(t,o)),r&&cd(a.latestValues)&&Tf(t,a.latestValues))}e.x<gV&&e.x>pV&&(e.x=1),e.y<gV&&e.y>pV&&(e.y=1)}function Af(t,e){t.min=t.min+e,t.max=t.max+e}function yV(t,e,n,r,s=.5){const a=Zn(t.min,t.max,s);GC(t,e,n,a,r)}function Tf(t,e){yV(t.x,e.x,e.scaleX,e.scale,e.originX),yV(t.y,e.y,e.scaleY,e.scale,e.originY)}function CQ(t,e){return EQ(OEe(t.getBoundingClientRect(),e))}function DEe(t,e,n){const r=CQ(t,n),{scroll:s}=e;return s&&(Af(r.x,s.offset.x),Af(r.y,s.offset.y)),r}const LEe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},$Ee=$p.length;function FEe(t,e,n){let r="",s=!0;for(let a=0;a<$Ee;a++){const o=$p[a],l=t[o];if(l===void 0)continue;let c=!0;if(typeof l=="number")c=l===(o.startsWith("scale")?1:0);else{const u=parseFloat(l);c=o.startsWith("scale")?u===1:u===0}if(!c||n){const u=yQ(l,n2[o]);if(!c){s=!1;const d=LEe[o]||o;r+=`${d}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function l2(t,e,n){const{style:r,vars:s,transformOrigin:a}=t;let o=!1,l=!1;for(const c in e){const u=e[c];if(Fp.has(c)){o=!0;continue}else if(BY(c)){s[c]=u;continue}else{const d=yQ(u,n2[c]);c.startsWith("origin")?(l=!0,a[c]=d):r[c]=d}}if(e.transform||(o||n?r.transform=FEe(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=a;r.transformOrigin=`${c} ${u} ${d}`}}function PQ(t,{style:e,vars:n},r,s){const a=t.style;let o;for(o in e)a[o]=e[o];s==null||s.applyProjectionStyles(a,r);for(o in n)a.setProperty(o,n[o])}function vV(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Cg={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(et.test(t))t=parseFloat(t);else return t;const n=vV(t,e.target.x),r=vV(t,e.target.y);return`${n}% ${r}%`}},VEe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=wu.parse(t);if(s.length>5)return r;const a=wu.createTransformer(t),o=typeof s[0]!="number"?1:0,l=n.x.scale*e.x,c=n.y.scale*e.y;s[0+o]/=l,s[1+o]/=c;const u=Zn(l,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),a(s)}},YC={borderRadius:{...Cg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Cg,borderTopRightRadius:Cg,borderBottomLeftRadius:Cg,borderBottomRightRadius:Cg,boxShadow:VEe};function IQ(t,{layout:e,layoutId:n}){return Fp.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!YC[t]||t==="opacity")}function c2(t,e,n){var o;const r=t.style,s=e==null?void 0:e.style,a={};if(!r)return a;for(const l in r)(Ss(r[l])||s&&Ss(s[l])||IQ(l,t)||((o=n==null?void 0:n.getValue(l))==null?void 0:o.liveStyle)!==void 0)&&(a[l]=r[l]);return a}function BEe(t){return window.getComputedStyle(t)}class UEe extends SQ{constructor(){super(...arguments),this.type="html",this.renderInstance=PQ}readValueFromInstance(e,n){var r;if(Fp.has(n))return(r=this.projection)!=null&&r.isProjecting?MC(n):aSe(e,n);{const s=BEe(e),a=(BY(n)?s.getPropertyValue(n):s[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return CQ(e,n)}build(e,n,r){l2(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return c2(e,n,r)}}const zEe={offset:"stroke-dashoffset",array:"stroke-dasharray"},qEe={offset:"strokeDashoffset",array:"strokeDasharray"};function WEe(t,e,n=1,r=0,s=!0){t.pathLength=1;const a=s?zEe:qEe;t[a.offset]=`${-r}`,t[a.array]=`${e} ${n}`}const HEe=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function kQ(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:o=0,...l},c,u,d){if(l2(t,l,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:f}=t;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox);for(const m of HEe)h[m]!==void 0&&(f[m]=h[m],delete h[m]);e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&WEe(h,s,a,o,!1)}const RQ=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),OQ=t=>typeof t=="string"&&t.toLowerCase()==="svg";function KEe(t,e,n,r){PQ(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(RQ.has(s)?s:t2(s),e.attrs[s])}function MQ(t,e,n){const r=c2(t,e,n);for(const s in t)if(Ss(t[s])||Ss(e[s])){const a=$p.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=t[s]}return r}class GEe extends SQ{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Mr}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Fp.has(n)){const r=mQ(n);return r&&r.default||0}return n=RQ.has(n)?n:t2(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return MQ(e,n,r)}build(e,n,r){kQ(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){KEe(e,n,r,s)}mount(e){this.isSVGTag=OQ(e.tagName),super.mount(e)}}const YEe=o2.length;function DQ(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?DQ(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<YEe;n++){const r=o2[n],s=t.props[r];(Ev(s)||s===!1)&&(e[r]=s)}return e}function LQ(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const QEe=[...a2].reverse(),XEe=a2.length;function ZEe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>YSe(t,n,r)))}function JEe(t){let e=ZEe(t),n=xV(),r=!0;const s=c=>(u,d)=>{var f;const h=Xf(t,d,c==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:m,transitionEnd:v,...g}=h;u={...u,...g,...v}}return u};function a(c){e=c(t)}function o(c){const{props:u}=t,d=DQ(t.parent)||{},h=[],f=new Set;let m={},v=1/0;for(let y=0;y<XEe;y++){const w=QEe[y],b=n[w],E=u[w]!==void 0?u[w]:d[w],T=Ev(E),x=w===c?b.isActive:null;x===!1&&(v=y);let S=E===d[w]&&E!==u[w]&&T;if(S&&r&&t.manuallyAnimateOnMount&&(S=!1),b.protectedKeys={...m},!b.isActive&&x===null||!E&&!b.prevProp||YN(E)||typeof E=="boolean")continue;if(w==="exit"&&b.isActive&&x!==!0){b.prevResolvedValues&&(m={...m,...b.prevResolvedValues});continue}const _=eAe(b.prevProp,E);let p=_||w===c&&b.isActive&&!S&&T||y>v&&T,A=!1;const P=Array.isArray(E)?E:[E];let C=P.reduce(s(w),{});x===!1&&(C={});const{prevResolvedValues:I={}}=b,R={...I,...C},L=M=>{p=!0,f.has(M)&&(A=!0,f.delete(M)),b.needsAnimating[M]=!0;const V=t.getValue(M);V&&(V.liveStyle=!1)};for(const M in R){const V=C[M],F=I[M];if(m.hasOwnProperty(M))continue;let Y=!1;BC(V)&&BC(F)?Y=!LQ(V,F):Y=V!==F,Y?V!=null?L(M):f.add(M):V!==void 0&&f.has(M)?L(M):b.protectedKeys[M]=!0}b.prevProp=E,b.prevResolvedValues=C,b.isActive&&(m={...m,...C}),r&&t.blockInitialAnimation&&(p=!1);const z=S&&_;p&&(!z||A)&&h.push(...P.map(M=>{const V={type:w};if(typeof M=="string"&&r&&!z&&t.manuallyAnimateOnMount&&t.parent){const{parent:F}=t,Y=Xf(F,M);if(F.enteringChildren&&Y){const{delayChildren:ae}=Y.transition||{};V.delay=iQ(F.enteringChildren,t,ae)}}return{animation:M,options:V}}))}if(f.size){const y={};if(typeof u.initial!="boolean"){const w=Xf(t,Array.isArray(u.initial)?u.initial[0]:u.initial);w&&w.transition&&(y.transition=w.transition)}f.forEach(w=>{const b=t.getBaseTarget(w),E=t.getValue(w);E&&(E.liveStyle=!0),y[w]=b??null}),h.push({animation:y})}let g=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(h):Promise.resolve()}function l(c,u){var h;if(n[c].isActive===u)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(f=>{var m;return(m=f.animationState)==null?void 0:m.setActive(c,u)}),n[c].isActive=u;const d=o(c);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:o,setActive:l,setAnimateFunction:a,getState:()=>n,reset:()=>{n=xV()}}}function eAe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!LQ(e,t):!1}function nd(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function xV(){return{animate:nd(!0),whileInView:nd(),whileHover:nd(),whileTap:nd(),whileDrag:nd(),whileFocus:nd(),exit:nd()}}function bV(t,e){t.min=e.min,t.max=e.max}function _a(t,e){bV(t.x,e.x),bV(t.y,e.y)}function wV(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const $Q=1e-4,tAe=1-$Q,nAe=1+$Q,FQ=.01,rAe=0-FQ,sAe=0+FQ;function $s(t){return t.max-t.min}function iAe(t,e,n){return Math.abs(t-e)<=n}function _V(t,e,n,r=.5){t.origin=r,t.originPoint=Zn(e.min,e.max,t.origin),t.scale=$s(n)/$s(e),t.translate=Zn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=tAe&&t.scale<=nAe||isNaN(t.scale))&&(t.scale=1),(t.translate>=rAe&&t.translate<=sAe||isNaN(t.translate))&&(t.translate=0)}function Ay(t,e,n,r){_V(t.x,e.x,n.x,r?r.originX:void 0),_V(t.y,e.y,n.y,r?r.originY:void 0)}function jV(t,e,n){t.min=n.min+e.min,t.max=t.min+$s(e)}function aAe(t,e,n){jV(t.x,e.x,n.x),jV(t.y,e.y,n.y)}function NV(t,e,n){t.min=e.min-n.min,t.max=t.min+$s(e)}function N_(t,e,n){NV(t.x,e.x,n.x),NV(t.y,e.y,n.y)}function SV(t,e,n,r,s){return t-=e,t=j_(t,1/n,r),s!==void 0&&(t=j_(t,1/s,r)),t}function oAe(t,e=0,n=1,r=.5,s,a=t,o=t){if(Io.test(e)&&(e=parseFloat(e),e=Zn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=Zn(a.min,a.max,r);t===a&&(l-=e),t.min=SV(t.min,e,n,l,s),t.max=SV(t.max,e,n,l,s)}function EV(t,e,[n,r,s],a,o){oAe(t,e[n],e[r],e[s],e.scale,a,o)}const lAe=["x","scaleX","originX"],cAe=["y","scaleY","originY"];function AV(t,e,n,r){EV(t.x,e,lAe,n?n.x:void 0,r?r.x:void 0),EV(t.y,e,cAe,n?n.y:void 0,r?r.y:void 0)}function TV(t){return t.translate===0&&t.scale===1}function VQ(t){return TV(t.x)&&TV(t.y)}function CV(t,e){return t.min===e.min&&t.max===e.max}function uAe(t,e){return CV(t.x,e.x)&&CV(t.y,e.y)}function PV(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function BQ(t,e){return PV(t.x,e.x)&&PV(t.y,e.y)}function IV(t){return $s(t.x)/$s(t.y)}function kV(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function lo(t){return[t("x"),t("y")]}function dAe(t,e,n){let r="";const s=t.x.translate/e.x,a=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||a||o)&&(r=`translate3d(${s}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:f,skewX:m,skewY:v}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),m&&(r+=`skewX(${m}deg) `),v&&(r+=`skewY(${v}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const UQ=["TopLeft","TopRight","BottomLeft","BottomRight"],hAe=UQ.length,RV=t=>typeof t=="string"?parseFloat(t):t,OV=t=>typeof t=="number"||et.test(t);function fAe(t,e,n,r,s,a){s?(t.opacity=Zn(0,n.opacity??1,mAe(r)),t.opacityExit=Zn(e.opacity??1,0,pAe(r))):a&&(t.opacity=Zn(e.opacity??1,n.opacity??1,r));for(let o=0;o<hAe;o++){const l=`border${UQ[o]}Radius`;let c=MV(e,l),u=MV(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||OV(c)===OV(u)?(t[l]=Math.max(Zn(RV(c),RV(u),r),0),(Io.test(u)||Io.test(c))&&(t[l]+="%")):t[l]=u}(e.rotate||n.rotate)&&(t.rotate=Zn(e.rotate||0,n.rotate||0,r))}function MV(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const mAe=zQ(0,.5,MY),pAe=zQ(.5,.95,ra);function zQ(t,e,n){return r=>r<t?0:r>e?1:n(jv(t,e,r))}function gAe(t,e,n){const r=Ss(t)?t:Vm(t);return r.start(JO("",r,e,n)),r.animation}function Av(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const yAe=(t,e)=>t.depth-e.depth;class vAe{constructor(){this.children=[],this.isDirty=!1}add(e){$O(this.children,e),this.isDirty=!0}remove(e){v_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(yAe),this.isDirty=!1,this.children.forEach(e)}}function xAe(t,e){const n=Ls.now(),r=({timestamp:s})=>{const a=s-n;a>=e&&(bu(r),t(a-e))};return On.setup(r,!0),()=>bu(r)}function ew(t){return Ss(t)?t.get():t}class bAe{constructor(){this.members=[]}add(e){$O(this.members,e);for(let n=this.members.length-1;n>=0;n--){const r=this.members[n];if(r===e||r===this.lead||r===this.prevLead)continue;const s=r.instance;s&&s.isConnected===!1&&r.isPresent!==!1&&!r.snapshot&&v_(this.members,r)}e.scheduleRender()}remove(e){if(v_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s],o=a.instance;if(a.isPresent!==!1&&(!o||o.isConnected!==!1)){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const s=r.options.layoutDependency,a=e.options.layoutDependency;if(!(s!==void 0&&a!==void 0&&s===a)){const c=r.instance;c&&c.isConnected===!1&&!r.snapshot||(e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:l}=e.options;l===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const tw={hasAnimatedSinceResize:!0,hasEverUpdated:!1},RE=["","X","Y","Z"],wAe=1e3;let _Ae=0;function OE(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function qQ(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=uQ(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",On,!(s||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&qQ(r)}function WQ({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},l=e==null?void 0:e()){this.id=_Ae++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(SAe),this.nodes.forEach(CAe),this.nodes.forEach(PAe),this.nodes.forEach(EAe)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new vAe)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new VO),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=i2(o)&&!NEe(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let d,h=0;const f=()=>this.root.updateBlockedByResize=!1;On.read(()=>{h=window.innerWidth}),t(o,()=>{const m=window.innerWidth;m!==h&&(h=m,this.root.updateBlockedByResize=!0,d&&d(),d=xAe(f,250),tw.hasAnimatedSinceResize&&(tw.hasAnimatedSinceResize=!1,this.nodes.forEach($V)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||MAe,{onLayoutAnimationStart:g,onLayoutAnimationComplete:y}=u.getProps(),w=!this.targetLayout||!BQ(this.targetLayout,m),b=!h&&f;if(this.options.layoutRoot||this.resumeFrom||b||h&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const E={...ZO(v,"layout"),onPlay:g,onComplete:y};(u.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E),this.setAnimationOrigin(d,b)}else h||$V(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),bu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(IAe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&qQ(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(DV);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(LV);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(TAe),this.nodes.forEach(jAe),this.nodes.forEach(NAe)):this.nodes.forEach(LV),this.clearAllSnapshots();const l=Ls.now();rs.delta=Fo(0,1e3/60,l-rs.timestamp),rs.timestamp=l,rs.isProcessing=!0,SE.update.process(rs),SE.preRender.process(rs),SE.render.process(rs),rs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,r2.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(AAe),this.sharedNodes.forEach(kAe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,On.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){On.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!$s(this.snapshot.measuredBox.x)&&!$s(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Mr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!VQ(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&this.instance&&(l||cd(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),DAe(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return Mr();const l=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(LAe))){const{scroll:d}=this.root;d&&(Af(l.x,d.offset.x),Af(l.y,d.offset.y))}return l}removeElementScroll(o){var c;const l=Mr();if(_a(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&_a(l,o),Af(l.x,h.offset.x),Af(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const c=Mr();_a(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Tf(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),cd(d.latestValues)&&Tf(c,d.latestValues)}return cd(this.latestValues)&&Tf(c,this.latestValues),c}removeTransform(o){const l=Mr();_a(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!cd(u.latestValues))continue;KC(u.latestValues)&&u.updateSnapshot();const d=Mr(),h=u.measurePageBox();_a(d,h),AV(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return cd(this.latestValues)&&AV(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==rs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var m;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!this.layout||!(d||h))return;this.resolvedRelativeTargetAt=rs.timestamp;const f=this.getClosestProjectingParent();f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Mr(),this.targetWithTransforms=Mr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),aAe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):_a(this.target,this.layout.layoutBox),TQ(this.target,this.targetDelta)):_a(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||KC(this.parent.latestValues)||AQ(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,l,c){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mr(),this.relativeTargetOrigin=Mr(),N_(this.relativeTargetOrigin,l,c),_a(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var v;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===rs.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;_a(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;MEe(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Mr());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(wV(this.prevProjectionDelta.x,this.projectionDelta.x),wV(this.prevProjectionDelta.y,this.projectionDelta.y)),Ay(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!kV(this.projectionDelta.x,this.prevProjectionDelta.x)||!kV(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ef(),this.projectionDelta=Ef(),this.projectionDeltaWithTransform=Ef()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=Ef();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=Mr(),m=c?c.source:void 0,v=this.layout?this.layout.source:void 0,g=m!==v,y=this.getStack(),w=!y||y.members.length<=1,b=!!(g&&!w&&this.options.crossfade===!0&&!this.path.some(OAe));this.animationProgress=0;let E;this.mixTargetDelta=T=>{const x=T/1e3;FV(h.x,o.x,x),FV(h.y,o.y,x),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(N_(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),RAe(this.relativeTarget,this.relativeTargetOrigin,f,x),E&&uAe(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=Mr()),_a(E,this.relativeTarget)),g&&(this.animationValues=d,fAe(d,u,this.latestValues,x,b,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=x},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(bu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=On.update(()=>{tw.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Vm(0)),this.currentAnimation=gAe(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(wAe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&HQ(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Mr();const h=$s(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=$s(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}_a(l,c),Tf(l,d),Ay(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new bAe),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&OE("z",o,u,this.animationValues);for(let d=0;d<RE.length;d++)OE(`rotate${RE[d]}`,o,u,this.animationValues),OE(`skew${RE[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=ew(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=ew(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!cd(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=dAe(this.projectionDeltaWithTransform,this.treeScale,d);c&&(h=c(d,h)),o.transform=h;const{x:f,y:m}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${m.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const v in YC){if(d[v]===void 0)continue;const{correct:g,applyTo:y,isCSSVariable:w}=YC[v],b=h==="none"?d[v]:g(d[v],u);if(y){const E=y.length;for(let T=0;T<E;T++)o[y[T]]=b}else w?this.options.visualElement.renderState.vars[v]=b:o[v]=b}this.options.layoutId&&(o.pointerEvents=u===this?ew(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(DV),this.root.sharedNodes.clear()}}}function jAe(t){t.updateLayout()}function NAe(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:a}=t.options,o=e.source!==t.layout.source;a==="size"?lo(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],m=$s(f);f.min=r[h].min,f.max=f.min+m}):HQ(a,e.layoutBox,r)&&lo(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],m=$s(r[h]);f.max=f.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const l=Ef();Ay(l,r,e.layoutBox);const c=Ef();o?Ay(c,t.applyTransform(s,!0),e.measuredBox):Ay(c,r,e.layoutBox);const u=!VQ(l);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const v=Mr();N_(v,e.layoutBox,f.layoutBox);const g=Mr();N_(g,r,m.layoutBox),BQ(v,g)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=v,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function SAe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function EAe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function AAe(t){t.clearSnapshot()}function DV(t){t.clearMeasurements()}function LV(t){t.isLayoutDirty=!1}function TAe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function $V(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function CAe(t){t.resolveTargetDelta()}function PAe(t){t.calcProjection()}function IAe(t){t.resetSkewAndRotation()}function kAe(t){t.removeLeadSnapshot()}function FV(t,e,n){t.translate=Zn(e.translate,0,n),t.scale=Zn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function VV(t,e,n,r){t.min=Zn(e.min,n.min,r),t.max=Zn(e.max,n.max,r)}function RAe(t,e,n,r){VV(t.x,e.x,n.x,r),VV(t.y,e.y,n.y,r)}function OAe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const MAe={duration:.45,ease:[.4,0,.1,1]},BV=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),UV=BV("applewebkit/")&&!BV("chrome/")?Math.round:ra;function zV(t){t.min=UV(t.min),t.max=UV(t.max)}function DAe(t){zV(t.x),zV(t.y)}function HQ(t,e,n){return t==="position"||t==="preserve-aspect"&&!iAe(IV(e),IV(n),.2)}function LAe(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const $Ae=WQ({attachResizeListener:(t,e)=>Av(t,"resize",e),measureScroll:()=>{var t,e;return{x:document.documentElement.scrollLeft||((t=document.body)==null?void 0:t.scrollLeft)||0,y:document.documentElement.scrollTop||((e=document.body)==null?void 0:e.scrollTop)||0}},checkIsScrollRoot:()=>!0}),ME={current:void 0},KQ=WQ({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ME.current){const t=new $Ae({});t.mount(window),t.setOptions({layoutScroll:!0}),ME.current=t}return ME.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),u2=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function qV(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function FAe(...t){return e=>{let n=!1;const r=t.map(s=>{const a=qV(s,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():qV(t[s],null)}}}}function VAe(...t){return N.useCallback(FAe(...t),t)}class BAe extends N.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const r=n.offsetParent,s=WC(r)&&r.offsetWidth||0,a=WC(r)&&r.offsetHeight||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=s-o.width-o.left,o.bottom=a-o.height-o.top}return null}componentDidUpdate(){}render(){return this.props.children}}function UAe({children:t,isPresent:e,anchorX:n,anchorY:r,root:s,pop:a}){var f;const o=N.useId(),l=N.useRef(null),c=N.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:u}=N.useContext(u2),d=((f=t.props)==null?void 0:f.ref)??(t==null?void 0:t.ref),h=VAe(l,d);return N.useInsertionEffect(()=>{const{width:m,height:v,top:g,left:y,right:w,bottom:b}=c.current;if(e||a===!1||!l.current||!m||!v)return;const E=n==="left"?`left: ${y}`:`right: ${w}`,T=r==="bottom"?`bottom: ${b}`:`top: ${g}`;l.current.dataset.motionPopId=o;const x=document.createElement("style");u&&(x.nonce=u);const S=s??document.head;return S.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${v}px !important;
            ${E}px !important;
            ${T}px !important;
          }
        `),()=>{S.contains(x)&&S.removeChild(x)}},[e]),i.jsx(BAe,{isPresent:e,childRef:l,sizeRef:c,pop:a,children:a===!1?t:N.cloneElement(t,{ref:h})})}const zAe=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:o,anchorX:l,anchorY:c,root:u})=>{const d=LO(qAe),h=N.useId();let f=!0,m=N.useMemo(()=>(f=!1,{id:h,initial:e,isPresent:n,custom:s,onExitComplete:v=>{d.set(v,!0);for(const g of d.values())if(!g)return;r&&r()},register:v=>(d.set(v,!1),()=>d.delete(v))}),[n,d,r]);return a&&f&&(m={...m}),N.useMemo(()=>{d.forEach((v,g)=>d.set(g,!1))},[n]),N.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),t=i.jsx(UAe,{pop:o==="popLayout",isPresent:n,anchorX:l,anchorY:c,root:u,children:t}),i.jsx(KN.Provider,{value:m,children:t})};function qAe(){return new Map}function GQ(t=!0){const e=N.useContext(KN);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,a=N.useId();N.useEffect(()=>{if(t)return s(a)},[t]);const o=N.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,o]:[!0]}const s0=t=>t.key||"";function WV(t){const e=[];return N.Children.forEach(t,n=>{N.isValidElement(n)&&e.push(n)}),e}const WAe=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:a="sync",propagate:o=!1,anchorX:l="left",anchorY:c="top",root:u})=>{const[d,h]=GQ(o),f=N.useMemo(()=>WV(t),[t]),m=o&&!d?[]:f.map(s0),v=N.useRef(!0),g=N.useRef(f),y=LO(()=>new Map),w=N.useRef(new Set),[b,E]=N.useState(f),[T,x]=N.useState(f);NY(()=>{v.current=!1,g.current=f;for(let p=0;p<T.length;p++){const A=s0(T[p]);m.includes(A)?(y.delete(A),w.current.delete(A)):y.get(A)!==!0&&y.set(A,!1)}},[T,m.length,m.join("-")]);const S=[];if(f!==b){let p=[...f];for(let A=0;A<T.length;A++){const P=T[A],C=s0(P);m.includes(C)||(p.splice(A,0,P),S.push(P))}return a==="wait"&&S.length&&(p=S),x(WV(p)),E(f),null}const{forceRender:_}=N.useContext(DO);return i.jsx(i.Fragment,{children:T.map(p=>{const A=s0(p),P=o&&!d?!1:f===T||m.includes(A),C=()=>{if(w.current.has(A))return;if(w.current.add(A),y.has(A))y.set(A,!0);else return;let I=!0;y.forEach(R=>{R||(I=!1)}),I&&(_==null||_(),x(g.current),o&&(h==null||h()),r&&r())};return i.jsx(zAe,{isPresent:P,initial:!v.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:a,root:u,onExitComplete:P?void 0:C,anchorX:l,anchorY:c,children:p},A)})})},YQ=N.createContext({strict:!1}),HV={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let KV=!1;function HAe(){if(KV)return;const t={};for(const e in HV)t[e]={isEnabled:n=>HV[e].some(r=>!!n[r])};NQ(t),KV=!0}function QQ(){return HAe(),IEe()}function KAe(t){const e=QQ();for(const n in t)e[n]={...e[n],...t[n]};NQ(e)}const GAe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function S_(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||GAe.has(t)}let XQ=t=>!S_(t);function YAe(t){typeof t=="function"&&(XQ=e=>e.startsWith("on")?!S_(e):t(e))}try{YAe(require("@emotion/is-prop-valid").default)}catch{}function QAe(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(XQ(s)||n===!0&&S_(s)||!e&&!S_(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const XN=N.createContext({});function XAe(t,e){if(QN(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Ev(n)?n:void 0,animate:Ev(r)?r:void 0}}return t.inherit!==!1?e:{}}function ZAe(t){const{initial:e,animate:n}=XAe(t,N.useContext(XN));return N.useMemo(()=>({initial:e,animate:n}),[GV(e),GV(n)])}function GV(t){return Array.isArray(t)?t.join(" "):t}const d2=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ZQ(t,e,n){for(const r in e)!Ss(e[r])&&!IQ(r,n)&&(t[r]=e[r])}function JAe({transformTemplate:t},e){return N.useMemo(()=>{const n=d2();return l2(n,e,t),Object.assign({},n.vars,n.style)},[e])}function eTe(t,e){const n=t.style||{},r={};return ZQ(r,n,t),Object.assign(r,JAe(t,e)),r}function tTe(t,e){const n={},r=eTe(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const JQ=()=>({...d2(),attrs:{}});function nTe(t,e,n,r){const s=N.useMemo(()=>{const a=JQ();return kQ(a,e,OQ(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};ZQ(a,t.style,t),s.style={...a,...s.style}}return s}const rTe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function h2(t){return typeof t!="string"||t.includes("-")?!1:!!(rTe.indexOf(t)>-1||/[A-Z]/u.test(t))}function sTe(t,e,n,{latestValues:r},s,a=!1,o){const c=(o??h2(t)?nTe:tTe)(e,r,s,t),u=QAe(e,typeof t=="string",a),d=t!==N.Fragment?{...u,...c,ref:n}:{},{children:h}=e,f=N.useMemo(()=>Ss(h)?h.get():h,[h]);return N.createElement(t,{...d,children:f})}function iTe({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:aTe(n,r,s,t),renderState:e()}}function aTe(t,e,n,r){const s={},a=r(t,{});for(const f in a)s[f]=ew(a[f]);let{initial:o,animate:l}=t;const c=QN(t),u=_Q(t);e&&u&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?l:o;if(h&&typeof h!="boolean"&&!YN(h)){const f=Array.isArray(h)?h:[h];for(let m=0;m<f.length;m++){const v=e2(t,f[m]);if(v){const{transitionEnd:g,transition:y,...w}=v;for(const b in w){let E=w[b];if(Array.isArray(E)){const T=d?E.length-1:0;E=E[T]}E!==null&&(s[b]=E)}for(const b in g)s[b]=g[b]}}}return s}const eX=t=>(e,n)=>{const r=N.useContext(XN),s=N.useContext(KN),a=()=>iTe(t,e,r,s);return n?a():LO(a)},oTe=eX({scrapeMotionValuesFromProps:c2,createRenderState:d2}),lTe=eX({scrapeMotionValuesFromProps:MQ,createRenderState:JQ}),cTe=Symbol.for("motionComponentSymbol");function uTe(t,e,n){const r=N.useRef(n);N.useInsertionEffect(()=>{r.current=n});const s=N.useRef(null);return N.useCallback(a=>{var l;a&&((l=t.onMount)==null||l.call(t,a)),e&&(a?e.mount(a):e.unmount());const o=r.current;if(typeof o=="function")if(a){const c=o(a);typeof c=="function"&&(s.current=c)}else s.current?(s.current(),s.current=null):o(a);else o&&(o.current=a)},[e])}const tX=N.createContext({});function uf(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function dTe(t,e,n,r,s,a){var E,T;const{visualElement:o}=N.useContext(XN),l=N.useContext(YQ),c=N.useContext(KN),u=N.useContext(u2),d=u.reducedMotion,h=u.skipAnimations,f=N.useRef(null),m=N.useRef(!1);r=r||l.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d,skipAnimations:h,isSVG:a}),m.current&&f.current&&(f.current.manuallyAnimateOnMount=!0));const v=f.current,g=N.useContext(tX);v&&!v.projection&&s&&(v.type==="html"||v.type==="svg")&&hTe(f.current,n,s,g);const y=N.useRef(!1);N.useInsertionEffect(()=>{v&&y.current&&v.update(n,c)});const w=n[cQ],b=N.useRef(!!w&&!((E=window.MotionHandoffIsComplete)!=null&&E.call(window,w))&&((T=window.MotionHasOptimisedAnimation)==null?void 0:T.call(window,w)));return NY(()=>{m.current=!0,v&&(y.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),v.scheduleRenderMicrotask(),b.current&&v.animationState&&v.animationState.animateChanges())}),N.useEffect(()=>{v&&(!b.current&&v.animationState&&v.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)==null||x.call(window,w)}),b.current=!1),v.enteringChildren=void 0)}),v}function hTe(t,e,n,r){const{layoutId:s,layout:a,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:nX(t.parent)),t.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!o||l&&uf(l),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:u})}function nX(t){if(t)return t.options.allowProjection!==!1?t.projection:nX(t.parent)}function DE(t,{forwardMotionProps:e=!1,type:n}={},r,s){r&&KAe(r);const a=n?n==="svg":h2(t),o=a?lTe:oTe;function l(u,d){let h;const f={...N.useContext(u2),...u,layoutId:fTe(u)},{isStatic:m}=f,v=ZAe(u),g=o(u,m);if(!m&&jY){mTe();const y=pTe(f);h=y.MeasureLayout,v.visualElement=dTe(t,g,f,s,y.ProjectionNode,a)}return i.jsxs(XN.Provider,{value:v,children:[h&&v.visualElement?i.jsx(h,{visualElement:v.visualElement,...f}):null,sTe(t,u,uTe(g,v.visualElement,d),g,m,e,a)]})}l.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=N.forwardRef(l);return c[cTe]=t,c}function fTe({layoutId:t}){const e=N.useContext(DO).id;return e&&t!==void 0?e+"-"+t:t}function mTe(t,e){N.useContext(YQ).strict}function pTe(t){const e=QQ(),{drag:n,layout:r}=e;if(!n&&!r)return{};const s={...n,...r};return{MeasureLayout:n!=null&&n.isEnabled(t)||r!=null&&r.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function gTe(t,e){if(typeof Proxy>"u")return DE;const n=new Map,r=(a,o)=>DE(a,o,t,e),s=(a,o)=>r(a,o);return new Proxy(s,{get:(a,o)=>o==="create"?r:(n.has(o)||n.set(o,DE(o,void 0,t,e)),n.get(o))})}const yTe=(t,e)=>e.isSVG??h2(t)?new GEe(e):new UEe(e,{allowProjection:t!==N.Fragment});class vTe extends Bu{constructor(e){super(e),e.animationState||(e.animationState=JEe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();YN(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let xTe=0;class bTe extends Bu{constructor(){super(...arguments),this.id=xTe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const wTe={animation:{Feature:vTe},exit:{Feature:bTe}};function tb(t){return{point:{x:t.pageX,y:t.pageY}}}const _Te=t=>e=>s2(e)&&t(e,tb(e));function Ty(t,e,n,r){return Av(t,e,_Te(n),r)}const rX=({current:t})=>t?t.ownerDocument.defaultView:null,YV=(t,e)=>Math.abs(t-e);function jTe(t,e){const n=YV(t.x,e.x),r=YV(t.y,e.y);return Math.sqrt(n**2+r**2)}const QV=new Set(["auto","scroll"]);class sX{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:o=3,element:l}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=m=>{this.handleScroll(m.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=$E(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,g=jTe(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!g)return;const{point:y}=m,{timestamp:w}=rs;this.history.push({...y,timestamp:w});const{onStart:b,onMove:E}=this.handlers;v||(b&&b(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,m)},this.handlePointerMove=(m,v)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=LE(v,this.transformPagePoint),On.update(this.updatePoint,!0)},this.handlePointerUp=(m,v)=>{this.end();const{onEnd:g,onSessionEnd:y,resumeAnimation:w}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=$E(m.type==="pointercancel"?this.lastMoveEventInfo:LE(v,this.transformPagePoint),this.history);this.startEvent&&g&&g(m,b),y&&y(m,b)},!s2(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=s||window;const c=tb(e),u=LE(c,this.transformPagePoint),{point:d}=u,{timestamp:h}=rs;this.history=[{...d,timestamp:h}];const{onSessionStart:f}=n;f&&f(e,$E(u,this.history)),this.removeListeners=Zx(Ty(this.contextWindow,"pointermove",this.handlePointerMove),Ty(this.contextWindow,"pointerup",this.handlePointerUp),Ty(this.contextWindow,"pointercancel",this.handlePointerUp)),l&&this.startScrollTracking(l)}startScrollTracking(e){let n=e.parentElement;for(;n;){const r=getComputedStyle(n);(QV.has(r.overflowX)||QV.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const r=e===window,s=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},a={x:s.x-n.x,y:s.y-n.y};a.x===0&&a.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(e,s),On.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),bu(this.updatePoint)}}function LE(t,e){return e?{point:e(t.point)}:t}function XV(t,e){return{x:t.x-e.x,y:t.y-e.y}}function $E({point:t},e){return{point:t,delta:XV(t,iX(e)),offset:XV(t,NTe(e)),velocity:STe(e,.1)}}function NTe(t){return t[0]}function iX(t){return t[t.length-1]}function STe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=iX(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>sa(e)));)n--;if(!r)return{x:0,y:0};r===t[0]&&t.length>2&&s.timestamp-r.timestamp>sa(e)*2&&(r=t[1]);const a=Qi(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ETe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Zn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Zn(n,t,r.max):Math.min(t,n)),t}function ZV(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function ATe(t,{top:e,left:n,bottom:r,right:s}){return{x:ZV(t.x,n,s),y:ZV(t.y,e,r)}}function JV(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function TTe(t,e){return{x:JV(t.x,e.x),y:JV(t.y,e.y)}}function CTe(t,e){let n=.5;const r=$s(t),s=$s(e);return s>r?n=jv(e.min,e.max-r,t.min):r>s&&(n=jv(t.min,t.max-s,e.min)),Fo(0,1,n)}function PTe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const QC=.35;function ITe(t=QC){return t===!1?t=0:t===!0&&(t=QC),{x:eB(t,"left","right"),y:eB(t,"top","bottom")}}function eB(t,e,n){return{min:tB(t,e),max:tB(t,n)}}function tB(t,e){return typeof t=="number"?t:t[e]||0}const kTe=new WeakMap;class RTe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Mr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=h=>{n&&this.snapToCursor(tb(h).point),this.stopAnimation()},o=(h,f)=>{const{drag:m,dragPropagation:v,onDragStart:g}=this.getProps();if(m&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=oEe(m),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),lo(w=>{let b=this.getAxisMotionValue(w).get()||0;if(Io.test(b)){const{projection:E}=this.visualElement;if(E&&E.layout){const T=E.layout.layoutBox[w];T&&(b=$s(T)*(parseFloat(b)/100))}}this.originPoint[w]=b}),g&&On.update(()=>g(h,f),!1,!0),UC(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:m,dragDirectionLock:v,onDirectionLock:g,onDrag:y}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:w}=f;if(v&&this.currentDirection===null){this.currentDirection=MTe(w),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,w),this.updateAxis("y",f.point,w),this.visualElement.render(),y&&On.update(()=>y(h,f),!1,!0)},c=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>{const{dragSnapToOrigin:h}=this.getProps();(h||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:d}=this.getProps();this.panSession=new sX(e,{onSessionStart:a,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:rX(this.visualElement),element:this.visualElement.current})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!r)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&On.postRender(()=>l(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!i0(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=ETe(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,s=this.constraints;e&&uf(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=ATe(r.layoutBox,e):this.constraints=!1,this.elastic=ITe(n),s!==this.constraints&&!uf(e)&&r&&this.constraints&&!this.hasMutatedConstraints&&lo(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=PTe(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!uf(e))return!1;const r=e.current;Fm(r!==null,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");const{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=DEe(r,s.root,this.visualElement.getTransformPagePoint());let o=TTe(s.layout.layoutBox,a);if(n){const l=n(REe(o));this.hasMutatedConstraints=!!l,l&&(o=EQ(l))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=lo(d=>{if(!i0(d,n,this.currentDirection))return;let h=c&&c[d]||{};o&&(h={min:0,max:0});const f=s?200:1e6,m=s?40:1e7,v={type:"inertia",velocity:r?e[d]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(d,v)});return Promise.all(u).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return UC(this.visualElement,e),r.start(JO(e,r,0,n,this.visualElement,!1))}stopAnimation(){lo(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){lo(n=>{const{drag:r}=this.getProps();if(!i0(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:l}=s.layout.layoutBox[n],c=a.get()||0;a.set(e[n]-Zn(o,l,.5)+c)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!uf(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};lo(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();s[o]=CTe({min:c,max:c},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.constraints=!1,this.resolveConstraints(),lo(o=>{if(!i0(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(Zn(c,u,s[o]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;kTe.set(this.visualElement,this);const e=this.visualElement.current,n=Ty(e,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps(),f=u.target,m=f!==e&&fEe(f);d&&h&&!m&&this.start(u)});let r;const s=()=>{const{dragConstraints:u}=this.getProps();uf(u)&&u.current&&(this.constraints=this.resolveRefConstraints(),r||(r=OTe(e,u.current,()=>this.scalePositionWithinConstraints())))},{projection:a}=this.visualElement,o=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),On.read(s);const l=Av(window,"resize",()=>this.scalePositionWithinConstraints()),c=a.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(lo(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=u[h].translate,f.set(f.get()+u[h].translate))}),this.visualElement.render())});return()=>{l(),n(),o(),c&&c(),r&&r()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:o=QC,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:o,dragMomentum:l}}}function nB(t){let e=!0;return()=>{if(e){e=!1;return}t()}}function OTe(t,e,n){const r=cV(t,nB(n)),s=cV(e,nB(n));return()=>{r(),s()}}function i0(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function MTe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class DTe extends Bu{constructor(e){super(e),this.removeGroupControls=ra,this.removeListeners=ra,this.controls=new RTe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ra}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const FE=t=>(e,n)=>{t&&On.update(()=>t(e,n),!1,!0)};class LTe extends Bu{constructor(){super(...arguments),this.removePointerDownListener=ra}onPointerDown(e){this.session=new sX(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:rX(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:FE(e),onStart:FE(n),onMove:FE(r),onEnd:(a,o)=>{delete this.session,s&&On.postRender(()=>s(a,o))}}}mount(){this.removePointerDownListener=Ty(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let VE=!1;class $Te extends N.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=e;a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),VE&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),tw.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,{projection:o}=r;return o&&(o.isPresent=a,e.layoutDependency!==n&&o.setOptions({...o.options,layoutDependency:n}),VE=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==a?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||On.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),r2.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;VE=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function aX(t){const[e,n]=GQ(),r=N.useContext(DO);return i.jsx($Te,{...t,layoutGroup:r,switchLayoutGroup:N.useContext(tX),isPresent:e,safeToRemove:n})}const FTe={pan:{Feature:LTe},drag:{Feature:DTe,ProjectionNode:KQ,MeasureLayout:aX}};function rB(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,a=r[s];a&&On.postRender(()=>a(e,tb(e)))}class VTe extends Bu{mount(){const{current:e}=this.node;e&&(this.unmount=cEe(e,(n,r)=>(rB(this.node,r,"Start"),s=>rB(this.node,s,"End"))))}unmount(){}}class BTe extends Bu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Zx(Av(this.node.current,"focus",()=>this.onFocus()),Av(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function sB(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),a=r[s];a&&On.postRender(()=>a(e,tb(e)))}class UTe extends Bu{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:n,propagate:r}=this.node.props;this.unmount=pEe(e,(s,a)=>(sB(this.node,a,"Start"),(o,{success:l})=>sB(this.node,o,l?"End":"Cancel")),{useGlobalTarget:n,stopPropagation:(r==null?void 0:r.tap)===!1})}unmount(){}}const XC=new WeakMap,BE=new WeakMap,zTe=t=>{const e=XC.get(t.target);e&&e(t)},qTe=t=>{t.forEach(zTe)};function WTe({root:t,...e}){const n=t||document;BE.has(n)||BE.set(n,{});const r=BE.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(qTe,{root:t,...e})),r[s]}function HTe(t,e,n){const r=WTe(e);return XC.set(t,n),r.observe(t),()=>{XC.delete(t),r.unobserve(t)}}const KTe={some:0,all:1};class GTe extends Bu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:KTe[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return HTe(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(YTe(e,n))&&this.startObserver()}unmount(){}}function YTe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const QTe={inView:{Feature:GTe},tap:{Feature:UTe},focus:{Feature:BTe},hover:{Feature:VTe}},XTe={layout:{ProjectionNode:KQ,MeasureLayout:aX}},ZTe={...wTe,...QTe,...FTe,...XTe},os=gTe(ZTe,yTe);function Vp({children:t,title:e,subtitle:n,visualContent:r}){return i.jsxs("div",{className:"min-h-screen w-full grid grid-cols-1 lg:grid-cols-2 overflow-hidden bg-background",children:[i.jsxs("div",{className:"hidden lg:flex relative flex-col justify-between p-12 bg-[#0F172A] text-white overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('/grid-pattern.svg')] opacity-10"}),i.jsx("div",{className:"absolute -left-[20%] -top-[20%] w-[60%] h-[60%] bg-blue-600/20 rounded-full blur-[120px]"}),i.jsx("div",{className:"absolute -right-[20%] -bottom-[20%] w-[60%] h-[60%] bg-indigo-600/20 rounded-full blur-[120px]"})]}),i.jsx("div",{className:"relative z-10",children:i.jsx(xv,{variant:"full",size:"lg",className:"text-white [&_span]:text-white"})}),i.jsx("div",{className:"relative z-10 flex-1 flex items-center justify-center",children:i.jsx(os.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"w-full max-w-md",children:r})}),i.jsx("div",{className:"relative z-10 space-y-4",children:i.jsxs("blockquote",{className:"space-y-2",children:[i.jsx("p",{className:"text-lg font-medium text-slate-200 leading-relaxed",children:`"ZedBooks has completely transformed how we manage our organization's finances. It's not just a ledger; it's peace of mind."`}),i.jsx("footer",{className:"text-sm text-slate-400",children:" Sarah M., Financial Director"})]})})]}),i.jsxs("div",{className:"relative flex flex-col items-center justify-center p-6 sm:p-12 lg:p-24 bg-background",children:[i.jsx("div",{className:"lg:hidden absolute top-6 left-6",children:i.jsx(xv,{variant:"full",size:"md"})}),i.jsxs(os.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},className:"w-full max-w-[440px] space-y-8",children:[i.jsxs("div",{className:"space-y-2 text-center lg:text-left",children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:e}),i.jsx("p",{className:"text-muted-foreground",children:n})]}),i.jsx("div",{className:"bg-card/50 backdrop-blur-sm rounded-xl",children:t})]}),i.jsx("div",{className:"absolute bottom-4 right-4 text-xs text-muted-foreground/50",children:i.jsx(AO,{})})]})]})}const JTe=()=>i.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-6",children:[i.jsxs(os.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.8},className:"absolute top-1/4 -left-12 bg-white/10 backdrop-blur-md border border-white/20 p-4 rounded-xl w-64 shadow-2xl",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("div",{className:"h-8 w-8 rounded-full bg-emerald-500/20 flex items-center justify-center",children:i.jsx(vT,{className:"h-5 w-5 text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-slate-300",children:"Payroll Status"}),i.jsx("p",{className:"text-sm font-semibold text-white",children:"Processed Successfully"})]})]}),i.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full w-full bg-emerald-500"})})]}),i.jsxs(os.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4,duration:.8},className:"bg-slate-900/80 backdrop-blur-xl border border-slate-700/50 p-6 rounded-2xl w-full max-w-sm shadow-2xl relative z-10",children:[i.jsxs("div",{className:"flex justify-between items-end mb-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-400",children:"Total Revenue"}),i.jsx("p",{className:"text-3xl font-bold text-white",children:"K 245,000"})]}),i.jsx("div",{className:"text-emerald-400 text-sm font-medium",children:"+12.5%"})]}),i.jsx("div",{className:"flex items-end gap-2 h-24",children:[40,65,50,80,55,90,75].map((t,e)=>i.jsx("div",{className:"flex-1 bg-blue-500/20 rounded-t-sm relative overflow-hidden group",children:i.jsx(os.div,{initial:{height:0},animate:{height:`${t}%`},transition:{delay:.8+e*.1,duration:1},className:"absolute bottom-0 w-full bg-gradient-to-t from-blue-600 to-cyan-400 w-full"})},e))})]})]}),eCe=Vu({email:Ue().email("Invalid email address"),password:Ue().min(6,"Password must be at least 6 characters")});function iB({onForgotPassword:t,onSignup:e,onLoginSuccess:n}){const[r,s]=N.useState(!1),{register:a,handleSubmit:o,formState:{errors:l}}=$u({resolver:Fu(eCe)}),c=async u=>{s(!0);try{await Ds.signIn(u.email,u.password),J.success("Welcome back!"),n()}catch(d){const h=d instanceof Error?d.message:"Failed to log in";J.error(h)}finally{s(!1)}};return i.jsx(Vp,{title:"Welcome back",subtitle:"Sign in to continue to your dashboard",visualContent:i.jsx(JTe,{}),children:i.jsxs("form",{onSubmit:o(c),className:"space-y-5 p-1",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"email",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(ku,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{id:"email",type:"email",placeholder:"name@company.com",className:"pl-10",...a("email")})]}),l.email&&i.jsx("p",{className:"text-sm text-destructive",children:l.email.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(X,{htmlFor:"password",children:"Password"}),i.jsx("button",{type:"button",onClick:t,className:"text-sm text-primary hover:underline font-medium",children:"Forgot Password?"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Sm,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{id:"password",type:"password",placeholder:"",className:"pl-10",...a("password")})]}),l.password&&i.jsx("p",{className:"text-sm text-destructive",children:l.password.message})]}),i.jsx(H,{type:"submit",className:"w-full",size:"lg",disabled:r,children:r?i.jsxs(i.Fragment,{children:[i.jsx(Rn,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("span",{className:"w-full border-t"})}),i.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:i.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(H,{variant:"outline",disabled:!0,className:"w-full",children:"Google"}),i.jsx(H,{variant:"outline",disabled:!0,className:"w-full",children:"Microsoft"})]}),i.jsxs("div",{className:"text-center text-sm text-muted-foreground mt-6",children:["Don't have an account?"," ",i.jsx("button",{type:"button",onClick:e,className:"text-primary hover:underline font-medium",children:"Sign up"})]})]})})}function f2(t){const e=N.useRef({value:t,previous:t});return N.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var tCe=[" ","Enter","ArrowUp","ArrowDown"],nCe=[" ","Enter"],ph="Select",[ZN,JN,rCe]=Kj(ph),[Bp,ttt]=ds(ph,[rCe,Ep]),e1=Ep(),[sCe,Uu]=Bp(ph),[iCe,aCe]=Bp(ph),oX=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:f,required:m,form:v}=t,g=e1(e),[y,w]=N.useState(null),[b,E]=N.useState(null),[T,x]=N.useState(!1),S=zx(u),[_,p]=Ha({prop:r,defaultProp:s??!1,onChange:a,caller:ph}),[A,P]=Ha({prop:o,defaultProp:l,onChange:c,caller:ph}),C=N.useRef(null),I=y?v||!!y.closest("form"):!0,[R,L]=N.useState(new Set),z=Array.from(R).map(W=>W.props.value).join(";");return i.jsx(qk,{...g,children:i.jsxs(sCe,{required:m,scope:e,trigger:y,onTriggerChange:w,valueNode:b,onValueNodeChange:E,valueNodeHasChildren:T,onValueNodeHasChildrenChange:x,contentId:ea(),value:A,onValueChange:P,open:_,onOpenChange:p,dir:S,triggerPointerDownPosRef:C,disabled:f,children:[i.jsx(ZN.Provider,{scope:e,children:i.jsx(iCe,{scope:t.__scopeSelect,onNativeOptionAdd:N.useCallback(W=>{L(M=>new Set(M).add(W))},[]),onNativeOptionRemove:N.useCallback(W=>{L(M=>{const V=new Set(M);return V.delete(W),V})},[]),children:n})}),I?i.jsxs(IX,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:h,value:A,onChange:W=>P(W.target.value),disabled:f,form:v,children:[A===void 0?i.jsx("option",{value:""}):null,Array.from(R)]},z):null]})})};oX.displayName=ph;var lX="SelectTrigger",cX=N.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,a=e1(n),o=Uu(lX,n),l=o.disabled||r,c=Dt(e,o.onTriggerChange),u=JN(n),d=N.useRef("touch"),[h,f,m]=RX(g=>{const y=u().filter(E=>!E.disabled),w=y.find(E=>E.value===o.value),b=OX(y,g,w);b!==void 0&&o.onValueChange(b.value)}),v=g=>{l||(o.onOpenChange(!0),m()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return i.jsx(Wk,{asChild:!0,...a,children:i.jsx(Je.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":kX(o.value)?"":void 0,...s,ref:c,onClick:Pe(s.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&v(g)}),onPointerDown:Pe(s.onPointerDown,g=>{d.current=g.pointerType;const y=g.target;y.hasPointerCapture(g.pointerId)&&y.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(v(g),g.preventDefault())}),onKeyDown:Pe(s.onKeyDown,g=>{const y=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(y&&g.key===" ")&&tCe.includes(g.key)&&(v(),g.preventDefault())})})})});cX.displayName=lX;var uX="SelectValue",dX=N.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:a,placeholder:o="",...l}=t,c=Uu(uX,n),{onValueNodeHasChildrenChange:u}=c,d=a!==void 0,h=Dt(e,c.onValueNodeChange);return fr(()=>{u(d)},[u,d]),i.jsx(Je.span,{...l,ref:h,style:{pointerEvents:"none"},children:kX(c.value)?i.jsx(i.Fragment,{children:o}):a})});dX.displayName=uX;var oCe="SelectIcon",hX=N.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return i.jsx(Je.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});hX.displayName=oCe;var lCe="SelectPortal",fX=t=>i.jsx(wx,{asChild:!0,...t});fX.displayName=lCe;var gh="SelectContent",mX=N.forwardRef((t,e)=>{const n=Uu(gh,t.__scopeSelect),[r,s]=N.useState();if(fr(()=>{s(new DocumentFragment)},[]),!n.open){const a=r;return a?Eh.createPortal(i.jsx(pX,{scope:t.__scopeSelect,children:i.jsx(ZN.Slot,{scope:t.__scopeSelect,children:i.jsx("div",{children:t.children})})}),a):null}return i.jsx(gX,{...t,ref:e})});mX.displayName=gh;var Sa=10,[pX,zu]=Bp(gh),cCe="SelectContentImpl",uCe=Qd("SelectContent.RemoveScroll"),gX=N.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:v,hideWhenDetached:g,avoidCollisions:y,...w}=t,b=Uu(gh,n),[E,T]=N.useState(null),[x,S]=N.useState(null),_=Dt(e,Ne=>T(Ne)),[p,A]=N.useState(null),[P,C]=N.useState(null),I=JN(n),[R,L]=N.useState(!1),z=N.useRef(!1);N.useEffect(()=>{if(E)return oO(E)},[E]),aO();const W=N.useCallback(Ne=>{const[ht,...we]=I().map(ue=>ue.ref.current),[Me]=we.slice(-1),Fe=document.activeElement;for(const ue of Ne)if(ue===Fe||(ue==null||ue.scrollIntoView({block:"nearest"}),ue===ht&&x&&(x.scrollTop=0),ue===Me&&x&&(x.scrollTop=x.scrollHeight),ue==null||ue.focus(),document.activeElement!==Fe))return},[I,x]),M=N.useCallback(()=>W([p,E]),[W,p,E]);N.useEffect(()=>{R&&M()},[R,M]);const{onOpenChange:V,triggerPointerDownPosRef:F}=b;N.useEffect(()=>{if(E){let Ne={x:0,y:0};const ht=Me=>{var Fe,ue;Ne={x:Math.abs(Math.round(Me.pageX)-(((Fe=F.current)==null?void 0:Fe.x)??0)),y:Math.abs(Math.round(Me.pageY)-(((ue=F.current)==null?void 0:ue.y)??0))}},we=Me=>{Ne.x<=10&&Ne.y<=10?Me.preventDefault():E.contains(Me.target)||V(!1),document.removeEventListener("pointermove",ht),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",ht),document.addEventListener("pointerup",we,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ht),document.removeEventListener("pointerup",we,{capture:!0})}}},[E,V,F]),N.useEffect(()=>{const Ne=()=>V(!1);return window.addEventListener("blur",Ne),window.addEventListener("resize",Ne),()=>{window.removeEventListener("blur",Ne),window.removeEventListener("resize",Ne)}},[V]);const[Y,ae]=RX(Ne=>{const ht=I().filter(Fe=>!Fe.disabled),we=ht.find(Fe=>Fe.ref.current===document.activeElement),Me=OX(ht,Ne,we);Me&&setTimeout(()=>Me.ref.current.focus())}),oe=N.useCallback((Ne,ht,we)=>{const Me=!z.current&&!we;(b.value!==void 0&&b.value===ht||Me)&&(A(Ne),Me&&(z.current=!0))},[b.value]),me=N.useCallback(()=>E==null?void 0:E.focus(),[E]),ke=N.useCallback((Ne,ht,we)=>{const Me=!z.current&&!we;(b.value!==void 0&&b.value===ht||Me)&&C(Ne)},[b.value]),ut=r==="popper"?ZC:yX,jt=ut===ZC?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:v,hideWhenDetached:g,avoidCollisions:y}:{};return i.jsx(pX,{scope:n,content:E,viewport:x,onViewportChange:S,itemRefCallback:oe,selectedItem:p,onItemLeave:me,itemTextRefCallback:ke,focusSelectedItem:M,selectedItemText:P,position:r,isPositioned:R,searchRef:Y,children:i.jsx(ON,{as:uCe,allowPinchZoom:!0,children:i.jsx(IN,{asChild:!0,trapped:b.open,onMountAutoFocus:Ne=>{Ne.preventDefault()},onUnmountAutoFocus:Pe(s,Ne=>{var ht;(ht=b.trigger)==null||ht.focus({preventScroll:!0}),Ne.preventDefault()}),children:i.jsx(wp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:Ne=>Ne.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:i.jsx(ut,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:Ne=>Ne.preventDefault(),...w,...jt,onPlaced:()=>L(!0),ref:_,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:Pe(w.onKeyDown,Ne=>{const ht=Ne.ctrlKey||Ne.altKey||Ne.metaKey;if(Ne.key==="Tab"&&Ne.preventDefault(),!ht&&Ne.key.length===1&&ae(Ne.key),["ArrowUp","ArrowDown","Home","End"].includes(Ne.key)){let Me=I().filter(Fe=>!Fe.disabled).map(Fe=>Fe.ref.current);if(["ArrowUp","End"].includes(Ne.key)&&(Me=Me.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ne.key)){const Fe=Ne.target,ue=Me.indexOf(Fe);Me=Me.slice(ue+1)}setTimeout(()=>W(Me)),Ne.preventDefault()}})})})})})})});gX.displayName=cCe;var dCe="SelectItemAlignedPosition",yX=N.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,a=Uu(gh,n),o=zu(gh,n),[l,c]=N.useState(null),[u,d]=N.useState(null),h=Dt(e,_=>d(_)),f=JN(n),m=N.useRef(!1),v=N.useRef(!0),{viewport:g,selectedItem:y,selectedItemText:w,focusSelectedItem:b}=o,E=N.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&g&&y&&w){const _=a.trigger.getBoundingClientRect(),p=u.getBoundingClientRect(),A=a.valueNode.getBoundingClientRect(),P=w.getBoundingClientRect();if(a.dir!=="rtl"){const Fe=P.left-p.left,ue=A.left-Fe,Ct=_.left-ue,gt=_.width+Ct,on=Math.max(gt,p.width),Jt=window.innerWidth-Sa,_n=bC(ue,[Sa,Math.max(Sa,Jt-on)]);l.style.minWidth=gt+"px",l.style.left=_n+"px"}else{const Fe=p.right-P.right,ue=window.innerWidth-A.right-Fe,Ct=window.innerWidth-_.right-ue,gt=_.width+Ct,on=Math.max(gt,p.width),Jt=window.innerWidth-Sa,_n=bC(ue,[Sa,Math.max(Sa,Jt-on)]);l.style.minWidth=gt+"px",l.style.right=_n+"px"}const C=f(),I=window.innerHeight-Sa*2,R=g.scrollHeight,L=window.getComputedStyle(u),z=parseInt(L.borderTopWidth,10),W=parseInt(L.paddingTop,10),M=parseInt(L.borderBottomWidth,10),V=parseInt(L.paddingBottom,10),F=z+W+R+V+M,Y=Math.min(y.offsetHeight*5,F),ae=window.getComputedStyle(g),oe=parseInt(ae.paddingTop,10),me=parseInt(ae.paddingBottom,10),ke=_.top+_.height/2-Sa,ut=I-ke,jt=y.offsetHeight/2,Ne=y.offsetTop+jt,ht=z+W+Ne,we=F-ht;if(ht<=ke){const Fe=C.length>0&&y===C[C.length-1].ref.current;l.style.bottom="0px";const ue=u.clientHeight-g.offsetTop-g.offsetHeight,Ct=Math.max(ut,jt+(Fe?me:0)+ue+M),gt=ht+Ct;l.style.height=gt+"px"}else{const Fe=C.length>0&&y===C[0].ref.current;l.style.top="0px";const Ct=Math.max(ke,z+g.offsetTop+(Fe?oe:0)+jt)+we;l.style.height=Ct+"px",g.scrollTop=ht-ke+g.offsetTop}l.style.margin=`${Sa}px 0`,l.style.minHeight=Y+"px",l.style.maxHeight=I+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[f,a.trigger,a.valueNode,l,u,g,y,w,a.dir,r]);fr(()=>E(),[E]);const[T,x]=N.useState();fr(()=>{u&&x(window.getComputedStyle(u).zIndex)},[u]);const S=N.useCallback(_=>{_&&v.current===!0&&(E(),b==null||b(),v.current=!1)},[E,b]);return i.jsx(fCe,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:S,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:T},children:i.jsx(Je.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});yX.displayName=dCe;var hCe="SelectPopperPosition",ZC=N.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Sa,...a}=t,o=e1(n);return i.jsx(Hk,{...o,...a,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ZC.displayName=hCe;var[fCe,m2]=Bp(gh,{}),JC="SelectViewport",vX=N.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,a=zu(JC,n),o=m2(JC,n),l=Dt(e,a.onViewportChange),c=N.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(ZN.Slot,{scope:n,children:i.jsx(Je.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Pe(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&h){const m=Math.abs(c.current-d.scrollTop);if(m>0){const v=window.innerHeight-Sa*2,g=parseFloat(h.style.minHeight),y=parseFloat(h.style.height),w=Math.max(g,y);if(w<v){const b=w+m,E=Math.min(v,b),T=b-E;h.style.height=E+"px",h.style.bottom==="0px"&&(d.scrollTop=T>0?T:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});vX.displayName=JC;var xX="SelectGroup",[mCe,pCe]=Bp(xX),gCe=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=ea();return i.jsx(mCe,{scope:n,id:s,children:i.jsx(Je.div,{role:"group","aria-labelledby":s,...r,ref:e})})});gCe.displayName=xX;var bX="SelectLabel",wX=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=pCe(bX,n);return i.jsx(Je.div,{id:s.id,...r,ref:e})});wX.displayName=bX;var E_="SelectItem",[yCe,_X]=Bp(E_),jX=N.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:a,...o}=t,l=Uu(E_,n),c=zu(E_,n),u=l.value===r,[d,h]=N.useState(a??""),[f,m]=N.useState(!1),v=Dt(e,b=>{var E;return(E=c.itemRefCallback)==null?void 0:E.call(c,b,r,s)}),g=ea(),y=N.useRef("touch"),w=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(yCe,{scope:n,value:r,disabled:s,textId:g,isSelected:u,onItemTextChange:N.useCallback(b=>{h(E=>E||((b==null?void 0:b.textContent)??"").trim())},[]),children:i.jsx(ZN.ItemSlot,{scope:n,value:r,disabled:s,textValue:d,children:i.jsx(Je.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:v,onFocus:Pe(o.onFocus,()=>m(!0)),onBlur:Pe(o.onBlur,()=>m(!1)),onClick:Pe(o.onClick,()=>{y.current!=="mouse"&&w()}),onPointerUp:Pe(o.onPointerUp,()=>{y.current==="mouse"&&w()}),onPointerDown:Pe(o.onPointerDown,b=>{y.current=b.pointerType}),onPointerMove:Pe(o.onPointerMove,b=>{var E;y.current=b.pointerType,s?(E=c.onItemLeave)==null||E.call(c):y.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Pe(o.onPointerLeave,b=>{var E;b.currentTarget===document.activeElement&&((E=c.onItemLeave)==null||E.call(c))}),onKeyDown:Pe(o.onKeyDown,b=>{var T;((T=c.searchRef)==null?void 0:T.current)!==""&&b.key===" "||(nCe.includes(b.key)&&w(),b.key===" "&&b.preventDefault())})})})})});jX.displayName=E_;var sy="SelectItemText",NX=N.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...a}=t,o=Uu(sy,n),l=zu(sy,n),c=_X(sy,n),u=aCe(sy,n),[d,h]=N.useState(null),f=Dt(e,w=>h(w),c.onItemTextChange,w=>{var b;return(b=l.itemTextRefCallback)==null?void 0:b.call(l,w,c.value,c.disabled)}),m=d==null?void 0:d.textContent,v=N.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:y}=u;return fr(()=>(g(v),()=>y(v)),[g,y,v]),i.jsxs(i.Fragment,{children:[i.jsx(Je.span,{id:c.textId,...a,ref:f}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Eh.createPortal(a.children,o.valueNode):null]})});NX.displayName=sy;var SX="SelectItemIndicator",EX=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return _X(SX,n).isSelected?i.jsx(Je.span,{"aria-hidden":!0,...r,ref:e}):null});EX.displayName=SX;var eP="SelectScrollUpButton",AX=N.forwardRef((t,e)=>{const n=zu(eP,t.__scopeSelect),r=m2(eP,t.__scopeSelect),[s,a]=N.useState(!1),o=Dt(e,r.onScrollButtonChange);return fr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(CX,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});AX.displayName=eP;var tP="SelectScrollDownButton",TX=N.forwardRef((t,e)=>{const n=zu(tP,t.__scopeSelect),r=m2(tP,t.__scopeSelect),[s,a]=N.useState(!1),o=Dt(e,r.onScrollButtonChange);return fr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;a(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(CX,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});TX.displayName=tP;var CX=N.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,a=zu("SelectScrollButton",n),o=N.useRef(null),l=JN(n),c=N.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return N.useEffect(()=>()=>c(),[c]),fr(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),i.jsx(Je.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Pe(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Pe(s.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Pe(s.onPointerLeave,()=>{c()})})}),vCe="SelectSeparator",PX=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return i.jsx(Je.div,{"aria-hidden":!0,...r,ref:e})});PX.displayName=vCe;var nP="SelectArrow",xCe=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=e1(n),a=Uu(nP,n),o=zu(nP,n);return a.open&&o.position==="popper"?i.jsx(Kk,{...s,...r,ref:e}):null});xCe.displayName=nP;var bCe="SelectBubbleInput",IX=N.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=N.useRef(null),a=Dt(r,s),o=f2(e);return N.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&d){const h=new Event("change",{bubbles:!0});d.call(l,e),l.dispatchEvent(h)}},[o,e]),i.jsx(Je.select,{...n,style:{...t8,...n.style},ref:a,defaultValue:e})});IX.displayName=bCe;function kX(t){return t===""||t===void 0}function RX(t){const e=ur(t),n=N.useRef(""),r=N.useRef(0),s=N.useCallback(o=>{const l=n.current+o;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),a=N.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function OX(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=wCe(t,Math.max(a,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function wCe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var _Ce=oX,MX=cX,jCe=dX,NCe=hX,SCe=fX,DX=mX,ECe=vX,LX=wX,$X=jX,ACe=NX,TCe=EX,FX=AX,VX=TX,BX=PX;const UX="__lovable_empty__",kt=({onValueChange:t,...e})=>i.jsx(_Ce,{...e,onValueChange:n=>{t==null||t(n===UX?"":n)}}),Rt=jCe,At=N.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(MX,{ref:r,className:pe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,i.jsx(NCe,{asChild:!0,children:i.jsx(Ck,{className:"h-4 w-4 opacity-50"})})]}));At.displayName=MX.displayName;const zX=N.forwardRef(({className:t,...e},n)=>i.jsx(FX,{ref:n,className:pe("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(uoe,{className:"h-4 w-4"})}));zX.displayName=FX.displayName;const qX=N.forwardRef(({className:t,...e},n)=>i.jsx(VX,{ref:n,className:pe("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(Ck,{className:"h-4 w-4"})}));qX.displayName=VX.displayName;const Tt=N.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>i.jsx(SCe,{children:i.jsxs(DX,{ref:s,className:pe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[i.jsx(zX,{}),i.jsx(ECe,{className:pe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),i.jsx(qX,{})]})}));Tt.displayName=DX.displayName;const CCe=N.forwardRef(({className:t,...e},n)=>i.jsx(LX,{ref:n,className:pe("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));CCe.displayName=LX.displayName;const be=N.forwardRef(({className:t,children:e,value:n,...r},s)=>i.jsxs($X,{ref:s,value:n===""?UX:n,className:pe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(TCe,{children:i.jsx(Nx,{className:"h-4 w-4"})})}),i.jsx(ACe,{children:e})]}));be.displayName=$X.displayName;const PCe=N.forwardRef(({className:t,...e},n)=>i.jsx(BX,{ref:n,className:pe("-mx-1 my-1 h-px bg-muted",t),...e}));PCe.displayName=BX.displayName;const ICe=()=>i.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-8",children:[i.jsxs(os.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,duration:.5},className:"absolute top-20 right-10 bg-white p-4 rounded-xl shadow-2xl flex items-center gap-4 z-20",children:[i.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold",children:"+"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-800",children:"New Customer"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Just joined your network"})]})]}),i.jsxs("div",{className:"w-full max-w-sm bg-slate-800/50 backdrop-blur-md border border-slate-700/50 p-6 rounded-2xl relative",children:[i.jsxs("div",{className:"flex justify-between items-start mb-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-white font-semibold",children:"Monthly Growth"}),i.jsx("p",{className:"text-slate-400 text-sm",children:"Revenue vs Expenses"})]}),i.jsxs("div",{className:"bg-emerald-500/20 text-emerald-400 px-2 py-1 rounded text-xs font-bold flex items-center gap-1",children:[i.jsx(j8,{className:"h-3 w-3"})," 24%"]})]}),i.jsx("div",{className:"h-32 flex items-end justify-between gap-2",children:[30,45,35,60,50,75,65,90].map((t,e)=>i.jsx(os.div,{initial:{height:0},animate:{height:`${t}%`},transition:{delay:.5+e*.1,duration:.8,ease:"easeOut"},className:"w-full bg-gradient-to-t from-blue-600 to-indigo-400 rounded-t-sm opacity-80 hover:opacity-100 transition-opacity"},e))})]})]}),kCe=Vu({organizationName:Ue().min(1,"Organization name is required"),email:Ue().email("Invalid email address"),password:Ue().min(6,"Password must be at least 6 characters"),phone:Ue().min(10,"Phone number must be at least 10 digits").regex(/^\+?[0-9]+$/,"Invalid phone number"),organizationType:bY(["business","non_profit"]),taxClassification:Ue().min(1,"Tax classification is required"),tpin:Ue().regex(/^\d{10}$/,"TPIN must be exactly 10 digits")});function RCe({onLogin:t,onSignupSuccess:e}){const[n,r]=N.useState(!1),{register:s,handleSubmit:a,setValue:o,watch:l,formState:{errors:c}}=$u({resolver:Fu(kCe),defaultValues:{organizationType:"business",taxClassification:""}}),u=l("organizationType"),d=async h=>{r(!0);try{await Ds.signUp({email:h.email,password:h.password,organizationName:h.organizationName,phone:h.phone,organizationType:h.organizationType,taxClassification:h.taxClassification,tpin:h.tpin}),J.success("Account created successfully!"),e(h.email)}catch(f){const m=f instanceof Error?f.message:"Failed to create account";J.error(m)}finally{r(!1)}};return i.jsx(Vp,{title:"Create Account",subtitle:"Start your journey with ZedBooks today",visualContent:i.jsx(ICe,{}),children:i.jsxs("form",{onSubmit:a(d),className:"space-y-4 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"orgName",children:"Organization Name"}),i.jsxs("div",{className:"relative",children:[i.jsx(jx,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{id:"orgName",placeholder:"e.g. Acme Corp",className:"pl-10",...s("organizationName")})]}),c.organizationName&&i.jsx("p",{className:"text-sm text-destructive",children:c.organizationName.message})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Organization Type"}),i.jsxs(kt,{onValueChange:h=>{o("organizationType",h),o("taxClassification","")},defaultValue:"business",children:[i.jsx(At,{children:i.jsx(Rt,{placeholder:"Select type"})}),i.jsxs(Tt,{children:[i.jsx(be,{value:"business",children:"Business"}),i.jsx(be,{value:"non_profit",children:"Non-profit"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Tax Classification"}),i.jsxs(kt,{onValueChange:h=>o("taxClassification",h),children:[i.jsx(At,{children:i.jsx(Rt,{placeholder:"Select class"})}),i.jsx(Tt,{children:u==="business"?i.jsxs(i.Fragment,{children:[i.jsx(be,{value:"vat_registered",children:"VAT Registered"}),i.jsx(be,{value:"turnover_tax",children:"Turnover Tax"}),i.jsx(be,{value:"non_vat",children:"Non-VAT"})]}):i.jsxs(i.Fragment,{children:[i.jsx(be,{value:"tax_exempt",children:"Tax Exempt"}),i.jsx(be,{value:"grant_funded",children:"Grant Funded"}),i.jsx(be,{value:"charitable",children:"Charitable"})]})})]}),c.taxClassification&&i.jsx("p",{className:"text-sm text-destructive",children:c.taxClassification.message})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"TPIN (10 digits)"}),i.jsxs("div",{className:"relative",children:[i.jsx(C8,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"1234567890",className:"pl-10",...s("tpin"),onChange:h=>{const f=h.target.value.replace(/\D/g,"").slice(0,10);o("tpin",f)}})]}),c.tpin&&i.jsx("p",{className:"text-sm text-destructive",children:c.tpin.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"email",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(ku,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{id:"email",type:"email",placeholder:"name@company.com",className:"pl-10",...s("email")})]}),c.email&&i.jsx("p",{className:"text-sm text-destructive",children:c.email.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"phone",children:"Phone"}),i.jsxs("div",{className:"relative",children:[i.jsx(P8,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{id:"phone",placeholder:"+260...",className:"pl-10",...s("phone")})]}),c.phone&&i.jsx("p",{className:"text-sm text-destructive",children:c.phone.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"password",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Sm,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{id:"password",type:"password",placeholder:"",className:"pl-10",...s("password")})]}),c.password&&i.jsx("p",{className:"text-sm text-destructive",children:c.password.message})]}),i.jsx(H,{type:"submit",className:"w-full",size:"lg",disabled:n,children:n?i.jsxs(i.Fragment,{children:[i.jsx(Rn,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Account..."]}):"Create Account"}),i.jsxs("div",{className:"text-center text-sm text-muted-foreground mt-4",children:["Already have an account?"," ",i.jsx("button",{type:"button",onClick:t,className:"text-primary hover:underline font-medium",children:"Sign in"})]})]})})}const OCe=()=>i.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-8",children:[i.jsxs(os.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8},className:"bg-slate-800/50 backdrop-blur-xl border border-slate-700/50 p-8 rounded-full shadow-2xl relative",children:[i.jsx("div",{className:"absolute inset-0 bg-blue-500/20 rounded-full blur-xl animate-pulse"}),i.jsx(Ik,{className:"h-24 w-24 text-blue-400 relative z-10"})]}),i.jsxs("div",{className:"text-center space-y-2 max-w-xs",children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:"Secure Account Recovery"}),i.jsx("p",{className:"text-sm text-slate-400",children:"We use industry-standard encryption to verify your identity and protect your data."})]})]}),MCe=Vu({email:Ue().email("Invalid email address")});function DCe({onLogin:t}){const[e,n]=N.useState(!1),{register:r,handleSubmit:s,formState:{errors:a},reset:o}=$u({resolver:Fu(MCe)}),l=async c=>{n(!0);try{await Ds.sendResetPasswordEmail(c.email),J.success("Reset link sent! Please check your inbox."),o()}catch(u){const d=u instanceof Error?u.message:"Failed to send reset link";J.error(d)}finally{n(!1)}};return i.jsx(Vp,{title:"Forgot Password?",subtitle:"No worries, we'll send you reset instructions.",visualContent:i.jsx(OCe,{}),children:i.jsxs("form",{onSubmit:s(l),className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"email",children:"Email Address"}),i.jsxs("div",{className:"relative",children:[i.jsx(ku,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{id:"email",type:"email",placeholder:"name@company.com",className:"pl-10",...r("email")})]}),a.email&&i.jsx("p",{className:"text-sm text-destructive",children:a.email.message})]}),i.jsx(H,{type:"submit",className:"w-full",size:"lg",disabled:e,children:e?i.jsxs(i.Fragment,{children:[i.jsx(Rn,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending Link..."]}):"Send Reset Link"}),i.jsx("div",{className:"text-center text-sm",children:i.jsx("button",{type:"button",onClick:t,className:"text-muted-foreground hover:text-primary transition-colors flex items-center justify-center gap-2 mx-auto",children:" Back to Login"})})]})})}const LCe=()=>i.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-8",children:[i.jsxs(os.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8},className:"bg-emerald-900/40 backdrop-blur-xl border border-emerald-500/30 p-8 rounded-full shadow-2xl relative",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 rounded-full blur-xl animate-pulse"}),i.jsx(Ik,{className:"h-24 w-24 text-emerald-400 relative z-10"})]}),i.jsxs("div",{className:"text-center space-y-2 max-w-xs",children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:"Reset Credentials"}),i.jsx("p",{className:"text-sm text-slate-400",children:"Create a strong password to ensure your organization's data remains secure."})]})]}),$Ce=Vu({password:Ue().min(6,"Password must be at least 6 characters"),confirmPassword:Ue().min(6,"Password must be at least 6 characters")}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function FCe({actionCode:t,onLogin:e}){const[n,r]=N.useState(!1),{register:s,handleSubmit:a,formState:{errors:o}}=$u({resolver:Fu($Ce)}),l=async c=>{r(!0);try{await Yme(r_,t,c.password),J.success("Password updated successfully!"),e()}catch(u){const d=u instanceof Error?u.message:"Failed to update password";J.error(d)}finally{r(!1)}};return i.jsx(Vp,{title:"Set New Password",subtitle:"Enter your new password below.",visualContent:i.jsx(LCe,{}),children:i.jsxs("form",{onSubmit:a(l),className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"password",children:"New Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Sm,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{id:"password",type:"password",placeholder:"",className:"pl-10",...s("password")})]}),o.password&&i.jsx("p",{className:"text-sm text-destructive",children:o.password.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"confirmPassword",children:"Confirm Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Sm,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{id:"confirmPassword",type:"password",placeholder:"",className:"pl-10",...s("confirmPassword")})]}),o.confirmPassword&&i.jsx("p",{className:"text-sm text-destructive",children:o.confirmPassword.message})]}),i.jsx(H,{type:"submit",className:"w-full",size:"lg",disabled:n,children:n?i.jsxs(i.Fragment,{children:[i.jsx(Rn,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Password"}),i.jsx("div",{className:"text-center text-sm",children:i.jsx("button",{type:"button",onClick:e,className:"text-muted-foreground hover:text-primary transition-colors flex items-center justify-center gap-2 mx-auto",children:" Back to Login"})})]})})}const VCe=()=>i.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-8",children:[i.jsxs(os.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8},className:"bg-blue-900/40 backdrop-blur-xl border border-blue-500/30 p-8 rounded-full shadow-2xl relative",children:[i.jsx("div",{className:"absolute inset-0 bg-blue-500/20 rounded-full blur-xl animate-pulse"}),i.jsx(ku,{className:"h-24 w-24 text-blue-400 relative z-10"})]}),i.jsxs("div",{className:"text-center space-y-2 max-w-xs",children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:"Check Your Inbox"}),i.jsx("p",{className:"text-sm text-slate-400",children:"We've sent a secure verification link to your email address."})]})]});function BCe({email:t,onLogin:e}){const[n,r]=N.useState(!1),[s,a]=N.useState(0);N.useEffect(()=>{if(s>0){const l=setTimeout(()=>a(s-1),1e3);return()=>clearTimeout(l)}},[s]);const o=async()=>{if(!(s>0)){r(!0);try{await Ds.resendVerificationEmail(),J.success("Verification email resent!"),a(60)}catch(l){const c=l instanceof Error?l.message:"Failed to resend";J.error(c)}finally{r(!1)}}};return i.jsx(Vp,{title:"Verify Your Email",subtitle:`We've sent a link to ${t}`,visualContent:i.jsx(VCe,{}),children:i.jsxs("div",{className:"space-y-6 text-center",children:[i.jsx("div",{className:"bg-muted/50 p-4 rounded-lg border border-border text-sm text-muted-foreground text-left",children:i.jsx("p",{children:"Click the link in the email we sent to verify your account. If you don't see it, check your spam folder."})}),i.jsx(H,{onClick:o,disabled:n||s>0,className:"w-full",variant:"outline",children:n?i.jsxs(i.Fragment,{children:[i.jsx(Rn,{className:"mr-2 h-4 w-4 animate-spin"}),"Resending..."]}):s>0?i.jsxs(i.Fragment,{children:[i.jsx(k8,{className:"mr-2 h-4 w-4"}),"Resend in ",s,"s"]}):"Resend Verification Email"}),i.jsx("button",{type:"button",onClick:e,className:"text-primary hover:underline font-medium text-sm",children:"Back to Login"})]})})}function UCe(){const t=Gn(),[e,n]=N.useState(!0),[r,s]=N.useState("login"),[a,o]=N.useState(""),[l,c]=N.useState(null),[u,d]=N.useState(null),h=N.useCallback(async m=>{try{try{await Ds.ensureCurrentMembership()}catch{}const v=await Ke.getPrimaryMembershipByUser(m);if(!v){t("/setup",{replace:!0});return}const g=await Ke.getCompanySettings(v.companyId);if(!(g!=null&&g.companyName)){t("/setup",{replace:!0});return}t("/dashboard",{replace:!0})}catch{t("/dashboard",{replace:!0})}},[t]),f=N.useCallback(async m=>{try{await Ds.acceptInvitation(m),J.success("Invitation accepted. Your company access is configured.")}catch(g){const y=g instanceof Error?g.message:"Unable to accept invitation";J.error(`Invitation link error: ${y}`)}const v=new URL(window.location.href);v.searchParams.delete("invite"),window.history.replaceState({},"",v.toString()),d(null)},[]);return N.useEffect(()=>{const m=new URLSearchParams(window.location.search),v=m.get("mode"),g=m.get("oobCode"),y=m.get("invite");d(y);let w=!0;const b=()=>{const x=new URL(window.location.href);["mode","oobCode","apiKey","lang","continueUrl"].forEach(S=>x.searchParams.delete(S)),window.history.replaceState({},"",x.toString())};(async()=>{if(!Co){n(!1);return}if(v==="resetPassword"&&g){try{await Zme(r_,g),w&&(c(g),s("reset-password"))}catch{J.error("Invalid or expired password reset link."),s("login")}finally{w&&n(!1)}return}if(v==="verifyEmail"&&g){try{await Qme(r_,g),J.success("Email verified successfully. You can now log in."),b(),s("login")}catch{J.error("Email verification link is invalid or expired."),s("login")}w&&n(!1);return}const x=Ds.getCurrentUser();x?(y&&await f(y),await h(x.uid)):w&&n(!1)})();const T=Ds.onAuthStateChanged(async x=>{if(w){if(!x){n(!1);return}y&&await f(y),setTimeout(()=>{h(x.uid)},500)}});return()=>{w=!1,T.unsubscribe()}},[f,h]),e?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Rn,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Checking authentication..."})]})}):r==="login"?i.jsx(iB,{onForgotPassword:()=>s("forgot-password"),onSignup:()=>s("signup"),onLoginSuccess:()=>{}}):r==="signup"?i.jsx(RCe,{onLogin:()=>s("login"),onSignupSuccess:m=>{o(m),s("verify-email")}}):r==="forgot-password"?i.jsx(DCe,{onLogin:()=>s("login")}):r==="reset-password"&&l?i.jsx(FCe,{actionCode:l,onLogin:()=>s("login")}):r==="verify-email"?i.jsx(BCe,{email:a,onLogin:()=>s("login")}):i.jsx(iB,{onForgotPassword:()=>s("forgot-password"),onSignup:()=>s("signup"),onLoginSuccess:()=>{}})}var WX={exports:{}},HX={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bm=N;function zCe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qCe=typeof Object.is=="function"?Object.is:zCe,WCe=Bm.useState,HCe=Bm.useEffect,KCe=Bm.useLayoutEffect,GCe=Bm.useDebugValue;function YCe(t,e){var n=e(),r=WCe({inst:{value:n,getSnapshot:e}}),s=r[0].inst,a=r[1];return KCe(function(){s.value=n,s.getSnapshot=e,UE(s)&&a({inst:s})},[t,n,e]),HCe(function(){return UE(s)&&a({inst:s}),t(function(){UE(s)&&a({inst:s})})},[t]),GCe(n),n}function UE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!qCe(t,n)}catch{return!0}}function QCe(t,e){return e()}var XCe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?QCe:YCe;HX.useSyncExternalStore=Bm.useSyncExternalStore!==void 0?Bm.useSyncExternalStore:XCe;WX.exports=HX;var ZCe=WX.exports;function JCe(){return ZCe.useSyncExternalStore(ePe,()=>!0,()=>!1)}function ePe(){return()=>{}}var p2="Avatar",[tPe,ntt]=ds(p2),[nPe,KX]=tPe(p2),GX=N.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,a]=N.useState("idle");return i.jsx(nPe,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:i.jsx(Je.span,{...r,ref:e})})});GX.displayName=p2;var YX="AvatarImage",QX=N.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...a}=t,o=KX(YX,n),l=rPe(r,a),c=ur(u=>{s(u),o.onImageLoadingStatusChange(u)});return fr(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?i.jsx(Je.img,{...a,ref:e,src:r}):null});QX.displayName=YX;var XX="AvatarFallback",ZX=N.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,a=KX(XX,n),[o,l]=N.useState(r===void 0);return N.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&a.imageLoadingStatus!=="loaded"?i.jsx(Je.span,{...s,ref:e}):null});ZX.displayName=XX;function aB(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function rPe(t,{referrerPolicy:e,crossOrigin:n}){const r=JCe(),s=N.useRef(null),a=r?(s.current||(s.current=new window.Image),s.current):null,[o,l]=N.useState(()=>aB(a,t));return fr(()=>{l(aB(a,t))},[a,t]),fr(()=>{const c=h=>()=>{l(h)};if(!a)return;const u=c("loaded"),d=c("error");return a.addEventListener("load",u),a.addEventListener("error",d),e&&(a.referrerPolicy=e),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",u),a.removeEventListener("error",d)}},[a,n,e]),o}var JX=GX,eZ=QX,tZ=ZX;const nZ=N.forwardRef(({className:t,...e},n)=>i.jsx(JX,{ref:n,className:pe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));nZ.displayName=JX.displayName;const sPe=N.forwardRef(({className:t,...e},n)=>i.jsx(eZ,{ref:n,className:pe("aspect-square h-full w-full",t),...e}));sPe.displayName=eZ.displayName;const rZ=N.forwardRef(({className:t,...e},n)=>i.jsx(tZ,{ref:n,className:pe("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));rZ.displayName=tZ.displayName;const iPe=Th("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Xe({className:t,variant:e,...n}){return i.jsx("div",{className:pe(iPe({variant:e}),t),...n})}var t1="Switch",[aPe,rtt]=ds(t1),[oPe,lPe]=aPe(t1),sZ=N.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=t,[f,m]=N.useState(null),v=Dt(e,E=>m(E)),g=N.useRef(!1),y=f?d||!!f.closest("form"):!0,[w,b]=Ha({prop:s,defaultProp:a??!1,onChange:u,caller:t1});return i.jsxs(oPe,{scope:n,checked:w,disabled:l,children:[i.jsx(Je.button,{type:"button",role:"switch","aria-checked":w,"aria-required":o,"data-state":lZ(w),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:v,onClick:Pe(t.onClick,E=>{b(T=>!T),y&&(g.current=E.isPropagationStopped(),g.current||E.stopPropagation())})}),y&&i.jsx(oZ,{control:f,bubbles:!g.current,name:r,value:c,checked:w,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});sZ.displayName=t1;var iZ="SwitchThumb",aZ=N.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=lPe(iZ,n);return i.jsx(Je.span,{"data-state":lZ(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});aZ.displayName=iZ;var cPe="SwitchBubbleInput",oZ=N.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},a)=>{const o=N.useRef(null),l=Dt(o,a),c=f2(n),u=Bk(e);return N.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&m){const v=new Event("click",{bubbles:r});m.call(d,n),d.dispatchEvent(v)}},[c,n,r]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});oZ.displayName=cPe;function lZ(t){return t?"checked":"unchecked"}var cZ=sZ,uPe=aZ;const is=N.forwardRef(({className:t,...e},n)=>i.jsx(cZ,{className:pe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:n,children:i.jsx(uPe,{className:pe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));is.displayName=cZ.displayName;const dPe=[{min:0,max:5100,rate:0},{min:5100,max:7100,rate:.2},{min:7100,max:9200,rate:.3},{min:9200,max:1/0,rate:.37}],hPe=.05,fPe=1342,mPe=.01,pPe=250;function uZ(t){let e=0,n=t;for(const r of dPe){if(n<=0)break;const s=Math.min(n,r.max-r.min);e+=s*r.rate,n-=s}return Math.round(e*100)/100}function dZ(t){const e=Math.round(t*hPe*100)/100,n=Math.min(e,fPe);return{employee:n,employer:n}}function hZ(t){const e=Math.round(t*mPe*100)/100,n=Math.min(e,pPe);return{employee:n,employer:n}}function gPe(t,e=0,n=0,r=0,s=0,a=0){const o=t+e+n+r,l=dZ(o),c=hZ(t),u=uZ(o),d=l.employee+c.employee+u+s+a,h=o-d;return{basicSalary:t,housingAllowance:e,transportAllowance:n,otherAllowances:r,grossSalary:o,paye:u,napsaEmployee:l.employee,napsaEmployer:l.employer,nhimaEmployee:c.employee,nhimaEmployer:c.employer,advancesDeducted:s,totalDeductions:d,netSalary:h}}function le(t){return`K${t.toLocaleString("en-ZM",{minimumFractionDigits:2,maximumFractionDigits:2})}`}var yPe=Array.isArray,mi=yPe,vPe=typeof wb=="object"&&wb&&wb.Object===Object&&wb,fZ=vPe,xPe=fZ,bPe=typeof self=="object"&&self&&self.Object===Object&&self,wPe=xPe||bPe||Function("return this")(),Go=wPe,_Pe=Go,jPe=_Pe.Symbol,nb=jPe,oB=nb,mZ=Object.prototype,NPe=mZ.hasOwnProperty,SPe=mZ.toString,Pg=oB?oB.toStringTag:void 0;function EPe(t){var e=NPe.call(t,Pg),n=t[Pg];try{t[Pg]=void 0;var r=!0}catch{}var s=SPe.call(t);return r&&(e?t[Pg]=n:delete t[Pg]),s}var APe=EPe,TPe=Object.prototype,CPe=TPe.toString;function PPe(t){return CPe.call(t)}var IPe=PPe,lB=nb,kPe=APe,RPe=IPe,OPe="[object Null]",MPe="[object Undefined]",cB=lB?lB.toStringTag:void 0;function DPe(t){return t==null?t===void 0?MPe:OPe:cB&&cB in Object(t)?kPe(t):RPe(t)}var zl=DPe;function LPe(t){return t!=null&&typeof t=="object"}var ql=LPe,$Pe=zl,FPe=ql,VPe="[object Symbol]";function BPe(t){return typeof t=="symbol"||FPe(t)&&$Pe(t)==VPe}var Up=BPe,UPe=mi,zPe=Up,qPe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,WPe=/^\w*$/;function HPe(t,e){if(UPe(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||zPe(t)?!0:WPe.test(t)||!qPe.test(t)||e!=null&&t in Object(e)}var g2=HPe;function KPe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var qu=KPe;const zp=gn(qu);var GPe=zl,YPe=qu,QPe="[object AsyncFunction]",XPe="[object Function]",ZPe="[object GeneratorFunction]",JPe="[object Proxy]";function eIe(t){if(!YPe(t))return!1;var e=GPe(t);return e==XPe||e==ZPe||e==QPe||e==JPe}var y2=eIe;const wt=gn(y2);var tIe=Go,nIe=tIe["__core-js_shared__"],rIe=nIe,zE=rIe,uB=function(){var t=/[^.]+$/.exec(zE&&zE.keys&&zE.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function sIe(t){return!!uB&&uB in t}var iIe=sIe,aIe=Function.prototype,oIe=aIe.toString;function lIe(t){if(t!=null){try{return oIe.call(t)}catch{}try{return t+""}catch{}}return""}var pZ=lIe,cIe=y2,uIe=iIe,dIe=qu,hIe=pZ,fIe=/[\\^$.*+?()[\]{}|]/g,mIe=/^\[object .+?Constructor\]$/,pIe=Function.prototype,gIe=Object.prototype,yIe=pIe.toString,vIe=gIe.hasOwnProperty,xIe=RegExp("^"+yIe.call(vIe).replace(fIe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function bIe(t){if(!dIe(t)||uIe(t))return!1;var e=cIe(t)?xIe:mIe;return e.test(hIe(t))}var wIe=bIe;function _Ie(t,e){return t==null?void 0:t[e]}var jIe=_Ie,NIe=wIe,SIe=jIe;function EIe(t,e){var n=SIe(t,e);return NIe(n)?n:void 0}var Mh=EIe,AIe=Mh,TIe=AIe(Object,"create"),n1=TIe,dB=n1;function CIe(){this.__data__=dB?dB(null):{},this.size=0}var PIe=CIe;function IIe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var kIe=IIe,RIe=n1,OIe="__lodash_hash_undefined__",MIe=Object.prototype,DIe=MIe.hasOwnProperty;function LIe(t){var e=this.__data__;if(RIe){var n=e[t];return n===OIe?void 0:n}return DIe.call(e,t)?e[t]:void 0}var $Ie=LIe,FIe=n1,VIe=Object.prototype,BIe=VIe.hasOwnProperty;function UIe(t){var e=this.__data__;return FIe?e[t]!==void 0:BIe.call(e,t)}var zIe=UIe,qIe=n1,WIe="__lodash_hash_undefined__";function HIe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=qIe&&e===void 0?WIe:e,this}var KIe=HIe,GIe=PIe,YIe=kIe,QIe=$Ie,XIe=zIe,ZIe=KIe;function qp(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}qp.prototype.clear=GIe;qp.prototype.delete=YIe;qp.prototype.get=QIe;qp.prototype.has=XIe;qp.prototype.set=ZIe;var JIe=qp;function eke(){this.__data__=[],this.size=0}var tke=eke;function nke(t,e){return t===e||t!==t&&e!==e}var v2=nke,rke=v2;function ske(t,e){for(var n=t.length;n--;)if(rke(t[n][0],e))return n;return-1}var r1=ske,ike=r1,ake=Array.prototype,oke=ake.splice;function lke(t){var e=this.__data__,n=ike(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():oke.call(e,n,1),--this.size,!0}var cke=lke,uke=r1;function dke(t){var e=this.__data__,n=uke(e,t);return n<0?void 0:e[n][1]}var hke=dke,fke=r1;function mke(t){return fke(this.__data__,t)>-1}var pke=mke,gke=r1;function yke(t,e){var n=this.__data__,r=gke(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var vke=yke,xke=tke,bke=cke,wke=hke,_ke=pke,jke=vke;function Wp(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Wp.prototype.clear=xke;Wp.prototype.delete=bke;Wp.prototype.get=wke;Wp.prototype.has=_ke;Wp.prototype.set=jke;var s1=Wp,Nke=Mh,Ske=Go,Eke=Nke(Ske,"Map"),x2=Eke,hB=JIe,Ake=s1,Tke=x2;function Cke(){this.size=0,this.__data__={hash:new hB,map:new(Tke||Ake),string:new hB}}var Pke=Cke;function Ike(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var kke=Ike,Rke=kke;function Oke(t,e){var n=t.__data__;return Rke(e)?n[typeof e=="string"?"string":"hash"]:n.map}var i1=Oke,Mke=i1;function Dke(t){var e=Mke(this,t).delete(t);return this.size-=e?1:0,e}var Lke=Dke,$ke=i1;function Fke(t){return $ke(this,t).get(t)}var Vke=Fke,Bke=i1;function Uke(t){return Bke(this,t).has(t)}var zke=Uke,qke=i1;function Wke(t,e){var n=qke(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Hke=Wke,Kke=Pke,Gke=Lke,Yke=Vke,Qke=zke,Xke=Hke;function Hp(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Hp.prototype.clear=Kke;Hp.prototype.delete=Gke;Hp.prototype.get=Yke;Hp.prototype.has=Qke;Hp.prototype.set=Xke;var b2=Hp,gZ=b2,Zke="Expected a function";function w2(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Zke);var n=function(){var r=arguments,s=e?e.apply(this,r):r[0],a=n.cache;if(a.has(s))return a.get(s);var o=t.apply(this,r);return n.cache=a.set(s,o)||a,o};return n.cache=new(w2.Cache||gZ),n}w2.Cache=gZ;var yZ=w2;const Jke=gn(yZ);var eRe=yZ,tRe=500;function nRe(t){var e=eRe(t,function(r){return n.size===tRe&&n.clear(),r}),n=e.cache;return e}var rRe=nRe,sRe=rRe,iRe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,aRe=/\\(\\)?/g,oRe=sRe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(iRe,function(n,r,s,a){e.push(s?a.replace(aRe,"$1"):r||n)}),e}),lRe=oRe;function cRe(t,e){for(var n=-1,r=t==null?0:t.length,s=Array(r);++n<r;)s[n]=e(t[n],n,t);return s}var _2=cRe,fB=nb,uRe=_2,dRe=mi,hRe=Up,fRe=1/0,mB=fB?fB.prototype:void 0,pB=mB?mB.toString:void 0;function vZ(t){if(typeof t=="string")return t;if(dRe(t))return uRe(t,vZ)+"";if(hRe(t))return pB?pB.call(t):"";var e=t+"";return e=="0"&&1/t==-fRe?"-0":e}var mRe=vZ,pRe=mRe;function gRe(t){return t==null?"":pRe(t)}var xZ=gRe,yRe=mi,vRe=g2,xRe=lRe,bRe=xZ;function wRe(t,e){return yRe(t)?t:vRe(t,e)?[t]:xRe(bRe(t))}var bZ=wRe,_Re=Up,jRe=1/0;function NRe(t){if(typeof t=="string"||_Re(t))return t;var e=t+"";return e=="0"&&1/t==-jRe?"-0":e}var a1=NRe,SRe=bZ,ERe=a1;function ARe(t,e){e=SRe(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[ERe(e[n++])];return n&&n==r?t:void 0}var j2=ARe,TRe=j2;function CRe(t,e,n){var r=t==null?void 0:TRe(t,e);return r===void 0?n:r}var wZ=CRe;const Ri=gn(wZ);function PRe(t){return t==null}var IRe=PRe;const Ft=gn(IRe);var kRe=zl,RRe=mi,ORe=ql,MRe="[object String]";function DRe(t){return typeof t=="string"||!RRe(t)&&ORe(t)&&kRe(t)==MRe}var LRe=DRe;const yh=gn(LRe);var _Z={exports:{}},wn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N2=Symbol.for("react.element"),S2=Symbol.for("react.portal"),o1=Symbol.for("react.fragment"),l1=Symbol.for("react.strict_mode"),c1=Symbol.for("react.profiler"),u1=Symbol.for("react.provider"),d1=Symbol.for("react.context"),$Re=Symbol.for("react.server_context"),h1=Symbol.for("react.forward_ref"),f1=Symbol.for("react.suspense"),m1=Symbol.for("react.suspense_list"),p1=Symbol.for("react.memo"),g1=Symbol.for("react.lazy"),FRe=Symbol.for("react.offscreen"),jZ;jZ=Symbol.for("react.module.reference");function pa(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case N2:switch(t=t.type,t){case o1:case c1:case l1:case f1:case m1:return t;default:switch(t=t&&t.$$typeof,t){case $Re:case d1:case h1:case g1:case p1:case u1:return t;default:return e}}case S2:return e}}}wn.ContextConsumer=d1;wn.ContextProvider=u1;wn.Element=N2;wn.ForwardRef=h1;wn.Fragment=o1;wn.Lazy=g1;wn.Memo=p1;wn.Portal=S2;wn.Profiler=c1;wn.StrictMode=l1;wn.Suspense=f1;wn.SuspenseList=m1;wn.isAsyncMode=function(){return!1};wn.isConcurrentMode=function(){return!1};wn.isContextConsumer=function(t){return pa(t)===d1};wn.isContextProvider=function(t){return pa(t)===u1};wn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===N2};wn.isForwardRef=function(t){return pa(t)===h1};wn.isFragment=function(t){return pa(t)===o1};wn.isLazy=function(t){return pa(t)===g1};wn.isMemo=function(t){return pa(t)===p1};wn.isPortal=function(t){return pa(t)===S2};wn.isProfiler=function(t){return pa(t)===c1};wn.isStrictMode=function(t){return pa(t)===l1};wn.isSuspense=function(t){return pa(t)===f1};wn.isSuspenseList=function(t){return pa(t)===m1};wn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===o1||t===c1||t===l1||t===f1||t===m1||t===FRe||typeof t=="object"&&t!==null&&(t.$$typeof===g1||t.$$typeof===p1||t.$$typeof===u1||t.$$typeof===d1||t.$$typeof===h1||t.$$typeof===jZ||t.getModuleId!==void 0)};wn.typeOf=pa;_Z.exports=wn;var VRe=_Z.exports,BRe=zl,URe=ql,zRe="[object Number]";function qRe(t){return typeof t=="number"||URe(t)&&BRe(t)==zRe}var NZ=qRe;const WRe=gn(NZ);var HRe=NZ;function KRe(t){return HRe(t)&&t!=+t}var GRe=KRe;const Kp=gn(GRe);var Fs=function(e){return e===0?0:e>0?1:-1},_d=function(e){return yh(e)&&e.indexOf("%")===e.length-1},Ee=function(e){return WRe(e)&&!Kp(e)},YRe=function(e){return Ft(e)},Vr=function(e){return Ee(e)||yh(e)},QRe=0,Gp=function(e){var n=++QRe;return"".concat(e||"").concat(n)},Vs=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ee(e)&&!yh(e))return r;var a;if(_d(e)){var o=e.indexOf("%");a=n*parseFloat(e.slice(0,o))/100}else a=+e;return Kp(a)&&(a=r),s&&a>n&&(a=n),a},Sc=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},XRe=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},s=0;s<n;s++)if(!r[e[s]])r[e[s]]=!0;else return!0;return!1},ri=function(e,n){return Ee(e)&&Ee(n)?function(r){return e+r*(n-e)}:function(){return n}};function A_(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Ri(r,e))===n})}var ZRe=function(e,n){return Ee(e)&&Ee(n)?e-n:yh(e)&&yh(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function Zf(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function rP(t){"@babel/helpers - typeof";return rP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rP(t)}var JRe=["viewBox","children"],eOe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],gB=["points","pathLength"],qE={svg:JRe,polygon:gB,polyline:gB},E2=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],T_=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(N.isValidElement(e)&&(r=e.props),!zp(r))return null;var s={};return Object.keys(r).forEach(function(a){E2.includes(a)&&(s[a]=n||function(o){return r[a](r,o)})}),s},tOe=function(e,n,r){return function(s){return e(n,r,s),null}},vh=function(e,n,r){if(!zp(e)||rP(e)!=="object")return null;var s=null;return Object.keys(e).forEach(function(a){var o=e[a];E2.includes(a)&&typeof o=="function"&&(s||(s={}),s[a]=tOe(o,n,r))}),s},nOe=["children"],rOe=["children"];function yB(t,e){if(t==null)return{};var n=sOe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function sOe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function sP(t){"@babel/helpers - typeof";return sP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sP(t)}var vB={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},yl=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},xB=null,WE=null,A2=function t(e){if(e===xB&&Array.isArray(WE))return WE;var n=[];return N.Children.forEach(e,function(r){Ft(r)||(VRe.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),WE=n,xB=e,n};function ia(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(s){return yl(s)}):r=[yl(e)],A2(t).forEach(function(s){var a=Ri(s,"type.displayName")||Ri(s,"type.name");r.indexOf(a)!==-1&&n.push(s)}),n}function wi(t,e){var n=ia(t,e);return n&&n[0]}var bB=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,s=n.height;return!(!Ee(r)||r<=0||!Ee(s)||s<=0)},iOe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],aOe=function(e){return e&&e.type&&yh(e.type)&&iOe.indexOf(e.type)>=0},oOe=function(e){return e&&sP(e)==="object"&&"clipDot"in e},lOe=function(e,n,r,s){var a,o=(a=qE==null?void 0:qE[s])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!wt(e)&&(s&&o.includes(n)||eOe.includes(n))||r&&E2.includes(n)},ft=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var s=e;if(N.isValidElement(e)&&(s=e.props),!zp(s))return null;var a={};return Object.keys(s).forEach(function(o){var l;lOe((l=s)===null||l===void 0?void 0:l[o],o,n,r)&&(a[o]=s[o])}),a},iP=function t(e,n){if(e===n)return!0;var r=N.Children.count(e);if(r!==N.Children.count(n))return!1;if(r===0)return!0;if(r===1)return wB(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var s=0;s<r;s++){var a=e[s],o=n[s];if(Array.isArray(a)||Array.isArray(o)){if(!t(a,o))return!1}else if(!wB(a,o))return!1}return!0},wB=function(e,n){if(Ft(e)&&Ft(n))return!0;if(!Ft(e)&&!Ft(n)){var r=e.props||{},s=r.children,a=yB(r,nOe),o=n.props||{},l=o.children,c=yB(o,rOe);return s&&l?Zf(a,c)&&iP(s,l):!s&&!l?Zf(a,c):!1}return!1},_B=function(e,n){var r=[],s={};return A2(e).forEach(function(a,o){if(aOe(a))r.push(a);else if(a){var l=yl(a.type),c=n[l]||{},u=c.handler,d=c.once;if(u&&(!d||!s[l])){var h=u(a,l,o);r.push(h),s[l]=!0}}}),r},cOe=function(e){var n=e&&e.type;return n&&vB[n]?vB[n]:null},uOe=function(e,n){return A2(n).indexOf(e)},dOe=["children","width","height","viewBox","className","style","title","desc"];function aP(){return aP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aP.apply(this,arguments)}function hOe(t,e){if(t==null)return{};var n=fOe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fOe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function oP(t){var e=t.children,n=t.width,r=t.height,s=t.viewBox,a=t.className,o=t.style,l=t.title,c=t.desc,u=hOe(t,dOe),d=s||{width:n,height:r,x:0,y:0},h=$t("recharts-surface",a);return D.createElement("svg",aP({},ft(u,!0,"svg"),{className:h,width:n,height:r,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),D.createElement("title",null,l),D.createElement("desc",null,c),e)}var mOe=["children","className"];function lP(){return lP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lP.apply(this,arguments)}function pOe(t,e){if(t==null)return{};var n=gOe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function gOe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var tn=D.forwardRef(function(t,e){var n=t.children,r=t.className,s=pOe(t,mOe),a=$t("recharts-layer",r);return D.createElement("g",lP({className:a},ft(s,!0),{ref:e}),n)}),Ua=function(e,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a]};function yOe(t,e,n){var r=-1,s=t.length;e<0&&(e=-e>s?0:s+e),n=n>s?s:n,n<0&&(n+=s),s=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(s);++r<s;)a[r]=t[r+e];return a}var vOe=yOe,xOe=vOe;function bOe(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:xOe(t,e,n)}var wOe=bOe,_Oe="\\ud800-\\udfff",jOe="\\u0300-\\u036f",NOe="\\ufe20-\\ufe2f",SOe="\\u20d0-\\u20ff",EOe=jOe+NOe+SOe,AOe="\\ufe0e\\ufe0f",TOe="\\u200d",COe=RegExp("["+TOe+_Oe+EOe+AOe+"]");function POe(t){return COe.test(t)}var SZ=POe;function IOe(t){return t.split("")}var kOe=IOe,EZ="\\ud800-\\udfff",ROe="\\u0300-\\u036f",OOe="\\ufe20-\\ufe2f",MOe="\\u20d0-\\u20ff",DOe=ROe+OOe+MOe,LOe="\\ufe0e\\ufe0f",$Oe="["+EZ+"]",cP="["+DOe+"]",uP="\\ud83c[\\udffb-\\udfff]",FOe="(?:"+cP+"|"+uP+")",AZ="[^"+EZ+"]",TZ="(?:\\ud83c[\\udde6-\\uddff]){2}",CZ="[\\ud800-\\udbff][\\udc00-\\udfff]",VOe="\\u200d",PZ=FOe+"?",IZ="["+LOe+"]?",BOe="(?:"+VOe+"(?:"+[AZ,TZ,CZ].join("|")+")"+IZ+PZ+")*",UOe=IZ+PZ+BOe,zOe="(?:"+[AZ+cP+"?",cP,TZ,CZ,$Oe].join("|")+")",qOe=RegExp(uP+"(?="+uP+")|"+zOe+UOe,"g");function WOe(t){return t.match(qOe)||[]}var HOe=WOe,KOe=kOe,GOe=SZ,YOe=HOe;function QOe(t){return GOe(t)?YOe(t):KOe(t)}var XOe=QOe,ZOe=wOe,JOe=SZ,e2e=XOe,t2e=xZ;function n2e(t){return function(e){e=t2e(e);var n=JOe(e)?e2e(e):void 0,r=n?n[0]:e.charAt(0),s=n?ZOe(n,1).join(""):e.slice(1);return r[t]()+s}}var r2e=n2e,s2e=r2e,i2e=s2e("toUpperCase"),a2e=i2e;const y1=gn(a2e);function Pn(t){return function(){return t}}const kZ=Math.cos,C_=Math.sin,no=Math.sqrt,P_=Math.PI,v1=2*P_,dP=Math.PI,hP=2*dP,ud=1e-6,o2e=hP-ud;function RZ(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function l2e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return RZ;const n=10**e;return function(r){this._+=r[0];for(let s=1,a=r.length;s<a;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}class c2e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?RZ:l2e(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,s){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+s}`}bezierCurveTo(e,n,r,s,a,o){this._append`C${+e},${+n},${+r},${+s},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,r,s,a){if(e=+e,n=+n,r=+r,s=+s,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,c=r-e,u=s-n,d=o-e,h=l-n,f=d*d+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>ud)if(!(Math.abs(h*c-u*d)>ud)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let m=r-o,v=s-l,g=c*c+u*u,y=m*m+v*v,w=Math.sqrt(g),b=Math.sqrt(f),E=a*Math.tan((dP-Math.acos((g+f-y)/(2*w*b)))/2),T=E/b,x=E/w;Math.abs(T-1)>ud&&this._append`L${e+T*d},${n+T*h}`,this._append`A${a},${a},0,0,${+(h*m>d*v)},${this._x1=e+x*c},${this._y1=n+x*u}`}}arc(e,n,r,s,a,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(s),c=r*Math.sin(s),u=e+l,d=n+c,h=1^o,f=o?s-a:a-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>ud||Math.abs(this._y1-d)>ud)&&this._append`L${u},${d}`,r&&(f<0&&(f=f%hP+hP),f>o2e?this._append`A${r},${r},0,1,${h},${e-l},${n-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=d}`:f>ud&&this._append`A${r},${r},0,${+(f>=dP)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+s}h${-r}Z`}toString(){return this._}}function T2(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new c2e(e)}function C2(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function OZ(t){this._context=t}OZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function x1(t){return new OZ(t)}function MZ(t){return t[0]}function DZ(t){return t[1]}function LZ(t,e){var n=Pn(!0),r=null,s=x1,a=null,o=T2(l);t=typeof t=="function"?t:t===void 0?MZ:Pn(t),e=typeof e=="function"?e:e===void 0?DZ:Pn(e);function l(c){var u,d=(c=C2(c)).length,h,f=!1,m;for(r==null&&(a=s(m=o())),u=0;u<=d;++u)!(u<d&&n(h=c[u],u,c))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(h,u,c),+e(h,u,c));if(m)return a=null,m+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Pn(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Pn(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Pn(!!c),l):n},l.curve=function(c){return arguments.length?(s=c,r!=null&&(a=s(r)),l):s},l.context=function(c){return arguments.length?(c==null?r=a=null:a=s(r=c),l):r},l}function a0(t,e,n){var r=null,s=Pn(!0),a=null,o=x1,l=null,c=T2(u);t=typeof t=="function"?t:t===void 0?MZ:Pn(+t),e=typeof e=="function"?e:Pn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?DZ:Pn(+n);function u(h){var f,m,v,g=(h=C2(h)).length,y,w=!1,b,E=new Array(g),T=new Array(g);for(a==null&&(l=o(b=c())),f=0;f<=g;++f){if(!(f<g&&s(y=h[f],f,h))===w)if(w=!w)m=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=f-1;v>=m;--v)l.point(E[v],T[v]);l.lineEnd(),l.areaEnd()}w&&(E[f]=+t(y,f,h),T[f]=+e(y,f,h),l.point(r?+r(y,f,h):E[f],n?+n(y,f,h):T[f]))}if(b)return l=null,b+""||null}function d(){return LZ().defined(s).curve(o).context(a)}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:Pn(+h),r=null,u):t},u.x0=function(h){return arguments.length?(t=typeof h=="function"?h:Pn(+h),u):t},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Pn(+h),u):r},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:Pn(+h),n=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:Pn(+h),u):e},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Pn(+h),u):n},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(n)},u.lineX1=function(){return d().x(r).y(e)},u.defined=function(h){return arguments.length?(s=typeof h=="function"?h:Pn(!!h),u):s},u.curve=function(h){return arguments.length?(o=h,a!=null&&(l=o(a)),u):o},u.context=function(h){return arguments.length?(h==null?a=l=null:l=o(a=h),u):a},u}class $Z{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function u2e(t){return new $Z(t,!0)}function d2e(t){return new $Z(t,!1)}const P2={draw(t,e){const n=no(e/P_);t.moveTo(n,0),t.arc(0,0,n,0,v1)}},h2e={draw(t,e){const n=no(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},FZ=no(1/3),f2e=FZ*2,m2e={draw(t,e){const n=no(e/f2e),r=n*FZ;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},p2e={draw(t,e){const n=no(e),r=-n/2;t.rect(r,r,n,n)}},g2e=.8908130915292852,VZ=C_(P_/10)/C_(7*P_/10),y2e=C_(v1/10)*VZ,v2e=-kZ(v1/10)*VZ,x2e={draw(t,e){const n=no(e*g2e),r=y2e*n,s=v2e*n;t.moveTo(0,-n),t.lineTo(r,s);for(let a=1;a<5;++a){const o=v1*a/5,l=kZ(o),c=C_(o);t.lineTo(c*n,-l*n),t.lineTo(l*r-c*s,c*r+l*s)}t.closePath()}},HE=no(3),b2e={draw(t,e){const n=-no(e/(HE*3));t.moveTo(0,n*2),t.lineTo(-HE*n,-n),t.lineTo(HE*n,-n),t.closePath()}},Vi=-.5,Bi=no(3)/2,fP=1/no(12),w2e=(fP/2+1)*3,_2e={draw(t,e){const n=no(e/w2e),r=n/2,s=n*fP,a=r,o=n*fP+n,l=-a,c=o;t.moveTo(r,s),t.lineTo(a,o),t.lineTo(l,c),t.lineTo(Vi*r-Bi*s,Bi*r+Vi*s),t.lineTo(Vi*a-Bi*o,Bi*a+Vi*o),t.lineTo(Vi*l-Bi*c,Bi*l+Vi*c),t.lineTo(Vi*r+Bi*s,Vi*s-Bi*r),t.lineTo(Vi*a+Bi*o,Vi*o-Bi*a),t.lineTo(Vi*l+Bi*c,Vi*c-Bi*l),t.closePath()}};function j2e(t,e){let n=null,r=T2(s);t=typeof t=="function"?t:Pn(t||P2),e=typeof e=="function"?e:Pn(e===void 0?64:+e);function s(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return s.type=function(a){return arguments.length?(t=typeof a=="function"?a:Pn(a),s):t},s.size=function(a){return arguments.length?(e=typeof a=="function"?a:Pn(+a),s):e},s.context=function(a){return arguments.length?(n=a??null,s):n},s}function I_(){}function k_(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function BZ(t){this._context=t}BZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:k_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:k_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function N2e(t){return new BZ(t)}function UZ(t){this._context=t}UZ.prototype={areaStart:I_,areaEnd:I_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:k_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function S2e(t){return new UZ(t)}function zZ(t){this._context=t}zZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:k_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function E2e(t){return new zZ(t)}function qZ(t){this._context=t}qZ.prototype={areaStart:I_,areaEnd:I_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function A2e(t){return new qZ(t)}function jB(t){return t<0?-1:1}function NB(t,e,n){var r=t._x1-t._x0,s=e-t._x1,a=(t._y1-t._y0)/(r||s<0&&-0),o=(n-t._y1)/(s||r<0&&-0),l=(a*s+o*r)/(r+s);return(jB(a)+jB(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function SB(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function KE(t,e,n){var r=t._x0,s=t._y0,a=t._x1,o=t._y1,l=(a-r)/3;t._context.bezierCurveTo(r+l,s+l*e,a-l,o-l*n,a,o)}function R_(t){this._context=t}R_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:KE(this,this._t0,SB(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,KE(this,SB(this,n=NB(this,t,e)),n);break;default:KE(this,this._t0,n=NB(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function WZ(t){this._context=new HZ(t)}(WZ.prototype=Object.create(R_.prototype)).point=function(t,e){R_.prototype.point.call(this,e,t)};function HZ(t){this._context=t}HZ.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,s,a){this._context.bezierCurveTo(e,t,r,n,a,s)}};function T2e(t){return new R_(t)}function C2e(t){return new WZ(t)}function KZ(t){this._context=t}KZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=EB(t),s=EB(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],s[0][a],r[1][a],s[1][a],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function EB(t){var e,n=t.length-1,r,s=new Array(n),a=new Array(n),o=new Array(n);for(s[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)s[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(s[n-1]=2,a[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=s[e]/a[e-1],a[e]-=r,o[e]-=r*o[e-1];for(s[n-1]=o[n-1]/a[n-1],e=n-2;e>=0;--e)s[e]=(o[e]-s[e+1])/a[e];for(a[n-1]=(t[n]+s[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-s[e+1];return[s,a]}function P2e(t){return new KZ(t)}function b1(t,e){this._context=t,this._t=e}b1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function I2e(t){return new b1(t,.5)}function k2e(t){return new b1(t,0)}function R2e(t){return new b1(t,1)}function Um(t,e){if((o=t.length)>1)for(var n=1,r,s,a=t[e[0]],o,l=a.length;n<o;++n)for(s=a,a=t[e[n]],r=0;r<l;++r)a[r][1]+=a[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function mP(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function O2e(t,e){return t[e]}function M2e(t){const e=[];return e.key=t,e}function D2e(){var t=Pn([]),e=mP,n=Um,r=O2e;function s(a){var o=Array.from(t.apply(this,arguments),M2e),l,c=o.length,u=-1,d;for(const h of a)for(l=0,++u;l<c;++l)(o[l][u]=[0,+r(h,o[l].key,u,a)]).data=h;for(l=0,d=C2(e(o));l<c;++l)o[d[l]].index=l;return n(o,d),o}return s.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Pn(Array.from(a)),s):t},s.value=function(a){return arguments.length?(r=typeof a=="function"?a:Pn(+a),s):r},s.order=function(a){return arguments.length?(e=a==null?mP:typeof a=="function"?a:Pn(Array.from(a)),s):e},s.offset=function(a){return arguments.length?(n=a??Um,s):n},s}function L2e(t,e){if((r=t.length)>0){for(var n,r,s=0,a=t[0].length,o;s<a;++s){for(o=n=0;n<r;++n)o+=t[n][s][1]||0;if(o)for(n=0;n<r;++n)t[n][s][1]/=o}Um(t,e)}}function $2e(t,e){if((s=t.length)>0){for(var n=0,r=t[e[0]],s,a=r.length;n<a;++n){for(var o=0,l=0;o<s;++o)l+=t[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}Um(t,e)}}function F2e(t,e){if(!(!((o=t.length)>0)||!((a=(s=t[e[0]]).length)>0))){for(var n=0,r=1,s,a,o;r<a;++r){for(var l=0,c=0,u=0;l<o;++l){for(var d=t[e[l]],h=d[r][1]||0,f=d[r-1][1]||0,m=(h-f)/2,v=0;v<l;++v){var g=t[e[v]],y=g[r][1]||0,w=g[r-1][1]||0;m+=y-w}c+=h,u+=m*h}s[r-1][1]+=s[r-1][0]=n,c&&(n-=u/c)}s[r-1][1]+=s[r-1][0]=n,Um(t,e)}}function Tv(t){"@babel/helpers - typeof";return Tv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tv(t)}var V2e=["type","size","sizeType"];function pP(){return pP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pP.apply(this,arguments)}function AB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function TB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AB(Object(n),!0).forEach(function(r){B2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function B2e(t,e,n){return e=U2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U2e(t){var e=z2e(t,"string");return Tv(e)=="symbol"?e:e+""}function z2e(t,e){if(Tv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Tv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function q2e(t,e){if(t==null)return{};var n=W2e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function W2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var GZ={symbolCircle:P2,symbolCross:h2e,symbolDiamond:m2e,symbolSquare:p2e,symbolStar:x2e,symbolTriangle:b2e,symbolWye:_2e},H2e=Math.PI/180,K2e=function(e){var n="symbol".concat(y1(e));return GZ[n]||P2},G2e=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*H2e;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Y2e=function(e,n){GZ["symbol".concat(y1(e))]=n},I2=function(e){var n=e.type,r=n===void 0?"circle":n,s=e.size,a=s===void 0?64:s,o=e.sizeType,l=o===void 0?"area":o,c=q2e(e,V2e),u=TB(TB({},c),{},{type:r,size:a,sizeType:l}),d=function(){var y=K2e(r),w=j2e().type(y).size(G2e(a,l,r));return w()},h=u.className,f=u.cx,m=u.cy,v=ft(u,!0);return f===+f&&m===+m&&a===+a?D.createElement("path",pP({},v,{className:$t("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(m,")"),d:d()})):null};I2.registerSymbol=Y2e;function zm(t){"@babel/helpers - typeof";return zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zm(t)}function gP(){return gP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gP.apply(this,arguments)}function CB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Q2e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CB(Object(n),!0).forEach(function(r){Cv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function X2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z2e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,QZ(r.key),r)}}function J2e(t,e,n){return e&&Z2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function eMe(t,e,n){return e=O_(e),tMe(t,YZ()?Reflect.construct(e,n||[],O_(t).constructor):e.apply(t,n))}function tMe(t,e){if(e&&(zm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nMe(t)}function nMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function YZ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YZ=function(){return!!t})()}function O_(t){return O_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},O_(t)}function rMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yP(t,e)}function yP(t,e){return yP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},yP(t,e)}function Cv(t,e,n){return e=QZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QZ(t){var e=sMe(t,"string");return zm(e)=="symbol"?e:e+""}function sMe(t,e){if(zm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(zm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ui=32,k2=function(t){function e(){return X2e(this,e),eMe(this,e,arguments)}return rMe(e,t),J2e(e,[{key:"renderIcon",value:function(r){var s=this.props.inactiveColor,a=Ui/2,o=Ui/6,l=Ui/3,c=r.inactive?s:r.color;if(r.type==="plainline")return D.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:Ui,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return D.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(Ui,"M").concat(2*l,",").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return D.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Ui/8,"h").concat(Ui,"v").concat(Ui*3/4,"h").concat(-Ui,"z"),className:"recharts-legend-icon"});if(D.isValidElement(r.legendIcon)){var u=Q2e({},r);return delete u.legendIcon,D.cloneElement(r.legendIcon,u)}return D.createElement(I2,{fill:c,cx:a,cy:a,size:Ui,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,s=this.props,a=s.payload,o=s.iconSize,l=s.layout,c=s.formatter,u=s.inactiveColor,d={x:0,y:0,width:Ui,height:Ui},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(m,v){var g=m.formatter||c,y=$t(Cv(Cv({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",m.inactive));if(m.type==="none")return null;var w=wt(m.value)?null:m.value;Ua(!wt(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=m.inactive?u:m.color;return D.createElement("li",gP({className:y,style:h,key:"legend-item-".concat(v)},vh(r.props,m,v)),D.createElement(oP,{width:o,height:o,viewBox:d,style:f},r.renderIcon(m)),D.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},g?g(w,m,v):w))})}},{key:"render",value:function(){var r=this.props,s=r.payload,a=r.layout,o=r.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:a==="horizontal"?o:"left"};return D.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(N.PureComponent);Cv(k2,"displayName","Legend");Cv(k2,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var iMe=s1;function aMe(){this.__data__=new iMe,this.size=0}var oMe=aMe;function lMe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var cMe=lMe;function uMe(t){return this.__data__.get(t)}var dMe=uMe;function hMe(t){return this.__data__.has(t)}var fMe=hMe,mMe=s1,pMe=x2,gMe=b2,yMe=200;function vMe(t,e){var n=this.__data__;if(n instanceof mMe){var r=n.__data__;if(!pMe||r.length<yMe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new gMe(r)}return n.set(t,e),this.size=n.size,this}var xMe=vMe,bMe=s1,wMe=oMe,_Me=cMe,jMe=dMe,NMe=fMe,SMe=xMe;function Yp(t){var e=this.__data__=new bMe(t);this.size=e.size}Yp.prototype.clear=wMe;Yp.prototype.delete=_Me;Yp.prototype.get=jMe;Yp.prototype.has=NMe;Yp.prototype.set=SMe;var XZ=Yp,EMe="__lodash_hash_undefined__";function AMe(t){return this.__data__.set(t,EMe),this}var TMe=AMe;function CMe(t){return this.__data__.has(t)}var PMe=CMe,IMe=b2,kMe=TMe,RMe=PMe;function M_(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new IMe;++e<n;)this.add(t[e])}M_.prototype.add=M_.prototype.push=kMe;M_.prototype.has=RMe;var ZZ=M_;function OMe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var JZ=OMe;function MMe(t,e){return t.has(e)}var eJ=MMe,DMe=ZZ,LMe=JZ,$Me=eJ,FMe=1,VMe=2;function BMe(t,e,n,r,s,a){var o=n&FMe,l=t.length,c=e.length;if(l!=c&&!(o&&c>l))return!1;var u=a.get(t),d=a.get(e);if(u&&d)return u==e&&d==t;var h=-1,f=!0,m=n&VMe?new DMe:void 0;for(a.set(t,e),a.set(e,t);++h<l;){var v=t[h],g=e[h];if(r)var y=o?r(g,v,h,e,t,a):r(v,g,h,t,e,a);if(y!==void 0){if(y)continue;f=!1;break}if(m){if(!LMe(e,function(w,b){if(!$Me(m,b)&&(v===w||s(v,w,n,r,a)))return m.push(b)})){f=!1;break}}else if(!(v===g||s(v,g,n,r,a))){f=!1;break}}return a.delete(t),a.delete(e),f}var tJ=BMe,UMe=Go,zMe=UMe.Uint8Array,qMe=zMe;function WMe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,s){n[++e]=[s,r]}),n}var HMe=WMe;function KMe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var R2=KMe,PB=nb,IB=qMe,GMe=v2,YMe=tJ,QMe=HMe,XMe=R2,ZMe=1,JMe=2,eDe="[object Boolean]",tDe="[object Date]",nDe="[object Error]",rDe="[object Map]",sDe="[object Number]",iDe="[object RegExp]",aDe="[object Set]",oDe="[object String]",lDe="[object Symbol]",cDe="[object ArrayBuffer]",uDe="[object DataView]",kB=PB?PB.prototype:void 0,GE=kB?kB.valueOf:void 0;function dDe(t,e,n,r,s,a,o){switch(n){case uDe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case cDe:return!(t.byteLength!=e.byteLength||!a(new IB(t),new IB(e)));case eDe:case tDe:case sDe:return GMe(+t,+e);case nDe:return t.name==e.name&&t.message==e.message;case iDe:case oDe:return t==e+"";case rDe:var l=QMe;case aDe:var c=r&ZMe;if(l||(l=XMe),t.size!=e.size&&!c)return!1;var u=o.get(t);if(u)return u==e;r|=JMe,o.set(t,e);var d=YMe(l(t),l(e),r,s,a,o);return o.delete(t),d;case lDe:if(GE)return GE.call(t)==GE.call(e)}return!1}var hDe=dDe;function fDe(t,e){for(var n=-1,r=e.length,s=t.length;++n<r;)t[s+n]=e[n];return t}var nJ=fDe,mDe=nJ,pDe=mi;function gDe(t,e,n){var r=e(t);return pDe(t)?r:mDe(r,n(t))}var yDe=gDe;function vDe(t,e){for(var n=-1,r=t==null?0:t.length,s=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[s++]=o)}return a}var xDe=vDe;function bDe(){return[]}var wDe=bDe,_De=xDe,jDe=wDe,NDe=Object.prototype,SDe=NDe.propertyIsEnumerable,RB=Object.getOwnPropertySymbols,EDe=RB?function(t){return t==null?[]:(t=Object(t),_De(RB(t),function(e){return SDe.call(t,e)}))}:jDe,ADe=EDe;function TDe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var CDe=TDe,PDe=zl,IDe=ql,kDe="[object Arguments]";function RDe(t){return IDe(t)&&PDe(t)==kDe}var ODe=RDe,OB=ODe,MDe=ql,rJ=Object.prototype,DDe=rJ.hasOwnProperty,LDe=rJ.propertyIsEnumerable,$De=OB(function(){return arguments}())?OB:function(t){return MDe(t)&&DDe.call(t,"callee")&&!LDe.call(t,"callee")},O2=$De,D_={exports:{}};function FDe(){return!1}var VDe=FDe;D_.exports;(function(t,e){var n=Go,r=VDe,s=e&&!e.nodeType&&e,a=s&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===s,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;t.exports=u})(D_,D_.exports);var sJ=D_.exports,BDe=9007199254740991,UDe=/^(?:0|[1-9]\d*)$/;function zDe(t,e){var n=typeof t;return e=e??BDe,!!e&&(n=="number"||n!="symbol"&&UDe.test(t))&&t>-1&&t%1==0&&t<e}var M2=zDe,qDe=9007199254740991;function WDe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=qDe}var D2=WDe,HDe=zl,KDe=D2,GDe=ql,YDe="[object Arguments]",QDe="[object Array]",XDe="[object Boolean]",ZDe="[object Date]",JDe="[object Error]",eLe="[object Function]",tLe="[object Map]",nLe="[object Number]",rLe="[object Object]",sLe="[object RegExp]",iLe="[object Set]",aLe="[object String]",oLe="[object WeakMap]",lLe="[object ArrayBuffer]",cLe="[object DataView]",uLe="[object Float32Array]",dLe="[object Float64Array]",hLe="[object Int8Array]",fLe="[object Int16Array]",mLe="[object Int32Array]",pLe="[object Uint8Array]",gLe="[object Uint8ClampedArray]",yLe="[object Uint16Array]",vLe="[object Uint32Array]",Fn={};Fn[uLe]=Fn[dLe]=Fn[hLe]=Fn[fLe]=Fn[mLe]=Fn[pLe]=Fn[gLe]=Fn[yLe]=Fn[vLe]=!0;Fn[YDe]=Fn[QDe]=Fn[lLe]=Fn[XDe]=Fn[cLe]=Fn[ZDe]=Fn[JDe]=Fn[eLe]=Fn[tLe]=Fn[nLe]=Fn[rLe]=Fn[sLe]=Fn[iLe]=Fn[aLe]=Fn[oLe]=!1;function xLe(t){return GDe(t)&&KDe(t.length)&&!!Fn[HDe(t)]}var bLe=xLe;function wLe(t){return function(e){return t(e)}}var iJ=wLe,L_={exports:{}};L_.exports;(function(t,e){var n=fZ,r=e&&!e.nodeType&&e,s=r&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===r,o=a&&n.process,l=function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l})(L_,L_.exports);var _Le=L_.exports,jLe=bLe,NLe=iJ,MB=_Le,DB=MB&&MB.isTypedArray,SLe=DB?NLe(DB):jLe,aJ=SLe,ELe=CDe,ALe=O2,TLe=mi,CLe=sJ,PLe=M2,ILe=aJ,kLe=Object.prototype,RLe=kLe.hasOwnProperty;function OLe(t,e){var n=TLe(t),r=!n&&ALe(t),s=!n&&!r&&CLe(t),a=!n&&!r&&!s&&ILe(t),o=n||r||s||a,l=o?ELe(t.length,String):[],c=l.length;for(var u in t)(e||RLe.call(t,u))&&!(o&&(u=="length"||s&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||PLe(u,c)))&&l.push(u);return l}var MLe=OLe,DLe=Object.prototype;function LLe(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||DLe;return t===n}var $Le=LLe;function FLe(t,e){return function(n){return t(e(n))}}var oJ=FLe,VLe=oJ,BLe=VLe(Object.keys,Object),ULe=BLe,zLe=$Le,qLe=ULe,WLe=Object.prototype,HLe=WLe.hasOwnProperty;function KLe(t){if(!zLe(t))return qLe(t);var e=[];for(var n in Object(t))HLe.call(t,n)&&n!="constructor"&&e.push(n);return e}var GLe=KLe,YLe=y2,QLe=D2;function XLe(t){return t!=null&&QLe(t.length)&&!YLe(t)}var rb=XLe,ZLe=MLe,JLe=GLe,e4e=rb;function t4e(t){return e4e(t)?ZLe(t):JLe(t)}var w1=t4e,n4e=yDe,r4e=ADe,s4e=w1;function i4e(t){return n4e(t,s4e,r4e)}var a4e=i4e,LB=a4e,o4e=1,l4e=Object.prototype,c4e=l4e.hasOwnProperty;function u4e(t,e,n,r,s,a){var o=n&o4e,l=LB(t),c=l.length,u=LB(e),d=u.length;if(c!=d&&!o)return!1;for(var h=c;h--;){var f=l[h];if(!(o?f in e:c4e.call(e,f)))return!1}var m=a.get(t),v=a.get(e);if(m&&v)return m==e&&v==t;var g=!0;a.set(t,e),a.set(e,t);for(var y=o;++h<c;){f=l[h];var w=t[f],b=e[f];if(r)var E=o?r(b,w,f,e,t,a):r(w,b,f,t,e,a);if(!(E===void 0?w===b||s(w,b,n,r,a):E)){g=!1;break}y||(y=f=="constructor")}if(g&&!y){var T=t.constructor,x=e.constructor;T!=x&&"constructor"in t&&"constructor"in e&&!(typeof T=="function"&&T instanceof T&&typeof x=="function"&&x instanceof x)&&(g=!1)}return a.delete(t),a.delete(e),g}var d4e=u4e,h4e=Mh,f4e=Go,m4e=h4e(f4e,"DataView"),p4e=m4e,g4e=Mh,y4e=Go,v4e=g4e(y4e,"Promise"),x4e=v4e,b4e=Mh,w4e=Go,_4e=b4e(w4e,"Set"),lJ=_4e,j4e=Mh,N4e=Go,S4e=j4e(N4e,"WeakMap"),E4e=S4e,vP=p4e,xP=x2,bP=x4e,wP=lJ,_P=E4e,cJ=zl,Qp=pZ,$B="[object Map]",A4e="[object Object]",FB="[object Promise]",VB="[object Set]",BB="[object WeakMap]",UB="[object DataView]",T4e=Qp(vP),C4e=Qp(xP),P4e=Qp(bP),I4e=Qp(wP),k4e=Qp(_P),dd=cJ;(vP&&dd(new vP(new ArrayBuffer(1)))!=UB||xP&&dd(new xP)!=$B||bP&&dd(bP.resolve())!=FB||wP&&dd(new wP)!=VB||_P&&dd(new _P)!=BB)&&(dd=function(t){var e=cJ(t),n=e==A4e?t.constructor:void 0,r=n?Qp(n):"";if(r)switch(r){case T4e:return UB;case C4e:return $B;case P4e:return FB;case I4e:return VB;case k4e:return BB}return e});var R4e=dd,YE=XZ,O4e=tJ,M4e=hDe,D4e=d4e,zB=R4e,qB=mi,WB=sJ,L4e=aJ,$4e=1,HB="[object Arguments]",KB="[object Array]",o0="[object Object]",F4e=Object.prototype,GB=F4e.hasOwnProperty;function V4e(t,e,n,r,s,a){var o=qB(t),l=qB(e),c=o?KB:zB(t),u=l?KB:zB(e);c=c==HB?o0:c,u=u==HB?o0:u;var d=c==o0,h=u==o0,f=c==u;if(f&&WB(t)){if(!WB(e))return!1;o=!0,d=!1}if(f&&!d)return a||(a=new YE),o||L4e(t)?O4e(t,e,n,r,s,a):M4e(t,e,c,n,r,s,a);if(!(n&$4e)){var m=d&&GB.call(t,"__wrapped__"),v=h&&GB.call(e,"__wrapped__");if(m||v){var g=m?t.value():t,y=v?e.value():e;return a||(a=new YE),s(g,y,n,r,a)}}return f?(a||(a=new YE),D4e(t,e,n,r,s,a)):!1}var B4e=V4e,U4e=B4e,YB=ql;function uJ(t,e,n,r,s){return t===e?!0:t==null||e==null||!YB(t)&&!YB(e)?t!==t&&e!==e:U4e(t,e,n,r,uJ,s)}var L2=uJ,z4e=XZ,q4e=L2,W4e=1,H4e=2;function K4e(t,e,n,r){var s=n.length,a=s,o=!r;if(t==null)return!a;for(t=Object(t);s--;){var l=n[s];if(o&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++s<a;){l=n[s];var c=l[0],u=t[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in t))return!1}else{var h=new z4e;if(r)var f=r(u,d,c,t,e,h);if(!(f===void 0?q4e(d,u,W4e|H4e,r,h):f))return!1}}return!0}var G4e=K4e,Y4e=qu;function Q4e(t){return t===t&&!Y4e(t)}var dJ=Q4e,X4e=dJ,Z4e=w1;function J4e(t){for(var e=Z4e(t),n=e.length;n--;){var r=e[n],s=t[r];e[n]=[r,s,X4e(s)]}return e}var e$e=J4e;function t$e(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var hJ=t$e,n$e=G4e,r$e=e$e,s$e=hJ;function i$e(t){var e=r$e(t);return e.length==1&&e[0][2]?s$e(e[0][0],e[0][1]):function(n){return n===t||n$e(n,t,e)}}var a$e=i$e;function o$e(t,e){return t!=null&&e in Object(t)}var l$e=o$e,c$e=bZ,u$e=O2,d$e=mi,h$e=M2,f$e=D2,m$e=a1;function p$e(t,e,n){e=c$e(e,t);for(var r=-1,s=e.length,a=!1;++r<s;){var o=m$e(e[r]);if(!(a=t!=null&&n(t,o)))break;t=t[o]}return a||++r!=s?a:(s=t==null?0:t.length,!!s&&f$e(s)&&h$e(o,s)&&(d$e(t)||u$e(t)))}var g$e=p$e,y$e=l$e,v$e=g$e;function x$e(t,e){return t!=null&&v$e(t,e,y$e)}var b$e=x$e,w$e=L2,_$e=wZ,j$e=b$e,N$e=g2,S$e=dJ,E$e=hJ,A$e=a1,T$e=1,C$e=2;function P$e(t,e){return N$e(t)&&S$e(e)?E$e(A$e(t),e):function(n){var r=_$e(n,t);return r===void 0&&r===e?j$e(n,t):w$e(e,r,T$e|C$e)}}var I$e=P$e;function k$e(t){return t}var Xp=k$e;function R$e(t){return function(e){return e==null?void 0:e[t]}}var O$e=R$e,M$e=j2;function D$e(t){return function(e){return M$e(e,t)}}var L$e=D$e,$$e=O$e,F$e=L$e,V$e=g2,B$e=a1;function U$e(t){return V$e(t)?$$e(B$e(t)):F$e(t)}var z$e=U$e,q$e=a$e,W$e=I$e,H$e=Xp,K$e=mi,G$e=z$e;function Y$e(t){return typeof t=="function"?t:t==null?H$e:typeof t=="object"?K$e(t)?W$e(t[0],t[1]):q$e(t):G$e(t)}var Yo=Y$e;function Q$e(t,e,n,r){for(var s=t.length,a=n+(r?1:-1);r?a--:++a<s;)if(e(t[a],a,t))return a;return-1}var fJ=Q$e;function X$e(t){return t!==t}var Z$e=X$e;function J$e(t,e,n){for(var r=n-1,s=t.length;++r<s;)if(t[r]===e)return r;return-1}var eFe=J$e,tFe=fJ,nFe=Z$e,rFe=eFe;function sFe(t,e,n){return e===e?rFe(t,e,n):tFe(t,nFe,n)}var iFe=sFe,aFe=iFe;function oFe(t,e){var n=t==null?0:t.length;return!!n&&aFe(t,e,0)>-1}var lFe=oFe;function cFe(t,e,n){for(var r=-1,s=t==null?0:t.length;++r<s;)if(n(e,t[r]))return!0;return!1}var uFe=cFe;function dFe(){}var hFe=dFe,QE=lJ,fFe=hFe,mFe=R2,pFe=1/0,gFe=QE&&1/mFe(new QE([,-0]))[1]==pFe?function(t){return new QE(t)}:fFe,yFe=gFe,vFe=ZZ,xFe=lFe,bFe=uFe,wFe=eJ,_Fe=yFe,jFe=R2,NFe=200;function SFe(t,e,n){var r=-1,s=xFe,a=t.length,o=!0,l=[],c=l;if(n)o=!1,s=bFe;else if(a>=NFe){var u=e?null:_Fe(t);if(u)return jFe(u);o=!1,s=wFe,c=new vFe}else c=e?[]:l;e:for(;++r<a;){var d=t[r],h=e?e(d):d;if(d=n||d!==0?d:0,o&&h===h){for(var f=c.length;f--;)if(c[f]===h)continue e;e&&c.push(h),l.push(d)}else s(c,h,n)||(c!==l&&c.push(h),l.push(d))}return l}var EFe=SFe,AFe=Yo,TFe=EFe;function CFe(t,e){return t&&t.length?TFe(t,AFe(e)):[]}var PFe=CFe;const QB=gn(PFe);function mJ(t,e,n){return e===!0?QB(t,n):wt(e)?QB(t,e):t}function qm(t){"@babel/helpers - typeof";return qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qm(t)}var IFe=["ref"];function XB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Jo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XB(Object(n),!0).forEach(function(r){_1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kFe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gJ(r.key),r)}}function RFe(t,e,n){return e&&ZB(t.prototype,e),n&&ZB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function OFe(t,e,n){return e=$_(e),MFe(t,pJ()?Reflect.construct(e,n||[],$_(t).constructor):e.apply(t,n))}function MFe(t,e){if(e&&(qm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DFe(t)}function DFe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pJ=function(){return!!t})()}function $_(t){return $_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$_(t)}function LFe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jP(t,e)}function jP(t,e){return jP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},jP(t,e)}function _1(t,e,n){return e=gJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gJ(t){var e=$Fe(t,"string");return qm(e)=="symbol"?e:e+""}function $Fe(t,e){if(qm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FFe(t,e){if(t==null)return{};var n=VFe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function VFe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function BFe(t){return t.value}function UFe(t,e){if(D.isValidElement(t))return D.cloneElement(t,e);if(typeof t=="function")return D.createElement(t,e);e.ref;var n=FFe(e,IFe);return D.createElement(k2,n)}var JB=1,Jf=function(t){function e(){var n;kFe(this,e);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=OFe(this,e,[].concat(s)),_1(n,"lastBoundingBox",{width:-1,height:-1}),n}return LFe(e,t),RFe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>JB||Math.abs(s.height-this.lastBoundingBox.height)>JB)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,r&&r(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Jo({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var s=this.props,a=s.layout,o=s.align,l=s.verticalAlign,c=s.margin,u=s.chartWidth,d=s.chartHeight,h,f;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&a==="vertical"){var m=this.getBBoxSnapshot();h={left:((u||0)-m.width)/2}}else h=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var v=this.getBBoxSnapshot();f={top:((d||0)-v.height)/2}}else f=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Jo(Jo({},h),f)}},{key:"render",value:function(){var r=this,s=this.props,a=s.content,o=s.width,l=s.height,c=s.wrapperStyle,u=s.payloadUniqBy,d=s.payload,h=Jo(Jo({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return D.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(m){r.wrapperNode=m}},UFe(a,Jo(Jo({},this.props),{},{payload:mJ(d,u,BFe)})))}}],[{key:"getWithHeight",value:function(r,s){var a=Jo(Jo({},this.defaultProps),r.props),o=a.layout;return o==="vertical"&&Ee(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||s}:null}}])}(N.PureComponent);_1(Jf,"displayName","Legend");_1(Jf,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var e3=nb,zFe=O2,qFe=mi,t3=e3?e3.isConcatSpreadable:void 0;function WFe(t){return qFe(t)||zFe(t)||!!(t3&&t&&t[t3])}var HFe=WFe,KFe=nJ,GFe=HFe;function yJ(t,e,n,r,s){var a=-1,o=t.length;for(n||(n=GFe),s||(s=[]);++a<o;){var l=t[a];e>0&&n(l)?e>1?yJ(l,e-1,n,r,s):KFe(s,l):r||(s[s.length]=l)}return s}var vJ=yJ;function YFe(t){return function(e,n,r){for(var s=-1,a=Object(e),o=r(e),l=o.length;l--;){var c=o[t?l:++s];if(n(a[c],c,a)===!1)break}return e}}var QFe=YFe,XFe=QFe,ZFe=XFe(),JFe=ZFe,eVe=JFe,tVe=w1;function nVe(t,e){return t&&eVe(t,e,tVe)}var xJ=nVe,rVe=rb;function sVe(t,e){return function(n,r){if(n==null)return n;if(!rVe(n))return t(n,r);for(var s=n.length,a=e?s:-1,o=Object(n);(e?a--:++a<s)&&r(o[a],a,o)!==!1;);return n}}var iVe=sVe,aVe=xJ,oVe=iVe,lVe=oVe(aVe),$2=lVe,cVe=$2,uVe=rb;function dVe(t,e){var n=-1,r=uVe(t)?Array(t.length):[];return cVe(t,function(s,a,o){r[++n]=e(s,a,o)}),r}var bJ=dVe;function hVe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var fVe=hVe,n3=Up;function mVe(t,e){if(t!==e){var n=t!==void 0,r=t===null,s=t===t,a=n3(t),o=e!==void 0,l=e===null,c=e===e,u=n3(e);if(!l&&!u&&!a&&t>e||a&&o&&c&&!l&&!u||r&&o&&c||!n&&c||!s)return 1;if(!r&&!a&&!u&&t<e||u&&n&&s&&!r&&!a||l&&n&&s||!o&&s||!c)return-1}return 0}var pVe=mVe,gVe=pVe;function yVe(t,e,n){for(var r=-1,s=t.criteria,a=e.criteria,o=s.length,l=n.length;++r<o;){var c=gVe(s[r],a[r]);if(c){if(r>=l)return c;var u=n[r];return c*(u=="desc"?-1:1)}}return t.index-e.index}var vVe=yVe,XE=_2,xVe=j2,bVe=Yo,wVe=bJ,_Ve=fVe,jVe=iJ,NVe=vVe,SVe=Xp,EVe=mi;function AVe(t,e,n){e.length?e=XE(e,function(a){return EVe(a)?function(o){return xVe(o,a.length===1?a[0]:a)}:a}):e=[SVe];var r=-1;e=XE(e,jVe(bVe));var s=wVe(t,function(a,o,l){var c=XE(e,function(u){return u(a)});return{criteria:c,index:++r,value:a}});return _Ve(s,function(a,o){return NVe(a,o,n)})}var TVe=AVe;function CVe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var PVe=CVe,IVe=PVe,r3=Math.max;function kVe(t,e,n){return e=r3(e===void 0?t.length-1:e,0),function(){for(var r=arguments,s=-1,a=r3(r.length-e,0),o=Array(a);++s<a;)o[s]=r[e+s];s=-1;for(var l=Array(e+1);++s<e;)l[s]=r[s];return l[e]=n(o),IVe(t,this,l)}}var RVe=kVe;function OVe(t){return function(){return t}}var MVe=OVe,DVe=Mh,LVe=function(){try{var t=DVe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),wJ=LVe,$Ve=MVe,s3=wJ,FVe=Xp,VVe=s3?function(t,e){return s3(t,"toString",{configurable:!0,enumerable:!1,value:$Ve(e),writable:!0})}:FVe,BVe=VVe,UVe=800,zVe=16,qVe=Date.now;function WVe(t){var e=0,n=0;return function(){var r=qVe(),s=zVe-(r-n);if(n=r,s>0){if(++e>=UVe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var HVe=WVe,KVe=BVe,GVe=HVe,YVe=GVe(KVe),QVe=YVe,XVe=Xp,ZVe=RVe,JVe=QVe;function eBe(t,e){return JVe(ZVe(t,e,XVe),t+"")}var tBe=eBe,nBe=v2,rBe=rb,sBe=M2,iBe=qu;function aBe(t,e,n){if(!iBe(n))return!1;var r=typeof e;return(r=="number"?rBe(n)&&sBe(e,n.length):r=="string"&&e in n)?nBe(n[e],t):!1}var j1=aBe,oBe=vJ,lBe=TVe,cBe=tBe,i3=j1,uBe=cBe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&i3(t,e[0],e[1])?e=[]:n>2&&i3(e[0],e[1],e[2])&&(e=[e[0]]),lBe(t,oBe(e,1),[])}),dBe=uBe;const F2=gn(dBe);function Pv(t){"@babel/helpers - typeof";return Pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pv(t)}function NP(){return NP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NP.apply(this,arguments)}function hBe(t,e){return gBe(t)||pBe(t,e)||mBe(t,e)||fBe()}function fBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mBe(t,e){if(t){if(typeof t=="string")return a3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a3(t,e)}}function a3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function pBe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function gBe(t){if(Array.isArray(t))return t}function o3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ZE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o3(Object(n),!0).forEach(function(r){yBe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yBe(t,e,n){return e=vBe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vBe(t){var e=xBe(t,"string");return Pv(e)=="symbol"?e:e+""}function xBe(t,e){if(Pv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Pv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bBe(t){return Array.isArray(t)&&Vr(t[0])&&Vr(t[1])?t.join(" ~ "):t}var wBe=function(e){var n=e.separator,r=n===void 0?" : ":n,s=e.contentStyle,a=s===void 0?{}:s,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,u=c===void 0?{}:c,d=e.payload,h=e.formatter,f=e.itemSorter,m=e.wrapperClassName,v=e.labelClassName,g=e.label,y=e.labelFormatter,w=e.accessibilityLayer,b=w===void 0?!1:w,E=function(){if(d&&d.length){var I={padding:0,margin:0},R=(f?F2(d,f):d).map(function(L,z){if(L.type==="none")return null;var W=ZE({display:"block",paddingTop:4,paddingBottom:4,color:L.color||"#000"},l),M=L.formatter||h||bBe,V=L.value,F=L.name,Y=V,ae=F;if(M&&Y!=null&&ae!=null){var oe=M(V,F,L,z,d);if(Array.isArray(oe)){var me=hBe(oe,2);Y=me[0],ae=me[1]}else Y=oe}return D.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:W},Vr(ae)?D.createElement("span",{className:"recharts-tooltip-item-name"},ae):null,Vr(ae)?D.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,D.createElement("span",{className:"recharts-tooltip-item-value"},Y),D.createElement("span",{className:"recharts-tooltip-item-unit"},L.unit||""))});return D.createElement("ul",{className:"recharts-tooltip-item-list",style:I},R)}return null},T=ZE({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),x=ZE({margin:0},u),S=!Ft(g),_=S?g:"",p=$t("recharts-default-tooltip",m),A=$t("recharts-tooltip-label",v);S&&y&&d!==void 0&&d!==null&&(_=y(g,d));var P=b?{role:"status","aria-live":"assertive"}:{};return D.createElement("div",NP({className:p,style:T},P),D.createElement("p",{className:A,style:x},D.isValidElement(_)?_:"".concat(_)),E())};function Iv(t){"@babel/helpers - typeof";return Iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iv(t)}function l0(t,e,n){return e=_Be(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Be(t){var e=jBe(t,"string");return Iv(e)=="symbol"?e:e+""}function jBe(t,e){if(Iv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Iv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ig="recharts-tooltip-wrapper",NBe={visibility:"hidden"};function SBe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return $t(Ig,l0(l0(l0(l0({},"".concat(Ig,"-right"),Ee(n)&&e&&Ee(e.x)&&n>=e.x),"".concat(Ig,"-left"),Ee(n)&&e&&Ee(e.x)&&n<e.x),"".concat(Ig,"-bottom"),Ee(r)&&e&&Ee(e.y)&&r>=e.y),"".concat(Ig,"-top"),Ee(r)&&e&&Ee(e.y)&&r<e.y))}function l3(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,s=t.offsetTopLeft,a=t.position,o=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,u=t.viewBoxDimension;if(a&&Ee(a[r]))return a[r];var d=n[r]-l-s,h=n[r]+s;if(e[r])return o[r]?d:h;if(o[r]){var f=d,m=c[r];return f<m?Math.max(h,c[r]):Math.max(d,c[r])}var v=h+l,g=c[r]+u;return v>g?Math.max(d,c[r]):Math.max(h,c[r])}function EBe(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function ABe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,s=t.position,a=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,u,d,h;return o.height>0&&o.width>0&&n?(d=l3({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:s,reverseDirection:a,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=l3({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:s,reverseDirection:a,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=EBe({translateX:d,translateY:h,useTranslate3d:l})):u=NBe,{cssProperties:u,cssClasses:SBe({translateX:d,translateY:h,coordinate:n})}}function Wm(t){"@babel/helpers - typeof";return Wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wm(t)}function c3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function u3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c3(Object(n),!0).forEach(function(r){EP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TBe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CBe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jJ(r.key),r)}}function PBe(t,e,n){return e&&CBe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function IBe(t,e,n){return e=F_(e),kBe(t,_J()?Reflect.construct(e,n||[],F_(t).constructor):e.apply(t,n))}function kBe(t,e){if(e&&(Wm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RBe(t)}function RBe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _J(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_J=function(){return!!t})()}function F_(t){return F_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},F_(t)}function OBe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SP(t,e)}function SP(t,e){return SP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},SP(t,e)}function EP(t,e,n){return e=jJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jJ(t){var e=MBe(t,"string");return Wm(e)=="symbol"?e:e+""}function MBe(t,e){if(Wm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Wm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var d3=1,DBe=function(t){function e(){var n;TBe(this,e);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=IBe(this,e,[].concat(s)),EP(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),EP(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return OBe(e,t),PBe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>d3||Math.abs(r.height-this.state.lastBoundingBox.height)>d3)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,s=this.props,a=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.children,d=s.coordinate,h=s.hasPayload,f=s.isAnimationActive,m=s.offset,v=s.position,g=s.reverseDirection,y=s.useTranslate3d,w=s.viewBox,b=s.wrapperStyle,E=ABe({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:m,position:v,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:w}),T=E.cssClasses,x=E.cssProperties,S=u3(u3({transition:f&&a?"transform ".concat(l,"ms ").concat(c):void 0},x),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&h?"visible":"hidden",position:"absolute",top:0,left:0},b);return D.createElement("div",{tabIndex:-1,className:T,style:S,ref:function(p){r.wrapperNode=p}},u)}}])}(N.PureComponent),LBe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},ko={isSsr:LBe(),get:function(e){return ko[e]},set:function(e,n){if(typeof e=="string")ko[e]=n;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(s){ko[s]=e[s]})}}};function Hm(t){"@babel/helpers - typeof";return Hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hm(t)}function h3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function f3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h3(Object(n),!0).forEach(function(r){V2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Be(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FBe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,SJ(r.key),r)}}function VBe(t,e,n){return e&&FBe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function BBe(t,e,n){return e=V_(e),UBe(t,NJ()?Reflect.construct(e,n||[],V_(t).constructor):e.apply(t,n))}function UBe(t,e){if(e&&(Hm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zBe(t)}function zBe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NJ=function(){return!!t})()}function V_(t){return V_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},V_(t)}function qBe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AP(t,e)}function AP(t,e){return AP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},AP(t,e)}function V2(t,e,n){return e=SJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SJ(t){var e=WBe(t,"string");return Hm(e)=="symbol"?e:e+""}function WBe(t,e){if(Hm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Hm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HBe(t){return t.dataKey}function KBe(t,e){return D.isValidElement(t)?D.cloneElement(t,e):typeof t=="function"?D.createElement(t,e):D.createElement(wBe,e)}var Pa=function(t){function e(){return $Be(this,e),BBe(this,e,arguments)}return qBe(e,t),VBe(e,[{key:"render",value:function(){var r=this,s=this.props,a=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.content,d=s.coordinate,h=s.filterNull,f=s.isAnimationActive,m=s.offset,v=s.payload,g=s.payloadUniqBy,y=s.position,w=s.reverseDirection,b=s.useTranslate3d,E=s.viewBox,T=s.wrapperStyle,x=v??[];h&&x.length&&(x=mJ(v.filter(function(_){return _.value!=null&&(_.hide!==!0||r.props.includeHidden)}),g,HBe));var S=x.length>0;return D.createElement(DBe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:f,active:a,coordinate:d,hasPayload:S,offset:m,position:y,reverseDirection:w,useTranslate3d:b,viewBox:E,wrapperStyle:T},KBe(u,f3(f3({},this.props),{},{payload:x})))}}])}(N.PureComponent);V2(Pa,"displayName","Tooltip");V2(Pa,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!ko.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var GBe=Go,YBe=function(){return GBe.Date.now()},QBe=YBe,XBe=/\s/;function ZBe(t){for(var e=t.length;e--&&XBe.test(t.charAt(e)););return e}var JBe=ZBe,e3e=JBe,t3e=/^\s+/;function n3e(t){return t&&t.slice(0,e3e(t)+1).replace(t3e,"")}var r3e=n3e,s3e=r3e,m3=qu,i3e=Up,p3=NaN,a3e=/^[-+]0x[0-9a-f]+$/i,o3e=/^0b[01]+$/i,l3e=/^0o[0-7]+$/i,c3e=parseInt;function u3e(t){if(typeof t=="number")return t;if(i3e(t))return p3;if(m3(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=m3(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=s3e(t);var n=o3e.test(t);return n||l3e.test(t)?c3e(t.slice(2),n?2:8):a3e.test(t)?p3:+t}var EJ=u3e,d3e=qu,JE=QBe,g3=EJ,h3e="Expected a function",f3e=Math.max,m3e=Math.min;function p3e(t,e,n){var r,s,a,o,l,c,u=0,d=!1,h=!1,f=!0;if(typeof t!="function")throw new TypeError(h3e);e=g3(e)||0,d3e(n)&&(d=!!n.leading,h="maxWait"in n,a=h?f3e(g3(n.maxWait)||0,e):a,f="trailing"in n?!!n.trailing:f);function m(S){var _=r,p=s;return r=s=void 0,u=S,o=t.apply(p,_),o}function v(S){return u=S,l=setTimeout(w,e),d?m(S):o}function g(S){var _=S-c,p=S-u,A=e-_;return h?m3e(A,a-p):A}function y(S){var _=S-c,p=S-u;return c===void 0||_>=e||_<0||h&&p>=a}function w(){var S=JE();if(y(S))return b(S);l=setTimeout(w,g(S))}function b(S){return l=void 0,f&&r?m(S):(r=s=void 0,o)}function E(){l!==void 0&&clearTimeout(l),u=0,r=c=s=l=void 0}function T(){return l===void 0?o:b(JE())}function x(){var S=JE(),_=y(S);if(r=arguments,s=this,c=S,_){if(l===void 0)return v(c);if(h)return clearTimeout(l),l=setTimeout(w,e),m(c)}return l===void 0&&(l=setTimeout(w,e)),o}return x.cancel=E,x.flush=T,x}var g3e=p3e,y3e=g3e,v3e=qu,x3e="Expected a function";function b3e(t,e,n){var r=!0,s=!0;if(typeof t!="function")throw new TypeError(x3e);return v3e(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),y3e(t,e,{leading:r,maxWait:e,trailing:s})}var w3e=b3e;const AJ=gn(w3e);function kv(t){"@babel/helpers - typeof";return kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kv(t)}function y3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function c0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y3(Object(n),!0).forEach(function(r){_3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _3e(t,e,n){return e=j3e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j3e(t){var e=N3e(t,"string");return kv(e)=="symbol"?e:e+""}function N3e(t,e){if(kv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(kv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function S3e(t,e){return C3e(t)||T3e(t,e)||A3e(t,e)||E3e()}function E3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A3e(t,e){if(t){if(typeof t=="string")return v3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v3(t,e)}}function v3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function T3e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function C3e(t){if(Array.isArray(t))return t}var eA=N.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,s=r===void 0?{width:-1,height:-1}:r,a=t.width,o=a===void 0?"100%":a,l=t.height,c=l===void 0?"100%":l,u=t.minWidth,d=u===void 0?0:u,h=t.minHeight,f=t.maxHeight,m=t.children,v=t.debounce,g=v===void 0?0:v,y=t.id,w=t.className,b=t.onResize,E=t.style,T=E===void 0?{}:E,x=N.useRef(null),S=N.useRef();S.current=b,N.useImperativeHandle(e,function(){return Object.defineProperty(x.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),x.current},configurable:!0})});var _=N.useState({containerWidth:s.width,containerHeight:s.height}),p=S3e(_,2),A=p[0],P=p[1],C=N.useCallback(function(R,L){P(function(z){var W=Math.round(R),M=Math.round(L);return z.containerWidth===W&&z.containerHeight===M?z:{containerWidth:W,containerHeight:M}})},[]);N.useEffect(function(){var R=function(F){var Y,ae=F[0].contentRect,oe=ae.width,me=ae.height;C(oe,me),(Y=S.current)===null||Y===void 0||Y.call(S,oe,me)};g>0&&(R=AJ(R,g,{trailing:!0,leading:!1}));var L=new ResizeObserver(R),z=x.current.getBoundingClientRect(),W=z.width,M=z.height;return C(W,M),L.observe(x.current),function(){L.disconnect()}},[C,g]);var I=N.useMemo(function(){var R=A.containerWidth,L=A.containerHeight;if(R<0||L<0)return null;Ua(_d(o)||_d(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Ua(!n||n>0,"The aspect(%s) must be greater than zero.",n);var z=_d(o)?R:o,W=_d(c)?L:c;n&&n>0&&(z?W=z/n:W&&(z=W*n),f&&W>f&&(W=f)),Ua(z>0||W>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,z,W,o,c,d,h,n);var M=!Array.isArray(m)&&yl(m.type).endsWith("Chart");return D.Children.map(m,function(V){return D.isValidElement(V)?N.cloneElement(V,c0({width:z,height:W},M?{style:c0({height:"100%",width:"100%",maxHeight:W,maxWidth:z},V.props.style)}:{})):V})},[n,m,c,f,h,d,A,o]);return D.createElement("div",{id:y?"".concat(y):void 0,className:$t("recharts-responsive-container",w),style:c0(c0({},T),{},{width:o,height:c,minWidth:d,minHeight:h,maxHeight:f}),ref:x},I)}),N1=function(e){return null};N1.displayName="Cell";function Rv(t){"@babel/helpers - typeof";return Rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rv(t)}function x3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function TP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x3(Object(n),!0).forEach(function(r){P3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function P3e(t,e,n){return e=I3e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I3e(t){var e=k3e(t,"string");return Rv(e)=="symbol"?e:e+""}function k3e(t,e){if(Rv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Rv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xh={widthCache:{},cacheCount:0},R3e=2e3,O3e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},b3="recharts_measurement_span";function M3e(t){var e=TP({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var Cy=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||ko.isSsr)return{width:0,height:0};var r=M3e(n),s=JSON.stringify({text:e,copyStyle:r});if(Xh.widthCache[s])return Xh.widthCache[s];try{var a=document.getElementById(b3);a||(a=document.createElement("span"),a.setAttribute("id",b3),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=TP(TP({},O3e),r);Object.assign(a.style,o),a.textContent="".concat(e);var l=a.getBoundingClientRect(),c={width:l.width,height:l.height};return Xh.widthCache[s]=c,++Xh.cacheCount>R3e&&(Xh.cacheCount=0,Xh.widthCache={}),c}catch{return{width:0,height:0}}},D3e=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Ov(t){"@babel/helpers - typeof";return Ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ov(t)}function B_(t,e){return V3e(t)||F3e(t,e)||$3e(t,e)||L3e()}function L3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $3e(t,e){if(t){if(typeof t=="string")return w3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w3(t,e)}}function w3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function F3e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function V3e(t){if(Array.isArray(t))return t}function B3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,z3e(r.key),r)}}function U3e(t,e,n){return e&&_3(t.prototype,e),n&&_3(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function z3e(t){var e=q3e(t,"string");return Ov(e)=="symbol"?e:e+""}function q3e(t,e){if(Ov(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ov(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var j3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,N3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,W3e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,H3e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,TJ={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},K3e=Object.keys(TJ),Cf="NaN";function G3e(t,e){return t*TJ[e]}var u0=function(){function t(e,n){B3e(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!W3e.test(n)&&(this.num=NaN,this.unit=""),K3e.includes(n)&&(this.num=G3e(e,n),this.unit="px")}return U3e(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,s=(r=H3e.exec(n))!==null&&r!==void 0?r:[],a=B_(s,3),o=a[1],l=a[2];return new t(parseFloat(o),l??"")}}])}();function CJ(t){if(t.includes(Cf))return Cf;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=j3.exec(e))!==null&&n!==void 0?n:[],s=B_(r,4),a=s[1],o=s[2],l=s[3],c=u0.parse(a??""),u=u0.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Cf;e=e.replace(j3,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,f=(h=N3.exec(e))!==null&&h!==void 0?h:[],m=B_(f,4),v=m[1],g=m[2],y=m[3],w=u0.parse(v??""),b=u0.parse(y??""),E=g==="+"?w.add(b):w.subtract(b);if(E.isNaN())return Cf;e=e.replace(N3,E.toString())}return e}var S3=/\(([^()]*)\)/;function Y3e(t){for(var e=t;e.includes("(");){var n=S3.exec(e),r=B_(n,2),s=r[1];e=e.replace(S3,CJ(s))}return e}function Q3e(t){var e=t.replace(/\s+/g,"");return e=Y3e(e),e=CJ(e),e}function X3e(t){try{return Q3e(t)}catch{return Cf}}function tA(t){var e=X3e(t.slice(5,-1));return e===Cf?"":e}var Z3e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],J3e=["dx","dy","angle","className","breakAll"];function CP(){return CP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CP.apply(this,arguments)}function E3(t,e){if(t==null)return{};var n=e5e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function e5e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function A3(t,e){return s5e(t)||r5e(t,e)||n5e(t,e)||t5e()}function t5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n5e(t,e){if(t){if(typeof t=="string")return T3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T3(t,e)}}function T3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function r5e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function s5e(t){if(Array.isArray(t))return t}var PJ=/[ \f\n\r\t\v\u2028\u2029]+/,IJ=function(e){var n=e.children,r=e.breakAll,s=e.style;try{var a=[];Ft(n)||(r?a=n.toString().split(""):a=n.toString().split(PJ));var o=a.map(function(c){return{word:c,width:Cy(c,s).width}}),l=r?0:Cy("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},i5e=function(e,n,r,s,a){var o=e.maxLines,l=e.children,c=e.style,u=e.breakAll,d=Ee(o),h=l,f=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return z.reduce(function(W,M){var V=M.word,F=M.width,Y=W[W.length-1];if(Y&&(s==null||a||Y.width+F+r<Number(s)))Y.words.push(V),Y.width+=F+r;else{var ae={words:[V],width:F};W.push(ae)}return W},[])},m=f(n),v=function(z){return z.reduce(function(W,M){return W.width>M.width?W:M})};if(!d)return m;for(var g="",y=function(z){var W=h.slice(0,z),M=IJ({breakAll:u,style:c,children:W+g}).wordsWithComputedWidth,V=f(M),F=V.length>o||v(V).width>Number(s);return[F,V]},w=0,b=h.length-1,E=0,T;w<=b&&E<=h.length-1;){var x=Math.floor((w+b)/2),S=x-1,_=y(S),p=A3(_,2),A=p[0],P=p[1],C=y(x),I=A3(C,1),R=I[0];if(!A&&!R&&(w=x+1),A&&R&&(b=x-1),!A&&R){T=P;break}E++}return T||m},C3=function(e){var n=Ft(e)?[]:e.toString().split(PJ);return[{words:n}]},a5e=function(e){var n=e.width,r=e.scaleToFit,s=e.children,a=e.style,o=e.breakAll,l=e.maxLines;if((n||r)&&!ko.isSsr){var c,u,d=IJ({breakAll:o,children:s,style:a});if(d){var h=d.wordsWithComputedWidth,f=d.spaceWidth;c=h,u=f}else return C3(s);return i5e({breakAll:o,children:s,maxLines:l,style:a},c,u,n,r)}return C3(s)},P3="#808080",xh=function(e){var n=e.x,r=n===void 0?0:n,s=e.y,a=s===void 0?0:s,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,u=c===void 0?"0.71em":c,d=e.scaleToFit,h=d===void 0?!1:d,f=e.textAnchor,m=f===void 0?"start":f,v=e.verticalAnchor,g=v===void 0?"end":v,y=e.fill,w=y===void 0?P3:y,b=E3(e,Z3e),E=N.useMemo(function(){return a5e({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:h,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,h,b.style,b.width]),T=b.dx,x=b.dy,S=b.angle,_=b.className,p=b.breakAll,A=E3(b,J3e);if(!Vr(r)||!Vr(a))return null;var P=r+(Ee(T)?T:0),C=a+(Ee(x)?x:0),I;switch(g){case"start":I=tA("calc(".concat(u,")"));break;case"middle":I=tA("calc(".concat((E.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:I=tA("calc(".concat(E.length-1," * -").concat(l,")"));break}var R=[];if(h){var L=E[0].width,z=b.width;R.push("scale(".concat((Ee(z)?z/L:1)/L,")"))}return S&&R.push("rotate(".concat(S,", ").concat(P,", ").concat(C,")")),R.length&&(A.transform=R.join(" ")),D.createElement("text",CP({},ft(A,!0),{x:P,y:C,className:$t("recharts-text",_),textAnchor:m,fill:w.includes("url")?P3:w}),E.map(function(W,M){var V=W.words.join(p?"":" ");return D.createElement("tspan",{x:P,dy:M===0?I:l,key:"".concat(V,"-").concat(M)},V)}))};function iu(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function o5e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function B2(t){let e,n,r;t.length!==2?(e=iu,n=(l,c)=>iu(t(l),c),r=(l,c)=>t(l)-c):(e=t===iu||t===o5e?t:l5e,n=t,r=t);function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;n(l[h],c)<0?u=h+1:d=h}while(u<d)}return u}function a(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;n(l[h],c)<=0?u=h+1:d=h}while(u<d)}return u}function o(l,c,u=0,d=l.length){const h=s(l,c,u,d-1);return h>u&&r(l[h-1],c)>-r(l[h],c)?h-1:h}return{left:s,center:o,right:a}}function l5e(){return 0}function kJ(t){return t===null?NaN:+t}function*c5e(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const u5e=B2(iu),sb=u5e.right;B2(kJ).center;class I3 extends Map{constructor(e,n=f5e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,s]of e)this.set(r,s)}get(e){return super.get(k3(this,e))}has(e){return super.has(k3(this,e))}set(e,n){return super.set(d5e(this,e),n)}delete(e){return super.delete(h5e(this,e))}}function k3({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function d5e({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function h5e({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function f5e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function m5e(t=iu){if(t===iu)return RJ;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function RJ(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const p5e=Math.sqrt(50),g5e=Math.sqrt(10),y5e=Math.sqrt(2);function U_(t,e,n){const r=(e-t)/Math.max(0,n),s=Math.floor(Math.log10(r)),a=r/Math.pow(10,s),o=a>=p5e?10:a>=g5e?5:a>=y5e?2:1;let l,c,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,s)*o,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=n&&n<2?U_(t,e,n*2):[l,c,u]}function PP(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[s,a,o]=r?U_(e,t,n):U_(t,e,n);if(!(a>=s))return[];const l=a-s+1,c=new Array(l);if(r)if(o<0)for(let u=0;u<l;++u)c[u]=(a-u)/-o;else for(let u=0;u<l;++u)c[u]=(a-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(s+u)/-o;else for(let u=0;u<l;++u)c[u]=(s+u)*o;return c}function IP(t,e,n){return e=+e,t=+t,n=+n,U_(t,e,n)[2]}function kP(t,e,n){e=+e,t=+t,n=+n;const r=e<t,s=r?IP(e,t,n):IP(t,e,n);return(r?-1:1)*(s<0?1/-s:s)}function R3(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function O3(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function OJ(t,e,n=0,r=1/0,s){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(s=s===void 0?RJ:m5e(s);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,d=Math.log(c),h=.5*Math.exp(2*d/3),f=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),m=Math.max(n,Math.floor(e-u*h/c+f)),v=Math.min(r,Math.floor(e+(c-u)*h/c+f));OJ(t,e,m,v,s)}const a=t[e];let o=n,l=r;for(kg(t,n,e),s(t[r],a)>0&&kg(t,n,r);o<l;){for(kg(t,o,l),++o,--l;s(t[o],a)<0;)++o;for(;s(t[l],a)>0;)--l}s(t[n],a)===0?kg(t,n,l):(++l,kg(t,l,r)),l<=e&&(n=l+1),e<=l&&(r=l-1)}return t}function kg(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function v5e(t,e,n){if(t=Float64Array.from(c5e(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return O3(t);if(e>=1)return R3(t);var r,s=(r-1)*e,a=Math.floor(s),o=R3(OJ(t,a).subarray(0,a+1)),l=O3(t.subarray(a+1));return o+(l-o)*(s-a)}}function x5e(t,e,n=kJ){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,s=(r-1)*e,a=Math.floor(s),o=+n(t[a],a,t),l=+n(t[a+1],a+1,t);return o+(l-o)*(s-a)}}function b5e(t,e,n){t=+t,e=+e,n=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(s);++r<s;)a[r]=t+r*n;return a}function ga(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Wl(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const RP=Symbol("implicit");function U2(){var t=new I3,e=[],n=[],r=RP;function s(a){let o=t.get(a);if(o===void 0){if(r!==RP)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return s.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new I3;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return s},s.range=function(a){return arguments.length?(n=Array.from(a),s):n.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return U2(e,n).unknown(r)},ga.apply(s,arguments),s}function Mv(){var t=U2().unknown(void 0),e=t.domain,n=t.range,r=0,s=1,a,o,l=!1,c=0,u=0,d=.5;delete t.unknown;function h(){var f=e().length,m=s<r,v=m?s:r,g=m?r:s;a=(g-v)/Math.max(1,f-c+u*2),l&&(a=Math.floor(a)),v+=(g-v-a*(f-c))*d,o=a*(1-c),l&&(v=Math.round(v),o=Math.round(o));var y=b5e(f).map(function(w){return v+a*w});return n(m?y.reverse():y)}return t.domain=function(f){return arguments.length?(e(f),h()):e()},t.range=function(f){return arguments.length?([r,s]=f,r=+r,s=+s,h()):[r,s]},t.rangeRound=function(f){return[r,s]=f,r=+r,s=+s,l=!0,h()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(f){return arguments.length?(l=!!f,h()):l},t.padding=function(f){return arguments.length?(c=Math.min(1,u=+f),h()):c},t.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},t.paddingOuter=function(f){return arguments.length?(u=+f,h()):u},t.align=function(f){return arguments.length?(d=Math.max(0,Math.min(1,f)),h()):d},t.copy=function(){return Mv(e(),[r,s]).round(l).paddingInner(c).paddingOuter(u).align(d)},ga.apply(h(),arguments)}function MJ(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return MJ(e())},t}function Py(){return MJ(Mv.apply(null,arguments).paddingInner(1))}function z2(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function DJ(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ib(){}var Dv=.7,z_=1/Dv,em="\\s*([+-]?\\d+)\\s*",Lv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ro="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",w5e=/^#([0-9a-f]{3,8})$/,_5e=new RegExp(`^rgb\\(${em},${em},${em}\\)$`),j5e=new RegExp(`^rgb\\(${Ro},${Ro},${Ro}\\)$`),N5e=new RegExp(`^rgba\\(${em},${em},${em},${Lv}\\)$`),S5e=new RegExp(`^rgba\\(${Ro},${Ro},${Ro},${Lv}\\)$`),E5e=new RegExp(`^hsl\\(${Lv},${Ro},${Ro}\\)$`),A5e=new RegExp(`^hsla\\(${Lv},${Ro},${Ro},${Lv}\\)$`),M3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};z2(ib,$v,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:D3,formatHex:D3,formatHex8:T5e,formatHsl:C5e,formatRgb:L3,toString:L3});function D3(){return this.rgb().formatHex()}function T5e(){return this.rgb().formatHex8()}function C5e(){return LJ(this).formatHsl()}function L3(){return this.rgb().formatRgb()}function $v(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=w5e.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?$3(e):n===3?new ci(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?d0(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?d0(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=_5e.exec(t))?new ci(e[1],e[2],e[3],1):(e=j5e.exec(t))?new ci(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=N5e.exec(t))?d0(e[1],e[2],e[3],e[4]):(e=S5e.exec(t))?d0(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=E5e.exec(t))?B3(e[1],e[2]/100,e[3]/100,1):(e=A5e.exec(t))?B3(e[1],e[2]/100,e[3]/100,e[4]):M3.hasOwnProperty(t)?$3(M3[t]):t==="transparent"?new ci(NaN,NaN,NaN,0):null}function $3(t){return new ci(t>>16&255,t>>8&255,t&255,1)}function d0(t,e,n,r){return r<=0&&(t=e=n=NaN),new ci(t,e,n,r)}function P5e(t){return t instanceof ib||(t=$v(t)),t?(t=t.rgb(),new ci(t.r,t.g,t.b,t.opacity)):new ci}function OP(t,e,n,r){return arguments.length===1?P5e(t):new ci(t,e,n,r??1)}function ci(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}z2(ci,OP,DJ(ib,{brighter(t){return t=t==null?z_:Math.pow(z_,t),new ci(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Dv:Math.pow(Dv,t),new ci(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ci(Ud(this.r),Ud(this.g),Ud(this.b),q_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:F3,formatHex:F3,formatHex8:I5e,formatRgb:V3,toString:V3}));function F3(){return`#${jd(this.r)}${jd(this.g)}${jd(this.b)}`}function I5e(){return`#${jd(this.r)}${jd(this.g)}${jd(this.b)}${jd((isNaN(this.opacity)?1:this.opacity)*255)}`}function V3(){const t=q_(this.opacity);return`${t===1?"rgb(":"rgba("}${Ud(this.r)}, ${Ud(this.g)}, ${Ud(this.b)}${t===1?")":`, ${t})`}`}function q_(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ud(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function jd(t){return t=Ud(t),(t<16?"0":"")+t.toString(16)}function B3(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new La(t,e,n,r)}function LJ(t){if(t instanceof La)return new La(t.h,t.s,t.l,t.opacity);if(t instanceof ib||(t=$v(t)),!t)return new La;if(t instanceof La)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,l=a-s,c=(a+s)/2;return l?(e===a?o=(n-r)/l+(n<r)*6:n===a?o=(r-e)/l+2:o=(e-n)/l+4,l/=c<.5?a+s:2-a-s,o*=60):l=c>0&&c<1?0:o,new La(o,l,c,t.opacity)}function k5e(t,e,n,r){return arguments.length===1?LJ(t):new La(t,e,n,r??1)}function La(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}z2(La,k5e,DJ(ib,{brighter(t){return t=t==null?z_:Math.pow(z_,t),new La(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Dv:Math.pow(Dv,t),new La(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new ci(nA(t>=240?t-240:t+120,s,r),nA(t,s,r),nA(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new La(U3(this.h),h0(this.s),h0(this.l),q_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=q_(this.opacity);return`${t===1?"hsl(":"hsla("}${U3(this.h)}, ${h0(this.s)*100}%, ${h0(this.l)*100}%${t===1?")":`, ${t})`}`}}));function U3(t){return t=(t||0)%360,t<0?t+360:t}function h0(t){return Math.max(0,Math.min(1,t||0))}function nA(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const q2=t=>()=>t;function R5e(t,e){return function(n){return t+n*e}}function O5e(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function M5e(t){return(t=+t)==1?$J:function(e,n){return n-e?O5e(e,n,t):q2(isNaN(e)?n:e)}}function $J(t,e){var n=e-t;return n?R5e(t,n):q2(isNaN(t)?e:t)}const z3=function t(e){var n=M5e(e);function r(s,a){var o=n((s=OP(s)).r,(a=OP(a)).r),l=n(s.g,a.g),c=n(s.b,a.b),u=$J(s.opacity,a.opacity);return function(d){return s.r=o(d),s.g=l(d),s.b=c(d),s.opacity=u(d),s+""}}return r.gamma=t,r}(1);function D5e(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),s;return function(a){for(s=0;s<n;++s)r[s]=t[s]*(1-a)+e[s]*a;return r}}function L5e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function $5e(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,s=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)s[o]=Zp(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(l){for(o=0;o<r;++o)a[o]=s[o](l);return a}}function F5e(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function W_(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function V5e(t,e){var n={},r={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?n[s]=Zp(t[s],e[s]):r[s]=e[s];return function(a){for(s in n)r[s]=n[s](a);return r}}var MP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rA=new RegExp(MP.source,"g");function B5e(t){return function(){return t}}function U5e(t){return function(e){return t(e)+""}}function z5e(t,e){var n=MP.lastIndex=rA.lastIndex=0,r,s,a,o=-1,l=[],c=[];for(t=t+"",e=e+"";(r=MP.exec(t))&&(s=rA.exec(e));)(a=s.index)>n&&(a=e.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(r=r[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:W_(r,s)})),n=rA.lastIndex;return n<e.length&&(a=e.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?c[0]?U5e(c[0].x):B5e(e):(e=c.length,function(u){for(var d=0,h;d<e;++d)l[(h=c[d]).i]=h.x(u);return l.join("")})}function Zp(t,e){var n=typeof e,r;return e==null||n==="boolean"?q2(e):(n==="number"?W_:n==="string"?(r=$v(e))?(e=r,z3):z5e:e instanceof $v?z3:e instanceof Date?F5e:L5e(e)?D5e:Array.isArray(e)?$5e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?V5e:W_)(t,e)}function W2(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function q5e(t,e){e===void 0&&(e=t,t=Zp);for(var n=0,r=e.length-1,s=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(s,s=e[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[l](o-l)}}function W5e(t){return function(){return t}}function H_(t){return+t}var q3=[0,1];function Bs(t){return t}function DP(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:W5e(isNaN(e)?NaN:.5)}function H5e(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function K5e(t,e,n){var r=t[0],s=t[1],a=e[0],o=e[1];return s<r?(r=DP(s,r),a=n(o,a)):(r=DP(r,s),a=n(a,o)),function(l){return a(r(l))}}function G5e(t,e,n){var r=Math.min(t.length,e.length)-1,s=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)s[o]=DP(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(l){var c=sb(t,l,1,r)-1;return a[c](s[c](l))}}function ab(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function S1(){var t=q3,e=q3,n=Zp,r,s,a,o=Bs,l,c,u;function d(){var f=Math.min(t.length,e.length);return o!==Bs&&(o=H5e(t[0],t[f-1])),l=f>2?G5e:K5e,c=u=null,h}function h(f){return f==null||isNaN(f=+f)?a:(c||(c=l(t.map(r),e,n)))(r(o(f)))}return h.invert=function(f){return o(s((u||(u=l(e,t.map(r),W_)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,H_),d()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),d()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),n=W2,d()},h.clamp=function(f){return arguments.length?(o=f?!0:Bs,d()):o!==Bs},h.interpolate=function(f){return arguments.length?(n=f,d()):n},h.unknown=function(f){return arguments.length?(a=f,h):a},function(f,m){return r=f,s=m,d()}}function H2(){return S1()(Bs,Bs)}function Y5e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function K_(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Km(t){return t=K_(Math.abs(t)),t?t[1]:NaN}function Q5e(t,e){return function(n,r){for(var s=n.length,a=[],o=0,l=t[0],c=0;s>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),a.push(n.substring(s-=l,s+l)),!((c+=l+1)>r));)l=t[o=(o+1)%t.length];return a.reverse().join(e)}}function X5e(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Z5e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fv(t){if(!(e=Z5e.exec(t)))throw new Error("invalid format: "+t);var e;return new K2({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Fv.prototype=K2.prototype;function K2(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}K2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function J5e(t){e:for(var e=t.length,n=1,r=-1,s;n<e;++n)switch(t[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(s+1):t}var FJ;function eUe(t,e){var n=K_(t,e);if(!n)return t+"";var r=n[0],s=n[1],a=s-(FJ=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+K_(t,Math.max(0,e+a-1))[0]}function W3(t,e){var n=K_(t,e);if(!n)return t+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const H3={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Y5e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>W3(t*100,e),r:W3,s:eUe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function K3(t){return t}var G3=Array.prototype.map,Y3=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function tUe(t){var e=t.grouping===void 0||t.thousands===void 0?K3:Q5e(G3.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?K3:X5e(G3.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(h){h=Fv(h);var f=h.fill,m=h.align,v=h.sign,g=h.symbol,y=h.zero,w=h.width,b=h.comma,E=h.precision,T=h.trim,x=h.type;x==="n"?(b=!0,x="g"):H3[x]||(E===void 0&&(E=12),T=!0,x="g"),(y||f==="0"&&m==="=")&&(y=!0,f="0",m="=");var S=g==="$"?n:g==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",_=g==="$"?r:/[%p]/.test(x)?o:"",p=H3[x],A=/[defgprs%]/.test(x);E=E===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function P(C){var I=S,R=_,L,z,W;if(x==="c")R=p(C)+R,C="";else{C=+C;var M=C<0||1/C<0;if(C=isNaN(C)?c:p(Math.abs(C),E),T&&(C=J5e(C)),M&&+C==0&&v!=="+"&&(M=!1),I=(M?v==="("?v:l:v==="-"||v==="("?"":v)+I,R=(x==="s"?Y3[8+FJ/3]:"")+R+(M&&v==="("?")":""),A){for(L=-1,z=C.length;++L<z;)if(W=C.charCodeAt(L),48>W||W>57){R=(W===46?s+C.slice(L+1):C.slice(L))+R,C=C.slice(0,L);break}}}b&&!y&&(C=e(C,1/0));var V=I.length+C.length+R.length,F=V<w?new Array(w-V+1).join(f):"";switch(b&&y&&(C=e(F+C,F.length?w-R.length:1/0),F=""),m){case"<":C=I+C+R+F;break;case"=":C=I+F+C+R;break;case"^":C=F.slice(0,V=F.length>>1)+I+C+R+F.slice(V);break;default:C=F+I+C+R;break}return a(C)}return P.toString=function(){return h+""},P}function d(h,f){var m=u((h=Fv(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(Km(f)/3)))*3,g=Math.pow(10,-v),y=Y3[8+v/3];return function(w){return m(g*w)+y}}return{format:u,formatPrefix:d}}var f0,G2,VJ;nUe({thousands:",",grouping:[3],currency:["$",""]});function nUe(t){return f0=tUe(t),G2=f0.format,VJ=f0.formatPrefix,f0}function rUe(t){return Math.max(0,-Km(Math.abs(t)))}function sUe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Km(e)/3)))*3-Km(Math.abs(t)))}function iUe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Km(e)-Km(t))+1}function BJ(t,e,n,r){var s=kP(t,e,n),a;switch(r=Fv(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=sUe(s,o))&&(r.precision=a),VJ(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=iUe(s,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=rUe(s))&&(r.precision=a-(r.type==="%")*2);break}}return G2(r)}function Wu(t){var e=t.domain;return t.ticks=function(n){var r=e();return PP(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var s=e();return BJ(s[0],s[s.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),s=0,a=r.length-1,o=r[s],l=r[a],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=s,s=a,a=u);d-- >0;){if(u=IP(o,l,n),u===c)return r[s]=o,r[a]=l,e(r);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function G_(){var t=H2();return t.copy=function(){return ab(t,G_())},ga.apply(t,arguments),Wu(t)}function UJ(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,H_),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return UJ(t).unknown(e)},t=arguments.length?Array.from(t,H_):[0,1],Wu(n)}function zJ(t,e){t=t.slice();var n=0,r=t.length-1,s=t[n],a=t[r],o;return a<s&&(o=n,n=r,r=o,o=s,s=a,a=o),t[n]=e.floor(s),t[r]=e.ceil(a),t}function Q3(t){return Math.log(t)}function X3(t){return Math.exp(t)}function aUe(t){return-Math.log(-t)}function oUe(t){return-Math.exp(-t)}function lUe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function cUe(t){return t===10?lUe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function uUe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function Z3(t){return(e,n)=>-t(-e,n)}function Y2(t){const e=t(Q3,X3),n=e.domain;let r=10,s,a;function o(){return s=uUe(r),a=cUe(r),n()[0]<0?(s=Z3(s),a=Z3(a),t(aUe,oUe)):t(Q3,X3),e}return e.base=function(l){return arguments.length?(r=+l,o()):r},e.domain=function(l){return arguments.length?(n(l),o()):n()},e.ticks=l=>{const c=n();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let f=s(u),m=s(d),v,g;const y=l==null?10:+l;let w=[];if(!(r%1)&&m-f<y){if(f=Math.floor(f),m=Math.ceil(m),u>0){for(;f<=m;++f)for(v=1;v<r;++v)if(g=f<0?v/a(-f):v*a(f),!(g<u)){if(g>d)break;w.push(g)}}else for(;f<=m;++f)for(v=r-1;v>=1;--v)if(g=f>0?v/a(-f):v*a(f),!(g<u)){if(g>d)break;w.push(g)}w.length*2<y&&(w=PP(u,d,y))}else w=PP(f,m,Math.min(m-f,y)).map(a);return h?w.reverse():w},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Fv(c)).precision==null&&(c.trim=!0),c=G2(c)),l===1/0)return c;const u=Math.max(1,r*l/e.ticks().length);return d=>{let h=d/a(Math.round(s(d)));return h*r<r-.5&&(h*=r),h<=u?c(d):""}},e.nice=()=>n(zJ(n(),{floor:l=>a(Math.floor(s(l))),ceil:l=>a(Math.ceil(s(l)))})),e}function qJ(){const t=Y2(S1()).domain([1,10]);return t.copy=()=>ab(t,qJ()).base(t.base()),ga.apply(t,arguments),t}function J3(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function e5(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Q2(t){var e=1,n=t(J3(e),e5(e));return n.constant=function(r){return arguments.length?t(J3(e=+r),e5(e)):e},Wu(n)}function WJ(){var t=Q2(S1());return t.copy=function(){return ab(t,WJ()).constant(t.constant())},ga.apply(t,arguments)}function t5(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function dUe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function hUe(t){return t<0?-t*t:t*t}function X2(t){var e=t(Bs,Bs),n=1;function r(){return n===1?t(Bs,Bs):n===.5?t(dUe,hUe):t(t5(n),t5(1/n))}return e.exponent=function(s){return arguments.length?(n=+s,r()):n},Wu(e)}function Z2(){var t=X2(S1());return t.copy=function(){return ab(t,Z2()).exponent(t.exponent())},ga.apply(t,arguments),t}function fUe(){return Z2.apply(null,arguments).exponent(.5)}function n5(t){return Math.sign(t)*t*t}function mUe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function HJ(){var t=H2(),e=[0,1],n=!1,r;function s(a){var o=mUe(t(a));return isNaN(o)?r:n?Math.round(o):o}return s.invert=function(a){return t.invert(n5(a))},s.domain=function(a){return arguments.length?(t.domain(a),s):t.domain()},s.range=function(a){return arguments.length?(t.range((e=Array.from(a,H_)).map(n5)),s):e.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(n=!!a,s):n},s.clamp=function(a){return arguments.length?(t.clamp(a),s):t.clamp()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return HJ(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},ga.apply(s,arguments),Wu(s)}function KJ(){var t=[],e=[],n=[],r;function s(){var o=0,l=Math.max(1,e.length);for(n=new Array(l-1);++o<l;)n[o-1]=x5e(t,o/l);return a}function a(o){return o==null||isNaN(o=+o)?r:e[sb(n,o)]}return a.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(iu),s()},a.range=function(o){return arguments.length?(e=Array.from(o),s()):e.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return KJ().domain(t).range(e).unknown(r)},ga.apply(a,arguments)}function GJ(){var t=0,e=1,n=1,r=[.5],s=[0,1],a;function o(c){return c!=null&&c<=c?s[sb(r,c,0,n)]:a}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(n=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},o.unknown=function(c){return arguments.length&&(a=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return GJ().domain([t,e]).range(s).unknown(a)},ga.apply(Wu(o),arguments)}function YJ(){var t=[.5],e=[0,1],n,r=1;function s(a){return a!=null&&a<=a?e[sb(t,a,0,r)]:n}return s.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return YJ().domain(t).range(e).unknown(n)},ga.apply(s,arguments)}const sA=new Date,iA=new Date;function Ur(t,e,n,r){function s(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(t(a=new Date(+a)),a),s.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),s.round=a=>{const o=s(a),l=s.ceil(a);return a-o<l-a?o:l},s.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),s.range=(a,o,l)=>{const c=[];if(a=s.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return c;let u;do c.push(u=new Date(+a)),e(a,l),t(a);while(u<a&&a<o);return c},s.filter=a=>Ur(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!a(o););else for(;--l>=0;)for(;e(o,1),!a(o););}),n&&(s.count=(a,o)=>(sA.setTime(+a),iA.setTime(+o),t(sA),t(iA),Math.floor(n(sA,iA))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(r?o=>r(o)%a===0:o=>s.count(0,o)%a===0):s)),s}const Y_=Ur(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Y_.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ur(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Y_);Y_.range;const dl=1e3,Xi=dl*60,hl=Xi*60,Ml=hl*24,J2=Ml*7,r5=Ml*30,aA=Ml*365,Nd=Ur(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*dl)},(t,e)=>(e-t)/dl,t=>t.getUTCSeconds());Nd.range;const eM=Ur(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*dl)},(t,e)=>{t.setTime(+t+e*Xi)},(t,e)=>(e-t)/Xi,t=>t.getMinutes());eM.range;const tM=Ur(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Xi)},(t,e)=>(e-t)/Xi,t=>t.getUTCMinutes());tM.range;const nM=Ur(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*dl-t.getMinutes()*Xi)},(t,e)=>{t.setTime(+t+e*hl)},(t,e)=>(e-t)/hl,t=>t.getHours());nM.range;const rM=Ur(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*hl)},(t,e)=>(e-t)/hl,t=>t.getUTCHours());rM.range;const ob=Ur(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Xi)/Ml,t=>t.getDate()-1);ob.range;const E1=Ur(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ml,t=>t.getUTCDate()-1);E1.range;const QJ=Ur(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ml,t=>Math.floor(t/Ml));QJ.range;function Dh(t){return Ur(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Xi)/J2)}const A1=Dh(0),Q_=Dh(1),pUe=Dh(2),gUe=Dh(3),Gm=Dh(4),yUe=Dh(5),vUe=Dh(6);A1.range;Q_.range;pUe.range;gUe.range;Gm.range;yUe.range;vUe.range;function Lh(t){return Ur(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/J2)}const T1=Lh(0),X_=Lh(1),xUe=Lh(2),bUe=Lh(3),Ym=Lh(4),wUe=Lh(5),_Ue=Lh(6);T1.range;X_.range;xUe.range;bUe.range;Ym.range;wUe.range;_Ue.range;const sM=Ur(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());sM.range;const iM=Ur(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());iM.range;const Dl=Ur(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Dl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ur(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Dl.range;const Ll=Ur(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ll.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ur(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ll.range;function XJ(t,e,n,r,s,a){const o=[[Nd,1,dl],[Nd,5,5*dl],[Nd,15,15*dl],[Nd,30,30*dl],[a,1,Xi],[a,5,5*Xi],[a,15,15*Xi],[a,30,30*Xi],[s,1,hl],[s,3,3*hl],[s,6,6*hl],[s,12,12*hl],[r,1,Ml],[r,2,2*Ml],[n,1,J2],[e,1,r5],[e,3,3*r5],[t,1,aA]];function l(u,d,h){const f=d<u;f&&([u,d]=[d,u]);const m=h&&typeof h.range=="function"?h:c(u,d,h),v=m?m.range(u,+d+1):[];return f?v.reverse():v}function c(u,d,h){const f=Math.abs(d-u)/h,m=B2(([,,y])=>y).right(o,f);if(m===o.length)return t.every(kP(u/aA,d/aA,h));if(m===0)return Y_.every(Math.max(kP(u,d,h),1));const[v,g]=o[f/o[m-1][2]<o[m][2]/f?m-1:m];return v.every(g)}return[l,c]}const[jUe,NUe]=XJ(Ll,iM,T1,QJ,rM,tM),[SUe,EUe]=XJ(Dl,sM,A1,ob,nM,eM);function oA(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function lA(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Rg(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function AUe(t){var e=t.dateTime,n=t.date,r=t.time,s=t.periods,a=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,u=Og(s),d=Mg(s),h=Og(a),f=Mg(a),m=Og(o),v=Mg(o),g=Og(l),y=Mg(l),w=Og(c),b=Mg(c),E={a:M,A:V,b:F,B:Y,c:null,d:c5,e:c5,f:QUe,g:a6e,G:l6e,H:KUe,I:GUe,j:YUe,L:ZJ,m:XUe,M:ZUe,p:ae,q:oe,Q:h5,s:f5,S:JUe,u:e6e,U:t6e,V:n6e,w:r6e,W:s6e,x:null,X:null,y:i6e,Y:o6e,Z:c6e,"%":d5},T={a:me,A:ke,b:ut,B:jt,c:null,d:u5,e:u5,f:f6e,g:j6e,G:S6e,H:u6e,I:d6e,j:h6e,L:eee,m:m6e,M:p6e,p:Ne,q:ht,Q:h5,s:f5,S:g6e,u:y6e,U:v6e,V:x6e,w:b6e,W:w6e,x:null,X:null,y:_6e,Y:N6e,Z:E6e,"%":d5},x={a:P,A:C,b:I,B:R,c:L,d:o5,e:o5,f:zUe,g:a5,G:i5,H:l5,I:l5,j:FUe,L:UUe,m:$Ue,M:VUe,p:A,q:LUe,Q:WUe,s:HUe,S:BUe,u:kUe,U:RUe,V:OUe,w:IUe,W:MUe,x:z,X:W,y:a5,Y:i5,Z:DUe,"%":qUe};E.x=S(n,E),E.X=S(r,E),E.c=S(e,E),T.x=S(n,T),T.X=S(r,T),T.c=S(e,T);function S(we,Me){return function(Fe){var ue=[],Ct=-1,gt=0,on=we.length,Jt,_n,zr;for(Fe instanceof Date||(Fe=new Date(+Fe));++Ct<on;)we.charCodeAt(Ct)===37&&(ue.push(we.slice(gt,Ct)),(_n=s5[Jt=we.charAt(++Ct)])!=null?Jt=we.charAt(++Ct):_n=Jt==="e"?" ":"0",(zr=Me[Jt])&&(Jt=zr(Fe,_n)),ue.push(Jt),gt=Ct+1);return ue.push(we.slice(gt,Ct)),ue.join("")}}function _(we,Me){return function(Fe){var ue=Rg(1900,void 0,1),Ct=p(ue,we,Fe+="",0),gt,on;if(Ct!=Fe.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(ue.s*1e3+("L"in ue?ue.L:0));if(Me&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+ue.p*12),ue.m===void 0&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?(gt=lA(Rg(ue.y,0,1)),on=gt.getUTCDay(),gt=on>4||on===0?X_.ceil(gt):X_(gt),gt=E1.offset(gt,(ue.V-1)*7),ue.y=gt.getUTCFullYear(),ue.m=gt.getUTCMonth(),ue.d=gt.getUTCDate()+(ue.w+6)%7):(gt=oA(Rg(ue.y,0,1)),on=gt.getDay(),gt=on>4||on===0?Q_.ceil(gt):Q_(gt),gt=ob.offset(gt,(ue.V-1)*7),ue.y=gt.getFullYear(),ue.m=gt.getMonth(),ue.d=gt.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),on="Z"in ue?lA(Rg(ue.y,0,1)).getUTCDay():oA(Rg(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+ue.W*7-(on+5)%7:ue.w+ue.U*7-(on+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,lA(ue)):oA(ue)}}function p(we,Me,Fe,ue){for(var Ct=0,gt=Me.length,on=Fe.length,Jt,_n;Ct<gt;){if(ue>=on)return-1;if(Jt=Me.charCodeAt(Ct++),Jt===37){if(Jt=Me.charAt(Ct++),_n=x[Jt in s5?Me.charAt(Ct++):Jt],!_n||(ue=_n(we,Fe,ue))<0)return-1}else if(Jt!=Fe.charCodeAt(ue++))return-1}return ue}function A(we,Me,Fe){var ue=u.exec(Me.slice(Fe));return ue?(we.p=d.get(ue[0].toLowerCase()),Fe+ue[0].length):-1}function P(we,Me,Fe){var ue=m.exec(Me.slice(Fe));return ue?(we.w=v.get(ue[0].toLowerCase()),Fe+ue[0].length):-1}function C(we,Me,Fe){var ue=h.exec(Me.slice(Fe));return ue?(we.w=f.get(ue[0].toLowerCase()),Fe+ue[0].length):-1}function I(we,Me,Fe){var ue=w.exec(Me.slice(Fe));return ue?(we.m=b.get(ue[0].toLowerCase()),Fe+ue[0].length):-1}function R(we,Me,Fe){var ue=g.exec(Me.slice(Fe));return ue?(we.m=y.get(ue[0].toLowerCase()),Fe+ue[0].length):-1}function L(we,Me,Fe){return p(we,e,Me,Fe)}function z(we,Me,Fe){return p(we,n,Me,Fe)}function W(we,Me,Fe){return p(we,r,Me,Fe)}function M(we){return o[we.getDay()]}function V(we){return a[we.getDay()]}function F(we){return c[we.getMonth()]}function Y(we){return l[we.getMonth()]}function ae(we){return s[+(we.getHours()>=12)]}function oe(we){return 1+~~(we.getMonth()/3)}function me(we){return o[we.getUTCDay()]}function ke(we){return a[we.getUTCDay()]}function ut(we){return c[we.getUTCMonth()]}function jt(we){return l[we.getUTCMonth()]}function Ne(we){return s[+(we.getUTCHours()>=12)]}function ht(we){return 1+~~(we.getUTCMonth()/3)}return{format:function(we){var Me=S(we+="",E);return Me.toString=function(){return we},Me},parse:function(we){var Me=_(we+="",!1);return Me.toString=function(){return we},Me},utcFormat:function(we){var Me=S(we+="",T);return Me.toString=function(){return we},Me},utcParse:function(we){var Me=_(we+="",!0);return Me.toString=function(){return we},Me}}}var s5={"-":"",_:" ",0:"0"},Jr=/^\s*\d+/,TUe=/^%/,CUe=/[\\^$*+?|[\]().{}]/g;function un(t,e,n){var r=t<0?"-":"",s=(r?-t:t)+"",a=s.length;return r+(a<n?new Array(n-a+1).join(e)+s:s)}function PUe(t){return t.replace(CUe,"\\$&")}function Og(t){return new RegExp("^(?:"+t.map(PUe).join("|")+")","i")}function Mg(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function IUe(t,e,n){var r=Jr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function kUe(t,e,n){var r=Jr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function RUe(t,e,n){var r=Jr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function OUe(t,e,n){var r=Jr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function MUe(t,e,n){var r=Jr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function i5(t,e,n){var r=Jr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function a5(t,e,n){var r=Jr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function DUe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function LUe(t,e,n){var r=Jr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function $Ue(t,e,n){var r=Jr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function o5(t,e,n){var r=Jr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function FUe(t,e,n){var r=Jr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function l5(t,e,n){var r=Jr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function VUe(t,e,n){var r=Jr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function BUe(t,e,n){var r=Jr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function UUe(t,e,n){var r=Jr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function zUe(t,e,n){var r=Jr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function qUe(t,e,n){var r=TUe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function WUe(t,e,n){var r=Jr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function HUe(t,e,n){var r=Jr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function c5(t,e){return un(t.getDate(),e,2)}function KUe(t,e){return un(t.getHours(),e,2)}function GUe(t,e){return un(t.getHours()%12||12,e,2)}function YUe(t,e){return un(1+ob.count(Dl(t),t),e,3)}function ZJ(t,e){return un(t.getMilliseconds(),e,3)}function QUe(t,e){return ZJ(t,e)+"000"}function XUe(t,e){return un(t.getMonth()+1,e,2)}function ZUe(t,e){return un(t.getMinutes(),e,2)}function JUe(t,e){return un(t.getSeconds(),e,2)}function e6e(t){var e=t.getDay();return e===0?7:e}function t6e(t,e){return un(A1.count(Dl(t)-1,t),e,2)}function JJ(t){var e=t.getDay();return e>=4||e===0?Gm(t):Gm.ceil(t)}function n6e(t,e){return t=JJ(t),un(Gm.count(Dl(t),t)+(Dl(t).getDay()===4),e,2)}function r6e(t){return t.getDay()}function s6e(t,e){return un(Q_.count(Dl(t)-1,t),e,2)}function i6e(t,e){return un(t.getFullYear()%100,e,2)}function a6e(t,e){return t=JJ(t),un(t.getFullYear()%100,e,2)}function o6e(t,e){return un(t.getFullYear()%1e4,e,4)}function l6e(t,e){var n=t.getDay();return t=n>=4||n===0?Gm(t):Gm.ceil(t),un(t.getFullYear()%1e4,e,4)}function c6e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+un(e/60|0,"0",2)+un(e%60,"0",2)}function u5(t,e){return un(t.getUTCDate(),e,2)}function u6e(t,e){return un(t.getUTCHours(),e,2)}function d6e(t,e){return un(t.getUTCHours()%12||12,e,2)}function h6e(t,e){return un(1+E1.count(Ll(t),t),e,3)}function eee(t,e){return un(t.getUTCMilliseconds(),e,3)}function f6e(t,e){return eee(t,e)+"000"}function m6e(t,e){return un(t.getUTCMonth()+1,e,2)}function p6e(t,e){return un(t.getUTCMinutes(),e,2)}function g6e(t,e){return un(t.getUTCSeconds(),e,2)}function y6e(t){var e=t.getUTCDay();return e===0?7:e}function v6e(t,e){return un(T1.count(Ll(t)-1,t),e,2)}function tee(t){var e=t.getUTCDay();return e>=4||e===0?Ym(t):Ym.ceil(t)}function x6e(t,e){return t=tee(t),un(Ym.count(Ll(t),t)+(Ll(t).getUTCDay()===4),e,2)}function b6e(t){return t.getUTCDay()}function w6e(t,e){return un(X_.count(Ll(t)-1,t),e,2)}function _6e(t,e){return un(t.getUTCFullYear()%100,e,2)}function j6e(t,e){return t=tee(t),un(t.getUTCFullYear()%100,e,2)}function N6e(t,e){return un(t.getUTCFullYear()%1e4,e,4)}function S6e(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Ym(t):Ym.ceil(t),un(t.getUTCFullYear()%1e4,e,4)}function E6e(){return"+0000"}function d5(){return"%"}function h5(t){return+t}function f5(t){return Math.floor(+t/1e3)}var Zh,nee,ree;A6e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function A6e(t){return Zh=AUe(t),nee=Zh.format,Zh.parse,ree=Zh.utcFormat,Zh.utcParse,Zh}function T6e(t){return new Date(t)}function C6e(t){return t instanceof Date?+t:+new Date(+t)}function aM(t,e,n,r,s,a,o,l,c,u){var d=H2(),h=d.invert,f=d.domain,m=u(".%L"),v=u(":%S"),g=u("%I:%M"),y=u("%I %p"),w=u("%a %d"),b=u("%b %d"),E=u("%B"),T=u("%Y");function x(S){return(c(S)<S?m:l(S)<S?v:o(S)<S?g:a(S)<S?y:r(S)<S?s(S)<S?w:b:n(S)<S?E:T)(S)}return d.invert=function(S){return new Date(h(S))},d.domain=function(S){return arguments.length?f(Array.from(S,C6e)):f().map(T6e)},d.ticks=function(S){var _=f();return t(_[0],_[_.length-1],S??10)},d.tickFormat=function(S,_){return _==null?x:u(_)},d.nice=function(S){var _=f();return(!S||typeof S.range!="function")&&(S=e(_[0],_[_.length-1],S??10)),S?f(zJ(_,S)):d},d.copy=function(){return ab(d,aM(t,e,n,r,s,a,o,l,c,u))},d}function P6e(){return ga.apply(aM(SUe,EUe,Dl,sM,A1,ob,nM,eM,Nd,nee).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function I6e(){return ga.apply(aM(jUe,NUe,Ll,iM,T1,E1,rM,tM,Nd,ree).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function C1(){var t=0,e=1,n,r,s,a,o=Bs,l=!1,c;function u(h){return h==null||isNaN(h=+h)?c:o(s===0?.5:(h=(a(h)-n)*s,l?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,e]=h,n=a(t=+t),r=a(e=+e),s=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(h){return arguments.length?(l=!!h,u):l},u.interpolator=function(h){return arguments.length?(o=h,u):o};function d(h){return function(f){var m,v;return arguments.length?([m,v]=f,o=h(m,v),u):[o(0),o(1)]}}return u.range=d(Zp),u.rangeRound=d(W2),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return a=h,n=h(t),r=h(e),s=n===r?0:1/(r-n),u}}function Hu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function see(){var t=Wu(C1()(Bs));return t.copy=function(){return Hu(t,see())},Wl.apply(t,arguments)}function iee(){var t=Y2(C1()).domain([1,10]);return t.copy=function(){return Hu(t,iee()).base(t.base())},Wl.apply(t,arguments)}function aee(){var t=Q2(C1());return t.copy=function(){return Hu(t,aee()).constant(t.constant())},Wl.apply(t,arguments)}function oM(){var t=X2(C1());return t.copy=function(){return Hu(t,oM()).exponent(t.exponent())},Wl.apply(t,arguments)}function k6e(){return oM.apply(null,arguments).exponent(.5)}function oee(){var t=[],e=Bs;function n(r){if(r!=null&&!isNaN(r=+r))return e((sb(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let s of r)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(iu),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,s)=>e(s/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(s,a)=>v5e(t,a/r))},n.copy=function(){return oee(e).domain(t)},Wl.apply(n,arguments)}function P1(){var t=0,e=.5,n=1,r=1,s,a,o,l,c,u=Bs,d,h=!1,f;function m(g){return isNaN(g=+g)?f:(g=.5+((g=+d(g))-a)*(r*g<r*a?l:c),u(h?Math.max(0,Math.min(1,g)):g))}m.domain=function(g){return arguments.length?([t,e,n]=g,s=d(t=+t),a=d(e=+e),o=d(n=+n),l=s===a?0:.5/(a-s),c=a===o?0:.5/(o-a),r=a<s?-1:1,m):[t,e,n]},m.clamp=function(g){return arguments.length?(h=!!g,m):h},m.interpolator=function(g){return arguments.length?(u=g,m):u};function v(g){return function(y){var w,b,E;return arguments.length?([w,b,E]=y,u=q5e(g,[w,b,E]),m):[u(0),u(.5),u(1)]}}return m.range=v(Zp),m.rangeRound=v(W2),m.unknown=function(g){return arguments.length?(f=g,m):f},function(g){return d=g,s=g(t),a=g(e),o=g(n),l=s===a?0:.5/(a-s),c=a===o?0:.5/(o-a),r=a<s?-1:1,m}}function lee(){var t=Wu(P1()(Bs));return t.copy=function(){return Hu(t,lee())},Wl.apply(t,arguments)}function cee(){var t=Y2(P1()).domain([.1,1,10]);return t.copy=function(){return Hu(t,cee()).base(t.base())},Wl.apply(t,arguments)}function uee(){var t=Q2(P1());return t.copy=function(){return Hu(t,uee()).constant(t.constant())},Wl.apply(t,arguments)}function lM(){var t=X2(P1());return t.copy=function(){return Hu(t,lM()).exponent(t.exponent())},Wl.apply(t,arguments)}function R6e(){return lM.apply(null,arguments).exponent(.5)}const m5=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Mv,scaleDiverging:lee,scaleDivergingLog:cee,scaleDivergingPow:lM,scaleDivergingSqrt:R6e,scaleDivergingSymlog:uee,scaleIdentity:UJ,scaleImplicit:RP,scaleLinear:G_,scaleLog:qJ,scaleOrdinal:U2,scalePoint:Py,scalePow:Z2,scaleQuantile:KJ,scaleQuantize:GJ,scaleRadial:HJ,scaleSequential:see,scaleSequentialLog:iee,scaleSequentialPow:oM,scaleSequentialQuantile:oee,scaleSequentialSqrt:k6e,scaleSequentialSymlog:aee,scaleSqrt:fUe,scaleSymlog:WJ,scaleThreshold:YJ,scaleTime:P6e,scaleUtc:I6e,tickFormat:BJ},Symbol.toStringTag,{value:"Module"}));var O6e=Up;function M6e(t,e,n){for(var r=-1,s=t.length;++r<s;){var a=t[r],o=e(a);if(o!=null&&(l===void 0?o===o&&!O6e(o):n(o,l)))var l=o,c=a}return c}var I1=M6e;function D6e(t,e){return t>e}var dee=D6e,L6e=I1,$6e=dee,F6e=Xp;function V6e(t){return t&&t.length?L6e(t,F6e,$6e):void 0}var B6e=V6e;const Uc=gn(B6e);function U6e(t,e){return t<e}var hee=U6e,z6e=I1,q6e=hee,W6e=Xp;function H6e(t){return t&&t.length?z6e(t,W6e,q6e):void 0}var K6e=H6e;const k1=gn(K6e);var G6e=_2,Y6e=Yo,Q6e=bJ,X6e=mi;function Z6e(t,e){var n=X6e(t)?G6e:Q6e;return n(t,Y6e(e))}var J6e=Z6e,eze=vJ,tze=J6e;function nze(t,e){return eze(tze(t,e),1)}var rze=nze;const sze=gn(rze);var ize=L2;function aze(t,e){return ize(t,e)}var oze=aze;const Qm=gn(oze);var Jp=1e9,lze={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},uM,qn=!0,da="[DecimalError] ",zd=da+"Invalid argument: ",cM=da+"Exponent out of range: ",eg=Math.floor,hd=Math.pow,cze=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ni,Kr=1e7,Vn=7,fee=9007199254740991,Z_=eg(fee/Vn),Ze={};Ze.absoluteValue=Ze.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ze.comparedTo=Ze.cmp=function(t){var e,n,r,s,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,s=t.d.length,e=0,n=r<s?r:s;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===s?0:r>s^a.s<0?1:-1};Ze.decimalPlaces=Ze.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Vn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Ze.dividedBy=Ze.div=function(t){return vl(this,new this.constructor(t))};Ze.dividedToIntegerBy=Ze.idiv=function(t){var e=this,n=e.constructor;return En(vl(e,new n(t),0,1),n.precision)};Ze.equals=Ze.eq=function(t){return!this.cmp(t)};Ze.exponent=function(){return Cr(this)};Ze.greaterThan=Ze.gt=function(t){return this.cmp(t)>0};Ze.greaterThanOrEqualTo=Ze.gte=function(t){return this.cmp(t)>=0};Ze.isInteger=Ze.isint=function(){return this.e>this.d.length-2};Ze.isNegative=Ze.isneg=function(){return this.s<0};Ze.isPositive=Ze.ispos=function(){return this.s>0};Ze.isZero=function(){return this.s===0};Ze.lessThan=Ze.lt=function(t){return this.cmp(t)<0};Ze.lessThanOrEqualTo=Ze.lte=function(t){return this.cmp(t)<1};Ze.logarithm=Ze.log=function(t){var e,n=this,r=n.constructor,s=r.precision,a=s+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Ni))throw Error(da+"NaN");if(n.s<1)throw Error(da+(n.s?"NaN":"-Infinity"));return n.eq(Ni)?new r(0):(qn=!1,e=vl(Vv(n,a),Vv(t,a),a),qn=!0,En(e,s))};Ze.minus=Ze.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?gee(e,t):mee(e,(t.s=-t.s,t))};Ze.modulo=Ze.mod=function(t){var e,n=this,r=n.constructor,s=r.precision;if(t=new r(t),!t.s)throw Error(da+"NaN");return n.s?(qn=!1,e=vl(n,t,0,1).times(t),qn=!0,n.minus(e)):En(new r(n),s)};Ze.naturalExponential=Ze.exp=function(){return pee(this)};Ze.naturalLogarithm=Ze.ln=function(){return Vv(this)};Ze.negated=Ze.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ze.plus=Ze.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?mee(e,t):gee(e,(t.s=-t.s,t))};Ze.precision=Ze.sd=function(t){var e,n,r,s=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(zd+t);if(e=Cr(s)+1,r=s.d.length-1,n=r*Vn+1,r=s.d[r],r){for(;r%10==0;r/=10)n--;for(r=s.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Ze.squareRoot=Ze.sqrt=function(){var t,e,n,r,s,a,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(da+"NaN")}for(t=Cr(l),qn=!1,s=Math.sqrt(+l),s==0||s==1/0?(e=xo(l.d),(e.length+t)%2==0&&(e+="0"),s=Math.sqrt(e),t=eg((t+1)/2)-(t<0||t%2),s==1/0?e="5e"+t:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(s.toString()),n=c.precision,s=o=n+3;;)if(a=r,r=a.plus(vl(l,a,o+2)).times(.5),xo(a.d).slice(0,o)===(e=xo(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),s==o&&e=="4999"){if(En(a,n+1,0),a.times(a).eq(l)){r=a;break}}else if(e!="9999")break;o+=4}return qn=!0,En(r,n)};Ze.times=Ze.mul=function(t){var e,n,r,s,a,o,l,c,u,d=this,h=d.constructor,f=d.d,m=(t=new h(t)).d;if(!d.s||!t.s)return new h(0);for(t.s*=d.s,n=d.e+t.e,c=f.length,u=m.length,c<u&&(a=f,f=m,m=a,o=c,c=u,u=o),a=[],o=c+u,r=o;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,s=c+r;s>r;)l=a[s]+m[r]*f[s-r-1]+e,a[s--]=l%Kr|0,e=l/Kr|0;a[s]=(a[s]+e)%Kr|0}for(;!a[--o];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,qn?En(t,h.precision):t};Ze.toDecimalPlaces=Ze.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Vo(t,0,Jp),e===void 0?e=r.rounding:Vo(e,0,8),En(n,t+Cr(n)+1,e))};Ze.toExponential=function(t,e){var n,r=this,s=r.constructor;return t===void 0?n=bh(r,!0):(Vo(t,0,Jp),e===void 0?e=s.rounding:Vo(e,0,8),r=En(new s(r),t+1,e),n=bh(r,!0,t+1)),n};Ze.toFixed=function(t,e){var n,r,s=this,a=s.constructor;return t===void 0?bh(s):(Vo(t,0,Jp),e===void 0?e=a.rounding:Vo(e,0,8),r=En(new a(s),t+Cr(s)+1,e),n=bh(r.abs(),!1,t+Cr(r)+1),s.isneg()&&!s.isZero()?"-"+n:n)};Ze.toInteger=Ze.toint=function(){var t=this,e=t.constructor;return En(new e(t),Cr(t)+1,e.rounding)};Ze.toNumber=function(){return+this};Ze.toPower=Ze.pow=function(t){var e,n,r,s,a,o,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(Ni);if(l=new c(l),!l.s){if(t.s<1)throw Error(da+"Infinity");return l}if(l.eq(Ni))return l;if(r=c.precision,t.eq(Ni))return En(l,r);if(e=t.e,n=t.d.length-1,o=e>=n,a=l.s,o){if((n=d<0?-d:d)<=fee){for(s=new c(Ni),e=Math.ceil(r/Vn+4),qn=!1;n%2&&(s=s.times(l),g5(s.d,e)),n=eg(n/2),n!==0;)l=l.times(l),g5(l.d,e);return qn=!0,t.s<0?new c(Ni).div(s):En(s,r)}}else if(a<0)throw Error(da+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,qn=!1,s=t.times(Vv(l,r+u)),qn=!0,s=pee(s),s.s=a,s};Ze.toPrecision=function(t,e){var n,r,s=this,a=s.constructor;return t===void 0?(n=Cr(s),r=bh(s,n<=a.toExpNeg||n>=a.toExpPos)):(Vo(t,1,Jp),e===void 0?e=a.rounding:Vo(e,0,8),s=En(new a(s),t,e),n=Cr(s),r=bh(s,t<=n||n<=a.toExpNeg,t)),r};Ze.toSignificantDigits=Ze.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Vo(t,1,Jp),e===void 0?e=r.rounding:Vo(e,0,8)),En(new r(n),t,e)};Ze.toString=Ze.valueOf=Ze.val=Ze.toJSON=Ze[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Cr(t),n=t.constructor;return bh(t,e<=n.toExpNeg||e>=n.toExpPos)};function mee(t,e){var n,r,s,a,o,l,c,u,d=t.constructor,h=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),qn?En(e,h):e;if(c=t.d,u=e.d,o=t.e,s=e.e,c=c.slice(),a=o-s,a){for(a<0?(r=c,a=-a,l=u.length):(r=u,s=o,l=c.length),o=Math.ceil(h/Vn),l=o>l?o+1:l+1,a>l&&(a=l,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(l=c.length,a=u.length,l-a<0&&(a=l,r=u,u=c,c=r),n=0;a;)n=(c[--a]=c[a]+u[a]+n)/Kr|0,c[a]%=Kr;for(n&&(c.unshift(n),++s),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=s,qn?En(e,h):e}function Vo(t,e,n){if(t!==~~t||t<e||t>n)throw Error(zd+t)}function xo(t){var e,n,r,s=t.length-1,a="",o=t[0];if(s>0){for(a+=o,e=1;e<s;e++)r=t[e]+"",n=Vn-r.length,n&&(a+=yc(n)),a+=r;o=t[e],r=o+"",n=Vn-r.length,n&&(a+=yc(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var vl=function(){function t(r,s){var a,o=0,l=r.length;for(r=r.slice();l--;)a=r[l]*s+o,r[l]=a%Kr|0,o=a/Kr|0;return o&&r.unshift(o),r}function e(r,s,a,o){var l,c;if(a!=o)c=a>o?1:-1;else for(l=c=0;l<a;l++)if(r[l]!=s[l]){c=r[l]>s[l]?1:-1;break}return c}function n(r,s,a){for(var o=0;a--;)r[a]-=o,o=r[a]<s[a]?1:0,r[a]=o*Kr+r[a]-s[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,a,o){var l,c,u,d,h,f,m,v,g,y,w,b,E,T,x,S,_,p,A=r.constructor,P=r.s==s.s?1:-1,C=r.d,I=s.d;if(!r.s)return new A(r);if(!s.s)throw Error(da+"Division by zero");for(c=r.e-s.e,_=I.length,x=C.length,m=new A(P),v=m.d=[],u=0;I[u]==(C[u]||0);)++u;if(I[u]>(C[u]||0)&&--c,a==null?b=a=A.precision:o?b=a+(Cr(r)-Cr(s))+1:b=a,b<0)return new A(0);if(b=b/Vn+2|0,u=0,_==1)for(d=0,I=I[0],b++;(u<x||d)&&b--;u++)E=d*Kr+(C[u]||0),v[u]=E/I|0,d=E%I|0;else{for(d=Kr/(I[0]+1)|0,d>1&&(I=t(I,d),C=t(C,d),_=I.length,x=C.length),T=_,g=C.slice(0,_),y=g.length;y<_;)g[y++]=0;p=I.slice(),p.unshift(0),S=I[0],I[1]>=Kr/2&&++S;do d=0,l=e(I,g,_,y),l<0?(w=g[0],_!=y&&(w=w*Kr+(g[1]||0)),d=w/S|0,d>1?(d>=Kr&&(d=Kr-1),h=t(I,d),f=h.length,y=g.length,l=e(h,g,f,y),l==1&&(d--,n(h,_<f?p:I,f))):(d==0&&(l=d=1),h=I.slice()),f=h.length,f<y&&h.unshift(0),n(g,h,y),l==-1&&(y=g.length,l=e(I,g,_,y),l<1&&(d++,n(g,_<y?p:I,y))),y=g.length):l===0&&(d++,g=[0]),v[u++]=d,l&&g[0]?g[y++]=C[T]||0:(g=[C[T]],y=1);while((T++<x||g[0]!==void 0)&&b--)}return v[0]||v.shift(),m.e=c,En(m,o?a+Cr(m)+1:a)}}();function pee(t,e){var n,r,s,a,o,l,c=0,u=0,d=t.constructor,h=d.precision;if(Cr(t)>16)throw Error(cM+Cr(t));if(!t.s)return new d(Ni);for(e==null?(qn=!1,l=h):l=e,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(r=Math.log(hd(2,u))/Math.LN10*2+5|0,l+=r,n=s=a=new d(Ni),d.precision=l;;){if(s=En(s.times(t),l),n=n.times(++c),o=a.plus(vl(s,n,l)),xo(o.d).slice(0,l)===xo(a.d).slice(0,l)){for(;u--;)a=En(a.times(a),l);return d.precision=h,e==null?(qn=!0,En(a,h)):a}a=o}}function Cr(t){for(var e=t.e*Vn,n=t.d[0];n>=10;n/=10)e++;return e}function cA(t,e,n){if(e>t.LN10.sd())throw qn=!0,n&&(t.precision=n),Error(da+"LN10 precision limit exceeded");return En(new t(t.LN10),e)}function yc(t){for(var e="";t--;)e+="0";return e}function Vv(t,e){var n,r,s,a,o,l,c,u,d,h=1,f=10,m=t,v=m.d,g=m.constructor,y=g.precision;if(m.s<1)throw Error(da+(m.s?"NaN":"-Infinity"));if(m.eq(Ni))return new g(0);if(e==null?(qn=!1,u=y):u=e,m.eq(10))return e==null&&(qn=!0),cA(g,u);if(u+=f,g.precision=u,n=xo(v),r=n.charAt(0),a=Cr(m),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(t),n=xo(m.d),r=n.charAt(0),h++;a=Cr(m),r>1?(m=new g("0."+n),a++):m=new g(r+"."+n.slice(1))}else return c=cA(g,u+2,y).times(a+""),m=Vv(new g(r+"."+n.slice(1)),u-f).plus(c),g.precision=y,e==null?(qn=!0,En(m,y)):m;for(l=o=m=vl(m.minus(Ni),m.plus(Ni),u),d=En(m.times(m),u),s=3;;){if(o=En(o.times(d),u),c=l.plus(vl(o,new g(s),u)),xo(c.d).slice(0,u)===xo(l.d).slice(0,u))return l=l.times(2),a!==0&&(l=l.plus(cA(g,u+2,y).times(a+""))),l=vl(l,new g(h),u),g.precision=y,e==null?(qn=!0,En(l,y)):l;l=c,s+=2}}function p5(t,e){var n,r,s;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(s=e.length;e.charCodeAt(s-1)===48;)--s;if(e=e.slice(r,s),e){if(s-=r,n=n-r-1,t.e=eg(n/Vn),t.d=[],r=(n+1)%Vn,n<0&&(r+=Vn),r<s){for(r&&t.d.push(+e.slice(0,r)),s-=Vn;r<s;)t.d.push(+e.slice(r,r+=Vn));e=e.slice(r),r=Vn-e.length}else r-=s;for(;r--;)e+="0";if(t.d.push(+e),qn&&(t.e>Z_||t.e<-Z_))throw Error(cM+n)}else t.s=0,t.e=0,t.d=[0];return t}function En(t,e,n){var r,s,a,o,l,c,u,d,h=t.d;for(o=1,a=h[0];a>=10;a/=10)o++;if(r=e-o,r<0)r+=Vn,s=e,u=h[d=0];else{if(d=Math.ceil((r+1)/Vn),a=h.length,d>=a)return t;for(u=a=h[d],o=1;a>=10;a/=10)o++;r%=Vn,s=r-Vn+o}if(n!==void 0&&(a=hd(10,o-s-1),l=u/a%10|0,c=e<0||h[d+1]!==void 0||u%a,c=n<4?(l||c)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?s>0?u/hd(10,o-s):0:h[d-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return c?(a=Cr(t),h.length=1,e=e-a-1,h[0]=hd(10,(Vn-e%Vn)%Vn),t.e=eg(-e/Vn)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=d,a=1,d--):(h.length=d+1,a=hd(10,Vn-r),h[d]=s>0?(u/hd(10,o-s)%hd(10,s)|0)*a:0),c)for(;;)if(d==0){(h[0]+=a)==Kr&&(h[0]=1,++t.e);break}else{if(h[d]+=a,h[d]!=Kr)break;h[d--]=0,a=1}for(r=h.length;h[--r]===0;)h.pop();if(qn&&(t.e>Z_||t.e<-Z_))throw Error(cM+Cr(t));return t}function gee(t,e){var n,r,s,a,o,l,c,u,d,h,f=t.constructor,m=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),qn?En(e,m):e;if(c=t.d,h=e.d,r=e.e,u=t.e,c=c.slice(),o=u-r,o){for(d=o<0,d?(n=c,o=-o,l=h.length):(n=h,r=u,l=c.length),s=Math.max(Math.ceil(m/Vn),l)+2,o>s&&(o=s,n.length=1),n.reverse(),s=o;s--;)n.push(0);n.reverse()}else{for(s=c.length,l=h.length,d=s<l,d&&(l=s),s=0;s<l;s++)if(c[s]!=h[s]){d=c[s]<h[s];break}o=0}for(d&&(n=c,c=h,h=n,e.s=-e.s),l=c.length,s=h.length-l;s>0;--s)c[l++]=0;for(s=h.length;s>o;){if(c[--s]<h[s]){for(a=s;a&&c[--a]===0;)c[a]=Kr-1;--c[a],c[s]+=Kr}c[s]-=h[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,qn?En(e,m):e):new f(0)}function bh(t,e,n){var r,s=Cr(t),a=xo(t.d),o=a.length;return e?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+yc(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(s<0?"e":"e+")+s):s<0?(a="0."+yc(-s-1)+a,n&&(r=n-o)>0&&(a+=yc(r))):s>=o?(a+=yc(s+1-o),n&&(r=n-s-1)>0&&(a=a+"."+yc(r))):((r=s+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(s+1===o&&(a+="."),a+=yc(r))),t.s<0?"-"+a:a}function g5(t,e){if(t.length>e)return t.length=e,!0}function yee(t){var e,n,r;function s(a){var o=this;if(!(o instanceof s))return new s(a);if(o.constructor=s,a instanceof s){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(zd+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return p5(o,a.toString())}else if(typeof a!="string")throw Error(zd+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,cze.test(a))p5(o,a);else throw Error(zd+a)}if(s.prototype=Ze,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=yee,s.config=s.set=uze,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return s.config(t),s}function uze(t){if(!t||typeof t!="object")throw Error(da+"Object expected");var e,n,r,s=["precision",1,Jp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<s.length;e+=3)if((r=t[n=s[e]])!==void 0)if(eg(r)===r&&r>=s[e+1]&&r<=s[e+2])this[n]=r;else throw Error(zd+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(zd+n+": "+r);return this}var uM=yee(lze);Ni=new uM(1);const jn=uM;function dze(t){return pze(t)||mze(t)||fze(t)||hze()}function hze(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fze(t,e){if(t){if(typeof t=="string")return LP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LP(t,e)}}function mze(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function pze(t){if(Array.isArray(t))return LP(t)}function LP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var gze=function(e){return e},vee={"@@functional/placeholder":!0},xee=function(e){return e===vee},y5=function(e){return function n(){return arguments.length===0||arguments.length===1&&xee(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},yze=function t(e,n){return e===1?n:y5(function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];var o=s.filter(function(l){return l!==vee}).length;return o>=e?n.apply(void 0,s):t(e-o,y5(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=s.map(function(h){return xee(h)?c.shift():h});return n.apply(void 0,dze(d).concat(c))}))})},R1=function(e){return yze(e.length,e)},$P=function(e,n){for(var r=[],s=e;s<n;++s)r[s-e]=s;return r},vze=R1(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),xze=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return gze;var s=n.reverse(),a=s[0],o=s.slice(1);return function(){return o.reduce(function(l,c){return c(l)},a.apply(void 0,arguments))}},FP=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},bee=function(e){var n=null,r=null;return function(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return n&&a.every(function(l,c){return l===n[c]})||(n=a,r=e.apply(void 0,a)),r}};function bze(t){var e;return t===0?e=1:e=Math.floor(new jn(t).abs().log(10).toNumber())+1,e}function wze(t,e,n){for(var r=new jn(t),s=0,a=[];r.lt(e)&&s<1e5;)a.push(r.toNumber()),r=r.add(n),s++;return a}var _ze=R1(function(t,e,n){var r=+t,s=+e;return r+n*(s-r)}),jze=R1(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),Nze=R1(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const O1={rangeStep:wze,getDigitCount:bze,interpolateNumber:_ze,uninterpolateNumber:jze,uninterpolateTruncation:Nze};function VP(t){return Aze(t)||Eze(t)||wee(t)||Sze()}function Sze(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eze(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Aze(t){if(Array.isArray(t))return BP(t)}function Bv(t,e){return Pze(t)||Cze(t,e)||wee(t,e)||Tze()}function Tze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wee(t,e){if(t){if(typeof t=="string")return BP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BP(t,e)}}function BP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Cze(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,s=!1,a=void 0;try{for(var o=t[Symbol.iterator](),l;!(r=(l=o.next()).done)&&(n.push(l.value),!(e&&n.length===e));r=!0);}catch(c){s=!0,a=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(s)throw a}}return n}}function Pze(t){if(Array.isArray(t))return t}function _ee(t){var e=Bv(t,2),n=e[0],r=e[1],s=n,a=r;return n>r&&(s=r,a=n),[s,a]}function jee(t,e,n){if(t.lte(0))return new jn(0);var r=O1.getDigitCount(t.toNumber()),s=new jn(10).pow(r),a=t.div(s),o=r!==1?.05:.1,l=new jn(Math.ceil(a.div(o).toNumber())).add(n).mul(o),c=l.mul(s);return e?c:new jn(Math.ceil(c))}function Ize(t,e,n){var r=1,s=new jn(t);if(!s.isint()&&n){var a=Math.abs(t);a<1?(r=new jn(10).pow(O1.getDigitCount(t)-1),s=new jn(Math.floor(s.div(r).toNumber())).mul(r)):a>1&&(s=new jn(Math.floor(t)))}else t===0?s=new jn(Math.floor((e-1)/2)):n||(s=new jn(Math.floor(t)));var o=Math.floor((e-1)/2),l=xze(vze(function(c){return s.add(new jn(c-o).mul(r)).toNumber()}),$P);return l(0,e)}function Nee(t,e,n,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new jn(0),tickMin:new jn(0),tickMax:new jn(0)};var a=jee(new jn(e).sub(t).div(n-1),r,s),o;t<=0&&e>=0?o=new jn(0):(o=new jn(t).add(e).div(2),o=o.sub(new jn(o).mod(a)));var l=Math.ceil(o.sub(t).div(a).toNumber()),c=Math.ceil(new jn(e).sub(o).div(a).toNumber()),u=l+c+1;return u>n?Nee(t,e,n,r,s+1):(u<n&&(c=e>0?c+(n-u):c,l=e>0?l:l+(n-u)),{step:a,tickMin:o.sub(new jn(l).mul(a)),tickMax:o.add(new jn(c).mul(a))})}function kze(t){var e=Bv(t,2),n=e[0],r=e[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=_ee([n,r]),c=Bv(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var h=d===1/0?[u].concat(VP($P(0,s-1).map(function(){return 1/0}))):[].concat(VP($P(0,s-1).map(function(){return-1/0})),[d]);return n>r?FP(h):h}if(u===d)return Ize(u,s,a);var f=Nee(u,d,o,a),m=f.step,v=f.tickMin,g=f.tickMax,y=O1.rangeStep(v,g.add(new jn(.1).mul(m)),m);return n>r?FP(y):y}function Rze(t,e){var n=Bv(t,2),r=n[0],s=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=_ee([r,s]),l=Bv(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[r,s];if(c===u)return[c];var d=Math.max(e,2),h=jee(new jn(u).sub(c).div(d-1),a,0),f=[].concat(VP(O1.rangeStep(new jn(c),new jn(u).sub(new jn(.99).mul(h)),h)),[u]);return r>s?FP(f):f}var Oze=bee(kze),Mze=bee(Rze),Dze="Invariant failed";function wh(t,e){throw new Error(Dze)}var Lze=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Xm(t){"@babel/helpers - typeof";return Xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xm(t)}function J_(){return J_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},J_.apply(this,arguments)}function $ze(t,e){return Uze(t)||Bze(t,e)||Vze(t,e)||Fze()}function Fze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vze(t,e){if(t){if(typeof t=="string")return v5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v5(t,e)}}function v5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Bze(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Uze(t){if(Array.isArray(t))return t}function zze(t,e){if(t==null)return{};var n=qze(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qze(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Wze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hze(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Aee(r.key),r)}}function Kze(t,e,n){return e&&Hze(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gze(t,e,n){return e=ej(e),Yze(t,See()?Reflect.construct(e,n||[],ej(t).constructor):e.apply(t,n))}function Yze(t,e){if(e&&(Xm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qze(t)}function Qze(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function See(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(See=function(){return!!t})()}function ej(t){return ej=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ej(t)}function Xze(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UP(t,e)}function UP(t,e){return UP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},UP(t,e)}function Eee(t,e,n){return e=Aee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Aee(t){var e=Zze(t,"string");return Xm(e)=="symbol"?e:e+""}function Zze(t,e){if(Xm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Xm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var M1=function(t){function e(){return Wze(this,e),Gze(this,e,arguments)}return Xze(e,t),Kze(e,[{key:"render",value:function(){var r=this.props,s=r.offset,a=r.layout,o=r.width,l=r.dataKey,c=r.data,u=r.dataPointFormatter,d=r.xAxis,h=r.yAxis,f=zze(r,Lze),m=ft(f,!1);this.props.direction==="x"&&d.type!=="number"&&wh();var v=c.map(function(g){var y=u(g,l),w=y.x,b=y.y,E=y.value,T=y.errorVal;if(!T)return null;var x=[],S,_;if(Array.isArray(T)){var p=$ze(T,2);S=p[0],_=p[1]}else S=_=T;if(a==="vertical"){var A=d.scale,P=b+s,C=P+o,I=P-o,R=A(E-S),L=A(E+_);x.push({x1:L,y1:C,x2:L,y2:I}),x.push({x1:R,y1:P,x2:L,y2:P}),x.push({x1:R,y1:C,x2:R,y2:I})}else if(a==="horizontal"){var z=h.scale,W=w+s,M=W-o,V=W+o,F=z(E-S),Y=z(E+_);x.push({x1:M,y1:Y,x2:V,y2:Y}),x.push({x1:W,y1:F,x2:W,y2:Y}),x.push({x1:M,y1:F,x2:V,y2:F})}return D.createElement(tn,J_({className:"recharts-errorBar",key:"bar-".concat(x.map(function(ae){return"".concat(ae.x1,"-").concat(ae.x2,"-").concat(ae.y1,"-").concat(ae.y2)}))},m),x.map(function(ae){return D.createElement("line",J_({},ae,{key:"line-".concat(ae.x1,"-").concat(ae.x2,"-").concat(ae.y1,"-").concat(ae.y2)}))}))});return D.createElement(tn,{className:"recharts-errorBars"},v)}}])}(D.Component);Eee(M1,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});Eee(M1,"displayName","ErrorBar");function Uv(t){"@babel/helpers - typeof";return Uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uv(t)}function x5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function rd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x5(Object(n),!0).forEach(function(r){Jze(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jze(t,e,n){return e=e9e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e9e(t){var e=t9e(t,"string");return Uv(e)=="symbol"?e:e+""}function t9e(t,e){if(Uv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Uv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Tee=function(e){var n=e.children,r=e.formattedGraphicalItems,s=e.legendWidth,a=e.legendContent,o=wi(n,Jf);if(!o)return null;var l=Jf.defaultProps,c=l!==void 0?rd(rd({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:a==="children"?u=(r||[]).reduce(function(d,h){var f=h.item,m=h.props,v=m.sectors||m.data||[];return d.concat(v.map(function(g){return{type:o.props.iconType||f.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):u=(r||[]).map(function(d){var h=d.item,f=h.type.defaultProps,m=f!==void 0?rd(rd({},f),h.props):{},v=m.dataKey,g=m.name,y=m.legendType,w=m.hide;return{inactive:w,dataKey:v,type:c.iconType||y||"square",color:dM(h),value:g||v,payload:m}}),rd(rd(rd({},c),Jf.getWithHeight(o,s)),{},{payload:u,item:o})};function zv(t){"@babel/helpers - typeof";return zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zv(t)}function b5(t){return i9e(t)||s9e(t)||r9e(t)||n9e()}function n9e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r9e(t,e){if(t){if(typeof t=="string")return zP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zP(t,e)}}function s9e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function i9e(t){if(Array.isArray(t))return zP(t)}function zP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function w5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function lr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w5(Object(n),!0).forEach(function(r){tm(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tm(t,e,n){return e=a9e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a9e(t){var e=o9e(t,"string");return zv(e)=="symbol"?e:e+""}function o9e(t,e){if(zv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(zv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $r(t,e,n){return Ft(t)||Ft(e)?n:Vr(e)?Ri(t,e,n):wt(e)?e(t):n}function Iy(t,e,n,r){var s=sze(t,function(l){return $r(l,e)});if(n==="number"){var a=s.filter(function(l){return Ee(l)||parseFloat(l)});return a.length?[k1(a),Uc(a)]:[1/0,-1/0]}var o=r?s.filter(function(l){return!Ft(l)}):s;return o.map(function(l){return Vr(l)||l instanceof Date?l:""})}var l9e=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var c=a.range,u=0;u<l;u++){var d=u>0?s[u-1].coordinate:s[l-1].coordinate,h=s[u].coordinate,f=u>=l-1?s[0].coordinate:s[u+1].coordinate,m=void 0;if(Fs(h-d)!==Fs(f-h)){var v=[];if(Fs(f-h)===Fs(c[1]-c[0])){m=f;var g=h+c[1]-c[0];v[0]=Math.min(g,(g+d)/2),v[1]=Math.max(g,(g+d)/2)}else{m=d;var y=f+c[1]-c[0];v[0]=Math.min(h,(y+h)/2),v[1]=Math.max(h,(y+h)/2)}var w=[Math.min(h,(m+h)/2),Math.max(h,(m+h)/2)];if(e>w[0]&&e<=w[1]||e>=v[0]&&e<=v[1]){o=s[u].index;break}}else{var b=Math.min(d,f),E=Math.max(d,f);if(e>(b+h)/2&&e<=(E+h)/2){o=s[u].index;break}}}else for(var T=0;T<l;T++)if(T===0&&e<=(r[T].coordinate+r[T+1].coordinate)/2||T>0&&T<l-1&&e>(r[T].coordinate+r[T-1].coordinate)/2&&e<=(r[T].coordinate+r[T+1].coordinate)/2||T===l-1&&e>(r[T].coordinate+r[T-1].coordinate)/2){o=r[T].index;break}return o},dM=function(e){var n,r=e,s=r.type.displayName,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?lr(lr({},e.type.defaultProps),e.props):e.props,o=a.stroke,l=a.fill,c;switch(s){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},c9e=function(e){var n=e.barSize,r=e.totalSize,s=e.stackGroups,a=s===void 0?{}:s;if(!a)return{};for(var o={},l=Object.keys(a),c=0,u=l.length;c<u;c++)for(var d=a[l[c]].stackGroups,h=Object.keys(d),f=0,m=h.length;f<m;f++){var v=d[h[f]],g=v.items,y=v.cateAxisId,w=g.filter(function(_){return yl(_.type).indexOf("Bar")>=0});if(w&&w.length){var b=w[0].type.defaultProps,E=b!==void 0?lr(lr({},b),w[0].props):w[0].props,T=E.barSize,x=E[y];o[x]||(o[x]=[]);var S=Ft(T)?n:T;o[x].push({item:w[0],stackList:w.slice(1),barSize:Ft(S)?void 0:Vs(S,r,0)})}}return o},u9e=function(e){var n=e.barGap,r=e.barCategoryGap,s=e.bandSize,a=e.sizeList,o=a===void 0?[]:a,l=e.maxBarSize,c=o.length;if(c<1)return null;var u=Vs(n,s,0,!0),d,h=[];if(o[0].barSize===+o[0].barSize){var f=!1,m=s/c,v=o.reduce(function(T,x){return T+x.barSize||0},0);v+=(c-1)*u,v>=s&&(v-=(c-1)*u,u=0),v>=s&&m>0&&(f=!0,m*=.9,v=c*m);var g=(s-v)/2>>0,y={offset:g-u,size:0};d=o.reduce(function(T,x){var S={item:x.item,position:{offset:y.offset+y.size+u,size:f?m:x.barSize}},_=[].concat(b5(T),[S]);return y=_[_.length-1].position,x.stackList&&x.stackList.length&&x.stackList.forEach(function(p){_.push({item:p,position:y})}),_},h)}else{var w=Vs(r,s,0,!0);s-2*w-(c-1)*u<=0&&(u=0);var b=(s-2*w-(c-1)*u)/c;b>1&&(b>>=0);var E=l===+l?Math.min(b,l):b;d=o.reduce(function(T,x,S){var _=[].concat(b5(T),[{item:x.item,position:{offset:w+(b+u)*S+(b-E)/2,size:E}}]);return x.stackList&&x.stackList.length&&x.stackList.forEach(function(p){_.push({item:p,position:_[_.length-1].position})}),_},h)}return d},d9e=function(e,n,r,s){var a=r.children,o=r.width,l=r.margin,c=o-(l.left||0)-(l.right||0),u=Tee({children:a,legendWidth:c});if(u){var d=s||{},h=d.width,f=d.height,m=u.align,v=u.verticalAlign,g=u.layout;if((g==="vertical"||g==="horizontal"&&v==="middle")&&m!=="center"&&Ee(e[m]))return lr(lr({},e),{},tm({},m,e[m]+(h||0)));if((g==="horizontal"||g==="vertical"&&m==="center")&&v!=="middle"&&Ee(e[v]))return lr(lr({},e),{},tm({},v,e[v]+(f||0)))}return e},h9e=function(e,n,r){return Ft(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},Cee=function(e,n,r,s,a){var o=n.props.children,l=ia(o,M1).filter(function(u){return h9e(s,a,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var h=$r(d,r);if(Ft(h))return u;var f=Array.isArray(h)?[k1(h),Uc(h)]:[h,h],m=c.reduce(function(v,g){var y=$r(d,g,0),w=f[0]-Math.abs(Array.isArray(y)?y[0]:y),b=f[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(w,v[0]),Math.max(b,v[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},f9e=function(e,n,r,s,a){var o=n.map(function(l){return Cee(e,l,r,a,s)}).filter(function(l){return!Ft(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},Pee=function(e,n,r,s,a){var o=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&Cee(e,c,u,s)||Iy(e,u,r,a)});if(r==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,h=u.length;d<h;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},Iee=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},kee=function(e,n,r,s){if(s)return e.map(function(c){return c.coordinate});var a,o,l=e.map(function(c){return c.coordinate===n&&(a=!0),c.coordinate===r&&(o=!0),c.coordinate});return a||l.push(n),o||l.push(r),l},fl=function(e,n,r){if(!e)return null;var s=e.scale,a=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?s.bandwidth()/2:2,u=(n||r)&&o==="category"&&s.bandwidth?s.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Fs(l[0]-l[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(h){var f=a?a.indexOf(h):h;return{coordinate:s(f)+u,value:h,offset:u}});return d.filter(function(h){return!Kp(h.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(h,f){return{coordinate:s(h)+u,value:h,index:f,offset:u}}):s.ticks&&!r?s.ticks(e.tickCount).map(function(h){return{coordinate:s(h)+u,value:h,offset:u}}):s.domain().map(function(h,f){return{coordinate:s(h)+u,value:a?a[h]:h,index:f,offset:u}})},uA=new WeakMap,m0=function(e,n){if(typeof n!="function")return e;uA.has(e)||uA.set(e,new WeakMap);var r=uA.get(e);if(r.has(n))return r.get(n);var s=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,s),s},Ree=function(e,n,r){var s=e.scale,a=e.type,o=e.layout,l=e.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Mv(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:G_(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Py(),realScaleType:"point"}:a==="category"?{scale:Mv(),realScaleType:"band"}:{scale:G_(),realScaleType:"linear"};if(yh(s)){var c="scale".concat(y1(s));return{scale:(m5[c]||Py)(),realScaleType:m5[c]?c:"point"}}return wt(s)?{scale:s}:{scale:Py(),realScaleType:"point"}},_5=1e-4,Oee=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,s=e.range(),a=Math.min(s[0],s[1])-_5,o=Math.max(s[0],s[1])+_5,l=e(n[0]),c=e(n[r-1]);(l<a||l>o||c<a||c>o)&&e.domain([n[0],n[r-1]])}},m9e=function(e,n){if(!e)return null;for(var r=0,s=e.length;r<s;r++)if(e[r].item===n)return e[r].position;return null},p9e=function(e,n){if(!n||n.length!==2||!Ee(n[0])||!Ee(n[1]))return e;var r=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]),a=[e[0],e[1]];return(!Ee(e[0])||e[0]<r)&&(a[0]=r),(!Ee(e[1])||e[1]>s)&&(a[1]=s),a[0]>s&&(a[0]=s),a[1]<r&&(a[1]=r),a},g9e=function(e){var n=e.length;if(!(n<=0))for(var r=0,s=e[0].length;r<s;++r)for(var a=0,o=0,l=0;l<n;++l){var c=Kp(e[l][r][1])?e[l][r][0]:e[l][r][1];c>=0?(e[l][r][0]=a,e[l][r][1]=a+c,a=e[l][r][1]):(e[l][r][0]=o,e[l][r][1]=o+c,o=e[l][r][1])}},y9e=function(e){var n=e.length;if(!(n<=0))for(var r=0,s=e[0].length;r<s;++r)for(var a=0,o=0;o<n;++o){var l=Kp(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},v9e={sign:g9e,expand:L2e,none:Um,silhouette:$2e,wiggle:F2e,positive:y9e},x9e=function(e,n,r){var s=n.map(function(l){return l.props.dataKey}),a=v9e[r],o=D2e().keys(s).value(function(l,c){return+$r(l,c,0)}).order(mP).offset(a);return o(e)},b9e=function(e,n,r,s,a,o){if(!e)return null;var l=o?n.reverse():n,c={},u=l.reduce(function(h,f){var m,v=(m=f.type)!==null&&m!==void 0&&m.defaultProps?lr(lr({},f.type.defaultProps),f.props):f.props,g=v.stackId,y=v.hide;if(y)return h;var w=v[r],b=h[w]||{hasStack:!1,stackGroups:{}};if(Vr(g)){var E=b.stackGroups[g]||{numericAxisId:r,cateAxisId:s,items:[]};E.items.push(f),b.hasStack=!0,b.stackGroups[g]=E}else b.stackGroups[Gp("_stackId_")]={numericAxisId:r,cateAxisId:s,items:[f]};return lr(lr({},h),{},tm({},w,b))},c),d={};return Object.keys(u).reduce(function(h,f){var m=u[f];if(m.hasStack){var v={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(g,y){var w=m.stackGroups[y];return lr(lr({},g),{},tm({},y,{numericAxisId:r,cateAxisId:s,items:w.items,stackedData:x9e(e,w.items,a)}))},v)}return lr(lr({},h),{},tm({},f,m))},d)},Mee=function(e,n){var r=n.realScaleType,s=n.type,a=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(a&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=Oze(u,a,l);return e.domain([k1(d),Uc(d)]),{niceTicks:d}}if(a&&s==="number"){var h=e.domain(),f=Mze(h,a,l);return{niceTicks:f}}return null};function j5(t){var e=t.axis,n=t.ticks,r=t.bandSize,s=t.entry,a=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Ft(s[e.dataKey])){var l=A_(n,"value",s[e.dataKey]);if(l)return l.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var c=$r(s,Ft(o)?e.dataKey:o);return Ft(c)?null:e.scale(c)}var N5=function(e){var n=e.axis,r=e.ticks,s=e.offset,a=e.bandSize,o=e.entry,l=e.index;if(n.type==="category")return r[l]?r[l].coordinate+s:null;var c=$r(o,n.dataKey,n.domain[l]);return Ft(c)?null:n.scale(c)-a/2+s},w9e=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var s=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return s<=0&&a>=0?0:a<0?a:s}return r[0]},_9e=function(e,n){var r,s=(r=e.type)!==null&&r!==void 0&&r.defaultProps?lr(lr({},e.type.defaultProps),e.props):e.props,a=s.stackId;if(Vr(a)){var o=n[a];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},j9e=function(e){return e.reduce(function(n,r){return[k1(r.concat([n[0]]).filter(Ee)),Uc(r.concat([n[1]]).filter(Ee))]},[1/0,-1/0])},Dee=function(e,n,r){return Object.keys(e).reduce(function(s,a){var o=e[a],l=o.stackedData,c=l.reduce(function(u,d){var h=j9e(d.slice(n,r+1));return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},S5=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,E5=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,qP=function(e,n,r){if(wt(e))return e(n,r);if(!Array.isArray(e))return n;var s=[];if(Ee(e[0]))s[0]=r?e[0]:Math.min(e[0],n[0]);else if(S5.test(e[0])){var a=+S5.exec(e[0])[1];s[0]=n[0]-a}else wt(e[0])?s[0]=e[0](n[0]):s[0]=n[0];if(Ee(e[1]))s[1]=r?e[1]:Math.max(e[1],n[1]);else if(E5.test(e[1])){var o=+E5.exec(e[1])[1];s[1]=n[1]+o}else wt(e[1])?s[1]=e[1](n[1]):s[1]=n[1];return s},tj=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!r||s>0)return s}if(e&&n&&n.length>=2){for(var a=F2(n,function(h){return h.coordinate}),o=1/0,l=1,c=a.length;l<c;l++){var u=a[l],d=a[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},A5=function(e,n,r){return!e||!e.length||Qm(e,Ri(r,"type.defaultProps.domain"))?n:e},Lee=function(e,n){var r=e.type.defaultProps?lr(lr({},e.type.defaultProps),e.props):e.props,s=r.dataKey,a=r.name,o=r.unit,l=r.formatter,c=r.tooltipType,u=r.chartType,d=r.hide;return lr(lr({},ft(e,!1)),{},{dataKey:s,unit:o,formatter:l,name:a||s,color:dM(e),value:$r(n,s),type:c,payload:n,chartType:u,hide:d})};function qv(t){"@babel/helpers - typeof";return qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qv(t)}function T5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function nl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T5(Object(n),!0).forEach(function(r){$ee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $ee(t,e,n){return e=N9e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function N9e(t){var e=S9e(t,"string");return qv(e)=="symbol"?e:e+""}function S9e(t,e){if(qv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function E9e(t,e){return P9e(t)||C9e(t,e)||T9e(t,e)||A9e()}function A9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T9e(t,e){if(t){if(typeof t=="string")return C5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C5(t,e)}}function C5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function C9e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function P9e(t){if(Array.isArray(t))return t}var nj=Math.PI/180,I9e=function(e){return e*180/Math.PI},Mn=function(e,n,r,s){return{x:e+Math.cos(-nj*s)*r,y:n+Math.sin(-nj*s)*r}},Fee=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},k9e=function(e,n,r,s,a){var o=e.width,l=e.height,c=e.startAngle,u=e.endAngle,d=Vs(e.cx,o,o/2),h=Vs(e.cy,l,l/2),f=Fee(o,l,r),m=Vs(e.innerRadius,f,0),v=Vs(e.outerRadius,f,f*.8),g=Object.keys(n);return g.reduce(function(y,w){var b=n[w],E=b.domain,T=b.reversed,x;if(Ft(b.range))s==="angleAxis"?x=[c,u]:s==="radiusAxis"&&(x=[m,v]),T&&(x=[x[1],x[0]]);else{x=b.range;var S=x,_=E9e(S,2);c=_[0],u=_[1]}var p=Ree(b,a),A=p.realScaleType,P=p.scale;P.domain(E).range(x),Oee(P);var C=Mee(P,nl(nl({},b),{},{realScaleType:A})),I=nl(nl(nl({},b),C),{},{range:x,radius:v,realScaleType:A,scale:P,cx:d,cy:h,innerRadius:m,outerRadius:v,startAngle:c,endAngle:u});return nl(nl({},y),{},$ee({},w,I))},{})},R9e=function(e,n){var r=e.x,s=e.y,a=n.x,o=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(s-o,2))},O9e=function(e,n){var r=e.x,s=e.y,a=n.cx,o=n.cy,l=R9e({x:r,y:s},{x:a,y:o});if(l<=0)return{radius:l};var c=(r-a)/l,u=Math.acos(c);return s>o&&(u=2*Math.PI-u),{radius:l,angle:I9e(u),angleInRadian:u}},M9e=function(e){var n=e.startAngle,r=e.endAngle,s=Math.floor(n/360),a=Math.floor(r/360),o=Math.min(s,a);return{startAngle:n-o*360,endAngle:r-o*360}},D9e=function(e,n){var r=n.startAngle,s=n.endAngle,a=Math.floor(r/360),o=Math.floor(s/360),l=Math.min(a,o);return e+l*360},P5=function(e,n){var r=e.x,s=e.y,a=O9e({x:r,y:s},n),o=a.radius,l=a.angle,c=n.innerRadius,u=n.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=M9e(n),h=d.startAngle,f=d.endAngle,m=l,v;if(h<=f){for(;m>f;)m-=360;for(;m<h;)m+=360;v=m>=h&&m<=f}else{for(;m>h;)m-=360;for(;m<f;)m+=360;v=m>=f&&m<=h}return v?nl(nl({},n),{},{radius:o,angle:D9e(m,n)}):null},Vee=function(e){return!N.isValidElement(e)&&!wt(e)&&typeof e!="boolean"?e.className:""};function Wv(t){"@babel/helpers - typeof";return Wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wv(t)}var L9e=["offset"];function $9e(t){return U9e(t)||B9e(t)||V9e(t)||F9e()}function F9e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V9e(t,e){if(t){if(typeof t=="string")return WP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WP(t,e)}}function B9e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function U9e(t){if(Array.isArray(t))return WP(t)}function WP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function z9e(t,e){if(t==null)return{};var n=q9e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function q9e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function I5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Rr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I5(Object(n),!0).forEach(function(r){W9e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function W9e(t,e,n){return e=H9e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H9e(t){var e=K9e(t,"string");return Wv(e)=="symbol"?e:e+""}function K9e(t,e){if(Wv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Wv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hv(){return Hv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hv.apply(this,arguments)}var G9e=function(e){var n=e.value,r=e.formatter,s=Ft(e.children)?n:e.children;return wt(r)?r(s):s},Y9e=function(e,n){var r=Fs(n-e),s=Math.min(Math.abs(n-e),360);return r*s},Q9e=function(e,n,r){var s=e.position,a=e.viewBox,o=e.offset,l=e.className,c=a,u=c.cx,d=c.cy,h=c.innerRadius,f=c.outerRadius,m=c.startAngle,v=c.endAngle,g=c.clockWise,y=(h+f)/2,w=Y9e(m,v),b=w>=0?1:-1,E,T;s==="insideStart"?(E=m+b*o,T=g):s==="insideEnd"?(E=v-b*o,T=!g):s==="end"&&(E=v+b*o,T=g),T=w<=0?T:!T;var x=Mn(u,d,y,E),S=Mn(u,d,y,E+(T?1:-1)*359),_="M".concat(x.x,",").concat(x.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(T?0:1,`,
    `).concat(S.x,",").concat(S.y),p=Ft(e.id)?Gp("recharts-radial-line-"):e.id;return D.createElement("text",Hv({},r,{dominantBaseline:"central",className:$t("recharts-radial-bar-label",l)}),D.createElement("defs",null,D.createElement("path",{id:p,d:_})),D.createElement("textPath",{xlinkHref:"#".concat(p)},n))},X9e=function(e){var n=e.viewBox,r=e.offset,s=e.position,a=n,o=a.cx,l=a.cy,c=a.innerRadius,u=a.outerRadius,d=a.startAngle,h=a.endAngle,f=(d+h)/2;if(s==="outside"){var m=Mn(o,l,u+r,f),v=m.x,g=m.y;return{x:v,y:g,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var y=(c+u)/2,w=Mn(o,l,y,f),b=w.x,E=w.y;return{x:b,y:E,textAnchor:"middle",verticalAnchor:"middle"}},Z9e=function(e){var n=e.viewBox,r=e.parentViewBox,s=e.offset,a=e.position,o=n,l=o.x,c=o.y,u=o.width,d=o.height,h=d>=0?1:-1,f=h*s,m=h>0?"end":"start",v=h>0?"start":"end",g=u>=0?1:-1,y=g*s,w=g>0?"end":"start",b=g>0?"start":"end";if(a==="top"){var E={x:l+u/2,y:c-h*s,textAnchor:"middle",verticalAnchor:m};return Rr(Rr({},E),r?{height:Math.max(c-r.y,0),width:u}:{})}if(a==="bottom"){var T={x:l+u/2,y:c+d+f,textAnchor:"middle",verticalAnchor:v};return Rr(Rr({},T),r?{height:Math.max(r.y+r.height-(c+d),0),width:u}:{})}if(a==="left"){var x={x:l-y,y:c+d/2,textAnchor:w,verticalAnchor:"middle"};return Rr(Rr({},x),r?{width:Math.max(x.x-r.x,0),height:d}:{})}if(a==="right"){var S={x:l+u+y,y:c+d/2,textAnchor:b,verticalAnchor:"middle"};return Rr(Rr({},S),r?{width:Math.max(r.x+r.width-S.x,0),height:d}:{})}var _=r?{width:u,height:d}:{};return a==="insideLeft"?Rr({x:l+y,y:c+d/2,textAnchor:b,verticalAnchor:"middle"},_):a==="insideRight"?Rr({x:l+u-y,y:c+d/2,textAnchor:w,verticalAnchor:"middle"},_):a==="insideTop"?Rr({x:l+u/2,y:c+f,textAnchor:"middle",verticalAnchor:v},_):a==="insideBottom"?Rr({x:l+u/2,y:c+d-f,textAnchor:"middle",verticalAnchor:m},_):a==="insideTopLeft"?Rr({x:l+y,y:c+f,textAnchor:b,verticalAnchor:v},_):a==="insideTopRight"?Rr({x:l+u-y,y:c+f,textAnchor:w,verticalAnchor:v},_):a==="insideBottomLeft"?Rr({x:l+y,y:c+d-f,textAnchor:b,verticalAnchor:m},_):a==="insideBottomRight"?Rr({x:l+u-y,y:c+d-f,textAnchor:w,verticalAnchor:m},_):zp(a)&&(Ee(a.x)||_d(a.x))&&(Ee(a.y)||_d(a.y))?Rr({x:l+Vs(a.x,u),y:c+Vs(a.y,d),textAnchor:"end",verticalAnchor:"end"},_):Rr({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},_)},J9e=function(e){return"cx"in e&&Ee(e.cx)};function Yr(t){var e=t.offset,n=e===void 0?5:e,r=z9e(t,L9e),s=Rr({offset:n},r),a=s.viewBox,o=s.position,l=s.value,c=s.children,u=s.content,d=s.className,h=d===void 0?"":d,f=s.textBreakAll;if(!a||Ft(l)&&Ft(c)&&!N.isValidElement(u)&&!wt(u))return null;if(N.isValidElement(u))return N.cloneElement(u,s);var m;if(wt(u)){if(m=N.createElement(u,s),N.isValidElement(m))return m}else m=G9e(s);var v=J9e(a),g=ft(s,!0);if(v&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Q9e(s,m,g);var y=v?X9e(s):Z9e(s);return D.createElement(xh,Hv({className:$t("recharts-label",h)},g,y,{breakAll:f}),m)}Yr.displayName="Label";var Bee=function(e){var n=e.cx,r=e.cy,s=e.angle,a=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,u=e.innerRadius,d=e.outerRadius,h=e.x,f=e.y,m=e.top,v=e.left,g=e.width,y=e.height,w=e.clockWise,b=e.labelViewBox;if(b)return b;if(Ee(g)&&Ee(y)){if(Ee(h)&&Ee(f))return{x:h,y:f,width:g,height:y};if(Ee(m)&&Ee(v))return{x:m,y:v,width:g,height:y}}return Ee(h)&&Ee(f)?{x:h,y:f,width:0,height:0}:Ee(n)&&Ee(r)?{cx:n,cy:r,startAngle:a||s||0,endAngle:o||s||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:w}:e.viewBox?e.viewBox:{}},e8e=function(e,n){return e?e===!0?D.createElement(Yr,{key:"label-implicit",viewBox:n}):Vr(e)?D.createElement(Yr,{key:"label-implicit",viewBox:n,value:e}):N.isValidElement(e)?e.type===Yr?N.cloneElement(e,{key:"label-implicit",viewBox:n}):D.createElement(Yr,{key:"label-implicit",content:e,viewBox:n}):wt(e)?D.createElement(Yr,{key:"label-implicit",content:e,viewBox:n}):zp(e)?D.createElement(Yr,Hv({viewBox:n},e,{key:"label-implicit"})):null:null},t8e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var s=e.children,a=Bee(e),o=ia(s,Yr).map(function(c,u){return N.cloneElement(c,{viewBox:n||a,key:"label-".concat(u)})});if(!r)return o;var l=e8e(e.label,n||a);return[l].concat($9e(o))};Yr.parseViewBox=Bee;Yr.renderCallByParent=t8e;function n8e(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var r8e=n8e;const s8e=gn(r8e);function Kv(t){"@babel/helpers - typeof";return Kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kv(t)}var i8e=["valueAccessor"],a8e=["data","dataKey","clockWise","id","textBreakAll"];function o8e(t){return d8e(t)||u8e(t)||c8e(t)||l8e()}function l8e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c8e(t,e){if(t){if(typeof t=="string")return HP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HP(t,e)}}function u8e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function d8e(t){if(Array.isArray(t))return HP(t)}function HP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rj(){return rj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rj.apply(this,arguments)}function k5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function R5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k5(Object(n),!0).forEach(function(r){h8e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function h8e(t,e,n){return e=f8e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f8e(t){var e=m8e(t,"string");return Kv(e)=="symbol"?e:e+""}function m8e(t,e){if(Kv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Kv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function O5(t,e){if(t==null)return{};var n=p8e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function p8e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var g8e=function(e){return Array.isArray(e.value)?s8e(e.value):e.value};function xl(t){var e=t.valueAccessor,n=e===void 0?g8e:e,r=O5(t,i8e),s=r.data,a=r.dataKey,o=r.clockWise,l=r.id,c=r.textBreakAll,u=O5(r,a8e);return!s||!s.length?null:D.createElement(tn,{className:"recharts-label-list"},s.map(function(d,h){var f=Ft(a)?n(d,h):$r(d&&d.payload,a),m=Ft(l)?{}:{id:"".concat(l,"-").concat(h)};return D.createElement(Yr,rj({},ft(d,!0),u,m,{parentViewBox:d.parentViewBox,value:f,textBreakAll:c,viewBox:Yr.parseViewBox(Ft(o)?d:R5(R5({},d),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}xl.displayName="LabelList";function y8e(t,e){return t?t===!0?D.createElement(xl,{key:"labelList-implicit",data:e}):D.isValidElement(t)||wt(t)?D.createElement(xl,{key:"labelList-implicit",data:e,content:t}):zp(t)?D.createElement(xl,rj({data:e},t,{key:"labelList-implicit"})):null:null}function v8e(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,s=ia(r,xl).map(function(o,l){return N.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!n)return s;var a=y8e(t.label,e);return[a].concat(o8e(s))}xl.renderCallByParent=v8e;function Gv(t){"@babel/helpers - typeof";return Gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gv(t)}function KP(){return KP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KP.apply(this,arguments)}function M5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function D5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M5(Object(n),!0).forEach(function(r){x8e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function x8e(t,e,n){return e=b8e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b8e(t){var e=w8e(t,"string");return Gv(e)=="symbol"?e:e+""}function w8e(t,e){if(Gv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Gv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _8e=function(e,n){var r=Fs(n-e),s=Math.min(Math.abs(n-e),359.999);return r*s},p0=function(e){var n=e.cx,r=e.cy,s=e.radius,a=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,d=c*(l?1:-1)+s,h=Math.asin(c/d)/nj,f=u?a:a+o*h,m=Mn(n,r,d,f),v=Mn(n,r,s,f),g=u?a-o*h:a,y=Mn(n,r,d*Math.cos(h*nj),g);return{center:m,circleTangency:v,lineTangency:y,theta:h}},Uee=function(e){var n=e.cx,r=e.cy,s=e.innerRadius,a=e.outerRadius,o=e.startAngle,l=e.endAngle,c=_8e(o,l),u=o+c,d=Mn(n,r,a,o),h=Mn(n,r,a,u),f="M ".concat(d.x,",").concat(d.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(s>0){var m=Mn(n,r,s,o),v=Mn(n,r,s,u);f+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else f+="L ".concat(n,",").concat(r," Z");return f},j8e=function(e){var n=e.cx,r=e.cy,s=e.innerRadius,a=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,h=Fs(d-u),f=p0({cx:n,cy:r,radius:a,angle:u,sign:h,cornerRadius:o,cornerIsExternal:c}),m=f.circleTangency,v=f.lineTangency,g=f.theta,y=p0({cx:n,cy:r,radius:a,angle:d,sign:-h,cornerRadius:o,cornerIsExternal:c}),w=y.circleTangency,b=y.lineTangency,E=y.theta,T=c?Math.abs(u-d):Math.abs(u-d)-g-E;if(T<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):Uee({cx:n,cy:r,innerRadius:s,outerRadius:a,startAngle:u,endAngle:d});var x="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(T>180),",").concat(+(h<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(b.x,",").concat(b.y,`
  `);if(s>0){var S=p0({cx:n,cy:r,radius:s,angle:u,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),_=S.circleTangency,p=S.lineTangency,A=S.theta,P=p0({cx:n,cy:r,radius:s,angle:d,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),C=P.circleTangency,I=P.lineTangency,R=P.theta,L=c?Math.abs(u-d):Math.abs(u-d)-A-R;if(L<0&&o===0)return"".concat(x,"L").concat(n,",").concat(r,"Z");x+="L".concat(I.x,",").concat(I.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(C.x,",").concat(C.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(L>180),",").concat(+(h>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(p.x,",").concat(p.y,"Z")}else x+="L".concat(n,",").concat(r,"Z");return x},N8e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},zee=function(e){var n=D5(D5({},N8e),e),r=n.cx,s=n.cy,a=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,h=n.endAngle,f=n.className;if(o<a||d===h)return null;var m=$t("recharts-sector",f),v=o-a,g=Vs(l,v,0,!0),y;return g>0&&Math.abs(d-h)<360?y=j8e({cx:r,cy:s,innerRadius:a,outerRadius:o,cornerRadius:Math.min(g,v/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:h}):y=Uee({cx:r,cy:s,innerRadius:a,outerRadius:o,startAngle:d,endAngle:h}),D.createElement("path",KP({},ft(n,!0),{className:m,d:y,role:"img"}))};function Yv(t){"@babel/helpers - typeof";return Yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yv(t)}function GP(){return GP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},GP.apply(this,arguments)}function L5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function $5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L5(Object(n),!0).forEach(function(r){S8e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function S8e(t,e,n){return e=E8e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E8e(t){var e=A8e(t,"string");return Yv(e)=="symbol"?e:e+""}function A8e(t,e){if(Yv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Yv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var F5={curveBasisClosed:S2e,curveBasisOpen:E2e,curveBasis:N2e,curveBumpX:u2e,curveBumpY:d2e,curveLinearClosed:A2e,curveLinear:x1,curveMonotoneX:T2e,curveMonotoneY:C2e,curveNatural:P2e,curveStep:I2e,curveStepAfter:R2e,curveStepBefore:k2e},g0=function(e){return e.x===+e.x&&e.y===+e.y},Dg=function(e){return e.x},Lg=function(e){return e.y},T8e=function(e,n){if(wt(e))return e;var r="curve".concat(y1(e));return(r==="curveMonotone"||r==="curveBump")&&n?F5["".concat(r).concat(n==="vertical"?"Y":"X")]:F5[r]||x1},C8e=function(e){var n=e.type,r=n===void 0?"linear":n,s=e.points,a=s===void 0?[]:s,o=e.baseLine,l=e.layout,c=e.connectNulls,u=c===void 0?!1:c,d=T8e(r,l),h=u?a.filter(function(g){return g0(g)}):a,f;if(Array.isArray(o)){var m=u?o.filter(function(g){return g0(g)}):o,v=h.map(function(g,y){return $5($5({},g),{},{base:m[y]})});return l==="vertical"?f=a0().y(Lg).x1(Dg).x0(function(g){return g.base.x}):f=a0().x(Dg).y1(Lg).y0(function(g){return g.base.y}),f.defined(g0).curve(d),f(v)}return l==="vertical"&&Ee(o)?f=a0().y(Lg).x1(Dg).x0(o):Ee(o)?f=a0().x(Dg).y1(Lg).y0(o):f=LZ().x(Dg).y(Lg),f.defined(g0).curve(d),f(h)},nm=function(e){var n=e.className,r=e.points,s=e.path,a=e.pathRef;if((!r||!r.length)&&!s)return null;var o=r&&r.length?C8e(e):s;return N.createElement("path",GP({},ft(e,!1),T_(e),{className:$t("recharts-curve",n),d:o,ref:a}))},qee={exports:{}},P8e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",I8e=P8e,k8e=I8e;function Wee(){}function Hee(){}Hee.resetWarningCache=Wee;var R8e=function(){function t(r,s,a,o,l,c){if(c!==k8e){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Hee,resetWarningCache:Wee};return n.PropTypes=n,n};qee.exports=R8e();var O8e=qee.exports;const fn=gn(O8e);var M8e=Object.getOwnPropertyNames,D8e=Object.getOwnPropertySymbols,L8e=Object.prototype.hasOwnProperty;function V5(t,e){return function(r,s,a){return t(r,s,a)&&e(r,s,a)}}function y0(t){return function(n,r,s){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,s);var a=s.cache,o=a.get(n),l=a.get(r);if(o&&l)return o===r&&l===n;a.set(n,r),a.set(r,n);var c=t(n,r,s);return a.delete(n),a.delete(r),c}}function B5(t){return M8e(t).concat(D8e(t))}var $8e=Object.hasOwn||function(t,e){return L8e.call(t,e)};function $h(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var F8e="__v",V8e="__o",B8e="_owner",U5=Object.getOwnPropertyDescriptor,z5=Object.keys;function U8e(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function z8e(t,e){return $h(t.getTime(),e.getTime())}function q8e(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function W8e(t,e){return t===e}function q5(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var s=new Array(r),a=t.entries(),o,l,c=0;(o=a.next())&&!o.done;){for(var u=e.entries(),d=!1,h=0;(l=u.next())&&!l.done;){if(s[h]){h++;continue}var f=o.value,m=l.value;if(n.equals(f[0],m[0],c,h,t,e,n)&&n.equals(f[1],m[1],f[0],m[0],t,e,n)){d=s[h]=!0;break}h++}if(!d)return!1;c++}return!0}var H8e=$h;function K8e(t,e,n){var r=z5(t),s=r.length;if(z5(e).length!==s)return!1;for(;s-- >0;)if(!Kee(t,e,n,r[s]))return!1;return!0}function $g(t,e,n){var r=B5(t),s=r.length;if(B5(e).length!==s)return!1;for(var a,o,l;s-- >0;)if(a=r[s],!Kee(t,e,n,a)||(o=U5(t,a),l=U5(e,a),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function G8e(t,e){return $h(t.valueOf(),e.valueOf())}function Y8e(t,e){return t.source===e.source&&t.flags===e.flags}function W5(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var s=new Array(r),a=t.values(),o,l;(o=a.next())&&!o.done;){for(var c=e.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!s[d]&&n.equals(o.value,l.value,o.value,l.value,t,e,n)){u=s[d]=!0;break}d++}if(!u)return!1}return!0}function Q8e(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function X8e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function Kee(t,e,n,r){return(r===B8e||r===V8e||r===F8e)&&(t.$$typeof||e.$$typeof)?!0:$8e(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var Z8e="[object Arguments]",J8e="[object Boolean]",eqe="[object Date]",tqe="[object Error]",nqe="[object Map]",rqe="[object Number]",sqe="[object Object]",iqe="[object RegExp]",aqe="[object Set]",oqe="[object String]",lqe="[object URL]",cqe=Array.isArray,H5=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,K5=Object.assign,uqe=Object.prototype.toString.call.bind(Object.prototype.toString);function dqe(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,s=t.areFunctionsEqual,a=t.areMapsEqual,o=t.areNumbersEqual,l=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,d=t.areSetsEqual,h=t.areTypedArraysEqual,f=t.areUrlsEqual;return function(v,g,y){if(v===g)return!0;if(v==null||g==null)return!1;var w=typeof v;if(w!==typeof g)return!1;if(w!=="object")return w==="number"?o(v,g,y):w==="function"?s(v,g,y):!1;var b=v.constructor;if(b!==g.constructor)return!1;if(b===Object)return l(v,g,y);if(cqe(v))return e(v,g,y);if(H5!=null&&H5(v))return h(v,g,y);if(b===Date)return n(v,g,y);if(b===RegExp)return u(v,g,y);if(b===Map)return a(v,g,y);if(b===Set)return d(v,g,y);var E=uqe(v);return E===eqe?n(v,g,y):E===iqe?u(v,g,y):E===nqe?a(v,g,y):E===aqe?d(v,g,y):E===sqe?typeof v.then!="function"&&typeof g.then!="function"&&l(v,g,y):E===lqe?f(v,g,y):E===tqe?r(v,g,y):E===Z8e?l(v,g,y):E===J8e||E===rqe||E===oqe?c(v,g,y):!1}}function hqe(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,s={areArraysEqual:r?$g:U8e,areDatesEqual:z8e,areErrorsEqual:q8e,areFunctionsEqual:W8e,areMapsEqual:r?V5(q5,$g):q5,areNumbersEqual:H8e,areObjectsEqual:r?$g:K8e,arePrimitiveWrappersEqual:G8e,areRegExpsEqual:Y8e,areSetsEqual:r?V5(W5,$g):W5,areTypedArraysEqual:r?$g:Q8e,areUrlsEqual:X8e};if(n&&(s=K5({},s,n(s))),e){var a=y0(s.areArraysEqual),o=y0(s.areMapsEqual),l=y0(s.areObjectsEqual),c=y0(s.areSetsEqual);s=K5({},s,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return s}function fqe(t){return function(e,n,r,s,a,o,l){return t(e,n,l)}}function mqe(t){var e=t.circular,n=t.comparator,r=t.createState,s=t.equals,a=t.strict;if(r)return function(c,u){var d=r(),h=d.cache,f=h===void 0?e?new WeakMap:void 0:h,m=d.meta;return n(c,u,{cache:f,equals:s,meta:m,strict:a})};if(e)return function(c,u){return n(c,u,{cache:new WeakMap,equals:s,meta:void 0,strict:a})};var o={cache:void 0,equals:s,meta:void 0,strict:a};return function(c,u){return n(c,u,o)}}var pqe=Ku();Ku({strict:!0});Ku({circular:!0});Ku({circular:!0,strict:!0});Ku({createInternalComparator:function(){return $h}});Ku({strict:!0,createInternalComparator:function(){return $h}});Ku({circular:!0,createInternalComparator:function(){return $h}});Ku({circular:!0,createInternalComparator:function(){return $h},strict:!0});function Ku(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,s=t.createState,a=t.strict,o=a===void 0?!1:a,l=hqe(t),c=dqe(l),u=r?r(c):fqe(c);return mqe({circular:n,comparator:c,createState:s,equals:u,strict:o})}function gqe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function G5(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function s(a){n<0&&(n=a),a-n>e?(t(a),n=-1):gqe(s)};requestAnimationFrame(r)}function YP(t){"@babel/helpers - typeof";return YP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YP(t)}function yqe(t){return wqe(t)||bqe(t)||xqe(t)||vqe()}function vqe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xqe(t,e){if(t){if(typeof t=="string")return Y5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y5(t,e)}}function Y5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bqe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wqe(t){if(Array.isArray(t))return t}function _qe(){var t={},e=function(){return null},n=!1,r=function s(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var o=a,l=yqe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){G5(s.bind(null,u),c);return}s(c),G5(s.bind(null,u));return}YP(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function Qv(t){"@babel/helpers - typeof";return Qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qv(t)}function Q5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function X5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q5(Object(n),!0).forEach(function(r){Gee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gee(t,e,n){return e=jqe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jqe(t){var e=Nqe(t,"string");return Qv(e)==="symbol"?e:String(e)}function Nqe(t,e){if(Qv(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Qv(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Sqe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,s){return r.filter(function(a){return s.includes(a)})})},Eqe=function(e){return e},Aqe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},ky=function(e,n){return Object.keys(n).reduce(function(r,s){return X5(X5({},r),{},Gee({},s,e(s,n[s])))},{})},Z5=function(e,n,r){return e.map(function(s){return"".concat(Aqe(s)," ").concat(n,"ms ").concat(r)}).join(",")};function Tqe(t,e){return Iqe(t)||Pqe(t,e)||Yee(t,e)||Cqe()}function Cqe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pqe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Iqe(t){if(Array.isArray(t))return t}function kqe(t){return Mqe(t)||Oqe(t)||Yee(t)||Rqe()}function Rqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yee(t,e){if(t){if(typeof t=="string")return QP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QP(t,e)}}function Oqe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Mqe(t){if(Array.isArray(t))return QP(t)}function QP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var sj=1e-4,Qee=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},Xee=function(e,n){return e.map(function(r,s){return r*Math.pow(n,s)}).reduce(function(r,s){return r+s})},J5=function(e,n){return function(r){var s=Qee(e,n);return Xee(s,r)}},Dqe=function(e,n){return function(r){var s=Qee(e,n),a=[].concat(kqe(s.map(function(o,l){return o*l}).slice(1)),[0]);return Xee(a,r)}},eU=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n[0],a=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":s=0,a=0,o=1,l=1;break;case"ease":s=.25,a=.1,o=.25,l=1;break;case"ease-in":s=.42,a=0,o=1,l=1;break;case"ease-out":s=.42,a=0,o=.58,l=1;break;case"ease-in-out":s=0,a=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),d=Tqe(u,4);s=d[0],a=d[1],o=d[2],l=d[3]}}}var h=J5(s,o),f=J5(a,l),m=Dqe(s,o),v=function(w){return w>1?1:w<0?0:w},g=function(w){for(var b=w>1?1:w,E=b,T=0;T<8;++T){var x=h(E)-b,S=m(E);if(Math.abs(x-b)<sj||S<sj)return f(E);E=v(E-x/S)}return f(E)};return g.isStepper=!1,g},Lqe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,s=e.damping,a=s===void 0?8:s,o=e.dt,l=o===void 0?17:o,c=function(d,h,f){var m=-(d-h)*r,v=f*a,g=f+(m-v)*l/1e3,y=f*l/1e3+d;return Math.abs(y-h)<sj&&Math.abs(g)<sj?[h,0]:[y,g]};return c.isStepper=!0,c.dt=l,c},$qe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return eU(s);case"spring":return Lqe();default:if(s.split("(")[0]==="cubic-bezier")return eU(s)}return typeof s=="function"?s:null};function Xv(t){"@babel/helpers - typeof";return Xv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xv(t)}function tU(t){return Bqe(t)||Vqe(t)||Zee(t)||Fqe()}function Fqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vqe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Bqe(t){if(Array.isArray(t))return ZP(t)}function nU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ts(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nU(Object(n),!0).forEach(function(r){XP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function XP(t,e,n){return e=Uqe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uqe(t){var e=zqe(t,"string");return Xv(e)==="symbol"?e:String(e)}function zqe(t,e){if(Xv(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Xv(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qqe(t,e){return Kqe(t)||Hqe(t,e)||Zee(t,e)||Wqe()}function Wqe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zee(t,e){if(t){if(typeof t=="string")return ZP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZP(t,e)}}function ZP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hqe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Kqe(t){if(Array.isArray(t))return t}var ij=function(e,n,r){return e+(n-e)*r},JP=function(e){var n=e.from,r=e.to;return n!==r},Gqe=function t(e,n,r){var s=ky(function(a,o){if(JP(o)){var l=e(o.from,o.to,o.velocity),c=qqe(l,2),u=c[0],d=c[1];return ts(ts({},o),{},{from:u,velocity:d})}return o},n);return r<1?ky(function(a,o){return JP(o)?ts(ts({},o),{},{velocity:ij(o.velocity,s[a].velocity,r),from:ij(o.from,s[a].from,r)}):o},n):t(e,s,r-1)};const Yqe=function(t,e,n,r,s){var a=Sqe(t,e),o=a.reduce(function(y,w){return ts(ts({},y),{},XP({},w,[t[w],e[w]]))},{}),l=a.reduce(function(y,w){return ts(ts({},y),{},XP({},w,{from:t[w],velocity:0,to:e[w]}))},{}),c=-1,u,d,h=function(){return null},f=function(){return ky(function(w,b){return b.from},l)},m=function(){return!Object.values(l).filter(JP).length},v=function(w){u||(u=w);var b=w-u,E=b/n.dt;l=Gqe(n,l,E),s(ts(ts(ts({},t),e),f())),u=w,m()||(c=requestAnimationFrame(h))},g=function(w){d||(d=w);var b=(w-d)/r,E=ky(function(x,S){return ij.apply(void 0,tU(S).concat([n(b)]))},o);if(s(ts(ts(ts({},t),e),E)),b<1)c=requestAnimationFrame(h);else{var T=ky(function(x,S){return ij.apply(void 0,tU(S).concat([n(1)]))},o);s(ts(ts(ts({},t),e),T))}};return h=n.isStepper?v:g,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}};function Zm(t){"@babel/helpers - typeof";return Zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zm(t)}var Qqe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Xqe(t,e){if(t==null)return{};var n=Zqe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Zqe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function dA(t){return nWe(t)||tWe(t)||eWe(t)||Jqe()}function Jqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eWe(t,e){if(t){if(typeof t=="string")return eI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eI(t,e)}}function tWe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nWe(t){if(Array.isArray(t))return eI(t)}function eI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ja(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rU(Object(n),!0).forEach(function(r){iy(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iy(t,e,n){return e=Jee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rWe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sWe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Jee(r.key),r)}}function iWe(t,e,n){return e&&sWe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jee(t){var e=aWe(t,"string");return Zm(e)==="symbol"?e:String(e)}function aWe(t,e){if(Zm(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Zm(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oWe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tI(t,e)}function tI(t,e){return tI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},tI(t,e)}function lWe(t){var e=cWe();return function(){var r=aj(t),s;if(e){var a=aj(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return nI(this,s)}}function nI(t,e){if(e&&(Zm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rI(t)}function rI(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cWe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function aj(t){return aj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},aj(t)}var Bo=function(t){oWe(n,t);var e=lWe(n);function n(r,s){var a;rWe(this,n),a=e.call(this,r,s);var o=a.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,h=o.steps,f=o.children,m=o.duration;if(a.handleStyleChange=a.handleStyleChange.bind(rI(a)),a.changeStyle=a.changeStyle.bind(rI(a)),!l||m<=0)return a.state={style:{}},typeof f=="function"&&(a.state={style:d}),nI(a);if(h&&h.length)a.state={style:h[0].style};else if(u){if(typeof f=="function")return a.state={style:u},nI(a);a.state={style:c?iy({},c,u):u}}else a.state={style:{}};return a}return iWe(n,[{key:"componentDidMount",value:function(){var s=this.props,a=s.isActive,o=s.canBegin;this.mounted=!0,!(!a||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var a=this.props,o=a.isActive,l=a.canBegin,c=a.attributeName,u=a.shouldReAnimate,d=a.to,h=a.from,f=this.state.style;if(l){if(!o){var m={style:c?iy({},c,d):d};this.state&&f&&(c&&f[c]!==d||!c&&f!==d)&&this.setState(m);return}if(!(pqe(s.to,d)&&s.canBegin&&s.isActive)){var v=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=v||u?h:s.to;if(this.state&&f){var y={style:c?iy({},c,g):g};(c&&f[c]!==g||!c&&f!==g)&&this.setState(y)}this.runAnimation(ja(ja({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var a=this,o=s.from,l=s.to,c=s.duration,u=s.easing,d=s.begin,h=s.onAnimationEnd,f=s.onAnimationStart,m=Yqe(o,l,$qe(u),c,this.changeStyle),v=function(){a.stopJSAnimation=m()};this.manager.start([f,d,v,c,h])}},{key:"runStepAnimation",value:function(s){var a=this,o=s.steps,l=s.begin,c=s.onAnimationStart,u=o[0],d=u.style,h=u.duration,f=h===void 0?0:h,m=function(g,y,w){if(w===0)return g;var b=y.duration,E=y.easing,T=E===void 0?"ease":E,x=y.style,S=y.properties,_=y.onAnimationEnd,p=w>0?o[w-1]:y,A=S||Object.keys(x);if(typeof T=="function"||T==="spring")return[].concat(dA(g),[a.runJSAnimation.bind(a,{from:p.style,to:x,duration:b,easing:T}),b]);var P=Z5(A,b,T),C=ja(ja(ja({},p.style),x),{},{transition:P});return[].concat(dA(g),[C,b,_]).filter(Eqe)};return this.manager.start([c].concat(dA(o.reduce(m,[d,Math.max(f,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=_qe());var a=s.begin,o=s.duration,l=s.attributeName,c=s.to,u=s.easing,d=s.onAnimationStart,h=s.onAnimationEnd,f=s.steps,m=s.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(s);return}if(f.length>1){this.runStepAnimation(s);return}var g=l?iy({},l,c):c,y=Z5(Object.keys(g),o,u);v.start([d,a,ja(ja({},g),{},{transition:y}),o,h])}},{key:"render",value:function(){var s=this.props,a=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var c=Xqe(s,Qqe),u=N.Children.count(a),d=this.state.style;if(typeof a=="function")return a(d);if(!l||u===0||o<=0)return a;var h=function(m){var v=m.props,g=v.style,y=g===void 0?{}:g,w=v.className,b=N.cloneElement(m,ja(ja({},c),{},{style:ja(ja({},y),d),className:w}));return b};return u===1?h(N.Children.only(a)):D.createElement("div",null,N.Children.map(a,function(f){return h(f)}))}}]),n}(N.PureComponent);Bo.displayName="Animate";Bo.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Bo.propTypes={from:fn.oneOfType([fn.object,fn.string]),to:fn.oneOfType([fn.object,fn.string]),attributeName:fn.string,duration:fn.number,begin:fn.number,easing:fn.oneOfType([fn.string,fn.func]),steps:fn.arrayOf(fn.shape({duration:fn.number.isRequired,style:fn.object.isRequired,easing:fn.oneOfType([fn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),fn.func]),properties:fn.arrayOf("string"),onAnimationEnd:fn.func})),children:fn.oneOfType([fn.node,fn.func]),isActive:fn.bool,canBegin:fn.bool,onAnimationEnd:fn.func,shouldReAnimate:fn.bool,onAnimationStart:fn.func,onAnimationReStart:fn.func};function Zv(t){"@babel/helpers - typeof";return Zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zv(t)}function oj(){return oj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oj.apply(this,arguments)}function uWe(t,e){return mWe(t)||fWe(t,e)||hWe(t,e)||dWe()}function dWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hWe(t,e){if(t){if(typeof t=="string")return sU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sU(t,e)}}function sU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function fWe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function mWe(t){if(Array.isArray(t))return t}function iU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function aU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iU(Object(n),!0).forEach(function(r){pWe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pWe(t,e,n){return e=gWe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gWe(t){var e=yWe(t,"string");return Zv(e)=="symbol"?e:e+""}function yWe(t,e){if(Zv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Zv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oU=function(e,n,r,s,a){var o=Math.min(Math.abs(r)/2,Math.abs(s)/2),l=s>=0?1:-1,c=r>=0?1:-1,u=s>=0&&r>=0||s<0&&r<0?1:0,d;if(o>0&&a instanceof Array){for(var h=[0,0,0,0],f=0,m=4;f<m;f++)h[f]=a[f]>o?o:a[f];d="M".concat(e,",").concat(n+l*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(e+c*h[0],",").concat(n)),d+="L ".concat(e+r-c*h[1],",").concat(n),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+l*h[1])),d+="L ".concat(e+r,",").concat(n+s-l*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(e+r-c*h[2],",").concat(n+s)),d+="L ".concat(e+c*h[3],",").concat(n+s),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+s-l*h[3])),d+="Z"}else if(o>0&&a===+a&&a>0){var v=Math.min(o,a);d="M ".concat(e,",").concat(n+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+c*v,",").concat(n,`
            L `).concat(e+r-c*v,",").concat(n,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+r,",").concat(n+l*v,`
            L `).concat(e+r,",").concat(n+s-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+r-c*v,",").concat(n+s,`
            L `).concat(e+c*v,",").concat(n+s,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e,",").concat(n+s-l*v," Z")}else d="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(s," h ").concat(-r," Z");return d},vWe=function(e,n){if(!e||!n)return!1;var r=e.x,s=e.y,a=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(a,a+l),d=Math.max(a,a+l),h=Math.min(o,o+c),f=Math.max(o,o+c);return r>=u&&r<=d&&s>=h&&s<=f}return!1},xWe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},hM=function(e){var n=aU(aU({},xWe),e),r=N.useRef(),s=N.useState(-1),a=uWe(s,2),o=a[0],l=a[1];N.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var T=r.current.getTotalLength();T&&l(T)}catch{}},[]);var c=n.x,u=n.y,d=n.width,h=n.height,f=n.radius,m=n.className,v=n.animationEasing,g=n.animationDuration,y=n.animationBegin,w=n.isAnimationActive,b=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||d===0||h===0)return null;var E=$t("recharts-rectangle",m);return b?D.createElement(Bo,{canBegin:o>0,from:{width:d,height:h,x:c,y:u},to:{width:d,height:h,x:c,y:u},duration:g,animationEasing:v,isActive:b},function(T){var x=T.width,S=T.height,_=T.x,p=T.y;return D.createElement(Bo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:g,isActive:w,easing:v},D.createElement("path",oj({},ft(n,!0),{className:E,d:oU(_,p,x,S,f),ref:r})))}):D.createElement("path",oj({},ft(n,!0),{className:E,d:oU(c,u,d,h,f)}))},bWe=["points","className","baseLinePoints","connectNulls"];function Pf(){return Pf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pf.apply(this,arguments)}function wWe(t,e){if(t==null)return{};var n=_We(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _We(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function lU(t){return EWe(t)||SWe(t)||NWe(t)||jWe()}function jWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NWe(t,e){if(t){if(typeof t=="string")return sI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sI(t,e)}}function SWe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function EWe(t){if(Array.isArray(t))return sI(t)}function sI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var cU=function(e){return e&&e.x===+e.x&&e.y===+e.y},AWe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){cU(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),cU(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Ry=function(e,n){var r=AWe(e);n&&(r=[r.reduce(function(a,o){return[].concat(lU(a),lU(o))},[])]);var s=r.map(function(a){return a.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return r.length===1?"".concat(s,"Z"):s},TWe=function(e,n,r){var s=Ry(e,r);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(Ry(n.reverse(),r).slice(1))},CWe=function(e){var n=e.points,r=e.className,s=e.baseLinePoints,a=e.connectNulls,o=wWe(e,bWe);if(!n||!n.length)return null;var l=$t("recharts-polygon",r);if(s&&s.length){var c=o.stroke&&o.stroke!=="none",u=TWe(n,s,a);return D.createElement("g",{className:l},D.createElement("path",Pf({},ft(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?D.createElement("path",Pf({},ft(o,!0),{fill:"none",d:Ry(n,a)})):null,c?D.createElement("path",Pf({},ft(o,!0),{fill:"none",d:Ry(s,a)})):null)}var d=Ry(n,a);return D.createElement("path",Pf({},ft(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function iI(){return iI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iI.apply(this,arguments)}var D1=function(e){var n=e.cx,r=e.cy,s=e.r,a=e.className,o=$t("recharts-dot",a);return n===+n&&r===+r&&s===+s?N.createElement("circle",iI({},ft(e,!1),T_(e),{className:o,cx:n,cy:r,r:s})):null};function Jv(t){"@babel/helpers - typeof";return Jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jv(t)}var PWe=["x","y","top","left","width","height","className"];function aI(){return aI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aI.apply(this,arguments)}function uU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function IWe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uU(Object(n),!0).forEach(function(r){kWe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kWe(t,e,n){return e=RWe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RWe(t){var e=OWe(t,"string");return Jv(e)=="symbol"?e:e+""}function OWe(t,e){if(Jv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Jv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MWe(t,e){if(t==null)return{};var n=DWe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function DWe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var LWe=function(e,n,r,s,a,o){return"M".concat(e,",").concat(a,"v").concat(s,"M").concat(o,",").concat(n,"h").concat(r)},$We=function(e){var n=e.x,r=n===void 0?0:n,s=e.y,a=s===void 0?0:s,o=e.top,l=o===void 0?0:o,c=e.left,u=c===void 0?0:c,d=e.width,h=d===void 0?0:d,f=e.height,m=f===void 0?0:f,v=e.className,g=MWe(e,PWe),y=IWe({x:r,y:a,top:l,left:u,width:h,height:m},g);return!Ee(r)||!Ee(a)||!Ee(h)||!Ee(m)||!Ee(l)||!Ee(u)?null:D.createElement("path",aI({},ft(y,!0),{className:$t("recharts-cross",v),d:LWe(r,a,h,m,l,u)}))},FWe=I1,VWe=dee,BWe=Yo;function UWe(t,e){return t&&t.length?FWe(t,BWe(e),VWe):void 0}var zWe=UWe;const qWe=gn(zWe);var WWe=I1,HWe=Yo,KWe=hee;function GWe(t,e){return t&&t.length?WWe(t,HWe(e),KWe):void 0}var YWe=GWe;const QWe=gn(YWe);var XWe=["cx","cy","angle","ticks","axisLine"],ZWe=["ticks","tick","angle","tickFormatter","stroke"];function Jm(t){"@babel/helpers - typeof";return Jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jm(t)}function Oy(){return Oy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oy.apply(this,arguments)}function dU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function sd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dU(Object(n),!0).forEach(function(r){L1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hU(t,e){if(t==null)return{};var n=JWe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function JWe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function eHe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tte(r.key),r)}}function tHe(t,e,n){return e&&fU(t.prototype,e),n&&fU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function nHe(t,e,n){return e=lj(e),rHe(t,ete()?Reflect.construct(e,n||[],lj(t).constructor):e.apply(t,n))}function rHe(t,e){if(e&&(Jm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sHe(t)}function sHe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ete(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ete=function(){return!!t})()}function lj(t){return lj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},lj(t)}function iHe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oI(t,e)}function oI(t,e){return oI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},oI(t,e)}function L1(t,e,n){return e=tte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tte(t){var e=aHe(t,"string");return Jm(e)=="symbol"?e:e+""}function aHe(t,e){if(Jm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Jm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $1=function(t){function e(){return eHe(this,e),nHe(this,e,arguments)}return iHe(e,t),tHe(e,[{key:"getTickValueCoord",value:function(r){var s=r.coordinate,a=this.props,o=a.angle,l=a.cx,c=a.cy;return Mn(l,c,s,o)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,s;switch(r){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var r=this.props,s=r.cx,a=r.cy,o=r.angle,l=r.ticks,c=qWe(l,function(d){return d.coordinate||0}),u=QWe(l,function(d){return d.coordinate||0});return{cx:s,cy:a,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,a=r.cy,o=r.angle,l=r.ticks,c=r.axisLine,u=hU(r,XWe),d=l.reduce(function(v,g){return[Math.min(v[0],g.coordinate),Math.max(v[1],g.coordinate)]},[1/0,-1/0]),h=Mn(s,a,d[0],o),f=Mn(s,a,d[1],o),m=sd(sd(sd({},ft(u,!1)),{},{fill:"none"},ft(c,!1)),{},{x1:h.x,y1:h.y,x2:f.x,y2:f.y});return D.createElement("line",Oy({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var r=this,s=this.props,a=s.ticks,o=s.tick,l=s.angle,c=s.tickFormatter,u=s.stroke,d=hU(s,ZWe),h=this.getTickTextAnchor(),f=ft(d,!1),m=ft(o,!1),v=a.map(function(g,y){var w=r.getTickValueCoord(g),b=sd(sd(sd(sd({textAnchor:h,transform:"rotate(".concat(90-l,", ").concat(w.x,", ").concat(w.y,")")},f),{},{stroke:"none",fill:u},m),{},{index:y},w),{},{payload:g});return D.createElement(tn,Oy({className:$t("recharts-polar-radius-axis-tick",Vee(o)),key:"tick-".concat(g.coordinate)},vh(r.props,g,y)),e.renderTickItem(o,b,c?c(g.value,y):g.value))});return D.createElement(tn,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var r=this.props,s=r.ticks,a=r.axisLine,o=r.tick;return!s||!s.length?null:D.createElement(tn,{className:$t("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),o&&this.renderTicks(),Yr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,s,a){var o;return D.isValidElement(r)?o=D.cloneElement(r,s):wt(r)?o=r(s):o=D.createElement(xh,Oy({},s,{className:"recharts-polar-radius-axis-tick-value"}),a),o}}])}(N.PureComponent);L1($1,"displayName","PolarRadiusAxis");L1($1,"axisType","radiusAxis");L1($1,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function ep(t){"@babel/helpers - typeof";return ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ep(t)}function md(){return md=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},md.apply(this,arguments)}function mU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function id(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mU(Object(n),!0).forEach(function(r){F1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oHe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rte(r.key),r)}}function lHe(t,e,n){return e&&pU(t.prototype,e),n&&pU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function cHe(t,e,n){return e=cj(e),uHe(t,nte()?Reflect.construct(e,n||[],cj(t).constructor):e.apply(t,n))}function uHe(t,e){if(e&&(ep(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dHe(t)}function dHe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nte=function(){return!!t})()}function cj(t){return cj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},cj(t)}function hHe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lI(t,e)}function lI(t,e){return lI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},lI(t,e)}function F1(t,e,n){return e=rte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rte(t){var e=fHe(t,"string");return ep(e)=="symbol"?e:e+""}function fHe(t,e){if(ep(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ep(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mHe=Math.PI/180,gU=1e-5,V1=function(t){function e(){return oHe(this,e),cHe(this,e,arguments)}return hHe(e,t),lHe(e,[{key:"getTickLineCoord",value:function(r){var s=this.props,a=s.cx,o=s.cy,l=s.radius,c=s.orientation,u=s.tickSize,d=u||8,h=Mn(a,o,l,r.coordinate),f=Mn(a,o,l+(c==="inner"?-1:1)*d,r.coordinate);return{x1:h.x,y1:h.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(r){var s=this.props.orientation,a=Math.cos(-r.coordinate*mHe),o;return a>gU?o=s==="outer"?"start":"end":a<-gU?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,a=r.cy,o=r.radius,l=r.axisLine,c=r.axisLineType,u=id(id({},ft(this.props,!1)),{},{fill:"none"},ft(l,!1));if(c==="circle")return D.createElement(D1,md({className:"recharts-polar-angle-axis-line"},u,{cx:s,cy:a,r:o}));var d=this.props.ticks,h=d.map(function(f){return Mn(s,a,o,f.coordinate)});return D.createElement(CWe,md({className:"recharts-polar-angle-axis-line"},u,{points:h}))}},{key:"renderTicks",value:function(){var r=this,s=this.props,a=s.ticks,o=s.tick,l=s.tickLine,c=s.tickFormatter,u=s.stroke,d=ft(this.props,!1),h=ft(o,!1),f=id(id({},d),{},{fill:"none"},ft(l,!1)),m=a.map(function(v,g){var y=r.getTickLineCoord(v),w=r.getTickTextAnchor(v),b=id(id(id({textAnchor:w},d),{},{stroke:"none",fill:u},h),{},{index:g,payload:v,x:y.x2,y:y.y2});return D.createElement(tn,md({className:$t("recharts-polar-angle-axis-tick",Vee(o)),key:"tick-".concat(v.coordinate)},vh(r.props,v,g)),l&&D.createElement("line",md({className:"recharts-polar-angle-axis-tick-line"},f,y)),o&&e.renderTickItem(o,b,c?c(v.value,g):v.value))});return D.createElement(tn,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var r=this.props,s=r.ticks,a=r.radius,o=r.axisLine;return a<=0||!s||!s.length?null:D.createElement(tn,{className:$t("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,s,a){var o;return D.isValidElement(r)?o=D.cloneElement(r,s):wt(r)?o=r(s):o=D.createElement(xh,md({},s,{className:"recharts-polar-angle-axis-tick-value"}),a),o}}])}(N.PureComponent);F1(V1,"displayName","PolarAngleAxis");F1(V1,"axisType","angleAxis");F1(V1,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var pHe=oJ,gHe=pHe(Object.getPrototypeOf,Object),yHe=gHe,vHe=zl,xHe=yHe,bHe=ql,wHe="[object Object]",_He=Function.prototype,jHe=Object.prototype,ste=_He.toString,NHe=jHe.hasOwnProperty,SHe=ste.call(Object);function EHe(t){if(!bHe(t)||vHe(t)!=wHe)return!1;var e=xHe(t);if(e===null)return!0;var n=NHe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&ste.call(n)==SHe}var AHe=EHe;const THe=gn(AHe);var CHe=zl,PHe=ql,IHe="[object Boolean]";function kHe(t){return t===!0||t===!1||PHe(t)&&CHe(t)==IHe}var RHe=kHe;const OHe=gn(RHe);function ex(t){"@babel/helpers - typeof";return ex=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ex(t)}function uj(){return uj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uj.apply(this,arguments)}function MHe(t,e){return FHe(t)||$He(t,e)||LHe(t,e)||DHe()}function DHe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LHe(t,e){if(t){if(typeof t=="string")return yU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yU(t,e)}}function yU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $He(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function FHe(t){if(Array.isArray(t))return t}function vU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function xU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vU(Object(n),!0).forEach(function(r){VHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VHe(t,e,n){return e=BHe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BHe(t){var e=UHe(t,"string");return ex(e)=="symbol"?e:e+""}function UHe(t,e){if(ex(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ex(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bU=function(e,n,r,s,a){var o=r-s,l;return l="M ".concat(e,",").concat(n),l+="L ".concat(e+r,",").concat(n),l+="L ".concat(e+r-o/2,",").concat(n+a),l+="L ".concat(e+r-o/2-s,",").concat(n+a),l+="L ".concat(e,",").concat(n," Z"),l},zHe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},qHe=function(e){var n=xU(xU({},zHe),e),r=N.useRef(),s=N.useState(-1),a=MHe(s,2),o=a[0],l=a[1];N.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var E=r.current.getTotalLength();E&&l(E)}catch{}},[]);var c=n.x,u=n.y,d=n.upperWidth,h=n.lowerWidth,f=n.height,m=n.className,v=n.animationEasing,g=n.animationDuration,y=n.animationBegin,w=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||f!==+f||d===0&&h===0||f===0)return null;var b=$t("recharts-trapezoid",m);return w?D.createElement(Bo,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:u},to:{upperWidth:d,lowerWidth:h,height:f,x:c,y:u},duration:g,animationEasing:v,isActive:w},function(E){var T=E.upperWidth,x=E.lowerWidth,S=E.height,_=E.x,p=E.y;return D.createElement(Bo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:g,easing:v},D.createElement("path",uj({},ft(n,!0),{className:b,d:bU(_,p,T,x,S),ref:r})))}):D.createElement("g",null,D.createElement("path",uj({},ft(n,!0),{className:b,d:bU(c,u,d,h,f)})))},WHe=["option","shapeType","propTransformer","activeClassName","isActive"];function tx(t){"@babel/helpers - typeof";return tx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tx(t)}function HHe(t,e){if(t==null)return{};var n=KHe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function KHe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function wU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function dj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wU(Object(n),!0).forEach(function(r){GHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GHe(t,e,n){return e=YHe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YHe(t){var e=QHe(t,"string");return tx(e)=="symbol"?e:e+""}function QHe(t,e){if(tx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(tx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XHe(t,e){return dj(dj({},e),t)}function ZHe(t,e){return t==="symbols"}function _U(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return D.createElement(hM,n);case"trapezoid":return D.createElement(qHe,n);case"sector":return D.createElement(zee,n);case"symbols":if(ZHe(e))return D.createElement(I2,n);break;default:return null}}function JHe(t){return N.isValidElement(t)?t.props:t}function ite(t){var e=t.option,n=t.shapeType,r=t.propTransformer,s=r===void 0?XHe:r,a=t.activeClassName,o=a===void 0?"recharts-active-shape":a,l=t.isActive,c=HHe(t,WHe),u;if(N.isValidElement(e))u=N.cloneElement(e,dj(dj({},c),JHe(e)));else if(wt(e))u=e(c);else if(THe(e)&&!OHe(e)){var d=s(e,c);u=D.createElement(_U,{shapeType:n,elementProps:d})}else{var h=c;u=D.createElement(_U,{shapeType:n,elementProps:h})}return l?D.createElement(tn,{className:o},u):u}function B1(t,e){return e!=null&&"trapezoids"in t.props}function U1(t,e){return e!=null&&"sectors"in t.props}function nx(t,e){return e!=null&&"points"in t.props}function e7e(t,e){var n,r,s=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,a=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return s&&a}function t7e(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function n7e(t,e){var n=t.x===e.x,r=t.y===e.y,s=t.z===e.z;return n&&r&&s}function r7e(t,e){var n;return B1(t,e)?n=e7e:U1(t,e)?n=t7e:nx(t,e)&&(n=n7e),n}function s7e(t,e){var n;return B1(t,e)?n="trapezoids":U1(t,e)?n="sectors":nx(t,e)&&(n="points"),n}function i7e(t,e){if(B1(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(U1(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return nx(t,e)?e.payload:{}}function a7e(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,s=s7e(n,e),a=i7e(n,e),o=r.filter(function(c,u){var d=Qm(a,c),h=n.props[s].filter(function(v){var g=r7e(n,e);return g(v,e)}),f=n.props[s].indexOf(h[h.length-1]),m=u===f;return d&&m}),l=r.indexOf(o[o.length-1]);return l}var nw;function tp(t){"@babel/helpers - typeof";return tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tp(t)}function If(){return If=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},If.apply(this,arguments)}function jU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Tn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jU(Object(n),!0).forEach(function(r){Gi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function o7e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ote(r.key),r)}}function l7e(t,e,n){return e&&NU(t.prototype,e),n&&NU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function c7e(t,e,n){return e=hj(e),u7e(t,ate()?Reflect.construct(e,n||[],hj(t).constructor):e.apply(t,n))}function u7e(t,e){if(e&&(tp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d7e(t)}function d7e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ate(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ate=function(){return!!t})()}function hj(t){return hj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hj(t)}function h7e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cI(t,e)}function cI(t,e){return cI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},cI(t,e)}function Gi(t,e,n){return e=ote(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ote(t){var e=f7e(t,"string");return tp(e)=="symbol"?e:e+""}function f7e(t,e){if(tp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(tp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hl=function(t){function e(n){var r;return o7e(this,e),r=c7e(this,e,[n]),Gi(r,"pieRef",null),Gi(r,"sectorRefs",[]),Gi(r,"id",Gp("recharts-pie-")),Gi(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),wt(s)&&s()}),Gi(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),wt(s)&&s()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return h7e(e,t),l7e(e,[{key:"isActiveIndex",value:function(r){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(r)!==-1:r===s}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.label,l=a.labelLine,c=a.dataKey,u=a.valueKey,d=ft(this.props,!1),h=ft(o,!1),f=ft(l,!1),m=o&&o.offsetRadius||20,v=r.map(function(g,y){var w=(g.startAngle+g.endAngle)/2,b=Mn(g.cx,g.cy,g.outerRadius+m,w),E=Tn(Tn(Tn(Tn({},d),g),{},{stroke:"none"},h),{},{index:y,textAnchor:e.getTextAnchor(b.x,g.cx)},b),T=Tn(Tn(Tn(Tn({},d),g),{},{fill:"none",stroke:g.fill},f),{},{index:y,points:[Mn(g.cx,g.cy,g.outerRadius,w),b]}),x=c;return Ft(c)&&Ft(u)?x="value":Ft(c)&&(x=u),D.createElement(tn,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(y)},l&&e.renderLabelLineItem(l,T,"line"),e.renderLabelItem(o,E,$r(g,x)))});return D.createElement(tn,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(r){var s=this,a=this.props,o=a.activeShape,l=a.blendStroke,c=a.inactiveShape;return r.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var h=s.isActiveIndex(d),f=c&&s.hasActiveIndex()?c:null,m=h?o:f,v=Tn(Tn({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return D.createElement(tn,If({ref:function(y){y&&!s.sectorRefs.includes(y)&&s.sectorRefs.push(y)},tabIndex:-1,className:"recharts-pie-sector"},vh(s.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),D.createElement(ite,If({option:m,isActive:h,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,s=this.props,a=s.sectors,o=s.isAnimationActive,l=s.animationBegin,c=s.animationDuration,u=s.animationEasing,d=s.animationId,h=this.state,f=h.prevSectors,m=h.prevIsAnimationActive;return D.createElement(Bo,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var g=v.t,y=[],w=a&&a[0],b=w.startAngle;return a.forEach(function(E,T){var x=f&&f[T],S=T>0?Ri(E,"paddingAngle",0):0;if(x){var _=ri(x.endAngle-x.startAngle,E.endAngle-E.startAngle),p=Tn(Tn({},E),{},{startAngle:b+S,endAngle:b+_(g)+S});y.push(p),b=p.endAngle}else{var A=E.endAngle,P=E.startAngle,C=ri(0,A-P),I=C(g),R=Tn(Tn({},E),{},{startAngle:b+S,endAngle:b+I+S});y.push(R),b=R.endAngle}}),D.createElement(tn,null,r.renderSectorsStatically(y))})}},{key:"attachKeyboardHandlers",value:function(r){var s=this;r.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var o=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[o].focus(),s.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[l].focus(),s.setState({sectorToFocus:l});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,s=r.sectors,a=r.isAnimationActive,o=this.state.prevSectors;return a&&s&&s.length&&(!o||!Qm(o,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,s=this.props,a=s.hide,o=s.sectors,l=s.className,c=s.label,u=s.cx,d=s.cy,h=s.innerRadius,f=s.outerRadius,m=s.isAnimationActive,v=this.state.isAnimationFinished;if(a||!o||!o.length||!Ee(u)||!Ee(d)||!Ee(h)||!Ee(f))return null;var g=$t("recharts-pie",l);return D.createElement(tn,{tabIndex:this.props.rootTabIndex,className:g,ref:function(w){r.pieRef=w}},this.renderSectors(),c&&this.renderLabels(o),Yr.renderCallByParent(this.props,null,!1),(!m||v)&&xl.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return s.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:r.sectors!==s.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,s){return r>s?"start":r<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,s,a){if(D.isValidElement(r))return D.cloneElement(r,s);if(wt(r))return r(s);var o=$t("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return D.createElement(nm,If({},s,{key:a,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(r,s,a){if(D.isValidElement(r))return D.cloneElement(r,s);var o=a;if(wt(r)&&(o=r(s),D.isValidElement(o)))return o;var l=$t("recharts-pie-label-text",typeof r!="boolean"&&!wt(r)?r.className:"");return D.createElement(xh,If({},s,{alignmentBaseline:"middle",className:l}),o)}}])}(N.PureComponent);nw=Hl;Gi(Hl,"displayName","Pie");Gi(Hl,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!ko.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Gi(Hl,"parseDeltaAngle",function(t,e){var n=Fs(e-t),r=Math.min(Math.abs(e-t),360);return n*r});Gi(Hl,"getRealPieData",function(t){var e=t.data,n=t.children,r=ft(t,!1),s=ia(n,N1);return e&&e.length?e.map(function(a,o){return Tn(Tn(Tn({payload:a},r),a),s&&s[o]&&s[o].props)}):s&&s.length?s.map(function(a){return Tn(Tn({},r),a.props)}):[]});Gi(Hl,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,s=e.width,a=e.height,o=Fee(s,a),l=r+Vs(t.cx,s,s/2),c=n+Vs(t.cy,a,a/2),u=Vs(t.innerRadius,o,0),d=Vs(t.outerRadius,o,o*.8),h=t.maxRadius||Math.sqrt(s*s+a*a)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:h}});Gi(Hl,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?Tn(Tn({},e.type.defaultProps),e.props):e.props,s=nw.getRealPieData(r);if(!s||!s.length)return null;var a=r.cornerRadius,o=r.startAngle,l=r.endAngle,c=r.paddingAngle,u=r.dataKey,d=r.nameKey,h=r.valueKey,f=r.tooltipType,m=Math.abs(r.minAngle),v=nw.parseCoordinateOfPie(r,n),g=nw.parseDeltaAngle(o,l),y=Math.abs(g),w=u;Ft(u)&&Ft(h)?(Ua(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),w="value"):Ft(u)&&(Ua(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),w=h);var b=s.filter(function(p){return $r(p,w,0)!==0}).length,E=(y>=360?b:b-1)*c,T=y-b*m-E,x=s.reduce(function(p,A){var P=$r(A,w,0);return p+(Ee(P)?P:0)},0),S;if(x>0){var _;S=s.map(function(p,A){var P=$r(p,w,0),C=$r(p,d,A),I=(Ee(P)?P:0)/x,R;A?R=_.endAngle+Fs(g)*c*(P!==0?1:0):R=o;var L=R+Fs(g)*((P!==0?m:0)+I*T),z=(R+L)/2,W=(v.innerRadius+v.outerRadius)/2,M=[{name:C,value:P,payload:p,dataKey:w,type:f}],V=Mn(v.cx,v.cy,W,z);return _=Tn(Tn(Tn({percent:I,cornerRadius:a,name:C,tooltipPayload:M,midAngle:z,middleRadius:W,tooltipPosition:V},p),v),{},{value:$r(p,w),startAngle:R,endAngle:L,payload:p,paddingAngle:Fs(g)*c}),_})}return Tn(Tn({},v),{},{sectors:S,data:s})});var m7e=Math.ceil,p7e=Math.max;function g7e(t,e,n,r){for(var s=-1,a=p7e(m7e((e-t)/(n||1)),0),o=Array(a);a--;)o[r?a:++s]=t,t+=n;return o}var y7e=g7e,v7e=EJ,SU=1/0,x7e=17976931348623157e292;function b7e(t){if(!t)return t===0?t:0;if(t=v7e(t),t===SU||t===-SU){var e=t<0?-1:1;return e*x7e}return t===t?t:0}var lte=b7e,w7e=y7e,_7e=j1,hA=lte;function j7e(t){return function(e,n,r){return r&&typeof r!="number"&&_7e(e,n,r)&&(n=r=void 0),e=hA(e),n===void 0?(n=e,e=0):n=hA(n),r=r===void 0?e<n?1:-1:hA(r),w7e(e,n,r,t)}}var N7e=j7e,S7e=N7e,E7e=S7e(),A7e=E7e;const fj=gn(A7e);function rx(t){"@babel/helpers - typeof";return rx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rx(t)}function EU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function AU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EU(Object(n),!0).forEach(function(r){cte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cte(t,e,n){return e=T7e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T7e(t){var e=C7e(t,"string");return rx(e)=="symbol"?e:e+""}function C7e(t,e){if(rx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(rx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var P7e=["Webkit","Moz","O","ms"],I7e=function(e,n){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),s=P7e.reduce(function(a,o){return AU(AU({},a),{},cte({},o+r,n))},{});return s[e]=n,s};function np(t){"@babel/helpers - typeof";return np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},np(t)}function mj(){return mj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mj.apply(this,arguments)}function TU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function fA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TU(Object(n),!0).forEach(function(r){xi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function k7e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dte(r.key),r)}}function R7e(t,e,n){return e&&CU(t.prototype,e),n&&CU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function O7e(t,e,n){return e=pj(e),M7e(t,ute()?Reflect.construct(e,n||[],pj(t).constructor):e.apply(t,n))}function M7e(t,e){if(e&&(np(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D7e(t)}function D7e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ute(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ute=function(){return!!t})()}function pj(t){return pj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pj(t)}function L7e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uI(t,e)}function uI(t,e){return uI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},uI(t,e)}function xi(t,e,n){return e=dte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dte(t){var e=$7e(t,"string");return np(e)=="symbol"?e:e+""}function $7e(t,e){if(np(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(np(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var F7e=function(e){var n=e.data,r=e.startIndex,s=e.endIndex,a=e.x,o=e.width,l=e.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=Py().domain(fj(0,c)).range([a,a+o-l]),d=u.domain().map(function(h){return u(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(s),scale:u,scaleValues:d}},PU=function(e){return e.changedTouches&&!!e.changedTouches.length},rp=function(t){function e(n){var r;return k7e(this,e),r=O7e(this,e,[n]),xi(r,"handleDrag",function(s){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(s):r.state.isSlideMoving&&r.handleSlideDrag(s)}),xi(r,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&r.handleDrag(s.changedTouches[0])}),xi(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=r.props,a=s.endIndex,o=s.onDragEnd,l=s.startIndex;o==null||o({endIndex:a,startIndex:l})}),r.detachDragEndListener()}),xi(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),xi(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),xi(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),xi(r,"handleSlideDragStart",function(s){var a=PU(s)?s.changedTouches[0]:s;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return L7e(e,t),R7e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var s=r.startX,a=r.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,h=Math.min(s,a),f=Math.max(s,a),m=e.getIndexInRange(o,h),v=e.getIndexInRange(o,f);return{startIndex:m-m%c,endIndex:v===d?d:v-v%c}}},{key:"getTextOfTick",value:function(r){var s=this.props,a=s.data,o=s.tickFormatter,l=s.dataKey,c=$r(a[r],l,r);return wt(o)?o(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var s=this.state,a=s.slideMoveStartX,o=s.startX,l=s.endX,c=this.props,u=c.x,d=c.width,h=c.travellerWidth,f=c.startIndex,m=c.endIndex,v=c.onChange,g=r.pageX-a;g>0?g=Math.min(g,u+d-h-l,u+d-h-o):g<0&&(g=Math.max(g,u-o,u-l));var y=this.getIndex({startX:o+g,endX:l+g});(y.startIndex!==f||y.endIndex!==m)&&v&&v(y),this.setState({startX:o+g,endX:l+g,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,s){var a=PU(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var s=this.state,a=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,c=s.startX,u=this.state[o],d=this.props,h=d.x,f=d.width,m=d.travellerWidth,v=d.onChange,g=d.gap,y=d.data,w={startX:this.state.startX,endX:this.state.endX},b=r.pageX-a;b>0?b=Math.min(b,h+f-m-u):b<0&&(b=Math.max(b,h-u)),w[o]=u+b;var E=this.getIndex(w),T=E.startIndex,x=E.endIndex,S=function(){var p=y.length-1;return o==="startX"&&(l>c?T%g===0:x%g===0)||l<c&&x===p||o==="endX"&&(l>c?x%g===0:T%g===0)||l>c&&x===p};this.setState(xi(xi({},o,u+b),"brushMoveStartX",r.pageX),function(){v&&S()&&v(E)})}},{key:"handleTravellerMoveKeyboard",value:function(r,s){var a=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[s],h=l.indexOf(d);if(h!==-1){var f=h+r;if(!(f===-1||f>=l.length)){var m=l[f];s==="startX"&&m>=u||s==="endX"&&m<=c||this.setState(xi({},s,m),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,s=r.x,a=r.y,o=r.width,l=r.height,c=r.fill,u=r.stroke;return D.createElement("rect",{stroke:u,fill:c,x:s,y:a,width:o,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,s=r.x,a=r.y,o=r.width,l=r.height,c=r.data,u=r.children,d=r.padding,h=N.Children.only(u);return h?D.cloneElement(h,{x:s,y:a,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,s){var a,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,h=c.height,f=c.traveller,m=c.ariaLabel,v=c.data,g=c.startIndex,y=c.endIndex,w=Math.max(r,this.props.x),b=fA(fA({},ft(this.props,!1)),{},{x:w,y:u,width:d,height:h}),E=m||"Min value: ".concat((a=v[g])===null||a===void 0?void 0:a.name,", Max value: ").concat((o=v[y])===null||o===void 0?void 0:o.name);return D.createElement(tn,{tabIndex:0,role:"slider","aria-label":E,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(x){["ArrowLeft","ArrowRight"].includes(x.key)&&(x.preventDefault(),x.stopPropagation(),l.handleTravellerMoveKeyboard(x.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,b))}},{key:"renderSlide",value:function(r,s){var a=this.props,o=a.y,l=a.height,c=a.stroke,u=a.travellerWidth,d=Math.min(r,s)+u,h=Math.max(Math.abs(s-r)-u,0);return D.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:h,height:l})}},{key:"renderText",value:function(){var r=this.props,s=r.startIndex,a=r.endIndex,o=r.y,l=r.height,c=r.travellerWidth,u=r.stroke,d=this.state,h=d.startX,f=d.endX,m=5,v={pointerEvents:"none",fill:u};return D.createElement(tn,{className:"recharts-brush-texts"},D.createElement(xh,mj({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,f)-m,y:o+l/2},v),this.getTextOfTick(s)),D.createElement(xh,mj({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,f)+c+m,y:o+l/2},v),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,s=r.data,a=r.className,o=r.children,l=r.x,c=r.y,u=r.width,d=r.height,h=r.alwaysShowText,f=this.state,m=f.startX,v=f.endX,g=f.isTextActive,y=f.isSlideMoving,w=f.isTravellerMoving,b=f.isTravellerFocused;if(!s||!s.length||!Ee(l)||!Ee(c)||!Ee(u)||!Ee(d)||u<=0||d<=0)return null;var E=$t("recharts-brush",a),T=D.Children.count(o)===1,x=I7e("userSelect","none");return D.createElement(tn,{className:E,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:x},this.renderBackground(),T&&this.renderPanorama(),this.renderSlide(m,v),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(v,"endX"),(g||y||w||b||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var s=r.x,a=r.y,o=r.width,l=r.height,c=r.stroke,u=Math.floor(a+l/2)-1;return D.createElement(D.Fragment,null,D.createElement("rect",{x:s,y:a,width:o,height:l,fill:c,stroke:"none"}),D.createElement("line",{x1:s+1,y1:u,x2:s+o-1,y2:u,fill:"none",stroke:"#fff"}),D.createElement("line",{x1:s+1,y1:u+2,x2:s+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,s){var a;return D.isValidElement(r)?a=D.cloneElement(r,s):wt(r)?a=r(s):a=e.renderDefaultTraveller(s),a}},{key:"getDerivedStateFromProps",value:function(r,s){var a=r.data,o=r.width,l=r.x,c=r.travellerWidth,u=r.updateId,d=r.startIndex,h=r.endIndex;if(a!==s.prevData||u!==s.prevUpdateId)return fA({prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},a&&a.length?F7e({data:a,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:h}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||c!==s.prevTravellerWidth)){s.scale.range([l,l+o-c]);var f=s.scale.domain().map(function(m){return s.scale(m)});return{prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:s.scale(r.startIndex),endX:s.scale(r.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(r,s){for(var a=r.length,o=0,l=a-1;l-o>1;){var c=Math.floor((o+l)/2);r[c]>s?l=c:o=c}return s>=r[l]?l:o}}])}(N.PureComponent);xi(rp,"displayName","Brush");xi(rp,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var V7e=$2;function B7e(t,e){var n;return V7e(t,function(r,s,a){return n=e(r,s,a),!n}),!!n}var U7e=B7e,z7e=JZ,q7e=Yo,W7e=U7e,H7e=mi,K7e=j1;function G7e(t,e,n){var r=H7e(t)?z7e:W7e;return n&&K7e(t,e,n)&&(e=void 0),r(t,q7e(e))}var Y7e=G7e;const Q7e=gn(Y7e);var Oo=function(e,n){var r=e.alwaysShow,s=e.ifOverflow;return r&&(s="extendDomain"),s===n},IU=wJ;function X7e(t,e,n){e=="__proto__"&&IU?IU(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var Z7e=X7e,J7e=Z7e,eKe=xJ,tKe=Yo;function nKe(t,e){var n={};return e=tKe(e),eKe(t,function(r,s,a){J7e(n,s,e(r,s,a))}),n}var rKe=nKe;const sKe=gn(rKe);function iKe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var aKe=iKe,oKe=$2;function lKe(t,e){var n=!0;return oKe(t,function(r,s,a){return n=!!e(r,s,a),n}),n}var cKe=lKe,uKe=aKe,dKe=cKe,hKe=Yo,fKe=mi,mKe=j1;function pKe(t,e,n){var r=fKe(t)?uKe:dKe;return n&&mKe(t,e,n)&&(e=void 0),r(t,hKe(e))}var gKe=pKe;const hte=gn(gKe);var yKe=["x","y"];function sx(t){"@babel/helpers - typeof";return sx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sx(t)}function dI(){return dI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dI.apply(this,arguments)}function kU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Fg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kU(Object(n),!0).forEach(function(r){vKe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vKe(t,e,n){return e=xKe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xKe(t){var e=bKe(t,"string");return sx(e)=="symbol"?e:e+""}function bKe(t,e){if(sx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(sx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wKe(t,e){if(t==null)return{};var n=_Ke(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _Ke(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function jKe(t,e){var n=t.x,r=t.y,s=wKe(t,yKe),a="".concat(n),o=parseInt(a,10),l="".concat(r),c=parseInt(l,10),u="".concat(e.height||s.height),d=parseInt(u,10),h="".concat(e.width||s.width),f=parseInt(h,10);return Fg(Fg(Fg(Fg(Fg({},e),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:f,name:e.name,radius:e.radius})}function RU(t){return D.createElement(ite,dI({shapeType:"rectangle",propTransformer:jKe,activeClassName:"recharts-active-bar"},t))}var NKe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,s){if(typeof e=="number")return e;var a=Ee(r)||YRe(r);return a?e(r,s):(a||wh(),n)}},SKe=["value","background"],fte;function sp(t){"@babel/helpers - typeof";return sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sp(t)}function EKe(t,e){if(t==null)return{};var n=AKe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function AKe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function gj(){return gj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gj.apply(this,arguments)}function OU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Nr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OU(Object(n),!0).forEach(function(r){zc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TKe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pte(r.key),r)}}function CKe(t,e,n){return e&&MU(t.prototype,e),n&&MU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function PKe(t,e,n){return e=yj(e),IKe(t,mte()?Reflect.construct(e,n||[],yj(t).constructor):e.apply(t,n))}function IKe(t,e){if(e&&(sp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kKe(t)}function kKe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mte=function(){return!!t})()}function yj(t){return yj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yj(t)}function RKe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hI(t,e)}function hI(t,e){return hI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},hI(t,e)}function zc(t,e,n){return e=pte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pte(t){var e=OKe(t,"string");return sp(e)=="symbol"?e:e+""}function OKe(t,e){if(sp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(sp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fh=function(t){function e(){var n;TKe(this,e);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=PKe(this,e,[].concat(s)),zc(n,"state",{isAnimationFinished:!1}),zc(n,"id",Gp("recharts-bar-")),zc(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),zc(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return RKe(e,t),CKe(e,[{key:"renderRectanglesStatically",value:function(r){var s=this,a=this.props,o=a.shape,l=a.dataKey,c=a.activeIndex,u=a.activeBar,d=ft(this.props,!1);return r&&r.map(function(h,f){var m=f===c,v=m?u:o,g=Nr(Nr(Nr({},d),h),{},{isActive:m,option:v,index:f,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return D.createElement(tn,gj({className:"recharts-bar-rectangle"},vh(s.props,h,f),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(f)}),D.createElement(RU,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,s=this.props,a=s.data,o=s.layout,l=s.isAnimationActive,c=s.animationBegin,u=s.animationDuration,d=s.animationEasing,h=s.animationId,f=this.state.prevData;return D.createElement(Bo,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var v=m.t,g=a.map(function(y,w){var b=f&&f[w];if(b){var E=ri(b.x,y.x),T=ri(b.y,y.y),x=ri(b.width,y.width),S=ri(b.height,y.height);return Nr(Nr({},y),{},{x:E(v),y:T(v),width:x(v),height:S(v)})}if(o==="horizontal"){var _=ri(0,y.height),p=_(v);return Nr(Nr({},y),{},{y:y.y+y.height-p,height:p})}var A=ri(0,y.width),P=A(v);return Nr(Nr({},y),{},{width:P})});return D.createElement(tn,null,r.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var r=this.props,s=r.data,a=r.isAnimationActive,o=this.state.prevData;return a&&s&&s.length&&(!o||!Qm(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var r=this,s=this.props,a=s.data,o=s.dataKey,l=s.activeIndex,c=ft(this.props.background,!1);return a.map(function(u,d){u.value;var h=u.background,f=EKe(u,SKe);if(!h)return null;var m=Nr(Nr(Nr(Nr(Nr({},f),{},{fill:"#eee"},h),c),vh(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return D.createElement(RU,gj({key:"background-bar-".concat(d),option:r.props.background,isActive:d===l},m))})}},{key:"renderErrorBar",value:function(r,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.data,l=a.xAxis,c=a.yAxis,u=a.layout,d=a.children,h=ia(d,M1);if(!h)return null;var f=u==="vertical"?o[0].height/2:o[0].width/2,m=function(y,w){var b=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:b,errorVal:$r(y,w)}},v={clipPath:r?"url(#clipPath-".concat(s,")"):null};return D.createElement(tn,v,h.map(function(g){return D.cloneElement(g,{key:"error-bar-".concat(s,"-").concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:f,dataPointFormatter:m})}))}},{key:"render",value:function(){var r=this.props,s=r.hide,a=r.data,o=r.className,l=r.xAxis,c=r.yAxis,u=r.left,d=r.top,h=r.width,f=r.height,m=r.isAnimationActive,v=r.background,g=r.id;if(s||!a||!a.length)return null;var y=this.state.isAnimationFinished,w=$t("recharts-bar",o),b=l&&l.allowDataOverflow,E=c&&c.allowDataOverflow,T=b||E,x=Ft(g)?this.id:g;return D.createElement(tn,{className:w},b||E?D.createElement("defs",null,D.createElement("clipPath",{id:"clipPath-".concat(x)},D.createElement("rect",{x:b?u:u-h/2,y:E?d:d-f/2,width:b?h:h*2,height:E?f:f*2}))):null,D.createElement(tn,{className:"recharts-bar-rectangles",clipPath:T?"url(#clipPath-".concat(x,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(T,x),(!m||y)&&xl.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:s.curData}:r.data!==s.curData?{curData:r.data}:null}}])}(N.PureComponent);fte=Fh;zc(Fh,"displayName","Bar");zc(Fh,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!ko.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});zc(Fh,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,s=t.bandSize,a=t.xAxis,o=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,u=t.stackedData,d=t.dataStartIndex,h=t.displayedData,f=t.offset,m=m9e(r,n);if(!m)return null;var v=e.layout,g=n.type.defaultProps,y=g!==void 0?Nr(Nr({},g),n.props):n.props,w=y.dataKey,b=y.children,E=y.minPointSize,T=v==="horizontal"?o:a,x=u?T.scale.domain():null,S=w9e({numericAxis:T}),_=ia(b,N1),p=h.map(function(A,P){var C,I,R,L,z,W;u?C=p9e(u[d+P],x):(C=$r(A,w),Array.isArray(C)||(C=[S,C]));var M=NKe(E,fte.defaultProps.minPointSize)(C[1],P);if(v==="horizontal"){var V,F=[o.scale(C[0]),o.scale(C[1])],Y=F[0],ae=F[1];I=N5({axis:a,ticks:l,bandSize:s,offset:m.offset,entry:A,index:P}),R=(V=ae??Y)!==null&&V!==void 0?V:void 0,L=m.size;var oe=Y-ae;if(z=Number.isNaN(oe)?0:oe,W={x:I,y:o.y,width:L,height:o.height},Math.abs(M)>0&&Math.abs(z)<Math.abs(M)){var me=Fs(z||M)*(Math.abs(M)-Math.abs(z));R-=me,z+=me}}else{var ke=[a.scale(C[0]),a.scale(C[1])],ut=ke[0],jt=ke[1];if(I=ut,R=N5({axis:o,ticks:c,bandSize:s,offset:m.offset,entry:A,index:P}),L=jt-ut,z=m.size,W={x:a.x,y:R,width:a.width,height:z},Math.abs(M)>0&&Math.abs(L)<Math.abs(M)){var Ne=Fs(L||M)*(Math.abs(M)-Math.abs(L));L+=Ne}}return Nr(Nr(Nr({},A),{},{x:I,y:R,width:L,height:z,value:u?C:C[1],payload:A,background:W},_&&_[P]&&_[P].props),{},{tooltipPayload:[Lee(n,A)],tooltipPosition:{x:I+L/2,y:R+z/2}})});return Nr({data:p,layout:v},f)});function ix(t){"@babel/helpers - typeof";return ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ix(t)}function MKe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gte(r.key),r)}}function DKe(t,e,n){return e&&DU(t.prototype,e),n&&DU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function LU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ia(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LU(Object(n),!0).forEach(function(r){z1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function z1(t,e,n){return e=gte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gte(t){var e=LKe(t,"string");return ix(e)=="symbol"?e:e+""}function LKe(t,e){if(ix(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ix(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yte=function(e,n,r,s,a){var o=e.width,l=e.height,c=e.layout,u=e.children,d=Object.keys(n),h={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},f=!!wi(u,Fh);return d.reduce(function(m,v){var g=n[v],y=g.orientation,w=g.domain,b=g.padding,E=b===void 0?{}:b,T=g.mirror,x=g.reversed,S="".concat(y).concat(T?"Mirror":""),_,p,A,P,C;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var I=w[1]-w[0],R=1/0,L=g.categoricalDomain.sort(ZRe);if(L.forEach(function(ke,ut){ut>0&&(R=Math.min((ke||0)-(L[ut-1]||0),R))}),Number.isFinite(R)){var z=R/I,W=g.layout==="vertical"?r.height:r.width;if(g.padding==="gap"&&(_=z*W/2),g.padding==="no-gap"){var M=Vs(e.barCategoryGap,z*W),V=z*W/2;_=V-M-(V-M)/W*M}}}s==="xAxis"?p=[r.left+(E.left||0)+(_||0),r.left+r.width-(E.right||0)-(_||0)]:s==="yAxis"?p=c==="horizontal"?[r.top+r.height-(E.bottom||0),r.top+(E.top||0)]:[r.top+(E.top||0)+(_||0),r.top+r.height-(E.bottom||0)-(_||0)]:p=g.range,x&&(p=[p[1],p[0]]);var F=Ree(g,a,f),Y=F.scale,ae=F.realScaleType;Y.domain(w).range(p),Oee(Y);var oe=Mee(Y,Ia(Ia({},g),{},{realScaleType:ae}));s==="xAxis"?(C=y==="top"&&!T||y==="bottom"&&T,A=r.left,P=h[S]-C*g.height):s==="yAxis"&&(C=y==="left"&&!T||y==="right"&&T,A=h[S]-C*g.width,P=r.top);var me=Ia(Ia(Ia({},g),oe),{},{realScaleType:ae,x:A,y:P,scale:Y,width:s==="xAxis"?r.width:g.width,height:s==="yAxis"?r.height:g.height});return me.bandSize=tj(me,oe),!g.hide&&s==="xAxis"?h[S]+=(C?-1:1)*me.height:g.hide||(h[S]+=(C?-1:1)*me.width),Ia(Ia({},m),{},z1({},v,me))},{})},vte=function(e,n){var r=e.x,s=e.y,a=n.x,o=n.y;return{x:Math.min(r,a),y:Math.min(s,o),width:Math.abs(a-r),height:Math.abs(o-s)}},$Ke=function(e){var n=e.x1,r=e.y1,s=e.x2,a=e.y2;return vte({x:n,y:r},{x:s,y:a})},xte=function(){function t(e){MKe(this,t),this.scale=e}return DKe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(s){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),s=r[0],a=r[r.length-1];return s<=a?n>=s&&n<=a:n>=a&&n<=s}}],[{key:"create",value:function(n){return new t(n)}}])}();z1(xte,"EPS",1e-4);var fM=function(e){var n=Object.keys(e).reduce(function(r,s){return Ia(Ia({},r),{},z1({},s,xte.create(e[s])))},{});return Ia(Ia({},n),{},{apply:function(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.bandAware,l=a.position;return sKe(s,function(c,u){return n[u].apply(c,{bandAware:o,position:l})})},isInRange:function(s){return hte(s,function(a,o){return n[o].isInRange(a)})}})};function FKe(t){return(t%180+180)%180}var VKe=function(e){var n=e.width,r=e.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=FKe(s),o=a*Math.PI/180,l=Math.atan(r/n),c=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(c)},BKe=Yo,UKe=rb,zKe=w1;function qKe(t){return function(e,n,r){var s=Object(e);if(!UKe(e)){var a=BKe(n);e=zKe(e),n=function(l){return a(s[l],l,s)}}var o=t(e,n,r);return o>-1?s[a?e[o]:o]:void 0}}var WKe=qKe,HKe=lte;function KKe(t){var e=HKe(t),n=e%1;return e===e?n?e-n:e:0}var GKe=KKe,YKe=fJ,QKe=Yo,XKe=GKe,ZKe=Math.max;function JKe(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var s=n==null?0:XKe(n);return s<0&&(s=ZKe(r+s,0)),YKe(t,QKe(e),s)}var eGe=JKe,tGe=WKe,nGe=eGe,rGe=tGe(nGe),sGe=rGe;const iGe=gn(sGe);var aGe=Jke(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),mM=N.createContext(void 0),pM=N.createContext(void 0),bte=N.createContext(void 0),wte=N.createContext({}),_te=N.createContext(void 0),jte=N.createContext(0),Nte=N.createContext(0),$U=function(e){var n=e.state,r=n.xAxisMap,s=n.yAxisMap,a=n.offset,o=e.clipPathId,l=e.children,c=e.width,u=e.height,d=aGe(a);return D.createElement(mM.Provider,{value:r},D.createElement(pM.Provider,{value:s},D.createElement(wte.Provider,{value:a},D.createElement(bte.Provider,{value:d},D.createElement(_te.Provider,{value:o},D.createElement(jte.Provider,{value:u},D.createElement(Nte.Provider,{value:c},l)))))))},oGe=function(){return N.useContext(_te)},Ste=function(e){var n=N.useContext(mM);n==null&&wh();var r=n[e];return r==null&&wh(),r},lGe=function(){var e=N.useContext(mM);return Sc(e)},cGe=function(){var e=N.useContext(pM),n=iGe(e,function(r){return hte(r.domain,Number.isFinite)});return n||Sc(e)},Ete=function(e){var n=N.useContext(pM);n==null&&wh();var r=n[e];return r==null&&wh(),r},uGe=function(){var e=N.useContext(bte);return e},dGe=function(){return N.useContext(wte)},gM=function(){return N.useContext(Nte)},yM=function(){return N.useContext(jte)};function ip(t){"@babel/helpers - typeof";return ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ip(t)}function hGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fGe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Tte(r.key),r)}}function mGe(t,e,n){return e&&fGe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function pGe(t,e,n){return e=vj(e),gGe(t,Ate()?Reflect.construct(e,n||[],vj(t).constructor):e.apply(t,n))}function gGe(t,e){if(e&&(ip(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yGe(t)}function yGe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ate(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ate=function(){return!!t})()}function vj(t){return vj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vj(t)}function vGe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fI(t,e)}function fI(t,e){return fI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},fI(t,e)}function FU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function VU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FU(Object(n),!0).forEach(function(r){vM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vM(t,e,n){return e=Tte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tte(t){var e=xGe(t,"string");return ip(e)=="symbol"?e:e+""}function xGe(t,e){if(ip(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ip(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bGe(t,e){return NGe(t)||jGe(t,e)||_Ge(t,e)||wGe()}function wGe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Ge(t,e){if(t){if(typeof t=="string")return BU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BU(t,e)}}function BU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jGe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function NGe(t){if(Array.isArray(t))return t}function mI(){return mI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mI.apply(this,arguments)}var SGe=function(e,n){var r;return D.isValidElement(e)?r=D.cloneElement(e,n):wt(e)?r=e(n):r=D.createElement("line",mI({},n,{className:"recharts-reference-line-line"})),r},EGe=function(e,n,r,s,a,o,l,c,u){var d=a.x,h=a.y,f=a.width,m=a.height;if(r){var v=u.y,g=e.y.apply(v,{position:o});if(Oo(u,"discard")&&!e.y.isInRange(g))return null;var y=[{x:d+f,y:g},{x:d,y:g}];return c==="left"?y.reverse():y}if(n){var w=u.x,b=e.x.apply(w,{position:o});if(Oo(u,"discard")&&!e.x.isInRange(b))return null;var E=[{x:b,y:h+m},{x:b,y:h}];return l==="top"?E.reverse():E}if(s){var T=u.segment,x=T.map(function(S){return e.apply(S,{position:o})});return Oo(u,"discard")&&Q7e(x,function(S){return!e.isInRange(S)})?null:x}return null};function AGe(t){var e=t.x,n=t.y,r=t.segment,s=t.xAxisId,a=t.yAxisId,o=t.shape,l=t.className,c=t.alwaysShow,u=oGe(),d=Ste(s),h=Ete(a),f=uGe();if(!u||!f)return null;Ua(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=fM({x:d.scale,y:h.scale}),v=Vr(e),g=Vr(n),y=r&&r.length===2,w=EGe(m,v,g,y,f,t.position,d.orientation,h.orientation,t);if(!w)return null;var b=bGe(w,2),E=b[0],T=E.x,x=E.y,S=b[1],_=S.x,p=S.y,A=Oo(t,"hidden")?"url(#".concat(u,")"):void 0,P=VU(VU({clipPath:A},ft(t,!0)),{},{x1:T,y1:x,x2:_,y2:p});return D.createElement(tn,{className:$t("recharts-reference-line",l)},SGe(o,P),Yr.renderCallByParent(t,$Ke({x1:T,y1:x,x2:_,y2:p})))}var xM=function(t){function e(){return hGe(this,e),pGe(this,e,arguments)}return vGe(e,t),mGe(e,[{key:"render",value:function(){return D.createElement(AGe,this.props)}}])}(D.Component);vM(xM,"displayName","ReferenceLine");vM(xM,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function pI(){return pI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pI.apply(this,arguments)}function ap(t){"@babel/helpers - typeof";return ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ap(t)}function UU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function zU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UU(Object(n),!0).forEach(function(r){q1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CGe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pte(r.key),r)}}function PGe(t,e,n){return e&&CGe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function IGe(t,e,n){return e=xj(e),kGe(t,Cte()?Reflect.construct(e,n||[],xj(t).constructor):e.apply(t,n))}function kGe(t,e){if(e&&(ap(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RGe(t)}function RGe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cte=function(){return!!t})()}function xj(t){return xj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xj(t)}function OGe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gI(t,e)}function gI(t,e){return gI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},gI(t,e)}function q1(t,e,n){return e=Pte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pte(t){var e=MGe(t,"string");return ap(e)=="symbol"?e:e+""}function MGe(t,e){if(ap(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ap(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var DGe=function(e){var n=e.x,r=e.y,s=e.xAxis,a=e.yAxis,o=fM({x:s.scale,y:a.scale}),l=o.apply({x:n,y:r},{bandAware:!0});return Oo(e,"discard")&&!o.isInRange(l)?null:l},W1=function(t){function e(){return TGe(this,e),IGe(this,e,arguments)}return OGe(e,t),PGe(e,[{key:"render",value:function(){var r=this.props,s=r.x,a=r.y,o=r.r,l=r.alwaysShow,c=r.clipPathId,u=Vr(s),d=Vr(a);if(Ua(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var h=DGe(this.props);if(!h)return null;var f=h.x,m=h.y,v=this.props,g=v.shape,y=v.className,w=Oo(this.props,"hidden")?"url(#".concat(c,")"):void 0,b=zU(zU({clipPath:w},ft(this.props,!0)),{},{cx:f,cy:m});return D.createElement(tn,{className:$t("recharts-reference-dot",y)},e.renderDot(g,b),Yr.renderCallByParent(this.props,{x:f-o,y:m-o,width:2*o,height:2*o}))}}])}(D.Component);q1(W1,"displayName","ReferenceDot");q1(W1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});q1(W1,"renderDot",function(t,e){var n;return D.isValidElement(t)?n=D.cloneElement(t,e):wt(t)?n=t(e):n=D.createElement(D1,pI({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function yI(){return yI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yI.apply(this,arguments)}function op(t){"@babel/helpers - typeof";return op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},op(t)}function qU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function WU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qU(Object(n),!0).forEach(function(r){H1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $Ge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kte(r.key),r)}}function FGe(t,e,n){return e&&$Ge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function VGe(t,e,n){return e=bj(e),BGe(t,Ite()?Reflect.construct(e,n||[],bj(t).constructor):e.apply(t,n))}function BGe(t,e){if(e&&(op(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UGe(t)}function UGe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ite(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ite=function(){return!!t})()}function bj(t){return bj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bj(t)}function zGe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vI(t,e)}function vI(t,e){return vI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},vI(t,e)}function H1(t,e,n){return e=kte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kte(t){var e=qGe(t,"string");return op(e)=="symbol"?e:e+""}function qGe(t,e){if(op(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(op(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var WGe=function(e,n,r,s,a){var o=a.x1,l=a.x2,c=a.y1,u=a.y2,d=a.xAxis,h=a.yAxis;if(!d||!h)return null;var f=fM({x:d.scale,y:h.scale}),m={x:e?f.x.apply(o,{position:"start"}):f.x.rangeMin,y:r?f.y.apply(c,{position:"start"}):f.y.rangeMin},v={x:n?f.x.apply(l,{position:"end"}):f.x.rangeMax,y:s?f.y.apply(u,{position:"end"}):f.y.rangeMax};return Oo(a,"discard")&&(!f.isInRange(m)||!f.isInRange(v))?null:vte(m,v)},K1=function(t){function e(){return LGe(this,e),VGe(this,e,arguments)}return zGe(e,t),FGe(e,[{key:"render",value:function(){var r=this.props,s=r.x1,a=r.x2,o=r.y1,l=r.y2,c=r.className,u=r.alwaysShow,d=r.clipPathId;Ua(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=Vr(s),f=Vr(a),m=Vr(o),v=Vr(l),g=this.props.shape;if(!h&&!f&&!m&&!v&&!g)return null;var y=WGe(h,f,m,v,this.props);if(!y&&!g)return null;var w=Oo(this.props,"hidden")?"url(#".concat(d,")"):void 0;return D.createElement(tn,{className:$t("recharts-reference-area",c)},e.renderRect(g,WU(WU({clipPath:w},ft(this.props,!0)),y)),Yr.renderCallByParent(this.props,y))}}])}(D.Component);H1(K1,"displayName","ReferenceArea");H1(K1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});H1(K1,"renderRect",function(t,e){var n;return D.isValidElement(t)?n=D.cloneElement(t,e):wt(t)?n=t(e):n=D.createElement(hM,yI({},e,{className:"recharts-reference-area-rect"})),n});function Rte(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],s=0;s<t.length;s+=e)r.push(t[s]);return r}function HGe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return VKe(r,n)}function KGe(t,e,n){var r=n==="width",s=t.x,a=t.y,o=t.width,l=t.height;return e===1?{start:r?s:a,end:r?s+o:a+l}:{start:r?s+o:a+l,end:r?s:a}}function wj(t,e,n,r,s){if(t*e<t*r||t*e>t*s)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-s)<=0}function GGe(t,e){return Rte(t,e+1)}function YGe(t,e,n,r,s){for(var a=(r||[]).slice(),o=e.start,l=e.end,c=0,u=1,d=o,h=function(){var v=r==null?void 0:r[c];if(v===void 0)return{v:Rte(r,u)};var g=c,y,w=function(){return y===void 0&&(y=n(v,g)),y},b=v.coordinate,E=c===0||wj(t,b,w,d,l);E||(c=0,d=o,u+=1),E&&(d=b+t*(w()/2+s),c+=u)},f;u<=a.length;)if(f=h(),f)return f.v;return[]}function ax(t){"@babel/helpers - typeof";return ax=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ax(t)}function HU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function vs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HU(Object(n),!0).forEach(function(r){QGe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QGe(t,e,n){return e=XGe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XGe(t){var e=ZGe(t,"string");return ax(e)=="symbol"?e:e+""}function ZGe(t,e){if(ax(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ax(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JGe(t,e,n,r,s){for(var a=(r||[]).slice(),o=a.length,l=e.start,c=e.end,u=function(f){var m=a[f],v,g=function(){return v===void 0&&(v=n(m,f)),v};if(f===o-1){var y=t*(m.coordinate+t*g()/2-c);a[f]=m=vs(vs({},m),{},{tickCoord:y>0?m.coordinate-y*t:m.coordinate})}else a[f]=m=vs(vs({},m),{},{tickCoord:m.coordinate});var w=wj(t,m.tickCoord,g,l,c);w&&(c=m.tickCoord-t*(g()/2+s),a[f]=vs(vs({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return a}function eYe(t,e,n,r,s,a){var o=(r||[]).slice(),l=o.length,c=e.start,u=e.end;if(a){var d=r[l-1],h=n(d,l-1),f=t*(d.coordinate+t*h/2-u);o[l-1]=d=vs(vs({},d),{},{tickCoord:f>0?d.coordinate-f*t:d.coordinate});var m=wj(t,d.tickCoord,function(){return h},c,u);m&&(u=d.tickCoord-t*(h/2+s),o[l-1]=vs(vs({},d),{},{isShow:!0}))}for(var v=a?l-1:l,g=function(b){var E=o[b],T,x=function(){return T===void 0&&(T=n(E,b)),T};if(b===0){var S=t*(E.coordinate-t*x()/2-c);o[b]=E=vs(vs({},E),{},{tickCoord:S<0?E.coordinate-S*t:E.coordinate})}else o[b]=E=vs(vs({},E),{},{tickCoord:E.coordinate});var _=wj(t,E.tickCoord,x,c,u);_&&(c=E.tickCoord+t*(x()/2+s),o[b]=vs(vs({},E),{},{isShow:!0}))},y=0;y<v;y++)g(y);return o}function bM(t,e,n){var r=t.tick,s=t.ticks,a=t.viewBox,o=t.minTickGap,l=t.orientation,c=t.interval,u=t.tickFormatter,d=t.unit,h=t.angle;if(!s||!s.length||!r)return[];if(Ee(c)||ko.isSsr)return GGe(s,typeof c=="number"&&Ee(c)?c:0);var f=[],m=l==="top"||l==="bottom"?"width":"height",v=d&&m==="width"?Cy(d,{fontSize:e,letterSpacing:n}):{width:0,height:0},g=function(E,T){var x=wt(u)?u(E.value,T):E.value;return m==="width"?HGe(Cy(x,{fontSize:e,letterSpacing:n}),v,h):Cy(x,{fontSize:e,letterSpacing:n})[m]},y=s.length>=2?Fs(s[1].coordinate-s[0].coordinate):1,w=KGe(a,y,m);return c==="equidistantPreserveStart"?YGe(y,w,g,s,o):(c==="preserveStart"||c==="preserveStartEnd"?f=eYe(y,w,g,s,o,c==="preserveStartEnd"):f=JGe(y,w,g,s,o),f.filter(function(b){return b.isShow}))}var tYe=["viewBox"],nYe=["viewBox"],rYe=["ticks"];function lp(t){"@babel/helpers - typeof";return lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lp(t)}function kf(){return kf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kf.apply(this,arguments)}function KU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function kr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KU(Object(n),!0).forEach(function(r){wM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mA(t,e){if(t==null)return{};var n=sYe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function sYe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function iYe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function GU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Mte(r.key),r)}}function aYe(t,e,n){return e&&GU(t.prototype,e),n&&GU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function oYe(t,e,n){return e=_j(e),lYe(t,Ote()?Reflect.construct(e,n||[],_j(t).constructor):e.apply(t,n))}function lYe(t,e){if(e&&(lp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cYe(t)}function cYe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ote(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ote=function(){return!!t})()}function _j(t){return _j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_j(t)}function uYe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xI(t,e)}function xI(t,e){return xI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},xI(t,e)}function wM(t,e,n){return e=Mte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mte(t){var e=dYe(t,"string");return lp(e)=="symbol"?e:e+""}function dYe(t,e){if(lp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(lp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tg=function(t){function e(n){var r;return iYe(this,e),r=oYe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return uYe(e,t),aYe(e,[{key:"shouldComponentUpdate",value:function(r,s){var a=r.viewBox,o=mA(r,tYe),l=this.props,c=l.viewBox,u=mA(l,nYe);return!Zf(a,c)||!Zf(o,u)||!Zf(s,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var s=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var s=this.props,a=s.x,o=s.y,l=s.width,c=s.height,u=s.orientation,d=s.tickSize,h=s.mirror,f=s.tickMargin,m,v,g,y,w,b,E=h?-1:1,T=r.tickSize||d,x=Ee(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":m=v=r.coordinate,y=o+ +!h*c,g=y-E*T,b=g-E*f,w=x;break;case"left":g=y=r.coordinate,v=a+ +!h*l,m=v-E*T,w=m-E*f,b=x;break;case"right":g=y=r.coordinate,v=a+ +h*l,m=v+E*T,w=m+E*f,b=x;break;default:m=v=r.coordinate,y=o+ +h*c,g=y+E*T,b=g+E*f,w=x;break}return{line:{x1:m,y1:g,x2:v,y2:y},tick:{x:w,y:b}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,s=r.orientation,a=r.mirror,o;switch(s){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,s=r.orientation,a=r.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.x,a=r.y,o=r.width,l=r.height,c=r.orientation,u=r.mirror,d=r.axisLine,h=kr(kr(kr({},ft(this.props,!1)),ft(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!u||c==="bottom"&&u);h=kr(kr({},h),{},{x1:s,y1:a+f*l,x2:s+o,y2:a+f*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);h=kr(kr({},h),{},{x1:s+m*o,y1:a,x2:s+m*o,y2:a+l})}return D.createElement("line",kf({},h,{className:$t("recharts-cartesian-axis-line",Ri(d,"className"))}))}},{key:"renderTicks",value:function(r,s,a){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,h=l.tickFormatter,f=l.unit,m=bM(kr(kr({},this.props),{},{ticks:r}),s,a),v=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),y=ft(this.props,!1),w=ft(d,!1),b=kr(kr({},y),{},{fill:"none"},ft(c,!1)),E=m.map(function(T,x){var S=o.getTickLineCoord(T),_=S.line,p=S.tick,A=kr(kr(kr(kr({textAnchor:v,verticalAnchor:g},y),{},{stroke:"none",fill:u},w),p),{},{index:x,payload:T,visibleTicksCount:m.length,tickFormatter:h});return D.createElement(tn,kf({className:"recharts-cartesian-axis-tick",key:"tick-".concat(T.value,"-").concat(T.coordinate,"-").concat(T.tickCoord)},vh(o.props,T,x)),c&&D.createElement("line",kf({},b,_,{className:$t("recharts-cartesian-axis-tick-line",Ri(c,"className"))})),d&&e.renderTickItem(d,A,"".concat(wt(h)?h(T.value,x):T.value).concat(f||"")))});return D.createElement("g",{className:"recharts-cartesian-axis-ticks"},E)}},{key:"render",value:function(){var r=this,s=this.props,a=s.axisLine,o=s.width,l=s.height,c=s.ticksGenerator,u=s.className,d=s.hide;if(d)return null;var h=this.props,f=h.ticks,m=mA(h,rYe),v=f;return wt(c)&&(v=f&&f.length>0?c(this.props):c(m)),o<=0||l<=0||!v||!v.length?null:D.createElement(tn,{className:$t("recharts-cartesian-axis",u),ref:function(y){r.layerReference=y}},a&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),Yr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,s,a){var o,l=$t(s.className,"recharts-cartesian-axis-tick-value");return D.isValidElement(r)?o=D.cloneElement(r,kr(kr({},s),{},{className:l})):wt(r)?o=r(kr(kr({},s),{},{className:l})):o=D.createElement(xh,kf({},s,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])}(N.Component);wM(tg,"displayName","CartesianAxis");wM(tg,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var hYe=["x1","y1","x2","y2","key"],fYe=["offset"];function _h(t){"@babel/helpers - typeof";return _h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_h(t)}function YU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ns(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YU(Object(n),!0).forEach(function(r){mYe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mYe(t,e,n){return e=pYe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pYe(t){var e=gYe(t,"string");return _h(e)=="symbol"?e:e+""}function gYe(t,e){if(_h(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_h(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sd(){return Sd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sd.apply(this,arguments)}function QU(t,e){if(t==null)return{};var n=yYe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yYe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var vYe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,s=e.x,a=e.y,o=e.width,l=e.height,c=e.ry;return D.createElement("rect",{x:s,y:a,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Dte(t,e){var n;if(D.isValidElement(t))n=D.cloneElement(t,e);else if(wt(t))n=t(e);else{var r=e.x1,s=e.y1,a=e.x2,o=e.y2,l=e.key,c=QU(e,hYe),u=ft(c,!1);u.offset;var d=QU(u,fYe);n=D.createElement("line",Sd({},d,{x1:r,y1:s,x2:a,y2:o,fill:"none",key:l}))}return n}function xYe(t){var e=t.x,n=t.width,r=t.horizontal,s=r===void 0?!0:r,a=t.horizontalPoints;if(!s||!a||!a.length)return null;var o=a.map(function(l,c){var u=Ns(Ns({},t),{},{x1:e,y1:l,x2:e+n,y2:l,key:"line-".concat(c),index:c});return Dte(s,u)});return D.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function bYe(t){var e=t.y,n=t.height,r=t.vertical,s=r===void 0?!0:r,a=t.verticalPoints;if(!s||!a||!a.length)return null;var o=a.map(function(l,c){var u=Ns(Ns({},t),{},{x1:l,y1:e,x2:l,y2:e+n,key:"line-".concat(c),index:c});return Dte(s,u)});return D.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function wYe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,s=t.y,a=t.width,o=t.height,l=t.horizontalPoints,c=t.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var d=l.map(function(f){return Math.round(f+s-s)}).sort(function(f,m){return f-m});s!==d[0]&&d.unshift(0);var h=d.map(function(f,m){var v=!d[m+1],g=v?s+o-f:d[m+1]-f;if(g<=0)return null;var y=m%e.length;return D.createElement("rect",{key:"react-".concat(m),y:f,x:r,height:g,width:a,stroke:"none",fill:e[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return D.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function _Ye(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,s=t.fillOpacity,a=t.x,o=t.y,l=t.width,c=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(f){return Math.round(f+a-a)}).sort(function(f,m){return f-m});a!==d[0]&&d.unshift(0);var h=d.map(function(f,m){var v=!d[m+1],g=v?a+l-f:d[m+1]-f;if(g<=0)return null;var y=m%r.length;return D.createElement("rect",{key:"react-".concat(m),x:f,y:o,width:g,height:c,stroke:"none",fill:r[y],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return D.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var jYe=function(e,n){var r=e.xAxis,s=e.width,a=e.height,o=e.offset;return kee(bM(Ns(Ns(Ns({},tg.defaultProps),r),{},{ticks:fl(r,!0),viewBox:{x:0,y:0,width:s,height:a}})),o.left,o.left+o.width,n)},NYe=function(e,n){var r=e.yAxis,s=e.width,a=e.height,o=e.offset;return kee(bM(Ns(Ns(Ns({},tg.defaultProps),r),{},{ticks:fl(r,!0),viewBox:{x:0,y:0,width:s,height:a}})),o.top,o.top+o.height,n)},Jh={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Lte(t){var e,n,r,s,a,o,l=gM(),c=yM(),u=dGe(),d=Ns(Ns({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Jh.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Jh.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Jh.horizontal,horizontalFill:(s=t.horizontalFill)!==null&&s!==void 0?s:Jh.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:Jh.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:Jh.verticalFill,x:Ee(t.x)?t.x:u.left,y:Ee(t.y)?t.y:u.top,width:Ee(t.width)?t.width:u.width,height:Ee(t.height)?t.height:u.height}),h=d.x,f=d.y,m=d.width,v=d.height,g=d.syncWithTicks,y=d.horizontalValues,w=d.verticalValues,b=lGe(),E=cGe();if(!Ee(m)||m<=0||!Ee(v)||v<=0||!Ee(h)||h!==+h||!Ee(f)||f!==+f)return null;var T=d.verticalCoordinatesGenerator||jYe,x=d.horizontalCoordinatesGenerator||NYe,S=d.horizontalPoints,_=d.verticalPoints;if((!S||!S.length)&&wt(x)){var p=y&&y.length,A=x({yAxis:E?Ns(Ns({},E),{},{ticks:p?y:E.ticks}):void 0,width:l,height:c,offset:u},p?!0:g);Ua(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(_h(A),"]")),Array.isArray(A)&&(S=A)}if((!_||!_.length)&&wt(T)){var P=w&&w.length,C=T({xAxis:b?Ns(Ns({},b),{},{ticks:P?w:b.ticks}):void 0,width:l,height:c,offset:u},P?!0:g);Ua(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(_h(C),"]")),Array.isArray(C)&&(_=C)}return D.createElement("g",{className:"recharts-cartesian-grid"},D.createElement(vYe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),D.createElement(xYe,Sd({},d,{offset:u,horizontalPoints:S,xAxis:b,yAxis:E})),D.createElement(bYe,Sd({},d,{offset:u,verticalPoints:_,xAxis:b,yAxis:E})),D.createElement(wYe,Sd({},d,{horizontalPoints:S})),D.createElement(_Ye,Sd({},d,{verticalPoints:_})))}Lte.displayName="CartesianGrid";var SYe=["layout","type","stroke","connectNulls","isRange","ref"],EYe=["key"],$te;function cp(t){"@babel/helpers - typeof";return cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cp(t)}function Fte(t,e){if(t==null)return{};var n=AYe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function AYe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ed(){return Ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ed.apply(this,arguments)}function XU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function fc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XU(Object(n),!0).forEach(function(r){bo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TYe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bte(r.key),r)}}function CYe(t,e,n){return e&&ZU(t.prototype,e),n&&ZU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function PYe(t,e,n){return e=jj(e),IYe(t,Vte()?Reflect.construct(e,n||[],jj(t).constructor):e.apply(t,n))}function IYe(t,e){if(e&&(cp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kYe(t)}function kYe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vte=function(){return!!t})()}function jj(t){return jj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jj(t)}function RYe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bI(t,e)}function bI(t,e){return bI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},bI(t,e)}function bo(t,e,n){return e=Bte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bte(t){var e=OYe(t,"string");return cp(e)=="symbol"?e:e+""}function OYe(t,e){if(cp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(cp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $l=function(t){function e(){var n;TYe(this,e);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=PYe(this,e,[].concat(s)),bo(n,"state",{isAnimationFinished:!0}),bo(n,"id",Gp("recharts-area-")),bo(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),wt(o)&&o()}),bo(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),wt(o)&&o()}),n}return RYe(e,t),CYe(e,[{key:"renderDots",value:function(r,s,a){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,d=c.points,h=c.dataKey,f=ft(this.props,!1),m=ft(u,!0),v=d.map(function(y,w){var b=fc(fc(fc({key:"dot-".concat(w),r:3},f),m),{},{index:w,cx:y.x,cy:y.y,dataKey:h,value:y.value,payload:y.payload,points:d});return e.renderDotItem(u,b)}),g={clipPath:r?"url(#clipPath-".concat(s?"":"dots-").concat(a,")"):null};return D.createElement(tn,Ed({className:"recharts-area-dots"},g),v)}},{key:"renderHorizontalRect",value:function(r){var s=this.props,a=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].x,u=o[o.length-1].x,d=r*Math.abs(c-u),h=Uc(o.map(function(f){return f.y||0}));return Ee(a)&&typeof a=="number"?h=Math.max(a,h):a&&Array.isArray(a)&&a.length&&(h=Math.max(Uc(a.map(function(f){return f.y||0})),h)),Ee(h)?D.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(h+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var s=this.props,a=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].y,u=o[o.length-1].y,d=r*Math.abs(c-u),h=Uc(o.map(function(f){return f.x||0}));return Ee(a)&&typeof a=="number"?h=Math.max(a,h):a&&Array.isArray(a)&&a.length&&(h=Math.max(Uc(a.map(function(f){return f.x||0})),h)),Ee(h)?D.createElement("rect",{x:0,y:c<u?c:c-d,width:h+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(r){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,s,a,o){var l=this.props,c=l.layout,u=l.type,d=l.stroke,h=l.connectNulls,f=l.isRange;l.ref;var m=Fte(l,SYe);return D.createElement(tn,{clipPath:a?"url(#clipPath-".concat(o,")"):null},D.createElement(nm,Ed({},ft(m,!0),{points:r,connectNulls:h,type:u,baseLine:s,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&D.createElement(nm,Ed({},ft(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:r})),d!=="none"&&f&&D.createElement(nm,Ed({},ft(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(r,s){var a=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,h=o.animationDuration,f=o.animationEasing,m=o.animationId,v=this.state,g=v.prevPoints,y=v.prevBaseLine;return D.createElement(Bo,{begin:d,duration:h,isActive:u,easing:f,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(w){var b=w.t;if(g){var E=g.length/l.length,T=l.map(function(p,A){var P=Math.floor(A*E);if(g[P]){var C=g[P],I=ri(C.x,p.x),R=ri(C.y,p.y);return fc(fc({},p),{},{x:I(b),y:R(b)})}return p}),x;if(Ee(c)&&typeof c=="number"){var S=ri(y,c);x=S(b)}else if(Ft(c)||Kp(c)){var _=ri(y,0);x=_(b)}else x=c.map(function(p,A){var P=Math.floor(A*E);if(y[P]){var C=y[P],I=ri(C.x,p.x),R=ri(C.y,p.y);return fc(fc({},p),{},{x:I(b),y:R(b)})}return p});return a.renderAreaStatically(T,x,r,s)}return D.createElement(tn,null,D.createElement("defs",null,D.createElement("clipPath",{id:"animationClipPath-".concat(s)},a.renderClipRect(b))),D.createElement(tn,{clipPath:"url(#animationClipPath-".concat(s,")")},a.renderAreaStatically(l,c,r,s)))})}},{key:"renderArea",value:function(r,s){var a=this.props,o=a.points,l=a.baseLine,c=a.isAnimationActive,u=this.state,d=u.prevPoints,h=u.prevBaseLine,f=u.totalLength;return c&&o&&o.length&&(!d&&f>0||!Qm(d,o)||!Qm(h,l))?this.renderAreaWithAnimation(r,s):this.renderAreaStatically(o,l,r,s)}},{key:"render",value:function(){var r,s=this.props,a=s.hide,o=s.dot,l=s.points,c=s.className,u=s.top,d=s.left,h=s.xAxis,f=s.yAxis,m=s.width,v=s.height,g=s.isAnimationActive,y=s.id;if(a||!l||!l.length)return null;var w=this.state.isAnimationFinished,b=l.length===1,E=$t("recharts-area",c),T=h&&h.allowDataOverflow,x=f&&f.allowDataOverflow,S=T||x,_=Ft(y)?this.id:y,p=(r=ft(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},A=p.r,P=A===void 0?3:A,C=p.strokeWidth,I=C===void 0?2:C,R=oOe(o)?o:{},L=R.clipDot,z=L===void 0?!0:L,W=P*2+I;return D.createElement(tn,{className:E},T||x?D.createElement("defs",null,D.createElement("clipPath",{id:"clipPath-".concat(_)},D.createElement("rect",{x:T?d:d-m/2,y:x?u:u-v/2,width:T?m:m*2,height:x?v:v*2})),!z&&D.createElement("clipPath",{id:"clipPath-dots-".concat(_)},D.createElement("rect",{x:d-W/2,y:u-W/2,width:m+W,height:v+W}))):null,b?null:this.renderArea(S,_),(o||b)&&this.renderDots(S,z,_),(!g||w)&&xl.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:r.points!==s.curPoints||r.baseLine!==s.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(N.PureComponent);$te=$l;bo($l,"displayName","Area");bo($l,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!ko.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});bo($l,"getBaseValue",function(t,e,n,r){var s=t.layout,a=t.baseValue,o=e.props.baseValue,l=o??a;if(Ee(l)&&typeof l=="number")return l;var c=s==="horizontal"?r:n,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),h=Math.min(u[0],u[1]);return l==="dataMin"?h:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});bo($l,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,s=t.yAxis,a=t.xAxisTicks,o=t.yAxisTicks,l=t.bandSize,c=t.dataKey,u=t.stackedData,d=t.dataStartIndex,h=t.displayedData,f=t.offset,m=e.layout,v=u&&u.length,g=$te.getBaseValue(e,n,r,s),y=m==="horizontal",w=!1,b=h.map(function(T,x){var S;v?S=u[d+x]:(S=$r(T,c),Array.isArray(S)?w=!0:S=[g,S]);var _=S[1]==null||v&&$r(T,c)==null;return y?{x:j5({axis:r,ticks:a,bandSize:l,entry:T,index:x}),y:_?null:s.scale(S[1]),value:S,payload:T}:{x:_?null:r.scale(S[1]),y:j5({axis:s,ticks:o,bandSize:l,entry:T,index:x}),value:S,payload:T}}),E;return v||w?E=b.map(function(T){var x=Array.isArray(T.value)?T.value[0]:null;return y?{x:T.x,y:x!=null&&T.y!=null?s.scale(x):null}:{x:x!=null?r.scale(x):null,y:T.y}}):E=y?s.scale(g):r.scale(g),fc({points:b,baseLine:E,layout:m,isRange:w},f)});bo($l,"renderDotItem",function(t,e){var n;if(D.isValidElement(t))n=D.cloneElement(t,e);else if(wt(t))n=t(e);else{var r=$t("recharts-area-dot",typeof t!="boolean"?t.className:""),s=e.key,a=Fte(e,EYe);n=D.createElement(D1,Ed({},a,{key:s,className:r}))}return n});function up(t){"@babel/helpers - typeof";return up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},up(t)}function MYe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DYe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qte(r.key),r)}}function LYe(t,e,n){return e&&DYe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $Ye(t,e,n){return e=Nj(e),FYe(t,Ute()?Reflect.construct(e,n||[],Nj(t).constructor):e.apply(t,n))}function FYe(t,e){if(e&&(up(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VYe(t)}function VYe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ute(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ute=function(){return!!t})()}function Nj(t){return Nj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Nj(t)}function BYe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wI(t,e)}function wI(t,e){return wI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},wI(t,e)}function zte(t,e,n){return e=qte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qte(t){var e=UYe(t,"string");return up(e)=="symbol"?e:e+""}function UYe(t,e){if(up(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(up(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _I(){return _I=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_I.apply(this,arguments)}function zYe(t){var e=t.xAxisId,n=gM(),r=yM(),s=Ste(e);return s==null?null:N.createElement(tg,_I({},s,{className:$t("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return fl(o,!0)}}))}var dp=function(t){function e(){return MYe(this,e),$Ye(this,e,arguments)}return BYe(e,t),LYe(e,[{key:"render",value:function(){return N.createElement(zYe,this.props)}}])}(N.Component);zte(dp,"displayName","XAxis");zte(dp,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function hp(t){"@babel/helpers - typeof";return hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hp(t)}function qYe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WYe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Kte(r.key),r)}}function HYe(t,e,n){return e&&WYe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function KYe(t,e,n){return e=Sj(e),GYe(t,Wte()?Reflect.construct(e,n||[],Sj(t).constructor):e.apply(t,n))}function GYe(t,e){if(e&&(hp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YYe(t)}function YYe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wte=function(){return!!t})()}function Sj(t){return Sj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Sj(t)}function QYe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jI(t,e)}function jI(t,e){return jI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},jI(t,e)}function Hte(t,e,n){return e=Kte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kte(t){var e=XYe(t,"string");return hp(e)=="symbol"?e:e+""}function XYe(t,e){if(hp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(hp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function NI(){return NI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NI.apply(this,arguments)}var ZYe=function(e){var n=e.yAxisId,r=gM(),s=yM(),a=Ete(n);return a==null?null:N.createElement(tg,NI({},a,{className:$t("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:s},ticksGenerator:function(l){return fl(l,!0)}}))},fp=function(t){function e(){return qYe(this,e),KYe(this,e,arguments)}return QYe(e,t),HYe(e,[{key:"render",value:function(){return N.createElement(ZYe,this.props)}}])}(N.Component);Hte(fp,"displayName","YAxis");Hte(fp,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function JU(t){return nQe(t)||tQe(t)||eQe(t)||JYe()}function JYe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eQe(t,e){if(t){if(typeof t=="string")return SI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SI(t,e)}}function tQe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nQe(t){if(Array.isArray(t))return SI(t)}function SI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var EI=function(e,n,r,s,a){var o=ia(e,xM),l=ia(e,W1),c=[].concat(JU(o),JU(l)),u=ia(e,K1),d="".concat(s,"Id"),h=s[0],f=n;if(c.length&&(f=c.reduce(function(g,y){if(y.props[d]===r&&Oo(y.props,"extendDomain")&&Ee(y.props[h])){var w=y.props[h];return[Math.min(g[0],w),Math.max(g[1],w)]}return g},f)),u.length){var m="".concat(h,"1"),v="".concat(h,"2");f=u.reduce(function(g,y){if(y.props[d]===r&&Oo(y.props,"extendDomain")&&Ee(y.props[m])&&Ee(y.props[v])){var w=y.props[m],b=y.props[v];return[Math.min(g[0],w,b),Math.max(g[1],w,b)]}return g},f)}return a&&a.length&&(f=a.reduce(function(g,y){return Ee(y)?[Math.min(g[0],y),Math.max(g[1],y)]:g},f)),f},Gte={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function a(c,u,d,h,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new s(d,h||c,f),v=n?n+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],m]:c._events[v].push(m):(c._events[v]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)e.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,m=h.length,v=new Array(m);f<m;f++)v[f]=h[f].fn;return v},l.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},l.prototype.emit=function(u,d,h,f,m,v){var g=n?n+u:u;if(!this._events[g])return!1;var y=this._events[g],w=arguments.length,b,E;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),w){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,h),!0;case 4:return y.fn.call(y.context,d,h,f),!0;case 5:return y.fn.call(y.context,d,h,f,m),!0;case 6:return y.fn.call(y.context,d,h,f,m,v),!0}for(E=1,b=new Array(w-1);E<w;E++)b[E-1]=arguments[E];y.fn.apply(y.context,b)}else{var T=y.length,x;for(E=0;E<T;E++)switch(y[E].once&&this.removeListener(u,y[E].fn,void 0,!0),w){case 1:y[E].fn.call(y[E].context);break;case 2:y[E].fn.call(y[E].context,d);break;case 3:y[E].fn.call(y[E].context,d,h);break;case 4:y[E].fn.call(y[E].context,d,h,f);break;default:if(!b)for(x=1,b=new Array(w-1);x<w;x++)b[x-1]=arguments[x];y[E].fn.apply(y[E].context,b)}}return!0},l.prototype.on=function(u,d,h){return a(this,u,d,h,!1)},l.prototype.once=function(u,d,h){return a(this,u,d,h,!0)},l.prototype.removeListener=function(u,d,h,f){var m=n?n+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var v=this._events[m];if(v.fn)v.fn===d&&(!f||v.once)&&(!h||v.context===h)&&o(this,m);else{for(var g=0,y=[],w=v.length;g<w;g++)(v[g].fn!==d||f&&!v[g].once||h&&v[g].context!==h)&&y.push(v[g]);y.length?this._events[m]=y.length===1?y[0]:y:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(Gte);var rQe=Gte.exports;const sQe=gn(rQe);var pA=new sQe,gA="recharts.syncMouseEvents";function ox(t){"@babel/helpers - typeof";return ox=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ox(t)}function iQe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aQe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Yte(r.key),r)}}function oQe(t,e,n){return e&&aQe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function yA(t,e,n){return e=Yte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yte(t){var e=lQe(t,"string");return ox(e)=="symbol"?e:e+""}function lQe(t,e){if(ox(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ox(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var cQe=function(){function t(){iQe(this,t),yA(this,"activeIndex",0),yA(this,"coordinateList",[]),yA(this,"layout","horizontal")}return oQe(t,[{key:"setDetails",value:function(n){var r,s=n.coordinateList,a=s===void 0?null:s,o=n.container,l=o===void 0?null:o,c=n.layout,u=c===void 0?null:c,d=n.offset,h=d===void 0?null:d,f=n.mouseHandlerCallback,m=f===void 0?null:f;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),a=s.x,o=s.y,l=s.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,h=a+c+u,f=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:h,pageY:f})}}}])}();function uQe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],s=t==null?void 0:t[1];if(r&&s&&Ee(r)&&Ee(s))return!0}return!1}function dQe(t,e,n,r){var s=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-s:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-s,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function Qte(t){var e=t.cx,n=t.cy,r=t.radius,s=t.startAngle,a=t.endAngle,o=Mn(e,n,r,s),l=Mn(e,n,r,a);return{points:[o,l],cx:e,cy:n,radius:r,startAngle:s,endAngle:a}}function hQe(t,e,n){var r,s,a,o;if(t==="horizontal")r=e.x,a=r,s=n.top,o=n.top+n.height;else if(t==="vertical")s=e.y,o=s,r=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,u=e.innerRadius,d=e.outerRadius,h=e.angle,f=Mn(l,c,u,h),m=Mn(l,c,d,h);r=f.x,s=f.y,a=m.x,o=m.y}else return Qte(e);return[{x:r,y:s},{x:a,y:o}]}function lx(t){"@babel/helpers - typeof";return lx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lx(t)}function e6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function v0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e6(Object(n),!0).forEach(function(r){fQe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fQe(t,e,n){return e=mQe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mQe(t){var e=pQe(t,"string");return lx(e)=="symbol"?e:e+""}function pQe(t,e){if(lx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(lx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gQe(t){var e,n,r=t.element,s=t.tooltipEventType,a=t.isActive,o=t.activeCoordinate,l=t.activePayload,c=t.offset,u=t.activeTooltipIndex,d=t.tooltipAxisBandSize,h=t.layout,f=t.chartName,m=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!m||!a||!o||f!=="ScatterChart"&&s!=="axis")return null;var v,g=nm;if(f==="ScatterChart")v=o,g=$We;else if(f==="BarChart")v=dQe(h,o,c,d),g=hM;else if(h==="radial"){var y=Qte(o),w=y.cx,b=y.cy,E=y.radius,T=y.startAngle,x=y.endAngle;v={cx:w,cy:b,startAngle:T,endAngle:x,innerRadius:E,outerRadius:E},g=zee}else v={points:hQe(h,o,c)},g=nm;var S=v0(v0(v0(v0({stroke:"#ccc",pointerEvents:"none"},c),v),ft(m,!1)),{},{payload:l,payloadIndex:u,className:$t("recharts-tooltip-cursor",m.className)});return N.isValidElement(m)?N.cloneElement(m,S):N.createElement(g,S)}var yQe=["item"],vQe=["children","className","width","height","style","compact","title","desc"];function mp(t){"@babel/helpers - typeof";return mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mp(t)}function Rf(){return Rf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rf.apply(this,arguments)}function t6(t,e){return wQe(t)||bQe(t,e)||Zte(t,e)||xQe()}function xQe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bQe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function wQe(t){if(Array.isArray(t))return t}function n6(t,e){if(t==null)return{};var n=_Qe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _Qe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function jQe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NQe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Jte(r.key),r)}}function SQe(t,e,n){return e&&NQe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function EQe(t,e,n){return e=Ej(e),AQe(t,Xte()?Reflect.construct(e,n||[],Ej(t).constructor):e.apply(t,n))}function AQe(t,e){if(e&&(mp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TQe(t)}function TQe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xte=function(){return!!t})()}function Ej(t){return Ej=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ej(t)}function CQe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AI(t,e)}function AI(t,e){return AI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},AI(t,e)}function pp(t){return kQe(t)||IQe(t)||Zte(t)||PQe()}function PQe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zte(t,e){if(t){if(typeof t=="string")return TI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TI(t,e)}}function IQe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function kQe(t){if(Array.isArray(t))return TI(t)}function TI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function r6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function he(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r6(Object(n),!0).forEach(function(r){xt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xt(t,e,n){return e=Jte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jte(t){var e=RQe(t,"string");return mp(e)=="symbol"?e:e+""}function RQe(t,e){if(mp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var OQe={xAxis:["bottom","top"],yAxis:["left","right"]},MQe={width:"100%",height:"100%"},ene={x:0,y:0};function x0(t){return t}var DQe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},LQe=function(e,n,r,s){var a=n.find(function(d){return d&&d.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:s.y};if(e==="vertical")return{x:s.x,y:a.coordinate};if(e==="centric"){var o=a.coordinate,l=s.radius;return he(he(he({},s),Mn(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var c=a.coordinate,u=s.angle;return he(he(he({},s),Mn(s.cx,s.cy,c,u)),{},{angle:u,radius:c})}return ene},G1=function(e,n){var r=n.graphicalItems,s=n.dataStartIndex,a=n.dataEndIndex,o=(r??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(pp(l),pp(u)):l},[]);return o.length>0?o:e&&e.length&&Ee(s)&&Ee(a)?e.slice(s,a+1):[]};function tne(t){return t==="number"?[0,"auto"]:void 0}var CI=function(e,n,r,s){var a=e.graphicalItems,o=e.tooltipAxis,l=G1(n,e);return r<0||!a||!a.length||r>=l.length?null:a.reduce(function(c,u){var d,h=(d=u.props.data)!==null&&d!==void 0?d:n;h&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(h=h.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(o.dataKey&&!o.allowDuplicatedCategory){var m=h===void 0?l:h;f=A_(m,o.dataKey,s)}else f=h&&h[r]||l[r];return f?[].concat(pp(c),[Lee(u,f)]):c},[])},s6=function(e,n,r,s){var a=s||{x:e.chartX,y:e.chartY},o=DQe(a,r),l=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,d=l9e(o,l,u,c);if(d>=0&&u){var h=u[d]&&u[d].value,f=CI(e,n,d,h),m=LQe(r,l,d,a);return{activeTooltipIndex:d,activeLabel:h,activePayload:f,activeCoordinate:m}}return null},$Qe=function(e,n){var r=n.axes,s=n.graphicalItems,a=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,h=e.children,f=e.stackOffset,m=Iee(d,a);return r.reduce(function(v,g){var y,w=g.type.defaultProps!==void 0?he(he({},g.type.defaultProps),g.props):g.props,b=w.type,E=w.dataKey,T=w.allowDataOverflow,x=w.allowDuplicatedCategory,S=w.scale,_=w.ticks,p=w.includeHidden,A=w[o];if(v[A])return v;var P=G1(e.data,{graphicalItems:s.filter(function(oe){var me,ke=o in oe.props?oe.props[o]:(me=oe.type.defaultProps)===null||me===void 0?void 0:me[o];return ke===A}),dataStartIndex:c,dataEndIndex:u}),C=P.length,I,R,L;uQe(w.domain,T,b)&&(I=qP(w.domain,null,T),m&&(b==="number"||S!=="auto")&&(L=Iy(P,E,"category")));var z=tne(b);if(!I||I.length===0){var W,M=(W=w.domain)!==null&&W!==void 0?W:z;if(E){if(I=Iy(P,E,b),b==="category"&&m){var V=XRe(I);x&&V?(R=I,I=fj(0,C)):x||(I=A5(M,I,g).reduce(function(oe,me){return oe.indexOf(me)>=0?oe:[].concat(pp(oe),[me])},[]))}else if(b==="category")x?I=I.filter(function(oe){return oe!==""&&!Ft(oe)}):I=A5(M,I,g).reduce(function(oe,me){return oe.indexOf(me)>=0||me===""||Ft(me)?oe:[].concat(pp(oe),[me])},[]);else if(b==="number"){var F=f9e(P,s.filter(function(oe){var me,ke,ut=o in oe.props?oe.props[o]:(me=oe.type.defaultProps)===null||me===void 0?void 0:me[o],jt="hide"in oe.props?oe.props.hide:(ke=oe.type.defaultProps)===null||ke===void 0?void 0:ke.hide;return ut===A&&(p||!jt)}),E,a,d);F&&(I=F)}m&&(b==="number"||S!=="auto")&&(L=Iy(P,E,"category"))}else m?I=fj(0,C):l&&l[A]&&l[A].hasStack&&b==="number"?I=f==="expand"?[0,1]:Dee(l[A].stackGroups,c,u):I=Pee(P,s.filter(function(oe){var me=o in oe.props?oe.props[o]:oe.type.defaultProps[o],ke="hide"in oe.props?oe.props.hide:oe.type.defaultProps.hide;return me===A&&(p||!ke)}),b,d,!0);if(b==="number")I=EI(h,I,A,a,_),M&&(I=qP(M,I,T));else if(b==="category"&&M){var Y=M,ae=I.every(function(oe){return Y.indexOf(oe)>=0});ae&&(I=Y)}}return he(he({},v),{},xt({},A,he(he({},w),{},{axisType:a,domain:I,categoricalDomain:L,duplicateDomain:R,originalDomain:(y=w.domain)!==null&&y!==void 0?y:z,isCategorical:m,layout:d})))},{})},FQe=function(e,n){var r=n.graphicalItems,s=n.Axis,a=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,h=e.children,f=G1(e.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),m=f.length,v=Iee(d,a),g=-1;return r.reduce(function(y,w){var b=w.type.defaultProps!==void 0?he(he({},w.type.defaultProps),w.props):w.props,E=b[o],T=tne("number");if(!y[E]){g++;var x;return v?x=fj(0,m):l&&l[E]&&l[E].hasStack?(x=Dee(l[E].stackGroups,c,u),x=EI(h,x,E,a)):(x=qP(T,Pee(f,r.filter(function(S){var _,p,A=o in S.props?S.props[o]:(_=S.type.defaultProps)===null||_===void 0?void 0:_[o],P="hide"in S.props?S.props.hide:(p=S.type.defaultProps)===null||p===void 0?void 0:p.hide;return A===E&&!P}),"number",d),s.defaultProps.allowDataOverflow),x=EI(h,x,E,a)),he(he({},y),{},xt({},E,he(he({axisType:a},s.defaultProps),{},{hide:!0,orientation:Ri(OQe,"".concat(a,".").concat(g%2),null),domain:x,originalDomain:T,isCategorical:v,layout:d})))}return y},{})},VQe=function(e,n){var r=n.axisType,s=r===void 0?"xAxis":r,a=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.children,h="".concat(s,"Id"),f=ia(d,a),m={};return f&&f.length?m=$Qe(e,{axes:f,graphicalItems:o,axisType:s,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=FQe(e,{Axis:a,graphicalItems:o,axisType:s,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},BQe=function(e){var n=Sc(e),r=fl(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:F2(r,function(s){return s.coordinate}),tooltipAxis:n,tooltipAxisBandSize:tj(n,r)}},i6=function(e){var n=e.children,r=e.defaultShowTooltip,s=wi(n,rp),a=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(a=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},UQe=function(e){return!e||!e.length?!1:e.some(function(n){var r=yl(n&&n.type);return r&&r.indexOf("Bar")>=0})},a6=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},zQe=function(e,n){var r=e.props,s=e.graphicalItems,a=e.xAxisMap,o=a===void 0?{}:a,l=e.yAxisMap,c=l===void 0?{}:l,u=r.width,d=r.height,h=r.children,f=r.margin||{},m=wi(h,rp),v=wi(h,Jf),g=Object.keys(c).reduce(function(x,S){var _=c[S],p=_.orientation;return!_.mirror&&!_.hide?he(he({},x),{},xt({},p,x[p]+_.width)):x},{left:f.left||0,right:f.right||0}),y=Object.keys(o).reduce(function(x,S){var _=o[S],p=_.orientation;return!_.mirror&&!_.hide?he(he({},x),{},xt({},p,Ri(x,"".concat(p))+_.height)):x},{top:f.top||0,bottom:f.bottom||0}),w=he(he({},y),g),b=w.bottom;m&&(w.bottom+=m.props.height||rp.defaultProps.height),v&&n&&(w=d9e(w,s,r,n));var E=u-w.left-w.right,T=d-w.top-w.bottom;return he(he({brushBottom:b},w),{},{width:Math.max(E,0),height:Math.max(T,0)})},qQe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},_M=function(e){var n=e.chartName,r=e.GraphicalChild,s=e.defaultTooltipEventType,a=s===void 0?"axis":s,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,h=e.defaultProps,f=function(w,b){var E=b.graphicalItems,T=b.stackGroups,x=b.offset,S=b.updateId,_=b.dataStartIndex,p=b.dataEndIndex,A=w.barSize,P=w.layout,C=w.barGap,I=w.barCategoryGap,R=w.maxBarSize,L=a6(P),z=L.numericAxisName,W=L.cateAxisName,M=UQe(E),V=[];return E.forEach(function(F,Y){var ae=G1(w.data,{graphicalItems:[F],dataStartIndex:_,dataEndIndex:p}),oe=F.type.defaultProps!==void 0?he(he({},F.type.defaultProps),F.props):F.props,me=oe.dataKey,ke=oe.maxBarSize,ut=oe["".concat(z,"Id")],jt=oe["".concat(W,"Id")],Ne={},ht=c.reduce(function(se,de){var Re=b["".concat(de.axisType,"Map")],Oe=oe["".concat(de.axisType,"Id")];Re&&Re[Oe]||de.axisType==="zAxis"||wh();var Se=Re[Oe];return he(he({},se),{},xt(xt({},de.axisType,Se),"".concat(de.axisType,"Ticks"),fl(Se)))},Ne),we=ht[W],Me=ht["".concat(W,"Ticks")],Fe=T&&T[ut]&&T[ut].hasStack&&_9e(F,T[ut].stackGroups),ue=yl(F.type).indexOf("Bar")>=0,Ct=tj(we,Me),gt=[],on=M&&c9e({barSize:A,stackGroups:T,totalSize:qQe(ht,W)});if(ue){var Jt,_n,zr=Ft(ke)?R:ke,rn=(Jt=(_n=tj(we,Me,!0))!==null&&_n!==void 0?_n:zr)!==null&&Jt!==void 0?Jt:0;gt=u9e({barGap:C,barCategoryGap:I,bandSize:rn!==Ct?rn:Ct,sizeList:on[jt],maxBarSize:zr}),rn!==Ct&&(gt=gt.map(function(se){return he(he({},se),{},{position:he(he({},se.position),{},{offset:se.position.offset-rn/2})})}))}var q=F&&F.type&&F.type.getComposedData;q&&V.push({props:he(he({},q(he(he({},ht),{},{displayedData:ae,props:w,dataKey:me,item:F,bandSize:Ct,barPosition:gt,offset:x,stackedData:Fe,layout:P,dataStartIndex:_,dataEndIndex:p}))),{},xt(xt(xt({key:F.key||"item-".concat(Y)},z,ht[z]),W,ht[W]),"animationId",S)),childIndex:uOe(F,w.children),item:F})}),V},m=function(w,b){var E=w.props,T=w.dataStartIndex,x=w.dataEndIndex,S=w.updateId;if(!bB({props:E}))return null;var _=E.children,p=E.layout,A=E.stackOffset,P=E.data,C=E.reverseStackOrder,I=a6(p),R=I.numericAxisName,L=I.cateAxisName,z=ia(_,r),W=b9e(P,z,"".concat(R,"Id"),"".concat(L,"Id"),A,C),M=c.reduce(function(oe,me){var ke="".concat(me.axisType,"Map");return he(he({},oe),{},xt({},ke,VQe(E,he(he({},me),{},{graphicalItems:z,stackGroups:me.axisType===R&&W,dataStartIndex:T,dataEndIndex:x}))))},{}),V=zQe(he(he({},M),{},{props:E,graphicalItems:z}),b==null?void 0:b.legendBBox);Object.keys(M).forEach(function(oe){M[oe]=d(E,M[oe],V,oe.replace("Map",""),n)});var F=M["".concat(L,"Map")],Y=BQe(F),ae=f(E,he(he({},M),{},{dataStartIndex:T,dataEndIndex:x,updateId:S,graphicalItems:z,stackGroups:W,offset:V}));return he(he({formattedGraphicalItems:ae,graphicalItems:z,offset:V,stackGroups:W},Y),M)},v=function(y){function w(b){var E,T,x;return jQe(this,w),x=EQe(this,w,[b]),xt(x,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),xt(x,"accessibilityManager",new cQe),xt(x,"handleLegendBBoxUpdate",function(S){if(S){var _=x.state,p=_.dataStartIndex,A=_.dataEndIndex,P=_.updateId;x.setState(he({legendBBox:S},m({props:x.props,dataStartIndex:p,dataEndIndex:A,updateId:P},he(he({},x.state),{},{legendBBox:S}))))}}),xt(x,"handleReceiveSyncEvent",function(S,_,p){if(x.props.syncId===S){if(p===x.eventEmitterSymbol&&typeof x.props.syncMethod!="function")return;x.applySyncEvent(_)}}),xt(x,"handleBrushChange",function(S){var _=S.startIndex,p=S.endIndex;if(_!==x.state.dataStartIndex||p!==x.state.dataEndIndex){var A=x.state.updateId;x.setState(function(){return he({dataStartIndex:_,dataEndIndex:p},m({props:x.props,dataStartIndex:_,dataEndIndex:p,updateId:A},x.state))}),x.triggerSyncEvent({dataStartIndex:_,dataEndIndex:p})}}),xt(x,"handleMouseEnter",function(S){var _=x.getMouseInfo(S);if(_){var p=he(he({},_),{},{isTooltipActive:!0});x.setState(p),x.triggerSyncEvent(p);var A=x.props.onMouseEnter;wt(A)&&A(p,S)}}),xt(x,"triggeredAfterMouseMove",function(S){var _=x.getMouseInfo(S),p=_?he(he({},_),{},{isTooltipActive:!0}):{isTooltipActive:!1};x.setState(p),x.triggerSyncEvent(p);var A=x.props.onMouseMove;wt(A)&&A(p,S)}),xt(x,"handleItemMouseEnter",function(S){x.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),xt(x,"handleItemMouseLeave",function(){x.setState(function(){return{isTooltipActive:!1}})}),xt(x,"handleMouseMove",function(S){S.persist(),x.throttleTriggeredAfterMouseMove(S)}),xt(x,"handleMouseLeave",function(S){x.throttleTriggeredAfterMouseMove.cancel();var _={isTooltipActive:!1};x.setState(_),x.triggerSyncEvent(_);var p=x.props.onMouseLeave;wt(p)&&p(_,S)}),xt(x,"handleOuterEvent",function(S){var _=cOe(S),p=Ri(x.props,"".concat(_));if(_&&wt(p)){var A,P;/.*touch.*/i.test(_)?P=x.getMouseInfo(S.changedTouches[0]):P=x.getMouseInfo(S),p((A=P)!==null&&A!==void 0?A:{},S)}}),xt(x,"handleClick",function(S){var _=x.getMouseInfo(S);if(_){var p=he(he({},_),{},{isTooltipActive:!0});x.setState(p),x.triggerSyncEvent(p);var A=x.props.onClick;wt(A)&&A(p,S)}}),xt(x,"handleMouseDown",function(S){var _=x.props.onMouseDown;if(wt(_)){var p=x.getMouseInfo(S);_(p,S)}}),xt(x,"handleMouseUp",function(S){var _=x.props.onMouseUp;if(wt(_)){var p=x.getMouseInfo(S);_(p,S)}}),xt(x,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&x.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),xt(x,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&x.handleMouseDown(S.changedTouches[0])}),xt(x,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&x.handleMouseUp(S.changedTouches[0])}),xt(x,"handleDoubleClick",function(S){var _=x.props.onDoubleClick;if(wt(_)){var p=x.getMouseInfo(S);_(p,S)}}),xt(x,"handleContextMenu",function(S){var _=x.props.onContextMenu;if(wt(_)){var p=x.getMouseInfo(S);_(p,S)}}),xt(x,"triggerSyncEvent",function(S){x.props.syncId!==void 0&&pA.emit(gA,x.props.syncId,S,x.eventEmitterSymbol)}),xt(x,"applySyncEvent",function(S){var _=x.props,p=_.layout,A=_.syncMethod,P=x.state.updateId,C=S.dataStartIndex,I=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)x.setState(he({dataStartIndex:C,dataEndIndex:I},m({props:x.props,dataStartIndex:C,dataEndIndex:I,updateId:P},x.state)));else if(S.activeTooltipIndex!==void 0){var R=S.chartX,L=S.chartY,z=S.activeTooltipIndex,W=x.state,M=W.offset,V=W.tooltipTicks;if(!M)return;if(typeof A=="function")z=A(V,S);else if(A==="value"){z=-1;for(var F=0;F<V.length;F++)if(V[F].value===S.activeLabel){z=F;break}}var Y=he(he({},M),{},{x:M.left,y:M.top}),ae=Math.min(R,Y.x+Y.width),oe=Math.min(L,Y.y+Y.height),me=V[z]&&V[z].value,ke=CI(x.state,x.props.data,z),ut=V[z]?{x:p==="horizontal"?V[z].coordinate:ae,y:p==="horizontal"?oe:V[z].coordinate}:ene;x.setState(he(he({},S),{},{activeLabel:me,activeCoordinate:ut,activePayload:ke,activeTooltipIndex:z}))}else x.setState(S)}),xt(x,"renderCursor",function(S){var _,p=x.state,A=p.isTooltipActive,P=p.activeCoordinate,C=p.activePayload,I=p.offset,R=p.activeTooltipIndex,L=p.tooltipAxisBandSize,z=x.getTooltipEventType(),W=(_=S.props.active)!==null&&_!==void 0?_:A,M=x.props.layout,V=S.key||"_recharts-cursor";return D.createElement(gQe,{key:V,activeCoordinate:P,activePayload:C,activeTooltipIndex:R,chartName:n,element:S,isActive:W,layout:M,offset:I,tooltipAxisBandSize:L,tooltipEventType:z})}),xt(x,"renderPolarAxis",function(S,_,p){var A=Ri(S,"type.axisType"),P=Ri(x.state,"".concat(A,"Map")),C=S.type.defaultProps,I=C!==void 0?he(he({},C),S.props):S.props,R=P&&P[I["".concat(A,"Id")]];return N.cloneElement(S,he(he({},R),{},{className:$t(A,R.className),key:S.key||"".concat(_,"-").concat(p),ticks:fl(R,!0)}))}),xt(x,"renderPolarGrid",function(S){var _=S.props,p=_.radialLines,A=_.polarAngles,P=_.polarRadius,C=x.state,I=C.radiusAxisMap,R=C.angleAxisMap,L=Sc(I),z=Sc(R),W=z.cx,M=z.cy,V=z.innerRadius,F=z.outerRadius;return N.cloneElement(S,{polarAngles:Array.isArray(A)?A:fl(z,!0).map(function(Y){return Y.coordinate}),polarRadius:Array.isArray(P)?P:fl(L,!0).map(function(Y){return Y.coordinate}),cx:W,cy:M,innerRadius:V,outerRadius:F,key:S.key||"polar-grid",radialLines:p})}),xt(x,"renderLegend",function(){var S=x.state.formattedGraphicalItems,_=x.props,p=_.children,A=_.width,P=_.height,C=x.props.margin||{},I=A-(C.left||0)-(C.right||0),R=Tee({children:p,formattedGraphicalItems:S,legendWidth:I,legendContent:u});if(!R)return null;var L=R.item,z=n6(R,yQe);return N.cloneElement(L,he(he({},z),{},{chartWidth:A,chartHeight:P,margin:C,onBBoxUpdate:x.handleLegendBBoxUpdate}))}),xt(x,"renderTooltip",function(){var S,_=x.props,p=_.children,A=_.accessibilityLayer,P=wi(p,Pa);if(!P)return null;var C=x.state,I=C.isTooltipActive,R=C.activeCoordinate,L=C.activePayload,z=C.activeLabel,W=C.offset,M=(S=P.props.active)!==null&&S!==void 0?S:I;return N.cloneElement(P,{viewBox:he(he({},W),{},{x:W.left,y:W.top}),active:M,label:z,payload:M?L:[],coordinate:R,accessibilityLayer:A})}),xt(x,"renderBrush",function(S){var _=x.props,p=_.margin,A=_.data,P=x.state,C=P.offset,I=P.dataStartIndex,R=P.dataEndIndex,L=P.updateId;return N.cloneElement(S,{key:S.key||"_recharts-brush",onChange:m0(x.handleBrushChange,S.props.onChange),data:A,x:Ee(S.props.x)?S.props.x:C.left,y:Ee(S.props.y)?S.props.y:C.top+C.height+C.brushBottom-(p.bottom||0),width:Ee(S.props.width)?S.props.width:C.width,startIndex:I,endIndex:R,updateId:"brush-".concat(L)})}),xt(x,"renderReferenceElement",function(S,_,p){if(!S)return null;var A=x,P=A.clipPathId,C=x.state,I=C.xAxisMap,R=C.yAxisMap,L=C.offset,z=S.type.defaultProps||{},W=S.props,M=W.xAxisId,V=M===void 0?z.xAxisId:M,F=W.yAxisId,Y=F===void 0?z.yAxisId:F;return N.cloneElement(S,{key:S.key||"".concat(_,"-").concat(p),xAxis:I[V],yAxis:R[Y],viewBox:{x:L.left,y:L.top,width:L.width,height:L.height},clipPathId:P})}),xt(x,"renderActivePoints",function(S){var _=S.item,p=S.activePoint,A=S.basePoint,P=S.childIndex,C=S.isRange,I=[],R=_.props.key,L=_.item.type.defaultProps!==void 0?he(he({},_.item.type.defaultProps),_.item.props):_.item.props,z=L.activeDot,W=L.dataKey,M=he(he({index:P,dataKey:W,cx:p.x,cy:p.y,r:4,fill:dM(_.item),strokeWidth:2,stroke:"#fff",payload:p.payload,value:p.value},ft(z,!1)),T_(z));return I.push(w.renderActiveDot(z,M,"".concat(R,"-activePoint-").concat(P))),A?I.push(w.renderActiveDot(z,he(he({},M),{},{cx:A.x,cy:A.y}),"".concat(R,"-basePoint-").concat(P))):C&&I.push(null),I}),xt(x,"renderGraphicChild",function(S,_,p){var A=x.filterFormatItem(S,_,p);if(!A)return null;var P=x.getTooltipEventType(),C=x.state,I=C.isTooltipActive,R=C.tooltipAxis,L=C.activeTooltipIndex,z=C.activeLabel,W=x.props.children,M=wi(W,Pa),V=A.props,F=V.points,Y=V.isRange,ae=V.baseLine,oe=A.item.type.defaultProps!==void 0?he(he({},A.item.type.defaultProps),A.item.props):A.item.props,me=oe.activeDot,ke=oe.hide,ut=oe.activeBar,jt=oe.activeShape,Ne=!!(!ke&&I&&M&&(me||ut||jt)),ht={};P!=="axis"&&M&&M.props.trigger==="click"?ht={onClick:m0(x.handleItemMouseEnter,S.props.onClick)}:P!=="axis"&&(ht={onMouseLeave:m0(x.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:m0(x.handleItemMouseEnter,S.props.onMouseEnter)});var we=N.cloneElement(S,he(he({},A.props),ht));function Me(de){return typeof R.dataKey=="function"?R.dataKey(de.payload):null}if(Ne)if(L>=0){var Fe,ue;if(R.dataKey&&!R.allowDuplicatedCategory){var Ct=typeof R.dataKey=="function"?Me:"payload.".concat(R.dataKey.toString());Fe=A_(F,Ct,z),ue=Y&&ae&&A_(ae,Ct,z)}else Fe=F==null?void 0:F[L],ue=Y&&ae&&ae[L];if(jt||ut){var gt=S.props.activeIndex!==void 0?S.props.activeIndex:L;return[N.cloneElement(S,he(he(he({},A.props),ht),{},{activeIndex:gt})),null,null]}if(!Ft(Fe))return[we].concat(pp(x.renderActivePoints({item:A,activePoint:Fe,basePoint:ue,childIndex:L,isRange:Y})))}else{var on,Jt=(on=x.getItemByXY(x.state.activeCoordinate))!==null&&on!==void 0?on:{graphicalItem:we},_n=Jt.graphicalItem,zr=_n.item,rn=zr===void 0?S:zr,q=_n.childIndex,se=he(he(he({},A.props),ht),{},{activeIndex:q});return[N.cloneElement(rn,se),null,null]}return Y?[we,null,null]:[we,null]}),xt(x,"renderCustomized",function(S,_,p){return N.cloneElement(S,he(he({key:"recharts-customized-".concat(p)},x.props),x.state))}),xt(x,"renderMap",{CartesianGrid:{handler:x0,once:!0},ReferenceArea:{handler:x.renderReferenceElement},ReferenceLine:{handler:x0},ReferenceDot:{handler:x.renderReferenceElement},XAxis:{handler:x0},YAxis:{handler:x0},Brush:{handler:x.renderBrush,once:!0},Bar:{handler:x.renderGraphicChild},Line:{handler:x.renderGraphicChild},Area:{handler:x.renderGraphicChild},Radar:{handler:x.renderGraphicChild},RadialBar:{handler:x.renderGraphicChild},Scatter:{handler:x.renderGraphicChild},Pie:{handler:x.renderGraphicChild},Funnel:{handler:x.renderGraphicChild},Tooltip:{handler:x.renderCursor,once:!0},PolarGrid:{handler:x.renderPolarGrid,once:!0},PolarAngleAxis:{handler:x.renderPolarAxis},PolarRadiusAxis:{handler:x.renderPolarAxis},Customized:{handler:x.renderCustomized}}),x.clipPathId="".concat((E=b.id)!==null&&E!==void 0?E:Gp("recharts"),"-clip"),x.throttleTriggeredAfterMouseMove=AJ(x.triggeredAfterMouseMove,(T=b.throttleDelay)!==null&&T!==void 0?T:1e3/60),x.state={},x}return CQe(w,y),SQe(w,[{key:"componentDidMount",value:function(){var E,T;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(E=this.props.margin.left)!==null&&E!==void 0?E:0,top:(T=this.props.margin.top)!==null&&T!==void 0?T:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var E=this.props,T=E.children,x=E.data,S=E.height,_=E.layout,p=wi(T,Pa);if(p){var A=p.props.defaultIndex;if(!(typeof A!="number"||A<0||A>this.state.tooltipTicks.length-1)){var P=this.state.tooltipTicks[A]&&this.state.tooltipTicks[A].value,C=CI(this.state,x,A,P),I=this.state.tooltipTicks[A].coordinate,R=(this.state.offset.top+S)/2,L=_==="horizontal",z=L?{x:I,y:R}:{y:I,x:R},W=this.state.formattedGraphicalItems.find(function(V){var F=V.item;return F.type.name==="Scatter"});W&&(z=he(he({},z),W.props.points[A].tooltipPosition),C=W.props.points[A].tooltipPayload);var M={activeTooltipIndex:A,isTooltipActive:!0,activeLabel:P,activePayload:C,activeCoordinate:z};this.setState(M),this.renderCursor(p),this.accessibilityManager.setIndex(A)}}}},{key:"getSnapshotBeforeUpdate",value:function(E,T){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==T.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==E.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==E.margin){var x,S;this.accessibilityManager.setDetails({offset:{left:(x=this.props.margin.left)!==null&&x!==void 0?x:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(E){iP([wi(E.children,Pa)],[wi(this.props.children,Pa)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var E=wi(this.props.children,Pa);if(E&&typeof E.props.shared=="boolean"){var T=E.props.shared?"axis":"item";return l.indexOf(T)>=0?T:a}return a}},{key:"getMouseInfo",value:function(E){if(!this.container)return null;var T=this.container,x=T.getBoundingClientRect(),S=D3e(x),_={chartX:Math.round(E.pageX-S.left),chartY:Math.round(E.pageY-S.top)},p=x.width/T.offsetWidth||1,A=this.inRange(_.chartX,_.chartY,p);if(!A)return null;var P=this.state,C=P.xAxisMap,I=P.yAxisMap,R=this.getTooltipEventType(),L=s6(this.state,this.props.data,this.props.layout,A);if(R!=="axis"&&C&&I){var z=Sc(C).scale,W=Sc(I).scale,M=z&&z.invert?z.invert(_.chartX):null,V=W&&W.invert?W.invert(_.chartY):null;return he(he({},_),{},{xValue:M,yValue:V},L)}return L?he(he({},_),L):null}},{key:"inRange",value:function(E,T){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,_=E/x,p=T/x;if(S==="horizontal"||S==="vertical"){var A=this.state.offset,P=_>=A.left&&_<=A.left+A.width&&p>=A.top&&p<=A.top+A.height;return P?{x:_,y:p}:null}var C=this.state,I=C.angleAxisMap,R=C.radiusAxisMap;if(I&&R){var L=Sc(I);return P5({x:_,y:p},L)}return null}},{key:"parseEventsOfWrapper",value:function(){var E=this.props.children,T=this.getTooltipEventType(),x=wi(E,Pa),S={};x&&T==="axis"&&(x.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var _=T_(this.props,this.handleOuterEvent);return he(he({},_),S)}},{key:"addListener",value:function(){pA.on(gA,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){pA.removeListener(gA,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(E,T,x){for(var S=this.state.formattedGraphicalItems,_=0,p=S.length;_<p;_++){var A=S[_];if(A.item===E||A.props.key===E.key||T===yl(A.item.type)&&x===A.childIndex)return A}return null}},{key:"renderClipPath",value:function(){var E=this.clipPathId,T=this.state.offset,x=T.left,S=T.top,_=T.height,p=T.width;return D.createElement("defs",null,D.createElement("clipPath",{id:E},D.createElement("rect",{x,y:S,height:_,width:p})))}},{key:"getXScales",value:function(){var E=this.state.xAxisMap;return E?Object.entries(E).reduce(function(T,x){var S=t6(x,2),_=S[0],p=S[1];return he(he({},T),{},xt({},_,p.scale))},{}):null}},{key:"getYScales",value:function(){var E=this.state.yAxisMap;return E?Object.entries(E).reduce(function(T,x){var S=t6(x,2),_=S[0],p=S[1];return he(he({},T),{},xt({},_,p.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(E){var T;return(T=this.state.xAxisMap)===null||T===void 0||(T=T[E])===null||T===void 0?void 0:T.scale}},{key:"getYScaleByAxisId",value:function(E){var T;return(T=this.state.yAxisMap)===null||T===void 0||(T=T[E])===null||T===void 0?void 0:T.scale}},{key:"getItemByXY",value:function(E){var T=this.state,x=T.formattedGraphicalItems,S=T.activeItem;if(x&&x.length)for(var _=0,p=x.length;_<p;_++){var A=x[_],P=A.props,C=A.item,I=C.type.defaultProps!==void 0?he(he({},C.type.defaultProps),C.props):C.props,R=yl(C.type);if(R==="Bar"){var L=(P.data||[]).find(function(V){return vWe(E,V)});if(L)return{graphicalItem:A,payload:L}}else if(R==="RadialBar"){var z=(P.data||[]).find(function(V){return P5(E,V)});if(z)return{graphicalItem:A,payload:z}}else if(B1(A,S)||U1(A,S)||nx(A,S)){var W=a7e({graphicalItem:A,activeTooltipItem:S,itemData:I.data}),M=I.activeIndex===void 0?W:I.activeIndex;return{graphicalItem:he(he({},A),{},{childIndex:M}),payload:nx(A,S)?I.data[W]:A.props.data[W]}}}return null}},{key:"render",value:function(){var E=this;if(!bB(this))return null;var T=this.props,x=T.children,S=T.className,_=T.width,p=T.height,A=T.style,P=T.compact,C=T.title,I=T.desc,R=n6(T,vQe),L=ft(R,!1);if(P)return D.createElement($U,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},D.createElement(oP,Rf({},L,{width:_,height:p,title:C,desc:I}),this.renderClipPath(),_B(x,this.renderMap)));if(this.props.accessibilityLayer){var z,W;L.tabIndex=(z=this.props.tabIndex)!==null&&z!==void 0?z:0,L.role=(W=this.props.role)!==null&&W!==void 0?W:"application",L.onKeyDown=function(V){E.accessibilityManager.keyboardEvent(V)},L.onFocus=function(){E.accessibilityManager.focus()}}var M=this.parseEventsOfWrapper();return D.createElement($U,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},D.createElement("div",Rf({className:$t("recharts-wrapper",S),style:he({position:"relative",cursor:"default",width:_,height:p},A)},M,{ref:function(F){E.container=F}}),D.createElement(oP,Rf({},L,{width:_,height:p,title:C,desc:I,style:MQe}),this.renderClipPath(),_B(x,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(N.Component);xt(v,"displayName",n),xt(v,"defaultProps",he({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),xt(v,"getDerivedStateFromProps",function(y,w){var b=y.dataKey,E=y.data,T=y.children,x=y.width,S=y.height,_=y.layout,p=y.stackOffset,A=y.margin,P=w.dataStartIndex,C=w.dataEndIndex;if(w.updateId===void 0){var I=i6(y);return he(he(he({},I),{},{updateId:0},m(he(he({props:y},I),{},{updateId:0}),w)),{},{prevDataKey:b,prevData:E,prevWidth:x,prevHeight:S,prevLayout:_,prevStackOffset:p,prevMargin:A,prevChildren:T})}if(b!==w.prevDataKey||E!==w.prevData||x!==w.prevWidth||S!==w.prevHeight||_!==w.prevLayout||p!==w.prevStackOffset||!Zf(A,w.prevMargin)){var R=i6(y),L={chartX:w.chartX,chartY:w.chartY,isTooltipActive:w.isTooltipActive},z=he(he({},s6(w,E,_)),{},{updateId:w.updateId+1}),W=he(he(he({},R),L),z);return he(he(he({},W),m(he({props:y},W),w)),{},{prevDataKey:b,prevData:E,prevWidth:x,prevHeight:S,prevLayout:_,prevStackOffset:p,prevMargin:A,prevChildren:T})}if(!iP(T,w.prevChildren)){var M,V,F,Y,ae=wi(T,rp),oe=ae&&(M=(V=ae.props)===null||V===void 0?void 0:V.startIndex)!==null&&M!==void 0?M:P,me=ae&&(F=(Y=ae.props)===null||Y===void 0?void 0:Y.endIndex)!==null&&F!==void 0?F:C,ke=oe!==P||me!==C,ut=!Ft(E),jt=ut&&!ke?w.updateId:w.updateId+1;return he(he({updateId:jt},m(he(he({props:y},w),{},{updateId:jt,dataStartIndex:oe,dataEndIndex:me}),w)),{},{prevChildren:T,dataStartIndex:oe,dataEndIndex:me})}return null}),xt(v,"renderActiveDot",function(y,w,b){var E;return N.isValidElement(y)?E=N.cloneElement(y,w):wt(y)?E=y(w):E=D.createElement(D1,w),D.createElement(tn,{className:"recharts-active-dot",key:b},E)});var g=N.forwardRef(function(w,b){return D.createElement(v,Rf({},w,{ref:b}))});return g.displayName=v.displayName,g},WQe=_M({chartName:"BarChart",GraphicalChild:Fh,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:dp},{axisType:"yAxis",AxisComp:fp}],formatAxisMap:yte}),HQe=_M({chartName:"PieChart",GraphicalChild:Hl,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:V1},{axisType:"radiusAxis",AxisComp:$1}],formatAxisMap:k9e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),KQe=_M({chartName:"AreaChart",GraphicalChild:$l,axisComponents:[{axisType:"xAxis",AxisComp:dp},{axisType:"yAxis",AxisComp:fp}],formatAxisMap:yte});const nne=t=>t.toLowerCase().replace(/[_\s-]/g,""),GQe=t=>{const e=new Map;return Object.entries(t).forEach(([n,r])=>{e.set(nne(n),r)}),e},YQe=(t,e)=>{const n=t[e];return n!==void 0?n:GQe(t).get(nne(e))},jM=(t,e,n=null)=>{for(const r of e){const s=YQe(t,r);if(s!=null)return s}return n},De=(t,e,n="")=>{const r=jM(t,e);return typeof r=="string"?r:n},Qe=(t,e,n=0)=>{const r=jM(t,e),s=Number(r);return Number.isFinite(s)?s:n},QQe=(t,e,n=!1)=>{const r=jM(t,e);return typeof r=="boolean"?r:n},b0=["#0f172a","#334155","#475569","#64748b","#94a3b8"];function XQe(){var a,o,l,c;const{user:t}=ct(),{data:e}=je({queryKey:["admin-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalRevenue:0,pendingInvoices:0,activeEmployees:0,totalEmployees:0,totalPayroll:0,totalExpenses:0,activeProjects:0,totalCustomers:0,departmentData:[],monthlyRevenue:[],projects:[]};const{invoices:u,employees:d,payrollRuns:h,expenses:f,projects:m,customers:v}=await fa.runQueries(t.id,{invoices:{collectionName:K.INVOICES},employees:{collectionName:K.EMPLOYEES},payrollRuns:{collectionName:K.PAYROLL_RUNS},expenses:{collectionName:K.EXPENSES},projects:{collectionName:K.PROJECTS},customers:{collectionName:K.CUSTOMERS}}),g=d.reduce((w,b)=>{const E=De(b,["department"],"Other");return w[E]||(w[E]=0),w[E]++,w},{}),y=[{name:"Jan",revenue:12e3,expenses:8e3},{name:"Feb",revenue:15e3,expenses:9500},{name:"Mar",revenue:18e3,expenses:11e3},{name:"Apr",revenue:22e3,expenses:13e3},{name:"May",revenue:25e3,expenses:14500},{name:"Jun",revenue:28e3,expenses:16e3},{name:"Jul",revenue:32e3,expenses:18e3},{name:"Aug",revenue:35e3,expenses:19500},{name:"Sep",revenue:38e3,expenses:21e3},{name:"Oct",revenue:42e3,expenses:23e3},{name:"Nov",revenue:45e3,expenses:25e3},{name:"Dec",revenue:48e3,expenses:27e3}];return{totalRevenue:u.filter(w=>De(w,["status"])==="paid").reduce((w,b)=>w+Qe(b,["total","amount"]),0),pendingInvoices:u.filter(w=>De(w,["status"])==="pending").length,activeEmployees:d.filter(w=>De(w,["employmentStatus","employment_status"])==="active").length,totalEmployees:d.length,totalPayroll:h.filter(w=>De(w,["status","payrollStatus","payroll_status"])==="approved").reduce((w,b)=>w+Qe(b,["totalNet","total_net"]),0),totalExpenses:f.reduce((w,b)=>w+Qe(b,["amount","total"]),0),activeProjects:m.filter(w=>De(w,["status"])==="active").length,totalCustomers:v.length,departmentData:Object.entries(g).map(([w,b])=>({name:w,value:b})),monthlyRevenue:y,projects:m.slice(0,5)}}}),n=(t==null?void 0:t.displayName)||((a=t==null?void 0:t.email)==null?void 0:a.split("@")[0])||"Admin",r=[{title:"Total Revenue",value:le((e==null?void 0:e.totalRevenue)||0),icon:er,color:"bg-primary",bgColor:"bg-primary/10",iconColor:"text-primary"},{title:"Employees",value:((o=e==null?void 0:e.totalEmployees)==null?void 0:o.toLocaleString())||"0",subtitle:`${(e==null?void 0:e.activeEmployees)||0} active`,icon:si,color:"bg-blue-500",bgColor:"bg-blue-50",iconColor:"text-blue-500"},{title:"Health Index",value:"75%",icon:Pk,color:"bg-green-500",bgColor:"bg-green-50",iconColor:"text-green-500",trend:"+2%"},{title:"Customers",value:((l=e==null?void 0:e.totalCustomers)==null?void 0:l.toLocaleString())||"0",icon:Toe,color:"bg-purple-500",bgColor:"bg-purple-50",iconColor:"text-purple-500"}],s=[{name:"Invoice #1234",type:"Payment Due",date:"Today",status:"urgent"},{name:"Payroll Run",type:"Monthly",date:"Friday",status:"scheduled"},{name:"Tax Filing",type:"ZRA Compliance",date:"Next Week",status:"pending"},{name:"Budget Review",type:"Finance",date:"Monday",status:"scheduled"}];return i.jsxs("div",{className:"space-y-6 min-h-screen pb-10",children:[i.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-foreground",children:["Welcome ",n,","]}),i.jsx("p",{className:"text-muted-foreground",children:"Here's your organization's financial overview."})]})}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"relative hidden md:block",children:[i.jsx(fi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"Search...",className:"pl-10 w-64 rounded-full bg-muted/50 focus:bg-background transition-colors"})]}),i.jsxs(H,{variant:"ghost",size:"icon",className:"relative text-muted-foreground hover:text-foreground",children:[i.jsx(ooe,{className:"h-5 w-5"}),i.jsx("span",{className:"absolute top-2 right-2 h-2 w-2 bg-red-500 rounded-full ring-2 ring-background"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(joe,{className:"h-4 w-4 text-muted-foreground"}),i.jsx(is,{}),i.jsx("span",{className:"text-sm text-muted-foreground",children:"Dark Mode"})]}),i.jsxs("div",{className:"flex items-center gap-3 pl-4 border-l",children:[i.jsx(nZ,{className:"h-9 w-9 border border-border",children:i.jsx(rZ,{className:"bg-primary/10 text-primary font-medium",children:n.charAt(0).toUpperCase()})}),i.jsxs("div",{className:"hidden md:block",children:[i.jsx("p",{className:"text-sm font-medium",children:n}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Administrator"})]})]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:r.map((u,d)=>i.jsx(Z,{className:"border border-border/50 shadow-sm hover:shadow-md transition-shadow",children:i.jsxs(re,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:`p-3 rounded-xl ${u.bgColor}`,children:i.jsx(u.icon,{className:`h-5 w-5 ${u.iconColor}`})}),u.trend&&i.jsxs(Xe,{className:"bg-green-100 text-green-700 hover:bg-green-200 border-green-200 gap-1",children:[i.jsx(la,{className:"h-3 w-3"}),u.trend]})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:u.title}),i.jsx("p",{className:"text-3xl font-bold mt-1 tracking-tight text-foreground",children:u.value}),u.subtitle&&i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:u.subtitle})]})]})},d))}),i.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[i.jsxs(Z,{className:"border border-border/50 shadow-sm",children:[i.jsx(ee,{children:i.jsx(ne,{className:"text-lg",children:"Department Distribution"})}),i.jsx(re,{children:i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsxs("div",{className:"relative w-40 h-40",children:[i.jsx(eA,{width:"100%",height:"100%",children:i.jsx(HQe,{children:i.jsx(Hl,{data:(c=e==null?void 0:e.departmentData)!=null&&c.length?e.departmentData:[{name:"No Data",value:1}],innerRadius:50,outerRadius:70,paddingAngle:2,dataKey:"value",children:((e==null?void 0:e.departmentData)||[{name:"No Data",value:1}]).map((u,d)=>i.jsx(N1,{fill:b0[d%b0.length]},`cell-${d}`))})})}),i.jsxs("div",{className:"absolute inset-0 flex items-center justify-center flex-col",children:[i.jsx("p",{className:"text-2xl font-bold text-primary",children:(e==null?void 0:e.totalEmployees)||0}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Total"})]})]}),i.jsxs("div",{className:"flex-1 space-y-2",children:[((e==null?void 0:e.departmentData)||[]).slice(0,5).map((u,d)=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:b0[d%b0.length]}}),i.jsx("span",{className:"truncate max-w-[100px] text-muted-foreground",children:u.name})]}),i.jsx("span",{className:"font-medium",children:u.value})]},u.name)),(!(e!=null&&e.departmentData)||e.departmentData.length===0)&&i.jsx("p",{className:"text-sm text-muted-foreground",children:"No employee data"})]})]})})]}),i.jsxs(Z,{className:"lg:col-span-2 border border-border/50 shadow-sm",children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between",children:[i.jsx(ne,{className:"text-lg",children:"Revenue Overview"}),i.jsxs("div",{className:"flex gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-slate-900"}),i.jsx("span",{className:"text-muted-foreground",children:"Revenue"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-blue-500"}),i.jsx("span",{className:"text-muted-foreground",children:"Expenses"})]})]})]}),i.jsx(re,{children:i.jsx(eA,{width:"100%",height:250,children:i.jsxs(KQe,{data:(e==null?void 0:e.monthlyRevenue)||[],children:[i.jsxs("defs",{children:[i.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"5%",stopColor:"#0f172a",stopOpacity:.1}),i.jsx("stop",{offset:"95%",stopColor:"#0f172a",stopOpacity:0})]}),i.jsxs("linearGradient",{id:"colorExpenses",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.1}),i.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})]}),i.jsx(Lte,{strokeDasharray:"3 3",vertical:!1,stroke:"#e2e8f0"}),i.jsx(dp,{dataKey:"name",axisLine:!1,tickLine:!1,fontSize:12,tick:{fill:"#64748b"}}),i.jsx(fp,{axisLine:!1,tickLine:!1,fontSize:12,tick:{fill:"#64748b"},tickFormatter:u=>`K${u/1e3}k`}),i.jsx(Pa,{contentStyle:{borderRadius:"8px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),i.jsx($l,{type:"monotone",dataKey:"revenue",stroke:"#0f172a",fill:"url(#colorRevenue)",strokeWidth:2}),i.jsx($l,{type:"monotone",dataKey:"expenses",stroke:"#3b82f6",fill:"url(#colorExpenses)",strokeWidth:2})]})})})]})]}),i.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[i.jsxs(Z,{className:"lg:col-span-2 border border-border/50 shadow-sm",children:[i.jsx(ee,{children:i.jsxs(ne,{className:"text-lg flex items-center gap-2",children:[i.jsx(woe,{className:"h-5 w-5 text-primary"}),"Regional Performance"]})}),i.jsx(re,{children:i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsx("div",{className:"space-y-4",children:[{region:"Lusaka",value:42e3,color:"bg-primary"},{region:"Copperbelt",value:28e3,color:"bg-blue-500"},{region:"Southern",value:18e3,color:"bg-indigo-500"},{region:"Eastern",value:12e3,color:"bg-violet-500"}].map(u=>i.jsxs("div",{className:"flex items-center justify-between group",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${u.color}`}),i.jsx("span",{className:"font-medium text-muted-foreground group-hover:text-foreground transition-colors",children:u.region})]}),i.jsx("span",{className:"font-bold tabular-nums",children:le(u.value)})]},u.region))}),i.jsx("div",{className:"flex items-center justify-center",children:i.jsx(eA,{width:"100%",height:200,children:i.jsxs(WQe,{data:[{name:"Lusaka",value:42},{name:"Copperbelt",value:28},{name:"Southern",value:18},{name:"Eastern",value:12}],children:[i.jsx(dp,{dataKey:"name",axisLine:!1,tickLine:!1,fontSize:12,tick:{fill:"#64748b"}}),i.jsx(fp,{hide:!0}),i.jsx(Pa,{cursor:{fill:"#f1f5f9"},contentStyle:{borderRadius:"8px",border:"1px solid #e2e8f0"}}),i.jsx(Fh,{dataKey:"value",fill:"#0f172a",radius:[4,4,0,0],barSize:40})]})})})]})})]}),i.jsxs(Z,{className:"border border-border/50 shadow-sm",children:[i.jsx(ee,{children:i.jsxs(ne,{className:"text-lg flex items-center gap-2",children:[i.jsx(Xd,{className:"h-5 w-5 text-primary"}),"Upcoming Tasks"]})}),i.jsx(re,{children:i.jsx("div",{className:"space-y-4",children:s.map((u,d)=>i.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg hover:bg-muted/50 transition-colors border border-transparent hover:border-border/50",children:[i.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center ${u.status==="urgent"?"bg-red-50 text-red-600":u.status==="scheduled"?"bg-blue-50 text-blue-600":"bg-slate-50 text-slate-600"}`,children:i.jsx(toe,{className:"h-4.5 w-4.5"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium text-sm text-foreground",children:u.name}),i.jsx("p",{className:"text-xs text-muted-foreground",children:u.type})]}),i.jsx(Xe,{variant:u.status==="urgent"?"destructive":"secondary",className:"text-xs font-normal",children:u.date})]},d))})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsx(Z,{className:"border border-border/50 shadow-sm hover:border-primary/20 transition-colors",children:i.jsx(re,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Active Projects"}),i.jsx("p",{className:"text-2xl font-bold mt-1",children:(e==null?void 0:e.activeProjects)||0})]}),i.jsx("div",{className:"h-10 w-10 rounded-xl bg-green-50 flex items-center justify-center",children:i.jsx(cr,{className:"h-5 w-5 text-green-600"})})]})})}),i.jsx(Z,{className:"border border-border/50 shadow-sm hover:border-primary/20 transition-colors",children:i.jsx(re,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Pending Invoices"}),i.jsx("p",{className:"text-2xl font-bold mt-1",children:(e==null?void 0:e.pendingInvoices)||0})]}),i.jsx("div",{className:"h-10 w-10 rounded-xl bg-amber-50 flex items-center justify-center",children:i.jsx(er,{className:"h-5 w-5 text-amber-600"})})]})})}),i.jsx(Z,{className:"border border-border/50 shadow-sm hover:border-primary/20 transition-colors",children:i.jsx(re,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Total Payroll"}),i.jsx("p",{className:"text-2xl font-bold mt-1",children:le((e==null?void 0:e.totalPayroll)||0)})]}),i.jsx("div",{className:"h-10 w-10 rounded-xl bg-blue-50 flex items-center justify-center",children:i.jsx(si,{className:"h-5 w-5 text-blue-600"})})]})})}),i.jsx(Z,{className:"border border-border/50 shadow-sm hover:border-primary/20 transition-colors",children:i.jsx(re,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Total Expenses"}),i.jsx("p",{className:"text-2xl font-bold mt-1",children:le((e==null?void 0:e.totalExpenses)||0)})]}),i.jsx("div",{className:"h-10 w-10 rounded-xl bg-red-50 flex items-center justify-center",children:i.jsx(la,{className:"h-5 w-5 text-red-600"})})]})})})]})]})}function ZQe(){var s;const{user:t}=ct(),{data:e}=je({queryKey:["accountant-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalRevenue:0,outstandingReceivables:0,vatCollected:0,totalExpenses:0,unpaidBills:0,cashBalance:0,pendingInvoices:0,bankAccounts:[]};const{invoices:a,expenses:o,bills:l,bankAccounts:c}=await fa.runQueries(t.id,{invoices:{collectionName:K.INVOICES},expenses:{collectionName:K.EXPENSES},bills:{collectionName:K.BILLS},bankAccounts:{collectionName:K.BANK_ACCOUNTS}});return{totalRevenue:a.filter(u=>De(u,["status"])==="paid").reduce((u,d)=>u+Qe(d,["total","grandTotal","amount"]),0),outstandingReceivables:a.filter(u=>De(u,["status"])!=="paid").reduce((u,d)=>u+Qe(d,["total","grandTotal","amount"]),0),vatCollected:a.filter(u=>De(u,["status"])==="paid").reduce((u,d)=>u+Qe(d,["vatAmount","vat_amount"]),0),totalExpenses:o.reduce((u,d)=>u+Qe(d,["amount","total"]),0),unpaidBills:l.filter(u=>De(u,["status"])!=="paid").reduce((u,d)=>u+Qe(d,["total","amount"]),0),cashBalance:c.reduce((u,d)=>u+Qe(d,["currentBalance","current_balance"]),0),pendingInvoices:a.filter(u=>De(u,["status"])==="pending").length,bankAccounts:c}}}),n=[{title:"Total Revenue",value:le((e==null?void 0:e.totalRevenue)||0),icon:er,trend:"up"},{title:"Outstanding Receivables",value:le((e==null?void 0:e.outstandingReceivables)||0),icon:cr,trend:"neutral"},{title:"Total Expenses",value:le((e==null?void 0:e.totalExpenses)||0),icon:Ka,trend:"down"},{title:"Cash Balance",value:le((e==null?void 0:e.cashBalance)||0),icon:Zd,trend:"up"}],r=((e==null?void 0:e.totalRevenue)||0)-((e==null?void 0:e.totalExpenses)||0);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Accountant Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Financial overview and key metrics"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(a=>i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:a.title}),i.jsx(a.icon,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:a.value}),a.trend==="up"&&i.jsx(la,{className:"h-3 w-3 text-green-500 inline ml-1"}),a.trend==="down"&&i.jsx(Ka,{className:"h-3 w-3 text-red-500 inline ml-1"})]})]},a.title))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"Profit & Loss Summary"})}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Revenue"}),i.jsx("span",{className:"font-medium text-green-600",children:le((e==null?void 0:e.totalRevenue)||0)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Expenses"}),i.jsxs("span",{className:"font-medium text-red-600",children:["(",le((e==null?void 0:e.totalExpenses)||0),")"]})]}),i.jsxs("div",{className:"border-t pt-3 flex justify-between",children:[i.jsx("span",{className:"font-semibold",children:"Net Income"}),i.jsx("span",{className:`font-bold ${r>=0?"text-green-600":"text-red-600"}`,children:le(r)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"VAT Collected"}),i.jsx("span",{className:"font-medium",children:le((e==null?void 0:e.vatCollected)||0)})]})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(loe,{className:"h-5 w-5"}),"Bank Accounts"]})}),i.jsx(re,{children:i.jsxs("div",{className:"space-y-3",children:[(s=e==null?void 0:e.bankAccounts)==null?void 0:s.map(a=>i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:De(a,["accountName","account_name"],"Bank Account")}),i.jsx("span",{className:"font-medium",children:le(Qe(a,["currentBalance","current_balance"]))})]},De(a,["accountName","account_name","id"],"bank-account"))),(!(e!=null&&e.bankAccounts)||e.bankAccounts.length===0)&&i.jsx("p",{className:"text-muted-foreground text-sm",children:"No bank accounts configured"})]})})]})]})]})}function JQe(){const{user:t}=ct(),{data:e}=je({queryKey:["bookkeeper-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalInvoices:0,paidInvoices:0,unpaidInvoicesAmount:0,totalExpenses:0,unpaidBillsAmount:0,overdueBillsCount:0,overdueBillsAmount:0,vendorCount:0,customerCount:0,recentExpenses:[]};const{invoices:r,expenses:s,bills:a,vendors:o,customers:l}=await fa.runQueries(t.id,{invoices:{collectionName:K.INVOICES},expenses:{collectionName:K.EXPENSES},bills:{collectionName:K.BILLS},vendors:{collectionName:K.VENDORS},customers:{collectionName:K.CUSTOMERS}}),c=new Date().toISOString().split("T")[0],u=a.filter(d=>{const h=De(d,["dueDate","due_date"]);return De(d,["status"])!=="paid"&&!!h&&h<c});return{totalInvoices:r.length,paidInvoices:r.filter(d=>De(d,["status"])==="paid").length,unpaidInvoicesAmount:r.filter(d=>De(d,["status"])!=="paid").reduce((d,h)=>d+Qe(h,["total","amount"]),0),totalExpenses:s.reduce((d,h)=>d+Qe(h,["amount","total"]),0),unpaidBillsAmount:a.filter(d=>De(d,["status"])!=="paid").reduce((d,h)=>d+Qe(h,["total","amount"]),0),overdueBillsCount:u.length,overdueBillsAmount:u.reduce((d,h)=>d+Qe(h,["total","amount"]),0),vendorCount:o.length,customerCount:l.length,recentExpenses:s.slice(0,5)}}}),n=[{title:"Invoices Created",value:(e==null?void 0:e.totalInvoices)||0,subtitle:`${(e==null?void 0:e.paidInvoices)||0} paid`,icon:cr,color:"text-primary"},{title:"Unpaid Invoices",value:le((e==null?void 0:e.unpaidInvoicesAmount)||0),icon:Xj,color:"text-warning"},{title:"Total Expenses",value:le((e==null?void 0:e.totalExpenses)||0),icon:Ka,color:"text-destructive"},{title:"Unpaid Bills",value:le((e==null?void 0:e.unpaidBillsAmount)||0),icon:Zd,color:"text-amber-600"}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Bookkeeper Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Daily transaction overview and data entry tasks"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(r=>i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:r.title}),i.jsx(r.icon,{className:`h-4 w-4 ${r.color}`})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:r.value}),"subtitle"in r&&i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r.subtitle})]})]},r.title))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(la,{className:"h-5 w-5 text-primary"}),"Quick Stats"]})}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Customers"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.customerCount)||0})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Vendors"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.vendorCount)||0})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Overdue Bills"}),i.jsx("span",{className:"font-medium text-destructive",children:(e==null?void 0:e.overdueBillsCount)||0})]})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsxs(ne,{className:"flex items-center gap-2 text-destructive",children:[i.jsx(er,{className:"h-5 w-5"}),"Overdue Payments"]})}),i.jsx(re,{children:(e==null?void 0:e.overdueBillsCount)>0?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Bills Overdue"}),i.jsx("span",{className:"font-bold text-destructive",children:e.overdueBillsCount})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Amount"}),i.jsx("span",{className:"font-bold text-destructive",children:le(e.overdueBillsAmount||0)})]})]}):i.jsx("p",{className:"text-muted-foreground text-sm",children:"No overdue payments"})})]})]})]})}function Xr(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Fl(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function rne(t,e){const n=Xr(t);if(isNaN(e))return Fl(t,NaN);if(!e)return n;const r=n.getDate(),s=Fl(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const a=s.getDate();return r>=a?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}const sne=6048e5,eXe=864e5;let tXe={};function Y1(){return tXe}function cx(t,e){var l,c,u,d;const n=Y1(),r=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Xr(t),a=s.getDay(),o=(a<r?7:0)+a-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Aj(t){return cx(t,{weekStartsOn:1})}function ine(t){const e=Xr(t),n=e.getFullYear(),r=Fl(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Aj(r),a=Fl(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=Aj(a);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function o6(t){const e=Xr(t);return e.setHours(0,0,0,0),e}function l6(t){const e=Xr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function ane(t,e){const n=o6(t),r=o6(e),s=+n-l6(n),a=+r-l6(r);return Math.round((s-a)/eXe)}function nXe(t){const e=ine(t),n=Fl(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Aj(n)}function rXe(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function sXe(t){if(!rXe(t)&&typeof t!="number")return!1;const e=Xr(t);return!isNaN(Number(e))}function bs(t,e){const n=Xr(t),r=Xr(e),s=c6(n,r),a=Math.abs(ane(n,r));n.setDate(n.getDate()-s*a);const o=+(c6(n,r)===-s),l=s*(a-o);return l===0?0:l}function c6(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function one(t){const e=Xr(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function lne(t){const e=Xr(t);return e.setDate(1),e.setHours(0,0,0,0),e}function iXe(t){const e=Xr(t),n=Fl(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const aXe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},oXe=(t,e,n)=>{let r;const s=aXe[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function vA(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const lXe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},cXe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},uXe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},dXe={date:vA({formats:lXe,defaultWidth:"full"}),time:vA({formats:cXe,defaultWidth:"full"}),dateTime:vA({formats:uXe,defaultWidth:"full"})},hXe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},fXe=(t,e,n,r)=>hXe[t];function Vg(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):o;s=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[l]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return s[a]}}const mXe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},pXe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},gXe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},yXe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},vXe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},xXe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},bXe=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},wXe={ordinalNumber:bXe,era:Vg({values:mXe,defaultWidth:"wide"}),quarter:Vg({values:pXe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Vg({values:gXe,defaultWidth:"wide"}),day:Vg({values:yXe,defaultWidth:"wide"}),dayPeriod:Vg({values:vXe,defaultWidth:"wide",formattingValues:xXe,defaultFormattingWidth:"wide"})};function Bg(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(s);if(!a)return null;const o=a[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?jXe(l,h=>h.test(o)):_Xe(l,h=>h.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function _Xe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function jXe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function NXe(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(s.length);return{value:o,rest:l}}}const SXe=/^(\d+)(th|st|nd|rd)?/i,EXe=/\d+/i,AXe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},TXe={any:[/^b/i,/^(a|c)/i]},CXe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},PXe={any:[/1/i,/2/i,/3/i,/4/i]},IXe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},kXe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},RXe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},OXe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},MXe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},DXe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},LXe={ordinalNumber:NXe({matchPattern:SXe,parsePattern:EXe,valueCallback:t=>parseInt(t,10)}),era:Bg({matchPatterns:AXe,defaultMatchWidth:"wide",parsePatterns:TXe,defaultParseWidth:"any"}),quarter:Bg({matchPatterns:CXe,defaultMatchWidth:"wide",parsePatterns:PXe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Bg({matchPatterns:IXe,defaultMatchWidth:"wide",parsePatterns:kXe,defaultParseWidth:"any"}),day:Bg({matchPatterns:RXe,defaultMatchWidth:"wide",parsePatterns:OXe,defaultParseWidth:"any"}),dayPeriod:Bg({matchPatterns:MXe,defaultMatchWidth:"any",parsePatterns:DXe,defaultParseWidth:"any"})},$Xe={code:"en-US",formatDistance:oXe,formatLong:dXe,formatRelative:fXe,localize:wXe,match:LXe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function FXe(t){const e=Xr(t);return ane(e,iXe(e))+1}function VXe(t){const e=Xr(t),n=+Aj(e)-+nXe(e);return Math.round(n/sne)+1}function cne(t,e){var d,h,f,m;const n=Xr(t),r=n.getFullYear(),s=Y1(),a=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=Fl(t,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const l=cx(o,e),c=Fl(t,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const u=cx(c,e);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function BXe(t,e){var l,c,u,d;const n=Y1(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=cne(t,e),a=Fl(t,0);return a.setFullYear(s,0,r),a.setHours(0,0,0,0),cx(a,e)}function UXe(t,e){const n=Xr(t),r=+cx(n,e)-+BXe(n,e);return Math.round(r/sne)+1}function vn(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const ac={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return vn(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):vn(n+1,2)},d(t,e){return vn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return vn(t.getHours()%12||12,e.length)},H(t,e){return vn(t.getHours(),e.length)},m(t,e){return vn(t.getMinutes(),e.length)},s(t,e){return vn(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return vn(s,e.length)}},ef={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},u6={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return ac.y(t,e)},Y:function(t,e,n,r){const s=cne(t,r),a=s>0?s:1-s;if(e==="YY"){const o=a%100;return vn(o,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):vn(a,e.length)},R:function(t,e){const n=ine(t);return vn(n,e.length)},u:function(t,e){const n=t.getFullYear();return vn(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return vn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return vn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return ac.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return vn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=UXe(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):vn(s,e.length)},I:function(t,e,n){const r=VXe(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):vn(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ac.d(t,e)},D:function(t,e,n){const r=FXe(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):vn(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return vn(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return vn(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return vn(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=ef.noon:r===0?s=ef.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=ef.evening:r>=12?s=ef.afternoon:r>=4?s=ef.morning:s=ef.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ac.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ac.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):vn(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):vn(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ac.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ac.s(t,e)},S:function(t,e){return ac.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return h6(r);case"XXXX":case"XX":return fd(r);case"XXXXX":case"XXX":default:return fd(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return h6(r);case"xxxx":case"xx":return fd(r);case"xxxxx":case"xxx":default:return fd(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+d6(r,":");case"OOOO":default:return"GMT"+fd(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+d6(r,":");case"zzzz":default:return"GMT"+fd(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return vn(r,e.length)},T:function(t,e,n){const r=t.getTime();return vn(r,e.length)}};function d6(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),a=r%60;return a===0?n+String(s):n+String(s)+e+vn(a,2)}function h6(t,e){return t%60===0?(t>0?"-":"+")+vn(Math.abs(t)/60,2):fd(t,e)}function fd(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=vn(Math.trunc(r/60),2),a=vn(r%60,2);return n+s+e+a}const f6=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},une=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},zXe=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return f6(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",f6(r,e)).replace("{{time}}",une(s,e))},qXe={p:une,P:zXe},WXe=/^D+$/,HXe=/^Y+$/,KXe=["D","DD","YY","YYYY"];function GXe(t){return WXe.test(t)}function YXe(t){return HXe.test(t)}function QXe(t,e,n){const r=XXe(t,e,n);if(console.warn(r),KXe.includes(t))throw new RangeError(r)}function XXe(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const ZXe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,JXe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,eZe=/^'([^]*?)'?$/,tZe=/''/g,nZe=/[a-zA-Z]/;function vt(t,e,n){var d,h,f,m;const r=Y1(),s=r.locale??$Xe,a=r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=r.weekStartsOn??((m=(f=r.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??0,l=Xr(t);if(!sXe(l))throw new RangeError("Invalid time value");let c=e.match(JXe).map(v=>{const g=v[0];if(g==="p"||g==="P"){const y=qXe[g];return y(v,s.formatLong)}return v}).join("").match(ZXe).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const g=v[0];if(g==="'")return{isToken:!1,value:rZe(v)};if(u6[g])return{isToken:!0,value:v};if(g.match(nZe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:v}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:a,weekStartsOn:o,locale:s};return c.map(v=>{if(!v.isToken)return v.value;const g=v.value;(YXe(g)||GXe(g))&&QXe(g,e,String(t));const y=u6[g[0]];return y(l,g,s.localize,u)}).join("")}function rZe(t){const e=t.match(eZe);return e?e[1].replace(tZe,"'"):t}function tf(t){return Xr(t).getFullYear()}function dne(t){return+Xr(t)<Date.now()}function m6(t,e){return rne(t,-e)}function sZe(){const{user:t}=ct(),{data:e}=je({queryKey:["hr-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalEmployees:0,activeEmployees:0,permanentEmployees:0,contractEmployees:0,departments:0,monthlyPayroll:0,pendingPayroll:0,activeAdvances:0,totalAdvanceBalance:0,hoursLogged:0,pendingTimeEntries:0};const r=vt(new Date,"yyyy-MM"),s=`${r}-01`,a=new Date(parseInt(r.split("-")[0]),parseInt(r.split("-")[1]),0).toISOString().split("T")[0],{employees:o,payrollRuns:l,advances:c,timeEntries:u}=await fa.runQueries(t.id,{employees:{collectionName:K.EMPLOYEES},payrollRuns:{collectionName:K.PAYROLL_RUNS,filters:[{field:"runDate",op:">=",value:s},{field:"runDate",op:"<=",value:a}]},advances:{collectionName:K.ADVANCES},timeEntries:{collectionName:K.TIME_ENTRIES,filters:[{field:"workDate",op:">=",value:s}]}}),d=new Set(o.map(h=>De(h,["department"])).filter(h=>!!h));return{totalEmployees:o.length,activeEmployees:o.filter(h=>De(h,["employmentStatus","employment_status"])==="active").length,permanentEmployees:o.filter(h=>De(h,["contractType","contract_type"])==="permanent").length,contractEmployees:o.filter(h=>De(h,["contractType","contract_type"])==="contract").length,departments:d.size,monthlyPayroll:l.filter(h=>De(h,["status","payrollStatus","payroll_status"])==="approved").reduce((h,f)=>h+Qe(f,["totalNet","total_net"]),0),pendingPayroll:l.filter(h=>De(h,["status","payrollStatus","payroll_status"])==="pending").length,activeAdvances:c.filter(h=>De(h,["status"])==="active").length,totalAdvanceBalance:c.filter(h=>De(h,["status"])==="active").reduce((h,f)=>h+Qe(f,["remainingBalance","remaining_balance"]),0),hoursLogged:u.reduce((h,f)=>h+Qe(f,["hoursWorked","hours_worked"]),0),pendingTimeEntries:u.filter(h=>De(h,["status"])==="pending").length}}}),n=[{title:"Active Employees",value:(e==null?void 0:e.activeEmployees)||0,icon:si,color:"text-blue-500"},{title:"Monthly Payroll",value:le((e==null?void 0:e.monthlyPayroll)||0),icon:er,color:"text-green-500"},{title:"Active Advances",value:(e==null?void 0:e.activeAdvances)||0,icon:Xd,color:"text-amber-500"},{title:"Hours Logged",value:`${(e==null?void 0:e.hoursLogged)||0}h`,icon:Pi,color:"text-purple-500"}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"HR & Payroll Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Employee and payroll management overview"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(r=>i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:r.title}),i.jsx(r.icon,{className:`h-4 w-4 ${r.color}`})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:r.value})})]},r.title))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"Workforce Breakdown"})}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Employees"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.totalEmployees)||0})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Permanent Staff"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.permanentEmployees)||0})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Contract Staff"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.contractEmployees)||0})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Departments"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.departments)||0})]})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(Ci,{className:"h-5 w-5 text-warning"}),"Pending Actions"]})}),i.jsxs(re,{className:"space-y-3",children:[(e==null?void 0:e.pendingPayroll)>0&&i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Ci,{className:"h-5 w-5 text-warning mt-0.5"}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-medium",children:[e.pendingPayroll," Pending Payroll Run(s)"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Awaiting approval"})]})]}),(e==null?void 0:e.pendingTimeEntries)>0&&i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Pi,{className:"h-5 w-5 text-accent mt-0.5"}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-medium",children:[e.pendingTimeEntries," Pending Time Entries"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Need review"})]})]}),i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(er,{className:"h-5 w-5 text-amber-500 mt-0.5"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Outstanding Advances"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[le((e==null?void 0:e.totalAdvanceBalance)||0)," remaining"]})]})]})]})]})]})]})}function iZe(){var r;const{user:t}=ct(),{data:e}=je({queryKey:["inventory-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalItems:0,lowStockCount:0,lowStockItems:[],totalValue:0,categories:0,recentMovements:0,inMovements:0,outMovements:0};const{items:s,movements:a}=await fa.runQueries(t.id,{items:{collectionName:K.INVENTORY_ITEMS},movements:{collectionName:K.STOCK_MOVEMENTS,orderByField:"createdAt",orderDirection:"desc",limitCount:100}}),o=s.filter(u=>{const d=Qe(u,["quantityOnHand","quantity_on_hand"]),h=Qe(u,["reorderPoint","reorder_point"]);return d<=h}),l=s.reduce((u,d)=>{const h=Qe(d,["quantityOnHand","quantity_on_hand"]),f=Qe(d,["unitCost","unit_cost"]);return u+h*f},0),c=new Set(s.map(u=>De(u,["category"])).filter(u=>!!u)).size;return{totalItems:s.length,lowStockCount:o.length,lowStockItems:o.slice(0,5),totalValue:l,categories:c,recentMovements:a.length,inMovements:a.filter(u=>De(u,["movementType","movement_type"])==="in").reduce((u,d)=>u+Qe(d,["quantity"]),0),outMovements:a.filter(u=>De(u,["movementType","movement_type"])==="out").reduce((u,d)=>u+Qe(d,["quantity"]),0)}}}),n=[{title:"Total Items",value:(e==null?void 0:e.totalItems)||0,icon:Ji,color:"text-blue-500"},{title:"Low Stock Alerts",value:(e==null?void 0:e.lowStockCount)||0,icon:Ga,color:"text-red-500"},{title:"Total Value",value:le((e==null?void 0:e.totalValue)||0),icon:er,color:"text-green-500"},{title:"Categories",value:(e==null?void 0:e.categories)||0,icon:la,color:"text-purple-500"}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Inventory Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Stock levels and inventory management overview"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(s=>i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:s.title}),i.jsx(s.icon,{className:`h-4 w-4 ${s.color}`})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:s.value})})]},s.title))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(Ga,{className:"h-5 w-5 text-destructive"}),"Low Stock Items"]})}),i.jsx(re,{children:i.jsxs("div",{className:"space-y-3",children:[(r=e==null?void 0:e.lowStockItems)==null?void 0:r.map(s=>i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:De(s,["name"],"Unnamed Item")}),i.jsxs("span",{className:"font-medium text-destructive",children:[Qe(s,["quantityOnHand","quantity_on_hand"])," / ",Qe(s,["reorderPoint","reorder_point"])]})]},De(s,["id","name"],"inventory-item"))),(!(e!=null&&e.lowStockItems)||e.lowStockItems.length===0)&&i.jsx("p",{className:"text-muted-foreground text-sm",children:"No low stock alerts"})]})})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"Recent Activity"})}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Items Received"}),i.jsxs("span",{className:"font-medium text-green-600",children:["+",(e==null?void 0:e.inMovements)||0]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Items Issued"}),i.jsxs("span",{className:"font-medium text-red-600",children:["-",(e==null?void 0:e.outMovements)||0]})]}),i.jsxs("div",{className:"border-t pt-3 flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Recent Movements"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.recentMovements)||0})]})]})]})]})]})}var NM="Progress",SM=100,[aZe,stt]=ds(NM),[oZe,lZe]=aZe(NM),hne=N.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=cZe,...o}=t;(s||s===0)&&!p6(s)&&console.error(uZe(`${s}`,"Progress"));const l=p6(s)?s:SM;r!==null&&!g6(r,l)&&console.error(dZe(`${r}`,"Progress"));const c=g6(r,l)?r:null,u=Tj(c)?a(c,l):void 0;return i.jsx(oZe,{scope:n,value:c,max:l,children:i.jsx(Je.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Tj(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":pne(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});hne.displayName=NM;var fne="ProgressIndicator",mne=N.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=lZe(fne,n);return i.jsx(Je.div,{"data-state":pne(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});mne.displayName=fne;function cZe(t,e){return`${Math.round(t/e*100)}%`}function pne(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Tj(t){return typeof t=="number"}function p6(t){return Tj(t)&&!isNaN(t)&&t>0}function g6(t,e){return Tj(t)&&!isNaN(t)&&t<=e&&t>=0}function uZe(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${SM}\`.`}function dZe(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${SM} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var gne=hne,hZe=mne;const rm=N.forwardRef(({className:t,value:e,...n},r)=>i.jsx(gne,{ref:r,className:pe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:i.jsx(hZe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));rm.displayName=gne.displayName;function fZe(){var r;const{user:t}=ct(),{data:e}=je({queryKey:["project-manager-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalProjects:0,activeProjects:0,completedProjects:0,totalBudget:0,totalSpent:0,budgetUtilization:0,projectsNearBudget:[],pendingTimeEntries:0,totalHoursLogged:0,topProjects:[]};const{projects:s,timeEntries:a}=await fa.runQueries(t.id,{projects:{collectionName:K.PROJECTS},projectExpenses:{collectionName:K.PROJECT_EXPENSES},timeEntries:{collectionName:K.TIME_ENTRIES}}),o=s.filter(m=>De(m,["status"])==="active"),l=s.filter(m=>De(m,["status"])==="completed"),c=o.reduce((m,v)=>m+Qe(v,["budget"]),0),u=o.reduce((m,v)=>m+Qe(v,["spent"]),0),d=o.filter(m=>{const v=Qe(m,["budget"]),g=Qe(m,["spent"]);return v>0&&g/v>=.8}),h=a.filter(m=>De(m,["status"])==="pending"),f=a.reduce((m,v)=>m+Qe(v,["hoursWorked","hours_worked"]),0);return{totalProjects:s.length,activeProjects:o.length,completedProjects:l.length,totalBudget:c,totalSpent:u,budgetUtilization:c>0?u/c*100:0,projectsNearBudget:d,pendingTimeEntries:h.length,totalHoursLogged:f,topProjects:o.slice(0,5)}}}),n=[{title:"Active Projects",value:(e==null?void 0:e.activeProjects)||0,icon:Aw,color:"text-primary"},{title:"Total Budget",value:le((e==null?void 0:e.totalBudget)||0),icon:er,color:"text-green-500"},{title:"Total Spent",value:le((e==null?void 0:e.totalSpent)||0),icon:la,color:"text-blue-500"},{title:"Hours Logged",value:((r=e==null?void 0:e.totalHoursLogged)==null?void 0:r.toFixed(1))||"0",icon:Pi,color:"text-blue-500"}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Project Manager Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Project portfolio and resource overview"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(s=>i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:s.title}),i.jsx(s.icon,{className:`h-4 w-4 ${s.color}`})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:s.value})})]},s.title))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(la,{className:"h-5 w-5 text-primary"}),"Budget Utilization"]})}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Overall Utilization"}),i.jsxs("span",{className:"font-medium",children:[((e==null?void 0:e.budgetUtilization)||0).toFixed(1),"%"]})]}),i.jsx(rm,{value:(e==null?void 0:e.budgetUtilization)||0,className:"h-2"})]}),i.jsxs("div",{className:"pt-4 space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Budget"}),i.jsx("span",{className:"font-medium",children:le((e==null?void 0:e.totalBudget)||0)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Spent to Date"}),i.jsx("span",{className:"font-medium text-blue-500",children:le((e==null?void 0:e.totalSpent)||0)})]}),i.jsxs("div",{className:"flex justify-between border-t pt-3",children:[i.jsx("span",{className:"font-semibold",children:"Remaining"}),i.jsx("span",{className:"font-bold text-green-600",children:le(((e==null?void 0:e.totalBudget)||0)-((e==null?void 0:e.totalSpent)||0))})]})]})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsxs(ne,{className:"flex items-center gap-2 text-warning",children:[i.jsx(Ci,{className:"h-5 w-5"}),"Projects Near Budget Limit"]})}),i.jsx(re,{children:e!=null&&e.projectsNearBudget&&e.projectsNearBudget.length>0?i.jsx("div",{className:"space-y-4",children:e.projectsNearBudget.map(s=>{const a=Qe(s,["budget"]),o=Qe(s,["spent"]),l=a>0?o/a*100:0;return i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"font-medium truncate max-w-[200px]",children:De(s,["name"],"Unnamed Project")}),i.jsxs("span",{className:l>=100?"text-destructive":"text-warning",children:[l.toFixed(0),"%"]})]}),i.jsx(rm,{value:Math.min(l,100),className:`h-2 ${l>=100?"[&>div]:bg-destructive":"[&>div]:bg-warning"}`}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[i.jsxs("span",{children:[le(o)," spent"]}),i.jsxs("span",{children:[le(a)," budget"]})]})]},De(s,["id"],"project"))})}):i.jsx("p",{className:"text-muted-foreground text-sm py-4",children:"No projects approaching budget limit"})})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(Aw,{className:"h-5 w-5 text-primary"}),"Active Projects Overview"]})}),i.jsx(re,{children:e!=null&&e.topProjects&&e.topProjects.length>0?i.jsx("div",{className:"space-y-4",children:e.topProjects.map(s=>{const a=Qe(s,["budget"]),o=Qe(s,["spent"]),l=a>0?o/a*100:0;return i.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/30",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"font-medium",children:De(s,["name"],"Unnamed Project")}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[De(s,["donorName","donor_name"],"No donor")," - ",De(s,["grantReference","grant_reference"],"No reference")]})]}),i.jsxs("div",{className:"text-right space-y-1",children:[i.jsx("p",{className:"font-medium",children:le(o)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["of ",le(a)]})]}),i.jsx("div",{className:"w-20",children:i.jsx(rm,{value:Math.min(l,100),className:"h-2"})})]},De(s,["id"],"project"))})}):i.jsx("p",{className:"text-muted-foreground text-sm py-4",children:"No active projects"})})]})]})}const qt=N.forwardRef(({className:t,...e},n)=>i.jsx("div",{className:"relative w-full overflow-auto",children:i.jsx("table",{ref:n,className:pe("w-full caption-bottom text-sm",t),...e})}));qt.displayName="Table";const Wt=N.forwardRef(({className:t,...e},n)=>i.jsx("thead",{ref:n,className:pe("[&_tr]:border-b",t),...e}));Wt.displayName="TableHeader";const Ht=N.forwardRef(({className:t,...e},n)=>i.jsx("tbody",{ref:n,className:pe("[&_tr:last-child]:border-0",t),...e}));Ht.displayName="TableBody";const mZe=N.forwardRef(({className:t,...e},n)=>i.jsx("tfoot",{ref:n,className:pe("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));mZe.displayName="TableFooter";const _e=N.forwardRef(({className:t,...e},n)=>i.jsx("tr",{ref:n,className:pe("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",t),...e}));_e.displayName="TableRow";const U=N.forwardRef(({className:t,...e},n)=>i.jsx("th",{ref:n,className:pe("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));U.displayName="TableHead";const B=N.forwardRef(({className:t,...e},n)=>i.jsx("td",{ref:n,className:pe("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));B.displayName="TableCell";const pZe=N.forwardRef(({className:t,...e},n)=>i.jsx("caption",{ref:n,className:pe("mt-4 text-sm text-muted-foreground",t),...e}));pZe.displayName="TableCaption";const gZe=(t,e)=>{const n=De(t,e),r=n?new Date(n):null;return r&&!Number.isNaN(r.getTime())?r:null};function yZe(){const{user:t}=ct(),{data:e}=je({queryKey:["auditor-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>t?fa.runQueries(t.id,{auditLogs:{collectionName:K.AUDIT_LOGS,orderByField:"createdAt",orderDirection:"desc",limitCount:20},payrollRuns:{collectionName:K.PAYROLL_RUNS,orderByField:"createdAt",orderDirection:"desc",limitCount:10},expenses:{collectionName:K.EXPENSES,orderByField:"createdAt",orderDirection:"desc",limitCount:50},projects:{collectionName:K.PROJECTS,orderByField:"createdAt",orderDirection:"desc"}}):{auditLogs:[],payrollRuns:[],expenses:[],projects:[]}}),n=(e==null?void 0:e.auditLogs)??[],r=(e==null?void 0:e.payrollRuns)??[],s=(e==null?void 0:e.expenses)??[],a=(e==null?void 0:e.projects)??[],o=g=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(g),l=r.filter(g=>{const y=De(g,["status","payrollStatus","payroll_status"]).toLowerCase();return y==="pending"||y==="draft"}).length,c=r.filter(g=>{const y=De(g,["status","payrollStatus","payroll_status"]).toLowerCase();return y==="approved"||y==="final"}).length,u=s.reduce((g,y)=>g+Qe(y,["amount","total"]),0),d=a.filter(g=>Qe(g,["spent"])>Qe(g,["budget"])).length,h=n.length,f=s.filter(g=>Qe(g,["amount","total"])>5e3).slice(0,5),m=n.reduce((g,y)=>{const w=De(y,["action"]).toUpperCase()||"UNKNOWN";return g[w]=(g[w]||0)+1,g},{}),v=a.filter(g=>{const y=Qe(g,["budget"]),w=Qe(g,["spent"]);return(y>0?w/y*100:0)>80});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Auditor Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Compliance monitoring and audit trail overview"})]}),i.jsxs(Xe,{variant:"outline",className:"flex items-center gap-1",children:[i.jsx(eh,{className:"h-3 w-3"}),"Audit Mode"]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Pending Approvals"}),i.jsx(Ga,{className:"h-4 w-4 text-warning"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:l}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Payroll runs awaiting approval"})]})]}),i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Approved Payrolls"}),i.jsx(A8,{className:"h-4 w-4 text-success"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:c}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Successfully processed"})]})]}),i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Projects Over Budget"}),i.jsx(la,{className:"h-4 w-4 text-destructive"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:d}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Require attention"})]})]}),i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Recent Changes"}),i.jsx(Nm,{className:"h-4 w-4 text-primary"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:h}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Audit log entries (last 20)"})]})]})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(Nm,{className:"h-5 w-5"}),"Recent Activity Log"]})}),i.jsx(re,{children:i.jsx(Vd,{className:"h-[300px]",children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Action"}),i.jsx(U,{children:"Entity"}),i.jsx(U,{children:"Time"})]})}),i.jsx(Ht,{children:n.length===0?i.jsx(_e,{children:i.jsx(B,{colSpan:3,className:"text-center text-muted-foreground",children:"No audit logs found"})}):n.map(g=>{const y=De(g,["action"]).toUpperCase(),w=gZe(g,["createdAt","created_at"]);return i.jsxs(_e,{children:[i.jsx(B,{children:i.jsx(Xe,{variant:y==="DELETE"?"destructive":y==="INSERT"?"default":"secondary",children:y||"UNKNOWN"})}),i.jsx(B,{className:"font-medium",children:De(g,["tableName","table_name","entity"],"Unknown")}),i.jsx(B,{className:"text-muted-foreground",children:w?vt(w,"MMM dd, HH:mm"):"-"})]},De(g,["id"],"audit-log"))})})]})})})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(er,{className:"h-5 w-5"}),"High-Value Expenses (> ZMW 5,000)"]})}),i.jsx(re,{children:i.jsx(Vd,{className:"h-[300px]",children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Description"}),i.jsx(U,{children:"Category"}),i.jsx(U,{className:"text-right",children:"Amount"})]})}),i.jsx(Ht,{children:f.length===0?i.jsx(_e,{children:i.jsx(B,{colSpan:3,className:"text-center text-muted-foreground",children:"No high-value expenses found"})}):f.map(g=>i.jsxs(_e,{children:[i.jsx(B,{className:"font-medium max-w-[150px] truncate",children:De(g,["description"],"Expense")}),i.jsx(B,{children:i.jsx(Xe,{variant:"outline",children:De(g,["category"],"General")})}),i.jsx(B,{className:"text-right font-mono",children:o(Qe(g,["amount","total"]))})]},De(g,["id"],"expense")))})]})})})]})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(si,{className:"h-5 w-5"}),"Action Distribution"]})}),i.jsx(re,{children:i.jsxs("div",{className:"space-y-3",children:[Object.entries(m).map(([g,y])=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(Xe,{variant:g==="DELETE"?"destructive":g==="INSERT"?"default":"secondary",children:g})}),i.jsx("span",{className:"font-bold",children:y})]},g)),Object.keys(m).length===0&&i.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No actions recorded"})]})})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(Xd,{className:"h-5 w-5"}),"Project Budget Alerts"]})}),i.jsx(re,{children:i.jsx(Vd,{className:"h-[200px]",children:i.jsxs("div",{className:"space-y-3",children:[v.map(g=>{const y=Qe(g,["budget"]),w=Qe(g,["spent"]),b=y>0?w/y*100:0;return i.jsxs("div",{className:"flex items-center justify-between p-2 rounded border",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:De(g,["name"],"Project")}),i.jsx("p",{className:"text-xs text-muted-foreground",children:De(g,["code"],"-")})]}),i.jsxs(Xe,{variant:b>100?"destructive":"secondary",children:[b.toFixed(0),"% used"]})]},De(g,["id"],"project"))}),v.length===0&&i.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No budget alerts"})]})})})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"Total Expense Volume"})}),i.jsx(re,{children:i.jsx("p",{className:"text-2xl font-bold",children:o(u)})})]})]})}function vZe(){var s;const{user:t}=ct(),{data:e}=je({queryKey:["financial-manager-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalRevenue:0,totalExpenses:0,cashBalance:0,unpaidBills:0,pendingApprovals:0,pendingApprovalsAmount:0,expensesPendingApproval:0,lastPayrollGross:0,lastPayrollNet:0,bankAccounts:[],vatCollected:0};const{invoices:a,expenses:o,bills:l,bankAccounts:c,payrollRuns:u,approvalRequests:d}=await fa.runQueries(t.id,{invoices:{collectionName:K.INVOICES},expenses:{collectionName:K.EXPENSES},bills:{collectionName:K.BILLS},bankAccounts:{collectionName:K.BANK_ACCOUNTS},payrollRuns:{collectionName:K.PAYROLL_RUNS,orderByField:"createdAt",orderDirection:"desc"},approvalRequests:{collectionName:K.APPROVAL_REQUESTS}}),h=d.filter(f=>De(f,["status"])==="pending");return{totalRevenue:a.filter(f=>De(f,["status"])==="paid").reduce((f,m)=>f+Qe(m,["total","amount"]),0),totalExpenses:o.reduce((f,m)=>f+Qe(m,["amount","total"]),0),cashBalance:c.reduce((f,m)=>f+Qe(m,["currentBalance","current_balance"]),0),unpaidBills:l.filter(f=>De(f,["status"])!=="paid").reduce((f,m)=>f+Qe(m,["total","amount"]),0),pendingApprovals:h.length,pendingApprovalsAmount:h.reduce((f,m)=>f+Qe(m,["amount"]),0),expensesPendingApproval:o.filter(f=>De(f,["approvalStatus","approval_status"])==="pending").length,lastPayrollGross:u[0]?Qe(u[0],["totalGross","total_gross"]):0,lastPayrollNet:u[0]?Qe(u[0],["totalNet","total_net"]):0,bankAccounts:c,vatCollected:a.filter(f=>De(f,["status"])==="paid").reduce((f,m)=>f+Qe(m,["vatAmount","vat_amount"]),0)}}}),n=((e==null?void 0:e.totalRevenue)||0)-((e==null?void 0:e.totalExpenses)||0),r=[{title:"Total Revenue",value:le((e==null?void 0:e.totalRevenue)||0),icon:er,color:"text-green-500"},{title:"Total Expenses",value:le((e==null?void 0:e.totalExpenses)||0),icon:Ka,color:"text-destructive"},{title:"Cash Balance",value:le((e==null?void 0:e.cashBalance)||0),icon:Zd,color:"text-primary"},{title:"Pending Approvals",value:(e==null?void 0:e.pendingApprovals)||0,icon:Ik,color:"text-warning"}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Financial Manager Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Oversee all financial operations and approvals"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:r.map(a=>i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:a.title}),i.jsx(a.icon,{className:`h-4 w-4 ${a.color}`})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:a.value})})]},a.title))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(la,{className:"h-5 w-5 text-primary"}),"Profit & Loss"]})}),i.jsxs(re,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Revenue"}),i.jsx("span",{className:"font-medium text-green-600",children:le((e==null?void 0:e.totalRevenue)||0)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Expenses"}),i.jsxs("span",{className:"font-medium text-destructive",children:["(",le((e==null?void 0:e.totalExpenses)||0),")"]})]}),i.jsxs("div",{className:"border-t pt-2 flex justify-between",children:[i.jsx("span",{className:"font-semibold",children:"Net Income"}),i.jsx("span",{className:`font-bold ${n>=0?"text-green-600":"text-destructive"}`,children:le(n)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"VAT Collected"}),i.jsx("span",{className:"font-medium",children:le((e==null?void 0:e.vatCollected)||0)})]})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(Ga,{className:"h-5 w-5 text-warning"}),"Pending Actions"]})}),i.jsxs(re,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Approval Requests"}),i.jsx(Xe,{variant:e!=null&&e.pendingApprovals?"destructive":"secondary",children:(e==null?void 0:e.pendingApprovals)||0})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Approvals Value"}),i.jsx("span",{className:"font-medium",children:le((e==null?void 0:e.pendingApprovalsAmount)||0)})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Expenses Pending"}),i.jsx(Xe,{variant:e!=null&&e.expensesPendingApproval?"outline":"secondary",children:(e==null?void 0:e.expensesPendingApproval)||0})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Unpaid Bills"}),i.jsx("span",{className:"font-medium text-destructive",children:le((e==null?void 0:e.unpaidBills)||0)})]})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(Mo,{className:"h-5 w-5 text-green-500"}),"Payroll Summary"]})}),i.jsxs(re,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Last Gross Payroll"}),i.jsx("span",{className:"font-medium",children:le((e==null?void 0:e.lastPayrollGross)||0)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Last Net Payroll"}),i.jsx("span",{className:"font-medium",children:le((e==null?void 0:e.lastPayrollNet)||0)})]}),i.jsxs("div",{className:"border-t pt-2",children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Bank Accounts"}),(s=e==null?void 0:e.bankAccounts)==null?void 0:s.map(a=>i.jsxs("div",{className:"flex justify-between mt-1",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:De(a,["accountName","account_name"],"Bank Account")}),i.jsx("span",{className:"text-sm font-medium",children:le(Qe(a,["currentBalance","current_balance"]))})]},De(a,["accountName","account_name","id"],"bank-account")))]})]})]})]})]})}function xZe(){const{user:t}=ct(),{data:e}=je({queryKey:["assistant-accountant-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{draftInvoices:0,pendingInvoices:0,recentExpenses:0,totalExpenses:0,unpaidBills:0,unpaidBillsAmount:0,unpostedJournals:0,totalCustomers:0,totalVendors:0};const{invoices:r,expenses:s,bills:a,journalEntries:o,customers:l,vendors:c}=await fa.runQueries(t.id,{invoices:{collectionName:K.INVOICES},expenses:{collectionName:K.EXPENSES},bills:{collectionName:K.BILLS},journalEntries:{collectionName:K.JOURNAL_ENTRIES},customers:{collectionName:K.CUSTOMERS},vendors:{collectionName:K.VENDORS}});return{draftInvoices:r.filter(u=>De(u,["status"])==="draft").length,pendingInvoices:r.filter(u=>De(u,["status"])==="pending").length,recentExpenses:s.length,totalExpenses:s.reduce((u,d)=>u+Qe(d,["amount","total"]),0),unpaidBills:a.filter(u=>De(u,["status"])!=="paid").length,unpaidBillsAmount:a.filter(u=>De(u,["status"])!=="paid").reduce((u,d)=>u+Qe(d,["total","amount"]),0),unpostedJournals:o.filter(u=>!QQe(u,["isPosted","is_posted"])).length,totalCustomers:l.length,totalVendors:c.length}}}),n=[{title:"Draft Invoices",value:(e==null?void 0:e.draftInvoices)||0,subtitle:`${(e==null?void 0:e.pendingInvoices)||0} pending`,icon:cr},{title:"Unpaid Bills",value:(e==null?void 0:e.unpaidBills)||0,subtitle:le((e==null?void 0:e.unpaidBillsAmount)||0),icon:Xj},{title:"Total Expenses",value:le((e==null?void 0:e.totalExpenses)||0),subtitle:`${(e==null?void 0:e.recentExpenses)||0} records`,icon:Ka},{title:"Unposted Journals",value:(e==null?void 0:e.unpostedJournals)||0,subtitle:"Awaiting review",icon:Qj}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Assistant Accountant Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Data entry tasks and bookkeeping overview"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(r=>i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:r.title}),i.jsx(r.icon,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:r.value}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r.subtitle})]})]},r.title))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(Nm,{className:"h-5 w-5 text-primary"}),"Daily Tasks"]})}),i.jsxs(re,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Record new expenses"}),i.jsxs("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:[(e==null?void 0:e.recentExpenses)||0," total"]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Process draft invoices"}),i.jsxs("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:[(e==null?void 0:e.draftInvoices)||0," drafts"]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Review unposted journals"}),i.jsxs("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:[(e==null?void 0:e.unpostedJournals)||0," unposted"]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Process vendor bills"}),i.jsxs("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:[(e==null?void 0:e.unpaidBills)||0," unpaid"]})]})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(Zd,{className:"h-5 w-5 text-primary"}),"Directory"]})}),i.jsxs(re,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Customers"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.totalCustomers)||0})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Vendors"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.totalVendors)||0})]})]})]})]})]})}function bZe(){const{user:t}=ct(),{data:e}=je({queryKey:["finance-officer-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{paidInvoices:0,pendingInvoices:0,overdueInvoices:0,totalExpenses:0,pendingExpenses:0,unpaidBills:0,overdueBills:0,cashBalance:0};const{invoices:r,expenses:s,bills:a,bankAccounts:o}=await fa.runQueries(t.id,{invoices:{collectionName:K.INVOICES},expenses:{collectionName:K.EXPENSES},bills:{collectionName:K.BILLS},bankAccounts:{collectionName:K.BANK_ACCOUNTS}}),l=new Date().toISOString().split("T")[0];return{paidInvoices:r.filter(c=>De(c,["status"])==="paid").reduce((c,u)=>c+Qe(u,["total","amount"]),0),pendingInvoices:r.filter(c=>De(c,["status"])==="pending").length,overdueInvoices:r.filter(c=>{const u=De(c,["dueDate","due_date"]);return De(c,["status"])!=="paid"&&!!u&&u<l}).length,totalExpenses:s.reduce((c,u)=>c+Qe(u,["amount","total"]),0),pendingExpenses:s.filter(c=>De(c,["approvalStatus","approval_status"])==="pending").length,unpaidBills:a.filter(c=>De(c,["status"])!=="paid").reduce((c,u)=>c+Qe(u,["total","amount"]),0),overdueBills:a.filter(c=>{const u=De(c,["dueDate","due_date"]);return De(c,["status"])!=="paid"&&!!u&&u<l}).length,cashBalance:o.reduce((c,u)=>c+Qe(u,["currentBalance","current_balance"]),0)}}}),n=[{title:"Revenue Collected",value:le((e==null?void 0:e.paidInvoices)||0),icon:er},{title:"Total Expenses",value:le((e==null?void 0:e.totalExpenses)||0),icon:Ka},{title:"Unpaid Bills",value:le((e==null?void 0:e.unpaidBills)||0),icon:Xj},{title:"Cash Balance",value:le((e==null?void 0:e.cashBalance)||0),icon:Zd}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Finance Officer Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage invoices, bills, and expenses"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(r=>i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:r.title}),i.jsx(r.icon,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:r.value})})]},r.title))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(cr,{className:"h-5 w-5 text-primary"}),"Invoice Status"]})}),i.jsxs(re,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Pending Invoices"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.pendingInvoices)||0})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Overdue Invoices"}),i.jsx("span",{className:"font-medium text-destructive",children:(e==null?void 0:e.overdueInvoices)||0})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Expenses Pending Approval"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.pendingExpenses)||0})]})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(Ga,{className:"h-5 w-5 text-warning"}),"Alerts"]})}),i.jsxs(re,{className:"space-y-3",children:[((e==null?void 0:e.overdueInvoices)||0)>0&&i.jsxs("div",{className:"p-2 bg-destructive/10 rounded text-sm text-destructive",children:[e==null?void 0:e.overdueInvoices," overdue invoice(s) require follow-up"]}),((e==null?void 0:e.overdueBills)||0)>0&&i.jsxs("div",{className:"p-2 bg-warning/10 rounded text-sm text-warning",children:[e==null?void 0:e.overdueBills," overdue bill(s) need payment"]}),((e==null?void 0:e.overdueInvoices)||0)===0&&((e==null?void 0:e.overdueBills)||0)===0&&i.jsx("p",{className:"text-muted-foreground text-sm",children:"No urgent alerts"})]})]})]})]})}function wZe(){var r,s;const{user:t}=ct(),{data:e}=je({queryKey:["cashier-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{cashBalance:0,totalBalance:0,cashAccounts:[],recentReconciliations:[],recentReceipts:[],recentPayments:[],todayReceipts:0,todayPayments:0};const{bankAccounts:a,cashReconciliations:o,bankTransactions:l}=await fa.runQueries(t.id,{bankAccounts:{collectionName:K.BANK_ACCOUNTS},cashReconciliations:{collectionName:K.CASH_RECONCILIATIONS,orderByField:"reconciliationDate",orderDirection:"desc",limitCount:5},bankTransactions:{collectionName:K.BANK_TRANSACTIONS,orderByField:"createdAt",orderDirection:"desc",limitCount:10}}),c=a.filter(h=>{const f=De(h,["accountType","account_type"]);return f==="cash"||f==="petty_cash"}),u=l.filter(h=>De(h,["transactionType","transaction_type"])==="deposit"),d=l.filter(h=>De(h,["transactionType","transaction_type"])==="withdrawal");return{cashBalance:c.reduce((h,f)=>h+Qe(f,["currentBalance","current_balance"]),0),totalBalance:a.reduce((h,f)=>h+Qe(f,["currentBalance","current_balance"]),0),cashAccounts:c,recentReconciliations:o,recentReceipts:u,recentPayments:d,todayReceipts:u.reduce((h,f)=>h+Qe(f,["amount"]),0),todayPayments:d.reduce((h,f)=>h+Qe(f,["amount"]),0)}}}),n=[{title:"Cash on Hand",value:le((e==null?void 0:e.cashBalance)||0),icon:Ra,color:"text-green-500"},{title:"Total Balance",value:le((e==null?void 0:e.totalBalance)||0),icon:aoe,color:"text-primary"},{title:"Recent Receipts",value:le((e==null?void 0:e.todayReceipts)||0),icon:IL,color:"text-green-500"},{title:"Recent Payments",value:le((e==null?void 0:e.todayPayments)||0),icon:doe,color:"text-destructive"}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Cashier Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Cash transactions and petty cash management"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(a=>i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:a.title}),i.jsx(a.icon,{className:`h-4 w-4 ${a.color}`})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:a.value})})]},a.title))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(IL,{className:"h-5 w-5 text-green-500"}),"Recent Receipts"]})}),i.jsx(re,{children:i.jsx("div",{className:"space-y-2",children:(r=e==null?void 0:e.recentReceipts)!=null&&r.length?e.recentReceipts.map((a,o)=>i.jsxs("div",{className:"flex justify-between items-center text-sm",children:[i.jsx("span",{className:"text-muted-foreground truncate max-w-[60%]",children:De(a,["description"],"Deposit")}),i.jsx("span",{className:"font-medium text-green-600",children:le(Qe(a,["amount"]))})]},o)):i.jsx("p",{className:"text-muted-foreground text-sm",children:"No recent receipts"})})})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(foe,{className:"h-5 w-5 text-primary"}),"Recent Reconciliations"]})}),i.jsx(re,{children:i.jsx("div",{className:"space-y-2",children:(s=e==null?void 0:e.recentReconciliations)!=null&&s.length?e.recentReconciliations.map(a=>i.jsxs("div",{className:"flex justify-between items-center text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:De(a,["reconciliationDate","reconciliation_date"],"-")}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium",children:le(Qe(a,["closingBalance","closing_balance"]))}),i.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${De(a,["status"])==="approved"?"bg-green-100 text-green-700":"bg-muted text-muted-foreground"}`,children:De(a,["status"],"pending")})]})]},De(a,["id"],"reconciliation"))):i.jsx("p",{className:"text-muted-foreground text-sm",children:"No reconciliations yet"})})})]})]})]})}function _Ze(){return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Staff Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Your personal workspace"})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Time Tracking"}),i.jsx(Pi,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:""}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Log your hours"})]})]}),i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"My Payslips"}),i.jsx(cr,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:""}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"View payslip history"})]})]}),i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Leave Balance"}),i.jsx(coe,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:""}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Days remaining"})]})]}),i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"My Profile"}),i.jsx(O8,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:""}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"View personal info"})]})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"Welcome"})}),i.jsx(re,{children:i.jsx("p",{className:"text-muted-foreground",children:"Use the sidebar to access time tracking and view your information. Contact your HR manager for any employment-related queries."})})]})]})}function y6(){const{user:t}=ct(),{data:e}=je({queryKey:["readonly-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalRevenue:0,totalExpenses:0,invoiceCount:0};const{invoices:r,expenses:s}=await fa.runQueries(t.id,{invoices:{collectionName:K.INVOICES},expenses:{collectionName:K.EXPENSES}});return{totalRevenue:r.filter(a=>De(a,["status"])==="paid").reduce((a,o)=>a+Qe(o,["total","grandTotal","amount"]),0),totalExpenses:s.reduce((a,o)=>a+Qe(o,["amount","total"]),0),invoiceCount:r.length}}}),n=((e==null?void 0:e.totalRevenue)||0)-((e==null?void 0:e.totalExpenses)||0);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),i.jsxs("p",{className:"text-muted-foreground flex items-center gap-1",children:[i.jsx(moe,{className:"h-4 w-4"})," View-only access"]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Total Revenue"}),i.jsx(er,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:le((e==null?void 0:e.totalRevenue)||0)})})]}),i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Total Expenses"}),i.jsx(Ka,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:le((e==null?void 0:e.totalExpenses)||0)})})]}),i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Net Income"}),i.jsx(la,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:`text-2xl font-bold ${n>=0?"text-green-600":"text-destructive"}`,children:le(n)})})]}),i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Total Invoices"}),i.jsx(si,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:(e==null?void 0:e.invoiceCount)||0})})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"Read-Only Access"})}),i.jsx(re,{children:i.jsx("p",{className:"text-muted-foreground",children:"You have view-only access to this system. Contact your administrator to request additional permissions."})})]})]})}function jZe(){const{data:t,isLoading:e}=$N();if(e)return i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});switch(t){case"super_admin":case"admin":return i.jsx(XQe,{});case"financial_manager":return i.jsx(vZe,{});case"accountant":return i.jsx(ZQe,{});case"assistant_accountant":return i.jsx(xZe,{});case"finance_officer":return i.jsx(bZe,{});case"bookkeeper":return i.jsx(JQe,{});case"cashier":return i.jsx(wZe,{});case"hr_manager":return i.jsx(sZe,{});case"inventory_manager":return i.jsx(iZe,{});case"project_manager":return i.jsx(fZe,{});case"auditor":return i.jsx(yZe,{});case"staff":return i.jsx(_Ze,{});case"read_only":return i.jsx(y6,{});default:return i.jsx(y6,{})}}const NZe=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},v6=t=>{if(!t)return"";if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return""};function SZe(){const[t,e]=N.useState(""),{user:n}=ct(),{data:r,isLoading:s}=je({queryKey:["invoices",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const l=await Ke.getPrimaryMembershipByUser(n.id);if(!(l!=null&&l.companyId))return[];const c=ve(te,K.INVOICES),d=(await $e(Ce(c,ge("companyId","==",l.companyId)))).docs.map(m=>{const v=m.data();return{id:m.id,invoiceNumber:String(v.invoiceNumber??v.invoice_number??""),invoiceDate:v6(v.invoiceDate??v.invoice_date),dueDate:v6(v.dueDate??v.due_date)||null,customerId:v.customerId??v.customer_id??null,customerName:"-",total:Number(v.total??0),status:String(v.status??"draft")}}),h=Array.from(new Set(d.map(m=>m.customerId).filter(Boolean))),f=new Map;if(h.length>0){const m=ve(te,K.CUSTOMERS),v=NZe(h,30);(await Promise.all(v.map(y=>$e(Ce(m,ge(kh(),"in",y)))))).forEach(y=>{y.docs.forEach(w=>{const b=w.data();f.set(w.id,String(b.name??"-"))})})}return d.map(m=>({...m,customerName:m.customerId&&f.get(m.customerId)||"-"})).sort((m,v)=>String(v.invoiceDate).localeCompare(String(m.invoiceDate)))},enabled:!!n}),a=l=>{switch(l){case"paid":return"default";case"sent":return"secondary";case"overdue":return"destructive";case"draft":return"outline";default:return"secondary"}},o=r==null?void 0:r.filter(l=>l.invoiceNumber.toLowerCase().includes(t.toLowerCase())||l.customerName.toLowerCase().includes(t.toLowerCase()));return s?i.jsx("div",{children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Invoices"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage customer invoices and payments"})]}),i.jsx(Oa,{to:"/invoices/new",children:i.jsxs(H,{className:"gap-2",children:[i.jsx(bn,{className:"h-4 w-4"}),"New Invoice"]})})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ne,{children:"All Invoices"}),i.jsxs("div",{className:"relative w-64",children:[i.jsx(fi,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"Search invoices...",value:t,onChange:l=>e(l.target.value),className:"pl-8"})]})]})}),i.jsx(re,{children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Invoice #"}),i.jsx(U,{children:"Date"}),i.jsx(U,{children:"Customer"}),i.jsx(U,{children:"Due Date"}),i.jsx(U,{className:"text-right",children:"Amount"}),i.jsx(U,{children:"Status"})]})}),i.jsxs(Ht,{children:[o==null?void 0:o.map(l=>i.jsxs(_e,{children:[i.jsx(B,{className:"font-medium",children:l.invoiceNumber}),i.jsx(B,{children:l.invoiceDate?vt(new Date(l.invoiceDate),"dd MMM yyyy"):"-"}),i.jsx(B,{children:l.customerName||"-"}),i.jsx(B,{children:l.dueDate?vt(new Date(l.dueDate),"dd MMM yyyy"):"-"}),i.jsxs(B,{className:"text-right font-medium",children:["ZMW ",l.total.toFixed(2)]}),i.jsx(B,{children:i.jsx(Xe,{variant:a(l.status||"draft"),children:l.status})})]},l.id)),(o==null?void 0:o.length)===0&&i.jsx(_e,{children:i.jsx(B,{colSpan:6,className:"text-center text-muted-foreground",children:"No invoices found"})})]})]})})]})]})}const hr=N.forwardRef(({className:t,...e},n)=>i.jsx("textarea",{className:pe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));hr.displayName="Textarea";function Gu(){const{user:t,isAuthenticated:e}=ct();return je({queryKey:["company-settings",t==null?void 0:t.id],queryFn:async()=>{if(!t||!Co)return null;const n=await Ke.getPrimaryMembershipByUser(t.id);return n?Ke.getCompanySettings(n.companyId):null},enabled:e&&!!t})}function EZe(t){const e=dn(),{data:n,isLoading:r}=je({queryKey:["zra-status",t],queryFn:async()=>null,enabled:!!t}),s=ot({mutationFn:async o=>Xn("zraSmartInvoice",{action:"submit_invoice",invoiceId:o}),onSuccess:o=>{o.success?(J.success(`Invoice submitted to ZRA: ${o.zra_invoice_number??"Submitted"}`),e.invalidateQueries({queryKey:["invoices"]}),e.invalidateQueries({queryKey:["zra-status"]})):J.warning(o.message||"Invoice queued for ZRA submission")},onError:o=>{J.error(o.message||"Failed to submit to ZRA")}}),a=ot({mutationFn:async()=>Xn("zraSmartInvoice",{action:"retry_pending"}),onSuccess:o=>{J.success(`Processed ${o.processed??0} pending invoices`),e.invalidateQueries({queryKey:["invoices"]}),e.invalidateQueries({queryKey:["zra-status"]})},onError:o=>{J.error(o.message||"Failed to retry pending invoices")}});return{zraStatus:n,isLoadingStatus:r,submitToZRA:s,retryPending:a,isSubmitting:s.isPending,isRetrying:a.isPending}}function AZe(){const{user:t}=ct(),e=Gn(),n=dn(),[r]=qq(),s=r.get("customer"),{data:a}=Gu(),{submitToZRA:o,isSubmitting:l}=EZe(),[c,u]=N.useState(s||""),[d,h]=N.useState(`INV-${Date.now()}`),[f,m]=N.useState(new Date().toISOString().split("T")[0]),[v,g]=N.useState(""),[y,w]=N.useState(""),[b,E]=N.useState(""),[T,x]=N.useState(!0),[S,_]=N.useState([{id:"1",description:"",quantity:1,rate:0,amount:0}]),{data:p}=je({queryKey:["customers",t==null?void 0:t.id],queryFn:async()=>{if(!t)return[];const Y=await Ke.getPrimaryMembershipByUser(t.id);return Y!=null&&Y.companyId?(await $e(Ce(ve(te,K.CUSTOMERS),ge("companyId","==",Y.companyId)))).docs.map(oe=>{const me=oe.data();return{id:oe.id,name:String(me.name??"")}}).sort((oe,me)=>oe.name.localeCompare(me.name)):[]},enabled:!!t}),{data:A}=je({queryKey:["new-invoice-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const Y=await Ke.getPrimaryMembershipByUser(t.id);return(Y==null?void 0:Y.companyId)??null},enabled:!!t}),P=(a==null?void 0:a.isVatRegistered)||!1,C=(a==null?void 0:a.vatRate)||16,I=()=>{_([...S,{id:Date.now().toString(),description:"",quantity:1,rate:0,amount:0}])},R=Y=>{S.length>1&&_(S.filter(ae=>ae.id!==Y))},L=(Y,ae,oe)=>{_(S.map(me=>{if(me.id===Y){const ke={...me,[ae]:oe};return(ae==="quantity"||ae==="rate")&&(ke.amount=ke.quantity*ke.rate),ke}return me}))},z=S.reduce((Y,ae)=>Y+ae.amount,0),W=P?z*(C/100):0,M=z+W,V=ot({mutationFn:async Y=>{if(!A||!t)throw new Error("No company context found");const ae=await Nn(ve(te,K.INVOICES),{companyId:A,customerId:c||null,invoiceNumber:d,invoiceDate:f,dueDate:v||null,subtotal:z,vatAmount:W,total:M,status:Y,notes:y,terms:b,zraStatus:P&&T&&Y==="sent"?"pending":null,createdBy:t.id,createdAt:ye(),updatedAt:ye()}),oe=S.filter(me=>me.description).map(me=>({companyId:A,invoiceId:ae.id,description:me.description,quantity:me.quantity,unitPrice:me.rate,amount:me.amount,createdAt:ye()}));return oe.length>0&&await Promise.all(oe.map(me=>Nn(ve(te,K.INVOICE_ITEMS),me))),{id:ae.id,status:Y}},onSuccess:async(Y,ae)=>{if(P&&T&&ae==="sent")try{await o.mutateAsync(Y.id)}catch{console.log("ZRA submission queued for retry")}if(ae==="sent")try{await iNe.postInvoiceToGL(Y.id)}catch{}n.invalidateQueries({queryKey:["invoices"]}),J.success(ae==="sent"?"Invoice sent successfully":"Invoice saved as draft"),e("/invoices")},onError:Y=>{J.error("Failed to save invoice: "+Y.message)}}),F=(Y=!1)=>{V.mutate(Y?"sent":"draft")};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"New Invoice"}),i.jsxs("p",{className:"text-muted-foreground",children:["Create a new invoice for a customer",P&&i.jsxs("span",{className:"ml-2 text-xs bg-primary/10 text-primary px-2 py-0.5 rounded",children:["VAT ",C,"%"]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(H,{variant:"outline",onClick:()=>e("/invoices"),children:"Cancel"}),i.jsxs(H,{variant:"outline",className:"gap-2",onClick:()=>F(!1),disabled:V.isPending,children:[i.jsx(Jd,{className:"h-4 w-4"}),"Save Draft"]}),i.jsxs(H,{className:"gap-2",onClick:()=>F(!0),disabled:V.isPending,children:[i.jsx(R8,{className:"h-4 w-4"}),"Save & Send"]})]})]}),i.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"Invoice Details"})}),i.jsx(re,{className:"space-y-4",children:i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"customer",children:"Customer *"}),i.jsxs(kt,{value:c,onValueChange:u,children:[i.jsx(At,{id:"customer",children:i.jsx(Rt,{placeholder:"Select customer"})}),i.jsx(Tt,{children:p==null?void 0:p.map(Y=>i.jsx(be,{value:Y.id,children:Y.name},Y.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"invoiceNumber",children:"Invoice Number *"}),i.jsx(G,{id:"invoiceNumber",value:d,onChange:Y=>h(Y.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"invoiceDate",children:"Invoice Date *"}),i.jsx(G,{id:"invoiceDate",type:"date",value:f,onChange:Y=>m(Y.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"dueDate",children:"Due Date"}),i.jsx(G,{id:"dueDate",type:"date",value:v,onChange:Y=>g(Y.target.value)})]})]})})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"Line Items"})}),i.jsx(re,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-12 text-sm font-medium text-muted-foreground",children:[i.jsx("div",{className:"md:col-span-5",children:"Description"}),i.jsx("div",{className:"md:col-span-2",children:"Qty"}),i.jsx("div",{className:"md:col-span-2",children:"Rate (ZMW)"}),i.jsx("div",{className:"md:col-span-2",children:"Amount"}),i.jsx("div",{className:"md:col-span-1"})]}),S.map(Y=>i.jsxs("div",{className:"grid gap-4 md:grid-cols-12 items-start",children:[i.jsx("div",{className:"md:col-span-5",children:i.jsx(hr,{placeholder:"Description",value:Y.description,onChange:ae=>L(Y.id,"description",ae.target.value),rows:2})}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(G,{type:"number",placeholder:"Qty",value:Y.quantity,onChange:ae=>L(Y.id,"quantity",parseFloat(ae.target.value)||0),min:"0",step:"0.01"})}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(G,{type:"number",placeholder:"Rate",value:Y.rate,onChange:ae=>L(Y.id,"rate",parseFloat(ae.target.value)||0),min:"0",step:"0.01"})}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(G,{value:`ZMW ${Y.amount.toFixed(2)}`,disabled:!0,className:"bg-muted"})}),i.jsx("div",{className:"md:col-span-1",children:i.jsx(H,{type:"button",variant:"ghost",size:"icon",onClick:()=>R(Y.id),disabled:S.length===1,children:i.jsx(Ts,{className:"h-4 w-4"})})})]},Y.id)),i.jsxs(H,{type:"button",variant:"outline",className:"gap-2",onClick:I,children:[i.jsx(bn,{className:"h-4 w-4"}),"Add Line"]})]})})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"Notes & Terms"})}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"notes",children:"Notes (visible to customer)"}),i.jsx(hr,{id:"notes",placeholder:"Add any notes or special instructions",rows:3,value:y,onChange:Y=>w(Y.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"terms",children:"Terms & Conditions"}),i.jsx(hr,{id:"terms",placeholder:"Payment terms and conditions",rows:3,value:b,onChange:Y=>E(Y.target.value)})]})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"Summary"})}),i.jsxs(re,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),i.jsxs("span",{className:"font-medium",children:["ZMW ",z.toFixed(2)]})]}),P&&i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsxs("span",{className:"text-muted-foreground",children:["VAT (",C,"%)"]}),i.jsxs("span",{className:"font-medium",children:["ZMW ",W.toFixed(2)]})]}),i.jsxs("div",{className:"border-t pt-3 flex justify-between",children:[i.jsx("span",{className:"font-semibold",children:"Total"}),i.jsxs("span",{className:"text-xl font-bold text-primary",children:["ZMW ",M.toFixed(2)]})]})]})]}),P&&i.jsx(Z,{className:"border-primary/20 bg-primary/5",children:i.jsxs(re,{className:"pt-4 space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(A8,{className:"h-4 w-4 text-primary"}),i.jsx("span",{className:"font-medium text-sm",children:"ZRA Smart Invoice"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm",children:"Submit to ZRA on send"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Invoice will be submitted for ZRA approval"})]}),i.jsx(is,{checked:T,onCheckedChange:x})]}),l&&i.jsxs(Xe,{variant:"outline",className:"animate-pulse",children:[i.jsx(Ci,{className:"h-3 w-3 mr-1"}),"Submitting to ZRA..."]})]})}),!P&&i.jsx(Z,{className:"bg-muted/50",children:i.jsx(re,{className:"pt-4",children:i.jsxs("p",{className:"text-sm text-muted-foreground",children:["VAT is not applied. To enable VAT, go to"," ",i.jsx(H,{variant:"link",className:"p-0 h-auto",onClick:()=>e("/settings"),children:"Settings"})," ","and enable VAT registration."]})})})]})]})]})}function TZe(){const t=Gn(),{user:e}=ct(),{data:n,isLoading:r,refetch:s}=je({queryKey:["employees",e==null?void 0:e.id],queryFn:async()=>{if(!e)return[];const o=await Ke.getPrimaryMembershipByUser(e.id);if(!(o!=null&&o.companyId))return[];const l=ve(te,K.EMPLOYEES),u=(await $e(Ce(l,ge("companyId","==",o.companyId)))).docs.map(d=>{const h=d.data();return{id:d.id,employeeNumber:String(h.employeeNumber??h.employee_number??""),fullName:String(h.fullName??h.full_name??""),position:h.position??null,department:h.department??null,basicSalary:Number(h.basicSalary??h.basic_salary??0),employmentStatus:String(h.employmentStatus??h.employment_status??"active")}});return u.sort((d,h)=>d.fullName.localeCompare(h.fullName)),u},enabled:!!e}),a=async o=>{if(confirm("Are you sure you want to delete this employee?"))try{await Za(He(te,K.EMPLOYEES,o)),J.success("Employee deleted successfully"),s()}catch{J.error("Failed to delete employee")}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Employees"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your employee records"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(H,{variant:"outline",onClick:()=>t("/employees/bulk-upload"),children:[i.jsx(zo,{className:"mr-2 h-4 w-4"}),"Bulk Upload"]}),i.jsxs(H,{onClick:()=>t("/employees/new"),children:[i.jsx(bn,{className:"mr-2 h-4 w-4"}),"Add Employee"]})]})]}),r?i.jsx("div",{children:"Loading..."}):i.jsx("div",{className:"border rounded-lg",children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Employee #"}),i.jsx(U,{children:"Name"}),i.jsx(U,{children:"Position"}),i.jsx(U,{children:"Department"}),i.jsx(U,{children:"Basic Salary"}),i.jsx(U,{children:"Status"}),i.jsx(U,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ht,{children:[n==null?void 0:n.map(o=>i.jsxs(_e,{children:[i.jsx(B,{className:"font-medium",children:o.employeeNumber}),i.jsx(B,{children:o.fullName}),i.jsx(B,{children:o.position||"-"}),i.jsx(B,{children:o.department||"-"}),i.jsx(B,{children:le(o.basicSalary)}),i.jsx(B,{children:i.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${o.employmentStatus==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:o.employmentStatus})}),i.jsxs(B,{className:"text-right",children:[i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>t(`/employees/${o.id}/edit`),children:i.jsx(_p,{className:"h-4 w-4"})}),i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>a(o.id),children:i.jsx(Ts,{className:"h-4 w-4"})})]})]},o.id)),(n==null?void 0:n.length)===0&&i.jsx(_e,{children:i.jsx(B,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No employees found. Add your first employee to get started."})})]})]})})]})}const Q1=uNe,yne=N.createContext({}),rt=({...t})=>i.jsx(yne.Provider,{value:{name:t.name},children:i.jsx(mNe,{...t})}),X1=()=>{const t=N.useContext(yne),e=N.useContext(vne),{getFieldState:n,formState:r}=HN(),s=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:a}=e;return{id:a,name:t.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...s}},vne=N.createContext({}),tt=N.forwardRef(({className:t,...e},n)=>{const r=N.useId();return i.jsx(vne.Provider,{value:{id:r},children:i.jsx("div",{ref:n,className:pe("space-y-2",t),...e})})});tt.displayName="FormItem";const st=N.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:s}=X1();return i.jsx(X,{ref:n,className:pe(r&&"text-destructive",t),htmlFor:s,...e})});st.displayName="FormLabel";const nt=N.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:s,formMessageId:a}=X1();return i.jsx(Ah,{ref:e,id:r,"aria-describedby":n?`${s} ${a}`:`${s}`,"aria-invalid":!!n,...t})});nt.displayName="FormControl";const qd=N.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=X1();return i.jsx("p",{ref:n,id:r,className:pe("text-sm text-muted-foreground",t),...e})});qd.displayName="FormDescription";const it=N.forwardRef(({className:t,children:e,...n},r)=>{const{error:s,formMessageId:a}=X1(),o=s?String(s==null?void 0:s.message):e;return o?i.jsx("p",{ref:r,id:a,className:pe("text-sm font-medium text-destructive",t),...n,children:o}):null});it.displayName="FormMessage";var Z1="Tabs",[CZe,itt]=ds(Z1,[kN]),xne=kN(),[PZe,EM]=CZe(Z1),bne=N.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=zx(l),[h,f]=Ha({prop:r,onChange:s,defaultProp:a??"",caller:Z1});return i.jsx(PZe,{scope:n,baseId:ea(),value:h,onValueChange:f,orientation:o,dir:d,activationMode:c,children:i.jsx(Je.div,{dir:d,"data-orientation":o,...u,ref:e})})});bne.displayName=Z1;var wne="TabsList",_ne=N.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,a=EM(wne,n),o=xne(n);return i.jsx(G7,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:i.jsx(Je.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:e})})});_ne.displayName=wne;var jne="TabsTrigger",Nne=N.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=t,o=EM(jne,n),l=xne(n),c=Ane(o.baseId,r),u=Tne(o.baseId,r),d=r===o.value;return i.jsx(Y7,{asChild:!0,...l,focusable:!s,active:d,children:i.jsx(Je.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...a,ref:e,onMouseDown:Pe(t.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:Pe(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:Pe(t.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!s&&h&&o.onValueChange(r)})})})});Nne.displayName=jne;var Sne="TabsContent",Ene=N.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...o}=t,l=EM(Sne,n),c=Ane(l.baseId,r),u=Tne(l.baseId,r),d=r===l.value,h=N.useRef(d);return N.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),i.jsx(hs,{present:s||d,children:({present:f})=>i.jsx(Je.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:f&&a})})});Ene.displayName=Sne;function Ane(t,e){return`${t}-trigger-${e}`}function Tne(t,e){return`${t}-content-${e}`}var IZe=bne,Cne=_ne,Pne=Nne,Ine=Ene;const J1=IZe,lb=N.forwardRef(({className:t,...e},n)=>i.jsx(Cne,{ref:n,className:pe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));lb.displayName=Cne.displayName;const za=N.forwardRef(({className:t,...e},n)=>i.jsx(Pne,{ref:n,className:pe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...e}));za.displayName=Pne.displayName;const qa=N.forwardRef(({className:t,...e},n)=>i.jsx(Ine,{ref:n,className:pe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));qa.displayName=Ine.displayName;function kZe({form:t}){return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(rt,{control:t.control,name:"employee_number",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Employee No *"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"EMP001",...e})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"nrc_number",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"NRC/ID Number"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"123456/78/1",...e})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"tpin",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"TPIN"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"1234567890",maxLength:10,...e})}),i.jsx(it,{})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(rt,{control:t.control,name:"napsa_number",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"NAPSA No"}),i.jsx(nt,{children:i.jsx(G,{...e})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"nhima_number",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"NHIMA No"}),i.jsx(nt,{children:i.jsx(G,{...e})}),i.jsx(it,{})]})})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Personal Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(rt,{control:t.control,name:"full_name",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Full Name *"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"John Doe",...e})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"date_of_birth",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Date of Birth"}),i.jsx(nt,{children:i.jsx(G,{type:"date",...e})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"gender",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Gender"}),i.jsxs(kt,{onValueChange:e.onChange,value:e.value,children:[i.jsx(nt,{children:i.jsx(At,{children:i.jsx(Rt,{placeholder:"Select gender"})})}),i.jsxs(Tt,{children:[i.jsx(be,{value:"male",children:"Male"}),i.jsx(be,{value:"female",children:"Female"}),i.jsx(be,{value:"other",children:"Other"})]})]}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"nationality",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Nationality"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"Zambian",...e})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"marital_status",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Marital Status"}),i.jsxs(kt,{onValueChange:e.onChange,value:e.value,children:[i.jsx(nt,{children:i.jsx(At,{children:i.jsx(Rt,{placeholder:"Select status"})})}),i.jsxs(Tt,{children:[i.jsx(be,{value:"single",children:"Single"}),i.jsx(be,{value:"married",children:"Married"}),i.jsx(be,{value:"divorced",children:"Divorced"}),i.jsx(be,{value:"widowed",children:"Widowed"})]})]}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"phone",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Phone"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"+260 9X XXX XXXX",...e})}),i.jsx(it,{})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-4 mt-4",children:[i.jsx(rt,{control:t.control,name:"address",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Address"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"123 Main Street, Lusaka",...e})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"email",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Email (for payslips)"}),i.jsx(nt,{children:i.jsx(G,{type:"email",placeholder:"john.doe@example.com",...e})}),i.jsx(it,{})]})})]})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Organization"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsx(rt,{control:t.control,name:"department",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Department"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"Finance",...e})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"division",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Division"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"Operations",...e})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"position",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Job Title"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"Accountant",...e})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"job_grade",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Grade"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"Grade 5",...e})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"cost_centre",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Cost Centre"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"CC001",...e})}),i.jsx(it,{})]})})]})]})]})}const RZe=Th("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),gp=N.forwardRef(({className:t,variant:e,...n},r)=>i.jsx("div",{ref:r,role:"alert",className:pe(RZe({variant:e}),t),...n}));gp.displayName="Alert";const kne=N.forwardRef(({className:t,...e},n)=>i.jsx("h5",{ref:n,className:pe("mb-1 font-medium leading-none tracking-tight",t),...e}));kne.displayName="AlertTitle";const yp=N.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:pe("text-sm [&_p]:leading-relaxed",t),...e}));yp.displayName="AlertDescription";function OZe({form:t}){const e=t.watch("contract_type"),n=e==="consultant";return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(rt,{control:t.control,name:"contract_type",render:({field:r})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Employment Type *"}),i.jsxs(kt,{onValueChange:r.onChange,value:r.value,children:[i.jsx(nt,{children:i.jsx(At,{children:i.jsx(Rt,{placeholder:"Select type"})})}),i.jsxs(Tt,{children:[i.jsx(be,{value:"permanent",children:"Permanent"}),i.jsx(be,{value:"fixed-term",children:"Fixed-Term Contract"}),i.jsx(be,{value:"temporary",children:"Temporary"}),i.jsx(be,{value:"internship",children:"Internship"}),i.jsx(be,{value:"consultant",children:"Consultant"})]})]}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"employment_status",render:({field:r})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Status"}),i.jsxs(kt,{onValueChange:r.onChange,value:r.value||"active",children:[i.jsx(nt,{children:i.jsx(At,{children:i.jsx(Rt,{})})}),i.jsxs(Tt,{children:[i.jsx(be,{value:"active",children:"Active"}),i.jsx(be,{value:"inactive",children:"Inactive"}),i.jsx(be,{value:"terminated",children:"Terminated"}),i.jsx(be,{value:"on_leave",children:"On Leave"})]})]}),i.jsx(it,{})]})})]}),n&&i.jsxs(gp,{children:[i.jsx(Ci,{className:"h-4 w-4"}),i.jsxs(yp,{children:[i.jsx("strong",{children:"Consultant:"})," PAYE, NAPSA, and NHIMA will be disabled. Withholding Tax (WHT) will apply based on consultant type."]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(rt,{control:t.control,name:"employment_date",render:({field:r})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Engagement Date *"}),i.jsx(nt,{children:i.jsx(G,{type:"date",...r})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"contract_end_date",render:({field:r})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Contract End Date"}),i.jsx(nt,{children:i.jsx(G,{type:"date",...r})}),i.jsx(it,{})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(rt,{control:t.control,name:"currency",render:({field:r})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Currency"}),i.jsxs(kt,{onValueChange:r.onChange,value:r.value||"ZMW",children:[i.jsx(nt,{children:i.jsx(At,{children:i.jsx(Rt,{})})}),i.jsxs(Tt,{children:[i.jsx(be,{value:"ZMW",children:"ZMW - Zambian Kwacha"}),i.jsx(be,{value:"USD",children:"USD - US Dollar"}),i.jsx(be,{value:"EUR",children:"EUR - Euro"}),i.jsx(be,{value:"GBP",children:"GBP - British Pound"})]})]}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"pay_point",render:({field:r})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Pay Point"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"Head Office",...r})}),i.jsx(it,{})]})})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Bank Details"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(rt,{control:t.control,name:"bank_name",render:({field:r})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Bank Name"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"Zanaco",...r})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"bank_branch",render:({field:r})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Branch"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"Cairo Road",...r})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"bank_account_number",render:({field:r})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Account Number"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"1234567890",...r})}),i.jsx(it,{})]})})]})]}),(e==="fixed-term"||e==="consultant")&&i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Contract Options"}),i.jsx(rt,{control:t.control,name:"has_gratuity",render:({field:r})=>i.jsxs(tt,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx(st,{className:"text-base",children:"Attracts Gratuity"}),i.jsx(qd,{children:"Enable if this contract includes gratuity payment at end"})]}),i.jsx(nt,{children:i.jsx(is,{checked:r.value,onCheckedChange:r.onChange})})]})}),t.watch("has_gratuity")&&i.jsx("div",{className:"mt-4",children:i.jsx(rt,{control:t.control,name:"gratuity_rate",render:({field:r})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Gratuity Rate (%)"}),i.jsx(nt,{children:i.jsx(G,{type:"number",step:"0.01",placeholder:"25",...r})}),i.jsx(qd,{children:"Standard rate is 25% of total basic pay earned"}),i.jsx(it,{})]})})})]})]})}function MZe({form:t}){const e=Number(t.watch("basic_salary"))||0,n=Number(t.watch("housing_allowance"))||0,r=Number(t.watch("transport_allowance"))||0,s=Number(t.watch("other_allowances"))||0,a=e+n+r+s;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(rt,{control:t.control,name:"rate_type",render:({field:o})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Rate Type"}),i.jsxs(kt,{onValueChange:o.onChange,value:o.value||"monthly",children:[i.jsx(nt,{children:i.jsx(At,{children:i.jsx(Rt,{})})}),i.jsxs(Tt,{children:[i.jsx(be,{value:"monthly",children:"Monthly"}),i.jsx(be,{value:"daily",children:"Daily"}),i.jsx(be,{value:"hourly",children:"Hourly"})]})]}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"basic_salary",render:({field:o})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Basic Pay (ZMW) *"}),i.jsx(nt,{children:i.jsx(G,{type:"number",step:"0.01",placeholder:"5000.00",...o})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"pay_rate",render:({field:o})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Pay Rate"}),i.jsx(nt,{children:i.jsx(G,{type:"number",step:"0.01",placeholder:"Rate per period",...o})}),i.jsx(qd,{children:"Optional alternative rate"}),i.jsx(it,{})]})})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Allowances"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(rt,{control:t.control,name:"housing_allowance",render:({field:o})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Housing Allowance (ZMW)"}),i.jsx(nt,{children:i.jsx(G,{type:"number",step:"0.01",placeholder:"1500.00",...o})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"transport_allowance",render:({field:o})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Transport Allowance (ZMW)"}),i.jsx(nt,{children:i.jsx(G,{type:"number",step:"0.01",placeholder:"500.00",...o})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"other_allowances",render:({field:o})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Other Allowances (ZMW)"}),i.jsx(nt,{children:i.jsx(G,{type:"number",step:"0.01",placeholder:"0.00",...o})}),i.jsx(qd,{children:"Meal, medical, or other fixed allowances"}),i.jsx(it,{})]})})]})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Overtime Rates"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.jsx(rt,{control:t.control,name:"overtime_rate_multiplier",render:({field:o})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Overtime Multiplier"}),i.jsx(nt,{children:i.jsx(G,{type:"number",step:"0.1",placeholder:"1.5",...o})}),i.jsx(qd,{children:"e.g., 1.5 = time and a half"}),i.jsx(it,{})]})})})]}),i.jsxs(Z,{className:"bg-muted/50",children:[i.jsx(ee,{children:i.jsx(ne,{className:"text-lg",children:"Pay Summary"})}),i.jsx(re,{children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Basic Salary"}),i.jsx("p",{className:"text-lg font-semibold",children:le(e)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Housing"}),i.jsx("p",{className:"text-lg font-semibold",children:le(n)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Transport"}),i.jsx("p",{className:"text-lg font-semibold",children:le(r)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Gross Salary"}),i.jsx("p",{className:"text-xl font-bold text-primary",children:le(a)})]})]})})]})]})}const DZe=Vu({employee_number:Ue().min(1,"Employee number is required"),nrc_number:Ue().optional(),tpin:Ue().optional(),napsa_number:Ue().optional(),nhima_number:Ue().optional(),full_name:Ue().min(1,"Full name is required"),date_of_birth:Ue().optional(),gender:Ue().optional(),nationality:Ue().optional(),marital_status:Ue().optional(),phone:Ue().optional(),address:Ue().optional(),email:Ue().email().optional().or(xY("")),department:Ue().optional(),division:Ue().optional(),position:Ue().optional(),job_grade:Ue().optional(),cost_centre:Ue().optional(),contract_type:Ue().optional(),employment_status:Ue().default("active"),employment_date:Ue().min(1,"Employment date is required"),contract_end_date:Ue().optional(),currency:Ue().default("ZMW"),pay_point:Ue().optional(),bank_name:Ue().optional(),bank_branch:Ue().optional(),bank_account_number:Ue().optional(),has_gratuity:VF().default(!1),gratuity_rate:Ue().optional(),rate_type:Ue().default("monthly"),basic_salary:Ue().min(1,"Basic salary is required"),pay_rate:Ue().optional(),housing_allowance:Ue().optional(),transport_allowance:Ue().optional(),other_allowances:Ue().optional(),overtime_rate_multiplier:Ue().optional(),send_invite:VF().default(!1)});function LZe(){const t=Gn(),{data:e}=Gu(),{user:n}=ct(),[r,s]=N.useState("personal"),[a,o]=N.useState(!1),l=$u({resolver:Fu(DZe),defaultValues:{employment_status:"active",has_gratuity:!1,send_invite:!1,currency:"ZMW",rate_type:"monthly",nationality:"Zambian"}}),c=async h=>{o(!0);try{if(!n){J.error("You must be logged in");return}const f=await Ke.getPrimaryMembershipByUser(n.id);if(!(f!=null&&f.companyId)){J.error("No company profile found for your account");return}const m=await Nn(ve(te,K.EMPLOYEES),{employeeNumber:h.employee_number,nrcNumber:h.nrc_number||null,tpin:h.tpin||null,napsaNumber:h.napsa_number||null,nhimaNumber:h.nhima_number||null,fullName:h.full_name,dateOfBirth:h.date_of_birth||null,gender:h.gender||null,nationality:h.nationality||null,maritalStatus:h.marital_status||null,phone:h.phone||null,address:h.address||null,email:h.email||null,department:h.department||null,division:h.division||null,position:h.position||null,jobGrade:h.job_grade||null,costCentre:h.cost_centre||null,contractType:h.contract_type||null,employmentStatus:h.employment_status||"active",employmentDate:h.employment_date,contractEndDate:h.contract_end_date||null,hasGratuity:h.has_gratuity||!1,gratuityRate:h.gratuity_rate?Number(h.gratuity_rate):0,bankName:h.bank_name||null,bankBranch:h.bank_branch||null,bankAccountNumber:h.bank_account_number||null,basicSalary:Number(h.basic_salary),housingAllowance:h.housing_allowance?Number(h.housing_allowance):0,transportAllowance:h.transport_allowance?Number(h.transport_allowance):0,otherAllowances:h.other_allowances?Number(h.other_allowances):0,userId:n.id,companyId:f.companyId,createdAt:ye(),updatedAt:ye()}),v=h.contract_type==="consultant";if(await dr(He(te,K.EMPLOYEE_PAYROLL_PROFILES,`${f.companyId}_${m.id}`),{employeeId:m.id,companyId:f.companyId,rateType:h.rate_type,payRate:h.pay_rate?Number(h.pay_rate):null,overtimeRateMultiplier:h.overtime_rate_multiplier?Number(h.overtime_rate_multiplier):1.5,currency:h.currency,applyPaye:!v,applyNapsa:!v,applyNhima:!v,isConsultant:v,applyWht:v,consultantType:v?"local":null,createdAt:ye(),updatedAt:ye()}),h.send_invite&&h.email)try{await Ds.sendInvitation({inviteeName:h.full_name,email:h.email,role:"staff",loginUrl:`${window.location.origin}/auth`})}catch{const y=(e==null?void 0:e.companyName)||"ZedBooks";J.warning(`Employee created, but invite setup failed for ${y}`)}J.success("Employee created successfully"),t(`/employees/${m.id}/payroll-setup`)}catch{J.error("Failed to create employee")}finally{o(!1)}},u=()=>{r==="personal"?s("engagement"):r==="engagement"&&s("pay")},d=()=>{r==="pay"?s("engagement"):r==="engagement"&&s("personal")};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>t("/employees"),children:[i.jsx(Uo,{className:"h-4 w-4 mr-2"}),"Back"]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Add New Employee"}),i.jsx("p",{className:"text-muted-foreground",children:"Complete the onboarding form in 3 steps"})]})]}),i.jsx(Q1,{...l,children:i.jsx("form",{onSubmit:l.handleSubmit(c),children:i.jsxs(J1,{value:r,onValueChange:s,className:"space-y-6",children:[i.jsxs(lb,{className:"grid w-full grid-cols-3",children:[i.jsxs(za,{value:"personal",className:"flex items-center gap-2",children:[i.jsx("span",{className:"hidden sm:inline",children:"1."})," Personal Details"]}),i.jsxs(za,{value:"engagement",className:"flex items-center gap-2",children:[i.jsx("span",{className:"hidden sm:inline",children:"2."})," Engagement"]}),i.jsxs(za,{value:"pay",className:"flex items-center gap-2",children:[i.jsx("span",{className:"hidden sm:inline",children:"3."})," Pay"]})]}),i.jsx(Z,{children:i.jsxs(re,{className:"pt-6",children:[i.jsx(qa,{value:"personal",className:"mt-0",children:i.jsx(kZe,{form:l})}),i.jsx(qa,{value:"engagement",className:"mt-0",children:i.jsx(OZe,{form:l})}),i.jsx(qa,{value:"pay",className:"mt-0",children:i.jsx(MZe,{form:l})})]})}),r==="pay"&&i.jsxs(Z,{children:[i.jsxs(ee,{children:[i.jsx(ne,{children:"Employee Invite"}),i.jsx(St,{children:"Send login credentials to the employee"})]}),i.jsx(re,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ku,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx(X,{children:"Send Invite Email"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Send login credentials to employee's email"})]})]}),i.jsx(is,{checked:l.watch("send_invite"),onCheckedChange:h=>l.setValue("send_invite",h),disabled:!l.watch("email")})]})})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx(H,{type:"button",variant:"outline",onClick:d,disabled:r==="personal",children:"Previous"}),i.jsx("div",{className:"flex gap-2",children:r!=="pay"?i.jsxs(H,{type:"button",onClick:u,children:["Next",i.jsx(S8,{className:"h-4 w-4 ml-1"})]}):i.jsxs(H,{type:"submit",disabled:a,children:[i.jsx(Jd,{className:"h-4 w-4 mr-2"}),a?"Saving...":"Save & Setup Payroll"]})})]})]})})})]})}const $Ze=Vu({full_name:Ue().min(2,"Name must be at least 2 characters"),employee_number:Ue().min(1,"Employee number is required"),position:Ue().optional(),department:Ue().optional(),email:Ue().email().optional().or(xY("")),phone:Ue().optional(),basic_salary:Ue().min(1,"Basic salary is required"),housing_allowance:Ue().optional(),transport_allowance:Ue().optional(),other_allowances:Ue().optional(),employment_date:Ue().min(1,"Employment date is required"),employment_status:bY(["active","inactive","terminated"]),tpin:Ue().optional(),napsa_number:Ue().optional(),nhima_number:Ue().optional(),bank_name:Ue().optional(),bank_branch:Ue().optional(),bank_account_number:Ue().optional()}),FZe=t=>{if(!t)return"";if(typeof t=="string")return t.slice(0,10);if(t instanceof Date)return t.toISOString().slice(0,10);if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString().slice(0,10)}return""};function VZe(){const t=Gn(),{id:e}=Pp(),{user:n}=ct(),{data:r,isLoading:s}=je({queryKey:["employee",e,n==null?void 0:n.id],queryFn:async()=>{if(!e||!n)return null;const l=await Ke.getPrimaryMembershipByUser(n.id);if(!(l!=null&&l.companyId))return null;const c=He(te,K.EMPLOYEES,e),u=await ki(c);if(!u.exists())return null;const d=u.data(),h=d.companyId??d.company_id;return h&&h!==l.companyId?null:{id:u.id,...d}},enabled:!!(e&&n)}),a=$u({resolver:Fu($Ze)});N.useEffect(()=>{r&&a.reset({full_name:String(r.fullName??r.full_name??""),employee_number:String(r.employeeNumber??r.employee_number??""),position:String(r.position??""),department:String(r.department??""),email:String(r.email??""),phone:String(r.phone??""),basic_salary:String(r.basicSalary??r.basic_salary??""),housing_allowance:String(r.housingAllowance??r.housing_allowance??0),transport_allowance:String(r.transportAllowance??r.transport_allowance??0),other_allowances:String(r.otherAllowances??r.other_allowances??0),employment_date:FZe(r.employmentDate??r.employment_date),employment_status:String(r.employmentStatus??r.employment_status??"active"),tpin:String(r.tpin??""),napsa_number:String(r.napsaNumber??r.napsa_number??""),nhima_number:String(r.nhimaNumber??r.nhima_number??""),bank_name:String(r.bankName??r.bank_name??""),bank_branch:String(r.bankBranch??r.bank_branch??""),bank_account_number:String(r.bankAccountNumber??r.bank_account_number??"")})},[r,a]);const o=async l=>{try{if(!e||!n){J.error("You must be logged in");return}const c=await Ke.getPrimaryMembershipByUser(n.id);if(!(c!=null&&c.companyId)){J.error("No company profile found for your account");return}await dr(He(te,K.EMPLOYEES,e),{companyId:c.companyId,employeeNumber:l.employee_number,fullName:l.full_name,position:l.position||null,department:l.department||null,email:l.email||null,phone:l.phone||null,basicSalary:Number(l.basic_salary),housingAllowance:l.housing_allowance?Number(l.housing_allowance):0,transportAllowance:l.transport_allowance?Number(l.transport_allowance):0,otherAllowances:l.other_allowances?Number(l.other_allowances):0,employmentDate:l.employment_date,employmentStatus:l.employment_status,tpin:l.tpin||null,napsaNumber:l.napsa_number||null,nhimaNumber:l.nhima_number||null,bankName:l.bank_name||null,bankBranch:l.bank_branch||null,bankAccountNumber:l.bank_account_number||null,updatedAt:ye()},{merge:!0}),J.success("Employee updated successfully"),t("/employees")}catch{J.error("Failed to update employee")}};return s?i.jsx("div",{children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>t("/employees"),children:[i.jsx(Uo,{className:"h-4 w-4 mr-2"}),"Back"]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Edit Employee"}),i.jsx("p",{className:"text-muted-foreground",children:"Update employee information"})]})]}),i.jsx(Q1,{...a,children:i.jsxs("form",{onSubmit:a.handleSubmit(o),className:"space-y-6",children:[i.jsxs("div",{className:"border rounded-lg p-6 space-y-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Personal Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(rt,{control:a.control,name:"full_name",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Full Name *"}),i.jsx(nt,{children:i.jsx(G,{...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"employee_number",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Employee Number *"}),i.jsx(nt,{children:i.jsx(G,{...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"position",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Position"}),i.jsx(nt,{children:i.jsx(G,{...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"department",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Department"}),i.jsx(nt,{children:i.jsx(G,{...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"email",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Email"}),i.jsx(nt,{children:i.jsx(G,{type:"email",...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"phone",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Phone"}),i.jsx(nt,{children:i.jsx(G,{...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"employment_date",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Employment Date *"}),i.jsx(nt,{children:i.jsx(G,{type:"date",...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"employment_status",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Employment Status *"}),i.jsxs(kt,{onValueChange:l.onChange,defaultValue:l.value,children:[i.jsx(nt,{children:i.jsx(At,{children:i.jsx(Rt,{})})}),i.jsxs(Tt,{children:[i.jsx(be,{value:"active",children:"Active"}),i.jsx(be,{value:"inactive",children:"Inactive"}),i.jsx(be,{value:"terminated",children:"Terminated"})]})]}),i.jsx(it,{})]})})]})]}),i.jsxs("div",{className:"border rounded-lg p-6 space-y-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Salary Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(rt,{control:a.control,name:"basic_salary",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Basic Salary (ZMW) *"}),i.jsx(nt,{children:i.jsx(G,{type:"number",step:"0.01",...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"housing_allowance",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Housing Allowance (ZMW)"}),i.jsx(nt,{children:i.jsx(G,{type:"number",step:"0.01",...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"transport_allowance",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Transport Allowance (ZMW)"}),i.jsx(nt,{children:i.jsx(G,{type:"number",step:"0.01",...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"other_allowances",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Other Allowances (ZMW)"}),i.jsx(nt,{children:i.jsx(G,{type:"number",step:"0.01",...l})}),i.jsx(it,{})]})})]})]}),i.jsxs("div",{className:"border rounded-lg p-6 space-y-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Statutory Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(rt,{control:a.control,name:"tpin",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"TPIN"}),i.jsx(nt,{children:i.jsx(G,{...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"napsa_number",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"NAPSA Number"}),i.jsx(nt,{children:i.jsx(G,{...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"nhima_number",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"NHIMA Number"}),i.jsx(nt,{children:i.jsx(G,{...l})}),i.jsx(it,{})]})})]})]}),i.jsxs("div",{className:"border rounded-lg p-6 space-y-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Bank Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(rt,{control:a.control,name:"bank_name",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Bank Name"}),i.jsx(nt,{children:i.jsx(G,{...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"bank_branch",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Branch"}),i.jsx(nt,{children:i.jsx(G,{...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"bank_account_number",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Account Number"}),i.jsx(nt,{children:i.jsx(G,{...l})}),i.jsx(it,{})]})})]})]}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx(H,{type:"button",variant:"outline",onClick:()=>t("/employees"),children:"Cancel"}),i.jsx(H,{type:"submit",children:"Update Employee"})]})]})})]})}const BZe=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n};function UZe(){const t=Gn(),{user:e}=ct(),[n,r]=N.useState(null),[s,a]=N.useState(!1),o=()=>{const d=["full_name","employee_number","position","department","email","phone","basic_salary","housing_allowance","transport_allowance","other_allowances","employment_date","employment_status","tpin","napsa_number","nhima_number","bank_name","bank_branch","bank_account_number"],h=["John Doe","EMP001","Software Engineer","IT","john@example.com","+260971234567","15000","3000","1000","500","2024-01-01","active","1234567890","NAPSA123","NHIMA123","Zanaco","Cairo Road","1234567890"],f=[d.join(","),h.join(",")].join(`
`),m=new Blob([f],{type:"text/csv"}),v=window.URL.createObjectURL(m),g=document.createElement("a");g.href=v,g.download="employee_template.csv",g.click(),window.URL.revokeObjectURL(v),J.success("Template downloaded")},l=d=>{d.target.files&&d.target.files[0]&&r(d.target.files[0])},c=d=>{const h=d.split(`
`).filter(m=>m.trim()),f=h[0].split(",").map(m=>m.trim());return h.slice(1).map(m=>{const v=m.split(",").map(y=>y.trim()),g={};return f.forEach((y,w)=>{g[y]=v[w]||null}),g})},u=async()=>{if(!n){J.error("Please select a file");return}a(!0);try{if(!e)throw new Error("Not authenticated");const d=await Ke.getPrimaryMembershipByUser(e.id);if(!(d!=null&&d.companyId))throw new Error("No company profile found for your account");const h=await n.text(),m=c(h).map(y=>({userId:e.id,companyId:d.companyId,fullName:y.full_name||"",employeeNumber:y.employee_number||"",position:y.position||null,department:y.department||null,email:y.email||null,phone:y.phone||null,basicSalary:y.basic_salary?Number(y.basic_salary):0,housingAllowance:y.housing_allowance?Number(y.housing_allowance):0,transportAllowance:y.transport_allowance?Number(y.transport_allowance):0,otherAllowances:y.other_allowances?Number(y.other_allowances):0,employmentDate:y.employment_date||null,employmentStatus:y.employment_status||"active",tpin:y.tpin||null,napsaNumber:y.napsa_number||null,nhimaNumber:y.nhima_number||null,bankName:y.bank_name||null,bankBranch:y.bank_branch||null,bankAccountNumber:y.bank_account_number||null,createdAt:ye(),updatedAt:ye()})),v=ve(te,K.EMPLOYEES),g=BZe(m,400);for(const y of g){const w=kl(te);y.forEach(b=>{w.set(He(v),b)}),await w.commit()}J.success(`Successfully uploaded ${m.length} employees`),t("/employees")}catch{J.error("Failed to upload employees. Please check your CSV format.")}finally{a(!1)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>t("/employees"),children:[i.jsx(Uo,{className:"h-4 w-4 mr-2"}),"Back"]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Bulk Upload Employees"}),i.jsx("p",{className:"text-muted-foreground",children:"Upload multiple employees using a CSV file"})]})]}),i.jsxs("div",{className:"border rounded-lg p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Instructions"}),i.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-muted-foreground",children:[i.jsx("li",{children:"Download the CSV template below"}),i.jsx("li",{children:"Fill in your employee data following the template format"}),i.jsx("li",{children:"Make sure all required fields are filled (full_name, employee_number, basic_salary, employment_date)"}),i.jsx("li",{children:"Save your file as CSV format"}),i.jsx("li",{children:"Upload your completed CSV file"})]})]}),i.jsx("div",{className:"flex gap-4",children:i.jsxs(H,{variant:"outline",onClick:o,children:[i.jsx(Es,{className:"mr-2 h-4 w-4"}),"Download Template"]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Upload CSV File"}),i.jsx(G,{type:"file",accept:".csv",onChange:l,disabled:s})]}),n&&i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Selected file: ",n.name]})]}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx(H,{variant:"outline",onClick:()=>t("/employees"),children:"Cancel"}),i.jsxs(H,{onClick:u,disabled:s||!n,children:[i.jsx(zo,{className:"mr-2 h-4 w-4"}),s?"Uploading...":"Upload Employees"]})]})]})]})}const zZe=t=>t==="pending_approval"?"Pending Approval":t==="final"?"Final":t,qZe=t=>["completed","approved","final"].includes(t)?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":t==="pending_approval"?"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";function WZe(){const t=Gn(),{user:e}=ct(),{data:n,isLoading:r}=je({queryKey:["payrollRuns",e==null?void 0:e.id],queryFn:async()=>{if(!e)return[];const s=await Ke.getPrimaryMembershipByUser(e.id);if(!(s!=null&&s.companyId))return[];const a=ve(te,K.PAYROLL_RUNS);return(await $e(Ce(a,ge("companyId","==",s.companyId),CN("runDate","desc")))).docs.map(l=>{const c=l.data();return{id:l.id,runDate:String(c.runDate??c.run_date??""),periodStart:String(c.periodStart??c.period_start??""),periodEnd:String(c.periodEnd??c.period_end??""),totalGross:Number(c.totalGross??c.total_gross??0),totalDeductions:Number(c.totalDeductions??c.total_deductions??0),totalNet:Number(c.totalNet??c.total_net??0),status:String(c.status??c.payrollStatus??c.payroll_status??"draft")}})},enabled:!!e});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Payroll"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage payroll runs and employee payments"})]}),i.jsxs(H,{onClick:()=>t("/payroll/new"),children:[i.jsx(bn,{className:"mr-2 h-4 w-4"}),"New Payroll Run"]})]}),r?i.jsx("div",{children:"Loading..."}):i.jsx("div",{className:"border rounded-lg",children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Run Date"}),i.jsx(U,{children:"Period"}),i.jsx(U,{children:"Total Gross"}),i.jsx(U,{children:"Total Deductions"}),i.jsx(U,{children:"Total Net"}),i.jsx(U,{children:"Status"}),i.jsx(U,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ht,{children:[n==null?void 0:n.map(s=>i.jsxs(_e,{children:[i.jsx(B,{className:"font-medium",children:s.runDate?vt(new Date(s.runDate),"dd MMM yyyy"):"-"}),i.jsxs(B,{children:[s.periodStart?vt(new Date(s.periodStart),"dd MMM"):"-"," -"," ",s.periodEnd?vt(new Date(s.periodEnd),"dd MMM yyyy"):"-"]}),i.jsx(B,{children:le(s.totalGross)}),i.jsx(B,{children:le(s.totalDeductions)}),i.jsx(B,{children:le(s.totalNet)}),i.jsx(B,{children:i.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${qZe(s.status)}`,children:zZe(s.status)})}),i.jsx(B,{className:"text-right",children:s.status==="pending_approval"?i.jsx(H,{variant:"default",size:"sm",onClick:()=>t(`/payroll/${s.id}/approve`),children:"Review & Approve"}):i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>t(`/payroll/${s.id}`),children:"View"})})]},s.id)),(n==null?void 0:n.length)===0&&i.jsx(_e,{children:i.jsx(B,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No payroll runs found. Create your first payroll run to get started."})})]})]})})]})}const rr=_O,Zr=LG,HZe=jO,Rne=N.forwardRef(({className:t,...e},n)=>i.jsx(Kx,{ref:n,className:pe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));Rne.displayName=Kx.displayName;const Wn=N.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(HZe,{children:[i.jsx(Rne,{}),i.jsxs(Gx,{ref:r,className:pe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,i.jsxs(UN,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[i.jsx(kk,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Wn.displayName=Gx.displayName;const Hn=({className:t,...e})=>i.jsx("div",{className:pe("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Hn.displayName="DialogHeader";const eS=({className:t,...e})=>i.jsx("div",{className:pe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});eS.displayName="DialogFooter";const Kn=N.forwardRef(({className:t,...e},n)=>i.jsx(Yx,{ref:n,className:pe("text-lg font-semibold leading-none tracking-tight",t),...e}));Kn.displayName=Yx.displayName;const Yu=N.forwardRef(({className:t,...e},n)=>i.jsx(Qx,{ref:n,className:pe("text-sm text-muted-foreground",t),...e}));Yu.displayName=Qx.displayName;function KZe({employees:t,additions:e,onAddition:n,onRemove:r}){const[s,a]=N.useState(!1),[o,l]=N.useState("earning"),[c,u]=N.useState(""),[d,h]=N.useState(""),[f,m]=N.useState(""),[v,g]=N.useState(""),[y,w]=N.useState(""),[b,E]=N.useState(""),T=()=>{u(""),h(""),m(""),g(""),w(""),E("")},x=()=>{if(!c)return;let _;if(o==="overtime"){const p=Number(y)*Number(b);_={employee_id:c,type:o,name:d||"Overtime",amount:p}}else if(o==="advance"){const p=Number(f),A=Number(v)||1,P=Math.ceil(p/A);_={employee_id:c,type:o,name:d||"Advance",amount:P,total_amount:p,months_to_pay:A,monthly_deduction:P}}else _={employee_id:c,type:o,name:d||(o==="bonus"?"Bonus":"Additional Earning"),amount:Number(f)};n(_),T(),a(!1)},S=_=>{switch(_){case"earning":return i.jsx(er,{className:"h-4 w-4"});case"bonus":return i.jsx(kL,{className:"h-4 w-4"});case"overtime":return i.jsx(Pi,{className:"h-4 w-4"});case"advance":return i.jsx(Zd,{className:"h-4 w-4"});default:return null}};return i.jsxs(rr,{open:s,onOpenChange:a,children:[i.jsx(Zr,{asChild:!0,children:i.jsxs(H,{variant:"outline",size:"sm",children:[i.jsx(bn,{className:"h-4 w-4 mr-2"}),"Add Earnings/Deductions"]})}),i.jsxs(Wn,{className:"max-w-md",children:[i.jsxs(Hn,{children:[i.jsx(Kn,{children:"Add Payroll Items"}),i.jsx(Yu,{children:"Assign earnings, bonuses, overtime, or advances to employees"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Type"}),i.jsxs(kt,{value:o,onValueChange:_=>l(_),children:[i.jsx(At,{children:i.jsx(Rt,{})}),i.jsxs(Tt,{children:[i.jsx(be,{value:"earning",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(er,{className:"h-4 w-4"}),"Custom Earning"]})}),i.jsx(be,{value:"bonus",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(kL,{className:"h-4 w-4"}),"Bonus"]})}),i.jsx(be,{value:"overtime",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Pi,{className:"h-4 w-4"}),"Overtime"]})}),i.jsx(be,{value:"advance",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Zd,{className:"h-4 w-4"}),"Advance (Deduction)"]})})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Employee"}),i.jsxs(kt,{value:c,onValueChange:u,children:[i.jsx(At,{children:i.jsx(Rt,{placeholder:"Select employee"})}),i.jsx(Tt,{children:t.map(_=>i.jsxs(be,{value:_.id,children:[_.full_name," (",_.employee_number,")"]},_.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Description"}),i.jsx(G,{value:d,onChange:_=>h(_.target.value),placeholder:o==="earning"?"e.g., Commission":o==="bonus"?"e.g., Performance Bonus":o==="overtime"?"e.g., Weekend Overtime":"e.g., Salary Advance"})]}),o==="overtime"?i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Hourly Rate (K)"}),i.jsx(G,{type:"number",value:y,onChange:_=>w(_.target.value),placeholder:"0.00"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Hours Worked"}),i.jsx(G,{type:"number",value:b,onChange:_=>E(_.target.value),placeholder:"0"})]}),y&&b&&i.jsxs("div",{className:"col-span-2 p-3 bg-muted rounded-lg",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Overtime Pay"}),i.jsxs("p",{className:"text-lg font-semibold",children:["K",(Number(y)*Number(b)).toFixed(2)]})]})]}):o==="advance"?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Advance Amount (K)"}),i.jsx(G,{type:"number",value:f,onChange:_=>m(_.target.value),placeholder:"0.00"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Months to Repay"}),i.jsx(G,{type:"number",min:"1",value:v,onChange:_=>g(_.target.value),placeholder:"e.g., 3"})]}),f&&v&&i.jsxs("div",{className:"p-3 bg-muted rounded-lg space-y-1",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Deduction"}),i.jsxs("p",{className:"text-lg font-semibold",children:["K",Math.ceil(Number(f)/Number(v)).toFixed(2)]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["To be deducted from net pay over ",v," month(s)"]})]})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Amount (K)"}),i.jsx(G,{type:"number",value:f,onChange:_=>m(_.target.value),placeholder:"0.00"})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(H,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),i.jsx(H,{onClick:x,disabled:!c,children:"Add to Payroll"})]})]})]}),e.length>0&&i.jsxs("div",{className:"mt-4 border rounded-lg",children:[i.jsx("div",{className:"p-3 border-b bg-muted/50",children:i.jsxs("h4",{className:"font-medium text-sm",children:["Pending Additions (",e.length,")"]})}),i.jsx("div",{className:"divide-y max-h-48 overflow-y-auto",children:e.map(_=>{const p=t.find(A=>A.id===_.employee_id);return i.jsxs("div",{className:"p-3 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[S(_.type),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-sm",children:_.name}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[p==null?void 0:p.full_name,"  K",_.amount.toFixed(2),_.type==="advance"&&` per month for ${_.months_to_pay} months`]})]})]}),i.jsx(H,{variant:"ghost",size:"sm",className:"text-destructive",onClick:()=>r(_.id),children:"Remove"})]},_.id)})})]})]})}const GZe=Vu({period_start:Ue().min(1,"Start date is required"),period_end:Ue().min(1,"End date is required"),run_date:Ue().min(1,"Run date is required"),notes:Ue().optional()});function YZe(){const{user:t}=ct(),e=Gn(),[n,r]=N.useState(!1),[s,a]=N.useState([]),o=m=>{a([...s,{...m,id:crypto.randomUUID()}])},l=m=>{a(s.filter(v=>v.id!==m))},c=$u({resolver:Fu(GZe),defaultValues:{run_date:new Date().toISOString().split("T")[0]}}),{data:u}=je({queryKey:["new-payroll-company",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const m=await Ke.getPrimaryMembershipByUser(t.id);return(m==null?void 0:m.companyId)??null},enabled:!!t}),{data:d}=je({queryKey:["employees",u],queryFn:async()=>{if(!u)return[];const m=ve(te,K.EMPLOYEES),v=await $e(Ce(m,ge("companyId","==",u),ge("employmentStatus","==","active")));return v.empty?(await $e(Ce(m,ge("companyId","==",u),ge("employment_status","==","active")))).docs.map(y=>{const w=y.data();return{id:y.id,full_name:String(w.fullName??w.full_name??""),employee_number:String(w.employeeNumber??w.employee_number??""),basic_salary:Number(w.basicSalary??w.basic_salary??0),housing_allowance:Number(w.housingAllowance??w.housing_allowance??0),transport_allowance:Number(w.transportAllowance??w.transport_allowance??0),other_allowances:Number(w.otherAllowances??w.other_allowances??0)}}):v.docs.map(g=>{const y=g.data();return{id:g.id,full_name:String(y.fullName??y.full_name??""),employee_number:String(y.employeeNumber??y.employee_number??""),basic_salary:Number(y.basicSalary??y.basic_salary??0),housing_allowance:Number(y.housingAllowance??y.housing_allowance??0),transport_allowance:Number(y.transportAllowance??y.transport_allowance??0),other_allowances:Number(y.otherAllowances??y.other_allowances??0)}})},enabled:!!u}),{data:h}=je({queryKey:["open-payroll-period",u],queryFn:async()=>{if(!u)return null;const m=ve(te,K.FINANCIAL_PERIODS),v=await $e(Ce(m,ge("companyId","==",u),ge("status","==","open")));if(v.empty)return null;const g=v.docs.map(y=>{const w=y.data();return{id:y.id,startDate:String(w.startDate??w.start_date??""),endDate:String(w.endDate??w.end_date??""),periodName:String(w.periodName??w.period_name??"")}});return g.sort((y,w)=>w.startDate.localeCompare(y.startDate)),g[0]},enabled:!!u}),f=async m=>{if(!d||d.length===0){J.error("No active employees found");return}r(!0);try{if(!t)throw new Error("Not authenticated");if(!u)throw new Error("Company not found");const v=await $e(Ce(ve(te,K.PAYROLL_RUNS),ge("companyId","==",u))),y=`PAY-${new Date().getFullYear()}-${String(v.size+1).padStart(4,"0")}`,w=await Nn(ve(te,K.PAYROLL_RUNS),{companyId:u,userId:t.id,periodStart:m.period_start,periodEnd:m.period_end,runDate:m.run_date,notes:m.notes||null,status:"draft",payrollStatus:"draft",payrollNumber:y,totalGross:0,totalDeductions:0,totalNet:0,createdAt:ye(),updatedAt:ye()});let b=0,E=0,T=0;const S=(await $e(Ce(ve(te,K.ADVANCES),ge("companyId","==",u),ge("status","in",["pending","partial"])))).docs.map(p=>{const A=p.data();return{id:p.id,employee_id:String(A.employeeId??A.employee_id??""),status:String(A.status??""),date_to_deduct:A.dateToDeduct??A.date_to_deduct??null,monthly_deduction:Number(A.monthlyDeduction??A.monthly_deduction??0)||null,remaining_balance:Number(A.remainingBalance??A.remaining_balance??0)||null,amount:Number(A.amount??0)}}).filter(p=>!p.employee_id||!d.some(A=>A.id===p.employee_id)?!1:p.date_to_deduct?p.date_to_deduct<=m.period_end:!0),_=d.map(p=>{const A=S.filter(I=>I.employee_id===p.id);let P=0;A.forEach(I=>{const R=I.monthly_deduction?Math.min(Number(I.monthly_deduction),Number(I.remaining_balance||I.amount)):Number(I.remaining_balance||I.amount);P+=R});const C=gPe(Number(p.basic_salary),Number(p.housing_allowance||0),Number(p.transport_allowance||0),Number(p.other_allowances||0),P);return b+=C.grossSalary,E+=C.totalDeductions,T+=C.netSalary,{companyId:u,payrollRunId:w.id,employeeId:p.id,basicSalary:C.basicSalary,housingAllowance:C.housingAllowance,transportAllowance:C.transportAllowance,otherAllowances:C.otherAllowances,grossSalary:C.grossSalary,paye:C.paye,napsaEmployee:C.napsaEmployee,napsaEmployer:C.napsaEmployer,nhimaEmployee:C.nhimaEmployee,nhimaEmployer:C.nhimaEmployer,advancesDeducted:P,totalDeductions:C.totalDeductions,netSalary:C.netSalary,createdAt:ye(),updatedAt:ye()}});await Promise.all(_.map(p=>Nn(ve(te,K.PAYROLL_ITEMS),p))),s.length>0&&await Promise.all(s.map(p=>Nn(ve(te,K.PAYROLL_ADDITIONS),{companyId:u,payrollRunId:w.id,employeeId:p.employee_id,type:p.type,name:p.name,amount:p.amount,totalAmount:p.total_amount??null,monthsToPay:p.months_to_pay??null,monthlyDeduction:p.monthly_deduction??null,createdAt:ye(),updatedAt:ye()}))),await $o(doc(te,K.PAYROLL_RUNS,w.id),{totalGross:b,totalDeductions:E,totalNet:T,updatedAt:ye()}),J.success("Payroll draft created successfully"),e(`/payroll/${w.id}`)}catch{J.error("Failed to create payroll run")}finally{r(!1)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>e("/payroll"),children:[i.jsx(Uo,{className:"h-4 w-4 mr-2"}),"Back"]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"New Payroll Run"}),i.jsxs("p",{className:"text-muted-foreground",children:["Create a new payroll run for ",(d==null?void 0:d.length)||0," active employees"]})]}),i.jsx(Xe,{variant:"outline",className:"text-lg px-3 py-1",children:"DRAFT"})]}),i.jsxs(gp,{children:[i.jsx(Ci,{className:"h-4 w-4"}),i.jsx(kne,{children:"Payroll Workflow"}),i.jsxs(yp,{children:["Payroll follows a strict workflow: ",i.jsx("strong",{children:"Draft  Trial  Final"}),". Draft payrolls can be edited. Trial payrolls generate a preview with no GL impact. Final payrolls are locked and post journals to the General Ledger."]})]}),h&&i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Open financial period: ",h.periodName||`${h.startDate} to ${h.endDate}`]}),i.jsx(Q1,{...c,children:i.jsxs("form",{onSubmit:c.handleSubmit(f),className:"space-y-6",children:[i.jsxs(Z,{children:[i.jsxs(ee,{children:[i.jsx(ne,{children:"Payroll Period"}),i.jsx(St,{children:"Define the period for this payroll run"})]}),i.jsx(re,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(rt,{control:c.control,name:"period_start",render:({field:m})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Period Start *"}),i.jsx(nt,{children:i.jsx(G,{type:"date",...m})}),i.jsx(it,{})]})}),i.jsx(rt,{control:c.control,name:"period_end",render:({field:m})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Period End *"}),i.jsx(nt,{children:i.jsx(G,{type:"date",...m})}),i.jsx(it,{})]})}),i.jsx(rt,{control:c.control,name:"run_date",render:({field:m})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Run Date *"}),i.jsx(nt,{children:i.jsx(G,{type:"date",...m})}),i.jsx(it,{})]})})]})})]}),i.jsxs(Z,{children:[i.jsxs(ee,{children:[i.jsx(ne,{children:"Payroll Additions"}),i.jsx(St,{children:"Add earnings, bonuses, overtime, or advances for this payroll run"})]}),i.jsx(re,{children:i.jsx(KZe,{employees:(d==null?void 0:d.map(m=>({id:m.id,full_name:m.full_name,employee_number:m.employee_number})))||[],additions:s,onAddition:o,onRemove:l})})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"Notes"})}),i.jsx(re,{children:i.jsx(rt,{control:c.control,name:"notes",render:({field:m})=>i.jsxs(tt,{children:[i.jsx(nt,{children:i.jsx(hr,{...m,rows:3,placeholder:"Add any notes for this payroll run..."})}),i.jsx(it,{})]})})})]}),d&&d.length>0&&i.jsxs(Z,{children:[i.jsxs(ee,{children:[i.jsx(ne,{children:"Employees to Process"}),i.jsxs(St,{children:[d.length," active employees will be included"]})]}),i.jsx(re,{children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Basic Salary"}),i.jsx("p",{className:"text-xl font-bold",children:le(d.reduce((m,v)=>m+Number(v.basic_salary||0),0))})]}),i.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Housing"}),i.jsx("p",{className:"text-xl font-bold",children:le(d.reduce((m,v)=>m+Number(v.housing_allowance||0),0))})]}),i.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Transport"}),i.jsx("p",{className:"text-xl font-bold",children:le(d.reduce((m,v)=>m+Number(v.transport_allowance||0),0))})]}),i.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Other Allowances"}),i.jsx("p",{className:"text-xl font-bold",children:le(d.reduce((m,v)=>m+Number(v.other_allowances||0),0))})]})]})})]}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx(H,{type:"button",variant:"outline",onClick:()=>e("/payroll"),children:"Cancel"}),i.jsxs(H,{type:"submit",disabled:n,children:[i.jsx(Jd,{className:"h-4 w-4 mr-2"}),n?"Creating...":"Save as Draft"]})]})]})})]})}var One="AlertDialog",[QZe,att]=ds(One,[wG]),Kl=wG(),Mne=t=>{const{__scopeAlertDialog:e,...n}=t,r=Kl(e);return i.jsx(_O,{...r,...n,modal:!0})};Mne.displayName=One;var XZe="AlertDialogTrigger",Dne=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Kl(n);return i.jsx(LG,{...s,...r,ref:e})});Dne.displayName=XZe;var ZZe="AlertDialogPortal",Lne=t=>{const{__scopeAlertDialog:e,...n}=t,r=Kl(e);return i.jsx(jO,{...r,...n})};Lne.displayName=ZZe;var JZe="AlertDialogOverlay",$ne=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Kl(n);return i.jsx(Kx,{...s,...r,ref:e})});$ne.displayName=JZe;var sm="AlertDialogContent",[eJe,tJe]=QZe(sm),nJe=X9("AlertDialogContent"),Fne=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,a=Kl(n),o=N.useRef(null),l=Dt(e,o),c=N.useRef(null);return i.jsx(xje,{contentName:sm,titleName:Vne,docsSlug:"alert-dialog",children:i.jsx(eJe,{scope:n,cancelRef:c,children:i.jsxs(Gx,{role:"alertdialog",...a,...s,ref:l,onOpenAutoFocus:Pe(s.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[i.jsx(nJe,{children:r}),i.jsx(sJe,{contentRef:o})]})})})});Fne.displayName=sm;var Vne="AlertDialogTitle",Bne=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Kl(n);return i.jsx(Yx,{...s,...r,ref:e})});Bne.displayName=Vne;var Une="AlertDialogDescription",zne=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Kl(n);return i.jsx(Qx,{...s,...r,ref:e})});zne.displayName=Une;var rJe="AlertDialogAction",qne=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Kl(n);return i.jsx(UN,{...s,...r,ref:e})});qne.displayName=rJe;var Wne="AlertDialogCancel",Hne=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=tJe(Wne,n),a=Kl(n),o=Dt(e,s);return i.jsx(UN,{...a,...r,ref:o})});Hne.displayName=Wne;var sJe=({contentRef:t})=>{const e=`\`${sm}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${sm}\` by passing a \`${Une}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${sm}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return N.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},iJe=Mne,aJe=Dne,oJe=Lne,Kne=$ne,Gne=Fne,Yne=qne,Qne=Hne,Xne=Bne,Zne=zne;const jh=iJe,ux=aJe,lJe=oJe,Jne=N.forwardRef(({className:t,...e},n)=>i.jsx(Kne,{className:pe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));Jne.displayName=Kne.displayName;const _u=N.forwardRef(({className:t,...e},n)=>i.jsxs(lJe,{children:[i.jsx(Jne,{}),i.jsx(Gne,{ref:n,className:pe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));_u.displayName=Gne.displayName;const ju=({className:t,...e})=>i.jsx("div",{className:pe("flex flex-col space-y-2 text-center sm:text-left",t),...e});ju.displayName="AlertDialogHeader";const Nu=({className:t,...e})=>i.jsx("div",{className:pe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Nu.displayName="AlertDialogFooter";const Su=N.forwardRef(({className:t,...e},n)=>i.jsx(Xne,{ref:n,className:pe("text-lg font-semibold",t),...e}));Su.displayName=Xne.displayName;const Eu=N.forwardRef(({className:t,...e},n)=>i.jsx(Zne,{ref:n,className:pe("text-sm text-muted-foreground",t),...e}));Eu.displayName=Zne.displayName;const Au=N.forwardRef(({className:t,...e},n)=>i.jsx(Yne,{ref:n,className:pe(iO(),t),...e}));Au.displayName=Yne.displayName;const Tu=N.forwardRef(({className:t,...e},n)=>i.jsx(Qne,{ref:n,className:pe(iO({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));Tu.displayName=Qne.displayName;function cJe(){const{user:t}=ct(),e=Gn(),{id:n}=Pp(),r=dn(),{data:s,isLoading:a}=je({queryKey:["payrollRun",n],queryFn:async()=>{if(!n)return null;const T=await ki(He(te,K.PAYROLL_RUNS,n));if(!T.exists())return null;const x=T.data();return{id:T.id,run_date:String(x.runDate??x.run_date??""),period_start:String(x.periodStart??x.period_start??""),period_end:String(x.periodEnd??x.period_end??""),payroll_status:x.payrollStatus??x.payroll_status??x.status??"draft",status:x.status??null,payroll_number:x.payrollNumber??x.payroll_number??null,total_gross:Number(x.totalGross??x.total_gross??0),total_deductions:Number(x.totalDeductions??x.total_deductions??0),total_net:Number(x.totalNet??x.total_net??0),gl_journal_id:x.glJournalId??x.gl_journal_id??null}},enabled:!!(t&&n)}),{data:o}=je({queryKey:["payrollItems",n],queryFn:async()=>{if(!n)return[];const T=ve(te,K.PAYROLL_ITEMS);let x=await $e(Ce(T,ge("payrollRunId","==",n)));x.empty&&(x=await $e(Ce(T,ge("payroll_run_id","==",n))));const S=x.docs.map(P=>({id:P.id,row:P.data()})),_=Array.from(new Set(S.map(({row:P})=>String(P.employeeId??P.employee_id??"")).filter(Boolean))),p=await Promise.all(_.map(async P=>{const C=await ki(He(te,K.EMPLOYEES,P));return{employeeDocId:P,snap:C}})),A=new Map;return p.forEach(({employeeDocId:P,snap:C})=>{if(!C.exists())return;const I=C.data();A.set(P,{full_name:String(I.fullName??I.full_name??""),employee_number:String(I.employeeNumber??I.employee_number??""),email:I.email??null,position:I.position??null,department:I.department??null,tpin:I.tpin??null,napsa_number:I.napsaNumber??I.napsa_number??null,nhima_number:I.nhimaNumber??I.nhima_number??null,bank_name:I.bankName??I.bank_name??null,bank_account_number:I.bankAccountNumber??I.bank_account_number??null})}),S.map(({id:P,row:C})=>{const I=String(C.employeeId??C.employee_id??"");return{id:P,employee_id:I,basic_salary:Number(C.basicSalary??C.basic_salary??0),housing_allowance:Number(C.housingAllowance??C.housing_allowance??0),transport_allowance:Number(C.transportAllowance??C.transport_allowance??0),other_allowances:Number(C.otherAllowances??C.other_allowances??0),gross_salary:Number(C.grossSalary??C.gross_salary??0),advances_deducted:Number(C.advancesDeducted??C.advances_deducted??0),net_salary:Number(C.netSalary??C.net_salary??0),paye:Number(C.paye??0),napsa_employee:Number(C.napsaEmployee??C.napsa_employee??0),napsa_employer:Number(C.napsaEmployer??C.napsa_employer??0),nhima_employee:Number(C.nhimaEmployee??C.nhima_employee??0),nhima_employer:Number(C.nhimaEmployer??C.nhima_employer??0),total_deductions:Number(C.totalDeductions??C.total_deductions??0),employees:A.get(I)??null}})},enabled:!!(t&&n)}),{data:l}=je({queryKey:["payroll-journals",n],queryFn:async()=>{if(!n)return[];const T=ve(te,K.PAYROLL_JOURNALS);let x=await $e(Ce(T,ge("payrollRunId","==",n)));x.empty&&(x=await $e(Ce(T,ge("payroll_run_id","==",n))));const S=x.docs.map(P=>({id:P.id,row:P.data()})),_=Array.from(new Set(S.map(({row:P})=>String(P.journalEntryId??P.journal_entry_id??"")).filter(Boolean))),p=await Promise.all(_.map(async P=>{const C=await ki(He(te,K.JOURNAL_ENTRIES,P));return{entryId:P,snap:C}})),A=new Map;return p.forEach(({entryId:P,snap:C})=>{if(!C.exists()){A.set(P,null);return}const I=C.data();A.set(P,{id:C.id,reference_number:I.referenceNumber??I.reference_number??null,entry_date:String(I.entryDate??I.entry_date??""),description:I.description??null,is_posted:!!(I.isPosted??I.is_posted)})}),S.map(({id:P,row:C})=>{const I=String(C.journalEntryId??C.journal_entry_id??"");return{id:P,description:C.description??null,journal_entries:A.get(I)??null}})},enabled:(s==null?void 0:s.payroll_status)==="final"}),c=ot({mutationFn:async()=>{if(!n)throw new Error("Payroll run not found");await Qf.runPayrollTrial({payrollRunId:n})},onSuccess:()=>{r.invalidateQueries({queryKey:["payrollRun",n]}),J.success("Trial payroll run completed. Review the calculations before finalizing.")},onError:T=>{J.error(T.message||"Failed to run trial payroll")}}),u=ot({mutationFn:async()=>{if(!n)throw new Error("Payroll run not found");await $o(He(te,K.PAYROLL_RUNS,n),{payrollStatus:"draft",trialRunAt:null,trialRunBy:null,updatedAt:ye()})},onSuccess:()=>{r.invalidateQueries({queryKey:["payrollRun",n]}),J.success("Payroll reverted to draft. You can make changes and re-run trial.")},onError:T=>{J.error(T.message||"Failed to revert payroll")}}),d=ot({mutationFn:async()=>{if(!n)throw new Error("Payroll run not found");await Qf.finalizePayroll({payrollRunId:n})},onSuccess:()=>{r.invalidateQueries({queryKey:["payrollRun",n]}),r.invalidateQueries({queryKey:["payrollItems",n]}),r.invalidateQueries({queryKey:["payroll-journals",n]}),J.success("Payroll finalized and posted to General Ledger!")},onError:T=>{J.error(T.message||"Failed to finalize payroll")}}),h=()=>{if(!o||!s)return;const T=["Employee Number","Name","Basic Salary","Housing","Transport","Other Allowances","Gross Salary","Advances Deducted","Net Salary","PAYE (Employer)","NAPSA Employee (Employer)","NAPSA Employer","NHIMA Employee (Employer)","NHIMA Employer"],x=o.map(P=>{var C,I;return[((C=P.employees)==null?void 0:C.employee_number)??"",((I=P.employees)==null?void 0:I.full_name)??"",P.basic_salary,P.housing_allowance,P.transport_allowance,P.other_allowances,P.gross_salary,P.advances_deducted??0,P.net_salary,P.paye,P.napsa_employee,P.napsa_employer,P.nhima_employee,P.nhima_employer]}),S=[T.join(","),...x.map(P=>P.join(","))].join(`
`),_=new Blob([S],{type:"text/csv"}),p=window.URL.createObjectURL(_),A=document.createElement("a");A.href=p,A.download=`payroll_${vt(new Date(s.run_date),"yyyy-MM-dd")}.csv`,A.click(),J.success("Payroll exported successfully")},f=T=>{e(`/payroll/${n}/payslip/${T}`)},m=async()=>{!o||!s||!window.confirm(`Queue payslip emails for ${o.length} employees?`)||J.promise(async()=>{for(const x of o){const S=x.employees;S!=null&&S.email&&n&&await Qf.sendPayslipEmail({payrollRunId:n,employeeId:x.employee_id})}},{loading:"Queueing payslip emails...",success:"Payslip emails queued successfully!",error:"Failed to queue some emails."})},v=()=>{if(!o||!s)return;let T=`PAYSLIPS - ${new Date(s.period_start).toLocaleDateString()} to ${new Date(s.period_end).toLocaleDateString()}
`;T+="=".repeat(100)+`

`,o.forEach((A,P)=>{const C=A.employees??{full_name:"Unknown",employee_number:"-",position:null,department:null,tpin:null,napsa_number:null,nhima_number:null,bank_name:null,bank_account_number:null,email:null};T+=`PAYSLIP ${P+1}
`,T+="-".repeat(100)+`
`,T+=`Employee: ${C.full_name} (${C.employee_number})
`,T+=`Position: ${C.position||"N/A"}
`,T+=`Department: ${C.department||"N/A"}
`,T+=`TPIN: ${C.tpin||"N/A"}
`,T+=`NAPSA: ${C.napsa_number||"N/A"}
`,T+=`NHIMA: ${C.nhima_number||"N/A"}

`,T+=`EARNINGS:
`,T+=`  Basic Salary:        K${A.basic_salary.toFixed(2)}
`,T+=`  Housing Allowance:   K${A.housing_allowance.toFixed(2)}
`,T+=`  Transport Allowance: K${A.transport_allowance.toFixed(2)}
`,T+=`  Other Allowances:    K${A.other_allowances.toFixed(2)}
`,T+=`  Gross Salary:        K${A.gross_salary.toFixed(2)}

`,T+=`DEDUCTIONS:
`,T+=`  NAPSA (5%):          K${A.napsa_employee.toFixed(2)}
`,T+=`  NHIMA (1%):          K${A.nhima_employee.toFixed(2)}
`,T+=`  PAYE:                K${A.paye.toFixed(2)}
`,T+=`  Total Deductions:    K${A.total_deductions.toFixed(2)}

`,T+=`NET PAY:               K${A.net_salary.toFixed(2)}
`,T+=`
Bank: ${C.bank_name||"N/A"}
`,T+=`Account: ${C.bank_account_number||"N/A"}
`,T+=`
`+"=".repeat(100)+`

`});const x=new Blob([T],{type:"text/plain"}),S=window.URL.createObjectURL(x),_=document.createElement("a");_.href=S;const p=new Date(s.period_start).toLocaleDateString("en-GB",{month:"short",year:"numeric"});_.download=`Payslips_${p.replace(" ","_")}.txt`,document.body.appendChild(_),_.click(),document.body.removeChild(_),window.URL.revokeObjectURL(S),J.success("Batch payslips downloaded successfully!")},g=T=>{switch(T){case"draft":return i.jsx(Xe,{variant:"outline",className:"border-yellow-500 text-yellow-600",children:"Draft"});case"trial":return i.jsx(Xe,{variant:"secondary",className:"bg-blue-100 text-blue-700",children:"Trial Run"});case"final":return i.jsx(Xe,{className:"bg-green-600",children:"Finalized"});default:return i.jsx(Xe,{variant:"outline",children:"Unknown"})}},y=s==null?void 0:s.payroll_status,w=y==="draft",b=y==="trial",E=y==="final";return a?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx(Rn,{className:"h-8 w-8 animate-spin text-primary"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>e("/payroll"),children:[i.jsx(Uo,{className:"h-4 w-4 mr-2"}),"Back"]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Payroll Details"}),g(y),(s==null?void 0:s.payroll_number)&&i.jsx("span",{className:"text-sm text-muted-foreground font-mono",children:s.payroll_number})]}),i.jsx("p",{className:"text-muted-foreground",children:s&&i.jsxs(i.Fragment,{children:[vt(new Date(s.period_start),"dd MMM")," -"," ",vt(new Date(s.period_end),"dd MMM yyyy")]})})]})]}),i.jsxs("div",{className:"flex gap-2",children:[w&&i.jsxs(H,{onClick:()=>c.mutate(),disabled:c.isPending,className:"bg-blue-600 hover:bg-blue-700",children:[c.isPending?i.jsx(Rn,{className:"h-4 w-4 mr-2 animate-spin"}):i.jsx(I8,{className:"h-4 w-4 mr-2"}),"Run Trial Payroll"]}),b&&i.jsxs(i.Fragment,{children:[i.jsxs(H,{variant:"outline",onClick:()=>u.mutate(),disabled:u.isPending,children:[u.isPending?i.jsx(Rn,{className:"h-4 w-4 mr-2 animate-spin"}):i.jsx(Eoe,{className:"h-4 w-4 mr-2"}),"Revert to Draft"]}),i.jsxs(jh,{children:[i.jsx(ux,{asChild:!0,children:i.jsxs(H,{className:"bg-green-600 hover:bg-green-700",children:[i.jsx(Mo,{className:"h-4 w-4 mr-2"}),"Finalize Payroll"]})}),i.jsxs(_u,{children:[i.jsxs(ju,{children:[i.jsxs(Su,{className:"flex items-center gap-2",children:[i.jsx(Ga,{className:"h-5 w-5 text-amber-500"}),"Finalize Payroll"]}),i.jsxs(Eu,{className:"space-y-2",children:[i.jsx("p",{children:"This action will:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[i.jsx("li",{children:"Lock the payroll permanently - no further edits allowed"}),i.jsx("li",{children:"Post journal entries to the General Ledger"}),i.jsx("li",{children:"Create statutory liability accounts (PAYE, NAPSA, NHIMA)"}),i.jsx("li",{children:"Generate payroll number for reference"})]}),i.jsx("p",{className:"font-medium mt-4",children:"Are you sure you want to proceed?"})]})]}),i.jsxs(Nu,{children:[i.jsx(Tu,{children:"Cancel"}),i.jsxs(Au,{onClick:()=>d.mutate(),disabled:d.isPending,className:"bg-green-600 hover:bg-green-700",children:[d.isPending?i.jsx(Rn,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Finalize & Post to GL"]})]})]})]})]}),E&&i.jsxs(i.Fragment,{children:[i.jsx(H,{onClick:m,variant:"outline",children:"Email Payslips"}),i.jsx(H,{onClick:v,variant:"outline",children:"Download All"})]}),i.jsxs(H,{onClick:h,variant:"outline",children:[i.jsx(Es,{className:"mr-2 h-4 w-4"}),"Export CSV"]})]})]}),b&&i.jsx(Z,{className:"border-blue-200 bg-blue-50",children:i.jsx(re,{className:"py-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ga,{className:"h-5 w-5 text-blue-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-blue-900",children:"Trial Payroll Run"}),i.jsx("p",{className:"text-sm text-blue-700",children:'Review the calculations below. No GL entries have been posted. Click "Finalize Payroll" when ready.'})]})]})})}),E&&l&&l.length>0&&i.jsxs(Z,{className:"border-green-200 bg-green-50",children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(ne,{className:"text-lg flex items-center gap-2",children:[i.jsx(Qj,{className:"h-5 w-5 text-green-600"}),"General Ledger Postings"]})}),i.jsxs(re,{children:[i.jsx("div",{className:"space-y-2",children:l.map(T=>{var x,S;return i.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:(x=T.journal_entries)==null?void 0:x.reference_number}),i.jsx("p",{className:"text-sm text-muted-foreground",children:T.description})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm",children:((S=T.journal_entries)==null?void 0:S.entry_date)&&vt(new Date(T.journal_entries.entry_date),"dd MMM yyyy")}),i.jsx(Xe,{variant:"outline",className:"text-green-600 border-green-600",children:"Posted"})]})]},T.id)})}),i.jsx(H,{variant:"link",className:"mt-2 p-0 h-auto text-green-700",onClick:()=>e("/journal-entries"),children:"View all journal entries "})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(Z,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(St,{children:"Total Gross"}),i.jsx(ne,{className:"text-2xl",children:le(Number((s==null?void 0:s.total_gross)||0))})]})}),i.jsx(Z,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(St,{children:"Total Deductions"}),i.jsx(ne,{className:"text-2xl text-destructive",children:le(Number((s==null?void 0:s.total_deductions)||0))})]})}),i.jsx(Z,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(St,{children:"Total Net"}),i.jsx(ne,{className:"text-2xl text-primary",children:le(Number((s==null?void 0:s.total_net)||0))})]})}),i.jsx(Z,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(St,{children:"Employees"}),i.jsx(ne,{className:"text-2xl",children:(o==null?void 0:o.length)||0})]})})]}),i.jsxs(Z,{children:[i.jsxs(ee,{children:[i.jsx(ne,{children:"Payroll Items"}),i.jsx(St,{children:"Individual employee payroll calculations"})]}),i.jsx(re,{children:i.jsx("div",{className:"border rounded-lg overflow-x-auto",children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Employee"}),i.jsx(U,{className:"text-right",children:"Basic"}),i.jsx(U,{className:"text-right",children:"Allowances"}),i.jsx(U,{className:"text-right",children:"Gross"}),i.jsx(U,{className:"text-right",children:"PAYE"}),i.jsx(U,{className:"text-right",children:"NAPSA"}),i.jsx(U,{className:"text-right",children:"NHIMA"}),i.jsx(U,{className:"text-right",children:"Total Ded."}),i.jsx(U,{className:"text-right",children:"Net Salary"}),i.jsx(U,{className:"text-right",children:"Actions"})]})}),i.jsx(Ht,{children:o==null?void 0:o.map(T=>{var x,S;return i.jsxs(_e,{children:[i.jsx(B,{children:i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:((x=T.employees)==null?void 0:x.full_name)||"Unknown"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:((S=T.employees)==null?void 0:S.employee_number)||"-"})]})}),i.jsx(B,{className:"text-right",children:le(Number(T.basic_salary))}),i.jsx(B,{className:"text-right",children:le(Number(T.housing_allowance||0)+Number(T.transport_allowance||0)+Number(T.other_allowances||0))}),i.jsx(B,{className:"text-right font-medium",children:le(Number(T.gross_salary))}),i.jsx(B,{className:"text-right text-destructive",children:le(Number(T.paye))}),i.jsx(B,{className:"text-right text-destructive",children:le(Number(T.napsa_employee))}),i.jsx(B,{className:"text-right text-destructive",children:le(Number(T.nhima_employee))}),i.jsx(B,{className:"text-right text-destructive",children:le(Number(T.total_deductions))}),i.jsx(B,{className:"text-right font-medium text-primary",children:le(Number(T.net_salary))}),i.jsx(B,{className:"text-right",children:i.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>f(T.employee_id),children:[i.jsx(cr,{className:"h-4 w-4 mr-2"}),"Payslip"]})})]},T.id)})})]})})})]})]})}function AM({onUploaded:t}){const[e,n]=N.useState(!1),[r,s]=N.useState(""),a=N.useRef(null),o=dn(),{user:l}=ct(),{data:c}=je({queryKey:["company-settings",l==null?void 0:l.id],queryFn:async()=>{if(!l||!Co)return null;const f=await Ke.getPrimaryMembershipByUser(l.id);if(!f)return null;const[m,v]=await Promise.all([Ke.getCompanyById(f.companyId),Ke.getCompanySettings(f.companyId)]);return{companyId:f.companyId,companyName:(v==null?void 0:v.companyName)||(m==null?void 0:m.name)||"My Organization",logoUrl:(v==null?void 0:v.logoUrl)||(m==null?void 0:m.logoUrl)||null}},enabled:!!l}),u=ot({mutationFn:async({logoUrl:f,companyName:m})=>{if(!c)throw new Error("No company linked to current user.");await Ke.updateCompanyBasics({companyId:c.companyId,logoUrl:f,name:m})},onSuccess:()=>{o.invalidateQueries({queryKey:["company-settings"]}),o.invalidateQueries({queryKey:["company"]}),J.success("Settings updated successfully")},onError:f=>{const m=f instanceof Error?f.message:"Failed to update settings";J.error(m)}});N.useEffect(()=>{t&&t((c==null?void 0:c.logoUrl)||null)},[t,c==null?void 0:c.logoUrl]),N.useEffect(()=>{s((c==null?void 0:c.companyName)||"")},[c==null?void 0:c.companyName]);const d=async f=>{var v;const m=(v=f.target.files)==null?void 0:v[0];if(m){if(!c){J.error("No company linked to this user.");return}if(!m.type.startsWith("image/")){J.error("Please upload an image file");return}if(m.size>5*1024*1024){J.error("File size must be less than 5MB");return}n(!0);try{const g=await aNe.uploadCompanyLogo(c.companyId,m);await u.mutateAsync({logoUrl:g}),t==null||t(g)}catch(g){const y=g instanceof Error?g.message:"Failed to upload logo";J.error(y)}finally{n(!1)}}},h=()=>{const f=r.trim();!f||!c||f===c.companyName||u.mutate({companyName:f})};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"h-20 w-20 rounded-lg border-2 border-dashed border-border flex items-center justify-center overflow-hidden bg-muted",children:c!=null&&c.logoUrl?i.jsx("img",{src:c.logoUrl,alt:"Company Logo",className:"h-full w-full object-contain"}):i.jsx(jx,{className:"h-8 w-8 text-muted-foreground"})}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Company Logo"}),i.jsx("input",{ref:a,type:"file",accept:"image/*",onChange:d,className:"hidden"}),i.jsx(H,{variant:"outline",size:"sm",onClick:()=>{var f;return(f=a.current)==null?void 0:f.click()},disabled:e||!c,children:e?i.jsxs(i.Fragment,{children:[i.jsx(Rn,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):i.jsxs(i.Fragment,{children:[i.jsx(zo,{className:"h-4 w-4 mr-2"}),"Upload Logo"]})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Company Name"}),i.jsx(G,{value:r,placeholder:"Enter company name",onChange:f=>s(f.target.value),onBlur:h,disabled:!c})]})]})}const Ys=t=>Number(t??0),oc=t=>String(t??"");function uJe(){const{user:t}=ct(),e=Gn(),{runId:n,employeeId:r}=Pp(),[s,a]=N.useState(!1),[o,l]=N.useState(!1),{data:c}=Gu(),{data:u}=je({queryKey:["payrollRun",n],queryFn:async()=>{if(!n)return null;const _=await ki(He(te,K.PAYROLL_RUNS,n));if(!_.exists())return null;const p=_.data();return{id:_.id,period_start:oc(p.periodStart??p.period_start),period_end:oc(p.periodEnd??p.period_end),run_date:oc(p.runDate??p.run_date)}},enabled:!!(t&&n)}),{data:d,isLoading:h}=je({queryKey:["payrollItem",n,r],queryFn:async()=>{if(!n||!r)return null;const _=ve(te,K.PAYROLL_ITEMS),p=async(R,L)=>{const z=await $e(Ce(_,ge(R,"==",n),ge(L,"==",r),ni(1)));return z.empty?null:z.docs[0]},A=await p("payrollRunId","employeeId")??await p("payroll_run_id","employee_id");if(!A)return null;const P=A.data(),C=oc(P.employeeId??P.employee_id??r);let I=null;if(C){const R=await ki(He(te,K.EMPLOYEES,C));if(R.exists()){const L=R.data();I={full_name:oc(L.fullName??L.full_name),employee_number:oc(L.employeeNumber??L.employee_number),position:L.position??null,department:L.department??null,tpin:L.tpin??null,napsa_number:L.napsaNumber??L.napsa_number??null,nhima_number:L.nhimaNumber??L.nhima_number??null,bank_name:L.bankName??L.bank_name??null,bank_account_number:L.bankAccountNumber??L.bank_account_number??null,email:L.email??null}}}return{id:A.id,employee_id:C,basic_salary:Ys(P.basicSalary??P.basic_salary),housing_allowance:Ys(P.housingAllowance??P.housing_allowance),transport_allowance:Ys(P.transportAllowance??P.transport_allowance),other_allowances:Ys(P.otherAllowances??P.other_allowances),gross_salary:Ys(P.grossSalary??P.gross_salary),napsa_employee:Ys(P.napsaEmployee??P.napsa_employee),napsa_employer:Ys(P.napsaEmployer??P.napsa_employer),nhima_employee:Ys(P.nhimaEmployee??P.nhima_employee),nhima_employer:Ys(P.nhimaEmployer??P.nhima_employer),paye:Ys(P.paye),advances_deducted:Ys(P.advancesDeducted??P.advances_deducted),total_deductions:Ys(P.totalDeductions??P.total_deductions),net_salary:Ys(P.netSalary??P.net_salary),employees:I}},enabled:!!(t&&n&&r)}),{data:f}=je({queryKey:["payroll-additions",n,r],queryFn:async()=>{if(!n||!r)return[];const _=ve(te,K.PAYROLL_ADDITIONS);let p=await $e(Ce(_,ge("payrollRunId","==",n),ge("employeeId","==",r)));return p.empty&&(p=await $e(Ce(_,ge("payroll_run_id","==",n),ge("employee_id","==",r)))),p.docs.map(A=>{const P=A.data();return{id:A.id,type:oc(P.type),name:oc(P.name),amount:Ys(P.amount)}})},enabled:!!(t&&n&&r)}),m=()=>{window.print(),J.success("Print dialog opened")},v=async()=>{if(!(g!=null&&g.email)){J.error("Employee email not found");return}a(!0);try{if(!n||!r)throw new Error("Invalid payroll context");await Qf.sendPayslipEmail({payrollRunId:n,employeeId:r}),J.success(`Payslip queued for ${g.email}`)}catch{J.error("Failed to send payslip email")}finally{a(!1)}};if(h)return i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});const g=d==null?void 0:d.employees,y=(f==null?void 0:f.filter(_=>_.type!=="advance"))||[],w=(f==null?void 0:f.filter(_=>_.type==="advance"))||[],b=y.reduce((_,p)=>_+Number(p.amount),0),E=w.reduce((_,p)=>_+Number(p.amount),0),T=Number(d==null?void 0:d.gross_salary)+b,x=Number(d==null?void 0:d.total_deductions)+E,S=Number(d==null?void 0:d.net_salary)-E;return i.jsxs("div",{className:"space-y-6 max-w-3xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between print:hidden",children:[i.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>e(`/payroll/${n}`),children:[i.jsx(Uo,{className:"h-4 w-4 mr-2"}),"Back to Payroll Run"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(rr,{open:o,onOpenChange:l,children:[i.jsx(Zr,{asChild:!0,children:i.jsxs(H,{variant:"outline",size:"sm",children:[i.jsx(Jy,{className:"h-4 w-4 mr-2"}),"Company Settings"]})}),i.jsxs(Wn,{children:[i.jsxs(Hn,{children:[i.jsx(Kn,{children:"Company Settings"}),i.jsx(Yu,{children:"Upload your company logo and set your company name"})]}),i.jsx(AM,{})]})]}),i.jsx(H,{variant:"outline",onClick:v,disabled:s||!(g!=null&&g.email),children:s?i.jsxs(i.Fragment,{children:[i.jsx(Rn,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ku,{className:"mr-2 h-4 w-4"}),"Email Payslip"]})}),i.jsxs(H,{onClick:m,children:[i.jsx(Es,{className:"mr-2 h-4 w-4"}),"Print / Download"]})]})]}),i.jsxs("div",{id:"payslip-content",className:"bg-card border rounded-lg shadow-lg print:border-0 print:shadow-none",children:[i.jsx("div",{className:"bg-primary text-primary-foreground p-6 rounded-t-lg print:rounded-none",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-primary-foreground/20 p-3 rounded-lg h-16 w-16 flex items-center justify-center overflow-hidden",children:c!=null&&c.logoUrl?i.jsx("img",{src:c.logoUrl,alt:"Company Logo",className:"h-full w-full object-contain"}):i.jsx(jx,{className:"h-10 w-10"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold",children:(c==null?void 0:c.companyName)||"ZedBooks NGO"}),i.jsx("p",{className:"text-primary-foreground/80 text-sm",children:"Accounting Suite"})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("h2",{className:"text-xl font-bold",children:"PAYSLIP"}),i.jsx("p",{className:"text-primary-foreground/80 text-sm",children:u&&vt(new Date(u.period_start),"MMMM yyyy")})]})]})}),i.jsx("div",{className:"bg-muted/50 px-6 py-3 border-b text-sm",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Pay Period:"}),i.jsxs("span",{className:"font-medium",children:[u&&vt(new Date(u.period_start),"dd MMM yyyy")," - ",u&&vt(new Date(u.period_end),"dd MMM yyyy")]})]})}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-3",children:"Employee Details"}),i.jsx("div",{className:"bg-muted/30 rounded-lg p-4",children:i.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-3 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Name:"}),i.jsx("span",{className:"font-semibold",children:g==null?void 0:g.full_name})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Employee No:"}),i.jsx("span",{className:"font-semibold",children:g==null?void 0:g.employee_number})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Position:"}),i.jsx("span",{className:"font-semibold",children:(g==null?void 0:g.position)||"N/A"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Department:"}),i.jsx("span",{className:"font-semibold",children:(g==null?void 0:g.department)||"N/A"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"TPIN:"}),i.jsx("span",{className:"font-semibold",children:(g==null?void 0:g.tpin)||"N/A"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"NAPSA No:"}),i.jsx("span",{className:"font-semibold",children:(g==null?void 0:g.napsa_number)||"N/A"})]})]})})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-3",children:"Earnings"}),i.jsx("div",{className:"border rounded-lg overflow-hidden",children:i.jsx("table",{className:"w-full text-sm",children:i.jsxs("tbody",{children:[i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"Basic Salary"}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(d==null?void 0:d.basic_salary))})]}),i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"Housing Allowance"}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(d==null?void 0:d.housing_allowance))})]}),i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"Transport Allowance"}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(d==null?void 0:d.transport_allowance))})]}),i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"Other Allowances"}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(d==null?void 0:d.other_allowances))})]}),y.map(_=>i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:_.name}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(_.amount))})]},_.id)),i.jsxs("tr",{className:"bg-primary/5",children:[i.jsx("td",{className:"px-4 py-3 font-semibold",children:"Gross Pay"}),i.jsx("td",{className:"px-4 py-3 text-right font-bold text-primary",children:le(T)})]})]})})})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-3",children:"Deductions"}),i.jsx("div",{className:"border rounded-lg overflow-hidden",children:i.jsx("table",{className:"w-full text-sm",children:i.jsxs("tbody",{children:[i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"NAPSA (5%)"}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(d==null?void 0:d.napsa_employee))})]}),i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"NHIMA (1%)"}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(d==null?void 0:d.nhima_employee))})]}),i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"PAYE"}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(d==null?void 0:d.paye))})]}),Number(d==null?void 0:d.advances_deducted)>0&&i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"Advances (Previous)"}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(d==null?void 0:d.advances_deducted))})]}),w.map(_=>i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:_.name}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(_.amount))})]},_.id)),i.jsxs("tr",{className:"bg-destructive/5",children:[i.jsx("td",{className:"px-4 py-3 font-semibold",children:"Total Deductions"}),i.jsx("td",{className:"px-4 py-3 text-right font-bold text-destructive",children:le(x)})]})]})})})]})]}),i.jsx("div",{className:"bg-primary rounded-lg p-5 text-primary-foreground",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-primary-foreground/80 text-sm",children:"Net Pay"}),i.jsx("p",{className:"text-xs text-primary-foreground/60",children:"Amount payable to employee"})]}),i.jsx("p",{className:"text-3xl font-bold",children:le(S)})]})}),(g==null?void 0:g.bank_name)&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-3",children:"Payment Details"}),i.jsx("div",{className:"bg-muted/30 rounded-lg p-4",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Bank:"}),i.jsx("span",{className:"font-semibold",children:g.bank_name})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Account Number:"}),i.jsx("span",{className:"font-semibold",children:g.bank_account_number})]})]})})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Employer Contributions (for reference only):"}),i.jsxs("div",{className:"flex gap-6 text-xs text-muted-foreground",children:[i.jsxs("span",{children:["NAPSA: ",le(Number(d==null?void 0:d.napsa_employer))]}),i.jsxs("span",{children:["NHIMA: ",le(Number(d==null?void 0:d.nhima_employer))]})]})]})]}),i.jsxs("div",{className:"bg-muted/30 px-6 py-4 rounded-b-lg border-t text-center",children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"This is a computer-generated payslip. Please keep it confidential."}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Generated on ",vt(new Date,"dd MMMM yyyy 'at' HH:mm")]})]})]})]})}function dJe(){const{user:t}=ct(),e=Gn(),{id:n}=Pp(),r=dn(),[s,a]=N.useState(!1),{data:o,isLoading:l}=je({queryKey:["payrollRun",n],queryFn:async()=>{if(!n)return null;const y=await ki(He(te,K.PAYROLL_RUNS,n));if(!y.exists())return null;const w=y.data();return{id:y.id,status:w.status??w.payrollStatus??"draft",period_start:String(w.periodStart??w.period_start??""),period_end:String(w.periodEnd??w.period_end??""),approved_at:w.approvedAt??w.approved_at??null,total_gross:Number(w.totalGross??w.total_gross??0),total_deductions:Number(w.totalDeductions??w.total_deductions??0),total_net:Number(w.totalNet??w.total_net??0),notes:w.notes??null}},enabled:!!(t&&n)}),{data:c}=je({queryKey:["payrollItems",n],queryFn:async()=>{if(!n)return[];const y=ve(te,K.PAYROLL_ITEMS);let w=await $e(Ce(y,ge("payrollRunId","==",n)));w.empty&&(w=await $e(Ce(y,ge("payroll_run_id","==",n))));const b=w.docs.map(S=>({id:S.id,row:S.data()})),E=Array.from(new Set(b.map(({row:S})=>String(S.employeeId??S.employee_id??"")).filter(Boolean))),T=await Promise.all(E.map(async S=>{const _=await ki(He(te,K.EMPLOYEES,S));return{employeeDocId:S,snap:_}})),x=new Map;return T.forEach(({employeeDocId:S,snap:_})=>{if(!_.exists())return;const p=_.data();x.set(S,{id:_.id,full_name:String(p.fullName??p.full_name??""),employee_number:String(p.employeeNumber??p.employee_number??""),position:p.position??null,department:p.department??null,email:p.email??null,bank_account_number:p.bankAccountNumber??p.bank_account_number??null})}),b.map(({id:S,row:_})=>{const p=String(_.employeeId??_.employee_id??"");return{id:S,employee_id:p,basic_salary:Number(_.basicSalary??_.basic_salary??0),housing_allowance:Number(_.housingAllowance??_.housing_allowance??0),transport_allowance:Number(_.transportAllowance??_.transport_allowance??0),other_allowances:Number(_.otherAllowances??_.other_allowances??0),gross_salary:Number(_.grossSalary??_.gross_salary??0),napsa_employee:Number(_.napsaEmployee??_.napsa_employee??0),nhima_employee:Number(_.nhimaEmployee??_.nhima_employee??0),paye:Number(_.paye??0),advances_deducted:Number(_.advancesDeducted??_.advances_deducted??0),total_deductions:Number(_.totalDeductions??_.total_deductions??0),net_salary:Number(_.netSalary??_.net_salary??0),employees:x.get(p)??null}})},enabled:!!(t&&n)}),{data:u}=je({queryKey:["payrollAdditions",n],queryFn:async()=>{if(!n)return[];const y=ve(te,K.PAYROLL_ADDITIONS);let w=await $e(Ce(y,ge("payrollRunId","==",n)));w.empty&&(w=await $e(Ce(y,ge("payroll_run_id","==",n))));const b=w.docs.map(S=>({id:S.id,row:S.data()})),E=Array.from(new Set(b.map(({row:S})=>String(S.employeeId??S.employee_id??"")).filter(Boolean))),T=await Promise.all(E.map(async S=>{const _=await ki(He(te,K.EMPLOYEES,S));return{employeeDocId:S,snap:_}})),x=new Map;return T.forEach(({employeeDocId:S,snap:_})=>{if(!_.exists())return;const p=_.data();x.set(S,{full_name:String(p.fullName??p.full_name??""),employee_number:String(p.employeeNumber??p.employee_number??"")})}),b.map(({id:S,row:_})=>{const p=String(_.employeeId??_.employee_id??"");return{id:S,type:String(_.type??""),name:String(_.name??""),amount:Number(_.amount??0),employees:x.get(p)??null}})},enabled:!!(t&&n)}),d=ot({mutationFn:async()=>{if(!n||!t)throw new Error("Not authenticated");await $o(He(te,K.PAYROLL_RUNS,n),{status:"approved",approvedAt:new Date().toISOString(),approvedBy:t.id,updatedAt:ye()})},onSuccess:()=>{r.invalidateQueries({queryKey:["payrollRun",n]}),J.success("Payroll approved successfully!")},onError:()=>{J.error("Failed to approve payroll")}}),h=ot({mutationFn:async()=>{if(!n)throw new Error("Payroll run not found");await $o(He(te,K.PAYROLL_RUNS,n),{status:"draft",updatedAt:ye()})},onSuccess:()=>{r.invalidateQueries({queryKey:["payrollRun",n]}),J.success("Payroll rejected and returned to draft"),e("/payroll")},onError:()=>{J.error("Failed to reject payroll")}}),f=async()=>{if(!c||c.length===0){J.error("No payroll items to email");return}const y=c.filter(E=>{var T;return!!((T=E.employees)!=null&&T.email)});if(y.length===0){J.error("No employees have email addresses configured");return}a(!0);let w=0,b=0;for(const E of y)try{if(!n)continue;await Qf.sendPayslipEmail({payrollRunId:n,employeeId:E.employee_id}),w++}catch{b++}a(!1),w>0&&J.success(`Successfully sent ${w} payslip email(s)`),b>0&&J.error(`Failed to send ${b} email(s)`)};if(l)return i.jsx("div",{children:"Loading..."});if(!o)return i.jsx("div",{children:"Payroll run not found"});const m=o.status==="approved"||o.status==="completed",v=(u==null?void 0:u.reduce((y,w)=>y+(w.type!=="advance"?Number(w.amount):0),0))||0,g=(u==null?void 0:u.reduce((y,w)=>y+(w.type==="advance"?Number(w.amount):0),0))||0;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>e("/payroll"),children:[i.jsx(Uo,{className:"h-4 w-4 mr-2"}),"Back"]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Payroll Approval"}),i.jsxs("p",{className:"text-muted-foreground",children:["Review and approve payroll for"," ",vt(new Date(o.period_start),"dd MMM")," -"," ",vt(new Date(o.period_end),"dd MMM yyyy")]})]}),m&&i.jsxs(H,{onClick:f,disabled:s,children:[s?i.jsx(Rn,{className:"h-4 w-4 mr-2 animate-spin"}):i.jsx(ku,{className:"h-4 w-4 mr-2"}),s?"Sending...":"Email All Payslips"]})]}),m&&i.jsxs("div",{className:"bg-green-100 dark:bg-green-900/30 border border-green-200 dark:border-green-800 rounded-lg p-4 flex items-center gap-3",children:[i.jsx(Mo,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-green-800 dark:text-green-200",children:"This payroll has been approved"}),o.approved_at&&i.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400",children:["Approved on ",vt(new Date(o.approved_at),"dd MMM yyyy 'at' HH:mm")]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(Z,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(St,{children:"Employees"}),i.jsx(ne,{className:"text-2xl",children:(c==null?void 0:c.length)||0})]})}),i.jsx(Z,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(St,{children:"Total Gross Pay"}),i.jsx(ne,{className:"text-2xl text-primary",children:le(Number(o.total_gross||0))})]})}),i.jsx(Z,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(St,{children:"Total Deductions"}),i.jsx(ne,{className:"text-2xl text-destructive",children:le(Number(o.total_deductions||0))})]})}),i.jsx(Z,{className:"bg-primary/5 border-primary/20",children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(St,{children:"Total Net Pay"}),i.jsx(ne,{className:"text-2xl text-primary",children:le(Number(o.total_net||0))})]})})]}),u&&u.length>0&&i.jsxs(Z,{children:[i.jsxs(ee,{children:[i.jsx(ne,{children:"Payroll Additions & Advances"}),i.jsx(St,{children:"Custom earnings, bonuses, overtime, and advance deductions for this payroll run"})]}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Additional Earnings"}),i.jsx("p",{className:"text-xl font-bold text-primary",children:le(v)})]}),i.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Advance Deductions"}),i.jsx("p",{className:"text-xl font-bold text-destructive",children:le(g)})]}),i.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Additions"}),i.jsx("p",{className:"text-xl font-bold",children:u.length})]})]}),i.jsx("div",{className:"border rounded-lg",children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Employee"}),i.jsx(U,{children:"Type"}),i.jsx(U,{children:"Name"}),i.jsx(U,{className:"text-right",children:"Amount"})]})}),i.jsx(Ht,{children:u.map(y=>{var w,b;return i.jsxs(_e,{children:[i.jsx(B,{children:i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:(w=y.employees)==null?void 0:w.full_name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:(b=y.employees)==null?void 0:b.employee_number})]})}),i.jsx(B,{children:i.jsx(Xe,{variant:y.type==="advance"?"destructive":"default",children:y.type})}),i.jsx(B,{children:y.name}),i.jsxs(B,{className:`text-right font-medium ${y.type==="advance"?"text-destructive":"text-primary"}`,children:[y.type==="advance"?"-":"",le(Number(y.amount))]})]},y.id)})})]})})]})]}),i.jsxs(Z,{children:[i.jsxs(ee,{children:[i.jsx(ne,{children:"Employee Breakdown"}),i.jsx(St,{children:"Review individual payroll calculations"})]}),i.jsx(re,{children:i.jsx("div",{className:"border rounded-lg",children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Employee"}),i.jsx(U,{children:"Department"}),i.jsx(U,{className:"text-right",children:"Gross"}),i.jsx(U,{className:"text-right",children:"PAYE"}),i.jsx(U,{className:"text-right",children:"NAPSA"}),i.jsx(U,{className:"text-right",children:"NHIMA"}),i.jsx(U,{className:"text-right",children:"Advances"}),i.jsx(U,{className:"text-right",children:"Total Deductions"}),i.jsx(U,{className:"text-right",children:"Net Pay"})]})}),i.jsx(Ht,{children:c==null?void 0:c.map(y=>{var w,b,E;return i.jsxs(_e,{children:[i.jsx(B,{children:i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:((w=y.employees)==null?void 0:w.full_name)||"Unknown"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:((b=y.employees)==null?void 0:b.employee_number)||"-"})]})}),i.jsx(B,{children:((E=y.employees)==null?void 0:E.department)||"-"}),i.jsx(B,{className:"text-right",children:le(Number(y.gross_salary))}),i.jsx(B,{className:"text-right",children:le(Number(y.paye))}),i.jsx(B,{className:"text-right",children:le(Number(y.napsa_employee))}),i.jsx(B,{className:"text-right",children:le(Number(y.nhima_employee))}),i.jsx(B,{className:"text-right text-destructive",children:le(Number(y.advances_deducted||0))}),i.jsx(B,{className:"text-right text-destructive",children:le(Number(y.total_deductions))}),i.jsx(B,{className:"text-right font-medium",children:le(Number(y.net_salary))})]},y.id)})})]})})})]}),o.notes&&i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"Notes"})}),i.jsx(re,{children:i.jsx("p",{className:"text-muted-foreground",children:o.notes})})]}),!m&&i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsxs(jh,{children:[i.jsx(ux,{asChild:!0,children:i.jsxs(H,{variant:"outline",className:"text-destructive border-destructive",children:[i.jsx(E8,{className:"h-4 w-4 mr-2"}),"Reject"]})}),i.jsxs(_u,{children:[i.jsxs(ju,{children:[i.jsx(Su,{children:"Reject Payroll?"}),i.jsx(Eu,{children:"This will return the payroll to draft status for corrections. The payroll will need to be resubmitted for approval."})]}),i.jsxs(Nu,{children:[i.jsx(Tu,{children:"Cancel"}),i.jsx(Au,{onClick:()=>h.mutate(),className:"bg-destructive text-destructive-foreground",children:"Reject Payroll"})]})]})]}),i.jsxs(jh,{children:[i.jsx(ux,{asChild:!0,children:i.jsxs(H,{children:[i.jsx(Mo,{className:"h-4 w-4 mr-2"}),"Approve Payroll"]})}),i.jsxs(_u,{children:[i.jsxs(ju,{children:[i.jsx(Su,{children:"Approve Payroll?"}),i.jsxs(Eu,{children:["By approving this payroll, you confirm that all calculations are correct and payments can proceed.",i.jsx("br",{}),i.jsx("br",{}),i.jsxs("strong",{children:["Total Net Pay: ",le(Number(o.total_net||0))]})]})]}),i.jsxs(Nu,{children:[i.jsx(Tu,{children:"Cancel"}),i.jsx(Au,{onClick:()=>d.mutate(),children:"Approve Payroll"})]})]})]})]})]})}const hJe=Vu({employee_id:Ue().min(1,"Employee is required"),amount:Ue().min(1,"Amount is required"),date_given:Ue().min(1,"Date given is required"),months_to_repay:Ue().min(1,"Months to repay is required"),reason:Ue().optional()});function fJe(){const{user:t}=ct(),[e,n]=N.useState(!1),r=dn(),s=$u({resolver:Fu(hJe),defaultValues:{employee_id:"",amount:"",date_given:vt(new Date,"yyyy-MM-dd"),months_to_repay:"1",reason:""}}),a=s.watch("amount"),o=s.watch("months_to_repay"),l=a&&o?(parseFloat(a)/parseInt(o)).toFixed(2):"0.00",{data:c}=je({queryKey:["advances-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const x=await Ke.getPrimaryMembershipByUser(t.id);return(x==null?void 0:x.companyId)??null},enabled:!!t}),{data:u}=je({queryKey:["employees-active"],queryFn:async()=>{if(!c)return[];const x=ve(te,K.EMPLOYEES);return(await $e(Ce(x,ge("companyId","==",c)))).docs.map(_=>{const p=_.data();return{id:_.id,full_name:String(p.fullName??p.full_name??""),employee_number:p.employeeNumber??p.employee_number??null,department:p.department??null,employment_status:String(p.employmentStatus??p.employment_status??"active")}}).filter(_=>_.employment_status==="active").sort((_,p)=>_.full_name.localeCompare(p.full_name))},enabled:!!c}),{data:d,isLoading:h}=je({queryKey:["advances",c],queryFn:async()=>{if(!c)return[];const x=ve(te,K.ADVANCES),_=(await $e(Ce(x,ge("companyId","==",c)))).docs.map(P=>{var L;const C=P.data(),I=C.dateGiven??C.date_given,R=typeof I=="string"?I:((L=I==null?void 0:I.toDate)==null?void 0:L.call(I).toISOString().slice(0,10))??"";return{id:P.id,employee_id:String(C.employeeId??C.employee_id??""),amount:Number(C.amount??0),date_given:R,reason:C.reason??null,status:String(C.status??"pending"),months_to_repay:Number(C.monthsToRepay??C.months_to_repay??1),monthly_deduction:Number(C.monthlyDeduction??C.monthly_deduction??0),remaining_balance:Number(C.remainingBalance??C.remaining_balance??C.amount??0),months_deducted:Number(C.monthsDeducted??C.months_deducted??0),created_at:String(C.createdAt??C.created_at??"")}}),p=Array.from(new Set(_.map(P=>P.employee_id).filter(Boolean))),A=new Map;if(p.length>0){const P=ve(te,K.EMPLOYEES);(await $e(Ce(P,ge(kh(),"in",p.slice(0,30))))).docs.forEach(I=>{const R=I.data();A.set(I.id,{full_name:String(R.fullName??R.full_name??""),employee_number:R.employeeNumber??R.employee_number??null,department:R.department??null})})}return _.map(P=>({...P,employees:A.get(P.employee_id)??null})).sort((P,C)=>String(C.created_at).localeCompare(String(P.created_at)))},enabled:!!c}),f=ot({mutationFn:async x=>{if(!t||!c)throw new Error("Not authenticated");const S=parseFloat(x.amount),_=parseInt(x.months_to_repay),p=S/_;await Nn(ve(te,K.ADVANCES),{companyId:c,employeeId:x.employee_id,amount:S,dateGiven:x.date_given,reason:x.reason||null,status:"pending",monthsToRepay:_,monthlyDeduction:p,remainingBalance:S,monthsDeducted:0,createdBy:t.id,createdAt:ye(),updatedAt:ye()})},onSuccess:()=>{r.invalidateQueries({queryKey:["advances",c]}),J.success("Advance recorded successfully"),n(!1),s.reset()},onError:x=>{J.error("Failed to record advance: "+x.message)}}),m=ot({mutationFn:async({id:x,status:S})=>{await dr(He(te,K.ADVANCES,x),{status:S,updatedAt:ye()},{merge:!0})},onSuccess:()=>{r.invalidateQueries({queryKey:["advances",c]}),J.success("Advance status updated")},onError:()=>{J.error("Failed to update status")}}),v=ot({mutationFn:async x=>{const S=(x.months_deducted||0)+1,_=Number(x.remaining_balance)-Number(x.monthly_deduction),p=S>=x.months_to_repay;await dr(He(te,K.ADVANCES,x.id),{monthsDeducted:S,remainingBalance:Math.max(0,_),status:p?"deducted":"pending",updatedAt:ye()},{merge:!0})},onSuccess:()=>{r.invalidateQueries({queryKey:["advances",c]}),J.success("Deduction recorded")},onError:()=>{J.error("Failed to record deduction")}}),g=x=>{f.mutate(x)},y=x=>{switch(x){case"pending":return i.jsxs(Xe,{variant:"outline",className:"gap-1",children:[i.jsx(Pi,{className:"h-3 w-3"})," Pending"]});case"deducted":return i.jsxs(Xe,{variant:"default",className:"gap-1 bg-green-600",children:[i.jsx(Mo,{className:"h-3 w-3"})," Fully Repaid"]});case"cancelled":return i.jsxs(Xe,{variant:"destructive",className:"gap-1",children:[i.jsx(E8,{className:"h-3 w-3"})," Cancelled"]});default:return i.jsx(Xe,{variant:"secondary",children:x})}},w=(d==null?void 0:d.reduce((x,S)=>x+Number(S.amount),0))||0,b=(d==null?void 0:d.filter(x=>x.status==="pending"))||[],E=b.reduce((x,S)=>x+Number(S.remaining_balance||S.amount),0),T=(d==null?void 0:d.filter(x=>x.status==="deducted").reduce((x,S)=>x+Number(S.amount),0))||0;return h?i.jsx("div",{children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Employee Advances"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage salary advances and repayment schedules"})]}),i.jsxs(H,{onClick:()=>n(!0),children:[i.jsx(bn,{className:"mr-2 h-4 w-4"}),"Record Advance"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(Z,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(St,{children:"Total Advances"}),i.jsx(ne,{className:"text-2xl",children:(d==null?void 0:d.length)||0})]})}),i.jsx(Z,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(St,{children:"Total Amount Issued"}),i.jsx(ne,{className:"text-2xl text-primary",children:le(w)})]})}),i.jsxs(Z,{className:"border-amber-200 dark:border-amber-800",children:[i.jsxs(ee,{className:"pb-2",children:[i.jsx(St,{children:"Outstanding Balance"}),i.jsx(ne,{className:"text-2xl text-amber-600",children:le(E)})]}),i.jsx(re,{children:i.jsxs("p",{className:"text-xs text-muted-foreground",children:[b.length," active advance(s)"]})})]}),i.jsx(Z,{className:"border-green-200 dark:border-green-800",children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(St,{children:"Fully Repaid"}),i.jsx(ne,{className:"text-2xl text-green-600",children:le(T)})]})})]}),i.jsxs(Z,{children:[i.jsxs(ee,{children:[i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(Ra,{className:"h-5 w-5"}),"All Advances"]}),i.jsx(St,{children:"View and manage employee salary advances with repayment tracking"})]}),i.jsx(re,{children:i.jsx("div",{className:"rounded-lg border",children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Employee"}),i.jsx(U,{className:"text-right",children:"Total Amount"}),i.jsx(U,{children:"Repayment Schedule"}),i.jsx(U,{children:"Progress"}),i.jsx(U,{className:"text-right",children:"Remaining"}),i.jsx(U,{children:"Status"}),i.jsx(U,{children:"Actions"})]})}),i.jsxs(Ht,{children:[d==null?void 0:d.map(x=>{const S=x.employees,_=x.months_deducted||0,p=x.months_to_repay||1,A=x.remaining_balance??x.amount,P=_/p*100;return i.jsxs(_e,{children:[i.jsx(B,{children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:S==null?void 0:S.full_name}),i.jsx("div",{className:"text-sm text-muted-foreground",children:S==null?void 0:S.employee_number}),i.jsx("div",{className:"text-xs text-muted-foreground",children:vt(new Date(x.date_given),"dd MMM yyyy")})]})}),i.jsx(B,{className:"text-right font-medium",children:le(Number(x.amount))}),i.jsx(B,{children:i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[i.jsx(Xd,{className:"h-3 w-3 text-muted-foreground"}),p," month",p>1?"s":""]}),i.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[i.jsx(Ka,{className:"h-3 w-3"}),le(Number(x.monthly_deduction||x.amount)),"/month"]})]})}),i.jsx(B,{children:i.jsxs("div",{className:"space-y-1 min-w-[120px]",children:[i.jsx(rm,{value:P,className:"h-2"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[_," of ",p," payments"]})]})}),i.jsx(B,{className:"text-right font-medium text-amber-600",children:le(Number(A))}),i.jsx(B,{children:y(x.status)}),i.jsx(B,{children:x.status==="pending"&&i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs(jh,{children:[i.jsx(ux,{asChild:!0,children:i.jsx(H,{size:"sm",variant:"outline",children:"Record Deduction"})}),i.jsxs(_u,{children:[i.jsxs(ju,{children:[i.jsx(Su,{children:"Record Monthly Deduction?"}),i.jsxs(Eu,{children:["This will record a deduction of ",le(Number(x.monthly_deduction||x.amount))," for ",S==null?void 0:S.full_name,".",i.jsx("br",{}),i.jsx("br",{}),i.jsx("strong",{children:"Current Progress:"})," ",_," of ",p," payments",i.jsx("br",{}),i.jsx("strong",{children:"Remaining after this:"})," ",le(Math.max(0,Number(A)-Number(x.monthly_deduction||x.amount)))]})]}),i.jsxs(Nu,{children:[i.jsx(Tu,{children:"Cancel"}),i.jsx(Au,{onClick:()=>v.mutate(x),children:"Record Deduction"})]})]})]}),i.jsxs(jh,{children:[i.jsx(ux,{asChild:!0,children:i.jsx(H,{size:"sm",variant:"ghost",className:"text-destructive",children:"Cancel"})}),i.jsxs(_u,{children:[i.jsxs(ju,{children:[i.jsx(Su,{children:"Cancel Advance?"}),i.jsx(Eu,{children:"This will cancel the advance. This action cannot be undone."})]}),i.jsxs(Nu,{children:[i.jsx(Tu,{children:"Keep"}),i.jsx(Au,{className:"bg-destructive text-destructive-foreground",onClick:()=>m.mutate({id:x.id,status:"cancelled"}),children:"Cancel Advance"})]})]})]})]})})]},x.id)}),(d==null?void 0:d.length)===0&&i.jsx(_e,{children:i.jsxs(B,{colSpan:7,className:"text-center py-12",children:[i.jsx(Ra,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),i.jsx("h3",{className:"text-lg font-medium",children:"No advances recorded"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Start by recording an employee advance"}),i.jsxs(H,{onClick:()=>n(!0),children:[i.jsx(bn,{className:"h-4 w-4 mr-2"}),"Record Advance"]})]})})]})]})})})]}),i.jsx(rr,{open:e,onOpenChange:n,children:i.jsxs(Wn,{className:"max-w-md",children:[i.jsxs(Hn,{children:[i.jsx(Kn,{children:"Record Employee Advance"}),i.jsx(Yu,{children:"Enter the advance details and repayment schedule"})]}),i.jsx(Q1,{...s,children:i.jsxs("form",{onSubmit:s.handleSubmit(g),className:"space-y-4",children:[i.jsx(rt,{control:s.control,name:"employee_id",render:({field:x})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Employee"}),i.jsxs(kt,{onValueChange:x.onChange,value:x.value,children:[i.jsx(nt,{children:i.jsx(At,{children:i.jsx(Rt,{placeholder:"Select employee"})})}),i.jsx(Tt,{children:u==null?void 0:u.map(S=>i.jsxs(be,{value:S.id,children:[S.full_name," (",S.employee_number,")"]},S.id))})]}),i.jsx(it,{})]})}),i.jsx(rt,{control:s.control,name:"amount",render:({field:x})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Total Amount (ZMW)"}),i.jsx(nt,{children:i.jsx(G,{type:"number",step:"0.01",placeholder:"0.00",...x})}),i.jsx(it,{})]})}),i.jsx(rt,{control:s.control,name:"date_given",render:({field:x})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Date Given"}),i.jsx(nt,{children:i.jsx(G,{type:"date",...x})}),i.jsx(it,{})]})}),i.jsx(rt,{control:s.control,name:"months_to_repay",render:({field:x})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Months to Repay"}),i.jsxs(kt,{onValueChange:x.onChange,value:x.value,children:[i.jsx(nt,{children:i.jsx(At,{children:i.jsx(Rt,{placeholder:"Select months"})})}),i.jsx(Tt,{children:[1,2,3,4,5,6,9,12].map(S=>i.jsxs(be,{value:S.toString(),children:[S," month",S>1?"s":""]},S))})]}),i.jsxs(qd,{children:["Monthly deduction: ",i.jsx("strong",{children:le(parseFloat(l))})]}),i.jsx(it,{})]})}),i.jsx(rt,{control:s.control,name:"reason",render:({field:x})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Reason (Optional)"}),i.jsx(nt,{children:i.jsx(hr,{placeholder:"Enter reason for advance",...x})}),i.jsx(it,{})]})}),i.jsxs(eS,{children:[i.jsx(H,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),i.jsx(H,{type:"submit",disabled:f.isPending,children:f.isPending?"Recording...":"Record Advance"})]})]})})]})})]})}const x6=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},mJe=t=>{if(!t)return"";if(typeof t=="string")return t.slice(0,10);if(t instanceof Date)return t.toISOString().slice(0,10);if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString().slice(0,10)}return""},nf=t=>{const e=Number(t);return Number.isFinite(e)?e:0},pJe=t=>t==null?"":String(t).replaceAll('"','""'),xA=(t,e,n)=>{const r=[t,...e].map(l=>l.map(c=>`"${pJe(c)}"`).join(",")).join(`
`),s=new Blob([r],{type:"text/csv"}),a=window.URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download=n,o.click(),window.URL.revokeObjectURL(a)};function gJe(){var E,T;const{user:t}=ct(),[e,n]=N.useState(vt(new Date,"yyyy-MM")),r=je({queryKey:["zra-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const x=await Ke.getPrimaryMembershipByUser(t.id);return(x==null?void 0:x.companyId)??null},enabled:!!t}),s=r.data??null,a=`${e}-01`,o=`${e}-31`,l=je({queryKey:["payroll-runs-zra",s,e],queryFn:async()=>{if(!s)return[];const x=ve(te,K.PAYROLL_RUNS);return(await $e(Ce(x,ge("companyId","==",s)))).docs.map(_=>{const p=_.data();return{id:_.id,runDate:mJe(p.runDate??p.run_date)}}).filter(_=>_.runDate>=a&&_.runDate<=o).sort((_,p)=>p.runDate.localeCompare(_.runDate))},enabled:!!s}),c=je({queryKey:["payroll-items-zra",s,e,(E=l.data)==null?void 0:E.map(x=>x.id).join(",")],queryFn:async()=>{if(!s||!l.data||l.data.length===0)return[];const x=l.data.map(I=>I.id),S=ve(te,K.PAYROLL_ITEMS),_=x6(x,30),A=(await Promise.all(_.map(I=>$e(Ce(S,ge("payrollRunId","in",I)))))).flatMap(I=>I.docs.map(R=>{const L=R.data();return{id:R.id,employeeId:String(L.employeeId??L.employee_id??""),payrollRunId:String(L.payrollRunId??L.payroll_run_id??""),grossSalary:nf(L.grossSalary??L.gross_salary),paye:nf(L.paye),napsaEmployee:nf(L.napsaEmployee??L.napsa_employee),napsaEmployer:nf(L.napsaEmployer??L.napsa_employer),nhimaEmployee:nf(L.nhimaEmployee??L.nhima_employee),nhimaEmployer:nf(L.nhimaEmployer??L.nhima_employer)}})),P=Array.from(new Set(A.map(I=>I.employeeId).filter(Boolean))),C=new Map;if(P.length>0){const I=ve(te,K.EMPLOYEES),R=x6(P,30);(await Promise.all(R.map(z=>$e(Ce(I,ge(kh(),"in",z)))))).forEach(z=>{z.docs.forEach(W=>{const M=W.data();C.set(W.id,{id:W.id,fullName:String(M.fullName??M.full_name??""),employeeNumber:M.employeeNumber??M.employee_number??null,tpin:M.tpin??null,napsaNumber:M.napsaNumber??M.napsa_number??null,nhimaNumber:M.nhimaNumber??M.nhima_number??null})})})}return A.map(I=>({...I,employee:C.get(I.employeeId)??null}))},enabled:!!s&&!!l.data&&(((T=l.data)==null?void 0:T.length)??0)>0}),u=c.data??[],d=r.isLoading||l.isLoading||c.isLoading,h=N.useMemo(()=>u.reduce((x,S)=>x+S.paye,0),[u]),f=N.useMemo(()=>u.reduce((x,S)=>x+S.napsaEmployee,0),[u]),m=N.useMemo(()=>u.reduce((x,S)=>x+S.napsaEmployer,0),[u]),v=N.useMemo(()=>u.reduce((x,S)=>x+S.nhimaEmployee,0),[u]),g=N.useMemo(()=>u.reduce((x,S)=>x+S.nhimaEmployer,0),[u]),y=()=>{u.length!==0&&xA(["TPIN","Employee Number","Employee Name","Gross Salary","PAYE"],u.map(x=>{var S,_,p;return[((S=x.employee)==null?void 0:S.tpin)||"N/A",((_=x.employee)==null?void 0:_.employeeNumber)||"",((p=x.employee)==null?void 0:p.fullName)||"",x.grossSalary,x.paye]}),`PAYE-Report-${e}.csv`)},w=()=>{u.length!==0&&xA(["NAPSA Number","Employee Number","Employee Name","Gross Salary","NAPSA Employee (5%)","NAPSA Employer (5%)","Total NAPSA"],u.map(x=>{var S,_,p;return[((S=x.employee)==null?void 0:S.napsaNumber)||"N/A",((_=x.employee)==null?void 0:_.employeeNumber)||"",((p=x.employee)==null?void 0:p.fullName)||"",x.grossSalary,x.napsaEmployee,x.napsaEmployer,x.napsaEmployee+x.napsaEmployer]}),`NAPSA-Report-${e}.csv`)},b=()=>{u.length!==0&&xA(["NHIMA Number","Employee Number","Employee Name","Gross Salary","NHIMA Employee (1%)","NHIMA Employer (1%)","Total NHIMA"],u.map(x=>{var S,_,p;return[((S=x.employee)==null?void 0:S.nhimaNumber)||"N/A",((_=x.employee)==null?void 0:_.employeeNumber)||"",((p=x.employee)==null?void 0:p.fullName)||"",x.grossSalary,x.nhimaEmployee,x.nhimaEmployer,x.nhimaEmployee+x.nhimaEmployer]}),`NHIMA-Report-${e}.csv`)};return d?i.jsx("div",{children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"ZRA Compliance Reports"}),i.jsx("p",{className:"text-muted-foreground",children:"Generate statutory compliance reports for ZRA, NAPSA, and NHIMA"})]}),i.jsxs("div",{className:"max-w-xs",children:[i.jsx(X,{children:"Select Month"}),i.jsx(G,{type:"month",value:e,onChange:x=>n(x.target.value)})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{className:"text-sm font-medium",children:"Total PAYE"})}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:le(h)}),i.jsxs(H,{className:"mt-4 w-full",variant:"outline",onClick:y,disabled:u.length===0,children:[i.jsx(Es,{className:"mr-2 h-4 w-4"}),"Export PAYE Report"]})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{className:"text-sm font-medium",children:"Total NAPSA"})}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:le(f+m)}),i.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Employee: ",le(f)," | Employer: ",le(m)]}),i.jsxs(H,{className:"mt-4 w-full",variant:"outline",onClick:w,disabled:u.length===0,children:[i.jsx(Es,{className:"mr-2 h-4 w-4"}),"Export NAPSA Report"]})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{className:"text-sm font-medium",children:"Total NHIMA"})}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:le(v+g)}),i.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Employee: ",le(v)," | Employer: ",le(g)]}),i.jsxs(H,{className:"mt-4 w-full",variant:"outline",onClick:b,disabled:u.length===0,children:[i.jsx(Es,{className:"mr-2 h-4 w-4"}),"Export NHIMA Report"]})]})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"Employee Details"})}),i.jsx(re,{children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Employee"}),i.jsx(U,{children:"TPIN"}),i.jsx(U,{children:"NAPSA No."}),i.jsx(U,{children:"NHIMA No."}),i.jsx(U,{children:"Gross"}),i.jsx(U,{children:"PAYE"}),i.jsx(U,{children:"NAPSA"}),i.jsx(U,{children:"NHIMA"})]})}),i.jsxs(Ht,{children:[u.map(x=>{var S,_,p,A,P;return i.jsxs(_e,{children:[i.jsx(B,{children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:((S=x.employee)==null?void 0:S.fullName)||"Unknown Employee"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:((_=x.employee)==null?void 0:_.employeeNumber)||"-"})]})}),i.jsx(B,{className:"text-sm",children:((p=x.employee)==null?void 0:p.tpin)||"N/A"}),i.jsx(B,{className:"text-sm",children:((A=x.employee)==null?void 0:A.napsaNumber)||"N/A"}),i.jsx(B,{className:"text-sm",children:((P=x.employee)==null?void 0:P.nhimaNumber)||"N/A"}),i.jsx(B,{children:le(x.grossSalary)}),i.jsx(B,{children:le(x.paye)}),i.jsx(B,{children:le(x.napsaEmployee)}),i.jsx(B,{children:le(x.nhimaEmployee)})]},x.id)}),u.length===0&&i.jsx(_e,{children:i.jsx(B,{colSpan:8,className:"text-center text-muted-foreground",children:"No payroll data found for the selected month"})})]})]})})]})]})}function yJe(){const t=Gn(),[e,n]=N.useState(""),[r,s]=N.useState(""),[a,o]=N.useState(null),l=()=>{const u=Number(r)||0;if(u<=0)return;const d=uZ(u),h=dZ(u),f=hZ(u),m=d+h.employee+f.employee,v=u-m,g=u+h.employer+f.employer;o({paye:d,napsaEmployee:h.employee,napsaEmployer:h.employer,nhimaEmployee:f.employee,nhimaEmployer:f.employer,totalDeductions:m,netSalary:v,employerCost:g})},c=[{gross:5e3,description:"Below first threshold"},{gross:6e3,description:"In second band"},{gross:8e3,description:"In third band"},{gross:12e3,description:"In fourth band"},{gross:45e3,description:"High income example"}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>t("/dashboard"),children:[i.jsx(Uo,{className:"h-4 w-4 mr-2"}),"Back"]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Tax Calculator"}),i.jsx("p",{className:"text-muted-foreground",children:"Calculate PAYE, NAPSA, NHIMA, and net salary"})]})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[i.jsxs(Z,{children:[i.jsxs(ee,{children:[i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(Zy,{className:"h-5 w-5"}),"Calculate Taxes"]}),i.jsx(St,{children:"Enter salary details to see tax breakdown"})]}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"basicSalary",children:"Basic Salary (ZMW)"}),i.jsx(G,{id:"basicSalary",type:"number",step:"0.01",placeholder:"Enter basic salary",value:e,onChange:u=>n(u.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"grossSalary",children:"Gross Salary (ZMW)"}),i.jsx(G,{id:"grossSalary",type:"number",step:"0.01",placeholder:"Enter gross salary",value:r,onChange:u=>s(u.target.value)})]}),i.jsx(H,{onClick:l,className:"w-full",children:"Calculate"}),a&&i.jsxs("div",{className:"mt-6 space-y-4 pt-4 border-t",children:[i.jsx("h3",{className:"font-semibold",children:"Results"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"PAYE Tax:"}),i.jsx("span",{className:"font-medium",children:le(a.paye)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"NAPSA (Employee):"}),i.jsx("span",{className:"font-medium",children:le(a.napsaEmployee)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"NHIMA (Employee):"}),i.jsx("span",{className:"font-medium",children:le(a.nhimaEmployee)})]}),i.jsxs("div",{className:"flex justify-between text-sm font-semibold pt-2 border-t",children:[i.jsx("span",{children:"Total Deductions:"}),i.jsx("span",{children:le(a.totalDeductions)})]}),i.jsxs("div",{className:"flex justify-between text-lg font-bold pt-2 border-t",children:[i.jsx("span",{children:"Net Salary:"}),i.jsx("span",{className:"text-primary",children:le(a.netSalary)})]})]}),i.jsxs("div",{className:"mt-4 pt-4 border-t space-y-2",children:[i.jsx("h4",{className:"font-semibold text-sm",children:"Employer Contributions"}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"NAPSA (Employer):"}),i.jsx("span",{className:"font-medium",children:le(a.napsaEmployer)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"NHIMA (Employer):"}),i.jsx("span",{className:"font-medium",children:le(a.nhimaEmployer)})]}),i.jsxs("div",{className:"flex justify-between text-sm font-semibold pt-2 border-t",children:[i.jsx("span",{children:"Total Employer Cost:"}),i.jsx("span",{children:le(a.employerCost)})]})]})]})]})]}),i.jsxs(Z,{children:[i.jsxs(ee,{children:[i.jsx(ne,{children:"Tax Band Reference"}),i.jsx(St,{children:"Zambian PAYE tax bands (2025/26)"})]}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"border rounded-lg p-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm font-medium",children:"K0 - K5,100"}),i.jsx("span",{className:"text-sm font-bold",children:"0%"})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"First K5,100 is tax-free"})]}),i.jsxs("div",{className:"border rounded-lg p-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm font-medium",children:"K5,100.01 - K7,100"}),i.jsx("span",{className:"text-sm font-bold",children:"20%"})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Next K2,000 taxed at 20%"})]}),i.jsxs("div",{className:"border rounded-lg p-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm font-medium",children:"K7,100.01 - K9,200"}),i.jsx("span",{className:"text-sm font-bold",children:"30%"})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Next K2,100 taxed at 30%"})]}),i.jsxs("div",{className:"border rounded-lg p-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm font-medium",children:"Above K9,200"}),i.jsx("span",{className:"text-sm font-bold",children:"37%"})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Balance taxed at 37%"})]})]}),i.jsxs("div",{className:"mt-6 pt-4 border-t",children:[i.jsx("h4",{className:"font-semibold text-sm mb-3",children:"Quick Examples"}),i.jsx("div",{className:"space-y-2",children:c.map(u=>i.jsxs(H,{variant:"outline",size:"sm",className:"w-full justify-between",onClick:()=>{n(u.gross.toString()),s(u.gross.toString())},children:[i.jsx("span",{className:"text-xs",children:u.description}),i.jsx("span",{className:"font-semibold",children:le(u.gross)})]},u.gross))})]}),i.jsxs("div",{className:"mt-4 p-3 bg-muted rounded-lg text-xs space-y-1",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"NAPSA:"})," 5% of gross salary, capped at K1,342.00 (employee & employer)"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"NHIMA:"})," 1% of gross salary, capped at K250.00 (employee & employer)"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"PAYE:"})," Progressive tax on gross salary"]})]})]})]})]})]})}function vJe(t){const e=[];let n="",r=!1;for(let s=0;s<t.length;s++){const a=t[s];a==='"'?r&&t[s+1]==='"'?(n+='"',s++):r=!r:a===","&&!r?(e.push(n.trim()),n=""):n+=a}return e.push(n.trim()),e}function xJe(t){return t.replace(/^\uFEFF/,"").split(/\r?\n/).filter(r=>r.trim()).map(vJe)}function bJe(t,e){const n={success:!1,data:[],errors:[],totalRows:0,successfulRows:0};if(t.length<2)return n.errors.push("File must contain at least a header row and one data row"),n;const r=t[0].map(l=>l.toLowerCase().trim()),s=t.slice(1);n.totalRows=s.length;const a={};e.forEach(l=>{const c=r.findIndex(u=>u===l.header.toLowerCase()||u===l.key.toLowerCase());c!==-1&&(a[l.key]=c)});const o=e.filter(l=>l.required&&a[l.key]===void 0).map(l=>l.header);return o.length>0?(n.errors.push(`Missing required columns: ${o.join(", ")}`),n):(s.forEach((l,c)=>{try{const u={};let d=!1;e.forEach(h=>{var m;const f=a[h.key];if(f!==void 0&&f<l.length){const v=((m=l[f])==null?void 0:m.trim())||"";if(h.required&&!v){n.errors.push(`Row ${c+2}: Missing required value for ${h.header}`),d=!0;return}u[h.key]=h.transform?h.transform(v):v}else h.required&&(n.errors.push(`Row ${c+2}: Missing required value for ${h.header}`),d=!0)}),d||(n.data.push(u),n.successfulRows++)}catch(u){n.errors.push(`Row ${c+2}: ${u instanceof Error?u.message:"Unknown error"}`)}}),n.success=n.successfulRows>0,n)}function wJe(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=s=>{var a;return e((a=s.target)==null?void 0:a.result)},r.onerror=()=>n(new Error("Failed to read file")),r.readAsText(t)})}async function _Je(t,e){try{const n=await wJe(t),r=xJe(n);return bJe(r,e)}catch(n){return{success:!1,data:[],errors:[n instanceof Error?n.message:"Failed to parse file"],totalRows:0,successfulRows:0}}}const ws={toNumber:t=>{const e=parseFloat(t.replace(/[^0-9.-]/g,""));return isNaN(e)?0:e},toDate:t=>{if(!t)return"";try{return new Date(t).toISOString().split("T")[0]}catch{return t}},toBoolean:t=>["true","yes","1","y"].includes(t.toLowerCase()),trim:t=>t.trim()};function jJe(t){const e=t.map(c=>c.header),n=t.map(c=>c.key.includes("date")?"2025-01-01":c.key.includes("amount")||c.key.includes("price")||c.key.includes("salary")?"1000.00":c.key.includes("email")?"example@email.com":c.key.includes("phone")?"+260971234567":`Example ${c.header}`),r=[e.join(","),n.join(",")].join(`
`),s="\uFEFF",a=new Blob([s+r],{type:"text/csv;charset=utf-8;"}),o=window.URL.createObjectURL(a),l=document.createElement("a");l.href=o,l.download="import-template.csv",l.click(),window.URL.revokeObjectURL(o),J.success("Template downloaded")}function ng({open:t,onOpenChange:e,title:n,description:r,columns:s,onImport:a,templateName:o="import-template"}){const[l,c]=N.useState("upload"),[u,d]=N.useState(null),[h,f]=N.useState(!1),[m,v]=N.useState(!1),[g,y]=N.useState(null),w=N.useRef(null),b=async S=>{var A;const _=(A=S.target.files)==null?void 0:A[0];if(!_)return;const p=await _Je(_,s);d(p),c("preview")},E=async()=>{if(!(!u||u.data.length===0)){f(!0),y(null),c("importing");try{await a(u.data),v(!0),c("complete")}catch(S){y(S instanceof Error?S.message:"Import failed"),c("preview")}finally{f(!1)}}},T=()=>{c("upload"),d(null),v(!1),y(null),w.current&&(w.current.value=""),e(!1)},x=()=>{jJe(s)};return i.jsx(rr,{open:t,onOpenChange:T,children:i.jsxs(Wn,{className:"max-w-2xl",children:[i.jsxs(Hn,{children:[i.jsxs(Kn,{className:"flex items-center gap-2",children:[i.jsx(poe,{className:"h-5 w-5"}),n]}),r&&i.jsx(Yu,{children:r})]}),l==="upload"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>{var S;return(S=w.current)==null?void 0:S.click()},children:[i.jsx(zo,{className:"h-10 w-10 mx-auto text-muted-foreground mb-4"}),i.jsx("p",{className:"text-lg font-medium",children:"Drop your CSV file here"}),i.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"or click to browse"}),i.jsx("input",{ref:w,type:"file",accept:".csv",onChange:b,className:"hidden"})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"Need a template?"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Download our CSV template with the correct headers"})]}),i.jsxs(H,{variant:"outline",size:"sm",onClick:x,children:[i.jsx(Es,{className:"h-4 w-4 mr-2"}),"Template"]})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[i.jsx("p",{className:"font-medium mb-2",children:"Expected columns:"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:s.map(S=>i.jsxs(Xe,{variant:S.required?"default":"outline",children:[S.header,S.required&&" *"]},S.key))})]})]}),l==="preview"&&u&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Import Preview"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[u.successfulRows," of ",u.totalRows," rows ready to import"]})]}),u.success?i.jsxs(Xe,{variant:"default",className:"bg-success",children:[i.jsx(vT,{className:"h-3 w-3 mr-1"}),"Valid"]}):i.jsxs(Xe,{variant:"destructive",children:[i.jsx(Ci,{className:"h-3 w-3 mr-1"}),"Has Errors"]})]}),u.errors.length>0&&i.jsxs(gp,{variant:"destructive",children:[i.jsx(Ci,{className:"h-4 w-4"}),i.jsxs(yp,{children:[i.jsxs("p",{className:"font-medium mb-2",children:["Found ",u.errors.length," error(s):"]}),i.jsx(Vd,{className:"h-24",children:i.jsxs("ul",{className:"list-disc list-inside text-sm space-y-1",children:[u.errors.slice(0,10).map((S,_)=>i.jsx("li",{children:S},_)),u.errors.length>10&&i.jsxs("li",{children:["...and ",u.errors.length-10," more"]})]})})]})]}),g&&i.jsxs(gp,{variant:"destructive",children:[i.jsx(Ci,{className:"h-4 w-4"}),i.jsx(yp,{children:g})]}),u.data.length>0&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium mb-2",children:"Preview (first 5 rows):"}),i.jsx(Vd,{className:"h-40 border rounded",children:i.jsx("div",{className:"p-2 text-xs font-mono",children:u.data.slice(0,5).map((S,_)=>i.jsxs("div",{className:"py-1 border-b last:border-0",children:[JSON.stringify(S,null,0).slice(0,100),"..."]},_))})})]})]}),l==="importing"&&i.jsxs("div",{className:"py-8 text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),i.jsx("p",{className:"text-lg font-medium",children:"Importing data..."}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Please wait while we process your data"})]}),l==="complete"&&i.jsxs("div",{className:"py-8 text-center",children:[i.jsx(vT,{className:"h-12 w-12 text-success mx-auto mb-4"}),i.jsx("p",{className:"text-lg font-medium",children:"Import Complete!"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Successfully imported ",(u==null?void 0:u.successfulRows)||0," records"]})]}),i.jsxs(eS,{children:[l==="upload"&&i.jsx(H,{variant:"outline",onClick:T,children:"Cancel"}),l==="preview"&&i.jsxs(i.Fragment,{children:[i.jsx(H,{variant:"outline",onClick:()=>c("upload"),children:"Back"}),i.jsxs(H,{onClick:E,disabled:!(u!=null&&u.success)||u.data.length===0,children:["Import ",(u==null?void 0:u.successfulRows)||0," Records"]})]}),l==="complete"&&i.jsx(H,{onClick:T,children:"Done"})]})]})})}function Vh(t,e,n){if(t.length===0){console.warn("No data to export");return}const r=e.map(d=>d.header),s=t.map(d=>e.map(h=>{const f=d[h.key],v=(h.formatter?h.formatter(f):String(f??"")).replace(/"/g,'""');return v.includes(",")||v.includes('"')||v.includes(`
`)?`"${v}"`:v})),a=[r.join(","),...s.map(d=>d.join(","))].join(`
`),o="\uFEFF",l=new Blob([o+a],{type:"text/csv;charset=utf-8;"}),c=window.URL.createObjectURL(l),u=document.createElement("a");u.href=c,u.download=`${n}.csv`,u.click(),window.URL.revokeObjectURL(c)}function NJe(t){return(typeof t=="number"?t:parseFloat(String(t))||0).toFixed(2)}function SJe(t){if(!t)return"";try{return new Date(String(t)).toISOString().split("T")[0]}catch{return String(t)}}const EJe=[{header:"Name",key:"name",required:!0,transform:ws.trim},{header:"Email",key:"email",transform:ws.trim},{header:"Phone",key:"phone",transform:ws.trim},{header:"Address",key:"address",transform:ws.trim},{header:"TPIN",key:"tpin",transform:ws.trim},{header:"Contact Person",key:"contact_person",transform:ws.trim},{header:"Notes",key:"notes",transform:ws.trim},{header:"Grant Reference",key:"grant_reference",transform:ws.trim}],AJe=[{header:"Name",key:"name"},{header:"Email",key:"email"},{header:"Phone",key:"phone"},{header:"TPIN",key:"tpin"},{header:"Contact Person",key:"contact_person"},{header:"Address",key:"address"},{header:"Grant Reference",key:"grant_reference"},{header:"Notes",key:"notes"}],TJe=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n};function CJe(){const t=Gn(),e=dn(),{user:n}=ct(),[r,s]=N.useState(""),[a,o]=N.useState(!1),[l,c]=N.useState(!1),[u,d]=N.useState(null),[h,f]=N.useState({name:"",email:"",phone:"",address:"",tpin:"",contact_person:"",notes:"",project_id:"",grant_reference:""}),{data:m,isLoading:v}=je({queryKey:["customers",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const p=await Ke.getPrimaryMembershipByUser(n.id);if(!(p!=null&&p.companyId))return[];const A=ve(te,K.CUSTOMERS);return(await $e(Ce(A,ge("companyId","==",p.companyId)))).docs.map(C=>{const I=C.data();return{id:C.id,name:String(I.name??""),email:I.email??null,phone:I.phone??null,address:I.address??null,tpin:I.tpin??null,contact_person:I.contactPerson??I.contact_person??null,notes:I.notes??null,project_id:I.projectId??I.project_id??null,grant_reference:I.grantReference??I.grant_reference??null}}).sort((C,I)=>C.name.localeCompare(I.name))},enabled:!!n}),g=ot({mutationFn:async p=>{if(!n)throw new Error("You must be logged in");const A=await Ke.getPrimaryMembershipByUser(n.id);if(!(A!=null&&A.companyId))throw new Error("No company profile found for your account");await Nn(ve(te,K.CUSTOMERS),{companyId:A.companyId,userId:n.id,name:p.name,email:p.email||null,phone:p.phone||null,address:p.address||null,tpin:p.tpin||null,contactPerson:p.contact_person||null,notes:p.notes||null,projectId:p.project_id||null,grantReference:p.grant_reference||null,createdAt:ye(),updatedAt:ye()})},onSuccess:()=>{e.invalidateQueries({queryKey:["customers",n==null?void 0:n.id]}),J.success("Customer created successfully"),b()},onError:p=>{J.error("Failed to create customer: "+(p instanceof Error?p.message:"Unknown error"))}}),y=ot({mutationFn:async({id:p,data:A})=>{await dr(He(te,K.CUSTOMERS,p),{name:A.name,email:A.email||null,phone:A.phone||null,address:A.address||null,tpin:A.tpin||null,contactPerson:A.contact_person||null,notes:A.notes||null,projectId:A.project_id||null,grantReference:A.grant_reference||null,updatedAt:ye()},{merge:!0})},onSuccess:()=>{e.invalidateQueries({queryKey:["customers",n==null?void 0:n.id]}),J.success("Customer updated successfully"),b()},onError:p=>{J.error("Failed to update customer: "+(p instanceof Error?p.message:"Unknown error"))}}),w=ot({mutationFn:async p=>{await Za(He(te,K.CUSTOMERS,p))},onSuccess:()=>{e.invalidateQueries({queryKey:["customers",n==null?void 0:n.id]}),J.success("Customer deleted successfully")},onError:p=>{J.error("Failed to delete customer: "+(p instanceof Error?p.message:"Unknown error"))}}),b=()=>{f({name:"",email:"",phone:"",address:"",tpin:"",contact_person:"",notes:"",project_id:"",grant_reference:""}),d(null),o(!1)},E=p=>{d(p),f({name:p.name,email:p.email||"",phone:p.phone||"",address:p.address||"",tpin:p.tpin||"",contact_person:p.contact_person||"",notes:p.notes||"",project_id:p.project_id||"",grant_reference:p.grant_reference||""}),o(!0)},T=p=>{p.preventDefault(),u?y.mutate({id:u.id,data:h}):g.mutate(h)},x=m==null?void 0:m.filter(p=>{var A,P;return p.name.toLowerCase().includes(r.toLowerCase())||((A=p.email)==null?void 0:A.toLowerCase().includes(r.toLowerCase()))||((P=p.phone)==null?void 0:P.includes(r))}),S=async p=>{if(!n)throw new Error("You must be logged in");const A=await Ke.getPrimaryMembershipByUser(n.id);if(!(A!=null&&A.companyId))throw new Error("No company profile found for your account");const P=p.map(R=>({companyId:A.companyId,userId:n.id,name:String(R.name||""),email:R.email||null,phone:R.phone||null,address:R.address||null,tpin:R.tpin||null,contactPerson:R.contact_person||null,notes:R.notes||null,projectId:null,grantReference:R.grant_reference||null,createdAt:ye(),updatedAt:ye()})),C=ve(te,K.CUSTOMERS),I=TJe(P,400);for(const R of I){const L=kl(te);R.forEach(z=>{L.set(He(C),z)}),await L.commit()}e.invalidateQueries({queryKey:["customers",n==null?void 0:n.id]}),J.success(`Imported ${p.length} customers`)},_=()=>{if(!m||m.length===0){J.error("No customers to export");return}Vh(m,AJe,"customers-export"),J.success("Customers exported")};return v?i.jsx("div",{children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Customers"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your customers and their information"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(H,{variant:"outline",onClick:()=>c(!0),children:[i.jsx(zo,{className:"mr-2 h-4 w-4"}),"Import"]}),i.jsxs(H,{variant:"outline",onClick:_,children:[i.jsx(Es,{className:"mr-2 h-4 w-4"}),"Export"]}),i.jsxs(rr,{open:a,onOpenChange:p=>{o(p),p||b()},children:[i.jsx(Zr,{asChild:!0,children:i.jsxs(H,{children:[i.jsx(bn,{className:"mr-2 h-4 w-4"}),"Add Customer"]})}),i.jsxs(Wn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsx(Hn,{children:i.jsx(Kn,{children:u?"Edit Customer":"Add New Customer"})}),i.jsxs("form",{onSubmit:T,className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"name",children:"Customer Name *"}),i.jsx(G,{id:"name",value:h.name,onChange:p=>f({...h,name:p.target.value}),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"contact_person",children:"Contact Person"}),i.jsx(G,{id:"contact_person",value:h.contact_person,onChange:p=>f({...h,contact_person:p.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"email",children:"Email"}),i.jsx(G,{id:"email",type:"email",value:h.email,onChange:p=>f({...h,email:p.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"phone",children:"Phone"}),i.jsx(G,{id:"phone",value:h.phone,onChange:p=>f({...h,phone:p.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"tpin",children:"TPIN"}),i.jsx(G,{id:"tpin",value:h.tpin,onChange:p=>f({...h,tpin:p.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"project_id",children:"Project Reference"}),i.jsx(G,{id:"project_id",value:h.project_id,onChange:p=>f({...h,project_id:p.target.value}),placeholder:"For NGO project tracking"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"grant_reference",children:"Grant Reference"}),i.jsx(G,{id:"grant_reference",value:h.grant_reference,onChange:p=>f({...h,grant_reference:p.target.value}),placeholder:"For donor/grant tracking"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"address",children:"Address"}),i.jsx(hr,{id:"address",value:h.address,onChange:p=>f({...h,address:p.target.value}),rows:2})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"notes",children:"Notes"}),i.jsx(hr,{id:"notes",value:h.notes,onChange:p=>f({...h,notes:p.target.value}),rows:2})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{type:"button",variant:"outline",onClick:b,children:"Cancel"}),i.jsxs(H,{type:"submit",children:[u?"Update":"Create"," Customer"]})]})]})]})]})]})]}),i.jsx(ng,{open:l,onOpenChange:c,title:"Import Customers",description:"Upload a CSV file to import customers in bulk",columns:EJe,onImport:S}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(fi,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{placeholder:"Search customers...",value:r,onChange:p=>s(p.target.value),className:"pl-10"})]})})}),i.jsx(re,{children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Name"}),i.jsx(U,{children:"Contact Person"}),i.jsx(U,{children:"Email"}),i.jsx(U,{children:"Phone"}),i.jsx(U,{children:"TPIN"}),i.jsx(U,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ht,{children:[x==null?void 0:x.map(p=>i.jsxs(_e,{children:[i.jsx(B,{className:"font-medium",children:p.name}),i.jsx(B,{children:p.contact_person||"-"}),i.jsx(B,{children:p.email||"-"}),i.jsx(B,{children:p.phone||"-"}),i.jsx(B,{children:p.tpin||"-"}),i.jsx(B,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>t(`/quotations/new?customer=${p.id}`),title:"Create Quotation",children:i.jsx(Nm,{className:"h-4 w-4"})}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>t(`/invoices/new?customer=${p.id}`),title:"Create Invoice",children:i.jsx(cr,{className:"h-4 w-4"})}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>E(p),children:i.jsx(_p,{className:"h-4 w-4"})}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>w.mutate(p.id),children:i.jsx(Ts,{className:"h-4 w-4"})})]})})]},p.id)),(x==null?void 0:x.length)===0&&i.jsx(_e,{children:i.jsx(B,{colSpan:6,className:"text-center text-muted-foreground",children:"No customers found"})})]})]})})]})]})}const PJe=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},IJe=t=>{if(!t)return"";if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return""};function kJe(){const t=Gn(),e=dn(),{user:n}=ct(),[r,s]=N.useState(""),[a,o]=N.useState(!1),{data:l}=Gu(),[c,u]=N.useState({customer_id:"",order_type:"sale",notes:""}),{data:d,isLoading:h}=je({queryKey:["sales-orders",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const w=await Ke.getPrimaryMembershipByUser(n.id);if(!(w!=null&&w.companyId))return[];const b=ve(te,K.SALES_ORDERS),T=(await $e(Ce(b,ge("companyId","==",w.companyId)))).docs.map(_=>{const p=_.data();return{id:_.id,orderNumber:String(p.orderNumber??p.order_number??""),orderDate:IJe(p.orderDate??p.order_date),customerId:p.customerId??p.customer_id??null,customerName:"-",orderType:String(p.orderType??p.order_type??"sale"),subtotal:Number(p.subtotal??0),vatAmount:Number(p.vatAmount??p.vat_amount??0),total:Number(p.total??0),status:String(p.status??"pending")}}),x=Array.from(new Set(T.map(_=>_.customerId).filter(Boolean))),S=new Map;if(x.length>0){const _=ve(te,K.CUSTOMERS),p=PJe(x,30);(await Promise.all(p.map(P=>$e(Ce(_,ge(kh(),"in",P)))))).forEach(P=>{P.docs.forEach(C=>{const I=C.data();S.set(C.id,String(I.name??"-"))})})}return T.map(_=>({..._,customerName:_.customerId&&S.get(_.customerId)||"-"})).sort((_,p)=>String(p.orderDate).localeCompare(String(_.orderDate)))},enabled:!!n}),{data:f}=je({queryKey:["customers",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const w=await Ke.getPrimaryMembershipByUser(n.id);if(!(w!=null&&w.companyId))return[];const b=ve(te,K.CUSTOMERS);return(await $e(Ce(b,ge("companyId","==",w.companyId)))).docs.map(T=>{const x=T.data();return{id:T.id,name:String(x.name??"")}}).sort((T,x)=>T.name.localeCompare(x.name))},enabled:!!n}),m=ot({mutationFn:async w=>{if(!n)throw new Error("You must be logged in");const b=await Ke.getPrimaryMembershipByUser(n.id);if(!(b!=null&&b.companyId))throw new Error("No company profile found for your account");const E=`SO-${Date.now()}`;await Nn(ve(te,K.SALES_ORDERS),{companyId:b.companyId,userId:n.id,customerId:w.customer_id||null,orderType:w.order_type,notes:w.notes||null,orderNumber:E,orderDate:new Date().toISOString().slice(0,10),subtotal:0,vatAmount:0,total:0,status:"pending",createdAt:ye(),updatedAt:ye()})},onSuccess:()=>{e.invalidateQueries({queryKey:["sales-orders",n==null?void 0:n.id]}),J.success("Sales order created successfully"),o(!1),u({customer_id:"",order_type:"sale",notes:""})},onError:w=>{J.error("Failed to create order: "+(w instanceof Error?w.message:"Unknown error"))}}),v=w=>{switch(w){case"completed":case"accepted":return"default";case"pending":case"draft":return"secondary";case"cancelled":case"rejected":return"destructive";default:return"outline"}},g=w=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(w),y=d==null?void 0:d.filter(w=>w.orderNumber.toLowerCase().includes(r.toLowerCase())||w.customerName.toLowerCase().includes(r.toLowerCase()));return h?i.jsx("div",{children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Sales & Orders"}),i.jsxs("p",{className:"text-muted-foreground",children:["Manage sales transactions and orders",(l==null?void 0:l.isVatRegistered)&&i.jsx("span",{className:"ml-2 text-xs bg-primary/10 text-primary px-2 py-0.5 rounded",children:"VAT Registered (16%)"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(H,{variant:"outline",onClick:()=>t("/quotations/new"),children:[i.jsx(Nm,{className:"mr-2 h-4 w-4"}),"New Quotation"]}),i.jsxs(rr,{open:a,onOpenChange:o,children:[i.jsx(Zr,{asChild:!0,children:i.jsxs(H,{children:[i.jsx(bn,{className:"mr-2 h-4 w-4"}),"New Order"]})}),i.jsxs(Wn,{children:[i.jsx(Hn,{children:i.jsx(Kn,{children:"Create Sales Order"})}),i.jsxs("form",{onSubmit:w=>{w.preventDefault(),m.mutate(c)},className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"customer",children:"Customer"}),i.jsxs(kt,{value:c.customer_id,onValueChange:w=>u({...c,customer_id:w}),children:[i.jsx(At,{children:i.jsx(Rt,{placeholder:"Select customer"})}),i.jsx(Tt,{children:f==null?void 0:f.map(w=>i.jsx(be,{value:w.id,children:w.name},w.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"type",children:"Order Type"}),i.jsxs(kt,{value:c.order_type,onValueChange:w=>u({...c,order_type:w}),children:[i.jsx(At,{children:i.jsx(Rt,{})}),i.jsxs(Tt,{children:[i.jsx(be,{value:"sale",children:"Sale"}),i.jsx(be,{value:"estimate",children:"Estimate"}),i.jsx(be,{value:"quote",children:"Quote"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"notes",children:"Notes"}),i.jsx(hr,{id:"notes",value:c.notes,onChange:w=>u({...c,notes:w.target.value})})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),i.jsx(H,{type:"submit",children:"Create Order"})]})]})]})]})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(fi,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{placeholder:"Search orders...",value:r,onChange:w=>s(w.target.value),className:"pl-10"})]})})}),i.jsx(re,{children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Order #"}),i.jsx(U,{children:"Date"}),i.jsx(U,{children:"Customer"}),i.jsx(U,{children:"Type"}),i.jsx(U,{className:"text-right",children:"Subtotal"}),(l==null?void 0:l.isVatRegistered)&&i.jsx(U,{className:"text-right",children:"VAT"}),i.jsx(U,{className:"text-right",children:"Total"}),i.jsx(U,{children:"Status"}),i.jsx(U,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ht,{children:[y==null?void 0:y.map(w=>i.jsxs(_e,{children:[i.jsx(B,{className:"font-medium",children:w.orderNumber}),i.jsx(B,{children:w.orderDate?vt(new Date(w.orderDate),"dd MMM yyyy"):"-"}),i.jsx(B,{children:w.customerName||"-"}),i.jsx(B,{className:"capitalize",children:w.orderType}),i.jsx(B,{className:"text-right",children:g(w.subtotal)}),(l==null?void 0:l.isVatRegistered)&&i.jsx(B,{className:"text-right",children:g(w.vatAmount)}),i.jsx(B,{className:"text-right",children:g(w.total)}),i.jsx(B,{children:i.jsx(Xe,{variant:v(w.status||"pending"),children:w.status})}),i.jsx(B,{className:"text-right",children:i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>t(`/invoices/new?order=${w.id}`),title:"Convert to Invoice",children:i.jsx(cr,{className:"h-4 w-4"})})})]},w.id)),(y==null?void 0:y.length)===0&&i.jsx(_e,{children:i.jsx(B,{colSpan:l!=null&&l.isVatRegistered?9:8,className:"text-center text-muted-foreground",children:"No orders found"})})]})]})})]})]})}function RJe(){const t=Gn(),[e]=qq(),n=e.get("customer"),{user:r}=ct(),{data:s}=Gu(),[a,o]=N.useState(n||""),[l,c]=N.useState(`QT-${Date.now()}`),[u,d]=N.useState(new Date().toISOString().split("T")[0]),[h,f]=N.useState(""),[m,v]=N.useState(""),[g,y]=N.useState("This quotation is valid for 30 days from the date of issue."),[w,b]=N.useState([{id:"1",description:"",quantity:1,rate:0,amount:0}]),{data:E}=je({queryKey:["customers",r==null?void 0:r.id],queryFn:async()=>{if(!r)return[];const M=await Ke.getPrimaryMembershipByUser(r.id);if(!(M!=null&&M.companyId))return[];const V=ve(te,K.CUSTOMERS);return(await $e(Ce(V,ge("companyId","==",M.companyId)))).docs.map(Y=>{const ae=Y.data();return{id:Y.id,name:String(ae.name??""),email:ae.email?String(ae.email):void 0,address:ae.address?String(ae.address):void 0}}).sort((Y,ae)=>Y.name.localeCompare(ae.name))},enabled:!!r}),T=(s==null?void 0:s.isVatRegistered)||!1,x=(s==null?void 0:s.vatRate)||16,S=()=>{b([...w,{id:Date.now().toString(),description:"",quantity:1,rate:0,amount:0}])},_=M=>{w.length>1&&b(w.filter(V=>V.id!==M))},p=(M,V,F)=>{b(w.map(Y=>{if(Y.id===M){const ae={...Y,[V]:F};return(V==="quantity"||V==="rate")&&(ae.amount=ae.quantity*ae.rate),ae}return Y}))},A=w.reduce((M,V)=>M+V.amount,0),P=T?A*(x/100):0,C=A+P,I=E==null?void 0:E.find(M=>M.id===a),R=ot({mutationFn:async M=>{if(!r)throw new Error("You must be logged in");const V=await Ke.getPrimaryMembershipByUser(r.id);if(!(V!=null&&V.companyId))throw new Error("No company profile found for your account");await Nn(ve(te,K.SALES_ORDERS),{companyId:V.companyId,userId:r.id,customerId:a||null,orderNumber:l,orderDate:u,orderType:"quote",subtotal:A,vatAmount:P,total:C,status:M,notes:m,terms:g,validUntil:h||null,lineItems:w,createdAt:ye(),updatedAt:ye()})},onSuccess:(M,V)=>{J.success(V==="sent"?"Quotation sent successfully":"Quotation saved as draft"),t("/sales-orders")},onError:M=>{J.error("Failed to save quotation: "+(M instanceof Error?M.message:"Unknown error"))}}),L=()=>{const M=encodeURIComponent(JSON.stringify(w));t(`/invoices/new?customer=${a}&lines=${M}`)},z=(M=!1)=>{if(!a){J.error("Please select a customer");return}R.mutate(M?"sent":"draft")},W=M=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(M);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"New Quotation"}),i.jsxs("p",{className:"text-muted-foreground",children:["Create a quotation for a customer",T&&i.jsxs("span",{className:"ml-2 text-xs bg-primary/10 text-primary px-2 py-0.5 rounded",children:["VAT ",x,"%"]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(H,{variant:"outline",onClick:()=>t("/sales-orders"),children:"Cancel"}),i.jsxs(H,{variant:"outline",className:"gap-2",onClick:()=>z(!1),disabled:R.isPending,children:[i.jsx(Jd,{className:"h-4 w-4"}),"Save Draft"]}),i.jsxs(H,{className:"gap-2",onClick:()=>z(!0),disabled:R.isPending,children:[i.jsx(R8,{className:"h-4 w-4"}),"Save & Send"]})]})]}),i.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"Quotation Details"})}),i.jsx(re,{className:"space-y-4",children:i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"customer",children:"Customer *"}),i.jsxs(kt,{value:a,onValueChange:o,children:[i.jsx(At,{id:"customer",children:i.jsx(Rt,{placeholder:"Select customer"})}),i.jsx(Tt,{children:E==null?void 0:E.map(M=>i.jsx(be,{value:M.id,children:M.name},M.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"quoteNumber",children:"Quotation Number *"}),i.jsx(G,{id:"quoteNumber",value:l,onChange:M=>c(M.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"quoteDate",children:"Quotation Date *"}),i.jsx(G,{id:"quoteDate",type:"date",value:u,onChange:M=>d(M.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"validUntil",children:"Valid Until"}),i.jsx(G,{id:"validUntil",type:"date",value:h,onChange:M=>f(M.target.value)})]})]})})]}),I&&i.jsx(Z,{className:"bg-muted/30",children:i.jsx(re,{className:"pt-4",children:i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"font-medium",children:I.name}),I.email&&i.jsx("p",{className:"text-muted-foreground",children:I.email}),I.address&&i.jsx("p",{className:"text-muted-foreground",children:I.address})]})})}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"Line Items"})}),i.jsx(re,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-12 text-sm font-medium text-muted-foreground",children:[i.jsx("div",{className:"md:col-span-5",children:"Description"}),i.jsx("div",{className:"md:col-span-2",children:"Qty"}),i.jsx("div",{className:"md:col-span-2",children:"Rate (ZMW)"}),i.jsx("div",{className:"md:col-span-2",children:"Amount"}),i.jsx("div",{className:"md:col-span-1"})]}),w.map(M=>i.jsxs("div",{className:"grid gap-4 md:grid-cols-12 items-start",children:[i.jsx("div",{className:"md:col-span-5",children:i.jsx(hr,{placeholder:"Item description",value:M.description,onChange:V=>p(M.id,"description",V.target.value),rows:2})}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(G,{type:"number",placeholder:"Qty",value:M.quantity,onChange:V=>p(M.id,"quantity",parseFloat(V.target.value)||0),min:"0",step:"0.01"})}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(G,{type:"number",placeholder:"Rate",value:M.rate,onChange:V=>p(M.id,"rate",parseFloat(V.target.value)||0),min:"0",step:"0.01"})}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(G,{value:W(M.amount),disabled:!0,className:"bg-muted"})}),i.jsx("div",{className:"md:col-span-1",children:i.jsx(H,{type:"button",variant:"ghost",size:"icon",onClick:()=>_(M.id),disabled:w.length===1,children:i.jsx(Ts,{className:"h-4 w-4"})})})]},M.id)),i.jsxs(H,{type:"button",variant:"outline",className:"gap-2",onClick:S,children:[i.jsx(bn,{className:"h-4 w-4"}),"Add Line Item"]})]})})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"Notes & Terms"})}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"notes",children:"Notes (visible to customer)"}),i.jsx(hr,{id:"notes",placeholder:"Add any notes or special conditions",rows:3,value:m,onChange:M=>v(M.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"terms",children:"Terms & Conditions"}),i.jsx(hr,{id:"terms",placeholder:"Quotation terms and conditions",rows:3,value:g,onChange:M=>y(M.target.value)})]})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"Summary"})}),i.jsxs(re,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),i.jsx("span",{className:"font-medium",children:W(A)})]}),T&&i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsxs("span",{className:"text-muted-foreground",children:["VAT (",x,"%)"]}),i.jsx("span",{className:"font-medium",children:W(P)})]}),i.jsxs("div",{className:"border-t pt-3 flex justify-between",children:[i.jsx("span",{className:"font-semibold",children:"Total"}),i.jsx("span",{className:"text-xl font-bold text-primary",children:W(C)})]})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"Actions"})}),i.jsx(re,{className:"space-y-2",children:i.jsxs(H,{variant:"outline",className:"w-full gap-2",onClick:L,disabled:!a||w.every(M=>!M.description),children:[i.jsx(cr,{className:"h-4 w-4"}),"Convert to Invoice"]})})]}),!T&&i.jsx(Z,{className:"bg-muted/50",children:i.jsx(re,{className:"pt-4",children:i.jsxs("p",{className:"text-sm text-muted-foreground",children:["VAT is not applied. To enable VAT, go to"," ",i.jsx(H,{variant:"link",className:"p-0 h-auto",onClick:()=>t("/settings"),children:"Settings"})," ","and enable VAT registration."]})})})]})]})]})}const OJe=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},MJe=t=>{if(!t)return"";if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return""};function DJe(){const t=Gn(),e=dn(),{user:n}=ct(),[r,s]=N.useState(""),{data:a}=Gu(),{data:o,isLoading:l}=je({queryKey:["estimates",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const f=await Ke.getPrimaryMembershipByUser(n.id);if(!(f!=null&&f.companyId))return[];const m=ve(te,K.SALES_ORDERS),g=(await $e(Ce(m,ge("companyId","==",f.companyId)))).docs.map(b=>{const E=b.data();return{id:b.id,orderNumber:String(E.orderNumber??E.order_number??""),orderDate:MJe(E.orderDate??E.order_date),orderType:String(E.orderType??E.order_type??"sale"),subtotal:Number(E.subtotal??0),vatAmount:Number(E.vatAmount??E.vat_amount??0),total:Number(E.total??0),status:String(E.status??"draft"),customerId:E.customerId??E.customer_id??null,customerName:"-"}}).filter(b=>["quote","estimate"].includes(b.orderType)),y=Array.from(new Set(g.map(b=>b.customerId).filter(Boolean))),w=new Map;if(y.length>0){const b=ve(te,K.CUSTOMERS),E=OJe(y,30);(await Promise.all(E.map(x=>$e(Ce(b,ge(kh(),"in",x)))))).forEach(x=>{x.docs.forEach(S=>{const _=S.data();w.set(S.id,String(_.name??"-"))})})}return g.map(b=>({...b,customerName:b.customerId&&w.get(b.customerId)||"-"})).sort((b,E)=>String(E.orderDate).localeCompare(String(b.orderDate)))},enabled:!!n}),c=ot({mutationFn:async f=>{await Za(He(te,K.SALES_ORDERS,f))},onSuccess:()=>{e.invalidateQueries({queryKey:["estimates",n==null?void 0:n.id]}),J.success("Estimate deleted successfully")},onError:f=>{J.error("Failed to delete estimate: "+(f instanceof Error?f.message:"Unknown error"))}}),u=f=>{switch(f){case"sent":case"accepted":return"default";case"draft":return"secondary";case"rejected":return"destructive";default:return"outline"}},d=f=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(f),h=o==null?void 0:o.filter(f=>f.orderNumber.toLowerCase().includes(r.toLowerCase())||f.customerName.toLowerCase().includes(r.toLowerCase()));return l?i.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Estimates & Quotations"}),i.jsx("p",{className:"text-muted-foreground",children:"Create and manage quotes for your customers"})]}),i.jsxs(H,{onClick:()=>t("/quotations/new"),children:[i.jsx(bn,{className:"mr-2 h-4 w-4"}),"New Quotation"]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(fi,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{placeholder:"Search estimates...",value:r,onChange:f=>s(f.target.value),className:"pl-10"})]})})}),i.jsx(re,{children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Quote #"}),i.jsx(U,{children:"Date"}),i.jsx(U,{children:"Customer"}),i.jsx(U,{className:"text-right",children:"Subtotal"}),(a==null?void 0:a.isVatRegistered)&&i.jsx(U,{className:"text-right",children:"VAT"}),i.jsx(U,{className:"text-right",children:"Total"}),i.jsx(U,{children:"Status"}),i.jsx(U,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ht,{children:[h==null?void 0:h.map(f=>i.jsxs(_e,{children:[i.jsx(B,{className:"font-medium",children:f.orderNumber}),i.jsx(B,{children:f.orderDate?vt(new Date(f.orderDate),"dd MMM yyyy"):"-"}),i.jsx(B,{children:f.customerName||"-"}),i.jsx(B,{className:"text-right",children:d(f.subtotal)}),(a==null?void 0:a.isVatRegistered)&&i.jsx(B,{className:"text-right",children:d(f.vatAmount)}),i.jsx(B,{className:"text-right",children:d(f.total)}),i.jsx(B,{children:i.jsx(Xe,{variant:u(f.status||"draft"),children:f.status})}),i.jsx(B,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>t(`/invoices/new?customer=${f.customerId}`),title:"Convert to Invoice",children:i.jsx(cr,{className:"h-4 w-4"})}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>c.mutate(f.id),title:"Delete",children:i.jsx(Ts,{className:"h-4 w-4"})})]})})]},f.id)),(h==null?void 0:h.length)===0&&i.jsx(_e,{children:i.jsx(B,{colSpan:a!=null&&a.isVatRegistered?8:7,className:"text-center text-muted-foreground py-8",children:"No estimates found. Create your first quotation!"})})]})]})})]})]})}const LJe=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n};function $Je(){const t=Gn(),e=dn(),{user:n}=ct(),[r,s]=N.useState(""),[a,o]=N.useState(!1),[l,c]=N.useState(!1),[u,d]=N.useState(null),[h,f]=N.useState({name:"",email:"",phone:"",address:"",tpin:"",contact_person:"",notes:"",bank_name:"",bank_account_number:"",payment_terms:""}),{data:m,isLoading:v}=je({queryKey:["vendors",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const A=await Ke.getPrimaryMembershipByUser(n.id);if(!(A!=null&&A.companyId))return[];const P=ve(te,K.VENDORS);return(await $e(Ce(P,ge("companyId","==",A.companyId)))).docs.map(I=>{const R=I.data();return{id:I.id,name:String(R.name??""),email:R.email??null,phone:R.phone??null,address:R.address??null,tpin:R.tpin??null,contact_person:R.contactPerson??R.contact_person??null,notes:R.notes??null,bank_name:R.bankName??R.bank_name??null,bank_account_number:R.bankAccountNumber??R.bank_account_number??null,payment_terms:R.paymentTerms??R.payment_terms??null}}).sort((I,R)=>I.name.localeCompare(R.name))},enabled:!!n}),g=ot({mutationFn:async A=>{if(!n)throw new Error("You must be logged in");const P=await Ke.getPrimaryMembershipByUser(n.id);if(!(P!=null&&P.companyId))throw new Error("No company profile found for your account");await Nn(ve(te,K.VENDORS),{companyId:P.companyId,userId:n.id,name:A.name,email:A.email||null,phone:A.phone||null,address:A.address||null,tpin:A.tpin||null,contactPerson:A.contact_person||null,notes:A.notes||null,bankName:A.bank_name||null,bankAccountNumber:A.bank_account_number||null,paymentTerms:A.payment_terms||null,createdAt:ye(),updatedAt:ye()})},onSuccess:()=>{e.invalidateQueries({queryKey:["vendors",n==null?void 0:n.id]}),J.success("Vendor created successfully"),b()},onError:A=>{J.error("Failed to create vendor: "+(A instanceof Error?A.message:"Unknown error"))}}),y=ot({mutationFn:async({id:A,data:P})=>{await dr(He(te,K.VENDORS,A),{name:P.name,email:P.email||null,phone:P.phone||null,address:P.address||null,tpin:P.tpin||null,contactPerson:P.contact_person||null,notes:P.notes||null,bankName:P.bank_name||null,bankAccountNumber:P.bank_account_number||null,paymentTerms:P.payment_terms||null,updatedAt:ye()},{merge:!0})},onSuccess:()=>{e.invalidateQueries({queryKey:["vendors",n==null?void 0:n.id]}),J.success("Vendor updated successfully"),b()},onError:A=>{J.error("Failed to update vendor: "+(A instanceof Error?A.message:"Unknown error"))}}),w=ot({mutationFn:async A=>{await Za(He(te,K.VENDORS,A))},onSuccess:()=>{e.invalidateQueries({queryKey:["vendors",n==null?void 0:n.id]}),J.success("Vendor deleted successfully")},onError:A=>{J.error("Failed to delete vendor: "+(A instanceof Error?A.message:"Unknown error"))}}),b=()=>{f({name:"",email:"",phone:"",address:"",tpin:"",contact_person:"",notes:"",bank_name:"",bank_account_number:"",payment_terms:""}),d(null),o(!1)},E=A=>{d(A),f({name:A.name,email:A.email||"",phone:A.phone||"",address:A.address||"",tpin:A.tpin||"",contact_person:A.contact_person||"",notes:A.notes||"",bank_name:A.bank_name||"",bank_account_number:A.bank_account_number||"",payment_terms:A.payment_terms||""}),o(!0)},T=A=>{A.preventDefault(),u?y.mutate({id:u.id,data:h}):g.mutate(h)},x=m==null?void 0:m.filter(A=>{var P,C;return A.name.toLowerCase().includes(r.toLowerCase())||((P=A.email)==null?void 0:P.toLowerCase().includes(r.toLowerCase()))||((C=A.phone)==null?void 0:C.includes(r))}),S=[{key:"name",header:"Vendor Name",required:!0},{key:"email",header:"Email",required:!1},{key:"phone",header:"Phone",required:!1},{key:"address",header:"Address",required:!1},{key:"tpin",header:"TPIN",required:!1},{key:"contact_person",header:"Contact Person",required:!1},{key:"bank_name",header:"Bank Name",required:!1},{key:"bank_account_number",header:"Bank Account",required:!1},{key:"payment_terms",header:"Payment Terms",required:!1}],_=async A=>{if(!n)throw new Error("You must be logged in");const P=await Ke.getPrimaryMembershipByUser(n.id);if(!(P!=null&&P.companyId))throw new Error("No company profile found for your account");const C=A.map(L=>({companyId:P.companyId,userId:n.id,name:String(L.name||""),email:L.email||null,phone:L.phone||null,address:L.address||null,tpin:L.tpin||null,contactPerson:L.contact_person||null,bankName:L.bank_name||null,bankAccountNumber:L.bank_account_number||null,paymentTerms:L.payment_terms||null,createdAt:ye(),updatedAt:ye()})),I=ve(te,K.VENDORS),R=LJe(C,400);for(const L of R){const z=kl(te);L.forEach(W=>{z.set(He(I),W)}),await z.commit()}e.invalidateQueries({queryKey:["vendors",n==null?void 0:n.id]})},p=()=>{if(!(x!=null&&x.length))return;Vh(x,[{header:"Vendor Name",key:"name"},{header:"Contact Person",key:"contact_person"},{header:"Email",key:"email"},{header:"Phone",key:"phone"},{header:"Address",key:"address"},{header:"TPIN",key:"tpin"},{header:"Bank Name",key:"bank_name"},{header:"Bank Account",key:"bank_account_number"},{header:"Payment Terms",key:"payment_terms"}],"vendors-export")};return v?i.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Vendors"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your suppliers and vendors"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(H,{variant:"outline",onClick:()=>c(!0),children:[i.jsx(zo,{className:"mr-2 h-4 w-4"}),"Import"]}),i.jsxs(H,{variant:"outline",onClick:p,children:[i.jsx(Es,{className:"mr-2 h-4 w-4"}),"Export"]}),i.jsxs(rr,{open:a,onOpenChange:A=>{o(A),A||b()},children:[i.jsx(Zr,{asChild:!0,children:i.jsxs(H,{children:[i.jsx(bn,{className:"mr-2 h-4 w-4"}),"Add Vendor"]})}),i.jsxs(Wn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsx(Hn,{children:i.jsx(Kn,{children:u?"Edit Vendor":"Add New Vendor"})}),i.jsxs("form",{onSubmit:T,className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"name",children:"Vendor Name *"}),i.jsx(G,{id:"name",value:h.name,onChange:A=>f({...h,name:A.target.value}),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"contact_person",children:"Contact Person"}),i.jsx(G,{id:"contact_person",value:h.contact_person,onChange:A=>f({...h,contact_person:A.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"email",children:"Email"}),i.jsx(G,{id:"email",type:"email",value:h.email,onChange:A=>f({...h,email:A.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"phone",children:"Phone"}),i.jsx(G,{id:"phone",value:h.phone,onChange:A=>f({...h,phone:A.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"tpin",children:"TPIN"}),i.jsx(G,{id:"tpin",value:h.tpin,onChange:A=>f({...h,tpin:A.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"payment_terms",children:"Payment Terms"}),i.jsx(G,{id:"payment_terms",value:h.payment_terms,onChange:A=>f({...h,payment_terms:A.target.value}),placeholder:"e.g., Net 30"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"bank_name",children:"Bank Name"}),i.jsx(G,{id:"bank_name",value:h.bank_name,onChange:A=>f({...h,bank_name:A.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"bank_account_number",children:"Bank Account Number"}),i.jsx(G,{id:"bank_account_number",value:h.bank_account_number,onChange:A=>f({...h,bank_account_number:A.target.value})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"address",children:"Address"}),i.jsx(hr,{id:"address",value:h.address,onChange:A=>f({...h,address:A.target.value}),rows:2})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"notes",children:"Notes"}),i.jsx(hr,{id:"notes",value:h.notes,onChange:A=>f({...h,notes:A.target.value}),rows:2})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{type:"button",variant:"outline",onClick:b,children:"Cancel"}),i.jsxs(H,{type:"submit",children:[u?"Update":"Create"," Vendor"]})]})]})]})]})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(fi,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{placeholder:"Search vendors...",value:r,onChange:A=>s(A.target.value),className:"pl-10"})]})})}),i.jsx(re,{children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Name"}),i.jsx(U,{children:"Contact Person"}),i.jsx(U,{children:"Email"}),i.jsx(U,{children:"Phone"}),i.jsx(U,{children:"TPIN"}),i.jsx(U,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ht,{children:[x==null?void 0:x.map(A=>i.jsxs(_e,{children:[i.jsx(B,{className:"font-medium",children:A.name}),i.jsx(B,{children:A.contact_person||"-"}),i.jsx(B,{children:A.email||"-"}),i.jsx(B,{children:A.phone||"-"}),i.jsx(B,{children:A.tpin||"-"}),i.jsx(B,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>t("/purchase-orders"),title:"Create Purchase Order",children:i.jsx(Nm,{className:"h-4 w-4"})}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>t("/bills"),title:"Create Bill",children:i.jsx(cr,{className:"h-4 w-4"})}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>E(A),children:i.jsx(_p,{className:"h-4 w-4"})}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>w.mutate(A.id),children:i.jsx(Ts,{className:"h-4 w-4"})})]})})]},A.id)),(x==null?void 0:x.length)===0&&i.jsx(_e,{children:i.jsx(B,{colSpan:6,className:"text-center text-muted-foreground py-8",children:"No vendors found. Add your first vendor!"})})]})]})})]}),i.jsx(ng,{open:l,onOpenChange:c,onImport:_,columns:S,title:"Import Vendors"})]})}function FJe(){const{user:t}=ct(),e=dn(),[n,r]=N.useState(""),[s,a]=N.useState(!1),{data:o}=Gu(),[l,c]=N.useState({vendor_id:"",bill_number:`BILL-${Date.now()}`,bill_date:new Date().toISOString().split("T")[0],due_date:"",amount:"",description:""}),{data:u}=je({queryKey:["bills-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const p=await Ke.getPrimaryMembershipByUser(t.id);return(p==null?void 0:p.companyId)??null},enabled:!!t}),{data:d,isLoading:h}=je({queryKey:["bills",u],queryFn:async()=>{if(!u)return[];const[p,A]=await Promise.all([$e(Ce(ve(te,K.BILLS),ge("companyId","==",u))),$e(Ce(ve(te,K.VENDORS),ge("companyId","==",u)))]),P=new Map;return A.docs.forEach(C=>{const I=C.data();P.set(C.id,String(I.name??""))}),p.docs.map(C=>{const I=C.data(),R=I.vendorId??I.vendor_id??null;return{id:C.id,bill_number:String(I.billNumber??I.bill_number??""),bill_date:String(I.billDate??I.bill_date??""),due_date:I.dueDate??I.due_date??null,subtotal:Number(I.subtotal??0),vat_amount:Number(I.vatAmount??I.vat_amount??0),total:Number(I.total??0),status:I.status??"pending",description:I.description??null,vendor_id:R,vendors:R?{name:P.get(R)||"Unknown Vendor"}:null}}).sort((C,I)=>I.bill_date.localeCompare(C.bill_date))},enabled:!!u}),{data:f}=je({queryKey:["vendors",u],queryFn:async()=>u?(await $e(Ce(ve(te,K.VENDORS),ge("companyId","==",u)))).docs.map(A=>{const P=A.data();return{id:A.id,name:String(P.name??"")}}).sort((A,P)=>A.name.localeCompare(P.name)):[],enabled:!!u}),m=(o==null?void 0:o.isVatRegistered)||!1,v=(o==null?void 0:o.vatRate)||16,g=parseFloat(l.amount)||0,y=m?g*(v/100):0,w=g+y,b=ot({mutationFn:async p=>{if(!u||!t)throw new Error("Not authenticated");await Nn(ve(te,K.BILLS),{companyId:u,vendorId:p.vendor_id||null,billNumber:p.bill_number,billDate:p.bill_date,dueDate:p.due_date||null,description:p.description||null,subtotal:g,vatAmount:y,total:w,status:"pending",createdBy:t.id,createdAt:ye(),updatedAt:ye()})},onSuccess:()=>{e.invalidateQueries({queryKey:["bills",u]}),J.success("Bill created successfully"),a(!1),c({vendor_id:"",bill_number:`BILL-${Date.now()}`,bill_date:new Date().toISOString().split("T")[0],due_date:"",amount:"",description:""})},onError:p=>{J.error("Failed to create bill: "+p.message)}}),E=ot({mutationFn:async p=>{await dr(He(te,K.BILLS,p),{status:"paid",paidDate:new Date().toISOString(),updatedAt:ye()},{merge:!0})},onSuccess:()=>{e.invalidateQueries({queryKey:["bills",u]}),J.success("Bill marked as paid")},onError:p=>{J.error("Failed to update bill: "+p.message)}}),T=ot({mutationFn:async p=>{await Za(He(te,K.BILLS,p))},onSuccess:()=>{e.invalidateQueries({queryKey:["bills",u]}),J.success("Bill deleted successfully")},onError:p=>{J.error("Failed to delete bill: "+p.message)}}),x=p=>{switch(p){case"paid":return"default";case"pending":return"secondary";case"overdue":return"destructive";default:return"outline"}},S=p=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(p),_=d==null?void 0:d.filter(p=>{var A,P;return p.bill_number.toLowerCase().includes(n.toLowerCase())||((P=(A=p.vendors)==null?void 0:A.name)==null?void 0:P.toLowerCase().includes(n.toLowerCase()))});return h?i.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Bills"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage bills and payments to vendors"})]}),i.jsxs(rr,{open:s,onOpenChange:a,children:[i.jsx(Zr,{asChild:!0,children:i.jsxs(H,{children:[i.jsx(bn,{className:"mr-2 h-4 w-4"}),"New Bill"]})}),i.jsxs(Wn,{className:"max-w-lg",children:[i.jsx(Hn,{children:i.jsx(Kn,{children:"Create New Bill"})}),i.jsxs("form",{onSubmit:p=>{p.preventDefault(),b.mutate(l)},className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"vendor",children:"Vendor *"}),i.jsxs(kt,{value:l.vendor_id,onValueChange:p=>c({...l,vendor_id:p}),children:[i.jsx(At,{children:i.jsx(Rt,{placeholder:"Select vendor"})}),i.jsx(Tt,{children:f==null?void 0:f.map(p=>i.jsx(be,{value:p.id,children:p.name},p.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"bill_number",children:"Bill Number"}),i.jsx(G,{id:"bill_number",value:l.bill_number,onChange:p=>c({...l,bill_number:p.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"bill_date",children:"Bill Date *"}),i.jsx(G,{id:"bill_date",type:"date",value:l.bill_date,onChange:p=>c({...l,bill_date:p.target.value}),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"due_date",children:"Due Date"}),i.jsx(G,{id:"due_date",type:"date",value:l.due_date,onChange:p=>c({...l,due_date:p.target.value})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"amount",children:"Amount (ZMW) *"}),i.jsx(G,{id:"amount",type:"number",step:"0.01",value:l.amount,onChange:p=>c({...l,amount:p.target.value}),required:!0})]}),m&&i.jsxs("div",{className:"rounded-lg bg-muted p-3 space-y-1 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Subtotal:"}),i.jsx("span",{children:S(g)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{children:["VAT (",v,"%):"]}),i.jsx("span",{children:S(y)})]}),i.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[i.jsx("span",{children:"Total:"}),i.jsx("span",{children:S(w)})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"description",children:"Description"}),i.jsx(hr,{id:"description",value:l.description,onChange:p=>c({...l,description:p.target.value}),rows:2})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),i.jsx(H,{type:"submit",children:"Create Bill"})]})]})]})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(fi,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{placeholder:"Search bills...",value:n,onChange:p=>r(p.target.value),className:"pl-10"})]})})}),i.jsx(re,{children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Bill #"}),i.jsx(U,{children:"Date"}),i.jsx(U,{children:"Vendor"}),i.jsx(U,{children:"Due Date"}),i.jsx(U,{className:"text-right",children:"Total"}),i.jsx(U,{children:"Status"}),i.jsx(U,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ht,{children:[_==null?void 0:_.map(p=>{var A;return i.jsxs(_e,{children:[i.jsx(B,{className:"font-medium",children:p.bill_number}),i.jsx(B,{children:vt(new Date(p.bill_date),"dd MMM yyyy")}),i.jsx(B,{children:((A=p.vendors)==null?void 0:A.name)||"-"}),i.jsx(B,{children:p.due_date?vt(new Date(p.due_date),"dd MMM yyyy"):"-"}),i.jsx(B,{className:"text-right",children:S(Number(p.total))}),i.jsx(B,{children:i.jsx(Xe,{variant:x(p.status||"pending"),children:p.status})}),i.jsx(B,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[p.status!=="paid"&&i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>E.mutate(p.id),title:"Mark as Paid",children:i.jsx(Nx,{className:"h-4 w-4"})}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>T.mutate(p.id),title:"Delete",children:i.jsx(Ts,{className:"h-4 w-4"})})]})})]},p.id)}),(_==null?void 0:_.length)===0&&i.jsx(_e,{children:i.jsx(B,{colSpan:7,className:"text-center text-muted-foreground py-8",children:"No bills found. Create your first bill!"})})]})]})})]})]})}function VJe(){const{user:t}=ct(),e=Gn(),n=dn(),[r,s]=N.useState(""),[a,o]=N.useState(!1),{data:l}=Gu(),[c,u]=N.useState({vendor_id:"",order_number:`PO-${Date.now()}`,order_date:new Date().toISOString().split("T")[0],expected_date:"",amount:"",description:""}),{data:d}=je({queryKey:["purchase-orders-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const p=await Ke.getPrimaryMembershipByUser(t.id);return(p==null?void 0:p.companyId)??null},enabled:!!t}),{data:h,isLoading:f}=je({queryKey:["purchase-orders",d],queryFn:async()=>{if(!d)return[];const p=ve(te,K.PURCHASE_ORDERS),P=(await $e(Ce(p,ge("companyId","==",d)))).docs.map(R=>{const L=R.data();return{id:R.id,order_number:String(L.orderNumber??L.order_number??""),order_date:String(L.orderDate??L.order_date??""),expected_date:L.expectedDate??L.expected_date??null,subtotal:Number(L.subtotal??0),vat_amount:Number(L.vatAmount??L.vat_amount??0),total:Number(L.total??0),status:L.status??"pending",description:L.description??null,vendor_id:L.vendorId??L.vendor_id??null,vendors:null}}),C=Array.from(new Set(P.map(R=>R.vendor_id).filter(Boolean))),I=new Map;if(C.length>0){const R=ve(te,K.VENDORS);(await $e(Ce(R,ge("companyId","==",d)))).docs.forEach(z=>{const W=z.data();I.set(z.id,String(W.name??""))})}return P.map(R=>({...R,vendors:R.vendor_id?{name:I.get(R.vendor_id)||"Unknown Vendor"}:null})).sort((R,L)=>L.order_date.localeCompare(R.order_date))},enabled:!!d}),{data:m}=je({queryKey:["vendors",d],queryFn:async()=>{if(!d)return[];const p=ve(te,K.VENDORS);return(await $e(Ce(p,ge("companyId","==",d)))).docs.map(P=>{const C=P.data();return{id:P.id,name:String(C.name??"")}}).sort((P,C)=>P.name.localeCompare(C.name))},enabled:!!d}),v=(l==null?void 0:l.isVatRegistered)||!1,g=(l==null?void 0:l.vatRate)||16,y=parseFloat(c.amount)||0,w=v?y*(g/100):0,b=y+w,E=ot({mutationFn:async p=>{if(!d||!t)throw new Error("No active company context");await Nn(ve(te,K.PURCHASE_ORDERS),{companyId:d,vendorId:p.vendor_id,orderNumber:p.order_number,orderDate:p.order_date,expectedDate:p.expected_date||null,subtotal:y,vatAmount:w,total:b,status:"pending",description:p.description||null,createdBy:t.id,createdAt:ye(),updatedAt:ye()})},onSuccess:()=>{n.invalidateQueries({queryKey:["purchase-orders",d]}),J.success("Purchase order created successfully"),o(!1),u({vendor_id:"",order_number:`PO-${Date.now()}`,order_date:new Date().toISOString().split("T")[0],expected_date:"",amount:"",description:""})},onError:p=>{J.error("Failed to create purchase order: "+p.message)}}),T=ot({mutationFn:async p=>{await Za(He(te,K.PURCHASE_ORDERS,p))},onSuccess:()=>{n.invalidateQueries({queryKey:["purchase-orders",d]}),J.success("Purchase order deleted successfully")},onError:p=>{J.error("Failed to delete purchase order: "+p.message)}}),x=p=>{switch(p){case"received":return"default";case"pending":return"secondary";case"cancelled":return"destructive";default:return"outline"}},S=p=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(p),_=h==null?void 0:h.filter(p=>{var A,P;return p.order_number.toLowerCase().includes(r.toLowerCase())||((P=(A=p.vendors)==null?void 0:A.name)==null?void 0:P.toLowerCase().includes(r.toLowerCase()))});return f?i.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Purchase Orders"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage purchase orders to vendors"})]}),i.jsxs(rr,{open:a,onOpenChange:o,children:[i.jsx(Zr,{asChild:!0,children:i.jsxs(H,{children:[i.jsx(bn,{className:"mr-2 h-4 w-4"}),"New Purchase Order"]})}),i.jsxs(Wn,{className:"max-w-lg",children:[i.jsx(Hn,{children:i.jsx(Kn,{children:"Create Purchase Order"})}),i.jsxs("form",{onSubmit:p=>{p.preventDefault(),E.mutate(c)},className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"vendor",children:"Vendor *"}),i.jsxs(kt,{value:c.vendor_id,onValueChange:p=>u({...c,vendor_id:p}),children:[i.jsx(At,{children:i.jsx(Rt,{placeholder:"Select vendor"})}),i.jsx(Tt,{children:m==null?void 0:m.map(p=>i.jsx(be,{value:p.id,children:p.name},p.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"order_number",children:"PO Number"}),i.jsx(G,{id:"order_number",value:c.order_number,onChange:p=>u({...c,order_number:p.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"order_date",children:"Order Date *"}),i.jsx(G,{id:"order_date",type:"date",value:c.order_date,onChange:p=>u({...c,order_date:p.target.value}),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"expected_date",children:"Expected Delivery"}),i.jsx(G,{id:"expected_date",type:"date",value:c.expected_date,onChange:p=>u({...c,expected_date:p.target.value})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"amount",children:"Amount (ZMW) *"}),i.jsx(G,{id:"amount",type:"number",step:"0.01",value:c.amount,onChange:p=>u({...c,amount:p.target.value}),required:!0})]}),v&&i.jsxs("div",{className:"rounded-lg bg-muted p-3 space-y-1 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Subtotal:"}),i.jsx("span",{children:S(y)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{children:["VAT (",g,"%):"]}),i.jsx("span",{children:S(w)})]}),i.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[i.jsx("span",{children:"Total:"}),i.jsx("span",{children:S(b)})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"description",children:"Description"}),i.jsx(hr,{id:"description",value:c.description,onChange:p=>u({...c,description:p.target.value}),rows:2})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),i.jsx(H,{type:"submit",children:"Create Order"})]})]})]})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(fi,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{placeholder:"Search purchase orders...",value:r,onChange:p=>s(p.target.value),className:"pl-10"})]})})}),i.jsx(re,{children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"PO #"}),i.jsx(U,{children:"Date"}),i.jsx(U,{children:"Vendor"}),i.jsx(U,{children:"Expected Delivery"}),i.jsx(U,{className:"text-right",children:"Total"}),i.jsx(U,{children:"Status"}),i.jsx(U,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ht,{children:[_==null?void 0:_.map(p=>{var A;return i.jsxs(_e,{children:[i.jsx(B,{className:"font-medium",children:p.order_number}),i.jsx(B,{children:vt(new Date(p.order_date),"dd MMM yyyy")}),i.jsx(B,{children:((A=p.vendors)==null?void 0:A.name)||"-"}),i.jsx(B,{children:p.expected_date?vt(new Date(p.expected_date),"dd MMM yyyy"):"-"}),i.jsx(B,{className:"text-right",children:S(Number(p.total))}),i.jsx(B,{children:i.jsx(Xe,{variant:x(p.status||"pending"),children:p.status})}),i.jsx(B,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>e("/bills"),title:"Convert to Bill",children:i.jsx(cr,{className:"h-4 w-4"})}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>T.mutate(p.id),title:"Delete",children:i.jsx(Ts,{className:"h-4 w-4"})})]})})]},p.id)}),(_==null?void 0:_.length)===0&&i.jsx(_e,{children:i.jsx(B,{colSpan:7,className:"text-center text-muted-foreground py-8",children:"No purchase orders found. Create your first PO!"})})]})]})})]})]})}const BJe=["Office Supplies","Travel","Meals & Entertainment","Utilities","Rent","Professional Services","Marketing","Equipment","Software & Subscriptions","Training","Insurance","Maintenance","Other"],UJe=[{header:"Description",key:"description",required:!0,transform:ws.trim},{header:"Category",key:"category",transform:ws.trim},{header:"Amount",key:"amount",required:!0,transform:ws.toNumber},{header:"Date",key:"expense_date",required:!0,transform:ws.toDate},{header:"Vendor",key:"vendor_name",transform:ws.trim},{header:"Payment Method",key:"payment_method",transform:ws.trim},{header:"Reference",key:"reference_number",transform:ws.trim},{header:"Notes",key:"notes",transform:ws.trim}],zJe=[{header:"Date",key:"expense_date",formatter:SJe},{header:"Description",key:"description"},{header:"Category",key:"category"},{header:"Vendor",key:"vendor_name"},{header:"Amount",key:"amount",formatter:NJe},{header:"Payment Method",key:"payment_method"},{header:"Reference",key:"reference_number"},{header:"Notes",key:"notes"}];function qJe(){const{user:t}=ct(),e=dn(),[n,r]=N.useState(""),[s,a]=N.useState(!1),[o,l]=N.useState(!1),[c,u]=N.useState(null),[d,h]=N.useState({description:"",category:"",amount:"",expense_date:new Date().toISOString().split("T")[0],vendor_name:"",payment_method:"cash",reference_number:"",notes:""}),{data:f}=je({queryKey:["expenses-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const C=await Ke.getPrimaryMembershipByUser(t.id);return(C==null?void 0:C.companyId)??null},enabled:!!t}),{data:m,isLoading:v}=je({queryKey:["expenses",f],queryFn:async()=>f?(await $e(Ce(ve(te,K.EXPENSES),ge("companyId","==",f)))).docs.map(I=>{const R=I.data();return{id:I.id,description:String(R.description??""),category:R.category??null,amount:Number(R.amount??0),expense_date:String(R.expenseDate??R.expense_date??new Date().toISOString().slice(0,10)),vendor_name:R.vendorName??R.vendor_name??null,payment_method:R.paymentMethod??R.payment_method??null,reference_number:R.referenceNumber??R.reference_number??null,notes:R.notes??null}}).sort((I,R)=>R.expense_date.localeCompare(I.expense_date)):[],enabled:!!f}),g=ot({mutationFn:async C=>{if(!f||!t)throw new Error("Not authenticated");await Nn(ve(te,K.EXPENSES),{companyId:f,description:C.description,category:C.category||null,amount:Number(C.amount),expenseDate:C.expense_date,vendorName:C.vendor_name||null,paymentMethod:C.payment_method||null,referenceNumber:C.reference_number||null,notes:C.notes||null,createdBy:t.id,createdAt:ye(),updatedAt:ye()})},onSuccess:()=>{e.invalidateQueries({queryKey:["expenses",f]}),J.success("Expense recorded successfully"),b()},onError:C=>{J.error("Failed to create expense: "+C.message)}}),y=ot({mutationFn:async({id:C,data:I})=>{await dr(He(te,K.EXPENSES,C),{description:I.description,category:I.category||null,amount:Number(I.amount),expenseDate:I.expense_date,vendorName:I.vendor_name||null,paymentMethod:I.payment_method||null,referenceNumber:I.reference_number||null,notes:I.notes||null,updatedAt:ye()},{merge:!0})},onSuccess:()=>{e.invalidateQueries({queryKey:["expenses",f]}),J.success("Expense updated successfully"),b()},onError:C=>{J.error("Failed to update expense: "+C.message)}}),w=ot({mutationFn:async C=>{await Za(He(te,K.EXPENSES,C))},onSuccess:()=>{e.invalidateQueries({queryKey:["expenses",f]}),J.success("Expense deleted successfully")},onError:C=>{J.error("Failed to delete expense: "+C.message)}}),b=()=>{h({description:"",category:"",amount:"",expense_date:new Date().toISOString().split("T")[0],vendor_name:"",payment_method:"cash",reference_number:"",notes:""}),u(null),a(!1)},E=C=>{var I;u(C),h({description:C.description||"",category:C.category||"",amount:((I=C.amount)==null?void 0:I.toString())||"",expense_date:C.expense_date||new Date().toISOString().split("T")[0],vendor_name:C.vendor_name||"",payment_method:C.payment_method||"cash",reference_number:C.reference_number||"",notes:C.notes||""}),a(!0)},T=C=>{C.preventDefault(),c?y.mutate({id:c.id,data:d}):g.mutate(d)},x=C=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(C),S=C=>({"Office Supplies":"default",Travel:"secondary","Meals & Entertainment":"outline",Utilities:"default",Rent:"secondary"})[C]||"outline",_=m==null?void 0:m.filter(C=>{var I,R,L;return((I=C.description)==null?void 0:I.toLowerCase().includes(n.toLowerCase()))||((R=C.category)==null?void 0:R.toLowerCase().includes(n.toLowerCase()))||((L=C.vendor_name)==null?void 0:L.toLowerCase().includes(n.toLowerCase()))}),p=(m==null?void 0:m.reduce((C,I)=>C+Number(I.amount||0),0))||0,A=async C=>{if(!(t!=null&&t.id)||!f)throw new Error("Not authenticated");for(const I of C){const R=I;await Nn(ve(te,K.EXPENSES),{companyId:f,description:String(R.description??"").trim(),category:R.category?String(R.category).trim():null,amount:Number(R.amount??0),expenseDate:String(R.expense_date??new Date().toISOString().split("T")[0]),vendorName:R.vendor_name?String(R.vendor_name):null,paymentMethod:R.payment_method?String(R.payment_method):null,referenceNumber:R.reference_number?String(R.reference_number):null,notes:R.notes?String(R.notes):null,createdBy:t.id,createdAt:ye(),updatedAt:ye()})}e.invalidateQueries({queryKey:["expenses",f]}),J.success(`Imported ${C.length} expenses`)},P=()=>{if(!m||m.length===0){J.error("No expenses to export");return}Vh(m,zJe,"expenses-export"),J.success("Expenses exported")};return v?i.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Expenses"}),i.jsx("p",{className:"text-muted-foreground",children:"Track and manage business expenses"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(H,{variant:"outline",onClick:()=>l(!0),children:[i.jsx(zo,{className:"mr-2 h-4 w-4"}),"Import"]}),i.jsxs(H,{variant:"outline",onClick:P,children:[i.jsx(Es,{className:"mr-2 h-4 w-4"}),"Export"]}),i.jsxs(rr,{open:s,onOpenChange:C=>{a(C),C||b()},children:[i.jsx(Zr,{asChild:!0,children:i.jsxs(H,{children:[i.jsx(bn,{className:"mr-2 h-4 w-4"}),"Add Expense"]})}),i.jsxs(Wn,{className:"max-w-lg",children:[i.jsx(Hn,{children:i.jsx(Kn,{children:c?"Edit Expense":"Record New Expense"})}),i.jsxs("form",{onSubmit:T,className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2 md:col-span-2",children:[i.jsx(X,{htmlFor:"description",children:"Description *"}),i.jsx(G,{id:"description",value:d.description,onChange:C=>h({...d,description:C.target.value}),placeholder:"What was this expense for?",required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"category",children:"Category *"}),i.jsxs(kt,{value:d.category,onValueChange:C=>h({...d,category:C}),children:[i.jsx(At,{children:i.jsx(Rt,{placeholder:"Select category"})}),i.jsx(Tt,{children:BJe.map(C=>i.jsx(be,{value:C,children:C},C))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"amount",children:"Amount (ZMW) *"}),i.jsx(G,{id:"amount",type:"number",step:"0.01",value:d.amount,onChange:C=>h({...d,amount:C.target.value}),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"expense_date",children:"Date *"}),i.jsx(G,{id:"expense_date",type:"date",value:d.expense_date,onChange:C=>h({...d,expense_date:C.target.value}),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"vendor_name",children:"Vendor/Payee"}),i.jsx(G,{id:"vendor_name",value:d.vendor_name,onChange:C=>h({...d,vendor_name:C.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"payment_method",children:"Payment Method"}),i.jsxs(kt,{value:d.payment_method,onValueChange:C=>h({...d,payment_method:C}),children:[i.jsx(At,{children:i.jsx(Rt,{})}),i.jsxs(Tt,{children:[i.jsx(be,{value:"cash",children:"Cash"}),i.jsx(be,{value:"bank_transfer",children:"Bank Transfer"}),i.jsx(be,{value:"mobile_money",children:"Mobile Money"}),i.jsx(be,{value:"cheque",children:"Cheque"}),i.jsx(be,{value:"card",children:"Card"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"reference_number",children:"Reference #"}),i.jsx(G,{id:"reference_number",value:d.reference_number,onChange:C=>h({...d,reference_number:C.target.value}),placeholder:"Receipt/Invoice number"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"notes",children:"Notes"}),i.jsx(hr,{id:"notes",value:d.notes,onChange:C=>h({...d,notes:C.target.value}),rows:2})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{type:"button",variant:"outline",onClick:b,children:"Cancel"}),i.jsxs(H,{type:"submit",children:[c?"Update":"Record"," Expense"]})]})]})]})]})]})]}),i.jsx(ng,{open:o,onOpenChange:l,title:"Import Expenses",description:"Upload a CSV file to import expenses in bulk",columns:UJe,onImport:A}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[i.jsxs(Z,{children:[i.jsx(ee,{className:"pb-2",children:i.jsx(ne,{className:"text-sm font-medium text-muted-foreground",children:"Total Expenses"})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:x(p)})})]}),i.jsxs(Z,{children:[i.jsx(ee,{className:"pb-2",children:i.jsx(ne,{className:"text-sm font-medium text-muted-foreground",children:"This Month"})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:x((m==null?void 0:m.filter(C=>{const I=new Date(C.expense_date),R=new Date;return I.getMonth()===R.getMonth()&&I.getFullYear()===R.getFullYear()}).reduce((C,I)=>C+Number(I.amount||0),0))||0)})})]}),i.jsxs(Z,{children:[i.jsx(ee,{className:"pb-2",children:i.jsx(ne,{className:"text-sm font-medium text-muted-foreground",children:"Total Records"})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:(m==null?void 0:m.length)||0})})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(fi,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{placeholder:"Search expenses...",value:n,onChange:C=>r(C.target.value),className:"pl-10"})]})})}),i.jsx(re,{children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Date"}),i.jsx(U,{children:"Description"}),i.jsx(U,{children:"Category"}),i.jsx(U,{children:"Vendor"}),i.jsx(U,{className:"text-right",children:"Amount"}),i.jsx(U,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ht,{children:[_==null?void 0:_.map(C=>i.jsxs(_e,{children:[i.jsx(B,{children:vt(new Date(C.expense_date),"dd MMM yyyy")}),i.jsx(B,{className:"font-medium",children:C.description}),i.jsx(B,{children:i.jsx(Xe,{variant:S(C.category||""),children:C.category})}),i.jsx(B,{children:C.vendor_name||"-"}),i.jsx(B,{className:"text-right font-medium",children:x(Number(C.amount))}),i.jsx(B,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>E(C),children:i.jsx(_p,{className:"h-4 w-4"})}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>w.mutate(C.id),children:i.jsx(Ts,{className:"h-4 w-4"})})]})})]},C.id)),(_==null?void 0:_.length)===0&&i.jsx(_e,{children:i.jsx(B,{colSpan:6,className:"text-center text-muted-foreground py-8",children:"No expenses found. Record your first expense!"})})]})]})})]})]})}function b6(){const t=dn(),{user:e}=ct(),[n,r]=N.useState(""),[s,a]=N.useState(!1),[o,l]=N.useState(16),{data:c}=je({queryKey:["primary-membership",e==null?void 0:e.id],queryFn:async()=>e?Ke.getPrimaryMembershipByUser(e.id):null,enabled:!!e}),u=c==null?void 0:c.companyId,{data:d,isLoading:h}=je({queryKey:["company-settings",u],queryFn:async()=>u?Ke.getCompanySettings(u):null,enabled:!!u});N.useEffect(()=>{d&&(r(d.companyName||""),a(!!d.isVatRegistered),l(Number(d.vatRate??16)))},[d]);const f=ot({mutationFn:async()=>{if(!u)throw new Error("No company linked to your account.");await Ke.updateCompanyBasics({companyId:u,name:n}),await dr(He(te,K.COMPANY_SETTINGS,u),{companyId:u,companyName:n,isVatRegistered:s,vatRate:s?o:null,updatedAt:ye()},{merge:!0})},onSuccess:()=>{t.invalidateQueries({queryKey:["company-settings",u]}),t.invalidateQueries({queryKey:["company-settings",e==null?void 0:e.id]}),J.success("Settings saved successfully")},onError:m=>{J.error("Failed to save settings: "+(m instanceof Error?m.message:"Unknown error"))}});return h?i.jsx("div",{children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Company Settings"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your company information and tax settings"})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[i.jsxs(Z,{children:[i.jsxs(ee,{children:[i.jsx(ne,{children:"Company Information"}),i.jsx(St,{children:"Basic company details and branding"})]}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"company-name",children:"Company Name"}),i.jsx(G,{id:"company-name",value:n,onChange:m=>r(m.target.value),placeholder:"Enter company name"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Company Logo"}),i.jsx(AM,{})]})]})]}),i.jsxs(Z,{children:[i.jsxs(ee,{children:[i.jsx(ne,{children:"VAT / Tax Settings"}),i.jsx(St,{children:"Configure VAT registration for ZRA compliance"})]}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx(X,{children:"VAT Registered"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Are you registered for VAT with ZRA?"})]}),i.jsx(is,{checked:s,onCheckedChange:a})]}),s&&i.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[i.jsx(X,{htmlFor:"vat-rate",children:"VAT Rate (%)"}),i.jsx(G,{id:"vat-rate",type:"number",value:o,onChange:m=>l(Number(m.target.value)),min:0,max:100}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Standard Zambian VAT rate is 16%"})]})]})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx(H,{onClick:()=>f.mutate(),disabled:f.isPending,children:f.isPending?"Saving...":"Save Settings"})})]})}const WJe=()=>{const t=Wo();return N.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),i.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),i.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),i.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},HJe=()=>{const{user:t}=ct(),e=dn(),[n,r]=N.useState(""),[s,a]=N.useState(!1),[o,l]=N.useState(!1),[c,u]=N.useState(null),[d,h]=N.useState({name:"",sku:"",category:"",description:"",unit_of_measure:"units",quantity_on_hand:0,reorder_point:0,unit_cost:0,selling_price:0}),[f,m]=N.useState({movement_type:"in",quantity:0,reference_number:"",notes:""}),{data:v}=je({queryKey:["inventory-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const p=await Ke.getPrimaryMembershipByUser(t.id);return(p==null?void 0:p.companyId)??null},enabled:!!t}),{data:g=[],isLoading:y}=je({queryKey:["inventory-items",v],queryFn:async()=>{if(!v)return[];const p=ve(te,K.INVENTORY_ITEMS);return(await $e(Ce(p,ge("companyId","==",v)))).docs.map(P=>{const C=P.data();return{id:P.id,name:String(C.name??""),sku:C.sku??null,category:C.category??null,description:C.description??null,unit_of_measure:C.unitOfMeasure??C.unit_of_measure??"units",quantity_on_hand:Number(C.quantityOnHand??C.quantity_on_hand??0),reorder_point:Number(C.reorderPoint??C.reorder_point??0),unit_cost:Number(C.unitCost??C.unit_cost??0),selling_price:Number(C.sellingPrice??C.selling_price??0)}}).sort((P,C)=>P.name.localeCompare(C.name))},enabled:!!v}),w=ot({mutationFn:async p=>{if(!v||!t)throw new Error("No active company context");await Nn(ve(te,K.INVENTORY_ITEMS),{companyId:v,name:p.name,sku:p.sku||null,category:p.category||null,description:p.description||null,unitOfMeasure:p.unit_of_measure||"units",quantityOnHand:p.quantity_on_hand,reorderPoint:p.reorder_point,unitCost:p.unit_cost,sellingPrice:p.selling_price,createdBy:t.id,createdAt:ye(),updatedAt:ye()})},onSuccess:()=>{e.invalidateQueries({queryKey:["inventory-items",v]}),J.success("Item added successfully"),a(!1),h({name:"",sku:"",category:"",description:"",unit_of_measure:"units",quantity_on_hand:0,reorder_point:0,unit_cost:0,selling_price:0})},onError:p=>{J.error(p.message)}}),b=ot({mutationFn:async({itemId:p,movementData:A})=>{if(!v||!t)throw new Error("No active company context");const P=g.find(z=>z.id===p);if(!P)throw new Error("Item not found");let C=P.quantity_on_hand;A.movement_type==="in"?C+=A.quantity:A.movement_type==="out"?C-=A.quantity:C=A.quantity;const I=kl(te),R=He(ve(te,K.STOCK_MOVEMENTS)),L=He(te,K.INVENTORY_ITEMS,p);I.set(R,{companyId:v,inventoryItemId:p,movementType:A.movement_type,quantity:A.quantity,referenceNumber:A.reference_number||null,notes:A.notes||null,createdBy:t.id,createdAt:ye()}),I.update(L,{quantityOnHand:C,updatedAt:ye()}),await I.commit()},onSuccess:()=>{e.invalidateQueries({queryKey:["inventory-items",v]}),J.success("Stock movement recorded"),l(!1),u(null),m({movement_type:"in",quantity:0,reference_number:"",notes:""})},onError:p=>{J.error(p.message)}}),E=g.filter(p=>{var A,P;return p.name.toLowerCase().includes(n.toLowerCase())||((A=p.sku)==null?void 0:A.toLowerCase().includes(n.toLowerCase()))||((P=p.category)==null?void 0:P.toLowerCase().includes(n.toLowerCase()))}),T=g.filter(p=>p.quantity_on_hand<=p.reorder_point),x=g.reduce((p,A)=>p+A.quantity_on_hand*A.unit_cost,0),S=p=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(p),_=["Raw Materials","Finished Goods","Supplies","Equipment","Other"];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Inventory"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your stock and inventory items"})]}),i.jsxs(rr,{open:s,onOpenChange:a,children:[i.jsx(Zr,{asChild:!0,children:i.jsxs(H,{children:[i.jsx(bn,{className:"mr-2 h-4 w-4"}),"Add Item"]})}),i.jsxs(Wn,{className:"max-w-2xl",children:[i.jsx(Hn,{children:i.jsx(Kn,{children:"Add Inventory Item"})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Item Name *"}),i.jsx(G,{value:d.name,onChange:p=>h({...d,name:p.target.value}),placeholder:"Enter item name"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"SKU"}),i.jsx(G,{value:d.sku,onChange:p=>h({...d,sku:p.target.value}),placeholder:"Stock Keeping Unit"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Category"}),i.jsxs(kt,{value:d.category,onValueChange:p=>h({...d,category:p}),children:[i.jsx(At,{children:i.jsx(Rt,{placeholder:"Select category"})}),i.jsx(Tt,{children:_.map(p=>i.jsx(be,{value:p,children:p},p))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Unit of Measure"}),i.jsxs(kt,{value:d.unit_of_measure,onValueChange:p=>h({...d,unit_of_measure:p}),children:[i.jsx(At,{children:i.jsx(Rt,{})}),i.jsxs(Tt,{children:[i.jsx(be,{value:"units",children:"Units"}),i.jsx(be,{value:"kg",children:"Kilograms"}),i.jsx(be,{value:"liters",children:"Liters"}),i.jsx(be,{value:"meters",children:"Meters"}),i.jsx(be,{value:"pieces",children:"Pieces"}),i.jsx(be,{value:"boxes",children:"Boxes"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Initial Quantity"}),i.jsx(G,{type:"number",value:d.quantity_on_hand,onChange:p=>h({...d,quantity_on_hand:parseFloat(p.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Reorder Point"}),i.jsx(G,{type:"number",value:d.reorder_point,onChange:p=>h({...d,reorder_point:parseFloat(p.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Unit Cost (ZMW)"}),i.jsx(G,{type:"number",step:"0.01",value:d.unit_cost,onChange:p=>h({...d,unit_cost:parseFloat(p.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Selling Price (ZMW)"}),i.jsx(G,{type:"number",step:"0.01",value:d.selling_price,onChange:p=>h({...d,selling_price:parseFloat(p.target.value)||0})})]}),i.jsxs("div",{className:"col-span-2 space-y-2",children:[i.jsx(X,{children:"Description"}),i.jsx(G,{value:d.description,onChange:p=>h({...d,description:p.target.value}),placeholder:"Item description"})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(H,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),i.jsx(H,{onClick:()=>w.mutate(d),disabled:!d.name,children:"Add Item"})]})]})]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Total Items"}),i.jsx(Ji,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:g.length})})]}),i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Total Value"}),i.jsx(Ji,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:S(x)})})]}),i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Low Stock Items"}),i.jsx(Ga,{className:"h-4 w-4 text-destructive"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold text-destructive",children:T.length})})]}),i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Categories"}),i.jsx(Ji,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:new Set(g.map(p=>p.category).filter(Boolean)).size})})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ne,{children:"Inventory Items"}),i.jsxs("div",{className:"relative w-64",children:[i.jsx(fi,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"Search items...",value:n,onChange:p=>r(p.target.value),className:"pl-8"})]})]})}),i.jsx(re,{children:y?i.jsx("p",{children:"Loading inventory..."}):E.length===0?i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No inventory items found. Add your first item to get started."}):i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Item Name"}),i.jsx(U,{children:"SKU"}),i.jsx(U,{children:"Category"}),i.jsx(U,{className:"text-right",children:"Qty on Hand"}),i.jsx(U,{className:"text-right",children:"Reorder Point"}),i.jsx(U,{className:"text-right",children:"Unit Cost"}),i.jsx(U,{className:"text-right",children:"Total Value"}),i.jsx(U,{children:"Status"}),i.jsx(U,{children:"Actions"})]})}),i.jsx(Ht,{children:E.map(p=>i.jsxs(_e,{children:[i.jsx(B,{className:"font-medium",children:p.name}),i.jsx(B,{children:p.sku||"-"}),i.jsx(B,{children:p.category||"-"}),i.jsxs(B,{className:"text-right",children:[p.quantity_on_hand," ",p.unit_of_measure]}),i.jsx(B,{className:"text-right",children:p.reorder_point}),i.jsx(B,{className:"text-right",children:S(p.unit_cost)}),i.jsx(B,{className:"text-right",children:S(p.quantity_on_hand*p.unit_cost)}),i.jsx(B,{children:p.quantity_on_hand<=p.reorder_point?i.jsx(Xe,{variant:"destructive",children:"Low Stock"}):i.jsx(Xe,{variant:"secondary",children:"In Stock"})}),i.jsx(B,{children:i.jsxs(H,{variant:"outline",size:"sm",onClick:()=>{u(p),l(!0)},children:[i.jsx(ioe,{className:"h-4 w-4 mr-1"}),"Adjust"]})})]},p.id))})]})})]}),i.jsx(rr,{open:o,onOpenChange:l,children:i.jsxs(Wn,{children:[i.jsx(Hn,{children:i.jsxs(Kn,{children:["Stock Movement - ",c==null?void 0:c.name]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Movement Type"}),i.jsxs(kt,{value:f.movement_type,onValueChange:p=>m({...f,movement_type:p}),children:[i.jsx(At,{children:i.jsx(Rt,{})}),i.jsxs(Tt,{children:[i.jsx(be,{value:"in",children:"Stock In (Add)"}),i.jsx(be,{value:"out",children:"Stock Out (Remove)"}),i.jsx(be,{value:"adjustment",children:"Adjustment (Set)"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Quantity"}),i.jsx(G,{type:"number",value:f.quantity,onChange:p=>m({...f,quantity:parseFloat(p.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Reference Number"}),i.jsx(G,{value:f.reference_number,onChange:p=>m({...f,reference_number:p.target.value}),placeholder:"PO#, Invoice#, etc."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Notes"}),i.jsx(G,{value:f.notes,onChange:p=>m({...f,notes:p.target.value}),placeholder:"Reason for adjustment"})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(H,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),i.jsx(H,{onClick:()=>c&&b.mutate({itemId:c.id,movementData:f}),disabled:f.quantity<=0,children:"Record Movement"})]})]})})]})},KJe=()=>{const{user:t}=ct(),e=dn(),[n,r]=N.useState(!1),[s,a]=N.useState(!1),[o,l]=N.useState(null),[c,u]=N.useState({account_name:"",account_number:"",bank_name:"",branch:"",account_type:"checking",currency:"ZMW",opening_balance:0}),[d,h]=N.useState({transaction_type:"deposit",amount:0,description:"",reference_number:"",transaction_date:new Date().toISOString().split("T")[0]}),{data:f}=je({queryKey:["bank-accounts-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const T=await Ke.getPrimaryMembershipByUser(t.id);return(T==null?void 0:T.companyId)??null},enabled:!!t}),{data:m=[],isLoading:v}=je({queryKey:["bank-accounts",f],queryFn:async()=>{if(!f)return[];const T=ve(te,K.BANK_ACCOUNTS);return(await $e(Ce(T,ge("companyId","==",f)))).docs.map(S=>{const _=S.data();return{id:S.id,account_name:String(_.accountName??_.account_name??""),account_number:_.accountNumber??_.account_number??null,bank_name:String(_.bankName??_.bank_name??""),branch:_.branch??null,account_type:_.accountType??_.account_type??null,currency:_.currency??"ZMW",opening_balance:Number(_.openingBalance??_.opening_balance??0),current_balance:Number(_.currentBalance??_.current_balance??0),is_active:!!(_.isActive??_.is_active??!0)}}).sort((S,_)=>S.account_name.localeCompare(_.account_name))},enabled:!!f}),{data:g=[]}=je({queryKey:["bank-transactions",f,o==null?void 0:o.id],queryFn:async()=>{if(!o||!f)return[];const T=ve(te,K.BANK_TRANSACTIONS);return(await $e(Ce(T,ge("companyId","==",f),ge("bankAccountId","==",o.id)))).docs.map(S=>{var P;const _=S.data(),p=_.transactionDate??_.transaction_date,A=typeof p=="string"?p:((P=p==null?void 0:p.toDate)==null?void 0:P.call(p).toISOString().slice(0,10))??"";return{id:S.id,bank_account_id:String(_.bankAccountId??_.bank_account_id??""),transaction_type:String(_.transactionType??_.transaction_type??""),amount:Number(_.amount??0),description:_.description??null,reference_number:_.referenceNumber??_.reference_number??null,transaction_date:A,is_reconciled:!!(_.isReconciled??_.is_reconciled??!1)}}).sort((S,_)=>_.transaction_date.localeCompare(S.transaction_date))},enabled:!!(o&&f)}),y=ot({mutationFn:async T=>{if(!f||!t)throw new Error("No active company context");await Nn(ve(te,K.BANK_ACCOUNTS),{companyId:f,accountName:T.account_name,accountNumber:T.account_number||null,bankName:T.bank_name,branch:T.branch||null,accountType:T.account_type||"checking",currency:T.currency||"ZMW",openingBalance:T.opening_balance,currentBalance:T.opening_balance,isActive:!0,createdBy:t.id,createdAt:ye(),updatedAt:ye()})},onSuccess:()=>{e.invalidateQueries({queryKey:["bank-accounts",f]}),J.success("Bank account added successfully"),r(!1),u({account_name:"",account_number:"",bank_name:"",branch:"",account_type:"checking",currency:"ZMW",opening_balance:0})},onError:T=>{J.error(T.message)}}),w=ot({mutationFn:async T=>{if(!o||!f||!t)throw new Error("No account selected");const x=T.transaction_type==="deposit"?o.current_balance+T.amount:o.current_balance-T.amount,S=kl(te),_=He(ve(te,K.BANK_TRANSACTIONS)),p=He(te,K.BANK_ACCOUNTS,o.id);S.set(_,{companyId:f,bankAccountId:o.id,transactionType:T.transaction_type,amount:T.amount,description:T.description||null,referenceNumber:T.reference_number||null,transactionDate:T.transaction_date,isReconciled:!1,createdBy:t.id,createdAt:ye(),updatedAt:ye()}),S.update(p,{currentBalance:x,updatedAt:ye()}),await S.commit()},onSuccess:()=>{e.invalidateQueries({queryKey:["bank-accounts",f]}),e.invalidateQueries({queryKey:["bank-transactions",f,o==null?void 0:o.id]}),J.success("Transaction recorded"),a(!1),h({transaction_type:"deposit",amount:0,description:"",reference_number:"",transaction_date:new Date().toISOString().split("T")[0]})},onError:T=>{J.error(T.message)}}),b=(T,x="ZMW")=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:x}).format(T),E=m.reduce((T,x)=>T+x.current_balance,0);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Bank Accounts"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your bank accounts and transactions"})]}),i.jsxs(rr,{open:n,onOpenChange:r,children:[i.jsx(Zr,{asChild:!0,children:i.jsxs(H,{children:[i.jsx(bn,{className:"mr-2 h-4 w-4"}),"Add Account"]})}),i.jsxs(Wn,{children:[i.jsx(Hn,{children:i.jsx(Kn,{children:"Add Bank Account"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Account Name *"}),i.jsx(G,{value:c.account_name,onChange:T=>u({...c,account_name:T.target.value}),placeholder:"e.g., Main Operating Account"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Bank Name *"}),i.jsx(G,{value:c.bank_name,onChange:T=>u({...c,bank_name:T.target.value}),placeholder:"e.g., Zanaco, Stanbic, FNB"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Account Number"}),i.jsx(G,{value:c.account_number,onChange:T=>u({...c,account_number:T.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Branch"}),i.jsx(G,{value:c.branch,onChange:T=>u({...c,branch:T.target.value})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Account Type"}),i.jsxs(kt,{value:c.account_type,onValueChange:T=>u({...c,account_type:T}),children:[i.jsx(At,{children:i.jsx(Rt,{})}),i.jsxs(Tt,{children:[i.jsx(be,{value:"checking",children:"Checking"}),i.jsx(be,{value:"savings",children:"Savings"}),i.jsx(be,{value:"money_market",children:"Money Market"}),i.jsx(be,{value:"fixed_deposit",children:"Fixed Deposit"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Currency"}),i.jsxs(kt,{value:c.currency,onValueChange:T=>u({...c,currency:T}),children:[i.jsx(At,{children:i.jsx(Rt,{})}),i.jsxs(Tt,{children:[i.jsx(be,{value:"ZMW",children:"ZMW - Zambian Kwacha"}),i.jsx(be,{value:"USD",children:"USD - US Dollar"}),i.jsx(be,{value:"EUR",children:"EUR - Euro"}),i.jsx(be,{value:"GBP",children:"GBP - British Pound"})]})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Opening Balance"}),i.jsx(G,{type:"number",step:"0.01",value:c.opening_balance,onChange:T=>u({...c,opening_balance:parseFloat(T.target.value)||0})})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(H,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),i.jsx(H,{onClick:()=>y.mutate(c),disabled:!c.account_name||!c.bank_name,children:"Add Account"})]})]})]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Total Accounts"}),i.jsx(Ra,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:m.length})})]}),i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Total Balance"}),i.jsx(Ra,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:b(E)})})]}),i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Active Accounts"}),i.jsx(Ra,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:m.filter(T=>T.is_active).length})})]})]}),i.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"Bank Accounts"})}),i.jsx(re,{children:v?i.jsx("p",{children:"Loading accounts..."}):m.length===0?i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No bank accounts found. Add your first account to get started."}):i.jsx("div",{className:"space-y-4",children:m.map(T=>i.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors ${(o==null?void 0:o.id)===T.id?"border-primary bg-primary/5":"hover:bg-muted/50"}`,onClick:()=>l(T),children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:T.account_name}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[T.bank_name," ",T.account_number?`- ${T.account_number}`:""]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-bold",children:b(T.current_balance,T.currency||"ZMW")}),i.jsx(Xe,{variant:T.is_active?"secondary":"outline",children:T.account_type})]})]})},T.id))})})]}),i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between",children:[i.jsx(ne,{children:o?`Transactions - ${o.account_name}`:"Select an Account"}),o&&i.jsxs(rr,{open:s,onOpenChange:a,children:[i.jsx(Zr,{asChild:!0,children:i.jsxs(H,{size:"sm",children:[i.jsx(bn,{className:"h-4 w-4 mr-1"}),"Add Transaction"]})}),i.jsxs(Wn,{children:[i.jsx(Hn,{children:i.jsx(Kn,{children:"Record Transaction"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Transaction Type"}),i.jsxs(kt,{value:d.transaction_type,onValueChange:T=>h({...d,transaction_type:T}),children:[i.jsx(At,{children:i.jsx(Rt,{})}),i.jsxs(Tt,{children:[i.jsx(be,{value:"deposit",children:"Deposit"}),i.jsx(be,{value:"withdrawal",children:"Withdrawal"}),i.jsx(be,{value:"transfer",children:"Transfer"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Amount"}),i.jsx(G,{type:"number",step:"0.01",value:d.amount,onChange:T=>h({...d,amount:parseFloat(T.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Date"}),i.jsx(G,{type:"date",value:d.transaction_date,onChange:T=>h({...d,transaction_date:T.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Description"}),i.jsx(G,{value:d.description,onChange:T=>h({...d,description:T.target.value}),placeholder:"Transaction description"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Reference Number"}),i.jsx(G,{value:d.reference_number,onChange:T=>h({...d,reference_number:T.target.value}),placeholder:"Check#, Transfer#, etc."})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(H,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),i.jsx(H,{onClick:()=>w.mutate(d),disabled:d.amount<=0,children:"Record Transaction"})]})]})]})]}),i.jsx(re,{children:o?g.length===0?i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No transactions recorded for this account"}):i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Date"}),i.jsx(U,{children:"Description"}),i.jsx(U,{className:"text-right",children:"Amount"})]})}),i.jsx(Ht,{children:g.slice(0,10).map(T=>i.jsxs(_e,{children:[i.jsx(B,{children:new Date(T.transaction_date).toLocaleDateString()}),i.jsx(B,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[T.transaction_type==="deposit"?i.jsx(roe,{className:"h-4 w-4 text-green-500"}):i.jsx(j8,{className:"h-4 w-4 text-red-500"}),T.description||T.transaction_type]})}),i.jsxs(B,{className:`text-right font-medium ${T.transaction_type==="deposit"?"text-green-600":"text-red-600"}`,children:[T.transaction_type==="deposit"?"+":"-",b(T.amount)]})]},T.id))})]}):i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Select an account to view transactions"})})]})]})]})};var tS="Checkbox",[GJe,ott]=ds(tS),[YJe,TM]=GJe(tS);function QJe(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:a,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:h}=t,[f,m]=Ha({prop:n,defaultProp:s??!1,onChange:c,caller:tS}),[v,g]=N.useState(null),[y,w]=N.useState(null),b=N.useRef(!1),E=v?!!o||!!v.closest("form"):!0,T={checked:f,disabled:a,setChecked:m,control:v,setControl:g,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:b,required:u,defaultChecked:au(s)?!1:s,isFormControl:E,bubbleInput:y,setBubbleInput:w};return i.jsx(YJe,{scope:e,...T,children:XJe(h)?h(T):r})}var ere="CheckboxTrigger",tre=N.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:a,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:m,bubbleInput:v}=TM(ere,t),g=Dt(s,d),y=N.useRef(c);return N.useEffect(()=>{const w=a==null?void 0:a.form;if(w){const b=()=>h(y.current);return w.addEventListener("reset",b),()=>w.removeEventListener("reset",b)}},[a,h]),i.jsx(Je.button,{type:"button",role:"checkbox","aria-checked":au(c)?"mixed":c,"aria-required":u,"data-state":are(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:g,onKeyDown:Pe(e,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:Pe(n,w=>{h(b=>au(b)?!0:!b),v&&m&&(f.current=w.isPropagationStopped(),f.current||w.stopPropagation())})})});tre.displayName=ere;var CM=N.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:a,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...h}=t;return i.jsx(QJe,{__scopeCheckbox:n,checked:s,defaultChecked:a,disabled:l,required:o,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:f})=>i.jsxs(i.Fragment,{children:[i.jsx(tre,{...h,ref:e,__scopeCheckbox:n}),f&&i.jsx(ire,{__scopeCheckbox:n})]})})});CM.displayName=tS;var nre="CheckboxIndicator",rre=N.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,a=TM(nre,n);return i.jsx(hs,{present:r||au(a.checked)||a.checked===!0,children:i.jsx(Je.span,{"data-state":are(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});rre.displayName=nre;var sre="CheckboxBubbleInput",ire=N.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:a,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:h,bubbleInput:f,setBubbleInput:m}=TM(sre,t),v=Dt(n,m),g=f2(a),y=Bk(r);N.useEffect(()=>{const b=f;if(!b)return;const E=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(E,"checked").set,S=!s.current;if(g!==a&&x){const _=new Event("click",{bubbles:S});b.indeterminate=au(a),x.call(b,au(a)?!1:a),b.dispatchEvent(_)}},[f,g,a,s]);const w=N.useRef(au(a)?!1:a);return i.jsx(Je.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??w.current,required:l,disabled:c,name:u,value:d,form:h,...e,tabIndex:-1,ref:v,style:{...e.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});ire.displayName=sre;function XJe(t){return typeof t=="function"}function au(t){return t==="indeterminate"}function are(t){return au(t)?"indeterminate":t?"checked":"unchecked"}const ore=N.forwardRef(({className:t,...e},n)=>i.jsx(CM,{ref:n,className:pe("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:i.jsx(rre,{className:pe("flex items-center justify-center text-current"),children:i.jsx(Nx,{className:"h-4 w-4"})})}));ore.displayName=CM.displayName;const ZJe=()=>{const{user:t}=ct(),e=dn(),[n,r]=N.useState(""),[s,a]=N.useState(0),[o,l]=N.useState(new Date().toISOString().split("T")[0]),[c,u]=N.useState(new Set),{data:d}=je({queryKey:["reconciliation-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const T=await Ke.getPrimaryMembershipByUser(t.id);return(T==null?void 0:T.companyId)??null},enabled:!!t}),{data:h=[]}=je({queryKey:["bank-accounts",d],queryFn:async()=>{if(!d)return[];const T=ve(te,K.BANK_ACCOUNTS);return(await $e(Ce(T,ge("companyId","==",d),ge("isActive","==",!0)))).docs.map(S=>{const _=S.data();return{id:S.id,account_name:String(_.accountName??_.account_name??""),bank_name:String(_.bankName??_.bank_name??""),current_balance:Number(_.currentBalance??_.current_balance??0)}}).sort((S,_)=>S.account_name.localeCompare(_.account_name))},enabled:!!d}),{data:f=[]}=je({queryKey:["unreconciled-transactions",d,n],queryFn:async()=>{if(!n||!d)return[];const T=ve(te,K.BANK_TRANSACTIONS);return(await $e(Ce(T,ge("companyId","==",d),ge("bankAccountId","==",n),ge("isReconciled","==",!1)))).docs.map(S=>{var P;const _=S.data(),p=_.transactionDate??_.transaction_date,A=typeof p=="string"?p:((P=p==null?void 0:p.toDate)==null?void 0:P.call(p).toISOString().slice(0,10))??"";return{id:S.id,transaction_type:String(_.transactionType??_.transaction_type??""),amount:Number(_.amount??0),description:_.description??null,reference_number:_.referenceNumber??_.reference_number??null,transaction_date:A,is_reconciled:!!(_.isReconciled??_.is_reconciled??!1)}}).sort((S,_)=>_.transaction_date.localeCompare(S.transaction_date))},enabled:!!(n&&d)}),m=ot({mutationFn:async()=>{if(!n||c.size===0||!d||!t)throw new Error("Please select transactions to reconcile");const T=Array.from(c),x=kl(te);T.forEach(p=>{const A=He(te,K.BANK_TRANSACTIONS,p);x.update(A,{isReconciled:!0,reconciledDate:o,updatedAt:ye()})});const S=h.find(p=>p.id===n),_=He(ve(te,K.RECONCILIATIONS));x.set(_,{companyId:d,bankAccountId:n,reconciliationDate:o,statementBalance:s,bookBalance:(S==null?void 0:S.current_balance)||0,difference:s-((S==null?void 0:S.current_balance)||0),status:"completed",transactionIds:T,reconciledBy:t.id,createdAt:ye(),updatedAt:ye()}),await x.commit()},onSuccess:()=>{e.invalidateQueries({queryKey:["unreconciled-transactions",d,n]}),J.success("Transactions reconciled successfully"),u(new Set)},onError:T=>{J.error(T.message)}}),v=h.find(T=>T.id===n),g=f.filter(T=>c.has(T.id)).reduce((T,x)=>x.transaction_type==="deposit"?T+x.amount:T-x.amount,(v==null?void 0:v.current_balance)||0),y=s-g,w=T=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(T),b=T=>{const x=new Set(c);x.has(T)?x.delete(T):x.add(T),u(x)},E=()=>{c.size===f.length?u(new Set):u(new Set(f.map(T=>T.id)))};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Bank Reconciliation"}),i.jsx("p",{className:"text-muted-foreground",children:"Match your bank statement with recorded transactions"})]}),i.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[i.jsxs(Z,{className:"lg:col-span-1",children:[i.jsx(ee,{children:i.jsx(ne,{children:"Reconciliation Setup"})}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Bank Account"}),i.jsxs(kt,{value:n,onValueChange:r,children:[i.jsx(At,{children:i.jsx(Rt,{placeholder:"Select account"})}),i.jsx(Tt,{children:h.map(T=>i.jsxs(be,{value:T.id,children:[T.account_name," (",T.bank_name,")"]},T.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Statement Date"}),i.jsx(G,{type:"date",value:o,onChange:T=>l(T.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Statement Ending Balance"}),i.jsx(G,{type:"number",step:"0.01",value:s,onChange:T=>a(parseFloat(T.target.value)||0),placeholder:"Enter balance from bank statement"})]}),v&&i.jsxs("div",{className:"pt-4 border-t space-y-3",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Book Balance:"}),i.jsx("span",{className:"font-medium",children:w(v.current_balance)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Cleared Balance:"}),i.jsx("span",{className:"font-medium",children:w(g)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Statement Balance:"}),i.jsx("span",{className:"font-medium",children:w(s)})]}),i.jsxs("div",{className:"flex justify-between font-semibold pt-2 border-t",children:[i.jsx("span",{children:"Difference:"}),i.jsx("span",{className:y===0?"text-green-600":"text-red-600",children:w(y)})]}),y===0?i.jsxs("div",{className:"flex items-center gap-2 text-green-600 text-sm",children:[i.jsx(Mo,{className:"h-4 w-4"}),i.jsx("span",{children:"Balanced! Ready to reconcile."})]}):i.jsxs("div",{className:"flex items-center gap-2 text-amber-600 text-sm",children:[i.jsx(Ci,{className:"h-4 w-4"}),i.jsx("span",{children:"Difference must be zero to reconcile."})]})]}),i.jsxs(H,{className:"w-full",onClick:()=>m.mutate(),disabled:y!==0||c.size===0,children:[i.jsx(Aoe,{className:"h-4 w-4 mr-2"}),"Complete Reconciliation"]})]})]}),i.jsxs(Z,{className:"lg:col-span-2",children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between",children:[i.jsx(ne,{children:"Unreconciled Transactions"}),f.length>0&&i.jsx(H,{variant:"outline",size:"sm",onClick:E,children:c.size===f.length?"Deselect All":"Select All"})]}),i.jsx(re,{children:n?f.length===0?i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No unreconciled transactions for this account"}):i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{className:"w-12",children:"Clear"}),i.jsx(U,{children:"Date"}),i.jsx(U,{children:"Description"}),i.jsx(U,{children:"Reference"}),i.jsx(U,{children:"Type"}),i.jsx(U,{className:"text-right",children:"Amount"})]})}),i.jsx(Ht,{children:f.map(T=>i.jsxs(_e,{className:c.has(T.id)?"bg-primary/5":"",children:[i.jsx(B,{children:i.jsx(ore,{checked:c.has(T.id),onCheckedChange:()=>b(T.id)})}),i.jsx(B,{children:new Date(T.transaction_date).toLocaleDateString()}),i.jsx(B,{children:T.description||"-"}),i.jsx(B,{children:T.reference_number||"-"}),i.jsx(B,{children:i.jsx(Xe,{variant:T.transaction_type==="deposit"?"secondary":"outline",children:T.transaction_type})}),i.jsxs(B,{className:`text-right font-medium ${T.transaction_type==="deposit"?"text-green-600":"text-red-600"}`,children:[T.transaction_type==="deposit"?"+":"-",w(T.amount)]})]},T.id))})]}):i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Select a bank account to view transactions"})})]})]})]})},JJe=()=>{const{user:t}=ct(),e=dn(),[n,r]=N.useState(""),[s,a]=N.useState(!1),[o,l]=N.useState(!1),[c,u]=N.useState({name:"",email:"",phone:"",specialty:"",hourly_rate:0,daily_rate:0,tpin:"",bank_name:"",bank_account_number:""}),[d,h]=N.useState({contractor_id:"",project_name:"",description:"",work_date:new Date().toISOString().split("T")[0],hours_worked:0,hourly_rate:0}),{data:f}=je({queryKey:["time-tracking-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const p=await Ke.getPrimaryMembershipByUser(t.id);return(p==null?void 0:p.companyId)??null},enabled:!!t}),{data:m=[],isLoading:v}=je({queryKey:["contractors",f],queryFn:async()=>{if(!f)return[];const p=ve(te,K.CONTRACTORS);return(await $e(Ce(p,ge("companyId","==",f)))).docs.map(P=>{const C=P.data();return{id:P.id,name:String(C.name??""),email:C.email??null,phone:C.phone??null,specialty:C.specialty??null,hourly_rate:Number(C.hourlyRate??C.hourly_rate??0),daily_rate:Number(C.dailyRate??C.daily_rate??0),tpin:C.tpin??null,bank_name:C.bankName??C.bank_name??null,bank_account_number:C.bankAccountNumber??C.bank_account_number??null,is_active:!!(C.isActive??C.is_active??!0)}}).sort((P,C)=>P.name.localeCompare(C.name))},enabled:!!f}),{data:g=[],isLoading:y}=je({queryKey:["time-entries",f],queryFn:async()=>{if(!f)return[];const[p,A]=await Promise.all([$e(Ce(ve(te,K.TIME_ENTRIES),ge("companyId","==",f))),$e(Ce(ve(te,K.CONTRACTORS),ge("companyId","==",f)))]),P=new Map;return A.docs.forEach(C=>{const I=C.data();P.set(C.id,String(I.name??""))}),p.docs.map(C=>{var W;const I=C.data(),R=I.workDate??I.work_date,L=typeof R=="string"?R:((W=R==null?void 0:R.toDate)==null?void 0:W.call(R).toISOString().slice(0,10))??"",z=I.contractorId??I.contractor_id??null;return{id:C.id,contractor_id:z,employee_id:I.employeeId??I.employee_id??null,project_name:I.projectName??I.project_name??null,description:I.description??null,work_date:L,hours_worked:Number(I.hoursWorked??I.hours_worked??0),hourly_rate:Number(I.hourlyRate??I.hourly_rate??0),total_amount:Number(I.totalAmount??I.total_amount??0),status:I.status??"pending",contractor:z?{name:P.get(z)||"-"}:void 0}}).sort((C,I)=>I.work_date.localeCompare(C.work_date))},enabled:!!f}),w=ot({mutationFn:async p=>{if(!f||!t)throw new Error("No active company context");await Nn(ve(te,K.CONTRACTORS),{companyId:f,name:p.name,email:p.email||null,phone:p.phone||null,specialty:p.specialty||null,hourlyRate:p.hourly_rate,dailyRate:p.daily_rate,tpin:p.tpin||null,bankName:p.bank_name||null,bankAccountNumber:p.bank_account_number||null,isActive:!0,createdBy:t.id,createdAt:ye(),updatedAt:ye()})},onSuccess:()=>{e.invalidateQueries({queryKey:["contractors",f]}),J.success("Contractor added successfully"),a(!1),u({name:"",email:"",phone:"",specialty:"",hourly_rate:0,daily_rate:0,tpin:"",bank_name:"",bank_account_number:""})},onError:p=>{J.error(p.message)}}),b=ot({mutationFn:async p=>{if(!f||!t)throw new Error("No active company context");const A=p.hours_worked*p.hourly_rate;await Nn(ve(te,K.TIME_ENTRIES),{companyId:f,contractorId:p.contractor_id||null,projectName:p.project_name||null,description:p.description||null,workDate:p.work_date,hoursWorked:p.hours_worked,hourlyRate:p.hourly_rate,totalAmount:A,status:"pending",createdBy:t.id,createdAt:ye(),updatedAt:ye()})},onSuccess:()=>{e.invalidateQueries({queryKey:["time-entries",f]}),J.success("Time entry recorded"),l(!1),h({contractor_id:"",project_name:"",description:"",work_date:new Date().toISOString().split("T")[0],hours_worked:0,hourly_rate:0})},onError:p=>{J.error(p.message)}}),E=ot({mutationFn:async({id:p,status:A})=>{await dr(He(te,K.TIME_ENTRIES,p),{status:A,updatedAt:ye()},{merge:!0})},onSuccess:()=>{e.invalidateQueries({queryKey:["time-entries",f]}),J.success("Status updated")},onError:p=>{J.error(p.message)}}),T=m.filter(p=>{var A;return p.name.toLowerCase().includes(n.toLowerCase())||((A=p.specialty)==null?void 0:A.toLowerCase().includes(n.toLowerCase()))}),x=p=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(p),S=g.filter(p=>p.status==="pending").reduce((p,A)=>p+A.total_amount,0),_=g.filter(p=>{const A=new Date(p.work_date),P=new Date;return A.getMonth()===P.getMonth()&&A.getFullYear()===P.getFullYear()}).reduce((p,A)=>p+A.hours_worked,0);return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Time & Contractors"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage contractors and track time entries"})]})}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Active Contractors"}),i.jsx(si,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:m.filter(p=>p.is_active).length})})]}),i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Hours This Month"}),i.jsx(Pi,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:_.toFixed(1)})})]}),i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Pending Entries"}),i.jsx(Pi,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:g.filter(p=>p.status==="pending").length})})]}),i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Pending Amount"}),i.jsx(Pi,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:x(S)})})]})]}),i.jsxs(J1,{defaultValue:"contractors",children:[i.jsxs(lb,{children:[i.jsx(za,{value:"contractors",children:"Contractors"}),i.jsx(za,{value:"time-entries",children:"Time Entries"})]}),i.jsxs(qa,{value:"contractors",className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"relative w-64",children:[i.jsx(fi,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"Search contractors...",value:n,onChange:p=>r(p.target.value),className:"pl-8"})]}),i.jsxs(rr,{open:s,onOpenChange:a,children:[i.jsx(Zr,{asChild:!0,children:i.jsxs(H,{children:[i.jsx(bn,{className:"mr-2 h-4 w-4"}),"Add Contractor"]})}),i.jsxs(Wn,{className:"max-w-2xl",children:[i.jsx(Hn,{children:i.jsx(Kn,{children:"Add Contractor"})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Name *"}),i.jsx(G,{value:c.name,onChange:p=>u({...c,name:p.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Email"}),i.jsx(G,{type:"email",value:c.email,onChange:p=>u({...c,email:p.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Phone"}),i.jsx(G,{value:c.phone,onChange:p=>u({...c,phone:p.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Specialty"}),i.jsx(G,{value:c.specialty,onChange:p=>u({...c,specialty:p.target.value}),placeholder:"e.g., IT Consultant, Trainer"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Hourly Rate (ZMW)"}),i.jsx(G,{type:"number",step:"0.01",value:c.hourly_rate,onChange:p=>u({...c,hourly_rate:parseFloat(p.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Daily Rate (ZMW)"}),i.jsx(G,{type:"number",step:"0.01",value:c.daily_rate,onChange:p=>u({...c,daily_rate:parseFloat(p.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"TPIN"}),i.jsx(G,{value:c.tpin,onChange:p=>u({...c,tpin:p.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Bank Name"}),i.jsx(G,{value:c.bank_name,onChange:p=>u({...c,bank_name:p.target.value})})]}),i.jsxs("div",{className:"col-span-2 space-y-2",children:[i.jsx(X,{children:"Bank Account Number"}),i.jsx(G,{value:c.bank_account_number,onChange:p=>u({...c,bank_account_number:p.target.value})})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(H,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),i.jsx(H,{onClick:()=>w.mutate(c),disabled:!c.name,children:"Add Contractor"})]})]})]})]}),i.jsx(Z,{children:i.jsx(re,{className:"pt-6",children:v?i.jsx("p",{children:"Loading contractors..."}):T.length===0?i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No contractors found."}):i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Name"}),i.jsx(U,{children:"Specialty"}),i.jsx(U,{children:"Contact"}),i.jsx(U,{className:"text-right",children:"Hourly Rate"}),i.jsx(U,{className:"text-right",children:"Daily Rate"}),i.jsx(U,{children:"Status"})]})}),i.jsx(Ht,{children:T.map(p=>i.jsxs(_e,{children:[i.jsx(B,{className:"font-medium",children:p.name}),i.jsx(B,{children:p.specialty||"-"}),i.jsx(B,{children:i.jsxs("div",{className:"text-sm",children:[p.email&&i.jsx("div",{children:p.email}),p.phone&&i.jsx("div",{children:p.phone})]})}),i.jsx(B,{className:"text-right",children:x(p.hourly_rate)}),i.jsx(B,{className:"text-right",children:x(p.daily_rate)}),i.jsx(B,{children:i.jsx(Xe,{variant:p.is_active?"secondary":"outline",children:p.is_active?"Active":"Inactive"})})]},p.id))})]})})})]}),i.jsxs(qa,{value:"time-entries",className:"space-y-4",children:[i.jsx("div",{className:"flex justify-end",children:i.jsxs(rr,{open:o,onOpenChange:l,children:[i.jsx(Zr,{asChild:!0,children:i.jsxs(H,{children:[i.jsx(bn,{className:"mr-2 h-4 w-4"}),"Record Time"]})}),i.jsxs(Wn,{children:[i.jsx(Hn,{children:i.jsx(Kn,{children:"Record Time Entry"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Contractor"}),i.jsxs(kt,{value:d.contractor_id,onValueChange:p=>{const A=m.find(P=>P.id===p);h({...d,contractor_id:p,hourly_rate:(A==null?void 0:A.hourly_rate)||0})},children:[i.jsx(At,{children:i.jsx(Rt,{placeholder:"Select contractor"})}),i.jsx(Tt,{children:m.filter(p=>p.is_active).map(p=>i.jsx(be,{value:p.id,children:p.name},p.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Project Name"}),i.jsx(G,{value:d.project_name,onChange:p=>h({...d,project_name:p.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Work Date"}),i.jsx(G,{type:"date",value:d.work_date,onChange:p=>h({...d,work_date:p.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Hours Worked"}),i.jsx(G,{type:"number",step:"0.5",value:d.hours_worked,onChange:p=>h({...d,hours_worked:parseFloat(p.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Hourly Rate (ZMW)"}),i.jsx(G,{type:"number",step:"0.01",value:d.hourly_rate,onChange:p=>h({...d,hourly_rate:parseFloat(p.target.value)||0})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Description"}),i.jsx(G,{value:d.description,onChange:p=>h({...d,description:p.target.value}),placeholder:"Work performed"})]}),i.jsx("div",{className:"pt-2 border-t",children:i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Total Amount:"}),i.jsx("span",{className:"font-bold",children:x(d.hours_worked*d.hourly_rate)})]})})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(H,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),i.jsx(H,{onClick:()=>b.mutate(d),disabled:d.hours_worked<=0,children:"Record Entry"})]})]})]})}),i.jsx(Z,{children:i.jsx(re,{className:"pt-6",children:y?i.jsx("p",{children:"Loading time entries..."}):g.length===0?i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No time entries found."}):i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Date"}),i.jsx(U,{children:"Contractor"}),i.jsx(U,{children:"Project"}),i.jsx(U,{className:"text-right",children:"Hours"}),i.jsx(U,{className:"text-right",children:"Rate"}),i.jsx(U,{className:"text-right",children:"Amount"}),i.jsx(U,{children:"Status"}),i.jsx(U,{children:"Actions"})]})}),i.jsx(Ht,{children:g.map(p=>{var A;return i.jsxs(_e,{children:[i.jsx(B,{children:new Date(p.work_date).toLocaleDateString()}),i.jsx(B,{children:((A=p.contractor)==null?void 0:A.name)||"-"}),i.jsx(B,{children:p.project_name||"-"}),i.jsx(B,{className:"text-right",children:p.hours_worked}),i.jsx(B,{className:"text-right",children:x(p.hourly_rate)}),i.jsx(B,{className:"text-right font-medium",children:x(p.total_amount)}),i.jsx(B,{children:i.jsx(Xe,{variant:p.status==="paid"?"secondary":p.status==="approved"?"default":"outline",children:p.status})}),i.jsxs(B,{children:[p.status==="pending"&&i.jsx(H,{size:"sm",variant:"outline",onClick:()=>E.mutate({id:p.id,status:"approved"}),children:"Approve"}),p.status==="approved"&&i.jsx(H,{size:"sm",variant:"outline",onClick:()=>E.mutate({id:p.id,status:"paid"}),children:"Mark Paid"})]})]},p.id)})})]})})})]})]})]})},rf={super_admin:{label:"Super Admin",description:"Full system access, can manage all users and settings",color:"bg-red-500"},admin:{label:"Admin",description:"Can manage most settings and users",color:"bg-orange-500"},financial_manager:{label:"Financial Manager",description:"Oversees all financial operations and approvals",color:"bg-rose-500"},accountant:{label:"Accountant",description:"Full access to financial records, reports, and transactions",color:"bg-blue-500"},assistant_accountant:{label:"Assistant Accountant",description:"Assists with bookkeeping and data entry under supervision",color:"bg-sky-500"},finance_officer:{label:"Finance Officer",description:"Can manage invoices, bills, and expenses",color:"bg-cyan-500"},bookkeeper:{label:"Bookkeeper",description:"Can record transactions and reconcile accounts",color:"bg-teal-500"},cashier:{label:"Cashier",description:"Handles cash transactions and petty cash management",color:"bg-emerald-500"},inventory_manager:{label:"Inventory Manager",description:"Can manage inventory and stock movements",color:"bg-green-500"},hr_manager:{label:"HR Manager",description:"Can manage employees and payroll",color:"bg-purple-500"},project_manager:{label:"Project Manager",description:"Can manage projects and grants",color:"bg-indigo-500"},auditor:{label:"Auditor",description:"Read-only access to all financial records for auditing",color:"bg-yellow-500"},staff:{label:"Staff",description:"Basic access for regular employees",color:"bg-slate-500"},read_only:{label:"Read Only",description:"Can only view data, no editing permissions",color:"bg-gray-500"}},bA=["super_admin","admin","financial_manager","accountant","assistant_accountant","finance_officer","bookkeeper","cashier","inventory_manager","hr_manager","project_manager","auditor","staff","read_only"];function eet(){const{user:t}=ct(),{data:e}=$N(),[n,r]=N.useState(!1),[s,a]=N.useState(""),[o,l]=N.useState(""),[c,u]=N.useState("finance_officer"),[d,h]=N.useState(null),{data:f}=je({queryKey:["primary-membership",t==null?void 0:t.uid],queryFn:()=>t?Ke.getPrimaryMembershipByUser(t.uid):null,enabled:!!t}),m=f==null?void 0:f.companyId,v=dn(),{data:g,isLoading:y,error:w}=je({queryKey:["company-users",m],queryFn:async()=>m?Ke.listCompanyUsers(m):[],enabled:!!m}),b=ot({mutationFn:async({userId:P,newRole:C})=>{if(!m)throw new Error("No company ID found");await Ke.updateUserRole({companyId:m,userId:P,newRole:C})},onSuccess:()=>{v.invalidateQueries({queryKey:["company-users",m]}),J.success("User role updated successfully"),h(null)},onError:P=>{J.error("Failed to update role: "+(P instanceof Error?P.message:"Unknown error"))}}),E=ot({mutationFn:async P=>{if(!m)throw new Error("No company ID found");await Ke.removeCompanyUser({companyId:m,userId:P})},onSuccess:()=>{v.invalidateQueries({queryKey:["company-users",m]}),J.success("User removed successfully")},onError:P=>{J.error("Failed to remove user: "+(P instanceof Error?P.message:"Unknown error"))}}),T=ot({mutationFn:async({userId:P,action:C})=>{if(!m)throw new Error("No company ID found");C==="suspend"?await Ke.suspendUser({companyId:m,userId:P}):await Ke.reactivateUser({companyId:m,userId:P})},onSuccess:()=>{v.invalidateQueries({queryKey:["company-users",m]}),J.success("User status updated successfully")},onError:P=>{J.error("Failed to update status: "+(P instanceof Error?P.message:"Unknown error"))}}),x=ot({mutationFn:async P=>{if(!m)throw new Error("No company ID found");await Ke.revokeInvitation({companyId:m,invitationId:P})},onSuccess:()=>{v.invalidateQueries({queryKey:["company-users",m]}),J.success("Invitation revoked")},onError:P=>{J.error("Failed to revoke: "+(P instanceof Error?P.message:"Unknown error"))}}),S=ot({mutationFn:async()=>{if(!s)throw new Error("Email is required");if(!m)throw new Error("No company ID found");await Ds.sendInvitation({email:s,role:c,inviteeName:o,companyId:m,loginUrl:`${window.location.origin}/auth`})},onSuccess:()=>{J.success("Invitation sent successfully"),a(""),l(""),u("finance_officer"),r(!1)},onError:P=>{J.error("Failed to send invite: "+(P instanceof Error?P.message:"Unknown error"))}}),_=e==="super_admin"||e==="admin",p=P=>{const C=rf[P];return i.jsx(Xe,{className:`${C.color} text-white hover:${C.color}`,children:C.label})},A=P=>P.fullName||P.email||P.userId||"Unknown User";return!t||!m&&!y?i.jsx("div",{className:"flex items-center justify-center py-20",children:i.jsx(Rn,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Users & Roles"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage user access and permissions like QuickBooks"})]}),_&&i.jsxs(rr,{open:n,onOpenChange:r,children:[i.jsx(Zr,{asChild:!0,children:i.jsxs(H,{children:[i.jsx(Coe,{className:"mr-2 h-4 w-4"}),"Invite User"]})}),i.jsxs(Wn,{children:[i.jsxs(Hn,{children:[i.jsx(Kn,{children:"Invite New User"}),i.jsx(Yu,{children:"Send an invitation to a new user with a specific role"})]}),i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"name",children:"Full Name"}),i.jsx(G,{id:"name",type:"text",placeholder:"Jane Doe",value:o,onChange:P=>l(P.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"email",children:"Email Address"}),i.jsx(G,{id:"email",type:"email",placeholder:"user@example.com",value:s,onChange:P=>a(P.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"role",children:"Role"}),i.jsxs(kt,{value:c,onValueChange:P=>u(P),children:[i.jsx(At,{children:i.jsx(Rt,{})}),i.jsx(Tt,{children:bA.map(P=>i.jsx(be,{value:P,children:i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("span",{children:rf[P].label})})},P))})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:rf[c].description})]})]}),i.jsxs(eS,{children:[i.jsx(H,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),i.jsx(H,{onClick:()=>S.mutate(),disabled:S.isPending,children:S.isPending?i.jsxs(i.Fragment,{children:[i.jsx(Rn,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):"Send Invitation"})]})]})]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Total Users"}),i.jsx(si,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:(g==null?void 0:g.length)||0})})]}),i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Admins"}),i.jsx(eh,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:(g==null?void 0:g.filter(P=>P.role==="super_admin"||P.role==="admin").length)||0})})]}),i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Accountants"}),i.jsx(si,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:(g==null?void 0:g.filter(P=>["accountant","finance_officer","bookkeeper"].includes(P.role)).length)||0})})]}),i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Your Role"}),i.jsx(eh,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:e&&p(e)})]})]}),i.jsxs(Z,{children:[i.jsxs(ee,{children:[i.jsx(ne,{children:"All Users"}),i.jsx(St,{children:"Manage user roles and permissions across your organization"})]}),i.jsx(re,{children:y?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx(Rn,{className:"h-8 w-8 animate-spin text-primary"})}):w?i.jsx("div",{className:"p-4 text-red-500 text-center",children:"Failed to load users. Please try again."}):i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"User"}),i.jsx(U,{children:"Role"}),i.jsx(U,{children:"Status"}),i.jsx(U,{children:"Added"}),_&&i.jsx(U,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ht,{children:[g==null?void 0:g.map(P=>i.jsxs(_e,{children:[i.jsx(B,{children:i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"font-medium",children:A(P)}),P.email&&i.jsx("span",{className:"text-sm text-muted-foreground",children:P.email}),P.status==="invited"&&i.jsx("span",{className:"text-xs text-amber-500 font-mono",children:"Invitation Pending"})]})}),i.jsx(B,{children:(d==null?void 0:d.id)===P.id&&P.status!=="invited"?i.jsxs(kt,{value:d.role,onValueChange:C=>h({...d,role:C}),children:[i.jsx(At,{className:"w-48",children:i.jsx(Rt,{})}),i.jsx(Tt,{children:bA.map(C=>i.jsx(be,{value:C,children:rf[C].label},C))})]}):i.jsxs("div",{className:"space-y-1",children:[p(P.role),i.jsx("p",{className:"text-xs text-muted-foreground",children:rf[P.role].description})]})}),i.jsx(B,{children:i.jsx(Xe,{variant:P.status==="active"?"default":P.status==="invited"?"outline":"destructive",children:P.status==="invited"?"Pending":P.status})}),i.jsx(B,{children:P.createdAt?new Date(P.createdAt).toLocaleDateString():"-"}),_&&i.jsx(B,{className:"text-right",children:(d==null?void 0:d.id)===P.id?i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{size:"sm",onClick:()=>b.mutate({userId:P.userId,newRole:d.role}),disabled:b.isPending,children:b.isPending?i.jsx(Rn,{className:"h-4 w-4 animate-spin"}):"Save"}),i.jsx(H,{size:"sm",variant:"outline",onClick:()=>h(null),children:"Cancel"})]}):i.jsx("div",{className:"flex justify-end gap-2",children:P.status==="invited"?i.jsx(H,{size:"sm",variant:"destructive",onClick:()=>{confirm("Revoke this invitation? The link will no longer work.")&&x.mutate(P.id)},disabled:x.isPending,children:"Revoke"}):i.jsxs(i.Fragment,{children:[i.jsx(H,{size:"sm",variant:"outline",onClick:()=>h(P),children:i.jsx(Soe,{className:"h-4 w-4"})}),P.status==="suspended"?i.jsx(H,{size:"sm",variant:"outline",className:"text-green-600 hover:text-green-700 hover:bg-green-50",onClick:()=>T.mutate({userId:P.userId,action:"reactivate"}),disabled:T.isPending,children:"Activate"}):i.jsx(H,{size:"sm",variant:"outline",className:"text-orange-600 hover:text-orange-700 hover:bg-orange-50",onClick:()=>{confirm("Suspend this user? They will lose access immediately.")&&T.mutate({userId:P.userId,action:"suspend"})},disabled:T.isPending||P.role==="super_admin",children:"Suspend"}),i.jsx(H,{size:"sm",variant:"destructive",onClick:()=>{confirm("Permanently remove this user? This cannot be undone.")&&E.mutate(P.userId)},disabled:P.role==="super_admin"||E.isPending,children:i.jsx(Ts,{className:"h-4 w-4"})})]})})})]},P.id)),(!g||g.length===0)&&i.jsx(_e,{children:i.jsx(B,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No users found"})})]})]})})]}),i.jsxs(Z,{children:[i.jsxs(ee,{children:[i.jsx(ne,{children:"Role Permissions Reference"}),i.jsx(St,{children:"Understanding what each role can access"})]}),i.jsx(re,{children:i.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:bA.map(P=>i.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border",children:[p(P),i.jsx("div",{children:i.jsx("p",{className:"text-sm text-muted-foreground",children:rf[P].description})})]},P))})})]})]})}function tet(){const{user:t}=ct(),e=dn(),[n,r]=N.useState(!1),[s,a]=N.useState(null),[o,l]=N.useState({name:"",code:"",description:"",status:"active",start_date:"",end_date:"",budget:"",donor_name:"",grant_reference:""}),{data:c}=je({queryKey:["projects-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const S=await Ke.getPrimaryMembershipByUser(t.id);return(S==null?void 0:S.companyId)??null},enabled:!!t}),{data:u=[],isLoading:d}=je({queryKey:["projects",c],queryFn:async()=>{if(!c)return[];const S=ve(te,K.PROJECTS);return(await $e(Ce(S,ge("companyId","==",c)))).docs.map(p=>{var I;const A=p.data(),P=A.createdAt??A.created_at,C=typeof P=="string"?P:((I=P==null?void 0:P.toDate)==null?void 0:I.call(P).toISOString())??new Date().toISOString();return{id:p.id,name:String(A.name??""),code:A.code??null,description:A.description??null,status:A.status??"active",start_date:A.startDate??A.start_date??null,end_date:A.endDate??A.end_date??null,budget:Number(A.budget??0),spent:Number(A.spent??0),donor_name:A.donorName??A.donor_name??null,grant_reference:A.grantReference??A.grant_reference??null,created_at:C}}).sort((p,A)=>A.created_at.localeCompare(p.created_at))},enabled:!!c}),h=ot({mutationFn:async S=>{if(!c||!t)throw new Error("No active company context");await Nn(ve(te,K.PROJECTS),{companyId:c,name:S.name,code:S.code||null,description:S.description||null,status:S.status,startDate:S.start_date||null,endDate:S.end_date||null,budget:S.budget?parseFloat(S.budget):0,spent:0,donorName:S.donor_name||null,grantReference:S.grant_reference||null,createdBy:t.id,createdAt:ye(),updatedAt:ye()})},onSuccess:()=>{e.invalidateQueries({queryKey:["projects",c]}),J.success("Project created successfully"),v()},onError:S=>{J.error("Failed to create project: "+S.message)}}),f=ot({mutationFn:async({id:S,data:_})=>{await dr(He(te,K.PROJECTS,S),{name:_.name,code:_.code||null,description:_.description||null,status:_.status,startDate:_.start_date||null,endDate:_.end_date||null,budget:_.budget?parseFloat(_.budget):0,donorName:_.donor_name||null,grantReference:_.grant_reference||null,updatedAt:ye()},{merge:!0})},onSuccess:()=>{e.invalidateQueries({queryKey:["projects",c]}),J.success("Project updated successfully"),v()},onError:S=>{J.error("Failed to update project: "+S.message)}}),m=ot({mutationFn:async S=>{await Za(He(te,K.PROJECTS,S))},onSuccess:()=>{e.invalidateQueries({queryKey:["projects",c]}),J.success("Project deleted successfully")},onError:S=>{J.error("Failed to delete project: "+S.message)}}),v=()=>{l({name:"",code:"",description:"",status:"active",start_date:"",end_date:"",budget:"",donor_name:"",grant_reference:""}),a(null),r(!1)},g=S=>{var _;a(S),l({name:S.name,code:S.code||"",description:S.description||"",status:S.status||"active",start_date:S.start_date||"",end_date:S.end_date||"",budget:((_=S.budget)==null?void 0:_.toString())||"",donor_name:S.donor_name||"",grant_reference:S.grant_reference||""}),r(!0)},y=S=>{S.preventDefault(),s?f.mutate({id:s.id,data:o}):h.mutate(o)},w=()=>{if(u.length===0)return;const S=["Project Code","Name","Donor","Grant Reference","Status","Start Date","End Date","Budget","Spent","Remaining"],_=u.map(I=>[I.code||"",I.name,I.donor_name||"",I.grant_reference||"",I.status||"",I.start_date||"",I.end_date||"",I.budget||0,I.spent||0,(I.budget||0)-(I.spent||0)]),p=[S,..._].map(I=>I.join(",")).join(`
`),A=new Blob([p],{type:"text/csv"}),P=window.URL.createObjectURL(A),C=document.createElement("a");C.href=P,C.download="projects-grants.csv",C.click()},b=S=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(S),E=u.reduce((S,_)=>S+(_.budget||0),0),T=u.reduce((S,_)=>S+(_.spent||0),0),x=u.filter(S=>S.status==="active").length;return d?i.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Projects & Grants"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage donor-funded projects and grants"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(H,{variant:"outline",onClick:w,disabled:u.length===0,children:[i.jsx(Es,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),i.jsxs(rr,{open:n,onOpenChange:r,children:[i.jsx(Zr,{asChild:!0,children:i.jsxs(H,{onClick:()=>{v(),r(!0)},children:[i.jsx(bn,{className:"h-4 w-4 mr-2"}),"Add Project"]})}),i.jsxs(Wn,{className:"max-w-2xl",children:[i.jsx(Hn,{children:i.jsx(Kn,{children:s?"Edit Project":"Add New Project"})}),i.jsxs("form",{onSubmit:y,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Project Name *"}),i.jsx(G,{value:o.name,onChange:S=>l({...o,name:S.target.value}),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Project Code"}),i.jsx(G,{value:o.code,onChange:S=>l({...o,code:S.target.value}),placeholder:"e.g., PRJ-001"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Description"}),i.jsx(hr,{value:o.description,onChange:S=>l({...o,description:S.target.value}),rows:3})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Donor Name"}),i.jsx(G,{value:o.donor_name,onChange:S=>l({...o,donor_name:S.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Grant Reference"}),i.jsx(G,{value:o.grant_reference,onChange:S=>l({...o,grant_reference:S.target.value})})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Status"}),i.jsxs(kt,{value:o.status,onValueChange:S=>l({...o,status:S}),children:[i.jsx(At,{children:i.jsx(Rt,{})}),i.jsxs(Tt,{children:[i.jsx(be,{value:"active",children:"Active"}),i.jsx(be,{value:"completed",children:"Completed"}),i.jsx(be,{value:"on_hold",children:"On Hold"}),i.jsx(be,{value:"cancelled",children:"Cancelled"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Start Date"}),i.jsx(G,{type:"date",value:o.start_date,onChange:S=>l({...o,start_date:S.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"End Date"}),i.jsx(G,{type:"date",value:o.end_date,onChange:S=>l({...o,end_date:S.target.value})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Budget (ZMW)"}),i.jsx(G,{type:"number",step:"0.01",value:o.budget,onChange:S=>l({...o,budget:S.target.value})})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{type:"button",variant:"outline",onClick:v,children:"Cancel"}),i.jsxs(H,{type:"submit",children:[s?"Update":"Create"," Project"]})]})]})]})]})]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(Z,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(T8,{className:"h-4 w-4"}),"Total Projects"]})}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:u.length}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[x," active"]})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(er,{className:"h-4 w-4"}),"Total Budget"]})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:b(E)})})]}),i.jsxs(Z,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(er,{className:"h-4 w-4"}),"Total Spent"]})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:b(T)})})]}),i.jsxs(Z,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Xd,{className:"h-4 w-4"}),"Remaining"]})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:b(E-T)})})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"All Projects"})}),i.jsx(re,{children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Code"}),i.jsx(U,{children:"Name"}),i.jsx(U,{children:"Donor"}),i.jsx(U,{children:"Status"}),i.jsx(U,{children:"Period"}),i.jsx(U,{className:"text-right",children:"Budget"}),i.jsx(U,{children:"Utilization"}),i.jsx(U,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ht,{children:[u.map(S=>{const _=S.budget?(S.spent||0)/S.budget*100:0;return i.jsxs(_e,{children:[i.jsx(B,{className:"font-mono",children:S.code||"-"}),i.jsx(B,{className:"font-medium",children:S.name}),i.jsx(B,{children:S.donor_name||"-"}),i.jsx(B,{children:i.jsx(Xe,{variant:S.status==="active"?"default":S.status==="completed"?"secondary":"outline",children:S.status})}),i.jsx(B,{children:S.start_date&&S.end_date?`${vt(new Date(S.start_date),"MMM yyyy")} - ${vt(new Date(S.end_date),"MMM yyyy")}`:"-"}),i.jsx(B,{className:"text-right",children:b(S.budget||0)}),i.jsx(B,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(rm,{value:Math.min(_,100),className:"h-2 w-20"}),i.jsxs("span",{className:"text-xs text-muted-foreground",children:[_.toFixed(0),"%"]})]})}),i.jsx(B,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(Oa,{to:`/projects/${S.id}/expenses`,children:i.jsx(H,{variant:"ghost",size:"icon",title:"View Expenses",children:i.jsx(Xj,{className:"h-4 w-4"})})}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>g(S),children:i.jsx(_p,{className:"h-4 w-4"})}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>m.mutate(S.id),children:i.jsx(Ts,{className:"h-4 w-4"})})]})})]},S.id)}),u.length===0&&i.jsx(_e,{children:i.jsx(B,{colSpan:8,className:"text-center text-muted-foreground py-8",children:"No projects found. Create your first project to get started."})})]})]})})]})]})}const net=["Personnel","Equipment","Travel","Supplies","Training","Consultancy","Utilities","Communications","Other"];function ret(){const{user:t}=ct(),{projectId:e}=Pp(),n=dn(),[r,s]=N.useState(!1),[a,o]=N.useState(null),[l,c]=N.useState({description:"",amount:"",expense_date:new Date().toISOString().split("T")[0],category:"",notes:""}),{data:u}=je({queryKey:["project-expenses-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const _=await Ke.getPrimaryMembershipByUser(t.id);return(_==null?void 0:_.companyId)??null},enabled:!!t}),{data:d}=je({queryKey:["project",u,e],queryFn:async()=>{if(!e||!u)return null;const _=await ki(He(te,K.PROJECTS,e));if(!_.exists())return null;const p=_.data();return String(p.companyId??"")!==u?null:{id:_.id,...p,budget:Number(p.budget??0),spent:Number(p.spent??0),name:String(p.name??"")}},enabled:!!(e&&u)}),{data:h=[],isLoading:f}=je({queryKey:["project-expenses",u,e],queryFn:async()=>{if(!e||!u)return[];const _=ve(te,K.PROJECT_EXPENSES);return(await $e(Ce(_,ge("companyId","==",u),ge("projectId","==",e)))).docs.map(A=>{var R;const P=A.data(),C=P.expenseDate??P.expense_date,I=typeof C=="string"?C:((R=C==null?void 0:C.toDate)==null?void 0:R.call(C).toISOString().slice(0,10))??new Date().toISOString().slice(0,10);return{id:A.id,description:String(P.description??""),amount:Number(P.amount??0),expense_date:I,category:P.category??null,notes:P.notes??null}}).sort((A,P)=>P.expense_date.localeCompare(A.expense_date))},enabled:!!(e&&u)}),m=async()=>{if(!e||!u)return;const _=ve(te,K.PROJECT_EXPENSES),A=(await $e(Ce(_,ge("companyId","==",u),ge("projectId","==",e)))).docs.reduce((P,C)=>P+Number(C.data().amount??0),0);await dr(He(te,K.PROJECTS,e),{spent:A,updatedAt:ye()},{merge:!0})},v=ot({mutationFn:async _=>{if(!e||!u||!t)throw new Error("No active company context");await Nn(ve(te,K.PROJECT_EXPENSES),{companyId:u,projectId:e,userId:t.id,description:_.description,amount:parseFloat(_.amount),expenseDate:_.expense_date,category:_.category||null,notes:_.notes||null,createdAt:ye(),updatedAt:ye()}),await m()},onSuccess:()=>{n.invalidateQueries({queryKey:["project-expenses",u,e]}),n.invalidateQueries({queryKey:["project",u,e]}),n.invalidateQueries({queryKey:["projects",u]}),J.success("Expense added successfully"),w()},onError:_=>{J.error("Failed to add expense: "+_.message)}}),g=ot({mutationFn:async({id:_,data:p})=>{await dr(He(te,K.PROJECT_EXPENSES,_),{description:p.description,amount:parseFloat(p.amount),expenseDate:p.expense_date,category:p.category||null,notes:p.notes||null,updatedAt:ye()},{merge:!0}),await m()},onSuccess:()=>{n.invalidateQueries({queryKey:["project-expenses",u,e]}),n.invalidateQueries({queryKey:["project",u,e]}),n.invalidateQueries({queryKey:["projects",u]}),J.success("Expense updated successfully"),w()},onError:_=>{J.error("Failed to update expense: "+_.message)}}),y=ot({mutationFn:async _=>{await Za(He(te,K.PROJECT_EXPENSES,_)),await m()},onSuccess:()=>{n.invalidateQueries({queryKey:["project-expenses",u,e]}),n.invalidateQueries({queryKey:["project",u,e]}),n.invalidateQueries({queryKey:["projects",u]}),J.success("Expense deleted successfully")},onError:_=>{J.error("Failed to delete expense: "+_.message)}}),w=()=>{c({description:"",amount:"",expense_date:new Date().toISOString().split("T")[0],category:"",notes:""}),o(null),s(!1)},b=_=>{o(_),c({description:_.description,amount:_.amount.toString(),expense_date:_.expense_date,category:_.category||"",notes:_.notes||""}),s(!0)},E=_=>{_.preventDefault(),a?g.mutate({id:a.id,data:l}):v.mutate(l)},T=()=>{Vh(h,[{header:"Date",key:"expense_date"},{header:"Description",key:"description"},{header:"Category",key:"category"},{header:"Amount",key:"amount"},{header:"Notes",key:"notes"}],`${(d==null?void 0:d.name)||"project"}-expenses`)},x=_=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(_),S=h.reduce((_,p)=>_+Number(p.amount),0);return f?i.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Oa,{to:"/projects",children:i.jsx(H,{variant:"ghost",size:"icon",children:i.jsx(Uo,{className:"h-4 w-4"})})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("h1",{className:"text-3xl font-bold tracking-tight",children:[d==null?void 0:d.name," - Expenses"]}),i.jsxs("p",{className:"text-muted-foreground",children:["Budget: ",x((d==null?void 0:d.budget)||0)," | Spent: ",x(S)," | Remaining: ",x(((d==null?void 0:d.budget)||0)-S)]})]}),i.jsxs(H,{variant:"outline",onClick:T,disabled:h.length===0,children:[i.jsx(Es,{className:"h-4 w-4 mr-2"}),"Export"]}),i.jsxs(rr,{open:r,onOpenChange:s,children:[i.jsx(Zr,{asChild:!0,children:i.jsxs(H,{onClick:()=>{w(),s(!0)},children:[i.jsx(bn,{className:"h-4 w-4 mr-2"}),"Add Expense"]})}),i.jsxs(Wn,{children:[i.jsx(Hn,{children:i.jsx(Kn,{children:a?"Edit Expense":"Add Expense"})}),i.jsxs("form",{onSubmit:E,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Description *"}),i.jsx(G,{value:l.description,onChange:_=>c({...l,description:_.target.value}),required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Amount (ZMW) *"}),i.jsx(G,{type:"number",step:"0.01",value:l.amount,onChange:_=>c({...l,amount:_.target.value}),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Date *"}),i.jsx(G,{type:"date",value:l.expense_date,onChange:_=>c({...l,expense_date:_.target.value}),required:!0})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Category"}),i.jsxs(kt,{value:l.category,onValueChange:_=>c({...l,category:_}),children:[i.jsx(At,{children:i.jsx(Rt,{placeholder:"Select category"})}),i.jsx(Tt,{children:net.map(_=>i.jsx(be,{value:_,children:_},_))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Notes"}),i.jsx(hr,{value:l.notes,onChange:_=>c({...l,notes:_.target.value}),rows:2})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{type:"button",variant:"outline",onClick:w,children:"Cancel"}),i.jsxs(H,{type:"submit",children:[a?"Update":"Add"," Expense"]})]})]})]})]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[i.jsxs(Z,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(er,{className:"h-4 w-4"}),"Total Budget"]})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:x((d==null?void 0:d.budget)||0)})})]}),i.jsxs(Z,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(er,{className:"h-4 w-4"}),"Total Spent"]})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:x(S)})})]}),i.jsxs(Z,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(er,{className:"h-4 w-4"}),"Remaining"]})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:x(((d==null?void 0:d.budget)||0)-S)})})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"Expense Records"})}),i.jsx(re,{children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Date"}),i.jsx(U,{children:"Description"}),i.jsx(U,{children:"Category"}),i.jsx(U,{className:"text-right",children:"Amount"}),i.jsx(U,{className:"text-right",children:"Actions"})]})}),i.jsx(Ht,{children:h.length===0?i.jsx(_e,{children:i.jsx(B,{colSpan:5,className:"text-center text-muted-foreground",children:"No expenses recorded yet"})}):h.map(_=>i.jsxs(_e,{children:[i.jsx(B,{children:vt(new Date(_.expense_date),"dd MMM yyyy")}),i.jsx(B,{children:_.description}),i.jsx(B,{children:_.category||"-"}),i.jsx(B,{className:"text-right",children:x(Number(_.amount))}),i.jsx(B,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>b(_),children:i.jsx(_p,{className:"h-4 w-4"})}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>y.mutate(_.id),children:i.jsx(Ts,{className:"h-4 w-4"})})]})})]},_.id))})]})})]})]})}const set=["Agriculture","Construction","Education","Financial Services","Healthcare","Hospitality","Information Technology","Manufacturing","Mining","Non-Profit","Professional Services","Retail","Transportation","Wholesale","Other"],iet=[{value:"vat_registered",label:"VAT Registered",description:"Turnover > K800k. 16% VAT."},{value:"turnover_tax",label:"Turnover Tax",description:"Turnover < K800k. 4% Tax."},{value:"non_vat",label:"Non-VAT Registered",description:"Not registered for VAT."}],aet=[{value:"charitable",label:"Registered Charitable Organization"},{value:"faith_based",label:"Faith-Based Organization"},{value:"educational",label:"Educational Non-profit"},{value:"grant_funded",label:"Grant-Funded NGO"}],oet=()=>i.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-6",children:[i.jsx(os.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-indigo-500/10 backdrop-blur-md border border-indigo-500/20 p-8 rounded-full",children:i.jsx(jx,{className:"h-16 w-16 text-indigo-400"})}),i.jsxs("div",{className:"text-center max-w-xs",children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:"Organization Profile"}),i.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Setting up your digital headquarters."})]})]}),cet=()=>i.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-6",children:[i.jsx(os.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-pink-500/10 backdrop-blur-md border border-pink-500/20 p-8 rounded-full",children:i.jsx(Pk,{className:"h-16 w-16 text-pink-400"})}),i.jsxs("div",{className:"text-center max-w-xs",children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:"Brand Identity"}),i.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Make your invoices and reports stand out."})]})]}),uet=()=>i.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-6",children:[i.jsx(os.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-emerald-500/10 backdrop-blur-md border border-emerald-500/20 p-8 rounded-full",children:i.jsx(eh,{className:"h-16 w-16 text-emerald-400"})}),i.jsxs("div",{className:"text-center max-w-xs",children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:"Compliance & Tax"}),i.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Ensuring ZRA compliance from day one."})]})]});function det(){const t=Gn(),e=dn(),{user:n}=ct(),[r,s]=N.useState(1),[a,o]=N.useState(null),[l,c]=N.useState({name:"",organizationType:"business",businessType:"sme",address:"",phone:"",email:"",tpin:"",registrationNumber:"",industryType:"",taxType:"non_vat",taxClassification:"",vatRate:"16",turnoverTaxNumber:""}),u=(y,w)=>{c(b=>({...b,[y]:w}))},d=ot({mutationFn:async()=>{if(!n)throw new Error("Not authenticated");const y=await Ke.getPrimaryMembershipByUser(n.id);if(!(y!=null&&y.companyId))throw new Error("No company associated with user");const w=l.organizationType==="business"&&l.taxType==="vat_registered",b=l.organizationType==="business"?l.taxType:l.taxClassification;await Ke.completeCompanySetup({companyId:y.companyId,name:l.name,organizationType:l.organizationType,businessType:l.businessType,taxType:l.organizationType==="business"?l.taxType:"tax_exempt",taxClassification:b,address:l.address||void 0,phone:l.phone||void 0,email:l.email||void 0,tpin:l.tpin||void 0,registrationNumber:l.registrationNumber||void 0,industryType:l.industryType||void 0,logoUrl:a,isVatRegistered:w,vatRate:w?parseFloat(l.vatRate):null})},onSuccess:()=>{e.invalidateQueries({queryKey:["company-settings"]}),e.invalidateQueries({queryKey:["company"]}),J.success("Setup complete!"),t("/dashboard")},onError:y=>J.error("Setup failed: "+y.message)}),h=()=>{if(r===1){if(!l.name)return!!J.error("Company Name is required");if(!l.phone)return!!J.error("Phone is required");if(!l.email)return!!J.error("Email is required");if(!l.tpin||!/^\d{10}$/.test(l.tpin))return!!J.error("Valid 10-digit TPIN required")}if(r===2&&!a)return!!J.error("Logo is required");if(r===3){if(l.organizationType==="business"&&l.taxType==="turnover_tax"&&!l.turnoverTaxNumber)return!!J.error("Turnover Tax Number required");if(l.organizationType==="non_profit"&&!l.taxClassification)return!!J.error("Classification required")}return!0},f=()=>{h()&&(r<3?s(r+1):d.mutate())},m=r===1?i.jsx(oet,{}):r===2?i.jsx(cet,{}):i.jsx(uet,{}),v=r===1?"Organization Details":r===2?"Upload Identity":"Tax Configuration",g=`Step ${r} of 3`;return i.jsx(Vp,{title:v,subtitle:g,visualContent:i.jsx(WAe,{mode:"wait",children:i.jsx(os.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"w-full h-full",children:m},r)}),children:i.jsxs("div",{className:"space-y-6 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar",children:[r===1&&i.jsxs(os.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Company Name"}),i.jsxs("div",{className:"relative",children:[i.jsx(jx,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"Acme Corp",className:"pl-10",value:l.name,onChange:y=>u("name",y.target.value)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Org Type"}),i.jsxs(kt,{value:l.organizationType,onValueChange:y=>u("organizationType",y),children:[i.jsx(At,{children:i.jsx(Rt,{})}),i.jsxs(Tt,{children:[i.jsx(be,{value:"business",children:"Business"}),i.jsx(be,{value:"non_profit",children:"Non-Profit"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Business Type"}),i.jsxs(kt,{value:l.businessType,onValueChange:y=>u("businessType",y),children:[i.jsx(At,{children:i.jsx(Rt,{})}),i.jsxs(Tt,{children:[i.jsx(be,{value:"sme",children:"SME"}),i.jsx(be,{value:"corporate",children:"Corporate"}),i.jsx(be,{value:"ngo",children:"NGO"}),i.jsx(be,{value:"school",children:"School"})]})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"TPIN (10 Digits)"}),i.jsxs("div",{className:"relative",children:[i.jsx(C8,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"1234567890",className:"pl-10",value:l.tpin,onChange:y=>u("tpin",y.target.value.replace(/\D/g,"").slice(0,10))})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Phone"}),i.jsxs("div",{className:"relative",children:[i.jsx(P8,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"+260...",className:"pl-10",value:l.phone,onChange:y=>u("phone",y.target.value)})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(ku,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"info@...",className:"pl-10",value:l.email,onChange:y=>u("email",y.target.value)})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Industry"}),i.jsxs(kt,{value:l.industryType,onValueChange:y=>u("industryType",y),children:[i.jsx(At,{children:i.jsx(Rt,{placeholder:"Select..."})}),i.jsx(Tt,{children:set.map(y=>i.jsx(be,{value:y.toLowerCase(),children:y},y))})]})]})]}),r===2&&i.jsxs(os.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6 text-center",children:[i.jsx("div",{className:"border-2 border-dashed border-slate-200 rounded-xl p-8 bg-slate-50/50",children:i.jsx(AM,{onUploaded:o})}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload your official organization logo. This will be displayed on all your financial documents."})]}),r===3&&i.jsx(os.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:l.organizationType==="business"?i.jsxs("div",{className:"space-y-4",children:[i.jsx(X,{children:"Select Tax Category"}),i.jsx("div",{className:"grid gap-3",children:iet.map(y=>i.jsx("div",{onClick:()=>u("taxType",y.value),className:`p-4 rounded-lg border cursor-pointer transition-all ${l.taxType===y.value?"border-primary bg-primary/5 ring-1 ring-primary":"border-border hover:border-primary/50"}`,children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${l.taxType===y.value?"border-primary":"border-slate-400"}`,children:l.taxType===y.value&&i.jsx("div",{className:"w-2.5 h-2.5 bg-primary rounded-full"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-sm",children:y.label}),i.jsx("p",{className:"text-xs text-muted-foreground",children:y.description})]})]})},y.value))}),l.taxType==="vat_registered"&&i.jsxs("div",{className:"space-y-2 pt-2",children:[i.jsx(X,{children:"VAT Rate (%)"}),i.jsx(G,{type:"number",value:l.vatRate,onChange:y=>u("vatRate",y.target.value)})]}),l.taxType==="turnover_tax"&&i.jsxs("div",{className:"space-y-2 pt-2",children:[i.jsx(X,{children:"Turnover Tax ID"}),i.jsx(G,{placeholder:"TOT-...",value:l.turnoverTaxNumber,onChange:y=>u("turnoverTaxNumber",y.target.value)})]})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsx(X,{children:"Non-Profit Classification"}),i.jsxs(kt,{value:l.taxClassification,onValueChange:y=>u("taxClassification",y),children:[i.jsx(At,{children:i.jsx(Rt,{placeholder:"Select classification..."})}),i.jsx(Tt,{children:aet.map(y=>i.jsx(be,{value:y.value,children:y.label},y.value))})]})]})}),i.jsxs("div",{className:"flex justify-between pt-6 border-t mt-6",children:[r>1?i.jsx(H,{variant:"ghost",onClick:()=>s(r-1),children:"Back"}):i.jsx("div",{}),i.jsx(H,{onClick:f,disabled:d.isPending,className:"px-8",children:r<3?i.jsxs(i.Fragment,{children:["Next ",i.jsx(soe,{className:"ml-2 h-4 w-4"})]}):d.isPending?"Completing...":"Complete Setup"})]})]})})}const het=[{icon:si,title:"Employee Management",description:"Complete database with role-based access control and history tracking.",className:"border-l-4 border-blue-500"},{icon:Aw,title:"Payroll Processing",description:"Automated calculations for PAYE, NAPSA, and NHIMA with one-click rendering.",className:"border-l-4 border-indigo-500"},{icon:eh,title:"Compliance & Audit",description:"Built-in ZRA compliance rules and detailed audit logs for every action.",className:"border-l-4 border-slate-500"},{icon:N8,title:"Real-time Analytics",description:"Live financial dashboards and customizable reports for better decision making.",className:"border-l-4 border-sky-500"}];function fet(){const[t,e]=N.useState(null);N.useEffect(()=>{window.addEventListener("beforeinstallprompt",r=>{r.preventDefault(),e(r)})},[]);const n=()=>{t&&(t.prompt(),t.userChoice.then(r=>{r.outcome==="accepted"&&console.log("User accepted the install prompt"),e(null)}))};return i.jsxs("div",{className:"min-h-screen bg-[#F8FAFC] font-sans text-slate-900 selection:bg-blue-100 selection:text-blue-900 overflow-x-hidden",children:[i.jsx("header",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-slate-200/60",children:i.jsxs("div",{className:"container mx-auto px-4 lg:px-6 flex items-center justify-between h-20",children:[i.jsx(Oa,{to:"/",className:"flex items-center gap-3",children:i.jsx(xv,{variant:"full",size:"md"})}),i.jsxs("nav",{className:"hidden md:flex items-center gap-8 text-sm font-medium text-slate-600",children:[i.jsx("a",{href:"#features",className:"hover:text-blue-700 transition-colors",children:"Features"}),i.jsx("a",{href:"#pricing",className:"hover:text-blue-700 transition-colors",children:"Pricing"}),i.jsx("a",{href:"#compliance",className:"hover:text-blue-700 transition-colors",children:"Compliance"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Oa,{to:"/auth",children:i.jsx(H,{variant:"ghost",className:"hidden sm:inline-flex text-slate-600 hover:text-blue-700 hover:bg-blue-50",children:"Sign In"})}),i.jsx(Oa,{to:"/auth",children:i.jsx(H,{className:"rounded-full bg-slate-900 hover:bg-slate-800 text-white shadow-lg shadow-slate-900/20 px-6 transition-all hover:scale-105",children:"Get Started"})})]})]})}),i.jsxs("section",{className:"relative pt-20 pb-32 lg:pt-32 lg:pb-48 overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[1000px] h-[600px] bg-blue-100/40 rounded-[100%] blur-[100px] -z-10 pointer-events-none opacity-60"}),i.jsx("div",{className:"absolute top-40 right-0 w-[500px] h-[500px] bg-indigo-100/40 rounded-full blur-[80px] -z-10 pointer-events-none opacity-50"}),i.jsxs("div",{className:"container mx-auto px-4 lg:px-6 relative z-10 text-center",children:[i.jsxs(Xe,{variant:"outline",className:"mb-8 px-4 py-1.5 rounded-full bg-blue-50/50 text-blue-700 border-blue-200 backdrop-blur-sm animate-fade-in-up",children:[i.jsxs("span",{className:"relative flex h-2 w-2 mr-2",children:[i.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"}),i.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-blue-500"})]}),"New: Automated ZRA Tax Submission"]}),i.jsxs("h1",{className:"text-5xl lg:text-7xl font-bold tracking-tight text-slate-900 mb-8 max-w-4xl mx-auto leading-[1.1]",children:["The Financial Operating System for ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-700 to-indigo-600",children:"Zambian NGOs"})]}),i.jsx("p",{className:"text-xl text-slate-600 mb-12 max-w-2xl mx-auto leading-relaxed",children:"Manage your finances, payroll, and compliance in one unified secure platform. Designed for purpose-driven organizations."}),i.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mb-20",children:[i.jsx(Oa,{to:"/auth",children:i.jsx(H,{size:"lg",className:"h-14 px-10 rounded-full bg-blue-600 hover:bg-blue-700 text-white shadow-xl shadow-blue-600/20 text-lg transition-all hover:scale-105",children:"Start Free Trial"})}),t&&i.jsxs(H,{size:"lg",variant:"outline",onClick:n,className:"h-14 px-10 rounded-full border-slate-200 hover:bg-white hover:text-blue-700 hover:border-blue-200 text-lg shadow-sm transition-all",children:[i.jsx(Es,{className:"mr-2 h-5 w-5"}),"Install App"]}),!t&&i.jsxs(H,{size:"lg",variant:"outline",className:"h-14 px-10 rounded-full border-slate-200 hover:bg-white hover:text-slate-900 text-lg shadow-sm transition-all opacity-50 cursor-not-allowed",children:[i.jsx(voe,{className:"mr-2 h-5 w-5"}),"Web Version"]})]}),i.jsxs("div",{className:"relative max-w-5xl mx-auto",children:[i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl border border-slate-200/60 overflow-hidden backdrop-blur-sm",children:[i.jsxs("div",{className:"h-12 bg-slate-50 border-b border-slate-100 flex items-center px-4 gap-2",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-red-400/80"}),i.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-400/80"}),i.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-400/80"})]}),i.jsx("div",{className:"mx-auto bg-slate-200/50 h-6 w-64 rounded-md text-[10px] flex items-center justify-center text-slate-400 font-mono",children:"app.zedbooks.com/dashboard"})]}),i.jsx("div",{className:"p-1 bg-slate-50/50",children:i.jsxs("div",{className:"grid grid-cols-12 gap-1 p-4 h-[400px] lg:h-[600px] bg-white rounded-xl overflow-hidden relative",children:[i.jsxs("div",{className:"col-span-2 hidden lg:flex flex-col gap-3 border-r border-slate-50 pr-4",children:[i.jsx("div",{className:"h-8 w-full bg-slate-100 rounded-lg"}),i.jsx("div",{className:"h-8 w-3/4 bg-slate-50 rounded-lg"}),i.jsx("div",{className:"h-8 w-full bg-slate-50 rounded-lg"}),i.jsx("div",{className:"h-8 w-5/6 bg-slate-50 rounded-lg"})]}),i.jsxs("div",{className:"col-span-12 lg:col-span-10 flex flex-col gap-6 pl-0 lg:pl-6 pt-2",children:[i.jsxs("div",{className:"flex justify-between items-end",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"h-4 w-32 bg-slate-100 rounded"}),i.jsx("div",{className:"h-8 w-64 bg-slate-900 rounded-lg"})]}),i.jsx("div",{className:"h-10 w-32 bg-blue-600 rounded-lg"})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"h-32 bg-blue-50 rounded-2xl border border-blue-100 p-4 space-y-3",children:[i.jsx("div",{className:"h-8 w-8 bg-blue-200 rounded-lg"}),i.jsx("div",{className:"h-6 w-24 bg-blue-200/50 rounded"})]}),i.jsxs("div",{className:"h-32 bg-slate-50 rounded-2xl border border-slate-100 p-4 space-y-3",children:[i.jsx("div",{className:"h-8 w-8 bg-slate-200 rounded-lg"}),i.jsx("div",{className:"h-6 w-24 bg-slate-200/50 rounded"})]}),i.jsxs("div",{className:"h-32 bg-slate-50 rounded-2xl border border-slate-100 p-4 space-y-3",children:[i.jsx("div",{className:"h-8 w-8 bg-slate-200 rounded-lg"}),i.jsx("div",{className:"h-6 w-24 bg-slate-200/50 rounded"})]})]}),i.jsx("div",{className:"flex-1 bg-slate-50 rounded-2xl border border-slate-100 p-6 flex items-center justify-center",children:i.jsx("div",{className:"text-slate-300 font-medium",children:"Interactive Financial Ledger Mockup"})})]})]})})]}),i.jsxs("div",{className:"absolute -left-12 bottom-20 bg-white p-6 rounded-2xl shadow-xl border border-slate-100 hidden lg:block animate-float",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"h-10 w-10 bg-green-100 rounded-full flex items-center justify-center text-green-600",children:i.jsx(eh,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Compliance Status"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Last checked today"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Xe,{variant:"secondary",className:"bg-green-50 text-green-700",children:"NAPSA Verified"}),i.jsx(Xe,{variant:"secondary",className:"bg-green-50 text-green-700",children:"ZRA Compliant"})]})]}),i.jsxs("div",{className:"absolute -right-8 top-20 bg-white p-5 rounded-2xl shadow-xl border border-slate-100 hidden lg:block animate-float-delayed",children:[i.jsx("p",{className:"text-xs text-slate-500 uppercase font-semibold mb-3",children:"Recent Transactions"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-8 w-8 rounded-full bg-slate-100 flex items-center justify-center text-xs font-bold",children:"JD"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Payroll Run"}),i.jsx("p",{className:"text-xs text-slate-400",children:"Just now"})]}),i.jsx("span",{className:"text-sm font-medium text-slate-900 ml-4",children:"- K45,200"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center text-xs font-bold text-blue-700",children:"IN"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Grant Deposit"}),i.jsx("p",{className:"text-xs text-slate-400",children:"2h ago"})]}),i.jsx("span",{className:"text-sm font-medium text-green-600 ml-4",children:"+ K150,000"})]})]})]})]})]})]}),i.jsx("section",{id:"features",className:"py-24 bg-white relative",children:i.jsxs("div",{className:"container mx-auto px-4 lg:px-6",children:[i.jsxs("div",{className:"text-center mb-16 max-w-2xl mx-auto",children:[i.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-4",children:"Everything you need to run your NGO"}),i.jsx("p",{className:"text-slate-600",children:"Robust features designed specifically for the unique compliance and reporting needs of Zambian non-profits."})]}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:het.map((r,s)=>i.jsx(Z,{className:`shadow-sm hover:shadow-lg transition-all border-slate-200 bg-white ${r.className}`,children:i.jsxs(re,{className:"p-8",children:[i.jsx("div",{className:"h-12 w-12 rounded-xl bg-slate-50 flex items-center justify-center mb-6",children:i.jsx(r.icon,{className:"h-6 w-6 text-slate-700"})}),i.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-3",children:r.title}),i.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:r.description})]})},s))})]})}),i.jsxs("section",{id:"compliance",className:"py-24 bg-slate-900 text-white overflow-hidden relative",children:[i.jsx("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-blue-600/10 rounded-full blur-[120px] translate-x-1/2 -translate-y-1/2"}),i.jsx("div",{className:"container mx-auto px-4 lg:px-6 relative z-10",children:i.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-4xl font-bold mb-6",children:"Fully Compliant with Zambian Regulation"}),i.jsx("p",{className:"text-slate-300 text-lg mb-8",children:"Stay ahead of regulatory requirements with automated updates for domestic tax laws and labor regulations."}),i.jsx("div",{className:"flex flex-wrap gap-4 mb-8",children:["ZRA Smart Invoice","NAPSA e-Returns","NHIMA Compliant","PACRA Returns"].map(r=>i.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-full bg-slate-800 border border-slate-700 text-sm font-medium text-slate-200",children:[i.jsx(Nx,{className:"h-4 w-4 text-green-400"}),r]},r))}),i.jsx(Oa,{to:"/auth",children:i.jsx(H,{className:"rounded-full bg-white text-slate-900 hover:bg-slate-100 px-8 h-12 shadow-md",children:"Get Compliant Today"})})]}),i.jsx("div",{className:"relative",children:i.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 p-8 rounded-3xl border border-slate-700 shadow-2xl",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-8 border-b border-slate-700 pb-8",children:[i.jsx("div",{className:"h-14 w-14 bg-blue-600 rounded-2xl flex items-center justify-center",children:i.jsx(eh,{className:"h-8 w-8 text-white"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold",children:"Compliance Monitor"}),i.jsx("p",{className:"text-slate-400 text-sm",children:"Real-time status tracking"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-slate-800/50 border border-slate-700",children:[i.jsx("span",{className:"text-slate-200 font-medium",children:"TPIN Verification"}),i.jsx(Xe,{className:"bg-green-500/20 text-green-400 hover:bg-green-500/20 border-green-500/20",children:"Verified"})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-slate-800/50 border border-slate-700",children:[i.jsx("span",{className:"text-slate-200 font-medium",children:"Tax Clearance"}),i.jsx(Xe,{className:"bg-green-500/20 text-green-400 hover:bg-green-500/20 border-green-500/20",children:"Valid"})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-slate-800/50 border border-slate-700",children:[i.jsx("span",{className:"text-slate-200 font-medium",children:"Annual Returns"}),i.jsx(Xe,{className:"bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/20 border-yellow-500/20",children:"Due in 5 days"})]})]})]})})]})})]}),i.jsx("footer",{className:"py-12 bg-white border-t border-slate-200",children:i.jsxs("div",{className:"container mx-auto px-4 text-center",children:[i.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:i.jsx(xv,{variant:"full",size:"md",className:"grayscale opacity-70 hover:grayscale-0 hover:opacity-100"})}),i.jsxs("p",{className:"text-slate-500 text-sm",children:[" ",new Date().getFullYear()," Byte & Berry. All rights reserved."]})]})}),i.jsx(AO,{})]})}function met(){const{user:t}=ct(),e=dn(),[n,r]=N.useState(""),[s,a]=N.useState(!1),{data:o}=je({queryKey:["donors-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const b=await Ke.getPrimaryMembershipByUser(t.id);return(b==null?void 0:b.companyId)??null},enabled:!!t}),{data:l=[],isLoading:c}=je({queryKey:["donors-from-projects",o],queryFn:async()=>{if(!o)return[];const b=ve(te,K.PROJECTS),T=(await $e(Ce(b,ge("companyId","==",o)))).docs.map(S=>{const _=S.data();return{donor_name:String(_.donorName??_.donor_name??""),grant_reference:_.grantReference??_.grant_reference??null,budget:Number(_.budget??0),spent:Number(_.spent??0),status:String(_.status??"active")}}),x=new Map;return T.forEach(S=>{if(S.donor_name){const _=x.get(S.donor_name)||{grants:0,totalBudget:0,activeGrants:0};x.set(S.donor_name,{grants:_.grants+1,totalBudget:_.totalBudget+(S.budget||0),activeGrants:_.activeGrants+(S.status==="active"?1:0)})}}),Array.from(x.entries()).map(([S,_])=>({name:S,totalGrants:_.grants,totalBudget:_.totalBudget,activeGrants:_.activeGrants}))},enabled:!!o}),{data:u=[]}=je({queryKey:["projects-for-donors",o],queryFn:async()=>{if(!o)return[];const b=ve(te,K.PROJECTS);return(await $e(Ce(b,ge("companyId","==",o)))).docs.map(T=>{var p;const x=T.data(),S=x.createdAt??x.created_at,_=typeof S=="string"?S:((p=S==null?void 0:S.toDate)==null?void 0:p.call(S).toISOString())??"";return{id:T.id,...x,donor_name:x.donorName??x.donor_name??null,grant_reference:x.grantReference??x.grant_reference??null,start_date:x.startDate??x.start_date??null,end_date:x.endDate??x.end_date??null,created_at:_}}).sort((T,x)=>String(x.created_at??"").localeCompare(String(T.created_at??"")))},enabled:!!o}),d=b=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(b),h=l.filter(b=>b.name.toLowerCase().includes(n.toLowerCase())),f=l.reduce((b,E)=>b+E.totalBudget,0),m=l.reduce((b,E)=>b+E.activeGrants,0),v=l.reduce((b,E)=>b+E.totalGrants,0),g=()=>{Vh(h,[{header:"Donor Name",key:"name"},{header:"Total Grants",key:"totalGrants"},{header:"Active Grants",key:"activeGrants"},{header:"Total Budget (ZMW)",key:"totalBudget"}],"donors-report")},y=[{key:"name",header:"Project Name",required:!0},{key:"donor_name",header:"Donor Name",required:!0},{key:"grant_reference",header:"Grant Reference",required:!1},{key:"budget",header:"Budget (ZMW)",required:!1},{key:"start_date",header:"Start Date",required:!1},{key:"end_date",header:"End Date",required:!1}],w=async b=>{if(!o||!t)throw new Error("No active company context");for(const E of b)await Nn(ve(te,K.PROJECTS),{companyId:o,name:E.name,donorName:E.donor_name,grantReference:E.grant_reference||null,budget:parseFloat(E.budget)||0,spent:0,startDate:E.start_date||null,endDate:E.end_date||null,status:"active",createdBy:t.id,createdAt:ye(),updatedAt:ye()});e.invalidateQueries({queryKey:["donors-from-projects",o]}),e.invalidateQueries({queryKey:["projects-for-donors",o]})};return c?i.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Donors & Grants"}),i.jsx("p",{className:"text-muted-foreground",children:"Track donors and their grant contributions"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(H,{variant:"outline",onClick:()=>a(!0),children:[i.jsx(zo,{className:"mr-2 h-4 w-4"}),"Import"]}),i.jsxs(H,{variant:"outline",onClick:g,children:[i.jsx(Es,{className:"mr-2 h-4 w-4"}),"Export"]})]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(Z,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Pk,{className:"h-4 w-4"}),"Total Donors"]})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:l.length})})]}),i.jsxs(Z,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(T8,{className:"h-4 w-4"}),"Total Grants"]})}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:v}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[m," active"]})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(er,{className:"h-4 w-4"}),"Total Funding"]})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:d(f)})})]}),i.jsxs(Z,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(er,{className:"h-4 w-4"}),"Avg. per Donor"]})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:d(l.length>0?f/l.length:0)})})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(fi,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{placeholder:"Search donors...",value:n,onChange:b=>r(b.target.value),className:"pl-10"})]})})}),i.jsx(re,{children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Donor Name"}),i.jsx(U,{className:"text-right",children:"Total Grants"}),i.jsx(U,{className:"text-right",children:"Active Grants"}),i.jsx(U,{className:"text-right",children:"Total Funding"})]})}),i.jsxs(Ht,{children:[h.map((b,E)=>i.jsxs(_e,{children:[i.jsx(B,{className:"font-medium",children:b.name}),i.jsx(B,{className:"text-right",children:b.totalGrants}),i.jsx(B,{className:"text-right",children:i.jsx(Xe,{variant:b.activeGrants>0?"default":"secondary",children:b.activeGrants})}),i.jsx(B,{className:"text-right",children:d(b.totalBudget)})]},E)),h.length===0&&i.jsx(_e,{children:i.jsx(B,{colSpan:4,className:"text-center text-muted-foreground py-8",children:"No donors found. Add projects with donor information to see them here."})})]})]})})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"All Grants"})}),i.jsx(re,{children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Grant Reference"}),i.jsx(U,{children:"Project Name"}),i.jsx(U,{children:"Donor"}),i.jsx(U,{children:"Status"}),i.jsx(U,{className:"text-right",children:"Budget"}),i.jsx(U,{className:"text-right",children:"Spent"})]})}),i.jsx(Ht,{children:u.filter(b=>b.donor_name).map(b=>i.jsxs(_e,{children:[i.jsx(B,{className:"font-mono",children:b.grant_reference||"-"}),i.jsx(B,{className:"font-medium",children:b.name}),i.jsx(B,{children:b.donor_name}),i.jsx(B,{children:i.jsx(Xe,{variant:b.status==="active"?"default":"secondary",children:b.status})}),i.jsx(B,{className:"text-right",children:d(b.budget||0)}),i.jsx(B,{className:"text-right",children:d(b.spent||0)})]},b.id))})]})})]}),i.jsx(ng,{open:s,onOpenChange:a,onImport:w,columns:y,title:"Import Grants"})]})}const pet=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},w6=t=>{if(!t)return"";if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString().slice(0,10);if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString().slice(0,10)}return""};function get(){const{user:t}=ct(),[e,n]=N.useState(()=>{const x=new Date;return x.setMonth(x.getMonth()-3),x.toISOString().split("T")[0]}),[r,s]=N.useState(new Date().toISOString().split("T")[0]),[a,o]=N.useState(!1),{data:l=[],isLoading:c,refetch:u}=je({queryKey:["accounts-payable",e,r,t==null?void 0:t.id],queryFn:async()=>{if(!t)return[];const x=await Ke.getPrimaryMembershipByUser(t.id);if(!(x!=null&&x.companyId))return[];const S=ve(te,K.BILLS),p=(await $e(Ce(S,ge("companyId","==",x.companyId)))).docs.map(C=>{const I=C.data();return{id:C.id,bill_number:String(I.billNumber??I.bill_number??""),bill_date:w6(I.billDate??I.bill_date),due_date:w6(I.dueDate??I.due_date)||null,total:Number(I.total??0),status:String(I.status??"pending"),vendor_id:I.vendorId??I.vendor_id??null,vendors:null}}).filter(C=>C.bill_date>=e&&C.bill_date<=r),A=Array.from(new Set(p.map(C=>C.vendor_id).filter(Boolean))),P=new Map;if(A.length>0){const C=ve(te,K.VENDORS),I=pet(A,30);(await Promise.all(I.map(L=>$e(Ce(C,ge(kh(),"in",L)))))).forEach(L=>{L.docs.forEach(z=>{const W=z.data();P.set(z.id,String(W.name??"-"))})})}return p.map(C=>({...C,vendors:C.vendor_id?{name:P.get(C.vendor_id)||"-"}:null})).sort((C,I)=>String(C.due_date||"").localeCompare(String(I.due_date||"")))},enabled:!!t}),d=x=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(x),h=l.filter(x=>x.status!=="paid"),f=h.filter(x=>x.due_date&&dne(new Date(x.due_date))),m=h.filter(x=>{if(!x.due_date)return!1;const S=bs(new Date(x.due_date),new Date);return S>=0&&S<=7}),v=l.filter(x=>x.status==="paid"),g=h.reduce((x,S)=>x+(S.total||0),0),y=f.reduce((x,S)=>x+(S.total||0),0),w=v.reduce((x,S)=>x+(S.total||0),0),b=()=>{Vh(l,[{header:"Bill Number",key:"bill_number"},{header:"Bill Date",key:"bill_date"},{header:"Due Date",key:"due_date"},{header:"Amount",key:"total"},{header:"Status",key:"status"}],`accounts-payable-${e}-to-${r}`)},E=[{key:"bill_number",header:"Bill Number",required:!0},{key:"vendor_name",header:"Vendor Name",required:!1},{key:"bill_date",header:"Bill Date (YYYY-MM-DD)",required:!0},{key:"due_date",header:"Due Date (YYYY-MM-DD)",required:!1},{key:"amount",header:"Amount",required:!0},{key:"description",header:"Description",required:!1}],T=async x=>{if(!t)throw new Error("You must be logged in");const S=await Ke.getPrimaryMembershipByUser(t.id);if(!(S!=null&&S.companyId))throw new Error("No company profile found for your account");for(const _ of x)await Nn(ve(te,K.BILLS),{companyId:S.companyId,userId:t.id,billNumber:String(_.bill_number||""),billDate:String(_.bill_date||""),dueDate:_.due_date||null,subtotal:Number(_.amount)||0,total:Number(_.amount)||0,description:_.description||null,status:"pending",createdAt:ye(),updatedAt:ye()});u(),J.success("Bills imported successfully")};return c?i.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Accounts Payable"}),i.jsx("p",{className:"text-muted-foreground",children:"Track and manage vendor bills and payments"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(H,{variant:"outline",onClick:()=>o(!0),children:[i.jsx(zo,{className:"mr-2 h-4 w-4"}),"Import"]}),i.jsxs(H,{variant:"outline",onClick:b,children:[i.jsx(Es,{className:"mr-2 h-4 w-4"}),"Export"]})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"Report Period"})}),i.jsx(re,{children:i.jsxs("div",{className:"flex gap-4 items-end",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Start Date"}),i.jsx(G,{type:"date",value:e,onChange:x=>n(x.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"End Date"}),i.jsx(G,{type:"date",value:r,onChange:x=>s(x.target.value)})]})]})})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(Z,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(cr,{className:"h-4 w-4"}),"Total Bills"]})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:l.length})})]}),i.jsxs(Z,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Pi,{className:"h-4 w-4 text-warning"}),"Outstanding"]})}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-warning",children:d(g)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[h.length," bills"]})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Ci,{className:"h-4 w-4 text-destructive"}),"Overdue"]})}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-destructive",children:d(y)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[f.length," bills"]})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Mo,{className:"h-4 w-4 text-success"}),"Paid"]})}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-success",children:d(w)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[v.length," bills"]})]})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"Aging Summary"})}),i.jsx(re,{children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Category"}),i.jsx(U,{className:"text-right",children:"Bills"}),i.jsx(U,{className:"text-right",children:"Amount"})]})}),i.jsxs(Ht,{children:[i.jsxs(_e,{children:[i.jsx(B,{children:"Current (not due)"}),i.jsx(B,{className:"text-right",children:h.filter(x=>!x.due_date||bs(new Date(x.due_date),new Date)>7).length}),i.jsx(B,{className:"text-right",children:d(h.filter(x=>!x.due_date||bs(new Date(x.due_date),new Date)>7).reduce((x,S)=>x+(S.total||0),0))})]}),i.jsxs(_e,{children:[i.jsx(B,{children:"Due within 7 days"}),i.jsx(B,{className:"text-right",children:m.length}),i.jsx(B,{className:"text-right text-warning",children:d(m.reduce((x,S)=>x+(S.total||0),0))})]}),i.jsxs(_e,{children:[i.jsx(B,{children:"1-30 days overdue"}),i.jsx(B,{className:"text-right",children:f.filter(x=>bs(new Date,new Date(x.due_date||""))<=30).length}),i.jsx(B,{className:"text-right text-destructive",children:d(f.filter(x=>bs(new Date,new Date(x.due_date||""))<=30).reduce((x,S)=>x+(S.total||0),0))})]}),i.jsxs(_e,{children:[i.jsx(B,{children:"Over 30 days overdue"}),i.jsx(B,{className:"text-right",children:f.filter(x=>bs(new Date,new Date(x.due_date||""))>30).length}),i.jsx(B,{className:"text-right text-destructive font-bold",children:d(f.filter(x=>bs(new Date,new Date(x.due_date||""))>30).reduce((x,S)=>x+(S.total||0),0))})]})]})]})})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"All Bills"})}),i.jsx(re,{children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Bill #"}),i.jsx(U,{children:"Vendor"}),i.jsx(U,{children:"Bill Date"}),i.jsx(U,{children:"Due Date"}),i.jsx(U,{className:"text-right",children:"Amount"}),i.jsx(U,{children:"Status"}),i.jsx(U,{children:"Days Overdue"})]})}),i.jsx(Ht,{children:l.map(x=>{var _;const S=x.due_date&&x.status!=="paid"?Math.max(0,bs(new Date,new Date(x.due_date))):0;return i.jsxs(_e,{children:[i.jsx(B,{className:"font-medium",children:x.bill_number}),i.jsx(B,{children:((_=x.vendors)==null?void 0:_.name)||"-"}),i.jsx(B,{children:vt(new Date(x.bill_date),"dd MMM yyyy")}),i.jsx(B,{children:x.due_date?vt(new Date(x.due_date),"dd MMM yyyy"):"-"}),i.jsx(B,{className:"text-right",children:d(x.total)}),i.jsx(B,{children:i.jsx(Xe,{variant:x.status==="paid"?"default":S>0?"destructive":"secondary",children:x.status})}),i.jsx(B,{children:x.status==="paid"?"-":S>0?`${S} days`:"Current"})]},x.id)})})]})})]}),i.jsx(ng,{open:a,onOpenChange:o,onImport:T,columns:E,title:"Import Bills"})]})}const yet=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},_6=t=>{if(!t)return"";if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString().slice(0,10);if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString().slice(0,10)}return""};function vet(){const{user:t}=ct(),[e,n]=N.useState(()=>{const x=new Date;return x.setMonth(x.getMonth()-3),x.toISOString().split("T")[0]}),[r,s]=N.useState(new Date().toISOString().split("T")[0]),[a,o]=N.useState(!1),{data:l=[],isLoading:c,refetch:u}=je({queryKey:["accounts-receivable",e,r,t==null?void 0:t.id],queryFn:async()=>{if(!t)return[];const x=await Ke.getPrimaryMembershipByUser(t.id);if(!(x!=null&&x.companyId))return[];const S=ve(te,K.INVOICES),p=(await $e(Ce(S,ge("companyId","==",x.companyId)))).docs.map(C=>{const I=C.data();return{id:C.id,invoice_number:String(I.invoiceNumber??I.invoice_number??""),invoice_date:_6(I.invoiceDate??I.invoice_date),due_date:_6(I.dueDate??I.due_date)||null,total:Number(I.total??0),status:String(I.status??"draft"),customer_id:I.customerId??I.customer_id??null,customers:null}}).filter(C=>C.invoice_date>=e&&C.invoice_date<=r),A=Array.from(new Set(p.map(C=>C.customer_id).filter(Boolean))),P=new Map;if(A.length>0){const C=ve(te,K.CUSTOMERS),I=yet(A,30);(await Promise.all(I.map(L=>$e(Ce(C,ge(kh(),"in",L)))))).forEach(L=>{L.docs.forEach(z=>{const W=z.data();P.set(z.id,String(W.name??"-"))})})}return p.map(C=>({...C,customers:C.customer_id?{name:P.get(C.customer_id)||"-"}:null})).sort((C,I)=>String(C.due_date||"").localeCompare(String(I.due_date||"")))},enabled:!!t}),d=x=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(x),h=l.filter(x=>x.status!=="paid"),f=h.filter(x=>x.due_date&&dne(new Date(x.due_date))),m=h.filter(x=>{if(!x.due_date)return!1;const S=bs(new Date(x.due_date),new Date);return S>=0&&S<=7}),v=l.filter(x=>x.status==="paid"),g=h.reduce((x,S)=>x+(S.total||0),0),y=f.reduce((x,S)=>x+(S.total||0),0),w=v.reduce((x,S)=>x+(S.total||0),0),b=()=>{Vh(l,[{header:"Invoice Number",key:"invoice_number"},{header:"Invoice Date",key:"invoice_date"},{header:"Due Date",key:"due_date"},{header:"Amount",key:"total"},{header:"Status",key:"status"}],`accounts-receivable-${e}-to-${r}`)},E=[{key:"invoice_number",header:"Invoice Number",required:!0},{key:"customer_name",header:"Customer Name",required:!1},{key:"invoice_date",header:"Invoice Date (YYYY-MM-DD)",required:!0},{key:"due_date",header:"Due Date (YYYY-MM-DD)",required:!1},{key:"amount",header:"Amount",required:!0},{key:"notes",header:"Notes",required:!1}],T=async x=>{if(!t)throw new Error("You must be logged in");const S=await Ke.getPrimaryMembershipByUser(t.id);if(!(S!=null&&S.companyId))throw new Error("No company profile found for your account");for(const _ of x)await Nn(ve(te,K.INVOICES),{companyId:S.companyId,userId:t.id,invoiceNumber:String(_.invoice_number||""),invoiceDate:String(_.invoice_date||""),dueDate:_.due_date||null,subtotal:Number(_.amount)||0,total:Number(_.amount)||0,notes:_.notes||null,status:"sent",createdAt:ye(),updatedAt:ye()});u(),J.success("Invoices imported successfully")};return c?i.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Accounts Receivable"}),i.jsx("p",{className:"text-muted-foreground",children:"Track customer invoices and collections"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(H,{variant:"outline",onClick:()=>o(!0),children:[i.jsx(zo,{className:"mr-2 h-4 w-4"}),"Import"]}),i.jsxs(H,{variant:"outline",onClick:b,children:[i.jsx(Es,{className:"mr-2 h-4 w-4"}),"Export"]})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"Report Period"})}),i.jsx(re,{children:i.jsxs("div",{className:"flex gap-4 items-end",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Start Date"}),i.jsx(G,{type:"date",value:e,onChange:x=>n(x.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"End Date"}),i.jsx(G,{type:"date",value:r,onChange:x=>s(x.target.value)})]})]})})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(Z,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(cr,{className:"h-4 w-4"}),"Total Invoices"]})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:l.length})})]}),i.jsxs(Z,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(la,{className:"h-4 w-4 text-primary"}),"Receivable"]})}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-primary",children:d(g)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[h.length," invoices"]})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Ci,{className:"h-4 w-4 text-destructive"}),"Overdue"]})}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-destructive",children:d(y)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[f.length," invoices"]})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Mo,{className:"h-4 w-4 text-success"}),"Collected"]})}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-success",children:d(w)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[v.length," invoices"]})]})]})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"Aging Summary"})}),i.jsx(re,{children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Category"}),i.jsx(U,{className:"text-right",children:"Invoices"}),i.jsx(U,{className:"text-right",children:"Amount"})]})}),i.jsxs(Ht,{children:[i.jsxs(_e,{children:[i.jsx(B,{children:"Current (not due)"}),i.jsx(B,{className:"text-right",children:h.filter(x=>!x.due_date||bs(new Date(x.due_date),new Date)>7).length}),i.jsx(B,{className:"text-right",children:d(h.filter(x=>!x.due_date||bs(new Date(x.due_date),new Date)>7).reduce((x,S)=>x+(S.total||0),0))})]}),i.jsxs(_e,{children:[i.jsx(B,{children:"Due within 7 days"}),i.jsx(B,{className:"text-right",children:m.length}),i.jsx(B,{className:"text-right text-warning",children:d(m.reduce((x,S)=>x+(S.total||0),0))})]}),i.jsxs(_e,{children:[i.jsx(B,{children:"1-30 days overdue"}),i.jsx(B,{className:"text-right",children:f.filter(x=>bs(new Date,new Date(x.due_date||""))<=30).length}),i.jsx(B,{className:"text-right text-destructive",children:d(f.filter(x=>bs(new Date,new Date(x.due_date||""))<=30).reduce((x,S)=>x+(S.total||0),0))})]}),i.jsxs(_e,{children:[i.jsx(B,{children:"Over 30 days overdue"}),i.jsx(B,{className:"text-right",children:f.filter(x=>bs(new Date,new Date(x.due_date||""))>30).length}),i.jsx(B,{className:"text-right text-destructive font-bold",children:d(f.filter(x=>bs(new Date,new Date(x.due_date||""))>30).reduce((x,S)=>x+(S.total||0),0))})]})]})]})})]}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"All Invoices"})}),i.jsx(re,{children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Invoice #"}),i.jsx(U,{children:"Customer"}),i.jsx(U,{children:"Invoice Date"}),i.jsx(U,{children:"Due Date"}),i.jsx(U,{className:"text-right",children:"Amount"}),i.jsx(U,{children:"Status"}),i.jsx(U,{children:"Days Overdue"})]})}),i.jsx(Ht,{children:l.map(x=>{var _;const S=x.due_date&&x.status!=="paid"?Math.max(0,bs(new Date,new Date(x.due_date))):0;return i.jsxs(_e,{children:[i.jsx(B,{className:"font-medium",children:x.invoice_number}),i.jsx(B,{children:((_=x.customers)==null?void 0:_.name)||"-"}),i.jsx(B,{children:vt(new Date(x.invoice_date),"dd MMM yyyy")}),i.jsx(B,{children:x.due_date?vt(new Date(x.due_date),"dd MMM yyyy"):"-"}),i.jsx(B,{className:"text-right",children:d(x.total)}),i.jsx(B,{children:i.jsx(Xe,{variant:x.status==="paid"?"default":S>0?"destructive":"secondary",children:x.status})}),i.jsx(B,{children:x.status==="paid"?"-":S>0?`${S} days`:"Current"})]},x.id)})})]})})]}),i.jsx(ng,{open:a,onOpenChange:o,onImport:T,columns:E,title:"Import Invoices"})]})}function xet(){const{user:t}=ct(),e=dn(),[n,r]=N.useState(""),[s,a]=N.useState(!1),[o,l]=N.useState({asset_number:"",name:"",description:"",category_id:"",purchase_date:new Date().toISOString().split("T")[0],purchase_cost:"",residual_value:"0",useful_life_months:"60",depreciation_method:"straight_line",location:"",serial_number:""}),{data:c}=je({queryKey:["fixed-assets-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const b=await Ke.getPrimaryMembershipByUser(t.id);return(b==null?void 0:b.companyId)??null},enabled:!!t}),{data:u,isLoading:d}=je({queryKey:["fixed-assets",c],queryFn:async()=>{if(!c)return[];const b=ve(te,K.FIXED_ASSETS),E=ve(te,K.ASSET_CATEGORIES),[T,x]=await Promise.all([$e(Ce(b,ge("companyId","==",c))),$e(Ce(E,ge("companyId","==",c)))]),S=new Map;return x.docs.forEach(_=>{const p=_.data();S.set(_.id,{name:String(p.name??""),depreciation_method:p.depreciationMethod??p.depreciation_method??null,useful_life_years:Number(p.usefulLifeYears??p.useful_life_years??0)||null})}),T.docs.map(_=>{var I;const p=_.data(),A=p.createdAt??p.created_at,P=typeof A=="string"?A:((I=A==null?void 0:A.toDate)==null?void 0:I.call(A).toISOString())??"",C=p.categoryId??p.category_id??null;return{id:_.id,user_id:String(p.userId??p.user_id??""),company_id:String(p.companyId??p.company_id??""),asset_number:String(p.assetNumber??p.asset_number??""),name:String(p.name??""),description:p.description??null,category_id:C,purchase_date:String(p.purchaseDate??p.purchase_date??""),purchase_cost:Number(p.purchaseCost??p.purchase_cost??0),residual_value:Number(p.residualValue??p.residual_value??0),useful_life_months:Number(p.usefulLifeMonths??p.useful_life_months??0),depreciation_method:String(p.depreciationMethod??p.depreciation_method??"straight_line"),location:p.location??null,serial_number:p.serialNumber??p.serial_number??null,net_book_value:Number(p.netBookValue??p.net_book_value??p.purchaseCost??p.purchase_cost??0),accumulated_depreciation:Number(p.accumulatedDepreciation??p.accumulated_depreciation??0),status:String(p.status??"active"),is_deleted:!!(p.isDeleted??p.is_deleted??!1),created_at:P,asset_categories:C?S.get(C)??null:null}}).filter(_=>!_.is_deleted).sort((_,p)=>p.created_at.localeCompare(_.created_at))},enabled:!!c}),{data:h}=je({queryKey:["asset-categories",c],queryFn:async()=>{if(!c)return[];const b=ve(te,K.ASSET_CATEGORIES);return(await $e(Ce(b,ge("companyId","==",c)))).docs.map(T=>{const x=T.data();return{id:T.id,name:String(x.name??"")}}).sort((T,x)=>T.name.localeCompare(x.name))},enabled:!!c}),f=ot({mutationFn:async()=>{if(!t||!c)throw new Error("Not authenticated");const b=parseFloat(o.purchase_cost),E=parseFloat(o.residual_value)||0,T=parseInt(o.useful_life_months,10),x=T>0?Math.max(0,(b-E)/T):0;await Nn(ve(te,K.FIXED_ASSETS),{userId:t.id,companyId:c,assetNumber:o.asset_number,name:o.name,description:o.description||null,categoryId:o.category_id||null,purchaseDate:o.purchase_date,purchaseCost:b,residualValue:E,usefulLifeMonths:T,depreciationMethod:o.depreciation_method,location:o.location||null,serialNumber:o.serial_number||null,monthlyDepreciation:x,netBookValue:b,accumulatedDepreciation:0,status:"active",isDeleted:!1,createdAt:ye(),updatedAt:ye()})},onSuccess:()=>{e.invalidateQueries({queryKey:["fixed-assets",c]}),J.success("Asset created successfully"),a(!1),l({asset_number:"",name:"",description:"",category_id:"",purchase_date:new Date().toISOString().split("T")[0],purchase_cost:"",residual_value:"0",useful_life_months:"60",depreciation_method:"straight_line",location:"",serial_number:""})},onError:b=>{J.error(b.message||"Failed to create asset")}}),m=u==null?void 0:u.filter(b=>b.name.toLowerCase().includes(n.toLowerCase())||b.asset_number.toLowerCase().includes(n.toLowerCase())),v=(u==null?void 0:u.reduce((b,E)=>b+Number(E.purchase_cost||0),0))||0,g=(u==null?void 0:u.reduce((b,E)=>b+Number(E.accumulated_depreciation||0),0))||0,y=(u==null?void 0:u.reduce((b,E)=>b+Number(E.net_book_value||E.purchase_cost||0),0))||0,w=b=>{switch(b){case"active":return i.jsx(Xe,{className:"bg-green-600",children:"Active"});case"disposed":return i.jsx(Xe,{variant:"destructive",children:"Disposed"});case"fully_depreciated":return i.jsx(Xe,{variant:"secondary",children:"Fully Depreciated"});case"under_maintenance":return i.jsx(Xe,{variant:"outline",className:"text-yellow-600 border-yellow-600",children:"Maintenance"});default:return i.jsx(Xe,{variant:"outline",children:b})}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Fixed Assets"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your organization's fixed assets and depreciation"})]}),i.jsxs(rr,{open:s,onOpenChange:a,children:[i.jsx(Zr,{asChild:!0,children:i.jsxs(H,{children:[i.jsx(bn,{className:"h-4 w-4 mr-2"}),"Add Asset"]})}),i.jsxs(Wn,{className:"max-w-2xl",children:[i.jsxs(Hn,{children:[i.jsx(Kn,{children:"Add New Fixed Asset"}),i.jsx(Yu,{children:"Enter the details of the new asset"})]}),i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Asset Number *"}),i.jsx(G,{value:o.asset_number,onChange:b=>l({...o,asset_number:b.target.value}),placeholder:"FA-001"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Asset Name *"}),i.jsx(G,{value:o.name,onChange:b=>l({...o,name:b.target.value}),placeholder:"Office Computer"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Description"}),i.jsx(hr,{value:o.description,onChange:b=>l({...o,description:b.target.value}),placeholder:"Asset description..."})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Category"}),i.jsxs(kt,{value:o.category_id,onValueChange:b=>l({...o,category_id:b}),children:[i.jsx(At,{children:i.jsx(Rt,{placeholder:"Select category"})}),i.jsx(Tt,{children:h==null?void 0:h.map(b=>i.jsx(be,{value:b.id,children:b.name},b.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Purchase Date *"}),i.jsx(G,{type:"date",value:o.purchase_date,onChange:b=>l({...o,purchase_date:b.target.value})})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Purchase Cost (ZMW) *"}),i.jsx(G,{type:"number",value:o.purchase_cost,onChange:b=>l({...o,purchase_cost:b.target.value}),placeholder:"0.00"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Residual Value (ZMW)"}),i.jsx(G,{type:"number",value:o.residual_value,onChange:b=>l({...o,residual_value:b.target.value}),placeholder:"0.00"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Useful Life (Months)"}),i.jsx(G,{type:"number",value:o.useful_life_months,onChange:b=>l({...o,useful_life_months:b.target.value}),placeholder:"60"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Depreciation Method"}),i.jsxs(kt,{value:o.depreciation_method,onValueChange:b=>l({...o,depreciation_method:b}),children:[i.jsx(At,{children:i.jsx(Rt,{})}),i.jsxs(Tt,{children:[i.jsx(be,{value:"straight_line",children:"Straight Line"}),i.jsx(be,{value:"reducing_balance",children:"Reducing Balance"}),i.jsx(be,{value:"units_of_production",children:"Units of Production"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Location"}),i.jsx(G,{value:o.location,onChange:b=>l({...o,location:b.target.value}),placeholder:"Head Office"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Serial Number"}),i.jsx(G,{value:o.serial_number,onChange:b=>l({...o,serial_number:b.target.value}),placeholder:"SN-12345"})]})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),i.jsxs(H,{onClick:()=>f.mutate(),disabled:!o.asset_number||!o.name||!o.purchase_cost||f.isPending,children:[f.isPending?i.jsx(Rn,{className:"h-4 w-4 animate-spin mr-2"}):null,"Create Asset"]})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(Z,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsxs(St,{className:"flex items-center gap-2",children:[i.jsx(Ji,{className:"h-4 w-4"}),"Total Assets"]}),i.jsx(ne,{className:"text-2xl",children:(u==null?void 0:u.length)||0})]})}),i.jsx(Z,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(St,{children:"Total Asset Value"}),i.jsx(ne,{className:"text-2xl text-primary",children:le(v)})]})}),i.jsx(Z,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsxs(St,{className:"flex items-center gap-2",children:[i.jsx(Ka,{className:"h-4 w-4"}),"Accumulated Depreciation"]}),i.jsx(ne,{className:"text-2xl text-destructive",children:le(g)})]})}),i.jsx(Z,{className:"bg-primary/5 border-primary/20",children:i.jsxs(ee,{className:"pb-2",children:[i.jsxs(St,{className:"flex items-center gap-2",children:[i.jsx(Zy,{className:"h-4 w-4"}),"Net Book Value"]}),i.jsx(ne,{className:"text-2xl text-primary",children:le(y)})]})})]}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative flex-1 max-w-sm",children:[i.jsx(fi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"Search assets...",value:n,onChange:b=>r(b.target.value),className:"pl-9"})]})}),i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsx(ne,{children:"Asset Register"})}),i.jsx(re,{children:d?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx(Rn,{className:"h-8 w-8 animate-spin"})}):m&&m.length>0?i.jsx("div",{className:"border rounded-lg overflow-x-auto",children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Asset #"}),i.jsx(U,{children:"Name"}),i.jsx(U,{children:"Category"}),i.jsx(U,{children:"Purchase Date"}),i.jsx(U,{className:"text-right",children:"Cost"}),i.jsx(U,{className:"text-right",children:"Accum. Dep."}),i.jsx(U,{className:"text-right",children:"NBV"}),i.jsx(U,{children:"Status"})]})}),i.jsx(Ht,{children:m.map(b=>{var E;return i.jsxs(_e,{children:[i.jsx(B,{className:"font-mono",children:b.asset_number}),i.jsx(B,{children:i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:b.name}),b.serial_number&&i.jsxs("p",{className:"text-sm text-muted-foreground",children:["SN: ",b.serial_number]})]})}),i.jsx(B,{children:((E=b.asset_categories)==null?void 0:E.name)||"-"}),i.jsx(B,{children:vt(new Date(b.purchase_date),"dd MMM yyyy")}),i.jsx(B,{className:"text-right",children:le(Number(b.purchase_cost))}),i.jsx(B,{className:"text-right text-destructive",children:le(Number(b.accumulated_depreciation||0))}),i.jsx(B,{className:"text-right font-medium",children:le(Number(b.net_book_value||b.purchase_cost))}),i.jsx(B,{children:w(b.status||"active")})]},b.id)})})]})}):i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(Ji,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No fixed assets found"}),i.jsx("p",{className:"text-sm",children:"Add your first asset to get started"})]})})]})]})}function bet(){const t=dn(),{user:e}=ct(),n=ot({mutationFn:async({periodMonth:r,postToGL:s=!0})=>{if(!e)throw new Error("Not authenticated");const a=await Ke.getPrimaryMembershipByUser(e.id);if(!(a!=null&&a.companyId))throw new Error("No company found");const o=await Qf.runDepreciation({companyId:a.companyId,periodMonth:r,postToGL:s});return{success:o.success,period:r,assets_processed:o.assetsProcessed,total_depreciation:o.totalDepreciation,posted_to_gl:!!s,results:[]}},onSuccess:r=>{J.success(`Depreciation completed: ${r.assets_processed} assets, K${r.total_depreciation.toFixed(2)} total`),t.invalidateQueries({queryKey:["asset-depreciation"]}),t.invalidateQueries({queryKey:["fixed-assets"]}),t.invalidateQueries({queryKey:["depreciable-assets"]}),t.invalidateQueries({queryKey:["journal-entries"]})},onError:r=>{J.error(r.message||"Failed to run depreciation")}});return{runDepreciation:n,isRunning:n.isPending,lastResult:n.data}}function wet(){const{user:t}=ct(),[e,n]=N.useState(vt(m6(new Date,1),"yyyy-MM")),[r,s]=N.useState(!1),[a,o]=N.useState(!0),{runDepreciation:l,isRunning:c,lastResult:u}=bet(),{data:d}=je({queryKey:["asset-depreciation-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const w=await Ke.getPrimaryMembershipByUser(t.id);return(w==null?void 0:w.companyId)??null},enabled:!!t}),{data:h,isLoading:f}=je({queryKey:["asset-depreciation",d,e],queryFn:async()=>{if(!d)return[];const w=lne(new Date(e+"-01")),b=one(w),E=vt(w,"yyyy-MM-dd"),T=vt(b,"yyyy-MM-dd"),[x,S]=await Promise.all([$e(Ce(ve(te,K.DEPRECIATION_ENTRIES),ge("companyId","==",d))),$e(Ce(ve(te,K.FIXED_ASSETS),ge("companyId","==",d)))]),_=new Map;return S.docs.forEach(p=>{const A=p.data();_.set(p.id,{asset_number:String(A.assetNumber??A.asset_number??""),name:String(A.name??""),purchase_cost:Number(A.purchaseCost??A.purchase_cost??0),depreciation_method:String(A.depreciationMethod??A.depreciation_method??"straight_line")})}),x.docs.map(p=>{const A=p.data(),P=String(A.periodStart??A.period_start??""),C=String(A.periodEnd??A.period_end??"");return{id:p.id,asset_id:String(A.assetId??A.asset_id??""),depreciation_amount:Number(A.depreciationAmount??A.depreciation_amount??0),accumulated_depreciation:Number(A.accumulatedDepreciation??A.accumulated_depreciation??0),net_book_value:Number(A.netBookValue??A.net_book_value??0),is_posted:!!(A.isPosted??A.is_posted??!1),period_start:P,period_end:C,created_at:String(A.createdAt??A.created_at??""),fixed_assets:_.get(String(A.assetId??A.asset_id??""))??null}}).filter(p=>p.period_start>=E&&p.period_end<=T).sort((p,A)=>String(A.created_at).localeCompare(String(p.created_at)))},enabled:!!d}),{data:m}=je({queryKey:["depreciable-assets",d],queryFn:async()=>d?(await $e(Ce(ve(te,K.FIXED_ASSETS),ge("companyId","==",d),ge("status","==","active")))).docs.map(b=>{const E=b.data();return{id:b.id,status:String(E.status??"active"),is_deleted:!!(E.isDeleted??E.is_deleted??!1)}}).filter(b=>!b.is_deleted):[],enabled:!!d}),v=async()=>{try{await l.mutateAsync({periodMonth:e,postToGL:a}),s(!1)}catch{}},g=(h==null?void 0:h.reduce((w,b)=>w+Number(b.depreciation_amount||0),0))||0,y=Array.from({length:12},(w,b)=>{const E=m6(new Date,b);return{value:vt(E,"yyyy-MM"),label:vt(E,"MMMM yyyy")}});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Asset Depreciation"}),i.jsx("p",{className:"text-muted-foreground",children:"Run and view depreciation calculations"})]}),i.jsxs(H,{onClick:()=>s(!0),children:[i.jsx(I8,{className:"h-4 w-4 mr-2"}),"Run Depreciation"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(Z,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsxs(St,{className:"flex items-center gap-2",children:[i.jsx(Zy,{className:"h-4 w-4"}),"Active Assets"]}),i.jsx(ne,{className:"text-2xl",children:(m==null?void 0:m.filter(w=>w.status==="active").length)||0})]})}),i.jsx(Z,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(St,{children:"Records This Period"}),i.jsx(ne,{className:"text-2xl",children:(h==null?void 0:h.length)||0})]})}),i.jsx(Z,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsxs(St,{className:"flex items-center gap-2",children:[i.jsx(Ka,{className:"h-4 w-4 text-destructive"}),"Total Depreciation"]}),i.jsx(ne,{className:"text-2xl text-destructive",children:le(g)})]})}),i.jsx(Z,{className:"bg-muted/50",children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(St,{children:"Posted to GL"}),i.jsx(ne,{className:"text-2xl text-green-600",children:(h==null?void 0:h.filter(w=>w.is_posted).length)||0})]})})]}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs(kt,{value:e,onValueChange:n,children:[i.jsx(At,{className:"w-[200px]",children:i.jsx(Rt,{placeholder:"Select month"})}),i.jsx(Tt,{children:y.map(w=>i.jsx(be,{value:w.value,children:w.label},w.value))})]})}),i.jsxs(Z,{children:[i.jsxs(ee,{children:[i.jsx(ne,{children:"Depreciation Records"}),i.jsxs(St,{children:["Monthly depreciation entries for ",vt(new Date(e+"-01"),"MMMM yyyy")]})]}),i.jsx(re,{children:f?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(Rn,{className:"h-8 w-8 animate-spin"})}):h&&h.length>0?i.jsx("div",{className:"border rounded-lg overflow-x-auto",children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Asset"}),i.jsx(U,{children:"Method"}),i.jsx(U,{className:"text-right",children:"Depreciation"}),i.jsx(U,{className:"text-right",children:"Accum. Dep."}),i.jsx(U,{className:"text-right",children:"NBV"}),i.jsx(U,{children:"Status"})]})}),i.jsx(Ht,{children:h.map(w=>{var b,E,T,x;return i.jsxs(_e,{children:[i.jsx(B,{children:i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:(b=w.fixed_assets)==null?void 0:b.name}),i.jsx("p",{className:"text-sm text-muted-foreground font-mono",children:(E=w.fixed_assets)==null?void 0:E.asset_number})]})}),i.jsx(B,{className:"capitalize",children:(x=(T=w.fixed_assets)==null?void 0:T.depreciation_method)==null?void 0:x.replace("_"," ")}),i.jsx(B,{className:"text-right text-destructive",children:le(Number(w.depreciation_amount))}),i.jsx(B,{className:"text-right",children:le(Number(w.accumulated_depreciation))}),i.jsx(B,{className:"text-right font-medium",children:le(Number(w.net_book_value))}),i.jsx(B,{children:w.is_posted?i.jsxs(Xe,{className:"bg-green-600",children:[i.jsx(Mo,{className:"h-3 w-3 mr-1"}),"Posted"]}):i.jsx(Xe,{variant:"outline",children:"Pending"})})]},w.id)})})]})}):i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(Ka,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No depreciation records for this period"}),i.jsx("p",{className:"text-sm",children:"Run depreciation to calculate monthly values"})]})})]}),i.jsx(jh,{open:r,onOpenChange:s,children:i.jsxs(_u,{children:[i.jsxs(ju,{children:[i.jsxs(Su,{className:"flex items-center gap-2",children:[i.jsx(Ga,{className:"h-5 w-5 text-amber-500"}),"Run Monthly Depreciation"]}),i.jsxs(Eu,{className:"space-y-2",children:[i.jsx("p",{children:"This will calculate depreciation for all active fixed assets for:"}),i.jsx("p",{className:"font-medium text-foreground",children:vt(new Date(e+"-01"),"MMMM yyyy")}),i.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm mt-4",children:[i.jsx("li",{children:"Calculate depreciation based on each asset's method"}),i.jsx("li",{children:"Update accumulated depreciation and net book value"}),i.jsx("li",{children:"Create journal entries for the GL"}),i.jsx("li",{children:"Mark fully depreciated assets"})]})]})]}),i.jsx("div",{className:"py-4",children:i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Qj,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"Post to General Ledger"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Create journal entries automatically"})]})]}),i.jsx("input",{type:"checkbox",checked:a,onChange:w=>o(w.target.checked),className:"h-4 w-4"})]})}),i.jsxs(Nu,{children:[i.jsx(Tu,{children:"Cancel"}),i.jsxs(Au,{onClick:v,disabled:c,children:[c&&i.jsx(Rn,{className:"h-4 w-4 mr-2 animate-spin"}),"Run Depreciation"]})]})]})}),u&&i.jsx(Z,{className:"border-green-500/20 bg-green-500/5",children:i.jsxs(ee,{className:"pb-2",children:[i.jsxs(ne,{className:"text-sm flex items-center gap-2",children:[i.jsx(Mo,{className:"h-4 w-4 text-green-600"}),"Last Run: ",u.period]}),i.jsxs(St,{children:[u.assets_processed," assets processed, K",u.total_depreciation.toFixed(2)," total",u.posted_to_gl&&" (Posted to GL)"]})]})})]})}const lre=t=>{if(!t)return null;if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return null},Cj=t=>{const e=lre(t);return e?e.slice(0,10):""},_et=(t,e)=>({id:t,companyId:String(e.companyId??e.company_id??""),yearName:String(e.yearName??e.year_name??""),startDate:Cj(e.startDate??e.start_date),endDate:Cj(e.endDate??e.end_date),status:String(e.status??"open")}),jet=(t,e)=>({id:t,companyId:String(e.companyId??e.company_id??""),financialYearId:String(e.financialYearId??e.financial_year_id??""),periodNumber:Number(e.periodNumber??e.period_number??0),periodName:String(e.periodName??e.period_name??""),startDate:Cj(e.startDate??e.start_date),endDate:Cj(e.endDate??e.end_date),status:String(e.status??"open"),closedAt:lre(e.closedAt??e.closed_at),closedBy:e.closedBy??e.closed_by??null});function Net(){const t=dn(),{user:e}=ct(),[n,r]=N.useState(!1),[s,a]=N.useState(null),[o,l]=N.useState(null),[c,u]=N.useState({year_name:`FY ${tf(new Date)}`,start_date:`${tf(new Date)}-01-01`,end_date:`${tf(new Date)}-12-31`}),d=je({queryKey:["financial-periods-company-id",e==null?void 0:e.id],queryFn:async()=>{if(!e)return null;const A=await Ke.getPrimaryMembershipByUser(e.id);return(A==null?void 0:A.companyId)??null},enabled:!!e}),h=d.data??null,{data:f,isLoading:m}=je({queryKey:["financial-years",h],queryFn:async()=>{if(!h)return[];const A=ve(te,K.FINANCIAL_YEARS);return(await $e(Ce(A,ge("companyId","==",h)))).docs.map(C=>_et(C.id,C.data())).sort((C,I)=>I.startDate.localeCompare(C.startDate))},enabled:!!h});N.useEffect(()=>{!o&&f&&f.length>0&&l(f[0].id)},[f,o]);const{data:v,isLoading:g}=je({queryKey:["financial-periods",h,o],queryFn:async()=>{if(!h||!o)return[];const A=ve(te,K.FINANCIAL_PERIODS);return(await $e(Ce(A,ge("companyId","==",h),ge("financialYearId","==",o)))).docs.map(C=>jet(C.id,C.data())).sort((C,I)=>C.periodNumber-I.periodNumber)},enabled:!!(h&&o)}),y=N.useMemo(()=>(v==null?void 0:v.find(A=>A.id===s))??null,[v,s]),w=ot({mutationFn:async()=>{if(!e)throw new Error("Not authenticated");if(!h)throw new Error("No company profile found for your account");if(!c.year_name.trim())throw new Error("Year name is required");if(c.start_date>c.end_date)throw new Error("Start date must be before end date");const A=new Date(c.start_date),P=kl(te),C=He(ve(te,K.FINANCIAL_YEARS));P.set(C,{companyId:h,yearName:c.year_name.trim(),startDate:c.start_date,endDate:c.end_date,status:"open",createdAt:ye(),updatedAt:ye()});for(let I=0;I<12;I+=1){const R=rne(lne(A),I),L=one(R),z=He(ve(te,K.FINANCIAL_PERIODS));P.set(z,{companyId:h,financialYearId:C.id,periodNumber:I+1,periodName:vt(R,"MMMM yyyy"),startDate:vt(R,"yyyy-MM-dd"),endDate:vt(L,"yyyy-MM-dd"),status:"open",closedAt:null,closedBy:null,createdAt:ye(),updatedAt:ye()})}await P.commit()},onSuccess:()=>{t.invalidateQueries({queryKey:["financial-years",h]}),t.invalidateQueries({queryKey:["financial-periods",h]}),J.success("Financial year created with 12 monthly periods"),r(!1),u({year_name:`FY ${tf(new Date)+1}`,start_date:`${tf(new Date)+1}-01-01`,end_date:`${tf(new Date)+1}-12-31`})},onError:A=>{J.error(A.message||"Failed to create financial year")}}),b=ot({mutationFn:async A=>{if(!e)throw new Error("Not authenticated");await $o(He(te,K.FINANCIAL_PERIODS,A.id),{status:"closed",closedAt:ye(),closedBy:e.id,updatedAt:ye()}),await dr(He(te,K.PERIOD_LOCKS,`${A.companyId}_${A.id}`),{companyId:A.companyId,periodId:A.id,financialYearId:A.financialYearId,periodName:A.periodName,startDate:A.startDate,endDate:A.endDate,status:"closed",lockedBy:e.id,lockedAt:ye(),updatedAt:ye()},{merge:!0})},onSuccess:()=>{t.invalidateQueries({queryKey:["financial-periods",h,o]}),J.success("Period closed successfully"),a(null)},onError:A=>{J.error(A.message||"Failed to close period")}}),E=ot({mutationFn:async A=>{if(!e)throw new Error("Not authenticated");await $o(He(te,K.FINANCIAL_PERIODS,A.id),{status:"open",closedAt:null,closedBy:null,updatedAt:ye()}),await dr(He(te,K.PERIOD_LOCKS,`${A.companyId}_${A.id}`),{companyId:A.companyId,periodId:A.id,status:"open",unlockedBy:e.id,unlockedAt:ye(),updatedAt:ye()},{merge:!0})},onSuccess:()=>{t.invalidateQueries({queryKey:["financial-periods",h,o]}),J.success("Period reopened")},onError:A=>{J.error(A.message||"Failed to reopen period")}}),T=A=>{switch(A){case"open":return i.jsx(Xe,{className:"bg-green-600",children:"Open"});case"closed":return i.jsx(Xe,{variant:"secondary",children:"Closed"});default:return i.jsx(Xe,{variant:"outline",children:A})}},x=f==null?void 0:f.find(A=>A.status==="open"),S=(v==null?void 0:v.filter(A=>A.status==="open"))??[],_=(v==null?void 0:v.filter(A=>A.status==="closed"))??[],p=d.isLoading||m;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Financial Periods"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage financial years and accounting periods"})]}),i.jsxs(rr,{open:n,onOpenChange:r,children:[i.jsx(Zr,{asChild:!0,children:i.jsxs(H,{disabled:!h,children:[i.jsx(bn,{className:"h-4 w-4 mr-2"}),"New Financial Year"]})}),i.jsxs(Wn,{children:[i.jsxs(Hn,{children:[i.jsx(Kn,{children:"Create Financial Year"}),i.jsx(Yu,{children:"This creates a new financial year with 12 monthly periods."})]}),i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Year Name"}),i.jsx(G,{value:c.year_name,onChange:A=>u({...c,year_name:A.target.value}),placeholder:"FY 2026"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"Start Date"}),i.jsx(G,{type:"date",value:c.start_date,onChange:A=>u({...c,start_date:A.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:"End Date"}),i.jsx(G,{type:"date",value:c.end_date,onChange:A=>u({...c,end_date:A.target.value})})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),i.jsxs(H,{onClick:()=>w.mutate(),disabled:!c.year_name||w.isPending,children:[w.isPending&&i.jsx(Rn,{className:"h-4 w-4 mr-2 animate-spin"}),"Create Year"]})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(Z,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsxs(St,{className:"flex items-center gap-2",children:[i.jsx(Xd,{className:"h-4 w-4"}),"Current Year"]}),i.jsx(ne,{className:"text-xl",children:(x==null?void 0:x.yearName)||"Not Set"})]})}),i.jsx(Z,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(St,{children:"Total Years"}),i.jsx(ne,{className:"text-2xl",children:(f==null?void 0:f.length)||0})]})}),i.jsx(Z,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsxs(St,{className:"flex items-center gap-2",children:[i.jsx(RL,{className:"h-4 w-4 text-green-600"}),"Open Periods"]}),i.jsx(ne,{className:"text-2xl text-green-600",children:S.length})]})}),i.jsx(Z,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsxs(St,{className:"flex items-center gap-2",children:[i.jsx(Sm,{className:"h-4 w-4"}),"Closed Periods"]}),i.jsx(ne,{className:"text-2xl",children:_.length})]})})]}),i.jsxs(Z,{children:[i.jsxs(ee,{children:[i.jsx(ne,{children:"Financial Years"}),i.jsx(St,{children:"Select a year to view its periods"})]}),i.jsx(re,{children:p?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(Rn,{className:"h-8 w-8 animate-spin"})}):h?f&&f.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:f.map(A=>i.jsx(Z,{className:`cursor-pointer transition-colors ${o===A.id?"border-primary ring-1 ring-primary":"hover:border-primary/50"}`,onClick:()=>l(A.id),children:i.jsx(re,{className:"pt-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:A.yearName}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[A.startDate?vt(new Date(A.startDate),"dd MMM yyyy"):"-"," ","-"," ",A.endDate?vt(new Date(A.endDate),"dd MMM yyyy"):"-"]})]}),T(A.status||"open")]})})},A.id))}):i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(Xd,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No financial years found"}),i.jsx("p",{className:"text-sm",children:"Create your first financial year to get started"})]}):i.jsx("div",{className:"text-center py-8 text-muted-foreground",children:i.jsx("p",{children:"No company profile found for your account"})})})]}),o&&i.jsxs(Z,{children:[i.jsxs(ee,{children:[i.jsx(ne,{children:"Accounting Periods"}),i.jsx(St,{children:"Manage period status. Closed periods prevent back-dated entries."})]}),i.jsx(re,{children:g?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(Rn,{className:"h-8 w-8 animate-spin"})}):v&&v.length>0?i.jsx("div",{className:"border rounded-lg",children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Period"}),i.jsx(U,{children:"Name"}),i.jsx(U,{children:"Start Date"}),i.jsx(U,{children:"End Date"}),i.jsx(U,{children:"Status"}),i.jsx(U,{children:"Closed At"}),i.jsx(U,{className:"text-right",children:"Actions"})]})}),i.jsx(Ht,{children:v.map(A=>i.jsxs(_e,{children:[i.jsxs(B,{className:"font-mono",children:["P",A.periodNumber]}),i.jsx(B,{className:"font-medium",children:A.periodName}),i.jsx(B,{children:A.startDate?vt(new Date(A.startDate),"dd MMM yyyy"):"-"}),i.jsx(B,{children:A.endDate?vt(new Date(A.endDate),"dd MMM yyyy"):"-"}),i.jsx(B,{children:T(A.status||"open")}),i.jsx(B,{children:A.closedAt?vt(new Date(A.closedAt),"dd MMM yyyy HH:mm"):"-"}),i.jsx(B,{className:"text-right",children:A.status==="open"?i.jsxs(H,{variant:"outline",size:"sm",onClick:()=>a(A.id),children:[i.jsx(Sm,{className:"h-4 w-4 mr-2"}),"Close"]}):i.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>E.mutate(A),disabled:E.isPending,children:[i.jsx(RL,{className:"h-4 w-4 mr-2"}),"Reopen"]})})]},A.id))})]})}):i.jsx("div",{className:"text-center py-8 text-muted-foreground",children:i.jsx("p",{children:"No periods found for this year"})})})]}),i.jsx(jh,{open:!!s,onOpenChange:()=>a(null),children:i.jsxs(_u,{children:[i.jsxs(ju,{children:[i.jsxs(Su,{className:"flex items-center gap-2",children:[i.jsx(Ga,{className:"h-5 w-5 text-amber-500"}),"Close Accounting Period"]}),i.jsxs(Eu,{className:"space-y-2",children:[i.jsx("p",{children:"Closing this period will:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[i.jsx("li",{children:"Prevent new entries dated within this period"}),i.jsx("li",{children:"Block modifications to existing entries in this period"}),i.jsx("li",{children:"Lock payroll postings for this period"})]}),i.jsx("p",{className:"mt-4 font-medium",children:"You can reopen the period later if needed."})]})]}),i.jsxs(Nu,{children:[i.jsx(Tu,{children:"Cancel"}),i.jsxs(Au,{onClick:()=>y&&b.mutate(y),disabled:b.isPending||!y,children:[b.isPending&&i.jsx(Rn,{className:"h-4 w-4 mr-2 animate-spin"}),"Close Period"]})]})]})})]})}const j6=[{value:"housing",label:"Housing Allowance"},{value:"transport",label:"Transport Allowance"},{value:"meal",label:"Meal Allowance"},{value:"medical",label:"Medical Allowance"},{value:"phone",label:"Phone Allowance"},{value:"fuel",label:"Fuel Allowance"},{value:"education",label:"Education Allowance"},{value:"custom",label:"Custom Allowance"}];function Eet({employeeId:t,employeeName:e,contractType:n,basicSalary:r,onClose:s}){const a=dn(),{user:o}=ct(),l=n==="consultant",[c,u]=N.useState({apply_paye:!l,apply_napsa:!l,apply_nhima:!l,pension_enabled:!1,pension_employee_rate:5,pension_employer_rate:5,is_consultant:l,consultant_type:"local",apply_wht:l,rate_type:"monthly",currency:"ZMW"}),[d,h]=N.useState([]),[f,m]=N.useState({allowance_type:"housing",allowance_name:"Housing Allowance",amount:0,is_taxable:!0}),{data:v}=je({queryKey:["employee-payroll-profile",t,o==null?void 0:o.id],enabled:!!o,queryFn:async()=>{if(!o)return null;const x=await Ke.getPrimaryMembershipByUser(o.id);if(!(x!=null&&x.companyId))return null;const S=Ce(ve(te,K.EMPLOYEE_PAYROLL_PROFILES),ge("companyId","==",x.companyId),ge("employeeId","==",t),ni(1)),_=await $e(S);if(_.empty)return null;const p=_.docs[0];return{id:p.id,...p.data()}}}),{data:g}=je({queryKey:["employee-allowances",t,o==null?void 0:o.id],enabled:!!o,queryFn:async()=>{if(!o)return[];const x=await Ke.getPrimaryMembershipByUser(o.id);if(!(x!=null&&x.companyId))return[];const S=Ce(ve(te,K.EMPLOYEE_ALLOWANCES),ge("companyId","==",x.companyId),ge("employeeId","==",t),ge("isActive","==",!0));return(await $e(S)).docs.map(p=>({id:p.id,...p.data()}))}});N.useEffect(()=>{v&&u({apply_paye:v.applyPaye??v.apply_paye??!l,apply_napsa:v.applyNapsa??v.apply_napsa??!l,apply_nhima:v.applyNhima??v.apply_nhima??!l,pension_enabled:v.pensionEnabled??v.pension_enabled??!1,pension_employee_rate:Number(v.pensionEmployeeRate??v.pension_employee_rate??5),pension_employer_rate:Number(v.pensionEmployerRate??v.pension_employer_rate??5),is_consultant:v.isConsultant??v.is_consultant??l,consultant_type:v.consultantType??v.consultant_type??"local",apply_wht:v.applyWht??v.apply_wht??l,rate_type:v.rateType??v.rate_type??"monthly",currency:v.currency??"ZMW"})},[v,l]),N.useEffect(()=>{g&&h(g.map(x=>({id:x.id,allowance_type:x.allowanceType??x.allowance_type??"custom",allowance_name:x.allowanceName??x.allowance_name??"Allowance",amount:Number(x.amount??0),is_taxable:x.isTaxable??x.is_taxable??!0})))},[g]);const y=ot({mutationFn:async()=>{if(!o)throw new Error("Not authenticated");const x=await Ke.getPrimaryMembershipByUser(o.id);if(!(x!=null&&x.companyId))throw new Error("No company associated with user");const S=v&&typeof v.id=="string"?String(v.id):t,_={employeeId:t,companyId:x.companyId,applyPaye:c.apply_paye,applyNapsa:c.apply_napsa,applyNhima:c.apply_nhima,pensionEnabled:c.pension_enabled,pensionEmployeeRate:c.pension_employee_rate,pensionEmployerRate:c.pension_employer_rate,isConsultant:c.is_consultant,consultantType:c.consultant_type,applyWht:c.apply_wht,rateType:c.rate_type,currency:c.currency,updatedAt:ye()};if(await dr(He(te,K.EMPLOYEE_PAYROLL_PROFILES,S),v?_:{..._,createdAt:ye()},{merge:!0}),g){const p=g.map(C=>String(C.id)).filter(C=>!!C),A=d.filter(C=>C.id).map(C=>String(C.id)),P=p.filter(C=>!A.includes(C));await Promise.all(P.map(C=>$o(He(te,K.EMPLOYEE_ALLOWANCES,C),{isActive:!1,updatedAt:ye()})))}for(const p of d){const A={employeeId:t,companyId:x.companyId,allowanceType:p.allowance_type,allowanceName:p.allowance_name,amount:p.amount,isTaxable:p.is_taxable,isActive:!0,updatedAt:ye()};p.id?await dr(He(te,K.EMPLOYEE_ALLOWANCES,String(p.id)),A,{merge:!0}):await Nn(ve(te,K.EMPLOYEE_ALLOWANCES),{...A,createdAt:ye()})}},onSuccess:()=>{J.success("Payroll setup saved successfully"),a.invalidateQueries({queryKey:["employee-payroll-profile",t]}),a.invalidateQueries({queryKey:["employee-allowances",t]}),s==null||s()},onError:x=>{J.error(x instanceof Error?x.message:"Failed to save payroll setup")}}),w=()=>{f.amount>0&&(h([...d,{...f}]),m({allowance_type:"housing",allowance_name:"Housing Allowance",amount:0,is_taxable:!0}))},b=x=>{h(d.filter((S,_)=>_!==x))},E=d.reduce((x,S)=>x+S.amount,0),T=r+E;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Payroll Setup"}),i.jsx("p",{className:"text-muted-foreground",children:e})]}),i.jsx(Xe,{variant:l?"secondary":"default",children:l?"Consultant":"Employee"})]}),i.jsxs(Z,{children:[i.jsxs(ee,{children:[i.jsx(ne,{children:"Earnings Assignment"}),i.jsx(St,{children:"Configure allowances for this employee"})]}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[i.jsx("span",{children:"Basic Pay"}),i.jsx("span",{className:"font-semibold",children:le(r)})]}),d.map((x,S)=>i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:x.allowance_name}),!x.is_taxable&&i.jsx(Xe,{variant:"outline",className:"ml-2 text-xs",children:"Non-taxable"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-semibold",children:le(x.amount)}),i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>b(S),children:i.jsx(Ts,{className:"h-4 w-4 text-destructive"})})]})]},S)),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 p-3 border rounded-lg bg-muted/50",children:[i.jsxs(kt,{value:f.allowance_type,onValueChange:x=>{const S=j6.find(_=>_.value===x);m({...f,allowance_type:x,allowance_name:(S==null?void 0:S.label)||x})},children:[i.jsx(At,{children:i.jsx(Rt,{})}),i.jsx(Tt,{children:j6.map(x=>i.jsx(be,{value:x.value,children:x.label},x.value))})]}),i.jsx(G,{type:"number",step:"0.01",placeholder:"Amount",value:f.amount||"",onChange:x=>m({...f,amount:Number(x.target.value)})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(is,{checked:f.is_taxable,onCheckedChange:x=>m({...f,is_taxable:x})}),i.jsx(X,{className:"text-sm",children:"Taxable"})]}),i.jsxs(H,{onClick:w,disabled:f.amount<=0,children:[i.jsx(bn,{className:"h-4 w-4 mr-1"})," Add"]})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 bg-primary/10 rounded-lg font-semibold",children:[i.jsx("span",{children:"Gross Salary"}),i.jsx("span",{className:"text-lg",children:le(T)})]})]})]}),i.jsxs(Z,{children:[i.jsxs(ee,{children:[i.jsx(ne,{children:"Statutory Deductions"}),i.jsx(St,{children:"Configure which deductions apply to this employee"})]}),i.jsxs(re,{className:"space-y-4",children:[l&&i.jsxs(gp,{children:[i.jsx(Ci,{className:"h-4 w-4"}),i.jsx(yp,{children:"Consultants are subject to Withholding Tax (WHT) instead of PAYE, NAPSA, and NHIMA."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx(X,{className:"font-medium",children:"Apply PAYE"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Pay As You Earn tax"})]}),i.jsx(is,{checked:c.apply_paye,onCheckedChange:x=>u({...c,apply_paye:x}),disabled:l})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx(X,{className:"font-medium",children:"Apply NAPSA"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"5% of gross (max K1,342)"})]}),i.jsx(is,{checked:c.apply_napsa,onCheckedChange:x=>u({...c,apply_napsa:x}),disabled:l})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx(X,{className:"font-medium",children:"Apply NHIMA"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"1% of basic (max K250)"})]}),i.jsx(is,{checked:c.apply_nhima,onCheckedChange:x=>u({...c,apply_nhima:x}),disabled:l})]})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx(X,{className:"font-medium",children:"Pension Enabled"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Optional pension contribution"})]}),i.jsx(is,{checked:c.pension_enabled,onCheckedChange:x=>u({...c,pension_enabled:x})})]}),c.pension_enabled&&i.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[i.jsxs("div",{children:[i.jsx(X,{children:"Employee Rate (%)"}),i.jsx(G,{type:"number",step:"0.1",value:c.pension_employee_rate,onChange:x=>u({...c,pension_employee_rate:Number(x.target.value)})})]}),i.jsxs("div",{children:[i.jsx(X,{children:"Employer Rate (%)"}),i.jsx(G,{type:"number",step:"0.1",value:c.pension_employer_rate,onChange:x=>u({...c,pension_employer_rate:Number(x.target.value)})})]})]})]}),l&&i.jsxs("div",{className:"border-t pt-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg mb-4",children:[i.jsxs("div",{children:[i.jsx(X,{className:"font-medium",children:"Apply Withholding Tax (WHT)"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Tax on consultancy payments"})]}),i.jsx(is,{checked:c.apply_wht,onCheckedChange:x=>u({...c,apply_wht:x})})]}),c.apply_wht&&i.jsxs("div",{children:[i.jsx(X,{children:"Consultant Type"}),i.jsxs(kt,{value:c.consultant_type,onValueChange:x=>u({...c,consultant_type:x}),children:[i.jsx(At,{className:"mt-2",children:i.jsx(Rt,{})}),i.jsxs(Tt,{children:[i.jsx(be,{value:"local",children:"Local Consultant (15% WHT)"}),i.jsx(be,{value:"non_resident",children:"Non-Resident (20% WHT - Final Tax)"})]})]})]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{variant:"outline",onClick:s,children:"Cancel"}),i.jsxs(H,{onClick:()=>y.mutate(),disabled:y.isPending,children:[i.jsx(Jd,{className:"h-4 w-4 mr-2"}),y.isPending?"Saving...":"Save Payroll Setup"]})]})]})}function Aet(){const{id:t}=Pp(),e=Gn(),{user:n}=ct(),{data:r,isLoading:s}=je({queryKey:["employee",t,n==null?void 0:n.id],queryFn:async()=>{if(!t||!n)return null;const a=await Ke.getPrimaryMembershipByUser(n.id);if(!(a!=null&&a.companyId))return null;const o=He(te,K.EMPLOYEES,t),l=await ki(o);if(!l.exists())return null;const c=l.data(),u=c.companyId??c.company_id;return u&&u!==a.companyId?null:{id:l.id,...c}},enabled:!!(t&&n)});return s?i.jsx(Gf,{}):r?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>e("/employees"),children:[i.jsx(Uo,{className:"h-4 w-4 mr-2"}),"Back to Employees"]})}),i.jsx(Eet,{employeeId:String(r.id),employeeName:String(r.fullName??r.full_name??"Employee"),contractType:String(r.contractType??r.contract_type??"")||void 0,basicSalary:Number(r.basicSalary??r.basic_salary??0),onClose:()=>e("/employees")})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx("p",{className:"text-muted-foreground",children:"Employee not found"}),i.jsx(H,{variant:"link",onClick:()=>e("/employees"),children:"Go back to employees"})]})}const Tet=[{band_order:1,min_amount:0,max_amount:5100,rate:0},{band_order:2,min_amount:5100,max_amount:7100,rate:.2},{band_order:3,min_amount:7100,max_amount:9200,rate:.3},{band_order:4,min_amount:9200,max_amount:null,rate:.37}],Cet=[{rate_type:"napsa",employee_rate:.05,employer_rate:.05,cap_amount:1342},{rate_type:"nhima",employee_rate:.01,employer_rate:.01,cap_amount:250},{rate_type:"pension",employee_rate:.05,employer_rate:.05,cap_amount:null},{rate_type:"wht_local",employee_rate:.15,employer_rate:0,cap_amount:null},{rate_type:"wht_nonresident",employee_rate:.2,employer_rate:0,cap_amount:null}],Ug=(t,e=0)=>{const n=Number(t);return Number.isFinite(n)?n:e},N6=t=>{if(t==null||t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null};function Pet(){const{user:t}=ct(),e=dn(),[n,r]=N.useState([]),[s,a]=N.useState([]),[o,l]=N.useState(!1),c=je({queryKey:["payroll-settings-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const S=await Ke.getPrimaryMembershipByUser(t.id);return(S==null?void 0:S.companyId)??null},enabled:!!t}),u=c.data??null,{data:d,isLoading:h}=je({queryKey:["paye-tax-bands",u],queryFn:async()=>{if(!u)return[];const S=ve(te,K.PAYE_TAX_BANDS);return(await $e(Ce(S,ge("companyId","==",u)))).docs.map(p=>{const A=p.data();return{id:p.id,band_order:Ug(A.bandOrder??A.band_order,0),min_amount:Ug(A.minAmount??A.min_amount,0),max_amount:N6(A.maxAmount??A.max_amount),rate:Ug(A.rate,0),is_active:!!(A.isActive??A.is_active??!0)}}).filter(p=>p.is_active).sort((p,A)=>p.band_order-A.band_order).map(({is_active:p,...A})=>A)},enabled:!!u}),{data:f,isLoading:m}=je({queryKey:["statutory-rates",u],queryFn:async()=>{if(!u)return[];const S=ve(te,K.PAYROLL_STATUTORY_RATES);return(await $e(Ce(S,ge("companyId","==",u)))).docs.map(p=>{const A=p.data();return{id:p.id,rate_type:String(A.rateType??A.rate_type??""),employee_rate:Ug(A.employeeRate??A.employee_rate,0),employer_rate:Ug(A.employerRate??A.employer_rate,0),cap_amount:N6(A.capAmount??A.cap_amount),is_active:!!(A.isActive??A.is_active??!0)}}).filter(p=>p.is_active).map(({is_active:p,...A})=>A)},enabled:!!u});N.useEffect(()=>{o||h||m||(d&&d.length>0?r(d):r(Tet),f&&f.length>0?a(f):a(Cet),l(!0))},[o,h,m,d,f]);const v=ot({mutationFn:async()=>{if(!u)throw new Error("No company context found");const S=ve(te,K.PAYE_TAX_BANDS),_=await $e(Ce(S,ge("companyId","==",u))),p=kl(te);_.docs.forEach(A=>{p.set(A.ref,{isActive:!1,updatedAt:ye()},{merge:!0})}),n.forEach((A,P)=>{const C=He(ve(te,K.PAYE_TAX_BANDS));p.set(C,{companyId:u,bandOrder:P+1,minAmount:Number(A.min_amount),maxAmount:A.max_amount===null?null:Number(A.max_amount),rate:Number(A.rate),isActive:!0,createdAt:ye(),updatedAt:ye()})}),await p.commit()},onSuccess:()=>{J.success("PAYE tax bands saved successfully"),e.invalidateQueries({queryKey:["paye-tax-bands",u]})},onError:S=>{J.error(S.message||"Failed to save tax bands")}}),g=ot({mutationFn:async()=>{if(!u)throw new Error("No company context found");const S=ve(te,K.PAYROLL_STATUTORY_RATES),_=await $e(Ce(S,ge("companyId","==",u))),p=kl(te);_.docs.forEach(A=>{p.set(A.ref,{isActive:!1,updatedAt:ye()},{merge:!0})}),s.forEach(A=>{const P=He(ve(te,K.PAYROLL_STATUTORY_RATES));p.set(P,{companyId:u,rateType:A.rate_type,employeeRate:Number(A.employee_rate),employerRate:Number(A.employer_rate),capAmount:A.cap_amount===null?null:Number(A.cap_amount),isActive:!0,createdAt:ye(),updatedAt:ye()})}),await p.commit()},onSuccess:()=>{J.success("Statutory rates saved successfully"),e.invalidateQueries({queryKey:["statutory-rates",u]})},onError:S=>{J.error(S.message||"Failed to save statutory rates")}}),y=()=>{const S=n[n.length-1];r([...n,{band_order:n.length+1,min_amount:(S==null?void 0:S.max_amount)||0,max_amount:null,rate:0}])},w=S=>{r(n.filter((_,p)=>p!==S))},b=(S,_,p)=>{const A=[...n];A[S]={...A[S],[_]:p},r(A)},E=(S,_,p)=>{const A=[...s];A[S]={...A[S],[_]:p},a(A)},T=S=>{switch(S){case"napsa":return"NAPSA";case"nhima":return"NHIMA";case"pension":return"Pension";case"wht_local":return"WHT (Local Consultant)";case"wht_nonresident":return"WHT (Non-Resident)";default:return S}},x=c.isLoading||h||m;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Payroll Settings"}),i.jsx("p",{className:"text-muted-foreground",children:"Configure PAYE tax bands and statutory rates"})]}),i.jsx(Jy,{className:"h-8 w-8 text-muted-foreground"})]}),i.jsxs(J1,{defaultValue:"paye",className:"space-y-4",children:[i.jsxs(lb,{children:[i.jsx(za,{value:"paye",children:"PAYE Tax Bands"}),i.jsx(za,{value:"statutory",children:"Statutory Rates"})]}),i.jsx(qa,{value:"paye",children:i.jsxs(Z,{children:[i.jsxs(ee,{children:[i.jsx(ne,{children:"PAYE Tax Bands (Monthly)"}),i.jsx(St,{children:"Configure the progressive tax bands for Pay As You Earn calculations."})]}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Band"}),i.jsx(U,{children:"Min Amount (ZMW)"}),i.jsx(U,{children:"Max Amount (ZMW)"}),i.jsx(U,{children:"Rate (%)"}),i.jsx(U,{className:"w-16"})]})}),i.jsx(Ht,{children:n.map((S,_)=>i.jsxs(_e,{children:[i.jsxs(B,{className:"font-medium",children:["Band ",_+1]}),i.jsx(B,{children:i.jsx(G,{type:"number",step:"0.01",value:S.min_amount,onChange:p=>b(_,"min_amount",Number(p.target.value)),className:"w-32"})}),i.jsx(B,{children:i.jsx(G,{type:"number",step:"0.01",value:S.max_amount??"",onChange:p=>b(_,"max_amount",p.target.value?Number(p.target.value):null),placeholder:"inf",className:"w-32"})}),i.jsx(B,{children:i.jsx(G,{type:"number",step:"0.01",value:S.rate*100,onChange:p=>b(_,"rate",Number(p.target.value)/100),className:"w-24"})}),i.jsx(B,{children:i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>w(_),disabled:n.length<=1,children:i.jsx(Ts,{className:"h-4 w-4 text-destructive"})})})]},_))})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(H,{variant:"outline",onClick:y,disabled:!u||x,children:[i.jsx(bn,{className:"h-4 w-4 mr-2"}),"Add Band"]}),i.jsxs(H,{onClick:()=>v.mutate(),disabled:v.isPending||!u||x,children:[i.jsx(Jd,{className:"h-4 w-4 mr-2"}),v.isPending?"Saving...":"Save Tax Bands"]})]})]})]})}),i.jsx(qa,{value:"statutory",children:i.jsxs(Z,{children:[i.jsxs(ee,{children:[i.jsx(ne,{children:"Statutory Contribution Rates"}),i.jsx(St,{children:"Configure NAPSA, NHIMA, Pension, and WHT rates."})]}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Contribution Type"}),i.jsx(U,{children:"Employee Rate (%)"}),i.jsx(U,{children:"Employer Rate (%)"}),i.jsx(U,{children:"Cap Amount (ZMW)"})]})}),i.jsx(Ht,{children:s.map((S,_)=>i.jsxs(_e,{children:[i.jsx(B,{className:"font-medium",children:T(S.rate_type)}),i.jsx(B,{children:i.jsx(G,{type:"number",step:"0.01",value:S.employee_rate*100,onChange:p=>E(_,"employee_rate",Number(p.target.value)/100),className:"w-24"})}),i.jsx(B,{children:i.jsx(G,{type:"number",step:"0.01",value:S.employer_rate*100,onChange:p=>E(_,"employer_rate",Number(p.target.value)/100),className:"w-24",disabled:S.rate_type.startsWith("wht")})}),i.jsx(B,{children:i.jsx(G,{type:"number",step:"0.01",value:S.cap_amount??"",onChange:p=>E(_,"cap_amount",p.target.value?Number(p.target.value):null),placeholder:"No cap",className:"w-32"})})]},S.rate_type))})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs(H,{onClick:()=>g.mutate(),disabled:g.isPending||!u||x,children:[i.jsx(Jd,{className:"h-4 w-4 mr-2"}),g.isPending?"Saving...":"Save Rates"]})})]})]})})]})]})}function S6({icon:t,title:e,description:n,actionLabel:r,onAction:s,className:a}){return i.jsxs("div",{className:pe("flex flex-col items-center justify-center py-12 px-4 text-center",a),children:[i.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-muted",children:t||i.jsx(goe,{className:"h-8 w-8 text-muted-foreground"})}),i.jsx("h3",{className:"text-lg font-semibold",children:e}),n&&i.jsx("p",{className:"mt-1 text-sm text-muted-foreground max-w-sm",children:n}),r&&s&&i.jsxs(H,{onClick:s,className:"mt-4",children:[i.jsx(bn,{className:"mr-2 h-4 w-4"}),r]})]})}const Iet={name:"",sku:"",description:"",type:"product",category:"",unit_of_measure:"Unit",selling_price:0,cost_price:0,track_inventory:!1,quantity_on_hand:0,reorder_point:0,is_taxable:!0,tax_rate:16,is_active:!0},wA=t=>{if(!t)return null;if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return null};function ket(){const{user:t}=ct(),[e,n]=N.useState("catalog"),[r,s]=N.useState(""),[a,o]=N.useState("all"),[l,c]=N.useState(!1),[u,d]=N.useState(!1),[h,f]=N.useState(null),[m,v]=N.useState(null),g=dn(),{data:y}=je({queryKey:["products-company",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const M=await Ke.getPrimaryMembershipByUser(t.id);return(M==null?void 0:M.companyId)??null},enabled:!!t}),{data:w,isLoading:b}=je({queryKey:["products",y],queryFn:async()=>y?(await $e(Ce(ve(te,K.PRODUCTS),ge("companyId","==",y)))).docs.map(V=>{const F=V.data();return{id:V.id,name:String(F.name??""),sku:F.sku??null,description:F.description??null,type:F.type??"product",category:F.category??null,unit_of_measure:F.unitOfMeasure??F.unit_of_measure??null,selling_price:Number(F.sellingPrice??F.selling_price??0),cost_price:Number(F.costPrice??F.cost_price??0),track_inventory:!!(F.trackInventory??F.track_inventory),quantity_on_hand:Number(F.quantityOnHand??F.quantity_on_hand??0),reorder_point:Number(F.reorderPoint??F.reorder_point??0),is_taxable:!!(F.isTaxable??F.is_taxable),tax_rate:Number(F.taxRate??F.tax_rate??16),is_active:F.isActive===void 0&&F.is_active===void 0?!0:!!(F.isActive??F.is_active),created_at:wA(F.createdAt??F.created_at)}}):[],enabled:!!y}),{data:E,isLoading:T}=je({queryKey:["priceLists",y],queryFn:async()=>y?(await $e(Ce(ve(te,K.PRICE_LISTS),ge("companyId","==",y)))).docs.map(V=>{const F=V.data();return{id:V.id,name:String(F.name??""),description:F.description??null,currency:String(F.currency??"ZMW"),is_default:!!(F.isDefault??F.is_default),is_active:F.isActive===void 0&&F.is_active===void 0?!0:!!(F.isActive??F.is_active),valid_from:wA(F.validFrom??F.valid_from),valid_to:wA(F.validTo??F.valid_to)}}):[],enabled:!!y}),x=ot({mutationFn:async M=>{if(!y)throw new Error("No company found");const V={companyId:y,name:M.name||"",sku:M.sku||null,description:M.description||null,type:M.type||"product",category:M.category||null,unitOfMeasure:M.unit_of_measure||"Unit",sellingPrice:Number(M.selling_price||0),costPrice:Number(M.cost_price||0),trackInventory:!!M.track_inventory,quantityOnHand:Number(M.quantity_on_hand||0),reorderPoint:Number(M.reorder_point||0),isTaxable:!!M.is_taxable,taxRate:Number(M.tax_rate||16),isActive:M.is_active===void 0?!0:!!M.is_active,updatedAt:ye()};M.id?await $o(He(te,K.PRODUCTS,M.id),V):await Nn(ve(te,K.PRODUCTS),{...V,createdAt:ye()})},onSuccess:()=>{g.invalidateQueries({queryKey:["products"]}),c(!1),f(null),J.success(h!=null&&h.id?"Product updated":"Product created")},onError:M=>{J.error("Failed to save product: "+M.message)}}),S=ot({mutationFn:async M=>{await Za(He(te,K.PRODUCTS,M))},onSuccess:()=>{g.invalidateQueries({queryKey:["products"]}),J.success("Product deleted")},onError:M=>{J.error("Failed to delete product: "+M.message)}}),_=ot({mutationFn:async M=>{if(!y)throw new Error("No company found");const V={companyId:y,name:M.name||"",description:M.description||null,currency:M.currency||"ZMW",isDefault:!!M.is_default,isActive:M.is_active===void 0?!0:!!M.is_active,validFrom:M.valid_from||null,validTo:M.valid_to||null,updatedAt:ye()};M.id?await $o(He(te,K.PRICE_LISTS,M.id),V):await Nn(ve(te,K.PRICE_LISTS),{...V,createdAt:ye()})},onSuccess:()=>{g.invalidateQueries({queryKey:["priceLists"]}),d(!1),v(null),J.success(m!=null&&m.id?"Price list updated":"Price list created")},onError:M=>{J.error("Failed to save price list: "+M.message)}}),p=ot({mutationFn:async M=>{await Za(He(te,K.PRICE_LISTS,M))},onSuccess:()=>{g.invalidateQueries({queryKey:["priceLists"]}),J.success("Price list deleted")},onError:M=>{J.error("Failed to delete price list: "+M.message)}}),A=M=>{f(M),c(!0)},P=()=>{f({...Iet}),c(!0)},C=M=>{v(M),d(!0)},I=()=>{v({name:"",description:"",currency:"ZMW",is_default:!1,is_active:!0}),d(!0)},R=(w==null?void 0:w.filter(M=>M.type==="product").length)||0,L=(w==null?void 0:w.filter(M=>M.type==="service").length)||0,z=(w==null?void 0:w.filter(M=>M.track_inventory&&M.quantity_on_hand<=M.reorder_point).length)||0,W=(w||[]).filter(M=>{const V=`${M.name} ${M.sku||""}`.toLowerCase(),F=!r||V.includes(r.toLowerCase()),Y=a==="all"||M.type===a;return F&&Y});return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Products & Services"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your product catalog, inventory, and pricing"})]})}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Total Products"}),i.jsx(Ji,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:R})})]}),i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Total Services"}),i.jsx(LL,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:L})})]}),i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Low Stock Items"}),i.jsx(noe,{className:"h-4 w-4 text-orange-500"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold text-orange-500",children:z})})]}),i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Price Lists"}),i.jsx(DL,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:(E==null?void 0:E.length)||0})})]})]}),i.jsxs(J1,{value:e,onValueChange:n,children:[i.jsxs(lb,{children:[i.jsx(za,{value:"catalog",children:"Product Catalog"}),i.jsx(za,{value:"pricing",children:"Price Lists"}),i.jsx(za,{value:"inventory",children:"Inventory"})]}),i.jsxs(qa,{value:"catalog",className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[i.jsxs("div",{className:"relative flex-1 max-w-sm",children:[i.jsx(fi,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{placeholder:"Search products...",value:r,onChange:M=>s(M.target.value),className:"pl-10"})]}),i.jsxs(kt,{value:a,onValueChange:o,children:[i.jsx(At,{className:"w-[150px]",children:i.jsx(Rt,{placeholder:"Filter by type"})}),i.jsxs(Tt,{children:[i.jsx(be,{value:"all",children:"All Types"}),i.jsx(be,{value:"product",children:"Products"}),i.jsx(be,{value:"service",children:"Services"})]})]})]}),i.jsxs(H,{onClick:P,children:[i.jsx(bn,{className:"h-4 w-4 mr-2"}),"Add Product/Service"]})]}),b?i.jsx(Gf,{message:"Loading products..."}):W.length?i.jsx(Z,{children:i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Name"}),i.jsx(U,{children:"SKU"}),i.jsx(U,{children:"Type"}),i.jsx(U,{children:"Category"}),i.jsx(U,{className:"text-right",children:"Selling Price"}),i.jsx(U,{className:"text-right",children:"Cost Price"}),i.jsx(U,{className:"text-right",children:"Stock"}),i.jsx(U,{children:"Status"}),i.jsx(U,{className:"text-right",children:"Actions"})]})}),i.jsx(Ht,{children:W.map(M=>i.jsxs(_e,{children:[i.jsx(B,{className:"font-medium",children:M.name}),i.jsx(B,{children:M.sku||"-"}),i.jsx(B,{children:i.jsxs(Xe,{variant:M.type==="product"?"default":"secondary",children:[M.type==="product"?i.jsx(Ji,{className:"h-3 w-3 mr-1"}):i.jsx(LL,{className:"h-3 w-3 mr-1"}),M.type]})}),i.jsx(B,{children:M.category||"-"}),i.jsxs(B,{className:"text-right",children:["K",M.selling_price.toLocaleString()]}),i.jsxs(B,{className:"text-right",children:["K",M.cost_price.toLocaleString()]}),i.jsx(B,{className:"text-right",children:M.track_inventory?i.jsx("span",{className:M.quantity_on_hand<=M.reorder_point?"text-orange-500 font-medium":"",children:M.quantity_on_hand}):"-"}),i.jsx(B,{children:i.jsx(Xe,{variant:M.is_active?"default":"secondary",children:M.is_active?"Active":"Inactive"})}),i.jsx(B,{className:"text-right",children:i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>A(M),children:i.jsx(ML,{className:"h-4 w-4"})}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>S.mutate(M.id),children:i.jsx(Ts,{className:"h-4 w-4 text-destructive"})})]})})]},M.id))})]})}):i.jsx(S6,{icon:i.jsx(Ji,{className:"h-8 w-8 text-muted-foreground"}),title:"No products or services",description:"Add your first product or service to get started",actionLabel:"Add Product/Service",onAction:P})]}),i.jsxs(qa,{value:"pricing",className:"space-y-4",children:[i.jsx("div",{className:"flex items-center justify-end",children:i.jsxs(H,{onClick:I,children:[i.jsx(bn,{className:"h-4 w-4 mr-2"}),"Create Price List"]})}),T?i.jsx(Gf,{message:"Loading price lists..."}):E!=null&&E.length?i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:E.map(M=>i.jsxs(Z,{children:[i.jsxs(ee,{className:"flex flex-row items-start justify-between space-y-0",children:[i.jsxs("div",{children:[i.jsx(ne,{className:"text-lg",children:M.name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:M.description||"No description"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[M.is_default&&i.jsx(Xe,{variant:"secondary",children:"Default"}),i.jsx(Xe,{variant:M.is_active?"default":"secondary",children:M.is_active?"Active":"Inactive"})]})]}),i.jsxs(re,{children:[i.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground mb-4",children:[i.jsxs("span",{children:["Currency: ",M.currency]}),M.valid_from&&i.jsxs("span",{children:["Valid: ",new Date(M.valid_from).toLocaleDateString(),M.valid_to&&` - ${new Date(M.valid_to).toLocaleDateString()}`]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(H,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>C(M),children:[i.jsx(ML,{className:"h-4 w-4 mr-2"}),"Edit"]}),i.jsx(H,{variant:"outline",size:"sm",onClick:()=>p.mutate(M.id),children:i.jsx(Ts,{className:"h-4 w-4 text-destructive"})})]})]})]},M.id))}):i.jsx(S6,{icon:i.jsx(DL,{className:"h-8 w-8 text-muted-foreground"}),title:"No price lists",description:"Create price lists to offer different pricing tiers",actionLabel:"Create Price List",onAction:I})]}),i.jsx(qa,{value:"inventory",className:"space-y-4",children:i.jsxs(Z,{children:[i.jsx(ee,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(la,{className:"h-5 w-5"}),"Inventory Tracking"]})}),i.jsx(re,{children:b?i.jsx(Gf,{message:"Loading inventory..."}):i.jsxs(qt,{children:[i.jsx(Wt,{children:i.jsxs(_e,{children:[i.jsx(U,{children:"Product"}),i.jsx(U,{children:"SKU"}),i.jsx(U,{className:"text-right",children:"On Hand"}),i.jsx(U,{className:"text-right",children:"Reorder Point"}),i.jsx(U,{className:"text-right",children:"Unit Cost"}),i.jsx(U,{className:"text-right",children:"Total Value"}),i.jsx(U,{children:"Status"})]})}),i.jsxs(Ht,{children:[w==null?void 0:w.filter(M=>M.track_inventory).map(M=>{const V=M.quantity_on_hand<=M.reorder_point,F=M.quantity_on_hand*M.cost_price;return i.jsxs(_e,{children:[i.jsx(B,{className:"font-medium",children:M.name}),i.jsx(B,{children:M.sku||"-"}),i.jsx(B,{className:"text-right",children:i.jsx("span",{className:V?"text-orange-500 font-medium":"",children:M.quantity_on_hand})}),i.jsx(B,{className:"text-right",children:M.reorder_point}),i.jsxs(B,{className:"text-right",children:["K",M.cost_price.toLocaleString()]}),i.jsxs(B,{className:"text-right font-medium",children:["K",F.toLocaleString()]}),i.jsx(B,{children:i.jsx(Xe,{variant:V?"destructive":"default",className:V?"bg-orange-500":"",children:V?"Low Stock":"In Stock"})})]},M.id)}),!(w!=null&&w.filter(M=>M.track_inventory).length)&&i.jsx(_e,{children:i.jsx(B,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No products with inventory tracking enabled"})})]})]})})]})})]}),i.jsx(rr,{open:l,onOpenChange:c,children:i.jsxs(Wn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsx(Hn,{children:i.jsxs(Kn,{children:[h!=null&&h.id?"Edit":"New"," Product/Service"]})}),h&&i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"name",children:"Name *"}),i.jsx(G,{id:"name",value:h.name||"",onChange:M=>f({...h,name:M.target.value}),placeholder:"Product name"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"sku",children:"SKU"}),i.jsx(G,{id:"sku",value:h.sku||"",onChange:M=>f({...h,sku:M.target.value}),placeholder:"Stock keeping unit"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"type",children:"Type"}),i.jsxs(kt,{value:h.type,onValueChange:M=>f({...h,type:M}),children:[i.jsx(At,{children:i.jsx(Rt,{})}),i.jsxs(Tt,{children:[i.jsx(be,{value:"product",children:"Product"}),i.jsx(be,{value:"service",children:"Service"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"category",children:"Category"}),i.jsx(G,{id:"category",value:h.category||"",onChange:M=>f({...h,category:M.target.value}),placeholder:"Category"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"description",children:"Description"}),i.jsx(hr,{id:"description",value:h.description||"",onChange:M=>f({...h,description:M.target.value}),placeholder:"Product description",rows:3})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"selling_price",children:"Selling Price (K)"}),i.jsx(G,{id:"selling_price",type:"number",value:h.selling_price||0,onChange:M=>f({...h,selling_price:parseFloat(M.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"cost_price",children:"Cost Price (K)"}),i.jsx(G,{id:"cost_price",type:"number",value:h.cost_price||0,onChange:M=>f({...h,cost_price:parseFloat(M.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"unit_of_measure",children:"Unit of Measure"}),i.jsx(G,{id:"unit_of_measure",value:h.unit_of_measure||"Unit",onChange:M=>f({...h,unit_of_measure:M.target.value})})]})]}),h.type==="product"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(is,{id:"track_inventory",checked:h.track_inventory||!1,onCheckedChange:M=>f({...h,track_inventory:M})}),i.jsx(X,{htmlFor:"track_inventory",children:"Track Inventory"})]}),h.track_inventory&&i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"quantity_on_hand",children:"Quantity on Hand"}),i.jsx(G,{id:"quantity_on_hand",type:"number",value:h.quantity_on_hand||0,onChange:M=>f({...h,quantity_on_hand:parseFloat(M.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"reorder_point",children:"Reorder Point"}),i.jsx(G,{id:"reorder_point",type:"number",value:h.reorder_point||0,onChange:M=>f({...h,reorder_point:parseFloat(M.target.value)||0})})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(is,{id:"is_taxable",checked:h.is_taxable||!1,onCheckedChange:M=>f({...h,is_taxable:M})}),i.jsx(X,{htmlFor:"is_taxable",children:"Taxable (VAT)"})]}),h.is_taxable&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"tax_rate",children:"Tax Rate (%)"}),i.jsx(G,{id:"tax_rate",type:"number",value:h.tax_rate||16,onChange:M=>f({...h,tax_rate:parseFloat(M.target.value)||16})})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(is,{id:"is_active",checked:h.is_active||!1,onCheckedChange:M=>f({...h,is_active:M})}),i.jsx(X,{htmlFor:"is_active",children:"Active"})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(H,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),i.jsx(H,{onClick:()=>x.mutate(h),disabled:!h.name||x.isPending,children:x.isPending?"Saving...":"Save"})]})]})]})}),i.jsx(rr,{open:u,onOpenChange:d,children:i.jsxs(Wn,{children:[i.jsx(Hn,{children:i.jsxs(Kn,{children:[m!=null&&m.id?"Edit":"New"," Price List"]})}),m&&i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"pl_name",children:"Name *"}),i.jsx(G,{id:"pl_name",value:m.name||"",onChange:M=>v({...m,name:M.target.value}),placeholder:"Price list name"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"pl_description",children:"Description"}),i.jsx(hr,{id:"pl_description",value:m.description||"",onChange:M=>v({...m,description:M.target.value}),placeholder:"Description",rows:2})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"pl_currency",children:"Currency"}),i.jsxs(kt,{value:m.currency||"ZMW",onValueChange:M=>v({...m,currency:M}),children:[i.jsx(At,{children:i.jsx(Rt,{})}),i.jsxs(Tt,{children:[i.jsx(be,{value:"ZMW",children:"ZMW"}),i.jsx(be,{value:"USD",children:"USD"}),i.jsx(be,{value:"EUR",children:"EUR"}),i.jsx(be,{value:"GBP",children:"GBP"})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[i.jsx(is,{id:"pl_is_default",checked:m.is_default||!1,onCheckedChange:M=>v({...m,is_default:M})}),i.jsx(X,{htmlFor:"pl_is_default",children:"Default Price List"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"pl_valid_from",children:"Valid From"}),i.jsx(G,{id:"pl_valid_from",type:"date",value:m.valid_from||"",onChange:M=>v({...m,valid_from:M.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{htmlFor:"pl_valid_to",children:"Valid To"}),i.jsx(G,{id:"pl_valid_to",type:"date",value:m.valid_to||"",onChange:M=>v({...m,valid_to:M.target.value})})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(is,{id:"pl_is_active",checked:m.is_active||!1,onCheckedChange:M=>v({...m,is_active:M})}),i.jsx(X,{htmlFor:"pl_is_active",children:"Active"})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(H,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),i.jsx(H,{onClick:()=>_.mutate(m),disabled:!m.name||_.isPending,children:_.isPending?"Saving...":"Save"})]})]})]})})]})}const Ret=N.lazy(()=>bx(()=>import("./FinancialReports-CREA72py.js"),[])),Oet=N.lazy(()=>bx(()=>import("./PayrollReports-Be7iEfok.js"),[])),Met=N.lazy(()=>bx(()=>import("./AuditLogs-e79ADMrU.js"),[])),Det=N.lazy(()=>bx(()=>import("./JournalEntries-Bjl2lSqN.js"),__vite__mapDeps([0,1]))),Let=N.lazy(()=>bx(()=>import("./ChartOfAccounts-CNlU7eBI.js"),__vite__mapDeps([2,1]))),$et=new Hue({defaultOptions:{queries:{staleTime:1e3*60*5,retry:2,refetchOnWindowFocus:!1},mutations:{retry:1}}}),zg=i.jsx("div",{className:"py-10",children:i.jsx(Gf,{message:"Loading page..."})}),Fet=()=>i.jsx(A0e,{children:i.jsx(Xue,{client:$et,children:i.jsxs(bq,{children:[i.jsx(dle,{}),i.jsx(zle,{}),i.jsx(ihe,{basename:"/",children:i.jsx(S0e,{children:i.jsxs(Xde,{children:[i.jsx(yt,{path:"/",element:i.jsx(fet,{})}),i.jsx(yt,{path:"/auth",element:i.jsx(UCe,{})}),i.jsx(yt,{path:"/setup",element:i.jsx(Nt,{children:i.jsx(det,{})})}),i.jsx(yt,{path:"/dashboard",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(jZe,{})})})}),i.jsx(yt,{path:"/invoices",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(SZe,{})})})})}),i.jsx(yt,{path:"/invoices/new",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(AZe,{})})})})}),i.jsx(yt,{path:"/customers",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(CJe,{})})})})}),i.jsx(yt,{path:"/estimates",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(DJe,{})})})})}),i.jsx(yt,{path:"/quotations/new",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(RJe,{})})})})}),i.jsx(yt,{path:"/sales-orders",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(kJe,{})})})})}),i.jsx(yt,{path:"/vendors",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx($Je,{})})})})}),i.jsx(yt,{path:"/bills",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(FJe,{})})})})}),i.jsx(yt,{path:"/purchase-orders",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(VJe,{})})})})}),i.jsx(yt,{path:"/expenses",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(qJe,{})})})})}),i.jsx(yt,{path:"/products",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(ket,{})})})})}),i.jsx(yt,{path:"/inventory",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(HJe,{})})})})}),i.jsx(yt,{path:"/bank-accounts",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(KJe,{})})})})}),i.jsx(yt,{path:"/reconciliation",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(ZJe,{})})})})}),i.jsx(yt,{path:"/employees",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(TZe,{})})})})}),i.jsx(yt,{path:"/employees/new",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(LZe,{})})})})}),i.jsx(yt,{path:"/employees/:id/edit",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(VZe,{})})})})}),i.jsx(yt,{path:"/employees/bulk-upload",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(UZe,{})})})})}),i.jsx(yt,{path:"/employees/:id/payroll-setup",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(Aet,{})})})})}),i.jsx(yt,{path:"/payroll",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(WZe,{})})})})}),i.jsx(yt,{path:"/payroll/new",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(YZe,{})})})})}),i.jsx(yt,{path:"/payroll/:id",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(cJe,{})})})})}),i.jsx(yt,{path:"/payroll/:id/approve",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(dJe,{})})})})}),i.jsx(yt,{path:"/payroll/:runId/payslip/:employeeId",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(uJe,{})})})})}),i.jsx(yt,{path:"/advances",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(fJe,{})})})})}),i.jsx(yt,{path:"/time-tracking",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(JJe,{})})})})}),i.jsx(yt,{path:"/projects",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(tet,{})})})})}),i.jsx(yt,{path:"/projects/:projectId/expenses",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(ret,{})})})})}),i.jsx(yt,{path:"/donors",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(met,{})})})})}),i.jsx(yt,{path:"/accounts-payable",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(get,{})})})})}),i.jsx(yt,{path:"/accounts-receivable",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(vet,{})})})})}),i.jsx(yt,{path:"/company-settings",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{allowedRoles:["super_admin","admin"],children:i.jsx(b6,{})})})})}),i.jsx(yt,{path:"/reports",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(N.Suspense,{fallback:zg,children:i.jsx(Ret,{})})})})})}),i.jsx(yt,{path:"/payroll-reports",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(N.Suspense,{fallback:zg,children:i.jsx(Oet,{})})})})})}),i.jsx(yt,{path:"/zra-compliance",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(gJe,{})})})})}),i.jsx(yt,{path:"/tax-calculator",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(yJe,{})})})})}),i.jsx(yt,{path:"/payroll-settings",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{allowedRoles:["super_admin","admin"],children:i.jsx(Pet,{})})})})}),i.jsx(yt,{path:"/settings",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(b6,{})})})})}),i.jsx(yt,{path:"/users",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{allowedRoles:["super_admin","admin"],children:i.jsx(eet,{})})})})}),i.jsx(yt,{path:"/audit-logs",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{allowedRoles:["super_admin","admin","auditor"],children:i.jsx(N.Suspense,{fallback:zg,children:i.jsx(Met,{})})})})})}),i.jsx(yt,{path:"/fixed-assets",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(xet,{})})})})}),i.jsx(yt,{path:"/asset-depreciation",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(wet,{})})})})}),i.jsx(yt,{path:"/financial-periods",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{allowedRoles:["super_admin","admin","accountant"],children:i.jsx(Net,{})})})})}),i.jsx(yt,{path:"/journal-entries",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(N.Suspense,{fallback:zg,children:i.jsx(Det,{})})})})})}),i.jsx(yt,{path:"/chart-of-accounts",element:i.jsx(Nt,{children:i.jsx(Et,{children:i.jsx(Pt,{children:i.jsx(N.Suspense,{fallback:zg,children:i.jsx(Let,{})})})})})}),i.jsx(yt,{path:"*",element:i.jsx(WJe,{})})]})})})]})})});Y9(document.getElementById("root")).render(i.jsx(Fet,{}));export{Xe as $,vt as A,H as B,Ci as C,Es as D,S6 as E,cr as F,ve as G,$e as H,G as I,Ce as J,ge as K,Gf as L,kh as M,le as N,K as O,te as P,ni as Q,k8 as R,eh as S,J1 as T,fi as U,kt as V,At as W,Rt as X,Tt as Y,be as Z,Pi as _,pe as a,St as a0,Rn as a1,moe as a2,rr as a3,Wn as a4,Hn as a5,Kn as a6,dn as a7,ot as a8,Zr as a9,bn as aa,hr as ab,eS as ac,S8 as ad,Soe as ae,Ts as af,J as ag,Nn as ah,ye as ai,dr as aj,He as ak,Za as al,kl as am,je as b,Ie as c,Ke as d,Qj as e,Z as f,ee as g,ne as h,re as i,i as j,X as k,lb as l,za as m,la as n,N8 as o,qa as p,qt as q,N as r,Wt as s,_e as t,ct as u,U as v,Ht as w,B as x,iNe as y,Gn as z};
