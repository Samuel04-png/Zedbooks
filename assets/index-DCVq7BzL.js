var ise=Object.defineProperty;var LD=t=>{throw TypeError(t)};var ase=(t,e,n)=>e in t?ise(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var $D=(t,e,n)=>ase(t,typeof e!="symbol"?e+"":e,n),I1=(t,e,n)=>e.has(t)||LD("Cannot "+n);var X=(t,e,n)=>(I1(t,e,"read from private field"),n?n.call(t):e.get(t)),gt=(t,e,n)=>e.has(t)?LD("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),We=(t,e,n,r)=>(I1(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Wt=(t,e,n)=>(I1(t,e,"access private method"),n);var Mb=(t,e,n,r)=>({set _(s){We(t,e,s,n)},get _(){return X(t,e,r)}});function ose(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var Db=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mz={exports:{}},Gj={},pz={exports:{}},Gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cx=Symbol.for("react.element"),lse=Symbol.for("react.portal"),cse=Symbol.for("react.fragment"),use=Symbol.for("react.strict_mode"),dse=Symbol.for("react.profiler"),hse=Symbol.for("react.provider"),fse=Symbol.for("react.context"),mse=Symbol.for("react.forward_ref"),pse=Symbol.for("react.suspense"),gse=Symbol.for("react.memo"),yse=Symbol.for("react.lazy"),FD=Symbol.iterator;function vse(t){return t===null||typeof t!="object"?null:(t=FD&&t[FD]||t["@@iterator"],typeof t=="function"?t:null)}var gz={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yz=Object.assign,vz={};function Ip(t,e,n){this.props=t,this.context=e,this.refs=vz,this.updater=n||gz}Ip.prototype.isReactComponent={};Ip.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ip.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function xz(){}xz.prototype=Ip.prototype;function XI(t,e,n){this.props=t,this.context=e,this.refs=vz,this.updater=n||gz}var ZI=XI.prototype=new xz;ZI.constructor=XI;yz(ZI,Ip.prototype);ZI.isPureReactComponent=!0;var VD=Array.isArray,bz=Object.prototype.hasOwnProperty,JI={current:null},wz={key:!0,ref:!0,__self:!0,__source:!0};function _z(t,e,n){var r,s={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)bz.call(e,r)&&!wz.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Cx,type:t,key:a,ref:o,props:s,_owner:JI.current}}function xse(t,e){return{$$typeof:Cx,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ek(t){return typeof t=="object"&&t!==null&&t.$$typeof===Cx}function bse(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var BD=/\/+/g;function k1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bse(""+t.key):e.toString(36)}function D0(t,e,n,r,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Cx:case lse:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+k1(o,0):r,VD(s)?(n="",t!=null&&(n=t.replace(BD,"$&/")+"/"),D0(s,e,n,"",function(u){return u})):s!=null&&(ek(s)&&(s=xse(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(BD,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",VD(t))for(var l=0;l<t.length;l++){a=t[l];var c=r+k1(a,l);o+=D0(a,e,n,c,s)}else if(c=vse(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=r+k1(a,l++),o+=D0(a,e,n,c,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Lb(t,e,n){if(t==null)return t;var r=[],s=0;return D0(t,r,"","",function(a){return e.call(n,a,s++)}),r}function wse(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xs={current:null},L0={transition:null},_se={ReactCurrentDispatcher:Xs,ReactCurrentBatchConfig:L0,ReactCurrentOwner:JI};function jz(){throw Error("act(...) is not supported in production builds of React.")}Gt.Children={map:Lb,forEach:function(t,e,n){Lb(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Lb(t,function(){e++}),e},toArray:function(t){return Lb(t,function(e){return e})||[]},only:function(t){if(!ek(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Gt.Component=Ip;Gt.Fragment=cse;Gt.Profiler=dse;Gt.PureComponent=XI;Gt.StrictMode=use;Gt.Suspense=pse;Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_se;Gt.act=jz;Gt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=yz({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=JI.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)bz.call(e,c)&&!wz.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Cx,type:t.type,key:s,ref:a,props:r,_owner:o}};Gt.createContext=function(t){return t={$$typeof:fse,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:hse,_context:t},t.Consumer=t};Gt.createElement=_z;Gt.createFactory=function(t){var e=_z.bind(null,t);return e.type=t,e};Gt.createRef=function(){return{current:null}};Gt.forwardRef=function(t){return{$$typeof:mse,render:t}};Gt.isValidElement=ek;Gt.lazy=function(t){return{$$typeof:yse,_payload:{_status:-1,_result:t},_init:wse}};Gt.memo=function(t,e){return{$$typeof:gse,type:t,compare:e===void 0?null:e}};Gt.startTransition=function(t){var e=L0.transition;L0.transition={};try{t()}finally{L0.transition=e}};Gt.unstable_act=jz;Gt.useCallback=function(t,e){return Xs.current.useCallback(t,e)};Gt.useContext=function(t){return Xs.current.useContext(t)};Gt.useDebugValue=function(){};Gt.useDeferredValue=function(t){return Xs.current.useDeferredValue(t)};Gt.useEffect=function(t,e){return Xs.current.useEffect(t,e)};Gt.useId=function(){return Xs.current.useId()};Gt.useImperativeHandle=function(t,e,n){return Xs.current.useImperativeHandle(t,e,n)};Gt.useInsertionEffect=function(t,e){return Xs.current.useInsertionEffect(t,e)};Gt.useLayoutEffect=function(t,e){return Xs.current.useLayoutEffect(t,e)};Gt.useMemo=function(t,e){return Xs.current.useMemo(t,e)};Gt.useReducer=function(t,e,n){return Xs.current.useReducer(t,e,n)};Gt.useRef=function(t){return Xs.current.useRef(t)};Gt.useState=function(t){return Xs.current.useState(t)};Gt.useSyncExternalStore=function(t,e,n){return Xs.current.useSyncExternalStore(t,e,n)};Gt.useTransition=function(){return Xs.current.useTransition()};Gt.version="18.3.1";pz.exports=Gt;var N=pz.exports;const F=vn(N),tk=ose({__proto__:null,default:F},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jse=N,Nse=Symbol.for("react.element"),Sse=Symbol.for("react.fragment"),Ese=Object.prototype.hasOwnProperty,Ase=jse.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Tse={key:!0,ref:!0,__self:!0,__source:!0};function Nz(t,e,n){var r,s={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Ese.call(e,r)&&!Tse.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Nse,type:t,key:a,ref:o,props:s,_owner:Ase.current}}Gj.Fragment=Sse;Gj.jsx=Nz;Gj.jsxs=Nz;mz.exports=Gj;var i=mz.exports,Sz={exports:{}},Bi={},Ez={exports:{}},Az={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,D){var K=$.length;$.push(D);e:for(;0<K;){var ie=K-1>>>1,ae=$[ie];if(0<s(ae,D))$[ie]=D,$[K]=ae,K=ie;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var D=$[0],K=$.pop();if(K!==D){$[0]=K;e:for(var ie=0,ae=$.length,_e=ae>>>1;ie<_e;){var Le=2*(ie+1)-1,ct=$[Le],Nt=Le+1,Ne=$[Nt];if(0>s(ct,K))Nt<ae&&0>s(Ne,ct)?($[ie]=Ne,$[Nt]=K,ie=Nt):($[ie]=ct,$[Le]=K,ie=Le);else if(Nt<ae&&0>s(Ne,K))$[ie]=Ne,$[Nt]=K,ie=Nt;else break e}}return D}function s($,D){var K=$.sortIndex-D.sortIndex;return K!==0?K:$.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,v=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S($){for(var D=n(u);D!==null;){if(D.callback===null)r(u);else if(D.startTime<=$)r(u),D.sortIndex=D.expirationTime,e(c,D);else break;D=n(u)}}function T($){if(g=!1,S($),!v)if(n(c)!==null)v=!0,z(_);else{var D=n(u);D!==null&&O(T,D.startTime-$)}}function _($,D){v=!1,g&&(g=!1,b(p),p=-1),m=!0;var K=f;try{for(S(D),h=n(c);h!==null&&(!(h.expirationTime>D)||$&&!P());){var ie=h.callback;if(typeof ie=="function"){h.callback=null,f=h.priorityLevel;var ae=ie(h.expirationTime<=D);D=t.unstable_now(),typeof ae=="function"?h.callback=ae:h===n(c)&&r(c),S(D)}else r(c);h=n(c)}if(h!==null)var _e=!0;else{var Le=n(u);Le!==null&&O(T,Le.startTime-D),_e=!1}return _e}finally{h=null,f=K,m=!1}}var C=!1,E=null,p=-1,w=5,A=-1;function P(){return!(t.unstable_now()-A<w)}function I(){if(E!==null){var $=t.unstable_now();A=$;var D=!0;try{D=E(!0,$)}finally{D?k():(C=!1,E=null)}}else C=!1}var k;if(typeof x=="function")k=function(){x(I)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,U=L.port2;L.port1.onmessage=I,k=function(){U.postMessage(null)}}else k=function(){y(I,0)};function z($){E=$,C||(C=!0,k())}function O($,D){p=y(function(){$(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,z(_))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function($){switch(f){case 1:case 2:case 3:var D=3;break;default:D=f}var K=f;f=D;try{return $()}finally{f=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,D){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var K=f;f=$;try{return D()}finally{f=K}},t.unstable_scheduleCallback=function($,D,K){var ie=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ie+K:ie):K=ie,$){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=K+ae,$={id:d++,callback:D,priorityLevel:$,startTime:K,expirationTime:ae,sortIndex:-1},K>ie?($.sortIndex=K,e(u,$),n(c)===null&&$===n(u)&&(g?(b(p),p=-1):g=!0,O(T,K-ie))):($.sortIndex=ae,e(c,$),v||m||(v=!0,z(_))),$},t.unstable_shouldYield=P,t.unstable_wrapCallback=function($){var D=f;return function(){var K=f;f=D;try{return $.apply(this,arguments)}finally{f=K}}}})(Az);Ez.exports=Az;var Cse=Ez.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pse=N,Fi=Cse;function Ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Tz=new Set,Yy={};function Vh(t,e){Im(t,e),Im(t+"Capture",e)}function Im(t,e){for(Yy[t]=e,t=0;t<e.length;t++)Tz.add(e[t])}var Sl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),BA=Object.prototype.hasOwnProperty,Ise=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,UD={},zD={};function kse(t){return BA.call(zD,t)?!0:BA.call(UD,t)?!1:Ise.test(t)?zD[t]=!0:(UD[t]=!0,!1)}function Rse(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Ose(t,e,n,r){if(e===null||typeof e>"u"||Rse(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zs(t,e,n,r,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var fs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){fs[t]=new Zs(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];fs[e]=new Zs(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){fs[t]=new Zs(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){fs[t]=new Zs(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){fs[t]=new Zs(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){fs[t]=new Zs(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){fs[t]=new Zs(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){fs[t]=new Zs(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){fs[t]=new Zs(t,5,!1,t.toLowerCase(),null,!1,!1)});var nk=/[\-:]([a-z])/g;function rk(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(nk,rk);fs[e]=new Zs(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(nk,rk);fs[e]=new Zs(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(nk,rk);fs[e]=new Zs(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){fs[t]=new Zs(t,1,!1,t.toLowerCase(),null,!1,!1)});fs.xlinkHref=new Zs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){fs[t]=new Zs(t,1,!1,t.toLowerCase(),null,!0,!0)});function sk(t,e,n,r){var s=fs.hasOwnProperty(e)?fs[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ose(e,n,s,r)&&(n=null),r||s===null?kse(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Hl=Pse.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$b=Symbol.for("react.element"),Af=Symbol.for("react.portal"),Tf=Symbol.for("react.fragment"),ik=Symbol.for("react.strict_mode"),UA=Symbol.for("react.profiler"),Cz=Symbol.for("react.provider"),Pz=Symbol.for("react.context"),ak=Symbol.for("react.forward_ref"),zA=Symbol.for("react.suspense"),qA=Symbol.for("react.suspense_list"),ok=Symbol.for("react.memo"),wc=Symbol.for("react.lazy"),Iz=Symbol.for("react.offscreen"),qD=Symbol.iterator;function Ag(t){return t===null||typeof t!="object"?null:(t=qD&&t[qD]||t["@@iterator"],typeof t=="function"?t:null)}var rr=Object.assign,R1;function ry(t){if(R1===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);R1=e&&e[1]||""}return`
`+R1+t}var O1=!1;function M1(t,e){if(!t||O1)return"";O1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=r.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{O1=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ry(t):""}function Mse(t){switch(t.tag){case 5:return ry(t.type);case 16:return ry("Lazy");case 13:return ry("Suspense");case 19:return ry("SuspenseList");case 0:case 2:case 15:return t=M1(t.type,!1),t;case 11:return t=M1(t.type.render,!1),t;case 1:return t=M1(t.type,!0),t;default:return""}}function WA(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Tf:return"Fragment";case Af:return"Portal";case UA:return"Profiler";case ik:return"StrictMode";case zA:return"Suspense";case qA:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Pz:return(t.displayName||"Context")+".Consumer";case Cz:return(t._context.displayName||"Context")+".Provider";case ak:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ok:return e=t.displayName||null,e!==null?e:WA(t.type)||"Memo";case wc:e=t._payload,t=t._init;try{return WA(t(e))}catch{}}return null}function Dse(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return WA(e);case 8:return e===ik?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function gu(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kz(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Lse(t){var e=kz(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fb(t){t._valueTracker||(t._valueTracker=Lse(t))}function Rz(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=kz(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function vw(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function HA(t,e){var n=e.checked;return rr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function WD(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=gu(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Oz(t,e){e=e.checked,e!=null&&sk(t,"checked",e,!1)}function KA(t,e){Oz(t,e);var n=gu(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?GA(t,e.type,n):e.hasOwnProperty("defaultValue")&&GA(t,e.type,gu(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function HD(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function GA(t,e,n){(e!=="number"||vw(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var sy=Array.isArray;function Qf(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+gu(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function YA(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ae(91));return rr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function KD(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ae(92));if(sy(n)){if(1<n.length)throw Error(Ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:gu(n)}}function Mz(t,e){var n=gu(e.value),r=gu(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function GD(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Dz(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function QA(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Dz(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vb,Lz=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Vb=Vb||document.createElement("div"),Vb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vb.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qy(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var by={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$se=["Webkit","ms","Moz","O"];Object.keys(by).forEach(function(t){$se.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),by[e]=by[t]})});function $z(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||by.hasOwnProperty(t)&&by[t]?(""+e).trim():e+"px"}function Fz(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=$z(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Fse=rr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function XA(t,e){if(e){if(Fse[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ae(62))}}function ZA(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var JA=null;function lk(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var eT=null,Xf=null,Zf=null;function YD(t){if(t=kx(t)){if(typeof eT!="function")throw Error(Ae(280));var e=t.stateNode;e&&(e=Jj(e),eT(t.stateNode,t.type,e))}}function Vz(t){Xf?Zf?Zf.push(t):Zf=[t]:Xf=t}function Bz(){if(Xf){var t=Xf,e=Zf;if(Zf=Xf=null,YD(t),e)for(t=0;t<e.length;t++)YD(e[t])}}function Uz(t,e){return t(e)}function zz(){}var D1=!1;function qz(t,e,n){if(D1)return t(e,n);D1=!0;try{return Uz(t,e,n)}finally{D1=!1,(Xf!==null||Zf!==null)&&(zz(),Bz())}}function Xy(t,e){var n=t.stateNode;if(n===null)return null;var r=Jj(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ae(231,e,typeof n));return n}var tT=!1;if(Sl)try{var Tg={};Object.defineProperty(Tg,"passive",{get:function(){tT=!0}}),window.addEventListener("test",Tg,Tg),window.removeEventListener("test",Tg,Tg)}catch{tT=!1}function Vse(t,e,n,r,s,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var wy=!1,xw=null,bw=!1,nT=null,Bse={onError:function(t){wy=!0,xw=t}};function Use(t,e,n,r,s,a,o,l,c){wy=!1,xw=null,Vse.apply(Bse,arguments)}function zse(t,e,n,r,s,a,o,l,c){if(Use.apply(this,arguments),wy){if(wy){var u=xw;wy=!1,xw=null}else throw Error(Ae(198));bw||(bw=!0,nT=u)}}function Bh(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Wz(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function QD(t){if(Bh(t)!==t)throw Error(Ae(188))}function qse(t){var e=t.alternate;if(!e){if(e=Bh(t),e===null)throw Error(Ae(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return QD(s),t;if(a===r)return QD(s),e;a=a.sibling}throw Error(Ae(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(Ae(189))}}if(n.alternate!==r)throw Error(Ae(190))}if(n.tag!==3)throw Error(Ae(188));return n.stateNode.current===n?t:e}function Hz(t){return t=qse(t),t!==null?Kz(t):null}function Kz(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Kz(t);if(e!==null)return e;t=t.sibling}return null}var Gz=Fi.unstable_scheduleCallback,XD=Fi.unstable_cancelCallback,Wse=Fi.unstable_shouldYield,Hse=Fi.unstable_requestPaint,vr=Fi.unstable_now,Kse=Fi.unstable_getCurrentPriorityLevel,ck=Fi.unstable_ImmediatePriority,Yz=Fi.unstable_UserBlockingPriority,ww=Fi.unstable_NormalPriority,Gse=Fi.unstable_LowPriority,Qz=Fi.unstable_IdlePriority,Yj=null,Eo=null;function Yse(t){if(Eo&&typeof Eo.onCommitFiberRoot=="function")try{Eo.onCommitFiberRoot(Yj,t,void 0,(t.current.flags&128)===128)}catch{}}var qa=Math.clz32?Math.clz32:Zse,Qse=Math.log,Xse=Math.LN2;function Zse(t){return t>>>=0,t===0?32:31-(Qse(t)/Xse|0)|0}var Bb=64,Ub=4194304;function iy(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _w(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=iy(l):(a&=o,a!==0&&(r=iy(a)))}else o=n&~s,o!==0?r=iy(o):a!==0&&(r=iy(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-qa(e),s=1<<n,r|=t[n],e&=~s;return r}function Jse(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eie(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-qa(a),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=Jse(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function rT(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Xz(){var t=Bb;return Bb<<=1,!(Bb&4194240)&&(Bb=64),t}function L1(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Px(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-qa(e),t[e]=n}function tie(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-qa(n),a=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~a}}function uk(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-qa(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var wn=0;function Zz(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Jz,dk,e9,t9,n9,sT=!1,zb=[],Zc=null,Jc=null,eu=null,Zy=new Map,Jy=new Map,Ec=[],nie="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ZD(t,e){switch(t){case"focusin":case"focusout":Zc=null;break;case"dragenter":case"dragleave":Jc=null;break;case"mouseover":case"mouseout":eu=null;break;case"pointerover":case"pointerout":Zy.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jy.delete(e.pointerId)}}function Cg(t,e,n,r,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},e!==null&&(e=kx(e),e!==null&&dk(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function rie(t,e,n,r,s){switch(e){case"focusin":return Zc=Cg(Zc,t,e,n,r,s),!0;case"dragenter":return Jc=Cg(Jc,t,e,n,r,s),!0;case"mouseover":return eu=Cg(eu,t,e,n,r,s),!0;case"pointerover":var a=s.pointerId;return Zy.set(a,Cg(Zy.get(a)||null,t,e,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Jy.set(a,Cg(Jy.get(a)||null,t,e,n,r,s)),!0}return!1}function r9(t){var e=Cd(t.target);if(e!==null){var n=Bh(e);if(n!==null){if(e=n.tag,e===13){if(e=Wz(n),e!==null){t.blockedOn=e,n9(t.priority,function(){e9(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=iT(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);JA=r,n.target.dispatchEvent(r),JA=null}else return e=kx(n),e!==null&&dk(e),t.blockedOn=n,!1;e.shift()}return!0}function JD(t,e,n){$0(t)&&n.delete(e)}function sie(){sT=!1,Zc!==null&&$0(Zc)&&(Zc=null),Jc!==null&&$0(Jc)&&(Jc=null),eu!==null&&$0(eu)&&(eu=null),Zy.forEach(JD),Jy.forEach(JD)}function Pg(t,e){t.blockedOn===e&&(t.blockedOn=null,sT||(sT=!0,Fi.unstable_scheduleCallback(Fi.unstable_NormalPriority,sie)))}function ev(t){function e(s){return Pg(s,t)}if(0<zb.length){Pg(zb[0],t);for(var n=1;n<zb.length;n++){var r=zb[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Zc!==null&&Pg(Zc,t),Jc!==null&&Pg(Jc,t),eu!==null&&Pg(eu,t),Zy.forEach(e),Jy.forEach(e),n=0;n<Ec.length;n++)r=Ec[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ec.length&&(n=Ec[0],n.blockedOn===null);)r9(n),n.blockedOn===null&&Ec.shift()}var Jf=Hl.ReactCurrentBatchConfig,jw=!0;function iie(t,e,n,r){var s=wn,a=Jf.transition;Jf.transition=null;try{wn=1,hk(t,e,n,r)}finally{wn=s,Jf.transition=a}}function aie(t,e,n,r){var s=wn,a=Jf.transition;Jf.transition=null;try{wn=4,hk(t,e,n,r)}finally{wn=s,Jf.transition=a}}function hk(t,e,n,r){if(jw){var s=iT(t,e,n,r);if(s===null)K1(t,e,r,Nw,n),ZD(t,r);else if(rie(s,t,e,n,r))r.stopPropagation();else if(ZD(t,r),e&4&&-1<nie.indexOf(t)){for(;s!==null;){var a=kx(s);if(a!==null&&Jz(a),a=iT(t,e,n,r),a===null&&K1(t,e,r,Nw,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else K1(t,e,r,null,n)}}var Nw=null;function iT(t,e,n,r){if(Nw=null,t=lk(r),t=Cd(t),t!==null)if(e=Bh(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Wz(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nw=t,null}function s9(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Kse()){case ck:return 1;case Yz:return 4;case ww:case Gse:return 16;case Qz:return 536870912;default:return 16}default:return 16}}var qc=null,fk=null,F0=null;function i9(){if(F0)return F0;var t,e=fk,n=e.length,r,s="value"in qc?qc.value:qc.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[a-r];r++);return F0=s.slice(t,1<r?1-r:void 0)}function V0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qb(){return!0}function eL(){return!1}function Ui(t){function e(n,r,s,a,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?qb:eL,this.isPropagationStopped=eL,this}return rr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qb)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qb)},persist:function(){},isPersistent:qb}),e}var kp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mk=Ui(kp),Ix=rr({},kp,{view:0,detail:0}),oie=Ui(Ix),$1,F1,Ig,Qj=rr({},Ix,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pk,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ig&&(Ig&&t.type==="mousemove"?($1=t.screenX-Ig.screenX,F1=t.screenY-Ig.screenY):F1=$1=0,Ig=t),$1)},movementY:function(t){return"movementY"in t?t.movementY:F1}}),tL=Ui(Qj),lie=rr({},Qj,{dataTransfer:0}),cie=Ui(lie),uie=rr({},Ix,{relatedTarget:0}),V1=Ui(uie),die=rr({},kp,{animationName:0,elapsedTime:0,pseudoElement:0}),hie=Ui(die),fie=rr({},kp,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mie=Ui(fie),pie=rr({},kp,{data:0}),nL=Ui(pie),gie={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yie={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vie={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xie(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=vie[t])?!!e[t]:!1}function pk(){return xie}var bie=rr({},Ix,{key:function(t){if(t.key){var e=gie[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=V0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yie[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pk,charCode:function(t){return t.type==="keypress"?V0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?V0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wie=Ui(bie),_ie=rr({},Qj,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rL=Ui(_ie),jie=rr({},Ix,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pk}),Nie=Ui(jie),Sie=rr({},kp,{propertyName:0,elapsedTime:0,pseudoElement:0}),Eie=Ui(Sie),Aie=rr({},Qj,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Tie=Ui(Aie),Cie=[9,13,27,32],gk=Sl&&"CompositionEvent"in window,_y=null;Sl&&"documentMode"in document&&(_y=document.documentMode);var Pie=Sl&&"TextEvent"in window&&!_y,a9=Sl&&(!gk||_y&&8<_y&&11>=_y),sL=" ",iL=!1;function o9(t,e){switch(t){case"keyup":return Cie.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function l9(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Cf=!1;function Iie(t,e){switch(t){case"compositionend":return l9(e);case"keypress":return e.which!==32?null:(iL=!0,sL);case"textInput":return t=e.data,t===sL&&iL?null:t;default:return null}}function kie(t,e){if(Cf)return t==="compositionend"||!gk&&o9(t,e)?(t=i9(),F0=fk=qc=null,Cf=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return a9&&e.locale!=="ko"?null:e.data;default:return null}}var Rie={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function aL(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Rie[t.type]:e==="textarea"}function c9(t,e,n,r){Vz(r),e=Sw(e,"onChange"),0<e.length&&(n=new mk("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var jy=null,tv=null;function Oie(t){b9(t,0)}function Xj(t){var e=kf(t);if(Rz(e))return t}function Mie(t,e){if(t==="change")return e}var u9=!1;if(Sl){var B1;if(Sl){var U1="oninput"in document;if(!U1){var oL=document.createElement("div");oL.setAttribute("oninput","return;"),U1=typeof oL.oninput=="function"}B1=U1}else B1=!1;u9=B1&&(!document.documentMode||9<document.documentMode)}function lL(){jy&&(jy.detachEvent("onpropertychange",d9),tv=jy=null)}function d9(t){if(t.propertyName==="value"&&Xj(tv)){var e=[];c9(e,tv,t,lk(t)),qz(Oie,e)}}function Die(t,e,n){t==="focusin"?(lL(),jy=e,tv=n,jy.attachEvent("onpropertychange",d9)):t==="focusout"&&lL()}function Lie(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xj(tv)}function $ie(t,e){if(t==="click")return Xj(e)}function Fie(t,e){if(t==="input"||t==="change")return Xj(e)}function Vie(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xa=typeof Object.is=="function"?Object.is:Vie;function nv(t,e){if(Xa(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!BA.call(e,s)||!Xa(t[s],e[s]))return!1}return!0}function cL(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function uL(t,e){var n=cL(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cL(n)}}function h9(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?h9(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function f9(){for(var t=window,e=vw();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vw(t.document)}return e}function yk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Bie(t){var e=f9(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&h9(n.ownerDocument.documentElement,n)){if(r!==null&&yk(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!t.extend&&a>r&&(s=r,r=a,a=s),s=uL(n,a);var o=uL(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Uie=Sl&&"documentMode"in document&&11>=document.documentMode,Pf=null,aT=null,Ny=null,oT=!1;function dL(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;oT||Pf==null||Pf!==vw(r)||(r=Pf,"selectionStart"in r&&yk(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ny&&nv(Ny,r)||(Ny=r,r=Sw(aT,"onSelect"),0<r.length&&(e=new mk("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Pf)))}function Wb(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var If={animationend:Wb("Animation","AnimationEnd"),animationiteration:Wb("Animation","AnimationIteration"),animationstart:Wb("Animation","AnimationStart"),transitionend:Wb("Transition","TransitionEnd")},z1={},m9={};Sl&&(m9=document.createElement("div").style,"AnimationEvent"in window||(delete If.animationend.animation,delete If.animationiteration.animation,delete If.animationstart.animation),"TransitionEvent"in window||delete If.transitionend.transition);function Zj(t){if(z1[t])return z1[t];if(!If[t])return t;var e=If[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in m9)return z1[t]=e[n];return t}var p9=Zj("animationend"),g9=Zj("animationiteration"),y9=Zj("animationstart"),v9=Zj("transitionend"),x9=new Map,hL="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bu(t,e){x9.set(t,e),Vh(e,[t])}for(var q1=0;q1<hL.length;q1++){var W1=hL[q1],zie=W1.toLowerCase(),qie=W1[0].toUpperCase()+W1.slice(1);Bu(zie,"on"+qie)}Bu(p9,"onAnimationEnd");Bu(g9,"onAnimationIteration");Bu(y9,"onAnimationStart");Bu("dblclick","onDoubleClick");Bu("focusin","onFocus");Bu("focusout","onBlur");Bu(v9,"onTransitionEnd");Im("onMouseEnter",["mouseout","mouseover"]);Im("onMouseLeave",["mouseout","mouseover"]);Im("onPointerEnter",["pointerout","pointerover"]);Im("onPointerLeave",["pointerout","pointerover"]);Vh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vh("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ay="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wie=new Set("cancel close invalid load scroll toggle".split(" ").concat(ay));function fL(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,zse(r,e,void 0,t),t.currentTarget=null}function b9(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;fL(s,l,u),a=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;fL(s,l,u),a=c}}}if(bw)throw t=nT,bw=!1,nT=null,t}function Bn(t,e){var n=e[hT];n===void 0&&(n=e[hT]=new Set);var r=t+"__bubble";n.has(r)||(w9(e,t,2,!1),n.add(r))}function H1(t,e,n){var r=0;e&&(r|=4),w9(n,t,r,e)}var Hb="_reactListening"+Math.random().toString(36).slice(2);function rv(t){if(!t[Hb]){t[Hb]=!0,Tz.forEach(function(n){n!=="selectionchange"&&(Wie.has(n)||H1(n,!1,t),H1(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Hb]||(e[Hb]=!0,H1("selectionchange",!1,e))}}function w9(t,e,n,r){switch(s9(e)){case 1:var s=iie;break;case 4:s=aie;break;default:s=hk}n=s.bind(null,e,n,t),s=void 0,!tT||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function K1(t,e,n,r,s){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Cd(l),o===null)return;if(c=o.tag,c===5||c===6){r=a=o;continue e}l=l.parentNode}}r=r.return}qz(function(){var u=a,d=lk(n),h=[];e:{var f=x9.get(t);if(f!==void 0){var m=mk,v=t;switch(t){case"keypress":if(V0(n)===0)break e;case"keydown":case"keyup":m=wie;break;case"focusin":v="focus",m=V1;break;case"focusout":v="blur",m=V1;break;case"beforeblur":case"afterblur":m=V1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=tL;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=cie;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Nie;break;case p9:case g9:case y9:m=hie;break;case v9:m=Eie;break;case"scroll":m=oie;break;case"wheel":m=Tie;break;case"copy":case"cut":case"paste":m=mie;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=rL}var g=(e&4)!==0,y=!g&&t==="scroll",b=g?f!==null?f+"Capture":null:f;g=[];for(var x=u,S;x!==null;){S=x;var T=S.stateNode;if(S.tag===5&&T!==null&&(S=T,b!==null&&(T=Xy(x,b),T!=null&&g.push(sv(x,T,S)))),y)break;x=x.return}0<g.length&&(f=new m(f,v,null,n,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==JA&&(v=n.relatedTarget||n.fromElement)&&(Cd(v)||v[El]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=u,v=v?Cd(v):null,v!==null&&(y=Bh(v),v!==y||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(g=tL,T="onMouseLeave",b="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(g=rL,T="onPointerLeave",b="onPointerEnter",x="pointer"),y=m==null?f:kf(m),S=v==null?f:kf(v),f=new g(T,x+"leave",m,n,d),f.target=y,f.relatedTarget=S,T=null,Cd(d)===u&&(g=new g(b,x+"enter",v,n,d),g.target=S,g.relatedTarget=y,T=g),y=T,m&&v)t:{for(g=m,b=v,x=0,S=g;S;S=of(S))x++;for(S=0,T=b;T;T=of(T))S++;for(;0<x-S;)g=of(g),x--;for(;0<S-x;)b=of(b),S--;for(;x--;){if(g===b||b!==null&&g===b.alternate)break t;g=of(g),b=of(b)}g=null}else g=null;m!==null&&mL(h,f,m,g,!1),v!==null&&y!==null&&mL(h,y,v,g,!0)}}e:{if(f=u?kf(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var _=Mie;else if(aL(f))if(u9)_=Fie;else{_=Lie;var C=Die}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=$ie);if(_&&(_=_(t,u))){c9(h,_,n,d);break e}C&&C(t,f,u),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&GA(f,"number",f.value)}switch(C=u?kf(u):window,t){case"focusin":(aL(C)||C.contentEditable==="true")&&(Pf=C,aT=u,Ny=null);break;case"focusout":Ny=aT=Pf=null;break;case"mousedown":oT=!0;break;case"contextmenu":case"mouseup":case"dragend":oT=!1,dL(h,n,d);break;case"selectionchange":if(Uie)break;case"keydown":case"keyup":dL(h,n,d)}var E;if(gk)e:{switch(t){case"compositionstart":var p="onCompositionStart";break e;case"compositionend":p="onCompositionEnd";break e;case"compositionupdate":p="onCompositionUpdate";break e}p=void 0}else Cf?o9(t,n)&&(p="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(p="onCompositionStart");p&&(a9&&n.locale!=="ko"&&(Cf||p!=="onCompositionStart"?p==="onCompositionEnd"&&Cf&&(E=i9()):(qc=d,fk="value"in qc?qc.value:qc.textContent,Cf=!0)),C=Sw(u,p),0<C.length&&(p=new nL(p,t,null,n,d),h.push({event:p,listeners:C}),E?p.data=E:(E=l9(n),E!==null&&(p.data=E)))),(E=Pie?Iie(t,n):kie(t,n))&&(u=Sw(u,"onBeforeInput"),0<u.length&&(d=new nL("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=E))}b9(h,e)})}function sv(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sw(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Xy(t,n),a!=null&&r.unshift(sv(t,a,s)),a=Xy(t,e),a!=null&&r.push(sv(t,a,s))),t=t.return}return r}function of(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function mL(t,e,n,r,s){for(var a=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Xy(n,a),c!=null&&o.unshift(sv(n,c,l))):s||(c=Xy(n,a),c!=null&&o.push(sv(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Hie=/\r\n?/g,Kie=/\u0000|\uFFFD/g;function pL(t){return(typeof t=="string"?t:""+t).replace(Hie,`
`).replace(Kie,"")}function Kb(t,e,n){if(e=pL(e),pL(t)!==e&&n)throw Error(Ae(425))}function Ew(){}var lT=null,cT=null;function uT(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dT=typeof setTimeout=="function"?setTimeout:void 0,Gie=typeof clearTimeout=="function"?clearTimeout:void 0,gL=typeof Promise=="function"?Promise:void 0,Yie=typeof queueMicrotask=="function"?queueMicrotask:typeof gL<"u"?function(t){return gL.resolve(null).then(t).catch(Qie)}:dT;function Qie(t){setTimeout(function(){throw t})}function G1(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ev(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ev(e)}function tu(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function yL(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Rp=Math.random().toString(36).slice(2),xo="__reactFiber$"+Rp,iv="__reactProps$"+Rp,El="__reactContainer$"+Rp,hT="__reactEvents$"+Rp,Xie="__reactListeners$"+Rp,Zie="__reactHandles$"+Rp;function Cd(t){var e=t[xo];if(e)return e;for(var n=t.parentNode;n;){if(e=n[El]||n[xo]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=yL(t);t!==null;){if(n=t[xo])return n;t=yL(t)}return e}t=n,n=t.parentNode}return null}function kx(t){return t=t[xo]||t[El],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function kf(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ae(33))}function Jj(t){return t[iv]||null}var fT=[],Rf=-1;function Uu(t){return{current:t}}function Wn(t){0>Rf||(t.current=fT[Rf],fT[Rf]=null,Rf--)}function Mn(t,e){Rf++,fT[Rf]=t.current,t.current=e}var yu={},Os=Uu(yu),gi=Uu(!1),oh=yu;function km(t,e){var n=t.type.contextTypes;if(!n)return yu;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function yi(t){return t=t.childContextTypes,t!=null}function Aw(){Wn(gi),Wn(Os)}function vL(t,e,n){if(Os.current!==yu)throw Error(Ae(168));Mn(Os,e),Mn(gi,n)}function _9(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Ae(108,Dse(t)||"Unknown",s));return rr({},n,r)}function Tw(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||yu,oh=Os.current,Mn(Os,t),Mn(gi,gi.current),!0}function xL(t,e,n){var r=t.stateNode;if(!r)throw Error(Ae(169));n?(t=_9(t,e,oh),r.__reactInternalMemoizedMergedChildContext=t,Wn(gi),Wn(Os),Mn(Os,t)):Wn(gi),Mn(gi,n)}var al=null,eN=!1,Y1=!1;function j9(t){al===null?al=[t]:al.push(t)}function Jie(t){eN=!0,j9(t)}function zu(){if(!Y1&&al!==null){Y1=!0;var t=0,e=wn;try{var n=al;for(wn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}al=null,eN=!1}catch(s){throw al!==null&&(al=al.slice(t+1)),Gz(ck,zu),s}finally{wn=e,Y1=!1}}return null}var Of=[],Mf=0,Cw=null,Pw=0,Qi=[],Xi=0,lh=null,ul=1,dl="";function bd(t,e){Of[Mf++]=Pw,Of[Mf++]=Cw,Cw=t,Pw=e}function N9(t,e,n){Qi[Xi++]=ul,Qi[Xi++]=dl,Qi[Xi++]=lh,lh=t;var r=ul;t=dl;var s=32-qa(r)-1;r&=~(1<<s),n+=1;var a=32-qa(e)+s;if(30<a){var o=s-s%5;a=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ul=1<<32-qa(e)+s|n<<s|r,dl=a+t}else ul=1<<a|n<<s|r,dl=t}function vk(t){t.return!==null&&(bd(t,1),N9(t,1,0))}function xk(t){for(;t===Cw;)Cw=Of[--Mf],Of[Mf]=null,Pw=Of[--Mf],Of[Mf]=null;for(;t===lh;)lh=Qi[--Xi],Qi[Xi]=null,dl=Qi[--Xi],Qi[Xi]=null,ul=Qi[--Xi],Qi[Xi]=null}var Mi=null,ki=null,Yn=!1,La=null;function S9(t,e){var n=ea(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function bL(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mi=t,ki=tu(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mi=t,ki=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=lh!==null?{id:ul,overflow:dl}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ea(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mi=t,ki=null,!0):!1;default:return!1}}function mT(t){return(t.mode&1)!==0&&(t.flags&128)===0}function pT(t){if(Yn){var e=ki;if(e){var n=e;if(!bL(t,e)){if(mT(t))throw Error(Ae(418));e=tu(n.nextSibling);var r=Mi;e&&bL(t,e)?S9(r,n):(t.flags=t.flags&-4097|2,Yn=!1,Mi=t)}}else{if(mT(t))throw Error(Ae(418));t.flags=t.flags&-4097|2,Yn=!1,Mi=t}}}function wL(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mi=t}function Gb(t){if(t!==Mi)return!1;if(!Yn)return wL(t),Yn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!uT(t.type,t.memoizedProps)),e&&(e=ki)){if(mT(t))throw E9(),Error(Ae(418));for(;e;)S9(t,e),e=tu(e.nextSibling)}if(wL(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ki=tu(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ki=null}}else ki=Mi?tu(t.stateNode.nextSibling):null;return!0}function E9(){for(var t=ki;t;)t=tu(t.nextSibling)}function Rm(){ki=Mi=null,Yn=!1}function bk(t){La===null?La=[t]:La.push(t)}var eae=Hl.ReactCurrentBatchConfig;function kg(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ae(309));var r=n.stateNode}if(!r)throw Error(Ae(147,t));var s=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(Ae(284));if(!n._owner)throw Error(Ae(290,t))}return t}function Yb(t,e){throw t=Object.prototype.toString.call(e),Error(Ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _L(t){var e=t._init;return e(t._payload)}function A9(t){function e(b,x){if(t){var S=b.deletions;S===null?(b.deletions=[x],b.flags|=16):S.push(x)}}function n(b,x){if(!t)return null;for(;x!==null;)e(b,x),x=x.sibling;return null}function r(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function s(b,x){return b=iu(b,x),b.index=0,b.sibling=null,b}function a(b,x,S){return b.index=S,t?(S=b.alternate,S!==null?(S=S.index,S<x?(b.flags|=2,x):S):(b.flags|=2,x)):(b.flags|=1048576,x)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function l(b,x,S,T){return x===null||x.tag!==6?(x=nE(S,b.mode,T),x.return=b,x):(x=s(x,S),x.return=b,x)}function c(b,x,S,T){var _=S.type;return _===Tf?d(b,x,S.props.children,T,S.key):x!==null&&(x.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===wc&&_L(_)===x.type)?(T=s(x,S.props),T.ref=kg(b,x,S),T.return=b,T):(T=K0(S.type,S.key,S.props,null,b.mode,T),T.ref=kg(b,x,S),T.return=b,T)}function u(b,x,S,T){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=rE(S,b.mode,T),x.return=b,x):(x=s(x,S.children||[]),x.return=b,x)}function d(b,x,S,T,_){return x===null||x.tag!==7?(x=Zd(S,b.mode,T,_),x.return=b,x):(x=s(x,S),x.return=b,x)}function h(b,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=nE(""+x,b.mode,S),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case $b:return S=K0(x.type,x.key,x.props,null,b.mode,S),S.ref=kg(b,null,x),S.return=b,S;case Af:return x=rE(x,b.mode,S),x.return=b,x;case wc:var T=x._init;return h(b,T(x._payload),S)}if(sy(x)||Ag(x))return x=Zd(x,b.mode,S,null),x.return=b,x;Yb(b,x)}return null}function f(b,x,S,T){var _=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return _!==null?null:l(b,x,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case $b:return S.key===_?c(b,x,S,T):null;case Af:return S.key===_?u(b,x,S,T):null;case wc:return _=S._init,f(b,x,_(S._payload),T)}if(sy(S)||Ag(S))return _!==null?null:d(b,x,S,T,null);Yb(b,S)}return null}function m(b,x,S,T,_){if(typeof T=="string"&&T!==""||typeof T=="number")return b=b.get(S)||null,l(x,b,""+T,_);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case $b:return b=b.get(T.key===null?S:T.key)||null,c(x,b,T,_);case Af:return b=b.get(T.key===null?S:T.key)||null,u(x,b,T,_);case wc:var C=T._init;return m(b,x,S,C(T._payload),_)}if(sy(T)||Ag(T))return b=b.get(S)||null,d(x,b,T,_,null);Yb(x,T)}return null}function v(b,x,S,T){for(var _=null,C=null,E=x,p=x=0,w=null;E!==null&&p<S.length;p++){E.index>p?(w=E,E=null):w=E.sibling;var A=f(b,E,S[p],T);if(A===null){E===null&&(E=w);break}t&&E&&A.alternate===null&&e(b,E),x=a(A,x,p),C===null?_=A:C.sibling=A,C=A,E=w}if(p===S.length)return n(b,E),Yn&&bd(b,p),_;if(E===null){for(;p<S.length;p++)E=h(b,S[p],T),E!==null&&(x=a(E,x,p),C===null?_=E:C.sibling=E,C=E);return Yn&&bd(b,p),_}for(E=r(b,E);p<S.length;p++)w=m(E,b,p,S[p],T),w!==null&&(t&&w.alternate!==null&&E.delete(w.key===null?p:w.key),x=a(w,x,p),C===null?_=w:C.sibling=w,C=w);return t&&E.forEach(function(P){return e(b,P)}),Yn&&bd(b,p),_}function g(b,x,S,T){var _=Ag(S);if(typeof _!="function")throw Error(Ae(150));if(S=_.call(S),S==null)throw Error(Ae(151));for(var C=_=null,E=x,p=x=0,w=null,A=S.next();E!==null&&!A.done;p++,A=S.next()){E.index>p?(w=E,E=null):w=E.sibling;var P=f(b,E,A.value,T);if(P===null){E===null&&(E=w);break}t&&E&&P.alternate===null&&e(b,E),x=a(P,x,p),C===null?_=P:C.sibling=P,C=P,E=w}if(A.done)return n(b,E),Yn&&bd(b,p),_;if(E===null){for(;!A.done;p++,A=S.next())A=h(b,A.value,T),A!==null&&(x=a(A,x,p),C===null?_=A:C.sibling=A,C=A);return Yn&&bd(b,p),_}for(E=r(b,E);!A.done;p++,A=S.next())A=m(E,b,p,A.value,T),A!==null&&(t&&A.alternate!==null&&E.delete(A.key===null?p:A.key),x=a(A,x,p),C===null?_=A:C.sibling=A,C=A);return t&&E.forEach(function(I){return e(b,I)}),Yn&&bd(b,p),_}function y(b,x,S,T){if(typeof S=="object"&&S!==null&&S.type===Tf&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case $b:e:{for(var _=S.key,C=x;C!==null;){if(C.key===_){if(_=S.type,_===Tf){if(C.tag===7){n(b,C.sibling),x=s(C,S.props.children),x.return=b,b=x;break e}}else if(C.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===wc&&_L(_)===C.type){n(b,C.sibling),x=s(C,S.props),x.ref=kg(b,C,S),x.return=b,b=x;break e}n(b,C);break}else e(b,C);C=C.sibling}S.type===Tf?(x=Zd(S.props.children,b.mode,T,S.key),x.return=b,b=x):(T=K0(S.type,S.key,S.props,null,b.mode,T),T.ref=kg(b,x,S),T.return=b,b=T)}return o(b);case Af:e:{for(C=S.key;x!==null;){if(x.key===C)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){n(b,x.sibling),x=s(x,S.children||[]),x.return=b,b=x;break e}else{n(b,x);break}else e(b,x);x=x.sibling}x=rE(S,b.mode,T),x.return=b,b=x}return o(b);case wc:return C=S._init,y(b,x,C(S._payload),T)}if(sy(S))return v(b,x,S,T);if(Ag(S))return g(b,x,S,T);Yb(b,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(n(b,x.sibling),x=s(x,S),x.return=b,b=x):(n(b,x),x=nE(S,b.mode,T),x.return=b,b=x),o(b)):n(b,x)}return y}var Om=A9(!0),T9=A9(!1),Iw=Uu(null),kw=null,Df=null,wk=null;function _k(){wk=Df=kw=null}function jk(t){var e=Iw.current;Wn(Iw),t._currentValue=e}function gT(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function em(t,e){kw=t,wk=Df=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(fi=!0),t.firstContext=null)}function da(t){var e=t._currentValue;if(wk!==t)if(t={context:t,memoizedValue:e,next:null},Df===null){if(kw===null)throw Error(Ae(308));Df=t,kw.dependencies={lanes:0,firstContext:t}}else Df=Df.next=t;return e}var Pd=null;function Nk(t){Pd===null?Pd=[t]:Pd.push(t)}function C9(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Nk(e)):(n.next=s.next,s.next=n),e.interleaved=n,Al(t,r)}function Al(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var _c=!1;function Sk(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function P9(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vl(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function nu(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ln&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Al(t,n)}return s=r.interleaved,s===null?(e.next=e,Nk(r)):(e.next=s.next,s.next=e),r.interleaved=e,Al(t,n)}function B0(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uk(t,n)}}function jL(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Rw(t,e,n,r){var s=t.updateQueue;_c=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var h=s.baseState;o=0,d=u=c=null,l=a;do{var f=l.lane,m=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,g=l;switch(f=e,m=n,g.tag){case 1:if(v=g.payload,typeof v=="function"){h=v.call(m,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=g.payload,f=typeof v=="function"?v.call(m,h,f):v,f==null)break e;h=rr({},h,f);break e;case 2:_c=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);uh|=o,t.lanes=o,t.memoizedState=h}}function NL(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Ae(191,s));s.call(r)}}}var Rx={},Ao=Uu(Rx),av=Uu(Rx),ov=Uu(Rx);function Id(t){if(t===Rx)throw Error(Ae(174));return t}function Ek(t,e){switch(Mn(ov,e),Mn(av,t),Mn(Ao,Rx),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:QA(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=QA(e,t)}Wn(Ao),Mn(Ao,e)}function Mm(){Wn(Ao),Wn(av),Wn(ov)}function I9(t){Id(ov.current);var e=Id(Ao.current),n=QA(e,t.type);e!==n&&(Mn(av,t),Mn(Ao,n))}function Ak(t){av.current===t&&(Wn(Ao),Wn(av))}var er=Uu(0);function Ow(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Q1=[];function Tk(){for(var t=0;t<Q1.length;t++)Q1[t]._workInProgressVersionPrimary=null;Q1.length=0}var U0=Hl.ReactCurrentDispatcher,X1=Hl.ReactCurrentBatchConfig,ch=0,nr=null,$r=null,Xr=null,Mw=!1,Sy=!1,lv=0,tae=0;function vs(){throw Error(Ae(321))}function Ck(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Xa(t[n],e[n]))return!1;return!0}function Pk(t,e,n,r,s,a){if(ch=a,nr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,U0.current=t===null||t.memoizedState===null?iae:aae,t=n(r,s),Sy){a=0;do{if(Sy=!1,lv=0,25<=a)throw Error(Ae(301));a+=1,Xr=$r=null,e.updateQueue=null,U0.current=oae,t=n(r,s)}while(Sy)}if(U0.current=Dw,e=$r!==null&&$r.next!==null,ch=0,Xr=$r=nr=null,Mw=!1,e)throw Error(Ae(300));return t}function Ik(){var t=lv!==0;return lv=0,t}function fo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xr===null?nr.memoizedState=Xr=t:Xr=Xr.next=t,Xr}function ha(){if($r===null){var t=nr.alternate;t=t!==null?t.memoizedState:null}else t=$r.next;var e=Xr===null?nr.memoizedState:Xr.next;if(e!==null)Xr=e,$r=t;else{if(t===null)throw Error(Ae(310));$r=t,t={memoizedState:$r.memoizedState,baseState:$r.baseState,baseQueue:$r.baseQueue,queue:$r.queue,next:null},Xr===null?nr.memoizedState=Xr=t:Xr=Xr.next=t}return Xr}function cv(t,e){return typeof e=="function"?e(t):e}function Z1(t){var e=ha(),n=e.queue;if(n===null)throw Error(Ae(311));n.lastRenderedReducer=t;var r=$r,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((ch&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,nr.lanes|=d,uh|=d}u=u.next}while(u!==null&&u!==a);c===null?o=r:c.next=l,Xa(r,e.memoizedState)||(fi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do a=s.lane,nr.lanes|=a,uh|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function J1(t){var e=ha(),n=e.queue;if(n===null)throw Error(Ae(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);Xa(a,e.memoizedState)||(fi=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function k9(){}function R9(t,e){var n=nr,r=ha(),s=e(),a=!Xa(r.memoizedState,s);if(a&&(r.memoizedState=s,fi=!0),r=r.queue,kk(D9.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Xr!==null&&Xr.memoizedState.tag&1){if(n.flags|=2048,uv(9,M9.bind(null,n,r,s,e),void 0,null),Jr===null)throw Error(Ae(349));ch&30||O9(n,e,s)}return s}function O9(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=nr.updateQueue,e===null?(e={lastEffect:null,stores:null},nr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function M9(t,e,n,r){e.value=n,e.getSnapshot=r,L9(e)&&$9(t)}function D9(t,e,n){return n(function(){L9(e)&&$9(t)})}function L9(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xa(t,n)}catch{return!0}}function $9(t){var e=Al(t,1);e!==null&&Wa(e,t,1,-1)}function SL(t){var e=fo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cv,lastRenderedState:t},e.queue=t,t=t.dispatch=sae.bind(null,nr,t),[e.memoizedState,t]}function uv(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=nr.updateQueue,e===null?(e={lastEffect:null,stores:null},nr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function F9(){return ha().memoizedState}function z0(t,e,n,r){var s=fo();nr.flags|=t,s.memoizedState=uv(1|e,n,void 0,r===void 0?null:r)}function tN(t,e,n,r){var s=ha();r=r===void 0?null:r;var a=void 0;if($r!==null){var o=$r.memoizedState;if(a=o.destroy,r!==null&&Ck(r,o.deps)){s.memoizedState=uv(e,n,a,r);return}}nr.flags|=t,s.memoizedState=uv(1|e,n,a,r)}function EL(t,e){return z0(8390656,8,t,e)}function kk(t,e){return tN(2048,8,t,e)}function V9(t,e){return tN(4,2,t,e)}function B9(t,e){return tN(4,4,t,e)}function U9(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function z9(t,e,n){return n=n!=null?n.concat([t]):null,tN(4,4,U9.bind(null,e,t),n)}function Rk(){}function q9(t,e){var n=ha();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ck(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function W9(t,e){var n=ha();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ck(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function H9(t,e,n){return ch&21?(Xa(n,e)||(n=Xz(),nr.lanes|=n,uh|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,fi=!0),t.memoizedState=n)}function nae(t,e){var n=wn;wn=n!==0&&4>n?n:4,t(!0);var r=X1.transition;X1.transition={};try{t(!1),e()}finally{wn=n,X1.transition=r}}function K9(){return ha().memoizedState}function rae(t,e,n){var r=su(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},G9(t))Y9(e,n);else if(n=C9(t,e,n,r),n!==null){var s=Ys();Wa(n,t,r,s),Q9(n,e,r)}}function sae(t,e,n){var r=su(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(G9(t))Y9(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,n);if(s.hasEagerState=!0,s.eagerState=l,Xa(l,o)){var c=e.interleaved;c===null?(s.next=s,Nk(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=C9(t,e,s,r),n!==null&&(s=Ys(),Wa(n,t,r,s),Q9(n,e,r))}}function G9(t){var e=t.alternate;return t===nr||e!==null&&e===nr}function Y9(t,e){Sy=Mw=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Q9(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uk(t,n)}}var Dw={readContext:da,useCallback:vs,useContext:vs,useEffect:vs,useImperativeHandle:vs,useInsertionEffect:vs,useLayoutEffect:vs,useMemo:vs,useReducer:vs,useRef:vs,useState:vs,useDebugValue:vs,useDeferredValue:vs,useTransition:vs,useMutableSource:vs,useSyncExternalStore:vs,useId:vs,unstable_isNewReconciler:!1},iae={readContext:da,useCallback:function(t,e){return fo().memoizedState=[t,e===void 0?null:e],t},useContext:da,useEffect:EL,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,z0(4194308,4,U9.bind(null,e,t),n)},useLayoutEffect:function(t,e){return z0(4194308,4,t,e)},useInsertionEffect:function(t,e){return z0(4,2,t,e)},useMemo:function(t,e){var n=fo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=fo();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=rae.bind(null,nr,t),[r.memoizedState,t]},useRef:function(t){var e=fo();return t={current:t},e.memoizedState=t},useState:SL,useDebugValue:Rk,useDeferredValue:function(t){return fo().memoizedState=t},useTransition:function(){var t=SL(!1),e=t[0];return t=nae.bind(null,t[1]),fo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=nr,s=fo();if(Yn){if(n===void 0)throw Error(Ae(407));n=n()}else{if(n=e(),Jr===null)throw Error(Ae(349));ch&30||O9(r,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,EL(D9.bind(null,r,a,t),[t]),r.flags|=2048,uv(9,M9.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=fo(),e=Jr.identifierPrefix;if(Yn){var n=dl,r=ul;n=(r&~(1<<32-qa(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=lv++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=tae++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},aae={readContext:da,useCallback:q9,useContext:da,useEffect:kk,useImperativeHandle:z9,useInsertionEffect:V9,useLayoutEffect:B9,useMemo:W9,useReducer:Z1,useRef:F9,useState:function(){return Z1(cv)},useDebugValue:Rk,useDeferredValue:function(t){var e=ha();return H9(e,$r.memoizedState,t)},useTransition:function(){var t=Z1(cv)[0],e=ha().memoizedState;return[t,e]},useMutableSource:k9,useSyncExternalStore:R9,useId:K9,unstable_isNewReconciler:!1},oae={readContext:da,useCallback:q9,useContext:da,useEffect:kk,useImperativeHandle:z9,useInsertionEffect:V9,useLayoutEffect:B9,useMemo:W9,useReducer:J1,useRef:F9,useState:function(){return J1(cv)},useDebugValue:Rk,useDeferredValue:function(t){var e=ha();return $r===null?e.memoizedState=t:H9(e,$r.memoizedState,t)},useTransition:function(){var t=J1(cv)[0],e=ha().memoizedState;return[t,e]},useMutableSource:k9,useSyncExternalStore:R9,useId:K9,unstable_isNewReconciler:!1};function Ia(t,e){if(t&&t.defaultProps){e=rr({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function yT(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:rr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var nN={isMounted:function(t){return(t=t._reactInternals)?Bh(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ys(),s=su(t),a=vl(r,s);a.payload=e,n!=null&&(a.callback=n),e=nu(t,a,s),e!==null&&(Wa(e,t,s,r),B0(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ys(),s=su(t),a=vl(r,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=nu(t,a,s),e!==null&&(Wa(e,t,s,r),B0(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ys(),r=su(t),s=vl(n,r);s.tag=2,e!=null&&(s.callback=e),e=nu(t,s,r),e!==null&&(Wa(e,t,r,n),B0(e,t,r))}};function AL(t,e,n,r,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!nv(n,r)||!nv(s,a):!0}function X9(t,e,n){var r=!1,s=yu,a=e.contextType;return typeof a=="object"&&a!==null?a=da(a):(s=yi(e)?oh:Os.current,r=e.contextTypes,a=(r=r!=null)?km(t,s):yu),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nN,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function TL(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&nN.enqueueReplaceState(e,e.state,null)}function vT(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Sk(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=da(a):(a=yi(e)?oh:Os.current,s.context=km(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(yT(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&nN.enqueueReplaceState(s,s.state,null),Rw(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Dm(t,e){try{var n="",r=e;do n+=Mse(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function eE(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function xT(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var lae=typeof WeakMap=="function"?WeakMap:Map;function Z9(t,e,n){n=vl(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$w||($w=!0,CT=r),xT(t,e)},n}function J9(t,e,n){n=vl(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){xT(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){xT(t,e),typeof r!="function"&&(ru===null?ru=new Set([this]):ru.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function CL(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new lae;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=_ae.bind(null,t,e,n),e.then(t,t))}function PL(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function IL(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vl(-1,1),e.tag=2,nu(n,e,1))),n.lanes|=1),t)}var cae=Hl.ReactCurrentOwner,fi=!1;function Bs(t,e,n,r){e.child=t===null?T9(e,null,n,r):Om(e,t.child,n,r)}function kL(t,e,n,r,s){n=n.render;var a=e.ref;return em(e,s),r=Pk(t,e,n,r,a,s),n=Ik(),t!==null&&!fi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Tl(t,e,s)):(Yn&&n&&vk(e),e.flags|=1,Bs(t,e,r,s),e.child)}function RL(t,e,n,r,s){if(t===null){var a=n.type;return typeof a=="function"&&!Bk(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,eq(t,e,a,r,s)):(t=K0(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:nv,n(o,r)&&t.ref===e.ref)return Tl(t,e,s)}return e.flags|=1,t=iu(a,r),t.ref=e.ref,t.return=e,e.child=t}function eq(t,e,n,r,s){if(t!==null){var a=t.memoizedProps;if(nv(a,r)&&t.ref===e.ref)if(fi=!1,e.pendingProps=r=a,(t.lanes&s)!==0)t.flags&131072&&(fi=!0);else return e.lanes=t.lanes,Tl(t,e,s)}return bT(t,e,n,r,s)}function tq(t,e,n){var r=e.pendingProps,s=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mn($f,Ei),Ei|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Mn($f,Ei),Ei|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Mn($f,Ei),Ei|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,Mn($f,Ei),Ei|=r;return Bs(t,e,s,n),e.child}function nq(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function bT(t,e,n,r,s){var a=yi(n)?oh:Os.current;return a=km(e,a),em(e,s),n=Pk(t,e,n,r,a,s),r=Ik(),t!==null&&!fi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Tl(t,e,s)):(Yn&&r&&vk(e),e.flags|=1,Bs(t,e,n,s),e.child)}function OL(t,e,n,r,s){if(yi(n)){var a=!0;Tw(e)}else a=!1;if(em(e,s),e.stateNode===null)q0(t,e),X9(e,n,r),vT(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=da(u):(u=yi(n)?oh:Os.current,u=km(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&TL(e,o,r,u),_c=!1;var f=e.memoizedState;o.state=f,Rw(e,r,o,s),c=e.memoizedState,l!==r||f!==c||gi.current||_c?(typeof d=="function"&&(yT(e,n,d,r),c=e.memoizedState),(l=_c||AL(e,n,l,r,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,P9(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Ia(e.type,l),o.props=u,h=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=da(c):(c=yi(n)?oh:Os.current,c=km(e,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&TL(e,o,r,c),_c=!1,f=e.memoizedState,o.state=f,Rw(e,r,o,s);var v=e.memoizedState;l!==h||f!==v||gi.current||_c?(typeof m=="function"&&(yT(e,n,m,r),v=e.memoizedState),(u=_c||AL(e,n,u,r,f,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return wT(t,e,n,r,a,s)}function wT(t,e,n,r,s,a){nq(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&xL(e,n,!1),Tl(t,e,a);r=e.stateNode,cae.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Om(e,t.child,null,a),e.child=Om(e,null,l,a)):Bs(t,e,l,a),e.memoizedState=r.state,s&&xL(e,n,!0),e.child}function rq(t){var e=t.stateNode;e.pendingContext?vL(t,e.pendingContext,e.pendingContext!==e.context):e.context&&vL(t,e.context,!1),Ek(t,e.containerInfo)}function ML(t,e,n,r,s){return Rm(),bk(s),e.flags|=256,Bs(t,e,n,r),e.child}var _T={dehydrated:null,treeContext:null,retryLane:0};function jT(t){return{baseLanes:t,cachePool:null,transitions:null}}function sq(t,e,n){var r=e.pendingProps,s=er.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Mn(er,s&1),t===null)return pT(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=iN(o,r,0,null),t=Zd(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=jT(n),e.memoizedState=_T,t):Ok(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return uae(t,e,o,r,l,s,n);if(a){a=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=iu(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=iu(l,a):(a=Zd(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?jT(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=_T,r}return a=t.child,t=a.sibling,r=iu(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ok(t,e){return e=iN({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qb(t,e,n,r){return r!==null&&bk(r),Om(e,t.child,null,n),t=Ok(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function uae(t,e,n,r,s,a,o){if(n)return e.flags&256?(e.flags&=-257,r=eE(Error(Ae(422))),Qb(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,s=e.mode,r=iN({mode:"visible",children:r.children},s,0,null),a=Zd(a,s,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Om(e,t.child,null,o),e.child.memoizedState=jT(o),e.memoizedState=_T,a);if(!(e.mode&1))return Qb(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(Ae(419)),r=eE(a,r,void 0),Qb(t,e,o,r)}if(l=(o&t.childLanes)!==0,fi||l){if(r=Jr,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Al(t,s),Wa(r,t,s,-1))}return Vk(),r=eE(Error(Ae(421))),Qb(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=jae.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,ki=tu(s.nextSibling),Mi=e,Yn=!0,La=null,t!==null&&(Qi[Xi++]=ul,Qi[Xi++]=dl,Qi[Xi++]=lh,ul=t.id,dl=t.overflow,lh=e),e=Ok(e,r.children),e.flags|=4096,e)}function DL(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),gT(t.return,e,n)}function tE(t,e,n,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function iq(t,e,n){var r=e.pendingProps,s=r.revealOrder,a=r.tail;if(Bs(t,e,r.children,n),r=er.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&DL(t,n,e);else if(t.tag===19)DL(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Mn(er,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ow(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),tE(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ow(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}tE(e,!0,n,null,a);break;case"together":tE(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function q0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Tl(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),uh|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ae(153));if(e.child!==null){for(t=e.child,n=iu(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=iu(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function dae(t,e,n){switch(e.tag){case 3:rq(e),Rm();break;case 5:I9(e);break;case 1:yi(e.type)&&Tw(e);break;case 4:Ek(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Mn(Iw,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Mn(er,er.current&1),e.flags|=128,null):n&e.child.childLanes?sq(t,e,n):(Mn(er,er.current&1),t=Tl(t,e,n),t!==null?t.sibling:null);Mn(er,er.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return iq(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Mn(er,er.current),r)break;return null;case 22:case 23:return e.lanes=0,tq(t,e,n)}return Tl(t,e,n)}var aq,NT,oq,lq;aq=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};NT=function(){};oq=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Id(Ao.current);var a=null;switch(n){case"input":s=HA(t,s),r=HA(t,r),a=[];break;case"select":s=rr({},s,{value:void 0}),r=rr({},r,{value:void 0}),a=[];break;case"textarea":s=YA(t,s),r=YA(t,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ew)}XA(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Yy.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Yy.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Bn("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};lq=function(t,e,n,r){n!==r&&(e.flags|=4)};function Rg(t,e){if(!Yn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function xs(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function hae(t,e,n){var r=e.pendingProps;switch(xk(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xs(e),null;case 1:return yi(e.type)&&Aw(),xs(e),null;case 3:return r=e.stateNode,Mm(),Wn(gi),Wn(Os),Tk(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Gb(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,La!==null&&(kT(La),La=null))),NT(t,e),xs(e),null;case 5:Ak(e);var s=Id(ov.current);if(n=e.type,t!==null&&e.stateNode!=null)oq(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ae(166));return xs(e),null}if(t=Id(Ao.current),Gb(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[xo]=e,r[iv]=a,t=(e.mode&1)!==0,n){case"dialog":Bn("cancel",r),Bn("close",r);break;case"iframe":case"object":case"embed":Bn("load",r);break;case"video":case"audio":for(s=0;s<ay.length;s++)Bn(ay[s],r);break;case"source":Bn("error",r);break;case"img":case"image":case"link":Bn("error",r),Bn("load",r);break;case"details":Bn("toggle",r);break;case"input":WD(r,a),Bn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Bn("invalid",r);break;case"textarea":KD(r,a),Bn("invalid",r)}XA(n,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&Kb(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Kb(r.textContent,l,t),s=["children",""+l]):Yy.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Bn("scroll",r)}switch(n){case"input":Fb(r),HD(r,a,!0);break;case"textarea":Fb(r),GD(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Ew)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Dz(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[xo]=e,t[iv]=r,aq(t,e,!1,!1),e.stateNode=t;e:{switch(o=ZA(n,r),n){case"dialog":Bn("cancel",t),Bn("close",t),s=r;break;case"iframe":case"object":case"embed":Bn("load",t),s=r;break;case"video":case"audio":for(s=0;s<ay.length;s++)Bn(ay[s],t);s=r;break;case"source":Bn("error",t),s=r;break;case"img":case"image":case"link":Bn("error",t),Bn("load",t),s=r;break;case"details":Bn("toggle",t),s=r;break;case"input":WD(t,r),s=HA(t,r),Bn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=rr({},r,{value:void 0}),Bn("invalid",t);break;case"textarea":KD(t,r),s=YA(t,r),Bn("invalid",t);break;default:s=r}XA(n,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?Fz(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Lz(t,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Qy(t,c):typeof c=="number"&&Qy(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Yy.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Bn("scroll",t):c!=null&&sk(t,a,c,o))}switch(n){case"input":Fb(t),HD(t,r,!1);break;case"textarea":Fb(t),GD(t);break;case"option":r.value!=null&&t.setAttribute("value",""+gu(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Qf(t,!!r.multiple,a,!1):r.defaultValue!=null&&Qf(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ew)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xs(e),null;case 6:if(t&&e.stateNode!=null)lq(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ae(166));if(n=Id(ov.current),Id(Ao.current),Gb(e)){if(r=e.stateNode,n=e.memoizedProps,r[xo]=e,(a=r.nodeValue!==n)&&(t=Mi,t!==null))switch(t.tag){case 3:Kb(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Kb(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xo]=e,e.stateNode=r}return xs(e),null;case 13:if(Wn(er),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Yn&&ki!==null&&e.mode&1&&!(e.flags&128))E9(),Rm(),e.flags|=98560,a=!1;else if(a=Gb(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(Ae(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Ae(317));a[xo]=e}else Rm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xs(e),a=!1}else La!==null&&(kT(La),La=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||er.current&1?Br===0&&(Br=3):Vk())),e.updateQueue!==null&&(e.flags|=4),xs(e),null);case 4:return Mm(),NT(t,e),t===null&&rv(e.stateNode.containerInfo),xs(e),null;case 10:return jk(e.type._context),xs(e),null;case 17:return yi(e.type)&&Aw(),xs(e),null;case 19:if(Wn(er),a=e.memoizedState,a===null)return xs(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)Rg(a,!1);else{if(Br!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ow(t),o!==null){for(e.flags|=128,Rg(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Mn(er,er.current&1|2),e.child}t=t.sibling}a.tail!==null&&vr()>Lm&&(e.flags|=128,r=!0,Rg(a,!1),e.lanes=4194304)}else{if(!r)if(t=Ow(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Rg(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Yn)return xs(e),null}else 2*vr()-a.renderingStartTime>Lm&&n!==1073741824&&(e.flags|=128,r=!0,Rg(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=vr(),e.sibling=null,n=er.current,Mn(er,r?n&1|2:n&1),e):(xs(e),null);case 22:case 23:return Fk(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ei&1073741824&&(xs(e),e.subtreeFlags&6&&(e.flags|=8192)):xs(e),null;case 24:return null;case 25:return null}throw Error(Ae(156,e.tag))}function fae(t,e){switch(xk(e),e.tag){case 1:return yi(e.type)&&Aw(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Mm(),Wn(gi),Wn(Os),Tk(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ak(e),null;case 13:if(Wn(er),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ae(340));Rm()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Wn(er),null;case 4:return Mm(),null;case 10:return jk(e.type._context),null;case 22:case 23:return Fk(),null;case 24:return null;default:return null}}var Xb=!1,Es=!1,mae=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function Lf(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){lr(t,e,r)}else n.current=null}function ST(t,e,n){try{n()}catch(r){lr(t,e,r)}}var LL=!1;function pae(t,e){if(lT=jw,t=f9(),yk(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==a||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++u===s&&(l=o),f===a&&++d===r&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(cT={focusedElem:t,selectionRange:n},jw=!1,Qe=e;Qe!==null;)if(e=Qe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Qe=t;else for(;Qe!==null;){e=Qe;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var g=v.memoizedProps,y=v.memoizedState,b=e.stateNode,x=b.getSnapshotBeforeUpdate(e.elementType===e.type?g:Ia(e.type,g),y);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ae(163))}}catch(T){lr(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,Qe=t;break}Qe=e.return}return v=LL,LL=!1,v}function Ey(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&ST(e,n,a)}s=s.next}while(s!==r)}}function rN(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ET(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function cq(t){var e=t.alternate;e!==null&&(t.alternate=null,cq(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xo],delete e[iv],delete e[hT],delete e[Xie],delete e[Zie])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function uq(t){return t.tag===5||t.tag===3||t.tag===4}function $L(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||uq(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function AT(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ew));else if(r!==4&&(t=t.child,t!==null))for(AT(t,e,n),t=t.sibling;t!==null;)AT(t,e,n),t=t.sibling}function TT(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(TT(t,e,n),t=t.sibling;t!==null;)TT(t,e,n),t=t.sibling}var os=null,Oa=!1;function cc(t,e,n){for(n=n.child;n!==null;)dq(t,e,n),n=n.sibling}function dq(t,e,n){if(Eo&&typeof Eo.onCommitFiberUnmount=="function")try{Eo.onCommitFiberUnmount(Yj,n)}catch{}switch(n.tag){case 5:Es||Lf(n,e);case 6:var r=os,s=Oa;os=null,cc(t,e,n),os=r,Oa=s,os!==null&&(Oa?(t=os,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):os.removeChild(n.stateNode));break;case 18:os!==null&&(Oa?(t=os,n=n.stateNode,t.nodeType===8?G1(t.parentNode,n):t.nodeType===1&&G1(t,n),ev(t)):G1(os,n.stateNode));break;case 4:r=os,s=Oa,os=n.stateNode.containerInfo,Oa=!0,cc(t,e,n),os=r,Oa=s;break;case 0:case 11:case 14:case 15:if(!Es&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&ST(n,e,o),s=s.next}while(s!==r)}cc(t,e,n);break;case 1:if(!Es&&(Lf(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){lr(n,e,l)}cc(t,e,n);break;case 21:cc(t,e,n);break;case 22:n.mode&1?(Es=(r=Es)||n.memoizedState!==null,cc(t,e,n),Es=r):cc(t,e,n);break;default:cc(t,e,n)}}function FL(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new mae),e.forEach(function(r){var s=Nae.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Sa(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:os=l.stateNode,Oa=!1;break e;case 3:os=l.stateNode.containerInfo,Oa=!0;break e;case 4:os=l.stateNode.containerInfo,Oa=!0;break e}l=l.return}if(os===null)throw Error(Ae(160));dq(a,o,s),os=null,Oa=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){lr(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hq(e,t),e=e.sibling}function hq(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Sa(e,t),ho(t),r&4){try{Ey(3,t,t.return),rN(3,t)}catch(g){lr(t,t.return,g)}try{Ey(5,t,t.return)}catch(g){lr(t,t.return,g)}}break;case 1:Sa(e,t),ho(t),r&512&&n!==null&&Lf(n,n.return);break;case 5:if(Sa(e,t),ho(t),r&512&&n!==null&&Lf(n,n.return),t.flags&32){var s=t.stateNode;try{Qy(s,"")}catch(g){lr(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&Oz(s,a),ZA(l,o);var u=ZA(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?Fz(s,h):d==="dangerouslySetInnerHTML"?Lz(s,h):d==="children"?Qy(s,h):sk(s,d,h,u)}switch(l){case"input":KA(s,a);break;case"textarea":Mz(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?Qf(s,!!a.multiple,m,!1):f!==!!a.multiple&&(a.defaultValue!=null?Qf(s,!!a.multiple,a.defaultValue,!0):Qf(s,!!a.multiple,a.multiple?[]:"",!1))}s[iv]=a}catch(g){lr(t,t.return,g)}}break;case 6:if(Sa(e,t),ho(t),r&4){if(t.stateNode===null)throw Error(Ae(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(g){lr(t,t.return,g)}}break;case 3:if(Sa(e,t),ho(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ev(e.containerInfo)}catch(g){lr(t,t.return,g)}break;case 4:Sa(e,t),ho(t);break;case 13:Sa(e,t),ho(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Lk=vr())),r&4&&FL(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Es=(u=Es)||d,Sa(e,t),Es=u):Sa(e,t),ho(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Qe=t,d=t.child;d!==null;){for(h=Qe=d;Qe!==null;){switch(f=Qe,m=f.child,f.tag){case 0:case 11:case 14:case 15:Ey(4,f,f.return);break;case 1:Lf(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(g){lr(r,n,g)}}break;case 5:Lf(f,f.return);break;case 22:if(f.memoizedState!==null){BL(h);continue}}m!==null?(m.return=f,Qe=m):BL(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=$z("display",o))}catch(g){lr(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){lr(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Sa(e,t),ho(t),r&4&&FL(t);break;case 21:break;default:Sa(e,t),ho(t)}}function ho(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(uq(n)){var r=n;break e}n=n.return}throw Error(Ae(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Qy(s,""),r.flags&=-33);var a=$L(t);TT(t,a,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=$L(t);AT(t,l,o);break;default:throw Error(Ae(161))}}catch(c){lr(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function gae(t,e,n){Qe=t,fq(t)}function fq(t,e,n){for(var r=(t.mode&1)!==0;Qe!==null;){var s=Qe,a=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Xb;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Es;l=Xb;var u=Es;if(Xb=o,(Es=c)&&!u)for(Qe=s;Qe!==null;)o=Qe,c=o.child,o.tag===22&&o.memoizedState!==null?UL(s):c!==null?(c.return=o,Qe=c):UL(s);for(;a!==null;)Qe=a,fq(a),a=a.sibling;Qe=s,Xb=l,Es=u}VL(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,Qe=a):VL(t)}}function VL(t){for(;Qe!==null;){var e=Qe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Es||rN(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Es)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ia(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&NL(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}NL(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&ev(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ae(163))}Es||e.flags&512&&ET(e)}catch(f){lr(e,e.return,f)}}if(e===t){Qe=null;break}if(n=e.sibling,n!==null){n.return=e.return,Qe=n;break}Qe=e.return}}function BL(t){for(;Qe!==null;){var e=Qe;if(e===t){Qe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Qe=n;break}Qe=e.return}}function UL(t){for(;Qe!==null;){var e=Qe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rN(4,e)}catch(c){lr(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){lr(e,s,c)}}var a=e.return;try{ET(e)}catch(c){lr(e,a,c)}break;case 5:var o=e.return;try{ET(e)}catch(c){lr(e,o,c)}}}catch(c){lr(e,e.return,c)}if(e===t){Qe=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Qe=l;break}Qe=e.return}}var yae=Math.ceil,Lw=Hl.ReactCurrentDispatcher,Mk=Hl.ReactCurrentOwner,ra=Hl.ReactCurrentBatchConfig,ln=0,Jr=null,Tr=null,hs=0,Ei=0,$f=Uu(0),Br=0,dv=null,uh=0,sN=0,Dk=0,Ay=null,li=null,Lk=0,Lm=1/0,sl=null,$w=!1,CT=null,ru=null,Zb=!1,Wc=null,Fw=0,Ty=0,PT=null,W0=-1,H0=0;function Ys(){return ln&6?vr():W0!==-1?W0:W0=vr()}function su(t){return t.mode&1?ln&2&&hs!==0?hs&-hs:eae.transition!==null?(H0===0&&(H0=Xz()),H0):(t=wn,t!==0||(t=window.event,t=t===void 0?16:s9(t.type)),t):1}function Wa(t,e,n,r){if(50<Ty)throw Ty=0,PT=null,Error(Ae(185));Px(t,n,r),(!(ln&2)||t!==Jr)&&(t===Jr&&(!(ln&2)&&(sN|=n),Br===4&&Ac(t,hs)),vi(t,r),n===1&&ln===0&&!(e.mode&1)&&(Lm=vr()+500,eN&&zu()))}function vi(t,e){var n=t.callbackNode;eie(t,e);var r=_w(t,t===Jr?hs:0);if(r===0)n!==null&&XD(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&XD(n),e===1)t.tag===0?Jie(zL.bind(null,t)):j9(zL.bind(null,t)),Yie(function(){!(ln&6)&&zu()}),n=null;else{switch(Zz(r)){case 1:n=ck;break;case 4:n=Yz;break;case 16:n=ww;break;case 536870912:n=Qz;break;default:n=ww}n=wq(n,mq.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function mq(t,e){if(W0=-1,H0=0,ln&6)throw Error(Ae(327));var n=t.callbackNode;if(tm()&&t.callbackNode!==n)return null;var r=_w(t,t===Jr?hs:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Vw(t,r);else{e=r;var s=ln;ln|=2;var a=gq();(Jr!==t||hs!==e)&&(sl=null,Lm=vr()+500,Xd(t,e));do try{bae();break}catch(l){pq(t,l)}while(!0);_k(),Lw.current=a,ln=s,Tr!==null?e=0:(Jr=null,hs=0,e=Br)}if(e!==0){if(e===2&&(s=rT(t),s!==0&&(r=s,e=IT(t,s))),e===1)throw n=dv,Xd(t,0),Ac(t,r),vi(t,vr()),n;if(e===6)Ac(t,r);else{if(s=t.current.alternate,!(r&30)&&!vae(s)&&(e=Vw(t,r),e===2&&(a=rT(t),a!==0&&(r=a,e=IT(t,a))),e===1))throw n=dv,Xd(t,0),Ac(t,r),vi(t,vr()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Ae(345));case 2:wd(t,li,sl);break;case 3:if(Ac(t,r),(r&130023424)===r&&(e=Lk+500-vr(),10<e)){if(_w(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ys(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=dT(wd.bind(null,t,li,sl),e);break}wd(t,li,sl);break;case 4:if(Ac(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-qa(r);a=1<<o,o=e[o],o>s&&(s=o),r&=~a}if(r=s,r=vr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*yae(r/1960))-r,10<r){t.timeoutHandle=dT(wd.bind(null,t,li,sl),r);break}wd(t,li,sl);break;case 5:wd(t,li,sl);break;default:throw Error(Ae(329))}}}return vi(t,vr()),t.callbackNode===n?mq.bind(null,t):null}function IT(t,e){var n=Ay;return t.current.memoizedState.isDehydrated&&(Xd(t,e).flags|=256),t=Vw(t,e),t!==2&&(e=li,li=n,e!==null&&kT(e)),t}function kT(t){li===null?li=t:li.push.apply(li,t)}function vae(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!Xa(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ac(t,e){for(e&=~Dk,e&=~sN,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qa(e),r=1<<n;t[n]=-1,e&=~r}}function zL(t){if(ln&6)throw Error(Ae(327));tm();var e=_w(t,0);if(!(e&1))return vi(t,vr()),null;var n=Vw(t,e);if(t.tag!==0&&n===2){var r=rT(t);r!==0&&(e=r,n=IT(t,r))}if(n===1)throw n=dv,Xd(t,0),Ac(t,e),vi(t,vr()),n;if(n===6)throw Error(Ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wd(t,li,sl),vi(t,vr()),null}function $k(t,e){var n=ln;ln|=1;try{return t(e)}finally{ln=n,ln===0&&(Lm=vr()+500,eN&&zu())}}function dh(t){Wc!==null&&Wc.tag===0&&!(ln&6)&&tm();var e=ln;ln|=1;var n=ra.transition,r=wn;try{if(ra.transition=null,wn=1,t)return t()}finally{wn=r,ra.transition=n,ln=e,!(ln&6)&&zu()}}function Fk(){Ei=$f.current,Wn($f)}function Xd(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Gie(n)),Tr!==null)for(n=Tr.return;n!==null;){var r=n;switch(xk(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Aw();break;case 3:Mm(),Wn(gi),Wn(Os),Tk();break;case 5:Ak(r);break;case 4:Mm();break;case 13:Wn(er);break;case 19:Wn(er);break;case 10:jk(r.type._context);break;case 22:case 23:Fk()}n=n.return}if(Jr=t,Tr=t=iu(t.current,null),hs=Ei=e,Br=0,dv=null,Dk=sN=uh=0,li=Ay=null,Pd!==null){for(e=0;e<Pd.length;e++)if(n=Pd[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=s,r.next=o}n.pending=r}Pd=null}return t}function pq(t,e){do{var n=Tr;try{if(_k(),U0.current=Dw,Mw){for(var r=nr.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Mw=!1}if(ch=0,Xr=$r=nr=null,Sy=!1,lv=0,Mk.current=null,n===null||n.return===null){Br=1,dv=e,Tr=null;break}e:{var a=t,o=n.return,l=n,c=e;if(e=hs,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=PL(o);if(m!==null){m.flags&=-257,IL(m,o,l,a,e),m.mode&1&&CL(a,u,e),e=m,c=u;var v=e.updateQueue;if(v===null){var g=new Set;g.add(c),e.updateQueue=g}else v.add(c);break e}else{if(!(e&1)){CL(a,u,e),Vk();break e}c=Error(Ae(426))}}else if(Yn&&l.mode&1){var y=PL(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),IL(y,o,l,a,e),bk(Dm(c,l));break e}}a=c=Dm(c,l),Br!==4&&(Br=2),Ay===null?Ay=[a]:Ay.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var b=Z9(a,c,e);jL(a,b);break e;case 1:l=c;var x=a.type,S=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ru===null||!ru.has(S)))){a.flags|=65536,e&=-e,a.lanes|=e;var T=J9(a,l,e);jL(a,T);break e}}a=a.return}while(a!==null)}vq(n)}catch(_){e=_,Tr===n&&n!==null&&(Tr=n=n.return);continue}break}while(!0)}function gq(){var t=Lw.current;return Lw.current=Dw,t===null?Dw:t}function Vk(){(Br===0||Br===3||Br===2)&&(Br=4),Jr===null||!(uh&268435455)&&!(sN&268435455)||Ac(Jr,hs)}function Vw(t,e){var n=ln;ln|=2;var r=gq();(Jr!==t||hs!==e)&&(sl=null,Xd(t,e));do try{xae();break}catch(s){pq(t,s)}while(!0);if(_k(),ln=n,Lw.current=r,Tr!==null)throw Error(Ae(261));return Jr=null,hs=0,Br}function xae(){for(;Tr!==null;)yq(Tr)}function bae(){for(;Tr!==null&&!Wse();)yq(Tr)}function yq(t){var e=bq(t.alternate,t,Ei);t.memoizedProps=t.pendingProps,e===null?vq(t):Tr=e,Mk.current=null}function vq(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=fae(n,e),n!==null){n.flags&=32767,Tr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Br=6,Tr=null;return}}else if(n=hae(n,e,Ei),n!==null){Tr=n;return}if(e=e.sibling,e!==null){Tr=e;return}Tr=e=t}while(e!==null);Br===0&&(Br=5)}function wd(t,e,n){var r=wn,s=ra.transition;try{ra.transition=null,wn=1,wae(t,e,n,r)}finally{ra.transition=s,wn=r}return null}function wae(t,e,n,r){do tm();while(Wc!==null);if(ln&6)throw Error(Ae(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ae(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(tie(t,a),t===Jr&&(Tr=Jr=null,hs=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zb||(Zb=!0,wq(ww,function(){return tm(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=ra.transition,ra.transition=null;var o=wn;wn=1;var l=ln;ln|=4,Mk.current=null,pae(t,n),hq(n,t),Bie(cT),jw=!!lT,cT=lT=null,t.current=n,gae(n),Hse(),ln=l,wn=o,ra.transition=a}else t.current=n;if(Zb&&(Zb=!1,Wc=t,Fw=s),a=t.pendingLanes,a===0&&(ru=null),Yse(n.stateNode),vi(t,vr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if($w)throw $w=!1,t=CT,CT=null,t;return Fw&1&&t.tag!==0&&tm(),a=t.pendingLanes,a&1?t===PT?Ty++:(Ty=0,PT=t):Ty=0,zu(),null}function tm(){if(Wc!==null){var t=Zz(Fw),e=ra.transition,n=wn;try{if(ra.transition=null,wn=16>t?16:t,Wc===null)var r=!1;else{if(t=Wc,Wc=null,Fw=0,ln&6)throw Error(Ae(331));var s=ln;for(ln|=4,Qe=t.current;Qe!==null;){var a=Qe,o=a.child;if(Qe.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Qe=u;Qe!==null;){var d=Qe;switch(d.tag){case 0:case 11:case 15:Ey(8,d,a)}var h=d.child;if(h!==null)h.return=d,Qe=h;else for(;Qe!==null;){d=Qe;var f=d.sibling,m=d.return;if(cq(d),d===u){Qe=null;break}if(f!==null){f.return=m,Qe=f;break}Qe=m}}}var v=a.alternate;if(v!==null){var g=v.child;if(g!==null){v.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}Qe=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Qe=o;else e:for(;Qe!==null;){if(a=Qe,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ey(9,a,a.return)}var b=a.sibling;if(b!==null){b.return=a.return,Qe=b;break e}Qe=a.return}}var x=t.current;for(Qe=x;Qe!==null;){o=Qe;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,Qe=S;else e:for(o=x;Qe!==null;){if(l=Qe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:rN(9,l)}}catch(_){lr(l,l.return,_)}if(l===o){Qe=null;break e}var T=l.sibling;if(T!==null){T.return=l.return,Qe=T;break e}Qe=l.return}}if(ln=s,zu(),Eo&&typeof Eo.onPostCommitFiberRoot=="function")try{Eo.onPostCommitFiberRoot(Yj,t)}catch{}r=!0}return r}finally{wn=n,ra.transition=e}}return!1}function qL(t,e,n){e=Dm(n,e),e=Z9(t,e,1),t=nu(t,e,1),e=Ys(),t!==null&&(Px(t,1,e),vi(t,e))}function lr(t,e,n){if(t.tag===3)qL(t,t,n);else for(;e!==null;){if(e.tag===3){qL(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ru===null||!ru.has(r))){t=Dm(n,t),t=J9(e,t,1),e=nu(e,t,1),t=Ys(),e!==null&&(Px(e,1,t),vi(e,t));break}}e=e.return}}function _ae(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ys(),t.pingedLanes|=t.suspendedLanes&n,Jr===t&&(hs&n)===n&&(Br===4||Br===3&&(hs&130023424)===hs&&500>vr()-Lk?Xd(t,0):Dk|=n),vi(t,e)}function xq(t,e){e===0&&(t.mode&1?(e=Ub,Ub<<=1,!(Ub&130023424)&&(Ub=4194304)):e=1);var n=Ys();t=Al(t,e),t!==null&&(Px(t,e,n),vi(t,n))}function jae(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),xq(t,n)}function Nae(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ae(314))}r!==null&&r.delete(e),xq(t,n)}var bq;bq=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||gi.current)fi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return fi=!1,dae(t,e,n);fi=!!(t.flags&131072)}else fi=!1,Yn&&e.flags&1048576&&N9(e,Pw,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;q0(t,e),t=e.pendingProps;var s=km(e,Os.current);em(e,n),s=Pk(null,e,r,t,s,n);var a=Ik();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,yi(r)?(a=!0,Tw(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Sk(e),s.updater=nN,e.stateNode=s,s._reactInternals=e,vT(e,r,t,n),e=wT(null,e,r,!0,a,n)):(e.tag=0,Yn&&a&&vk(e),Bs(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(q0(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Eae(r),t=Ia(r,t),s){case 0:e=bT(null,e,r,t,n);break e;case 1:e=OL(null,e,r,t,n);break e;case 11:e=kL(null,e,r,t,n);break e;case 14:e=RL(null,e,r,Ia(r.type,t),n);break e}throw Error(Ae(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ia(r,s),bT(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ia(r,s),OL(t,e,r,s,n);case 3:e:{if(rq(e),t===null)throw Error(Ae(387));r=e.pendingProps,a=e.memoizedState,s=a.element,P9(t,e),Rw(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=Dm(Error(Ae(423)),e),e=ML(t,e,r,n,s);break e}else if(r!==s){s=Dm(Error(Ae(424)),e),e=ML(t,e,r,n,s);break e}else for(ki=tu(e.stateNode.containerInfo.firstChild),Mi=e,Yn=!0,La=null,n=T9(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Rm(),r===s){e=Tl(t,e,n);break e}Bs(t,e,r,n)}e=e.child}return e;case 5:return I9(e),t===null&&pT(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,uT(r,s)?o=null:a!==null&&uT(r,a)&&(e.flags|=32),nq(t,e),Bs(t,e,o,n),e.child;case 6:return t===null&&pT(e),null;case 13:return sq(t,e,n);case 4:return Ek(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Om(e,null,r,n):Bs(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ia(r,s),kL(t,e,r,s,n);case 7:return Bs(t,e,e.pendingProps,n),e.child;case 8:return Bs(t,e,e.pendingProps.children,n),e.child;case 12:return Bs(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,Mn(Iw,r._currentValue),r._currentValue=o,a!==null)if(Xa(a.value,o)){if(a.children===s.children&&!gi.current){e=Tl(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=vl(-1,n&-n),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),gT(a.return,n,e),l.lanes|=n;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Ae(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),gT(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Bs(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,em(e,n),s=da(s),r=r(s),e.flags|=1,Bs(t,e,r,n),e.child;case 14:return r=e.type,s=Ia(r,e.pendingProps),s=Ia(r.type,s),RL(t,e,r,s,n);case 15:return eq(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ia(r,s),q0(t,e),e.tag=1,yi(r)?(t=!0,Tw(e)):t=!1,em(e,n),X9(e,r,s),vT(e,r,s,n),wT(null,e,r,!0,t,n);case 19:return iq(t,e,n);case 22:return tq(t,e,n)}throw Error(Ae(156,e.tag))};function wq(t,e){return Gz(t,e)}function Sae(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ea(t,e,n,r){return new Sae(t,e,n,r)}function Bk(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Eae(t){if(typeof t=="function")return Bk(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ak)return 11;if(t===ok)return 14}return 2}function iu(t,e){var n=t.alternate;return n===null?(n=ea(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function K0(t,e,n,r,s,a){var o=2;if(r=t,typeof t=="function")Bk(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Tf:return Zd(n.children,s,a,e);case ik:o=8,s|=8;break;case UA:return t=ea(12,n,e,s|2),t.elementType=UA,t.lanes=a,t;case zA:return t=ea(13,n,e,s),t.elementType=zA,t.lanes=a,t;case qA:return t=ea(19,n,e,s),t.elementType=qA,t.lanes=a,t;case Iz:return iN(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Cz:o=10;break e;case Pz:o=9;break e;case ak:o=11;break e;case ok:o=14;break e;case wc:o=16,r=null;break e}throw Error(Ae(130,t==null?t:typeof t,""))}return e=ea(o,n,e,s),e.elementType=t,e.type=r,e.lanes=a,e}function Zd(t,e,n,r){return t=ea(7,t,r,e),t.lanes=n,t}function iN(t,e,n,r){return t=ea(22,t,r,e),t.elementType=Iz,t.lanes=n,t.stateNode={isHidden:!1},t}function nE(t,e,n){return t=ea(6,t,null,e),t.lanes=n,t}function rE(t,e,n){return e=ea(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Aae(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=L1(0),this.expirationTimes=L1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=L1(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Uk(t,e,n,r,s,a,o,l,c){return t=new Aae(t,e,n,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=ea(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sk(a),t}function Tae(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Af,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _q(t){if(!t)return yu;t=t._reactInternals;e:{if(Bh(t)!==t||t.tag!==1)throw Error(Ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(yi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ae(171))}if(t.tag===1){var n=t.type;if(yi(n))return _9(t,n,e)}return e}function jq(t,e,n,r,s,a,o,l,c){return t=Uk(n,r,!0,t,s,a,o,l,c),t.context=_q(null),n=t.current,r=Ys(),s=su(n),a=vl(r,s),a.callback=e??null,nu(n,a,s),t.current.lanes=s,Px(t,s,r),vi(t,r),t}function aN(t,e,n,r){var s=e.current,a=Ys(),o=su(s);return n=_q(n),e.context===null?e.context=n:e.pendingContext=n,e=vl(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=nu(s,e,o),t!==null&&(Wa(t,s,o,a),B0(t,s,o)),o}function Bw(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function WL(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zk(t,e){WL(t,e),(t=t.alternate)&&WL(t,e)}function Cae(){return null}var Nq=typeof reportError=="function"?reportError:function(t){console.error(t)};function qk(t){this._internalRoot=t}oN.prototype.render=qk.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ae(409));aN(t,e,null,null)};oN.prototype.unmount=qk.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;dh(function(){aN(null,t,null,null)}),e[El]=null}};function oN(t){this._internalRoot=t}oN.prototype.unstable_scheduleHydration=function(t){if(t){var e=t9();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ec.length&&e!==0&&e<Ec[n].priority;n++);Ec.splice(n,0,t),n===0&&r9(t)}};function Wk(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function lN(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function HL(){}function Pae(t,e,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var u=Bw(o);a.call(u)}}var o=jq(e,r,t,0,null,!1,!1,"",HL);return t._reactRootContainer=o,t[El]=o.current,rv(t.nodeType===8?t.parentNode:t),dh(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Bw(c);l.call(u)}}var c=Uk(t,0,!1,null,null,!1,!1,"",HL);return t._reactRootContainer=c,t[El]=c.current,rv(t.nodeType===8?t.parentNode:t),dh(function(){aN(e,c,n,r)}),c}function cN(t,e,n,r,s){var a=n._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var c=Bw(o);l.call(c)}}aN(e,o,t,s)}else o=Pae(n,e,t,s,r);return Bw(o)}Jz=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=iy(e.pendingLanes);n!==0&&(uk(e,n|1),vi(e,vr()),!(ln&6)&&(Lm=vr()+500,zu()))}break;case 13:dh(function(){var r=Al(t,1);if(r!==null){var s=Ys();Wa(r,t,1,s)}}),zk(t,1)}};dk=function(t){if(t.tag===13){var e=Al(t,134217728);if(e!==null){var n=Ys();Wa(e,t,134217728,n)}zk(t,134217728)}};e9=function(t){if(t.tag===13){var e=su(t),n=Al(t,e);if(n!==null){var r=Ys();Wa(n,t,e,r)}zk(t,e)}};t9=function(){return wn};n9=function(t,e){var n=wn;try{return wn=t,e()}finally{wn=n}};eT=function(t,e,n){switch(e){case"input":if(KA(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Jj(r);if(!s)throw Error(Ae(90));Rz(r),KA(r,s)}}}break;case"textarea":Mz(t,n);break;case"select":e=n.value,e!=null&&Qf(t,!!n.multiple,e,!1)}};Uz=$k;zz=dh;var Iae={usingClientEntryPoint:!1,Events:[kx,kf,Jj,Vz,Bz,$k]},Og={findFiberByHostInstance:Cd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kae={bundleType:Og.bundleType,version:Og.version,rendererPackageName:Og.rendererPackageName,rendererConfig:Og.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hl.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Hz(t),t===null?null:t.stateNode},findFiberByHostInstance:Og.findFiberByHostInstance||Cae,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jb.isDisabled&&Jb.supportsFiber)try{Yj=Jb.inject(kae),Eo=Jb}catch{}}Bi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Iae;Bi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wk(e))throw Error(Ae(200));return Tae(t,e,null,n)};Bi.createRoot=function(t,e){if(!Wk(t))throw Error(Ae(299));var n=!1,r="",s=Nq;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Uk(t,1,!1,null,null,n,!1,r,s),t[El]=e.current,rv(t.nodeType===8?t.parentNode:t),new qk(e)};Bi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ae(188)):(t=Object.keys(t).join(","),Error(Ae(268,t)));return t=Hz(e),t=t===null?null:t.stateNode,t};Bi.flushSync=function(t){return dh(t)};Bi.hydrate=function(t,e,n){if(!lN(e))throw Error(Ae(200));return cN(null,t,e,!0,n)};Bi.hydrateRoot=function(t,e,n){if(!Wk(t))throw Error(Ae(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",o=Nq;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=jq(e,null,t,1,n??null,s,!1,a,o),t[El]=e.current,rv(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new oN(e)};Bi.render=function(t,e,n){if(!lN(e))throw Error(Ae(200));return cN(null,t,e,!1,n)};Bi.unmountComponentAtNode=function(t){if(!lN(t))throw Error(Ae(40));return t._reactRootContainer?(dh(function(){cN(null,null,t,!1,function(){t._reactRootContainer=null,t[El]=null})}),!0):!1};Bi.unstable_batchedUpdates=$k;Bi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!lN(n))throw Error(Ae(200));if(t==null||t._reactInternals===void 0)throw Error(Ae(38));return cN(t,e,n,!1,r)};Bi.version="18.3.1-next-f1338f8080-20240426";function Sq(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sq)}catch(t){console.error(t)}}Sq(),Sz.exports=Bi;var Uh=Sz.exports;const Eq=vn(Uh);var Aq,KL=Uh;Aq=KL.createRoot,KL.hydrateRoot;const Rae="modulepreload",Oae=function(t){return"/"+t},GL={},Ox=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=Oae(c),c in GL)return;GL[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Rae,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},Mae=1,Dae=1e6;let sE=0;function Lae(){return sE=(sE+1)%Number.MAX_SAFE_INTEGER,sE.toString()}const iE=new Map,YL=t=>{if(iE.has(t))return;const e=setTimeout(()=>{iE.delete(t),Cy({type:"REMOVE_TOAST",toastId:t})},Dae);iE.set(t,e)},$ae=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,Mae)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?YL(n):t.toasts.forEach(r=>{YL(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},G0=[];let Y0={toasts:[]};function Cy(t){Y0=$ae(Y0,t),G0.forEach(e=>{e(Y0)})}function Fae({...t}){const e=Lae(),n=s=>Cy({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Cy({type:"DISMISS_TOAST",toastId:e});return Cy({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Vae(){const[t,e]=N.useState(Y0);return N.useEffect(()=>(G0.push(e),()=>{const n=G0.indexOf(e);n>-1&&G0.splice(n,1)}),[t]),{...t,toast:Fae,dismiss:n=>Cy({type:"DISMISS_TOAST",toastId:n})}}function ke(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function QL(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function uN(...t){return e=>{let n=!1;const r=t.map(s=>{const a=QL(s,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():QL(t[s],null)}}}}function Dt(...t){return N.useCallback(uN(...t),t)}function Bae(t,e){const n=N.createContext(e),r=a=>{const{children:o,...l}=a,c=N.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(a){const o=N.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,s]}function ps(t,e=[]){let n=[];function r(a,o){const l=N.createContext(o),c=n.length;n=[...n,o];const u=h=>{var b;const{scope:f,children:m,...v}=h,g=((b=f==null?void 0:f[t])==null?void 0:b[c])||l,y=N.useMemo(()=>v,Object.values(v));return i.jsx(g.Provider,{value:y,children:m})};u.displayName=a+"Provider";function d(h,f){var g;const m=((g=f==null?void 0:f[t])==null?void 0:g[c])||l,v=N.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[u,d]}const s=()=>{const a=n.map(o=>N.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return N.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,Uae(s,...e)]}function Uae(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return N.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function hh(t){const e=zae(t),n=N.forwardRef((r,s)=>{const{children:a,...o}=r,l=N.Children.toArray(a),c=l.find(qae);if(c){const u=c.props.children,d=l.map(h=>h===c?N.Children.count(u)>1?N.Children.only(null):N.isValidElement(u)?u.props.children:null:h);return i.jsx(e,{...o,ref:s,children:N.isValidElement(u)?N.cloneElement(u,void 0,d):null})}return i.jsx(e,{...o,ref:s,children:a})});return n.displayName=`${t}.Slot`,n}var zh=hh("Slot");function zae(t){const e=N.forwardRef((n,r)=>{const{children:s,...a}=n;if(N.isValidElement(s)){const o=Hae(s),l=Wae(a,s.props);return s.type!==N.Fragment&&(l.ref=r?uN(r,o):o),N.cloneElement(s,l)}return N.Children.count(s)>1?N.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Tq=Symbol("radix.slottable");function Cq(t){const e=({children:n})=>i.jsx(i.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=Tq,e}function qae(t){return N.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Tq}function Wae(t,e){const n={...e};for(const r in e){const s=t[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...t,...n}}function Hae(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function dN(t){const e=t+"CollectionProvider",[n,r]=ps(e),[s,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:y,children:b}=g,x=F.useRef(null),S=F.useRef(new Map).current;return i.jsx(s,{scope:y,itemMap:S,collectionRef:x,children:b})};o.displayName=e;const l=t+"CollectionSlot",c=hh(l),u=F.forwardRef((g,y)=>{const{scope:b,children:x}=g,S=a(l,b),T=Dt(y,S.collectionRef);return i.jsx(c,{ref:T,children:x})});u.displayName=l;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=hh(d),m=F.forwardRef((g,y)=>{const{scope:b,children:x,...S}=g,T=F.useRef(null),_=Dt(y,T),C=a(d,b);return F.useEffect(()=>(C.itemMap.set(T,{ref:T,...S}),()=>void C.itemMap.delete(T))),i.jsx(f,{[h]:"",ref:_,children:x})});m.displayName=d;function v(g){const y=a(t+"CollectionConsumer",g);return F.useCallback(()=>{const x=y.collectionRef.current;if(!x)return[];const S=Array.from(x.querySelectorAll(`[${h}]`));return Array.from(y.itemMap.values()).sort((C,E)=>S.indexOf(C.ref.current)-S.indexOf(E.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},v,r]}var Kae=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Je=Kae.reduce((t,e)=>{const n=hh(`Primitive.${e}`),r=N.forwardRef((s,a)=>{const{asChild:o,...l}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Hk(t,e){t&&Uh.flushSync(()=>t.dispatchEvent(e))}function dr(t){const e=N.useRef(t);return N.useEffect(()=>{e.current=t}),N.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Gae(t,e=globalThis==null?void 0:globalThis.document){const n=dr(t);N.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var Yae="DismissableLayer",RT="dismissableLayer.update",Qae="dismissableLayer.pointerDownOutside",Xae="dismissableLayer.focusOutside",XL,Pq=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Op=N.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=t,u=N.useContext(Pq),[d,h]=N.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=N.useState({}),v=Dt(e,E=>h(E)),g=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=g.indexOf(y),x=d?g.indexOf(d):-1,S=u.layersWithOutsidePointerEventsDisabled.size>0,T=x>=b,_=Jae(E=>{const p=E.target,w=[...u.branches].some(A=>A.contains(p));!T||w||(s==null||s(E),o==null||o(E),E.defaultPrevented||l==null||l())},f),C=eoe(E=>{const p=E.target;[...u.branches].some(A=>A.contains(p))||(a==null||a(E),o==null||o(E),E.defaultPrevented||l==null||l())},f);return Gae(E=>{x===u.layers.size-1&&(r==null||r(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},f),N.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(XL=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),ZL(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=XL)}},[d,f,n,u]),N.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),ZL())},[d,u]),N.useEffect(()=>{const E=()=>m({});return document.addEventListener(RT,E),()=>document.removeEventListener(RT,E)},[]),i.jsx(Je.div,{...c,ref:v,style:{pointerEvents:S?T?"auto":"none":void 0,...t.style},onFocusCapture:ke(t.onFocusCapture,C.onFocusCapture),onBlurCapture:ke(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:ke(t.onPointerDownCapture,_.onPointerDownCapture)})});Op.displayName=Yae;var Zae="DismissableLayerBranch",Iq=N.forwardRef((t,e)=>{const n=N.useContext(Pq),r=N.useRef(null),s=Dt(e,r);return N.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),i.jsx(Je.div,{...t,ref:s})});Iq.displayName=Zae;function Jae(t,e=globalThis==null?void 0:globalThis.document){const n=dr(t),r=N.useRef(!1),s=N.useRef(()=>{});return N.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let c=function(){kq(Qae,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function eoe(t,e=globalThis==null?void 0:globalThis.document){const n=dr(t),r=N.useRef(!1);return N.useEffect(()=>{const s=a=>{a.target&&!r.current&&kq(Xae,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function ZL(){const t=new CustomEvent(RT);document.dispatchEvent(t)}function kq(t,e,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Hk(s,a):s.dispatchEvent(a)}var toe=Op,noe=Iq,fr=globalThis!=null&&globalThis.document?N.useLayoutEffect:()=>{},roe="Portal",Mx=N.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,a]=N.useState(!1);fr(()=>a(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?Eq.createPortal(i.jsx(Je.div,{...r,ref:e}),o):null});Mx.displayName=roe;function soe(t,e){return N.useReducer((n,r)=>e[n][r]??n,t)}var gs=t=>{const{present:e,children:n}=t,r=ioe(e),s=typeof n=="function"?n({present:r.isPresent}):N.Children.only(n),a=Dt(r.ref,aoe(s));return typeof n=="function"||r.isPresent?N.cloneElement(s,{ref:a}):null};gs.displayName="Presence";function ioe(t){const[e,n]=N.useState(),r=N.useRef(null),s=N.useRef(t),a=N.useRef("none"),o=t?"mounted":"unmounted",[l,c]=soe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const u=e0(r.current);a.current=l==="mounted"?u:"none"},[l]),fr(()=>{const u=r.current,d=s.current;if(d!==t){const f=a.current,m=e0(u);t?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),fr(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=m=>{const g=e0(r.current).includes(m.animationName);if(m.target===e&&g&&(c("ANIMATION_END"),!s.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},f=m=>{m.target===e&&(a.current=e0(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:N.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function e0(t){return(t==null?void 0:t.animationName)||"none"}function aoe(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var ooe=tk[" useInsertionEffect ".trim().toString()]||fr;function Za({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,a,o]=loe({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:s;{const d=N.useRef(t!==void 0);N.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const u=N.useCallback(d=>{var h;if(l){const f=coe(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else a(d)},[l,t,a,o]);return[c,u]}function loe({defaultProp:t,onChange:e}){const[n,r]=N.useState(t),s=N.useRef(n),a=N.useRef(e);return ooe(()=>{a.current=e},[e]),N.useEffect(()=>{var o;s.current!==n&&((o=a.current)==null||o.call(a,n),s.current=n)},[n,s]),[n,r,a]}function coe(t){return typeof t=="function"}var Rq=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),uoe="VisuallyHidden",hN=N.forwardRef((t,e)=>i.jsx(Je.span,{...t,ref:e,style:{...Rq,...t.style}}));hN.displayName=uoe;var doe=hN,Kk="ToastProvider",[Gk,hoe,foe]=dN("Toast"),[Oq,jtt]=ps("Toast",[foe]),[moe,fN]=Oq(Kk),Mq=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:o}=t,[l,c]=N.useState(null),[u,d]=N.useState(0),h=N.useRef(!1),f=N.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Kk}\`. Expected non-empty \`string\`.`),i.jsx(Gk.Provider,{scope:e,children:i.jsx(moe,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:a,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:N.useCallback(()=>d(m=>m+1),[]),onToastRemove:N.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};Mq.displayName=Kk;var Dq="ToastViewport",poe=["F8"],OT="toast.viewportPause",MT="toast.viewportResume",Lq=N.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=poe,label:s="Notifications ({hotkey})",...a}=t,o=fN(Dq,n),l=hoe(n),c=N.useRef(null),u=N.useRef(null),d=N.useRef(null),h=N.useRef(null),f=Dt(e,h,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;N.useEffect(()=>{const y=b=>{var S;r.length!==0&&r.every(T=>b[T]||b.code===T)&&((S=h.current)==null||S.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[r]),N.useEffect(()=>{const y=c.current,b=h.current;if(v&&y&&b){const x=()=>{if(!o.isClosePausedRef.current){const C=new CustomEvent(OT);b.dispatchEvent(C),o.isClosePausedRef.current=!0}},S=()=>{if(o.isClosePausedRef.current){const C=new CustomEvent(MT);b.dispatchEvent(C),o.isClosePausedRef.current=!1}},T=C=>{!y.contains(C.relatedTarget)&&S()},_=()=>{y.contains(document.activeElement)||S()};return y.addEventListener("focusin",x),y.addEventListener("focusout",T),y.addEventListener("pointermove",x),y.addEventListener("pointerleave",_),window.addEventListener("blur",x),window.addEventListener("focus",S),()=>{y.removeEventListener("focusin",x),y.removeEventListener("focusout",T),y.removeEventListener("pointermove",x),y.removeEventListener("pointerleave",_),window.removeEventListener("blur",x),window.removeEventListener("focus",S)}}},[v,o.isClosePausedRef]);const g=N.useCallback(({tabbingDirection:y})=>{const x=l().map(S=>{const T=S.ref.current,_=[T,...Toe(T)];return y==="forwards"?_:_.reverse()});return(y==="forwards"?x.reverse():x).flat()},[l]);return N.useEffect(()=>{const y=h.current;if(y){const b=x=>{var _,C,E;const S=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!S){const p=document.activeElement,w=x.shiftKey;if(x.target===y&&w){(_=u.current)==null||_.focus();return}const I=g({tabbingDirection:w?"backwards":"forwards"}),k=I.findIndex(L=>L===p);aE(I.slice(k+1))?x.preventDefault():w?(C=u.current)==null||C.focus():(E=d.current)==null||E.focus()}};return y.addEventListener("keydown",b),()=>y.removeEventListener("keydown",b)}},[l,g]),i.jsxs(noe,{ref:c,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&i.jsx(DT,{ref:u,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"forwards"});aE(y)}}),i.jsx(Gk.Slot,{scope:n,children:i.jsx(Je.ol,{tabIndex:-1,...a,ref:f})}),v&&i.jsx(DT,{ref:d,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"backwards"});aE(y)}})]})});Lq.displayName=Dq;var $q="ToastFocusProxy",DT=N.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,a=fN($q,n);return i.jsx(hN,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=a.viewport)!=null&&u.contains(l))&&r()}})});DT.displayName=$q;var Dx="Toast",goe="toast.swipeStart",yoe="toast.swipeMove",voe="toast.swipeCancel",xoe="toast.swipeEnd",Fq=N.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:a,...o}=t,[l,c]=Za({prop:r,defaultProp:s??!0,onChange:a,caller:Dx});return i.jsx(gs,{present:n||l,children:i.jsx(_oe,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:dr(t.onPause),onResume:dr(t.onResume),onSwipeStart:ke(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ke(t.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:ke(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ke(t.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});Fq.displayName=Dx;var[boe,woe]=Oq(Dx,{onClose(){}}),_oe=N.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...v}=t,g=fN(Dx,n),[y,b]=N.useState(null),x=Dt(e,L=>b(L)),S=N.useRef(null),T=N.useRef(null),_=s||g.duration,C=N.useRef(0),E=N.useRef(_),p=N.useRef(0),{onToastAdd:w,onToastRemove:A}=g,P=dr(()=>{var U;(y==null?void 0:y.contains(document.activeElement))&&((U=g.viewport)==null||U.focus()),o()}),I=N.useCallback(L=>{!L||L===1/0||(window.clearTimeout(p.current),C.current=new Date().getTime(),p.current=window.setTimeout(P,L))},[P]);N.useEffect(()=>{const L=g.viewport;if(L){const U=()=>{I(E.current),u==null||u()},z=()=>{const O=new Date().getTime()-C.current;E.current=E.current-O,window.clearTimeout(p.current),c==null||c()};return L.addEventListener(OT,z),L.addEventListener(MT,U),()=>{L.removeEventListener(OT,z),L.removeEventListener(MT,U)}}},[g.viewport,_,c,u,I]),N.useEffect(()=>{a&&!g.isClosePausedRef.current&&I(_)},[a,_,g.isClosePausedRef,I]),N.useEffect(()=>(w(),()=>A()),[w,A]);const k=N.useMemo(()=>y?Hq(y):null,[y]);return g.viewport?i.jsxs(i.Fragment,{children:[k&&i.jsx(joe,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:k}),i.jsx(boe,{scope:n,onClose:P,children:Uh.createPortal(i.jsx(Gk.ItemSlot,{scope:n,children:i.jsx(toe,{asChild:!0,onEscapeKeyDown:ke(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||P(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(Je.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":g.swipeDirection,...v,ref:x,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ke(t.onKeyDown,L=>{L.key==="Escape"&&(l==null||l(L.nativeEvent),L.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:ke(t.onPointerDown,L=>{L.button===0&&(S.current={x:L.clientX,y:L.clientY})}),onPointerMove:ke(t.onPointerMove,L=>{if(!S.current)return;const U=L.clientX-S.current.x,z=L.clientY-S.current.y,O=!!T.current,$=["left","right"].includes(g.swipeDirection),D=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,K=$?D(0,U):0,ie=$?0:D(0,z),ae=L.pointerType==="touch"?10:2,_e={x:K,y:ie},Le={originalEvent:L,delta:_e};O?(T.current=_e,t0(yoe,h,Le,{discrete:!1})):JL(_e,g.swipeDirection,ae)?(T.current=_e,t0(goe,d,Le,{discrete:!1}),L.target.setPointerCapture(L.pointerId)):(Math.abs(U)>ae||Math.abs(z)>ae)&&(S.current=null)}),onPointerUp:ke(t.onPointerUp,L=>{const U=T.current,z=L.target;if(z.hasPointerCapture(L.pointerId)&&z.releasePointerCapture(L.pointerId),T.current=null,S.current=null,U){const O=L.currentTarget,$={originalEvent:L,delta:U};JL(U,g.swipeDirection,g.swipeThreshold)?t0(xoe,m,$,{discrete:!0}):t0(voe,f,$,{discrete:!0}),O.addEventListener("click",D=>D.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),joe=t=>{const{__scopeToast:e,children:n,...r}=t,s=fN(Dx,e),[a,o]=N.useState(!1),[l,c]=N.useState(!1);return Eoe(()=>o(!0)),N.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(Mx,{asChild:!0,children:i.jsx(hN,{...r,children:a&&i.jsxs(i.Fragment,{children:[s.label," ",n]})})})},Noe="ToastTitle",Vq=N.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return i.jsx(Je.div,{...r,ref:e})});Vq.displayName=Noe;var Soe="ToastDescription",Bq=N.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return i.jsx(Je.div,{...r,ref:e})});Bq.displayName=Soe;var Uq="ToastAction",zq=N.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?i.jsx(Wq,{altText:n,asChild:!0,children:i.jsx(Yk,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Uq}\`. Expected non-empty \`string\`.`),null)});zq.displayName=Uq;var qq="ToastClose",Yk=N.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=woe(qq,n);return i.jsx(Wq,{asChild:!0,children:i.jsx(Je.button,{type:"button",...r,ref:e,onClick:ke(t.onClick,s.onClose)})})});Yk.displayName=qq;var Wq=N.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return i.jsx(Je.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function Hq(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),Aoe(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...Hq(r))}}),e}function t0(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Hk(s,a):s.dispatchEvent(a)}var JL=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),a=r>s;return e==="left"||e==="right"?a&&r>n:!a&&s>n};function Eoe(t=()=>{}){const e=dr(t);fr(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function Aoe(t){return t.nodeType===t.ELEMENT_NODE}function Toe(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function aE(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Coe=Mq,Kq=Lq,Gq=Fq,Yq=Vq,Qq=Bq,Xq=zq,Zq=Yk;function Jq(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=Jq(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function $t(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=Jq(t))&&(r&&(r+=" "),r+=e);return r}const e4=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,t4=$t,qh=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return t4(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:a}=e,o=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],h=a==null?void 0:a[u];if(d===null)return null;const f=e4(d)||e4(h);return s[u][f]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(v=>{let[g,y]=v;return Array.isArray(y)?y.includes({...a,...l}[g]):{...a,...l}[g]===y})?[...u,h,f]:u},[]);return t4(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Poe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),e8=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ioe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const koe=N.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:o,...l},c)=>N.createElement("svg",{ref:c,...Ioe,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:e8("lucide",s),...l},[...o.map(([u,d])=>N.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=(t,e)=>{const n=N.forwardRef(({className:r,...s},a)=>N.createElement(koe,{ref:a,iconNode:e,className:e8(`lucide-${Poe(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Roe=Ie("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ooe=Ie("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Moe=Ie("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=Ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=Ie("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Doe=Ie("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=Ie("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Loe=Ie("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $oe=Ie("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=Ie("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Foe=Ie("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=Ie("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=Ie("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Voe=Ie("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=Ie("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Boe=Ie("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=Ie("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=Ie("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=Ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=Ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=Ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uoe=Ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=Ie("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=Ie("CircleArrowDown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zoe=Ie("CircleArrowUp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=Ie("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=Ie("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8=Ie("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qoe=Ie("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Woe=Ie("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=Ie("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=Ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fh=Ie("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=Ie("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=Ie("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hoe=Ie("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=Ie("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Koe=Ie("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=Ie("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Goe=Ie("FileX",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yoe=Ie("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=Ie("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=Ie("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=Ie("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=Ie("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qoe=Ie("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xoe=Ie("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=Ie("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=Ie("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=Ie("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zoe=Ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=Ie("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Joe=Ie("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ele=Ie("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tle=Ie("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=Ie("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nle=Ie("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rle=Ie("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=Ie("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=Ie("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=Ie("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=Ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=Ie("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=Ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=Ie("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=Ie("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sle=Ie("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=Ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=Ie("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=Ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=Ie("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=Ie("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=Ie("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ile=Ie("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=Ie("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ale=Ie("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=Ie("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=Ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=Ie("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=Ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=Ie("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=Ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ole=Ie("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8=Ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=Ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=Ie("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=Ie("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=Ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),eR="-",lle=t=>{const e=ule(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(eR);return l[0]===""&&l.length!==1&&l.shift(),h8(l,e)||cle(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},h8=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?h8(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const a=t.join(eR);return(o=e.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},c4=/^\[(.+)\]$/,cle=t=>{if(c4.test(t)){const e=c4.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},ule=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return hle(Object.entries(t.classGroups),n).forEach(([a,o])=>{$T(o,r,a,e)}),r},$T=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const a=s===""?e:u4(e,s);a.classGroupId=n;return}if(typeof s=="function"){if(dle(s)){$T(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([a,o])=>{$T(o,u4(e,a),n,r)})})},u4=(t,e)=>{let n=t;return e.split(eR).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},dle=t=>t.isThemeGetter,hle=(t,e)=>e?t.map(([n,r])=>{const s=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[e+o,l])):a);return[n,s]}):t,fle=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(a,o)=>{n.set(a,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return s(a,o),o},set(a,o){n.has(a)?n.set(a,o):s(a,o)}}},f8="!",mle=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],a=e.length,o=l=>{const c=[];let u=0,d=0,h;for(let y=0;y<l.length;y++){let b=l[y];if(u===0){if(b===s&&(r||l.slice(y,y+a)===e)){c.push(l.slice(d,y)),d=y+a;continue}if(b==="/"){h=y;continue}}b==="["?u++:b==="]"&&u--}const f=c.length===0?l:l.substring(d),m=f.startsWith(f8),v=m?f.substring(1):f,g=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:g}};return n?l=>n({className:l,parseClassName:o}):o},ple=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},gle=t=>({cache:fle(t.cacheSize),parseClassName:mle(t),...lle(t)}),yle=/\s+/,vle=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,a=[],o=t.trim().split(yle);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=n(u);let v=!!m,g=r(v?f.substring(0,m):f);if(!g){if(!v){l=u+(l.length>0?" "+l:l);continue}if(g=r(f),!g){l=u+(l.length>0?" "+l:l);continue}v=!1}const y=ple(d).join(":"),b=h?y+f8:y,x=b+g;if(a.includes(x))continue;a.push(x);const S=s(g,v);for(let T=0;T<S.length;++T){const _=S[T];a.push(b+_)}l=u+(l.length>0?" "+l:l)}return l};function xle(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=m8(e))&&(r&&(r+=" "),r+=n);return r}const m8=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=m8(t[r]))&&(n&&(n+=" "),n+=e);return n};function ble(t,...e){let n,r,s,a=o;function o(c){const u=e.reduce((d,h)=>h(d),t());return n=gle(u),r=n.cache.get,s=n.cache.set,a=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=vle(c,n);return s(c,d),d}return function(){return a(xle.apply(null,arguments))}}const Vn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},p8=/^\[(?:([a-z-]+):)?(.+)\]$/i,wle=/^\d+\/\d+$/,_le=new Set(["px","full","screen"]),jle=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Nle=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Sle=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Ele=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ale=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,el=t=>nm(t)||_le.has(t)||wle.test(t),uc=t=>Dp(t,"length",Mle),nm=t=>!!t&&!Number.isNaN(Number(t)),oE=t=>Dp(t,"number",nm),Mg=t=>!!t&&Number.isInteger(Number(t)),Tle=t=>t.endsWith("%")&&nm(t.slice(0,-1)),zt=t=>p8.test(t),dc=t=>jle.test(t),Cle=new Set(["length","size","percentage"]),Ple=t=>Dp(t,Cle,g8),Ile=t=>Dp(t,"position",g8),kle=new Set(["image","url"]),Rle=t=>Dp(t,kle,Lle),Ole=t=>Dp(t,"",Dle),Dg=()=>!0,Dp=(t,e,n)=>{const r=p8.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Mle=t=>Nle.test(t)&&!Sle.test(t),g8=()=>!1,Dle=t=>Ele.test(t),Lle=t=>Ale.test(t),$le=()=>{const t=Vn("colors"),e=Vn("spacing"),n=Vn("blur"),r=Vn("brightness"),s=Vn("borderColor"),a=Vn("borderRadius"),o=Vn("borderSpacing"),l=Vn("borderWidth"),c=Vn("contrast"),u=Vn("grayscale"),d=Vn("hueRotate"),h=Vn("invert"),f=Vn("gap"),m=Vn("gradientColorStops"),v=Vn("gradientColorStopPositions"),g=Vn("inset"),y=Vn("margin"),b=Vn("opacity"),x=Vn("padding"),S=Vn("saturate"),T=Vn("scale"),_=Vn("sepia"),C=Vn("skew"),E=Vn("space"),p=Vn("translate"),w=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",zt,e],I=()=>[zt,e],k=()=>["",el,uc],L=()=>["auto",nm,zt],U=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],z=()=>["solid","dashed","dotted","double","none"],O=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>["start","end","center","between","around","evenly","stretch"],D=()=>["","0",zt],K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ie=()=>[nm,zt];return{cacheSize:500,separator:":",theme:{colors:[Dg],spacing:[el,uc],blur:["none","",dc,zt],brightness:ie(),borderColor:[t],borderRadius:["none","","full",dc,zt],borderSpacing:I(),borderWidth:k(),contrast:ie(),grayscale:D(),hueRotate:ie(),invert:D(),gap:I(),gradientColorStops:[t],gradientColorStopPositions:[Tle,uc],inset:P(),margin:P(),opacity:ie(),padding:I(),saturate:ie(),scale:ie(),sepia:D(),skew:ie(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",zt]}],container:["container"],columns:[{columns:[dc]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...U(),zt]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:w()}],"overscroll-x":[{"overscroll-x":w()}],"overscroll-y":[{"overscroll-y":w()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Mg,zt]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",zt]}],grow:[{grow:D()}],shrink:[{shrink:D()}],order:[{order:["first","last","none",Mg,zt]}],"grid-cols":[{"grid-cols":[Dg]}],"col-start-end":[{col:["auto",{span:["full",Mg,zt]},zt]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[Dg]}],"row-start-end":[{row:["auto",{span:[Mg,zt]},zt]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",zt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",zt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...$()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...$(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...$(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",zt,e]}],"min-w":[{"min-w":[zt,e,"min","max","fit"]}],"max-w":[{"max-w":[zt,e,"none","full","min","max","fit","prose",{screen:[dc]},dc]}],h:[{h:[zt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[zt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[zt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[zt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",dc,uc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",oE]}],"font-family":[{font:[Dg]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",zt]}],"line-clamp":[{"line-clamp":["none",nm,oE]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",el,zt]}],"list-image":[{"list-image":["none",zt]}],"list-style-type":[{list:["none","disc","decimal",zt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",el,uc]}],"underline-offset":[{"underline-offset":["auto",el,zt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",zt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",zt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...U(),Ile]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Ple]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Rle]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...z(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:z()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...z()]}],"outline-offset":[{"outline-offset":[el,zt]}],"outline-w":[{outline:[el,uc]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[el,uc]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",dc,Ole]}],"shadow-color":[{shadow:[Dg]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...O(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":O()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",dc,zt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[S]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",zt]}],duration:[{duration:ie()}],ease:[{ease:["linear","in","out","in-out",zt]}],delay:[{delay:ie()}],animate:[{animate:["none","spin","ping","pulse","bounce",zt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[T]}],"scale-x":[{"scale-x":[T]}],"scale-y":[{"scale-y":[T]}],rotate:[{rotate:[Mg,zt]}],"translate-x":[{"translate-x":[p]}],"translate-y":[{"translate-y":[p]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",zt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",zt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",zt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[el,uc,oE]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Fle=ble($le);function me(...t){return Fle($t(t))}const Vle=Coe,y8=N.forwardRef(({className:t,...e},n)=>i.jsx(Kq,{ref:n,className:me("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));y8.displayName=Kq.displayName;const Ble=qh("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),v8=N.forwardRef(({className:t,variant:e,...n},r)=>i.jsx(Gq,{ref:r,className:me(Ble({variant:e}),t),...n}));v8.displayName=Gq.displayName;const Ule=N.forwardRef(({className:t,...e},n)=>i.jsx(Xq,{ref:n,className:me("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));Ule.displayName=Xq.displayName;const x8=N.forwardRef(({className:t,...e},n)=>i.jsx(Zq,{ref:n,className:me("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:i.jsx(Vm,{className:"h-4 w-4"})}));x8.displayName=Zq.displayName;const b8=N.forwardRef(({className:t,...e},n)=>i.jsx(Yq,{ref:n,className:me("text-sm font-semibold",t),...e}));b8.displayName=Yq.displayName;const w8=N.forwardRef(({className:t,...e},n)=>i.jsx(Qq,{ref:n,className:me("text-sm opacity-90",t),...e}));w8.displayName=Qq.displayName;function zle(){const{toasts:t}=Vae();return i.jsxs(Vle,{children:[t.map(function({id:e,title:n,description:r,action:s,...a}){return i.jsxs(v8,{...a,children:[i.jsxs("div",{className:"grid gap-1",children:[n&&i.jsx(b8,{children:n}),r&&i.jsx(w8,{children:r})]}),s,i.jsx(x8,{})]},e)}),i.jsx(y8,{})]})}var d4=["light","dark"],qle="(prefers-color-scheme: dark)",Wle=N.createContext(void 0),Hle={setTheme:t=>{},themes:[]},Kle=()=>{var t;return(t=N.useContext(Wle))!=null?t:Hle};N.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:o,attrs:l,nonce:c})=>{let u=a==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?d4.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(v,g=!1,y=!0)=>{let b=o?o[v]:v,x=g?v+"|| ''":`'${b}'`,S="";return s&&y&&!g&&d4.includes(v)&&(S+=`d.style.colorScheme = '${v}';`),n==="class"?g||b?S+=`c.add(${x})`:S+="null":b&&(S+=`d[s](n,${x})`),S},m=t?`!function(){${d}${f(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${qle}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${u?"":"else{"+f(a,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(a,!1,!1)};}${h}}catch(t){}}();`;return N.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var Gle=t=>{switch(t){case"success":return Xle;case"info":return Jle;case"warning":return Zle;case"error":return ece;default:return null}},Yle=Array(12).fill(0),Qle=({visible:t,className:e})=>F.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},F.createElement("div",{className:"sonner-spinner"},Yle.map((n,r)=>F.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),Xle=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Zle=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Jle=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ece=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),tce=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},F.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),F.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),nce=()=>{let[t,e]=F.useState(document.hidden);return F.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},FT=1,rce=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:FT++,a=this.toasts.find(l=>l.id===s),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),a?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...t,id:s,title:n}),{...l,...t,id:s,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:s}),s},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),s=n!==void 0,a,o=r.then(async c=>{if(a=["resolve",c],F.isValidElement(c))s=!1,this.create({id:n,type:"default",message:c});else if(ice(c)&&!c.ok){s=!1;let u=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:n,type:"error",message:u,description:d})}else if(e.success!==void 0){s=!1;let u=typeof e.success=="function"?await e.success(c):e.success,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(a=["reject",c],e.error!==void 0){s=!1;let u=typeof e.error=="function"?await e.error(c):e.error,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;s&&(this.dismiss(n),n=void 0),(c=e.finally)==null||c.call(e)}),l=()=>new Promise((c,u)=>o.then(()=>a[0]==="reject"?u(a[1]):c(a[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||FT++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ai=new rce,sce=(t,e)=>{let n=(e==null?void 0:e.id)||FT++;return ai.addToast({title:t,...e,id:n}),n},ice=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",ace=sce,oce=()=>ai.toasts,lce=()=>ai.getActiveToasts(),Z=Object.assign(ace,{success:ai.success,info:ai.info,warning:ai.warning,error:ai.error,custom:ai.custom,message:ai.message,promise:ai.promise,dismiss:ai.dismiss,loading:ai.loading},{getHistory:oce,getToasts:lce});function cce(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}cce(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function n0(t){return t.label!==void 0}var uce=3,dce="32px",hce="16px",h4=4e3,fce=356,mce=14,pce=20,gce=200;function Ea(...t){return t.filter(Boolean).join(" ")}function yce(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var vce=t=>{var e,n,r,s,a,o,l,c,u,d,h;let{invert:f,toast:m,unstyled:v,interacting:g,setHeights:y,visibleToasts:b,heights:x,index:S,toasts:T,expanded:_,removeToast:C,defaultRichColors:E,closeButton:p,style:w,cancelButtonStyle:A,actionButtonStyle:P,className:I="",descriptionClassName:k="",duration:L,position:U,gap:z,loadingIcon:O,expandByDefault:$,classNames:D,icons:K,closeButtonAriaLabel:ie="Close toast",pauseWhenPageIsHidden:ae}=t,[_e,Le]=F.useState(null),[ct,Nt]=F.useState(null),[Ne,ft]=F.useState(!1),[be,Me]=F.useState(!1),[$e,ue]=F.useState(!1),[It,vt]=F.useState(!1),[un,tn]=F.useState(!1),[Nn,Hr]=F.useState(0),[an,H]=F.useState(0),se=F.useRef(m.duration||L||h4),de=F.useRef(null),Re=F.useRef(null),Oe=S===0,Se=S+1<=b,qe=m.type,Ht=m.dismissible!==!1,dn=m.className||"",ys=m.descriptionClassName||"",_a=F.useMemo(()=>x.findIndex(wt=>wt.toastId===m.id)||0,[x,m.id]),wi=F.useMemo(()=>{var wt;return(wt=m.closeButton)!=null?wt:p},[m.closeButton,p]),ld=F.useMemo(()=>m.duration||L||h4,[m.duration,L]),_i=F.useRef(0),ei=F.useRef(0),tc=F.useRef(0),ss=F.useRef(null),[rf,Jo]=U.split("-"),pg=F.useMemo(()=>x.reduce((wt,mn,Pn)=>Pn>=_a?wt:wt+mn.height,0),[x,_a]),nc=nce(),Sb=m.invert||f,kr=qe==="loading";ei.current=F.useMemo(()=>_a*z+pg,[_a,pg]),F.useEffect(()=>{se.current=ld},[ld]),F.useEffect(()=>{ft(!0)},[]),F.useEffect(()=>{let wt=Re.current;if(wt){let mn=wt.getBoundingClientRect().height;return H(mn),y(Pn=>[{toastId:m.id,height:mn,position:m.position},...Pn]),()=>y(Pn=>Pn.filter(Kr=>Kr.toastId!==m.id))}},[y,m.id]),F.useLayoutEffect(()=>{if(!Ne)return;let wt=Re.current,mn=wt.style.height;wt.style.height="auto";let Pn=wt.getBoundingClientRect().height;wt.style.height=mn,H(Pn),y(Kr=>Kr.find(ji=>ji.toastId===m.id)?Kr.map(ji=>ji.toastId===m.id?{...ji,height:Pn}:ji):[{toastId:m.id,height:Pn,position:m.position},...Kr])},[Ne,m.title,m.description,y,m.id]);let ja=F.useCallback(()=>{Me(!0),Hr(ei.current),y(wt=>wt.filter(mn=>mn.toastId!==m.id)),setTimeout(()=>{C(m)},gce)},[m,C,y,ei]);F.useEffect(()=>{if(m.promise&&qe==="loading"||m.duration===1/0||m.type==="loading")return;let wt;return _||g||ae&&nc?(()=>{if(tc.current<_i.current){let mn=new Date().getTime()-_i.current;se.current=se.current-mn}tc.current=new Date().getTime()})():se.current!==1/0&&(_i.current=new Date().getTime(),wt=setTimeout(()=>{var mn;(mn=m.onAutoClose)==null||mn.call(m,m),ja()},se.current)),()=>clearTimeout(wt)},[_,g,m,qe,ae,nc,ja]),F.useEffect(()=>{m.delete&&ja()},[ja,m.delete]);function cd(){var wt,mn,Pn;return K!=null&&K.loading?F.createElement("div",{className:Ea(D==null?void 0:D.loader,(wt=m==null?void 0:m.classNames)==null?void 0:wt.loader,"sonner-loader"),"data-visible":qe==="loading"},K.loading):O?F.createElement("div",{className:Ea(D==null?void 0:D.loader,(mn=m==null?void 0:m.classNames)==null?void 0:mn.loader,"sonner-loader"),"data-visible":qe==="loading"},O):F.createElement(Qle,{className:Ea(D==null?void 0:D.loader,(Pn=m==null?void 0:m.classNames)==null?void 0:Pn.loader),visible:qe==="loading"})}return F.createElement("li",{tabIndex:0,ref:Re,className:Ea(I,dn,D==null?void 0:D.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,D==null?void 0:D.default,D==null?void 0:D[qe],(n=m==null?void 0:m.classNames)==null?void 0:n[qe]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:E,"data-styled":!(m.jsx||m.unstyled||v),"data-mounted":Ne,"data-promise":!!m.promise,"data-swiped":un,"data-removed":be,"data-visible":Se,"data-y-position":rf,"data-x-position":Jo,"data-index":S,"data-front":Oe,"data-swiping":$e,"data-dismissible":Ht,"data-type":qe,"data-invert":Sb,"data-swipe-out":It,"data-swipe-direction":ct,"data-expanded":!!(_||$&&Ne),style:{"--index":S,"--toasts-before":S,"--z-index":T.length-S,"--offset":`${be?Nn:ei.current}px`,"--initial-height":$?"auto":`${an}px`,...w,...m.style},onDragEnd:()=>{ue(!1),Le(null),ss.current=null},onPointerDown:wt=>{kr||!Ht||(de.current=new Date,Hr(ei.current),wt.target.setPointerCapture(wt.pointerId),wt.target.tagName!=="BUTTON"&&(ue(!0),ss.current={x:wt.clientX,y:wt.clientY}))},onPointerUp:()=>{var wt,mn,Pn,Kr;if(It||!Ht)return;ss.current=null;let ji=Number(((wt=Re.current)==null?void 0:wt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),lo=Number(((mn=Re.current)==null?void 0:mn.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),qi=new Date().getTime()-((Pn=de.current)==null?void 0:Pn.getTime()),ti=_e==="x"?ji:lo,Na=Math.abs(ti)/qi;if(Math.abs(ti)>=pce||Na>.11){Hr(ei.current),(Kr=m.onDismiss)==null||Kr.call(m,m),Nt(_e==="x"?ji>0?"right":"left":lo>0?"down":"up"),ja(),vt(!0),tn(!1);return}ue(!1),Le(null)},onPointerMove:wt=>{var mn,Pn,Kr,ji;if(!ss.current||!Ht||((mn=window.getSelection())==null?void 0:mn.toString().length)>0)return;let lo=wt.clientY-ss.current.y,qi=wt.clientX-ss.current.x,ti=(Pn=t.swipeDirections)!=null?Pn:yce(U);!_e&&(Math.abs(qi)>1||Math.abs(lo)>1)&&Le(Math.abs(qi)>Math.abs(lo)?"x":"y");let Na={x:0,y:0};_e==="y"?(ti.includes("top")||ti.includes("bottom"))&&(ti.includes("top")&&lo<0||ti.includes("bottom")&&lo>0)&&(Na.y=lo):_e==="x"&&(ti.includes("left")||ti.includes("right"))&&(ti.includes("left")&&qi<0||ti.includes("right")&&qi>0)&&(Na.x=qi),(Math.abs(Na.x)>0||Math.abs(Na.y)>0)&&tn(!0),(Kr=Re.current)==null||Kr.style.setProperty("--swipe-amount-x",`${Na.x}px`),(ji=Re.current)==null||ji.style.setProperty("--swipe-amount-y",`${Na.y}px`)}},wi&&!m.jsx?F.createElement("button",{"aria-label":ie,"data-disabled":kr,"data-close-button":!0,onClick:kr||!Ht?()=>{}:()=>{var wt;ja(),(wt=m.onDismiss)==null||wt.call(m,m)},className:Ea(D==null?void 0:D.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(a=K==null?void 0:K.close)!=null?a:tce):null,m.jsx||N.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:F.createElement(F.Fragment,null,qe||m.icon||m.promise?F.createElement("div",{"data-icon":"",className:Ea(D==null?void 0:D.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||cd():null,m.type!=="loading"?m.icon||(K==null?void 0:K[qe])||Gle(qe):null):null,F.createElement("div",{"data-content":"",className:Ea(D==null?void 0:D.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},F.createElement("div",{"data-title":"",className:Ea(D==null?void 0:D.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?F.createElement("div",{"data-description":"",className:Ea(k,ys,D==null?void 0:D.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),N.isValidElement(m.cancel)?m.cancel:m.cancel&&n0(m.cancel)?F.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||A,onClick:wt=>{var mn,Pn;n0(m.cancel)&&Ht&&((Pn=(mn=m.cancel).onClick)==null||Pn.call(mn,wt),ja())},className:Ea(D==null?void 0:D.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,N.isValidElement(m.action)?m.action:m.action&&n0(m.action)?F.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||P,onClick:wt=>{var mn,Pn;n0(m.action)&&((Pn=(mn=m.action).onClick)==null||Pn.call(mn,wt),!wt.defaultPrevented&&ja())},className:Ea(D==null?void 0:D.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function f4(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function xce(t,e){let n={};return[t,e].forEach((r,s)=>{let a=s===1,o=a?"--mobile-offset":"--offset",l=a?hce:dce;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=l:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var bce=N.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:a,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:f,style:m,visibleToasts:v=uce,toastOptions:g,dir:y=f4(),gap:b=mce,loadingIcon:x,icons:S,containerAriaLabel:T="Notifications",pauseWhenPageIsHidden:_}=t,[C,E]=F.useState([]),p=F.useMemo(()=>Array.from(new Set([r].concat(C.filter(ae=>ae.position).map(ae=>ae.position)))),[C,r]),[w,A]=F.useState([]),[P,I]=F.useState(!1),[k,L]=F.useState(!1),[U,z]=F.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),O=F.useRef(null),$=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=F.useRef(null),K=F.useRef(!1),ie=F.useCallback(ae=>{E(_e=>{var Le;return(Le=_e.find(ct=>ct.id===ae.id))!=null&&Le.delete||ai.dismiss(ae.id),_e.filter(({id:ct})=>ct!==ae.id)})},[]);return F.useEffect(()=>ai.subscribe(ae=>{if(ae.dismiss){E(_e=>_e.map(Le=>Le.id===ae.id?{...Le,delete:!0}:Le));return}setTimeout(()=>{Eq.flushSync(()=>{E(_e=>{let Le=_e.findIndex(ct=>ct.id===ae.id);return Le!==-1?[..._e.slice(0,Le),{..._e[Le],...ae},..._e.slice(Le+1)]:[ae,..._e]})})})}),[]),F.useEffect(()=>{if(d!=="system"){z(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?z("dark"):z("light")),typeof window>"u")return;let ae=window.matchMedia("(prefers-color-scheme: dark)");try{ae.addEventListener("change",({matches:_e})=>{z(_e?"dark":"light")})}catch{ae.addListener(({matches:Le})=>{try{z(Le?"dark":"light")}catch(ct){console.error(ct)}})}},[d]),F.useEffect(()=>{C.length<=1&&I(!1)},[C]),F.useEffect(()=>{let ae=_e=>{var Le,ct;s.every(Nt=>_e[Nt]||_e.code===Nt)&&(I(!0),(Le=O.current)==null||Le.focus()),_e.code==="Escape"&&(document.activeElement===O.current||(ct=O.current)!=null&&ct.contains(document.activeElement))&&I(!1)};return document.addEventListener("keydown",ae),()=>document.removeEventListener("keydown",ae)},[s]),F.useEffect(()=>{if(O.current)return()=>{D.current&&(D.current.focus({preventScroll:!0}),D.current=null,K.current=!1)}},[O.current]),F.createElement("section",{ref:e,"aria-label":`${T} ${$}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},p.map((ae,_e)=>{var Le;let[ct,Nt]=ae.split("-");return C.length?F.createElement("ol",{key:ae,dir:y==="auto"?f4():y,tabIndex:-1,ref:O,className:l,"data-sonner-toaster":!0,"data-theme":U,"data-y-position":ct,"data-lifted":P&&C.length>1&&!a,"data-x-position":Nt,style:{"--front-toast-height":`${((Le=w[0])==null?void 0:Le.height)||0}px`,"--width":`${fce}px`,"--gap":`${b}px`,...m,...xce(c,u)},onBlur:Ne=>{K.current&&!Ne.currentTarget.contains(Ne.relatedTarget)&&(K.current=!1,D.current&&(D.current.focus({preventScroll:!0}),D.current=null))},onFocus:Ne=>{Ne.target instanceof HTMLElement&&Ne.target.dataset.dismissible==="false"||K.current||(K.current=!0,D.current=Ne.relatedTarget)},onMouseEnter:()=>I(!0),onMouseMove:()=>I(!0),onMouseLeave:()=>{k||I(!1)},onDragEnd:()=>I(!1),onPointerDown:Ne=>{Ne.target instanceof HTMLElement&&Ne.target.dataset.dismissible==="false"||L(!0)},onPointerUp:()=>L(!1)},C.filter(Ne=>!Ne.position&&_e===0||Ne.position===ae).map((Ne,ft)=>{var be,Me;return F.createElement(vce,{key:Ne.id,icons:S,index:ft,toast:Ne,defaultRichColors:h,duration:(be=g==null?void 0:g.duration)!=null?be:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:n,visibleToasts:v,closeButton:(Me=g==null?void 0:g.closeButton)!=null?Me:o,interacting:k,position:ae,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:ie,toasts:C.filter($e=>$e.position==Ne.position),heights:w.filter($e=>$e.position==Ne.position),setHeights:A,expandByDefault:a,gap:b,loadingIcon:x,expanded:P,pauseWhenPageIsHidden:_,swipeDirections:t.swipeDirections})})):null}))});const wce=({...t})=>{const{theme:e="system"}=Kle();return i.jsx(bce,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var _ce=tk[" useId ".trim().toString()]||(()=>{}),jce=0;function ia(t){const[e,n]=N.useState(_ce());return fr(()=>{n(r=>r??String(jce++))},[t]),e?`radix-${e}`:""}const Nce=["top","right","bottom","left"],xu=Math.min,Ci=Math.max,Ww=Math.round,r0=Math.floor,To=t=>({x:t,y:t}),Sce={left:"right",right:"left",bottom:"top",top:"bottom"},Ece={start:"end",end:"start"};function VT(t,e,n){return Ci(t,xu(e,n))}function Cl(t,e){return typeof t=="function"?t(e):t}function Pl(t){return t.split("-")[0]}function Lp(t){return t.split("-")[1]}function tR(t){return t==="x"?"y":"x"}function nR(t){return t==="y"?"height":"width"}const Ace=new Set(["top","bottom"]);function wo(t){return Ace.has(Pl(t))?"y":"x"}function rR(t){return tR(wo(t))}function Tce(t,e,n){n===void 0&&(n=!1);const r=Lp(t),s=rR(t),a=nR(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=Hw(o)),[o,Hw(o)]}function Cce(t){const e=Hw(t);return[BT(t),e,BT(e)]}function BT(t){return t.replace(/start|end/g,e=>Ece[e])}const m4=["left","right"],p4=["right","left"],Pce=["top","bottom"],Ice=["bottom","top"];function kce(t,e,n){switch(t){case"top":case"bottom":return n?e?p4:m4:e?m4:p4;case"left":case"right":return e?Pce:Ice;default:return[]}}function Rce(t,e,n,r){const s=Lp(t);let a=kce(Pl(t),n==="start",r);return s&&(a=a.map(o=>o+"-"+s),e&&(a=a.concat(a.map(BT)))),a}function Hw(t){return t.replace(/left|right|bottom|top/g,e=>Sce[e])}function Oce(t){return{top:0,right:0,bottom:0,left:0,...t}}function _8(t){return typeof t!="number"?Oce(t):{top:t,right:t,bottom:t,left:t}}function Kw(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function g4(t,e,n){let{reference:r,floating:s}=t;const a=wo(e),o=rR(e),l=nR(o),c=Pl(e),u=a==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[l]/2-s[l]/2;let m;switch(c){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch(Lp(e)){case"start":m[o]-=f*(n&&u?-1:1);break;case"end":m[o]+=f*(n&&u?-1:1);break}return m}const Mce=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=g4(u,r,c),f=r,m={},v=0;for(let g=0;g<l.length;g++){const{name:y,fn:b}=l[g],{x,y:S,data:T,reset:_}=await b({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:m,rects:u,platform:o,elements:{reference:t,floating:e}});d=x??d,h=S??h,m={...m,[y]:{...m[y],...T}},_&&v<=50&&(v++,typeof _=="object"&&(_.placement&&(f=_.placement),_.rects&&(u=_.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):_.rects),{x:d,y:h}=g4(u,f,c)),g=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:m}};async function mv(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:a,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=Cl(e,t),v=_8(m),y=l[f?h==="floating"?"reference":"floating":h],b=Kw(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(y)))==null||n?y:y.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),x=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,S=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),T=await(a.isElement==null?void 0:a.isElement(S))?await(a.getScale==null?void 0:a.getScale(S))||{x:1,y:1}:{x:1,y:1},_=Kw(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:S,strategy:c}):x);return{top:(b.top-_.top+v.top)/T.y,bottom:(_.bottom-b.bottom+v.bottom)/T.y,left:(b.left-_.left+v.left)/T.x,right:(_.right-b.right+v.right)/T.x}}const Dce=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:a,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=Cl(t,e)||{};if(u==null)return{};const h=_8(d),f={x:n,y:r},m=rR(s),v=nR(m),g=await o.getDimensions(u),y=m==="y",b=y?"top":"left",x=y?"bottom":"right",S=y?"clientHeight":"clientWidth",T=a.reference[v]+a.reference[m]-f[m]-a.floating[v],_=f[m]-a.reference[m],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let E=C?C[S]:0;(!E||!await(o.isElement==null?void 0:o.isElement(C)))&&(E=l.floating[S]||a.floating[v]);const p=T/2-_/2,w=E/2-g[v]/2-1,A=xu(h[b],w),P=xu(h[x],w),I=A,k=E-g[v]-P,L=E/2-g[v]/2+p,U=VT(I,L,k),z=!c.arrow&&Lp(s)!=null&&L!==U&&a.reference[v]/2-(L<I?A:P)-g[v]/2<0,O=z?L<I?L-I:L-k:0;return{[m]:f[m]+O,data:{[m]:U,centerOffset:L-U-O,...z&&{alignmentOffset:O}},reset:z}}}),Lce=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:g=!0,...y}=Cl(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const b=Pl(s),x=wo(l),S=Pl(l)===l,T=await(c.isRTL==null?void 0:c.isRTL(u.floating)),_=f||(S||!g?[Hw(l)]:Cce(l)),C=v!=="none";!f&&C&&_.push(...Rce(l,g,v,T));const E=[l,..._],p=await mv(e,y),w=[];let A=((r=a.flip)==null?void 0:r.overflows)||[];if(d&&w.push(p[b]),h){const L=Tce(s,o,T);w.push(p[L[0]],p[L[1]])}if(A=[...A,{placement:s,overflows:w}],!w.every(L=>L<=0)){var P,I;const L=(((P=a.flip)==null?void 0:P.index)||0)+1,U=E[L];if(U&&(!(h==="alignment"?x!==wo(U):!1)||A.every($=>$.overflows[0]>0&&wo($.placement)===x)))return{data:{index:L,overflows:A},reset:{placement:U}};let z=(I=A.filter(O=>O.overflows[0]<=0).sort((O,$)=>O.overflows[1]-$.overflows[1])[0])==null?void 0:I.placement;if(!z)switch(m){case"bestFit":{var k;const O=(k=A.filter($=>{if(C){const D=wo($.placement);return D===x||D==="y"}return!0}).map($=>[$.placement,$.overflows.filter(D=>D>0).reduce((D,K)=>D+K,0)]).sort(($,D)=>$[1]-D[1])[0])==null?void 0:k[0];O&&(z=O);break}case"initialPlacement":z=l;break}if(s!==z)return{reset:{placement:z}}}return{}}}};function y4(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function v4(t){return Nce.some(e=>t[e]>=0)}const $ce=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Cl(t,e);switch(r){case"referenceHidden":{const a=await mv(e,{...s,elementContext:"reference"}),o=y4(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:v4(o)}}}case"escaped":{const a=await mv(e,{...s,altBoundary:!0}),o=y4(a,n.floating);return{data:{escapedOffsets:o,escaped:v4(o)}}}default:return{}}}}},j8=new Set(["left","top"]);async function Fce(t,e){const{placement:n,platform:r,elements:s}=t,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Pl(n),l=Lp(n),c=wo(n)==="y",u=j8.has(o)?-1:1,d=a&&c?-1:1,h=Cl(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof v=="number"&&(m=l==="end"?v*-1:v),c?{x:m*d,y:f*u}:{x:f*u,y:m*d}}const Vce=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:a,placement:o,middlewareData:l}=e,c=await Fce(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:o}}}}},Bce=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:y=>{let{x:b,y:x}=y;return{x:b,y:x}}},...c}=Cl(t,e),u={x:n,y:r},d=await mv(e,c),h=wo(Pl(s)),f=tR(h);let m=u[f],v=u[h];if(a){const y=f==="y"?"top":"left",b=f==="y"?"bottom":"right",x=m+d[y],S=m-d[b];m=VT(x,m,S)}if(o){const y=h==="y"?"top":"left",b=h==="y"?"bottom":"right",x=v+d[y],S=v-d[b];v=VT(x,v,S)}const g=l.fn({...e,[f]:m,[h]:v});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:a,[h]:o}}}}}},Uce=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:a,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Cl(t,e),d={x:n,y:r},h=wo(s),f=tR(h);let m=d[f],v=d[h];const g=Cl(l,e),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const S=f==="y"?"height":"width",T=a.reference[f]-a.floating[S]+y.mainAxis,_=a.reference[f]+a.reference[S]-y.mainAxis;m<T?m=T:m>_&&(m=_)}if(u){var b,x;const S=f==="y"?"width":"height",T=j8.has(Pl(s)),_=a.reference[h]-a.floating[S]+(T&&((b=o.offset)==null?void 0:b[h])||0)+(T?0:y.crossAxis),C=a.reference[h]+a.reference[S]+(T?0:((x=o.offset)==null?void 0:x[h])||0)-(T?y.crossAxis:0);v<_?v=_:v>C&&(v=C)}return{[f]:m,[h]:v}}}},zce=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:a,platform:o,elements:l}=e,{apply:c=()=>{},...u}=Cl(t,e),d=await mv(e,u),h=Pl(s),f=Lp(s),m=wo(s)==="y",{width:v,height:g}=a.floating;let y,b;h==="top"||h==="bottom"?(y=h,b=f===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(b=h,y=f==="end"?"top":"bottom");const x=g-d.top-d.bottom,S=v-d.left-d.right,T=xu(g-d[y],x),_=xu(v-d[b],S),C=!e.middlewareData.shift;let E=T,p=_;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(p=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(E=x),C&&!f){const A=Ci(d.left,0),P=Ci(d.right,0),I=Ci(d.top,0),k=Ci(d.bottom,0);m?p=v-2*(A!==0||P!==0?A+P:Ci(d.left,d.right)):E=g-2*(I!==0||k!==0?I+k:Ci(d.top,d.bottom))}await c({...e,availableWidth:p,availableHeight:E});const w=await o.getDimensions(l.floating);return v!==w.width||g!==w.height?{reset:{rects:!0}}:{}}}};function mN(){return typeof window<"u"}function $p(t){return N8(t)?(t.nodeName||"").toLowerCase():"#document"}function Li(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ko(t){var e;return(e=(N8(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function N8(t){return mN()?t instanceof Node||t instanceof Li(t).Node:!1}function to(t){return mN()?t instanceof Element||t instanceof Li(t).Element:!1}function Bo(t){return mN()?t instanceof HTMLElement||t instanceof Li(t).HTMLElement:!1}function x4(t){return!mN()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Li(t).ShadowRoot}const qce=new Set(["inline","contents"]);function Vx(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=no(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!qce.has(s)}const Wce=new Set(["table","td","th"]);function Hce(t){return Wce.has($p(t))}const Kce=[":popover-open",":modal"];function pN(t){return Kce.some(e=>{try{return t.matches(e)}catch{return!1}})}const Gce=["transform","translate","scale","rotate","perspective"],Yce=["transform","translate","scale","rotate","perspective","filter"],Qce=["paint","layout","strict","content"];function sR(t){const e=iR(),n=to(t)?no(t):t;return Gce.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Yce.some(r=>(n.willChange||"").includes(r))||Qce.some(r=>(n.contain||"").includes(r))}function Xce(t){let e=bu(t);for(;Bo(e)&&!Bm(e);){if(sR(e))return e;if(pN(e))return null;e=bu(e)}return null}function iR(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Zce=new Set(["html","body","#document"]);function Bm(t){return Zce.has($p(t))}function no(t){return Li(t).getComputedStyle(t)}function gN(t){return to(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function bu(t){if($p(t)==="html")return t;const e=t.assignedSlot||t.parentNode||x4(t)&&t.host||Ko(t);return x4(e)?e.host:e}function S8(t){const e=bu(t);return Bm(e)?t.ownerDocument?t.ownerDocument.body:t.body:Bo(e)&&Vx(e)?e:S8(e)}function pv(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=S8(t),a=s===((r=t.ownerDocument)==null?void 0:r.body),o=Li(s);if(a){const l=UT(o);return e.concat(o,o.visualViewport||[],Vx(s)?s:[],l&&n?pv(l):[])}return e.concat(s,pv(s,[],n))}function UT(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function E8(t){const e=no(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Bo(t),a=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=Ww(n)!==a||Ww(r)!==o;return l&&(n=a,r=o),{width:n,height:r,$:l}}function aR(t){return to(t)?t:t.contextElement}function rm(t){const e=aR(t);if(!Bo(e))return To(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:a}=E8(e);let o=(a?Ww(n.width):n.width)/r,l=(a?Ww(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Jce=To(0);function A8(t){const e=Li(t);return!iR()||!e.visualViewport?Jce:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function eue(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Li(t)?!1:e}function yh(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),a=aR(t);let o=To(1);e&&(r?to(r)&&(o=rm(r)):o=rm(t));const l=eue(a,n,r)?A8(a):To(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(a){const f=Li(a),m=r&&to(r)?Li(r):r;let v=f,g=UT(v);for(;g&&r&&m!==v;){const y=rm(g),b=g.getBoundingClientRect(),x=no(g),S=b.left+(g.clientLeft+parseFloat(x.paddingLeft))*y.x,T=b.top+(g.clientTop+parseFloat(x.paddingTop))*y.y;c*=y.x,u*=y.y,d*=y.x,h*=y.y,c+=S,u+=T,v=Li(g),g=UT(v)}}return Kw({width:d,height:h,x:c,y:u})}function oR(t,e){const n=gN(t).scrollLeft;return e?e.left+n:yh(Ko(t)).left+n}function T8(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:oR(t,r)),a=r.top+e.scrollTop;return{x:s,y:a}}function tue(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const a=s==="fixed",o=Ko(r),l=e?pN(e.floating):!1;if(r===o||l&&a)return n;let c={scrollLeft:0,scrollTop:0},u=To(1);const d=To(0),h=Bo(r);if((h||!h&&!a)&&(($p(r)!=="body"||Vx(o))&&(c=gN(r)),Bo(r))){const m=yh(r);u=rm(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const f=o&&!h&&!a?T8(o,c,!0):To(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:n.y*u.y-c.scrollTop*u.y+d.y+f.y}}function nue(t){return Array.from(t.getClientRects())}function rue(t){const e=Ko(t),n=gN(t),r=t.ownerDocument.body,s=Ci(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Ci(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+oR(t);const l=-n.scrollTop;return no(r).direction==="rtl"&&(o+=Ci(e.clientWidth,r.clientWidth)-s),{width:s,height:a,x:o,y:l}}function sue(t,e){const n=Li(t),r=Ko(t),s=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){a=s.width,o=s.height;const u=iR();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:a,height:o,x:l,y:c}}const iue=new Set(["absolute","fixed"]);function aue(t,e){const n=yh(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,a=Bo(t)?rm(t):To(1),o=t.clientWidth*a.x,l=t.clientHeight*a.y,c=s*a.x,u=r*a.y;return{width:o,height:l,x:c,y:u}}function b4(t,e,n){let r;if(e==="viewport")r=sue(t,n);else if(e==="document")r=rue(Ko(t));else if(to(e))r=aue(e,n);else{const s=A8(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Kw(r)}function C8(t,e){const n=bu(t);return n===e||!to(n)||Bm(n)?!1:no(n).position==="fixed"||C8(n,e)}function oue(t,e){const n=e.get(t);if(n)return n;let r=pv(t,[],!1).filter(l=>to(l)&&$p(l)!=="body"),s=null;const a=no(t).position==="fixed";let o=a?bu(t):t;for(;to(o)&&!Bm(o);){const l=no(o),c=sR(o);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&iue.has(s.position)||Vx(o)&&!c&&C8(t,o))?r=r.filter(d=>d!==o):s=l,o=bu(o)}return e.set(t,r),r}function lue(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?pN(e)?[]:oue(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,d)=>{const h=b4(e,d,s);return u.top=Ci(h.top,u.top),u.right=xu(h.right,u.right),u.bottom=xu(h.bottom,u.bottom),u.left=Ci(h.left,u.left),u},b4(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function cue(t){const{width:e,height:n}=E8(t);return{width:e,height:n}}function uue(t,e,n){const r=Bo(e),s=Ko(e),a=n==="fixed",o=yh(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const c=To(0);function u(){c.x=oR(s)}if(r||!r&&!a)if(($p(e)!=="body"||Vx(s))&&(l=gN(e)),r){const m=yh(e,!0,a,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else s&&u();a&&!r&&s&&u();const d=s&&!r&&!a?T8(s,l):To(0),h=o.left+l.scrollLeft-c.x-d.x,f=o.top+l.scrollTop-c.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function lE(t){return no(t).position==="static"}function w4(t,e){if(!Bo(t)||no(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ko(t)===n&&(n=n.ownerDocument.body),n}function P8(t,e){const n=Li(t);if(pN(t))return n;if(!Bo(t)){let s=bu(t);for(;s&&!Bm(s);){if(to(s)&&!lE(s))return s;s=bu(s)}return n}let r=w4(t,e);for(;r&&Hce(r)&&lE(r);)r=w4(r,e);return r&&Bm(r)&&lE(r)&&!sR(r)?n:r||Xce(t)||n}const due=async function(t){const e=this.getOffsetParent||P8,n=this.getDimensions,r=await n(t.floating);return{reference:uue(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function hue(t){return no(t).direction==="rtl"}const fue={convertOffsetParentRelativeRectToViewportRelativeRect:tue,getDocumentElement:Ko,getClippingRect:lue,getOffsetParent:P8,getElementRects:due,getClientRects:nue,getDimensions:cue,getScale:rm,isElement:to,isRTL:hue};function I8(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function mue(t,e){let n=null,r;const s=Ko(t);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const u=t.getBoundingClientRect(),{left:d,top:h,width:f,height:m}=u;if(l||e(),!f||!m)return;const v=r0(h),g=r0(s.clientWidth-(d+f)),y=r0(s.clientHeight-(h+m)),b=r0(d),S={rootMargin:-v+"px "+-g+"px "+-y+"px "+-b+"px",threshold:Ci(0,xu(1,c))||1};let T=!0;function _(C){const E=C[0].intersectionRatio;if(E!==c){if(!T)return o();E?o(!1,E):r=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!I8(u,t.getBoundingClientRect())&&o(),T=!1}try{n=new IntersectionObserver(_,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(_,S)}n.observe(t)}return o(!0),a}function pue(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=aR(t),d=s||a?[...u?pv(u):[],...pv(e)]:[];d.forEach(b=>{s&&b.addEventListener("scroll",n,{passive:!0}),a&&b.addEventListener("resize",n)});const h=u&&l?mue(u,n):null;let f=-1,m=null;o&&(m=new ResizeObserver(b=>{let[x]=b;x&&x.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var S;(S=m)==null||S.observe(e)})),n()}),u&&!c&&m.observe(u),m.observe(e));let v,g=c?yh(t):null;c&&y();function y(){const b=yh(t);g&&!I8(g,b)&&n(),g=b,v=requestAnimationFrame(y)}return n(),()=>{var b;d.forEach(x=>{s&&x.removeEventListener("scroll",n),a&&x.removeEventListener("resize",n)}),h==null||h(),(b=m)==null||b.disconnect(),m=null,c&&cancelAnimationFrame(v)}}const gue=Vce,yue=Bce,vue=Lce,xue=zce,bue=$ce,_4=Dce,wue=Uce,_ue=(t,e,n)=>{const r=new Map,s={platform:fue,...n},a={...s.platform,_c:r};return Mce(t,e,{...s,platform:a})};var jue=typeof document<"u",Nue=function(){},Q0=jue?N.useLayoutEffect:Nue;function Gw(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Gw(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&t.$$typeof)&&!Gw(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function k8(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function j4(t,e){const n=k8(t);return Math.round(e*n)/n}function cE(t){const e=N.useRef(t);return Q0(()=>{e.current=t}),e}function Sue(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,h]=N.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=N.useState(r);Gw(f,r)||m(r);const[v,g]=N.useState(null),[y,b]=N.useState(null),x=N.useCallback($=>{$!==C.current&&(C.current=$,g($))},[]),S=N.useCallback($=>{$!==E.current&&(E.current=$,b($))},[]),T=a||v,_=o||y,C=N.useRef(null),E=N.useRef(null),p=N.useRef(d),w=c!=null,A=cE(c),P=cE(s),I=cE(u),k=N.useCallback(()=>{if(!C.current||!E.current)return;const $={placement:e,strategy:n,middleware:f};P.current&&($.platform=P.current),_ue(C.current,E.current,$).then(D=>{const K={...D,isPositioned:I.current!==!1};L.current&&!Gw(p.current,K)&&(p.current=K,Uh.flushSync(()=>{h(K)}))})},[f,e,n,P,I]);Q0(()=>{u===!1&&p.current.isPositioned&&(p.current.isPositioned=!1,h($=>({...$,isPositioned:!1})))},[u]);const L=N.useRef(!1);Q0(()=>(L.current=!0,()=>{L.current=!1}),[]),Q0(()=>{if(T&&(C.current=T),_&&(E.current=_),T&&_){if(A.current)return A.current(T,_,k);k()}},[T,_,k,A,w]);const U=N.useMemo(()=>({reference:C,floating:E,setReference:x,setFloating:S}),[x,S]),z=N.useMemo(()=>({reference:T,floating:_}),[T,_]),O=N.useMemo(()=>{const $={position:n,left:0,top:0};if(!z.floating)return $;const D=j4(z.floating,d.x),K=j4(z.floating,d.y);return l?{...$,transform:"translate("+D+"px, "+K+"px)",...k8(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:D,top:K}},[n,l,z.floating,d.x,d.y]);return N.useMemo(()=>({...d,update:k,refs:U,elements:z,floatingStyles:O}),[d,k,U,z,O])}const Eue=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?_4({element:r.current,padding:s}).fn(n):{}:r?_4({element:r,padding:s}).fn(n):{}}}},Aue=(t,e)=>({...gue(t),options:[t,e]}),Tue=(t,e)=>({...yue(t),options:[t,e]}),Cue=(t,e)=>({...wue(t),options:[t,e]}),Pue=(t,e)=>({...vue(t),options:[t,e]}),Iue=(t,e)=>({...xue(t),options:[t,e]}),kue=(t,e)=>({...bue(t),options:[t,e]}),Rue=(t,e)=>({...Eue(t),options:[t,e]});var Oue="Arrow",R8=N.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...a}=t;return i.jsx(Je.svg,{...a,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});R8.displayName=Oue;var Mue=R8;function lR(t){const[e,n]=N.useState(void 0);return fr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var cR="Popper",[O8,Fp]=ps(cR),[Due,M8]=O8(cR),D8=t=>{const{__scopePopper:e,children:n}=t,[r,s]=N.useState(null);return i.jsx(Due,{scope:e,anchor:r,onAnchorChange:s,children:n})};D8.displayName=cR;var L8="PopperAnchor",$8=N.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,a=M8(L8,n),o=N.useRef(null),l=Dt(e,o);return N.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:i.jsx(Je.div,{...s,ref:l})});$8.displayName=L8;var uR="PopperContent",[Lue,$ue]=O8(uR),F8=N.forwardRef((t,e)=>{var Ne,ft,be,Me,$e,ue;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:v,...g}=t,y=M8(uR,n),[b,x]=N.useState(null),S=Dt(e,It=>x(It)),[T,_]=N.useState(null),C=lR(T),E=(C==null?void 0:C.width)??0,p=(C==null?void 0:C.height)??0,w=r+(a!=="center"?"-"+a:""),A=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},P=Array.isArray(u)?u:[u],I=P.length>0,k={padding:A,boundary:P.filter(Vue),altBoundary:I},{refs:L,floatingStyles:U,placement:z,isPositioned:O,middlewareData:$}=Sue({strategy:"fixed",placement:w,whileElementsMounted:(...It)=>pue(...It,{animationFrame:m==="always"}),elements:{reference:y.anchor},middleware:[Aue({mainAxis:s+p,alignmentAxis:o}),c&&Tue({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Cue():void 0,...k}),c&&Pue({...k}),Iue({...k,apply:({elements:It,rects:vt,availableWidth:un,availableHeight:tn})=>{const{width:Nn,height:Hr}=vt.reference,an=It.floating.style;an.setProperty("--radix-popper-available-width",`${un}px`),an.setProperty("--radix-popper-available-height",`${tn}px`),an.setProperty("--radix-popper-anchor-width",`${Nn}px`),an.setProperty("--radix-popper-anchor-height",`${Hr}px`)}}),T&&Rue({element:T,padding:l}),Bue({arrowWidth:E,arrowHeight:p}),f&&kue({strategy:"referenceHidden",...k})]}),[D,K]=U8(z),ie=dr(v);fr(()=>{O&&(ie==null||ie())},[O,ie]);const ae=(Ne=$.arrow)==null?void 0:Ne.x,_e=(ft=$.arrow)==null?void 0:ft.y,Le=((be=$.arrow)==null?void 0:be.centerOffset)!==0,[ct,Nt]=N.useState();return fr(()=>{b&&Nt(window.getComputedStyle(b).zIndex)},[b]),i.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...U,transform:O?U.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ct,"--radix-popper-transform-origin":[(Me=$.transformOrigin)==null?void 0:Me.x,($e=$.transformOrigin)==null?void 0:$e.y].join(" "),...((ue=$.hide)==null?void 0:ue.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:i.jsx(Lue,{scope:n,placedSide:D,onArrowChange:_,arrowX:ae,arrowY:_e,shouldHideArrow:Le,children:i.jsx(Je.div,{"data-side":D,"data-align":K,...g,ref:S,style:{...g.style,animation:O?void 0:"none"}})})})});F8.displayName=uR;var V8="PopperArrow",Fue={top:"bottom",right:"left",bottom:"top",left:"right"},B8=N.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,a=$ue(V8,r),o=Fue[a.placedSide];return i.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:i.jsx(Mue,{...s,ref:n,style:{...s.style,display:"block"}})})});B8.displayName=V8;function Vue(t){return t!==null}var Bue=t=>({name:"transformOrigin",options:t,fn(e){var y,b,x;const{placement:n,rects:r,middlewareData:s}=e,o=((y=s.arrow)==null?void 0:y.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,d]=U8(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((b=s.arrow)==null?void 0:b.x)??0)+l/2,m=(((x=s.arrow)==null?void 0:x.y)??0)+c/2;let v="",g="";return u==="bottom"?(v=o?h:`${f}px`,g=`${-c}px`):u==="top"?(v=o?h:`${f}px`,g=`${r.floating.height+c}px`):u==="right"?(v=`${-c}px`,g=o?h:`${m}px`):u==="left"&&(v=`${r.floating.width+c}px`,g=o?h:`${m}px`),{data:{x:v,y:g}}}});function U8(t){const[e,n="center"]=t.split("-");return[e,n]}var dR=D8,hR=$8,fR=F8,mR=B8,[yN,Ntt]=ps("Tooltip",[Fp]),vN=Fp(),z8="TooltipProvider",Uue=700,zT="tooltip.open",[zue,pR]=yN(z8),q8=t=>{const{__scopeTooltip:e,delayDuration:n=Uue,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=t,o=N.useRef(!0),l=N.useRef(!1),c=N.useRef(0);return N.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),i.jsx(zue,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:N.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:N.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:N.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:a})};q8.displayName=z8;var gv="Tooltip",[que,xN]=yN(gv),W8=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s,onOpenChange:a,disableHoverableContent:o,delayDuration:l}=t,c=pR(gv,t.__scopeTooltip),u=vN(e),[d,h]=N.useState(null),f=ia(),m=N.useRef(0),v=o??c.disableHoverableContent,g=l??c.delayDuration,y=N.useRef(!1),[b,x]=Za({prop:r,defaultProp:s??!1,onChange:E=>{E?(c.onOpen(),document.dispatchEvent(new CustomEvent(zT))):c.onClose(),a==null||a(E)},caller:gv}),S=N.useMemo(()=>b?y.current?"delayed-open":"instant-open":"closed",[b]),T=N.useCallback(()=>{window.clearTimeout(m.current),m.current=0,y.current=!1,x(!0)},[x]),_=N.useCallback(()=>{window.clearTimeout(m.current),m.current=0,x(!1)},[x]),C=N.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{y.current=!0,x(!0),m.current=0},g)},[g,x]);return N.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),i.jsx(dR,{...u,children:i.jsx(que,{scope:e,contentId:f,open:b,stateAttribute:S,trigger:d,onTriggerChange:h,onTriggerEnter:N.useCallback(()=>{c.isOpenDelayedRef.current?C():T()},[c.isOpenDelayedRef,C,T]),onTriggerLeave:N.useCallback(()=>{v?_():(window.clearTimeout(m.current),m.current=0)},[_,v]),onOpen:T,onClose:_,disableHoverableContent:v,children:n})})};W8.displayName=gv;var qT="TooltipTrigger",H8=N.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=xN(qT,n),a=pR(qT,n),o=vN(n),l=N.useRef(null),c=Dt(e,l,s.onTriggerChange),u=N.useRef(!1),d=N.useRef(!1),h=N.useCallback(()=>u.current=!1,[]);return N.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),i.jsx(hR,{asChild:!0,...o,children:i.jsx(Je.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:ke(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:ke(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:ke(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:ke(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:ke(t.onBlur,s.onClose),onClick:ke(t.onClick,s.onClose)})})});H8.displayName=qT;var Wue="TooltipPortal",[Stt,Hue]=yN(Wue,{forceMount:void 0}),Um="TooltipContent",K8=N.forwardRef((t,e)=>{const n=Hue(Um,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=t,o=xN(Um,t.__scopeTooltip);return i.jsx(gs,{present:r||o.open,children:o.disableHoverableContent?i.jsx(G8,{side:s,...a,ref:e}):i.jsx(Kue,{side:s,...a,ref:e})})}),Kue=N.forwardRef((t,e)=>{const n=xN(Um,t.__scopeTooltip),r=pR(Um,t.__scopeTooltip),s=N.useRef(null),a=Dt(e,s),[o,l]=N.useState(null),{trigger:c,onClose:u}=n,d=s.current,{onPointerInTransitChange:h}=r,f=N.useCallback(()=>{l(null),h(!1)},[h]),m=N.useCallback((v,g)=>{const y=v.currentTarget,b={x:v.clientX,y:v.clientY},x=Zue(b,y.getBoundingClientRect()),S=Jue(b,x),T=ede(g.getBoundingClientRect()),_=nde([...S,...T]);l(_),h(!0)},[h]);return N.useEffect(()=>()=>f(),[f]),N.useEffect(()=>{if(c&&d){const v=y=>m(y,d),g=y=>m(y,c);return c.addEventListener("pointerleave",v),d.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",g)}}},[c,d,m,f]),N.useEffect(()=>{if(o){const v=g=>{const y=g.target,b={x:g.clientX,y:g.clientY},x=(c==null?void 0:c.contains(y))||(d==null?void 0:d.contains(y)),S=!tde(b,o);x?f():S&&(f(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,d,o,u,f]),i.jsx(G8,{...t,ref:a})}),[Gue,Yue]=yN(gv,{isInside:!1}),Que=Cq("TooltipContent"),G8=N.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=t,c=xN(Um,n),u=vN(n),{onClose:d}=c;return N.useEffect(()=>(document.addEventListener(zT,d),()=>document.removeEventListener(zT,d)),[d]),N.useEffect(()=>{if(c.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),i.jsx(Op,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:i.jsxs(fR,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(Que,{children:r}),i.jsx(Gue,{scope:n,isInside:!0,children:i.jsx(doe,{id:c.contentId,role:"tooltip",children:s||r})})]})})});K8.displayName=Um;var Y8="TooltipArrow",Xue=N.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=vN(n);return Yue(Y8,n).isInside?null:i.jsx(mR,{...s,...r,ref:e})});Xue.displayName=Y8;function Zue(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Jue(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function ede(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function tde(t,e){const{x:n,y:r}=t;let s=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a],c=e[o],u=l.x,d=l.y,h=c.x,f=c.y;d>r!=f>r&&n<(h-u)*(r-d)/(f-d)+u&&(s=!s)}return s}function nde(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),rde(e)}function rde(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const a=e[e.length-1],o=e[e.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const a=n[n.length-1],o=n[n.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var sde=q8,ide=W8,ade=H8,Q8=K8;const X8=sde,ode=ide,lde=ade,Z8=N.forwardRef(({className:t,sideOffset:e=4,...n},r)=>i.jsx(Q8,{ref:r,sideOffset:e,className:me("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));Z8.displayName=Q8.displayName;var Vp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},vh=typeof window>"u"||"Deno"in globalThis;function Us(){}function cde(t,e){return typeof t=="function"?t(e):t}function WT(t){return typeof t=="number"&&t>=0&&t!==1/0}function J8(t,e){return Math.max(t+(e||0)-Date.now(),0)}function au(t,e){return typeof t=="function"?t(e):t}function Yi(t,e){return typeof t=="function"?t(e):t}function N4(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==gR(o,e.options))return!1}else if(!yv(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||a&&!a(e))}function S4(t,e){const{exact:n,status:r,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(xh(e.options.mutationKey)!==xh(a))return!1}else if(!yv(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function gR(t,e){return((e==null?void 0:e.queryKeyHashFn)||xh)(t)}function xh(t){return JSON.stringify(t,(e,n)=>HT(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function yv(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>yv(t[n],e[n])):!1}function eW(t,e){if(t===e)return t;const n=E4(t)&&E4(e);if(n||HT(t)&&HT(e)){const r=n?t:Object.keys(t),s=r.length,a=n?e:Object.keys(e),o=a.length,l=n?[]:{},c=new Set(r);let u=0;for(let d=0;d<o;d++){const h=n?d:a[d];(!n&&c.has(h)||n)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,u++):(l[h]=eW(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&u++)}return s===o&&u===s?t:l}return e}function Yw(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function E4(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function HT(t){if(!A4(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!A4(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function A4(t){return Object.prototype.toString.call(t)==="[object Object]"}function ude(t){return new Promise(e=>{setTimeout(e,t)})}function KT(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?eW(t,e):e}function dde(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function hde(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var yR=Symbol();function tW(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===yR?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function nW(t,e){return typeof t=="function"?t(...e):!!t}var Ud,Oc,xm,sz,fde=(sz=class extends Vp{constructor(){super();gt(this,Ud);gt(this,Oc);gt(this,xm);We(this,xm,e=>{if(!vh&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){X(this,Oc)||this.setEventListener(X(this,xm))}onUnsubscribe(){var e;this.hasListeners()||((e=X(this,Oc))==null||e.call(this),We(this,Oc,void 0))}setEventListener(e){var n;We(this,xm,e),(n=X(this,Oc))==null||n.call(this),We(this,Oc,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){X(this,Ud)!==e&&(We(this,Ud,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof X(this,Ud)=="boolean"?X(this,Ud):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ud=new WeakMap,Oc=new WeakMap,xm=new WeakMap,sz),vR=new fde,bm,Mc,wm,iz,mde=(iz=class extends Vp{constructor(){super();gt(this,bm,!0);gt(this,Mc);gt(this,wm);We(this,wm,e=>{if(!vh&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){X(this,Mc)||this.setEventListener(X(this,wm))}onUnsubscribe(){var e;this.hasListeners()||((e=X(this,Mc))==null||e.call(this),We(this,Mc,void 0))}setEventListener(e){var n;We(this,wm,e),(n=X(this,Mc))==null||n.call(this),We(this,Mc,e(this.setOnline.bind(this)))}setOnline(e){X(this,bm)!==e&&(We(this,bm,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return X(this,bm)}},bm=new WeakMap,Mc=new WeakMap,wm=new WeakMap,iz),Qw=new mde;function GT(){let t,e;const n=new Promise((s,a)=>{t=s,e=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function pde(t){return Math.min(1e3*2**t,3e4)}function rW(t){return(t??"online")==="online"?Qw.isOnline():!0}var sW=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function uE(t){return t instanceof sW}function iW(t){let e=!1,n=0,r=!1,s;const a=GT(),o=g=>{var y;r||(f(new sW(g)),(y=t.abort)==null||y.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>vR.isFocused()&&(t.networkMode==="always"||Qw.isOnline())&&t.canRun(),d=()=>rW(t.networkMode)&&t.canRun(),h=g=>{var y;r||(r=!0,(y=t.onSuccess)==null||y.call(t,g),s==null||s(),a.resolve(g))},f=g=>{var y;r||(r=!0,(y=t.onError)==null||y.call(t,g),s==null||s(),a.reject(g))},m=()=>new Promise(g=>{var y;s=b=>{(r||u())&&g(b)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),v=()=>{if(r)return;let g;const y=n===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(b){g=Promise.reject(b)}Promise.resolve(g).then(h).catch(b=>{var C;if(r)return;const x=t.retry??(vh?0:3),S=t.retryDelay??pde,T=typeof S=="function"?S(n,b):S,_=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,b);if(e||!_){f(b);return}n++,(C=t.onFail)==null||C.call(t,n,b),ude(T).then(()=>u()?void 0:m()).then(()=>{e?f(b):v()})})};return{promise:a,cancel:o,continue:()=>(s==null||s(),a),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?v():m().then(v),a)}}var gde=t=>setTimeout(t,0);function yde(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=gde;const a=l=>{e?t.push(l):s(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Fr=yde(),zd,az,aW=(az=class{constructor(){gt(this,zd)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),WT(this.gcTime)&&We(this,zd,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(vh?1/0:5*60*1e3))}clearGcTimeout(){X(this,zd)&&(clearTimeout(X(this,zd)),We(this,zd,void 0))}},zd=new WeakMap,az),_m,qd,Gi,Wd,ws,Sx,Hd,ka,rl,oz,vde=(oz=class extends aW{constructor(n){super();gt(this,ka);gt(this,_m);gt(this,qd);gt(this,Gi);gt(this,Wd);gt(this,ws);gt(this,Sx);gt(this,Hd);We(this,Hd,!1),We(this,Sx,n.defaultOptions),this.setOptions(n.options),this.observers=[],We(this,Wd,n.client),We(this,Gi,X(this,Wd).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,We(this,_m,xde(this.options)),this.state=n.state??X(this,_m),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=X(this,ws))==null?void 0:n.promise}setOptions(n){this.options={...X(this,Sx),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&X(this,Gi).remove(this)}setData(n,r){const s=KT(this.state.data,n,this.options);return Wt(this,ka,rl).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Wt(this,ka,rl).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,a;const r=(s=X(this,ws))==null?void 0:s.promise;return(a=X(this,ws))==null||a.cancel(n),r?r.then(Us).catch(Us):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(X(this,_m))}isActive(){return this.observers.some(n=>Yi(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===yR||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>au(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!J8(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=X(this,ws))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=X(this,ws))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),X(this,Gi).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(X(this,ws)&&(X(this,Hd)?X(this,ws).cancel({revert:!0}):X(this,ws).cancelRetry()),this.scheduleGc()),X(this,Gi).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Wt(this,ka,rl).call(this,{type:"invalidate"})}fetch(n,r){var d,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(X(this,ws))return X(this,ws).continueRetry(),X(this,ws).promise}if(n&&this.setOptions(n),!this.options.queryFn){const m=this.observers.find(v=>v.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,a=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(We(this,Hd,!0),s.signal)})},o=()=>{const m=tW(this.options,r),g=(()=>{const y={client:X(this,Wd),queryKey:this.queryKey,meta:this.meta};return a(y),y})();return We(this,Hd,!1),this.options.persister?this.options.persister(m,g,this):m(g)},c=(()=>{const m={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:X(this,Wd),state:this.state,fetchFn:o};return a(m),m})();(d=this.options.behavior)==null||d.onFetch(c,this),We(this,qd,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=c.fetchOptions)==null?void 0:h.meta))&&Wt(this,ka,rl).call(this,{type:"fetch",meta:(f=c.fetchOptions)==null?void 0:f.meta});const u=m=>{var v,g,y,b;uE(m)&&m.silent||Wt(this,ka,rl).call(this,{type:"error",error:m}),uE(m)||((g=(v=X(this,Gi).config).onError)==null||g.call(v,m,this),(b=(y=X(this,Gi).config).onSettled)==null||b.call(y,this.state.data,m,this)),this.scheduleGc()};return We(this,ws,iW({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var v,g,y,b;if(m===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(x){u(x);return}(g=(v=X(this,Gi).config).onSuccess)==null||g.call(v,m,this),(b=(y=X(this,Gi).config).onSettled)==null||b.call(y,m,this.state.error,this),this.scheduleGc()},onError:u,onFail:(m,v)=>{Wt(this,ka,rl).call(this,{type:"failed",failureCount:m,error:v})},onPause:()=>{Wt(this,ka,rl).call(this,{type:"pause"})},onContinue:()=>{Wt(this,ka,rl).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),X(this,ws).start()}},_m=new WeakMap,qd=new WeakMap,Gi=new WeakMap,Wd=new WeakMap,ws=new WeakMap,Sx=new WeakMap,Hd=new WeakMap,ka=new WeakSet,rl=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...oW(s.data,this.options),fetchMeta:n.meta??null};case"success":return We(this,qd,void 0),{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=n.error;return uE(a)&&a.revert&&X(this,qd)?{...X(this,qd),fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Fr.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),X(this,Gi).notify({query:this,type:"updated",action:n})})},oz);function oW(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:rW(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function xde(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var go,lz,bde=(lz=class extends Vp{constructor(e={}){super();gt(this,go);this.config=e,We(this,go,new Map)}build(e,n,r){const s=n.queryKey,a=n.queryHash??gR(s,n);let o=this.get(a);return o||(o=new vde({client:e,queryKey:s,queryHash:a,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){X(this,go).has(e.queryHash)||(X(this,go).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=X(this,go).get(e.queryHash);n&&(e.destroy(),n===e&&X(this,go).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Fr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return X(this,go).get(e)}getAll(){return[...X(this,go).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>N4(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>N4(e,r)):n}notify(e){Fr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Fr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Fr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},go=new WeakMap,lz),yo,Fs,Kd,vo,pc,cz,wde=(cz=class extends aW{constructor(n){super();gt(this,vo);gt(this,yo);gt(this,Fs);gt(this,Kd);this.mutationId=n.mutationId,We(this,Fs,n.mutationCache),We(this,yo,[]),this.state=n.state||lW(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){X(this,yo).includes(n)||(X(this,yo).push(n),this.clearGcTimeout(),X(this,Fs).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){We(this,yo,X(this,yo).filter(r=>r!==n)),this.scheduleGc(),X(this,Fs).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){X(this,yo).length||(this.state.status==="pending"?this.scheduleGc():X(this,Fs).remove(this))}continue(){var n;return((n=X(this,Kd))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var o,l,c,u,d,h,f,m,v,g,y,b,x,S,T,_,C,E,p,w;const r=()=>{Wt(this,vo,pc).call(this,{type:"continue"})};We(this,Kd,iW({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(A,P)=>{Wt(this,vo,pc).call(this,{type:"failed",failureCount:A,error:P})},onPause:()=>{Wt(this,vo,pc).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>X(this,Fs).canRun(this)}));const s=this.state.status==="pending",a=!X(this,Kd).canStart();try{if(s)r();else{Wt(this,vo,pc).call(this,{type:"pending",variables:n,isPaused:a}),await((l=(o=X(this,Fs).config).onMutate)==null?void 0:l.call(o,n,this));const P=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,n));P!==this.state.context&&Wt(this,vo,pc).call(this,{type:"pending",context:P,variables:n,isPaused:a})}const A=await X(this,Kd).start();return await((h=(d=X(this,Fs).config).onSuccess)==null?void 0:h.call(d,A,n,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,A,n,this.state.context)),await((g=(v=X(this,Fs).config).onSettled)==null?void 0:g.call(v,A,null,this.state.variables,this.state.context,this)),await((b=(y=this.options).onSettled)==null?void 0:b.call(y,A,null,n,this.state.context)),Wt(this,vo,pc).call(this,{type:"success",data:A}),A}catch(A){try{throw await((S=(x=X(this,Fs).config).onError)==null?void 0:S.call(x,A,n,this.state.context,this)),await((_=(T=this.options).onError)==null?void 0:_.call(T,A,n,this.state.context)),await((E=(C=X(this,Fs).config).onSettled)==null?void 0:E.call(C,void 0,A,this.state.variables,this.state.context,this)),await((w=(p=this.options).onSettled)==null?void 0:w.call(p,void 0,A,n,this.state.context)),A}finally{Wt(this,vo,pc).call(this,{type:"error",error:A})}}finally{X(this,Fs).runNext(this)}}},yo=new WeakMap,Fs=new WeakMap,Kd=new WeakMap,vo=new WeakSet,pc=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Fr.batch(()=>{X(this,yo).forEach(s=>{s.onMutationUpdate(n)}),X(this,Fs).notify({mutation:this,type:"updated",action:n})})},cz);function lW(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ol,Ra,Ex,uz,_de=(uz=class extends Vp{constructor(e={}){super();gt(this,ol);gt(this,Ra);gt(this,Ex);this.config=e,We(this,ol,new Set),We(this,Ra,new Map),We(this,Ex,0)}build(e,n,r){const s=new wde({mutationCache:this,mutationId:++Mb(this,Ex)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){X(this,ol).add(e);const n=s0(e);if(typeof n=="string"){const r=X(this,Ra).get(n);r?r.push(e):X(this,Ra).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(X(this,ol).delete(e)){const n=s0(e);if(typeof n=="string"){const r=X(this,Ra).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&X(this,Ra).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=s0(e);if(typeof n=="string"){const r=X(this,Ra).get(n),s=r==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=s0(e);if(typeof n=="string"){const s=(r=X(this,Ra).get(n))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Fr.batch(()=>{X(this,ol).forEach(e=>{this.notify({type:"removed",mutation:e})}),X(this,ol).clear(),X(this,Ra).clear()})}getAll(){return Array.from(X(this,ol))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>S4(n,r))}findAll(e={}){return this.getAll().filter(n=>S4(e,n))}notify(e){Fr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Fr.batch(()=>Promise.all(e.map(n=>n.continue().catch(Us))))}},ol=new WeakMap,Ra=new WeakMap,Ex=new WeakMap,uz);function s0(t){var e;return(e=t.options.scope)==null?void 0:e.id}function T4(t){return{onFetch:(e,n)=>{var d,h,f,m,v;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,a=((m=e.state.data)==null?void 0:m.pages)||[],o=((v=e.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const y=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},b=tW(e.options,e.fetchOptions),x=async(S,T,_)=>{if(g)return Promise.reject();if(T==null&&S.pages.length)return Promise.resolve(S);const E=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:T,direction:_?"backward":"forward",meta:e.options.meta};return y(P),P})(),p=await b(E),{maxPages:w}=e.options,A=_?hde:dde;return{pages:A(S.pages,p,w),pageParams:A(S.pageParams,T,w)}};if(s&&a.length){const S=s==="backward",T=S?jde:C4,_={pages:a,pageParams:o},C=T(r,_);l=await x(_,C,S)}else{const S=t??a.length;do{const T=c===0?o[0]??r.initialPageParam:C4(r,l);if(c>0&&T==null)break;l=await x(l,T),c++}while(c<S)}return l};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function C4(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function jde(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var ar,Dc,Lc,jm,Nm,$c,Sm,Em,dz,Nde=(dz=class{constructor(t={}){gt(this,ar);gt(this,Dc);gt(this,Lc);gt(this,jm);gt(this,Nm);gt(this,$c);gt(this,Sm);gt(this,Em);We(this,ar,t.queryCache||new bde),We(this,Dc,t.mutationCache||new _de),We(this,Lc,t.defaultOptions||{}),We(this,jm,new Map),We(this,Nm,new Map),We(this,$c,0)}mount(){Mb(this,$c)._++,X(this,$c)===1&&(We(this,Sm,vR.subscribe(async t=>{t&&(await this.resumePausedMutations(),X(this,ar).onFocus())})),We(this,Em,Qw.subscribe(async t=>{t&&(await this.resumePausedMutations(),X(this,ar).onOnline())})))}unmount(){var t,e;Mb(this,$c)._--,X(this,$c)===0&&((t=X(this,Sm))==null||t.call(this),We(this,Sm,void 0),(e=X(this,Em))==null||e.call(this),We(this,Em,void 0))}isFetching(t){return X(this,ar).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return X(this,Dc).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=X(this,ar).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=X(this,ar).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(au(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return X(this,ar).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=X(this,ar).get(r.queryHash),a=s==null?void 0:s.state.data,o=cde(e,a);if(o!==void 0)return X(this,ar).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Fr.batch(()=>X(this,ar).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=X(this,ar).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=X(this,ar);Fr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=X(this,ar);return Fr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Fr.batch(()=>X(this,ar).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Us).catch(Us)}invalidateQueries(t,e={}){return Fr.batch(()=>(X(this,ar).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Fr.batch(()=>X(this,ar).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(Us)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Us)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=X(this,ar).build(this,e);return n.isStaleByTime(au(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Us).catch(Us)}fetchInfiniteQuery(t){return t.behavior=T4(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Us).catch(Us)}ensureInfiniteQueryData(t){return t.behavior=T4(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Qw.isOnline()?X(this,Dc).resumePausedMutations():Promise.resolve()}getQueryCache(){return X(this,ar)}getMutationCache(){return X(this,Dc)}getDefaultOptions(){return X(this,Lc)}setDefaultOptions(t){We(this,Lc,t)}setQueryDefaults(t,e){X(this,jm).set(xh(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...X(this,jm).values()],n={};return e.forEach(r=>{yv(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){X(this,Nm).set(xh(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...X(this,Nm).values()],n={};return e.forEach(r=>{yv(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...X(this,Lc).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=gR(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===yR&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...X(this,Lc).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){X(this,ar).clear(),X(this,Dc).clear()}},ar=new WeakMap,Dc=new WeakMap,Lc=new WeakMap,jm=new WeakMap,Nm=new WeakMap,$c=new WeakMap,Sm=new WeakMap,Em=new WeakMap,dz),ri,Zt,Ax,Vs,Gd,Am,Fc,Vc,Tx,Tm,Cm,Yd,Qd,Bc,Pm,gn,oy,YT,QT,XT,ZT,JT,eC,tC,cW,hz,Sde=(hz=class extends Vp{constructor(e,n){super();gt(this,gn);gt(this,ri);gt(this,Zt);gt(this,Ax);gt(this,Vs);gt(this,Gd);gt(this,Am);gt(this,Fc);gt(this,Vc);gt(this,Tx);gt(this,Tm);gt(this,Cm);gt(this,Yd);gt(this,Qd);gt(this,Bc);gt(this,Pm,new Set);this.options=n,We(this,ri,e),We(this,Vc,null),We(this,Fc,GT()),this.options.experimental_prefetchInRender||X(this,Fc).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(X(this,Zt).addObserver(this),P4(X(this,Zt),this.options)?Wt(this,gn,oy).call(this):this.updateResult(),Wt(this,gn,ZT).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return nC(X(this,Zt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return nC(X(this,Zt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Wt(this,gn,JT).call(this),Wt(this,gn,eC).call(this),X(this,Zt).removeObserver(this)}setOptions(e){const n=this.options,r=X(this,Zt);if(this.options=X(this,ri).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Yi(this.options.enabled,X(this,Zt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Wt(this,gn,tC).call(this),X(this,Zt).setOptions(this.options),n._defaulted&&!Yw(this.options,n)&&X(this,ri).getQueryCache().notify({type:"observerOptionsUpdated",query:X(this,Zt),observer:this});const s=this.hasListeners();s&&I4(X(this,Zt),r,this.options,n)&&Wt(this,gn,oy).call(this),this.updateResult(),s&&(X(this,Zt)!==r||Yi(this.options.enabled,X(this,Zt))!==Yi(n.enabled,X(this,Zt))||au(this.options.staleTime,X(this,Zt))!==au(n.staleTime,X(this,Zt)))&&Wt(this,gn,YT).call(this);const a=Wt(this,gn,QT).call(this);s&&(X(this,Zt)!==r||Yi(this.options.enabled,X(this,Zt))!==Yi(n.enabled,X(this,Zt))||a!==X(this,Bc))&&Wt(this,gn,XT).call(this,a)}getOptimisticResult(e){const n=X(this,ri).getQueryCache().build(X(this,ri),e),r=this.createResult(n,e);return Ade(this,r)&&(We(this,Vs,r),We(this,Am,this.options),We(this,Gd,X(this,Zt).state)),r}getCurrentResult(){return X(this,Vs)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){X(this,Pm).add(e)}getCurrentQuery(){return X(this,Zt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=X(this,ri).defaultQueryOptions(e),r=X(this,ri).getQueryCache().build(X(this,ri),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Wt(this,gn,oy).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),X(this,Vs)))}createResult(e,n){var w;const r=X(this,Zt),s=this.options,a=X(this,Vs),o=X(this,Gd),l=X(this,Am),u=e!==r?e.state:X(this,Ax),{state:d}=e;let h={...d},f=!1,m;if(n._optimisticResults){const A=this.hasListeners(),P=!A&&P4(e,n),I=A&&I4(e,r,n,s);(P||I)&&(h={...h,...oW(d.data,e.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:v,errorUpdatedAt:g,status:y}=h;m=h.data;let b=!1;if(n.placeholderData!==void 0&&m===void 0&&y==="pending"){let A;a!=null&&a.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(A=a.data,b=!0):A=typeof n.placeholderData=="function"?n.placeholderData((w=X(this,Cm))==null?void 0:w.state.data,X(this,Cm)):n.placeholderData,A!==void 0&&(y="success",m=KT(a==null?void 0:a.data,A,n),f=!0)}if(n.select&&m!==void 0&&!b)if(a&&m===(o==null?void 0:o.data)&&n.select===X(this,Tx))m=X(this,Tm);else try{We(this,Tx,n.select),m=n.select(m),m=KT(a==null?void 0:a.data,m,n),We(this,Tm,m),We(this,Vc,null)}catch(A){We(this,Vc,A)}X(this,Vc)&&(v=X(this,Vc),m=X(this,Tm),g=Date.now(),y="error");const x=h.fetchStatus==="fetching",S=y==="pending",T=y==="error",_=S&&x,C=m!==void 0,p={status:y,fetchStatus:h.fetchStatus,isPending:S,isSuccess:y==="success",isError:T,isInitialLoading:_,isLoading:_,data:m,dataUpdatedAt:h.dataUpdatedAt,error:v,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:x,isRefetching:x&&!S,isLoadingError:T&&!C,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:T&&C,isStale:xR(e,n),refetch:this.refetch,promise:X(this,Fc),isEnabled:Yi(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const A=k=>{p.status==="error"?k.reject(p.error):p.data!==void 0&&k.resolve(p.data)},P=()=>{const k=We(this,Fc,p.promise=GT());A(k)},I=X(this,Fc);switch(I.status){case"pending":e.queryHash===r.queryHash&&A(I);break;case"fulfilled":(p.status==="error"||p.data!==I.value)&&P();break;case"rejected":(p.status!=="error"||p.error!==I.reason)&&P();break}}return p}updateResult(){const e=X(this,Vs),n=this.createResult(X(this,Zt),this.options);if(We(this,Gd,X(this,Zt).state),We(this,Am,this.options),X(this,Gd).data!==void 0&&We(this,Cm,X(this,Zt)),Yw(n,e))return;We(this,Vs,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!X(this,Pm).size)return!0;const o=new Set(a??X(this,Pm));return this.options.throwOnError&&o.add("error"),Object.keys(X(this,Vs)).some(l=>{const c=l;return X(this,Vs)[c]!==e[c]&&o.has(c)})};Wt(this,gn,cW).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Wt(this,gn,ZT).call(this)}},ri=new WeakMap,Zt=new WeakMap,Ax=new WeakMap,Vs=new WeakMap,Gd=new WeakMap,Am=new WeakMap,Fc=new WeakMap,Vc=new WeakMap,Tx=new WeakMap,Tm=new WeakMap,Cm=new WeakMap,Yd=new WeakMap,Qd=new WeakMap,Bc=new WeakMap,Pm=new WeakMap,gn=new WeakSet,oy=function(e){Wt(this,gn,tC).call(this);let n=X(this,Zt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Us)),n},YT=function(){Wt(this,gn,JT).call(this);const e=au(this.options.staleTime,X(this,Zt));if(vh||X(this,Vs).isStale||!WT(e))return;const r=J8(X(this,Vs).dataUpdatedAt,e)+1;We(this,Yd,setTimeout(()=>{X(this,Vs).isStale||this.updateResult()},r))},QT=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(X(this,Zt)):this.options.refetchInterval)??!1},XT=function(e){Wt(this,gn,eC).call(this),We(this,Bc,e),!(vh||Yi(this.options.enabled,X(this,Zt))===!1||!WT(X(this,Bc))||X(this,Bc)===0)&&We(this,Qd,setInterval(()=>{(this.options.refetchIntervalInBackground||vR.isFocused())&&Wt(this,gn,oy).call(this)},X(this,Bc)))},ZT=function(){Wt(this,gn,YT).call(this),Wt(this,gn,XT).call(this,Wt(this,gn,QT).call(this))},JT=function(){X(this,Yd)&&(clearTimeout(X(this,Yd)),We(this,Yd,void 0))},eC=function(){X(this,Qd)&&(clearInterval(X(this,Qd)),We(this,Qd,void 0))},tC=function(){const e=X(this,ri).getQueryCache().build(X(this,ri),this.options);if(e===X(this,Zt))return;const n=X(this,Zt);We(this,Zt,e),We(this,Ax,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},cW=function(e){Fr.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(X(this,Vs))}),X(this,ri).getQueryCache().notify({query:X(this,Zt),type:"observerResultsUpdated"})})},hz);function Ede(t,e){return Yi(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function P4(t,e){return Ede(t,e)||t.state.data!==void 0&&nC(t,e,e.refetchOnMount)}function nC(t,e,n){if(Yi(e.enabled,t)!==!1&&au(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&xR(t,e)}return!1}function I4(t,e,n,r){return(t!==e||Yi(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&xR(t,n)}function xR(t,e){return Yi(e.enabled,t)!==!1&&t.isStaleByTime(au(e.staleTime,t))}function Ade(t,e){return!Yw(t.getCurrentResult(),e)}var Uc,zc,si,ll,Nl,X0,rC,fz,Tde=(fz=class extends Vp{constructor(n,r){super();gt(this,Nl);gt(this,Uc);gt(this,zc);gt(this,si);gt(this,ll);We(this,Uc,n),this.setOptions(r),this.bindMethods(),Wt(this,Nl,X0).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=X(this,Uc).defaultMutationOptions(n),Yw(this.options,r)||X(this,Uc).getMutationCache().notify({type:"observerOptionsUpdated",mutation:X(this,si),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&xh(r.mutationKey)!==xh(this.options.mutationKey)?this.reset():((s=X(this,si))==null?void 0:s.state.status)==="pending"&&X(this,si).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=X(this,si))==null||n.removeObserver(this)}onMutationUpdate(n){Wt(this,Nl,X0).call(this),Wt(this,Nl,rC).call(this,n)}getCurrentResult(){return X(this,zc)}reset(){var n;(n=X(this,si))==null||n.removeObserver(this),We(this,si,void 0),Wt(this,Nl,X0).call(this),Wt(this,Nl,rC).call(this)}mutate(n,r){var s;return We(this,ll,r),(s=X(this,si))==null||s.removeObserver(this),We(this,si,X(this,Uc).getMutationCache().build(X(this,Uc),this.options)),X(this,si).addObserver(this),X(this,si).execute(n)}},Uc=new WeakMap,zc=new WeakMap,si=new WeakMap,ll=new WeakMap,Nl=new WeakSet,X0=function(){var r;const n=((r=X(this,si))==null?void 0:r.state)??lW();We(this,zc,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},rC=function(n){Fr.batch(()=>{var r,s,a,o,l,c,u,d;if(X(this,ll)&&this.hasListeners()){const h=X(this,zc).variables,f=X(this,zc).context;(n==null?void 0:n.type)==="success"?((s=(r=X(this,ll)).onSuccess)==null||s.call(r,n.data,h,f),(o=(a=X(this,ll)).onSettled)==null||o.call(a,n.data,null,h,f)):(n==null?void 0:n.type)==="error"&&((c=(l=X(this,ll)).onError)==null||c.call(l,n.error,h,f),(d=(u=X(this,ll)).onSettled)==null||d.call(u,void 0,n.error,h,f))}this.listeners.forEach(h=>{h(X(this,zc))})})},fz),uW=N.createContext(void 0),en=t=>{const e=N.useContext(uW);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Cde=({client:t,children:e})=>(N.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),i.jsx(uW.Provider,{value:t,children:e})),dW=N.createContext(!1),Pde=()=>N.useContext(dW);dW.Provider;function Ide(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var kde=N.createContext(Ide()),Rde=()=>N.useContext(kde),Ode=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},Mde=t=>{N.useEffect(()=>{t.clearReset()},[t])},Dde=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||nW(n,[t.error,r])),Lde=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},$de=(t,e)=>t.isLoading&&t.isFetching&&!e,Fde=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,k4=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function Vde(t,e,n){var h,f,m,v,g;const r=Pde(),s=Rde(),a=en(),o=a.defaultQueryOptions(t);(f=(h=a.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o),o._optimisticResults=r?"isRestoring":"optimistic",Lde(o),Ode(o,s),Mde(s);const l=!a.getQueryCache().get(o.queryHash),[c]=N.useState(()=>new e(a,o)),u=c.getOptimisticResult(o),d=!r&&t.subscribed!==!1;if(N.useSyncExternalStore(N.useCallback(y=>{const b=d?c.subscribe(Fr.batchCalls(y)):Us;return c.updateResult(),b},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),N.useEffect(()=>{c.setOptions(o)},[o,c]),Fde(o,u))throw k4(o,c,s);if(Dde({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:a.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((v=(m=a.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||v.call(m,o,u),o.experimental_prefetchInRender&&!vh&&$de(u,r)){const y=l?k4(o,c,s):(g=a.getQueryCache().get(o.queryHash))==null?void 0:g.promise;y==null||y.catch(Us).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function we(t,e){return Vde(t,Sde)}function Xe(t,e){const n=en(),[r]=N.useState(()=>new Tde(n,t));N.useEffect(()=>{r.setOptions(t)},[r,t]);const s=N.useSyncExternalStore(N.useCallback(o=>r.subscribe(Fr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=N.useCallback((o,l)=>{r.mutate(o,l).catch(Us)},[r]);if(s.error&&nW(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vv(){return vv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vv.apply(this,arguments)}var Hc;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Hc||(Hc={}));const R4="popstate";function Bde(t){t===void 0&&(t={});function e(r,s){let{pathname:a,search:o,hash:l}=r.location;return sC("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Xw(s)}return zde(e,n,null,t)}function wr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function hW(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ude(){return Math.random().toString(36).substr(2,8)}function O4(t,e){return{usr:t.state,key:t.key,idx:e}}function sC(t,e,n,r){return n===void 0&&(n=null),vv({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Bp(e):e,{state:n,key:e&&e.key||r||Ude()})}function Xw(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Bp(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function zde(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,o=s.history,l=Hc.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(vv({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=Hc.Pop;let y=d(),b=y==null?null:y-u;u=y,c&&c({action:l,location:g.location,delta:b})}function f(y,b){l=Hc.Push;let x=sC(g.location,y,b);u=d()+1;let S=O4(x,u),T=g.createHref(x);try{o.pushState(S,"",T)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(T)}a&&c&&c({action:l,location:g.location,delta:1})}function m(y,b){l=Hc.Replace;let x=sC(g.location,y,b);u=d();let S=O4(x,u),T=g.createHref(x);o.replaceState(S,"",T),a&&c&&c({action:l,location:g.location,delta:0})}function v(y){let b=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof y=="string"?y:Xw(y);return x=x.replace(/ $/,"%20"),wr(b,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,b)}let g={get action(){return l},get location(){return t(s,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(R4,h),c=y,()=>{s.removeEventListener(R4,h),c=null}},createHref(y){return e(s,y)},createURL:v,encodeLocation(y){let b=v(y);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:m,go(y){return o.go(y)}};return g}var M4;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(M4||(M4={}));function qde(t,e,n){return n===void 0&&(n="/"),Wde(t,e,n,!1)}function Wde(t,e,n,r){let s=typeof e=="string"?Bp(e):e,a=bR(s.pathname||"/",n);if(a==null)return null;let o=fW(t);Hde(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=rhe(a);l=the(o[c],u,r)}return l}function fW(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(wr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=ou([r,c.relativePath]),d=n.concat(c);a.children&&a.children.length>0&&(wr(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),fW(a.children,e,d,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:Jde(u,a.index),routesMeta:d})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let c of mW(a.path))s(a,o,c)}),e}function mW(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let o=mW(r.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Hde(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:ehe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Kde=/^:[\w-]+$/,Gde=3,Yde=2,Qde=1,Xde=10,Zde=-2,D4=t=>t==="*";function Jde(t,e){let n=t.split("/"),r=n.length;return n.some(D4)&&(r+=Zde),e&&(r+=Yde),n.filter(s=>!D4(s)).reduce((s,a)=>s+(Kde.test(a)?Gde:a===""?Qde:Xde),r)}function ehe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function the(t,e,n){let{routesMeta:r}=t,s={},a="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=a==="/"?e:e.slice(a.length)||"/",h=L4({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=L4({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:ou([a,h.pathname]),pathnameBase:ohe(ou([a,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(a=ou([a,h.pathnameBase]))}return o}function L4(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=nhe(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let g=l[h]||"";o=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const v=l[h];return m&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:t}}function nhe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),hW(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function rhe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return hW(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function bR(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function she(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Bp(t):t;return{pathname:n?n.startsWith("/")?n:ihe(n,e):e,search:lhe(r),hash:che(s)}}function ihe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function dE(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ahe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function wR(t,e){let n=ahe(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function _R(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Bp(t):(s=vv({},t),wr(!s.pathname||!s.pathname.includes("?"),dE("?","pathname","search",s)),wr(!s.pathname||!s.pathname.includes("#"),dE("#","pathname","hash",s)),wr(!s.search||!s.search.includes("#"),dE("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?e[h]:"/"}let c=she(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const ou=t=>t.join("/").replace(/\/\/+/g,"/"),ohe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),lhe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,che=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function uhe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const pW=["post","put","patch","delete"];new Set(pW);const dhe=["get",...pW];new Set(dhe);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xv(){return xv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xv.apply(this,arguments)}const jR=N.createContext(null),hhe=N.createContext(null),Wu=N.createContext(null),bN=N.createContext(null),Kl=N.createContext({outlet:null,matches:[],isDataRoute:!1}),gW=N.createContext(null);function fhe(t,e){let{relative:n}=e===void 0?{}:e;Up()||wr(!1);let{basename:r,navigator:s}=N.useContext(Wu),{hash:a,pathname:o,search:l}=vW(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:ou([r,o])),s.createHref({pathname:c,search:l,hash:a})}function Up(){return N.useContext(bN)!=null}function Go(){return Up()||wr(!1),N.useContext(bN).location}function yW(t){N.useContext(Wu).static||N.useLayoutEffect(t)}function $n(){let{isDataRoute:t}=N.useContext(Kl);return t?Ehe():mhe()}function mhe(){Up()||wr(!1);let t=N.useContext(jR),{basename:e,future:n,navigator:r}=N.useContext(Wu),{matches:s}=N.useContext(Kl),{pathname:a}=Go(),o=JSON.stringify(wR(s,n.v7_relativeSplatPath)),l=N.useRef(!1);return yW(()=>{l.current=!0}),N.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=_R(u,JSON.parse(o),a,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ou([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,a,t])}function Wh(){let{matches:t}=N.useContext(Kl),e=t[t.length-1];return e?e.params:{}}function vW(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=N.useContext(Wu),{matches:s}=N.useContext(Kl),{pathname:a}=Go(),o=JSON.stringify(wR(s,r.v7_relativeSplatPath));return N.useMemo(()=>_R(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function phe(t,e){return ghe(t,e)}function ghe(t,e,n,r){Up()||wr(!1);let{navigator:s}=N.useContext(Wu),{matches:a}=N.useContext(Kl),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Go(),d;if(e){var h;let y=typeof e=="string"?Bp(e):e;c==="/"||(h=y.pathname)!=null&&h.startsWith(c)||wr(!1),d=y}else d=u;let f=d.pathname||"/",m=f;if(c!=="/"){let y=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let v=qde(t,{pathname:m}),g=whe(v&&v.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:ou([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:ou([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),a,n,r);return e&&g?N.createElement(bN.Provider,{value:{location:xv({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Hc.Pop}},g):g}function yhe(){let t=She(),e=uhe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:s},n):null,null)}const vhe=N.createElement(yhe,null);class xhe extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?N.createElement(Kl.Provider,{value:this.props.routeContext},N.createElement(gW.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function bhe(t){let{routeContext:e,match:n,children:r}=t,s=N.useContext(jR);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(Kl.Provider,{value:e},r)}function whe(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||wr(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:m}=n,v=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,v=!1,g=null,y=null;n&&(m=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||vhe,c&&(u<0&&f===0?(v=!0,y=null):u===f&&(v=!0,y=h.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,f+1)),x=()=>{let S;return m?S=g:v?S=y:h.route.Component?S=N.createElement(h.route.Component,null):h.route.element?S=h.route.element:S=d,N.createElement(bhe,{match:h,routeContext:{outlet:d,matches:b,isDataRoute:n!=null},children:S})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?N.createElement(xhe,{location:n.location,revalidation:n.revalidation,component:g,error:m,children:x(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):x()},null)}var xW=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(xW||{}),Zw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Zw||{});function _he(t){let e=N.useContext(jR);return e||wr(!1),e}function jhe(t){let e=N.useContext(hhe);return e||wr(!1),e}function Nhe(t){let e=N.useContext(Kl);return e||wr(!1),e}function bW(t){let e=Nhe(),n=e.matches[e.matches.length-1];return n.route.id||wr(!1),n.route.id}function She(){var t;let e=N.useContext(gW),n=jhe(Zw.UseRouteError),r=bW(Zw.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Ehe(){let{router:t}=_he(xW.UseNavigateStable),e=bW(Zw.UseNavigateStable),n=N.useRef(!1);return yW(()=>{n.current=!0}),N.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,xv({fromRouteId:e},a)))},[t,e])}function Ahe(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function iC(t){let{to:e,replace:n,state:r,relative:s}=t;Up()||wr(!1);let{future:a,static:o}=N.useContext(Wu),{matches:l}=N.useContext(Kl),{pathname:c}=Go(),u=$n(),d=_R(e,wR(l,a.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return N.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:s}),[u,h,s,n,r]),null}function mt(t){wr(!1)}function The(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Hc.Pop,navigator:a,static:o=!1,future:l}=t;Up()&&wr(!1);let c=e.replace(/^\/*/,"/"),u=N.useMemo(()=>({basename:c,navigator:a,static:o,future:xv({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof r=="string"&&(r=Bp(r));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:v="default"}=r,g=N.useMemo(()=>{let y=bR(d,c);return y==null?null:{location:{pathname:y,search:h,hash:f,state:m,key:v},navigationType:s}},[c,d,h,f,m,v,s]);return g==null?null:N.createElement(Wu.Provider,{value:u},N.createElement(bN.Provider,{children:n,value:g}))}function Che(t){let{children:e,location:n}=t;return phe(aC(e),n)}new Promise(()=>{});function aC(t,e){e===void 0&&(e=[]);let n=[];return N.Children.forEach(t,(r,s)=>{if(!N.isValidElement(r))return;let a=[...e,s];if(r.type===N.Fragment){n.push.apply(n,aC(r.props.children,a));return}r.type!==mt&&wr(!1),!r.props.index||!r.props.children||wr(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=aC(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oC(){return oC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oC.apply(this,arguments)}function Phe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Ihe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function khe(t,e){return t.button===0&&(!e||e==="_self")&&!Ihe(t)}function lC(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function Rhe(t,e){let n=lC(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(a=>{n.append(s,a)})}),n}const Ohe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Mhe="6";try{window.__reactRouterVersion=Mhe}catch{}const Dhe="startTransition",$4=tk[Dhe];function Lhe(t){let{basename:e,children:n,future:r,window:s}=t,a=N.useRef();a.current==null&&(a.current=Bde({window:s,v5Compat:!0}));let o=a.current,[l,c]=N.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=N.useCallback(h=>{u&&$4?$4(()=>c(h)):c(h)},[c,u]);return N.useLayoutEffect(()=>o.listen(d),[o,d]),N.useEffect(()=>Ahe(r),[r]),N.createElement(The,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const $he=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Fhe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pi=N.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=e,f=Phe(e,Ohe),{basename:m}=N.useContext(Wu),v,g=!1;if(typeof u=="string"&&Fhe.test(u)&&(v=u,$he))try{let S=new URL(window.location.href),T=u.startsWith("//")?new URL(S.protocol+u):new URL(u),_=bR(T.pathname,m);T.origin===S.origin&&_!=null?u=_+T.search+T.hash:g=!0}catch{}let y=fhe(u,{relative:s}),b=Vhe(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function x(S){r&&r(S),S.defaultPrevented||b(S)}return N.createElement("a",oC({},f,{href:v||y,onClick:g||a?r:x,ref:n,target:c}))});var F4;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(F4||(F4={}));var V4;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(V4||(V4={}));function Vhe(t,e){let{target:n,replace:r,state:s,preventScrollReset:a,relative:o,viewTransition:l}=e===void 0?{}:e,c=$n(),u=Go(),d=vW(t,{relative:o});return N.useCallback(h=>{if(khe(h,n)){h.preventDefault();let f=r!==void 0?r:Xw(u)===Xw(d);c(t,{replace:f,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,r,s,n,t,a,o,l])}function NR(t){let e=N.useRef(lC(t)),n=N.useRef(!1),r=Go(),s=N.useMemo(()=>Rhe(r.search,n.current?null:e.current),[r.search]),a=$n(),o=N.useCallback((l,c)=>{const u=lC(typeof l=="function"?l(s):l);n.current=!0,a("?"+u,c)},[a,s]);return[s,o]}const Bhe=()=>{};var B4={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wW=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Uhe=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},_W={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,d=a>>2,h=(a&3)<<4|l>>4;let f=(l&15)<<2|u>>6,m=u&63;c||(m=64,o||(f=64)),r.push(n[d],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wW(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Uhe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||l==null||u==null||h==null)throw new zhe;const f=a<<2|l>>4;if(r.push(f),u!==64){const m=l<<4&240|u>>2;if(r.push(m),h!==64){const v=u<<6&192|h;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class zhe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qhe=function(t){const e=wW(t);return _W.encodeByteArray(e,!0)},Jw=function(t){return qhe(t).replace(/\./g,"")},jW=function(t){try{return _W.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Whe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hhe=()=>Whe().__FIREBASE_DEFAULTS__,Khe=()=>{if(typeof process>"u"||typeof B4>"u")return;const t=B4.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Ghe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&jW(t[1]);return e&&JSON.parse(e)},wN=()=>{try{return Bhe()||Hhe()||Khe()||Ghe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},NW=t=>{var e,n;return(n=(e=wN())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},SR=t=>{const e=NW(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},SW=()=>{var t;return(t=wN())==null?void 0:t.config},EW=t=>{var e;return(e=wN())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yhe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _N(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AW(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Jw(JSON.stringify(n)),Jw(JSON.stringify(o)),""].join(".")}const Py={};function Qhe(){const t={prod:[],emulator:[]};for(const e of Object.keys(Py))Py[e]?t.emulator.push(e):t.prod.push(e);return t}function Xhe(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let U4=!1;function jN(t,e){if(typeof window>"u"||typeof document>"u"||!Yo(window.location.host)||Py[t]===e||Py[t]||U4)return;Py[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",a=Qhe().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function l(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{U4=!0,o()},f}function d(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=Xhe(r),m=n("text"),v=document.getElementById(m)||document.createElement("span"),g=n("learnmore"),y=document.getElementById(g)||document.createElement("a"),b=n("preprendIcon"),x=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const S=f.element;l(S),d(y,g);const T=u();c(x,b),S.append(x,v,y,T),document.body.appendChild(S)}a?(v.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Zhe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ls())}function Jhe(){var e;const t=(e=wN())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function efe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tfe(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function nfe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rfe(){const t=Ls();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function sfe(){return!Jhe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ife(){try{return typeof indexedDB=="object"}catch{return!1}}function afe(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ofe="FirebaseError";class so extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ofe,Object.setPrototypeOf(this,so.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bx.prototype.create)}}class Bx{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?lfe(a,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new so(s,l,r)}}function lfe(t,e){return t.replace(cfe,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const cfe=/\{\$([^}]+)}/g;function ufe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function bh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],o=e[s];if(z4(a)&&z4(o)){if(!bh(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function z4(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ly(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function cy(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function dfe(t,e){const n=new hfe(t,e);return n.subscribe.bind(n)}class hfe{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ffe(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=hE),s.error===void 0&&(s.error=hE),s.complete===void 0&&(s.complete=hE);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ffe(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function hE(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t){return t&&t._delegate?t._delegate:t}class Il{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mfe{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Yhe;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gfe(e))try{this.getOrInitializeService({instanceIdentifier:_d})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=_d){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_d){return this.instances.has(e)}getOptions(e=_d){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pfe(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_d){return this.component?this.component.multipleInstances?e:_d:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pfe(t){return t===_d?void 0:t}function gfe(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yfe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mfe(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Yt||(Yt={}));const vfe={debug:Yt.DEBUG,verbose:Yt.VERBOSE,info:Yt.INFO,warn:Yt.WARN,error:Yt.ERROR,silent:Yt.SILENT},xfe=Yt.INFO,bfe={[Yt.DEBUG]:"log",[Yt.VERBOSE]:"log",[Yt.INFO]:"info",[Yt.WARN]:"warn",[Yt.ERROR]:"error"},wfe=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=bfe[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ER{constructor(e){this.name=e,this._logLevel=xfe,this._logHandler=wfe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Yt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vfe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Yt.DEBUG,...e),this._logHandler(this,Yt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Yt.VERBOSE,...e),this._logHandler(this,Yt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Yt.INFO,...e),this._logHandler(this,Yt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Yt.WARN,...e),this._logHandler(this,Yt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Yt.ERROR,...e),this._logHandler(this,Yt.ERROR,...e)}}const _fe=(t,e)=>e.some(n=>t instanceof n);let q4,W4;function jfe(){return q4||(q4=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Nfe(){return W4||(W4=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const TW=new WeakMap,cC=new WeakMap,CW=new WeakMap,fE=new WeakMap,AR=new WeakMap;function Sfe(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(lu(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&TW.set(n,t)}).catch(()=>{}),AR.set(e,t),e}function Efe(t){if(cC.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});cC.set(t,e)}let uC={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return cC.get(t);if(e==="objectStoreNames")return t.objectStoreNames||CW.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return lu(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Afe(t){uC=t(uC)}function Tfe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(mE(this),e,...n);return CW.set(r,e.sort?e.sort():[e]),lu(r)}:Nfe().includes(t)?function(...e){return t.apply(mE(this),e),lu(TW.get(this))}:function(...e){return lu(t.apply(mE(this),e))}}function Cfe(t){return typeof t=="function"?Tfe(t):(t instanceof IDBTransaction&&Efe(t),_fe(t,jfe())?new Proxy(t,uC):t)}function lu(t){if(t instanceof IDBRequest)return Sfe(t);if(fE.has(t))return fE.get(t);const e=Cfe(t);return e!==t&&(fE.set(t,e),AR.set(e,t)),e}const mE=t=>AR.get(t);function Pfe(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),l=lu(o);return r&&o.addEventListener("upgradeneeded",c=>{r(lu(o.result),c.oldVersion,c.newVersion,lu(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const Ife=["get","getKey","getAll","getAllKeys","count"],kfe=["put","add","delete","clear"],pE=new Map;function H4(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pE.get(e))return pE.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=kfe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Ife.includes(n)))return;const a=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return pE.set(e,a),a}Afe(t=>({...t,get:(e,n,r)=>H4(e,n)||t.get(e,n,r),has:(e,n)=>!!H4(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rfe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Ofe(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Ofe(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dC="@firebase/app",K4="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=new ER("@firebase/app"),Mfe="@firebase/app-compat",Dfe="@firebase/analytics-compat",Lfe="@firebase/analytics",$fe="@firebase/app-check-compat",Ffe="@firebase/app-check",Vfe="@firebase/auth",Bfe="@firebase/auth-compat",Ufe="@firebase/database",zfe="@firebase/data-connect",qfe="@firebase/database-compat",Wfe="@firebase/functions",Hfe="@firebase/functions-compat",Kfe="@firebase/installations",Gfe="@firebase/installations-compat",Yfe="@firebase/messaging",Qfe="@firebase/messaging-compat",Xfe="@firebase/performance",Zfe="@firebase/performance-compat",Jfe="@firebase/remote-config",eme="@firebase/remote-config-compat",tme="@firebase/storage",nme="@firebase/storage-compat",rme="@firebase/firestore",sme="@firebase/ai",ime="@firebase/firestore-compat",ame="firebase",ome="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC="[DEFAULT]",lme={[dC]:"fire-core",[Mfe]:"fire-core-compat",[Lfe]:"fire-analytics",[Dfe]:"fire-analytics-compat",[Ffe]:"fire-app-check",[$fe]:"fire-app-check-compat",[Vfe]:"fire-auth",[Bfe]:"fire-auth-compat",[Ufe]:"fire-rtdb",[zfe]:"fire-data-connect",[qfe]:"fire-rtdb-compat",[Wfe]:"fire-fn",[Hfe]:"fire-fn-compat",[Kfe]:"fire-iid",[Gfe]:"fire-iid-compat",[Yfe]:"fire-fcm",[Qfe]:"fire-fcm-compat",[Xfe]:"fire-perf",[Zfe]:"fire-perf-compat",[Jfe]:"fire-rc",[eme]:"fire-rc-compat",[tme]:"fire-gcs",[nme]:"fire-gcs-compat",[rme]:"fire-fst",[ime]:"fire-fst-compat",[sme]:"fire-vertex","fire-js":"fire-js",[ame]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv=new Map,cme=new Map,fC=new Map;function G4(t,e){try{t.container.addComponent(e)}catch(n){kl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function wu(t){const e=t.name;if(fC.has(e))return kl.debug(`There were multiple attempts to register component ${e}.`),!1;fC.set(e,t);for(const n of bv.values())G4(n,t);for(const n of cme.values())G4(n,t);return!0}function zx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function di(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ume={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cu=new Bx("app","Firebase",ume);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dme{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Il("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh=ome;function PW(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:hC,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw cu.create("bad-app-name",{appName:String(s)});if(n||(n=SW()),!n)throw cu.create("no-options");const a=bv.get(s);if(a){if(bh(n,a.options)&&bh(r,a.config))return a;throw cu.create("duplicate-app",{appName:s})}const o=new yfe(s);for(const c of fC.values())o.addComponent(c);const l=new dme(n,r,o);return bv.set(s,l),l}function qx(t=hC){const e=bv.get(t);if(!e&&t===hC&&SW())return PW();if(!e)throw cu.create("no-app",{appName:t});return e}function hme(){return Array.from(bv.values())}function aa(t,e,n){let r=lme[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),kl.warn(o.join(" "));return}wu(new Il(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fme="firebase-heartbeat-database",mme=1,wv="firebase-heartbeat-store";let gE=null;function IW(){return gE||(gE=Pfe(fme,mme,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(wv)}catch(n){console.warn(n)}}}}).catch(t=>{throw cu.create("idb-open",{originalErrorMessage:t.message})})),gE}async function pme(t){try{const n=(await IW()).transaction(wv),r=await n.objectStore(wv).get(kW(t));return await n.done,r}catch(e){if(e instanceof so)kl.warn(e.message);else{const n=cu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});kl.warn(n.message)}}}async function Y4(t,e){try{const r=(await IW()).transaction(wv,"readwrite");await r.objectStore(wv).put(e,kW(t)),await r.done}catch(n){if(n instanceof so)kl.warn(n.message);else{const r=cu.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});kl.warn(r.message)}}}function kW(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gme=1024,yme=30;class vme{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new bme(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Q4();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>yme){const o=wme(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){kl.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Q4(),{heartbeatsToSend:r,unsentEntries:s}=xme(this._heartbeatsCache.heartbeats),a=Jw(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return kl.warn(n),""}}}function Q4(){return new Date().toISOString().substring(0,10)}function xme(t,e=gme){const n=[];let r=t.slice();for(const s of t){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),X4(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),X4(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class bme{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ife()?afe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await pme(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Y4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Y4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function X4(t){return Jw(JSON.stringify({version:2,heartbeats:t})).length}function wme(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _me(t){wu(new Il("platform-logger",e=>new Rfe(e),"PRIVATE")),wu(new Il("heartbeat",e=>new vme(e),"PRIVATE")),aa(dC,K4,t),aa(dC,K4,"esm2020"),aa("fire-js","")}_me("");var jme="firebase",Nme="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */aa(jme,Nme,"app");function RW(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Sme=RW,OW=new Bx("auth","Firebase",RW());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_=new ER("@firebase/auth");function Eme(t,...e){e_.logLevel<=Yt.WARN&&e_.warn(`Auth (${Hh}): ${t}`,...e)}function Z0(t,...e){e_.logLevel<=Yt.ERROR&&e_.error(`Auth (${Hh}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(t,...e){throw TR(t,...e)}function Co(t,...e){return TR(t,...e)}function MW(t,e,n){const r={...Sme(),[e]:n};return new Bx("auth","Firebase",r).create(e,{appName:t.name})}function xl(t){return MW(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function TR(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return OW.create(t,...e)}function yt(t,e,...n){if(!t)throw TR(e,...n)}function hl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Z0(e),new Error(e)}function Rl(t,e){t||hl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Ame(){return Z4()==="http:"||Z4()==="https:"}function Z4(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tme(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ame()||tfe()||"connection"in navigator)?navigator.onLine:!0}function Cme(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,n){this.shortDelay=e,this.longDelay=n,Rl(n>e,"Short delay should be less than long delay!"),this.isMobile=Zhe()||nfe()}get(){return Tme()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(t,e){Rl(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DW{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pme={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ime=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],kme=new Wx(3e4,6e4);function io(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function zi(t,e,n,r,s={}){return LW(t,s,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const l=Ux({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...a};return efe()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Yo(t.emulatorConfig.host)&&(u.credentials="include"),DW.fetch()(await $W(t,t.config.apiHost,n,l),u)})}async function LW(t,e,n){t._canInitEmulator=!1;const r={...Pme,...e};try{const s=new Ome(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw i0(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw i0(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw i0(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw i0(t,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw MW(t,d,u);pa(t,d)}}catch(s){if(s instanceof so)throw s;pa(t,"network-request-failed",{message:String(s)})}}async function Hx(t,e,n,r,s={}){const a=await zi(t,e,n,r,s);return"mfaPendingCredential"in a&&pa(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function $W(t,e,n,r){const s=`${e}${n}?${r}`,a=t,o=a.config.emulator?CR(t.config,s):`${t.config.apiScheme}://${s}`;return Ime.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function Rme(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ome{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Co(this.auth,"network-request-failed")),kme.get())})}}function i0(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Co(t,e,r);return s.customData._tokenResponse=n,s}function J4(t){return t!==void 0&&t.enterprise!==void 0}class Mme{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Rme(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Dme(t,e){return zi(t,"GET","/v2/recaptchaConfig",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lme(t,e){return zi(t,"POST","/v1/accounts:delete",e)}async function t_(t,e){return zi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $me(t,e=!1){const n=sn(t),r=await n.getIdToken(e),s=PR(r);yt(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:Iy(yE(s.auth_time)),issuedAtTime:Iy(yE(s.iat)),expirationTime:Iy(yE(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function yE(t){return Number(t)*1e3}function PR(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Z0("JWT malformed, contained fewer than 3 sections"),null;try{const s=jW(n);return s?JSON.parse(s):(Z0("Failed to decode base64 JWT payload"),null)}catch(s){return Z0("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function e$(t){const e=PR(t);return yt(e,"internal-error"),yt(typeof e.exp<"u","internal-error"),yt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wh(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof so&&Fme(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Fme({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vme{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Iy(this.lastLoginAt),this.creationTime=Iy(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n_(t){var h;const e=t.auth,n=await t.getIdToken(),r=await wh(t,t_(e,{idToken:n}));yt(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=(h=s.providerUserInfo)!=null&&h.length?FW(s.providerUserInfo):[],o=Ume(t.providerData,a),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new pC(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function Bme(t){const e=sn(t);await n_(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Ume(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function FW(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zme(t,e){const n=await LW(t,{},async()=>{const r=Ux({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=await $W(t,s,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&Yo(t.emulatorConfig.host)&&(c.credentials="include"),DW.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function qme(t,e){return zi(t,"POST","/v2/accounts:revokeToken",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){yt(e.idToken,"internal-error"),yt(typeof e.idToken<"u","internal-error"),yt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):e$(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){yt(e.length!==0,"internal-error");const n=e$(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(yt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await zme(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,o=new sm;return r&&(yt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(yt(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(yt(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new sm,this.toJSON())}_performRefresh(){return hl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(t,e){yt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class za{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new Vme(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new pC(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await wh(this,this.stsTokenManager.getToken(this.auth,e));return yt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return $me(this,e)}reload(){return Bme(this)}_assign(e){this!==e&&(yt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new za({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){yt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await n_(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(di(this.auth.app))return Promise.reject(xl(this.auth));const e=await this.getIdToken();return await wh(this,Lme(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:m,providerData:v,stsTokenManager:g}=n;yt(h&&g,e,"internal-error");const y=sm.fromJSON(this.name,g);yt(typeof h=="string",e,"internal-error"),hc(r,e.name),hc(s,e.name),yt(typeof f=="boolean",e,"internal-error"),yt(typeof m=="boolean",e,"internal-error"),hc(a,e.name),hc(o,e.name),hc(l,e.name),hc(c,e.name),hc(u,e.name),hc(d,e.name);const b=new za({uid:h,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:a,tenantId:l,stsTokenManager:y,createdAt:u,lastLoginAt:d});return v&&Array.isArray(v)&&(b.providerData=v.map(x=>({...x}))),c&&(b._redirectEventId=c),b}static async _fromIdTokenResponse(e,n,r=!1){const s=new sm;s.updateFromServerResponse(n);const a=new za({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await n_(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];yt(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?FW(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),l=new sm;l.updateFromIdToken(r);const c=new za({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new pC(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t$=new Map;function fl(t){Rl(t instanceof Function,"Expected a class definition");let e=t$.get(t);return e?(Rl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,t$.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VW{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}VW.type="NONE";const n$=VW;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(t,e,n){return`firebase:${t}:${e}:${n}`}class im{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=J0(this.userKey,s.apiKey,a),this.fullPersistenceKey=J0("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await t_(this.auth,{idToken:e}).catch(()=>{});return n?za._fromGetAccountInfoResponse(this.auth,n,e):null}return za._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new im(fl(n$),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=s[0]||fl(n$);const o=J0(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const d=await u._get(o);if(d){let h;if(typeof d=="string"){const f=await t_(e,{idToken:d}).catch(()=>{});if(!f)break;h=await za._fromGetAccountInfoResponse(e,f,d)}else h=za._fromJSON(e,d);u!==a&&(l=h),a=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new im(a,e,r):(a=c[0],l&&await a._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==a)try{await u._remove(o)}catch{}})),new im(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r$(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qW(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(BW(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HW(e))return"Blackberry";if(KW(e))return"Webos";if(UW(e))return"Safari";if((e.includes("chrome/")||zW(e))&&!e.includes("edge/"))return"Chrome";if(WW(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function BW(t=Ls()){return/firefox\//i.test(t)}function UW(t=Ls()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zW(t=Ls()){return/crios\//i.test(t)}function qW(t=Ls()){return/iemobile/i.test(t)}function WW(t=Ls()){return/android/i.test(t)}function HW(t=Ls()){return/blackberry/i.test(t)}function KW(t=Ls()){return/webos/i.test(t)}function IR(t=Ls()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Wme(t=Ls()){var e;return IR(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Hme(){return rfe()&&document.documentMode===10}function GW(t=Ls()){return IR(t)||WW(t)||KW(t)||HW(t)||/windows phone/i.test(t)||qW(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YW(t,e=[]){let n;switch(t){case"Browser":n=r$(Ls());break;case"Worker":n=`${r$(Ls())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Hh}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kme{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,l)=>{try{const c=e(a);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gme(t,e={}){return zi(t,"GET","/v2/passwordPolicy",io(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yme=6;class Qme{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Yme,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xme{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new s$(this),this.idTokenSubscription=new s$(this),this.beforeStateQueue=new Kme(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=OW,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fl(n)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await im.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await t_(this,{idToken:e}),r=await za._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(di(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(a=this.redirectUser)==null?void 0:a._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return yt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await n_(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Cme()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(di(this.app))return Promise.reject(xl(this));const n=e?sn(e):null;return n&&yt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&yt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return di(this.app)?Promise.reject(xl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return di(this.app)?Promise.reject(xl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Gme(this),n=new Qme(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bx("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await qme(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fl(e)||this._popupRedirectResolver;yt(n,this,"argument-error"),this.redirectPersistenceManager=await im.create(this,[fl(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(yt(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return yt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=YW(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(di(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Eme(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Gl(t){return sn(t)}class s${constructor(e){this.auth=e,this.observer=null,this.addObserver=dfe(n=>this.observer=n)}get next(){return yt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NN={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Zme(t){NN=t}function QW(t){return NN.loadJS(t)}function Jme(){return NN.recaptchaEnterpriseScript}function epe(){return NN.gapiScript}function tpe(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class npe{constructor(){this.enterprise=new rpe}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class rpe{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const spe="recaptcha-enterprise",XW="NO_RECAPTCHA";class ipe{constructor(e){this.type=spe,this.auth=Gl(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{Dme(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new Mme(c);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function s(a,o,l){const c=window.grecaptcha;J4(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(u=>{o(u)}).catch(()=>{o(XW)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new npe().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(l=>{if(!n&&J4(window.grecaptcha))s(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Jme();c.length!==0&&(c+=l),QW(c).then(()=>{s(l,a,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function i$(t,e,n,r=!1,s=!1){const a=new ipe(t);let o;if(s)o=XW;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function r_(t,e,n,r,s){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await i$(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await i$(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ape(t,e){const n=zx(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(bh(a,e??{}))return s;pa(s,"already-initialized")}return n.initialize({options:e})}function ope(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fl);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function lpe(t,e,n){const r=Gl(t);yt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),a=ZW(e),{host:o,port:l}=cpe(e),c=l===null?"":`:${l}`,u={url:`${a}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){yt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),yt(bh(u,r.config.emulator)&&bh(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Yo(o)?(_N(`${a}//${o}${c}`),jN("Auth",!0)):upe()}function ZW(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function cpe(t){const e=ZW(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:a$(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:a$(o)}}}function a$(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function upe(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hl("not implemented")}_getIdTokenResponse(e){return hl("not implemented")}_linkToIdToken(e,n){return hl("not implemented")}_getReauthenticationResolver(e){return hl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JW(t,e){return zi(t,"POST","/v1/accounts:resetPassword",io(t,e))}async function dpe(t,e){return zi(t,"POST","/v1/accounts:update",e)}async function hpe(t,e){return zi(t,"POST","/v1/accounts:signUp",e)}async function fpe(t,e){return zi(t,"POST","/v1/accounts:update",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mpe(t,e){return Hx(t,"POST","/v1/accounts:signInWithPassword",io(t,e))}async function eH(t,e){return zi(t,"POST","/v1/accounts:sendOobCode",io(t,e))}async function ppe(t,e){return eH(t,e)}async function gpe(t,e){return eH(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ype(t,e){return Hx(t,"POST","/v1/accounts:signInWithEmailLink",io(t,e))}async function vpe(t,e){return Hx(t,"POST","/v1/accounts:signInWithEmailLink",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v extends kR{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new _v(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new _v(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return r_(e,n,"signInWithPassword",mpe);case"emailLink":return ype(e,{email:this._email,oobCode:this._password});default:pa(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return r_(e,r,"signUpPassword",hpe);case"emailLink":return vpe(e,{idToken:n,email:this._email,oobCode:this._password});default:pa(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function am(t,e){return Hx(t,"POST","/v1/accounts:signInWithIdp",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xpe="http://localhost";class _h extends kR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _h(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):pa("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...a}=n;if(!r||!s)return null;const o=new _h(r,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return am(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,am(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,am(e,n)}buildRequest(){const e={requestUri:xpe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ux(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bpe(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wpe(t){const e=ly(cy(t)).link,n=e?ly(cy(e)).deep_link_id:null,r=ly(cy(t)).deep_link_id;return(r?ly(cy(r)).link:null)||r||n||e||t}class RR{constructor(e){const n=ly(cy(e)),r=n.apiKey??null,s=n.oobCode??null,a=bpe(n.mode??null);yt(r&&s&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=wpe(e);try{return new RR(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(){this.providerId=zp.PROVIDER_ID}static credential(e,n){return _v._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=RR.parseLink(n);return yt(r,"argument-error"),_v._fromEmailAndCode(e,r.code,r.tenantId)}}zp.PROVIDER_ID="password";zp.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zp.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tH{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx extends tH{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc extends Kx{constructor(){super("facebook.com")}static credential(e){return _h._fromParams({providerId:Tc.PROVIDER_ID,signInMethod:Tc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tc.credentialFromTaggedObject(e)}static credentialFromError(e){return Tc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tc.credential(e.oauthAccessToken)}catch{return null}}}Tc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Tc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc extends Kx{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _h._fromParams({providerId:Cc.PROVIDER_ID,signInMethod:Cc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Cc.credentialFromTaggedObject(e)}static credentialFromError(e){return Cc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Cc.credential(n,r)}catch{return null}}}Cc.GOOGLE_SIGN_IN_METHOD="google.com";Cc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends Kx{constructor(){super("github.com")}static credential(e){return _h._fromParams({providerId:Pc.PROVIDER_ID,signInMethod:Pc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pc.credentialFromTaggedObject(e)}static credentialFromError(e){return Pc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pc.credential(e.oauthAccessToken)}catch{return null}}}Pc.GITHUB_SIGN_IN_METHOD="github.com";Pc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic extends Kx{constructor(){super("twitter.com")}static credential(e,n){return _h._fromParams({providerId:Ic.PROVIDER_ID,signInMethod:Ic.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ic.credentialFromTaggedObject(e)}static credentialFromError(e){return Ic.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ic.credential(n,r)}catch{return null}}}Ic.TWITTER_SIGN_IN_METHOD="twitter.com";Ic.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _pe(t,e){return Hx(t,"POST","/v1/accounts:signUp",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await za._fromIdTokenResponse(e,r,s),o=o$(r);return new jh({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=o$(r);return new jh({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function o$(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_ extends so{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,s_.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new s_(e,n,r,s)}}function nH(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?s_._fromErrorAndOperation(t,a,e,r):a})}async function jpe(t,e,n=!1){const r=await wh(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return jh._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Npe(t,e,n=!1){const{auth:r}=t;if(di(r.app))return Promise.reject(xl(r));const s="reauthenticate";try{const a=await wh(t,nH(r,s,e,t),n);yt(a.idToken,r,"internal-error");const o=PR(a.idToken);yt(o,r,"internal-error");const{sub:l}=o;return yt(t.uid===l,r,"user-mismatch"),jh._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&pa(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rH(t,e,n=!1){if(di(t.app))return Promise.reject(xl(t));const r="signIn",s=await nH(t,r,e),a=await jh._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function Spe(t,e){return rH(Gl(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?MR._fromServerResponse(e,n):"totpInfo"in n?DR._fromServerResponse(e,n):pa(e,"internal-error")}}class MR extends OR{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new MR(n)}}class DR extends OR{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new DR(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LR(t){const e=Gl(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Epe(t,e,n){const r=Gl(t);await r_(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",gpe)}async function Ape(t,e,n){await JW(sn(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&LR(t),r})}async function Tpe(t,e){await fpe(sn(t),{oobCode:e})}async function Cpe(t,e){const n=sn(t),r=await JW(n,{oobCode:e}),s=r.requestType;switch(yt(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":yt(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":yt(r.mfaInfo,n,"internal-error");default:yt(r.email,n,"internal-error")}let a=null;return r.mfaInfo&&(a=OR._fromServerResponse(Gl(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:a},operation:s}}async function Ppe(t,e){const{data:n}=await Cpe(sn(t),e);return n.email}async function Ipe(t,e,n){if(di(t.app))return Promise.reject(xl(t));const r=Gl(t),o=await r_(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_pe).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&LR(t),c}),l=await jh._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function kpe(t,e,n){return di(t.app)?Promise.reject(xl(t)):Spe(sn(t),zp.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&LR(t),r})}async function l$(t,e){const n=sn(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:a}=await ppe(n.auth,s);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rpe(t,e){return zi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ope(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=sn(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await wh(r,Rpe(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Mpe(t,e){return Dpe(sn(t),null,e)}async function Dpe(t,e,n){const{auth:r}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(a.password=n);const o=await wh(t,dpe(r,a));await t._updateTokensIfNecessary(o,!0)}function Lpe(t,e,n,r){return sn(t).onIdTokenChanged(e,n,r)}function $pe(t,e,n){return sn(t).beforeAuthStateChanged(e,n)}function Fpe(t,e,n,r){return sn(t).onAuthStateChanged(e,n,r)}function Vpe(t){return sn(t).signOut()}const i_="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sH{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(i_,"1"),this.storage.removeItem(i_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bpe=1e3,Upe=10;class iH extends sH{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GW(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);Hme()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Upe):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Bpe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}iH.type="LOCAL";const zpe=iH;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aH extends sH{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}aH.type="SESSION";const oH=aH;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qpe(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new SN(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,a)),c=await qpe(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}SN.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wpe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((l,c)=>{const u=$R("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(f.data.response);break;default:clearTimeout(d),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(){return window}function Hpe(t){Po().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lH(){return typeof Po().WorkerGlobalScope<"u"&&typeof Po().importScripts=="function"}async function Kpe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Gpe(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Ype(){return lH()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cH="firebaseLocalStorageDb",Qpe=1,a_="firebaseLocalStorage",uH="fbase_key";class Gx{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function EN(t,e){return t.transaction([a_],e?"readwrite":"readonly").objectStore(a_)}function Xpe(){const t=indexedDB.deleteDatabase(cH);return new Gx(t).toPromise()}function gC(){const t=indexedDB.open(cH,Qpe);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(a_,{keyPath:uH})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(a_)?e(r):(r.close(),await Xpe(),e(await gC()))})})}async function c$(t,e,n){const r=EN(t,!0).put({[uH]:e,value:n});return new Gx(r).toPromise()}async function Zpe(t,e){const n=EN(t,!1).get(e),r=await new Gx(n).toPromise();return r===void 0?null:r.value}function u$(t,e){const n=EN(t,!0).delete(e);return new Gx(n).toPromise()}const Jpe=800,ege=3;class dH{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gC(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>ege)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lH()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=SN._getInstance(Ype()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Kpe(),!this.activeServiceWorker)return;this.sender=new Wpe(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Gpe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gC();return await c$(e,i_,"1"),await u$(e,i_),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>c$(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Zpe(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>u$(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=EN(s,!1).getAll();return new Gx(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Jpe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dH.type="LOCAL";const tge=dH;new Wx(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nge(t,e){return e?fl(e):(yt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR extends kR{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return am(e,this._buildIdpRequest())}_linkToIdToken(e,n){return am(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return am(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function rge(t){return rH(t.auth,new FR(t),t.bypassAuthState)}function sge(t){const{auth:e,user:n}=t;return yt(n,e,"internal-error"),Npe(n,new FR(t),t.bypassAuthState)}async function ige(t){const{auth:e,user:n}=t;return yt(n,e,"internal-error"),jpe(n,new FR(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hH{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rge;case"linkViaPopup":case"linkViaRedirect":return ige;case"reauthViaPopup":case"reauthViaRedirect":return sge;default:pa(this.auth,"internal-error")}}resolve(e){Rl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const age=new Wx(2e3,1e4);class Ff extends hH{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Ff.currentPopupAction&&Ff.currentPopupAction.cancel(),Ff.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return yt(e,this.auth,"internal-error"),e}async onExecution(){Rl(this.filter.length===1,"Popup operations only handle one event");const e=$R();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Co(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Co(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ff.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Co(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,age.get())};e()}}Ff.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oge="pendingRedirect",ew=new Map;class lge extends hH{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ew.get(this.auth._key());if(!e){try{const r=await cge(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ew.set(this.auth._key(),e)}return this.bypassAuthState||ew.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cge(t,e){const n=hge(e),r=dge(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function uge(t,e){ew.set(t._key(),e)}function dge(t){return fl(t._redirectPersistence)}function hge(t){return J0(oge,t.config.apiKey,t.name)}async function fge(t,e,n=!1){if(di(t.app))return Promise.reject(xl(t));const r=Gl(t),s=nge(r,e),o=await new lge(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mge=10*60*1e3;class pge{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gge(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!fH(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Co(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mge&&this.cachedEventUids.clear(),this.cachedEventUids.has(d$(e))}saveEventToCache(e){this.cachedEventUids.add(d$(e)),this.lastProcessedEventTime=Date.now()}}function d$(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fH({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function gge(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fH(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yge(t,e={}){return zi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vge=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xge=/^https?/;async function bge(t){if(t.config.emulator)return;const{authorizedDomains:e}=await yge(t);for(const n of e)try{if(wge(n))return}catch{}pa(t,"unauthorized-domain")}function wge(t){const e=mC(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!xge.test(n))return!1;if(vge.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ge=new Wx(3e4,6e4);function h$(){const t=Po().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function jge(t){return new Promise((e,n)=>{var s,a,o;function r(){h$(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{h$(),n(Co(t,"network-request-failed"))},timeout:_ge.get()})}if((a=(s=Po().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((o=Po().gapi)!=null&&o.load)r();else{const l=tpe("iframefcb");return Po()[l]=()=>{gapi.load?r():n(Co(t,"network-request-failed"))},QW(`${epe()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw tw=null,e})}let tw=null;function Nge(t){return tw=tw||jge(t),tw}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sge=new Wx(5e3,15e3),Ege="__/auth/iframe",Age="emulator/auth/iframe",Tge={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cge=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pge(t){const e=t.config;yt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?CR(e,Age):`https://${t.config.authDomain}/${Ege}`,r={apiKey:e.apiKey,appName:t.name,v:Hh},s=Cge.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Ux(r).slice(1)}`}async function Ige(t){const e=await Nge(t),n=Po().gapi;return yt(n,t,"internal-error"),e.open({where:document.body,url:Pge(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Tge,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const o=Co(t,"network-request-failed"),l=Po().setTimeout(()=>{a(o)},Sge.get());function c(){Po().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kge={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Rge=500,Oge=600,Mge="_blank",Dge="http://localhost";class f${constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Lge(t,e,n,r=Rge,s=Oge){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...kge,width:r.toString(),height:s.toString(),top:a,left:o},u=Ls().toLowerCase();n&&(l=zW(u)?Mge:n),BW(u)&&(e=e||Dge,c.scrollbars="yes");const d=Object.entries(c).reduce((f,[m,v])=>`${f}${m}=${v},`,"");if(Wme(u)&&l!=="_self")return $ge(e||"",l),new f$(null);const h=window.open(e||"",l,d);yt(h,t,"popup-blocked");try{h.focus()}catch{}return new f$(h)}function $ge(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fge="__/auth/handler",Vge="emulator/auth/handler",Bge=encodeURIComponent("fac");async function m$(t,e,n,r,s,a){yt(t.config.authDomain,t,"auth-domain-config-required"),yt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Hh,eventId:s};if(e instanceof tH){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ufe(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof Kx){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${Bge}=${encodeURIComponent(c)}`:"";return`${Uge(t)}?${Ux(l).slice(1)}${u}`}function Uge({config:t}){return t.emulator?CR(t,Vge):`https://${t.authDomain}/${Fge}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="webStorageSupport";class zge{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oH,this._completeRedirectFn=fge,this._overrideRedirectResult=uge}async _openPopup(e,n,r,s){var o;Rl((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await m$(e,n,r,mC(),s);return Lge(e,a,$R())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await m$(e,n,r,mC(),s);return Hpe(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(Rl(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Ige(e),r=new pge(e);return n.register("authEvent",s=>(yt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vE,{type:vE},s=>{var o;const a=(o=s==null?void 0:s[0])==null?void 0:o[vE];a!==void 0&&n(!!a),pa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=bge(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return GW()||UW()||IR()}}const qge=zge;var p$="@firebase/auth",g$="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wge{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){yt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hge(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Kge(t){wu(new Il("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;yt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YW(t)},u=new Xme(r,s,a,c);return ope(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),wu(new Il("auth-internal",e=>{const n=Gl(e.getProvider("auth").getImmediate());return(r=>new Wge(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),aa(p$,g$,Hge(t)),aa(p$,g$,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gge=5*60,Yge=EW("authIdTokenMaxAge")||Gge;let y$=null;const Qge=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Yge)return;const s=n==null?void 0:n.token;y$!==s&&(y$=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Xge(t=qx()){const e=zx(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ape(t,{popupRedirectResolver:qge,persistence:[tge,zpe,oH]}),r=EW("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=Qge(a.toString());$pe(n,o,()=>o(n.currentUser)),Lpe(n,l=>o(l))}}const s=NW("auth");return s&&lpe(n,`http://${s}`),n}function Zge(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Zme({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=Co("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",Zge().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Kge("Browser");var v$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uu,mH;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,p){function w(){}w.prototype=p.prototype,E.F=p.prototype,E.prototype=new w,E.prototype.constructor=E,E.D=function(A,P,I){for(var k=Array(arguments.length-2),L=2;L<arguments.length;L++)k[L-2]=arguments[L];return p.prototype[P].apply(A,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,p,w){w||(w=0);const A=Array(16);if(typeof p=="string")for(var P=0;P<16;++P)A[P]=p.charCodeAt(w++)|p.charCodeAt(w++)<<8|p.charCodeAt(w++)<<16|p.charCodeAt(w++)<<24;else for(P=0;P<16;++P)A[P]=p[w++]|p[w++]<<8|p[w++]<<16|p[w++]<<24;p=E.g[0],w=E.g[1],P=E.g[2];let I=E.g[3],k;k=p+(I^w&(P^I))+A[0]+3614090360&4294967295,p=w+(k<<7&4294967295|k>>>25),k=I+(P^p&(w^P))+A[1]+3905402710&4294967295,I=p+(k<<12&4294967295|k>>>20),k=P+(w^I&(p^w))+A[2]+606105819&4294967295,P=I+(k<<17&4294967295|k>>>15),k=w+(p^P&(I^p))+A[3]+3250441966&4294967295,w=P+(k<<22&4294967295|k>>>10),k=p+(I^w&(P^I))+A[4]+4118548399&4294967295,p=w+(k<<7&4294967295|k>>>25),k=I+(P^p&(w^P))+A[5]+1200080426&4294967295,I=p+(k<<12&4294967295|k>>>20),k=P+(w^I&(p^w))+A[6]+2821735955&4294967295,P=I+(k<<17&4294967295|k>>>15),k=w+(p^P&(I^p))+A[7]+4249261313&4294967295,w=P+(k<<22&4294967295|k>>>10),k=p+(I^w&(P^I))+A[8]+1770035416&4294967295,p=w+(k<<7&4294967295|k>>>25),k=I+(P^p&(w^P))+A[9]+2336552879&4294967295,I=p+(k<<12&4294967295|k>>>20),k=P+(w^I&(p^w))+A[10]+4294925233&4294967295,P=I+(k<<17&4294967295|k>>>15),k=w+(p^P&(I^p))+A[11]+2304563134&4294967295,w=P+(k<<22&4294967295|k>>>10),k=p+(I^w&(P^I))+A[12]+1804603682&4294967295,p=w+(k<<7&4294967295|k>>>25),k=I+(P^p&(w^P))+A[13]+4254626195&4294967295,I=p+(k<<12&4294967295|k>>>20),k=P+(w^I&(p^w))+A[14]+2792965006&4294967295,P=I+(k<<17&4294967295|k>>>15),k=w+(p^P&(I^p))+A[15]+1236535329&4294967295,w=P+(k<<22&4294967295|k>>>10),k=p+(P^I&(w^P))+A[1]+4129170786&4294967295,p=w+(k<<5&4294967295|k>>>27),k=I+(w^P&(p^w))+A[6]+3225465664&4294967295,I=p+(k<<9&4294967295|k>>>23),k=P+(p^w&(I^p))+A[11]+643717713&4294967295,P=I+(k<<14&4294967295|k>>>18),k=w+(I^p&(P^I))+A[0]+3921069994&4294967295,w=P+(k<<20&4294967295|k>>>12),k=p+(P^I&(w^P))+A[5]+3593408605&4294967295,p=w+(k<<5&4294967295|k>>>27),k=I+(w^P&(p^w))+A[10]+38016083&4294967295,I=p+(k<<9&4294967295|k>>>23),k=P+(p^w&(I^p))+A[15]+3634488961&4294967295,P=I+(k<<14&4294967295|k>>>18),k=w+(I^p&(P^I))+A[4]+3889429448&4294967295,w=P+(k<<20&4294967295|k>>>12),k=p+(P^I&(w^P))+A[9]+568446438&4294967295,p=w+(k<<5&4294967295|k>>>27),k=I+(w^P&(p^w))+A[14]+3275163606&4294967295,I=p+(k<<9&4294967295|k>>>23),k=P+(p^w&(I^p))+A[3]+4107603335&4294967295,P=I+(k<<14&4294967295|k>>>18),k=w+(I^p&(P^I))+A[8]+1163531501&4294967295,w=P+(k<<20&4294967295|k>>>12),k=p+(P^I&(w^P))+A[13]+2850285829&4294967295,p=w+(k<<5&4294967295|k>>>27),k=I+(w^P&(p^w))+A[2]+4243563512&4294967295,I=p+(k<<9&4294967295|k>>>23),k=P+(p^w&(I^p))+A[7]+1735328473&4294967295,P=I+(k<<14&4294967295|k>>>18),k=w+(I^p&(P^I))+A[12]+2368359562&4294967295,w=P+(k<<20&4294967295|k>>>12),k=p+(w^P^I)+A[5]+4294588738&4294967295,p=w+(k<<4&4294967295|k>>>28),k=I+(p^w^P)+A[8]+2272392833&4294967295,I=p+(k<<11&4294967295|k>>>21),k=P+(I^p^w)+A[11]+1839030562&4294967295,P=I+(k<<16&4294967295|k>>>16),k=w+(P^I^p)+A[14]+4259657740&4294967295,w=P+(k<<23&4294967295|k>>>9),k=p+(w^P^I)+A[1]+2763975236&4294967295,p=w+(k<<4&4294967295|k>>>28),k=I+(p^w^P)+A[4]+1272893353&4294967295,I=p+(k<<11&4294967295|k>>>21),k=P+(I^p^w)+A[7]+4139469664&4294967295,P=I+(k<<16&4294967295|k>>>16),k=w+(P^I^p)+A[10]+3200236656&4294967295,w=P+(k<<23&4294967295|k>>>9),k=p+(w^P^I)+A[13]+681279174&4294967295,p=w+(k<<4&4294967295|k>>>28),k=I+(p^w^P)+A[0]+3936430074&4294967295,I=p+(k<<11&4294967295|k>>>21),k=P+(I^p^w)+A[3]+3572445317&4294967295,P=I+(k<<16&4294967295|k>>>16),k=w+(P^I^p)+A[6]+76029189&4294967295,w=P+(k<<23&4294967295|k>>>9),k=p+(w^P^I)+A[9]+3654602809&4294967295,p=w+(k<<4&4294967295|k>>>28),k=I+(p^w^P)+A[12]+3873151461&4294967295,I=p+(k<<11&4294967295|k>>>21),k=P+(I^p^w)+A[15]+530742520&4294967295,P=I+(k<<16&4294967295|k>>>16),k=w+(P^I^p)+A[2]+3299628645&4294967295,w=P+(k<<23&4294967295|k>>>9),k=p+(P^(w|~I))+A[0]+4096336452&4294967295,p=w+(k<<6&4294967295|k>>>26),k=I+(w^(p|~P))+A[7]+1126891415&4294967295,I=p+(k<<10&4294967295|k>>>22),k=P+(p^(I|~w))+A[14]+2878612391&4294967295,P=I+(k<<15&4294967295|k>>>17),k=w+(I^(P|~p))+A[5]+4237533241&4294967295,w=P+(k<<21&4294967295|k>>>11),k=p+(P^(w|~I))+A[12]+1700485571&4294967295,p=w+(k<<6&4294967295|k>>>26),k=I+(w^(p|~P))+A[3]+2399980690&4294967295,I=p+(k<<10&4294967295|k>>>22),k=P+(p^(I|~w))+A[10]+4293915773&4294967295,P=I+(k<<15&4294967295|k>>>17),k=w+(I^(P|~p))+A[1]+2240044497&4294967295,w=P+(k<<21&4294967295|k>>>11),k=p+(P^(w|~I))+A[8]+1873313359&4294967295,p=w+(k<<6&4294967295|k>>>26),k=I+(w^(p|~P))+A[15]+4264355552&4294967295,I=p+(k<<10&4294967295|k>>>22),k=P+(p^(I|~w))+A[6]+2734768916&4294967295,P=I+(k<<15&4294967295|k>>>17),k=w+(I^(P|~p))+A[13]+1309151649&4294967295,w=P+(k<<21&4294967295|k>>>11),k=p+(P^(w|~I))+A[4]+4149444226&4294967295,p=w+(k<<6&4294967295|k>>>26),k=I+(w^(p|~P))+A[11]+3174756917&4294967295,I=p+(k<<10&4294967295|k>>>22),k=P+(p^(I|~w))+A[2]+718787259&4294967295,P=I+(k<<15&4294967295|k>>>17),k=w+(I^(P|~p))+A[9]+3951481745&4294967295,E.g[0]=E.g[0]+p&4294967295,E.g[1]=E.g[1]+(P+(k<<21&4294967295|k>>>11))&4294967295,E.g[2]=E.g[2]+P&4294967295,E.g[3]=E.g[3]+I&4294967295}r.prototype.v=function(E,p){p===void 0&&(p=E.length);const w=p-this.blockSize,A=this.C;let P=this.h,I=0;for(;I<p;){if(P==0)for(;I<=w;)s(this,E,I),I+=this.blockSize;if(typeof E=="string"){for(;I<p;)if(A[P++]=E.charCodeAt(I++),P==this.blockSize){s(this,A),P=0;break}}else for(;I<p;)if(A[P++]=E[I++],P==this.blockSize){s(this,A),P=0;break}}this.h=P,this.o+=p},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var p=1;p<E.length-8;++p)E[p]=0;p=this.o*8;for(var w=E.length-8;w<E.length;++w)E[w]=p&255,p/=256;for(this.v(E),E=Array(16),p=0,w=0;w<4;++w)for(let A=0;A<32;A+=8)E[p++]=this.g[w]>>>A&255;return E};function a(E,p){var w=l;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=p(E)}function o(E,p){this.h=p;const w=[];let A=!0;for(let P=E.length-1;P>=0;P--){const I=E[P]|0;A&&I==p||(w[P]=I,A=!1)}this.g=w}var l={};function c(E){return-128<=E&&E<128?a(E,function(p){return new o([p|0],p<0?-1:0)}):new o([E|0],E<0?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return h;if(E<0)return y(u(-E));const p=[];let w=1;for(let A=0;E>=w;A++)p[A]=E/w|0,w*=4294967296;return new o(p,0)}function d(E,p){if(E.length==0)throw Error("number format error: empty string");if(p=p||10,p<2||36<p)throw Error("radix out of range: "+p);if(E.charAt(0)=="-")return y(d(E.substring(1),p));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const w=u(Math.pow(p,8));let A=h;for(let I=0;I<E.length;I+=8){var P=Math.min(8,E.length-I);const k=parseInt(E.substring(I,I+P),p);P<8?(P=u(Math.pow(p,P)),A=A.j(P).add(u(k))):(A=A.j(w),A=A.add(u(k)))}return A}var h=c(0),f=c(1),m=c(16777216);t=o.prototype,t.m=function(){if(g(this))return-y(this).m();let E=0,p=1;for(let w=0;w<this.g.length;w++){const A=this.i(w);E+=(A>=0?A:4294967296+A)*p,p*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(v(this))return"0";if(g(this))return"-"+y(this).toString(E);const p=u(Math.pow(E,6));var w=this;let A="";for(;;){const P=T(w,p).g;w=b(w,P.j(p));let I=((w.g.length>0?w.g[0]:w.h)>>>0).toString(E);if(w=P,v(w))return I+A;for(;I.length<6;)I="0"+I;A=I+A}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function v(E){if(E.h!=0)return!1;for(let p=0;p<E.g.length;p++)if(E.g[p]!=0)return!1;return!0}function g(E){return E.h==-1}t.l=function(E){return E=b(this,E),g(E)?-1:v(E)?0:1};function y(E){const p=E.g.length,w=[];for(let A=0;A<p;A++)w[A]=~E.g[A];return new o(w,~E.h).add(f)}t.abs=function(){return g(this)?y(this):this},t.add=function(E){const p=Math.max(this.g.length,E.g.length),w=[];let A=0;for(let P=0;P<=p;P++){let I=A+(this.i(P)&65535)+(E.i(P)&65535),k=(I>>>16)+(this.i(P)>>>16)+(E.i(P)>>>16);A=k>>>16,I&=65535,k&=65535,w[P]=k<<16|I}return new o(w,w[w.length-1]&-2147483648?-1:0)};function b(E,p){return E.add(y(p))}t.j=function(E){if(v(this)||v(E))return h;if(g(this))return g(E)?y(this).j(y(E)):y(y(this).j(E));if(g(E))return y(this.j(y(E)));if(this.l(m)<0&&E.l(m)<0)return u(this.m()*E.m());const p=this.g.length+E.g.length,w=[];for(var A=0;A<2*p;A++)w[A]=0;for(A=0;A<this.g.length;A++)for(let P=0;P<E.g.length;P++){const I=this.i(A)>>>16,k=this.i(A)&65535,L=E.i(P)>>>16,U=E.i(P)&65535;w[2*A+2*P]+=k*U,x(w,2*A+2*P),w[2*A+2*P+1]+=I*U,x(w,2*A+2*P+1),w[2*A+2*P+1]+=k*L,x(w,2*A+2*P+1),w[2*A+2*P+2]+=I*L,x(w,2*A+2*P+2)}for(E=0;E<p;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=p;E<2*p;E++)w[E]=0;return new o(w,0)};function x(E,p){for(;(E[p]&65535)!=E[p];)E[p+1]+=E[p]>>>16,E[p]&=65535,p++}function S(E,p){this.g=E,this.h=p}function T(E,p){if(v(p))throw Error("division by zero");if(v(E))return new S(h,h);if(g(E))return p=T(y(E),p),new S(y(p.g),y(p.h));if(g(p))return p=T(E,y(p)),new S(y(p.g),p.h);if(E.g.length>30){if(g(E)||g(p))throw Error("slowDivide_ only works with positive integers.");for(var w=f,A=p;A.l(E)<=0;)w=_(w),A=_(A);var P=C(w,1),I=C(A,1);for(A=C(A,2),w=C(w,2);!v(A);){var k=I.add(A);k.l(E)<=0&&(P=P.add(w),I=k),A=C(A,1),w=C(w,1)}return p=b(E,P.j(p)),new S(P,p)}for(P=h;E.l(p)>=0;){for(w=Math.max(1,Math.floor(E.m()/p.m())),A=Math.ceil(Math.log(w)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),I=u(w),k=I.j(p);g(k)||k.l(E)>0;)w-=A,I=u(w),k=I.j(p);v(I)&&(I=f),P=P.add(I),E=b(E,k)}return new S(P,E)}t.B=function(E){return T(this,E).h},t.and=function(E){const p=Math.max(this.g.length,E.g.length),w=[];for(let A=0;A<p;A++)w[A]=this.i(A)&E.i(A);return new o(w,this.h&E.h)},t.or=function(E){const p=Math.max(this.g.length,E.g.length),w=[];for(let A=0;A<p;A++)w[A]=this.i(A)|E.i(A);return new o(w,this.h|E.h)},t.xor=function(E){const p=Math.max(this.g.length,E.g.length),w=[];for(let A=0;A<p;A++)w[A]=this.i(A)^E.i(A);return new o(w,this.h^E.h)};function _(E){const p=E.g.length+1,w=[];for(let A=0;A<p;A++)w[A]=E.i(A)<<1|E.i(A-1)>>>31;return new o(w,E.h)}function C(E,p){const w=p>>5;p%=32;const A=E.g.length-w,P=[];for(let I=0;I<A;I++)P[I]=p>0?E.i(I+w)>>>p|E.i(I+w+1)<<32-p:E.i(I+w);return new o(P,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,mH=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,uu=o}).apply(typeof v$<"u"?v$:typeof self<"u"?self:typeof window<"u"?window:{});var a0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pH,uy,gH,nw,yC,yH,vH,xH;(function(){var t,e=Object.defineProperty;function n(j){j=[typeof globalThis=="object"&&globalThis,j,typeof window=="object"&&window,typeof self=="object"&&self,typeof a0=="object"&&a0];for(var R=0;R<j.length;++R){var M=j[R];if(M&&M.Math==Math)return M}throw Error("Cannot find global object")}var r=n(this);function s(j,R){if(R)e:{var M=r;j=j.split(".");for(var B=0;B<j.length-1;B++){var oe=j[B];if(!(oe in M))break e;M=M[oe]}j=j[j.length-1],B=M[j],R=R(B),R!=B&&R!=null&&e(M,j,{configurable:!0,writable:!0,value:R})}}s("Symbol.dispose",function(j){return j||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(j){return j||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(j){return j||function(R){var M=[],B;for(B in R)Object.prototype.hasOwnProperty.call(R,B)&&M.push([B,R[B]]);return M}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(j){var R=typeof j;return R=="object"&&j!=null||R=="function"}function c(j,R,M){return j.call.apply(j.bind,arguments)}function u(j,R,M){return u=c,u.apply(null,arguments)}function d(j,R){var M=Array.prototype.slice.call(arguments,1);return function(){var B=M.slice();return B.push.apply(B,arguments),j.apply(this,B)}}function h(j,R){function M(){}M.prototype=R.prototype,j.Z=R.prototype,j.prototype=new M,j.prototype.constructor=j,j.Ob=function(B,oe,ce){for(var De=Array(arguments.length-2),qt=2;qt<arguments.length;qt++)De[qt-2]=arguments[qt];return R.prototype[oe].apply(B,De)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?j=>j&&AsyncContext.Snapshot.wrap(j):j=>j;function m(j){const R=j.length;if(R>0){const M=Array(R);for(let B=0;B<R;B++)M[B]=j[B];return M}return[]}function v(j,R){for(let B=1;B<arguments.length;B++){const oe=arguments[B];var M=typeof oe;if(M=M!="object"?M:oe?Array.isArray(oe)?"array":M:"null",M=="array"||M=="object"&&typeof oe.length=="number"){M=j.length||0;const ce=oe.length||0;j.length=M+ce;for(let De=0;De<ce;De++)j[M+De]=oe[De]}else j.push(oe)}}class g{constructor(R,M){this.i=R,this.j=M,this.h=0,this.g=null}get(){let R;return this.h>0?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function y(j){o.setTimeout(()=>{throw j},0)}function b(){var j=E;let R=null;return j.g&&(R=j.g,j.g=j.g.next,j.g||(j.h=null),R.next=null),R}class x{constructor(){this.h=this.g=null}add(R,M){const B=S.get();B.set(R,M),this.h?this.h.next=B:this.g=B,this.h=B}}var S=new g(()=>new T,j=>j.reset());class T{constructor(){this.next=this.g=this.h=null}set(R,M){this.h=R,this.g=M,this.next=null}reset(){this.next=this.g=this.h=null}}let _,C=!1,E=new x,p=()=>{const j=Promise.resolve(void 0);_=()=>{j.then(w)}};function w(){for(var j;j=b();){try{j.h.call(j.g)}catch(M){y(M)}var R=S;R.j(j),R.h<100&&(R.h++,j.next=R.g,R.g=j)}C=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(j,R){this.type=j,this.g=this.target=R,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var I=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var j=!1,R=Object.defineProperty({},"passive",{get:function(){j=!0}});try{const M=()=>{};o.addEventListener("test",M,R),o.removeEventListener("test",M,R)}catch{}return j}();function k(j){return/^[\s\xa0]*$/.test(j)}function L(j,R){P.call(this,j?j.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,j&&this.init(j,R)}h(L,P),L.prototype.init=function(j,R){const M=this.type=j.type,B=j.changedTouches&&j.changedTouches.length?j.changedTouches[0]:null;this.target=j.target||j.srcElement,this.g=R,R=j.relatedTarget,R||(M=="mouseover"?R=j.fromElement:M=="mouseout"&&(R=j.toElement)),this.relatedTarget=R,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0),this.button=j.button,this.key=j.key||"",this.ctrlKey=j.ctrlKey,this.altKey=j.altKey,this.shiftKey=j.shiftKey,this.metaKey=j.metaKey,this.pointerId=j.pointerId||0,this.pointerType=j.pointerType,this.state=j.state,this.i=j,j.defaultPrevented&&L.Z.h.call(this)},L.prototype.h=function(){L.Z.h.call(this);const j=this.i;j.preventDefault?j.preventDefault():j.returnValue=!1};var U="closure_listenable_"+(Math.random()*1e6|0),z=0;function O(j,R,M,B,oe){this.listener=j,this.proxy=null,this.src=R,this.type=M,this.capture=!!B,this.ha=oe,this.key=++z,this.da=this.fa=!1}function $(j){j.da=!0,j.listener=null,j.proxy=null,j.src=null,j.ha=null}function D(j,R,M){for(const B in j)R.call(M,j[B],B,j)}function K(j,R){for(const M in j)R.call(void 0,j[M],M,j)}function ie(j){const R={};for(const M in j)R[M]=j[M];return R}const ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _e(j,R){let M,B;for(let oe=1;oe<arguments.length;oe++){B=arguments[oe];for(M in B)j[M]=B[M];for(let ce=0;ce<ae.length;ce++)M=ae[ce],Object.prototype.hasOwnProperty.call(B,M)&&(j[M]=B[M])}}function Le(j){this.src=j,this.g={},this.h=0}Le.prototype.add=function(j,R,M,B,oe){const ce=j.toString();j=this.g[ce],j||(j=this.g[ce]=[],this.h++);const De=Nt(j,R,B,oe);return De>-1?(R=j[De],M||(R.fa=!1)):(R=new O(R,this.src,ce,!!B,oe),R.fa=M,j.push(R)),R};function ct(j,R){const M=R.type;if(M in j.g){var B=j.g[M],oe=Array.prototype.indexOf.call(B,R,void 0),ce;(ce=oe>=0)&&Array.prototype.splice.call(B,oe,1),ce&&($(R),j.g[M].length==0&&(delete j.g[M],j.h--))}}function Nt(j,R,M,B){for(let oe=0;oe<j.length;++oe){const ce=j[oe];if(!ce.da&&ce.listener==R&&ce.capture==!!M&&ce.ha==B)return oe}return-1}var Ne="closure_lm_"+(Math.random()*1e6|0),ft={};function be(j,R,M,B,oe){if(Array.isArray(R)){for(let ce=0;ce<R.length;ce++)be(j,R[ce],M,B,oe);return null}return M=Hr(M),j&&j[U]?j.J(R,M,l(B)?!!B.capture:!!B,oe):Me(j,R,M,!1,B,oe)}function Me(j,R,M,B,oe,ce){if(!R)throw Error("Invalid event type");const De=l(oe)?!!oe.capture:!!oe;let qt=tn(j);if(qt||(j[Ne]=qt=new Le(j)),M=qt.add(R,M,B,De,ce),M.proxy)return M;if(B=$e(),M.proxy=B,B.src=j,B.listener=M,j.addEventListener)I||(oe=De),oe===void 0&&(oe=!1),j.addEventListener(R.toString(),B,oe);else if(j.attachEvent)j.attachEvent(vt(R.toString()),B);else if(j.addListener&&j.removeListener)j.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return M}function $e(){function j(M){return R.call(j.src,j.listener,M)}const R=un;return j}function ue(j,R,M,B,oe){if(Array.isArray(R))for(var ce=0;ce<R.length;ce++)ue(j,R[ce],M,B,oe);else B=l(B)?!!B.capture:!!B,M=Hr(M),j&&j[U]?(j=j.i,ce=String(R).toString(),ce in j.g&&(R=j.g[ce],M=Nt(R,M,B,oe),M>-1&&($(R[M]),Array.prototype.splice.call(R,M,1),R.length==0&&(delete j.g[ce],j.h--)))):j&&(j=tn(j))&&(R=j.g[R.toString()],j=-1,R&&(j=Nt(R,M,B,oe)),(M=j>-1?R[j]:null)&&It(M))}function It(j){if(typeof j!="number"&&j&&!j.da){var R=j.src;if(R&&R[U])ct(R.i,j);else{var M=j.type,B=j.proxy;R.removeEventListener?R.removeEventListener(M,B,j.capture):R.detachEvent?R.detachEvent(vt(M),B):R.addListener&&R.removeListener&&R.removeListener(B),(M=tn(R))?(ct(M,j),M.h==0&&(M.src=null,R[Ne]=null)):$(j)}}}function vt(j){return j in ft?ft[j]:ft[j]="on"+j}function un(j,R){if(j.da)j=!0;else{R=new L(R,this);const M=j.listener,B=j.ha||j.src;j.fa&&It(j),j=M.call(B,R)}return j}function tn(j){return j=j[Ne],j instanceof Le?j:null}var Nn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Hr(j){return typeof j=="function"?j:(j[Nn]||(j[Nn]=function(R){return j.handleEvent(R)}),j[Nn])}function an(){A.call(this),this.i=new Le(this),this.M=this,this.G=null}h(an,A),an.prototype[U]=!0,an.prototype.removeEventListener=function(j,R,M,B){ue(this,j,R,M,B)};function H(j,R){var M,B=j.G;if(B)for(M=[];B;B=B.G)M.push(B);if(j=j.M,B=R.type||R,typeof R=="string")R=new P(R,j);else if(R instanceof P)R.target=R.target||j;else{var oe=R;R=new P(B,j),_e(R,oe)}oe=!0;let ce,De;if(M)for(De=M.length-1;De>=0;De--)ce=R.g=M[De],oe=se(ce,B,!0,R)&&oe;if(ce=R.g=j,oe=se(ce,B,!0,R)&&oe,oe=se(ce,B,!1,R)&&oe,M)for(De=0;De<M.length;De++)ce=R.g=M[De],oe=se(ce,B,!1,R)&&oe}an.prototype.N=function(){if(an.Z.N.call(this),this.i){var j=this.i;for(const R in j.g){const M=j.g[R];for(let B=0;B<M.length;B++)$(M[B]);delete j.g[R],j.h--}}this.G=null},an.prototype.J=function(j,R,M,B){return this.i.add(String(j),R,!1,M,B)},an.prototype.K=function(j,R,M,B){return this.i.add(String(j),R,!0,M,B)};function se(j,R,M,B){if(R=j.i.g[String(R)],!R)return!0;R=R.concat();let oe=!0;for(let ce=0;ce<R.length;++ce){const De=R[ce];if(De&&!De.da&&De.capture==M){const qt=De.listener,Rr=De.ha||De.src;De.fa&&ct(j.i,De),oe=qt.call(Rr,B)!==!1&&oe}}return oe&&!B.defaultPrevented}function de(j,R){if(typeof j!="function")if(j&&typeof j.handleEvent=="function")j=u(j.handleEvent,j);else throw Error("Invalid listener argument");return Number(R)>2147483647?-1:o.setTimeout(j,R||0)}function Re(j){j.g=de(()=>{j.g=null,j.i&&(j.i=!1,Re(j))},j.l);const R=j.h;j.h=null,j.m.apply(null,R)}class Oe extends A{constructor(R,M){super(),this.m=R,this.l=M,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:Re(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Se(j){A.call(this),this.h=j,this.g={}}h(Se,A);var qe=[];function Ht(j){D(j.g,function(R,M){this.g.hasOwnProperty(M)&&It(R)},j),j.g={}}Se.prototype.N=function(){Se.Z.N.call(this),Ht(this)},Se.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dn=o.JSON.stringify,ys=o.JSON.parse,_a=class{stringify(j){return o.JSON.stringify(j,void 0)}parse(j){return o.JSON.parse(j,void 0)}};function wi(){}function ld(){}var _i={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ei(){P.call(this,"d")}h(ei,P);function tc(){P.call(this,"c")}h(tc,P);var ss={},rf=null;function Jo(){return rf=rf||new an}ss.Ia="serverreachability";function pg(j){P.call(this,ss.Ia,j)}h(pg,P);function nc(j){const R=Jo();H(R,new pg(R))}ss.STAT_EVENT="statevent";function Sb(j,R){P.call(this,ss.STAT_EVENT,j),this.stat=R}h(Sb,P);function kr(j){const R=Jo();H(R,new Sb(R,j))}ss.Ja="timingevent";function ja(j,R){P.call(this,ss.Ja,j),this.size=R}h(ja,P);function cd(j,R){if(typeof j!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){j()},R)}function wt(){this.g=!0}wt.prototype.ua=function(){this.g=!1};function mn(j,R,M,B,oe,ce){j.info(function(){if(j.g)if(ce){var De="",qt=ce.split("&");for(let An=0;An<qt.length;An++){var Rr=qt[An].split("=");if(Rr.length>1){const Gr=Rr[0];Rr=Rr[1];const uo=Gr.split("_");De=uo.length>=2&&uo[1]=="type"?De+(Gr+"="+Rr+"&"):De+(Gr+"=redacted&")}}}else De=null;else De=ce;return"XMLHTTP REQ ("+B+") [attempt "+oe+"]: "+R+`
`+M+`
`+De})}function Pn(j,R,M,B,oe,ce,De){j.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+oe+"]: "+R+`
`+M+`
`+ce+" "+De})}function Kr(j,R,M,B){j.info(function(){return"XMLHTTP TEXT ("+R+"): "+lo(j,M)+(B?" "+B:"")})}function ji(j,R){j.info(function(){return"TIMEOUT: "+R})}wt.prototype.info=function(){};function lo(j,R){if(!j.g)return R;if(!R)return null;try{const ce=JSON.parse(R);if(ce){for(j=0;j<ce.length;j++)if(Array.isArray(ce[j])){var M=ce[j];if(!(M.length<2)){var B=M[1];if(Array.isArray(B)&&!(B.length<1)){var oe=B[0];if(oe!="noop"&&oe!="stop"&&oe!="close")for(let De=1;De<B.length;De++)B[De]=""}}}}return dn(ce)}catch{return R}}var qi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ti={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Na;function y1(){}h(y1,wi),y1.prototype.g=function(){return new XMLHttpRequest},Na=new y1;function gg(j){return encodeURIComponent(String(j))}function Bre(j){var R=1;j=j.split(":");const M=[];for(;R>0&&j.length;)M.push(j.shift()),R--;return j.length&&M.push(j.join(":")),M}function rc(j,R,M,B){this.j=j,this.i=R,this.l=M,this.S=B||1,this.V=new Se(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new eD}function eD(){this.i=null,this.g="",this.h=!1}var tD={},v1={};function x1(j,R,M){j.M=1,j.A=Ab(co(R)),j.u=M,j.R=!0,nD(j,null)}function nD(j,R){j.F=Date.now(),Eb(j),j.B=co(j.A);var M=j.B,B=j.S;Array.isArray(B)||(B=[String(B)]),pD(M.i,"t",B),j.C=0,M=j.j.L,j.h=new eD,j.g=RD(j.j,M?R:null,!j.u),j.P>0&&(j.O=new Oe(u(j.Y,j,j.g),j.P)),R=j.V,M=j.g,B=j.ba;var oe="readystatechange";Array.isArray(oe)||(oe&&(qe[0]=oe.toString()),oe=qe);for(let ce=0;ce<oe.length;ce++){const De=be(M,oe[ce],B||R.handleEvent,!1,R.h||R);if(!De)break;R.g[De.key]=De}R=j.J?ie(j.J):{},j.u?(j.v||(j.v="POST"),R["Content-Type"]="application/x-www-form-urlencoded",j.g.ea(j.B,j.v,j.u,R)):(j.v="GET",j.g.ea(j.B,j.v,null,R)),nc(),mn(j.i,j.v,j.B,j.l,j.S,j.u)}rc.prototype.ba=function(j){j=j.target;const R=this.O;R&&ac(j)==3?R.j():this.Y(j)},rc.prototype.Y=function(j){try{if(j==this.g)e:{const qt=ac(this.g),Rr=this.g.ya(),An=this.g.ca();if(!(qt<3)&&(qt!=3||this.g&&(this.h.h||this.g.la()||_D(this.g)))){this.K||qt!=4||Rr==7||(Rr==8||An<=0?nc(3):nc(2)),b1(this);var R=this.g.ca();this.X=R;var M=Ure(this);if(this.o=R==200,Pn(this.i,this.v,this.B,this.l,this.S,qt,R),this.o){if(this.U&&!this.L){t:{if(this.g){var B,oe=this.g;if((B=oe.g?oe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(B)){var ce=B;break t}}ce=null}if(j=ce)Kr(this.i,this.l,j,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,w1(this,j);else{this.o=!1,this.m=3,kr(12),ud(this),yg(this);break e}}if(this.R){j=!0;let Gr;for(;!this.K&&this.C<M.length;)if(Gr=zre(this,M),Gr==v1){qt==4&&(this.m=4,kr(14),j=!1),Kr(this.i,this.l,null,"[Incomplete Response]");break}else if(Gr==tD){this.m=4,kr(15),Kr(this.i,this.l,M,"[Invalid Chunk]"),j=!1;break}else Kr(this.i,this.l,Gr,null),w1(this,Gr);if(rD(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qt!=4||M.length!=0||this.h.h||(this.m=1,kr(16),j=!1),this.o=this.o&&j,!j)Kr(this.i,this.l,M,"[Invalid Chunked Response]"),ud(this),yg(this);else if(M.length>0&&!this.W){this.W=!0;var De=this.j;De.g==this&&De.aa&&!De.P&&(De.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),C1(De),De.P=!0,kr(11))}}else Kr(this.i,this.l,M,null),w1(this,M);qt==4&&ud(this),this.o&&!this.K&&(qt==4?CD(this.j,this):(this.o=!1,Eb(this)))}else rse(this.g),R==400&&M.indexOf("Unknown SID")>0?(this.m=3,kr(12)):(this.m=0,kr(13)),ud(this),yg(this)}}}catch{}finally{}};function Ure(j){if(!rD(j))return j.g.la();const R=_D(j.g);if(R==="")return"";let M="";const B=R.length,oe=ac(j.g)==4;if(!j.h.i){if(typeof TextDecoder>"u")return ud(j),yg(j),"";j.h.i=new o.TextDecoder}for(let ce=0;ce<B;ce++)j.h.h=!0,M+=j.h.i.decode(R[ce],{stream:!(oe&&ce==B-1)});return R.length=0,j.h.g+=M,j.C=0,j.h.g}function rD(j){return j.g?j.v=="GET"&&j.M!=2&&j.j.Aa:!1}function zre(j,R){var M=j.C,B=R.indexOf(`
`,M);return B==-1?v1:(M=Number(R.substring(M,B)),isNaN(M)?tD:(B+=1,B+M>R.length?v1:(R=R.slice(B,B+M),j.C=B+M,R)))}rc.prototype.cancel=function(){this.K=!0,ud(this)};function Eb(j){j.T=Date.now()+j.H,sD(j,j.H)}function sD(j,R){if(j.D!=null)throw Error("WatchDog timer not null");j.D=cd(u(j.aa,j),R)}function b1(j){j.D&&(o.clearTimeout(j.D),j.D=null)}rc.prototype.aa=function(){this.D=null;const j=Date.now();j-this.T>=0?(ji(this.i,this.B),this.M!=2&&(nc(),kr(17)),ud(this),this.m=2,yg(this)):sD(this,this.T-j)};function yg(j){j.j.I==0||j.K||CD(j.j,j)}function ud(j){b1(j);var R=j.O;R&&typeof R.dispose=="function"&&R.dispose(),j.O=null,Ht(j.V),j.g&&(R=j.g,j.g=null,R.abort(),R.dispose())}function w1(j,R){try{var M=j.j;if(M.I!=0&&(M.g==j||_1(M.h,j))){if(!j.L&&_1(M.h,j)&&M.I==3){try{var B=M.Ba.g.parse(R)}catch{B=null}if(Array.isArray(B)&&B.length==3){var oe=B;if(oe[0]==0){e:if(!M.v){if(M.g)if(M.g.F+3e3<j.F)kb(M),Pb(M);else break e;T1(M),kr(18)}}else M.xa=oe[1],0<M.xa-M.K&&oe[2]<37500&&M.F&&M.A==0&&!M.C&&(M.C=cd(u(M.Va,M),6e3));oD(M.h)<=1&&M.ta&&(M.ta=void 0)}else hd(M,11)}else if((j.L||M.g==j)&&kb(M),!k(R))for(oe=M.Ba.g.parse(R),R=0;R<oe.length;R++){let An=oe[R];const Gr=An[0];if(!(Gr<=M.K))if(M.K=Gr,An=An[1],M.I==2)if(An[0]=="c"){M.M=An[1],M.ba=An[2];const uo=An[3];uo!=null&&(M.ka=uo,M.j.info("VER="+M.ka));const fd=An[4];fd!=null&&(M.za=fd,M.j.info("SVER="+M.za));const oc=An[5];oc!=null&&typeof oc=="number"&&oc>0&&(B=1.5*oc,M.O=B,M.j.info("backChannelRequestTimeoutMs_="+B)),B=M;const lc=j.g;if(lc){const Ob=lc.g?lc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ob){var ce=B.h;ce.g||Ob.indexOf("spdy")==-1&&Ob.indexOf("quic")==-1&&Ob.indexOf("h2")==-1||(ce.j=ce.l,ce.g=new Set,ce.h&&(j1(ce,ce.h),ce.h=null))}if(B.G){const P1=lc.g?lc.g.getResponseHeader("X-HTTP-Session-Id"):null;P1&&(B.wa=P1,Fn(B.J,B.G,P1))}}M.I=3,M.l&&M.l.ra(),M.aa&&(M.T=Date.now()-j.F,M.j.info("Handshake RTT: "+M.T+"ms")),B=M;var De=j;if(B.na=kD(B,B.L?B.ba:null,B.W),De.L){lD(B.h,De);var qt=De,Rr=B.O;Rr&&(qt.H=Rr),qt.D&&(b1(qt),Eb(qt)),B.g=De}else AD(B);M.i.length>0&&Ib(M)}else An[0]!="stop"&&An[0]!="close"||hd(M,7);else M.I==3&&(An[0]=="stop"||An[0]=="close"?An[0]=="stop"?hd(M,7):A1(M):An[0]!="noop"&&M.l&&M.l.qa(An),M.A=0)}}nc(4)}catch{}}var qre=class{constructor(j,R){this.g=j,this.map=R}};function iD(j){this.l=j||10,o.PerformanceNavigationTiming?(j=o.performance.getEntriesByType("navigation"),j=j.length>0&&(j[0].nextHopProtocol=="hq"||j[0].nextHopProtocol=="h2")):j=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=j?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function aD(j){return j.h?!0:j.g?j.g.size>=j.j:!1}function oD(j){return j.h?1:j.g?j.g.size:0}function _1(j,R){return j.h?j.h==R:j.g?j.g.has(R):!1}function j1(j,R){j.g?j.g.add(R):j.h=R}function lD(j,R){j.h&&j.h==R?j.h=null:j.g&&j.g.has(R)&&j.g.delete(R)}iD.prototype.cancel=function(){if(this.i=cD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const j of this.g.values())j.cancel();this.g.clear()}};function cD(j){if(j.h!=null)return j.i.concat(j.h.G);if(j.g!=null&&j.g.size!==0){let R=j.i;for(const M of j.g.values())R=R.concat(M.G);return R}return m(j.i)}var uD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wre(j,R){if(j){j=j.split("&");for(let M=0;M<j.length;M++){const B=j[M].indexOf("=");let oe,ce=null;B>=0?(oe=j[M].substring(0,B),ce=j[M].substring(B+1)):oe=j[M],R(oe,ce?decodeURIComponent(ce.replace(/\+/g," ")):"")}}}function sc(j){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let R;j instanceof sc?(this.l=j.l,vg(this,j.j),this.o=j.o,this.g=j.g,xg(this,j.u),this.h=j.h,N1(this,gD(j.i)),this.m=j.m):j&&(R=String(j).match(uD))?(this.l=!1,vg(this,R[1]||"",!0),this.o=bg(R[2]||""),this.g=bg(R[3]||"",!0),xg(this,R[4]),this.h=bg(R[5]||"",!0),N1(this,R[6]||"",!0),this.m=bg(R[7]||"")):(this.l=!1,this.i=new _g(null,this.l))}sc.prototype.toString=function(){const j=[];var R=this.j;R&&j.push(wg(R,dD,!0),":");var M=this.g;return(M||R=="file")&&(j.push("//"),(R=this.o)&&j.push(wg(R,dD,!0),"@"),j.push(gg(M).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),M=this.u,M!=null&&j.push(":",String(M))),(M=this.h)&&(this.g&&M.charAt(0)!="/"&&j.push("/"),j.push(wg(M,M.charAt(0)=="/"?Gre:Kre,!0))),(M=this.i.toString())&&j.push("?",M),(M=this.m)&&j.push("#",wg(M,Qre)),j.join("")},sc.prototype.resolve=function(j){const R=co(this);let M=!!j.j;M?vg(R,j.j):M=!!j.o,M?R.o=j.o:M=!!j.g,M?R.g=j.g:M=j.u!=null;var B=j.h;if(M)xg(R,j.u);else if(M=!!j.h){if(B.charAt(0)!="/")if(this.g&&!this.h)B="/"+B;else{var oe=R.h.lastIndexOf("/");oe!=-1&&(B=R.h.slice(0,oe+1)+B)}if(oe=B,oe==".."||oe==".")B="";else if(oe.indexOf("./")!=-1||oe.indexOf("/.")!=-1){B=oe.lastIndexOf("/",0)==0,oe=oe.split("/");const ce=[];for(let De=0;De<oe.length;){const qt=oe[De++];qt=="."?B&&De==oe.length&&ce.push(""):qt==".."?((ce.length>1||ce.length==1&&ce[0]!="")&&ce.pop(),B&&De==oe.length&&ce.push("")):(ce.push(qt),B=!0)}B=ce.join("/")}else B=oe}return M?R.h=B:M=j.i.toString()!=="",M?N1(R,gD(j.i)):M=!!j.m,M&&(R.m=j.m),R};function co(j){return new sc(j)}function vg(j,R,M){j.j=M?bg(R,!0):R,j.j&&(j.j=j.j.replace(/:$/,""))}function xg(j,R){if(R){if(R=Number(R),isNaN(R)||R<0)throw Error("Bad port number "+R);j.u=R}else j.u=null}function N1(j,R,M){R instanceof _g?(j.i=R,Xre(j.i,j.l)):(M||(R=wg(R,Yre)),j.i=new _g(R,j.l))}function Fn(j,R,M){j.i.set(R,M)}function Ab(j){return Fn(j,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),j}function bg(j,R){return j?R?decodeURI(j.replace(/%25/g,"%2525")):decodeURIComponent(j):""}function wg(j,R,M){return typeof j=="string"?(j=encodeURI(j).replace(R,Hre),M&&(j=j.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j):null}function Hre(j){return j=j.charCodeAt(0),"%"+(j>>4&15).toString(16)+(j&15).toString(16)}var dD=/[#\/\?@]/g,Kre=/[#\?:]/g,Gre=/[#\?]/g,Yre=/[#\?@]/g,Qre=/#/g;function _g(j,R){this.h=this.g=null,this.i=j||null,this.j=!!R}function dd(j){j.g||(j.g=new Map,j.h=0,j.i&&Wre(j.i,function(R,M){j.add(decodeURIComponent(R.replace(/\+/g," ")),M)}))}t=_g.prototype,t.add=function(j,R){dd(this),this.i=null,j=sf(this,j);let M=this.g.get(j);return M||this.g.set(j,M=[]),M.push(R),this.h+=1,this};function hD(j,R){dd(j),R=sf(j,R),j.g.has(R)&&(j.i=null,j.h-=j.g.get(R).length,j.g.delete(R))}function fD(j,R){return dd(j),R=sf(j,R),j.g.has(R)}t.forEach=function(j,R){dd(this),this.g.forEach(function(M,B){M.forEach(function(oe){j.call(R,oe,B,this)},this)},this)};function mD(j,R){dd(j);let M=[];if(typeof R=="string")fD(j,R)&&(M=M.concat(j.g.get(sf(j,R))));else for(j=Array.from(j.g.values()),R=0;R<j.length;R++)M=M.concat(j[R]);return M}t.set=function(j,R){return dd(this),this.i=null,j=sf(this,j),fD(this,j)&&(this.h-=this.g.get(j).length),this.g.set(j,[R]),this.h+=1,this},t.get=function(j,R){return j?(j=mD(this,j),j.length>0?String(j[0]):R):R};function pD(j,R,M){hD(j,R),M.length>0&&(j.i=null,j.g.set(sf(j,R),m(M)),j.h+=M.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const j=[],R=Array.from(this.g.keys());for(let B=0;B<R.length;B++){var M=R[B];const oe=gg(M);M=mD(this,M);for(let ce=0;ce<M.length;ce++){let De=oe;M[ce]!==""&&(De+="="+gg(M[ce])),j.push(De)}}return this.i=j.join("&")};function gD(j){const R=new _g;return R.i=j.i,j.g&&(R.g=new Map(j.g),R.h=j.h),R}function sf(j,R){return R=String(R),j.j&&(R=R.toLowerCase()),R}function Xre(j,R){R&&!j.j&&(dd(j),j.i=null,j.g.forEach(function(M,B){const oe=B.toLowerCase();B!=oe&&(hD(this,B),pD(this,oe,M))},j)),j.j=R}function Zre(j,R){const M=new wt;if(o.Image){const B=new Image;B.onload=d(ic,M,"TestLoadImage: loaded",!0,R,B),B.onerror=d(ic,M,"TestLoadImage: error",!1,R,B),B.onabort=d(ic,M,"TestLoadImage: abort",!1,R,B),B.ontimeout=d(ic,M,"TestLoadImage: timeout",!1,R,B),o.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=j}else R(!1)}function Jre(j,R){const M=new wt,B=new AbortController,oe=setTimeout(()=>{B.abort(),ic(M,"TestPingServer: timeout",!1,R)},1e4);fetch(j,{signal:B.signal}).then(ce=>{clearTimeout(oe),ce.ok?ic(M,"TestPingServer: ok",!0,R):ic(M,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(oe),ic(M,"TestPingServer: error",!1,R)})}function ic(j,R,M,B,oe){try{oe&&(oe.onload=null,oe.onerror=null,oe.onabort=null,oe.ontimeout=null),B(M)}catch{}}function ese(){this.g=new _a}function S1(j){this.i=j.Sb||null,this.h=j.ab||!1}h(S1,wi),S1.prototype.g=function(){return new Tb(this.i,this.h)};function Tb(j,R){an.call(this),this.H=j,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Tb,an),t=Tb.prototype,t.open=function(j,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=j,this.D=R,this.readyState=1,Ng(this)},t.send=function(j){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const R={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};j&&(R.body=j),(this.H||o).fetch(new Request(this.D,R)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,jg(this)),this.readyState=0},t.Pa=function(j){if(this.g&&(this.l=j,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=j.headers,this.readyState=2,Ng(this)),this.g&&(this.readyState=3,Ng(this),this.g)))if(this.responseType==="arraybuffer")j.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in j){if(this.j=j.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;yD(this)}else j.text().then(this.Oa.bind(this),this.ga.bind(this))};function yD(j){j.j.read().then(j.Ma.bind(j)).catch(j.ga.bind(j))}t.Ma=function(j){if(this.g){if(this.o&&j.value)this.response.push(j.value);else if(!this.o){var R=j.value?j.value:new Uint8Array(0);(R=this.B.decode(R,{stream:!j.done}))&&(this.response=this.responseText+=R)}j.done?jg(this):Ng(this),this.readyState==3&&yD(this)}},t.Oa=function(j){this.g&&(this.response=this.responseText=j,jg(this))},t.Na=function(j){this.g&&(this.response=j,jg(this))},t.ga=function(){this.g&&jg(this)};function jg(j){j.readyState=4,j.l=null,j.j=null,j.B=null,Ng(j)}t.setRequestHeader=function(j,R){this.A.append(j,R)},t.getResponseHeader=function(j){return this.h&&this.h.get(j.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const j=[],R=this.h.entries();for(var M=R.next();!M.done;)M=M.value,j.push(M[0]+": "+M[1]),M=R.next();return j.join(`\r
`)};function Ng(j){j.onreadystatechange&&j.onreadystatechange.call(j)}Object.defineProperty(Tb.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(j){this.m=j?"include":"same-origin"}});function vD(j){let R="";return D(j,function(M,B){R+=B,R+=":",R+=M,R+=`\r
`}),R}function E1(j,R,M){e:{for(B in M){var B=!1;break e}B=!0}B||(M=vD(M),typeof j=="string"?M!=null&&gg(M):Fn(j,R,M))}function ir(j){an.call(this),this.headers=new Map,this.L=j||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(ir,an);var tse=/^https?$/i,nse=["POST","PUT"];t=ir.prototype,t.Fa=function(j){this.H=j},t.ea=function(j,R,M,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+j);R=R?R.toUpperCase():"GET",this.D=j,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Na.g(),this.g.onreadystatechange=f(u(this.Ca,this));try{this.B=!0,this.g.open(R,String(j),!0),this.B=!1}catch(ce){xD(this,ce);return}if(j=M||"",M=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var oe in B)M.set(oe,B[oe]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const ce of B.keys())M.set(ce,B.get(ce));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(M.keys()).find(ce=>ce.toLowerCase()=="content-type"),oe=o.FormData&&j instanceof o.FormData,!(Array.prototype.indexOf.call(nse,R,void 0)>=0)||B||oe||M.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ce,De]of M)this.g.setRequestHeader(ce,De);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(j),this.v=!1}catch(ce){xD(this,ce)}};function xD(j,R){j.h=!1,j.g&&(j.j=!0,j.g.abort(),j.j=!1),j.l=R,j.o=5,bD(j),Cb(j)}function bD(j){j.A||(j.A=!0,H(j,"complete"),H(j,"error"))}t.abort=function(j){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=j||7,H(this,"complete"),H(this,"abort"),Cb(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cb(this,!0)),ir.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?wD(this):this.Xa())},t.Xa=function(){wD(this)};function wD(j){if(j.h&&typeof a<"u"){if(j.v&&ac(j)==4)setTimeout(j.Ca.bind(j),0);else if(H(j,"readystatechange"),ac(j)==4){j.h=!1;try{const ce=j.ca();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var M;if(!(M=R)){var B;if(B=ce===0){let De=String(j.D).match(uD)[1]||null;!De&&o.self&&o.self.location&&(De=o.self.location.protocol.slice(0,-1)),B=!tse.test(De?De.toLowerCase():"")}M=B}if(M)H(j,"complete"),H(j,"success");else{j.o=6;try{var oe=ac(j)>2?j.g.statusText:""}catch{oe=""}j.l=oe+" ["+j.ca()+"]",bD(j)}}finally{Cb(j)}}}}function Cb(j,R){if(j.g){j.m&&(clearTimeout(j.m),j.m=null);const M=j.g;j.g=null,R||H(j,"ready");try{M.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ac(j){return j.g?j.g.readyState:0}t.ca=function(){try{return ac(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(j){if(this.g){var R=this.g.responseText;return j&&R.indexOf(j)==0&&(R=R.substring(j.length)),ys(R)}};function _D(j){try{if(!j.g)return null;if("response"in j.g)return j.g.response;switch(j.F){case"":case"text":return j.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in j.g)return j.g.mozResponseArrayBuffer}return null}catch{return null}}function rse(j){const R={};j=(j.g&&ac(j)>=2&&j.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<j.length;B++){if(k(j[B]))continue;var M=Bre(j[B]);const oe=M[0];if(M=M[1],typeof M!="string")continue;M=M.trim();const ce=R[oe]||[];R[oe]=ce,ce.push(M)}K(R,function(B){return B.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sg(j,R,M){return M&&M.internalChannelParams&&M.internalChannelParams[j]||R}function jD(j){this.za=0,this.i=[],this.j=new wt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Sg("failFast",!1,j),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Sg("baseRetryDelayMs",5e3,j),this.Za=Sg("retryDelaySeedMs",1e4,j),this.Ta=Sg("forwardChannelMaxRetries",2,j),this.va=Sg("forwardChannelRequestTimeoutMs",2e4,j),this.ma=j&&j.xmlHttpFactory||void 0,this.Ua=j&&j.Rb||void 0,this.Aa=j&&j.useFetchStreams||!1,this.O=void 0,this.L=j&&j.supportsCrossDomainXhr||!1,this.M="",this.h=new iD(j&&j.concurrentRequestLimit),this.Ba=new ese,this.S=j&&j.fastHandshake||!1,this.R=j&&j.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=j&&j.Pb||!1,j&&j.ua&&this.j.ua(),j&&j.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&j&&j.detectBufferingProxy||!1,this.ia=void 0,j&&j.longPollingTimeout&&j.longPollingTimeout>0&&(this.ia=j.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=jD.prototype,t.ka=8,t.I=1,t.connect=function(j,R,M,B){kr(0),this.W=j,this.H=R||{},M&&B!==void 0&&(this.H.OSID=M,this.H.OAID=B),this.F=this.X,this.J=kD(this,null,this.W),Ib(this)};function A1(j){if(ND(j),j.I==3){var R=j.V++,M=co(j.J);if(Fn(M,"SID",j.M),Fn(M,"RID",R),Fn(M,"TYPE","terminate"),Eg(j,M),R=new rc(j,j.j,R),R.M=2,R.A=Ab(co(M)),M=!1,o.navigator&&o.navigator.sendBeacon)try{M=o.navigator.sendBeacon(R.A.toString(),"")}catch{}!M&&o.Image&&(new Image().src=R.A,M=!0),M||(R.g=RD(R.j,null),R.g.ea(R.A)),R.F=Date.now(),Eb(R)}ID(j)}function Pb(j){j.g&&(C1(j),j.g.cancel(),j.g=null)}function ND(j){Pb(j),j.v&&(o.clearTimeout(j.v),j.v=null),kb(j),j.h.cancel(),j.m&&(typeof j.m=="number"&&o.clearTimeout(j.m),j.m=null)}function Ib(j){if(!aD(j.h)&&!j.m){j.m=!0;var R=j.Ea;_||p(),C||(_(),C=!0),E.add(R,j),j.D=0}}function sse(j,R){return oD(j.h)>=j.h.j-(j.m?1:0)?!1:j.m?(j.i=R.G.concat(j.i),!0):j.I==1||j.I==2||j.D>=(j.Sa?0:j.Ta)?!1:(j.m=cd(u(j.Ea,j,R),PD(j,j.D)),j.D++,!0)}t.Ea=function(j){if(this.m)if(this.m=null,this.I==1){if(!j){this.V=Math.floor(Math.random()*1e5),j=this.V++;const oe=new rc(this,this.j,j);let ce=this.o;if(this.U&&(ce?(ce=ie(ce),_e(ce,this.U)):ce=this.U),this.u!==null||this.R||(oe.J=ce,ce=null),this.S)e:{for(var R=0,M=0;M<this.i.length;M++){t:{var B=this.i[M];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(R+=B,R>4096){R=M;break e}if(R===4096||M===this.i.length-1){R=M+1;break e}}R=1e3}else R=1e3;R=ED(this,oe,R),M=co(this.J),Fn(M,"RID",j),Fn(M,"CVER",22),this.G&&Fn(M,"X-HTTP-Session-Id",this.G),Eg(this,M),ce&&(this.R?R="headers="+gg(vD(ce))+"&"+R:this.u&&E1(M,this.u,ce)),j1(this.h,oe),this.Ra&&Fn(M,"TYPE","init"),this.S?(Fn(M,"$req",R),Fn(M,"SID","null"),oe.U=!0,x1(oe,M,null)):x1(oe,M,R),this.I=2}}else this.I==3&&(j?SD(this,j):this.i.length==0||aD(this.h)||SD(this))};function SD(j,R){var M;R?M=R.l:M=j.V++;const B=co(j.J);Fn(B,"SID",j.M),Fn(B,"RID",M),Fn(B,"AID",j.K),Eg(j,B),j.u&&j.o&&E1(B,j.u,j.o),M=new rc(j,j.j,M,j.D+1),j.u===null&&(M.J=j.o),R&&(j.i=R.G.concat(j.i)),R=ED(j,M,1e3),M.H=Math.round(j.va*.5)+Math.round(j.va*.5*Math.random()),j1(j.h,M),x1(M,B,R)}function Eg(j,R){j.H&&D(j.H,function(M,B){Fn(R,B,M)}),j.l&&D({},function(M,B){Fn(R,B,M)})}function ED(j,R,M){M=Math.min(j.i.length,M);const B=j.l?u(j.l.Ka,j.l,j):null;e:{var oe=j.i;let qt=-1;for(;;){const Rr=["count="+M];qt==-1?M>0?(qt=oe[0].g,Rr.push("ofs="+qt)):qt=0:Rr.push("ofs="+qt);let An=!0;for(let Gr=0;Gr<M;Gr++){var ce=oe[Gr].g;const uo=oe[Gr].map;if(ce-=qt,ce<0)qt=Math.max(0,oe[Gr].g-100),An=!1;else try{ce="req"+ce+"_"||"";try{var De=uo instanceof Map?uo:Object.entries(uo);for(const[fd,oc]of De){let lc=oc;l(oc)&&(lc=dn(oc)),Rr.push(ce+fd+"="+encodeURIComponent(lc))}}catch(fd){throw Rr.push(ce+"type="+encodeURIComponent("_badmap")),fd}}catch{B&&B(uo)}}if(An){De=Rr.join("&");break e}}De=void 0}return j=j.i.splice(0,M),R.G=j,De}function AD(j){if(!j.g&&!j.v){j.Y=1;var R=j.Da;_||p(),C||(_(),C=!0),E.add(R,j),j.A=0}}function T1(j){return j.g||j.v||j.A>=3?!1:(j.Y++,j.v=cd(u(j.Da,j),PD(j,j.A)),j.A++,!0)}t.Da=function(){if(this.v=null,TD(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var j=4*this.T;this.j.info("BP detection timer enabled: "+j),this.B=cd(u(this.Wa,this),j)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,kr(10),Pb(this),TD(this))};function C1(j){j.B!=null&&(o.clearTimeout(j.B),j.B=null)}function TD(j){j.g=new rc(j,j.j,"rpc",j.Y),j.u===null&&(j.g.J=j.o),j.g.P=0;var R=co(j.na);Fn(R,"RID","rpc"),Fn(R,"SID",j.M),Fn(R,"AID",j.K),Fn(R,"CI",j.F?"0":"1"),!j.F&&j.ia&&Fn(R,"TO",j.ia),Fn(R,"TYPE","xmlhttp"),Eg(j,R),j.u&&j.o&&E1(R,j.u,j.o),j.O&&(j.g.H=j.O);var M=j.g;j=j.ba,M.M=1,M.A=Ab(co(R)),M.u=null,M.R=!0,nD(M,j)}t.Va=function(){this.C!=null&&(this.C=null,Pb(this),T1(this),kr(19))};function kb(j){j.C!=null&&(o.clearTimeout(j.C),j.C=null)}function CD(j,R){var M=null;if(j.g==R){kb(j),C1(j),j.g=null;var B=2}else if(_1(j.h,R))M=R.G,lD(j.h,R),B=1;else return;if(j.I!=0){if(R.o)if(B==1){M=R.u?R.u.length:0,R=Date.now()-R.F;var oe=j.D;B=Jo(),H(B,new ja(B,M)),Ib(j)}else AD(j);else if(oe=R.m,oe==3||oe==0&&R.X>0||!(B==1&&sse(j,R)||B==2&&T1(j)))switch(M&&M.length>0&&(R=j.h,R.i=R.i.concat(M)),oe){case 1:hd(j,5);break;case 4:hd(j,10);break;case 3:hd(j,6);break;default:hd(j,2)}}}function PD(j,R){let M=j.Qa+Math.floor(Math.random()*j.Za);return j.isActive()||(M*=2),M*R}function hd(j,R){if(j.j.info("Error code "+R),R==2){var M=u(j.bb,j),B=j.Ua;const oe=!B;B=new sc(B||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||vg(B,"https"),Ab(B),oe?Zre(B.toString(),M):Jre(B.toString(),M)}else kr(2);j.I=0,j.l&&j.l.pa(R),ID(j),ND(j)}t.bb=function(j){j?(this.j.info("Successfully pinged google.com"),kr(2)):(this.j.info("Failed to ping google.com"),kr(1))};function ID(j){if(j.I=0,j.ja=[],j.l){const R=cD(j.h);(R.length!=0||j.i.length!=0)&&(v(j.ja,R),v(j.ja,j.i),j.h.i.length=0,m(j.i),j.i.length=0),j.l.oa()}}function kD(j,R,M){var B=M instanceof sc?co(M):new sc(M);if(B.g!="")R&&(B.g=R+"."+B.g),xg(B,B.u);else{var oe=o.location;B=oe.protocol,R=R?R+"."+oe.hostname:oe.hostname,oe=+oe.port;const ce=new sc(null);B&&vg(ce,B),R&&(ce.g=R),oe&&xg(ce,oe),M&&(ce.h=M),B=ce}return M=j.G,R=j.wa,M&&R&&Fn(B,M,R),Fn(B,"VER",j.ka),Eg(j,B),B}function RD(j,R,M){if(R&&!j.L)throw Error("Can't create secondary domain capable XhrIo object.");return R=j.Aa&&!j.ma?new ir(new S1({ab:M})):new ir(j.ma),R.Fa(j.L),R}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function OD(){}t=OD.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Rb(){}Rb.prototype.g=function(j,R){return new Ni(j,R)};function Ni(j,R){an.call(this),this.g=new jD(R),this.l=j,this.h=R&&R.messageUrlParams||null,j=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(j?j["X-Client-Protocol"]="webchannel":j={"X-Client-Protocol":"webchannel"}),this.g.o=j,j=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(j?j["X-WebChannel-Content-Type"]=R.messageContentType:j={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.sa&&(j?j["X-WebChannel-Client-Profile"]=R.sa:j={"X-WebChannel-Client-Profile":R.sa}),this.g.U=j,(j=R&&R.Qb)&&!k(j)&&(this.g.u=j),this.A=R&&R.supportsCrossDomainXhr||!1,this.v=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!k(R)&&(this.g.G=R,j=this.h,j!==null&&R in j&&(j=this.h,R in j&&delete j[R])),this.j=new af(this)}h(Ni,an),Ni.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ni.prototype.close=function(){A1(this.g)},Ni.prototype.o=function(j){var R=this.g;if(typeof j=="string"){var M={};M.__data__=j,j=M}else this.v&&(M={},M.__data__=dn(j),j=M);R.i.push(new qre(R.Ya++,j)),R.I==3&&Ib(R)},Ni.prototype.N=function(){this.g.l=null,delete this.j,A1(this.g),delete this.g,Ni.Z.N.call(this)};function MD(j){ei.call(this),j.__headers__&&(this.headers=j.__headers__,this.statusCode=j.__status__,delete j.__headers__,delete j.__status__);var R=j.__sm__;if(R){e:{for(const M in R){j=M;break e}j=void 0}(this.i=j)&&(j=this.i,R=R!==null&&j in R?R[j]:void 0),this.data=R}else this.data=j}h(MD,ei);function DD(){tc.call(this),this.status=1}h(DD,tc);function af(j){this.g=j}h(af,OD),af.prototype.ra=function(){H(this.g,"a")},af.prototype.qa=function(j){H(this.g,new MD(j))},af.prototype.pa=function(j){H(this.g,new DD)},af.prototype.oa=function(){H(this.g,"b")},Rb.prototype.createWebChannel=Rb.prototype.g,Ni.prototype.send=Ni.prototype.o,Ni.prototype.open=Ni.prototype.m,Ni.prototype.close=Ni.prototype.close,xH=function(){return new Rb},vH=function(){return Jo()},yH=ss,yC={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},qi.NO_ERROR=0,qi.TIMEOUT=8,qi.HTTP_ERROR=6,nw=qi,ti.COMPLETE="complete",gH=ti,ld.EventType=_i,_i.OPEN="a",_i.CLOSE="b",_i.ERROR="c",_i.MESSAGE="d",an.prototype.listen=an.prototype.J,uy=ld,ir.prototype.listenOnce=ir.prototype.K,ir.prototype.getLastError=ir.prototype.Ha,ir.prototype.getLastErrorCode=ir.prototype.ya,ir.prototype.getStatus=ir.prototype.ca,ir.prototype.getResponseJson=ir.prototype.La,ir.prototype.getResponseText=ir.prototype.la,ir.prototype.send=ir.prototype.ea,ir.prototype.setWithCredentials=ir.prototype.Fa,pH=ir}).apply(typeof a0<"u"?a0:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}js.UNAUTHENTICATED=new js(null),js.GOOGLE_CREDENTIALS=new js("google-credentials-uid"),js.FIRST_PARTY=new js("first-party-uid"),js.MOCK_USER=new js("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qp="12.9.0";function Jge(t){qp=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh=new ER("@firebase/firestore");function wf(){return Nh.logLevel}function Ge(t,...e){if(Nh.logLevel<=Yt.DEBUG){const n=e.map(VR);Nh.debug(`Firestore (${qp}): ${t}`,...n)}}function Ol(t,...e){if(Nh.logLevel<=Yt.ERROR){const n=e.map(VR);Nh.error(`Firestore (${qp}): ${t}`,...n)}}function Sh(t,...e){if(Nh.logLevel<=Yt.WARN){const n=e.map(VR);Nh.warn(`Firestore (${qp}): ${t}`,...n)}}function VR(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,bH(t,r,n)}function bH(t,e,n){let r=`FIRESTORE (${qp}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ol(r),new Error(r)}function yn(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||bH(e,s,r)}function Lt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends so{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wH{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eye{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(js.UNAUTHENTICATED))}shutdown(){}}class tye{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class nye{constructor(e){this.t=e,this.currentUser=js.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){yn(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let a=new bl;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new bl,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new bl)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yn(typeof r.accessToken=="string",31837,{l:r}),new wH(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return yn(e===null||typeof e=="string",2055,{h:e}),new js(e)}}class rye{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=js.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class sye{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new rye(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(js.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class x${constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iye{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,di(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){yn(this.o===void 0,3512);const r=a=>{a.error!=null&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,Ge("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new x$(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(yn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new x$(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aye(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=aye(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function Qt(t,e){return t<e?-1:t>e?1:0}function vC(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),a=e.charAt(r);if(s!==a)return xE(s)===xE(a)?Qt(s,a):xE(s)?1:-1}return Qt(t.length,e.length)}const oye=55296,lye=57343;function xE(t){const e=t.charCodeAt(0);return e>=oye&&e<=lye}function zm(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC="__name__";class po{constructor(e,n,r){n===void 0?n=0:n>e.length&&jt(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&jt(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return po.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof po?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=po.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return Qt(e.length,n.length)}static compareSegments(e,n){const r=po.isNumericId(e),s=po.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?po.extractNumericId(e).compare(po.extractNumericId(n)):vC(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return uu.fromString(e.substring(4,e.length-2))}}class On extends po{construct(e,n,r){return new On(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ue(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new On(n)}static emptyPath(){return new On([])}}const cye=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ds extends po{construct(e,n,r){return new ds(e,n,r)}static isValidIdentifier(e){return cye.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ds.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xC}static keyField(){return new ds([xC])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new Ue(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Ue(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ue(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(a(),s++)}if(a(),o)throw new Ue(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ds(n)}static emptyPath(){return new ds([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.path=e}static fromPath(e){return new ht(On.fromString(e))}static fromName(e){return new ht(On.fromString(e).popFirst(5))}static empty(){return new ht(On.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&On.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return On.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ht(new On(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _H(t,e,n){if(!n)throw new Ue(pe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function uye(t,e,n,r){if(e===!0&&r===!0)throw new Ue(pe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function b$(t){if(!ht.isDocumentKey(t))throw new Ue(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function w$(t){if(ht.isDocumentKey(t))throw new Ue(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function jH(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function AN(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":jt(12329,{type:typeof t})}function ga(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ue(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=AN(t);throw new Ue(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function dye(t,e){if(e<=0)throw new Ue(pe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(t,e){const n={typeString:t};return e&&(n.value=e),n}function Yx(t,e){if(!jH(t))throw new Ue(pe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Ue(pe.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _$=-62135596800,j$=1e6;class qn{static now(){return qn.fromMillis(Date.now())}static fromDate(e){return qn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*j$);return new qn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ue(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ue(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<_$)throw new Ue(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/j$}_compareTo(e){return this.seconds===e.seconds?Qt(this.nanoseconds,e.nanoseconds):Qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yx(e,qn._jsonSchema))return new qn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_$;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qn._jsonSchemaVersion="firestore/timestamp/1.0",qn._jsonSchema={type:Pr("string",qn._jsonSchemaVersion),seconds:Pr("number"),nanoseconds:Pr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{static fromTimestamp(e){return new kt(e)}static min(){return new kt(new qn(0,0))}static max(){return new kt(new qn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv=-1;function hye(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=kt.fromTimestamp(r===1e9?new qn(n+1,0):new qn(n,r));return new _u(s,ht.empty(),e)}function fye(t){return new _u(t.readTime,t.key,jv)}class _u{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new _u(kt.min(),ht.empty(),jv)}static max(){return new _u(kt.max(),ht.empty(),jv)}}function mye(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ht.comparator(t.documentKey,e.documentKey),n!==0?n:Qt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pye="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gye{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wp(t){if(t.code!==pe.FAILED_PRECONDITION||t.message!==pye)throw t;Ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&jt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new xe((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof xe?n:xe.resolve(n)}catch(n){return xe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):xe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):xe.reject(n)}static resolve(e){return new xe((n,r)=>{n(e)})}static reject(e){return new xe((n,r)=>{r(e)})}static waitFor(e){return new xe((n,r)=>{let s=0,a=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++a,o&&a===s&&n()},c=>r(c))}),o=!0,a===s&&n()})}static or(e){let n=xe.resolve(!1);for(const r of e)n=n.next(s=>s?xe.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new xe((r,s)=>{const a=e.length,o=new Array(a);let l=0;for(let c=0;c<a;c++){const u=c;n(e[u]).next(d=>{o[u]=d,++l,l===a&&r(o)},d=>s(d))}})}static doWhile(e,n){return new xe((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function yye(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Hp(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}TN.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=-1;function CN(t){return t==null}function o_(t){return t===0&&1/t==-1/0}function vye(t){return typeof t=="number"&&Number.isInteger(t)&&!o_(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NH="";function xye(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=N$(e)),e=bye(t.get(n),e);return N$(e)}function bye(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case NH:n+="";break;default:n+=a}}return n}function N$(t){return t+NH+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S$(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function SH(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,n){this.comparator=e,this.root=n||cs.EMPTY}insert(e,n){return new sr(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,cs.BLACK,null,null))}remove(e){return new sr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cs.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new o0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new o0(this.root,e,this.comparator,!1)}getReverseIterator(){return new o0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new o0(this.root,e,this.comparator,!0)}}class o0{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cs{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??cs.RED,this.left=s??cs.EMPTY,this.right=a??cs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new cs(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return cs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return cs.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw jt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw jt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw jt(27949);return e+(this.isRed()?0:1)}}cs.EMPTY=null,cs.RED=!0,cs.BLACK=!1;cs.EMPTY=new class{constructor(){this.size=0}get key(){throw jt(57766)}get value(){throw jt(16141)}get color(){throw jt(16727)}get left(){throw jt(29726)}get right(){throw jt(36894)}copy(e,n,r,s,a){return this}insert(e,n,r){return new cs(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this.comparator=e,this.data=new sr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new E$(this.data.getIterator())}getIteratorFrom(e){return new E$(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof qr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new qr(this.comparator);return n.data=e,n}}class E${constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.fields=e,e.sort(ds.comparator)}static empty(){return new Ri([])}unionWith(e){let n=new qr(ds.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ri(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zm(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EH extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new EH("Invalid base64 string: "+a):a}}(e);return new ms(n)}static fromUint8Array(e){const n=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new ms(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ms.EMPTY_BYTE_STRING=new ms("");const wye=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ju(t){if(yn(!!t,39018),typeof t=="string"){let e=0;const n=wye.exec(t);if(yn(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gr(t.seconds),nanos:gr(t.nanos)}}function gr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Nu(t){return typeof t=="string"?ms.fromBase64String(t):ms.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AH="server_timestamp",TH="__type__",CH="__previous_value__",PH="__local_write_time__";function zR(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[TH])==null?void 0:r.stringValue)===AH}function PN(t){const e=t.mapValue.fields[CH];return zR(e)?PN(e):e}function Nv(t){const e=ju(t.mapValue.fields[PH].timestampValue);return new qn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ye{constructor(e,n,r,s,a,o,l,c,u,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d,this.apiKey=h}}const l_="(default)";class Sv{constructor(e,n){this.projectId=e,this.database=n||l_}static empty(){return new Sv("","")}get isDefaultDatabase(){return this.database===l_}isEqual(e){return e instanceof Sv&&e.projectId===this.projectId&&e.database===this.database}}function jye(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ue(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sv(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IH="__type__",kH="__max__",l0={mapValue:{fields:{__type__:{stringValue:kH}}}},RH="__vector__",c_="value";function Su(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zR(t)?4:Sye(t)?9007199254740991:Nye(t)?10:11:jt(28295,{value:t})}function Uo(t,e){if(t===e)return!0;const n=Su(t);if(n!==Su(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Nv(t).isEqual(Nv(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=ju(s.timestampValue),l=ju(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return Nu(s.bytesValue).isEqual(Nu(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return gr(s.geoPointValue.latitude)===gr(a.geoPointValue.latitude)&&gr(s.geoPointValue.longitude)===gr(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return gr(s.integerValue)===gr(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=gr(s.doubleValue),l=gr(a.doubleValue);return o===l?o_(o)===o_(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return zm(t.arrayValue.values||[],e.arrayValue.values||[],Uo);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},l=a.mapValue.fields||{};if(S$(o)!==S$(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Uo(o[c],l[c])))return!1;return!0}(t,e);default:return jt(52216,{left:t})}}function Ev(t,e){return(t.values||[]).find(n=>Uo(n,e))!==void 0}function qm(t,e){if(t===e)return 0;const n=Su(t),r=Su(e);if(n!==r)return Qt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qt(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=gr(a.integerValue||a.doubleValue),c=gr(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return A$(t.timestampValue,e.timestampValue);case 4:return A$(Nv(t),Nv(e));case 5:return vC(t.stringValue,e.stringValue);case 6:return function(a,o){const l=Nu(a),c=Nu(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=Qt(l[u],c[u]);if(d!==0)return d}return Qt(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=Qt(gr(a.latitude),gr(o.latitude));return l!==0?l:Qt(gr(a.longitude),gr(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return T$(t.arrayValue,e.arrayValue);case 10:return function(a,o){var f,m,v,g;const l=a.fields||{},c=o.fields||{},u=(f=l[c_])==null?void 0:f.arrayValue,d=(m=c[c_])==null?void 0:m.arrayValue,h=Qt(((v=u==null?void 0:u.values)==null?void 0:v.length)||0,((g=d==null?void 0:d.values)==null?void 0:g.length)||0);return h!==0?h:T$(u,d)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===l0.mapValue&&o===l0.mapValue)return 0;if(a===l0.mapValue)return 1;if(o===l0.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){const f=vC(c[h],d[h]);if(f!==0)return f;const m=qm(l[c[h]],u[d[h]]);if(m!==0)return m}return Qt(c.length,d.length)}(t.mapValue,e.mapValue);default:throw jt(23264,{he:n})}}function A$(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Qt(t,e);const n=ju(t),r=ju(e),s=Qt(n.seconds,r.seconds);return s!==0?s:Qt(n.nanos,r.nanos)}function T$(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=qm(n[s],r[s]);if(a)return a}return Qt(n.length,r.length)}function Wm(t){return bC(t)}function bC(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ju(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Nu(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ht.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=bC(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const o of r)a?a=!1:s+=",",s+=`${o}:${bC(n.fields[o])}`;return s+"}"}(t.mapValue):jt(61005,{value:t})}function rw(t){switch(Su(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=PN(t);return e?16+rw(e):16;case 5:return 2*t.stringValue.length;case 6:return Nu(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+rw(a),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Hu(r.fields,(a,o)=>{s+=a.length+rw(o)}),s}(t.mapValue);default:throw jt(13486,{value:t})}}function C$(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function wC(t){return!!t&&"integerValue"in t}function qR(t){return!!t&&"arrayValue"in t}function P$(t){return!!t&&"nullValue"in t}function I$(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function sw(t){return!!t&&"mapValue"in t}function Nye(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[IH])==null?void 0:r.stringValue)===RH}function ky(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Hu(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ky(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ky(t.arrayValue.values[n]);return e}return{...t}}function Sye(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===kH}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.value=e}static empty(){return new hi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!sw(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ky(n)}setAll(e){let n=ds.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=ky(o):s.push(l.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());sw(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Uo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];sw(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Hu(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new hi(ky(this.value))}}function OH(t){const e=[];return Hu(t.fields,(n,r)=>{const s=new ds([n]);if(sw(r)){const a=OH(r.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new Ri(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n,r,s,a,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new As(e,0,kt.min(),kt.min(),kt.min(),hi.empty(),0)}static newFoundDocument(e,n,r,s){return new As(e,1,n,kt.min(),r,s,0)}static newNoDocument(e,n){return new As(e,2,n,kt.min(),kt.min(),hi.empty(),0)}static newUnknownDocument(e,n){return new As(e,3,n,kt.min(),kt.min(),hi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(kt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=kt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof As&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new As(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e,n){this.position=e,this.inclusive=n}}function k$(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?r=ht.comparator(ht.fromName(o.referenceValue),n.key):r=qm(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function R$(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Uo(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e,n="asc"){this.field=e,this.dir=n}}function Eye(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MH{}class Cr extends MH{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Tye(e,n,r):n==="array-contains"?new Iye(e,r):n==="in"?new kye(e,r):n==="not-in"?new Rye(e,r):n==="array-contains-any"?new Oye(e,r):new Cr(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Cye(e,r):new Pye(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(qm(n,this.value)):n!==null&&Su(this.value)===Su(n)&&this.matchesComparison(qm(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return jt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ro extends MH{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ro(e,n)}matches(e){return DH(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function DH(t){return t.op==="and"}function LH(t){return Aye(t)&&DH(t)}function Aye(t){for(const e of t.filters)if(e instanceof ro)return!1;return!0}function _C(t){if(t instanceof Cr)return t.field.canonicalString()+t.op.toString()+Wm(t.value);if(LH(t))return t.filters.map(e=>_C(e)).join(",");{const e=t.filters.map(n=>_C(n)).join(",");return`${t.op}(${e})`}}function $H(t,e){return t instanceof Cr?function(r,s){return s instanceof Cr&&r.op===s.op&&r.field.isEqual(s.field)&&Uo(r.value,s.value)}(t,e):t instanceof ro?function(r,s){return s instanceof ro&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,o,l)=>a&&$H(o,s.filters[l]),!0):!1}(t,e):void jt(19439)}function FH(t){return t instanceof Cr?function(n){return`${n.field.canonicalString()} ${n.op} ${Wm(n.value)}`}(t):t instanceof ro?function(n){return n.op.toString()+" {"+n.getFilters().map(FH).join(" ,")+"}"}(t):"Filter"}class Tye extends Cr{constructor(e,n,r){super(e,n,r),this.key=ht.fromName(r.referenceValue)}matches(e){const n=ht.comparator(e.key,this.key);return this.matchesComparison(n)}}class Cye extends Cr{constructor(e,n){super(e,"in",n),this.keys=VH("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Pye extends Cr{constructor(e,n){super(e,"not-in",n),this.keys=VH("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function VH(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ht.fromName(r.referenceValue))}class Iye extends Cr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return qR(n)&&Ev(n.arrayValue,this.value)}}class kye extends Cr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ev(this.value.arrayValue,n)}}class Rye extends Cr{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ev(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ev(this.value.arrayValue,n)}}class Oye extends Cr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!qR(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ev(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mye{constructor(e,n=null,r=[],s=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=o,this.endAt=l,this.Te=null}}function O$(t,e=null,n=[],r=[],s=null,a=null,o=null){return new Mye(t,e,n,r,s,a,o)}function WR(t){const e=Lt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>_C(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),CN(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Wm(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Wm(r)).join(",")),e.Te=n}return e.Te}function HR(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Eye(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$H(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!R$(t.startAt,e.startAt)&&R$(t.endAt,e.endAt)}function jC(t){return ht.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,n=null,r=[],s=[],a=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Dye(t,e,n,r,s,a,o,l){return new Kp(t,e,n,r,s,a,o,l)}function KR(t){return new Kp(t)}function M$(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Lye(t){return ht.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function BH(t){return t.collectionGroup!==null}function Ry(t){const e=Lt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new qr(ds.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Av(a,r))}),n.has(ds.keyField().canonicalString())||e.Ie.push(new Av(ds.keyField(),r))}return e.Ie}function Io(t){const e=Lt(t);return e.Ee||(e.Ee=$ye(e,Ry(t))),e.Ee}function $ye(t,e){if(t.limitType==="F")return O$(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Av(s.field,a)});const n=t.endAt?new u_(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new u_(t.startAt.position,t.startAt.inclusive):null;return O$(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function NC(t,e){const n=t.filters.concat([e]);return new Kp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Fye(t,e){const n=t.explicitOrderBy.concat([e]);return new Kp(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function d_(t,e,n){return new Kp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function IN(t,e){return HR(Io(t),Io(e))&&t.limitType===e.limitType}function UH(t){return`${WR(Io(t))}|lt:${t.limitType}`}function _f(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>FH(s)).join(", ")}]`),CN(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Wm(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Wm(s)).join(",")),`Target(${r})`}(Io(t))}; limitType=${t.limitType})`}function kN(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ht.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of Ry(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const u=k$(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,Ry(r),s)||r.endAt&&!function(o,l,c){const u=k$(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,Ry(r),s))}(t,e)}function Vye(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function zH(t){return(e,n)=>{let r=!1;for(const s of Ry(t)){const a=Bye(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function Bye(t,e,n){const r=t.field.isKeyField()?ht.comparator(e.key,n.key):function(a,o,l){const c=o.data.field(a),u=l.data.field(a);return c!==null&&u!==null?qm(c,u):jt(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return jt(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Hu(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return SH(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uye=new sr(ht.comparator);function Ml(){return Uye}const qH=new sr(ht.comparator);function dy(...t){let e=qH;for(const n of t)e=e.insert(n.key,n);return e}function WH(t){let e=qH;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function kd(){return Oy()}function HH(){return Oy()}function Oy(){return new Kh(t=>t.toString(),(t,e)=>t.isEqual(e))}const zye=new sr(ht.comparator),qye=new qr(ht.comparator);function Xt(...t){let e=qye;for(const n of t)e=e.add(n);return e}const Wye=new qr(Qt);function Hye(){return Wye}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:o_(e)?"-0":e}}function KH(t){return{integerValue:""+t}}function Kye(t,e){return vye(e)?KH(e):GR(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(){this._=void 0}}function Gye(t,e,n){return t instanceof Tv?function(s,a){const o={fields:{[TH]:{stringValue:AH},[PH]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&zR(a)&&(a=PN(a)),a&&(o.fields[CH]=a),{mapValue:o}}(n,e):t instanceof Cv?YH(t,e):t instanceof Pv?QH(t,e):function(s,a){const o=GH(s,a),l=D$(o)+D$(s.Ae);return wC(o)&&wC(s.Ae)?KH(l):GR(s.serializer,l)}(t,e)}function Yye(t,e,n){return t instanceof Cv?YH(t,e):t instanceof Pv?QH(t,e):n}function GH(t,e){return t instanceof h_?function(r){return wC(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Tv extends RN{}class Cv extends RN{constructor(e){super(),this.elements=e}}function YH(t,e){const n=XH(e);for(const r of t.elements)n.some(s=>Uo(s,r))||n.push(r);return{arrayValue:{values:n}}}class Pv extends RN{constructor(e){super(),this.elements=e}}function QH(t,e){let n=XH(e);for(const r of t.elements)n=n.filter(s=>!Uo(s,r));return{arrayValue:{values:n}}}class h_ extends RN{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function D$(t){return gr(t.integerValue||t.doubleValue)}function XH(t){return qR(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qye{constructor(e,n){this.field=e,this.transform=n}}function Xye(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Cv&&s instanceof Cv||r instanceof Pv&&s instanceof Pv?zm(r.elements,s.elements,Uo):r instanceof h_&&s instanceof h_?Uo(r.Ae,s.Ae):r instanceof Tv&&s instanceof Tv}(t.transform,e.transform)}class Zye{constructor(e,n){this.version=e,this.transformResults=n}}class Qs{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Qs}static exists(e){return new Qs(void 0,e)}static updateTime(e){return new Qs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function iw(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ON{}function ZH(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new MN(t.key,Qs.none()):new Qx(t.key,t.data,Qs.none());{const n=t.data,r=hi.empty();let s=new qr(ds.comparator);for(let a of e.fields)if(!s.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),s=s.add(a)}return new Ku(t.key,r,new Ri(s.toArray()),Qs.none())}}function Jye(t,e,n){t instanceof Qx?function(s,a,o){const l=s.value.clone(),c=$$(s.fieldTransforms,a,o.transformResults);l.setAll(c),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ku?function(s,a,o){if(!iw(s.precondition,a))return void a.convertToUnknownDocument(o.version);const l=$$(s.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(JH(s)),c.setAll(l),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function My(t,e,n,r){return t instanceof Qx?function(a,o,l,c){if(!iw(a.precondition,o))return l;const u=a.value.clone(),d=F$(a.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ku?function(a,o,l,c){if(!iw(a.precondition,o))return l;const u=F$(a.fieldTransforms,c,o),d=o.data;return d.setAll(JH(a)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(a,o,l){return iw(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function eve(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=GH(r.transform,s||null);a!=null&&(n===null&&(n=hi.empty()),n.set(r.field,a))}return n||null}function L$(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&zm(r,s,(a,o)=>Xye(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Qx extends ON{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ku extends ON{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function JH(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function $$(t,e,n){const r=new Map;yn(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const a=t[s],o=a.transform,l=e.data.field(a.field);r.set(a.field,Yye(o,l,n[s]))}return r}function F$(t,e,n){const r=new Map;for(const s of t){const a=s.transform,o=n.data.field(s.field);r.set(s.field,Gye(a,o,e))}return r}class MN extends ON{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tve extends ON{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nve{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&Jye(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=My(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=My(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=HH();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=n.has(s.key)?null:l;const c=ZH(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(kt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Xt())}isEqual(e){return this.batchId===e.batchId&&zm(this.mutations,e.mutations,(n,r)=>L$(n,r))&&zm(this.baseMutations,e.baseMutations,(n,r)=>L$(n,r))}}class YR{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){yn(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return zye}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,r[o].version);return new YR(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rve=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sve{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sr,nn;function ive(t){switch(t){case pe.OK:return jt(64938);case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return jt(15467,{code:t})}}function e7(t){if(t===void 0)return Ol("GRPC error has no .code"),pe.UNKNOWN;switch(t){case Sr.OK:return pe.OK;case Sr.CANCELLED:return pe.CANCELLED;case Sr.UNKNOWN:return pe.UNKNOWN;case Sr.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case Sr.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case Sr.INTERNAL:return pe.INTERNAL;case Sr.UNAVAILABLE:return pe.UNAVAILABLE;case Sr.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case Sr.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case Sr.NOT_FOUND:return pe.NOT_FOUND;case Sr.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case Sr.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case Sr.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case Sr.ABORTED:return pe.ABORTED;case Sr.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case Sr.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case Sr.DATA_LOSS:return pe.DATA_LOSS;default:return jt(39323,{code:t})}}(nn=Sr||(Sr={}))[nn.OK=0]="OK",nn[nn.CANCELLED=1]="CANCELLED",nn[nn.UNKNOWN=2]="UNKNOWN",nn[nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nn[nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nn[nn.NOT_FOUND=5]="NOT_FOUND",nn[nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",nn[nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",nn[nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",nn[nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nn[nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nn[nn.ABORTED=10]="ABORTED",nn[nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",nn[nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",nn[nn.INTERNAL=13]="INTERNAL",nn[nn.UNAVAILABLE=14]="UNAVAILABLE",nn[nn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ave(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ove=new uu([4294967295,4294967295],0);function V$(t){const e=ave().encode(t),n=new mH;return n.update(e),new Uint8Array(n.digest())}function B$(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new uu([n,r],0),new uu([s,a],0)]}class QR{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new hy(`Invalid padding: ${n}`);if(r<0)throw new hy(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new hy(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new hy(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=uu.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(uu.fromNumber(r)));return s.compare(ove)===1&&(s=new uu([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=V$(e),[r,s]=B$(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,s,a);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new QR(a,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=V$(e),[r,s]=B$(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,s,a);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class hy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Xx.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new DN(kt.min(),s,new sr(Qt),Ml(),Xt())}}class Xx{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Xx(r,n,Xt(),Xt(),Xt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class t7{constructor(e,n){this.targetId=e,this.Ce=n}}class n7{constructor(e,n,r=ms.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class U${constructor(){this.ve=0,this.Fe=z$(),this.Me=ms.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Xt(),n=Xt(),r=Xt();return this.Fe.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:jt(38017,{changeType:a})}}),new Xx(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=z$()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,yn(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class lve{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ml(),this.He=c0(),this.Je=c0(),this.Ze=new sr(Qt)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:jt(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const a=s.target;if(jC(a))if(r===0){const o=new ht(a.path);this.et(n,o,As.newNoDocument(o,kt.min()))}else yn(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let o,l;try{o=Nu(r).toUint8Array()}catch(c){if(c instanceof EH)return Sh("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new QR(o,s,a)}catch(c){return Sh(c instanceof hy?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.et(n,a,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((a,o)=>{const l=this.ot(o);if(l){if(a.current&&jC(l.target)){const c=new ht(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,As.newNoDocument(c,e))}a.Be&&(n.set(o,a.ke()),a.Ke())}});let r=Xt();this.Je.forEach((a,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(a))}),this.je.forEach((a,o)=>o.setReadTime(e));const s=new DN(e,n,this.Ze,this.je,r);return this.je=Ml(),this.He=c0(),this.Je=c0(),this.Ze=new sr(Qt),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new U$,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new qr(Qt),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new qr(Qt),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ge("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new U$),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function c0(){return new sr(ht.comparator)}function z$(){return new sr(ht.comparator)}const cve={asc:"ASCENDING",desc:"DESCENDING"},uve={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dve={and:"AND",or:"OR"};class hve{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function SC(t,e){return t.useProto3Json||CN(e)?e:{value:e}}function f_(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function r7(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fve(t,e){return f_(t,e.toTimestamp())}function ko(t){return yn(!!t,49232),kt.fromTimestamp(function(n){const r=ju(n);return new qn(r.seconds,r.nanos)}(t))}function XR(t,e){return EC(t,e).canonicalString()}function EC(t,e){const n=function(s){return new On(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function s7(t){const e=On.fromString(t);return yn(c7(e),10190,{key:e.toString()}),e}function AC(t,e){return XR(t.databaseId,e.path)}function bE(t,e){const n=s7(e);if(n.get(1)!==t.databaseId.projectId)throw new Ue(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ue(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ht(a7(n))}function i7(t,e){return XR(t.databaseId,e)}function mve(t){const e=s7(t);return e.length===4?On.emptyPath():a7(e)}function TC(t){return new On(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function a7(t){return yn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function q$(t,e,n){return{name:AC(t,e),fields:n.value.mapValue.fields}}function pve(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:jt(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(u,d){return u.useProto3Json?(yn(d===void 0||typeof d=="string",58123),ms.fromBase64String(d||"")):(yn(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ms.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?pe.UNKNOWN:e7(u.code);return new Ue(d,u.message||"")}(o);n=new n7(r,s,a,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=bE(t,r.document.name),a=ko(r.document.updateTime),o=r.document.createTime?ko(r.document.createTime):kt.min(),l=new hi({mapValue:{fields:r.document.fields}}),c=As.newFoundDocument(s,a,o,l),u=r.targetIds||[],d=r.removedTargetIds||[];n=new aw(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=bE(t,r.document),a=r.readTime?ko(r.readTime):kt.min(),o=As.newNoDocument(s,a),l=r.removedTargetIds||[];n=new aw([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=bE(t,r.document),a=r.removedTargetIds||[];n=new aw([],a,s,null)}else{if(!("filter"in e))return jt(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,o=new sve(s,a),l=r.targetId;n=new t7(l,o)}}return n}function gve(t,e){let n;if(e instanceof Qx)n={update:q$(t,e.key,e.value)};else if(e instanceof MN)n={delete:AC(t,e.key)};else if(e instanceof Ku)n={update:q$(t,e.key,e.data),updateMask:Sve(e.fieldMask)};else{if(!(e instanceof tve))return jt(16599,{dt:e.type});n={verify:AC(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const l=o.transform;if(l instanceof Tv)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Cv)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Pv)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof h_)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw jt(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:fve(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:jt(27497)}(t,e.precondition)),n}function yve(t,e){return t&&t.length>0?(yn(e!==void 0,14353),t.map(n=>function(s,a){let o=s.updateTime?ko(s.updateTime):ko(a);return o.isEqual(kt.min())&&(o=ko(a)),new Zye(o,s.transformResults||[])}(n,e))):[]}function vve(t,e){return{documents:[i7(t,e.path)]}}function xve(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=i7(t,s);const a=function(u){if(u.length!==0)return l7(ro.create(u,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(u){if(u.length!==0)return u.map(d=>function(f){return{field:jf(f.field),direction:_ve(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=SC(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function bve(t){let e=mve(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){yn(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let a=[];n.where&&(a=function(h){const f=o7(h);return f instanceof ro&&LH(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(v){return new Av(Nf(v.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(n.orderBy));let l=null;n.limit&&(l=function(h){let f;return f=typeof h=="object"?h.value:h,CN(f)?null:f}(n.limit));let c=null;n.startAt&&(c=function(h){const f=!!h.before,m=h.values||[];return new u_(m,f)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const f=!h.before,m=h.values||[];return new u_(m,f)}(n.endAt)),Dye(e,s,o,a,l,"F",c,u)}function wve(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return jt(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function o7(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Nf(n.unaryFilter.field);return Cr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Nf(n.unaryFilter.field);return Cr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Nf(n.unaryFilter.field);return Cr.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Nf(n.unaryFilter.field);return Cr.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return jt(61313);default:return jt(60726)}}(t):t.fieldFilter!==void 0?function(n){return Cr.create(Nf(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return jt(58110);default:return jt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ro.create(n.compositeFilter.filters.map(r=>o7(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return jt(1026)}}(n.compositeFilter.op))}(t):jt(30097,{filter:t})}function _ve(t){return cve[t]}function jve(t){return uve[t]}function Nve(t){return dve[t]}function jf(t){return{fieldPath:t.canonicalString()}}function Nf(t){return ds.fromServerFormat(t.fieldPath)}function l7(t){return t instanceof Cr?function(n){if(n.op==="=="){if(I$(n.value))return{unaryFilter:{field:jf(n.field),op:"IS_NAN"}};if(P$(n.value))return{unaryFilter:{field:jf(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(I$(n.value))return{unaryFilter:{field:jf(n.field),op:"IS_NOT_NAN"}};if(P$(n.value))return{unaryFilter:{field:jf(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jf(n.field),op:jve(n.op),value:n.value}}}(t):t instanceof ro?function(n){const r=n.getFilters().map(s=>l7(s));return r.length===1?r[0]:{compositeFilter:{op:Nve(n.op),filters:r}}}(t):jt(54877,{filter:t})}function Sve(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function c7(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function u7(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n,r,s,a=kt.min(),o=kt.min(),l=ms.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Kc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Kc(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eve{constructor(e){this.yt=e}}function Ave(t){const e=bve({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?d_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tve{constructor(){this.Sn=new Cve}addToCollectionParentIndex(e,n){return this.Sn.add(n),xe.resolve()}getCollectionParents(e,n){return xe.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return xe.resolve()}deleteFieldIndex(e,n){return xe.resolve()}deleteAllFieldIndexes(e){return xe.resolve()}createTargetIndexes(e,n){return xe.resolve()}getDocumentsMatchingTarget(e,n){return xe.resolve(null)}getIndexType(e,n){return xe.resolve(0)}getFieldIndexes(e,n){return xe.resolve([])}getNextCollectionGroupToUpdate(e){return xe.resolve(null)}getMinOffset(e,n){return xe.resolve(_u.min())}getMinOffsetFromCollectionGroup(e,n){return xe.resolve(_u.min())}updateCollectionGroup(e,n,r){return xe.resolve()}updateIndexEntries(e,n){return xe.resolve()}}class Cve{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new qr(On.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new qr(On.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W$={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},d7=41943040;class oi{static withCacheSize(e){return new oi(e,oi.DEFAULT_COLLECTION_PERCENTILE,oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */oi.DEFAULT_COLLECTION_PERCENTILE=10,oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,oi.DEFAULT=new oi(d7,oi.DEFAULT_COLLECTION_PERCENTILE,oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),oi.DISABLED=new oi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Hm(0)}static ar(){return new Hm(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H$="LruGarbageCollector",Pve=1048576;function K$([t,e],[n,r]){const s=Qt(t,n);return s===0?Qt(e,r):s}class Ive{constructor(e){this.Pr=e,this.buffer=new qr(K$),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();K$(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class kve{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ge(H$,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Hp(n)?Ge(H$,"Ignoring IndexedDB error during garbage collection: ",n):await Wp(n)}await this.Ar(3e5)})}}class Rve{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return xe.resolve(TN.ce);const r=new Ive(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ge("LruGarbageCollector","Garbage collection skipped; disabled"),xe.resolve(W$)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),W$):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,a,o,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,l=Date.now(),this.removeTargets(e,r,n))).next(h=>(a=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),wf()<=Yt.DEBUG&&Ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${a} targets in `+(c-l)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),xe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:h})))}}function Ove(t,e){return new Rve(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mve{constructor(){this.changes=new Kh(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,As.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?xe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dve{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lve{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&My(r.mutation,s,Ri.empty(),qn.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Xt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Xt()){const s=kd();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let o=dy();return a.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=kd();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Xt()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let a=Ml();const o=Oy(),l=function(){return Oy()}();return n.forEach((c,u)=>{const d=r.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof Ku)?a=a.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),My(d.mutation,u,d.mutation.getFieldMask(),qn.now())):o.set(u.key,Ri.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>l.set(u,new Dve(d,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Oy();let s=new sr((o,l)=>o-l),a=Xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=r.get(c)||Ri.empty();d=l.applyToLocalView(u,d),r.set(c,d);const h=(s.get(l.batchId)||Xt()).add(c);s=s.insert(l.batchId,h)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,h=HH();d.forEach(f=>{if(!a.has(f)){const m=ZH(n.get(f),r.get(f));m!==null&&h.set(f,m),a=a.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return xe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return Lye(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):BH(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):xe.resolve(kd());let l=jv,c=a;return o.next(u=>xe.forEach(u,(d,h)=>(l<h.largestBatchId&&(l=h.largestBatchId),a.get(d)?xe.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{c=c.insert(d,f)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,c,u,Xt())).next(d=>({batchId:l,changes:WH(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ht(n)).next(r=>{let s=dy();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let o=dy();return this.indexManager.getCollectionParents(e,a).next(l=>xe.forEach(l,c=>{const u=function(h,f){return new Kp(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(o=>{a.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,As.newInvalidDocument(d)))});let l=dy();return o.forEach((c,u)=>{const d=a.get(c);d!==void 0&&My(d.mutation,u,Ri.empty(),qn.now()),kN(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ve{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return xe.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ko(s.createTime)}}(n)),xe.resolve()}getNamedQuery(e,n){return xe.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:Ave(s.bundledQuery),readTime:ko(s.readTime)}}(n)),xe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fve{constructor(){this.overlays=new sr(ht.comparator),this.Lr=new Map}getOverlay(e,n){return xe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=kd();return xe.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.bt(e,n,a)}),xe.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Lr.delete(r)),xe.resolve()}getOverlaysForCollection(e,n,r){const s=kd(),a=n.length+1,o=new ht(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&c.largestBatchId>r&&s.set(c.getKey(),c)}return xe.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new sr((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=a.get(u.largestBatchId);d===null&&(d=kd(),a=a.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=kd(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=s)););return xe.resolve(l)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new rve(n,r));let a=this.Lr.get(n);a===void 0&&(a=Xt(),this.Lr.set(n,a)),this.Lr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vve{constructor(){this.sessionToken=ms.EMPTY_BYTE_STRING}getSessionToken(e){return xe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,xe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(){this.kr=new qr(Yr.Kr),this.qr=new qr(Yr.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Yr(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Yr(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new ht(new On([])),r=new Yr(n,e),s=new Yr(n,e+1),a=[];return this.qr.forEachInRange([r,s],o=>{this.Wr(o),a.push(o.key)}),a}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new ht(new On([])),r=new Yr(n,e),s=new Yr(n,e+1);let a=Xt();return this.qr.forEachInRange([r,s],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new Yr(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Yr{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return ht.comparator(e.key,n.key)||Qt(e.Hr,n.Hr)}static Ur(e,n){return Qt(e.Hr,n.Hr)||ht.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bve{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new qr(Yr.Kr)}checkEmpty(e){return xe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new nve(a,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Jr=this.Jr.add(new Yr(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return xe.resolve(o)}lookupMutationBatch(e,n){return xe.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),a=s<0?0:s;return xe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(this.mutationQueue.length===0?UR:this.Yn-1)}getAllMutationBatches(e){return xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Yr(n,0),s=new Yr(n,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([r,s],o=>{const l=this.Zr(o.Hr);a.push(l)}),xe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qr(Qt);return n.forEach(s=>{const a=new Yr(s,0),o=new Yr(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,o],l=>{r=r.add(l.Hr)})}),xe.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;ht.isDocumentKey(a)||(a=a.child(""));const o=new Yr(new ht(a),0);let l=new qr(Qt);return this.Jr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Hr)),!0)},o),xe.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){yn(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return xe.forEach(n.mutations,s=>{const a=new Yr(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new Yr(n,0),s=this.Jr.firstAfterOrEqual(r);return xe.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,xe.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uve{constructor(e){this.ti=e,this.docs=function(){return new sr(ht.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return xe.resolve(r?r.document.mutableCopy():As.newInvalidDocument(n))}getEntries(e,n){let r=Ml();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():As.newInvalidDocument(s))}),xe.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=Ml();const o=n.path,l=new ht(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||mye(fye(d),r)<=0||(s.has(d.key)||kN(n,d))&&(a=a.insert(d.key,d.mutableCopy()))}return xe.resolve(a)}getAllFromCollectionGroup(e,n,r,s){jt(9500)}ni(e,n){return xe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new zve(this)}getSize(e){return xe.resolve(this.size)}}class zve extends Mve{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),xe.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qve{constructor(e){this.persistence=e,this.ri=new Kh(n=>WR(n),HR),this.lastRemoteSnapshotVersion=kt.min(),this.highestTargetId=0,this.ii=0,this.si=new ZR,this.targetCount=0,this.oi=Hm._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),xe.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Hm(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,xe.resolve()}updateTargetData(e,n){return this.lr(n),xe.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.ri.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ri.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),xe.waitFor(a).next(()=>s)}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return xe.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),xe.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),xe.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),xe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return xe.resolve(r)}containsKey(e,n){return xe.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{constructor(e,n){this._i={},this.overlays={},this.ai=new TN(0),this.ui=!1,this.ui=!0,this.ci=new Vve,this.referenceDelegate=e(this),this.li=new qve(this),this.indexManager=new Tve,this.remoteDocumentCache=function(s){return new Uve(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new Eve(n),this.Pi=new $ve(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Fve,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new Bve(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){Ge("MemoryPersistence","Starting transaction:",e);const s=new Wve(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(a=>this.referenceDelegate.Ii(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ei(e,n){return xe.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class Wve extends gye{constructor(e){super(),this.currentSequenceNumber=e}}class JR{constructor(e){this.persistence=e,this.Ri=new ZR,this.Ai=null}static Vi(e){return new JR(e)}get di(){if(this.Ai)return this.Ai;throw jt(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),xe.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),xe.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),xe.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.di.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.di,r=>{const s=ht.fromPath(r);return this.mi(e,s).next(a=>{a||n.removeEntry(s,kt.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return xe.or([()=>xe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class m_{constructor(e,n){this.persistence=e,this.fi=new Kh(r=>xye(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Ove(this,n)}static Vi(e,n){return new m_(e,n)}Ti(){}Ii(e){return xe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return xe.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(a=>a?xe.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ni(e,o=>this.wr(e,o,n).next(l=>{l||(r++,a.removeEntry(o,kt.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),xe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),xe.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),xe.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),xe.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=rw(e.data.value)),n}wr(e,n,r){return xe.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return xe.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=Xt(),s=Xt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new eO(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hve{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kve{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return sfe()?8:yye(Ls())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.gs(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.ps(e,n,s,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new Hve;return this.ys(e,n,o).next(l=>{if(a.result=l,this.As)return this.ws(e,n,o,l.size)})}).next(()=>a.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?(wf()<=Yt.DEBUG&&Ge("QueryEngine","SDK will not create cache indexes for query:",_f(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),xe.resolve()):(wf()<=Yt.DEBUG&&Ge("QueryEngine","Query:",_f(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(wf()<=Yt.DEBUG&&Ge("QueryEngine","The SDK decides to create cache indexes for query:",_f(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Io(n))):xe.resolve())}gs(e,n){if(M$(n))return xe.resolve(null);let r=Io(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=d_(n,null,"F"),r=Io(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=Xt(...a);return this.fs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.bs(n,l);return this.Ss(n,u,o,c.readTime)?this.gs(e,d_(n,null,"F")):this.Ds(e,u,n,c)}))})))}ps(e,n,r,s){return M$(n)||s.isEqual(kt.min())?xe.resolve(null):this.fs.getDocuments(e,r).next(a=>{const o=this.bs(n,a);return this.Ss(n,o,r,s)?xe.resolve(null):(wf()<=Yt.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),_f(n)),this.Ds(e,o,n,hye(s,jv)).next(l=>l))})}bs(e,n){let r=new qr(zH(e));return n.forEach((s,a)=>{kN(e,a)&&(r=r.add(a))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ys(e,n,r){return wf()<=Yt.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",_f(n)),this.fs.getDocumentsMatchingQuery(e,n,_u.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO="LocalStore",Gve=3e8;class Yve{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new sr(Qt),this.Fs=new Kh(a=>WR(a),HR),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lve(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function Qve(t,e,n,r){return new Yve(t,e,n,r)}async function f7(t,e){const n=Lt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],l=[];let c=Xt();for(const u of s){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of a){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ns:u,removedBatchIds:o,addedBatchIds:l}))})})}function Xve(t,e){const n=Lt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const h=u.batch,f=h.keys();let m=xe.resolve();return f.forEach(v=>{m=m.next(()=>d.getEntry(c,v)).next(g=>{const y=u.docVersions.get(v);yn(y!==null,48541),g.version.compareTo(y)<0&&(h.applyToRemoteDocument(g,u),g.isValidDocument()&&(g.setReadTime(u.commitVersion),d.addEntry(g)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(c,h))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Xt();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function m7(t){const e=Lt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function Zve(t,e){const n=Lt(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const l=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;l.push(n.li.removeMatchingKeys(a,d.removedDocuments,h).next(()=>n.li.addMatchingKeys(a,d.addedDocuments,h)));let m=f.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(ms.EMPTY_BYTE_STRING,kt.min()).withLastLimboFreeSnapshotVersion(kt.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(h,m),function(g,y,b){return g.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=Gve?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(f,m,d)&&l.push(n.li.updateTargetData(a,m))});let c=Ml(),u=Xt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(a,d))}),l.push(Jve(a,o,e.documentUpdates).next(d=>{c=d.Bs,u=d.Ls})),!r.isEqual(kt.min())){const d=n.li.getLastRemoteSnapshotVersion(a).next(h=>n.li.setTargetsMetadata(a,a.currentSequenceNumber,r));l.push(d)}return xe.waitFor(l).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,c,u)).next(()=>c)}).then(a=>(n.vs=s,a))}function Jve(t,e,n){let r=Xt(),s=Xt();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=Ml();return n.forEach((l,c)=>{const u=a.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(kt.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):Ge(tO,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Bs:o,Ls:s}})}function exe(t,e){const n=Lt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=UR),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function txe(t,e){const n=Lt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(a=>a?(s=a,xe.resolve(s)):n.li.allocateTargetId(r).next(o=>(s=new Kc(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function CC(t,e,n){const r=Lt(t),s=r.vs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Hp(o))throw o;Ge(tO,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function G$(t,e,n){const r=Lt(t);let s=kt.min(),a=Xt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const h=Lt(c),f=h.Fs.get(d);return f!==void 0?xe.resolve(h.vs.get(f)):h.li.getTargetData(u,d)}(r,o,Io(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,l.targetId).next(c=>{a=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:kt.min(),n?a:Xt())).next(l=>(nxe(r,Vye(e),l),{documents:l,ks:a})))}function nxe(t,e,n){let r=t.Ms.get(e)||kt.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Ms.set(e,r)}class Y${constructor(){this.activeTargetIds=Hye()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rxe{constructor(){this.vo=new Y$,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Y$,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sxe{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q$="ConnectivityMonitor";class X${constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ge(Q$,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ge(Q$,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let u0=null;function PC(){return u0===null?u0=function(){return 268435456+Math.round(2147483648*Math.random())}():u0++,"0x"+u0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="RestConnection",ixe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class axe{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===l_?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,a){const o=PC(),l=this.Qo(e,n.toUriEncodedString());Ge(wE,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,s,a);const{host:u}=new URL(l),d=Yo(u);return this.zo(e,l,c,r,d).then(h=>(Ge(wE,`Received RPC '${e}' ${o}: `,h),h),h=>{throw Sh(wE,`RPC '${e}' ${o} failed with error: `,h,"url: ",l,"request:",r),h})}jo(e,n,r,s,a,o){return this.Wo(e,n,r,s,a)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qp}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}Qo(e,n){const r=ixe[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oxe{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="WebChannelConnection",Lg=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class om extends axe{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!om.c_){const e=vH();Lg(e,yH.STAT_EVENT,n=>{n.stat===yC.PROXY?Ge(bs,"STAT_EVENT: detected buffering proxy"):n.stat===yC.NOPROXY&&Ge(bs,"STAT_EVENT: detected no buffering proxy")}),om.c_=!0}}zo(e,n,r,s,a){const o=PC();return new Promise((l,c)=>{const u=new pH;u.setWithCredentials(!0),u.listenOnce(gH.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case nw.NO_ERROR:const h=u.getResponseJson();Ge(bs,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),l(h);break;case nw.TIMEOUT:Ge(bs,`RPC '${e}' ${o} timed out`),c(new Ue(pe.DEADLINE_EXCEEDED,"Request time out"));break;case nw.HTTP_ERROR:const f=u.getStatus();if(Ge(bs,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m==null?void 0:m.error;if(v&&v.status&&v.message){const g=function(b){const x=b.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(x)>=0?x:pe.UNKNOWN}(v.status);c(new Ue(g,v.message))}else c(new Ue(pe.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Ue(pe.UNAVAILABLE,"Connection failed."));break;default:jt(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Ge(bs,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);Ge(bs,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",d,r,15)})}T_(e,n,r){const s=PC(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=a.join("");Ge(bs,`Creating RPC '${e}' stream ${s}: ${u}`,l);const d=o.createWebChannel(u,l);this.I_(d);let h=!1,f=!1;const m=new oxe({Ho:v=>{f?Ge(bs,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(h||(Ge(bs,`Opening RPC '${e}' stream ${s} transport.`),d.open(),h=!0),Ge(bs,`RPC '${e}' stream ${s} sending:`,v),d.send(v))},Jo:()=>d.close()});return Lg(d,uy.EventType.OPEN,()=>{f||(Ge(bs,`RPC '${e}' stream ${s} transport opened.`),m.i_())}),Lg(d,uy.EventType.CLOSE,()=>{f||(f=!0,Ge(bs,`RPC '${e}' stream ${s} transport closed`),m.o_(),this.E_(d))}),Lg(d,uy.EventType.ERROR,v=>{f||(f=!0,Sh(bs,`RPC '${e}' stream ${s} transport errored. Name:`,v.name,"Message:",v.message),m.o_(new Ue(pe.UNAVAILABLE,"The operation could not be completed")))}),Lg(d,uy.EventType.MESSAGE,v=>{var g;if(!f){const y=v.data[0];yn(!!y,16349);const b=y,x=(b==null?void 0:b.error)||((g=b[0])==null?void 0:g.error);if(x){Ge(bs,`RPC '${e}' stream ${s} received error:`,x);const S=x.status;let T=function(E){const p=Sr[E];if(p!==void 0)return e7(p)}(S),_=x.message;S==="NOT_FOUND"&&_.includes("database")&&_.includes("does not exist")&&_.includes(this.databaseId.database)&&Sh(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),T===void 0&&(T=pe.INTERNAL,_="Unknown error status: "+S+" with message "+x.message),f=!0,m.o_(new Ue(T,_)),d.close()}else Ge(bs,`RPC '${e}' stream ${s} received:`,y),m.__(y)}}),om.u_(),setTimeout(()=>{m.s_()},0),m}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return xH()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lxe(t){return new om(t)}function _E(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t){return new hve(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */om.c_=!1;class p7{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Ge("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z$="PersistentStream";class g7{constructor(e,n,r,s,a,o,l,c){this.Ci=e,this.b_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new p7(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===pe.RESOURCE_EXHAUSTED?(Ol(n.toString()),Ol("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Ue(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Ge(Z$,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(Ge(Z$,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cxe extends g7{constructor(e,n,r,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=pve(this.serializer,e),r=function(a){if(!("targetChange"in a))return kt.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?kt.min():o.readTime?ko(o.readTime):kt.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=TC(this.serializer),n.addTarget=function(a,o){let l;const c=o.target;if(l=jC(c)?{documents:vve(a,c)}:{query:xve(a,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=r7(a,o.resumeToken);const u=SC(a,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(kt.min())>0){l.readTime=f_(a,o.snapshotVersion.toTimestamp());const u=SC(a,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=wve(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=TC(this.serializer),n.removeTarget=e,this.K_(n)}}class uxe extends g7{constructor(e,n,r,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return yn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,yn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){yn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=yve(e.writeResults,e.commitTime),r=ko(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=TC(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>gve(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dxe{}class hxe extends dxe{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Ue(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Wo(e,EC(n,r),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ue(pe.UNKNOWN,a.toString())})}jo(e,n,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.jo(e,EC(n,r),s,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ue(pe.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function fxe(t,e,n,r){return new hxe(t,e,n,r)}class mxe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ol(n),this.aa=!1):Ge("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh="RemoteStore";class pxe{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{Gh(this)&&(Ge(Eh,"Restarting streams for network reachability change."),await async function(c){const u=Lt(c);u.Ea.add(4),await Zx(u),u.Va.set("Unknown"),u.Ea.delete(4),await $N(u)}(this))})}),this.Va=new mxe(r,s)}}async function $N(t){if(Gh(t))for(const e of t.Ra)await e(!0)}async function Zx(t){for(const e of t.Ra)await e(!1)}function y7(t,e){const n=Lt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),iO(n)?sO(n):Gp(n).O_()&&rO(n,e))}function nO(t,e){const n=Lt(t),r=Gp(n);n.Ia.delete(e),r.O_()&&v7(n,e),n.Ia.size===0&&(r.O_()?r.L_():Gh(n)&&n.Va.set("Unknown"))}function rO(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(kt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Gp(t).Z_(e)}function v7(t,e){t.da.$e(e),Gp(t).X_(e)}function sO(t){t.da=new lve({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Gp(t).start(),t.Va.ua()}function iO(t){return Gh(t)&&!Gp(t).x_()&&t.Ia.size>0}function Gh(t){return Lt(t).Ea.size===0}function x7(t){t.da=void 0}async function gxe(t){t.Va.set("Online")}async function yxe(t){t.Ia.forEach((e,n)=>{rO(t,e)})}async function vxe(t,e){x7(t),iO(t)?(t.Va.ha(e),sO(t)):t.Va.set("Unknown")}async function xxe(t,e,n){if(t.Va.set("Online"),e instanceof n7&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const l of a.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.da.removeTarget(l))}(t,e)}catch(r){Ge(Eh,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await p_(t,r)}else if(e instanceof aw?t.da.Xe(e):e instanceof t7?t.da.st(e):t.da.tt(e),!n.isEqual(kt.min()))try{const r=await m7(t.localStore);n.compareTo(r)>=0&&await function(a,o){const l=a.da.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=a.Ia.get(u);d&&a.Ia.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=a.Ia.get(c);if(!d)return;a.Ia.set(c,d.withResumeToken(ms.EMPTY_BYTE_STRING,d.snapshotVersion)),v7(a,c);const h=new Kc(d.target,c,u,d.sequenceNumber);rO(a,h)}),a.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Ge(Eh,"Failed to raise snapshot:",r),await p_(t,r)}}async function p_(t,e,n){if(!Hp(e))throw e;t.Ea.add(1),await Zx(t),t.Va.set("Offline"),n||(n=()=>m7(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ge(Eh,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await $N(t)})}function b7(t,e){return e().catch(n=>p_(t,n,e))}async function FN(t){const e=Lt(t),n=Eu(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:UR;for(;bxe(e);)try{const s=await exe(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,wxe(e,s)}catch(s){await p_(e,s)}w7(e)&&_7(e)}function bxe(t){return Gh(t)&&t.Ta.length<10}function wxe(t,e){t.Ta.push(e);const n=Eu(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function w7(t){return Gh(t)&&!Eu(t).x_()&&t.Ta.length>0}function _7(t){Eu(t).start()}async function _xe(t){Eu(t).ra()}async function jxe(t){const e=Eu(t);for(const n of t.Ta)e.ea(n.mutations)}async function Nxe(t,e,n){const r=t.Ta.shift(),s=YR.from(r,e,n);await b7(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await FN(t)}async function Sxe(t,e){e&&Eu(t).Y_&&await async function(r,s){if(function(o){return ive(o)&&o!==pe.ABORTED}(s.code)){const a=r.Ta.shift();Eu(r).B_(),await b7(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await FN(r)}}(t,e),w7(t)&&_7(t)}async function J$(t,e){const n=Lt(t);n.asyncQueue.verifyOperationInProgress(),Ge(Eh,"RemoteStore received new credentials");const r=Gh(n);n.Ea.add(3),await Zx(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await $N(n)}async function Exe(t,e){const n=Lt(t);e?(n.Ea.delete(2),await $N(n)):e||(n.Ea.add(2),await Zx(n),n.Va.set("Unknown"))}function Gp(t){return t.ma||(t.ma=function(n,r,s){const a=Lt(n);return a.sa(),new cxe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Zo:gxe.bind(null,t),Yo:yxe.bind(null,t),t_:vxe.bind(null,t),J_:xxe.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),iO(t)?sO(t):t.Va.set("Unknown")):(await t.ma.stop(),x7(t))})),t.ma}function Eu(t){return t.fa||(t.fa=function(n,r,s){const a=Lt(n);return a.sa(),new uxe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:_xe.bind(null,t),t_:Sxe.bind(null,t),ta:jxe.bind(null,t),na:Nxe.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await FN(t)):(await t.fa.stop(),t.Ta.length>0&&(Ge(Eh,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new bl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const o=Date.now()+r,l=new aO(e,n,o,s,a);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ue(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oO(t,e){if(Ol("AsyncQueue",`${e}: ${t}`),Hp(t))return new Ue(pe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{static emptySet(e){return new lm(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ht.comparator(n.key,r.key):(n,r)=>ht.comparator(n.key,r.key),this.keyedMap=dy(),this.sortedSet=new sr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof lm)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new lm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(){this.ga=new sr(ht.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):jt(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Km{constructor(e,n,r,s,a,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,a){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Km(e,n,lm.emptySet(n),o,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&IN(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Axe{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class Txe{constructor(){this.queries=tF(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Lt(n),a=s.queries;s.queries=tF(),a.forEach((o,l)=>{for(const c of l.ba)c.onError(r)})})(this,new Ue(pe.ABORTED,"Firestore shutting down"))}}function tF(){return new Kh(t=>UH(t),IN)}async function j7(t,e){const n=Lt(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.Sa()&&e.Da()&&(r=2):(a=new Axe,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(s,!0);break;case 1:a.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=oO(o,`Initialization of query '${_f(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,a),a.ba.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&lO(n)}async function N7(t,e){const n=Lt(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const o=a.ba.indexOf(e);o>=0&&(a.ba.splice(o,1),a.ba.length===0?s=e.Da()?0:1:!a.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Cxe(t,e){const n=Lt(t);let r=!1;for(const s of e){const a=s.query,o=n.queries.get(a);if(o){for(const l of o.ba)l.Fa(s)&&(r=!0);o.wa=s}}r&&lO(n)}function Pxe(t,e,n){const r=Lt(t),s=r.queries.get(e);if(s)for(const a of s.ba)a.onError(n);r.queries.delete(e)}function lO(t){t.Ca.forEach(e=>{e.next()})}var IC,nF;(nF=IC||(IC={})).Ma="default",nF.Cache="cache";class S7{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Km(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Km.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==IC.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E7{constructor(e){this.key=e}}class A7{constructor(e){this.key=e}}class Ixe{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Xt(),this.mutatedKeys=Xt(),this.eu=zH(e),this.tu=new lm(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new eF,s=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),m=kN(this.query,h)?h:null,v=!!f&&this.mutatedKeys.has(f.key),g=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let y=!1;f&&m?f.data.isEqual(m.data)?v!==g&&(r.track({type:3,doc:m}),y=!0):this.su(f,m)||(r.track({type:2,doc:m}),y=!0,(c&&this.eu(m,c)>0||u&&this.eu(m,u)<0)&&(l=!0)):!f&&m?(r.track({type:0,doc:m}),y=!0):f&&!m&&(r.track({type:1,doc:f}),y=!0,(c||u)&&(l=!0)),y&&(m?(o=o.add(m),a=g?a.add(d):a.delete(d)):(o=o.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),a=a.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Ss:l,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(m,v){const g=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return jt(20277,{Vt:y})}};return g(m)-g(v)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Ya.size===0&&this.current&&!s?1:0,u=c!==this.Xa;return this.Xa=c,o.length!==0||u?{snapshot:new Km(this.query,e.tu,a,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new eF,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Xt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new A7(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new E7(r))}),n}cu(e){this.Za=e.ks,this.Ya=Xt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Km.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const cO="SyncEngine";class kxe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Rxe{constructor(e){this.key=e,this.hu=!1}}class Oxe{constructor(e,n,r,s,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Kh(l=>UH(l),IN),this.Iu=new Map,this.Eu=new Set,this.Ru=new sr(ht.comparator),this.Au=new Map,this.Vu=new ZR,this.du={},this.mu=new Map,this.fu=Hm.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Mxe(t,e,n=!0){const r=R7(t);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await T7(r,e,n,!0),s}async function Dxe(t,e){const n=R7(t);await T7(n,e,!0,!1)}async function T7(t,e,n,r){const s=await txe(t.localStore,Io(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let l;return r&&(l=await Lxe(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&y7(t.remoteStore,s),l}async function Lxe(t,e,n,r,s){t.pu=(h,f,m)=>async function(g,y,b,x){let S=y.view.ru(b);S.Ss&&(S=await G$(g.localStore,y.query,!1).then(({documents:E})=>y.view.ru(E,S)));const T=x&&x.targetChanges.get(y.targetId),_=x&&x.targetMismatches.get(y.targetId)!=null,C=y.view.applyChanges(S,g.isPrimaryClient,T,_);return sF(g,y.targetId,C.au),C.snapshot}(t,h,f,m);const a=await G$(t.localStore,e,!0),o=new Ixe(e,a.ks),l=o.ru(a.documents),c=Xx.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);sF(t,n,u.au);const d=new kxe(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function $xe(t,e,n){const r=Lt(t),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter(o=>!IN(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await CC(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&nO(r.remoteStore,s.targetId),kC(r,s.targetId)}).catch(Wp)):(kC(r,s.targetId),await CC(r.localStore,s.targetId,!0))}async function Fxe(t,e){const n=Lt(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),nO(n.remoteStore,r.targetId))}async function Vxe(t,e,n){const r=Kxe(t);try{const s=await function(o,l){const c=Lt(o),u=qn.now(),d=l.reduce((m,v)=>m.add(v.key),Xt());let h,f;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=Ml(),g=Xt();return c.xs.getEntries(m,d).next(y=>{v=y,v.forEach((b,x)=>{x.isValidDocument()||(g=g.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,v)).next(y=>{h=y;const b=[];for(const x of l){const S=eve(x,h.get(x.key).overlayedDocument);S!=null&&b.push(new Ku(x.key,S,OH(S.value.mapValue),Qs.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,b,l)}).next(y=>{f=y;const b=y.applyToLocalDocumentSet(h,g);return c.documentOverlayCache.saveOverlays(m,y.batchId,b)})}).then(()=>({batchId:f.batchId,changes:WH(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.du[o.currentUser.toKey()];u||(u=new sr(Qt)),u=u.insert(l,c),o.du[o.currentUser.toKey()]=u}(r,s.batchId,n),await Jx(r,s.changes),await FN(r.remoteStore)}catch(s){const a=oO(s,"Failed to persist write");n.reject(a)}}async function C7(t,e){const n=Lt(t);try{const r=await Zve(n.localStore,e);e.targetChanges.forEach((s,a)=>{const o=n.Au.get(a);o&&(yn(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?yn(o.hu,14607):s.removedDocuments.size>0&&(yn(o.hu,42227),o.hu=!1))}),await Jx(n,r,e)}catch(r){await Wp(r)}}function rF(t,e,n){const r=Lt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((a,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=Lt(o);c.onlineState=l;let u=!1;c.queries.forEach((d,h)=>{for(const f of h.ba)f.va(l)&&(u=!0)}),u&&lO(c)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Bxe(t,e,n){const r=Lt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),a=s&&s.key;if(a){let o=new sr(ht.comparator);o=o.insert(a,As.newNoDocument(a,kt.min()));const l=Xt().add(a),c=new DN(kt.min(),new Map,new sr(Qt),o,l);await C7(r,c),r.Ru=r.Ru.remove(a),r.Au.delete(e),uO(r)}else await CC(r.localStore,e,!1).then(()=>kC(r,e,n)).catch(Wp)}async function Uxe(t,e){const n=Lt(t),r=e.batch.batchId;try{const s=await Xve(n.localStore,e);I7(n,r,null),P7(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Jx(n,s)}catch(s){await Wp(s)}}async function zxe(t,e,n){const r=Lt(t);try{const s=await function(o,l){const c=Lt(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(h=>(yn(h!==null,37113),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);I7(r,e,n),P7(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Jx(r,s)}catch(s){await Wp(s)}}function P7(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function I7(t,e,n){const r=Lt(t);let s=r.du[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function kC(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||k7(t,r)})}function k7(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(nO(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),uO(t))}function sF(t,e,n){for(const r of n)r instanceof E7?(t.Vu.addReference(r.key,e),qxe(t,r)):r instanceof A7?(Ge(cO,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||k7(t,r.key)):jt(19791,{wu:r})}function qxe(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(Ge(cO,"New document in limbo: "+n),t.Eu.add(r),uO(t))}function uO(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ht(On.fromString(e)),r=t.fu.next();t.Au.set(r,new Rxe(n)),t.Ru=t.Ru.insert(n,r),y7(t.remoteStore,new Kc(Io(KR(n.path)),r,"TargetPurposeLimboResolution",TN.ce))}}async function Jx(t,e,n){const r=Lt(t),s=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){s.push(u);const h=eO.Es(c.targetId,u);a.push(h)}}))}),await Promise.all(o),r.Pu.J_(s),await async function(c,u){const d=Lt(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>xe.forEach(u,f=>xe.forEach(f.Ts,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>xe.forEach(f.Is,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!Hp(h))throw h;Ge(tO,"Failed to update sequence numbers: "+h)}for(const h of u){const f=h.targetId;if(!h.fromCache){const m=d.vs.get(f),v=m.snapshotVersion,g=m.withLastLimboFreeSnapshotVersion(v);d.vs=d.vs.insert(f,g)}}}(r.localStore,a))}async function Wxe(t,e){const n=Lt(t);if(!n.currentUser.isEqual(e)){Ge(cO,"User change. New user:",e.toKey());const r=await f7(n.localStore,e);n.currentUser=e,function(a,o){a.mu.forEach(l=>{l.forEach(c=>{c.reject(new Ue(pe.CANCELLED,o))})}),a.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Jx(n,r.Ns)}}function Hxe(t,e){const n=Lt(t),r=n.Au.get(e);if(r&&r.hu)return Xt().add(r.key);{let s=Xt();const a=n.Iu.get(e);if(!a)return s;for(const o of a){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function R7(t){const e=Lt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=C7.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hxe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Bxe.bind(null,e),e.Pu.J_=Cxe.bind(null,e.eventManager),e.Pu.yu=Pxe.bind(null,e.eventManager),e}function Kxe(t){const e=Lt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Uxe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zxe.bind(null,e),e}class g_{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=LN(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Qve(this.persistence,new Kve,e.initialUser,this.serializer)}Cu(e){return new h7(JR.Vi,this.serializer)}Du(e){return new rxe}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}g_.provider={build:()=>new g_};class Gxe extends g_{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){yn(this.persistence.referenceDelegate instanceof m_,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new kve(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?oi.withCacheSize(this.cacheSizeBytes):oi.DEFAULT;return new h7(r=>m_.Vi(r,n),this.serializer)}}class RC{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>rF(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Wxe.bind(null,this.syncEngine),await Exe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Txe}()}createDatastore(e){const n=LN(e.databaseInfo.databaseId),r=lxe(e.databaseInfo);return fxe(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,o,l){return new pxe(r,s,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>rF(this.syncEngine,n,0),function(){return X$.v()?new X$:new sxe}())}createSyncEngine(e,n){return function(s,a,o,l,c,u,d){const h=new Oxe(s,a,o,l,c,u);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=Lt(s);Ge(Eh,"RemoteStore shutting down."),a.Ea.add(5),await Zx(a),a.Aa.shutdown(),a.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}RC.provider={build:()=>new RC};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ol("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au="FirestoreClient";class Yxe{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=js.UNAUTHENTICATED,this.clientId=BR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{Ge(Au,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Ge(Au,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=oO(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function jE(t,e){t.asyncQueue.verifyOperationInProgress(),Ge(Au,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await f7(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function iF(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Qxe(t);Ge(Au,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>J$(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>J$(e.remoteStore,s)),t._onlineComponents=e}async function Qxe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ge(Au,"Using user provided OfflineComponentProvider");try{await jE(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===pe.FAILED_PRECONDITION||s.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Sh("Error using user provided cache. Falling back to memory cache: "+n),await jE(t,new g_)}}else Ge(Au,"Using default OfflineComponentProvider"),await jE(t,new Gxe(void 0));return t._offlineComponents}async function M7(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ge(Au,"Using user provided OnlineComponentProvider"),await iF(t,t._uninitializedComponentsProvider._online)):(Ge(Au,"Using default OnlineComponentProvider"),await iF(t,new RC))),t._onlineComponents}function Xxe(t){return M7(t).then(e=>e.syncEngine)}async function D7(t){const e=await M7(t),n=e.eventManager;return n.onListen=Mxe.bind(null,e.syncEngine),n.onUnlisten=$xe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Dxe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Fxe.bind(null,e.syncEngine),n}function Zxe(t,e,n={}){const r=new bl;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const d=new O7({next:f=>{d.Nu(),o.enqueueAndForget(()=>N7(a,h));const m=f.docs.has(l);!m&&f.fromCache?u.reject(new Ue(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&c&&c.source==="server"?u.reject(new Ue(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new S7(KR(l.path),d,{includeMetadataChanges:!0,Ka:!0});return j7(a,h)}(await D7(t),t.asyncQueue,e,n,r)),r.promise}function Jxe(t,e,n={}){const r=new bl;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const d=new O7({next:f=>{d.Nu(),o.enqueueAndForget(()=>N7(a,h)),f.fromCache&&c.source==="server"?u.reject(new Ue(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new S7(l,d,{includeMetadataChanges:!0,Ka:!0});return j7(a,h)}(await D7(t),t.asyncQueue,e,n,r)),r.promise}function ebe(t,e){const n=new bl;return t.asyncQueue.enqueueAndForget(async()=>Vxe(await Xxe(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L7(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tbe="ComponentProvider",aF=new Map;function nbe(t,e,n,r,s){return new _ye(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,L7(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7="firestore.googleapis.com",oF=!0;class lF{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ue(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$7,this.ssl=oF}else this.host=e.host,this.ssl=e.ssl??oF;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=d7;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Pve)throw new Ue(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uye("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=L7(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ue(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ue(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ue(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class VN{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lF({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ue(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ue(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lF(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new eye;switch(r.type){case"firstParty":return new sye(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ue(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=aF.get(n);r&&(Ge(tbe,"Removing Datastore"),aF.delete(n),r.terminate())}(this),Promise.resolve()}}function rbe(t,e,n,r={}){var u;t=ga(t,VN);const s=Yo(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(_N(`https://${l}`),jN("Firestore",!0)),a.host!==$7&&a.host!==l&&Sh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...a,host:l,ssl:s,emulatorOptions:r};if(!bh(c,o)&&(t._setSettings(c),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=js.MOCK_USER;else{d=AW(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Ue(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new js(f)}t._authCredentials=new tye(new wH(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gu(this.firestore,e,this._query)}}class br{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new du(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new br(this.firestore,e,this._key)}toJSON(){return{type:br._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Yx(n,br._jsonSchema))return new br(e,r||null,new ht(On.fromString(n.referencePath)))}}br._jsonSchemaVersion="firestore/documentReference/1.0",br._jsonSchema={type:Pr("string",br._jsonSchemaVersion),referencePath:Pr("string")};class du extends Gu{constructor(e,n,r){super(e,n,KR(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new br(this.firestore,null,new ht(e))}withConverter(e){return new du(this.firestore,e,this._path)}}function ge(t,e,...n){if(t=sn(t),_H("collection","path",e),t instanceof VN){const r=On.fromString(e,...n);return w$(r),new du(t,null,r)}{if(!(t instanceof br||t instanceof du))throw new Ue(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(On.fromString(e,...n));return w$(r),new du(t.firestore,null,r)}}function Ye(t,e,...n){if(t=sn(t),arguments.length===1&&(e=BR.newId()),_H("doc","path",e),t instanceof VN){const r=On.fromString(e,...n);return b$(r),new br(t,null,new ht(r))}{if(!(t instanceof br||t instanceof du))throw new Ue(pe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(On.fromString(e,...n));return b$(r),new br(t.firestore,t instanceof du?t.converter:null,new ht(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cF="AsyncQueue";class uF{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new p7(this,"async_queue_retry"),this._c=()=>{const r=_E();r&&Ge(cF,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=_E();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=_E();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new bl;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Hp(e))throw e;Ge(cF,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Ol("INTERNAL UNHANDLED ERROR: ",dF(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=aO.createAndSchedule(this,e,n,r,a=>this.hc(a));return this.tc.push(s),s}uc(){this.nc&&jt(47125,{Pc:dF(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function dF(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Yu extends VN{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new uF,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uF(e),this._firestoreClient=void 0,await e}}}function sbe(t,e){const n=typeof t=="object"?t:qx(),r=typeof t=="string"?t:l_,s=zx(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=SR("firestore");a&&rbe(s,...a)}return s}function BN(t){if(t._terminated)throw new Ue(pe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ibe(t),t._firestoreClient}function ibe(t){var r,s,a,o;const e=t._freezeSettings(),n=nbe(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Yxe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zi(ms.fromBase64String(e))}catch(n){throw new Ue(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Zi(ms.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yx(e,Zi._jsonSchema))return Zi.fromBase64String(e.bytes)}}Zi._jsonSchemaVersion="firestore/bytes/1.0",Zi._jsonSchema={type:Pr("string",Zi._jsonSchemaVersion),bytes:Pr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ue(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ds(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function Ha(){return new eb(xC)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ue(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ue(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qt(this._lat,e._lat)||Qt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ro._jsonSchemaVersion}}static fromJSON(e){if(Yx(e,Ro._jsonSchema))return new Ro(e.latitude,e.longitude)}}Ro._jsonSchemaVersion="firestore/geoPoint/1.0",Ro._jsonSchema={type:Pr("string",Ro._jsonSchemaVersion),latitude:Pr("number"),longitude:Pr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ka._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yx(e,Ka._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ka(e.vectorValues);throw new Ue(pe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ka._jsonSchemaVersion="firestore/vectorValue/1.0",Ka._jsonSchema={type:Pr("string",Ka._jsonSchemaVersion),vectorValues:Pr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const abe=/^__.*__$/;class obe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ku(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qx(e,this.data,n,this.fieldTransforms)}}class F7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ku(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function V7(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw jt(40011,{dataSource:t})}}class dO{constructor(e,n,r,s,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new dO({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return y_(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(V7(this.dataSource)&&abe.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class lbe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||LN(e)}createContext(e,n,r,s=!1){return new dO({dataSource:e,methodName:n,targetDoc:r,path:ds.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tb(t){const e=t._freezeSettings(),n=LN(t._databaseId);return new lbe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hO(t,e,n,r,s,a={}){const o=t.createContext(a.merge||a.mergeFields?2:0,e,n,s);mO("Data must be an object, but it was:",o,r);const l=z7(r,o);let c,u;if(a.merge)c=new Ri(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){const d=[];for(const h of a.mergeFields){const f=Ah(e,h,n);if(!o.contains(f))throw new Ue(pe.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);H7(d,f)||d.push(f)}c=new Ri(d),u=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=o.fieldTransforms;return new obe(new hi(l),c,u)}class zN extends UN{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zN}}class fO extends UN{_toFieldTransform(e){return new Qye(e.path,new Tv)}isEqual(e){return e instanceof fO}}function B7(t,e,n,r){const s=t.createContext(1,e,n);mO("Data must be an object, but it was:",s,r);const a=[],o=hi.empty();Hu(r,(c,u)=>{const d=W7(e,c,n);u=sn(u);const h=s.childContextForFieldPath(d);if(u instanceof zN)a.push(d);else{const f=nb(u,h);f!=null&&(a.push(d),o.set(d,f))}});const l=new Ri(a);return new F7(o,l,s.fieldTransforms)}function U7(t,e,n,r,s,a){const o=t.createContext(1,e,n),l=[Ah(e,r,n)],c=[s];if(a.length%2!=0)throw new Ue(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<a.length;f+=2)l.push(Ah(e,a[f])),c.push(a[f+1]);const u=[],d=hi.empty();for(let f=l.length-1;f>=0;--f)if(!H7(u,l[f])){const m=l[f];let v=c[f];v=sn(v);const g=o.childContextForFieldPath(m);if(v instanceof zN)u.push(m);else{const y=nb(v,g);y!=null&&(u.push(m),d.set(m,y))}}const h=new Ri(u);return new F7(d,h,o.fieldTransforms)}function cbe(t,e,n,r=!1){return nb(n,t.createContext(r?4:3,e))}function nb(t,e){if(q7(t=sn(t)))return mO("Unsupported field value:",e,t),z7(t,e);if(t instanceof UN)return function(r,s){if(!V7(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const a=[];let o=0;for(const l of r){let c=nb(l,s.childContextForArray(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=sn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Kye(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=qn.fromDate(r);return{timestampValue:f_(s.serializer,a)}}if(r instanceof qn){const a=new qn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:f_(s.serializer,a)}}if(r instanceof Ro)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Zi)return{bytesValue:r7(s.serializer,r._byteString)};if(r instanceof br){const a=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:XR(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ka)return function(o,l){const c=o instanceof Ka?o.toArray():o;return{mapValue:{fields:{[IH]:{stringValue:RH},[c_]:{arrayValue:{values:c.map(d=>{if(typeof d!="number")throw l.createError("VectorValues must only contain numeric values.");return GR(l.serializer,d)})}}}}}}(r,s);if(u7(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${AN(r)}`)}(t,e)}function z7(t,e){const n={};return SH(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hu(t,(r,s)=>{const a=nb(s,e.childContextForField(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function q7(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qn||t instanceof Ro||t instanceof Zi||t instanceof br||t instanceof UN||t instanceof Ka||u7(t))}function mO(t,e,n){if(!q7(n)||!jH(n)){const r=AN(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Ah(t,e,n){if((e=sn(e))instanceof eb)return e._internalPath;if(typeof e=="string")return W7(t,e);throw y_("Field path arguments must be of type string or ",t,!1,void 0,n)}const ube=new RegExp("[~\\*/\\[\\]]");function W7(t,e,n){if(e.search(ube)>=0)throw y_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new eb(...e.split("."))._internalPath}catch{throw y_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function y_(t,e,n,r,s){const a=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Ue(pe.INVALID_ARGUMENT,l+t+c)}function H7(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dbe{convertValue(e,n="none"){switch(Su(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Nu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw jt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Hu(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var r,s,a;const n=(a=(s=(r=e.fields)==null?void 0:r[c_].arrayValue)==null?void 0:s.values)==null?void 0:a.map(o=>gr(o.doubleValue));return new Ka(n)}convertGeoPoint(e){return new Ro(gr(e.latitude),gr(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=PN(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Nv(e));default:return null}}convertTimestamp(e){const n=ju(e);return new qn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=On.fromString(e);yn(c7(r),9688,{name:e});const s=new Sv(r.get(1),r.get(3)),a=new ht(r.popFirst(5));return s.isEqual(n)||Ol(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7 extends dbe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new br(this.firestore,null,n)}}function Ce(){return new fO("serverTimestamp")}const hF="@firebase/firestore",fF="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G7{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new br(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new hbe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Ah("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class hbe extends G7{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fbe(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ue(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pO{}class gO extends pO{}function je(t,e,...n){let r=[];e instanceof pO&&r.push(e),r=r.concat(n),function(a){const o=a.filter(c=>c instanceof yO).length,l=a.filter(c=>c instanceof qN).length;if(o>1||o>0&&l>0)throw new Ue(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class qN extends gO{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new qN(e,n,r)}_apply(e){const n=this._parse(e);return Y7(e._query,n),new Gu(e.firestore,e.converter,NC(e._query,n))}_parse(e){const n=tb(e.firestore);return function(a,o,l,c,u,d,h){let f;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Ue(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){pF(h,d);const v=[];for(const g of h)v.push(mF(c,a,g));f={arrayValue:{values:v}}}else f=mF(c,a,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||pF(h,d),f=cbe(l,o,h,d==="in"||d==="not-in");return Cr.create(u,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function he(t,e,n){const r=e,s=Ah("where",t);return qN._create(s,r,n)}class yO extends pO{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new yO(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ro.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let o=s;const l=a.getFlattenedFilters();for(const c of l)Y7(o,c),o=NC(o,c)}(e._query,n),new Gu(e.firestore,e.converter,NC(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class vO extends gO{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new vO(e,n)}_apply(e){const n=function(s,a,o){if(s.startAt!==null)throw new Ue(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ue(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Av(a,o)}(e._query,this._field,this._direction);return new Gu(e.firestore,e.converter,Fye(e._query,n))}}function WN(t,e="asc"){const n=e,r=Ah("orderBy",t);return vO._create(r,n)}class xO extends gO{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new xO(e,n,r)}_apply(e){return new Gu(e.firestore,e.converter,d_(e._query,this._limit,this._limitType))}}function Ts(t){return dye("limit",t),xO._create("limit",t,"F")}function mF(t,e,n){if(typeof(n=sn(n))=="string"){if(n==="")throw new Ue(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BH(e)&&n.indexOf("/")!==-1)throw new Ue(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(On.fromString(n));if(!ht.isDocumentKey(r))throw new Ue(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return C$(t,new ht(r))}if(n instanceof br)return C$(t,n._key);throw new Ue(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${AN(n)}.`)}function pF(t,e){if(!Array.isArray(t)||t.length===0)throw new Ue(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Y7(t,e){const n=function(s,a){for(const o of s)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ue(pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ue(pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function bO(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class fy{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jd extends G7{constructor(e,n,r,s,a,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ow(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ah("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ue(pe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Jd._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Jd._jsonSchemaVersion="firestore/documentSnapshot/1.0",Jd._jsonSchema={type:Pr("string",Jd._jsonSchemaVersion),bundleSource:Pr("string","DocumentSnapshot"),bundleName:Pr("string"),bundle:Pr("string")};class ow extends Jd{data(e={}){return super.data(e)}}class cm{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new fy(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ow(this._firestore,this._userDataWriter,r.key,r,new fy(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ue(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new ow(s._firestore,s._userDataWriter,l.doc.key,l.doc,new fy(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const c=new ow(s._firestore,s._userDataWriter,l.doc.key,l.doc,new fy(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:mbe(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ue(pe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=cm._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=BR.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function mbe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return jt(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cm._jsonSchemaVersion="firestore/querySnapshot/1.0",cm._jsonSchema={type:Pr("string",cm._jsonSchemaVersion),bundleSource:Pr("string","QuerySnapshot"),bundleName:Pr("string"),bundle:Pr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pbe{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=tb(e)}set(e,n,r){this._verifyNotCommitted();const s=NE(e,this._firestore),a=bO(s.converter,n,r),o=hO(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Qs.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const a=NE(e,this._firestore);let o;return o=typeof(n=sn(n))=="string"||n instanceof eb?U7(this._dataReader,"WriteBatch.update",a._key,n,r,s):B7(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(o.toMutation(a._key,Qs.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=NE(e,this._firestore);return this._mutations=this._mutations.concat(new MN(n._key,Qs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function NE(t,e){if((t=sn(t)).firestore!==e)throw new Ue(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(t){t=ga(t,br);const e=ga(t.firestore,Yu),n=BN(e);return Zxe(n,t._key).then(r=>gbe(e,t,r))}function Te(t){t=ga(t,Gu);const e=ga(t.firestore,Yu),n=BN(e),r=new K7(e);return fbe(t._query),Jxe(n,t._query).then(s=>new cm(e,r,t,s))}function xr(t,e,n){t=ga(t,br);const r=ga(t.firestore,Yu),s=bO(t.converter,e,n),a=tb(r);return rb(r,[hO(a,"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Qs.none())])}function Dl(t,e,n,...r){t=ga(t,br);const s=ga(t.firestore,Yu),a=tb(s);let o;return o=typeof(e=sn(e))=="string"||e instanceof eb?U7(a,"updateDoc",t._key,e,n,r):B7(a,"updateDoc",t._key,e),rb(s,[o.toMutation(t._key,Qs.exists(!0))])}function Ll(t){return rb(ga(t.firestore,Yu),[new MN(t._key,Qs.none())])}function es(t,e){const n=ga(t.firestore,Yu),r=Ye(t),s=bO(t.converter,e),a=tb(t.firestore);return rb(n,[hO(a,"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Qs.exists(!1))]).then(()=>r)}function rb(t,e){const n=BN(t);return ebe(n,e)}function gbe(t,e,n){const r=n.docs.get(e._key),s=new K7(t);return new Jd(t,s,e._key,r,new fy(n.hasPendingWrites,n.fromCache),e.converter)}function $l(t){return t=ga(t,Yu),BN(t),new pbe(t,e=>rb(t,e))}(function(e,n=!0){Jge(Hh),wu(new Il("firestore",(r,{instanceIdentifier:s,options:a})=>{const o=r.getProvider("app").getImmediate(),l=new Yu(new nye(r.getProvider("auth-internal")),new iye(o,r.getProvider("app-check-internal")),jye(o,s),o);return a={useFetchStreams:n,...a},l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),aa(hF,fF,e),aa(hF,fF,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ybe="type.googleapis.com/google.protobuf.Int64Value",vbe="type.googleapis.com/google.protobuf.UInt64Value";function Q7(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function v_(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>v_(e));if(typeof t=="function"||typeof t=="object")return Q7(t,e=>v_(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Gm(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case ybe:case vbe:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Gm(e)):typeof t=="function"||typeof t=="object"?Q7(t,e=>Gm(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gF={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class mi extends so{constructor(e,n,r){super(`${wO}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,mi.prototype)}}function xbe(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function x_(t,e){let n=xbe(t),r=n,s;try{const a=e&&e.error;if(a){const o=a.status;if(typeof o=="string"){if(!gF[o])return new mi("internal","internal");n=gF[o],r=o}const l=a.message;typeof l=="string"&&(r=l),s=a.details,s!==void 0&&(s=Gm(s))}}catch{}return n==="ok"?null:new mi(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bbe{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,di(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s==null||s.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="us-central1",wbe=/^data: (.*?)(?:\n|$)/;function _be(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new mi("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class jbe{constructor(e,n,r,s,a=OC,o=(...l)=>fetch(...l)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new bbe(e,n,r,s),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(a);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=OC}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Nbe(t,e,n){const r=Yo(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(_N(t.emulatorOrigin+"/backends"),jN("Functions",!0))}function Sbe(t,e,n){const r=s=>Abe(t,e,s,{});return r.stream=(s,a)=>Cbe(t,e,s,a),r}function X7(t){return t.emulatorOrigin&&Yo(t.emulatorOrigin)?"include":void 0}async function Ebe(t,e,n,r,s){n["Content-Type"]="application/json";let a;try{a=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:X7(s)})}catch{return{status:0,json:null}}let o=null;try{o=await a.json()}catch{}return{status:a.status,json:o}}async function Z7(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function Abe(t,e,n,r){const s=t._url(e);return Tbe(t,s,n,r)}async function Tbe(t,e,n,r){n=v_(n);const s={data:n},a=await Z7(t,r),o=r.timeout||7e4,l=_be(o),c=await Promise.race([Ebe(e,s,a,t.fetchImpl,t),l.promise,t.cancelAllRequests]);if(l.cancel(),!c)throw new mi("cancelled","Firebase Functions instance was deleted.");const u=x_(c.status,c.json);if(u)throw u;if(!c.json)throw new mi("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new mi("internal","Response is missing data field.");return{data:Gm(d)}}function Cbe(t,e,n,r){const s=t._url(e);return Pbe(t,s,n,r||{})}async function Pbe(t,e,n,r){var f;n=v_(n);const s={data:n},a=await Z7(t,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:a,signal:r==null?void 0:r.signal,credentials:X7(t)})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const g=new mi("cancelled","Request was cancelled.");return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}const v=x_(0,null);return{data:Promise.reject(v),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(v)}}}}}}let l,c;const u=new Promise((m,v)=>{l=m,c=v});(f=r==null?void 0:r.signal)==null||f.addEventListener("abort",()=>{const m=new mi("cancelled","Request was cancelled.");c(m)});const d=o.body.getReader(),h=Ibe(d,l,c,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const m=h.getReader();return{async next(){const{value:v,done:g}=await m.read();return{value:v,done:g}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:u}}function Ibe(t,e,n,r){const s=(o,l)=>{const c=o.match(wbe);if(!c)return;const u=c[1];try{const d=JSON.parse(u);if("result"in d){e(Gm(d.result));return}if("message"in d){l.enqueue(Gm(d.message));return}if("error"in d){const h=x_(0,d);l.error(h),n(h);return}}catch(d){if(d instanceof mi){l.error(d),n(d);return}}},a=new TextDecoder;return new ReadableStream({start(o){let l="";return c();async function c(){if(r!=null&&r.aborted){const u=new mi("cancelled","Request was cancelled");return o.error(u),n(u),Promise.resolve()}try{const{value:u,done:d}=await t.read();if(d){l.trim()&&s(l.trim(),o),o.close();return}if(r!=null&&r.aborted){const f=new mi("cancelled","Request was cancelled");o.error(f),n(f),await t.cancel();return}l+=a.decode(u,{stream:!0});const h=l.split(`
`);l=h.pop()||"";for(const f of h)f.trim()&&s(f.trim(),o);return c()}catch(u){const d=u instanceof mi?u:x_(0,null);o.error(d),n(d)}}},cancel(){return t.cancel()}})}const yF="@firebase/functions",vF="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kbe="auth-internal",Rbe="app-check-internal",Obe="messaging-internal";function Mbe(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),a=n.getProvider(kbe),o=n.getProvider(Obe),l=n.getProvider(Rbe);return new jbe(s,a,o,l,r)};wu(new Il(wO,e,"PUBLIC").setMultipleInstances(!0)),aa(yF,vF,t),aa(yF,vF,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dbe(t=qx(),e=OC){const r=zx(sn(t),wO).getImmediate({identifier:e}),s=SR("functions");return s&&Lbe(r,...s),r}function Lbe(t,e,n){Nbe(sn(t),e,n)}function J7(t,e,n){return Sbe(sn(t),e)}Mbe();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eK="firebasestorage.googleapis.com",tK="storageBucket",$be=2*60*1e3,Fbe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends so{constructor(e,n,r=0){super(SE(e),`Firebase Storage: ${n} (${SE(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return SE(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var mr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(mr||(mr={}));function SE(t){return"storage/"+t}function _O(){const t="An unknown error occurred, please check the error payload for server response.";return new pr(mr.UNKNOWN,t)}function Vbe(t){return new pr(mr.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Bbe(t){return new pr(mr.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Ube(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new pr(mr.UNAUTHENTICATED,t)}function zbe(){return new pr(mr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function qbe(t){return new pr(mr.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Wbe(){return new pr(mr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Hbe(){return new pr(mr.CANCELED,"User canceled the upload/download.")}function Kbe(t){return new pr(mr.INVALID_URL,"Invalid URL '"+t+"'.")}function Gbe(t){return new pr(mr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Ybe(){return new pr(mr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+tK+"' property when initializing the app?")}function Qbe(){return new pr(mr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Xbe(){return new pr(mr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Zbe(t){return new pr(mr.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function MC(t){return new pr(mr.INVALID_ARGUMENT,t)}function nK(){return new pr(mr.APP_DELETED,"The Firebase app was deleted.")}function Jbe(t){return new pr(mr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Dy(t,e){return new pr(mr.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function $g(t){throw new pr(mr.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Oi.makeFromUrl(e,n)}catch{return new Oi(e,"")}if(r.path==="")return r;throw Gbe(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(T){T.path.charAt(T.path.length-1)==="/"&&(T.path_=T.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(T){T.path_=decodeURIComponent(T.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${s}/o${f}`,"i"),v={bucket:1,path:3},g=n===eK?"(?:storage.googleapis.com|storage.cloud.google.com)":n,y="([^?#]*)",b=new RegExp(`^https?://${g}/${s}/${y}`,"i"),S=[{regex:l,indices:c,postModify:a},{regex:m,indices:v,postModify:u},{regex:b,indices:{bucket:1,path:2},postModify:u}];for(let T=0;T<S.length;T++){const _=S[T],C=_.regex.exec(e);if(C){const E=C[_.indices.bucket];let p=C[_.indices.path];p||(p=""),r=new Oi(E,p),_.postModify(r);break}}if(r==null)throw Kbe(e);return r}}class e0e{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0e(t,e,n){let r=1,s=null,a=null,o=!1,l=0;function c(){return l===2}let u=!1;function d(...y){u||(u=!0,e.apply(null,y))}function h(y){s=setTimeout(()=>{s=null,t(m,c())},y)}function f(){a&&clearTimeout(a)}function m(y,...b){if(u){f();return}if(y){f(),d.call(null,y,...b);return}if(c()||o){f(),d.call(null,y,...b);return}r<64&&(r*=2);let S;l===1?(l=2,S=0):S=(r+Math.random())*1e3,h(S)}let v=!1;function g(y){v||(v=!0,f(),!u&&(s!==null?(y||(l=2),clearTimeout(s),h(0)):y||(l=1)))}return h(0),a=setTimeout(()=>{o=!0,g(!0)},n),g}function n0e(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0e(t){return t!==void 0}function s0e(t){return typeof t=="object"&&!Array.isArray(t)}function jO(t){return typeof t=="string"||t instanceof String}function xF(t){return NO()&&t instanceof Blob}function NO(){return typeof Blob<"u"}function bF(t,e,n,r){if(r<e)throw MC(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw MC(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function rK(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var eh;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(eh||(eh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0e(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0e{constructor(e,n,r,s,a,o,l,c,u,d,h,f=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,g)=>{this.resolve_=v,this.reject_=g,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new d0(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===eh.NO_ERROR,c=a.getStatus();if(!l||i0e(c,this.additionalRetryCodes_)&&this.retry){const d=a.getErrorCode()===eh.ABORT;r(!1,new d0(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new d0(u,a))})},n=(r,s)=>{const a=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());r0e(c)?a(c):a()}catch(c){o(c)}else if(l!==null){const c=_O();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?nK():Hbe();o(c)}else{const c=Wbe();o(c)}};this.canceled_?n(!1,new d0(!1,null,!0)):this.backoffId_=t0e(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&n0e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class d0{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function o0e(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function l0e(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function c0e(t,e){e&&(t["X-Firebase-GMPID"]=e)}function u0e(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function d0e(t,e,n,r,s,a,o=!0,l=!1){const c=rK(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return c0e(d,e),o0e(d,n),l0e(d,a),u0e(d,r),new a0e(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0e(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function f0e(...t){const e=h0e();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(NO())return new Blob(t);throw new pr(mr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function m0e(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0e(t){if(typeof atob>"u")throw Zbe("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class EE{constructor(e,n){this.data=e,this.contentType=n||null}}function g0e(t,e){switch(t){case _o.RAW:return new EE(sK(e));case _o.BASE64:case _o.BASE64URL:return new EE(iK(t,e));case _o.DATA_URL:return new EE(v0e(e),x0e(e))}throw _O()}function sK(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,o=t.charCodeAt(++n);r=65536|(a&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function y0e(t){let e;try{e=decodeURIComponent(t)}catch{throw Dy(_o.DATA_URL,"Malformed data URL.")}return sK(e)}function iK(t,e){switch(t){case _o.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw Dy(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case _o.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw Dy(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=p0e(e)}catch(s){throw s.message.includes("polyfill")?s:Dy(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class aK{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Dy(_o.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=b0e(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function v0e(t){const e=new aK(t);return e.base64?iK(_o.BASE64,e.rest):y0e(e.rest)}function x0e(t){return new aK(t).contentType}function b0e(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n){let r=0,s="";xF(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(xF(this.data_)){const r=this.data_,s=m0e(r,e,n);return s===null?null:new kc(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new kc(r,!0)}}static getBlob(...e){if(NO()){const n=e.map(r=>r instanceof kc?r.data_:r);return new kc(f0e.apply(null,n))}else{const n=e.map(o=>jO(o)?g0e(_o.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let a=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[a++]=o[l]}),new kc(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oK(t){let e;try{e=JSON.parse(t)}catch{return null}return s0e(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0e(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function _0e(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function lK(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0e(t,e){return e}class $s{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||j0e}}let h0=null;function N0e(t){return!jO(t)||t.length<2?t:lK(t)}function cK(){if(h0)return h0;const t=[];t.push(new $s("bucket")),t.push(new $s("generation")),t.push(new $s("metageneration")),t.push(new $s("name","fullPath",!0));function e(a,o){return N0e(o)}const n=new $s("name");n.xform=e,t.push(n);function r(a,o){return o!==void 0?Number(o):o}const s=new $s("size");return s.xform=r,t.push(s),t.push(new $s("timeCreated")),t.push(new $s("updated")),t.push(new $s("md5Hash",null,!0)),t.push(new $s("cacheControl",null,!0)),t.push(new $s("contentDisposition",null,!0)),t.push(new $s("contentEncoding",null,!0)),t.push(new $s("contentLanguage",null,!0)),t.push(new $s("contentType",null,!0)),t.push(new $s("metadata","customMetadata",!0)),h0=t,h0}function S0e(t,e){function n(){const r=t.bucket,s=t.fullPath,a=new Oi(r,s);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function E0e(t,e,n){const r={};r.type="file";const s=n.length;for(let a=0;a<s;a++){const o=n[a];r[o.local]=o.xform(r,e[o.server])}return S0e(r,t),r}function uK(t,e,n){const r=oK(e);return r===null?null:E0e(t,r,n)}function A0e(t,e,n,r){const s=oK(e);if(s===null||!jO(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(u=>{const d=t.bucket,h=t.fullPath,f="/b/"+o(d)+"/o/"+o(h),m=SO(f,n,r),v=rK({alt:"media",token:u});return m+v})[0]}function T0e(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const a=e[s];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class dK{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hK(t){if(!t)throw _O()}function C0e(t,e){function n(r,s){const a=uK(t,s,e);return hK(a!==null),a}return n}function P0e(t,e){function n(r,s){const a=uK(t,s,e);return hK(a!==null),A0e(a,s,t.host,t._protocol)}return n}function fK(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=zbe():s=Ube():n.getStatus()===402?s=Bbe(t.bucket):n.getStatus()===403?s=qbe(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function I0e(t){const e=fK(t);function n(r,s){let a=e(r,s);return r.getStatus()===404&&(a=Vbe(t.path)),a.serverResponse=s.serverResponse,a}return n}function k0e(t,e,n){const r=e.fullServerUrl(),s=SO(r,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,l=new dK(s,a,P0e(t,n),o);return l.errorHandler=I0e(e),l}function R0e(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function O0e(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=R0e(null,e)),r}function M0e(t,e,n,r,s){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let S="";for(let T=0;T<2;T++)S=S+Math.random().toString().slice(2);return S}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=O0e(e,r,s),d=T0e(u,n),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,f=`\r
--`+c+"--",m=kc.getBlob(h,r,f);if(m===null)throw Qbe();const v={name:u.fullPath},g=SO(a,t.host,t._protocol),y="POST",b=t.maxUploadRetryTime,x=new dK(g,y,C0e(t,n),b);return x.urlParams=v,x.headers=o,x.body=m.uploadData(),x.errorHandler=fK(e),x}class D0e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=eh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=eh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=eh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,a){if(this.sent_)throw $g("cannot .send() more than once");if(Yo(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const o in a)a.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,a[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw $g("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw $g("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw $g("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw $g("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class L0e extends D0e{initXhr(){this.xhr_.responseType="text"}}function mK(){return new L0e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n){this._service=e,n instanceof Oi?this._location=n:this._location=Oi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Th(e,n)}get root(){const e=new Oi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lK(this._location.path)}get storage(){return this._service}get parent(){const e=w0e(this._location.path);if(e===null)return null;const n=new Oi(this._location.bucket,e);return new Th(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Jbe(e)}}function $0e(t,e,n){t._throwIfRoot("uploadBytes");const r=M0e(t.storage,t._location,cK(),new kc(e,!0),n);return t.storage.makeRequestWithTokens(r,mK).then(s=>({metadata:s,ref:t}))}function F0e(t){t._throwIfRoot("getDownloadURL");const e=k0e(t.storage,t._location,cK());return t.storage.makeRequestWithTokens(e,mK).then(n=>{if(n===null)throw Xbe();return n})}function V0e(t,e){const n=_0e(t._location.path,e),r=new Oi(t._location.bucket,n);return new Th(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0e(t){return/^[A-Za-z]+:\/\//.test(t)}function U0e(t,e){return new Th(t,e)}function pK(t,e){if(t instanceof EO){const n=t;if(n._bucket==null)throw Ybe();const r=new Th(n,n._bucket);return e!=null?pK(r,e):r}else return e!==void 0?V0e(t,e):t}function z0e(t,e){if(e&&B0e(e)){if(t instanceof EO)return U0e(t,e);throw MC("To use ref(service, url), the first argument must be a Storage instance.")}else return pK(t,e)}function wF(t,e){const n=e==null?void 0:e[tK];return n==null?null:Oi.makeFromBucketSpec(n,t)}function q0e(t,e,n,r={}){t.host=`${e}:${n}`;const s=Yo(e);s&&(_N(`https://${t.host}/b`),jN("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:AW(a,t.app.options.projectId))}class EO{constructor(e,n,r,s,a,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=o,this._bucket=null,this._host=eK,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=$be,this._maxUploadRetryTime=Fbe,this._requests=new Set,s!=null?this._bucket=Oi.makeFromBucketSpec(s,this._host):this._bucket=wF(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Oi.makeFromBucketSpec(this._url,e):this._bucket=wF(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){bF("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){bF("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(di(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Th(this,e)}_makeRequest(e,n,r,s,a=!0){if(this._deleted)return new e0e(nK());{const o=d0e(e,this._appId,r,s,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const _F="@firebase/storage",jF="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gK="storage";function W0e(t,e,n){return t=sn(t),$0e(t,e,n)}function H0e(t){return t=sn(t),F0e(t)}function K0e(t,e){return t=sn(t),z0e(t,e)}function G0e(t=qx(),e){t=sn(t);const r=zx(t,gK).getImmediate({identifier:e}),s=SR("storage");return s&&Y0e(r,...s),r}function Y0e(t,e,n,r={}){q0e(t,e,n,r)}function Q0e(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new EO(n,r,s,e,Hh)}function X0e(){wu(new Il(gK,Q0e,"PUBLIC").setMultipleInstances(!0)),aa(_F,jF,""),aa(_F,jF,"esm2020")}X0e();const lf=t=>t==null?void 0:t.replace(/^"|"$/g,"").replace(/^'|'$/g,""),yK={apiKey:lf('"AIzaSyBDWUqW91mg2wvCJ6lAJ1wrBb5az6elfUU"')??"FIREBASE_API_KEY_PLACEHOLDER",authDomain:lf('"zedbooks-53601.firebaseapp.com"')??"FIREBASE_AUTH_DOMAIN_PLACEHOLDER",projectId:lf('"zedbooks-53601"')??"FIREBASE_PROJECT_ID_PLACEHOLDER",storageBucket:lf('"zedbooks-53601.firebasestorage.app"')??"FIREBASE_STORAGE_BUCKET_PLACEHOLDER",messagingSenderId:lf('"938148277875"')??"FIREBASE_MESSAGING_SENDER_ID_PLACEHOLDER",appId:lf('"1:938148277875:web:c98c15ac02f3625d20c406"')??"FIREBASE_APP_ID_PLACEHOLDER"},Z0e="us-central1",J0e=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"],Oo=J0e.every(t=>{const e=yK[t];return!!e&&!e.includes("PLACEHOLDER")}),kn=()=>{if(!Oo)throw new Error("Firebase is not configured. Set VITE_FIREBASE_* environment variables before running the migrated backend.")},HN=hme().length?qx():PW(yK),b_=Xge(HN),re=sbe(HN),vK=Dbe(HN,Z0e),ewe=G0e(HN),Rt=async(t,e)=>(kn(),(await J7(vK,t)(e)).data),cf=()=>b_,Ps={async signIn(t,e){return kn(),kpe(cf(),t,e)},async signUp(t){kn();const e=await Ipe(cf(),t.email,t.password);return t.fullName&&await Ope(e.user,{displayName:t.fullName}),await l$(e.user),await Rt("bootstrapUserAccount",{...t,uid:e.user.uid}),e},async resendVerificationEmail(){kn();const t=this.getCurrentUser();if(!t)throw new Error("No authenticated user found.");await l$(t)},async sendResetPasswordEmail(t){kn(),await Epe(cf(),t)},async updateUserPassword(t){kn();const e=this.getCurrentUser();if(!e)throw new Error("No authenticated user found.");await Mpe(e,t)},async logout(){kn(),await Vpe(cf())},async getIdToken(t=!1){const e=this.getCurrentUser();return e?e.getIdToken(t):null},getCurrentUser(){return Oo?cf().currentUser:null},onAuthStateChanged(t){return Oo?{unsubscribe:Fpe(cf(),t)}:(t(null),{unsubscribe:()=>{}})},async sendInvitation(t){kn(),await Rt("createInvitation",t)},async acceptInvitation(t){return kn(),Rt("acceptInvitation",{token:t})},async ensureCurrentMembership(){return kn(),Rt("ensureCurrentMembership",{})}},xK=N.createContext(void 0),AE=t=>({id:t.uid,uid:t.uid,email:t.email,displayName:t.displayName,phoneNumber:t.phoneNumber,emailVerified:t.emailVerified}),TE=async t=>({userId:t.uid,email:t.email,emailVerified:t.emailVerified,idToken:await t.getIdToken()});function twe({children:t}){const[e,n]=N.useState(null),[r,s]=N.useState(null),[a,o]=N.useState(!0),l=N.useCallback(()=>{n(null),s(null)},[]),c=N.useCallback(async()=>{if(!Oo){l();return}try{const h=Ps.getCurrentUser();if(!h){l();return}await h.reload();const f=Ps.getCurrentUser();if(!f){l();return}s(AE(f)),n(await TE(f))}catch(h){l(),console.error("Failed to refresh Firebase session:",h)}},[l]),u=N.useCallback(async()=>{try{Oo&&await Ps.logout()}catch(h){console.error("Firebase sign out failed:",h)}finally{l(),Z.success("Signed out successfully")}},[l]);N.useEffect(()=>{let h=!0;if(!Oo){o(!1);return}const f=Ps.getCurrentUser();f?(s(AE(f)),TE(f).then(v=>{h&&n(v)}).finally(()=>{h&&o(!1)})):o(!1);const m=Ps.onAuthStateChanged(async v=>{if(h){if(!v){l(),o(!1);return}s(AE(v)),n(await TE(v)),o(!1)}});return()=>{h=!1,m.unsubscribe()}},[l]);const d={session:e,user:r,isLoading:a,isAuthenticated:!!(e&&r),signOut:u,refreshSession:c};return i.jsx(xK.Provider,{value:d,children:t})}function ot(){const t=N.useContext(xK);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const AO=qh("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),W=N.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},a)=>{const o=r?zh:"button";return i.jsx(o,{className:me(AO({variant:e,size:n,className:t})),ref:a,...s})});W.displayName="Button";class nwe extends N.Component{constructor(){super(...arguments);$D(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Uncaught error:",n,r)}render(){return this.state.hasError?i.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-background text-foreground",children:i.jsxs("div",{className:"max-w-md w-full text-center space-y-4",children:[i.jsx("div",{className:"flex justify-center",children:i.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:i.jsx(eo,{className:"h-8 w-8 text-red-600"})})}),i.jsx("h1",{className:"text-2xl font-bold",children:"Something went wrong"}),i.jsx("p",{className:"text-muted-foreground",children:"We encountered an unexpected error. Please try refreshing the page."}),this.state.error&&i.jsx("pre",{className:"p-4 bg-muted rounded-lg text-xs text-left overflow-auto max-h-40",children:this.state.error.message}),i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx(W,{onClick:()=>window.location.reload(),children:"Refresh Page"}),i.jsx(W,{variant:"outline",onClick:()=>window.location.href="/",children:"Go Home"})]})]})}):this.props.children}}function um({message:t="Loading...",className:e,size:n="md",fullScreen:r=!1}){const s={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"},a=i.jsxs("div",{className:me("flex flex-col items-center justify-center gap-3",e),children:[i.jsx(En,{className:me("animate-spin text-primary",s[n])}),t&&i.jsx("p",{className:"text-sm text-muted-foreground animate-pulse",children:t})]});return r?i.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-background/80 backdrop-blur-sm z-50",children:a}):a}var rwe=N.createContext(void 0);function sb(t){const e=N.useContext(rwe);return t||e||"ltr"}var CE=0;function TO(){N.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??NF()),document.body.insertAdjacentElement("beforeend",t[1]??NF()),CE++,()=>{CE===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),CE--}},[])}function NF(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var PE="focusScope.autoFocusOnMount",IE="focusScope.autoFocusOnUnmount",SF={bubbles:!1,cancelable:!0},swe="FocusScope",KN=N.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=t,[l,c]=N.useState(null),u=dr(s),d=dr(a),h=N.useRef(null),f=Dt(e,g=>c(g)),m=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(r){let g=function(S){if(m.paused||!l)return;const T=S.target;l.contains(T)?h.current=T:gc(h.current,{select:!0})},y=function(S){if(m.paused||!l)return;const T=S.relatedTarget;T!==null&&(l.contains(T)||gc(h.current,{select:!0}))},b=function(S){if(document.activeElement===document.body)for(const _ of S)_.removedNodes.length>0&&gc(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const x=new MutationObserver(b);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),x.disconnect()}}},[r,l,m.paused]),N.useEffect(()=>{if(l){AF.add(m);const g=document.activeElement;if(!l.contains(g)){const b=new CustomEvent(PE,SF);l.addEventListener(PE,u),l.dispatchEvent(b),b.defaultPrevented||(iwe(uwe(bK(l)),{select:!0}),document.activeElement===g&&gc(l))}return()=>{l.removeEventListener(PE,u),setTimeout(()=>{const b=new CustomEvent(IE,SF);l.addEventListener(IE,d),l.dispatchEvent(b),b.defaultPrevented||gc(g??document.body,{select:!0}),l.removeEventListener(IE,d),AF.remove(m)},0)}}},[l,u,d,m]);const v=N.useCallback(g=>{if(!n&&!r||m.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,b=document.activeElement;if(y&&b){const x=g.currentTarget,[S,T]=awe(x);S&&T?!g.shiftKey&&b===T?(g.preventDefault(),n&&gc(S,{select:!0})):g.shiftKey&&b===S&&(g.preventDefault(),n&&gc(T,{select:!0})):b===x&&g.preventDefault()}},[n,r,m.paused]);return i.jsx(Je.div,{tabIndex:-1,...o,ref:f,onKeyDown:v})});KN.displayName=swe;function iwe(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(gc(r,{select:e}),document.activeElement!==n)return}function awe(t){const e=bK(t),n=EF(e,t),r=EF(e.reverse(),t);return[n,r]}function bK(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function EF(t,e){for(const n of t)if(!owe(n,{upTo:e}))return n}function owe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function lwe(t){return t instanceof HTMLInputElement&&"select"in t}function gc(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&lwe(t)&&e&&t.select()}}var AF=cwe();function cwe(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=TF(t,e),t.unshift(e)},remove(e){var n;t=TF(t,e),(n=t[0])==null||n.resume()}}}function TF(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function uwe(t){return t.filter(e=>e.tagName!=="A")}var kE="rovingFocusGroup.onEntryFocus",dwe={bubbles:!1,cancelable:!0},ib="RovingFocusGroup",[DC,wK,hwe]=dN(ib),[fwe,GN]=ps(ib,[hwe]),[mwe,pwe]=fwe(ib),_K=N.forwardRef((t,e)=>i.jsx(DC.Provider,{scope:t.__scopeRovingFocusGroup,children:i.jsx(DC.Slot,{scope:t.__scopeRovingFocusGroup,children:i.jsx(gwe,{...t,ref:e})})}));_K.displayName=ib;var gwe=N.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,f=N.useRef(null),m=Dt(e,f),v=sb(a),[g,y]=Za({prop:o,defaultProp:l??null,onChange:c,caller:ib}),[b,x]=N.useState(!1),S=dr(u),T=wK(n),_=N.useRef(!1),[C,E]=N.useState(0);return N.useEffect(()=>{const p=f.current;if(p)return p.addEventListener(kE,S),()=>p.removeEventListener(kE,S)},[S]),i.jsx(mwe,{scope:n,orientation:r,dir:v,loop:s,currentTabStopId:g,onItemFocus:N.useCallback(p=>y(p),[y]),onItemShiftTab:N.useCallback(()=>x(!0),[]),onFocusableItemAdd:N.useCallback(()=>E(p=>p+1),[]),onFocusableItemRemove:N.useCallback(()=>E(p=>p-1),[]),children:i.jsx(Je.div,{tabIndex:b||C===0?-1:0,"data-orientation":r,...h,ref:m,style:{outline:"none",...t.style},onMouseDown:ke(t.onMouseDown,()=>{_.current=!0}),onFocus:ke(t.onFocus,p=>{const w=!_.current;if(p.target===p.currentTarget&&w&&!b){const A=new CustomEvent(kE,dwe);if(p.currentTarget.dispatchEvent(A),!A.defaultPrevented){const P=T().filter(z=>z.focusable),I=P.find(z=>z.active),k=P.find(z=>z.id===g),U=[I,k,...P].filter(Boolean).map(z=>z.ref.current);SK(U,d)}}_.current=!1}),onBlur:ke(t.onBlur,()=>x(!1))})})}),jK="RovingFocusGroupItem",NK=N.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:o,...l}=t,c=ia(),u=a||c,d=pwe(jK,n),h=d.currentTabStopId===u,f=wK(n),{onFocusableItemAdd:m,onFocusableItemRemove:v,currentTabStopId:g}=d;return N.useEffect(()=>{if(r)return m(),()=>v()},[r,m,v]),i.jsx(DC.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:i.jsx(Je.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:e,onMouseDown:ke(t.onMouseDown,y=>{r?d.onItemFocus(u):y.preventDefault()}),onFocus:ke(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:ke(t.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){d.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const b=xwe(y,d.orientation,d.dir);if(b!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let S=f().filter(T=>T.focusable).map(T=>T.ref.current);if(b==="last")S.reverse();else if(b==="prev"||b==="next"){b==="prev"&&S.reverse();const T=S.indexOf(y.currentTarget);S=d.loop?bwe(S,T+1):S.slice(T+1)}setTimeout(()=>SK(S))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:g!=null}):o})})});NK.displayName=jK;var ywe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function vwe(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function xwe(t,e,n){const r=vwe(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return ywe[r]}function SK(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function bwe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var EK=_K,AK=NK,wwe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},uf=new WeakMap,f0=new WeakMap,m0={},RE=0,TK=function(t){return t&&(t.host||TK(t.parentNode))},_we=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=TK(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},jwe=function(t,e,n,r){var s=_we(e,Array.isArray(t)?t:[t]);m0[n]||(m0[n]=new WeakMap);var a=m0[n],o=[],l=new Set,c=new Set(s),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(l.has(f))d(f);else try{var m=f.getAttribute(r),v=m!==null&&m!=="false",g=(uf.get(f)||0)+1,y=(a.get(f)||0)+1;uf.set(f,g),a.set(f,y),o.push(f),g===1&&v&&f0.set(f,!0),y===1&&f.setAttribute(n,"true"),v||f.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",f,b)}})};return d(e),l.clear(),RE++,function(){o.forEach(function(h){var f=uf.get(h)-1,m=a.get(h)-1;uf.set(h,f),a.set(h,m),f||(f0.has(h)||h.removeAttribute(r),f0.delete(h)),m||h.removeAttribute(n)}),RE--,RE||(uf=new WeakMap,uf=new WeakMap,f0=new WeakMap,m0={})}},CO=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=wwe(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),jwe(r,s,n,"aria-hidden")):function(){return null}},bo=function(){return bo=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},bo.apply(this,arguments)};function CK(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Nwe(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}var lw="right-scroll-bar-position",cw="width-before-scroll-bar",Swe="with-scroll-bars-hidden",Ewe="--removed-body-scroll-bar-size";function OE(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Awe(t,e){var n=N.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var Twe=typeof window<"u"?N.useLayoutEffect:N.useEffect,CF=new WeakMap;function Cwe(t,e){var n=Awe(null,function(r){return t.forEach(function(s){return OE(s,r)})});return Twe(function(){var r=CF.get(n);if(r){var s=new Set(r),a=new Set(t),o=n.current;s.forEach(function(l){a.has(l)||OE(l,null)}),a.forEach(function(l){s.has(l)||OE(l,o)})}CF.set(n,t)},[t]),n}function Pwe(t){return t}function Iwe(t,e){e===void 0&&(e=Pwe);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var o=e(a,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var c=function(){var d=o;o=[],d.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return s}function kwe(t){t===void 0&&(t={});var e=Iwe(null);return e.options=bo({async:!0,ssr:!1},t),e}var PK=function(t){var e=t.sideCar,n=CK(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return N.createElement(r,bo({},n))};PK.isSideCarExport=!0;function Rwe(t,e){return t.useMedium(e),PK}var IK=kwe(),ME=function(){},YN=N.forwardRef(function(t,e){var n=N.useRef(null),r=N.useState({onScrollCapture:ME,onWheelCapture:ME,onTouchMoveCapture:ME}),s=r[0],a=r[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,m=t.noRelative,v=t.noIsolation,g=t.inert,y=t.allowPinchZoom,b=t.as,x=b===void 0?"div":b,S=t.gapMode,T=CK(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=f,C=Cwe([n,e]),E=bo(bo({},T),s);return N.createElement(N.Fragment,null,d&&N.createElement(_,{sideCar:IK,removeScrollBar:u,shards:h,noRelative:m,noIsolation:v,inert:g,setCallbacks:a,allowPinchZoom:!!y,lockRef:n,gapMode:S}),o?N.cloneElement(N.Children.only(l),bo(bo({},E),{ref:C})):N.createElement(x,bo({},E,{className:c,ref:C}),l))});YN.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};YN.classNames={fullWidth:cw,zeroRight:lw};var Owe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Mwe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Owe();return e&&t.setAttribute("nonce",e),t}function Dwe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Lwe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var $we=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Mwe())&&(Dwe(e,n),Lwe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Fwe=function(){var t=$we();return function(e,n){N.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},kK=function(){var t=Fwe(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},Vwe={left:0,top:0,right:0,gap:0},DE=function(t){return parseInt(t||"",10)||0},Bwe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[DE(n),DE(r),DE(s)]},Uwe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Vwe;var e=Bwe(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},zwe=kK(),dm="data-scroll-locked",qwe=function(t,e,n,r){var s=t.left,a=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Swe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(dm,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(lw,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(cw,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(lw," .").concat(lw,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(cw," .").concat(cw,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(dm,`] {
    `).concat(Ewe,": ").concat(l,`px;
  }
`)},PF=function(){var t=parseInt(document.body.getAttribute(dm)||"0",10);return isFinite(t)?t:0},Wwe=function(){N.useEffect(function(){return document.body.setAttribute(dm,(PF()+1).toString()),function(){var t=PF()-1;t<=0?document.body.removeAttribute(dm):document.body.setAttribute(dm,t.toString())}},[])},Hwe=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;Wwe();var a=N.useMemo(function(){return Uwe(s)},[s]);return N.createElement(zwe,{styles:qwe(a,!e,s,n?"":"!important")})},LC=!1;if(typeof window<"u")try{var p0=Object.defineProperty({},"passive",{get:function(){return LC=!0,!0}});window.addEventListener("test",p0,p0),window.removeEventListener("test",p0,p0)}catch{LC=!1}var df=LC?{passive:!1}:!1,Kwe=function(t){return t.tagName==="TEXTAREA"},RK=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Kwe(t)&&n[e]==="visible")},Gwe=function(t){return RK(t,"overflowY")},Ywe=function(t){return RK(t,"overflowX")},IF=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=OK(t,r);if(s){var a=MK(t,r),o=a[1],l=a[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Qwe=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Xwe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},OK=function(t,e){return t==="v"?Gwe(e):Ywe(e)},MK=function(t,e){return t==="v"?Qwe(e):Xwe(e)},Zwe=function(t,e){return t==="h"&&e==="rtl"?-1:1},Jwe=function(t,e,n,r,s){var a=Zwe(t,window.getComputedStyle(e).direction),o=a*r,l=n.target,c=e.contains(l),u=!1,d=o>0,h=0,f=0;do{if(!l)break;var m=MK(t,l),v=m[0],g=m[1],y=m[2],b=g-y-a*v;(v||b)&&OK(t,l)&&(h+=b,f+=v);var x=l.parentNode;l=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(f)<1||!s))&&(u=!0),u},g0=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},kF=function(t){return[t.deltaX,t.deltaY]},RF=function(t){return t&&"current"in t?t.current:t},e_e=function(t,e){return t[0]===e[0]&&t[1]===e[1]},t_e=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},n_e=0,hf=[];function r_e(t){var e=N.useRef([]),n=N.useRef([0,0]),r=N.useRef(),s=N.useState(n_e++)[0],a=N.useState(kK)[0],o=N.useRef(t);N.useEffect(function(){o.current=t},[t]),N.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var g=Nwe([t.lockRef.current],(t.shards||[]).map(RF),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=N.useCallback(function(g,y){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var b=g0(g),x=n.current,S="deltaX"in g?g.deltaX:x[0]-b[0],T="deltaY"in g?g.deltaY:x[1]-b[1],_,C=g.target,E=Math.abs(S)>Math.abs(T)?"h":"v";if("touches"in g&&E==="h"&&C.type==="range")return!1;var p=IF(E,C);if(!p)return!0;if(p?_=E:(_=E==="v"?"h":"v",p=IF(E,C)),!p)return!1;if(!r.current&&"changedTouches"in g&&(S||T)&&(r.current=_),!_)return!0;var w=r.current||_;return Jwe(w,y,g,w==="h"?S:T,!0)},[]),c=N.useCallback(function(g){var y=g;if(!(!hf.length||hf[hf.length-1]!==a)){var b="deltaY"in y?kF(y):g0(y),x=e.current.filter(function(_){return _.name===y.type&&(_.target===y.target||y.target===_.shadowParent)&&e_e(_.delta,b)})[0];if(x&&x.should){y.cancelable&&y.preventDefault();return}if(!x){var S=(o.current.shards||[]).map(RF).filter(Boolean).filter(function(_){return _.contains(y.target)}),T=S.length>0?l(y,S[0]):!o.current.noIsolation;T&&y.cancelable&&y.preventDefault()}}},[]),u=N.useCallback(function(g,y,b,x){var S={name:g,delta:y,target:b,should:x,shadowParent:s_e(b)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(T){return T!==S})},1)},[]),d=N.useCallback(function(g){n.current=g0(g),r.current=void 0},[]),h=N.useCallback(function(g){u(g.type,kF(g),g.target,l(g,t.lockRef.current))},[]),f=N.useCallback(function(g){u(g.type,g0(g),g.target,l(g,t.lockRef.current))},[]);N.useEffect(function(){return hf.push(a),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,df),document.addEventListener("touchmove",c,df),document.addEventListener("touchstart",d,df),function(){hf=hf.filter(function(g){return g!==a}),document.removeEventListener("wheel",c,df),document.removeEventListener("touchmove",c,df),document.removeEventListener("touchstart",d,df)}},[]);var m=t.removeScrollBar,v=t.inert;return N.createElement(N.Fragment,null,v?N.createElement(a,{styles:t_e(s)}):null,m?N.createElement(Hwe,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function s_e(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const i_e=Rwe(IK,r_e);var QN=N.forwardRef(function(t,e){return N.createElement(YN,bo({},t,{ref:e,sideCar:i_e}))});QN.classNames=YN.classNames;var $C=["Enter"," "],a_e=["ArrowDown","PageUp","Home"],DK=["ArrowUp","PageDown","End"],o_e=[...a_e,...DK],l_e={ltr:[...$C,"ArrowRight"],rtl:[...$C,"ArrowLeft"]},c_e={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ab="Menu",[Iv,u_e,d_e]=dN(ab),[Yh,LK]=ps(ab,[d_e,Fp,GN]),XN=Fp(),$K=GN(),[h_e,Qh]=Yh(ab),[f_e,ob]=Yh(ab),FK=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:a,modal:o=!0}=t,l=XN(e),[c,u]=N.useState(null),d=N.useRef(!1),h=dr(a),f=sb(s);return N.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),i.jsx(dR,{...l,children:i.jsx(h_e,{scope:e,open:n,onOpenChange:h,content:c,onContentChange:u,children:i.jsx(f_e,{scope:e,onClose:N.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:f,modal:o,children:r})})})};FK.displayName=ab;var m_e="MenuAnchor",PO=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=XN(n);return i.jsx(hR,{...s,...r,ref:e})});PO.displayName=m_e;var IO="MenuPortal",[p_e,VK]=Yh(IO,{forceMount:void 0}),BK=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,a=Qh(IO,e);return i.jsx(p_e,{scope:e,forceMount:n,children:i.jsx(gs,{present:n||a.open,children:i.jsx(Mx,{asChild:!0,container:s,children:r})})})};BK.displayName=IO;var oa="MenuContent",[g_e,kO]=Yh(oa),UK=N.forwardRef((t,e)=>{const n=VK(oa,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,a=Qh(oa,t.__scopeMenu),o=ob(oa,t.__scopeMenu);return i.jsx(Iv.Provider,{scope:t.__scopeMenu,children:i.jsx(gs,{present:r||a.open,children:i.jsx(Iv.Slot,{scope:t.__scopeMenu,children:o.modal?i.jsx(y_e,{...s,ref:e}):i.jsx(v_e,{...s,ref:e})})})})}),y_e=N.forwardRef((t,e)=>{const n=Qh(oa,t.__scopeMenu),r=N.useRef(null),s=Dt(e,r);return N.useEffect(()=>{const a=r.current;if(a)return CO(a)},[]),i.jsx(RO,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ke(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),v_e=N.forwardRef((t,e)=>{const n=Qh(oa,t.__scopeMenu);return i.jsx(RO,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),x_e=hh("MenuContent.ScrollLock"),RO=N.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,disableOutsideScroll:v,...g}=t,y=Qh(oa,n),b=ob(oa,n),x=XN(n),S=$K(n),T=u_e(n),[_,C]=N.useState(null),E=N.useRef(null),p=Dt(e,E,y.onContentChange),w=N.useRef(0),A=N.useRef(""),P=N.useRef(0),I=N.useRef(null),k=N.useRef("right"),L=N.useRef(0),U=v?QN:N.Fragment,z=v?{as:x_e,allowPinchZoom:!0}:void 0,O=D=>{var Ne,ft;const K=A.current+D,ie=T().filter(be=>!be.disabled),ae=document.activeElement,_e=(Ne=ie.find(be=>be.ref.current===ae))==null?void 0:Ne.textValue,Le=ie.map(be=>be.textValue),ct=I_e(Le,K,_e),Nt=(ft=ie.find(be=>be.textValue===ct))==null?void 0:ft.ref.current;(function be(Me){A.current=Me,window.clearTimeout(w.current),Me!==""&&(w.current=window.setTimeout(()=>be(""),1e3))})(K),Nt&&setTimeout(()=>Nt.focus())};N.useEffect(()=>()=>window.clearTimeout(w.current),[]),TO();const $=N.useCallback(D=>{var ie,ae;return k.current===((ie=I.current)==null?void 0:ie.side)&&R_e(D,(ae=I.current)==null?void 0:ae.area)},[]);return i.jsx(g_e,{scope:n,searchRef:A,onItemEnter:N.useCallback(D=>{$(D)&&D.preventDefault()},[$]),onItemLeave:N.useCallback(D=>{var K;$(D)||((K=E.current)==null||K.focus(),C(null))},[$]),onTriggerLeave:N.useCallback(D=>{$(D)&&D.preventDefault()},[$]),pointerGraceTimerRef:P,onPointerGraceIntentChange:N.useCallback(D=>{I.current=D},[]),children:i.jsx(U,{...z,children:i.jsx(KN,{asChild:!0,trapped:s,onMountAutoFocus:ke(a,D=>{var K;D.preventDefault(),(K=E.current)==null||K.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:i.jsx(Op,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,children:i.jsx(EK,{asChild:!0,...S,dir:b.dir,orientation:"vertical",loop:r,currentTabStopId:_,onCurrentTabStopIdChange:C,onEntryFocus:ke(c,D=>{b.isUsingKeyboardRef.current||D.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(fR,{role:"menu","aria-orientation":"vertical","data-state":sG(y.open),"data-radix-menu-content":"",dir:b.dir,...x,...g,ref:p,style:{outline:"none",...g.style},onKeyDown:ke(g.onKeyDown,D=>{const ie=D.target.closest("[data-radix-menu-content]")===D.currentTarget,ae=D.ctrlKey||D.altKey||D.metaKey,_e=D.key.length===1;ie&&(D.key==="Tab"&&D.preventDefault(),!ae&&_e&&O(D.key));const Le=E.current;if(D.target!==Le||!o_e.includes(D.key))return;D.preventDefault();const Nt=T().filter(Ne=>!Ne.disabled).map(Ne=>Ne.ref.current);DK.includes(D.key)&&Nt.reverse(),C_e(Nt)}),onBlur:ke(t.onBlur,D=>{D.currentTarget.contains(D.target)||(window.clearTimeout(w.current),A.current="")}),onPointerMove:ke(t.onPointerMove,kv(D=>{const K=D.target,ie=L.current!==D.clientX;if(D.currentTarget.contains(K)&&ie){const ae=D.clientX>L.current?"right":"left";k.current=ae,L.current=D.clientX}}))})})})})})})});UK.displayName=oa;var b_e="MenuGroup",OO=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(Je.div,{role:"group",...r,ref:e})});OO.displayName=b_e;var w_e="MenuLabel",zK=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(Je.div,{...r,ref:e})});zK.displayName=w_e;var w_="MenuItem",OF="menu.itemSelect",ZN=N.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,a=N.useRef(null),o=ob(w_,t.__scopeMenu),l=kO(w_,t.__scopeMenu),c=Dt(e,a),u=N.useRef(!1),d=()=>{const h=a.current;if(!n&&h){const f=new CustomEvent(OF,{bubbles:!0,cancelable:!0});h.addEventListener(OF,m=>r==null?void 0:r(m),{once:!0}),Hk(h,f),f.defaultPrevented?u.current=!1:o.onClose()}};return i.jsx(qK,{...s,ref:c,disabled:n,onClick:ke(t.onClick,d),onPointerDown:h=>{var f;(f=t.onPointerDown)==null||f.call(t,h),u.current=!0},onPointerUp:ke(t.onPointerUp,h=>{var f;u.current||(f=h.currentTarget)==null||f.click()}),onKeyDown:ke(t.onKeyDown,h=>{const f=l.searchRef.current!=="";n||f&&h.key===" "||$C.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});ZN.displayName=w_;var qK=N.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...a}=t,o=kO(w_,n),l=$K(n),c=N.useRef(null),u=Dt(e,c),[d,h]=N.useState(!1),[f,m]=N.useState("");return N.useEffect(()=>{const v=c.current;v&&m((v.textContent??"").trim())},[a.children]),i.jsx(Iv.ItemSlot,{scope:n,disabled:r,textValue:s??f,children:i.jsx(AK,{asChild:!0,...l,focusable:!r,children:i.jsx(Je.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:u,onPointerMove:ke(t.onPointerMove,kv(v=>{r?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ke(t.onPointerLeave,kv(v=>o.onItemLeave(v))),onFocus:ke(t.onFocus,()=>h(!0)),onBlur:ke(t.onBlur,()=>h(!1))})})})}),__e="MenuCheckboxItem",WK=N.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return i.jsx(QK,{scope:t.__scopeMenu,checked:n,children:i.jsx(ZN,{role:"menuitemcheckbox","aria-checked":__(n)?"mixed":n,...s,ref:e,"data-state":DO(n),onSelect:ke(s.onSelect,()=>r==null?void 0:r(__(n)?!0:!n),{checkForDefaultPrevented:!1})})})});WK.displayName=__e;var HK="MenuRadioGroup",[j_e,N_e]=Yh(HK,{value:void 0,onValueChange:()=>{}}),KK=N.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,a=dr(r);return i.jsx(j_e,{scope:t.__scopeMenu,value:n,onValueChange:a,children:i.jsx(OO,{...s,ref:e})})});KK.displayName=HK;var GK="MenuRadioItem",YK=N.forwardRef((t,e)=>{const{value:n,...r}=t,s=N_e(GK,t.__scopeMenu),a=n===s.value;return i.jsx(QK,{scope:t.__scopeMenu,checked:a,children:i.jsx(ZN,{role:"menuitemradio","aria-checked":a,...r,ref:e,"data-state":DO(a),onSelect:ke(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});YK.displayName=GK;var MO="MenuItemIndicator",[QK,S_e]=Yh(MO,{checked:!1}),XK=N.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,a=S_e(MO,n);return i.jsx(gs,{present:r||__(a.checked)||a.checked===!0,children:i.jsx(Je.span,{...s,ref:e,"data-state":DO(a.checked)})})});XK.displayName=MO;var E_e="MenuSeparator",ZK=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(Je.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});ZK.displayName=E_e;var A_e="MenuArrow",JK=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=XN(n);return i.jsx(mR,{...s,...r,ref:e})});JK.displayName=A_e;var T_e="MenuSub",[Itt,eG]=Yh(T_e),my="MenuSubTrigger",tG=N.forwardRef((t,e)=>{const n=Qh(my,t.__scopeMenu),r=ob(my,t.__scopeMenu),s=eG(my,t.__scopeMenu),a=kO(my,t.__scopeMenu),o=N.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,u={__scopeMenu:t.__scopeMenu},d=N.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return N.useEffect(()=>d,[d]),N.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),i.jsx(PO,{asChild:!0,...u,children:i.jsx(qK,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":sG(n.open),...t,ref:uN(e,s.onTriggerChange),onClick:h=>{var f;(f=t.onClick)==null||f.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ke(t.onPointerMove,kv(h=>{a.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:ke(t.onPointerLeave,kv(h=>{var m,v;d();const f=(m=n.content)==null?void 0:m.getBoundingClientRect();if(f){const g=(v=n.content)==null?void 0:v.dataset.side,y=g==="right",b=y?-5:5,x=f[y?"left":"right"],S=f[y?"right":"left"];a.onPointerGraceIntentChange({area:[{x:h.clientX+b,y:h.clientY},{x,y:f.top},{x:S,y:f.top},{x:S,y:f.bottom},{x,y:f.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(h),h.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:ke(t.onKeyDown,h=>{var m;const f=a.searchRef.current!=="";t.disabled||f&&h.key===" "||l_e[r.dir].includes(h.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),h.preventDefault())})})})});tG.displayName=my;var nG="MenuSubContent",rG=N.forwardRef((t,e)=>{const n=VK(oa,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,a=Qh(oa,t.__scopeMenu),o=ob(oa,t.__scopeMenu),l=eG(nG,t.__scopeMenu),c=N.useRef(null),u=Dt(e,c);return i.jsx(Iv.Provider,{scope:t.__scopeMenu,children:i.jsx(gs,{present:r||a.open,children:i.jsx(Iv.Slot,{scope:t.__scopeMenu,children:i.jsx(RO,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:ke(t.onFocusOutside,d=>{d.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:ke(t.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:ke(t.onKeyDown,d=>{var m;const h=d.currentTarget.contains(d.target),f=c_e[o.dir].includes(d.key);h&&f&&(a.onOpenChange(!1),(m=l.trigger)==null||m.focus(),d.preventDefault())})})})})})});rG.displayName=nG;function sG(t){return t?"open":"closed"}function __(t){return t==="indeterminate"}function DO(t){return __(t)?"indeterminate":t?"checked":"unchecked"}function C_e(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function P_e(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function I_e(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=P_e(t,Math.max(a,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function k_e(t,e){const{x:n,y:r}=t;let s=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a],c=e[o],u=l.x,d=l.y,h=c.x,f=c.y;d>r!=f>r&&n<(h-u)*(r-d)/(f-d)+u&&(s=!s)}return s}function R_e(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return k_e(n,e)}function kv(t){return e=>e.pointerType==="mouse"?t(e):void 0}var O_e=FK,M_e=PO,D_e=BK,L_e=UK,$_e=OO,F_e=zK,V_e=ZN,B_e=WK,U_e=KK,z_e=YK,q_e=XK,W_e=ZK,H_e=JK,K_e=tG,G_e=rG,JN="DropdownMenu",[Y_e,ktt]=ps(JN,[LK]),Js=LK(),[Q_e,iG]=Y_e(JN),aG=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:a,onOpenChange:o,modal:l=!0}=t,c=Js(e),u=N.useRef(null),[d,h]=Za({prop:s,defaultProp:a??!1,onChange:o,caller:JN});return i.jsx(Q_e,{scope:e,triggerId:ia(),triggerRef:u,contentId:ia(),open:d,onOpenChange:h,onOpenToggle:N.useCallback(()=>h(f=>!f),[h]),modal:l,children:i.jsx(O_e,{...c,open:d,onOpenChange:h,dir:r,modal:l,children:n})})};aG.displayName=JN;var oG="DropdownMenuTrigger",lG=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,a=iG(oG,n),o=Js(n);return i.jsx(M_e,{asChild:!0,...o,children:i.jsx(Je.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:uN(e,a.triggerRef),onPointerDown:ke(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:ke(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});lG.displayName=oG;var X_e="DropdownMenuPortal",cG=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Js(e);return i.jsx(D_e,{...r,...n})};cG.displayName=X_e;var uG="DropdownMenuContent",dG=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=iG(uG,n),a=Js(n),o=N.useRef(!1);return i.jsx(L_e,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...r,ref:e,onCloseAutoFocus:ke(t.onCloseAutoFocus,l=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:ke(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});dG.displayName=uG;var Z_e="DropdownMenuGroup",J_e=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Js(n);return i.jsx($_e,{...s,...r,ref:e})});J_e.displayName=Z_e;var eje="DropdownMenuLabel",hG=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Js(n);return i.jsx(F_e,{...s,...r,ref:e})});hG.displayName=eje;var tje="DropdownMenuItem",fG=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Js(n);return i.jsx(V_e,{...s,...r,ref:e})});fG.displayName=tje;var nje="DropdownMenuCheckboxItem",mG=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Js(n);return i.jsx(B_e,{...s,...r,ref:e})});mG.displayName=nje;var rje="DropdownMenuRadioGroup",sje=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Js(n);return i.jsx(U_e,{...s,...r,ref:e})});sje.displayName=rje;var ije="DropdownMenuRadioItem",pG=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Js(n);return i.jsx(z_e,{...s,...r,ref:e})});pG.displayName=ije;var aje="DropdownMenuItemIndicator",gG=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Js(n);return i.jsx(q_e,{...s,...r,ref:e})});gG.displayName=aje;var oje="DropdownMenuSeparator",yG=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Js(n);return i.jsx(W_e,{...s,...r,ref:e})});yG.displayName=oje;var lje="DropdownMenuArrow",cje=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Js(n);return i.jsx(H_e,{...s,...r,ref:e})});cje.displayName=lje;var uje="DropdownMenuSubTrigger",vG=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Js(n);return i.jsx(K_e,{...s,...r,ref:e})});vG.displayName=uje;var dje="DropdownMenuSubContent",xG=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Js(n);return i.jsx(G_e,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});xG.displayName=dje;var hje=aG,fje=lG,mje=cG,bG=dG,wG=hG,_G=fG,jG=mG,NG=pG,SG=gG,EG=yG,AG=vG,TG=xG;const CG=hje,PG=fje,pje=N.forwardRef(({className:t,inset:e,children:n,...r},s)=>i.jsxs(AG,{ref:s,className:me("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",e&&"pl-8",t),...r,children:[n,i.jsx(r8,{className:"ml-auto h-4 w-4"})]}));pje.displayName=AG.displayName;const gje=N.forwardRef(({className:t,...e},n)=>i.jsx(TG,{ref:n,className:me("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));gje.displayName=TG.displayName;const LO=N.forwardRef(({className:t,sideOffset:e=4,...n},r)=>i.jsx(mje,{children:i.jsx(bG,{ref:r,sideOffset:e,className:me("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));LO.displayName=bG.displayName;const j_=N.forwardRef(({className:t,inset:e,...n},r)=>i.jsx(_G,{ref:r,className:me("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e&&"pl-8",t),...n}));j_.displayName=_G.displayName;const IG=N.forwardRef(({className:t,children:e,checked:n,...r},s)=>i.jsxs(jG,{ref:s,className:me("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),checked:n,...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(SG,{children:i.jsx($x,{className:"h-4 w-4"})})}),e]}));IG.displayName=jG.displayName;const yje=N.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(NG,{ref:r,className:me("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(SG,{children:i.jsx(qoe,{className:"h-2 w-2 fill-current"})})}),e]}));yje.displayName=NG.displayName;const $O=N.forwardRef(({className:t,inset:e,...n},r)=>i.jsx(wG,{ref:r,className:me("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));$O.displayName=wG.displayName;const FO=N.forwardRef(({className:t,...e},n)=>i.jsx(EG,{ref:n,className:me("-mx-1 my-1 h-px bg-muted",t),...e}));FO.displayName=EG.displayName;function vje(){const t=$n(),{user:e,signOut:n}=ot(),r=async()=>{await n(),t("/auth")};return i.jsxs(CG,{children:[i.jsx(PG,{asChild:!0,children:i.jsx(W,{variant:"ghost",size:"icon",className:"rounded-full",children:i.jsx(d8,{className:"h-5 w-5"})})}),i.jsxs(LO,{align:"end",className:"w-56",children:[i.jsx($O,{children:i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"text-sm",children:"My Account"}),i.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:(e==null?void 0:e.email)||""})]})}),i.jsx(FO,{}),i.jsxs(j_,{onClick:r,children:[i.jsx(Zoe,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Log out"})]})]})]})}const Y={COMPANIES:"companies",USERS:"users",COMPANY_USERS:"companyUsers",COMPANY_SETTINGS:"companySettings",INVITATIONS:"invitations",USER_ROLES:"userRoles",CHART_OF_ACCOUNTS:"chartOfAccounts",JOURNAL_ENTRIES:"journalEntries",JOURNAL_LINES:"journalLines",INVOICES:"invoices",INVOICE_ITEMS:"invoiceItems",INVOICE_PAYMENTS:"invoicePayments",BILLS:"bills",BILL_PAYMENTS:"billPayments",EXPENSES:"expenses",SALES_ORDERS:"salesOrders",PURCHASE_ORDERS:"purchaseOrders",EMPLOYEES:"employees",CONTRACTORS:"contractors",ADVANCES:"advances",TIME_ENTRIES:"timeEntries",EMPLOYEE_ALLOWANCES:"employeeAllowances",EMPLOYEE_PAYROLL_PROFILES:"employeePayrollProfiles",PAYROLL_RUNS:"payrollRuns",PAYROLL_ITEMS:"payrollItems",PAYROLL_ADDITIONS:"payrollAdditions",PAYROLL_JOURNALS:"payrollJournals",PAYE_TAX_BANDS:"payeTaxBands",PAYROLL_STATUTORY_RATES:"payrollStatutoryRates",CUSTOMERS:"customers",VENDORS:"vendors",PROJECTS:"projects",PROJECT_ACTIVITY_LOGS:"projectActivityLogs",PROJECT_EXPENSES:"projectExpenses",APPROVAL_REQUESTS:"approvalRequests",PRODUCTS:"products",FIXED_ASSETS:"fixedAssets",ASSET_CATEGORIES:"assetCategories",DEPRECIATION_ENTRIES:"depreciationEntries",INVENTORY_ITEMS:"inventoryItems",STOCK_MOVEMENTS:"stockMovements",PRICE_LISTS:"priceLists",PRICE_LIST_ITEMS:"priceListItems",BANK_ACCOUNTS:"bankAccounts",BANK_TRANSACTIONS:"bankTransactions",FINANCIAL_YEARS:"financialYears",FINANCIAL_PERIODS:"financialPeriods",CASH_RECONCILIATIONS:"cashReconciliations",RECONCILIATIONS:"reconciliations",PERIOD_LOCKS:"periodLocks",NOTIFICATIONS:"notifications",AUDIT_LOGS:"auditLogs"},xje=["super_admin","admin","financial_manager","accountant","bookkeeper","assistant_accountant","finance_officer","hr_manager","project_manager","inventory_manager","cashier","auditor","staff","read_only"],bje=t=>{if(!t.length)return"read_only";for(const e of xje)if(t.includes(e))return e;return"read_only"};function Yl(){const{user:t,isAuthenticated:e}=ot();return we({queryKey:["user-role",t==null?void 0:t.id],queryFn:async()=>{if(!t||!Oo)return"read_only";try{const n=new Set,r=ge(re,Y.COMPANY_USERS),s=[je(r,he("userId","==",t.id),he("status","==","active"),Ts(20)),je(r,he("user_id","==",t.id),he("status","==","active"),Ts(20)),je(r,he("userId","==",t.id),Ts(20)),je(r,he("user_id","==",t.id),Ts(20))];for(const a of s)if((await Te(a)).docs.forEach(l=>{const c=l.data().role;c&&n.add(c)}),n.size)break;if(!n.size){const a=ge(re,Y.USER_ROLES),o=[je(a,he("userId","==",t.id),Ts(20)),je(a,he("user_id","==",t.id),Ts(20))];for(const l of o)if((await Te(l)).docs.forEach(u=>{const d=u.data().role;d&&n.add(d)}),n.size)break}return n.size?bje(Array.from(n)):"read_only"}catch{return"read_only"}},enabled:e&&!!t,staleTime:1e3*60*5})}function wje(t){const{data:e,isLoading:n}=Yl();return{hasRole:(e?t.includes(e):!1)||e==="super_admin",isLoading:n,userRole:e}}const _je={super_admin:["*"],admin:["*"],financial_manager:["dashboard","invoices","customers","estimates","sales-orders","vendors","bills","purchase-orders","expenses","bank-accounts","reconciliation","reports","settings","chart-of-accounts","journal-entries","accounts-payable","accounts-receivable","payroll","payroll-reports","employees","fixed-assets","asset-depreciation","opening-balances","financial-periods","zra-compliance","tax-calculator"],accountant:["dashboard","invoices","customers","estimates","sales-orders","vendors","bills","purchase-orders","expenses","bank-accounts","reconciliation","reports","settings","chart-of-accounts","journal-entries","accounts-payable","accounts-receivable","fixed-assets","asset-depreciation","opening-balances","financial-periods","tax-calculator"],assistant_accountant:["dashboard","invoices","customers","estimates","sales-orders","vendors","bills","purchase-orders","expenses","chart-of-accounts","journal-entries","accounts-payable","accounts-receivable"],finance_officer:["dashboard","invoices","expenses","bills","bank-accounts","reconciliation","reports","chart-of-accounts","journal-entries","accounts-payable","accounts-receivable"],bookkeeper:["dashboard","invoices","customers","estimates","sales-orders","vendors","bills","purchase-orders","expenses","chart-of-accounts","journal-entries","fixed-assets","reconciliation","accounts-payable","accounts-receivable"],cashier:["dashboard","bank-accounts","expenses","reconciliation"],inventory_manager:["dashboard","inventory","products","purchase-orders","vendors"],hr_manager:["dashboard","employees","payroll","advances","payroll-reports","time-tracking"],project_manager:["dashboard","projects","donors","time-tracking","reports"],auditor:["dashboard","reports","payroll-reports","audit-logs","journal-entries","chart-of-accounts"],staff:["dashboard","time-tracking"],read_only:["dashboard"]};function kG(t,e){if(!t)return!1;if(t==="super_admin"||t==="admin")return!0;const n=_je[t]||[],r=e.replace(/^\//,"").split("/")[0];return n.includes(r)||n.includes("*")}function FC(t,[e,n]){return Math.min(n,Math.max(e,t))}function jje(t,e){return N.useReducer((n,r)=>e[n][r]??n,t)}var VO="ScrollArea",[RG,Rtt]=ps(VO),[Nje,va]=RG(VO),OG=N.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:a=600,...o}=t,[l,c]=N.useState(null),[u,d]=N.useState(null),[h,f]=N.useState(null),[m,v]=N.useState(null),[g,y]=N.useState(null),[b,x]=N.useState(0),[S,T]=N.useState(0),[_,C]=N.useState(!1),[E,p]=N.useState(!1),w=Dt(e,P=>c(P)),A=sb(s);return i.jsx(Nje,{scope:n,type:r,dir:A,scrollHideDelay:a,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:f,scrollbarX:m,onScrollbarXChange:v,scrollbarXEnabled:_,onScrollbarXEnabledChange:C,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:E,onScrollbarYEnabledChange:p,onCornerWidthChange:x,onCornerHeightChange:T,children:i.jsx(Je.div,{dir:A,...o,ref:w,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":S+"px",...t.style}})})});OG.displayName=VO;var MG="ScrollAreaViewport",DG=N.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...a}=t,o=va(MG,n),l=N.useRef(null),c=Dt(e,l,o.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),i.jsx(Je.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:i.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});DG.displayName=MG;var Qo="ScrollAreaScrollbar",BO=N.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=va(Qo,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=s,l=t.orientation==="horizontal";return N.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),s.type==="hover"?i.jsx(Sje,{...r,ref:e,forceMount:n}):s.type==="scroll"?i.jsx(Eje,{...r,ref:e,forceMount:n}):s.type==="auto"?i.jsx(LG,{...r,ref:e,forceMount:n}):s.type==="always"?i.jsx(UO,{...r,ref:e}):null});BO.displayName=Qo;var Sje=N.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=va(Qo,t.__scopeScrollArea),[a,o]=N.useState(!1);return N.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),i.jsx(gs,{present:n||a,children:i.jsx(LG,{"data-state":a?"visible":"hidden",...r,ref:e})})}),Eje=N.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=va(Qo,t.__scopeScrollArea),a=t.orientation==="horizontal",o=tS(()=>c("SCROLL_END"),100),[l,c]=jje("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return N.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),N.useEffect(()=>{const u=s.viewport,d=a?"scrollLeft":"scrollTop";if(u){let h=u[d];const f=()=>{const m=u[d];h!==m&&(c("SCROLL"),o()),h=m};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[s.viewport,a,c,o]),i.jsx(gs,{present:n||l!=="hidden",children:i.jsx(UO,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:ke(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ke(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),LG=N.forwardRef((t,e)=>{const n=va(Qo,t.__scopeScrollArea),{forceMount:r,...s}=t,[a,o]=N.useState(!1),l=t.orientation==="horizontal",c=tS(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?u:d)}},10);return Ym(n.viewport,c),Ym(n.content,c),i.jsx(gs,{present:r||a,children:i.jsx(UO,{"data-state":a?"visible":"hidden",...s,ref:e})})}),UO=N.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=va(Qo,t.__scopeScrollArea),a=N.useRef(null),o=N.useRef(0),[l,c]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=UG(l.viewport,l.content),d={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:f=>a.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function h(f,m){return kje(f,o.current,l,m)}return n==="horizontal"?i.jsx(Aje,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&a.current){const f=s.viewport.scrollLeft,m=MF(f,l,s.dir);a.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollLeft=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollLeft=h(f,s.dir))}}):n==="vertical"?i.jsx(Tje,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&a.current){const f=s.viewport.scrollTop,m=MF(f,l);a.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollTop=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollTop=h(f))}}):null}),Aje=N.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,a=va(Qo,t.__scopeScrollArea),[o,l]=N.useState(),c=N.useRef(null),u=Dt(e,c,a.onScrollbarXChange);return N.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(FG,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":eS(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(a.viewport){const f=a.viewport.scrollLeft+d.deltaX;t.onWheelScroll(f),qG(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:S_(o.paddingLeft),paddingEnd:S_(o.paddingRight)}})}})}),Tje=N.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,a=va(Qo,t.__scopeScrollArea),[o,l]=N.useState(),c=N.useRef(null),u=Dt(e,c,a.onScrollbarYChange);return N.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(FG,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":eS(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(a.viewport){const f=a.viewport.scrollTop+d.deltaY;t.onWheelScroll(f),qG(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:S_(o.paddingTop),paddingEnd:S_(o.paddingBottom)}})}})}),[Cje,$G]=RG(Qo),FG=N.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...f}=t,m=va(Qo,n),[v,g]=N.useState(null),y=Dt(e,w=>g(w)),b=N.useRef(null),x=N.useRef(""),S=m.viewport,T=r.content-r.viewport,_=dr(d),C=dr(c),E=tS(h,10);function p(w){if(b.current){const A=w.clientX-b.current.left,P=w.clientY-b.current.top;u({x:A,y:P})}}return N.useEffect(()=>{const w=A=>{const P=A.target;(v==null?void 0:v.contains(P))&&_(A,T)};return document.addEventListener("wheel",w,{passive:!1}),()=>document.removeEventListener("wheel",w,{passive:!1})},[S,v,T,_]),N.useEffect(C,[r,C]),Ym(v,E),Ym(m.content,E),i.jsx(Cje,{scope:n,scrollbar:v,hasThumb:s,onThumbChange:dr(a),onThumbPointerUp:dr(o),onThumbPositionChange:C,onThumbPointerDown:dr(l),children:i.jsx(Je.div,{...f,ref:y,style:{position:"absolute",...f.style},onPointerDown:ke(t.onPointerDown,w=>{w.button===0&&(w.target.setPointerCapture(w.pointerId),b.current=v.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),p(w))}),onPointerMove:ke(t.onPointerMove,p),onPointerUp:ke(t.onPointerUp,w=>{const A=w.target;A.hasPointerCapture(w.pointerId)&&A.releasePointerCapture(w.pointerId),document.body.style.webkitUserSelect=x.current,m.viewport&&(m.viewport.style.scrollBehavior=""),b.current=null})})})}),N_="ScrollAreaThumb",VG=N.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=$G(N_,t.__scopeScrollArea);return i.jsx(gs,{present:n||s.hasThumb,children:i.jsx(Pje,{ref:e,...r})})}),Pje=N.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,a=va(N_,n),o=$G(N_,n),{onThumbPositionChange:l}=o,c=Dt(e,h=>o.onThumbChange(h)),u=N.useRef(void 0),d=tS(()=>{u.current&&(u.current(),u.current=void 0)},100);return N.useEffect(()=>{const h=a.viewport;if(h){const f=()=>{if(d(),!u.current){const m=Rje(h,l);u.current=m,l()}};return l(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[a.viewport,d,l]),i.jsx(Je.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:ke(t.onPointerDownCapture,h=>{const m=h.target.getBoundingClientRect(),v=h.clientX-m.left,g=h.clientY-m.top;o.onThumbPointerDown({x:v,y:g})}),onPointerUp:ke(t.onPointerUp,o.onThumbPointerUp)})});VG.displayName=N_;var zO="ScrollAreaCorner",BG=N.forwardRef((t,e)=>{const n=va(zO,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(Ije,{...t,ref:e}):null});BG.displayName=zO;var Ije=N.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=va(zO,n),[a,o]=N.useState(0),[l,c]=N.useState(0),u=!!(a&&l);return Ym(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),Ym(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),o(d)}),u?i.jsx(Je.div,{...r,ref:e,style:{width:a,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function S_(t){return t?parseInt(t,10):0}function UG(t,e){const n=t/e;return isNaN(n)?0:n}function eS(t){const e=UG(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function kje(t,e,n,r="ltr"){const s=eS(n),a=s/2,o=e||a,l=s-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return zG([c,u],h)(t)}function MF(t,e,n="ltr"){const r=eS(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-s,o=e.content-e.viewport,l=a-r,c=n==="ltr"?[0,o]:[o*-1,0],u=FC(t,c);return zG([0,o],[0,l])(u)}function zG(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function qG(t,e){return t>0&&t<e}var Rje=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const a={left:t.scrollLeft,top:t.scrollTop},o=n.left!==a.left,l=n.top!==a.top;(o||l)&&e(),n=a,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function tS(t,e){const n=dr(t),r=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),N.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Ym(t,e){const n=dr(e);fr(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var WG=OG,Oje=DG,Mje=BG;const th=N.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(WG,{ref:r,className:me("relative overflow-hidden",t),...n,children:[i.jsx(Oje,{className:"h-full w-full rounded-[inherit]",children:e}),i.jsx(HG,{}),i.jsx(Mje,{})]}));th.displayName=WG.displayName;const HG=N.forwardRef(({className:t,orientation:e="vertical",...n},r)=>i.jsx(BO,{ref:r,orientation:e,className:me("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:i.jsx(VG,{className:"relative flex-1 rounded-full bg-border"})}));HG.displayName=BO.displayName;const LE=768;function nS(){const[t,e]=N.useState(void 0);return N.useEffect(()=>{const n=window.matchMedia(`(max-width: ${LE-1}px)`),r=()=>{e(window.innerWidth<LE)};return n.addEventListener("change",r),e(window.innerWidth<LE),()=>n.removeEventListener("change",r)},[]),!!t}const G=N.forwardRef(({className:t,type:e,...n},r)=>i.jsx("input",{type:e,className:me("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));G.displayName="Input";var Dje="Separator",DF="horizontal",Lje=["horizontal","vertical"],KG=N.forwardRef((t,e)=>{const{decorative:n,orientation:r=DF,...s}=t,a=$je(r)?r:DF,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return i.jsx(Je.div,{"data-orientation":a,...l,...s,ref:e})});KG.displayName=Dje;function $je(t){return Lje.includes(t)}var GG=KG;const YG=N.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>i.jsx(GG,{ref:s,decorative:n,orientation:e,className:me("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));YG.displayName=GG.displayName;var rS="Dialog",[QG,XG]=ps(rS),[Fje,ao]=QG(rS),ZG=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:o=!0}=t,l=N.useRef(null),c=N.useRef(null),[u,d]=Za({prop:r,defaultProp:s??!1,onChange:a,caller:rS});return i.jsx(Fje,{scope:e,triggerRef:l,contentRef:c,contentId:ia(),titleId:ia(),descriptionId:ia(),open:u,onOpenChange:d,onOpenToggle:N.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};ZG.displayName=rS;var JG="DialogTrigger",eY=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ao(JG,n),a=Dt(e,s.triggerRef);return i.jsx(Je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":HO(s.open),...r,ref:a,onClick:ke(t.onClick,s.onOpenToggle)})});eY.displayName=JG;var qO="DialogPortal",[Vje,tY]=QG(qO,{forceMount:void 0}),nY=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,a=ao(qO,e);return i.jsx(Vje,{scope:e,forceMount:n,children:N.Children.map(r,o=>i.jsx(gs,{present:n||a.open,children:i.jsx(Mx,{asChild:!0,container:s,children:o})}))})};nY.displayName=qO;var E_="DialogOverlay",rY=N.forwardRef((t,e)=>{const n=tY(E_,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=ao(E_,t.__scopeDialog);return a.modal?i.jsx(gs,{present:r||a.open,children:i.jsx(Uje,{...s,ref:e})}):null});rY.displayName=E_;var Bje=hh("DialogOverlay.RemoveScroll"),Uje=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ao(E_,n);return i.jsx(QN,{as:Bje,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(Je.div,{"data-state":HO(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Ch="DialogContent",sY=N.forwardRef((t,e)=>{const n=tY(Ch,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=ao(Ch,t.__scopeDialog);return i.jsx(gs,{present:r||a.open,children:a.modal?i.jsx(zje,{...s,ref:e}):i.jsx(qje,{...s,ref:e})})});sY.displayName=Ch;var zje=N.forwardRef((t,e)=>{const n=ao(Ch,t.__scopeDialog),r=N.useRef(null),s=Dt(e,n.contentRef,r);return N.useEffect(()=>{const a=r.current;if(a)return CO(a)},[]),i.jsx(iY,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ke(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ke(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:ke(t.onFocusOutside,a=>a.preventDefault())})}),qje=N.forwardRef((t,e)=>{const n=ao(Ch,t.__scopeDialog),r=N.useRef(!1),s=N.useRef(!1);return i.jsx(iY,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),iY=N.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...o}=t,l=ao(Ch,n),c=N.useRef(null),u=Dt(e,c);return TO(),i.jsxs(i.Fragment,{children:[i.jsx(KN,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(Op,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":HO(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(Hje,{titleId:l.titleId}),i.jsx(Gje,{contentRef:c,descriptionId:l.descriptionId})]})]})}),WO="DialogTitle",aY=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ao(WO,n);return i.jsx(Je.h2,{id:s.titleId,...r,ref:e})});aY.displayName=WO;var oY="DialogDescription",lY=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ao(oY,n);return i.jsx(Je.p,{id:s.descriptionId,...r,ref:e})});lY.displayName=oY;var cY="DialogClose",uY=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ao(cY,n);return i.jsx(Je.button,{type:"button",...r,ref:e,onClick:ke(t.onClick,()=>s.onOpenChange(!1))})});uY.displayName=cY;function HO(t){return t?"open":"closed"}var dY="DialogTitleWarning",[Wje,hY]=Bae(dY,{contentName:Ch,titleName:WO,docsSlug:"dialog"}),Hje=({titleId:t})=>{const e=hY(dY),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return N.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Kje="DialogDescriptionWarning",Gje=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${hY(Kje).contentName}}.`;return N.useEffect(()=>{var a;const s=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},KO=ZG,fY=eY,GO=nY,lb=rY,cb=sY,ub=aY,db=lY,sS=uY;const Yje=KO,Qje=GO,mY=N.forwardRef(({className:t,...e},n)=>i.jsx(lb,{className:me("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));mY.displayName=lb.displayName;const Xje=qh("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),pY=N.forwardRef(({side:t="right",className:e,children:n,...r},s)=>i.jsxs(Qje,{children:[i.jsx(mY,{}),i.jsxs(cb,{ref:s,className:me(Xje({side:t}),e),...r,children:[n,i.jsxs(sS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[i.jsx(Vm,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));pY.displayName=cb.displayName;const Zje=N.forwardRef(({className:t,...e},n)=>i.jsx(ub,{ref:n,className:me("text-lg font-semibold text-foreground",t),...e}));Zje.displayName=ub.displayName;const Jje=N.forwardRef(({className:t,...e},n)=>i.jsx(db,{ref:n,className:me("text-sm text-muted-foreground",t),...e}));Jje.displayName=db.displayName;function jc({className:t,...e}){return i.jsx("div",{className:me("animate-pulse rounded-md bg-muted",t),...e})}const eNe="sidebar:state",tNe=60*60*24*7,nNe="16rem",rNe="18rem",sNe="3rem",iNe="b",gY=N.createContext(null);function hb(){const t=N.useContext(gY);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}const yY=N.forwardRef(({defaultOpen:t=!0,open:e,onOpenChange:n,className:r,style:s,children:a,...o},l)=>{const c=nS(),[u,d]=N.useState(!1),[h,f]=N.useState(t),m=e??h,v=N.useCallback(x=>{const S=typeof x=="function"?x(m):x;n?n(S):f(S),document.cookie=`${eNe}=${S}; path=/; max-age=${tNe}`},[n,m]),g=N.useCallback(()=>c?d(x=>!x):v(x=>!x),[c,v,d]);N.useEffect(()=>{const x=S=>{S.key===iNe&&(S.metaKey||S.ctrlKey)&&(S.preventDefault(),g())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[g]);const y=m?"expanded":"collapsed",b=N.useMemo(()=>({state:y,open:m,setOpen:v,isMobile:c,openMobile:u,setOpenMobile:d,toggleSidebar:g}),[y,m,v,c,u,d,g]);return i.jsx(gY.Provider,{value:b,children:i.jsx(X8,{delayDuration:0,children:i.jsx("div",{style:{"--sidebar-width":nNe,"--sidebar-width-icon":sNe,...s},className:me("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:l,...o,children:a})})})});yY.displayName="SidebarProvider";const vY=N.forwardRef(({side:t="left",variant:e="sidebar",collapsible:n="offcanvas",className:r,children:s,...a},o)=>{const{isMobile:l,state:c,openMobile:u,setOpenMobile:d}=hb();return n==="none"?i.jsx("div",{className:me("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:o,...a,children:s}):l?i.jsx(Yje,{open:u,onOpenChange:d,...a,children:i.jsx(pY,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":rNe},side:t,children:i.jsx("div",{className:"flex h-full w-full flex-col",children:s})})}):i.jsxs("div",{ref:o,className:"group peer hidden text-sidebar-foreground md:block","data-state":c,"data-collapsible":c==="collapsed"?n:"","data-variant":e,"data-side":t,children:[i.jsx("div",{className:me("relative h-svh w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),i.jsx("div",{className:me("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...a,children:i.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:s})})]})});vY.displayName="Sidebar";const xY=N.forwardRef(({className:t,onClick:e,...n},r)=>{const{toggleSidebar:s}=hb();return i.jsxs(W,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:me("h-7 w-7",t),onClick:a=>{e==null||e(a),s()},...n,children:[i.jsx(nle,{}),i.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});xY.displayName="SidebarTrigger";const aNe=N.forwardRef(({className:t,...e},n)=>{const{toggleSidebar:r}=hb();return i.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:me("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] group-data-[side=left]:-right-4 group-data-[side=right]:left-0 hover:after:bg-sidebar-border sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t),...e})});aNe.displayName="SidebarRail";const bY=N.forwardRef(({className:t,...e},n)=>i.jsx("main",{ref:n,className:me("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",t),...e}));bY.displayName="SidebarInset";const oNe=N.forwardRef(({className:t,...e},n)=>i.jsx(G,{ref:n,"data-sidebar":"input",className:me("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",t),...e}));oNe.displayName="SidebarInput";const wY=N.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,"data-sidebar":"header",className:me("flex flex-col gap-2 p-2",t),...e}));wY.displayName="SidebarHeader";const _Y=N.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,"data-sidebar":"footer",className:me("flex flex-col gap-2 p-2",t),...e}));_Y.displayName="SidebarFooter";const lNe=N.forwardRef(({className:t,...e},n)=>i.jsx(YG,{ref:n,"data-sidebar":"separator",className:me("mx-2 w-auto bg-sidebar-border",t),...e}));lNe.displayName="SidebarSeparator";const jY=N.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,"data-sidebar":"content",className:me("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...e}));jY.displayName="SidebarContent";const NY=N.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,"data-sidebar":"group",className:me("relative flex w-full min-w-0 flex-col p-2",t),...e}));NY.displayName="SidebarGroup";const cNe=N.forwardRef(({className:t,asChild:e=!1,...n},r)=>{const s=e?zh:"div";return i.jsx(s,{ref:r,"data-sidebar":"group-label",className:me("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...n})});cNe.displayName="SidebarGroupLabel";const uNe=N.forwardRef(({className:t,asChild:e=!1,...n},r)=>{const s=e?zh:"button";return i.jsx(s,{ref:r,"data-sidebar":"group-action",className:me("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",t),...n})});uNe.displayName="SidebarGroupAction";const SY=N.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,"data-sidebar":"group-content",className:me("w-full text-sm",t),...e}));SY.displayName="SidebarGroupContent";const EY=N.forwardRef(({className:t,...e},n)=>i.jsx("ul",{ref:n,"data-sidebar":"menu",className:me("flex w-full min-w-0 flex-col gap-1",t),...e}));EY.displayName="SidebarMenu";const AY=N.forwardRef(({className:t,...e},n)=>i.jsx("li",{ref:n,"data-sidebar":"menu-item",className:me("group/menu-item relative",t),...e}));AY.displayName="SidebarMenuItem";const dNe=qh("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),TY=N.forwardRef(({asChild:t=!1,isActive:e=!1,variant:n="default",size:r="default",tooltip:s,className:a,...o},l)=>{const c=t?zh:"button",{isMobile:u,state:d}=hb(),h=i.jsx(c,{ref:l,"data-sidebar":"menu-button","data-size":r,"data-active":e,className:me(dNe({variant:n,size:r}),a),...o});return s?(typeof s=="string"&&(s={children:s}),i.jsxs(ode,{children:[i.jsx(lde,{asChild:!0,children:h}),i.jsx(Z8,{side:"right",align:"center",hidden:d!=="collapsed"||u,...s})]})):h});TY.displayName="SidebarMenuButton";const hNe=N.forwardRef(({className:t,asChild:e=!1,showOnHover:n=!1,...r},s)=>{const a=e?zh:"button";return i.jsx(a,{ref:s,"data-sidebar":"menu-action",className:me("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform peer-hover/menu-button:text-sidebar-accent-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",t),...r})});hNe.displayName="SidebarMenuAction";const fNe=N.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:me("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t),...e}));fNe.displayName="SidebarMenuBadge";const mNe=N.forwardRef(({className:t,showIcon:e=!1,...n},r)=>{const s=N.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return i.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:me("flex h-8 items-center gap-2 rounded-md px-2",t),...n,children:[e&&i.jsx(jc,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),i.jsx(jc,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":s}})]})});mNe.displayName="SidebarMenuSkeleton";const pNe=N.forwardRef(({className:t,...e},n)=>i.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:me("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",t),...e}));pNe.displayName="SidebarMenuSub";const gNe=N.forwardRef(({...t},e)=>i.jsx("li",{ref:e,...t}));gNe.displayName="SidebarMenuSubItem";const yNe=N.forwardRef(({asChild:t=!1,size:e="md",isActive:n,className:r,...s},a)=>{const o=t?zh:"a";return i.jsx(o,{ref:a,"data-sidebar":"menu-sub-button","data-size":e,"data-active":n,className:me("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring aria-disabled:pointer-events-none aria-disabled:opacity-50 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",e==="sm"&&"text-xs",e==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...s})});yNe.displayName="SidebarMenuSubButton";var iS="Collapsible",[vNe,Ott]=ps(iS),[xNe,YO]=vNe(iS),CY=N.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:a,onOpenChange:o,...l}=t,[c,u]=Za({prop:r,defaultProp:s??!1,onChange:o,caller:iS});return i.jsx(xNe,{scope:n,disabled:a,contentId:ia(),open:c,onOpenToggle:N.useCallback(()=>u(d=>!d),[u]),children:i.jsx(Je.div,{"data-state":XO(c),"data-disabled":a?"":void 0,...l,ref:e})})});CY.displayName=iS;var PY="CollapsibleTrigger",IY=N.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,s=YO(PY,n);return i.jsx(Je.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":XO(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:e,onClick:ke(t.onClick,s.onOpenToggle)})});IY.displayName=PY;var QO="CollapsibleContent",kY=N.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=YO(QO,t.__scopeCollapsible);return i.jsx(gs,{present:n||s.open,children:({present:a})=>i.jsx(bNe,{...r,ref:e,present:a})})});kY.displayName=QO;var bNe=N.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:s,...a}=t,o=YO(QO,n),[l,c]=N.useState(r),u=N.useRef(null),d=Dt(e,u),h=N.useRef(0),f=h.current,m=N.useRef(0),v=m.current,g=o.open||l,y=N.useRef(g),b=N.useRef(void 0);return N.useEffect(()=>{const x=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(x)},[]),fr(()=>{const x=u.current;if(x){b.current=b.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const S=x.getBoundingClientRect();h.current=S.height,m.current=S.width,y.current||(x.style.transitionDuration=b.current.transitionDuration,x.style.animationName=b.current.animationName),c(r)}},[o.open,r]),i.jsx(Je.div,{"data-state":XO(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...a,ref:d,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...t.style},children:g&&s})});function XO(t){return t?"open":"closed"}var wNe=CY;const _Ne=wNe,jNe=IY,NNe=kY;function Rv({variant:t="full",size:e="md",className:n}){const r={sm:"h-8 w-8",md:"h-10 w-10",lg:"h-12 w-12",xl:"h-16 w-16"},s={sm:"text-base",md:"text-xl",lg:"text-2xl",xl:"text-3xl"},a={sm:"text-[8px]",md:"text-[10px]",lg:"text-xs",xl:"text-sm"};return i.jsxs("div",{className:me("flex items-center gap-3",n),children:[t!=="text"&&i.jsxs("div",{className:me("relative flex items-center justify-center transition-all duration-300",r[e]),children:[i.jsx("img",{src:"/logo_new.png",alt:"ZedBooks",className:"h-full w-full object-contain drop-shadow-sm"}),i.jsx("div",{className:"absolute inset-0 bg-blue-500/10 rounded-full blur-xl -z-10 scale-150 opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),(t==="full"||t==="text")&&i.jsxs("div",{className:"flex flex-col select-none",children:[i.jsx("span",{className:me("font-bold leading-none tracking-tight",s[e]),children:"ZedBooks"}),i.jsx("span",{className:me("font-medium uppercase tracking-[0.2em] opacity-70",a[e]),children:"Purpose Ledger"})]})]})}const SNe=[{title:"Overview",items:[{title:"Dashboard",icon:Xoe,href:"/dashboard"}]},{title:"Sales & Receivables",items:[{title:"Customers",icon:ui,href:"/customers"},{title:"Invoices",icon:ur,href:"/invoices"},{title:"Accounts Receivable",icon:$a,href:"/accounts-receivable"},{title:"Estimates",icon:ur,href:"/estimates"},{title:"Sales Orders",icon:i4,href:"/sales-orders"}]},{title:"Purchasing & Payables",items:[{title:"Vendors",icon:ui,href:"/vendors"},{title:"Bills",icon:ur,href:"/bills"},{title:"Accounts Payable",icon:$a,href:"/accounts-payable"},{title:"Purchase Orders",icon:i4,href:"/purchase-orders"},{title:"Expenses",icon:Xn,href:"/expenses"}]},{title:"Inventory & Assets",items:[{title:"Products & Services",icon:sa,href:"/products"},{title:"Inventory",icon:sa,href:"/inventory"},{title:"Fixed Assets",icon:sa,href:"/fixed-assets"},{title:"Depreciation",icon:fv,href:"/asset-depreciation"}]},{title:"Banking",items:[{title:"Bank Accounts",icon:$a,href:"/bank-accounts"},{title:"Reconciliation",icon:$a,href:"/reconciliation"}]},{title:"People",items:[{title:"Employees",icon:ui,href:"/employees"},{title:"Payroll",icon:Xn,href:"/payroll"},{title:"Advances",icon:$a,href:"/advances"},{title:"Time & Contractors",icon:Di,href:"/time-tracking"}]},{title:"Projects & Grants",items:[{title:"Projects",icon:Uw,href:"/projects"},{title:"Donors & Grants",icon:ui,href:"/donors"}]},{title:"Accounting",items:[{title:"Chart of Accounts",icon:hv,href:"/chart-of-accounts"},{title:"Journal Entries",icon:ur,href:"/journal-entries"},{title:"Opening Balances",icon:hv,href:"/opening-balances"},{title:"Financial Periods",icon:Di,href:"/financial-periods"}]},{title:"Reports",items:[{title:"Financial Reports",icon:n8,href:"/reports"},{title:"Payroll Reports",icon:ur,href:"/payroll-reports"},{title:"ZRA Compliance",icon:ur,href:"/zra-compliance"},{title:"Tax Calculator",icon:fv,href:"/tax-calculator"}]},{title:"Administration",items:[{title:"Users & Roles",icon:ui,href:"/users"},{title:"Audit Logs",icon:ur,href:"/audit-logs"},{title:"Payroll Settings",icon:qw,href:"/payroll-settings"},{title:"Company Settings",icon:qw,href:"/company-settings"}]}];function ENe(t,e){return e?e==="super_admin"||e==="admin"?t:t.map(n=>({...n,items:n.items.filter(r=>kG(e,r.href))})).filter(n=>n.items.length>0):t.map(n=>({...n,items:n.items.filter(r=>r.href==="/dashboard")})).filter(n=>n.items.length>0)}function ANe(){const t=Go(),{data:e}=Yl(),{setOpenMobile:n}=hb(),r=nS(),s=ENe(SNe,e||null),a=()=>{r&&n(!1)};return i.jsxs(vY,{className:"border-r border-sidebar-border",children:[i.jsx(wY,{className:"border-b border-sidebar-border p-4",children:i.jsx(Pi,{to:"/dashboard",className:"flex items-center gap-3",onClick:a,children:i.jsx(Rv,{variant:"full",size:"lg"})})}),i.jsx(jY,{children:i.jsx(th,{className:"h-full",children:i.jsx("div",{className:"space-y-1 p-2",children:s.map((o,l)=>{const c=o.items.some(u=>t.pathname===u.href);return i.jsx(_Ne,{defaultOpen:c||l<3,className:"group/collapsible",children:i.jsxs(NY,{className:"p-0",children:[i.jsxs(jNe,{className:"flex w-full items-center justify-between rounded-lg px-3 py-2 text-sm font-medium text-sidebar-foreground/70 hover:bg-sidebar-accent hover:text-sidebar-foreground transition-colors",children:[i.jsx("span",{children:o.title}),i.jsx(Qk,{className:"h-4 w-4 transition-transform group-data-[state=open]/collapsible:rotate-180"})]}),i.jsx(NNe,{children:i.jsx(SY,{className:"mt-1",children:i.jsx(EY,{children:o.items.map(u=>{const d=t.pathname===u.href;return i.jsx(AY,{children:i.jsx(TY,{asChild:!0,isActive:d,className:me("w-full transition-colors",d?"bg-primary text-primary-foreground hover:bg-primary/90 hover:text-primary-foreground":"text-sidebar-foreground/70 hover:bg-sidebar-accent hover:text-sidebar-foreground"),children:i.jsxs(Pi,{to:u.href,onClick:a,className:"flex items-center gap-2",children:[i.jsx(u.icon,{className:me("h-4 w-4",d?"text-primary-foreground":"")}),i.jsx("span",{children:u.title})]})})},u.title)})})})})]})},o.title)})})})}),i.jsx(_Y,{className:"border-t border-sidebar-border p-4",children:i.jsx(vje,{})})]})}function xt({children:t}){const{isAuthenticated:e,isLoading:n}=ot(),r=Go();return n?i.jsx("div",{className:"flex min-h-screen items-center justify-center",children:i.jsx(um,{message:"Verifying authentication...",size:"lg"})}):e?i.jsx(i.Fragment,{children:t}):i.jsx(iC,{to:"/auth",state:{from:r},replace:!0})}function ZO({className:t}){return i.jsx("a",{href:"https://byteandberry.com/",target:"_blank",rel:"noopener noreferrer",className:me("fixed bottom-4 right-4 z-50 flex items-center gap-1 text-xs font-medium text-muted-foreground/40 hover:text-primary transition-all duration-200 bg-background/50 hover:bg-background px-2 py-1 rounded-full backdrop-blur-[2px]",t),"aria-label":"Made by Byte & Berry - Visit Website",children:i.jsx("span",{children:"Made by Byte & Berry"})})}function TNe(){const[t,e]=N.useState([{role:"assistant",content:"Hello! I am your ZedBooks financial assistant. I can help you analyze your data, explain accounting concepts, or check for anomalies. How can I help you today?",timestamp:new Date().toISOString()}]),[n,r]=N.useState(!1);return{messages:t,isLoading:n,askAI:async(o,l)=>{if(!o.trim())return;const c={role:"user",content:o,timestamp:new Date().toISOString()};e(u=>[...u,c]),r(!0);try{const h={role:"assistant",content:(await J7(vK,"askDeepSeek")({query:o,includeFinancialContext:!0,companyId:l})).data.answer,timestamp:new Date().toISOString()};e(f=>[...f,h])}catch(u){console.error("AI Error:",u),Z.error("Failed to get response from AI assistant."),e(d=>[...d,{role:"assistant",content:"I'm sorry, I encountered an error while processing your request. Please try again later.",timestamp:new Date().toISOString()}])}finally{r(!1)}},clearChat:()=>{e([{role:"assistant",content:"Chat cleared. How can I help you now?",timestamp:new Date().toISOString()}])}}}const Q=N.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:me("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Q.displayName="Card";const ee=N.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:me("flex flex-col space-y-1.5 p-6",t),...e}));ee.displayName="CardHeader";const te=N.forwardRef(({className:t,...e},n)=>i.jsx("h3",{ref:n,className:me("text-2xl font-semibold leading-none tracking-tight",t),...e}));te.displayName="CardTitle";const dt=N.forwardRef(({className:t,...e},n)=>i.jsx("p",{ref:n,className:me("text-sm text-muted-foreground",t),...e}));dt.displayName="CardDescription";const ne=N.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:me("p-6 pt-0",t),...e}));ne.displayName="CardContent";const RY=N.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:me("flex items-center p-6 pt-0",t),...e}));RY.displayName="CardFooter";const JO=N.createContext({});function e2(t){const e=N.useRef(null);return e.current===null&&(e.current=t()),e.current}const OY=typeof window<"u",MY=OY?N.useLayoutEffect:N.useEffect,aS=N.createContext(null);function t2(t,e){t.indexOf(e)===-1&&t.push(e)}function A_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const zo=(t,e,n)=>n>e?e:n<t?t:n;let oS=()=>{},Qm=()=>{};const Fl={},DY=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function LY(t){return typeof t=="object"&&t!==null}const $Y=t=>/^0[^.\s]+$/u.test(t);function n2(t){let e;return()=>(e===void 0&&(e=t()),e)}const la=t=>t,CNe=(t,e)=>n=>e(t(n)),fb=(...t)=>t.reduce(CNe),Ov=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class r2{constructor(){this.subscriptions=[]}add(e){return t2(this.subscriptions,e),()=>A_(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let a=0;a<s;a++){const o=this.subscriptions[a];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ca=t=>t*1e3,ta=t=>t/1e3;function FY(t,e){return e?t*(1e3/e):0}const VY=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,PNe=1e-7,INe=12;function kNe(t,e,n,r,s){let a,o,l=0;do o=e+(n-e)/2,a=VY(o,r,s)-t,a>0?n=o:e=o;while(Math.abs(a)>PNe&&++l<INe);return o}function mb(t,e,n,r){if(t===e&&n===r)return la;const s=a=>kNe(a,0,1,t,n);return a=>a===0||a===1?a:VY(s(a),e,r)}const BY=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,UY=t=>e=>1-t(1-e),zY=mb(.33,1.53,.69,.99),s2=UY(zY),qY=BY(s2),WY=t=>(t*=2)<1?.5*s2(t):.5*(2-Math.pow(2,-10*(t-1))),i2=t=>1-Math.sin(Math.acos(t)),HY=UY(i2),KY=BY(i2),RNe=mb(.42,0,1,1),ONe=mb(0,0,.58,1),GY=mb(.42,0,.58,1),MNe=t=>Array.isArray(t)&&typeof t[0]!="number",YY=t=>Array.isArray(t)&&typeof t[0]=="number",LF={linear:la,easeIn:RNe,easeInOut:GY,easeOut:ONe,circIn:i2,circInOut:KY,circOut:HY,backIn:s2,backInOut:qY,backOut:zY,anticipate:WY},DNe=t=>typeof t=="string",$F=t=>{if(YY(t)){Qm(t.length===4,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");const[e,n,r,s]=t;return mb(e,n,r,s)}else if(DNe(t))return Qm(LF[t]!==void 0,`Invalid easing type '${t}'`,"invalid-easing-type"),LF[t];return t},y0=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],FF={value:null,addProjectionMetrics:null};function LNe(t,e){let n=new Set,r=new Set,s=!1,a=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},c=0;function u(h){o.has(h)&&(d.schedule(h),t()),c++,h(l)}const d={schedule:(h,f=!1,m=!1)=>{const g=m&&s?n:r;return f&&o.add(h),g.has(h)||g.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(l=h,s){a=!0;return}s=!0,[n,r]=[r,n],n.forEach(u),e&&FF.value&&FF.value.frameloop[e].push(c),c=0,n.clear(),s=!1,a&&(a=!1,d.process(h))}};return d}const $Ne=40;function QY(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=y0.reduce((S,T)=>(S[T]=LNe(a,e?T:void 0),S),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:f,render:m,postRender:v}=o,g=()=>{const S=Fl.useManualTiming?s.timestamp:performance.now();n=!1,Fl.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(S-s.timestamp,$Ne),1)),s.timestamp=S,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),f.process(s),m.process(s),v.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(g))},y=()=>{n=!0,r=!0,s.isProcessing||t(g)};return{schedule:y0.reduce((S,T)=>{const _=o[T];return S[T]=(C,E=!1,p=!1)=>(n||y(),_.schedule(C,E,p)),S},{}),cancel:S=>{for(let T=0;T<y0.length;T++)o[y0[T]].cancel(S)},state:s,steps:o}}const{schedule:Dn,cancel:Tu,state:ls,steps:$E}=QY(typeof requestAnimationFrame<"u"?requestAnimationFrame:la,!0);let uw;function FNe(){uw=void 0}const qs={now:()=>(uw===void 0&&qs.set(ls.isProcessing||Fl.useManualTiming?ls.timestamp:performance.now()),uw),set:t=>{uw=t,queueMicrotask(FNe)}},XY=t=>e=>typeof e=="string"&&e.startsWith(t),ZY=XY("--"),VNe=XY("var(--"),a2=t=>VNe(t)?BNe.test(t.split("/*")[0].trim()):!1,BNe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function VF(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const Yp={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Mv={...Yp,transform:t=>zo(0,1,t)},v0={...Yp,default:1},Ly=t=>Math.round(t*1e5)/1e5,o2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function UNe(t){return t==null}const zNe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,l2=(t,e)=>n=>!!(typeof n=="string"&&zNe.test(n)&&n.startsWith(t)||e&&!UNe(n)&&Object.prototype.hasOwnProperty.call(n,e)),JY=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,a,o,l]=r.match(o2);return{[t]:parseFloat(s),[e]:parseFloat(a),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},qNe=t=>zo(0,255,t),FE={...Yp,transform:t=>Math.round(qNe(t))},Rd={test:l2("rgb","red"),parse:JY("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+FE.transform(t)+", "+FE.transform(e)+", "+FE.transform(n)+", "+Ly(Mv.transform(r))+")"};function WNe(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const VC={test:l2("#"),parse:WNe,transform:Rd.transform},pb=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),yc=pb("deg"),Mo=pb("%"),et=pb("px"),HNe=pb("vh"),KNe=pb("vw"),BF={...Mo,parse:t=>Mo.parse(t)/100,transform:t=>Mo.transform(t*100)},Vf={test:l2("hsl","hue"),parse:JY("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Mo.transform(Ly(e))+", "+Mo.transform(Ly(n))+", "+Ly(Mv.transform(r))+")"},Ar={test:t=>Rd.test(t)||VC.test(t)||Vf.test(t),parse:t=>Rd.test(t)?Rd.parse(t):Vf.test(t)?Vf.parse(t):VC.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Rd.transform(t):Vf.transform(t),getAnimatableNone:t=>{const e=Ar.parse(t);return e.alpha=0,Ar.transform(e)}},GNe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function YNe(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(o2))==null?void 0:e.length)||0)+(((n=t.match(GNe))==null?void 0:n.length)||0)>0}const eQ="number",tQ="color",QNe="var",XNe="var(",UF="${}",ZNe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Dv(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const l=e.replace(ZNe,c=>(Ar.test(c)?(r.color.push(a),s.push(tQ),n.push(Ar.parse(c))):c.startsWith(XNe)?(r.var.push(a),s.push(QNe),n.push(c)):(r.number.push(a),s.push(eQ),n.push(parseFloat(c))),++a,UF)).split(UF);return{values:n,split:l,indexes:r,types:s}}function nQ(t){return Dv(t).values}function rQ(t){const{split:e,types:n}=Dv(t),r=e.length;return s=>{let a="";for(let o=0;o<r;o++)if(a+=e[o],s[o]!==void 0){const l=n[o];l===eQ?a+=Ly(s[o]):l===tQ?a+=Ar.transform(s[o]):a+=s[o]}return a}}const JNe=t=>typeof t=="number"?0:Ar.test(t)?Ar.getAnimatableNone(t):t;function eSe(t){const e=nQ(t);return rQ(t)(e.map(JNe))}const Cu={test:YNe,parse:nQ,createTransformer:rQ,getAnimatableNone:eSe};function VE(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function tSe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,a=0,o=0;if(!e)s=a=o=n;else{const l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;s=VE(c,l,t+1/3),a=VE(c,l,t),o=VE(c,l,t-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function T_(t,e){return n=>n>0?e:t}const tr=(t,e,n)=>t+(e-t)*n,BE=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},nSe=[VC,Rd,Vf],rSe=t=>nSe.find(e=>e.test(t));function zF(t){const e=rSe(t);if(oS(!!e,`'${t}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!e)return!1;let n=e.parse(t);return e===Vf&&(n=tSe(n)),n}const qF=(t,e)=>{const n=zF(t),r=zF(e);if(!n||!r)return T_(t,e);const s={...n};return a=>(s.red=BE(n.red,r.red,a),s.green=BE(n.green,r.green,a),s.blue=BE(n.blue,r.blue,a),s.alpha=tr(n.alpha,r.alpha,a),Rd.transform(s))},BC=new Set(["none","hidden"]);function sSe(t,e){return BC.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function iSe(t,e){return n=>tr(t,e,n)}function c2(t){return typeof t=="number"?iSe:typeof t=="string"?a2(t)?T_:Ar.test(t)?qF:lSe:Array.isArray(t)?sQ:typeof t=="object"?Ar.test(t)?qF:aSe:T_}function sQ(t,e){const n=[...t],r=n.length,s=t.map((a,o)=>c2(a)(a,e[o]));return a=>{for(let o=0;o<r;o++)n[o]=s[o](a);return n}}function aSe(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=c2(t[s])(t[s],e[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function oSe(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=t.indexes[a][r[a]],l=t.values[o]??0;n[s]=l,r[a]++}return n}const lSe=(t,e)=>{const n=Cu.createTransformer(e),r=Dv(t),s=Dv(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?BC.has(t)&&!s.values.length||BC.has(e)&&!r.values.length?sSe(t,e):fb(sQ(oSe(r,s),s.values),n):(oS(!0,`Complex values '${t}' and '${e}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),T_(t,e))};function iQ(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?tr(t,e,n):c2(t)(t,e)}const cSe=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Dn.update(e,n),stop:()=>Tu(e),now:()=>ls.isProcessing?ls.timestamp:qs.now()}},aQ=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let a=0;a<s;a++)r+=Math.round(t(a/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},C_=2e4;function u2(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<C_;)e+=n,r=t.next(e);return e>=C_?1/0:e}function uSe(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(u2(r),C_);return{type:"keyframes",ease:a=>r.next(s*a).value/e,duration:ta(s)}}const dSe=5;function oQ(t,e,n){const r=Math.max(e-dSe,0);return FY(n-t(r),e-r)}const Jn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},UE=.001;function hSe({duration:t=Jn.duration,bounce:e=Jn.bounce,velocity:n=Jn.velocity,mass:r=Jn.mass}){let s,a;oS(t<=ca(Jn.maxDuration),"Spring duration must be 10 seconds or less","spring-duration-limit");let o=1-e;o=zo(Jn.minDamping,Jn.maxDamping,o),t=zo(Jn.minDuration,Jn.maxDuration,ta(t)),o<1?(s=u=>{const d=u*o,h=d*t,f=d-n,m=UC(u,o),v=Math.exp(-h);return UE-f/m*v},a=u=>{const h=u*o*t,f=h*n+n,m=Math.pow(o,2)*Math.pow(u,2)*t,v=Math.exp(-h),g=UC(Math.pow(u,2),o);return(-s(u)+UE>0?-1:1)*((f-m)*v)/g}):(s=u=>{const d=Math.exp(-u*t),h=(u-n)*t+1;return-UE+d*h},a=u=>{const d=Math.exp(-u*t),h=(n-u)*(t*t);return d*h});const l=5/t,c=mSe(s,a,l);if(t=ca(t),isNaN(c))return{stiffness:Jn.stiffness,damping:Jn.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const fSe=12;function mSe(t,e,n){let r=n;for(let s=1;s<fSe;s++)r=r-t(r)/e(r);return r}function UC(t,e){return t*Math.sqrt(1-e*e)}const pSe=["duration","bounce"],gSe=["stiffness","damping","mass"];function WF(t,e){return e.some(n=>t[n]!==void 0)}function ySe(t){let e={velocity:Jn.velocity,stiffness:Jn.stiffness,damping:Jn.damping,mass:Jn.mass,isResolvedFromDuration:!1,...t};if(!WF(t,gSe)&&WF(t,pSe))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,a=2*zo(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Jn.mass,stiffness:s,damping:a}}else{const n=hSe(t);e={...e,...n,mass:Jn.mass},e.isResolvedFromDuration=!0}return e}function P_(t=Jn.visualDuration,e=Jn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:a},{stiffness:c,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:m}=ySe({...n,velocity:-ta(n.velocity||0)}),v=f||0,g=u/(2*Math.sqrt(c*d)),y=o-a,b=ta(Math.sqrt(c/d)),x=Math.abs(y)<5;r||(r=x?Jn.restSpeed.granular:Jn.restSpeed.default),s||(s=x?Jn.restDelta.granular:Jn.restDelta.default);let S;if(g<1){const _=UC(b,g);S=C=>{const E=Math.exp(-g*b*C);return o-E*((v+g*b*y)/_*Math.sin(_*C)+y*Math.cos(_*C))}}else if(g===1)S=_=>o-Math.exp(-b*_)*(y+(v+b*y)*_);else{const _=b*Math.sqrt(g*g-1);S=C=>{const E=Math.exp(-g*b*C),p=Math.min(_*C,300);return o-E*((v+g*b*y)*Math.sinh(p)+_*y*Math.cosh(p))/_}}const T={calculatedDuration:m&&h||null,next:_=>{const C=S(_);if(m)l.done=_>=h;else{let E=_===0?v:0;g<1&&(E=_===0?ca(v):oQ(S,_,C));const p=Math.abs(E)<=r,w=Math.abs(o-C)<=s;l.done=p&&w}return l.value=l.done?o:C,l},toString:()=>{const _=Math.min(u2(T),C_),C=aQ(E=>T.next(_*E).value,_,30);return _+"ms "+C},toTransition:()=>{}};return T}P_.applyToOptions=t=>{const e=uSe(t,100,P_);return t.ease=e.ease,t.duration=ca(e.duration),t.type="keyframes",t};function zC({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=t[0],f={done:!1,value:h},m=p=>l!==void 0&&p<l||c!==void 0&&p>c,v=p=>l===void 0?c:c===void 0||Math.abs(l-p)<Math.abs(c-p)?l:c;let g=n*e;const y=h+g,b=o===void 0?y:o(y);b!==y&&(g=b-h);const x=p=>-g*Math.exp(-p/r),S=p=>b+x(p),T=p=>{const w=x(p),A=S(p);f.done=Math.abs(w)<=u,f.value=f.done?b:A};let _,C;const E=p=>{m(f.value)&&(_=p,C=P_({keyframes:[f.value,v(f.value)],velocity:oQ(S,p,f.value),damping:s,stiffness:a,restDelta:u,restSpeed:d}))};return E(0),{calculatedDuration:null,next:p=>{let w=!1;return!C&&_===void 0&&(w=!0,T(p),E(p)),_!==void 0&&p>=_?C.next(p-_):(!w&&T(p),f)}}}function vSe(t,e,n){const r=[],s=n||Fl.mix||iQ,a=t.length-1;for(let o=0;o<a;o++){let l=s(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||la:e;l=fb(c,l)}r.push(l)}return r}function xSe(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const a=t.length;if(Qm(a===e.length,"Both input and output ranges must be the same length","range-length"),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=vSe(e,r,s),c=l.length,u=d=>{if(o&&d<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const f=Ov(t[h],t[h+1],d);return l[h](f)};return n?d=>u(zo(t[0],t[a-1],d)):u}function bSe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Ov(0,e,r);t.push(tr(n,1,s))}}function wSe(t){const e=[0];return bSe(e,t.length-1),e}function _Se(t,e){return t.map(n=>n*e)}function jSe(t,e){return t.map(()=>e||GY).splice(0,t.length-1)}function $y({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=MNe(r)?r.map($F):$F(r),a={done:!1,value:e[0]},o=_Se(n&&n.length===e.length?n:wSe(e),t),l=xSe(o,e,{ease:Array.isArray(s)?s:jSe(e,s)});return{calculatedDuration:t,next:c=>(a.value=l(c),a.done=c>=t,a)}}const NSe=t=>t!==null;function d2(t,{repeat:e,repeatType:n="loop"},r,s=1){const a=t.filter(NSe),l=s<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!l||r===void 0?a[l]:r}const SSe={decay:zC,inertia:zC,tween:$y,keyframes:$y,spring:P_};function lQ(t){typeof t.type=="string"&&(t.type=SSe[t.type])}class h2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const ESe=t=>t/100;class f2 extends h2{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==qs.now()&&this.tick(qs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;lQ(e);const{type:n=$y,repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:o=0}=e;let{keyframes:l}=e;const c=n||$y;c!==$y&&typeof l[0]!="number"&&(this.mixKeyframes=fb(ESe,iQ(l[0],l[1])),l=[0,100]);const u=c({...e,keyframes:l});a==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=u2(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:f,repeatDelay:m,type:v,onUpdate:g,finalKeyframe:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const b=this.currentTime-u*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?b<0:b>s;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let S=this.currentTime,T=r;if(h){const p=Math.min(this.currentTime,s)/l;let w=Math.floor(p),A=p%1;!A&&p>=1&&(A=1),A===1&&w--,w=Math.min(w,h+1),!!(w%2)&&(f==="reverse"?(A=1-A,m&&(A-=m/l)):f==="mirror"&&(T=o)),S=zo(0,1,A)*l}const _=x?{done:!1,value:d[0]}:T.next(S);a&&(_.value=a(_.value));let{done:C}=_;!x&&c!==null&&(C=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return E&&v!==zC&&(_.value=d2(d,this.options,y,this.speed)),g&&g(_.value),E&&this.finish(),_}then(e,n){return this.finished.then(e,n)}get duration(){return ta(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ta(e)}get time(){return ta(this.currentTime)}set time(e){var n;e=ca(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(qs.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ta(this.currentTime))}play(){var s,a;if(this.isStopped)return;const{driver:e=cSe,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(a=(s=this.options).onPlay)==null||a.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(qs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function ASe(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Od=t=>t*180/Math.PI,qC=t=>{const e=Od(Math.atan2(t[1],t[0]));return WC(e)},TSe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:qC,rotateZ:qC,skewX:t=>Od(Math.atan(t[1])),skewY:t=>Od(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},WC=t=>(t=t%360,t<0&&(t+=360),t),HF=qC,KF=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),GF=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),CSe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:KF,scaleY:GF,scale:t=>(KF(t)+GF(t))/2,rotateX:t=>WC(Od(Math.atan2(t[6],t[5]))),rotateY:t=>WC(Od(Math.atan2(-t[2],t[0]))),rotateZ:HF,rotate:HF,skewX:t=>Od(Math.atan(t[4])),skewY:t=>Od(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function HC(t){return t.includes("scale")?1:0}function KC(t,e){if(!t||t==="none")return HC(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=CSe,s=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=TSe,s=l}if(!s)return HC(e);const a=r[e],o=s[1].split(",").map(ISe);return typeof a=="function"?a(o):o[a]}const PSe=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return KC(n,e)};function ISe(t){return parseFloat(t.trim())}const Qp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Xp=new Set(Qp),YF=t=>t===Yp||t===et,kSe=new Set(["x","y","z"]),RSe=Qp.filter(t=>!kSe.has(t));function OSe(t){const e=[];return RSe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Gc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>KC(e,"x"),y:(t,{transform:e})=>KC(e,"y")};Gc.translateX=Gc.x;Gc.translateY=Gc.y;const nh=new Set;let GC=!1,YC=!1,QC=!1;function cQ(){if(YC){const t=Array.from(nh).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=OSe(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,o])=>{var l;(l=r.getValue(a))==null||l.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}YC=!1,GC=!1,nh.forEach(t=>t.complete(QC)),nh.clear()}function uQ(){nh.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(YC=!0)})}function MSe(){QC=!0,uQ(),cQ(),QC=!1}class m2{constructor(e,n,r,s,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(nh.add(this),GC||(GC=!0,Dn.read(uQ),Dn.resolveKeyframes(cQ))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const a=s==null?void 0:s.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const l=r.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),s&&a===void 0&&s.set(e[0])}ASe(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),nh.delete(this)}cancel(){this.state==="scheduled"&&(nh.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const DSe=t=>t.startsWith("--");function LSe(t,e,n){DSe(e)?t.style.setProperty(e,n):t.style[e]=n}const $Se=n2(()=>window.ScrollTimeline!==void 0),FSe={};function VSe(t,e){const n=n2(t);return()=>FSe[e]??n()}const dQ=VSe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),py=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,QF={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:py([0,.65,.55,1]),circOut:py([.55,0,1,.45]),backIn:py([.31,.01,.66,-.59]),backOut:py([.33,1.53,.69,.99])};function hQ(t,e){if(t)return typeof t=="function"?dQ()?aQ(t,e):"ease-out":YY(t)?py(t):Array.isArray(t)?t.map(n=>hQ(n,e)||QF.easeOut):QF[t]}function BSe(t,e,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:o="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[e]:n};c&&(d.offset=c);const h=hQ(l,s);Array.isArray(h)&&(d.easing=h);const f={delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),t.animate(d,f)}function fQ(t){return typeof t=="function"&&"applyToOptions"in t}function USe({type:t,...e}){return fQ(t)&&dQ()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class mQ extends h2{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=e,Qm(typeof e.type!="string",`Mini animate() doesn't support "type" as a string.`,"mini-spring");const u=USe(e);this.animation=BSe(n,r,s,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const d=d2(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):LSe(n,r,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var n,r,s;const e=(n=this.options)==null?void 0:n.element;!this.isPseudoElement&&(e!=null&&e.isConnected)&&((s=(r=this.animation).commitStyles)==null||s.call(r))}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return ta(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ta(e)}get time(){return ta(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=ca(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&$Se()?(this.animation.timeline=e,la):n(this)}}const pQ={anticipate:WY,backInOut:qY,circInOut:KY};function zSe(t){return t in pQ}function qSe(t){typeof t.ease=="string"&&zSe(t.ease)&&(t.ease=pQ[t.ease])}const zE=10;class WSe extends mQ{constructor(e){qSe(e),lQ(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:a,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new f2({...o,autoplay:!1}),c=Math.max(zE,qs.now()-this.startTime),u=zo(0,zE,c-zE);n.setWithVelocity(l.sample(Math.max(0,c-u)).value,l.sample(c).value,u),l.stop()}}const XF=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Cu.test(t)||t==="0")&&!t.startsWith("url("));function HSe(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function KSe(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],o=XF(s,e),l=XF(a,e);return oS(o===l,`You are trying to animate ${e} from "${s}" to "${a}". "${o?a:s}" is not an animatable value.`,"value-not-animatable"),!o||!l?!1:HSe(t)||(n==="spring"||fQ(n))&&r}function XC(t){t.duration=0,t.type="keyframes"}const GSe=new Set(["opacity","clipPath","filter","transform"]),YSe=n2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function QSe(t){var d;const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:a,type:o}=t;if(!(((d=e==null?void 0:e.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return YSe()&&n&&GSe.has(n)&&(n!=="transform"||!u)&&!c&&!r&&s!=="mirror"&&a!==0&&o!=="inertia"}const XSe=40;class ZSe extends h2{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:o="loop",keyframes:l,name:c,motionValue:u,element:d,...h}){var v;super(),this.stop=()=>{var g,y;this._animation&&(this._animation.stop(),(g=this.stopTimeline)==null||g.call(this)),(y=this.keyframeResolver)==null||y.cancel()},this.createdAt=qs.now();const f={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:o,name:c,motionValue:u,element:d,...h},m=(d==null?void 0:d.KeyframeResolver)||m2;this.keyframeResolver=new m(l,(g,y,b)=>this.onKeyframesResolved(g,y,f,!b),c,u,d),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(e,n,r,s){var y,b;this.keyframeResolver=void 0;const{name:a,type:o,velocity:l,delay:c,isHandoff:u,onUpdate:d}=r;this.resolvedAt=qs.now(),KSe(e,a,o,l)||((Fl.instantAnimations||!c)&&(d==null||d(d2(e,r,n))),e[0]=e[e.length-1],XC(r),r.repeat=0);const f={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>XSe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},m=!u&&QSe(f),v=(b=(y=f.motionValue)==null?void 0:y.owner)==null?void 0:b.current,g=m?new WSe({...f,element:v}):new f2(f);g.finished.then(()=>{this.notifyFinished()}).catch(la),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),MSe()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function gQ(t,e,n,r=0,s=1){const a=Array.from(t).sort((u,d)=>u.sortNodePosition(d)).indexOf(e),o=t.size,l=(o-1)*r;return typeof n=="function"?n(a,o):s===1?a*r:l-a*r}const JSe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function e1e(t){const e=JSe.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}const t1e=4;function yQ(t,e,n=1){Qm(n<=t1e,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`,"max-css-var-depth");const[r,s]=e1e(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const o=a.trim();return DY(o)?parseFloat(o):o}return a2(s)?yQ(s,e,n+1):s}const n1e={type:"spring",stiffness:500,damping:25,restSpeed:10},r1e=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),s1e={type:"keyframes",duration:.8},i1e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},a1e=(t,{keyframes:e})=>e.length>2?s1e:Xp.has(t)?t.startsWith("scale")?r1e(e[1]):n1e:i1e,o1e=t=>t!==null;function l1e(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(o1e),a=e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}function vQ(t,e){if(t!=null&&t.inherit&&e){const{inherit:n,...r}=t;return{...e,...r}}return t}function p2(t,e){const n=(t==null?void 0:t[e])??(t==null?void 0:t.default)??t;return n!==t?vQ(n,t):n}function c1e({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const g2=(t,e,n,r={},s,a)=>o=>{const l=p2(r,t)||{},c=l.delay||r.delay||0;let{elapsed:u=0}=r;u=u-ca(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-u,onUpdate:f=>{e.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:a?void 0:s};c1e(l)||Object.assign(d,a1e(t,d)),d.duration&&(d.duration=ca(d.duration)),d.repeatDelay&&(d.repeatDelay=ca(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(XC(d),d.delay===0&&(h=!0)),(Fl.instantAnimations||Fl.skipAnimations||s!=null&&s.shouldSkipAnimations)&&(h=!0,XC(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,h&&!a&&e.get()!==void 0){const f=l1e(d.keyframes,l);if(f!==void 0){Dn.update(()=>{d.onUpdate(f),d.onComplete()});return}}return l.isSync?new f2(d):new ZSe(d)};function ZF(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function y2(t,e,n,r){if(typeof e=="function"){const[s,a]=ZF(r);e=e(n!==void 0?n:t.custom,s,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,a]=ZF(r);e=e(n!==void 0?n:t.custom,s,a)}return e}function hm(t,e,n){const r=t.getProps();return y2(r,e,n!==void 0?n:r.custom,t)}const xQ=new Set(["width","height","top","left","right","bottom",...Qp]),JF=30,u1e=t=>!isNaN(parseFloat(t));class d1e{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var a;const s=qs.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=qs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=u1e(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new r2);const r=this.events[e].add(n);return e==="change"?()=>{r(),Dn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=qs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>JF)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,JF);return FY(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Xm(t,e){return new d1e(t,e)}const ZC=t=>Array.isArray(t);function h1e(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Xm(n))}function f1e(t){return ZC(t)?t[t.length-1]||0:t}function m1e(t,e){const n=hm(t,e);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const o in a){const l=f1e(a[o]);h1e(t,o,l)}}const Is=t=>!!(t&&t.getVelocity);function p1e(t){return!!(Is(t)&&t.add)}function JC(t,e){const n=t.getValue("willChange");if(p1e(n))return n.add(e);if(!n&&Fl.WillChange){const r=new Fl.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function v2(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const g1e="framerAppearId",bQ="data-"+v2(g1e);function wQ(t){return t.props[bQ]}function y1e({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function _Q(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:a,transitionEnd:o,...l}=e;const c=t.getDefaultTransition();a=a?vQ(a,c):c;const u=a==null?void 0:a.reduceMotion;r&&(a=r);const d=[],h=s&&t.animationState&&t.animationState.getState()[s];for(const f in l){const m=t.getValue(f,t.latestValues[f]??null),v=l[f];if(v===void 0||h&&y1e(h,f))continue;const g={delay:n,...p2(a||{},f)},y=m.get();if(y!==void 0&&!m.isAnimating&&!Array.isArray(v)&&v===y&&!g.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const T=wQ(t);if(T){const _=window.MotionHandoffAnimation(T,f,Dn);_!==null&&(g.startTime=_,b=!0)}}JC(t,f);const x=u??t.shouldReduceMotion;m.start(g2(f,m,v,x&&xQ.has(f)?{type:!1}:g,t,b));const S=m.animation;S&&d.push(S)}if(o){const f=()=>Dn.update(()=>{o&&m1e(t,o)});d.length?Promise.all(d).then(f):f()}return d}function eP(t,e,n={}){var c;const r=hm(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(_Q(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=s;return v1e(t,e,u,d,h,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,d]=l==="beforeChildren"?[a,o]:[o,a];return u().then(()=>d())}else return Promise.all([a(),o(n.delay)])}function v1e(t,e,n=0,r=0,s=0,a=1,o){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(eP(c,e,{...o,delay:n+(typeof r=="function"?0:r)+gQ(t.variantChildren,c,r,s,a)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function x1e(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(a=>eP(t,a,n));r=Promise.all(s)}else if(typeof e=="string")r=eP(t,e,n);else{const s=typeof e=="function"?hm(t,e,n.custom):e;r=Promise.all(_Q(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const b1e={test:t=>t==="auto",parse:t=>t},jQ=t=>e=>e.test(t),NQ=[Yp,et,Mo,yc,KNe,HNe,b1e],eV=t=>NQ.find(jQ(t));function w1e(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||$Y(t):!0}const _1e=new Set(["brightness","contrast","saturate","opacity"]);function j1e(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(o2)||[];if(!r)return t;const s=n.replace(r,"");let a=_1e.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+s+")"}const N1e=/\b([a-z-]*)\(.*?\)/gu,tP={...Cu,getAnimatableNone:t=>{const e=t.match(N1e);return e?e.map(j1e).join(" "):t}},tV={...Yp,transform:Math.round},S1e={rotate:yc,rotateX:yc,rotateY:yc,rotateZ:yc,scale:v0,scaleX:v0,scaleY:v0,scaleZ:v0,skew:yc,skewX:yc,skewY:yc,distance:et,translateX:et,translateY:et,translateZ:et,x:et,y:et,z:et,perspective:et,transformPerspective:et,opacity:Mv,originX:BF,originY:BF,originZ:et},x2={borderWidth:et,borderTopWidth:et,borderRightWidth:et,borderBottomWidth:et,borderLeftWidth:et,borderRadius:et,borderTopLeftRadius:et,borderTopRightRadius:et,borderBottomRightRadius:et,borderBottomLeftRadius:et,width:et,maxWidth:et,height:et,maxHeight:et,top:et,right:et,bottom:et,left:et,inset:et,insetBlock:et,insetBlockStart:et,insetBlockEnd:et,insetInline:et,insetInlineStart:et,insetInlineEnd:et,padding:et,paddingTop:et,paddingRight:et,paddingBottom:et,paddingLeft:et,paddingBlock:et,paddingBlockStart:et,paddingBlockEnd:et,paddingInline:et,paddingInlineStart:et,paddingInlineEnd:et,margin:et,marginTop:et,marginRight:et,marginBottom:et,marginLeft:et,marginBlock:et,marginBlockStart:et,marginBlockEnd:et,marginInline:et,marginInlineStart:et,marginInlineEnd:et,fontSize:et,backgroundPositionX:et,backgroundPositionY:et,...S1e,zIndex:tV,fillOpacity:Mv,strokeOpacity:Mv,numOctaves:tV},E1e={...x2,color:Ar,backgroundColor:Ar,outlineColor:Ar,fill:Ar,stroke:Ar,borderColor:Ar,borderTopColor:Ar,borderRightColor:Ar,borderBottomColor:Ar,borderLeftColor:Ar,filter:tP,WebkitFilter:tP},SQ=t=>E1e[t];function EQ(t,e){let n=SQ(t);return n!==tP&&(n=Cu),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const A1e=new Set(["auto","none","0"]);function T1e(t,e,n){let r=0,s;for(;r<t.length&&!s;){const a=t[r];typeof a=="string"&&!A1e.has(a)&&Dv(a).values.length&&(s=t[r]),r++}if(s&&n)for(const a of e)t[a]=EQ(n,s)}class C1e extends m2{constructor(e,n,r,s,a){super(e,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let h=e[d];if(typeof h=="string"&&(h=h.trim(),a2(h))){const f=yQ(h,n.current);f!==void 0&&(e[d]=f),d===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!xQ.has(r)||e.length!==2)return;const[s,a]=e,o=eV(s),l=eV(a),c=VF(s),u=VF(a);if(c!==u&&Gc[r]){this.needsMeasurement=!0;return}if(o!==l)if(YF(o)&&YF(l))for(let d=0;d<e.length;d++){const h=e[d];typeof h=="string"&&(e[d]=parseFloat(h))}else Gc[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||w1e(e[s]))&&r.push(s);r.length&&T1e(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Gc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var l;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=Gc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}const P1e=new Set(["opacity","clipPath","filter","transform"]);function AQ(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){const s=document.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t).filter(r=>r!=null)}const TQ=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function nP(t){return LY(t)&&"offsetHeight"in t}const{schedule:b2,cancel:Mtt}=QY(queueMicrotask,!1),Ca={x:!1,y:!1};function CQ(){return Ca.x||Ca.y}function I1e(t){return t==="x"||t==="y"?Ca[t]?null:(Ca[t]=!0,()=>{Ca[t]=!1}):Ca.x||Ca.y?null:(Ca.x=Ca.y=!0,()=>{Ca.x=Ca.y=!1})}function PQ(t,e){const n=AQ(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function k1e(t){return!(t.pointerType==="touch"||CQ())}function R1e(t,e,n={}){const[r,s,a]=PQ(t,n);return r.forEach(o=>{let l=!1,c=!1,u;const d=()=>{o.removeEventListener("pointerleave",v)},h=y=>{u&&(u(y),u=void 0),d()},f=y=>{l=!1,window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",f),c&&(c=!1,h(y))},m=()=>{l=!0,window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",f,s)},v=y=>{if(y.pointerType!=="touch"){if(l){c=!0;return}h(y)}},g=y=>{if(!k1e(y))return;c=!1;const b=e(o,y);typeof b=="function"&&(u=b,o.addEventListener("pointerleave",v,s))};o.addEventListener("pointerenter",g,s),o.addEventListener("pointerdown",m,s)}),a}const IQ=(t,e)=>e?t===e?!0:IQ(t,e.parentElement):!1,w2=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,O1e=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function M1e(t){return O1e.has(t.tagName)||t.isContentEditable===!0}const D1e=new Set(["INPUT","SELECT","TEXTAREA"]);function L1e(t){return D1e.has(t.tagName)||t.isContentEditable===!0}const dw=new WeakSet;function nV(t){return e=>{e.key==="Enter"&&t(e)}}function qE(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const $1e=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=nV(()=>{if(dw.has(n))return;qE(n,"down");const s=nV(()=>{qE(n,"up")}),a=()=>qE(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function rV(t){return w2(t)&&!CQ()}const sV=new WeakSet;function F1e(t,e,n={}){const[r,s,a]=PQ(t,n),o=l=>{const c=l.currentTarget;if(!rV(l)||sV.has(l))return;dw.add(c),n.stopPropagation&&sV.add(l);const u=e(c,l),d=(m,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),dw.has(c)&&dw.delete(c),rV(m)&&typeof u=="function"&&u(m,{success:v})},h=m=>{d(m,c===window||c===document||n.useGlobalTarget||IQ(c,m.target))},f=m=>{d(m,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,s),nP(l)&&(l.addEventListener("focus",u=>$1e(u,s)),!M1e(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),a}function _2(t){return LY(t)&&"ownerSVGElement"in t}const hw=new WeakMap;let vc;const kQ=(t,e,n)=>(r,s)=>s&&s[0]?s[0][t+"Size"]:_2(r)&&"getBBox"in r?r.getBBox()[e]:r[n],V1e=kQ("inline","width","offsetWidth"),B1e=kQ("block","height","offsetHeight");function U1e({target:t,borderBoxSize:e}){var n;(n=hw.get(t))==null||n.forEach(r=>{r(t,{get width(){return V1e(t,e)},get height(){return B1e(t,e)}})})}function z1e(t){t.forEach(U1e)}function q1e(){typeof ResizeObserver>"u"||(vc=new ResizeObserver(z1e))}function W1e(t,e){vc||q1e();const n=AQ(t);return n.forEach(r=>{let s=hw.get(r);s||(s=new Set,hw.set(r,s)),s.add(e),vc==null||vc.observe(r)}),()=>{n.forEach(r=>{const s=hw.get(r);s==null||s.delete(e),s!=null&&s.size||vc==null||vc.unobserve(r)})}}const fw=new Set;let Bf;function H1e(){Bf=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};fw.forEach(e=>e(t))},window.addEventListener("resize",Bf)}function K1e(t){return fw.add(t),Bf||H1e(),()=>{fw.delete(t),!fw.size&&typeof Bf=="function"&&(window.removeEventListener("resize",Bf),Bf=void 0)}}function iV(t,e){return typeof t=="function"?K1e(t):W1e(t,e)}function G1e(t){return _2(t)&&t.tagName==="svg"}const Y1e=[...NQ,Ar,Cu],Q1e=t=>Y1e.find(jQ(t)),aV=()=>({translate:0,scale:1,origin:0,originPoint:0}),Uf=()=>({x:aV(),y:aV()}),oV=()=>({min:0,max:0}),Lr=()=>({x:oV(),y:oV()}),X1e=new WeakMap;function lS(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Lv(t){return typeof t=="string"||Array.isArray(t)}const j2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],N2=["initial",...j2];function cS(t){return lS(t.animate)||N2.some(e=>Lv(t[e]))}function RQ(t){return!!(cS(t)||t.variants)}function Z1e(t,e,n){for(const r in e){const s=e[r],a=n[r];if(Is(s))t.addValue(r,s);else if(Is(a))t.addValue(r,Xm(s,{owner:t}));else if(a!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,Xm(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const rP={current:null},OQ={current:!1},J1e=typeof window<"u";function eEe(){if(OQ.current=!0,!!J1e)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>rP.current=t.matches;t.addEventListener("change",e),e()}else rP.current=!1}const lV=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let I_={};function MQ(t){I_=t}function tEe(){return I_}class nEe{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,skipAnimations:a,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=m2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=qs.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Dn.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=l;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.skipAnimationsConfig=a,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=cS(n),this.isVariantNode=RQ(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in f){const v=f[m];u[m]!==void 0&&Is(v)&&v.set(u[m])}}mount(e){var n,r;if(this.hasBeenMounted)for(const s in this.initialValues)(n=this.values.get(s))==null||n.jump(this.initialValues[s]),this.latestValues[s]=this.initialValues[s];this.current=e,X1e.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,a)=>this.bindToMotionValue(a,s)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(OQ.current||eEe(),this.shouldReduceMotion=rP.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var e;this.projection&&this.projection.unmount(),Tu(this.notifyUpdate),Tu(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),n.accelerate&&P1e.has(e)&&this.current instanceof HTMLElement){const{factory:o,keyframes:l,times:c,ease:u,duration:d}=n.accelerate,h=new mQ({element:this.current,name:e,keyframes:l,times:c,ease:u,duration:ca(d)}),f=o(h);this.valueSubscriptions.set(e,()=>{f(),h.cancel()});return}const r=Xp.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Dn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in I_){const n=I_[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Lr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<lV.length;r++){const s=lV[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,o=e[a];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=Z1e(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Xm(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(DY(r)||$Y(r))?r=parseFloat(r):!Q1e(r)&&Cu.test(n)&&(r=EQ(e,n)),this.setBaseTarget(e,Is(r)?r.get():r)),Is(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var a;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=y2(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Is(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new r2),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){b2.render(this.render)}}class DQ extends nEe{constructor(){super(...arguments),this.KeyframeResolver=C1e}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const r=e.style;return r?r[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Is(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class Qu{constructor(e){this.isMounted=!1,this.node=e}update(){}}function LQ({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function rEe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function sEe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function WE(t){return t===void 0||t===1}function sP({scale:t,scaleX:e,scaleY:n}){return!WE(t)||!WE(e)||!WE(n)}function jd(t){return sP(t)||$Q(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function $Q(t){return cV(t.x)||cV(t.y)}function cV(t){return t&&t!=="0%"}function k_(t,e,n){const r=t-n,s=e*r;return n+s}function uV(t,e,n,r,s){return s!==void 0&&(t=k_(t,s,r)),k_(t,n,r)+e}function iP(t,e=0,n=1,r,s){t.min=uV(t.min,e,n,r,s),t.max=uV(t.max,e,n,r,s)}function FQ(t,{x:e,y:n}){iP(t.x,e.translate,e.scale,e.originPoint),iP(t.y,n.translate,n.scale,n.originPoint)}const dV=.999999999999,hV=1.0000000000001;function iEe(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let a,o;for(let l=0;l<s;l++){a=n[l],o=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&qf(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,FQ(t,o)),r&&jd(a.latestValues)&&qf(t,a.latestValues))}e.x<hV&&e.x>dV&&(e.x=1),e.y<hV&&e.y>dV&&(e.y=1)}function zf(t,e){t.min=t.min+e,t.max=t.max+e}function fV(t,e,n,r,s=.5){const a=tr(t.min,t.max,s);iP(t,e,n,a,r)}function qf(t,e){fV(t.x,e.x,e.scaleX,e.scale,e.originX),fV(t.y,e.y,e.scaleY,e.scale,e.originY)}function VQ(t,e){return LQ(sEe(t.getBoundingClientRect(),e))}function aEe(t,e,n){const r=VQ(t,n),{scroll:s}=e;return s&&(zf(r.x,s.offset.x),zf(r.y,s.offset.y)),r}const oEe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},lEe=Qp.length;function cEe(t,e,n){let r="",s=!0;for(let a=0;a<lEe;a++){const o=Qp[a],l=t[o];if(l===void 0)continue;let c=!0;if(typeof l=="number")c=l===(o.startsWith("scale")?1:0);else{const u=parseFloat(l);c=o.startsWith("scale")?u===1:u===0}if(!c||n){const u=TQ(l,x2[o]);if(!c){s=!1;const d=oEe[o]||o;r+=`${d}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function S2(t,e,n){const{style:r,vars:s,transformOrigin:a}=t;let o=!1,l=!1;for(const c in e){const u=e[c];if(Xp.has(c)){o=!0;continue}else if(ZY(c)){s[c]=u;continue}else{const d=TQ(u,x2[c]);c.startsWith("origin")?(l=!0,a[c]=d):r[c]=d}}if(e.transform||(o||n?r.transform=cEe(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=a;r.transformOrigin=`${c} ${u} ${d}`}}function BQ(t,{style:e,vars:n},r,s){const a=t.style;let o;for(o in e)a[o]=e[o];s==null||s.applyProjectionStyles(a,r);for(o in n)a.setProperty(o,n[o])}function mV(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Fg={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(et.test(t))t=parseFloat(t);else return t;const n=mV(t,e.target.x),r=mV(t,e.target.y);return`${n}% ${r}%`}},uEe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Cu.parse(t);if(s.length>5)return r;const a=Cu.createTransformer(t),o=typeof s[0]!="number"?1:0,l=n.x.scale*e.x,c=n.y.scale*e.y;s[0+o]/=l,s[1+o]/=c;const u=tr(l,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),a(s)}},aP={borderRadius:{...Fg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Fg,borderTopRightRadius:Fg,borderBottomLeftRadius:Fg,borderBottomRightRadius:Fg,boxShadow:uEe};function UQ(t,{layout:e,layoutId:n}){return Xp.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!aP[t]||t==="opacity")}function E2(t,e,n){var o;const r=t.style,s=e==null?void 0:e.style,a={};if(!r)return a;for(const l in r)(Is(r[l])||s&&Is(s[l])||UQ(l,t)||((o=n==null?void 0:n.getValue(l))==null?void 0:o.liveStyle)!==void 0)&&(a[l]=r[l]);return a}function dEe(t){return window.getComputedStyle(t)}class hEe extends DQ{constructor(){super(...arguments),this.type="html",this.renderInstance=BQ}readValueFromInstance(e,n){var r;if(Xp.has(n))return(r=this.projection)!=null&&r.isProjecting?HC(n):PSe(e,n);{const s=dEe(e),a=(ZY(n)?s.getPropertyValue(n):s[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return VQ(e,n)}build(e,n,r){S2(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return E2(e,n,r)}}const fEe={offset:"stroke-dashoffset",array:"stroke-dasharray"},mEe={offset:"strokeDashoffset",array:"strokeDasharray"};function pEe(t,e,n=1,r=0,s=!0){t.pathLength=1;const a=s?fEe:mEe;t[a.offset]=`${-r}`,t[a.array]=`${e} ${n}`}const gEe=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function zQ(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:o=0,...l},c,u,d){if(S2(t,l,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:f}=t;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox);for(const m of gEe)h[m]!==void 0&&(f[m]=h[m],delete h[m]);e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&pEe(h,s,a,o,!1)}const qQ=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),WQ=t=>typeof t=="string"&&t.toLowerCase()==="svg";function yEe(t,e,n,r){BQ(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(qQ.has(s)?s:v2(s),e.attrs[s])}function HQ(t,e,n){const r=E2(t,e,n);for(const s in t)if(Is(t[s])||Is(e[s])){const a=Qp.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=t[s]}return r}class vEe extends DQ{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Lr}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Xp.has(n)){const r=SQ(n);return r&&r.default||0}return n=qQ.has(n)?n:v2(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return HQ(e,n,r)}build(e,n,r){zQ(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){yEe(e,n,r,s)}mount(e){this.isSVGTag=WQ(e.tagName),super.mount(e)}}const xEe=N2.length;function KQ(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?KQ(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<xEe;n++){const r=N2[n],s=t.props[r];(Lv(s)||s===!1)&&(e[r]=s)}return e}function GQ(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const bEe=[...j2].reverse(),wEe=j2.length;function _Ee(t){return e=>Promise.all(e.map(({animation:n,options:r})=>x1e(t,n,r)))}function jEe(t){let e=_Ee(t),n=pV(),r=!0;const s=c=>(u,d)=>{var f;const h=hm(t,d,c==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:m,transitionEnd:v,...g}=h;u={...u,...g,...v}}return u};function a(c){e=c(t)}function o(c){const{props:u}=t,d=KQ(t.parent)||{},h=[],f=new Set;let m={},v=1/0;for(let y=0;y<wEe;y++){const b=bEe[y],x=n[b],S=u[b]!==void 0?u[b]:d[b],T=Lv(S),_=b===c?x.isActive:null;_===!1&&(v=y);let C=S===d[b]&&S!==u[b]&&T;if(C&&r&&t.manuallyAnimateOnMount&&(C=!1),x.protectedKeys={...m},!x.isActive&&_===null||!S&&!x.prevProp||lS(S)||typeof S=="boolean")continue;if(b==="exit"&&x.isActive&&_!==!0){x.prevResolvedValues&&(m={...m,...x.prevResolvedValues});continue}const E=NEe(x.prevProp,S);let p=E||b===c&&x.isActive&&!C&&T||y>v&&T,w=!1;const A=Array.isArray(S)?S:[S];let P=A.reduce(s(b),{});_===!1&&(P={});const{prevResolvedValues:I={}}=x,k={...I,...P},L=O=>{p=!0,f.has(O)&&(w=!0,f.delete(O)),x.needsAnimating[O]=!0;const $=t.getValue(O);$&&($.liveStyle=!1)};for(const O in k){const $=P[O],D=I[O];if(m.hasOwnProperty(O))continue;let K=!1;ZC($)&&ZC(D)?K=!GQ($,D):K=$!==D,K?$!=null?L(O):f.add(O):$!==void 0&&f.has(O)?L(O):x.protectedKeys[O]=!0}x.prevProp=S,x.prevResolvedValues=P,x.isActive&&(m={...m,...P}),r&&t.blockInitialAnimation&&(p=!1);const U=C&&E;p&&(!U||w)&&h.push(...A.map(O=>{const $={type:b};if(typeof O=="string"&&r&&!U&&t.manuallyAnimateOnMount&&t.parent){const{parent:D}=t,K=hm(D,O);if(D.enteringChildren&&K){const{delayChildren:ie}=K.transition||{};$.delay=gQ(D.enteringChildren,t,ie)}}return{animation:O,options:$}}))}if(f.size){const y={};if(typeof u.initial!="boolean"){const b=hm(t,Array.isArray(u.initial)?u.initial[0]:u.initial);b&&b.transition&&(y.transition=b.transition)}f.forEach(b=>{const x=t.getBaseTarget(b),S=t.getValue(b);S&&(S.liveStyle=!0),y[b]=x??null}),h.push({animation:y})}let g=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(h):Promise.resolve()}function l(c,u){var h;if(n[c].isActive===u)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(f=>{var m;return(m=f.animationState)==null?void 0:m.setActive(c,u)}),n[c].isActive=u;const d=o(c);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:o,setActive:l,setAnimateFunction:a,getState:()=>n,reset:()=>{n=pV()}}}function NEe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!GQ(e,t):!1}function md(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function pV(){return{animate:md(!0),whileInView:md(),whileHover:md(),whileTap:md(),whileDrag:md(),whileFocus:md(),exit:md()}}function gV(t,e){t.min=e.min,t.max=e.max}function Aa(t,e){gV(t.x,e.x),gV(t.y,e.y)}function yV(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const YQ=1e-4,SEe=1-YQ,EEe=1+YQ,QQ=.01,AEe=0-QQ,TEe=0+QQ;function Ws(t){return t.max-t.min}function CEe(t,e,n){return Math.abs(t-e)<=n}function vV(t,e,n,r=.5){t.origin=r,t.originPoint=tr(e.min,e.max,t.origin),t.scale=Ws(n)/Ws(e),t.translate=tr(n.min,n.max,t.origin)-t.originPoint,(t.scale>=SEe&&t.scale<=EEe||isNaN(t.scale))&&(t.scale=1),(t.translate>=AEe&&t.translate<=TEe||isNaN(t.translate))&&(t.translate=0)}function Fy(t,e,n,r){vV(t.x,e.x,n.x,r?r.originX:void 0),vV(t.y,e.y,n.y,r?r.originY:void 0)}function xV(t,e,n){t.min=n.min+e.min,t.max=t.min+Ws(e)}function PEe(t,e,n){xV(t.x,e.x,n.x),xV(t.y,e.y,n.y)}function bV(t,e,n){t.min=e.min-n.min,t.max=t.min+Ws(e)}function R_(t,e,n){bV(t.x,e.x,n.x),bV(t.y,e.y,n.y)}function wV(t,e,n,r,s){return t-=e,t=k_(t,1/n,r),s!==void 0&&(t=k_(t,1/s,r)),t}function IEe(t,e=0,n=1,r=.5,s,a=t,o=t){if(Mo.test(e)&&(e=parseFloat(e),e=tr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=tr(a.min,a.max,r);t===a&&(l-=e),t.min=wV(t.min,e,n,l,s),t.max=wV(t.max,e,n,l,s)}function _V(t,e,[n,r,s],a,o){IEe(t,e[n],e[r],e[s],e.scale,a,o)}const kEe=["x","scaleX","originX"],REe=["y","scaleY","originY"];function jV(t,e,n,r){_V(t.x,e,kEe,n?n.x:void 0,r?r.x:void 0),_V(t.y,e,REe,n?n.y:void 0,r?r.y:void 0)}function NV(t){return t.translate===0&&t.scale===1}function XQ(t){return NV(t.x)&&NV(t.y)}function SV(t,e){return t.min===e.min&&t.max===e.max}function OEe(t,e){return SV(t.x,e.x)&&SV(t.y,e.y)}function EV(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function ZQ(t,e){return EV(t.x,e.x)&&EV(t.y,e.y)}function AV(t){return Ws(t.x)/Ws(t.y)}function TV(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function mo(t){return[t("x"),t("y")]}function MEe(t,e,n){let r="";const s=t.x.translate/e.x,a=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||a||o)&&(r=`translate3d(${s}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:f,skewX:m,skewY:v}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),m&&(r+=`skewX(${m}deg) `),v&&(r+=`skewY(${v}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const JQ=["TopLeft","TopRight","BottomLeft","BottomRight"],DEe=JQ.length,CV=t=>typeof t=="string"?parseFloat(t):t,PV=t=>typeof t=="number"||et.test(t);function LEe(t,e,n,r,s,a){s?(t.opacity=tr(0,n.opacity??1,$Ee(r)),t.opacityExit=tr(e.opacity??1,0,FEe(r))):a&&(t.opacity=tr(e.opacity??1,n.opacity??1,r));for(let o=0;o<DEe;o++){const l=`border${JQ[o]}Radius`;let c=IV(e,l),u=IV(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||PV(c)===PV(u)?(t[l]=Math.max(tr(CV(c),CV(u),r),0),(Mo.test(u)||Mo.test(c))&&(t[l]+="%")):t[l]=u}(e.rotate||n.rotate)&&(t.rotate=tr(e.rotate||0,n.rotate||0,r))}function IV(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const $Ee=eX(0,.5,HY),FEe=eX(.5,.95,la);function eX(t,e,n){return r=>r<t?0:r>e?1:n(Ov(t,e,r))}function VEe(t,e,n){const r=Is(t)?t:Xm(t);return r.start(g2("",r,e,n)),r.animation}function $v(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const BEe=(t,e)=>t.depth-e.depth;class UEe{constructor(){this.children=[],this.isDirty=!1}add(e){t2(this.children,e),this.isDirty=!0}remove(e){A_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(BEe),this.isDirty=!1,this.children.forEach(e)}}function zEe(t,e){const n=qs.now(),r=({timestamp:s})=>{const a=s-n;a>=e&&(Tu(r),t(a-e))};return Dn.setup(r,!0),()=>Tu(r)}function mw(t){return Is(t)?t.get():t}class qEe{constructor(){this.members=[]}add(e){t2(this.members,e);for(let n=this.members.length-1;n>=0;n--){const r=this.members[n];if(r===e||r===this.lead||r===this.prevLead)continue;const s=r.instance;s&&s.isConnected===!1&&r.isPresent!==!1&&!r.snapshot&&A_(this.members,r)}e.scheduleRender()}remove(e){if(A_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s],o=a.instance;if(a.isPresent!==!1&&(!o||o.isConnected!==!1)){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const s=r.options.layoutDependency,a=e.options.layoutDependency;if(!(s!==void 0&&a!==void 0&&s===a)){const c=r.instance;c&&c.isConnected===!1&&!r.snapshot||(e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:l}=e.options;l===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const pw={hasAnimatedSinceResize:!0,hasEverUpdated:!1},HE=["","X","Y","Z"],WEe=1e3;let HEe=0;function KE(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function tX(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=wQ(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Dn,!(s||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&tX(r)}function nX({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},l=e==null?void 0:e()){this.id=HEe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(YEe),this.nodes.forEach(JEe),this.nodes.forEach(eAe),this.nodes.forEach(QEe)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new UEe)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new r2),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=_2(o)&&!G1e(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let d,h=0;const f=()=>this.root.updateBlockedByResize=!1;Dn.read(()=>{h=window.innerWidth}),t(o,()=>{const m=window.innerWidth;m!==h&&(h=m,this.root.updateBlockedByResize=!0,d&&d(),d=zEe(f,250),pw.hasAnimatedSinceResize&&(pw.hasAnimatedSinceResize=!1,this.nodes.forEach(OV)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||iAe,{onLayoutAnimationStart:g,onLayoutAnimationComplete:y}=u.getProps(),b=!this.targetLayout||!ZQ(this.targetLayout,m),x=!h&&f;if(this.options.layoutRoot||this.resumeFrom||x||h&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const S={...p2(v,"layout"),onPlay:g,onComplete:y};(u.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S),this.setAnimationOrigin(d,x)}else h||OV(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Tu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(tAe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&tX(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(kV);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(RV);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(ZEe),this.nodes.forEach(KEe),this.nodes.forEach(GEe)):this.nodes.forEach(RV),this.clearAllSnapshots();const l=qs.now();ls.delta=zo(0,1e3/60,l-ls.timestamp),ls.timestamp=l,ls.isProcessing=!0,$E.update.process(ls),$E.preRender.process(ls),$E.render.process(ls),ls.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,b2.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(XEe),this.sharedNodes.forEach(nAe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Dn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Dn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ws(this.snapshot.measuredBox.x)&&!Ws(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Lr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!XQ(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&this.instance&&(l||jd(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),aAe(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return Lr();const l=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(oAe))){const{scroll:d}=this.root;d&&(zf(l.x,d.offset.x),zf(l.y,d.offset.y))}return l}removeElementScroll(o){var c;const l=Lr();if(Aa(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Aa(l,o),zf(l.x,h.offset.x),zf(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const c=Lr();Aa(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&qf(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),jd(d.latestValues)&&qf(c,d.latestValues)}return jd(this.latestValues)&&qf(c,this.latestValues),c}removeTransform(o){const l=Lr();Aa(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!jd(u.latestValues))continue;sP(u.latestValues)&&u.updateSnapshot();const d=Lr(),h=u.measurePageBox();Aa(d,h),jV(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return jd(this.latestValues)&&jV(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ls.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var m;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!this.layout||!(d||h))return;this.resolvedRelativeTargetAt=ls.timestamp;const f=this.getClosestProjectingParent();f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Lr(),this.targetWithTransforms=Lr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),PEe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Aa(this.target,this.layout.layoutBox),FQ(this.target,this.targetDelta)):Aa(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||sP(this.parent.latestValues)||$Q(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,l,c){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Lr(),this.relativeTargetOrigin=Lr(),R_(this.relativeTargetOrigin,l,c),Aa(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var v;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ls.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Aa(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;iEe(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Lr());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(yV(this.prevProjectionDelta.x,this.projectionDelta.x),yV(this.prevProjectionDelta.y,this.projectionDelta.y)),Fy(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!TV(this.projectionDelta.x,this.prevProjectionDelta.x)||!TV(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Uf(),this.projectionDelta=Uf(),this.projectionDeltaWithTransform=Uf()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=Uf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=Lr(),m=c?c.source:void 0,v=this.layout?this.layout.source:void 0,g=m!==v,y=this.getStack(),b=!y||y.members.length<=1,x=!!(g&&!b&&this.options.crossfade===!0&&!this.path.some(sAe));this.animationProgress=0;let S;this.mixTargetDelta=T=>{const _=T/1e3;MV(h.x,o.x,_),MV(h.y,o.y,_),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(R_(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),rAe(this.relativeTarget,this.relativeTargetOrigin,f,_),S&&OEe(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=Lr()),Aa(S,this.relativeTarget)),g&&(this.animationValues=d,LEe(d,u,this.latestValues,_,x,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Tu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Dn.update(()=>{pw.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Xm(0)),this.currentAnimation=VEe(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(WEe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&rX(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Lr();const h=Ws(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=Ws(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}Aa(l,c),qf(l,d),Fy(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new qEe),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&KE("z",o,u,this.animationValues);for(let d=0;d<HE.length;d++)KE(`rotate${HE[d]}`,o,u,this.animationValues),KE(`skew${HE[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=mw(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=mw(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!jd(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=MEe(this.projectionDeltaWithTransform,this.treeScale,d);c&&(h=c(d,h)),o.transform=h;const{x:f,y:m}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${m.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const v in aP){if(d[v]===void 0)continue;const{correct:g,applyTo:y,isCSSVariable:b}=aP[v],x=h==="none"?d[v]:g(d[v],u);if(y){const S=y.length;for(let T=0;T<S;T++)o[y[T]]=x}else b?this.options.visualElement.renderState.vars[v]=x:o[v]=x}this.options.layoutId&&(o.pointerEvents=u===this?mw(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(kV),this.root.sharedNodes.clear()}}}function KEe(t){t.updateLayout()}function GEe(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:a}=t.options,o=e.source!==t.layout.source;a==="size"?mo(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],m=Ws(f);f.min=r[h].min,f.max=f.min+m}):rX(a,e.layoutBox,r)&&mo(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],m=Ws(r[h]);f.max=f.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const l=Uf();Fy(l,r,e.layoutBox);const c=Uf();o?Fy(c,t.applyTransform(s,!0),e.measuredBox):Fy(c,r,e.layoutBox);const u=!XQ(l);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const v=Lr();R_(v,e.layoutBox,f.layoutBox);const g=Lr();R_(g,r,m.layoutBox),ZQ(v,g)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=v,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function YEe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function QEe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function XEe(t){t.clearSnapshot()}function kV(t){t.clearMeasurements()}function RV(t){t.isLayoutDirty=!1}function ZEe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function OV(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function JEe(t){t.resolveTargetDelta()}function eAe(t){t.calcProjection()}function tAe(t){t.resetSkewAndRotation()}function nAe(t){t.removeLeadSnapshot()}function MV(t,e,n){t.translate=tr(e.translate,0,n),t.scale=tr(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function DV(t,e,n,r){t.min=tr(e.min,n.min,r),t.max=tr(e.max,n.max,r)}function rAe(t,e,n,r){DV(t.x,e.x,n.x,r),DV(t.y,e.y,n.y,r)}function sAe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const iAe={duration:.45,ease:[.4,0,.1,1]},LV=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),$V=LV("applewebkit/")&&!LV("chrome/")?Math.round:la;function FV(t){t.min=$V(t.min),t.max=$V(t.max)}function aAe(t){FV(t.x),FV(t.y)}function rX(t,e,n){return t==="position"||t==="preserve-aspect"&&!CEe(AV(e),AV(n),.2)}function oAe(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const lAe=nX({attachResizeListener:(t,e)=>$v(t,"resize",e),measureScroll:()=>{var t,e;return{x:document.documentElement.scrollLeft||((t=document.body)==null?void 0:t.scrollLeft)||0,y:document.documentElement.scrollTop||((e=document.body)==null?void 0:e.scrollTop)||0}},checkIsScrollRoot:()=>!0}),GE={current:void 0},sX=nX({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!GE.current){const t=new lAe({});t.mount(window),t.setOptions({layoutScroll:!0}),GE.current=t}return GE.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),A2=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function VV(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function cAe(...t){return e=>{let n=!1;const r=t.map(s=>{const a=VV(s,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():VV(t[s],null)}}}}function uAe(...t){return N.useCallback(cAe(...t),t)}class dAe extends N.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const r=n.offsetParent,s=nP(r)&&r.offsetWidth||0,a=nP(r)&&r.offsetHeight||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=s-o.width-o.left,o.bottom=a-o.height-o.top}return null}componentDidUpdate(){}render(){return this.props.children}}function hAe({children:t,isPresent:e,anchorX:n,anchorY:r,root:s,pop:a}){var f;const o=N.useId(),l=N.useRef(null),c=N.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:u}=N.useContext(A2),d=((f=t.props)==null?void 0:f.ref)??(t==null?void 0:t.ref),h=uAe(l,d);return N.useInsertionEffect(()=>{const{width:m,height:v,top:g,left:y,right:b,bottom:x}=c.current;if(e||a===!1||!l.current||!m||!v)return;const S=n==="left"?`left: ${y}`:`right: ${b}`,T=r==="bottom"?`bottom: ${x}`:`top: ${g}`;l.current.dataset.motionPopId=o;const _=document.createElement("style");u&&(_.nonce=u);const C=s??document.head;return C.appendChild(_),_.sheet&&_.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${v}px !important;
            ${S}px !important;
            ${T}px !important;
          }
        `),()=>{C.contains(_)&&C.removeChild(_)}},[e]),i.jsx(dAe,{isPresent:e,childRef:l,sizeRef:c,pop:a,children:a===!1?t:N.cloneElement(t,{ref:h})})}const fAe=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:o,anchorX:l,anchorY:c,root:u})=>{const d=e2(mAe),h=N.useId();let f=!0,m=N.useMemo(()=>(f=!1,{id:h,initial:e,isPresent:n,custom:s,onExitComplete:v=>{d.set(v,!0);for(const g of d.values())if(!g)return;r&&r()},register:v=>(d.set(v,!1),()=>d.delete(v))}),[n,d,r]);return a&&f&&(m={...m}),N.useMemo(()=>{d.forEach((v,g)=>d.set(g,!1))},[n]),N.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),t=i.jsx(hAe,{pop:o==="popLayout",isPresent:n,anchorX:l,anchorY:c,root:u,children:t}),i.jsx(aS.Provider,{value:m,children:t})};function mAe(){return new Map}function iX(t=!0){const e=N.useContext(aS);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,a=N.useId();N.useEffect(()=>{if(t)return s(a)},[t]);const o=N.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,o]:[!0]}const x0=t=>t.key||"";function BV(t){const e=[];return N.Children.forEach(t,n=>{N.isValidElement(n)&&e.push(n)}),e}const aX=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:a="sync",propagate:o=!1,anchorX:l="left",anchorY:c="top",root:u})=>{const[d,h]=iX(o),f=N.useMemo(()=>BV(t),[t]),m=o&&!d?[]:f.map(x0),v=N.useRef(!0),g=N.useRef(f),y=e2(()=>new Map),b=N.useRef(new Set),[x,S]=N.useState(f),[T,_]=N.useState(f);MY(()=>{v.current=!1,g.current=f;for(let p=0;p<T.length;p++){const w=x0(T[p]);m.includes(w)?(y.delete(w),b.current.delete(w)):y.get(w)!==!0&&y.set(w,!1)}},[T,m.length,m.join("-")]);const C=[];if(f!==x){let p=[...f];for(let w=0;w<T.length;w++){const A=T[w],P=x0(A);m.includes(P)||(p.splice(w,0,A),C.push(A))}return a==="wait"&&C.length&&(p=C),_(BV(p)),S(f),null}const{forceRender:E}=N.useContext(JO);return i.jsx(i.Fragment,{children:T.map(p=>{const w=x0(p),A=o&&!d?!1:f===T||m.includes(w),P=()=>{if(b.current.has(w))return;if(b.current.add(w),y.has(w))y.set(w,!0);else return;let I=!0;y.forEach(k=>{k||(I=!1)}),I&&(E==null||E(),_(g.current),o&&(h==null||h()),r&&r())};return i.jsx(fAe,{isPresent:A,initial:!v.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:a,root:u,onExitComplete:A?void 0:P,anchorX:l,anchorY:c,children:p},w)})})},oX=N.createContext({strict:!1}),UV={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let zV=!1;function pAe(){if(zV)return;const t={};for(const e in UV)t[e]={isEnabled:n=>UV[e].some(r=>!!n[r])};MQ(t),zV=!0}function lX(){return pAe(),tEe()}function gAe(t){const e=lX();for(const n in t)e[n]={...e[n],...t[n]};MQ(e)}const yAe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function O_(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||yAe.has(t)}let cX=t=>!O_(t);function vAe(t){typeof t=="function"&&(cX=e=>e.startsWith("on")?!O_(e):t(e))}try{vAe(require("@emotion/is-prop-valid").default)}catch{}function xAe(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(cX(s)||n===!0&&O_(s)||!e&&!O_(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const uS=N.createContext({});function bAe(t,e){if(cS(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Lv(n)?n:void 0,animate:Lv(r)?r:void 0}}return t.inherit!==!1?e:{}}function wAe(t){const{initial:e,animate:n}=bAe(t,N.useContext(uS));return N.useMemo(()=>({initial:e,animate:n}),[qV(e),qV(n)])}function qV(t){return Array.isArray(t)?t.join(" "):t}const T2=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function uX(t,e,n){for(const r in e)!Is(e[r])&&!UQ(r,n)&&(t[r]=e[r])}function _Ae({transformTemplate:t},e){return N.useMemo(()=>{const n=T2();return S2(n,e,t),Object.assign({},n.vars,n.style)},[e])}function jAe(t,e){const n=t.style||{},r={};return uX(r,n,t),Object.assign(r,_Ae(t,e)),r}function NAe(t,e){const n={},r=jAe(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const dX=()=>({...T2(),attrs:{}});function SAe(t,e,n,r){const s=N.useMemo(()=>{const a=dX();return zQ(a,e,WQ(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};uX(a,t.style,t),s.style={...a,...s.style}}return s}const EAe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function C2(t){return typeof t!="string"||t.includes("-")?!1:!!(EAe.indexOf(t)>-1||/[A-Z]/u.test(t))}function AAe(t,e,n,{latestValues:r},s,a=!1,o){const c=(o??C2(t)?SAe:NAe)(e,r,s,t),u=xAe(e,typeof t=="string",a),d=t!==N.Fragment?{...u,...c,ref:n}:{},{children:h}=e,f=N.useMemo(()=>Is(h)?h.get():h,[h]);return N.createElement(t,{...d,children:f})}function TAe({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:CAe(n,r,s,t),renderState:e()}}function CAe(t,e,n,r){const s={},a=r(t,{});for(const f in a)s[f]=mw(a[f]);let{initial:o,animate:l}=t;const c=cS(t),u=RQ(t);e&&u&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?l:o;if(h&&typeof h!="boolean"&&!lS(h)){const f=Array.isArray(h)?h:[h];for(let m=0;m<f.length;m++){const v=y2(t,f[m]);if(v){const{transitionEnd:g,transition:y,...b}=v;for(const x in b){let S=b[x];if(Array.isArray(S)){const T=d?S.length-1:0;S=S[T]}S!==null&&(s[x]=S)}for(const x in g)s[x]=g[x]}}}return s}const hX=t=>(e,n)=>{const r=N.useContext(uS),s=N.useContext(aS),a=()=>TAe(t,e,r,s);return n?a():e2(a)},PAe=hX({scrapeMotionValuesFromProps:E2,createRenderState:T2}),IAe=hX({scrapeMotionValuesFromProps:HQ,createRenderState:dX}),kAe=Symbol.for("motionComponentSymbol");function RAe(t,e,n){const r=N.useRef(n);N.useInsertionEffect(()=>{r.current=n});const s=N.useRef(null);return N.useCallback(a=>{var l;a&&((l=t.onMount)==null||l.call(t,a)),e&&(a?e.mount(a):e.unmount());const o=r.current;if(typeof o=="function")if(a){const c=o(a);typeof c=="function"&&(s.current=c)}else s.current?(s.current(),s.current=null):o(a);else o&&(o.current=a)},[e])}const fX=N.createContext({});function Sf(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function OAe(t,e,n,r,s,a){var S,T;const{visualElement:o}=N.useContext(uS),l=N.useContext(oX),c=N.useContext(aS),u=N.useContext(A2),d=u.reducedMotion,h=u.skipAnimations,f=N.useRef(null),m=N.useRef(!1);r=r||l.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d,skipAnimations:h,isSVG:a}),m.current&&f.current&&(f.current.manuallyAnimateOnMount=!0));const v=f.current,g=N.useContext(fX);v&&!v.projection&&s&&(v.type==="html"||v.type==="svg")&&MAe(f.current,n,s,g);const y=N.useRef(!1);N.useInsertionEffect(()=>{v&&y.current&&v.update(n,c)});const b=n[bQ],x=N.useRef(!!b&&!((S=window.MotionHandoffIsComplete)!=null&&S.call(window,b))&&((T=window.MotionHasOptimisedAnimation)==null?void 0:T.call(window,b)));return MY(()=>{m.current=!0,v&&(y.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),v.scheduleRenderMicrotask(),x.current&&v.animationState&&v.animationState.animateChanges())}),N.useEffect(()=>{v&&(!x.current&&v.animationState&&v.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var _;(_=window.MotionHandoffMarkAsComplete)==null||_.call(window,b)}),x.current=!1),v.enteringChildren=void 0)}),v}function MAe(t,e,n,r){const{layoutId:s,layout:a,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:mX(t.parent)),t.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!o||l&&Sf(l),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:u})}function mX(t){if(t)return t.options.allowProjection!==!1?t.projection:mX(t.parent)}function YE(t,{forwardMotionProps:e=!1,type:n}={},r,s){r&&gAe(r);const a=n?n==="svg":C2(t),o=a?IAe:PAe;function l(u,d){let h;const f={...N.useContext(A2),...u,layoutId:DAe(u)},{isStatic:m}=f,v=wAe(u),g=o(u,m);if(!m&&OY){LAe();const y=$Ae(f);h=y.MeasureLayout,v.visualElement=OAe(t,g,f,s,y.ProjectionNode,a)}return i.jsxs(uS.Provider,{value:v,children:[h&&v.visualElement?i.jsx(h,{visualElement:v.visualElement,...f}):null,AAe(t,u,RAe(g,v.visualElement,d),g,m,e,a)]})}l.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=N.forwardRef(l);return c[kAe]=t,c}function DAe({layoutId:t}){const e=N.useContext(JO).id;return e&&t!==void 0?e+"-"+t:t}function LAe(t,e){N.useContext(oX).strict}function $Ae(t){const e=lX(),{drag:n,layout:r}=e;if(!n&&!r)return{};const s={...n,...r};return{MeasureLayout:n!=null&&n.isEnabled(t)||r!=null&&r.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function FAe(t,e){if(typeof Proxy>"u")return YE;const n=new Map,r=(a,o)=>YE(a,o,t,e),s=(a,o)=>r(a,o);return new Proxy(s,{get:(a,o)=>o==="create"?r:(n.has(o)||n.set(o,YE(o,void 0,t,e)),n.get(o))})}const VAe=(t,e)=>e.isSVG??C2(t)?new vEe(e):new hEe(e,{allowProjection:t!==N.Fragment});class BAe extends Qu{constructor(e){super(e),e.animationState||(e.animationState=jEe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();lS(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let UAe=0;class zAe extends Qu{constructor(){super(...arguments),this.id=UAe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const qAe={animation:{Feature:BAe},exit:{Feature:zAe}};function gb(t){return{point:{x:t.pageX,y:t.pageY}}}const WAe=t=>e=>w2(e)&&t(e,gb(e));function Vy(t,e,n,r){return $v(t,e,WAe(n),r)}const pX=({current:t})=>t?t.ownerDocument.defaultView:null,WV=(t,e)=>Math.abs(t-e);function HAe(t,e){const n=WV(t.x,e.x),r=WV(t.y,e.y);return Math.sqrt(n**2+r**2)}const HV=new Set(["auto","scroll"]);class gX{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:o=3,element:l}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=m=>{this.handleScroll(m.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=XE(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,g=HAe(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!g)return;const{point:y}=m,{timestamp:b}=ls;this.history.push({...y,timestamp:b});const{onStart:x,onMove:S}=this.handlers;v||(x&&x(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,m)},this.handlePointerMove=(m,v)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=QE(v,this.transformPagePoint),Dn.update(this.updatePoint,!0)},this.handlePointerUp=(m,v)=>{this.end();const{onEnd:g,onSessionEnd:y,resumeAnimation:b}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=XE(m.type==="pointercancel"?this.lastMoveEventInfo:QE(v,this.transformPagePoint),this.history);this.startEvent&&g&&g(m,x),y&&y(m,x)},!w2(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=s||window;const c=gb(e),u=QE(c,this.transformPagePoint),{point:d}=u,{timestamp:h}=ls;this.history=[{...d,timestamp:h}];const{onSessionStart:f}=n;f&&f(e,XE(u,this.history)),this.removeListeners=fb(Vy(this.contextWindow,"pointermove",this.handlePointerMove),Vy(this.contextWindow,"pointerup",this.handlePointerUp),Vy(this.contextWindow,"pointercancel",this.handlePointerUp)),l&&this.startScrollTracking(l)}startScrollTracking(e){let n=e.parentElement;for(;n;){const r=getComputedStyle(n);(HV.has(r.overflowX)||HV.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const r=e===window,s=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},a={x:s.x-n.x,y:s.y-n.y};a.x===0&&a.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(e,s),Dn.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Tu(this.updatePoint)}}function QE(t,e){return e?{point:e(t.point)}:t}function KV(t,e){return{x:t.x-e.x,y:t.y-e.y}}function XE({point:t},e){return{point:t,delta:KV(t,yX(e)),offset:KV(t,KAe(e)),velocity:GAe(e,.1)}}function KAe(t){return t[0]}function yX(t){return t[t.length-1]}function GAe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=yX(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>ca(e)));)n--;if(!r)return{x:0,y:0};r===t[0]&&t.length>2&&s.timestamp-r.timestamp>ca(e)*2&&(r=t[1]);const a=ta(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function YAe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?tr(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?tr(n,t,r.max):Math.min(t,n)),t}function GV(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function QAe(t,{top:e,left:n,bottom:r,right:s}){return{x:GV(t.x,n,s),y:GV(t.y,e,r)}}function YV(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function XAe(t,e){return{x:YV(t.x,e.x),y:YV(t.y,e.y)}}function ZAe(t,e){let n=.5;const r=Ws(t),s=Ws(e);return s>r?n=Ov(e.min,e.max-r,t.min):r>s&&(n=Ov(t.min,t.max-s,e.min)),zo(0,1,n)}function JAe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const oP=.35;function eTe(t=oP){return t===!1?t=0:t===!0&&(t=oP),{x:QV(t,"left","right"),y:QV(t,"top","bottom")}}function QV(t,e,n){return{min:XV(t,e),max:XV(t,n)}}function XV(t,e){return typeof t=="number"?t:t[e]||0}const tTe=new WeakMap;class nTe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Lr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=h=>{n&&this.snapToCursor(gb(h).point),this.stopAnimation()},o=(h,f)=>{const{drag:m,dragPropagation:v,onDragStart:g}=this.getProps();if(m&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=I1e(m),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),mo(b=>{let x=this.getAxisMotionValue(b).get()||0;if(Mo.test(x)){const{projection:S}=this.visualElement;if(S&&S.layout){const T=S.layout.layoutBox[b];T&&(x=Ws(T)*(parseFloat(x)/100))}}this.originPoint[b]=x}),g&&Dn.update(()=>g(h,f),!1,!0),JC(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:m,dragDirectionLock:v,onDirectionLock:g,onDrag:y}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:b}=f;if(v&&this.currentDirection===null){this.currentDirection=sTe(b),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,b),this.updateAxis("y",f.point,b),this.visualElement.render(),y&&Dn.update(()=>y(h,f),!1,!0)},c=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>{const{dragSnapToOrigin:h}=this.getProps();(h||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:d}=this.getProps();this.panSession=new gX(e,{onSessionStart:a,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:pX(this.visualElement),element:this.visualElement.current})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!r)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&Dn.postRender(()=>l(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!b0(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=YAe(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,s=this.constraints;e&&Sf(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=QAe(r.layoutBox,e):this.constraints=!1,this.elastic=eTe(n),s!==this.constraints&&!Sf(e)&&r&&this.constraints&&!this.hasMutatedConstraints&&mo(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=JAe(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Sf(e))return!1;const r=e.current;Qm(r!==null,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");const{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=aEe(r,s.root,this.visualElement.getTransformPagePoint());let o=XAe(s.layout.layoutBox,a);if(n){const l=n(rEe(o));this.hasMutatedConstraints=!!l,l&&(o=LQ(l))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=mo(d=>{if(!b0(d,n,this.currentDirection))return;let h=c&&c[d]||{};o&&(h={min:0,max:0});const f=s?200:1e6,m=s?40:1e7,v={type:"inertia",velocity:r?e[d]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(d,v)});return Promise.all(u).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return JC(this.visualElement,e),r.start(g2(e,r,0,n,this.visualElement,!1))}stopAnimation(){mo(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){mo(n=>{const{drag:r}=this.getProps();if(!b0(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:l}=s.layout.layoutBox[n],c=a.get()||0;a.set(e[n]-tr(o,l,.5)+c)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Sf(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};mo(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();s[o]=ZAe({min:c,max:c},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.constraints=!1,this.resolveConstraints(),mo(o=>{if(!b0(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(tr(c,u,s[o]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;tTe.set(this.visualElement,this);const e=this.visualElement.current,n=Vy(e,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps(),f=u.target,m=f!==e&&L1e(f);d&&h&&!m&&this.start(u)});let r;const s=()=>{const{dragConstraints:u}=this.getProps();Sf(u)&&u.current&&(this.constraints=this.resolveRefConstraints(),r||(r=rTe(e,u.current,()=>this.scalePositionWithinConstraints())))},{projection:a}=this.visualElement,o=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Dn.read(s);const l=$v(window,"resize",()=>this.scalePositionWithinConstraints()),c=a.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(mo(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=u[h].translate,f.set(f.get()+u[h].translate))}),this.visualElement.render())});return()=>{l(),n(),o(),c&&c(),r&&r()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:o=oP,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:o,dragMomentum:l}}}function ZV(t){let e=!0;return()=>{if(e){e=!1;return}t()}}function rTe(t,e,n){const r=iV(t,ZV(n)),s=iV(e,ZV(n));return()=>{r(),s()}}function b0(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function sTe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class iTe extends Qu{constructor(e){super(e),this.removeGroupControls=la,this.removeListeners=la,this.controls=new nTe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||la}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const ZE=t=>(e,n)=>{t&&Dn.update(()=>t(e,n),!1,!0)};class aTe extends Qu{constructor(){super(...arguments),this.removePointerDownListener=la}onPointerDown(e){this.session=new gX(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:pX(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:ZE(e),onStart:ZE(n),onMove:ZE(r),onEnd:(a,o)=>{delete this.session,s&&Dn.postRender(()=>s(a,o))}}}mount(){this.removePointerDownListener=Vy(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let JE=!1;class oTe extends N.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=e;a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),JE&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),pw.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,{projection:o}=r;return o&&(o.isPresent=a,e.layoutDependency!==n&&o.setOptions({...o.options,layoutDependency:n}),JE=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==a?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||Dn.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),b2.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;JE=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function vX(t){const[e,n]=iX(),r=N.useContext(JO);return i.jsx(oTe,{...t,layoutGroup:r,switchLayoutGroup:N.useContext(fX),isPresent:e,safeToRemove:n})}const lTe={pan:{Feature:aTe},drag:{Feature:iTe,ProjectionNode:sX,MeasureLayout:vX}};function JV(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,a=r[s];a&&Dn.postRender(()=>a(e,gb(e)))}class cTe extends Qu{mount(){const{current:e}=this.node;e&&(this.unmount=R1e(e,(n,r)=>(JV(this.node,r,"Start"),s=>JV(this.node,s,"End"))))}unmount(){}}class uTe extends Qu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=fb($v(this.node.current,"focus",()=>this.onFocus()),$v(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function eB(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),a=r[s];a&&Dn.postRender(()=>a(e,gb(e)))}class dTe extends Qu{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:n,propagate:r}=this.node.props;this.unmount=F1e(e,(s,a)=>(eB(this.node,a,"Start"),(o,{success:l})=>eB(this.node,o,l?"End":"Cancel")),{useGlobalTarget:n,stopPropagation:(r==null?void 0:r.tap)===!1})}unmount(){}}const lP=new WeakMap,eA=new WeakMap,hTe=t=>{const e=lP.get(t.target);e&&e(t)},fTe=t=>{t.forEach(hTe)};function mTe({root:t,...e}){const n=t||document;eA.has(n)||eA.set(n,{});const r=eA.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(fTe,{root:t,...e})),r[s]}function pTe(t,e,n){const r=mTe(e);return lP.set(t,n),r.observe(t),()=>{lP.delete(t),r.unobserve(t)}}const gTe={some:0,all:1};class yTe extends Qu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:gTe[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return pTe(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(vTe(e,n))&&this.startObserver()}unmount(){}}function vTe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const xTe={inView:{Feature:yTe},tap:{Feature:dTe},focus:{Feature:uTe},hover:{Feature:cTe}},bTe={layout:{ProjectionNode:sX,MeasureLayout:vX}},wTe={...qAe,...xTe,...lTe,...bTe},Ur=FAe(wTe,VAe),xc=t=>{if(t==null)return null;const e=String(t);return e.trim()?e:null},_Te=(t,e)=>({id:t,companyId:String(e.companyId??e.company_id??""),userId:String(e.userId??e.user_id??""),role:e.role??"read_only",status:e.status??"active",createdAt:String(e.createdAt??e.created_at??""),updatedAt:String(e.updatedAt??e.updated_at??"")}),jTe=(t,e)=>({id:t,name:String(e.name??e.companyName??e.company_name??""),organizationType:e.organizationType??e.organization_type??"business",businessType:xc(e.businessType??e.business_type)??void 0,taxType:xc(e.taxType??e.tax_type)??void 0,taxClassification:xc(e.taxClassification??e.tax_classification)??void 0,tpin:xc(e.tpin)??void 0,phone:xc(e.phone)??void 0,email:xc(e.email)??void 0,logoUrl:xc(e.logoUrl??e.logo_url)??null,createdAt:String(e.createdAt??e.created_at??""),updatedAt:String(e.updatedAt??e.updated_at??"")}),NTe=(t,e)=>({id:t,companyId:String(e.companyId??e.company_id??t),companyName:String(e.companyName??e.company_name??""),isVatRegistered:!!(e.isVatRegistered??e.is_vat_registered??!1),vatRate:e.vatRate===null||e.vatRate===void 0?Number(e.vat_rate??0)||null:Number(e.vatRate),logoUrl:xc(e.logoUrl??e.logo_url)??null,createdAt:String(e.createdAt??e.created_at??""),updatedAt:String(e.updatedAt??e.updated_at??"")}),Fe={async getPrimaryMembershipByUser(t){kn();const e=ge(re,Y.COMPANY_USERS),n=[je(e,he("userId","==",t),he("status","==","active"),Ts(1)),je(e,he("user_id","==",t),he("status","==","active"),Ts(1)),je(e,he("userId","==",t),Ts(1)),je(e,he("user_id","==",t),Ts(1))];for(const r of n){const s=await Te(r);if(s.empty)continue;const a=s.docs[0];return _Te(a.id,a.data())}return null},async getCompanyById(t){kn();const e=Ye(re,Y.COMPANIES,t),n=await xi(e);return n.exists()?jTe(n.id,n.data()):null},async getCompanySettings(t){kn();const e=Ye(re,Y.COMPANY_SETTINGS,t),n=await xi(e);return n.exists()?NTe(n.id,n.data()):null},async completeCompanySetup(t){kn();const e=Ye(re,Y.COMPANIES,t.companyId);await xr(e,{name:t.name,organizationType:t.organizationType,businessType:t.businessType??null,taxType:t.taxType??null,taxClassification:t.taxClassification??null,address:t.address??null,phone:t.phone??null,email:t.email??null,tpin:t.tpin??null,registrationNumber:t.registrationNumber??null,industryType:t.industryType??null,logoUrl:t.logoUrl??null,updatedAt:Ce()},{merge:!0});const n=Ye(re,Y.COMPANY_SETTINGS,t.companyId);await xr(n,{companyId:t.companyId,companyName:t.name,logoUrl:t.logoUrl??null,isVatRegistered:!!t.isVatRegistered,vatRate:t.vatRate??null,updatedAt:Ce()},{merge:!0})},async updateCompanyLogo(t,e){kn();const n=Ye(re,Y.COMPANIES,t);await Dl(n,{logoUrl:e,updatedAt:Ce()});const r=Ye(re,Y.COMPANY_SETTINGS,t);await xr(r,{companyId:t,logoUrl:e,updatedAt:Ce()},{merge:!0})},async updateCompanyBasics(t){kn();const e=Ye(re,Y.COMPANIES,t.companyId),n=Ye(re,Y.COMPANY_SETTINGS,t.companyId),r={updatedAt:Ce()},s={companyId:t.companyId,updatedAt:Ce()};typeof t.name=="string"&&(r.name=t.name,s.companyName=t.name),t.logoUrl!==void 0&&(r.logoUrl=t.logoUrl,s.logoUrl=t.logoUrl),await xr(e,r,{merge:!0}),await xr(n,s,{merge:!0})},async listCompanyUsers(t){return kn(),Rt("listCompanyUsers",{companyId:t})},async updateUserRole(t){return kn(),Rt("updateUserRole",t)},async removeCompanyUser(t){return kn(),Rt("removeCompanyUser",t)},async suspendUser(t){return kn(),Rt("suspendUser",t)},async reactivateUser(t){return kn(),Rt("reactivateUser",t)},async revokeInvitation(t){return kn(),Rt("revokeInvitation",t)}},Cn={async getPostedJournalLines(t,e,n){kn();const r=ge(re,Y.JOURNAL_LINES),s=[he("companyId","==",t),he("isPosted","==",!0),WN("entryDate","desc"),Ts(5e3)];return e&&s.push(he("entryDate",">=",e)),n&&s.push(he("entryDate","<=",n)),(await Te(je(r,...s))).docs.map(o=>({id:o.id,...o.data()}))},async postJournalEntry(t){return Rt("postJournalEntry",t)},async getGLBalances(t){return Rt("getGLBalances",t)},async getTrialBalance(t){return Rt("getTrialBalance",t)},async postInvoiceToGL(t){return Rt("postInvoiceToGL",{invoiceId:t})},async postBillToGL(t){return Rt("postBillToGL",{billId:t})},async postExpenseToGL(t){return Rt("postExpenseToGL",{expenseId:t})},async seedDefaultChartOfAccounts(t){return Rt("seedDefaultChartOfAccounts",t)},async seedDefaultExpenseCategories(t){return Rt("seedDefaultExpenseCategories",t)},async recordExpense(t){return Rt("recordExpense",t)},async createBill(t){return Rt("createBill",t)},async payBill(t){return Rt("payBill",t)},async createInvoice(t){return Rt("createInvoice",t)},async recordInvoicePayment(t){return Rt("recordInvoicePayment",t)},async createQuotation(t){return Rt("createQuotation",t)},async reverseJournalEntry(t){return Rt("reverseJournalEntry",t)},async deleteChartOfAccount(t){return Rt("deleteChartOfAccount",t)},async updateOverdueBills(t){return Rt("updateOverdueBills",t)},async getExpenseReport(t){return Rt("getExpenseReport",t)},async getGeneralLedger(t){return Rt("getGeneralLedger",t)},async getProfitLossReport(t){return Rt("getProfitLossReport",t)},async getBalanceSheetReport(t){return Rt("getBalanceSheetReport",t)},async getTrialBalanceReport(t){return Rt("getTrialBalanceReport",t)},async getCashFlowReport(t){return Rt("getCashFlowReport",t)},async getDashboardLiveMetrics(t){return Rt("getDashboardLiveMetrics",t)}},rh={async getPayrollRuns(t){kn();const e=ge(re,Y.PAYROLL_RUNS);return(await Te(je(e,he("companyId","==",t),WN("runDate","desc")))).docs.map(r=>({id:r.id,...r.data()}))},async createPayrollDraft(t){return Rt("createPayrollDraft",t)},async runPayrollTrial(t){return Rt("runPayrollTrial",t)},async processPayroll(t){return Rt("processPayroll",t)},async payPayroll(t){return Rt("payPayroll",t)},async finalizePayroll(t){return Rt("finalizePayroll",t)},async sendPayslipEmail(t){return Rt("sendPayslipEmail",t)},async runDepreciation(t){return Rt("runDepreciation",t)}},STe={async uploadCompanyLogo(t,e){kn();const n=e.name.split(".").pop()??"png",r=`company-logos/${t}/logo.${n}`,s=K0e(ewe,r);try{await W0e(s,e,{contentType:e.type})}catch(a){throw(typeof a=="object"&&a!==null&&"code"in a?String(a.code):"")==="storage/bucket-not-found"?new Error("Firebase Storage is not enabled for this project. Open Firebase Console > Storage > Get Started."):a}return H0e(s)}},ETe=new Set(Object.values(Y)),ATe=t=>{if(!ETe.has(t))throw new Error(`Dashboard query rejected for unknown collection: ${t}`)},TTe=(t,e)=>{var r;const n=[he("companyId","==",t)];return(r=e.filters)==null||r.forEach(s=>{n.push(he(s.field,s.op,s.value))}),e.orderByField&&n.push(WN(e.orderByField,e.orderDirection??"desc")),typeof e.limitCount=="number"&&e.limitCount>0&&n.push(Ts(e.limitCount)),n},tB=async(t,e)=>{ATe(e.collectionName);const n=TTe(t,e);return(await Te(je(ge(re,e.collectionName),...n))).docs.map(s=>({id:s.id,...s.data()}))},jr={async getCompanyIdForUser(t){kn();const e=await Fe.getPrimaryMembershipByUser(t);if(!(e!=null&&e.companyId))throw new Error("No active company membership found for this user.");return e.companyId},async runQuery(t,e){const n=await this.getCompanyIdForUser(t);return tB(n,e)},async runQueries(t,e){const n=await this.getCompanyIdForUser(t),r=Object.entries(e),s=await Promise.all(r.map(async([a,o])=>{const l=await tB(n,o);return[a,l]}));return Object.fromEntries(s)}},xX=t=>t.toLowerCase().replace(/[_\s-]/g,""),CTe=t=>{const e=new Map;return Object.entries(t).forEach(([n,r])=>{e.set(xX(n),r)}),e},PTe=(t,e)=>{const n=t[e];return n!==void 0?n:CTe(t).get(xX(e))},Md=(t,e,n=null)=>{for(const r of e){const s=PTe(t,r);if(s!=null)return s}return n},Ke=(t,e,n="")=>{const r=Md(t,e);return typeof r=="string"?r:n},Jt=(t,e,n=0)=>{const r=Md(t,e),s=Number(r);return Number.isFinite(s)?s:n},gy=(t,e,n=!1)=>{const r=Md(t,e);return typeof r=="boolean"?r:n},ITe=["Initiation","Planning","Design","Execution","Monitoring","Closing"],nB=new Set(["approved","implemented","completed","done"]),bX=new Set(["approved","implemented","completed","done"]),kTe=new Set(["pending","todo","open","in_progress","inprogress"]),RTe=t=>t.trim().toLowerCase().replace(/[\s_-]/g,""),Fa=t=>t?RTe(t):"",on=t=>{if(!t)return null;const e=t.trim();return e.length?e:null},rB=t=>t.split(/[\s_-]+/).filter(Boolean).map(e=>`${e.slice(0,1).toUpperCase()}${e.slice(1).toLowerCase()}`).join(" "),sB=t=>{if(!t)return new Date(0).toISOString();if(typeof t=="string"){const e=new Date(t);return Number.isNaN(e.getTime())?new Date(0).toISOString():e.toISOString()}if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return new Date(0).toISOString()},iB=t=>{if(!t)return null;const e=new Date(t);return Number.isNaN(e.getTime())?null:e},is=(t,e,n,r="")=>{const s=Ke(t,n,"");if(s)return s;if(e){const a=Ke(e,n,"");if(a)return a}return r},aB=(t,e)=>{const n=Md(e,["details"],null)??null,r=is(e,n,["companyId","company_id"]),s=is(e,n,["projectId","project_id"]);if(!r||!s)return null;const a=is(e,n,["action","event"],"Activity"),o=is(e,n,["activity","title"],a||"Activity"),l=is(e,n,["description","notes"],""),c=is(e,n,["source","sourceType","source_type","sourceCollection","source_collection","tableName","table_name"],"-"),u=on(is(e,n,["sourceType","source_type","sourceCollection","source_collection"])),d=on(is(e,n,["sourceId","source_id","recordId","record_id"])),h=on(is(e,n,["role","actorRole","actor_role"])),f=on(is(e,n,["assignedTo","assigned_to","assignee"])),m=on(is(e,n,["phase","currentPhase","current_phase","stage"])),v=on(is(e,n,["discipline"])),g=on(is(e,n,["approvalStatus","approval_status"])),y=on(is(e,n,["appliedToSection","applied_to_section","section"])),b=on(is(e,n,["status"])),x=on(is(e,n,["milestoneName","milestone_name","milestone"])),S=gy(e,["milestoneAchieved","milestone_achieved"],!1)||(n?gy(n,["milestoneAchieved","milestone_achieved"],!1):!1),T=gy(e,["implemented","isImplemented","is_implemented"],!1)||(n?gy(n,["implemented","isImplemented","is_implemented"],!1):!1);return{id:t,companyId:r,projectId:s,activity:o,description:l,source:c,sourceType:u,sourceId:d,role:h,assignedTo:f,phase:m,discipline:v,approvalStatus:g,appliedToSection:y,status:b,milestoneName:x,milestoneAchieved:S,implemented:T,createdBy:on(is(e,n,["createdBy","created_by","userId","user_id","actorUid","actor_uid"])),createdAt:sB(Md(e,["createdAt","created_at"])),updatedAt:sB(Md(e,["updatedAt","updated_at","createdAt","created_at"])),metadata:Md(e,["metadata"],null)??null}},oB=t=>{const e=Fa(t.status),n=Fa(t.approvalStatus);return nB.has(e)||nB.has(n)||t.implemented||t.milestoneAchieved},OTe=(t,e,n)=>{var a;const r=on(Ke(t,["currentPhase","current_phase","phase","stage"],""));if(r)return rB(r);const s=(a=e.find(o=>o.phase))==null?void 0:a.phase;return s?rB(s):n>=90?"Closing":n>=65?"Execution":n>=40?"Design":n>=20?"Planning":"Initiation"},MTe=(t,e,n,r)=>{const s=Fa(Ke(t,["status"],"")),a=n+r>=4;if(s==="completed"||e>=100&&a)return"completed";const o=iB(on(Ke(t,["startDate","start_date"],""))),l=iB(on(Ke(t,["endDate","end_date"],"")));let c=null;if(o&&l&&l.getTime()>o.getTime()){const u=Date.now();u<=o.getTime()?c=0:u>=l.getTime()?c=100:c=(u-o.getTime())/(l.getTime()-o.getTime())*100}return c!==null&&e+10<c?"behind":c!==null&&e>=c-8||r>0&&r>=n?"on_track":"in_progress"},DTe=(t,e)=>{const n=e.filter(P=>!!(P.status||P.approvalStatus||P.implemented||P.milestoneName||P.milestoneAchieved)),r=n.length?n:e,s=r.filter(oB).length,a=r.length,o=new Set(e.map(P=>on(P.appliedToSection)).filter(P=>!!P)),l=new Set(e.filter(P=>Fa(P.approvalStatus)==="approved").map(P=>on(P.appliedToSection)).filter(P=>!!P)),c=e.filter(P=>!!(P.milestoneName||P.milestoneAchieved||/milestone/i.test(P.activity)||/milestone/i.test(P.description))),u=P=>on(P.milestoneName)||on(P.appliedToSection)||on(P.activity)||P.id,d=new Set(c.map(u).filter(P=>!!P)),h=new Set(c.filter(P=>P.milestoneAchieved||oB(P)).map(u).filter(P=>!!P)),f=e.filter(P=>bX.has(Fa(P.status))).length,m=e.filter(P=>kTe.has(Fa(P.status))||Fa(P.approvalStatus)==="pending").length,g=Fa(Ke(t,["status"],""))==="completed",y=a>0?s/a:g?1:0,b=o.size>0?l.size/o.size:0,x=d.size>0?h.size/d.size:0,S=f+m,T=S>0?f/S:0,_=[{ratio:y,weight:.4,enabled:a>0||g},{ratio:b,weight:.2,enabled:o.size>0},{ratio:x,weight:.2,enabled:d.size>0},{ratio:T,weight:.2,enabled:S>0}],C=_.filter(P=>P.enabled).reduce((P,I)=>P+I.weight,0),E=_.filter(P=>P.enabled).reduce((P,I)=>P+I.ratio*I.weight,0);let p=C>0?E/C*100:0;if(g&&(p=100),!g){const P=Math.max(a,S,o.size,d.size);P<=1?p=Math.min(p,20):P===2&&(p=Math.min(p,45))}p=Math.max(0,Math.min(100,Math.round(p)));const w=OTe(t,e,p),A=MTe(t,p,m,f);return{projectId:t.id,currentPhase:w,completion:p,status:A,metrics:{completedActivities:s,totalActivities:a,approvedSections:l.size,totalSections:o.size,milestonesAchieved:h.size,totalMilestones:d.size,pendingCount:m,implementedCount:f}}},LTe=(t,e)=>{const n=new Map;return e.forEach(r=>{var s;n.has(r.projectId)||n.set(r.projectId,[]),(s=n.get(r.projectId))==null||s.push(r)}),new Map(t.map(r=>[r.id,DTe(r,n.get(r.id)??[])]))},ml={async listByCompany(t,e){const n=[he("companyId","==",t)];return e!=null&&e.limitCount&&e.limitCount>0&&n.push(Ts(e.limitCount)),(await Te(je(ge(re,Y.PROJECT_ACTIVITY_LOGS),...n))).docs.map(s=>aB(s.id,s.data())).filter(s=>!!s).sort((s,a)=>a.createdAt.localeCompare(s.createdAt))},async listByProject(t,e,n){const r=[he("companyId","==",t),he("projectId","==",e)];return n!=null&&n.limitCount&&n.limitCount>0&&r.push(Ts(n.limitCount)),(await Te(je(ge(re,Y.PROJECT_ACTIVITY_LOGS),...r))).docs.map(a=>aB(a.id,a.data())).filter(a=>!!a).sort((a,o)=>o.createdAt.localeCompare(a.createdAt))},async create(t){const e=on(t.activity);e&&await es(ge(re,Y.PROJECT_ACTIVITY_LOGS),{companyId:t.companyId,projectId:t.projectId,activity:e,description:on(t.description)??null,source:on(t.source)??"Project Workspace",sourceType:on(t.sourceType)??null,sourceId:on(t.sourceId)??null,role:on(t.role)??null,assignedTo:on(t.assignedTo)??null,phase:on(t.phase)??null,discipline:on(t.discipline)??null,approvalStatus:on(t.approvalStatus)??null,appliedToSection:on(t.appliedToSection)??null,status:on(t.status)??"implemented",milestoneName:on(t.milestoneName)??null,milestoneAchieved:!!t.milestoneAchieved,implemented:t.implemented??!0,createdBy:on(t.createdBy)??null,metadata:t.metadata??null,createdAt:Ce(),updatedAt:Ce()})},getProjectHealthStats(t){var a;const e=t.filter(o=>Fa(o.status)==="pending").length,n=t.filter(o=>bX.has(Fa(o.status))).length,r=t.filter(o=>Fa(o.approvalStatus)==="approved").length,s=t.length?Math.round((n+r)/Math.max(t.length,1)*100):0;return{pendingCount:e,implementedCount:n,approvedCount:r,completion:Math.min(100,Math.max(0,s)),lastUpdatedAt:((a=t[0])==null?void 0:a.createdAt)??null,totalItems:t.length}}};function $Te(){const[t,e]=N.useState(!1),[n,r]=N.useState(""),{messages:s,isLoading:a,askAI:o,clearChat:l}=TNe(),c=N.useRef(null),{user:u}=ot(),[d,h]=N.useState(void 0);N.useEffect(()=>{c.current&&(c.current.scrollTop=c.current.scrollHeight)},[s,t]),N.useEffect(()=>{async function m(){if(u){const v=await Fe.getPrimaryMembershipByUser(u.id);v&&h(v.companyId)}}m()},[u]);const f=m=>{m.preventDefault(),!(!n.trim()||a)&&(o(n,d),r(""))};return i.jsxs(i.Fragment,{children:[i.jsx(aX,{children:t&&i.jsx(Ur.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},transition:{duration:.2},className:"fixed bottom-20 right-6 z-50 w-[90vw] md:w-[400px] shadow-2xl",children:i.jsxs(Q,{className:"border-primary/20 bg-background/95 backdrop-blur-sm h-[500px] flex flex-col",children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between p-4 border-b",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-1.5 bg-primary/10 rounded-lg",children:i.jsx(ile,{className:"h-4 w-4 text-primary"})}),i.jsxs("div",{children:[i.jsx(te,{className:"text-sm font-medium",children:"ZedBooks AI"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Financial Assistant"})]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(W,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:l,title:"Clear Chat",children:i.jsx(u8,{className:"h-4 w-4 text-muted-foreground"})}),i.jsx(W,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>e(!1),children:i.jsx(Vm,{className:"h-4 w-4"})})]})]}),i.jsx(ne,{className:"flex-1 p-0 overflow-hidden relative",children:i.jsxs("div",{ref:c,className:"h-full overflow-y-auto p-4 space-y-4 scroll-smooth",children:[s.map((m,v)=>i.jsx("div",{className:me("flex w-full",m.role==="user"?"justify-end":"justify-start"),children:i.jsx("div",{className:me("max-w-[80%] rounded-2xl px-4 py-2 text-sm",m.role==="user"?"bg-primary text-primary-foreground rounded-br-none":"bg-muted text-foreground rounded-bl-none"),children:m.content})},v)),a&&i.jsx("div",{className:"flex justify-start",children:i.jsx("div",{className:"bg-muted rounded-2xl rounded-bl-none px-4 py-2",children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-muted-foreground/40 rounded-full animate-bounce [animation-delay:-0.3s]"}),i.jsx("span",{className:"w-1.5 h-1.5 bg-muted-foreground/40 rounded-full animate-bounce [animation-delay:-0.15s]"}),i.jsx("span",{className:"w-1.5 h-1.5 bg-muted-foreground/40 rounded-full animate-bounce"})]})})})]})}),i.jsx(RY,{className:"p-3 border-t bg-muted/20",children:i.jsxs("form",{onSubmit:f,className:"flex gap-2 w-full",children:[i.jsx(G,{placeholder:"Ask about your finances...",value:n,onChange:m=>r(m.target.value),className:"bg-background focus-visible:ring-offset-0"}),i.jsx(W,{type:"submit",size:"icon",disabled:a||!n.trim(),children:i.jsx(Zk,{className:"h-4 w-4"})})]})})]})})}),i.jsx(Ur.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"fixed bottom-6 right-6 z-50",children:i.jsx(W,{onClick:()=>e(!t),size:"icon",className:me("h-12 w-12 rounded-full shadow-lg transition-all duration-300",t?"bg-muted text-muted-foreground rotate-90":"bg-primary text-primary-foreground"),children:t?i.jsx(Vm,{className:"h-6 w-6"}):i.jsx(Foe,{className:"h-6 w-6"})})})]})}function St({children:t}){return nS(),i.jsx(xt,{children:i.jsx(yY,{children:i.jsxs("div",{className:"flex min-h-screen w-full",children:[i.jsx(ANe,{}),i.jsxs(bY,{className:"flex-1",children:[i.jsxs("header",{className:"sticky top-0 z-40 flex h-14 items-center gap-4 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4 md:hidden",children:[i.jsx(xY,{className:"h-9 w-9",children:i.jsx(ele,{className:"h-5 w-5"})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-7 w-7 rounded-lg bg-primary flex items-center justify-center text-primary-foreground",children:i.jsx("span",{className:"text-xs font-bold",children:"Z"})}),i.jsx("span",{className:"font-semibold text-foreground",children:"ZedBooks"})]})]}),i.jsx("main",{className:"flex flex-col gap-4 p-4 md:p-6 lg:p-8",children:t}),i.jsx(ZO,{}),i.jsx($Te,{})]})]})})})}function Tt({children:t,allowedRoles:e}){const n=Go(),{hasRole:r,isLoading:s,userRole:a}=wje(e||[]);return s?i.jsx("div",{className:"flex min-h-screen items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Checking permissions..."})]})}):e&&e.length>0?r?i.jsx(i.Fragment,{children:t}):i.jsx(iC,{to:"/dashboard",replace:!0,state:{from:n,unauthorized:!0}}):kG(a,n.pathname)?i.jsx(i.Fragment,{children:t}):i.jsx(iC,{to:"/dashboard",replace:!0,state:{from:n,unauthorized:!0}})}var yb=t=>t.type==="checkbox",Dd=t=>t instanceof Date,zs=t=>t==null;const wX=t=>typeof t=="object";var _r=t=>!zs(t)&&!Array.isArray(t)&&wX(t)&&!Dd(t),_X=t=>_r(t)&&t.target?yb(t.target)?t.target.checked:t.target.value:t,FTe=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,jX=(t,e)=>t.has(FTe(e)),VTe=t=>{const e=t.constructor&&t.constructor.prototype;return _r(e)&&e.hasOwnProperty("isPrototypeOf")},P2=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Dr(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(P2&&(t instanceof Blob||r))&&(n||_r(t)))if(e=n?[]:{},!n&&!VTe(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=Dr(t[s]));else return t;return e}var dS=t=>/^\w*$/.test(t),yr=t=>t===void 0,I2=t=>Array.isArray(t)?t.filter(Boolean):[],k2=t=>I2(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Be=(t,e,n)=>{if(!e||!_r(t))return n;const r=(dS(e)?[e]:k2(e)).reduce((s,a)=>zs(s)?s:s[a],t);return yr(r)||r===t?yr(t[e])?n:t[e]:r},Ti=t=>typeof t=="boolean",xn=(t,e,n)=>{let r=-1;const s=dS(e)?[e]:k2(e),a=s.length,o=a-1;for(;++r<a;){const l=s[r];let c=n;if(r!==o){const u=t[l];c=_r(u)||Array.isArray(u)?u:isNaN(+s[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=c,t=t[l]}};const M_={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Va={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},tl={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},R2=F.createContext(null);R2.displayName="HookFormContext";const hS=()=>F.useContext(R2),BTe=t=>{const{children:e,...n}=t;return F.createElement(R2.Provider,{value:n},e)};var NX=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(s,a,{get:()=>{const o=a;return e._proxyFormState[o]!==Va.all&&(e._proxyFormState[o]=!r||Va.all),n&&(n[o]=!0),t[o]}});return s};const O2=typeof window<"u"?F.useLayoutEffect:F.useEffect;function UTe(t){const e=hS(),{control:n=e.control,disabled:r,name:s,exact:a}=t||{},[o,l]=F.useState(n._formState),c=F.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return O2(()=>n._subscribe({name:s,formState:c.current,exact:a,callback:u=>{!r&&l({...n._formState,...u})}}),[s,r,a]),F.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),F.useMemo(()=>NX(o,n,c.current,!1),[o,n])}var jo=t=>typeof t=="string",SX=(t,e,n,r,s)=>jo(t)?(r&&e.watch.add(t),Be(n,t,s)):Array.isArray(t)?t.map(a=>(r&&e.watch.add(a),Be(n,a))):(r&&(e.watchAll=!0),n),cP=t=>zs(t)||!wX(t);function cl(t,e,n=new WeakSet){if(cP(t)||cP(e))return t===e;if(Dd(t)&&Dd(e))return t.getTime()===e.getTime();const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const a of r){const o=t[a];if(!s.includes(a))return!1;if(a!=="ref"){const l=e[a];if(Dd(o)&&Dd(l)||_r(o)&&_r(l)||Array.isArray(o)&&Array.isArray(l)?!cl(o,l,n):o!==l)return!1}}return!0}function zTe(t){const e=hS(),{control:n=e.control,name:r,defaultValue:s,disabled:a,exact:o,compute:l}=t||{},c=F.useRef(s),u=F.useRef(l),d=F.useRef(void 0);u.current=l;const h=F.useMemo(()=>n._getWatch(r,c.current),[n,r]),[f,m]=F.useState(u.current?u.current(h):h);return O2(()=>n._subscribe({name:r,formState:{values:!0},exact:o,callback:v=>{if(!a){const g=SX(r,n._names,v.values||n._formValues,!1,c.current);if(u.current){const y=u.current(g);cl(y,d.current)||(m(y),d.current=y)}else m(g)}}}),[n,a,r,o]),F.useEffect(()=>n._removeUnmounted()),f}function qTe(t){const e=hS(),{name:n,disabled:r,control:s=e.control,shouldUnregister:a,defaultValue:o}=t,l=jX(s._names.array,n),c=F.useMemo(()=>Be(s._formValues,n,Be(s._defaultValues,n,o)),[s,n,o]),u=zTe({control:s,name:n,defaultValue:c,exact:!0}),d=UTe({control:s,name:n,exact:!0}),h=F.useRef(t),f=F.useRef(s.register(n,{...t.rules,value:u,...Ti(t.disabled)?{disabled:t.disabled}:{}}));h.current=t;const m=F.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Be(d.errors,n)},isDirty:{enumerable:!0,get:()=>!!Be(d.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Be(d.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Be(d.validatingFields,n)},error:{enumerable:!0,get:()=>Be(d.errors,n)}}),[d,n]),v=F.useCallback(x=>f.current.onChange({target:{value:_X(x),name:n},type:M_.CHANGE}),[n]),g=F.useCallback(()=>f.current.onBlur({target:{value:Be(s._formValues,n),name:n},type:M_.BLUR}),[n,s._formValues]),y=F.useCallback(x=>{const S=Be(s._fields,n);S&&x&&(S._f.ref={focus:()=>x.focus&&x.focus(),select:()=>x.select&&x.select(),setCustomValidity:T=>x.setCustomValidity(T),reportValidity:()=>x.reportValidity()})},[s._fields,n]),b=F.useMemo(()=>({name:n,value:u,...Ti(r)||d.disabled?{disabled:d.disabled||r}:{},onChange:v,onBlur:g,ref:y}),[n,r,d.disabled,v,g,y,u]);return F.useEffect(()=>{const x=s._options.shouldUnregister||a;s.register(n,{...h.current.rules,...Ti(h.current.disabled)?{disabled:h.current.disabled}:{}});const S=(T,_)=>{const C=Be(s._fields,T);C&&C._f&&(C._f.mount=_)};if(S(n,!0),x){const T=Dr(Be(s._options.defaultValues,n));xn(s._defaultValues,n,T),yr(Be(s._formValues,n))&&xn(s._formValues,n,T)}return!l&&s.register(n),()=>{(l?x&&!s._state.action:x)?s.unregister(n):S(n,!1)}},[n,s,l,a]),F.useEffect(()=>{s._setDisabledField({disabled:r,name:n})},[r,n,s]),F.useMemo(()=>({field:b,formState:d,fieldState:m}),[b,d,m])}const WTe=t=>t.render(qTe(t));var EX=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},By=t=>Array.isArray(t)?t:[t],lB=()=>{let t=[];return{get observers(){return t},next:s=>{for(const a of t)a.next&&a.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(a=>a!==s)}}),unsubscribe:()=>{t=[]}}},ii=t=>_r(t)&&!Object.keys(t).length,M2=t=>t.type==="file",Ba=t=>typeof t=="function",D_=t=>{if(!P2)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},AX=t=>t.type==="select-multiple",D2=t=>t.type==="radio",HTe=t=>D2(t)||yb(t),tA=t=>D_(t)&&t.isConnected;function KTe(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=yr(t)?r++:t[e[r++]];return t}function GTe(t){for(const e in t)if(t.hasOwnProperty(e)&&!yr(t[e]))return!1;return!0}function Nr(t,e){const n=Array.isArray(e)?e:dS(e)?[e]:k2(e),r=n.length===1?t:KTe(t,n),s=n.length-1,a=n[s];return r&&delete r[a],s!==0&&(_r(r)&&ii(r)||Array.isArray(r)&&GTe(r))&&Nr(t,n.slice(0,-1)),t}var TX=t=>{for(const e in t)if(Ba(t[e]))return!0;return!1};function L_(t,e={}){const n=Array.isArray(t);if(_r(t)||n)for(const r in t)Array.isArray(t[r])||_r(t[r])&&!TX(t[r])?(e[r]=Array.isArray(t[r])?[]:{},L_(t[r],e[r])):zs(t[r])||(e[r]=!0);return e}function CX(t,e,n){const r=Array.isArray(t);if(_r(t)||r)for(const s in t)Array.isArray(t[s])||_r(t[s])&&!TX(t[s])?yr(e)||cP(n[s])?n[s]=Array.isArray(t[s])?L_(t[s],[]):{...L_(t[s])}:CX(t[s],zs(e)?{}:e[s],n[s]):n[s]=!cl(t[s],e[s]);return n}var Vg=(t,e)=>CX(t,e,L_(e));const cB={value:!1,isValid:!1},uB={value:!0,isValid:!0};var PX=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!yr(t[0].attributes.value)?yr(t[0].value)||t[0].value===""?uB:{value:t[0].value,isValid:!0}:uB:cB}return cB},IX=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>yr(t)?t:e?t===""?NaN:t&&+t:n&&jo(t)?new Date(t):r?r(t):t;const dB={isValid:!1,value:null};var kX=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,dB):dB;function hB(t){const e=t.ref;return M2(e)?e.files:D2(e)?kX(t.refs).value:AX(e)?[...e.selectedOptions].map(({value:n})=>n):yb(e)?PX(t.refs).value:IX(yr(e.value)?t.ref.value:e.value,t)}var YTe=(t,e,n,r)=>{const s={};for(const a of t){const o=Be(e,a);o&&xn(s,a,o._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},$_=t=>t instanceof RegExp,Bg=t=>yr(t)?t:$_(t)?t.source:_r(t)?$_(t.value)?t.value.source:t.value:t,fB=t=>({isOnSubmit:!t||t===Va.onSubmit,isOnBlur:t===Va.onBlur,isOnChange:t===Va.onChange,isOnAll:t===Va.all,isOnTouch:t===Va.onTouched});const mB="AsyncFunction";var QTe=t=>!!t&&!!t.validate&&!!(Ba(t.validate)&&t.validate.constructor.name===mB||_r(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===mB)),XTe=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),pB=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Uy=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const a=Be(t,s);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Uy(l,e))break}else if(_r(l)&&Uy(l,e))break}}};function gB(t,e,n){const r=Be(t,n);if(r||dS(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const a=s.join("."),o=Be(e,a),l=Be(t,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(l&&l.type)return{name:a,error:l};if(l&&l.root&&l.root.type)return{name:`${a}.root`,error:l.root};s.pop()}return{name:n}}var ZTe=(t,e,n,r)=>{n(t);const{name:s,...a}=t;return ii(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(o=>e[o]===(!r||Va.all))},JTe=(t,e,n)=>!t||!e||t===e||By(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),eCe=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,tCe=(t,e)=>!I2(Be(t,e)).length&&Nr(t,e),nCe=(t,e,n)=>{const r=By(Be(t,n));return xn(r,"root",e[n]),xn(t,n,r),t},gw=t=>jo(t);function yB(t,e,n="validate"){if(gw(t)||Array.isArray(t)&&t.every(gw)||Ti(t)&&!t)return{type:n,message:gw(t)?t:"",ref:e}}var ff=t=>_r(t)&&!$_(t)?t:{value:t,message:""},vB=async(t,e,n,r,s,a)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:h,max:f,pattern:m,validate:v,name:g,valueAsNumber:y,mount:b}=t._f,x=Be(n,g);if(!b||e.has(g))return{};const S=l?l[0]:o,T=I=>{s&&S.reportValidity&&(S.setCustomValidity(Ti(I)?"":I||""),S.reportValidity())},_={},C=D2(o),E=yb(o),p=C||E,w=(y||M2(o))&&yr(o.value)&&yr(x)||D_(o)&&o.value===""||x===""||Array.isArray(x)&&!x.length,A=EX.bind(null,g,r,_),P=(I,k,L,U=tl.maxLength,z=tl.minLength)=>{const O=I?k:L;_[g]={type:I?U:z,message:O,ref:o,...A(I?U:z,O)}};if(a?!Array.isArray(x)||!x.length:c&&(!p&&(w||zs(x))||Ti(x)&&!x||E&&!PX(l).isValid||C&&!kX(l).isValid)){const{value:I,message:k}=gw(c)?{value:!!c,message:c}:ff(c);if(I&&(_[g]={type:tl.required,message:k,ref:S,...A(tl.required,k)},!r))return T(k),_}if(!w&&(!zs(h)||!zs(f))){let I,k;const L=ff(f),U=ff(h);if(!zs(x)&&!isNaN(x)){const z=o.valueAsNumber||x&&+x;zs(L.value)||(I=z>L.value),zs(U.value)||(k=z<U.value)}else{const z=o.valueAsDate||new Date(x),O=K=>new Date(new Date().toDateString()+" "+K),$=o.type=="time",D=o.type=="week";jo(L.value)&&x&&(I=$?O(x)>O(L.value):D?x>L.value:z>new Date(L.value)),jo(U.value)&&x&&(k=$?O(x)<O(U.value):D?x<U.value:z<new Date(U.value))}if((I||k)&&(P(!!I,L.message,U.message,tl.max,tl.min),!r))return T(_[g].message),_}if((u||d)&&!w&&(jo(x)||a&&Array.isArray(x))){const I=ff(u),k=ff(d),L=!zs(I.value)&&x.length>+I.value,U=!zs(k.value)&&x.length<+k.value;if((L||U)&&(P(L,I.message,k.message),!r))return T(_[g].message),_}if(m&&!w&&jo(x)){const{value:I,message:k}=ff(m);if($_(I)&&!x.match(I)&&(_[g]={type:tl.pattern,message:k,ref:o,...A(tl.pattern,k)},!r))return T(k),_}if(v){if(Ba(v)){const I=await v(x,n),k=yB(I,S);if(k&&(_[g]={...k,...A(tl.validate,k.message)},!r))return T(k.message),_}else if(_r(v)){let I={};for(const k in v){if(!ii(I)&&!r)break;const L=yB(await v[k](x,n),S,k);L&&(I={...L,...A(k,L.message)},T(L.message),r&&(_[g]=I))}if(!ii(I)&&(_[g]={ref:S,...I},!r))return _}}return T(!0),_};const rCe={mode:Va.onSubmit,reValidateMode:Va.onChange,shouldFocusError:!0};function sCe(t={}){let e={...rCe,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ba(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},s=_r(e.defaultValues)||_r(e.values)?Dr(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:Dr(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...d};const f={array:lB(),state:lB()},m=e.criteriaMode===Va.all,v=H=>se=>{clearTimeout(u),u=setTimeout(H,se)},g=async H=>{if(!e.disabled&&(d.isValid||h.isValid||H)){const se=e.resolver?ii((await E()).errors):await w(r,!0);se!==n.isValid&&f.state.next({isValid:se})}},y=(H,se)=>{!e.disabled&&(d.isValidating||d.validatingFields||h.isValidating||h.validatingFields)&&((H||Array.from(l.mount)).forEach(de=>{de&&(se?xn(n.validatingFields,de,se):Nr(n.validatingFields,de))}),f.state.next({validatingFields:n.validatingFields,isValidating:!ii(n.validatingFields)}))},b=(H,se=[],de,Re,Oe=!0,Se=!0)=>{if(Re&&de&&!e.disabled){if(o.action=!0,Se&&Array.isArray(Be(r,H))){const qe=de(Be(r,H),Re.argA,Re.argB);Oe&&xn(r,H,qe)}if(Se&&Array.isArray(Be(n.errors,H))){const qe=de(Be(n.errors,H),Re.argA,Re.argB);Oe&&xn(n.errors,H,qe),tCe(n.errors,H)}if((d.touchedFields||h.touchedFields)&&Se&&Array.isArray(Be(n.touchedFields,H))){const qe=de(Be(n.touchedFields,H),Re.argA,Re.argB);Oe&&xn(n.touchedFields,H,qe)}(d.dirtyFields||h.dirtyFields)&&(n.dirtyFields=Vg(s,a)),f.state.next({name:H,isDirty:P(H,se),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else xn(a,H,se)},x=(H,se)=>{xn(n.errors,H,se),f.state.next({errors:n.errors})},S=H=>{n.errors=H,f.state.next({errors:n.errors,isValid:!1})},T=(H,se,de,Re)=>{const Oe=Be(r,H);if(Oe){const Se=Be(a,H,yr(de)?Be(s,H):de);yr(Se)||Re&&Re.defaultChecked||se?xn(a,H,se?Se:hB(Oe._f)):L(H,Se),o.mount&&g()}},_=(H,se,de,Re,Oe)=>{let Se=!1,qe=!1;const Ht={name:H};if(!e.disabled){if(!de||Re){(d.isDirty||h.isDirty)&&(qe=n.isDirty,n.isDirty=Ht.isDirty=P(),Se=qe!==Ht.isDirty);const dn=cl(Be(s,H),se);qe=!!Be(n.dirtyFields,H),dn?Nr(n.dirtyFields,H):xn(n.dirtyFields,H,!0),Ht.dirtyFields=n.dirtyFields,Se=Se||(d.dirtyFields||h.dirtyFields)&&qe!==!dn}if(de){const dn=Be(n.touchedFields,H);dn||(xn(n.touchedFields,H,de),Ht.touchedFields=n.touchedFields,Se=Se||(d.touchedFields||h.touchedFields)&&dn!==de)}Se&&Oe&&f.state.next(Ht)}return Se?Ht:{}},C=(H,se,de,Re)=>{const Oe=Be(n.errors,H),Se=(d.isValid||h.isValid)&&Ti(se)&&n.isValid!==se;if(e.delayError&&de?(c=v(()=>x(H,de)),c(e.delayError)):(clearTimeout(u),c=null,de?xn(n.errors,H,de):Nr(n.errors,H)),(de?!cl(Oe,de):Oe)||!ii(Re)||Se){const qe={...Re,...Se&&Ti(se)?{isValid:se}:{},errors:n.errors,name:H};n={...n,...qe},f.state.next(qe)}},E=async H=>{y(H,!0);const se=await e.resolver(a,e.context,YTe(H||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return y(H),se},p=async H=>{const{errors:se}=await E(H);if(H)for(const de of H){const Re=Be(se,de);Re?xn(n.errors,de,Re):Nr(n.errors,de)}else n.errors=se;return se},w=async(H,se,de={valid:!0})=>{for(const Re in H){const Oe=H[Re];if(Oe){const{_f:Se,...qe}=Oe;if(Se){const Ht=l.array.has(Se.name),dn=Oe._f&&QTe(Oe._f);dn&&d.validatingFields&&y([Re],!0);const ys=await vB(Oe,l.disabled,a,m,e.shouldUseNativeValidation&&!se,Ht);if(dn&&d.validatingFields&&y([Re]),ys[Se.name]&&(de.valid=!1,se))break;!se&&(Be(ys,Se.name)?Ht?nCe(n.errors,ys,Se.name):xn(n.errors,Se.name,ys[Se.name]):Nr(n.errors,Se.name))}!ii(qe)&&await w(qe,se,de)}}return de.valid},A=()=>{for(const H of l.unMount){const se=Be(r,H);se&&(se._f.refs?se._f.refs.every(de=>!tA(de)):!tA(se._f.ref))&&Ne(H)}l.unMount=new Set},P=(H,se)=>!e.disabled&&(H&&se&&xn(a,H,se),!cl(K(),s)),I=(H,se,de)=>SX(H,l,{...o.mount?a:yr(se)?s:jo(H)?{[H]:se}:se},de,se),k=H=>I2(Be(o.mount?a:s,H,e.shouldUnregister?Be(s,H,[]):[])),L=(H,se,de={})=>{const Re=Be(r,H);let Oe=se;if(Re){const Se=Re._f;Se&&(!Se.disabled&&xn(a,H,IX(se,Se)),Oe=D_(Se.ref)&&zs(se)?"":se,AX(Se.ref)?[...Se.ref.options].forEach(qe=>qe.selected=Oe.includes(qe.value)):Se.refs?yb(Se.ref)?Se.refs.forEach(qe=>{(!qe.defaultChecked||!qe.disabled)&&(Array.isArray(Oe)?qe.checked=!!Oe.find(Ht=>Ht===qe.value):qe.checked=Oe===qe.value||!!Oe)}):Se.refs.forEach(qe=>qe.checked=qe.value===Oe):M2(Se.ref)?Se.ref.value="":(Se.ref.value=Oe,Se.ref.type||f.state.next({name:H,values:Dr(a)})))}(de.shouldDirty||de.shouldTouch)&&_(H,Oe,de.shouldTouch,de.shouldDirty,!0),de.shouldValidate&&D(H)},U=(H,se,de)=>{for(const Re in se){if(!se.hasOwnProperty(Re))return;const Oe=se[Re],Se=H+"."+Re,qe=Be(r,Se);(l.array.has(H)||_r(Oe)||qe&&!qe._f)&&!Dd(Oe)?U(Se,Oe,de):L(Se,Oe,de)}},z=(H,se,de={})=>{const Re=Be(r,H),Oe=l.array.has(H),Se=Dr(se);xn(a,H,Se),Oe?(f.array.next({name:H,values:Dr(a)}),(d.isDirty||d.dirtyFields||h.isDirty||h.dirtyFields)&&de.shouldDirty&&f.state.next({name:H,dirtyFields:Vg(s,a),isDirty:P(H,Se)})):Re&&!Re._f&&!zs(Se)?U(H,Se,de):L(H,Se,de),pB(H,l)&&f.state.next({...n,name:H}),f.state.next({name:o.mount?H:void 0,values:Dr(a)})},O=async H=>{o.mount=!0;const se=H.target;let de=se.name,Re=!0;const Oe=Be(r,de),Se=dn=>{Re=Number.isNaN(dn)||Dd(dn)&&isNaN(dn.getTime())||cl(dn,Be(a,de,dn))},qe=fB(e.mode),Ht=fB(e.reValidateMode);if(Oe){let dn,ys;const _a=se.type?hB(Oe._f):_X(H),wi=H.type===M_.BLUR||H.type===M_.FOCUS_OUT,ld=!XTe(Oe._f)&&!e.resolver&&!Be(n.errors,de)&&!Oe._f.deps||eCe(wi,Be(n.touchedFields,de),n.isSubmitted,Ht,qe),_i=pB(de,l,wi);xn(a,de,_a),wi?(Oe._f.onBlur&&Oe._f.onBlur(H),c&&c(0)):Oe._f.onChange&&Oe._f.onChange(H);const ei=_(de,_a,wi),tc=!ii(ei)||_i;if(!wi&&f.state.next({name:de,type:H.type,values:Dr(a)}),ld)return(d.isValid||h.isValid)&&(e.mode==="onBlur"?wi&&g():wi||g()),tc&&f.state.next({name:de,..._i?{}:ei});if(!wi&&_i&&f.state.next({...n}),e.resolver){const{errors:ss}=await E([de]);if(Se(_a),Re){const rf=gB(n.errors,r,de),Jo=gB(ss,r,rf.name||de);dn=Jo.error,de=Jo.name,ys=ii(ss)}}else y([de],!0),dn=(await vB(Oe,l.disabled,a,m,e.shouldUseNativeValidation))[de],y([de]),Se(_a),Re&&(dn?ys=!1:(d.isValid||h.isValid)&&(ys=await w(r,!0)));Re&&(Oe._f.deps&&D(Oe._f.deps),C(de,ys,dn,ei))}},$=(H,se)=>{if(Be(n.errors,se)&&H.focus)return H.focus(),1},D=async(H,se={})=>{let de,Re;const Oe=By(H);if(e.resolver){const Se=await p(yr(H)?H:Oe);de=ii(Se),Re=H?!Oe.some(qe=>Be(Se,qe)):de}else H?(Re=(await Promise.all(Oe.map(async Se=>{const qe=Be(r,Se);return await w(qe&&qe._f?{[Se]:qe}:qe)}))).every(Boolean),!(!Re&&!n.isValid)&&g()):Re=de=await w(r);return f.state.next({...!jo(H)||(d.isValid||h.isValid)&&de!==n.isValid?{}:{name:H},...e.resolver||!H?{isValid:de}:{},errors:n.errors}),se.shouldFocus&&!Re&&Uy(r,$,H?Oe:l.mount),Re},K=H=>{const se={...o.mount?a:s};return yr(H)?se:jo(H)?Be(se,H):H.map(de=>Be(se,de))},ie=(H,se)=>({invalid:!!Be((se||n).errors,H),isDirty:!!Be((se||n).dirtyFields,H),error:Be((se||n).errors,H),isValidating:!!Be(n.validatingFields,H),isTouched:!!Be((se||n).touchedFields,H)}),ae=H=>{H&&By(H).forEach(se=>Nr(n.errors,se)),f.state.next({errors:H?n.errors:{}})},_e=(H,se,de)=>{const Re=(Be(r,H,{_f:{}})._f||{}).ref,Oe=Be(n.errors,H)||{},{ref:Se,message:qe,type:Ht,...dn}=Oe;xn(n.errors,H,{...dn,...se,ref:Re}),f.state.next({name:H,errors:n.errors,isValid:!1}),de&&de.shouldFocus&&Re&&Re.focus&&Re.focus()},Le=(H,se)=>Ba(H)?f.state.subscribe({next:de=>"values"in de&&H(I(void 0,se),de)}):I(H,se,!0),ct=H=>f.state.subscribe({next:se=>{JTe(H.name,se.name,H.exact)&&ZTe(se,H.formState||d,Nn,H.reRenderRoot)&&H.callback({values:{...a},...n,...se,defaultValues:s})}}).unsubscribe,Nt=H=>(o.mount=!0,h={...h,...H.formState},ct({...H,formState:h})),Ne=(H,se={})=>{for(const de of H?By(H):l.mount)l.mount.delete(de),l.array.delete(de),se.keepValue||(Nr(r,de),Nr(a,de)),!se.keepError&&Nr(n.errors,de),!se.keepDirty&&Nr(n.dirtyFields,de),!se.keepTouched&&Nr(n.touchedFields,de),!se.keepIsValidating&&Nr(n.validatingFields,de),!e.shouldUnregister&&!se.keepDefaultValue&&Nr(s,de);f.state.next({values:Dr(a)}),f.state.next({...n,...se.keepDirty?{isDirty:P()}:{}}),!se.keepIsValid&&g()},ft=({disabled:H,name:se})=>{(Ti(H)&&o.mount||H||l.disabled.has(se))&&(H?l.disabled.add(se):l.disabled.delete(se))},be=(H,se={})=>{let de=Be(r,H);const Re=Ti(se.disabled)||Ti(e.disabled);return xn(r,H,{...de||{},_f:{...de&&de._f?de._f:{ref:{name:H}},name:H,mount:!0,...se}}),l.mount.add(H),de?ft({disabled:Ti(se.disabled)?se.disabled:e.disabled,name:H}):T(H,!0,se.value),{...Re?{disabled:se.disabled||e.disabled}:{},...e.progressive?{required:!!se.required,min:Bg(se.min),max:Bg(se.max),minLength:Bg(se.minLength),maxLength:Bg(se.maxLength),pattern:Bg(se.pattern)}:{},name:H,onChange:O,onBlur:O,ref:Oe=>{if(Oe){be(H,se),de=Be(r,H);const Se=yr(Oe.value)&&Oe.querySelectorAll&&Oe.querySelectorAll("input,select,textarea")[0]||Oe,qe=HTe(Se),Ht=de._f.refs||[];if(qe?Ht.find(dn=>dn===Se):Se===de._f.ref)return;xn(r,H,{_f:{...de._f,...qe?{refs:[...Ht.filter(tA),Se,...Array.isArray(Be(s,H))?[{}]:[]],ref:{type:Se.type,name:H}}:{ref:Se}}}),T(H,!1,void 0,Se)}else de=Be(r,H,{}),de._f&&(de._f.mount=!1),(e.shouldUnregister||se.shouldUnregister)&&!(jX(l.array,H)&&o.action)&&l.unMount.add(H)}}},Me=()=>e.shouldFocusError&&Uy(r,$,l.mount),$e=H=>{Ti(H)&&(f.state.next({disabled:H}),Uy(r,(se,de)=>{const Re=Be(r,de);Re&&(se.disabled=Re._f.disabled||H,Array.isArray(Re._f.refs)&&Re._f.refs.forEach(Oe=>{Oe.disabled=Re._f.disabled||H}))},0,!1))},ue=(H,se)=>async de=>{let Re;de&&(de.preventDefault&&de.preventDefault(),de.persist&&de.persist());let Oe=Dr(a);if(f.state.next({isSubmitting:!0}),e.resolver){const{errors:Se,values:qe}=await E();n.errors=Se,Oe=Dr(qe)}else await w(r);if(l.disabled.size)for(const Se of l.disabled)Nr(Oe,Se);if(Nr(n.errors,"root"),ii(n.errors)){f.state.next({errors:{}});try{await H(Oe,de)}catch(Se){Re=Se}}else se&&await se({...n.errors},de),Me(),setTimeout(Me);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ii(n.errors)&&!Re,submitCount:n.submitCount+1,errors:n.errors}),Re)throw Re},It=(H,se={})=>{Be(r,H)&&(yr(se.defaultValue)?z(H,Dr(Be(s,H))):(z(H,se.defaultValue),xn(s,H,Dr(se.defaultValue))),se.keepTouched||Nr(n.touchedFields,H),se.keepDirty||(Nr(n.dirtyFields,H),n.isDirty=se.defaultValue?P(H,Dr(Be(s,H))):P()),se.keepError||(Nr(n.errors,H),d.isValid&&g()),f.state.next({...n}))},vt=(H,se={})=>{const de=H?Dr(H):s,Re=Dr(de),Oe=ii(H),Se=Oe?s:Re;if(se.keepDefaultValues||(s=de),!se.keepValues){if(se.keepDirtyValues){const qe=new Set([...l.mount,...Object.keys(Vg(s,a))]);for(const Ht of Array.from(qe))Be(n.dirtyFields,Ht)?xn(Se,Ht,Be(a,Ht)):z(Ht,Be(Se,Ht))}else{if(P2&&yr(H))for(const qe of l.mount){const Ht=Be(r,qe);if(Ht&&Ht._f){const dn=Array.isArray(Ht._f.refs)?Ht._f.refs[0]:Ht._f.ref;if(D_(dn)){const ys=dn.closest("form");if(ys){ys.reset();break}}}}if(se.keepFieldsRef)for(const qe of l.mount)z(qe,Be(Se,qe));else r={}}a=e.shouldUnregister?se.keepDefaultValues?Dr(s):{}:Dr(Se),f.array.next({values:{...Se}}),f.state.next({values:{...Se}})}l={mount:se.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!se.keepIsValid||!!se.keepDirtyValues,o.watch=!!e.shouldUnregister,f.state.next({submitCount:se.keepSubmitCount?n.submitCount:0,isDirty:Oe?!1:se.keepDirty?n.isDirty:!!(se.keepDefaultValues&&!cl(H,s)),isSubmitted:se.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Oe?{}:se.keepDirtyValues?se.keepDefaultValues&&a?Vg(s,a):n.dirtyFields:se.keepDefaultValues&&H?Vg(s,H):se.keepDirty?n.dirtyFields:{},touchedFields:se.keepTouched?n.touchedFields:{},errors:se.keepErrors?n.errors:{},isSubmitSuccessful:se.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},un=(H,se)=>vt(Ba(H)?H(a):H,se),tn=(H,se={})=>{const de=Be(r,H),Re=de&&de._f;if(Re){const Oe=Re.refs?Re.refs[0]:Re.ref;Oe.focus&&(Oe.focus(),se.shouldSelect&&Ba(Oe.select)&&Oe.select())}},Nn=H=>{n={...n,...H}},an={control:{register:be,unregister:Ne,getFieldState:ie,handleSubmit:ue,setError:_e,_subscribe:ct,_runSchema:E,_focusError:Me,_getWatch:I,_getDirty:P,_setValid:g,_setFieldArray:b,_setDisabledField:ft,_setErrors:S,_getFieldArray:k,_reset:vt,_resetDefaultValues:()=>Ba(e.defaultValues)&&e.defaultValues().then(H=>{un(H,e.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:A,_disableForm:$e,_subjects:f,_proxyFormState:d,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(H){o=H},get _defaultValues(){return s},get _names(){return l},set _names(H){l=H},get _formState(){return n},get _options(){return e},set _options(H){e={...e,...H}}},subscribe:Nt,trigger:D,register:be,handleSubmit:ue,watch:Le,setValue:z,getValues:K,reset:un,resetField:It,clearErrors:ae,unregister:Ne,setError:_e,setFocus:tn,getFieldState:ie};return{...an,formControl:an}}function Xu(t={}){const e=F.useRef(void 0),n=F.useRef(void 0),[r,s]=F.useState({isDirty:!1,isValidating:!1,isLoading:Ba(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Ba(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!Ba(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...l}=sCe(t);e.current={...l,formState:r}}const a=e.current.control;return a._options=t,O2(()=>{const o=a._subscribe({formState:a._proxyFormState,callback:()=>s({...a._formState}),reRenderRoot:!0});return s(l=>({...l,isReady:!0})),a._formState.isReady=!0,o},[a]),F.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),F.useEffect(()=>{t.mode&&(a._options.mode=t.mode),t.reValidateMode&&(a._options.reValidateMode=t.reValidateMode)},[a,t.mode,t.reValidateMode]),F.useEffect(()=>{t.errors&&(a._setErrors(t.errors),a._focusError())},[a,t.errors]),F.useEffect(()=>{t.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,t.shouldUnregister]),F.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),F.useEffect(()=>{t.values&&!cl(t.values,n.current)?(a._reset(t.values,{keepFieldsRef:!0,...a._options.resetOptions}),n.current=t.values,s(o=>({...o}))):a._resetDefaultValues()},[a,t.values]),F.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),e.current.formState=NX(r,a),e.current}const xB=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Be(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},RX=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?xB(r.ref,n,t):r.refs&&r.refs.forEach(s=>xB(s,n,t))}},iCe=(t,e)=>{e.shouldUseNativeValidation&&RX(t,e);const n={};for(const r in t){const s=Be(e.fields,r),a=Object.assign(t[r]||{},{ref:s&&s.ref});if(aCe(e.names||Object.keys(t),r)){const o=Object.assign({},Be(n,r));xn(o,"root",a),xn(n,r,o)}else xn(n,r,a)}return n},aCe=(t,e)=>t.some(n=>n.startsWith(e+"."));var oCe=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,a=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:a,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(d){return d.errors.forEach(function(h){return t.push(h)})}),e){var c=n[o].types,u=c&&c[r.code];n[o]=EX(o,e,n,s,u?[].concat(u,r.message):r.message)}t.shift()}return n},Zu=function(t,e,n){return n===void 0&&(n={}),function(r,s,a){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return a.shouldUseNativeValidation&&RX({},a),{errors:{},values:n.raw?r:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:iCe(oCe(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},hn;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const a={};for(const o of s)a[o]=o;return a},t.getValidEnumValues=s=>{const a=t.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),o={};for(const l of a)o[l]=s[l];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(a){return s[a]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&a.push(o);return a},t.find=(s,a)=>{for(const o of s)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,a=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(hn||(hn={}));var bB;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(bB||(bB={}));const at=hn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Nc=t=>{switch(typeof t){case"undefined":return at.undefined;case"string":return at.string;case"number":return Number.isNaN(t)?at.nan:at.number;case"boolean":return at.boolean;case"function":return at.function;case"bigint":return at.bigint;case"symbol":return at.symbol;case"object":return Array.isArray(t)?at.array:t===null?at.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?at.promise:typeof Map<"u"&&t instanceof Map?at.map:typeof Set<"u"&&t instanceof Set?at.set:typeof Date<"u"&&t instanceof Date?at.date:at.object;default:return at.unknown}},Pe=hn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Vl extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(a){return a.message},r={_errors:[]},s=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(n(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return s(this),r}static assert(e){if(!(e instanceof Vl))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,hn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)if(s.path.length>0){const a=s.path[0];n[a]=n[a]||[],n[a].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Vl.create=t=>new Vl(t);const uP=(t,e)=>{let n;switch(t.code){case Pe.invalid_type:t.received===at.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Pe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,hn.jsonStringifyReplacer)}`;break;case Pe.unrecognized_keys:n=`Unrecognized key(s) in object: ${hn.joinValues(t.keys,", ")}`;break;case Pe.invalid_union:n="Invalid input";break;case Pe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${hn.joinValues(t.options)}`;break;case Pe.invalid_enum_value:n=`Invalid enum value. Expected ${hn.joinValues(t.options)}, received '${t.received}'`;break;case Pe.invalid_arguments:n="Invalid function arguments";break;case Pe.invalid_return_type:n="Invalid function return type";break;case Pe.invalid_date:n="Invalid date";break;case Pe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:hn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Pe.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Pe.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Pe.custom:n="Invalid input";break;case Pe.invalid_intersection_types:n="Intersection results could not be merged";break;case Pe.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Pe.not_finite:n="Number must be finite";break;default:n=e.defaultError,hn.assertNever(t)}return{message:n}};let lCe=uP;function cCe(){return lCe}const uCe=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,a=[...n,...s.path||[]],o={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let l="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:e,defaultError:l}).message;return{...s,path:a,message:l}};function He(t,e){const n=cCe(),r=uCe({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===uP?void 0:uP].filter(s=>!!s)});t.common.issues.push(r)}class Vi{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Ot;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const a=await s.key,o=await s.value;r.push({key:a,value:o})}return Vi.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:a,value:o}=s;if(a.status==="aborted"||o.status==="aborted")return Ot;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[a.value]=o.value)}return{status:e.value,value:r}}}const Ot=Object.freeze({status:"aborted"}),yy=t=>({status:"dirty",value:t}),xa=t=>({status:"valid",value:t}),wB=t=>t.status==="aborted",_B=t=>t.status==="dirty",Zm=t=>t.status==="valid",F_=t=>typeof Promise<"u"&&t instanceof Promise;var lt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(lt||(lt={}));class Pu{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const jB=(t,e)=>{if(Zm(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Vl(t.common.issues);return this._error=n,this._error}}};function Kt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,l)=>{const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??r??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??n??l.defaultError}},description:s}}class cn{get description(){return this._def.description}_getType(e){return Nc(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Nc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Vi,ctx:{common:e.parent.common,data:e.data,parsedType:Nc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(F_(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Nc(e)},s=this._parseSync({data:e,path:r.path,parent:r});return jB(r,s)}"~validate"(e){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Nc(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:n});return Zm(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(s=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(a=>Zm(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Nc(e)},s=this._parse({data:e,path:r.path,parent:r}),a=await(F_(s)?s:Promise.resolve(s));return jB(r,a)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,a)=>{const o=e(s),l=()=>a.addIssue({code:Pe.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new ep({schema:this,typeName:Mt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return hu.create(this,this._def)}nullable(){return tp.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Do.create(this)}promise(){return z_.create(this,this._def)}or(e){return B_.create([this,e],this._def)}and(e){return U_.create(this,e,this._def)}transform(e){return new ep({...Kt(this._def),schema:this,typeName:Mt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new mP({...Kt(this._def),innerType:this,defaultValue:n,typeName:Mt.ZodDefault})}brand(){return new RCe({typeName:Mt.ZodBranded,type:this,...Kt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new pP({...Kt(this._def),innerType:this,catchValue:n,typeName:Mt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return L2.create(this,e)}readonly(){return gP.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const dCe=/^c[^\s-]{8,}$/i,hCe=/^[0-9a-z]+$/,fCe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,mCe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,pCe=/^[a-z0-9_-]{21}$/i,gCe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,yCe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,vCe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,xCe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let nA;const bCe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,wCe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,_Ce=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,jCe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,NCe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,SCe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,OX="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ECe=new RegExp(`^${OX}$`);function MX(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function ACe(t){return new RegExp(`^${MX(t)}$`)}function TCe(t){let e=`${OX}T${MX(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function CCe(t,e){return!!((e==="v4"||!e)&&bCe.test(t)||(e==="v6"||!e)&&_Ce.test(t))}function PCe(t,e){if(!gCe.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function ICe(t,e){return!!((e==="v4"||!e)&&wCe.test(t)||(e==="v6"||!e)&&jCe.test(t))}class Yc extends cn{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==at.string){const a=this._getOrReturnCtx(e);return He(a,{code:Pe.invalid_type,expected:at.string,received:a.parsedType}),Ot}const r=new Vi;let s;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(s=this._getOrReturnCtx(e,s),He(s,{code:Pe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(s=this._getOrReturnCtx(e,s),He(s,{code:Pe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,l=e.data.length<a.value;(o||l)&&(s=this._getOrReturnCtx(e,s),o?He(s,{code:Pe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&He(s,{code:Pe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")vCe.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"email",code:Pe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")nA||(nA=new RegExp(xCe,"u")),nA.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"emoji",code:Pe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")mCe.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"uuid",code:Pe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")pCe.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"nanoid",code:Pe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")dCe.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"cuid",code:Pe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")hCe.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"cuid2",code:Pe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")fCe.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"ulid",code:Pe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),He(s,{validation:"url",code:Pe.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"regex",code:Pe.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(e,s),He(s,{code:Pe.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(s=this._getOrReturnCtx(e,s),He(s,{code:Pe.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(s=this._getOrReturnCtx(e,s),He(s,{code:Pe.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?TCe(a).test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{code:Pe.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?ECe.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{code:Pe.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?ACe(a).test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{code:Pe.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?yCe.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"duration",code:Pe.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?CCe(e.data,a.version)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"ip",code:Pe.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?PCe(e.data,a.alg)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"jwt",code:Pe.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?ICe(e.data,a.version)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"cidr",code:Pe.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?NCe.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"base64",code:Pe.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?SCe.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"base64url",code:Pe.invalid_string,message:a.message}),r.dirty()):hn.assertNever(a);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Pe.invalid_string,...lt.errToObj(r)})}_addCheck(e){return new Yc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...lt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...lt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...lt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...lt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...lt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...lt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...lt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...lt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...lt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...lt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...lt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...lt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...lt.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...lt.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...lt.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...lt.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...lt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...lt.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...lt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...lt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...lt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...lt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...lt.errToObj(n)})}nonempty(e){return this.min(1,lt.errToObj(e))}trim(){return new Yc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Yc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Yc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Yc.create=t=>new Yc({checks:[],typeName:Mt.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Kt(t)});function kCe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,a=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return a%o/10**s}class Fv extends cn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==at.number){const a=this._getOrReturnCtx(e);return He(a,{code:Pe.invalid_type,expected:at.number,received:a.parsedType}),Ot}let r;const s=new Vi;for(const a of this._def.checks)a.kind==="int"?hn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),He(r,{code:Pe.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),He(r,{code:Pe.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),He(r,{code:Pe.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?kCe(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),He(r,{code:Pe.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),He(r,{code:Pe.not_finite,message:a.message}),s.dirty()):hn.assertNever(a);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,lt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,lt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,lt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,lt.toString(n))}setLimit(e,n,r,s){return new Fv({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:lt.toString(s)}]})}_addCheck(e){return new Fv({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:lt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:lt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:lt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:lt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:lt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:lt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:lt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:lt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:lt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&hn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Fv.create=t=>new Fv({checks:[],typeName:Mt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Kt(t)});class Vv extends cn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==at.bigint)return this._getInvalidInput(e);let r;const s=new Vi;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),He(r,{code:Pe.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),He(r,{code:Pe.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),He(r,{code:Pe.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):hn.assertNever(a);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return He(n,{code:Pe.invalid_type,expected:at.bigint,received:n.parsedType}),Ot}gte(e,n){return this.setLimit("min",e,!0,lt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,lt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,lt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,lt.toString(n))}setLimit(e,n,r,s){return new Vv({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:lt.toString(s)}]})}_addCheck(e){return new Vv({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:lt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:lt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:lt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:lt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:lt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Vv.create=t=>new Vv({checks:[],typeName:Mt.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Kt(t)});class dP extends cn{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==at.boolean){const r=this._getOrReturnCtx(e);return He(r,{code:Pe.invalid_type,expected:at.boolean,received:r.parsedType}),Ot}return xa(e.data)}}dP.create=t=>new dP({typeName:Mt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Kt(t)});class V_ extends cn{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==at.date){const a=this._getOrReturnCtx(e);return He(a,{code:Pe.invalid_type,expected:at.date,received:a.parsedType}),Ot}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return He(a,{code:Pe.invalid_date}),Ot}const r=new Vi;let s;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(s=this._getOrReturnCtx(e,s),He(s,{code:Pe.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(s=this._getOrReturnCtx(e,s),He(s,{code:Pe.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):hn.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new V_({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:lt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:lt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}V_.create=t=>new V_({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Mt.ZodDate,...Kt(t)});class NB extends cn{_parse(e){if(this._getType(e)!==at.symbol){const r=this._getOrReturnCtx(e);return He(r,{code:Pe.invalid_type,expected:at.symbol,received:r.parsedType}),Ot}return xa(e.data)}}NB.create=t=>new NB({typeName:Mt.ZodSymbol,...Kt(t)});class SB extends cn{_parse(e){if(this._getType(e)!==at.undefined){const r=this._getOrReturnCtx(e);return He(r,{code:Pe.invalid_type,expected:at.undefined,received:r.parsedType}),Ot}return xa(e.data)}}SB.create=t=>new SB({typeName:Mt.ZodUndefined,...Kt(t)});class EB extends cn{_parse(e){if(this._getType(e)!==at.null){const r=this._getOrReturnCtx(e);return He(r,{code:Pe.invalid_type,expected:at.null,received:r.parsedType}),Ot}return xa(e.data)}}EB.create=t=>new EB({typeName:Mt.ZodNull,...Kt(t)});class AB extends cn{constructor(){super(...arguments),this._any=!0}_parse(e){return xa(e.data)}}AB.create=t=>new AB({typeName:Mt.ZodAny,...Kt(t)});class TB extends cn{constructor(){super(...arguments),this._unknown=!0}_parse(e){return xa(e.data)}}TB.create=t=>new TB({typeName:Mt.ZodUnknown,...Kt(t)});class Iu extends cn{_parse(e){const n=this._getOrReturnCtx(e);return He(n,{code:Pe.invalid_type,expected:at.never,received:n.parsedType}),Ot}}Iu.create=t=>new Iu({typeName:Mt.ZodNever,...Kt(t)});class CB extends cn{_parse(e){if(this._getType(e)!==at.undefined){const r=this._getOrReturnCtx(e);return He(r,{code:Pe.invalid_type,expected:at.void,received:r.parsedType}),Ot}return xa(e.data)}}CB.create=t=>new CB({typeName:Mt.ZodVoid,...Kt(t)});class Do extends cn{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==at.array)return He(n,{code:Pe.invalid_type,expected:at.array,received:n.parsedType}),Ot;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,l=n.data.length<s.exactLength.value;(o||l)&&(He(n,{code:o?Pe.too_big:Pe.too_small,minimum:l?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(He(n,{code:Pe.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(He(n,{code:Pe.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>s.type._parseAsync(new Pu(n,o,n.path,l)))).then(o=>Vi.mergeArray(r,o));const a=[...n.data].map((o,l)=>s.type._parseSync(new Pu(n,o,n.path,l)));return Vi.mergeArray(r,a)}get element(){return this._def.type}min(e,n){return new Do({...this._def,minLength:{value:e,message:lt.toString(n)}})}max(e,n){return new Do({...this._def,maxLength:{value:e,message:lt.toString(n)}})}length(e,n){return new Do({...this._def,exactLength:{value:e,message:lt.toString(n)}})}nonempty(e){return this.min(1,e)}}Do.create=(t,e)=>new Do({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Mt.ZodArray,...Kt(e)});function Ef(t){if(t instanceof or){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=hu.create(Ef(r))}return new or({...t._def,shape:()=>e})}else return t instanceof Do?new Do({...t._def,type:Ef(t.element)}):t instanceof hu?hu.create(Ef(t.unwrap())):t instanceof tp?tp.create(Ef(t.unwrap())):t instanceof Ph?Ph.create(t.items.map(e=>Ef(e))):t}class or extends cn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=hn.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==at.object){const u=this._getOrReturnCtx(e);return He(u,{code:Pe.invalid_type,expected:at.object,received:u.parsedType}),Ot}const{status:r,ctx:s}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Iu&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const d=a[u],h=s.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Pu(s,h,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof Iu){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(u==="strict")l.length>0&&(He(s,{code:Pe.unrecognized_keys,keys:l}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const h=s.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Pu(s,h,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const h=await d.key,f=await d.value;u.push({key:h,value:f,alwaysSet:d.alwaysSet})}return u}).then(u=>Vi.mergeObjectSync(r,u)):Vi.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return lt.errToObj,new or({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var a,o;const s=((o=(a=this._def).errorMap)==null?void 0:o.call(a,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:lt.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new or({...this._def,unknownKeys:"strip"})}passthrough(){return new or({...this._def,unknownKeys:"passthrough"})}extend(e){return new or({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new or({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Mt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new or({...this._def,catchall:e})}pick(e){const n={};for(const r of hn.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new or({...this._def,shape:()=>n})}omit(e){const n={};for(const r of hn.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new or({...this._def,shape:()=>n})}deepPartial(){return Ef(this)}partial(e){const n={};for(const r of hn.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new or({...this._def,shape:()=>n})}required(e){const n={};for(const r of hn.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof hu;)a=a._def.innerType;n[r]=a}return new or({...this._def,shape:()=>n})}keyof(){return DX(hn.objectKeys(this.shape))}}or.create=(t,e)=>new or({shape:()=>t,unknownKeys:"strip",catchall:Iu.create(),typeName:Mt.ZodObject,...Kt(e)});or.strictCreate=(t,e)=>new or({shape:()=>t,unknownKeys:"strict",catchall:Iu.create(),typeName:Mt.ZodObject,...Kt(e)});or.lazycreate=(t,e)=>new or({shape:t,unknownKeys:"strip",catchall:Iu.create(),typeName:Mt.ZodObject,...Kt(e)});class B_ extends cn{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new Vl(l.ctx.common.issues));return He(n,{code:Pe.invalid_union,unionErrors:o}),Ot}if(n.common.async)return Promise.all(r.map(async a=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let a;const o=[];for(const c of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=c._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!a&&(a={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(c=>new Vl(c));return He(n,{code:Pe.invalid_union,unionErrors:l}),Ot}}get options(){return this._def.options}}B_.create=(t,e)=>new B_({options:t,typeName:Mt.ZodUnion,...Kt(e)});function hP(t,e){const n=Nc(t),r=Nc(e);if(t===e)return{valid:!0,data:t};if(n===at.object&&r===at.object){const s=hn.objectKeys(e),a=hn.objectKeys(t).filter(l=>s.indexOf(l)!==-1),o={...t,...e};for(const l of a){const c=hP(t[l],e[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(n===at.array&&r===at.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let a=0;a<t.length;a++){const o=t[a],l=e[a],c=hP(o,l);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===at.date&&r===at.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class U_ extends cn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(a,o)=>{if(wB(a)||wB(o))return Ot;const l=hP(a.value,o.value);return l.valid?((_B(a)||_B(o))&&n.dirty(),{status:n.value,value:l.data}):(He(r,{code:Pe.invalid_intersection_types}),Ot)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,o])=>s(a,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}U_.create=(t,e,n)=>new U_({left:t,right:e,typeName:Mt.ZodIntersection,...Kt(n)});class Ph extends cn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==at.array)return He(r,{code:Pe.invalid_type,expected:at.array,received:r.parsedType}),Ot;if(r.data.length<this._def.items.length)return He(r,{code:Pe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ot;!this._def.rest&&r.data.length>this._def.items.length&&(He(r,{code:Pe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Pu(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(a).then(o=>Vi.mergeArray(n,o)):Vi.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new Ph({...this._def,rest:e})}}Ph.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ph({items:t,typeName:Mt.ZodTuple,rest:null,...Kt(e)})};class PB extends cn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==at.map)return He(r,{code:Pe.invalid_type,expected:at.map,received:r.parsedType}),Ot;const s=this._def.keyType,a=this._def.valueType,o=[...r.data.entries()].map(([l,c],u)=>({key:s._parse(new Pu(r,l,r.path,[u,"key"])),value:a._parse(new Pu(r,c,r.path,[u,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return Ot;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return Ot;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}}}}PB.create=(t,e,n)=>new PB({valueType:e,keyType:t,typeName:Mt.ZodMap,...Kt(n)});class Bv extends cn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==at.set)return He(r,{code:Pe.invalid_type,expected:at.set,received:r.parsedType}),Ot;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(He(r,{code:Pe.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(He(r,{code:Pe.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const a=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return Ot;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const l=[...r.data.values()].map((c,u)=>a._parse(new Pu(r,c,r.path,u)));return r.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(e,n){return new Bv({...this._def,minSize:{value:e,message:lt.toString(n)}})}max(e,n){return new Bv({...this._def,maxSize:{value:e,message:lt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Bv.create=(t,e)=>new Bv({valueType:t,minSize:null,maxSize:null,typeName:Mt.ZodSet,...Kt(e)});class IB extends cn{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}IB.create=(t,e)=>new IB({getter:t,typeName:Mt.ZodLazy,...Kt(e)});class fP extends cn{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return He(n,{received:n.data,code:Pe.invalid_literal,expected:this._def.value}),Ot}return{status:"valid",value:e.data}}get value(){return this._def.value}}fP.create=(t,e)=>new fP({value:t,typeName:Mt.ZodLiteral,...Kt(e)});function DX(t,e){return new Jm({values:t,typeName:Mt.ZodEnum,...Kt(e)})}class Jm extends cn{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return He(n,{expected:hn.joinValues(r),received:n.parsedType,code:Pe.invalid_type}),Ot}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return He(n,{received:n.data,code:Pe.invalid_enum_value,options:r}),Ot}return xa(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Jm.create(e,{...this._def,...n})}exclude(e,n=this._def){return Jm.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Jm.create=DX;class kB extends cn{_parse(e){const n=hn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==at.string&&r.parsedType!==at.number){const s=hn.objectValues(n);return He(r,{expected:hn.joinValues(s),received:r.parsedType,code:Pe.invalid_type}),Ot}if(this._cache||(this._cache=new Set(hn.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=hn.objectValues(n);return He(r,{received:r.data,code:Pe.invalid_enum_value,options:s}),Ot}return xa(e.data)}get enum(){return this._def.values}}kB.create=(t,e)=>new kB({values:t,typeName:Mt.ZodNativeEnum,...Kt(e)});class z_ extends cn{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==at.promise&&n.common.async===!1)return He(n,{code:Pe.invalid_type,expected:at.promise,received:n.parsedType}),Ot;const r=n.parsedType===at.promise?n.data:Promise.resolve(n.data);return xa(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}z_.create=(t,e)=>new z_({type:t,typeName:Mt.ZodPromise,...Kt(e)});class ep extends cn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Mt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:o=>{He(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){const o=s.transform(r.data,a);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return Ot;const c=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return c.status==="aborted"?Ot:c.status==="dirty"||n.value==="dirty"?yy(c.value):c});{if(n.value==="aborted")return Ot;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?Ot:l.status==="dirty"||n.value==="dirty"?yy(l.value):l}}if(s.type==="refinement"){const o=l=>{const c=s.refinement(l,a);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?Ot:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?Ot:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Zm(o))return Ot;const l=s.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Zm(o)?Promise.resolve(s.transform(o.value,a)).then(l=>({status:n.value,value:l})):Ot);hn.assertNever(s)}}ep.create=(t,e,n)=>new ep({schema:t,typeName:Mt.ZodEffects,effect:e,...Kt(n)});ep.createWithPreprocess=(t,e,n)=>new ep({schema:e,effect:{type:"preprocess",transform:t},typeName:Mt.ZodEffects,...Kt(n)});class hu extends cn{_parse(e){return this._getType(e)===at.undefined?xa(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}hu.create=(t,e)=>new hu({innerType:t,typeName:Mt.ZodOptional,...Kt(e)});class tp extends cn{_parse(e){return this._getType(e)===at.null?xa(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}tp.create=(t,e)=>new tp({innerType:t,typeName:Mt.ZodNullable,...Kt(e)});class mP extends cn{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===at.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}mP.create=(t,e)=>new mP({innerType:t,typeName:Mt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Kt(e)});class pP extends cn{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return F_(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Vl(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Vl(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}pP.create=(t,e)=>new pP({innerType:t,typeName:Mt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Kt(e)});class RB extends cn{_parse(e){if(this._getType(e)!==at.nan){const r=this._getOrReturnCtx(e);return He(r,{code:Pe.invalid_type,expected:at.nan,received:r.parsedType}),Ot}return{status:"valid",value:e.data}}}RB.create=t=>new RB({typeName:Mt.ZodNaN,...Kt(t)});class RCe extends cn{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class L2 extends cn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Ot:a.status==="dirty"?(n.dirty(),yy(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Ot:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new L2({in:e,out:n,typeName:Mt.ZodPipeline})}}class gP extends cn{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Zm(s)&&(s.value=Object.freeze(s.value)),s);return F_(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}gP.create=(t,e)=>new gP({innerType:t,typeName:Mt.ZodReadonly,...Kt(e)});or.lazycreate;var Mt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Mt||(Mt={}));const ze=Yc.create,OB=dP.create;Iu.create;Do.create;const Ju=or.create;or.strictCreate;B_.create;U_.create;Ph.create;const LX=fP.create,$X=Jm.create;z_.create;hu.create;tp.create;var OCe="Label",FX=N.forwardRef((t,e)=>i.jsx(Je.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));FX.displayName=OCe;var VX=FX;const MCe=qh("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),J=N.forwardRef(({className:t,...e},n)=>i.jsx(VX,{ref:n,className:me(MCe(),t),...e}));J.displayName=VX.displayName;function Zp({children:t,title:e,subtitle:n,visualContent:r}){return i.jsxs("div",{className:"min-h-screen w-full grid grid-cols-1 lg:grid-cols-2 overflow-hidden bg-background",children:[i.jsxs("div",{className:"hidden lg:flex relative flex-col justify-between p-12 bg-[#0F172A] text-white overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('/grid-pattern.svg')] opacity-10"}),i.jsx("div",{className:"absolute -left-[20%] -top-[20%] w-[60%] h-[60%] bg-blue-600/20 rounded-full blur-[120px]"}),i.jsx("div",{className:"absolute -right-[20%] -bottom-[20%] w-[60%] h-[60%] bg-indigo-600/20 rounded-full blur-[120px]"})]}),i.jsx("div",{className:"relative z-10",children:i.jsx(Rv,{variant:"full",size:"lg",className:"text-white [&_span]:text-white"})}),i.jsx("div",{className:"relative z-10 flex-1 flex items-center justify-center",children:i.jsx(Ur.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"w-full max-w-md",children:r})}),i.jsx("div",{className:"relative z-10 space-y-4",children:i.jsxs("blockquote",{className:"space-y-2",children:[i.jsx("p",{className:"text-lg font-medium text-slate-200 leading-relaxed",children:`"ZedBooks has completely transformed how we manage our organization's finances. It's not just a ledger; it's peace of mind."`}),i.jsx("footer",{className:"text-sm text-slate-400",children:" Sarah M., Financial Director"})]})})]}),i.jsxs("div",{className:"relative flex flex-col items-center justify-center p-6 sm:p-12 lg:p-24 bg-background",children:[i.jsx("div",{className:"lg:hidden absolute top-6 left-6",children:i.jsx(Rv,{variant:"full",size:"md"})}),i.jsxs(Ur.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},className:"w-full max-w-[440px] space-y-8",children:[i.jsxs("div",{className:"space-y-2 text-center lg:text-left",children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:e}),i.jsx("p",{className:"text-muted-foreground",children:n})]}),i.jsx("div",{className:"bg-card/50 backdrop-blur-sm rounded-xl",children:t})]}),i.jsx("div",{className:"absolute bottom-4 right-4 text-xs text-muted-foreground/50",children:i.jsx(ZO,{})})]})]})}const DCe=()=>i.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-6",children:[i.jsxs(Ur.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.8},className:"absolute top-1/4 -left-12 bg-white/10 backdrop-blur-md border border-white/20 p-4 rounded-xl w-64 shadow-2xl",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("div",{className:"h-8 w-8 rounded-full bg-emerald-500/20 flex items-center justify-center",children:i.jsx(zw,{className:"h-5 w-5 text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-slate-300",children:"Payroll Status"}),i.jsx("p",{className:"text-sm font-semibold text-white",children:"Processed Successfully"})]})]}),i.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full w-full bg-emerald-500"})})]}),i.jsxs(Ur.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4,duration:.8},className:"bg-slate-900/80 backdrop-blur-xl border border-slate-700/50 p-6 rounded-2xl w-full max-w-sm shadow-2xl relative z-10",children:[i.jsxs("div",{className:"flex justify-between items-end mb-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-400",children:"Total Revenue"}),i.jsx("p",{className:"text-3xl font-bold text-white",children:"K 245,000"})]}),i.jsx("div",{className:"text-emerald-400 text-sm font-medium",children:"+12.5%"})]}),i.jsx("div",{className:"flex items-end gap-2 h-24",children:[40,65,50,80,55,90,75].map((t,e)=>i.jsx("div",{className:"flex-1 bg-blue-500/20 rounded-t-sm relative overflow-hidden group",children:i.jsx(Ur.div,{initial:{height:0},animate:{height:`${t}%`},transition:{delay:.8+e*.1,duration:1},className:"absolute bottom-0 w-full bg-gradient-to-t from-blue-600 to-cyan-400 w-full"})},e))})]})]}),LCe=Ju({email:ze().email("Invalid email address"),password:ze().min(6,"Password must be at least 6 characters")});function MB({onForgotPassword:t,onSignup:e,onLoginSuccess:n}){const[r,s]=N.useState(!1),{register:a,handleSubmit:o,formState:{errors:l}}=Xu({resolver:Zu(LCe)}),c=async u=>{s(!0);try{await Ps.signIn(u.email,u.password),Z.success("Welcome back!"),n()}catch(d){const h=d instanceof Error?d.message:"Failed to log in";Z.error(h)}finally{s(!1)}};return i.jsx(Zp,{title:"Welcome back",subtitle:"Sign in to continue to your dashboard",visualContent:i.jsx(DCe,{}),children:i.jsxs("form",{onSubmit:o(c),className:"space-y-5 p-1",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"email",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(qu,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{id:"email",type:"email",placeholder:"name@company.com",className:"pl-10",...a("email")})]}),l.email&&i.jsx("p",{className:"text-sm text-destructive",children:l.email.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(J,{htmlFor:"password",children:"Password"}),i.jsx("button",{type:"button",onClick:t,className:"text-sm text-primary hover:underline font-medium",children:"Forgot Password?"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Fm,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{id:"password",type:"password",placeholder:"",className:"pl-10",...a("password")})]}),l.password&&i.jsx("p",{className:"text-sm text-destructive",children:l.password.message})]}),i.jsx(W,{type:"submit",className:"w-full",size:"lg",disabled:r,children:r?i.jsxs(i.Fragment,{children:[i.jsx(En,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("span",{className:"w-full border-t"})}),i.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:i.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(W,{variant:"outline",disabled:!0,className:"w-full",children:"Google"}),i.jsx(W,{variant:"outline",disabled:!0,className:"w-full",children:"Microsoft"})]}),i.jsxs("div",{className:"text-center text-sm text-muted-foreground mt-6",children:["Don't have an account?"," ",i.jsx("button",{type:"button",onClick:e,className:"text-primary hover:underline font-medium",children:"Sign up"})]})]})})}function $2(t){const e=N.useRef({value:t,previous:t});return N.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var $Ce=[" ","Enter","ArrowUp","ArrowDown"],FCe=[" ","Enter"],Ih="Select",[fS,mS,VCe]=dN(Ih),[Jp,Ltt]=ps(Ih,[VCe,Fp]),pS=Fp(),[BCe,ed]=Jp(Ih),[UCe,zCe]=Jp(Ih),BX=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:f,required:m,form:v}=t,g=pS(e),[y,b]=N.useState(null),[x,S]=N.useState(null),[T,_]=N.useState(!1),C=sb(u),[E,p]=Za({prop:r,defaultProp:s??!1,onChange:a,caller:Ih}),[w,A]=Za({prop:o,defaultProp:l,onChange:c,caller:Ih}),P=N.useRef(null),I=y?v||!!y.closest("form"):!0,[k,L]=N.useState(new Set),U=Array.from(k).map(z=>z.props.value).join(";");return i.jsx(dR,{...g,children:i.jsxs(BCe,{required:m,scope:e,trigger:y,onTriggerChange:b,valueNode:x,onValueNodeChange:S,valueNodeHasChildren:T,onValueNodeHasChildrenChange:_,contentId:ia(),value:w,onValueChange:A,open:E,onOpenChange:p,dir:C,triggerPointerDownPosRef:P,disabled:f,children:[i.jsx(fS.Provider,{scope:e,children:i.jsx(UCe,{scope:t.__scopeSelect,onNativeOptionAdd:N.useCallback(z=>{L(O=>new Set(O).add(z))},[]),onNativeOptionRemove:N.useCallback(z=>{L(O=>{const $=new Set(O);return $.delete(z),$})},[]),children:n})}),I?i.jsxs(dZ,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:h,value:w,onChange:z=>A(z.target.value),disabled:f,form:v,children:[w===void 0?i.jsx("option",{value:""}):null,Array.from(k)]},U):null]})})};BX.displayName=Ih;var UX="SelectTrigger",zX=N.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,a=pS(n),o=ed(UX,n),l=o.disabled||r,c=Dt(e,o.onTriggerChange),u=mS(n),d=N.useRef("touch"),[h,f,m]=fZ(g=>{const y=u().filter(S=>!S.disabled),b=y.find(S=>S.value===o.value),x=mZ(y,g,b);x!==void 0&&o.onValueChange(x.value)}),v=g=>{l||(o.onOpenChange(!0),m()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return i.jsx(hR,{asChild:!0,...a,children:i.jsx(Je.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":hZ(o.value)?"":void 0,...s,ref:c,onClick:ke(s.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&v(g)}),onPointerDown:ke(s.onPointerDown,g=>{d.current=g.pointerType;const y=g.target;y.hasPointerCapture(g.pointerId)&&y.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(v(g),g.preventDefault())}),onKeyDown:ke(s.onKeyDown,g=>{const y=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(y&&g.key===" ")&&$Ce.includes(g.key)&&(v(),g.preventDefault())})})})});zX.displayName=UX;var qX="SelectValue",WX=N.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:a,placeholder:o="",...l}=t,c=ed(qX,n),{onValueNodeHasChildrenChange:u}=c,d=a!==void 0,h=Dt(e,c.onValueNodeChange);return fr(()=>{u(d)},[u,d]),i.jsx(Je.span,{...l,ref:h,style:{pointerEvents:"none"},children:hZ(c.value)?i.jsx(i.Fragment,{children:o}):a})});WX.displayName=qX;var qCe="SelectIcon",HX=N.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return i.jsx(Je.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});HX.displayName=qCe;var WCe="SelectPortal",KX=t=>i.jsx(Mx,{asChild:!0,...t});KX.displayName=WCe;var kh="SelectContent",GX=N.forwardRef((t,e)=>{const n=ed(kh,t.__scopeSelect),[r,s]=N.useState();if(fr(()=>{s(new DocumentFragment)},[]),!n.open){const a=r;return a?Uh.createPortal(i.jsx(YX,{scope:t.__scopeSelect,children:i.jsx(fS.Slot,{scope:t.__scopeSelect,children:i.jsx("div",{children:t.children})})}),a):null}return i.jsx(QX,{...t,ref:e})});GX.displayName=kh;var Pa=10,[YX,td]=Jp(kh),HCe="SelectContentImpl",KCe=hh("SelectContent.RemoveScroll"),QX=N.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:v,hideWhenDetached:g,avoidCollisions:y,...b}=t,x=ed(kh,n),[S,T]=N.useState(null),[_,C]=N.useState(null),E=Dt(e,Ne=>T(Ne)),[p,w]=N.useState(null),[A,P]=N.useState(null),I=mS(n),[k,L]=N.useState(!1),U=N.useRef(!1);N.useEffect(()=>{if(S)return CO(S)},[S]),TO();const z=N.useCallback(Ne=>{const[ft,...be]=I().map(ue=>ue.ref.current),[Me]=be.slice(-1),$e=document.activeElement;for(const ue of Ne)if(ue===$e||(ue==null||ue.scrollIntoView({block:"nearest"}),ue===ft&&_&&(_.scrollTop=0),ue===Me&&_&&(_.scrollTop=_.scrollHeight),ue==null||ue.focus(),document.activeElement!==$e))return},[I,_]),O=N.useCallback(()=>z([p,S]),[z,p,S]);N.useEffect(()=>{k&&O()},[k,O]);const{onOpenChange:$,triggerPointerDownPosRef:D}=x;N.useEffect(()=>{if(S){let Ne={x:0,y:0};const ft=Me=>{var $e,ue;Ne={x:Math.abs(Math.round(Me.pageX)-((($e=D.current)==null?void 0:$e.x)??0)),y:Math.abs(Math.round(Me.pageY)-(((ue=D.current)==null?void 0:ue.y)??0))}},be=Me=>{Ne.x<=10&&Ne.y<=10?Me.preventDefault():S.contains(Me.target)||$(!1),document.removeEventListener("pointermove",ft),D.current=null};return D.current!==null&&(document.addEventListener("pointermove",ft),document.addEventListener("pointerup",be,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ft),document.removeEventListener("pointerup",be,{capture:!0})}}},[S,$,D]),N.useEffect(()=>{const Ne=()=>$(!1);return window.addEventListener("blur",Ne),window.addEventListener("resize",Ne),()=>{window.removeEventListener("blur",Ne),window.removeEventListener("resize",Ne)}},[$]);const[K,ie]=fZ(Ne=>{const ft=I().filter($e=>!$e.disabled),be=ft.find($e=>$e.ref.current===document.activeElement),Me=mZ(ft,Ne,be);Me&&setTimeout(()=>Me.ref.current.focus())}),ae=N.useCallback((Ne,ft,be)=>{const Me=!U.current&&!be;(x.value!==void 0&&x.value===ft||Me)&&(w(Ne),Me&&(U.current=!0))},[x.value]),_e=N.useCallback(()=>S==null?void 0:S.focus(),[S]),Le=N.useCallback((Ne,ft,be)=>{const Me=!U.current&&!be;(x.value!==void 0&&x.value===ft||Me)&&P(Ne)},[x.value]),ct=r==="popper"?yP:XX,Nt=ct===yP?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:v,hideWhenDetached:g,avoidCollisions:y}:{};return i.jsx(YX,{scope:n,content:S,viewport:_,onViewportChange:C,itemRefCallback:ae,selectedItem:p,onItemLeave:_e,itemTextRefCallback:Le,focusSelectedItem:O,selectedItemText:A,position:r,isPositioned:k,searchRef:K,children:i.jsx(QN,{as:KCe,allowPinchZoom:!0,children:i.jsx(KN,{asChild:!0,trapped:x.open,onMountAutoFocus:Ne=>{Ne.preventDefault()},onUnmountAutoFocus:ke(s,Ne=>{var ft;(ft=x.trigger)==null||ft.focus({preventScroll:!0}),Ne.preventDefault()}),children:i.jsx(Op,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:Ne=>Ne.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:i.jsx(ct,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:Ne=>Ne.preventDefault(),...b,...Nt,onPlaced:()=>L(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:ke(b.onKeyDown,Ne=>{const ft=Ne.ctrlKey||Ne.altKey||Ne.metaKey;if(Ne.key==="Tab"&&Ne.preventDefault(),!ft&&Ne.key.length===1&&ie(Ne.key),["ArrowUp","ArrowDown","Home","End"].includes(Ne.key)){let Me=I().filter($e=>!$e.disabled).map($e=>$e.ref.current);if(["ArrowUp","End"].includes(Ne.key)&&(Me=Me.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ne.key)){const $e=Ne.target,ue=Me.indexOf($e);Me=Me.slice(ue+1)}setTimeout(()=>z(Me)),Ne.preventDefault()}})})})})})})});QX.displayName=HCe;var GCe="SelectItemAlignedPosition",XX=N.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,a=ed(kh,n),o=td(kh,n),[l,c]=N.useState(null),[u,d]=N.useState(null),h=Dt(e,E=>d(E)),f=mS(n),m=N.useRef(!1),v=N.useRef(!0),{viewport:g,selectedItem:y,selectedItemText:b,focusSelectedItem:x}=o,S=N.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&g&&y&&b){const E=a.trigger.getBoundingClientRect(),p=u.getBoundingClientRect(),w=a.valueNode.getBoundingClientRect(),A=b.getBoundingClientRect();if(a.dir!=="rtl"){const $e=A.left-p.left,ue=w.left-$e,It=E.left-ue,vt=E.width+It,un=Math.max(vt,p.width),tn=window.innerWidth-Pa,Nn=FC(ue,[Pa,Math.max(Pa,tn-un)]);l.style.minWidth=vt+"px",l.style.left=Nn+"px"}else{const $e=p.right-A.right,ue=window.innerWidth-w.right-$e,It=window.innerWidth-E.right-ue,vt=E.width+It,un=Math.max(vt,p.width),tn=window.innerWidth-Pa,Nn=FC(ue,[Pa,Math.max(Pa,tn-un)]);l.style.minWidth=vt+"px",l.style.right=Nn+"px"}const P=f(),I=window.innerHeight-Pa*2,k=g.scrollHeight,L=window.getComputedStyle(u),U=parseInt(L.borderTopWidth,10),z=parseInt(L.paddingTop,10),O=parseInt(L.borderBottomWidth,10),$=parseInt(L.paddingBottom,10),D=U+z+k+$+O,K=Math.min(y.offsetHeight*5,D),ie=window.getComputedStyle(g),ae=parseInt(ie.paddingTop,10),_e=parseInt(ie.paddingBottom,10),Le=E.top+E.height/2-Pa,ct=I-Le,Nt=y.offsetHeight/2,Ne=y.offsetTop+Nt,ft=U+z+Ne,be=D-ft;if(ft<=Le){const $e=P.length>0&&y===P[P.length-1].ref.current;l.style.bottom="0px";const ue=u.clientHeight-g.offsetTop-g.offsetHeight,It=Math.max(ct,Nt+($e?_e:0)+ue+O),vt=ft+It;l.style.height=vt+"px"}else{const $e=P.length>0&&y===P[0].ref.current;l.style.top="0px";const It=Math.max(Le,U+g.offsetTop+($e?ae:0)+Nt)+be;l.style.height=It+"px",g.scrollTop=ft-Le+g.offsetTop}l.style.margin=`${Pa}px 0`,l.style.minHeight=K+"px",l.style.maxHeight=I+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[f,a.trigger,a.valueNode,l,u,g,y,b,a.dir,r]);fr(()=>S(),[S]);const[T,_]=N.useState();fr(()=>{u&&_(window.getComputedStyle(u).zIndex)},[u]);const C=N.useCallback(E=>{E&&v.current===!0&&(S(),x==null||x(),v.current=!1)},[S,x]);return i.jsx(QCe,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:C,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:T},children:i.jsx(Je.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});XX.displayName=GCe;var YCe="SelectPopperPosition",yP=N.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Pa,...a}=t,o=pS(n);return i.jsx(fR,{...o,...a,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});yP.displayName=YCe;var[QCe,F2]=Jp(kh,{}),vP="SelectViewport",ZX=N.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,a=td(vP,n),o=F2(vP,n),l=Dt(e,a.onViewportChange),c=N.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(fS.Slot,{scope:n,children:i.jsx(Je.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ke(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&h){const m=Math.abs(c.current-d.scrollTop);if(m>0){const v=window.innerHeight-Pa*2,g=parseFloat(h.style.minHeight),y=parseFloat(h.style.height),b=Math.max(g,y);if(b<v){const x=b+m,S=Math.min(v,x),T=x-S;h.style.height=S+"px",h.style.bottom==="0px"&&(d.scrollTop=T>0?T:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});ZX.displayName=vP;var JX="SelectGroup",[XCe,ZCe]=Jp(JX),JCe=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=ia();return i.jsx(XCe,{scope:n,id:s,children:i.jsx(Je.div,{role:"group","aria-labelledby":s,...r,ref:e})})});JCe.displayName=JX;var eZ="SelectLabel",tZ=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=ZCe(eZ,n);return i.jsx(Je.div,{id:s.id,...r,ref:e})});tZ.displayName=eZ;var q_="SelectItem",[ePe,nZ]=Jp(q_),rZ=N.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:a,...o}=t,l=ed(q_,n),c=td(q_,n),u=l.value===r,[d,h]=N.useState(a??""),[f,m]=N.useState(!1),v=Dt(e,x=>{var S;return(S=c.itemRefCallback)==null?void 0:S.call(c,x,r,s)}),g=ia(),y=N.useRef("touch"),b=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(ePe,{scope:n,value:r,disabled:s,textId:g,isSelected:u,onItemTextChange:N.useCallback(x=>{h(S=>S||((x==null?void 0:x.textContent)??"").trim())},[]),children:i.jsx(fS.ItemSlot,{scope:n,value:r,disabled:s,textValue:d,children:i.jsx(Je.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:v,onFocus:ke(o.onFocus,()=>m(!0)),onBlur:ke(o.onBlur,()=>m(!1)),onClick:ke(o.onClick,()=>{y.current!=="mouse"&&b()}),onPointerUp:ke(o.onPointerUp,()=>{y.current==="mouse"&&b()}),onPointerDown:ke(o.onPointerDown,x=>{y.current=x.pointerType}),onPointerMove:ke(o.onPointerMove,x=>{var S;y.current=x.pointerType,s?(S=c.onItemLeave)==null||S.call(c):y.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ke(o.onPointerLeave,x=>{var S;x.currentTarget===document.activeElement&&((S=c.onItemLeave)==null||S.call(c))}),onKeyDown:ke(o.onKeyDown,x=>{var T;((T=c.searchRef)==null?void 0:T.current)!==""&&x.key===" "||(FCe.includes(x.key)&&b(),x.key===" "&&x.preventDefault())})})})})});rZ.displayName=q_;var vy="SelectItemText",sZ=N.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...a}=t,o=ed(vy,n),l=td(vy,n),c=nZ(vy,n),u=zCe(vy,n),[d,h]=N.useState(null),f=Dt(e,b=>h(b),c.onItemTextChange,b=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,b,c.value,c.disabled)}),m=d==null?void 0:d.textContent,v=N.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:y}=u;return fr(()=>(g(v),()=>y(v)),[g,y,v]),i.jsxs(i.Fragment,{children:[i.jsx(Je.span,{id:c.textId,...a,ref:f}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Uh.createPortal(a.children,o.valueNode):null]})});sZ.displayName=vy;var iZ="SelectItemIndicator",aZ=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return nZ(iZ,n).isSelected?i.jsx(Je.span,{"aria-hidden":!0,...r,ref:e}):null});aZ.displayName=iZ;var xP="SelectScrollUpButton",oZ=N.forwardRef((t,e)=>{const n=td(xP,t.__scopeSelect),r=F2(xP,t.__scopeSelect),[s,a]=N.useState(!1),o=Dt(e,r.onScrollButtonChange);return fr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(cZ,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});oZ.displayName=xP;var bP="SelectScrollDownButton",lZ=N.forwardRef((t,e)=>{const n=td(bP,t.__scopeSelect),r=F2(bP,t.__scopeSelect),[s,a]=N.useState(!1),o=Dt(e,r.onScrollButtonChange);return fr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;a(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(cZ,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});lZ.displayName=bP;var cZ=N.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,a=td("SelectScrollButton",n),o=N.useRef(null),l=mS(n),c=N.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return N.useEffect(()=>()=>c(),[c]),fr(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),i.jsx(Je.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:ke(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ke(s.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ke(s.onPointerLeave,()=>{c()})})}),tPe="SelectSeparator",uZ=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return i.jsx(Je.div,{"aria-hidden":!0,...r,ref:e})});uZ.displayName=tPe;var wP="SelectArrow",nPe=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=pS(n),a=ed(wP,n),o=td(wP,n);return a.open&&o.position==="popper"?i.jsx(mR,{...s,...r,ref:e}):null});nPe.displayName=wP;var rPe="SelectBubbleInput",dZ=N.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=N.useRef(null),a=Dt(r,s),o=$2(e);return N.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&d){const h=new Event("change",{bubbles:!0});d.call(l,e),l.dispatchEvent(h)}},[o,e]),i.jsx(Je.select,{...n,style:{...Rq,...n.style},ref:a,defaultValue:e})});dZ.displayName=rPe;function hZ(t){return t===""||t===void 0}function fZ(t){const e=dr(t),n=N.useRef(""),r=N.useRef(0),s=N.useCallback(o=>{const l=n.current+o;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),a=N.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function mZ(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=sPe(t,Math.max(a,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function sPe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var iPe=BX,pZ=zX,aPe=WX,oPe=HX,lPe=KX,gZ=GX,cPe=ZX,yZ=tZ,vZ=rZ,uPe=sZ,dPe=aZ,xZ=oZ,bZ=lZ,wZ=uZ;const _Z="__lovable_empty__",Ct=({onValueChange:t,...e})=>i.jsx(iPe,{...e,onValueChange:n=>{t==null||t(n===_Z?"":n)}}),Pt=aPe,Et=N.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(pZ,{ref:r,className:me("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,i.jsx(oPe,{asChild:!0,children:i.jsx(Qk,{className:"h-4 w-4 opacity-50"})})]}));Et.displayName=pZ.displayName;const jZ=N.forwardRef(({className:t,...e},n)=>i.jsx(xZ,{ref:n,className:me("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(Uoe,{className:"h-4 w-4"})}));jZ.displayName=xZ.displayName;const NZ=N.forwardRef(({className:t,...e},n)=>i.jsx(bZ,{ref:n,className:me("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(Qk,{className:"h-4 w-4"})}));NZ.displayName=bZ.displayName;const At=N.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>i.jsx(lPe,{children:i.jsxs(gZ,{ref:s,className:me("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[i.jsx(jZ,{}),i.jsx(cPe,{className:me("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),i.jsx(NZ,{})]})}));At.displayName=gZ.displayName;const hPe=N.forwardRef(({className:t,...e},n)=>i.jsx(yZ,{ref:n,className:me("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));hPe.displayName=yZ.displayName;const ye=N.forwardRef(({className:t,children:e,value:n,...r},s)=>i.jsxs(vZ,{ref:s,value:n===""?_Z:n,className:me("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(dPe,{children:i.jsx($x,{className:"h-4 w-4"})})}),i.jsx(uPe,{children:e})]}));ye.displayName=vZ.displayName;const fPe=N.forwardRef(({className:t,...e},n)=>i.jsx(wZ,{ref:n,className:me("-mx-1 my-1 h-px bg-muted",t),...e}));fPe.displayName=wZ.displayName;const mPe=()=>i.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-8",children:[i.jsxs(Ur.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,duration:.5},className:"absolute top-20 right-10 bg-white p-4 rounded-xl shadow-2xl flex items-center gap-4 z-20",children:[i.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold",children:"+"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-800",children:"New Customer"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Just joined your network"})]})]}),i.jsxs("div",{className:"w-full max-w-sm bg-slate-800/50 backdrop-blur-md border border-slate-700/50 p-6 rounded-2xl relative",children:[i.jsxs("div",{className:"flex justify-between items-start mb-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-white font-semibold",children:"Monthly Growth"}),i.jsx("p",{className:"text-slate-400 text-sm",children:"Revenue vs Expenses"})]}),i.jsxs("div",{className:"bg-emerald-500/20 text-emerald-400 px-2 py-1 rounded text-xs font-bold flex items-center gap-1",children:[i.jsx(t8,{className:"h-3 w-3"})," 24%"]})]}),i.jsx("div",{className:"h-32 flex items-end justify-between gap-2",children:[30,45,35,60,50,75,65,90].map((t,e)=>i.jsx(Ur.div,{initial:{height:0},animate:{height:`${t}%`},transition:{delay:.5+e*.1,duration:.8,ease:"easeOut"},className:"w-full bg-gradient-to-t from-blue-600 to-indigo-400 rounded-t-sm opacity-80 hover:opacity-100 transition-opacity"},e))})]})]}),pPe=Ju({organizationName:ze().min(1,"Organization name is required"),email:ze().email("Invalid email address"),password:ze().min(6,"Password must be at least 6 characters"),phone:ze().min(10,"Phone number must be at least 10 digits").regex(/^\+?[0-9]+$/,"Invalid phone number"),organizationType:$X(["business","non_profit"]),taxClassification:ze().min(1,"Tax classification is required"),tpin:ze().regex(/^\d{10}$/,"TPIN must be exactly 10 digits")});function gPe({onLogin:t,onSignupSuccess:e}){const[n,r]=N.useState(!1),{register:s,handleSubmit:a,setValue:o,watch:l,formState:{errors:c}}=Xu({resolver:Zu(pPe),defaultValues:{organizationType:"business",taxClassification:""}}),u=l("organizationType"),d=async h=>{r(!0);try{await Ps.signUp({email:h.email,password:h.password,organizationName:h.organizationName,phone:h.phone,organizationType:h.organizationType,taxClassification:h.taxClassification,tpin:h.tpin}),Z.success("Account created successfully!"),e(h.email)}catch(f){const m=f instanceof Error?f.message:"Failed to create account";Z.error(m)}finally{r(!1)}};return i.jsx(Zp,{title:"Create Account",subtitle:"Start your journey with ZedBooks today",visualContent:i.jsx(mPe,{}),children:i.jsxs("form",{onSubmit:a(d),className:"space-y-4 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"orgName",children:"Organization Name"}),i.jsxs("div",{className:"relative",children:[i.jsx(Lx,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{id:"orgName",placeholder:"e.g. Acme Corp",className:"pl-10",...s("organizationName")})]}),c.organizationName&&i.jsx("p",{className:"text-sm text-destructive",children:c.organizationName.message})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Organization Type"}),i.jsxs(Ct,{onValueChange:h=>{o("organizationType",h),o("taxClassification","")},defaultValue:"business",children:[i.jsx(Et,{children:i.jsx(Pt,{placeholder:"Select type"})}),i.jsxs(At,{children:[i.jsx(ye,{value:"business",children:"Business"}),i.jsx(ye,{value:"non_profit",children:"Non-profit"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Tax Classification"}),i.jsxs(Ct,{onValueChange:h=>o("taxClassification",h),children:[i.jsx(Et,{children:i.jsx(Pt,{placeholder:"Select class"})}),i.jsx(At,{children:u==="business"?i.jsxs(i.Fragment,{children:[i.jsx(ye,{value:"vat_registered",children:"VAT Registered"}),i.jsx(ye,{value:"turnover_tax",children:"Turnover Tax"}),i.jsx(ye,{value:"non_vat",children:"Non-VAT"})]}):i.jsxs(i.Fragment,{children:[i.jsx(ye,{value:"tax_exempt",children:"Tax Exempt"}),i.jsx(ye,{value:"grant_funded",children:"Grant Funded"}),i.jsx(ye,{value:"charitable",children:"Charitable"})]})})]}),c.taxClassification&&i.jsx("p",{className:"text-sm text-destructive",children:c.taxClassification.message})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"TPIN (10 digits)"}),i.jsxs("div",{className:"relative",children:[i.jsx(o8,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"1234567890",className:"pl-10",...s("tpin"),onChange:h=>{const f=h.target.value.replace(/\D/g,"").slice(0,10);o("tpin",f)}})]}),c.tpin&&i.jsx("p",{className:"text-sm text-destructive",children:c.tpin.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"email",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(qu,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{id:"email",type:"email",placeholder:"name@company.com",className:"pl-10",...s("email")})]}),c.email&&i.jsx("p",{className:"text-sm text-destructive",children:c.email.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"phone",children:"Phone"}),i.jsxs("div",{className:"relative",children:[i.jsx(l8,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{id:"phone",placeholder:"+260...",className:"pl-10",...s("phone")})]}),c.phone&&i.jsx("p",{className:"text-sm text-destructive",children:c.phone.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"password",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Fm,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{id:"password",type:"password",placeholder:"",className:"pl-10",...s("password")})]}),c.password&&i.jsx("p",{className:"text-sm text-destructive",children:c.password.message})]}),i.jsx(W,{type:"submit",className:"w-full",size:"lg",disabled:n,children:n?i.jsxs(i.Fragment,{children:[i.jsx(En,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Account..."]}):"Create Account"}),i.jsxs("div",{className:"text-center text-sm text-muted-foreground mt-4",children:["Already have an account?"," ",i.jsx("button",{type:"button",onClick:t,className:"text-primary hover:underline font-medium",children:"Sign in"})]})]})})}const yPe=()=>i.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-8",children:[i.jsxs(Ur.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8},className:"bg-slate-800/50 backdrop-blur-xl border border-slate-700/50 p-8 rounded-full shadow-2xl relative",children:[i.jsx("div",{className:"absolute inset-0 bg-blue-500/20 rounded-full blur-xl animate-pulse"}),i.jsx(Jk,{className:"h-24 w-24 text-blue-400 relative z-10"})]}),i.jsxs("div",{className:"text-center space-y-2 max-w-xs",children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:"Secure Account Recovery"}),i.jsx("p",{className:"text-sm text-slate-400",children:"We use industry-standard encryption to verify your identity and protect your data."})]})]}),vPe=Ju({email:ze().email("Invalid email address")});function xPe({onLogin:t}){const[e,n]=N.useState(!1),{register:r,handleSubmit:s,formState:{errors:a},reset:o}=Xu({resolver:Zu(vPe)}),l=async c=>{n(!0);try{await Ps.sendResetPasswordEmail(c.email),Z.success("Reset link sent! Please check your inbox."),o()}catch(u){const d=u instanceof Error?u.message:"Failed to send reset link";Z.error(d)}finally{n(!1)}};return i.jsx(Zp,{title:"Forgot Password?",subtitle:"No worries, we'll send you reset instructions.",visualContent:i.jsx(yPe,{}),children:i.jsxs("form",{onSubmit:s(l),className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"email",children:"Email Address"}),i.jsxs("div",{className:"relative",children:[i.jsx(qu,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{id:"email",type:"email",placeholder:"name@company.com",className:"pl-10",...r("email")})]}),a.email&&i.jsx("p",{className:"text-sm text-destructive",children:a.email.message})]}),i.jsx(W,{type:"submit",className:"w-full",size:"lg",disabled:e,children:e?i.jsxs(i.Fragment,{children:[i.jsx(En,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending Link..."]}):"Send Reset Link"}),i.jsx("div",{className:"text-center text-sm",children:i.jsx("button",{type:"button",onClick:t,className:"text-muted-foreground hover:text-primary transition-colors flex items-center justify-center gap-2 mx-auto",children:" Back to Login"})})]})})}const bPe=()=>i.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-8",children:[i.jsxs(Ur.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8},className:"bg-emerald-900/40 backdrop-blur-xl border border-emerald-500/30 p-8 rounded-full shadow-2xl relative",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 rounded-full blur-xl animate-pulse"}),i.jsx(Jk,{className:"h-24 w-24 text-emerald-400 relative z-10"})]}),i.jsxs("div",{className:"text-center space-y-2 max-w-xs",children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:"Reset Credentials"}),i.jsx("p",{className:"text-sm text-slate-400",children:"Create a strong password to ensure your organization's data remains secure."})]})]}),wPe=Ju({password:ze().min(6,"Password must be at least 6 characters"),confirmPassword:ze().min(6,"Password must be at least 6 characters")}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function _Pe({actionCode:t,onLogin:e}){const[n,r]=N.useState(!1),{register:s,handleSubmit:a,formState:{errors:o}}=Xu({resolver:Zu(wPe)}),l=async c=>{r(!0);try{await Ape(b_,t,c.password),Z.success("Password updated successfully!"),e()}catch(u){const d=u instanceof Error?u.message:"Failed to update password";Z.error(d)}finally{r(!1)}};return i.jsx(Zp,{title:"Set New Password",subtitle:"Enter your new password below.",visualContent:i.jsx(bPe,{}),children:i.jsxs("form",{onSubmit:a(l),className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"password",children:"New Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Fm,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{id:"password",type:"password",placeholder:"",className:"pl-10",...s("password")})]}),o.password&&i.jsx("p",{className:"text-sm text-destructive",children:o.password.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"confirmPassword",children:"Confirm Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Fm,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{id:"confirmPassword",type:"password",placeholder:"",className:"pl-10",...s("confirmPassword")})]}),o.confirmPassword&&i.jsx("p",{className:"text-sm text-destructive",children:o.confirmPassword.message})]}),i.jsx(W,{type:"submit",className:"w-full",size:"lg",disabled:n,children:n?i.jsxs(i.Fragment,{children:[i.jsx(En,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Password"}),i.jsx("div",{className:"text-center text-sm",children:i.jsx("button",{type:"button",onClick:e,className:"text-muted-foreground hover:text-primary transition-colors flex items-center justify-center gap-2 mx-auto",children:" Back to Login"})})]})})}const jPe=()=>i.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-8",children:[i.jsxs(Ur.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8},className:"bg-blue-900/40 backdrop-blur-xl border border-blue-500/30 p-8 rounded-full shadow-2xl relative",children:[i.jsx("div",{className:"absolute inset-0 bg-blue-500/20 rounded-full blur-xl animate-pulse"}),i.jsx(qu,{className:"h-24 w-24 text-blue-400 relative z-10"})]}),i.jsxs("div",{className:"text-center space-y-2 max-w-xs",children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:"Check Your Inbox"}),i.jsx("p",{className:"text-sm text-slate-400",children:"We've sent a secure verification link to your email address."})]})]});function NPe({email:t,onLogin:e}){const[n,r]=N.useState(!1),[s,a]=N.useState(0);N.useEffect(()=>{if(s>0){const l=setTimeout(()=>a(s-1),1e3);return()=>clearTimeout(l)}},[s]);const o=async()=>{if(!(s>0)){r(!0);try{await Ps.resendVerificationEmail(),Z.success("Verification email resent!"),a(60)}catch(l){const c=l instanceof Error?l.message:"Failed to resend";Z.error(c)}finally{r(!1)}}};return i.jsx(Zp,{title:"Verify Your Email",subtitle:`We've sent a link to ${t}`,visualContent:i.jsx(jPe,{}),children:i.jsxs("div",{className:"space-y-6 text-center",children:[i.jsx("div",{className:"bg-muted/50 p-4 rounded-lg border border-border text-sm text-muted-foreground text-left",children:i.jsx("p",{children:"Click the link in the email we sent to verify your account. If you don't see it, check your spam folder."})}),i.jsx(W,{onClick:o,disabled:n||s>0,className:"w-full",variant:"outline",children:n?i.jsxs(i.Fragment,{children:[i.jsx(En,{className:"mr-2 h-4 w-4 animate-spin"}),"Resending..."]}):s>0?i.jsxs(i.Fragment,{children:[i.jsx(u8,{className:"mr-2 h-4 w-4"}),"Resend in ",s,"s"]}):"Resend Verification Email"}),i.jsx("button",{type:"button",onClick:e,className:"text-primary hover:underline font-medium text-sm",children:"Back to Login"})]})})}function SPe(){const t=$n(),[e,n]=N.useState(!0),[r,s]=N.useState("login"),[a,o]=N.useState(""),[l,c]=N.useState(null),[u,d]=N.useState(null),h=N.useCallback(async m=>{try{try{await Ps.ensureCurrentMembership()}catch{}const v=await Fe.getPrimaryMembershipByUser(m);if(!v){t("/setup",{replace:!0});return}const g=await Fe.getCompanySettings(v.companyId);if(!(g!=null&&g.companyName)){t("/setup",{replace:!0});return}t("/dashboard",{replace:!0})}catch{t("/dashboard",{replace:!0})}},[t]),f=N.useCallback(async m=>{try{await Ps.acceptInvitation(m),Z.success("Invitation accepted. Your company access is configured."),sessionStorage.removeItem("pendingInviteToken")}catch(g){const y=g instanceof Error?g.message:"Unable to accept invitation";Z.error(`Invitation link error: ${y}`)}const v=new URL(window.location.href);v.searchParams.delete("token"),v.searchParams.delete("invite"),window.history.replaceState({},"",v.toString()),d(null)},[]);return N.useEffect(()=>{const m=new URLSearchParams(window.location.search),v=m.get("mode"),g=m.get("oobCode"),y=m.get("token")||m.get("invite"),b=m.get("view");if(y)d(y),sessionStorage.setItem("pendingInviteToken",y);else{const C=sessionStorage.getItem("pendingInviteToken");C&&d(C)}let x=!0;const S=()=>{const C=new URL(window.location.href);["mode","oobCode","apiKey","lang","continueUrl"].forEach(E=>C.searchParams.delete(E)),window.history.replaceState({},"",C.toString())};(async()=>{if(!Oo){n(!1);return}if(v==="resetPassword"&&g){try{await Ppe(b_,g),x&&(c(g),s("reset-password"))}catch{Z.error("Invalid or expired password reset link."),s("login")}finally{x&&n(!1)}return}if(v==="verifyEmail"&&g){try{await Tpe(b_,g),Z.success("Email verified successfully. You can now log in."),S(),s("login")}catch{Z.error("Email verification link is invalid or expired."),s("login")}x&&n(!1);return}const C=Ps.getCurrentUser();if(C){const E=y||sessionStorage.getItem("pendingInviteToken");E&&await f(E),await h(C.uid)}else x&&(b==="signup"?s("signup"):b==="login"&&s("login"),n(!1))})();const _=Ps.onAuthStateChanged(async C=>{if(!x)return;if(!C){n(!1);return}const E=y||sessionStorage.getItem("pendingInviteToken");E&&await f(E),setTimeout(()=>{h(C.uid)},500)});return()=>{x=!1,_.unsubscribe()}},[f,h]),e?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:i.jsxs("div",{className:"text-center",children:[i.jsx(En,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Checking authentication..."})]})}):r==="login"?i.jsx(MB,{onForgotPassword:()=>s("forgot-password"),onSignup:()=>s("signup"),onLoginSuccess:()=>{}}):r==="signup"?i.jsx(gPe,{onLogin:()=>s("login"),onSignupSuccess:m=>{o(m),s("verify-email")}}):r==="forgot-password"?i.jsx(xPe,{onLogin:()=>s("login")}):r==="reset-password"&&l?i.jsx(_Pe,{actionCode:l,onLogin:()=>s("login")}):r==="verify-email"?i.jsx(NPe,{email:a,onLogin:()=>s("login")}):i.jsx(MB,{onForgotPassword:()=>s("forgot-password"),onSignup:()=>s("signup"),onLoginSuccess:()=>{}})}function EPe(){const t=$n(),[e]=NR(),{user:n,isLoading:r}=ot(),s=(e.get("token")||"").trim(),[a,o]=N.useState(!0),[l,c]=N.useState(!1),[u,d]=N.useState(null),[h,f]=N.useState(null);return N.useEffect(()=>{(async()=>{if(!s){f("Invitation token is missing."),o(!1);return}try{const v=await Rt("getInvitationByToken",{token:s});d(v)}catch(v){const g=v instanceof Error?v.message:"Invitation is invalid or expired.";f(g)}finally{o(!1)}})()},[s]),N.useEffect(()=>{!r&&n&&(async()=>{if(!(!n||!s)){c(!0);try{await Ps.acceptInvitation(s),Z.success("Invitation accepted. Redirecting to dashboard."),t("/dashboard",{replace:!0})}catch(v){const g=v instanceof Error?v.message:"Failed to accept invitation.";Z.error(g)}finally{c(!1)}}})()},[r,t,s,n]),a||r?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[i.jsx(En,{className:"h-5 w-5 animate-spin"}),i.jsx("span",{children:"Loading invitation..."})]})}):h||!u?i.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:i.jsxs(Q,{className:"w-full max-w-md",children:[i.jsxs(ee,{children:[i.jsx(te,{children:"Invitation Error"}),i.jsx(dt,{children:h||"Invitation not found."})]}),i.jsx(ne,{children:i.jsx(W,{onClick:()=>t("/auth"),className:"w-full",children:"Go to Login"})})]})}):n?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[i.jsx(En,{className:"h-5 w-5 animate-spin"}),i.jsx("span",{children:l?"Accepting invitation...":"Redirecting..."})]})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:i.jsxs(Q,{className:"w-full max-w-md",children:[i.jsxs(ee,{children:[i.jsx(te,{children:"Organization Invitation"}),i.jsxs(dt,{children:["You were invited to join ",u.companyName||"this organization"," as ",u.role,"."]})]}),i.jsxs(ne,{className:"space-y-2",children:[u.email&&i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Email: ",u.email]}),u.expiresAt&&i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Expires: ",new Date(u.expiresAt).toLocaleString()]}),i.jsxs("div",{className:"pt-4 space-y-2",children:[i.jsx(W,{className:"w-full",onClick:()=>t(`/auth?token=${encodeURIComponent(s)}${u.userExists?"":"&view=signup"}`),children:u.userExists?"Continue to Login":"Create Account to Accept"}),i.jsx(W,{variant:"outline",className:"w-full",onClick:()=>t("/auth"),children:"Cancel"})]})]})]})})}var SZ={exports:{}},EZ={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var np=N;function APe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var TPe=typeof Object.is=="function"?Object.is:APe,CPe=np.useState,PPe=np.useEffect,IPe=np.useLayoutEffect,kPe=np.useDebugValue;function RPe(t,e){var n=e(),r=CPe({inst:{value:n,getSnapshot:e}}),s=r[0].inst,a=r[1];return IPe(function(){s.value=n,s.getSnapshot=e,rA(s)&&a({inst:s})},[t,n,e]),PPe(function(){return rA(s)&&a({inst:s}),t(function(){rA(s)&&a({inst:s})})},[t]),kPe(n),n}function rA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!TPe(t,n)}catch{return!0}}function OPe(t,e){return e()}var MPe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?OPe:RPe;EZ.useSyncExternalStore=np.useSyncExternalStore!==void 0?np.useSyncExternalStore:MPe;SZ.exports=EZ;var DPe=SZ.exports;function LPe(){return DPe.useSyncExternalStore($Pe,()=>!0,()=>!1)}function $Pe(){return()=>{}}var V2="Avatar",[FPe,$tt]=ps(V2),[VPe,AZ]=FPe(V2),TZ=N.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,a]=N.useState("idle");return i.jsx(VPe,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:i.jsx(Je.span,{...r,ref:e})})});TZ.displayName=V2;var CZ="AvatarImage",PZ=N.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...a}=t,o=AZ(CZ,n),l=BPe(r,a),c=dr(u=>{s(u),o.onImageLoadingStatusChange(u)});return fr(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?i.jsx(Je.img,{...a,ref:e,src:r}):null});PZ.displayName=CZ;var IZ="AvatarFallback",kZ=N.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,a=AZ(IZ,n),[o,l]=N.useState(r===void 0);return N.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&a.imageLoadingStatus!=="loaded"?i.jsx(Je.span,{...s,ref:e}):null});kZ.displayName=IZ;function DB(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function BPe(t,{referrerPolicy:e,crossOrigin:n}){const r=LPe(),s=N.useRef(null),a=r?(s.current||(s.current=new window.Image),s.current):null,[o,l]=N.useState(()=>DB(a,t));return fr(()=>{l(DB(a,t))},[a,t]),fr(()=>{const c=h=>()=>{l(h)};if(!a)return;const u=c("loaded"),d=c("error");return a.addEventListener("load",u),a.addEventListener("error",d),e&&(a.referrerPolicy=e),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",u),a.removeEventListener("error",d)}},[a,n,e]),o}var RZ=TZ,OZ=PZ,MZ=kZ;const _P=N.forwardRef(({className:t,...e},n)=>i.jsx(RZ,{ref:n,className:me("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));_P.displayName=RZ.displayName;const UPe=N.forwardRef(({className:t,...e},n)=>i.jsx(OZ,{ref:n,className:me("aspect-square h-full w-full",t),...e}));UPe.displayName=OZ.displayName;const jP=N.forwardRef(({className:t,...e},n)=>i.jsx(MZ,{ref:n,className:me("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));jP.displayName=MZ.displayName;const zPe=qh("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ve({className:t,variant:e,...n}){return i.jsx("div",{className:me(zPe({variant:e}),t),...n})}var gS="Switch",[qPe,Ftt]=ps(gS),[WPe,HPe]=qPe(gS),DZ=N.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=t,[f,m]=N.useState(null),v=Dt(e,S=>m(S)),g=N.useRef(!1),y=f?d||!!f.closest("form"):!0,[b,x]=Za({prop:s,defaultProp:a??!1,onChange:u,caller:gS});return i.jsxs(WPe,{scope:n,checked:b,disabled:l,children:[i.jsx(Je.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":VZ(b),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:v,onClick:ke(t.onClick,S=>{x(T=>!T),y&&(g.current=S.isPropagationStopped(),g.current||S.stopPropagation())})}),y&&i.jsx(FZ,{control:f,bubbles:!g.current,name:r,value:c,checked:b,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});DZ.displayName=gS;var LZ="SwitchThumb",$Z=N.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=HPe(LZ,n);return i.jsx(Je.span,{"data-state":VZ(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});$Z.displayName=LZ;var KPe="SwitchBubbleInput",FZ=N.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},a)=>{const o=N.useRef(null),l=Dt(o,a),c=$2(n),u=lR(e);return N.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&m){const v=new Event("click",{bubbles:r});m.call(d,n),d.dispatchEvent(v)}},[c,n,r]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});FZ.displayName=KPe;function VZ(t){return t?"checked":"unchecked"}var BZ=DZ,GPe=$Z;const us=N.forwardRef(({className:t,...e},n)=>i.jsx(BZ,{className:me("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:n,children:i.jsx(GPe,{className:me("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));us.displayName=BZ.displayName;const YPe=[{min:0,max:5100,rate:0},{min:5100,max:7100,rate:.2},{min:7100,max:9200,rate:.3},{min:9200,max:1/0,rate:.37}],QPe=.05,XPe=1342,ZPe=.01,JPe=250;function UZ(t){let e=0,n=t;for(const r of YPe){if(n<=0)break;const s=Math.min(n,r.max-r.min);e+=s*r.rate,n-=s}return Math.round(e*100)/100}function zZ(t){const e=Math.round(t*QPe*100)/100,n=Math.min(e,XPe);return{employee:n,employer:n}}function qZ(t){const e=Math.round(t*ZPe*100)/100,n=Math.min(e,JPe);return{employee:n,employer:n}}function eIe(t,e=0,n=0,r=0,s=0,a=0){const o=t+e+n+r,l=zZ(o),c=qZ(t),u=UZ(o),d=l.employee+c.employee+u+s+a,h=o-d;return{basicSalary:t,housingAllowance:e,transportAllowance:n,otherAllowances:r,grossSalary:o,paye:u,napsaEmployee:l.employee,napsaEmployer:l.employer,nhimaEmployee:c.employee,nhimaEmployer:c.employer,advancesDeducted:s,totalDeductions:d,netSalary:h}}function le(t){return`K${t.toLocaleString("en-ZM",{minimumFractionDigits:2,maximumFractionDigits:2})}`}var tIe=Array.isArray,bi=tIe,nIe=typeof Db=="object"&&Db&&Db.Object===Object&&Db,WZ=nIe,rIe=WZ,sIe=typeof self=="object"&&self&&self.Object===Object&&self,iIe=rIe||sIe||Function("return this")(),Xo=iIe,aIe=Xo,oIe=aIe.Symbol,vb=oIe,LB=vb,HZ=Object.prototype,lIe=HZ.hasOwnProperty,cIe=HZ.toString,Ug=LB?LB.toStringTag:void 0;function uIe(t){var e=lIe.call(t,Ug),n=t[Ug];try{t[Ug]=void 0;var r=!0}catch{}var s=cIe.call(t);return r&&(e?t[Ug]=n:delete t[Ug]),s}var dIe=uIe,hIe=Object.prototype,fIe=hIe.toString;function mIe(t){return fIe.call(t)}var pIe=mIe,$B=vb,gIe=dIe,yIe=pIe,vIe="[object Null]",xIe="[object Undefined]",FB=$B?$B.toStringTag:void 0;function bIe(t){return t==null?t===void 0?xIe:vIe:FB&&FB in Object(t)?gIe(t):yIe(t)}var Ql=bIe;function wIe(t){return t!=null&&typeof t=="object"}var Xl=wIe,_Ie=Ql,jIe=Xl,NIe="[object Symbol]";function SIe(t){return typeof t=="symbol"||jIe(t)&&_Ie(t)==NIe}var eg=SIe,EIe=bi,AIe=eg,TIe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,CIe=/^\w*$/;function PIe(t,e){if(EIe(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||AIe(t)?!0:CIe.test(t)||!TIe.test(t)||e!=null&&t in Object(e)}var B2=PIe;function IIe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var nd=IIe;const tg=vn(nd);var kIe=Ql,RIe=nd,OIe="[object AsyncFunction]",MIe="[object Function]",DIe="[object GeneratorFunction]",LIe="[object Proxy]";function $Ie(t){if(!RIe(t))return!1;var e=kIe(t);return e==MIe||e==DIe||e==OIe||e==LIe}var U2=$Ie;const _t=vn(U2);var FIe=Xo,VIe=FIe["__core-js_shared__"],BIe=VIe,sA=BIe,VB=function(){var t=/[^.]+$/.exec(sA&&sA.keys&&sA.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function UIe(t){return!!VB&&VB in t}var zIe=UIe,qIe=Function.prototype,WIe=qIe.toString;function HIe(t){if(t!=null){try{return WIe.call(t)}catch{}try{return t+""}catch{}}return""}var KZ=HIe,KIe=U2,GIe=zIe,YIe=nd,QIe=KZ,XIe=/[\\^$.*+?()[\]{}|]/g,ZIe=/^\[object .+?Constructor\]$/,JIe=Function.prototype,eke=Object.prototype,tke=JIe.toString,nke=eke.hasOwnProperty,rke=RegExp("^"+tke.call(nke).replace(XIe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ske(t){if(!YIe(t)||GIe(t))return!1;var e=KIe(t)?rke:ZIe;return e.test(QIe(t))}var ike=ske;function ake(t,e){return t==null?void 0:t[e]}var oke=ake,lke=ike,cke=oke;function uke(t,e){var n=cke(t,e);return lke(n)?n:void 0}var Xh=uke,dke=Xh,hke=dke(Object,"create"),yS=hke,BB=yS;function fke(){this.__data__=BB?BB(null):{},this.size=0}var mke=fke;function pke(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var gke=pke,yke=yS,vke="__lodash_hash_undefined__",xke=Object.prototype,bke=xke.hasOwnProperty;function wke(t){var e=this.__data__;if(yke){var n=e[t];return n===vke?void 0:n}return bke.call(e,t)?e[t]:void 0}var _ke=wke,jke=yS,Nke=Object.prototype,Ske=Nke.hasOwnProperty;function Eke(t){var e=this.__data__;return jke?e[t]!==void 0:Ske.call(e,t)}var Ake=Eke,Tke=yS,Cke="__lodash_hash_undefined__";function Pke(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Tke&&e===void 0?Cke:e,this}var Ike=Pke,kke=mke,Rke=gke,Oke=_ke,Mke=Ake,Dke=Ike;function ng(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ng.prototype.clear=kke;ng.prototype.delete=Rke;ng.prototype.get=Oke;ng.prototype.has=Mke;ng.prototype.set=Dke;var Lke=ng;function $ke(){this.__data__=[],this.size=0}var Fke=$ke;function Vke(t,e){return t===e||t!==t&&e!==e}var z2=Vke,Bke=z2;function Uke(t,e){for(var n=t.length;n--;)if(Bke(t[n][0],e))return n;return-1}var vS=Uke,zke=vS,qke=Array.prototype,Wke=qke.splice;function Hke(t){var e=this.__data__,n=zke(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Wke.call(e,n,1),--this.size,!0}var Kke=Hke,Gke=vS;function Yke(t){var e=this.__data__,n=Gke(e,t);return n<0?void 0:e[n][1]}var Qke=Yke,Xke=vS;function Zke(t){return Xke(this.__data__,t)>-1}var Jke=Zke,eRe=vS;function tRe(t,e){var n=this.__data__,r=eRe(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var nRe=tRe,rRe=Fke,sRe=Kke,iRe=Qke,aRe=Jke,oRe=nRe;function rg(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}rg.prototype.clear=rRe;rg.prototype.delete=sRe;rg.prototype.get=iRe;rg.prototype.has=aRe;rg.prototype.set=oRe;var xS=rg,lRe=Xh,cRe=Xo,uRe=lRe(cRe,"Map"),q2=uRe,UB=Lke,dRe=xS,hRe=q2;function fRe(){this.size=0,this.__data__={hash:new UB,map:new(hRe||dRe),string:new UB}}var mRe=fRe;function pRe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var gRe=pRe,yRe=gRe;function vRe(t,e){var n=t.__data__;return yRe(e)?n[typeof e=="string"?"string":"hash"]:n.map}var bS=vRe,xRe=bS;function bRe(t){var e=xRe(this,t).delete(t);return this.size-=e?1:0,e}var wRe=bRe,_Re=bS;function jRe(t){return _Re(this,t).get(t)}var NRe=jRe,SRe=bS;function ERe(t){return SRe(this,t).has(t)}var ARe=ERe,TRe=bS;function CRe(t,e){var n=TRe(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var PRe=CRe,IRe=mRe,kRe=wRe,RRe=NRe,ORe=ARe,MRe=PRe;function sg(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}sg.prototype.clear=IRe;sg.prototype.delete=kRe;sg.prototype.get=RRe;sg.prototype.has=ORe;sg.prototype.set=MRe;var W2=sg,GZ=W2,DRe="Expected a function";function H2(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(DRe);var n=function(){var r=arguments,s=e?e.apply(this,r):r[0],a=n.cache;if(a.has(s))return a.get(s);var o=t.apply(this,r);return n.cache=a.set(s,o)||a,o};return n.cache=new(H2.Cache||GZ),n}H2.Cache=GZ;var YZ=H2;const LRe=vn(YZ);var $Re=YZ,FRe=500;function VRe(t){var e=$Re(t,function(r){return n.size===FRe&&n.clear(),r}),n=e.cache;return e}var BRe=VRe,URe=BRe,zRe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qRe=/\\(\\)?/g,WRe=URe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(zRe,function(n,r,s,a){e.push(s?a.replace(qRe,"$1"):r||n)}),e}),HRe=WRe;function KRe(t,e){for(var n=-1,r=t==null?0:t.length,s=Array(r);++n<r;)s[n]=e(t[n],n,t);return s}var K2=KRe,zB=vb,GRe=K2,YRe=bi,QRe=eg,XRe=1/0,qB=zB?zB.prototype:void 0,WB=qB?qB.toString:void 0;function QZ(t){if(typeof t=="string")return t;if(YRe(t))return GRe(t,QZ)+"";if(QRe(t))return WB?WB.call(t):"";var e=t+"";return e=="0"&&1/t==-XRe?"-0":e}var ZRe=QZ,JRe=ZRe;function eOe(t){return t==null?"":JRe(t)}var XZ=eOe,tOe=bi,nOe=B2,rOe=HRe,sOe=XZ;function iOe(t,e){return tOe(t)?t:nOe(t,e)?[t]:rOe(sOe(t))}var ZZ=iOe,aOe=eg,oOe=1/0;function lOe(t){if(typeof t=="string"||aOe(t))return t;var e=t+"";return e=="0"&&1/t==-oOe?"-0":e}var wS=lOe,cOe=ZZ,uOe=wS;function dOe(t,e){e=cOe(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[uOe(e[n++])];return n&&n==r?t:void 0}var G2=dOe,hOe=G2;function fOe(t,e,n){var r=t==null?void 0:hOe(t,e);return r===void 0?n:r}var JZ=fOe;const $i=vn(JZ);function mOe(t){return t==null}var pOe=mOe;const Ft=vn(pOe);var gOe=Ql,yOe=bi,vOe=Xl,xOe="[object String]";function bOe(t){return typeof t=="string"||!yOe(t)&&vOe(t)&&gOe(t)==xOe}var wOe=bOe;const Rh=vn(wOe);var eJ={exports:{}},jn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y2=Symbol.for("react.element"),Q2=Symbol.for("react.portal"),_S=Symbol.for("react.fragment"),jS=Symbol.for("react.strict_mode"),NS=Symbol.for("react.profiler"),SS=Symbol.for("react.provider"),ES=Symbol.for("react.context"),_Oe=Symbol.for("react.server_context"),AS=Symbol.for("react.forward_ref"),TS=Symbol.for("react.suspense"),CS=Symbol.for("react.suspense_list"),PS=Symbol.for("react.memo"),IS=Symbol.for("react.lazy"),jOe=Symbol.for("react.offscreen"),tJ;tJ=Symbol.for("react.module.reference");function ba(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Y2:switch(t=t.type,t){case _S:case NS:case jS:case TS:case CS:return t;default:switch(t=t&&t.$$typeof,t){case _Oe:case ES:case AS:case IS:case PS:case SS:return t;default:return e}}case Q2:return e}}}jn.ContextConsumer=ES;jn.ContextProvider=SS;jn.Element=Y2;jn.ForwardRef=AS;jn.Fragment=_S;jn.Lazy=IS;jn.Memo=PS;jn.Portal=Q2;jn.Profiler=NS;jn.StrictMode=jS;jn.Suspense=TS;jn.SuspenseList=CS;jn.isAsyncMode=function(){return!1};jn.isConcurrentMode=function(){return!1};jn.isContextConsumer=function(t){return ba(t)===ES};jn.isContextProvider=function(t){return ba(t)===SS};jn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Y2};jn.isForwardRef=function(t){return ba(t)===AS};jn.isFragment=function(t){return ba(t)===_S};jn.isLazy=function(t){return ba(t)===IS};jn.isMemo=function(t){return ba(t)===PS};jn.isPortal=function(t){return ba(t)===Q2};jn.isProfiler=function(t){return ba(t)===NS};jn.isStrictMode=function(t){return ba(t)===jS};jn.isSuspense=function(t){return ba(t)===TS};jn.isSuspenseList=function(t){return ba(t)===CS};jn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===_S||t===NS||t===jS||t===TS||t===CS||t===jOe||typeof t=="object"&&t!==null&&(t.$$typeof===IS||t.$$typeof===PS||t.$$typeof===SS||t.$$typeof===ES||t.$$typeof===AS||t.$$typeof===tJ||t.getModuleId!==void 0)};jn.typeOf=ba;eJ.exports=jn;var NOe=eJ.exports,SOe=Ql,EOe=Xl,AOe="[object Number]";function TOe(t){return typeof t=="number"||EOe(t)&&SOe(t)==AOe}var nJ=TOe;const COe=vn(nJ);var POe=nJ;function IOe(t){return POe(t)&&t!=+t}var kOe=IOe;const ig=vn(kOe);var Hs=function(e){return e===0?0:e>0?1:-1},Ld=function(e){return Rh(e)&&e.indexOf("%")===e.length-1},Ee=function(e){return COe(e)&&!ig(e)},ROe=function(e){return Ft(e)},zr=function(e){return Ee(e)||Rh(e)},OOe=0,ag=function(e){var n=++OOe;return"".concat(e||"").concat(n)},Ks=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ee(e)&&!Rh(e))return r;var a;if(Ld(e)){var o=e.indexOf("%");a=n*parseFloat(e.slice(0,o))/100}else a=+e;return ig(a)&&(a=r),s&&a>n&&(a=n),a},Rc=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},MOe=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},s=0;s<n;s++)if(!r[e[s]])r[e[s]]=!0;else return!0;return!1},ci=function(e,n){return Ee(e)&&Ee(n)?function(r){return e+r*(n-e)}:function(){return n}};function W_(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):$i(r,e))===n})}var DOe=function(e,n){return Ee(e)&&Ee(n)?e-n:Rh(e)&&Rh(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function fm(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function NP(t){"@babel/helpers - typeof";return NP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NP(t)}var LOe=["viewBox","children"],$Oe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],HB=["points","pathLength"],iA={svg:LOe,polygon:HB,polyline:HB},X2=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],H_=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(N.isValidElement(e)&&(r=e.props),!tg(r))return null;var s={};return Object.keys(r).forEach(function(a){X2.includes(a)&&(s[a]=n||function(o){return r[a](r,o)})}),s},FOe=function(e,n,r){return function(s){return e(n,r,s),null}},Oh=function(e,n,r){if(!tg(e)||NP(e)!=="object")return null;var s=null;return Object.keys(e).forEach(function(a){var o=e[a];X2.includes(a)&&typeof o=="function"&&(s||(s={}),s[a]=FOe(o,n,r))}),s},VOe=["children"],BOe=["children"];function KB(t,e){if(t==null)return{};var n=UOe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function UOe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function SP(t){"@babel/helpers - typeof";return SP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SP(t)}var GB={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},wl=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},YB=null,aA=null,Z2=function t(e){if(e===YB&&Array.isArray(aA))return aA;var n=[];return N.Children.forEach(e,function(r){Ft(r)||(NOe.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),aA=n,YB=e,n};function ua(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(s){return wl(s)}):r=[wl(e)],Z2(t).forEach(function(s){var a=$i(s,"type.displayName")||$i(s,"type.name");r.indexOf(a)!==-1&&n.push(s)}),n}function Ai(t,e){var n=ua(t,e);return n&&n[0]}var QB=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,s=n.height;return!(!Ee(r)||r<=0||!Ee(s)||s<=0)},zOe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],qOe=function(e){return e&&e.type&&Rh(e.type)&&zOe.indexOf(e.type)>=0},WOe=function(e){return e&&SP(e)==="object"&&"clipDot"in e},HOe=function(e,n,r,s){var a,o=(a=iA==null?void 0:iA[s])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!_t(e)&&(s&&o.includes(n)||$Oe.includes(n))||r&&X2.includes(n)},pt=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var s=e;if(N.isValidElement(e)&&(s=e.props),!tg(s))return null;var a={};return Object.keys(s).forEach(function(o){var l;HOe((l=s)===null||l===void 0?void 0:l[o],o,n,r)&&(a[o]=s[o])}),a},EP=function t(e,n){if(e===n)return!0;var r=N.Children.count(e);if(r!==N.Children.count(n))return!1;if(r===0)return!0;if(r===1)return XB(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var s=0;s<r;s++){var a=e[s],o=n[s];if(Array.isArray(a)||Array.isArray(o)){if(!t(a,o))return!1}else if(!XB(a,o))return!1}return!0},XB=function(e,n){if(Ft(e)&&Ft(n))return!0;if(!Ft(e)&&!Ft(n)){var r=e.props||{},s=r.children,a=KB(r,VOe),o=n.props||{},l=o.children,c=KB(o,BOe);return s&&l?fm(a,c)&&EP(s,l):!s&&!l?fm(a,c):!1}return!1},ZB=function(e,n){var r=[],s={};return Z2(e).forEach(function(a,o){if(qOe(a))r.push(a);else if(a){var l=wl(a.type),c=n[l]||{},u=c.handler,d=c.once;if(u&&(!d||!s[l])){var h=u(a,l,o);r.push(h),s[l]=!0}}}),r},KOe=function(e){var n=e&&e.type;return n&&GB[n]?GB[n]:null},GOe=function(e,n){return Z2(n).indexOf(e)},YOe=["children","width","height","viewBox","className","style","title","desc"];function AP(){return AP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AP.apply(this,arguments)}function QOe(t,e){if(t==null)return{};var n=XOe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function XOe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function TP(t){var e=t.children,n=t.width,r=t.height,s=t.viewBox,a=t.className,o=t.style,l=t.title,c=t.desc,u=QOe(t,YOe),d=s||{width:n,height:r,x:0,y:0},h=$t("recharts-surface",a);return F.createElement("svg",AP({},pt(u,!0,"svg"),{className:h,width:n,height:r,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),F.createElement("title",null,l),F.createElement("desc",null,c),e)}var ZOe=["children","className"];function CP(){return CP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CP.apply(this,arguments)}function JOe(t,e){if(t==null)return{};var n=e2e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function e2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var rn=F.forwardRef(function(t,e){var n=t.children,r=t.className,s=JOe(t,ZOe),a=$t("recharts-layer",r);return F.createElement("g",CP({className:a},pt(s,!0),{ref:e}),n)}),Ga=function(e,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a]};function t2e(t,e,n){var r=-1,s=t.length;e<0&&(e=-e>s?0:s+e),n=n>s?s:n,n<0&&(n+=s),s=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(s);++r<s;)a[r]=t[r+e];return a}var n2e=t2e,r2e=n2e;function s2e(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:r2e(t,e,n)}var i2e=s2e,a2e="\\ud800-\\udfff",o2e="\\u0300-\\u036f",l2e="\\ufe20-\\ufe2f",c2e="\\u20d0-\\u20ff",u2e=o2e+l2e+c2e,d2e="\\ufe0e\\ufe0f",h2e="\\u200d",f2e=RegExp("["+h2e+a2e+u2e+d2e+"]");function m2e(t){return f2e.test(t)}var rJ=m2e;function p2e(t){return t.split("")}var g2e=p2e,sJ="\\ud800-\\udfff",y2e="\\u0300-\\u036f",v2e="\\ufe20-\\ufe2f",x2e="\\u20d0-\\u20ff",b2e=y2e+v2e+x2e,w2e="\\ufe0e\\ufe0f",_2e="["+sJ+"]",PP="["+b2e+"]",IP="\\ud83c[\\udffb-\\udfff]",j2e="(?:"+PP+"|"+IP+")",iJ="[^"+sJ+"]",aJ="(?:\\ud83c[\\udde6-\\uddff]){2}",oJ="[\\ud800-\\udbff][\\udc00-\\udfff]",N2e="\\u200d",lJ=j2e+"?",cJ="["+w2e+"]?",S2e="(?:"+N2e+"(?:"+[iJ,aJ,oJ].join("|")+")"+cJ+lJ+")*",E2e=cJ+lJ+S2e,A2e="(?:"+[iJ+PP+"?",PP,aJ,oJ,_2e].join("|")+")",T2e=RegExp(IP+"(?="+IP+")|"+A2e+E2e,"g");function C2e(t){return t.match(T2e)||[]}var P2e=C2e,I2e=g2e,k2e=rJ,R2e=P2e;function O2e(t){return k2e(t)?R2e(t):I2e(t)}var M2e=O2e,D2e=i2e,L2e=rJ,$2e=M2e,F2e=XZ;function V2e(t){return function(e){e=F2e(e);var n=L2e(e)?$2e(e):void 0,r=n?n[0]:e.charAt(0),s=n?D2e(n,1).join(""):e.slice(1);return r[t]()+s}}var B2e=V2e,U2e=B2e,z2e=U2e("toUpperCase"),q2e=z2e;const kS=vn(q2e);function Rn(t){return function(){return t}}const uJ=Math.cos,K_=Math.sin,oo=Math.sqrt,G_=Math.PI,RS=2*G_,kP=Math.PI,RP=2*kP,Nd=1e-6,W2e=RP-Nd;function dJ(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function H2e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return dJ;const n=10**e;return function(r){this._+=r[0];for(let s=1,a=r.length;s<a;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}class K2e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?dJ:H2e(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,s){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+s}`}bezierCurveTo(e,n,r,s,a,o){this._append`C${+e},${+n},${+r},${+s},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,r,s,a){if(e=+e,n=+n,r=+r,s=+s,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,c=r-e,u=s-n,d=o-e,h=l-n,f=d*d+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>Nd)if(!(Math.abs(h*c-u*d)>Nd)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let m=r-o,v=s-l,g=c*c+u*u,y=m*m+v*v,b=Math.sqrt(g),x=Math.sqrt(f),S=a*Math.tan((kP-Math.acos((g+f-y)/(2*b*x)))/2),T=S/x,_=S/b;Math.abs(T-1)>Nd&&this._append`L${e+T*d},${n+T*h}`,this._append`A${a},${a},0,0,${+(h*m>d*v)},${this._x1=e+_*c},${this._y1=n+_*u}`}}arc(e,n,r,s,a,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(s),c=r*Math.sin(s),u=e+l,d=n+c,h=1^o,f=o?s-a:a-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Nd||Math.abs(this._y1-d)>Nd)&&this._append`L${u},${d}`,r&&(f<0&&(f=f%RP+RP),f>W2e?this._append`A${r},${r},0,1,${h},${e-l},${n-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=d}`:f>Nd&&this._append`A${r},${r},0,${+(f>=kP)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+s}h${-r}Z`}toString(){return this._}}function J2(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new K2e(e)}function eM(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function hJ(t){this._context=t}hJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function OS(t){return new hJ(t)}function fJ(t){return t[0]}function mJ(t){return t[1]}function pJ(t,e){var n=Rn(!0),r=null,s=OS,a=null,o=J2(l);t=typeof t=="function"?t:t===void 0?fJ:Rn(t),e=typeof e=="function"?e:e===void 0?mJ:Rn(e);function l(c){var u,d=(c=eM(c)).length,h,f=!1,m;for(r==null&&(a=s(m=o())),u=0;u<=d;++u)!(u<d&&n(h=c[u],u,c))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(h,u,c),+e(h,u,c));if(m)return a=null,m+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Rn(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Rn(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Rn(!!c),l):n},l.curve=function(c){return arguments.length?(s=c,r!=null&&(a=s(r)),l):s},l.context=function(c){return arguments.length?(c==null?r=a=null:a=s(r=c),l):r},l}function w0(t,e,n){var r=null,s=Rn(!0),a=null,o=OS,l=null,c=J2(u);t=typeof t=="function"?t:t===void 0?fJ:Rn(+t),e=typeof e=="function"?e:Rn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?mJ:Rn(+n);function u(h){var f,m,v,g=(h=eM(h)).length,y,b=!1,x,S=new Array(g),T=new Array(g);for(a==null&&(l=o(x=c())),f=0;f<=g;++f){if(!(f<g&&s(y=h[f],f,h))===b)if(b=!b)m=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=f-1;v>=m;--v)l.point(S[v],T[v]);l.lineEnd(),l.areaEnd()}b&&(S[f]=+t(y,f,h),T[f]=+e(y,f,h),l.point(r?+r(y,f,h):S[f],n?+n(y,f,h):T[f]))}if(x)return l=null,x+""||null}function d(){return pJ().defined(s).curve(o).context(a)}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:Rn(+h),r=null,u):t},u.x0=function(h){return arguments.length?(t=typeof h=="function"?h:Rn(+h),u):t},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Rn(+h),u):r},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:Rn(+h),n=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:Rn(+h),u):e},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Rn(+h),u):n},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(n)},u.lineX1=function(){return d().x(r).y(e)},u.defined=function(h){return arguments.length?(s=typeof h=="function"?h:Rn(!!h),u):s},u.curve=function(h){return arguments.length?(o=h,a!=null&&(l=o(a)),u):o},u.context=function(h){return arguments.length?(h==null?a=l=null:l=o(a=h),u):a},u}class gJ{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function G2e(t){return new gJ(t,!0)}function Y2e(t){return new gJ(t,!1)}const tM={draw(t,e){const n=oo(e/G_);t.moveTo(n,0),t.arc(0,0,n,0,RS)}},Q2e={draw(t,e){const n=oo(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},yJ=oo(1/3),X2e=yJ*2,Z2e={draw(t,e){const n=oo(e/X2e),r=n*yJ;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},J2e={draw(t,e){const n=oo(e),r=-n/2;t.rect(r,r,n,n)}},eMe=.8908130915292852,vJ=K_(G_/10)/K_(7*G_/10),tMe=K_(RS/10)*vJ,nMe=-uJ(RS/10)*vJ,rMe={draw(t,e){const n=oo(e*eMe),r=tMe*n,s=nMe*n;t.moveTo(0,-n),t.lineTo(r,s);for(let a=1;a<5;++a){const o=RS*a/5,l=uJ(o),c=K_(o);t.lineTo(c*n,-l*n),t.lineTo(l*r-c*s,c*r+l*s)}t.closePath()}},oA=oo(3),sMe={draw(t,e){const n=-oo(e/(oA*3));t.moveTo(0,n*2),t.lineTo(-oA*n,-n),t.lineTo(oA*n,-n),t.closePath()}},Wi=-.5,Hi=oo(3)/2,OP=1/oo(12),iMe=(OP/2+1)*3,aMe={draw(t,e){const n=oo(e/iMe),r=n/2,s=n*OP,a=r,o=n*OP+n,l=-a,c=o;t.moveTo(r,s),t.lineTo(a,o),t.lineTo(l,c),t.lineTo(Wi*r-Hi*s,Hi*r+Wi*s),t.lineTo(Wi*a-Hi*o,Hi*a+Wi*o),t.lineTo(Wi*l-Hi*c,Hi*l+Wi*c),t.lineTo(Wi*r+Hi*s,Wi*s-Hi*r),t.lineTo(Wi*a+Hi*o,Wi*o-Hi*a),t.lineTo(Wi*l+Hi*c,Wi*c-Hi*l),t.closePath()}};function oMe(t,e){let n=null,r=J2(s);t=typeof t=="function"?t:Rn(t||tM),e=typeof e=="function"?e:Rn(e===void 0?64:+e);function s(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return s.type=function(a){return arguments.length?(t=typeof a=="function"?a:Rn(a),s):t},s.size=function(a){return arguments.length?(e=typeof a=="function"?a:Rn(+a),s):e},s.context=function(a){return arguments.length?(n=a??null,s):n},s}function Y_(){}function Q_(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function xJ(t){this._context=t}xJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Q_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Q_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function lMe(t){return new xJ(t)}function bJ(t){this._context=t}bJ.prototype={areaStart:Y_,areaEnd:Y_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Q_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function cMe(t){return new bJ(t)}function wJ(t){this._context=t}wJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Q_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function uMe(t){return new wJ(t)}function _J(t){this._context=t}_J.prototype={areaStart:Y_,areaEnd:Y_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function dMe(t){return new _J(t)}function JB(t){return t<0?-1:1}function e3(t,e,n){var r=t._x1-t._x0,s=e-t._x1,a=(t._y1-t._y0)/(r||s<0&&-0),o=(n-t._y1)/(s||r<0&&-0),l=(a*s+o*r)/(r+s);return(JB(a)+JB(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function t3(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function lA(t,e,n){var r=t._x0,s=t._y0,a=t._x1,o=t._y1,l=(a-r)/3;t._context.bezierCurveTo(r+l,s+l*e,a-l,o-l*n,a,o)}function X_(t){this._context=t}X_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:lA(this,this._t0,t3(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,lA(this,t3(this,n=e3(this,t,e)),n);break;default:lA(this,this._t0,n=e3(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function jJ(t){this._context=new NJ(t)}(jJ.prototype=Object.create(X_.prototype)).point=function(t,e){X_.prototype.point.call(this,e,t)};function NJ(t){this._context=t}NJ.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,s,a){this._context.bezierCurveTo(e,t,r,n,a,s)}};function hMe(t){return new X_(t)}function fMe(t){return new jJ(t)}function SJ(t){this._context=t}SJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=n3(t),s=n3(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],s[0][a],r[1][a],s[1][a],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function n3(t){var e,n=t.length-1,r,s=new Array(n),a=new Array(n),o=new Array(n);for(s[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)s[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(s[n-1]=2,a[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=s[e]/a[e-1],a[e]-=r,o[e]-=r*o[e-1];for(s[n-1]=o[n-1]/a[n-1],e=n-2;e>=0;--e)s[e]=(o[e]-s[e+1])/a[e];for(a[n-1]=(t[n]+s[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-s[e+1];return[s,a]}function mMe(t){return new SJ(t)}function MS(t,e){this._context=t,this._t=e}MS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function pMe(t){return new MS(t,.5)}function gMe(t){return new MS(t,0)}function yMe(t){return new MS(t,1)}function rp(t,e){if((o=t.length)>1)for(var n=1,r,s,a=t[e[0]],o,l=a.length;n<o;++n)for(s=a,a=t[e[n]],r=0;r<l;++r)a[r][1]+=a[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function MP(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function vMe(t,e){return t[e]}function xMe(t){const e=[];return e.key=t,e}function bMe(){var t=Rn([]),e=MP,n=rp,r=vMe;function s(a){var o=Array.from(t.apply(this,arguments),xMe),l,c=o.length,u=-1,d;for(const h of a)for(l=0,++u;l<c;++l)(o[l][u]=[0,+r(h,o[l].key,u,a)]).data=h;for(l=0,d=eM(e(o));l<c;++l)o[d[l]].index=l;return n(o,d),o}return s.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Rn(Array.from(a)),s):t},s.value=function(a){return arguments.length?(r=typeof a=="function"?a:Rn(+a),s):r},s.order=function(a){return arguments.length?(e=a==null?MP:typeof a=="function"?a:Rn(Array.from(a)),s):e},s.offset=function(a){return arguments.length?(n=a??rp,s):n},s}function wMe(t,e){if((r=t.length)>0){for(var n,r,s=0,a=t[0].length,o;s<a;++s){for(o=n=0;n<r;++n)o+=t[n][s][1]||0;if(o)for(n=0;n<r;++n)t[n][s][1]/=o}rp(t,e)}}function _Me(t,e){if((s=t.length)>0){for(var n=0,r=t[e[0]],s,a=r.length;n<a;++n){for(var o=0,l=0;o<s;++o)l+=t[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}rp(t,e)}}function jMe(t,e){if(!(!((o=t.length)>0)||!((a=(s=t[e[0]]).length)>0))){for(var n=0,r=1,s,a,o;r<a;++r){for(var l=0,c=0,u=0;l<o;++l){for(var d=t[e[l]],h=d[r][1]||0,f=d[r-1][1]||0,m=(h-f)/2,v=0;v<l;++v){var g=t[e[v]],y=g[r][1]||0,b=g[r-1][1]||0;m+=y-b}c+=h,u+=m*h}s[r-1][1]+=s[r-1][0]=n,c&&(n-=u/c)}s[r-1][1]+=s[r-1][0]=n,rp(t,e)}}function Uv(t){"@babel/helpers - typeof";return Uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uv(t)}var NMe=["type","size","sizeType"];function DP(){return DP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DP.apply(this,arguments)}function r3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function s3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r3(Object(n),!0).forEach(function(r){SMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SMe(t,e,n){return e=EMe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EMe(t){var e=AMe(t,"string");return Uv(e)=="symbol"?e:e+""}function AMe(t,e){if(Uv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Uv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TMe(t,e){if(t==null)return{};var n=CMe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function CMe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var EJ={symbolCircle:tM,symbolCross:Q2e,symbolDiamond:Z2e,symbolSquare:J2e,symbolStar:rMe,symbolTriangle:sMe,symbolWye:aMe},PMe=Math.PI/180,IMe=function(e){var n="symbol".concat(kS(e));return EJ[n]||tM},kMe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*PMe;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},RMe=function(e,n){EJ["symbol".concat(kS(e))]=n},nM=function(e){var n=e.type,r=n===void 0?"circle":n,s=e.size,a=s===void 0?64:s,o=e.sizeType,l=o===void 0?"area":o,c=TMe(e,NMe),u=s3(s3({},c),{},{type:r,size:a,sizeType:l}),d=function(){var y=IMe(r),b=oMe().type(y).size(kMe(a,l,r));return b()},h=u.className,f=u.cx,m=u.cy,v=pt(u,!0);return f===+f&&m===+m&&a===+a?F.createElement("path",DP({},v,{className:$t("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(m,")"),d:d()})):null};nM.registerSymbol=RMe;function sp(t){"@babel/helpers - typeof";return sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sp(t)}function LP(){return LP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LP.apply(this,arguments)}function i3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function OMe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i3(Object(n),!0).forEach(function(r){zv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MMe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DMe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,TJ(r.key),r)}}function LMe(t,e,n){return e&&DMe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $Me(t,e,n){return e=Z_(e),FMe(t,AJ()?Reflect.construct(e,n||[],Z_(t).constructor):e.apply(t,n))}function FMe(t,e){if(e&&(sp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VMe(t)}function VMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AJ=function(){return!!t})()}function Z_(t){return Z_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Z_(t)}function BMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$P(t,e)}function $P(t,e){return $P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},$P(t,e)}function zv(t,e,n){return e=TJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TJ(t){var e=UMe(t,"string");return sp(e)=="symbol"?e:e+""}function UMe(t,e){if(sp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(sp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ki=32,rM=function(t){function e(){return MMe(this,e),$Me(this,e,arguments)}return BMe(e,t),LMe(e,[{key:"renderIcon",value:function(r){var s=this.props.inactiveColor,a=Ki/2,o=Ki/6,l=Ki/3,c=r.inactive?s:r.color;if(r.type==="plainline")return F.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:Ki,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return F.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(Ki,"M").concat(2*l,",").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return F.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Ki/8,"h").concat(Ki,"v").concat(Ki*3/4,"h").concat(-Ki,"z"),className:"recharts-legend-icon"});if(F.isValidElement(r.legendIcon)){var u=OMe({},r);return delete u.legendIcon,F.cloneElement(r.legendIcon,u)}return F.createElement(nM,{fill:c,cx:a,cy:a,size:Ki,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,s=this.props,a=s.payload,o=s.iconSize,l=s.layout,c=s.formatter,u=s.inactiveColor,d={x:0,y:0,width:Ki,height:Ki},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(m,v){var g=m.formatter||c,y=$t(zv(zv({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",m.inactive));if(m.type==="none")return null;var b=_t(m.value)?null:m.value;Ga(!_t(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var x=m.inactive?u:m.color;return F.createElement("li",LP({className:y,style:h,key:"legend-item-".concat(v)},Oh(r.props,m,v)),F.createElement(TP,{width:o,height:o,viewBox:d,style:f},r.renderIcon(m)),F.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},g?g(b,m,v):b))})}},{key:"render",value:function(){var r=this.props,s=r.payload,a=r.layout,o=r.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:a==="horizontal"?o:"left"};return F.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(N.PureComponent);zv(rM,"displayName","Legend");zv(rM,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var zMe=xS;function qMe(){this.__data__=new zMe,this.size=0}var WMe=qMe;function HMe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var KMe=HMe;function GMe(t){return this.__data__.get(t)}var YMe=GMe;function QMe(t){return this.__data__.has(t)}var XMe=QMe,ZMe=xS,JMe=q2,eDe=W2,tDe=200;function nDe(t,e){var n=this.__data__;if(n instanceof ZMe){var r=n.__data__;if(!JMe||r.length<tDe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new eDe(r)}return n.set(t,e),this.size=n.size,this}var rDe=nDe,sDe=xS,iDe=WMe,aDe=KMe,oDe=YMe,lDe=XMe,cDe=rDe;function og(t){var e=this.__data__=new sDe(t);this.size=e.size}og.prototype.clear=iDe;og.prototype.delete=aDe;og.prototype.get=oDe;og.prototype.has=lDe;og.prototype.set=cDe;var CJ=og,uDe="__lodash_hash_undefined__";function dDe(t){return this.__data__.set(t,uDe),this}var hDe=dDe;function fDe(t){return this.__data__.has(t)}var mDe=fDe,pDe=W2,gDe=hDe,yDe=mDe;function J_(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new pDe;++e<n;)this.add(t[e])}J_.prototype.add=J_.prototype.push=gDe;J_.prototype.has=yDe;var PJ=J_;function vDe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var IJ=vDe;function xDe(t,e){return t.has(e)}var kJ=xDe,bDe=PJ,wDe=IJ,_De=kJ,jDe=1,NDe=2;function SDe(t,e,n,r,s,a){var o=n&jDe,l=t.length,c=e.length;if(l!=c&&!(o&&c>l))return!1;var u=a.get(t),d=a.get(e);if(u&&d)return u==e&&d==t;var h=-1,f=!0,m=n&NDe?new bDe:void 0;for(a.set(t,e),a.set(e,t);++h<l;){var v=t[h],g=e[h];if(r)var y=o?r(g,v,h,e,t,a):r(v,g,h,t,e,a);if(y!==void 0){if(y)continue;f=!1;break}if(m){if(!wDe(e,function(b,x){if(!_De(m,x)&&(v===b||s(v,b,n,r,a)))return m.push(x)})){f=!1;break}}else if(!(v===g||s(v,g,n,r,a))){f=!1;break}}return a.delete(t),a.delete(e),f}var RJ=SDe,EDe=Xo,ADe=EDe.Uint8Array,TDe=ADe;function CDe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,s){n[++e]=[s,r]}),n}var PDe=CDe;function IDe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var sM=IDe,a3=vb,o3=TDe,kDe=z2,RDe=RJ,ODe=PDe,MDe=sM,DDe=1,LDe=2,$De="[object Boolean]",FDe="[object Date]",VDe="[object Error]",BDe="[object Map]",UDe="[object Number]",zDe="[object RegExp]",qDe="[object Set]",WDe="[object String]",HDe="[object Symbol]",KDe="[object ArrayBuffer]",GDe="[object DataView]",l3=a3?a3.prototype:void 0,cA=l3?l3.valueOf:void 0;function YDe(t,e,n,r,s,a,o){switch(n){case GDe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case KDe:return!(t.byteLength!=e.byteLength||!a(new o3(t),new o3(e)));case $De:case FDe:case UDe:return kDe(+t,+e);case VDe:return t.name==e.name&&t.message==e.message;case zDe:case WDe:return t==e+"";case BDe:var l=ODe;case qDe:var c=r&DDe;if(l||(l=MDe),t.size!=e.size&&!c)return!1;var u=o.get(t);if(u)return u==e;r|=LDe,o.set(t,e);var d=RDe(l(t),l(e),r,s,a,o);return o.delete(t),d;case HDe:if(cA)return cA.call(t)==cA.call(e)}return!1}var QDe=YDe;function XDe(t,e){for(var n=-1,r=e.length,s=t.length;++n<r;)t[s+n]=e[n];return t}var OJ=XDe,ZDe=OJ,JDe=bi;function eLe(t,e,n){var r=e(t);return JDe(t)?r:ZDe(r,n(t))}var tLe=eLe;function nLe(t,e){for(var n=-1,r=t==null?0:t.length,s=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[s++]=o)}return a}var rLe=nLe;function sLe(){return[]}var iLe=sLe,aLe=rLe,oLe=iLe,lLe=Object.prototype,cLe=lLe.propertyIsEnumerable,c3=Object.getOwnPropertySymbols,uLe=c3?function(t){return t==null?[]:(t=Object(t),aLe(c3(t),function(e){return cLe.call(t,e)}))}:oLe,dLe=uLe;function hLe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var fLe=hLe,mLe=Ql,pLe=Xl,gLe="[object Arguments]";function yLe(t){return pLe(t)&&mLe(t)==gLe}var vLe=yLe,u3=vLe,xLe=Xl,MJ=Object.prototype,bLe=MJ.hasOwnProperty,wLe=MJ.propertyIsEnumerable,_Le=u3(function(){return arguments}())?u3:function(t){return xLe(t)&&bLe.call(t,"callee")&&!wLe.call(t,"callee")},iM=_Le,ej={exports:{}};function jLe(){return!1}var NLe=jLe;ej.exports;(function(t,e){var n=Xo,r=NLe,s=e&&!e.nodeType&&e,a=s&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===s,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;t.exports=u})(ej,ej.exports);var DJ=ej.exports,SLe=9007199254740991,ELe=/^(?:0|[1-9]\d*)$/;function ALe(t,e){var n=typeof t;return e=e??SLe,!!e&&(n=="number"||n!="symbol"&&ELe.test(t))&&t>-1&&t%1==0&&t<e}var aM=ALe,TLe=9007199254740991;function CLe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=TLe}var oM=CLe,PLe=Ql,ILe=oM,kLe=Xl,RLe="[object Arguments]",OLe="[object Array]",MLe="[object Boolean]",DLe="[object Date]",LLe="[object Error]",$Le="[object Function]",FLe="[object Map]",VLe="[object Number]",BLe="[object Object]",ULe="[object RegExp]",zLe="[object Set]",qLe="[object String]",WLe="[object WeakMap]",HLe="[object ArrayBuffer]",KLe="[object DataView]",GLe="[object Float32Array]",YLe="[object Float64Array]",QLe="[object Int8Array]",XLe="[object Int16Array]",ZLe="[object Int32Array]",JLe="[object Uint8Array]",e4e="[object Uint8ClampedArray]",t4e="[object Uint16Array]",n4e="[object Uint32Array]",Un={};Un[GLe]=Un[YLe]=Un[QLe]=Un[XLe]=Un[ZLe]=Un[JLe]=Un[e4e]=Un[t4e]=Un[n4e]=!0;Un[RLe]=Un[OLe]=Un[HLe]=Un[MLe]=Un[KLe]=Un[DLe]=Un[LLe]=Un[$Le]=Un[FLe]=Un[VLe]=Un[BLe]=Un[ULe]=Un[zLe]=Un[qLe]=Un[WLe]=!1;function r4e(t){return kLe(t)&&ILe(t.length)&&!!Un[PLe(t)]}var s4e=r4e;function i4e(t){return function(e){return t(e)}}var LJ=i4e,tj={exports:{}};tj.exports;(function(t,e){var n=WZ,r=e&&!e.nodeType&&e,s=r&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===r,o=a&&n.process,l=function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l})(tj,tj.exports);var a4e=tj.exports,o4e=s4e,l4e=LJ,d3=a4e,h3=d3&&d3.isTypedArray,c4e=h3?l4e(h3):o4e,$J=c4e,u4e=fLe,d4e=iM,h4e=bi,f4e=DJ,m4e=aM,p4e=$J,g4e=Object.prototype,y4e=g4e.hasOwnProperty;function v4e(t,e){var n=h4e(t),r=!n&&d4e(t),s=!n&&!r&&f4e(t),a=!n&&!r&&!s&&p4e(t),o=n||r||s||a,l=o?u4e(t.length,String):[],c=l.length;for(var u in t)(e||y4e.call(t,u))&&!(o&&(u=="length"||s&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||m4e(u,c)))&&l.push(u);return l}var x4e=v4e,b4e=Object.prototype;function w4e(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||b4e;return t===n}var _4e=w4e;function j4e(t,e){return function(n){return t(e(n))}}var FJ=j4e,N4e=FJ,S4e=N4e(Object.keys,Object),E4e=S4e,A4e=_4e,T4e=E4e,C4e=Object.prototype,P4e=C4e.hasOwnProperty;function I4e(t){if(!A4e(t))return T4e(t);var e=[];for(var n in Object(t))P4e.call(t,n)&&n!="constructor"&&e.push(n);return e}var k4e=I4e,R4e=U2,O4e=oM;function M4e(t){return t!=null&&O4e(t.length)&&!R4e(t)}var xb=M4e,D4e=x4e,L4e=k4e,$4e=xb;function F4e(t){return $4e(t)?D4e(t):L4e(t)}var DS=F4e,V4e=tLe,B4e=dLe,U4e=DS;function z4e(t){return V4e(t,U4e,B4e)}var q4e=z4e,f3=q4e,W4e=1,H4e=Object.prototype,K4e=H4e.hasOwnProperty;function G4e(t,e,n,r,s,a){var o=n&W4e,l=f3(t),c=l.length,u=f3(e),d=u.length;if(c!=d&&!o)return!1;for(var h=c;h--;){var f=l[h];if(!(o?f in e:K4e.call(e,f)))return!1}var m=a.get(t),v=a.get(e);if(m&&v)return m==e&&v==t;var g=!0;a.set(t,e),a.set(e,t);for(var y=o;++h<c;){f=l[h];var b=t[f],x=e[f];if(r)var S=o?r(x,b,f,e,t,a):r(b,x,f,t,e,a);if(!(S===void 0?b===x||s(b,x,n,r,a):S)){g=!1;break}y||(y=f=="constructor")}if(g&&!y){var T=t.constructor,_=e.constructor;T!=_&&"constructor"in t&&"constructor"in e&&!(typeof T=="function"&&T instanceof T&&typeof _=="function"&&_ instanceof _)&&(g=!1)}return a.delete(t),a.delete(e),g}var Y4e=G4e,Q4e=Xh,X4e=Xo,Z4e=Q4e(X4e,"DataView"),J4e=Z4e,e$e=Xh,t$e=Xo,n$e=e$e(t$e,"Promise"),r$e=n$e,s$e=Xh,i$e=Xo,a$e=s$e(i$e,"Set"),VJ=a$e,o$e=Xh,l$e=Xo,c$e=o$e(l$e,"WeakMap"),u$e=c$e,FP=J4e,VP=q2,BP=r$e,UP=VJ,zP=u$e,BJ=Ql,lg=KZ,m3="[object Map]",d$e="[object Object]",p3="[object Promise]",g3="[object Set]",y3="[object WeakMap]",v3="[object DataView]",h$e=lg(FP),f$e=lg(VP),m$e=lg(BP),p$e=lg(UP),g$e=lg(zP),Sd=BJ;(FP&&Sd(new FP(new ArrayBuffer(1)))!=v3||VP&&Sd(new VP)!=m3||BP&&Sd(BP.resolve())!=p3||UP&&Sd(new UP)!=g3||zP&&Sd(new zP)!=y3)&&(Sd=function(t){var e=BJ(t),n=e==d$e?t.constructor:void 0,r=n?lg(n):"";if(r)switch(r){case h$e:return v3;case f$e:return m3;case m$e:return p3;case p$e:return g3;case g$e:return y3}return e});var y$e=Sd,uA=CJ,v$e=RJ,x$e=QDe,b$e=Y4e,x3=y$e,b3=bi,w3=DJ,w$e=$J,_$e=1,_3="[object Arguments]",j3="[object Array]",_0="[object Object]",j$e=Object.prototype,N3=j$e.hasOwnProperty;function N$e(t,e,n,r,s,a){var o=b3(t),l=b3(e),c=o?j3:x3(t),u=l?j3:x3(e);c=c==_3?_0:c,u=u==_3?_0:u;var d=c==_0,h=u==_0,f=c==u;if(f&&w3(t)){if(!w3(e))return!1;o=!0,d=!1}if(f&&!d)return a||(a=new uA),o||w$e(t)?v$e(t,e,n,r,s,a):x$e(t,e,c,n,r,s,a);if(!(n&_$e)){var m=d&&N3.call(t,"__wrapped__"),v=h&&N3.call(e,"__wrapped__");if(m||v){var g=m?t.value():t,y=v?e.value():e;return a||(a=new uA),s(g,y,n,r,a)}}return f?(a||(a=new uA),b$e(t,e,n,r,s,a)):!1}var S$e=N$e,E$e=S$e,S3=Xl;function UJ(t,e,n,r,s){return t===e?!0:t==null||e==null||!S3(t)&&!S3(e)?t!==t&&e!==e:E$e(t,e,n,r,UJ,s)}var lM=UJ,A$e=CJ,T$e=lM,C$e=1,P$e=2;function I$e(t,e,n,r){var s=n.length,a=s,o=!r;if(t==null)return!a;for(t=Object(t);s--;){var l=n[s];if(o&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++s<a;){l=n[s];var c=l[0],u=t[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in t))return!1}else{var h=new A$e;if(r)var f=r(u,d,c,t,e,h);if(!(f===void 0?T$e(d,u,C$e|P$e,r,h):f))return!1}}return!0}var k$e=I$e,R$e=nd;function O$e(t){return t===t&&!R$e(t)}var zJ=O$e,M$e=zJ,D$e=DS;function L$e(t){for(var e=D$e(t),n=e.length;n--;){var r=e[n],s=t[r];e[n]=[r,s,M$e(s)]}return e}var $$e=L$e;function F$e(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var qJ=F$e,V$e=k$e,B$e=$$e,U$e=qJ;function z$e(t){var e=B$e(t);return e.length==1&&e[0][2]?U$e(e[0][0],e[0][1]):function(n){return n===t||V$e(n,t,e)}}var q$e=z$e;function W$e(t,e){return t!=null&&e in Object(t)}var H$e=W$e,K$e=ZZ,G$e=iM,Y$e=bi,Q$e=aM,X$e=oM,Z$e=wS;function J$e(t,e,n){e=K$e(e,t);for(var r=-1,s=e.length,a=!1;++r<s;){var o=Z$e(e[r]);if(!(a=t!=null&&n(t,o)))break;t=t[o]}return a||++r!=s?a:(s=t==null?0:t.length,!!s&&X$e(s)&&Q$e(o,s)&&(Y$e(t)||G$e(t)))}var eFe=J$e,tFe=H$e,nFe=eFe;function rFe(t,e){return t!=null&&nFe(t,e,tFe)}var sFe=rFe,iFe=lM,aFe=JZ,oFe=sFe,lFe=B2,cFe=zJ,uFe=qJ,dFe=wS,hFe=1,fFe=2;function mFe(t,e){return lFe(t)&&cFe(e)?uFe(dFe(t),e):function(n){var r=aFe(n,t);return r===void 0&&r===e?oFe(n,t):iFe(e,r,hFe|fFe)}}var pFe=mFe;function gFe(t){return t}var cg=gFe;function yFe(t){return function(e){return e==null?void 0:e[t]}}var vFe=yFe,xFe=G2;function bFe(t){return function(e){return xFe(e,t)}}var wFe=bFe,_Fe=vFe,jFe=wFe,NFe=B2,SFe=wS;function EFe(t){return NFe(t)?_Fe(SFe(t)):jFe(t)}var AFe=EFe,TFe=q$e,CFe=pFe,PFe=cg,IFe=bi,kFe=AFe;function RFe(t){return typeof t=="function"?t:t==null?PFe:typeof t=="object"?IFe(t)?CFe(t[0],t[1]):TFe(t):kFe(t)}var Zo=RFe;function OFe(t,e,n,r){for(var s=t.length,a=n+(r?1:-1);r?a--:++a<s;)if(e(t[a],a,t))return a;return-1}var WJ=OFe;function MFe(t){return t!==t}var DFe=MFe;function LFe(t,e,n){for(var r=n-1,s=t.length;++r<s;)if(t[r]===e)return r;return-1}var $Fe=LFe,FFe=WJ,VFe=DFe,BFe=$Fe;function UFe(t,e,n){return e===e?BFe(t,e,n):FFe(t,VFe,n)}var zFe=UFe,qFe=zFe;function WFe(t,e){var n=t==null?0:t.length;return!!n&&qFe(t,e,0)>-1}var HFe=WFe;function KFe(t,e,n){for(var r=-1,s=t==null?0:t.length;++r<s;)if(n(e,t[r]))return!0;return!1}var GFe=KFe;function YFe(){}var QFe=YFe,dA=VJ,XFe=QFe,ZFe=sM,JFe=1/0,eVe=dA&&1/ZFe(new dA([,-0]))[1]==JFe?function(t){return new dA(t)}:XFe,tVe=eVe,nVe=PJ,rVe=HFe,sVe=GFe,iVe=kJ,aVe=tVe,oVe=sM,lVe=200;function cVe(t,e,n){var r=-1,s=rVe,a=t.length,o=!0,l=[],c=l;if(n)o=!1,s=sVe;else if(a>=lVe){var u=e?null:aVe(t);if(u)return oVe(u);o=!1,s=iVe,c=new nVe}else c=e?[]:l;e:for(;++r<a;){var d=t[r],h=e?e(d):d;if(d=n||d!==0?d:0,o&&h===h){for(var f=c.length;f--;)if(c[f]===h)continue e;e&&c.push(h),l.push(d)}else s(c,h,n)||(c!==l&&c.push(h),l.push(d))}return l}var uVe=cVe,dVe=Zo,hVe=uVe;function fVe(t,e){return t&&t.length?hVe(t,dVe(e)):[]}var mVe=fVe;const E3=vn(mVe);function HJ(t,e,n){return e===!0?E3(t,n):_t(e)?E3(t,e):t}function ip(t){"@babel/helpers - typeof";return ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ip(t)}var pVe=["ref"];function A3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function nl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A3(Object(n),!0).forEach(function(r){LS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gVe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,GJ(r.key),r)}}function yVe(t,e,n){return e&&T3(t.prototype,e),n&&T3(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function vVe(t,e,n){return e=nj(e),xVe(t,KJ()?Reflect.construct(e,n||[],nj(t).constructor):e.apply(t,n))}function xVe(t,e){if(e&&(ip(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bVe(t)}function bVe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KJ=function(){return!!t})()}function nj(t){return nj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},nj(t)}function wVe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qP(t,e)}function qP(t,e){return qP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},qP(t,e)}function LS(t,e,n){return e=GJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GJ(t){var e=_Ve(t,"string");return ip(e)=="symbol"?e:e+""}function _Ve(t,e){if(ip(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ip(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jVe(t,e){if(t==null)return{};var n=NVe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function NVe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function SVe(t){return t.value}function EVe(t,e){if(F.isValidElement(t))return F.cloneElement(t,e);if(typeof t=="function")return F.createElement(t,e);e.ref;var n=jVe(e,pVe);return F.createElement(rM,n)}var C3=1,mm=function(t){function e(){var n;gVe(this,e);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=vVe(this,e,[].concat(s)),LS(n,"lastBoundingBox",{width:-1,height:-1}),n}return wVe(e,t),yVe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>C3||Math.abs(s.height-this.lastBoundingBox.height)>C3)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,r&&r(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?nl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var s=this.props,a=s.layout,o=s.align,l=s.verticalAlign,c=s.margin,u=s.chartWidth,d=s.chartHeight,h,f;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&a==="vertical"){var m=this.getBBoxSnapshot();h={left:((u||0)-m.width)/2}}else h=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var v=this.getBBoxSnapshot();f={top:((d||0)-v.height)/2}}else f=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return nl(nl({},h),f)}},{key:"render",value:function(){var r=this,s=this.props,a=s.content,o=s.width,l=s.height,c=s.wrapperStyle,u=s.payloadUniqBy,d=s.payload,h=nl(nl({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return F.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(m){r.wrapperNode=m}},EVe(a,nl(nl({},this.props),{},{payload:HJ(d,u,SVe)})))}}],[{key:"getWithHeight",value:function(r,s){var a=nl(nl({},this.defaultProps),r.props),o=a.layout;return o==="vertical"&&Ee(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||s}:null}}])}(N.PureComponent);LS(mm,"displayName","Legend");LS(mm,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var P3=vb,AVe=iM,TVe=bi,I3=P3?P3.isConcatSpreadable:void 0;function CVe(t){return TVe(t)||AVe(t)||!!(I3&&t&&t[I3])}var PVe=CVe,IVe=OJ,kVe=PVe;function YJ(t,e,n,r,s){var a=-1,o=t.length;for(n||(n=kVe),s||(s=[]);++a<o;){var l=t[a];e>0&&n(l)?e>1?YJ(l,e-1,n,r,s):IVe(s,l):r||(s[s.length]=l)}return s}var QJ=YJ;function RVe(t){return function(e,n,r){for(var s=-1,a=Object(e),o=r(e),l=o.length;l--;){var c=o[t?l:++s];if(n(a[c],c,a)===!1)break}return e}}var OVe=RVe,MVe=OVe,DVe=MVe(),LVe=DVe,$Ve=LVe,FVe=DS;function VVe(t,e){return t&&$Ve(t,e,FVe)}var XJ=VVe,BVe=xb;function UVe(t,e){return function(n,r){if(n==null)return n;if(!BVe(n))return t(n,r);for(var s=n.length,a=e?s:-1,o=Object(n);(e?a--:++a<s)&&r(o[a],a,o)!==!1;);return n}}var zVe=UVe,qVe=XJ,WVe=zVe,HVe=WVe(qVe),cM=HVe,KVe=cM,GVe=xb;function YVe(t,e){var n=-1,r=GVe(t)?Array(t.length):[];return KVe(t,function(s,a,o){r[++n]=e(s,a,o)}),r}var ZJ=YVe;function QVe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var XVe=QVe,k3=eg;function ZVe(t,e){if(t!==e){var n=t!==void 0,r=t===null,s=t===t,a=k3(t),o=e!==void 0,l=e===null,c=e===e,u=k3(e);if(!l&&!u&&!a&&t>e||a&&o&&c&&!l&&!u||r&&o&&c||!n&&c||!s)return 1;if(!r&&!a&&!u&&t<e||u&&n&&s&&!r&&!a||l&&n&&s||!o&&s||!c)return-1}return 0}var JVe=ZVe,eBe=JVe;function tBe(t,e,n){for(var r=-1,s=t.criteria,a=e.criteria,o=s.length,l=n.length;++r<o;){var c=eBe(s[r],a[r]);if(c){if(r>=l)return c;var u=n[r];return c*(u=="desc"?-1:1)}}return t.index-e.index}var nBe=tBe,hA=K2,rBe=G2,sBe=Zo,iBe=ZJ,aBe=XVe,oBe=LJ,lBe=nBe,cBe=cg,uBe=bi;function dBe(t,e,n){e.length?e=hA(e,function(a){return uBe(a)?function(o){return rBe(o,a.length===1?a[0]:a)}:a}):e=[cBe];var r=-1;e=hA(e,oBe(sBe));var s=iBe(t,function(a,o,l){var c=hA(e,function(u){return u(a)});return{criteria:c,index:++r,value:a}});return aBe(s,function(a,o){return lBe(a,o,n)})}var hBe=dBe;function fBe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var mBe=fBe,pBe=mBe,R3=Math.max;function gBe(t,e,n){return e=R3(e===void 0?t.length-1:e,0),function(){for(var r=arguments,s=-1,a=R3(r.length-e,0),o=Array(a);++s<a;)o[s]=r[e+s];s=-1;for(var l=Array(e+1);++s<e;)l[s]=r[s];return l[e]=n(o),pBe(t,this,l)}}var yBe=gBe;function vBe(t){return function(){return t}}var xBe=vBe,bBe=Xh,wBe=function(){try{var t=bBe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),JJ=wBe,_Be=xBe,O3=JJ,jBe=cg,NBe=O3?function(t,e){return O3(t,"toString",{configurable:!0,enumerable:!1,value:_Be(e),writable:!0})}:jBe,SBe=NBe,EBe=800,ABe=16,TBe=Date.now;function CBe(t){var e=0,n=0;return function(){var r=TBe(),s=ABe-(r-n);if(n=r,s>0){if(++e>=EBe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var PBe=CBe,IBe=SBe,kBe=PBe,RBe=kBe(IBe),OBe=RBe,MBe=cg,DBe=yBe,LBe=OBe;function $Be(t,e){return LBe(DBe(t,e,MBe),t+"")}var FBe=$Be,VBe=z2,BBe=xb,UBe=aM,zBe=nd;function qBe(t,e,n){if(!zBe(n))return!1;var r=typeof e;return(r=="number"?BBe(n)&&UBe(e,n.length):r=="string"&&e in n)?VBe(n[e],t):!1}var $S=qBe,WBe=QJ,HBe=hBe,KBe=FBe,M3=$S,GBe=KBe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&M3(t,e[0],e[1])?e=[]:n>2&&M3(e[0],e[1],e[2])&&(e=[e[0]]),HBe(t,WBe(e,1),[])}),YBe=GBe;const uM=vn(YBe);function qv(t){"@babel/helpers - typeof";return qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qv(t)}function WP(){return WP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WP.apply(this,arguments)}function QBe(t,e){return e3e(t)||JBe(t,e)||ZBe(t,e)||XBe()}function XBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZBe(t,e){if(t){if(typeof t=="string")return D3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D3(t,e)}}function D3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function JBe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function e3e(t){if(Array.isArray(t))return t}function L3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function fA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L3(Object(n),!0).forEach(function(r){t3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function t3e(t,e,n){return e=n3e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n3e(t){var e=r3e(t,"string");return qv(e)=="symbol"?e:e+""}function r3e(t,e){if(qv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function s3e(t){return Array.isArray(t)&&zr(t[0])&&zr(t[1])?t.join(" ~ "):t}var i3e=function(e){var n=e.separator,r=n===void 0?" : ":n,s=e.contentStyle,a=s===void 0?{}:s,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,u=c===void 0?{}:c,d=e.payload,h=e.formatter,f=e.itemSorter,m=e.wrapperClassName,v=e.labelClassName,g=e.label,y=e.labelFormatter,b=e.accessibilityLayer,x=b===void 0?!1:b,S=function(){if(d&&d.length){var I={padding:0,margin:0},k=(f?uM(d,f):d).map(function(L,U){if(L.type==="none")return null;var z=fA({display:"block",paddingTop:4,paddingBottom:4,color:L.color||"#000"},l),O=L.formatter||h||s3e,$=L.value,D=L.name,K=$,ie=D;if(O&&K!=null&&ie!=null){var ae=O($,D,L,U,d);if(Array.isArray(ae)){var _e=QBe(ae,2);K=_e[0],ie=_e[1]}else K=ae}return F.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(U),style:z},zr(ie)?F.createElement("span",{className:"recharts-tooltip-item-name"},ie):null,zr(ie)?F.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,F.createElement("span",{className:"recharts-tooltip-item-value"},K),F.createElement("span",{className:"recharts-tooltip-item-unit"},L.unit||""))});return F.createElement("ul",{className:"recharts-tooltip-item-list",style:I},k)}return null},T=fA({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),_=fA({margin:0},u),C=!Ft(g),E=C?g:"",p=$t("recharts-default-tooltip",m),w=$t("recharts-tooltip-label",v);C&&y&&d!==void 0&&d!==null&&(E=y(g,d));var A=x?{role:"status","aria-live":"assertive"}:{};return F.createElement("div",WP({className:p,style:T},A),F.createElement("p",{className:w,style:_},F.isValidElement(E)?E:"".concat(E)),S())};function Wv(t){"@babel/helpers - typeof";return Wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wv(t)}function j0(t,e,n){return e=a3e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a3e(t){var e=o3e(t,"string");return Wv(e)=="symbol"?e:e+""}function o3e(t,e){if(Wv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Wv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zg="recharts-tooltip-wrapper",l3e={visibility:"hidden"};function c3e(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return $t(zg,j0(j0(j0(j0({},"".concat(zg,"-right"),Ee(n)&&e&&Ee(e.x)&&n>=e.x),"".concat(zg,"-left"),Ee(n)&&e&&Ee(e.x)&&n<e.x),"".concat(zg,"-bottom"),Ee(r)&&e&&Ee(e.y)&&r>=e.y),"".concat(zg,"-top"),Ee(r)&&e&&Ee(e.y)&&r<e.y))}function $3(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,s=t.offsetTopLeft,a=t.position,o=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,u=t.viewBoxDimension;if(a&&Ee(a[r]))return a[r];var d=n[r]-l-s,h=n[r]+s;if(e[r])return o[r]?d:h;if(o[r]){var f=d,m=c[r];return f<m?Math.max(h,c[r]):Math.max(d,c[r])}var v=h+l,g=c[r]+u;return v>g?Math.max(d,c[r]):Math.max(h,c[r])}function u3e(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function d3e(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,s=t.position,a=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,u,d,h;return o.height>0&&o.width>0&&n?(d=$3({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:s,reverseDirection:a,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=$3({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:s,reverseDirection:a,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=u3e({translateX:d,translateY:h,useTranslate3d:l})):u=l3e,{cssProperties:u,cssClasses:c3e({translateX:d,translateY:h,coordinate:n})}}function ap(t){"@babel/helpers - typeof";return ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ap(t)}function F3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function V3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F3(Object(n),!0).forEach(function(r){KP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function h3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f3e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tee(r.key),r)}}function m3e(t,e,n){return e&&f3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function p3e(t,e,n){return e=rj(e),g3e(t,eee()?Reflect.construct(e,n||[],rj(t).constructor):e.apply(t,n))}function g3e(t,e){if(e&&(ap(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y3e(t)}function y3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eee=function(){return!!t})()}function rj(t){return rj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},rj(t)}function v3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HP(t,e)}function HP(t,e){return HP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},HP(t,e)}function KP(t,e,n){return e=tee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tee(t){var e=x3e(t,"string");return ap(e)=="symbol"?e:e+""}function x3e(t,e){if(ap(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ap(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var B3=1,b3e=function(t){function e(){var n;h3e(this,e);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=p3e(this,e,[].concat(s)),KP(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),KP(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return v3e(e,t),m3e(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>B3||Math.abs(r.height-this.state.lastBoundingBox.height)>B3)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,s=this.props,a=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.children,d=s.coordinate,h=s.hasPayload,f=s.isAnimationActive,m=s.offset,v=s.position,g=s.reverseDirection,y=s.useTranslate3d,b=s.viewBox,x=s.wrapperStyle,S=d3e({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:m,position:v,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:b}),T=S.cssClasses,_=S.cssProperties,C=V3(V3({transition:f&&a?"transform ".concat(l,"ms ").concat(c):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&h?"visible":"hidden",position:"absolute",top:0,left:0},x);return F.createElement("div",{tabIndex:-1,className:T,style:C,ref:function(p){r.wrapperNode=p}},u)}}])}(N.PureComponent),w3e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Lo={isSsr:w3e(),get:function(e){return Lo[e]},set:function(e,n){if(typeof e=="string")Lo[e]=n;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(s){Lo[s]=e[s]})}}};function op(t){"@babel/helpers - typeof";return op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},op(t)}function U3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function z3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U3(Object(n),!0).forEach(function(r){dM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j3e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ree(r.key),r)}}function N3e(t,e,n){return e&&j3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function S3e(t,e,n){return e=sj(e),E3e(t,nee()?Reflect.construct(e,n||[],sj(t).constructor):e.apply(t,n))}function E3e(t,e){if(e&&(op(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A3e(t)}function A3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nee=function(){return!!t})()}function sj(t){return sj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sj(t)}function T3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GP(t,e)}function GP(t,e){return GP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},GP(t,e)}function dM(t,e,n){return e=ree(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ree(t){var e=C3e(t,"string");return op(e)=="symbol"?e:e+""}function C3e(t,e){if(op(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(op(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function P3e(t){return t.dataKey}function I3e(t,e){return F.isValidElement(t)?F.cloneElement(t,e):typeof t=="function"?F.createElement(t,e):F.createElement(i3e,e)}var Ma=function(t){function e(){return _3e(this,e),S3e(this,e,arguments)}return T3e(e,t),N3e(e,[{key:"render",value:function(){var r=this,s=this.props,a=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.content,d=s.coordinate,h=s.filterNull,f=s.isAnimationActive,m=s.offset,v=s.payload,g=s.payloadUniqBy,y=s.position,b=s.reverseDirection,x=s.useTranslate3d,S=s.viewBox,T=s.wrapperStyle,_=v??[];h&&_.length&&(_=HJ(v.filter(function(E){return E.value!=null&&(E.hide!==!0||r.props.includeHidden)}),g,P3e));var C=_.length>0;return F.createElement(b3e,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:f,active:a,coordinate:d,hasPayload:C,offset:m,position:y,reverseDirection:b,useTranslate3d:x,viewBox:S,wrapperStyle:T},I3e(u,z3(z3({},this.props),{},{payload:_})))}}])}(N.PureComponent);dM(Ma,"displayName","Tooltip");dM(Ma,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Lo.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var k3e=Xo,R3e=function(){return k3e.Date.now()},O3e=R3e,M3e=/\s/;function D3e(t){for(var e=t.length;e--&&M3e.test(t.charAt(e)););return e}var L3e=D3e,$3e=L3e,F3e=/^\s+/;function V3e(t){return t&&t.slice(0,$3e(t)+1).replace(F3e,"")}var B3e=V3e,U3e=B3e,q3=nd,z3e=eg,W3=NaN,q3e=/^[-+]0x[0-9a-f]+$/i,W3e=/^0b[01]+$/i,H3e=/^0o[0-7]+$/i,K3e=parseInt;function G3e(t){if(typeof t=="number")return t;if(z3e(t))return W3;if(q3(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=q3(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=U3e(t);var n=W3e.test(t);return n||H3e.test(t)?K3e(t.slice(2),n?2:8):q3e.test(t)?W3:+t}var see=G3e,Y3e=nd,mA=O3e,H3=see,Q3e="Expected a function",X3e=Math.max,Z3e=Math.min;function J3e(t,e,n){var r,s,a,o,l,c,u=0,d=!1,h=!1,f=!0;if(typeof t!="function")throw new TypeError(Q3e);e=H3(e)||0,Y3e(n)&&(d=!!n.leading,h="maxWait"in n,a=h?X3e(H3(n.maxWait)||0,e):a,f="trailing"in n?!!n.trailing:f);function m(C){var E=r,p=s;return r=s=void 0,u=C,o=t.apply(p,E),o}function v(C){return u=C,l=setTimeout(b,e),d?m(C):o}function g(C){var E=C-c,p=C-u,w=e-E;return h?Z3e(w,a-p):w}function y(C){var E=C-c,p=C-u;return c===void 0||E>=e||E<0||h&&p>=a}function b(){var C=mA();if(y(C))return x(C);l=setTimeout(b,g(C))}function x(C){return l=void 0,f&&r?m(C):(r=s=void 0,o)}function S(){l!==void 0&&clearTimeout(l),u=0,r=c=s=l=void 0}function T(){return l===void 0?o:x(mA())}function _(){var C=mA(),E=y(C);if(r=arguments,s=this,c=C,E){if(l===void 0)return v(c);if(h)return clearTimeout(l),l=setTimeout(b,e),m(c)}return l===void 0&&(l=setTimeout(b,e)),o}return _.cancel=S,_.flush=T,_}var e5e=J3e,t5e=e5e,n5e=nd,r5e="Expected a function";function s5e(t,e,n){var r=!0,s=!0;if(typeof t!="function")throw new TypeError(r5e);return n5e(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),t5e(t,e,{leading:r,maxWait:e,trailing:s})}var i5e=s5e;const iee=vn(i5e);function Hv(t){"@babel/helpers - typeof";return Hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hv(t)}function K3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function N0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K3(Object(n),!0).forEach(function(r){a5e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function a5e(t,e,n){return e=o5e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o5e(t){var e=l5e(t,"string");return Hv(e)=="symbol"?e:e+""}function l5e(t,e){if(Hv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Hv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function c5e(t,e){return f5e(t)||h5e(t,e)||d5e(t,e)||u5e()}function u5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d5e(t,e){if(t){if(typeof t=="string")return G3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G3(t,e)}}function G3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h5e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function f5e(t){if(Array.isArray(t))return t}var pA=N.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,s=r===void 0?{width:-1,height:-1}:r,a=t.width,o=a===void 0?"100%":a,l=t.height,c=l===void 0?"100%":l,u=t.minWidth,d=u===void 0?0:u,h=t.minHeight,f=t.maxHeight,m=t.children,v=t.debounce,g=v===void 0?0:v,y=t.id,b=t.className,x=t.onResize,S=t.style,T=S===void 0?{}:S,_=N.useRef(null),C=N.useRef();C.current=x,N.useImperativeHandle(e,function(){return Object.defineProperty(_.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_.current},configurable:!0})});var E=N.useState({containerWidth:s.width,containerHeight:s.height}),p=c5e(E,2),w=p[0],A=p[1],P=N.useCallback(function(k,L){A(function(U){var z=Math.round(k),O=Math.round(L);return U.containerWidth===z&&U.containerHeight===O?U:{containerWidth:z,containerHeight:O}})},[]);N.useEffect(function(){var k=function(D){var K,ie=D[0].contentRect,ae=ie.width,_e=ie.height;P(ae,_e),(K=C.current)===null||K===void 0||K.call(C,ae,_e)};g>0&&(k=iee(k,g,{trailing:!0,leading:!1}));var L=new ResizeObserver(k),U=_.current.getBoundingClientRect(),z=U.width,O=U.height;return P(z,O),L.observe(_.current),function(){L.disconnect()}},[P,g]);var I=N.useMemo(function(){var k=w.containerWidth,L=w.containerHeight;if(k<0||L<0)return null;Ga(Ld(o)||Ld(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Ga(!n||n>0,"The aspect(%s) must be greater than zero.",n);var U=Ld(o)?k:o,z=Ld(c)?L:c;n&&n>0&&(U?z=U/n:z&&(U=z*n),f&&z>f&&(z=f)),Ga(U>0||z>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,U,z,o,c,d,h,n);var O=!Array.isArray(m)&&wl(m.type).endsWith("Chart");return F.Children.map(m,function($){return F.isValidElement($)?N.cloneElement($,N0({width:U,height:z},O?{style:N0({height:"100%",width:"100%",maxHeight:z,maxWidth:U},$.props.style)}:{})):$})},[n,m,c,f,h,d,w,o]);return F.createElement("div",{id:y?"".concat(y):void 0,className:$t("recharts-responsive-container",b),style:N0(N0({},T),{},{width:o,height:c,minWidth:d,minHeight:h,maxHeight:f}),ref:_},I)}),FS=function(e){return null};FS.displayName="Cell";function Kv(t){"@babel/helpers - typeof";return Kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kv(t)}function Y3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function YP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y3(Object(n),!0).forEach(function(r){m5e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function m5e(t,e,n){return e=p5e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p5e(t){var e=g5e(t,"string");return Kv(e)=="symbol"?e:e+""}function g5e(t,e){if(Kv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Kv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mf={widthCache:{},cacheCount:0},y5e=2e3,v5e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Q3="recharts_measurement_span";function x5e(t){var e=YP({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var zy=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Lo.isSsr)return{width:0,height:0};var r=x5e(n),s=JSON.stringify({text:e,copyStyle:r});if(mf.widthCache[s])return mf.widthCache[s];try{var a=document.getElementById(Q3);a||(a=document.createElement("span"),a.setAttribute("id",Q3),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=YP(YP({},v5e),r);Object.assign(a.style,o),a.textContent="".concat(e);var l=a.getBoundingClientRect(),c={width:l.width,height:l.height};return mf.widthCache[s]=c,++mf.cacheCount>y5e&&(mf.cacheCount=0,mf.widthCache={}),c}catch{return{width:0,height:0}}},b5e=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Gv(t){"@babel/helpers - typeof";return Gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gv(t)}function ij(t,e){return N5e(t)||j5e(t,e)||_5e(t,e)||w5e()}function w5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _5e(t,e){if(t){if(typeof t=="string")return X3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X3(t,e)}}function X3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function j5e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function N5e(t){if(Array.isArray(t))return t}function S5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A5e(r.key),r)}}function E5e(t,e,n){return e&&Z3(t.prototype,e),n&&Z3(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function A5e(t){var e=T5e(t,"string");return Gv(e)=="symbol"?e:e+""}function T5e(t,e){if(Gv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Gv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var J3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,e5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,C5e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,P5e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,aee={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},I5e=Object.keys(aee),Wf="NaN";function k5e(t,e){return t*aee[e]}var S0=function(){function t(e,n){S5e(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!C5e.test(n)&&(this.num=NaN,this.unit=""),I5e.includes(n)&&(this.num=k5e(e,n),this.unit="px")}return E5e(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,s=(r=P5e.exec(n))!==null&&r!==void 0?r:[],a=ij(s,3),o=a[1],l=a[2];return new t(parseFloat(o),l??"")}}])}();function oee(t){if(t.includes(Wf))return Wf;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=J3.exec(e))!==null&&n!==void 0?n:[],s=ij(r,4),a=s[1],o=s[2],l=s[3],c=S0.parse(a??""),u=S0.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Wf;e=e.replace(J3,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,f=(h=e5.exec(e))!==null&&h!==void 0?h:[],m=ij(f,4),v=m[1],g=m[2],y=m[3],b=S0.parse(v??""),x=S0.parse(y??""),S=g==="+"?b.add(x):b.subtract(x);if(S.isNaN())return Wf;e=e.replace(e5,S.toString())}return e}var t5=/\(([^()]*)\)/;function R5e(t){for(var e=t;e.includes("(");){var n=t5.exec(e),r=ij(n,2),s=r[1];e=e.replace(t5,oee(s))}return e}function O5e(t){var e=t.replace(/\s+/g,"");return e=R5e(e),e=oee(e),e}function M5e(t){try{return O5e(t)}catch{return Wf}}function gA(t){var e=M5e(t.slice(5,-1));return e===Wf?"":e}var D5e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],L5e=["dx","dy","angle","className","breakAll"];function QP(){return QP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QP.apply(this,arguments)}function n5(t,e){if(t==null)return{};var n=$5e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function $5e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function r5(t,e){return U5e(t)||B5e(t,e)||V5e(t,e)||F5e()}function F5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V5e(t,e){if(t){if(typeof t=="string")return s5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s5(t,e)}}function s5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function B5e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function U5e(t){if(Array.isArray(t))return t}var lee=/[ \f\n\r\t\v\u2028\u2029]+/,cee=function(e){var n=e.children,r=e.breakAll,s=e.style;try{var a=[];Ft(n)||(r?a=n.toString().split(""):a=n.toString().split(lee));var o=a.map(function(c){return{word:c,width:zy(c,s).width}}),l=r?0:zy("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},z5e=function(e,n,r,s,a){var o=e.maxLines,l=e.children,c=e.style,u=e.breakAll,d=Ee(o),h=l,f=function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return U.reduce(function(z,O){var $=O.word,D=O.width,K=z[z.length-1];if(K&&(s==null||a||K.width+D+r<Number(s)))K.words.push($),K.width+=D+r;else{var ie={words:[$],width:D};z.push(ie)}return z},[])},m=f(n),v=function(U){return U.reduce(function(z,O){return z.width>O.width?z:O})};if(!d)return m;for(var g="",y=function(U){var z=h.slice(0,U),O=cee({breakAll:u,style:c,children:z+g}).wordsWithComputedWidth,$=f(O),D=$.length>o||v($).width>Number(s);return[D,$]},b=0,x=h.length-1,S=0,T;b<=x&&S<=h.length-1;){var _=Math.floor((b+x)/2),C=_-1,E=y(C),p=r5(E,2),w=p[0],A=p[1],P=y(_),I=r5(P,1),k=I[0];if(!w&&!k&&(b=_+1),w&&k&&(x=_-1),!w&&k){T=A;break}S++}return T||m},i5=function(e){var n=Ft(e)?[]:e.toString().split(lee);return[{words:n}]},q5e=function(e){var n=e.width,r=e.scaleToFit,s=e.children,a=e.style,o=e.breakAll,l=e.maxLines;if((n||r)&&!Lo.isSsr){var c,u,d=cee({breakAll:o,children:s,style:a});if(d){var h=d.wordsWithComputedWidth,f=d.spaceWidth;c=h,u=f}else return i5(s);return z5e({breakAll:o,children:s,maxLines:l,style:a},c,u,n,r)}return i5(s)},a5="#808080",Mh=function(e){var n=e.x,r=n===void 0?0:n,s=e.y,a=s===void 0?0:s,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,u=c===void 0?"0.71em":c,d=e.scaleToFit,h=d===void 0?!1:d,f=e.textAnchor,m=f===void 0?"start":f,v=e.verticalAnchor,g=v===void 0?"end":v,y=e.fill,b=y===void 0?a5:y,x=n5(e,D5e),S=N.useMemo(function(){return q5e({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:h,style:x.style,width:x.width})},[x.breakAll,x.children,x.maxLines,h,x.style,x.width]),T=x.dx,_=x.dy,C=x.angle,E=x.className,p=x.breakAll,w=n5(x,L5e);if(!zr(r)||!zr(a))return null;var A=r+(Ee(T)?T:0),P=a+(Ee(_)?_:0),I;switch(g){case"start":I=gA("calc(".concat(u,")"));break;case"middle":I=gA("calc(".concat((S.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:I=gA("calc(".concat(S.length-1," * -").concat(l,")"));break}var k=[];if(h){var L=S[0].width,U=x.width;k.push("scale(".concat((Ee(U)?U/L:1)/L,")"))}return C&&k.push("rotate(".concat(C,", ").concat(A,", ").concat(P,")")),k.length&&(w.transform=k.join(" ")),F.createElement("text",QP({},pt(w,!0),{x:A,y:P,className:$t("recharts-text",E),textAnchor:m,fill:b.includes("url")?a5:b}),S.map(function(z,O){var $=z.words.join(p?"":" ");return F.createElement("tspan",{x:A,dy:O===0?I:l,key:"".concat($,"-").concat(O)},$)}))};function fu(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function W5e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function hM(t){let e,n,r;t.length!==2?(e=fu,n=(l,c)=>fu(t(l),c),r=(l,c)=>t(l)-c):(e=t===fu||t===W5e?t:H5e,n=t,r=t);function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;n(l[h],c)<0?u=h+1:d=h}while(u<d)}return u}function a(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;n(l[h],c)<=0?u=h+1:d=h}while(u<d)}return u}function o(l,c,u=0,d=l.length){const h=s(l,c,u,d-1);return h>u&&r(l[h-1],c)>-r(l[h],c)?h-1:h}return{left:s,center:o,right:a}}function H5e(){return 0}function uee(t){return t===null?NaN:+t}function*K5e(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const G5e=hM(fu),bb=G5e.right;hM(uee).center;class o5 extends Map{constructor(e,n=X5e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,s]of e)this.set(r,s)}get(e){return super.get(l5(this,e))}has(e){return super.has(l5(this,e))}set(e,n){return super.set(Y5e(this,e),n)}delete(e){return super.delete(Q5e(this,e))}}function l5({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Y5e({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Q5e({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function X5e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Z5e(t=fu){if(t===fu)return dee;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function dee(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const J5e=Math.sqrt(50),eUe=Math.sqrt(10),tUe=Math.sqrt(2);function aj(t,e,n){const r=(e-t)/Math.max(0,n),s=Math.floor(Math.log10(r)),a=r/Math.pow(10,s),o=a>=J5e?10:a>=eUe?5:a>=tUe?2:1;let l,c,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,s)*o,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=n&&n<2?aj(t,e,n*2):[l,c,u]}function XP(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[s,a,o]=r?aj(e,t,n):aj(t,e,n);if(!(a>=s))return[];const l=a-s+1,c=new Array(l);if(r)if(o<0)for(let u=0;u<l;++u)c[u]=(a-u)/-o;else for(let u=0;u<l;++u)c[u]=(a-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(s+u)/-o;else for(let u=0;u<l;++u)c[u]=(s+u)*o;return c}function ZP(t,e,n){return e=+e,t=+t,n=+n,aj(t,e,n)[2]}function JP(t,e,n){e=+e,t=+t,n=+n;const r=e<t,s=r?ZP(e,t,n):ZP(t,e,n);return(r?-1:1)*(s<0?1/-s:s)}function c5(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function u5(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function hee(t,e,n=0,r=1/0,s){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(s=s===void 0?dee:Z5e(s);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,d=Math.log(c),h=.5*Math.exp(2*d/3),f=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),m=Math.max(n,Math.floor(e-u*h/c+f)),v=Math.min(r,Math.floor(e+(c-u)*h/c+f));hee(t,e,m,v,s)}const a=t[e];let o=n,l=r;for(qg(t,n,e),s(t[r],a)>0&&qg(t,n,r);o<l;){for(qg(t,o,l),++o,--l;s(t[o],a)<0;)++o;for(;s(t[l],a)>0;)--l}s(t[n],a)===0?qg(t,n,l):(++l,qg(t,l,r)),l<=e&&(n=l+1),e<=l&&(r=l-1)}return t}function qg(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function nUe(t,e,n){if(t=Float64Array.from(K5e(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return u5(t);if(e>=1)return c5(t);var r,s=(r-1)*e,a=Math.floor(s),o=c5(hee(t,a).subarray(0,a+1)),l=u5(t.subarray(a+1));return o+(l-o)*(s-a)}}function rUe(t,e,n=uee){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,s=(r-1)*e,a=Math.floor(s),o=+n(t[a],a,t),l=+n(t[a+1],a+1,t);return o+(l-o)*(s-a)}}function sUe(t,e,n){t=+t,e=+e,n=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(s);++r<s;)a[r]=t+r*n;return a}function wa(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Zl(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const eI=Symbol("implicit");function fM(){var t=new o5,e=[],n=[],r=eI;function s(a){let o=t.get(a);if(o===void 0){if(r!==eI)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return s.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new o5;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return s},s.range=function(a){return arguments.length?(n=Array.from(a),s):n.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return fM(e,n).unknown(r)},wa.apply(s,arguments),s}function Yv(){var t=fM().unknown(void 0),e=t.domain,n=t.range,r=0,s=1,a,o,l=!1,c=0,u=0,d=.5;delete t.unknown;function h(){var f=e().length,m=s<r,v=m?s:r,g=m?r:s;a=(g-v)/Math.max(1,f-c+u*2),l&&(a=Math.floor(a)),v+=(g-v-a*(f-c))*d,o=a*(1-c),l&&(v=Math.round(v),o=Math.round(o));var y=sUe(f).map(function(b){return v+a*b});return n(m?y.reverse():y)}return t.domain=function(f){return arguments.length?(e(f),h()):e()},t.range=function(f){return arguments.length?([r,s]=f,r=+r,s=+s,h()):[r,s]},t.rangeRound=function(f){return[r,s]=f,r=+r,s=+s,l=!0,h()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(f){return arguments.length?(l=!!f,h()):l},t.padding=function(f){return arguments.length?(c=Math.min(1,u=+f),h()):c},t.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},t.paddingOuter=function(f){return arguments.length?(u=+f,h()):u},t.align=function(f){return arguments.length?(d=Math.max(0,Math.min(1,f)),h()):d},t.copy=function(){return Yv(e(),[r,s]).round(l).paddingInner(c).paddingOuter(u).align(d)},wa.apply(h(),arguments)}function fee(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return fee(e())},t}function qy(){return fee(Yv.apply(null,arguments).paddingInner(1))}function mM(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function mee(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function wb(){}var Qv=.7,oj=1/Qv,pm="\\s*([+-]?\\d+)\\s*",Xv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$o="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iUe=/^#([0-9a-f]{3,8})$/,aUe=new RegExp(`^rgb\\(${pm},${pm},${pm}\\)$`),oUe=new RegExp(`^rgb\\(${$o},${$o},${$o}\\)$`),lUe=new RegExp(`^rgba\\(${pm},${pm},${pm},${Xv}\\)$`),cUe=new RegExp(`^rgba\\(${$o},${$o},${$o},${Xv}\\)$`),uUe=new RegExp(`^hsl\\(${Xv},${$o},${$o}\\)$`),dUe=new RegExp(`^hsla\\(${Xv},${$o},${$o},${Xv}\\)$`),d5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};mM(wb,Zv,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:h5,formatHex:h5,formatHex8:hUe,formatHsl:fUe,formatRgb:f5,toString:f5});function h5(){return this.rgb().formatHex()}function hUe(){return this.rgb().formatHex8()}function fUe(){return pee(this).formatHsl()}function f5(){return this.rgb().formatRgb()}function Zv(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=iUe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?m5(e):n===3?new pi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?E0(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?E0(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=aUe.exec(t))?new pi(e[1],e[2],e[3],1):(e=oUe.exec(t))?new pi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=lUe.exec(t))?E0(e[1],e[2],e[3],e[4]):(e=cUe.exec(t))?E0(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=uUe.exec(t))?y5(e[1],e[2]/100,e[3]/100,1):(e=dUe.exec(t))?y5(e[1],e[2]/100,e[3]/100,e[4]):d5.hasOwnProperty(t)?m5(d5[t]):t==="transparent"?new pi(NaN,NaN,NaN,0):null}function m5(t){return new pi(t>>16&255,t>>8&255,t&255,1)}function E0(t,e,n,r){return r<=0&&(t=e=n=NaN),new pi(t,e,n,r)}function mUe(t){return t instanceof wb||(t=Zv(t)),t?(t=t.rgb(),new pi(t.r,t.g,t.b,t.opacity)):new pi}function tI(t,e,n,r){return arguments.length===1?mUe(t):new pi(t,e,n,r??1)}function pi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}mM(pi,tI,mee(wb,{brighter(t){return t=t==null?oj:Math.pow(oj,t),new pi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Qv:Math.pow(Qv,t),new pi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new pi(sh(this.r),sh(this.g),sh(this.b),lj(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:p5,formatHex:p5,formatHex8:pUe,formatRgb:g5,toString:g5}));function p5(){return`#${$d(this.r)}${$d(this.g)}${$d(this.b)}`}function pUe(){return`#${$d(this.r)}${$d(this.g)}${$d(this.b)}${$d((isNaN(this.opacity)?1:this.opacity)*255)}`}function g5(){const t=lj(this.opacity);return`${t===1?"rgb(":"rgba("}${sh(this.r)}, ${sh(this.g)}, ${sh(this.b)}${t===1?")":`, ${t})`}`}function lj(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function sh(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function $d(t){return t=sh(t),(t<16?"0":"")+t.toString(16)}function y5(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ua(t,e,n,r)}function pee(t){if(t instanceof Ua)return new Ua(t.h,t.s,t.l,t.opacity);if(t instanceof wb||(t=Zv(t)),!t)return new Ua;if(t instanceof Ua)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,l=a-s,c=(a+s)/2;return l?(e===a?o=(n-r)/l+(n<r)*6:n===a?o=(r-e)/l+2:o=(e-n)/l+4,l/=c<.5?a+s:2-a-s,o*=60):l=c>0&&c<1?0:o,new Ua(o,l,c,t.opacity)}function gUe(t,e,n,r){return arguments.length===1?pee(t):new Ua(t,e,n,r??1)}function Ua(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}mM(Ua,gUe,mee(wb,{brighter(t){return t=t==null?oj:Math.pow(oj,t),new Ua(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Qv:Math.pow(Qv,t),new Ua(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new pi(yA(t>=240?t-240:t+120,s,r),yA(t,s,r),yA(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new Ua(v5(this.h),A0(this.s),A0(this.l),lj(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=lj(this.opacity);return`${t===1?"hsl(":"hsla("}${v5(this.h)}, ${A0(this.s)*100}%, ${A0(this.l)*100}%${t===1?")":`, ${t})`}`}}));function v5(t){return t=(t||0)%360,t<0?t+360:t}function A0(t){return Math.max(0,Math.min(1,t||0))}function yA(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const pM=t=>()=>t;function yUe(t,e){return function(n){return t+n*e}}function vUe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function xUe(t){return(t=+t)==1?gee:function(e,n){return n-e?vUe(e,n,t):pM(isNaN(e)?n:e)}}function gee(t,e){var n=e-t;return n?yUe(t,n):pM(isNaN(t)?e:t)}const x5=function t(e){var n=xUe(e);function r(s,a){var o=n((s=tI(s)).r,(a=tI(a)).r),l=n(s.g,a.g),c=n(s.b,a.b),u=gee(s.opacity,a.opacity);return function(d){return s.r=o(d),s.g=l(d),s.b=c(d),s.opacity=u(d),s+""}}return r.gamma=t,r}(1);function bUe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),s;return function(a){for(s=0;s<n;++s)r[s]=t[s]*(1-a)+e[s]*a;return r}}function wUe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function _Ue(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,s=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)s[o]=ug(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(l){for(o=0;o<r;++o)a[o]=s[o](l);return a}}function jUe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function cj(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function NUe(t,e){var n={},r={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?n[s]=ug(t[s],e[s]):r[s]=e[s];return function(a){for(s in n)r[s]=n[s](a);return r}}var nI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vA=new RegExp(nI.source,"g");function SUe(t){return function(){return t}}function EUe(t){return function(e){return t(e)+""}}function AUe(t,e){var n=nI.lastIndex=vA.lastIndex=0,r,s,a,o=-1,l=[],c=[];for(t=t+"",e=e+"";(r=nI.exec(t))&&(s=vA.exec(e));)(a=s.index)>n&&(a=e.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(r=r[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:cj(r,s)})),n=vA.lastIndex;return n<e.length&&(a=e.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?c[0]?EUe(c[0].x):SUe(e):(e=c.length,function(u){for(var d=0,h;d<e;++d)l[(h=c[d]).i]=h.x(u);return l.join("")})}function ug(t,e){var n=typeof e,r;return e==null||n==="boolean"?pM(e):(n==="number"?cj:n==="string"?(r=Zv(e))?(e=r,x5):AUe:e instanceof Zv?x5:e instanceof Date?jUe:wUe(e)?bUe:Array.isArray(e)?_Ue:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?NUe:cj)(t,e)}function gM(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function TUe(t,e){e===void 0&&(e=t,t=ug);for(var n=0,r=e.length-1,s=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(s,s=e[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[l](o-l)}}function CUe(t){return function(){return t}}function uj(t){return+t}var b5=[0,1];function Gs(t){return t}function rI(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:CUe(isNaN(e)?NaN:.5)}function PUe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function IUe(t,e,n){var r=t[0],s=t[1],a=e[0],o=e[1];return s<r?(r=rI(s,r),a=n(o,a)):(r=rI(r,s),a=n(a,o)),function(l){return a(r(l))}}function kUe(t,e,n){var r=Math.min(t.length,e.length)-1,s=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)s[o]=rI(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(l){var c=bb(t,l,1,r)-1;return a[c](s[c](l))}}function _b(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function VS(){var t=b5,e=b5,n=ug,r,s,a,o=Gs,l,c,u;function d(){var f=Math.min(t.length,e.length);return o!==Gs&&(o=PUe(t[0],t[f-1])),l=f>2?kUe:IUe,c=u=null,h}function h(f){return f==null||isNaN(f=+f)?a:(c||(c=l(t.map(r),e,n)))(r(o(f)))}return h.invert=function(f){return o(s((u||(u=l(e,t.map(r),cj)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,uj),d()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),d()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),n=gM,d()},h.clamp=function(f){return arguments.length?(o=f?!0:Gs,d()):o!==Gs},h.interpolate=function(f){return arguments.length?(n=f,d()):n},h.unknown=function(f){return arguments.length?(a=f,h):a},function(f,m){return r=f,s=m,d()}}function yM(){return VS()(Gs,Gs)}function RUe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function dj(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function lp(t){return t=dj(Math.abs(t)),t?t[1]:NaN}function OUe(t,e){return function(n,r){for(var s=n.length,a=[],o=0,l=t[0],c=0;s>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),a.push(n.substring(s-=l,s+l)),!((c+=l+1)>r));)l=t[o=(o+1)%t.length];return a.reverse().join(e)}}function MUe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var DUe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Jv(t){if(!(e=DUe.exec(t)))throw new Error("invalid format: "+t);var e;return new vM({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Jv.prototype=vM.prototype;function vM(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}vM.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function LUe(t){e:for(var e=t.length,n=1,r=-1,s;n<e;++n)switch(t[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(s+1):t}var yee;function $Ue(t,e){var n=dj(t,e);if(!n)return t+"";var r=n[0],s=n[1],a=s-(yee=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+dj(t,Math.max(0,e+a-1))[0]}function w5(t,e){var n=dj(t,e);if(!n)return t+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const _5={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:RUe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>w5(t*100,e),r:w5,s:$Ue,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function j5(t){return t}var N5=Array.prototype.map,S5=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function FUe(t){var e=t.grouping===void 0||t.thousands===void 0?j5:OUe(N5.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?j5:MUe(N5.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(h){h=Jv(h);var f=h.fill,m=h.align,v=h.sign,g=h.symbol,y=h.zero,b=h.width,x=h.comma,S=h.precision,T=h.trim,_=h.type;_==="n"?(x=!0,_="g"):_5[_]||(S===void 0&&(S=12),T=!0,_="g"),(y||f==="0"&&m==="=")&&(y=!0,f="0",m="=");var C=g==="$"?n:g==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",E=g==="$"?r:/[%p]/.test(_)?o:"",p=_5[_],w=/[defgprs%]/.test(_);S=S===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function A(P){var I=C,k=E,L,U,z;if(_==="c")k=p(P)+k,P="";else{P=+P;var O=P<0||1/P<0;if(P=isNaN(P)?c:p(Math.abs(P),S),T&&(P=LUe(P)),O&&+P==0&&v!=="+"&&(O=!1),I=(O?v==="("?v:l:v==="-"||v==="("?"":v)+I,k=(_==="s"?S5[8+yee/3]:"")+k+(O&&v==="("?")":""),w){for(L=-1,U=P.length;++L<U;)if(z=P.charCodeAt(L),48>z||z>57){k=(z===46?s+P.slice(L+1):P.slice(L))+k,P=P.slice(0,L);break}}}x&&!y&&(P=e(P,1/0));var $=I.length+P.length+k.length,D=$<b?new Array(b-$+1).join(f):"";switch(x&&y&&(P=e(D+P,D.length?b-k.length:1/0),D=""),m){case"<":P=I+P+k+D;break;case"=":P=I+D+P+k;break;case"^":P=D.slice(0,$=D.length>>1)+I+P+k+D.slice($);break;default:P=D+I+P+k;break}return a(P)}return A.toString=function(){return h+""},A}function d(h,f){var m=u((h=Jv(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(lp(f)/3)))*3,g=Math.pow(10,-v),y=S5[8+v/3];return function(b){return m(g*b)+y}}return{format:u,formatPrefix:d}}var T0,xM,vee;VUe({thousands:",",grouping:[3],currency:["$",""]});function VUe(t){return T0=FUe(t),xM=T0.format,vee=T0.formatPrefix,T0}function BUe(t){return Math.max(0,-lp(Math.abs(t)))}function UUe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(lp(e)/3)))*3-lp(Math.abs(t)))}function zUe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,lp(e)-lp(t))+1}function xee(t,e,n,r){var s=JP(t,e,n),a;switch(r=Jv(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=UUe(s,o))&&(r.precision=a),vee(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=zUe(s,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=BUe(s))&&(r.precision=a-(r.type==="%")*2);break}}return xM(r)}function rd(t){var e=t.domain;return t.ticks=function(n){var r=e();return XP(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var s=e();return xee(s[0],s[s.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),s=0,a=r.length-1,o=r[s],l=r[a],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=s,s=a,a=u);d-- >0;){if(u=ZP(o,l,n),u===c)return r[s]=o,r[a]=l,e(r);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function hj(){var t=yM();return t.copy=function(){return _b(t,hj())},wa.apply(t,arguments),rd(t)}function bee(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,uj),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return bee(t).unknown(e)},t=arguments.length?Array.from(t,uj):[0,1],rd(n)}function wee(t,e){t=t.slice();var n=0,r=t.length-1,s=t[n],a=t[r],o;return a<s&&(o=n,n=r,r=o,o=s,s=a,a=o),t[n]=e.floor(s),t[r]=e.ceil(a),t}function E5(t){return Math.log(t)}function A5(t){return Math.exp(t)}function qUe(t){return-Math.log(-t)}function WUe(t){return-Math.exp(-t)}function HUe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function KUe(t){return t===10?HUe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function GUe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function T5(t){return(e,n)=>-t(-e,n)}function bM(t){const e=t(E5,A5),n=e.domain;let r=10,s,a;function o(){return s=GUe(r),a=KUe(r),n()[0]<0?(s=T5(s),a=T5(a),t(qUe,WUe)):t(E5,A5),e}return e.base=function(l){return arguments.length?(r=+l,o()):r},e.domain=function(l){return arguments.length?(n(l),o()):n()},e.ticks=l=>{const c=n();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let f=s(u),m=s(d),v,g;const y=l==null?10:+l;let b=[];if(!(r%1)&&m-f<y){if(f=Math.floor(f),m=Math.ceil(m),u>0){for(;f<=m;++f)for(v=1;v<r;++v)if(g=f<0?v/a(-f):v*a(f),!(g<u)){if(g>d)break;b.push(g)}}else for(;f<=m;++f)for(v=r-1;v>=1;--v)if(g=f>0?v/a(-f):v*a(f),!(g<u)){if(g>d)break;b.push(g)}b.length*2<y&&(b=XP(u,d,y))}else b=XP(f,m,Math.min(m-f,y)).map(a);return h?b.reverse():b},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Jv(c)).precision==null&&(c.trim=!0),c=xM(c)),l===1/0)return c;const u=Math.max(1,r*l/e.ticks().length);return d=>{let h=d/a(Math.round(s(d)));return h*r<r-.5&&(h*=r),h<=u?c(d):""}},e.nice=()=>n(wee(n(),{floor:l=>a(Math.floor(s(l))),ceil:l=>a(Math.ceil(s(l)))})),e}function _ee(){const t=bM(VS()).domain([1,10]);return t.copy=()=>_b(t,_ee()).base(t.base()),wa.apply(t,arguments),t}function C5(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function P5(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function wM(t){var e=1,n=t(C5(e),P5(e));return n.constant=function(r){return arguments.length?t(C5(e=+r),P5(e)):e},rd(n)}function jee(){var t=wM(VS());return t.copy=function(){return _b(t,jee()).constant(t.constant())},wa.apply(t,arguments)}function I5(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function YUe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function QUe(t){return t<0?-t*t:t*t}function _M(t){var e=t(Gs,Gs),n=1;function r(){return n===1?t(Gs,Gs):n===.5?t(YUe,QUe):t(I5(n),I5(1/n))}return e.exponent=function(s){return arguments.length?(n=+s,r()):n},rd(e)}function jM(){var t=_M(VS());return t.copy=function(){return _b(t,jM()).exponent(t.exponent())},wa.apply(t,arguments),t}function XUe(){return jM.apply(null,arguments).exponent(.5)}function k5(t){return Math.sign(t)*t*t}function ZUe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Nee(){var t=yM(),e=[0,1],n=!1,r;function s(a){var o=ZUe(t(a));return isNaN(o)?r:n?Math.round(o):o}return s.invert=function(a){return t.invert(k5(a))},s.domain=function(a){return arguments.length?(t.domain(a),s):t.domain()},s.range=function(a){return arguments.length?(t.range((e=Array.from(a,uj)).map(k5)),s):e.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(n=!!a,s):n},s.clamp=function(a){return arguments.length?(t.clamp(a),s):t.clamp()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return Nee(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},wa.apply(s,arguments),rd(s)}function See(){var t=[],e=[],n=[],r;function s(){var o=0,l=Math.max(1,e.length);for(n=new Array(l-1);++o<l;)n[o-1]=rUe(t,o/l);return a}function a(o){return o==null||isNaN(o=+o)?r:e[bb(n,o)]}return a.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(fu),s()},a.range=function(o){return arguments.length?(e=Array.from(o),s()):e.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return See().domain(t).range(e).unknown(r)},wa.apply(a,arguments)}function Eee(){var t=0,e=1,n=1,r=[.5],s=[0,1],a;function o(c){return c!=null&&c<=c?s[bb(r,c,0,n)]:a}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(n=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},o.unknown=function(c){return arguments.length&&(a=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return Eee().domain([t,e]).range(s).unknown(a)},wa.apply(rd(o),arguments)}function Aee(){var t=[.5],e=[0,1],n,r=1;function s(a){return a!=null&&a<=a?e[bb(t,a,0,r)]:n}return s.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return Aee().domain(t).range(e).unknown(n)},wa.apply(s,arguments)}const xA=new Date,bA=new Date;function Wr(t,e,n,r){function s(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(t(a=new Date(+a)),a),s.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),s.round=a=>{const o=s(a),l=s.ceil(a);return a-o<l-a?o:l},s.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),s.range=(a,o,l)=>{const c=[];if(a=s.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return c;let u;do c.push(u=new Date(+a)),e(a,l),t(a);while(u<a&&a<o);return c},s.filter=a=>Wr(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!a(o););else for(;--l>=0;)for(;e(o,1),!a(o););}),n&&(s.count=(a,o)=>(xA.setTime(+a),bA.setTime(+o),t(xA),t(bA),Math.floor(n(xA,bA))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(r?o=>r(o)%a===0:o=>s.count(0,o)%a===0):s)),s}const fj=Wr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);fj.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Wr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):fj);fj.range;const pl=1e3,na=pl*60,gl=na*60,Bl=gl*24,NM=Bl*7,R5=Bl*30,wA=Bl*365,Fd=Wr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*pl)},(t,e)=>(e-t)/pl,t=>t.getUTCSeconds());Fd.range;const SM=Wr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*pl)},(t,e)=>{t.setTime(+t+e*na)},(t,e)=>(e-t)/na,t=>t.getMinutes());SM.range;const EM=Wr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*na)},(t,e)=>(e-t)/na,t=>t.getUTCMinutes());EM.range;const AM=Wr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*pl-t.getMinutes()*na)},(t,e)=>{t.setTime(+t+e*gl)},(t,e)=>(e-t)/gl,t=>t.getHours());AM.range;const TM=Wr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*gl)},(t,e)=>(e-t)/gl,t=>t.getUTCHours());TM.range;const jb=Wr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*na)/Bl,t=>t.getDate()-1);jb.range;const BS=Wr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Bl,t=>t.getUTCDate()-1);BS.range;const Tee=Wr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Bl,t=>Math.floor(t/Bl));Tee.range;function Zh(t){return Wr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*na)/NM)}const US=Zh(0),mj=Zh(1),JUe=Zh(2),e6e=Zh(3),cp=Zh(4),t6e=Zh(5),n6e=Zh(6);US.range;mj.range;JUe.range;e6e.range;cp.range;t6e.range;n6e.range;function Jh(t){return Wr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/NM)}const zS=Jh(0),pj=Jh(1),r6e=Jh(2),s6e=Jh(3),up=Jh(4),i6e=Jh(5),a6e=Jh(6);zS.range;pj.range;r6e.range;s6e.range;up.range;i6e.range;a6e.range;const CM=Wr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());CM.range;const PM=Wr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());PM.range;const Ul=Wr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ul.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Wr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Ul.range;const zl=Wr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());zl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Wr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});zl.range;function Cee(t,e,n,r,s,a){const o=[[Fd,1,pl],[Fd,5,5*pl],[Fd,15,15*pl],[Fd,30,30*pl],[a,1,na],[a,5,5*na],[a,15,15*na],[a,30,30*na],[s,1,gl],[s,3,3*gl],[s,6,6*gl],[s,12,12*gl],[r,1,Bl],[r,2,2*Bl],[n,1,NM],[e,1,R5],[e,3,3*R5],[t,1,wA]];function l(u,d,h){const f=d<u;f&&([u,d]=[d,u]);const m=h&&typeof h.range=="function"?h:c(u,d,h),v=m?m.range(u,+d+1):[];return f?v.reverse():v}function c(u,d,h){const f=Math.abs(d-u)/h,m=hM(([,,y])=>y).right(o,f);if(m===o.length)return t.every(JP(u/wA,d/wA,h));if(m===0)return fj.every(Math.max(JP(u,d,h),1));const[v,g]=o[f/o[m-1][2]<o[m][2]/f?m-1:m];return v.every(g)}return[l,c]}const[o6e,l6e]=Cee(zl,PM,zS,Tee,TM,EM),[c6e,u6e]=Cee(Ul,CM,US,jb,AM,SM);function _A(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function jA(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Wg(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function d6e(t){var e=t.dateTime,n=t.date,r=t.time,s=t.periods,a=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,u=Hg(s),d=Kg(s),h=Hg(a),f=Kg(a),m=Hg(o),v=Kg(o),g=Hg(l),y=Kg(l),b=Hg(c),x=Kg(c),S={a:O,A:$,b:D,B:K,c:null,d:F5,e:F5,f:O6e,g:q6e,G:H6e,H:I6e,I:k6e,j:R6e,L:Pee,m:M6e,M:D6e,p:ie,q:ae,Q:U5,s:z5,S:L6e,u:$6e,U:F6e,V:V6e,w:B6e,W:U6e,x:null,X:null,y:z6e,Y:W6e,Z:K6e,"%":B5},T={a:_e,A:Le,b:ct,B:Nt,c:null,d:V5,e:V5,f:X6e,g:oze,G:cze,H:G6e,I:Y6e,j:Q6e,L:kee,m:Z6e,M:J6e,p:Ne,q:ft,Q:U5,s:z5,S:eze,u:tze,U:nze,V:rze,w:sze,W:ize,x:null,X:null,y:aze,Y:lze,Z:uze,"%":B5},_={a:A,A:P,b:I,B:k,c:L,d:L5,e:L5,f:A6e,g:D5,G:M5,H:$5,I:$5,j:j6e,L:E6e,m:_6e,M:N6e,p:w,q:w6e,Q:C6e,s:P6e,S:S6e,u:g6e,U:y6e,V:v6e,w:p6e,W:x6e,x:U,X:z,y:D5,Y:M5,Z:b6e,"%":T6e};S.x=C(n,S),S.X=C(r,S),S.c=C(e,S),T.x=C(n,T),T.X=C(r,T),T.c=C(e,T);function C(be,Me){return function($e){var ue=[],It=-1,vt=0,un=be.length,tn,Nn,Hr;for($e instanceof Date||($e=new Date(+$e));++It<un;)be.charCodeAt(It)===37&&(ue.push(be.slice(vt,It)),(Nn=O5[tn=be.charAt(++It)])!=null?tn=be.charAt(++It):Nn=tn==="e"?" ":"0",(Hr=Me[tn])&&(tn=Hr($e,Nn)),ue.push(tn),vt=It+1);return ue.push(be.slice(vt,It)),ue.join("")}}function E(be,Me){return function($e){var ue=Wg(1900,void 0,1),It=p(ue,be,$e+="",0),vt,un;if(It!=$e.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(ue.s*1e3+("L"in ue?ue.L:0));if(Me&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+ue.p*12),ue.m===void 0&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?(vt=jA(Wg(ue.y,0,1)),un=vt.getUTCDay(),vt=un>4||un===0?pj.ceil(vt):pj(vt),vt=BS.offset(vt,(ue.V-1)*7),ue.y=vt.getUTCFullYear(),ue.m=vt.getUTCMonth(),ue.d=vt.getUTCDate()+(ue.w+6)%7):(vt=_A(Wg(ue.y,0,1)),un=vt.getDay(),vt=un>4||un===0?mj.ceil(vt):mj(vt),vt=jb.offset(vt,(ue.V-1)*7),ue.y=vt.getFullYear(),ue.m=vt.getMonth(),ue.d=vt.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),un="Z"in ue?jA(Wg(ue.y,0,1)).getUTCDay():_A(Wg(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+ue.W*7-(un+5)%7:ue.w+ue.U*7-(un+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,jA(ue)):_A(ue)}}function p(be,Me,$e,ue){for(var It=0,vt=Me.length,un=$e.length,tn,Nn;It<vt;){if(ue>=un)return-1;if(tn=Me.charCodeAt(It++),tn===37){if(tn=Me.charAt(It++),Nn=_[tn in O5?Me.charAt(It++):tn],!Nn||(ue=Nn(be,$e,ue))<0)return-1}else if(tn!=$e.charCodeAt(ue++))return-1}return ue}function w(be,Me,$e){var ue=u.exec(Me.slice($e));return ue?(be.p=d.get(ue[0].toLowerCase()),$e+ue[0].length):-1}function A(be,Me,$e){var ue=m.exec(Me.slice($e));return ue?(be.w=v.get(ue[0].toLowerCase()),$e+ue[0].length):-1}function P(be,Me,$e){var ue=h.exec(Me.slice($e));return ue?(be.w=f.get(ue[0].toLowerCase()),$e+ue[0].length):-1}function I(be,Me,$e){var ue=b.exec(Me.slice($e));return ue?(be.m=x.get(ue[0].toLowerCase()),$e+ue[0].length):-1}function k(be,Me,$e){var ue=g.exec(Me.slice($e));return ue?(be.m=y.get(ue[0].toLowerCase()),$e+ue[0].length):-1}function L(be,Me,$e){return p(be,e,Me,$e)}function U(be,Me,$e){return p(be,n,Me,$e)}function z(be,Me,$e){return p(be,r,Me,$e)}function O(be){return o[be.getDay()]}function $(be){return a[be.getDay()]}function D(be){return c[be.getMonth()]}function K(be){return l[be.getMonth()]}function ie(be){return s[+(be.getHours()>=12)]}function ae(be){return 1+~~(be.getMonth()/3)}function _e(be){return o[be.getUTCDay()]}function Le(be){return a[be.getUTCDay()]}function ct(be){return c[be.getUTCMonth()]}function Nt(be){return l[be.getUTCMonth()]}function Ne(be){return s[+(be.getUTCHours()>=12)]}function ft(be){return 1+~~(be.getUTCMonth()/3)}return{format:function(be){var Me=C(be+="",S);return Me.toString=function(){return be},Me},parse:function(be){var Me=E(be+="",!1);return Me.toString=function(){return be},Me},utcFormat:function(be){var Me=C(be+="",T);return Me.toString=function(){return be},Me},utcParse:function(be){var Me=E(be+="",!0);return Me.toString=function(){return be},Me}}}var O5={"-":"",_:" ",0:"0"},rs=/^\s*\d+/,h6e=/^%/,f6e=/[\\^$*+?|[\]().{}]/g;function fn(t,e,n){var r=t<0?"-":"",s=(r?-t:t)+"",a=s.length;return r+(a<n?new Array(n-a+1).join(e)+s:s)}function m6e(t){return t.replace(f6e,"\\$&")}function Hg(t){return new RegExp("^(?:"+t.map(m6e).join("|")+")","i")}function Kg(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function p6e(t,e,n){var r=rs.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function g6e(t,e,n){var r=rs.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function y6e(t,e,n){var r=rs.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function v6e(t,e,n){var r=rs.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function x6e(t,e,n){var r=rs.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function M5(t,e,n){var r=rs.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function D5(t,e,n){var r=rs.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function b6e(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function w6e(t,e,n){var r=rs.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function _6e(t,e,n){var r=rs.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function L5(t,e,n){var r=rs.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function j6e(t,e,n){var r=rs.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function $5(t,e,n){var r=rs.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function N6e(t,e,n){var r=rs.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function S6e(t,e,n){var r=rs.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function E6e(t,e,n){var r=rs.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function A6e(t,e,n){var r=rs.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function T6e(t,e,n){var r=h6e.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function C6e(t,e,n){var r=rs.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function P6e(t,e,n){var r=rs.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function F5(t,e){return fn(t.getDate(),e,2)}function I6e(t,e){return fn(t.getHours(),e,2)}function k6e(t,e){return fn(t.getHours()%12||12,e,2)}function R6e(t,e){return fn(1+jb.count(Ul(t),t),e,3)}function Pee(t,e){return fn(t.getMilliseconds(),e,3)}function O6e(t,e){return Pee(t,e)+"000"}function M6e(t,e){return fn(t.getMonth()+1,e,2)}function D6e(t,e){return fn(t.getMinutes(),e,2)}function L6e(t,e){return fn(t.getSeconds(),e,2)}function $6e(t){var e=t.getDay();return e===0?7:e}function F6e(t,e){return fn(US.count(Ul(t)-1,t),e,2)}function Iee(t){var e=t.getDay();return e>=4||e===0?cp(t):cp.ceil(t)}function V6e(t,e){return t=Iee(t),fn(cp.count(Ul(t),t)+(Ul(t).getDay()===4),e,2)}function B6e(t){return t.getDay()}function U6e(t,e){return fn(mj.count(Ul(t)-1,t),e,2)}function z6e(t,e){return fn(t.getFullYear()%100,e,2)}function q6e(t,e){return t=Iee(t),fn(t.getFullYear()%100,e,2)}function W6e(t,e){return fn(t.getFullYear()%1e4,e,4)}function H6e(t,e){var n=t.getDay();return t=n>=4||n===0?cp(t):cp.ceil(t),fn(t.getFullYear()%1e4,e,4)}function K6e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+fn(e/60|0,"0",2)+fn(e%60,"0",2)}function V5(t,e){return fn(t.getUTCDate(),e,2)}function G6e(t,e){return fn(t.getUTCHours(),e,2)}function Y6e(t,e){return fn(t.getUTCHours()%12||12,e,2)}function Q6e(t,e){return fn(1+BS.count(zl(t),t),e,3)}function kee(t,e){return fn(t.getUTCMilliseconds(),e,3)}function X6e(t,e){return kee(t,e)+"000"}function Z6e(t,e){return fn(t.getUTCMonth()+1,e,2)}function J6e(t,e){return fn(t.getUTCMinutes(),e,2)}function eze(t,e){return fn(t.getUTCSeconds(),e,2)}function tze(t){var e=t.getUTCDay();return e===0?7:e}function nze(t,e){return fn(zS.count(zl(t)-1,t),e,2)}function Ree(t){var e=t.getUTCDay();return e>=4||e===0?up(t):up.ceil(t)}function rze(t,e){return t=Ree(t),fn(up.count(zl(t),t)+(zl(t).getUTCDay()===4),e,2)}function sze(t){return t.getUTCDay()}function ize(t,e){return fn(pj.count(zl(t)-1,t),e,2)}function aze(t,e){return fn(t.getUTCFullYear()%100,e,2)}function oze(t,e){return t=Ree(t),fn(t.getUTCFullYear()%100,e,2)}function lze(t,e){return fn(t.getUTCFullYear()%1e4,e,4)}function cze(t,e){var n=t.getUTCDay();return t=n>=4||n===0?up(t):up.ceil(t),fn(t.getUTCFullYear()%1e4,e,4)}function uze(){return"+0000"}function B5(){return"%"}function U5(t){return+t}function z5(t){return Math.floor(+t/1e3)}var pf,Oee,Mee;dze({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function dze(t){return pf=d6e(t),Oee=pf.format,pf.parse,Mee=pf.utcFormat,pf.utcParse,pf}function hze(t){return new Date(t)}function fze(t){return t instanceof Date?+t:+new Date(+t)}function IM(t,e,n,r,s,a,o,l,c,u){var d=yM(),h=d.invert,f=d.domain,m=u(".%L"),v=u(":%S"),g=u("%I:%M"),y=u("%I %p"),b=u("%a %d"),x=u("%b %d"),S=u("%B"),T=u("%Y");function _(C){return(c(C)<C?m:l(C)<C?v:o(C)<C?g:a(C)<C?y:r(C)<C?s(C)<C?b:x:n(C)<C?S:T)(C)}return d.invert=function(C){return new Date(h(C))},d.domain=function(C){return arguments.length?f(Array.from(C,fze)):f().map(hze)},d.ticks=function(C){var E=f();return t(E[0],E[E.length-1],C??10)},d.tickFormat=function(C,E){return E==null?_:u(E)},d.nice=function(C){var E=f();return(!C||typeof C.range!="function")&&(C=e(E[0],E[E.length-1],C??10)),C?f(wee(E,C)):d},d.copy=function(){return _b(d,IM(t,e,n,r,s,a,o,l,c,u))},d}function mze(){return wa.apply(IM(c6e,u6e,Ul,CM,US,jb,AM,SM,Fd,Oee).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function pze(){return wa.apply(IM(o6e,l6e,zl,PM,zS,BS,TM,EM,Fd,Mee).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function qS(){var t=0,e=1,n,r,s,a,o=Gs,l=!1,c;function u(h){return h==null||isNaN(h=+h)?c:o(s===0?.5:(h=(a(h)-n)*s,l?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,e]=h,n=a(t=+t),r=a(e=+e),s=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(h){return arguments.length?(l=!!h,u):l},u.interpolator=function(h){return arguments.length?(o=h,u):o};function d(h){return function(f){var m,v;return arguments.length?([m,v]=f,o=h(m,v),u):[o(0),o(1)]}}return u.range=d(ug),u.rangeRound=d(gM),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return a=h,n=h(t),r=h(e),s=n===r?0:1/(r-n),u}}function sd(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Dee(){var t=rd(qS()(Gs));return t.copy=function(){return sd(t,Dee())},Zl.apply(t,arguments)}function Lee(){var t=bM(qS()).domain([1,10]);return t.copy=function(){return sd(t,Lee()).base(t.base())},Zl.apply(t,arguments)}function $ee(){var t=wM(qS());return t.copy=function(){return sd(t,$ee()).constant(t.constant())},Zl.apply(t,arguments)}function kM(){var t=_M(qS());return t.copy=function(){return sd(t,kM()).exponent(t.exponent())},Zl.apply(t,arguments)}function gze(){return kM.apply(null,arguments).exponent(.5)}function Fee(){var t=[],e=Gs;function n(r){if(r!=null&&!isNaN(r=+r))return e((bb(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let s of r)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(fu),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,s)=>e(s/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(s,a)=>nUe(t,a/r))},n.copy=function(){return Fee(e).domain(t)},Zl.apply(n,arguments)}function WS(){var t=0,e=.5,n=1,r=1,s,a,o,l,c,u=Gs,d,h=!1,f;function m(g){return isNaN(g=+g)?f:(g=.5+((g=+d(g))-a)*(r*g<r*a?l:c),u(h?Math.max(0,Math.min(1,g)):g))}m.domain=function(g){return arguments.length?([t,e,n]=g,s=d(t=+t),a=d(e=+e),o=d(n=+n),l=s===a?0:.5/(a-s),c=a===o?0:.5/(o-a),r=a<s?-1:1,m):[t,e,n]},m.clamp=function(g){return arguments.length?(h=!!g,m):h},m.interpolator=function(g){return arguments.length?(u=g,m):u};function v(g){return function(y){var b,x,S;return arguments.length?([b,x,S]=y,u=TUe(g,[b,x,S]),m):[u(0),u(.5),u(1)]}}return m.range=v(ug),m.rangeRound=v(gM),m.unknown=function(g){return arguments.length?(f=g,m):f},function(g){return d=g,s=g(t),a=g(e),o=g(n),l=s===a?0:.5/(a-s),c=a===o?0:.5/(o-a),r=a<s?-1:1,m}}function Vee(){var t=rd(WS()(Gs));return t.copy=function(){return sd(t,Vee())},Zl.apply(t,arguments)}function Bee(){var t=bM(WS()).domain([.1,1,10]);return t.copy=function(){return sd(t,Bee()).base(t.base())},Zl.apply(t,arguments)}function Uee(){var t=wM(WS());return t.copy=function(){return sd(t,Uee()).constant(t.constant())},Zl.apply(t,arguments)}function RM(){var t=_M(WS());return t.copy=function(){return sd(t,RM()).exponent(t.exponent())},Zl.apply(t,arguments)}function yze(){return RM.apply(null,arguments).exponent(.5)}const q5=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Yv,scaleDiverging:Vee,scaleDivergingLog:Bee,scaleDivergingPow:RM,scaleDivergingSqrt:yze,scaleDivergingSymlog:Uee,scaleIdentity:bee,scaleImplicit:eI,scaleLinear:hj,scaleLog:_ee,scaleOrdinal:fM,scalePoint:qy,scalePow:jM,scaleQuantile:See,scaleQuantize:Eee,scaleRadial:Nee,scaleSequential:Dee,scaleSequentialLog:Lee,scaleSequentialPow:kM,scaleSequentialQuantile:Fee,scaleSequentialSqrt:gze,scaleSequentialSymlog:$ee,scaleSqrt:XUe,scaleSymlog:jee,scaleThreshold:Aee,scaleTime:mze,scaleUtc:pze,tickFormat:xee},Symbol.toStringTag,{value:"Module"}));var vze=eg;function xze(t,e,n){for(var r=-1,s=t.length;++r<s;){var a=t[r],o=e(a);if(o!=null&&(l===void 0?o===o&&!vze(o):n(o,l)))var l=o,c=a}return c}var HS=xze;function bze(t,e){return t>e}var zee=bze,wze=HS,_ze=zee,jze=cg;function Nze(t){return t&&t.length?wze(t,jze,_ze):void 0}var Sze=Nze;const Qc=vn(Sze);function Eze(t,e){return t<e}var qee=Eze,Aze=HS,Tze=qee,Cze=cg;function Pze(t){return t&&t.length?Aze(t,Cze,Tze):void 0}var Ize=Pze;const KS=vn(Ize);var kze=K2,Rze=Zo,Oze=ZJ,Mze=bi;function Dze(t,e){var n=Mze(t)?kze:Oze;return n(t,Rze(e))}var Lze=Dze,$ze=QJ,Fze=Lze;function Vze(t,e){return $ze(Fze(t,e),1)}var Bze=Vze;const Uze=vn(Bze);var zze=lM;function qze(t,e){return zze(t,e)}var Wze=qze;const dp=vn(Wze);var dg=1e9,Hze={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},MM,Qn=!0,ya="[DecimalError] ",ih=ya+"Invalid argument: ",OM=ya+"Exponent out of range: ",hg=Math.floor,Ed=Math.pow,Kze=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ii,Qr=1e7,zn=7,Wee=9007199254740991,gj=hg(Wee/zn),Ze={};Ze.absoluteValue=Ze.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ze.comparedTo=Ze.cmp=function(t){var e,n,r,s,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,s=t.d.length,e=0,n=r<s?r:s;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===s?0:r>s^a.s<0?1:-1};Ze.decimalPlaces=Ze.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*zn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Ze.dividedBy=Ze.div=function(t){return _l(this,new this.constructor(t))};Ze.dividedToIntegerBy=Ze.idiv=function(t){var e=this,n=e.constructor;return Tn(_l(e,new n(t),0,1),n.precision)};Ze.equals=Ze.eq=function(t){return!this.cmp(t)};Ze.exponent=function(){return Ir(this)};Ze.greaterThan=Ze.gt=function(t){return this.cmp(t)>0};Ze.greaterThanOrEqualTo=Ze.gte=function(t){return this.cmp(t)>=0};Ze.isInteger=Ze.isint=function(){return this.e>this.d.length-2};Ze.isNegative=Ze.isneg=function(){return this.s<0};Ze.isPositive=Ze.ispos=function(){return this.s>0};Ze.isZero=function(){return this.s===0};Ze.lessThan=Ze.lt=function(t){return this.cmp(t)<0};Ze.lessThanOrEqualTo=Ze.lte=function(t){return this.cmp(t)<1};Ze.logarithm=Ze.log=function(t){var e,n=this,r=n.constructor,s=r.precision,a=s+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Ii))throw Error(ya+"NaN");if(n.s<1)throw Error(ya+(n.s?"NaN":"-Infinity"));return n.eq(Ii)?new r(0):(Qn=!1,e=_l(ex(n,a),ex(t,a),a),Qn=!0,Tn(e,s))};Ze.minus=Ze.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Gee(e,t):Hee(e,(t.s=-t.s,t))};Ze.modulo=Ze.mod=function(t){var e,n=this,r=n.constructor,s=r.precision;if(t=new r(t),!t.s)throw Error(ya+"NaN");return n.s?(Qn=!1,e=_l(n,t,0,1).times(t),Qn=!0,n.minus(e)):Tn(new r(n),s)};Ze.naturalExponential=Ze.exp=function(){return Kee(this)};Ze.naturalLogarithm=Ze.ln=function(){return ex(this)};Ze.negated=Ze.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ze.plus=Ze.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Hee(e,t):Gee(e,(t.s=-t.s,t))};Ze.precision=Ze.sd=function(t){var e,n,r,s=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ih+t);if(e=Ir(s)+1,r=s.d.length-1,n=r*zn+1,r=s.d[r],r){for(;r%10==0;r/=10)n--;for(r=s.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Ze.squareRoot=Ze.sqrt=function(){var t,e,n,r,s,a,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(ya+"NaN")}for(t=Ir(l),Qn=!1,s=Math.sqrt(+l),s==0||s==1/0?(e=No(l.d),(e.length+t)%2==0&&(e+="0"),s=Math.sqrt(e),t=hg((t+1)/2)-(t<0||t%2),s==1/0?e="5e"+t:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(s.toString()),n=c.precision,s=o=n+3;;)if(a=r,r=a.plus(_l(l,a,o+2)).times(.5),No(a.d).slice(0,o)===(e=No(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),s==o&&e=="4999"){if(Tn(a,n+1,0),a.times(a).eq(l)){r=a;break}}else if(e!="9999")break;o+=4}return Qn=!0,Tn(r,n)};Ze.times=Ze.mul=function(t){var e,n,r,s,a,o,l,c,u,d=this,h=d.constructor,f=d.d,m=(t=new h(t)).d;if(!d.s||!t.s)return new h(0);for(t.s*=d.s,n=d.e+t.e,c=f.length,u=m.length,c<u&&(a=f,f=m,m=a,o=c,c=u,u=o),a=[],o=c+u,r=o;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,s=c+r;s>r;)l=a[s]+m[r]*f[s-r-1]+e,a[s--]=l%Qr|0,e=l/Qr|0;a[s]=(a[s]+e)%Qr|0}for(;!a[--o];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,Qn?Tn(t,h.precision):t};Ze.toDecimalPlaces=Ze.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(qo(t,0,dg),e===void 0?e=r.rounding:qo(e,0,8),Tn(n,t+Ir(n)+1,e))};Ze.toExponential=function(t,e){var n,r=this,s=r.constructor;return t===void 0?n=Dh(r,!0):(qo(t,0,dg),e===void 0?e=s.rounding:qo(e,0,8),r=Tn(new s(r),t+1,e),n=Dh(r,!0,t+1)),n};Ze.toFixed=function(t,e){var n,r,s=this,a=s.constructor;return t===void 0?Dh(s):(qo(t,0,dg),e===void 0?e=a.rounding:qo(e,0,8),r=Tn(new a(s),t+Ir(s)+1,e),n=Dh(r.abs(),!1,t+Ir(r)+1),s.isneg()&&!s.isZero()?"-"+n:n)};Ze.toInteger=Ze.toint=function(){var t=this,e=t.constructor;return Tn(new e(t),Ir(t)+1,e.rounding)};Ze.toNumber=function(){return+this};Ze.toPower=Ze.pow=function(t){var e,n,r,s,a,o,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(Ii);if(l=new c(l),!l.s){if(t.s<1)throw Error(ya+"Infinity");return l}if(l.eq(Ii))return l;if(r=c.precision,t.eq(Ii))return Tn(l,r);if(e=t.e,n=t.d.length-1,o=e>=n,a=l.s,o){if((n=d<0?-d:d)<=Wee){for(s=new c(Ii),e=Math.ceil(r/zn+4),Qn=!1;n%2&&(s=s.times(l),H5(s.d,e)),n=hg(n/2),n!==0;)l=l.times(l),H5(l.d,e);return Qn=!0,t.s<0?new c(Ii).div(s):Tn(s,r)}}else if(a<0)throw Error(ya+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,Qn=!1,s=t.times(ex(l,r+u)),Qn=!0,s=Kee(s),s.s=a,s};Ze.toPrecision=function(t,e){var n,r,s=this,a=s.constructor;return t===void 0?(n=Ir(s),r=Dh(s,n<=a.toExpNeg||n>=a.toExpPos)):(qo(t,1,dg),e===void 0?e=a.rounding:qo(e,0,8),s=Tn(new a(s),t,e),n=Ir(s),r=Dh(s,t<=n||n<=a.toExpNeg,t)),r};Ze.toSignificantDigits=Ze.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(qo(t,1,dg),e===void 0?e=r.rounding:qo(e,0,8)),Tn(new r(n),t,e)};Ze.toString=Ze.valueOf=Ze.val=Ze.toJSON=Ze[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ir(t),n=t.constructor;return Dh(t,e<=n.toExpNeg||e>=n.toExpPos)};function Hee(t,e){var n,r,s,a,o,l,c,u,d=t.constructor,h=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Qn?Tn(e,h):e;if(c=t.d,u=e.d,o=t.e,s=e.e,c=c.slice(),a=o-s,a){for(a<0?(r=c,a=-a,l=u.length):(r=u,s=o,l=c.length),o=Math.ceil(h/zn),l=o>l?o+1:l+1,a>l&&(a=l,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(l=c.length,a=u.length,l-a<0&&(a=l,r=u,u=c,c=r),n=0;a;)n=(c[--a]=c[a]+u[a]+n)/Qr|0,c[a]%=Qr;for(n&&(c.unshift(n),++s),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=s,Qn?Tn(e,h):e}function qo(t,e,n){if(t!==~~t||t<e||t>n)throw Error(ih+t)}function No(t){var e,n,r,s=t.length-1,a="",o=t[0];if(s>0){for(a+=o,e=1;e<s;e++)r=t[e]+"",n=zn-r.length,n&&(a+=Sc(n)),a+=r;o=t[e],r=o+"",n=zn-r.length,n&&(a+=Sc(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var _l=function(){function t(r,s){var a,o=0,l=r.length;for(r=r.slice();l--;)a=r[l]*s+o,r[l]=a%Qr|0,o=a/Qr|0;return o&&r.unshift(o),r}function e(r,s,a,o){var l,c;if(a!=o)c=a>o?1:-1;else for(l=c=0;l<a;l++)if(r[l]!=s[l]){c=r[l]>s[l]?1:-1;break}return c}function n(r,s,a){for(var o=0;a--;)r[a]-=o,o=r[a]<s[a]?1:0,r[a]=o*Qr+r[a]-s[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,a,o){var l,c,u,d,h,f,m,v,g,y,b,x,S,T,_,C,E,p,w=r.constructor,A=r.s==s.s?1:-1,P=r.d,I=s.d;if(!r.s)return new w(r);if(!s.s)throw Error(ya+"Division by zero");for(c=r.e-s.e,E=I.length,_=P.length,m=new w(A),v=m.d=[],u=0;I[u]==(P[u]||0);)++u;if(I[u]>(P[u]||0)&&--c,a==null?x=a=w.precision:o?x=a+(Ir(r)-Ir(s))+1:x=a,x<0)return new w(0);if(x=x/zn+2|0,u=0,E==1)for(d=0,I=I[0],x++;(u<_||d)&&x--;u++)S=d*Qr+(P[u]||0),v[u]=S/I|0,d=S%I|0;else{for(d=Qr/(I[0]+1)|0,d>1&&(I=t(I,d),P=t(P,d),E=I.length,_=P.length),T=E,g=P.slice(0,E),y=g.length;y<E;)g[y++]=0;p=I.slice(),p.unshift(0),C=I[0],I[1]>=Qr/2&&++C;do d=0,l=e(I,g,E,y),l<0?(b=g[0],E!=y&&(b=b*Qr+(g[1]||0)),d=b/C|0,d>1?(d>=Qr&&(d=Qr-1),h=t(I,d),f=h.length,y=g.length,l=e(h,g,f,y),l==1&&(d--,n(h,E<f?p:I,f))):(d==0&&(l=d=1),h=I.slice()),f=h.length,f<y&&h.unshift(0),n(g,h,y),l==-1&&(y=g.length,l=e(I,g,E,y),l<1&&(d++,n(g,E<y?p:I,y))),y=g.length):l===0&&(d++,g=[0]),v[u++]=d,l&&g[0]?g[y++]=P[T]||0:(g=[P[T]],y=1);while((T++<_||g[0]!==void 0)&&x--)}return v[0]||v.shift(),m.e=c,Tn(m,o?a+Ir(m)+1:a)}}();function Kee(t,e){var n,r,s,a,o,l,c=0,u=0,d=t.constructor,h=d.precision;if(Ir(t)>16)throw Error(OM+Ir(t));if(!t.s)return new d(Ii);for(e==null?(Qn=!1,l=h):l=e,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(r=Math.log(Ed(2,u))/Math.LN10*2+5|0,l+=r,n=s=a=new d(Ii),d.precision=l;;){if(s=Tn(s.times(t),l),n=n.times(++c),o=a.plus(_l(s,n,l)),No(o.d).slice(0,l)===No(a.d).slice(0,l)){for(;u--;)a=Tn(a.times(a),l);return d.precision=h,e==null?(Qn=!0,Tn(a,h)):a}a=o}}function Ir(t){for(var e=t.e*zn,n=t.d[0];n>=10;n/=10)e++;return e}function NA(t,e,n){if(e>t.LN10.sd())throw Qn=!0,n&&(t.precision=n),Error(ya+"LN10 precision limit exceeded");return Tn(new t(t.LN10),e)}function Sc(t){for(var e="";t--;)e+="0";return e}function ex(t,e){var n,r,s,a,o,l,c,u,d,h=1,f=10,m=t,v=m.d,g=m.constructor,y=g.precision;if(m.s<1)throw Error(ya+(m.s?"NaN":"-Infinity"));if(m.eq(Ii))return new g(0);if(e==null?(Qn=!1,u=y):u=e,m.eq(10))return e==null&&(Qn=!0),NA(g,u);if(u+=f,g.precision=u,n=No(v),r=n.charAt(0),a=Ir(m),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(t),n=No(m.d),r=n.charAt(0),h++;a=Ir(m),r>1?(m=new g("0."+n),a++):m=new g(r+"."+n.slice(1))}else return c=NA(g,u+2,y).times(a+""),m=ex(new g(r+"."+n.slice(1)),u-f).plus(c),g.precision=y,e==null?(Qn=!0,Tn(m,y)):m;for(l=o=m=_l(m.minus(Ii),m.plus(Ii),u),d=Tn(m.times(m),u),s=3;;){if(o=Tn(o.times(d),u),c=l.plus(_l(o,new g(s),u)),No(c.d).slice(0,u)===No(l.d).slice(0,u))return l=l.times(2),a!==0&&(l=l.plus(NA(g,u+2,y).times(a+""))),l=_l(l,new g(h),u),g.precision=y,e==null?(Qn=!0,Tn(l,y)):l;l=c,s+=2}}function W5(t,e){var n,r,s;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(s=e.length;e.charCodeAt(s-1)===48;)--s;if(e=e.slice(r,s),e){if(s-=r,n=n-r-1,t.e=hg(n/zn),t.d=[],r=(n+1)%zn,n<0&&(r+=zn),r<s){for(r&&t.d.push(+e.slice(0,r)),s-=zn;r<s;)t.d.push(+e.slice(r,r+=zn));e=e.slice(r),r=zn-e.length}else r-=s;for(;r--;)e+="0";if(t.d.push(+e),Qn&&(t.e>gj||t.e<-gj))throw Error(OM+n)}else t.s=0,t.e=0,t.d=[0];return t}function Tn(t,e,n){var r,s,a,o,l,c,u,d,h=t.d;for(o=1,a=h[0];a>=10;a/=10)o++;if(r=e-o,r<0)r+=zn,s=e,u=h[d=0];else{if(d=Math.ceil((r+1)/zn),a=h.length,d>=a)return t;for(u=a=h[d],o=1;a>=10;a/=10)o++;r%=zn,s=r-zn+o}if(n!==void 0&&(a=Ed(10,o-s-1),l=u/a%10|0,c=e<0||h[d+1]!==void 0||u%a,c=n<4?(l||c)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?s>0?u/Ed(10,o-s):0:h[d-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return c?(a=Ir(t),h.length=1,e=e-a-1,h[0]=Ed(10,(zn-e%zn)%zn),t.e=hg(-e/zn)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=d,a=1,d--):(h.length=d+1,a=Ed(10,zn-r),h[d]=s>0?(u/Ed(10,o-s)%Ed(10,s)|0)*a:0),c)for(;;)if(d==0){(h[0]+=a)==Qr&&(h[0]=1,++t.e);break}else{if(h[d]+=a,h[d]!=Qr)break;h[d--]=0,a=1}for(r=h.length;h[--r]===0;)h.pop();if(Qn&&(t.e>gj||t.e<-gj))throw Error(OM+Ir(t));return t}function Gee(t,e){var n,r,s,a,o,l,c,u,d,h,f=t.constructor,m=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),Qn?Tn(e,m):e;if(c=t.d,h=e.d,r=e.e,u=t.e,c=c.slice(),o=u-r,o){for(d=o<0,d?(n=c,o=-o,l=h.length):(n=h,r=u,l=c.length),s=Math.max(Math.ceil(m/zn),l)+2,o>s&&(o=s,n.length=1),n.reverse(),s=o;s--;)n.push(0);n.reverse()}else{for(s=c.length,l=h.length,d=s<l,d&&(l=s),s=0;s<l;s++)if(c[s]!=h[s]){d=c[s]<h[s];break}o=0}for(d&&(n=c,c=h,h=n,e.s=-e.s),l=c.length,s=h.length-l;s>0;--s)c[l++]=0;for(s=h.length;s>o;){if(c[--s]<h[s]){for(a=s;a&&c[--a]===0;)c[a]=Qr-1;--c[a],c[s]+=Qr}c[s]-=h[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,Qn?Tn(e,m):e):new f(0)}function Dh(t,e,n){var r,s=Ir(t),a=No(t.d),o=a.length;return e?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+Sc(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(s<0?"e":"e+")+s):s<0?(a="0."+Sc(-s-1)+a,n&&(r=n-o)>0&&(a+=Sc(r))):s>=o?(a+=Sc(s+1-o),n&&(r=n-s-1)>0&&(a=a+"."+Sc(r))):((r=s+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(s+1===o&&(a+="."),a+=Sc(r))),t.s<0?"-"+a:a}function H5(t,e){if(t.length>e)return t.length=e,!0}function Yee(t){var e,n,r;function s(a){var o=this;if(!(o instanceof s))return new s(a);if(o.constructor=s,a instanceof s){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(ih+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return W5(o,a.toString())}else if(typeof a!="string")throw Error(ih+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,Kze.test(a))W5(o,a);else throw Error(ih+a)}if(s.prototype=Ze,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=Yee,s.config=s.set=Gze,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return s.config(t),s}function Gze(t){if(!t||typeof t!="object")throw Error(ya+"Object expected");var e,n,r,s=["precision",1,dg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<s.length;e+=3)if((r=t[n=s[e]])!==void 0)if(hg(r)===r&&r>=s[e+1]&&r<=s[e+2])this[n]=r;else throw Error(ih+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(ih+n+": "+r);return this}var MM=Yee(Hze);Ii=new MM(1);const Sn=MM;function Yze(t){return Jze(t)||Zze(t)||Xze(t)||Qze()}function Qze(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xze(t,e){if(t){if(typeof t=="string")return sI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sI(t,e)}}function Zze(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Jze(t){if(Array.isArray(t))return sI(t)}function sI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var e9e=function(e){return e},Qee={"@@functional/placeholder":!0},Xee=function(e){return e===Qee},K5=function(e){return function n(){return arguments.length===0||arguments.length===1&&Xee(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},t9e=function t(e,n){return e===1?n:K5(function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];var o=s.filter(function(l){return l!==Qee}).length;return o>=e?n.apply(void 0,s):t(e-o,K5(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=s.map(function(h){return Xee(h)?c.shift():h});return n.apply(void 0,Yze(d).concat(c))}))})},GS=function(e){return t9e(e.length,e)},iI=function(e,n){for(var r=[],s=e;s<n;++s)r[s-e]=s;return r},n9e=GS(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),r9e=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return e9e;var s=n.reverse(),a=s[0],o=s.slice(1);return function(){return o.reduce(function(l,c){return c(l)},a.apply(void 0,arguments))}},aI=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},Zee=function(e){var n=null,r=null;return function(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return n&&a.every(function(l,c){return l===n[c]})||(n=a,r=e.apply(void 0,a)),r}};function s9e(t){var e;return t===0?e=1:e=Math.floor(new Sn(t).abs().log(10).toNumber())+1,e}function i9e(t,e,n){for(var r=new Sn(t),s=0,a=[];r.lt(e)&&s<1e5;)a.push(r.toNumber()),r=r.add(n),s++;return a}var a9e=GS(function(t,e,n){var r=+t,s=+e;return r+n*(s-r)}),o9e=GS(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),l9e=GS(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const YS={rangeStep:i9e,getDigitCount:s9e,interpolateNumber:a9e,uninterpolateNumber:o9e,uninterpolateTruncation:l9e};function oI(t){return d9e(t)||u9e(t)||Jee(t)||c9e()}function c9e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u9e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function d9e(t){if(Array.isArray(t))return lI(t)}function tx(t,e){return m9e(t)||f9e(t,e)||Jee(t,e)||h9e()}function h9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jee(t,e){if(t){if(typeof t=="string")return lI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lI(t,e)}}function lI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f9e(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,s=!1,a=void 0;try{for(var o=t[Symbol.iterator](),l;!(r=(l=o.next()).done)&&(n.push(l.value),!(e&&n.length===e));r=!0);}catch(c){s=!0,a=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(s)throw a}}return n}}function m9e(t){if(Array.isArray(t))return t}function ete(t){var e=tx(t,2),n=e[0],r=e[1],s=n,a=r;return n>r&&(s=r,a=n),[s,a]}function tte(t,e,n){if(t.lte(0))return new Sn(0);var r=YS.getDigitCount(t.toNumber()),s=new Sn(10).pow(r),a=t.div(s),o=r!==1?.05:.1,l=new Sn(Math.ceil(a.div(o).toNumber())).add(n).mul(o),c=l.mul(s);return e?c:new Sn(Math.ceil(c))}function p9e(t,e,n){var r=1,s=new Sn(t);if(!s.isint()&&n){var a=Math.abs(t);a<1?(r=new Sn(10).pow(YS.getDigitCount(t)-1),s=new Sn(Math.floor(s.div(r).toNumber())).mul(r)):a>1&&(s=new Sn(Math.floor(t)))}else t===0?s=new Sn(Math.floor((e-1)/2)):n||(s=new Sn(Math.floor(t)));var o=Math.floor((e-1)/2),l=r9e(n9e(function(c){return s.add(new Sn(c-o).mul(r)).toNumber()}),iI);return l(0,e)}function nte(t,e,n,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Sn(0),tickMin:new Sn(0),tickMax:new Sn(0)};var a=tte(new Sn(e).sub(t).div(n-1),r,s),o;t<=0&&e>=0?o=new Sn(0):(o=new Sn(t).add(e).div(2),o=o.sub(new Sn(o).mod(a)));var l=Math.ceil(o.sub(t).div(a).toNumber()),c=Math.ceil(new Sn(e).sub(o).div(a).toNumber()),u=l+c+1;return u>n?nte(t,e,n,r,s+1):(u<n&&(c=e>0?c+(n-u):c,l=e>0?l:l+(n-u)),{step:a,tickMin:o.sub(new Sn(l).mul(a)),tickMax:o.add(new Sn(c).mul(a))})}function g9e(t){var e=tx(t,2),n=e[0],r=e[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=ete([n,r]),c=tx(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var h=d===1/0?[u].concat(oI(iI(0,s-1).map(function(){return 1/0}))):[].concat(oI(iI(0,s-1).map(function(){return-1/0})),[d]);return n>r?aI(h):h}if(u===d)return p9e(u,s,a);var f=nte(u,d,o,a),m=f.step,v=f.tickMin,g=f.tickMax,y=YS.rangeStep(v,g.add(new Sn(.1).mul(m)),m);return n>r?aI(y):y}function y9e(t,e){var n=tx(t,2),r=n[0],s=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=ete([r,s]),l=tx(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[r,s];if(c===u)return[c];var d=Math.max(e,2),h=tte(new Sn(u).sub(c).div(d-1),a,0),f=[].concat(oI(YS.rangeStep(new Sn(c),new Sn(u).sub(new Sn(.99).mul(h)),h)),[u]);return r>s?aI(f):f}var v9e=Zee(g9e),x9e=Zee(y9e),b9e="Invariant failed";function Lh(t,e){throw new Error(b9e)}var w9e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function hp(t){"@babel/helpers - typeof";return hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hp(t)}function yj(){return yj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yj.apply(this,arguments)}function _9e(t,e){return E9e(t)||S9e(t,e)||N9e(t,e)||j9e()}function j9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N9e(t,e){if(t){if(typeof t=="string")return G5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G5(t,e)}}function G5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function S9e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function E9e(t){if(Array.isArray(t))return t}function A9e(t,e){if(t==null)return{};var n=T9e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function T9e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function C9e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P9e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ite(r.key),r)}}function I9e(t,e,n){return e&&P9e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function k9e(t,e,n){return e=vj(e),R9e(t,rte()?Reflect.construct(e,n||[],vj(t).constructor):e.apply(t,n))}function R9e(t,e){if(e&&(hp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O9e(t)}function O9e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rte=function(){return!!t})()}function vj(t){return vj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vj(t)}function M9e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cI(t,e)}function cI(t,e){return cI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},cI(t,e)}function ste(t,e,n){return e=ite(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ite(t){var e=D9e(t,"string");return hp(e)=="symbol"?e:e+""}function D9e(t,e){if(hp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(hp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var QS=function(t){function e(){return C9e(this,e),k9e(this,e,arguments)}return M9e(e,t),I9e(e,[{key:"render",value:function(){var r=this.props,s=r.offset,a=r.layout,o=r.width,l=r.dataKey,c=r.data,u=r.dataPointFormatter,d=r.xAxis,h=r.yAxis,f=A9e(r,w9e),m=pt(f,!1);this.props.direction==="x"&&d.type!=="number"&&Lh();var v=c.map(function(g){var y=u(g,l),b=y.x,x=y.y,S=y.value,T=y.errorVal;if(!T)return null;var _=[],C,E;if(Array.isArray(T)){var p=_9e(T,2);C=p[0],E=p[1]}else C=E=T;if(a==="vertical"){var w=d.scale,A=x+s,P=A+o,I=A-o,k=w(S-C),L=w(S+E);_.push({x1:L,y1:P,x2:L,y2:I}),_.push({x1:k,y1:A,x2:L,y2:A}),_.push({x1:k,y1:P,x2:k,y2:I})}else if(a==="horizontal"){var U=h.scale,z=b+s,O=z-o,$=z+o,D=U(S-C),K=U(S+E);_.push({x1:O,y1:K,x2:$,y2:K}),_.push({x1:z,y1:D,x2:z,y2:K}),_.push({x1:O,y1:D,x2:$,y2:D})}return F.createElement(rn,yj({className:"recharts-errorBar",key:"bar-".concat(_.map(function(ie){return"".concat(ie.x1,"-").concat(ie.x2,"-").concat(ie.y1,"-").concat(ie.y2)}))},m),_.map(function(ie){return F.createElement("line",yj({},ie,{key:"line-".concat(ie.x1,"-").concat(ie.x2,"-").concat(ie.y1,"-").concat(ie.y2)}))}))});return F.createElement(rn,{className:"recharts-errorBars"},v)}}])}(F.Component);ste(QS,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});ste(QS,"displayName","ErrorBar");function nx(t){"@babel/helpers - typeof";return nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nx(t)}function Y5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function pd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y5(Object(n),!0).forEach(function(r){L9e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function L9e(t,e,n){return e=$9e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $9e(t){var e=F9e(t,"string");return nx(e)=="symbol"?e:e+""}function F9e(t,e){if(nx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(nx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ate=function(e){var n=e.children,r=e.formattedGraphicalItems,s=e.legendWidth,a=e.legendContent,o=Ai(n,mm);if(!o)return null;var l=mm.defaultProps,c=l!==void 0?pd(pd({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:a==="children"?u=(r||[]).reduce(function(d,h){var f=h.item,m=h.props,v=m.sectors||m.data||[];return d.concat(v.map(function(g){return{type:o.props.iconType||f.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):u=(r||[]).map(function(d){var h=d.item,f=h.type.defaultProps,m=f!==void 0?pd(pd({},f),h.props):{},v=m.dataKey,g=m.name,y=m.legendType,b=m.hide;return{inactive:b,dataKey:v,type:c.iconType||y||"square",color:DM(h),value:g||v,payload:m}}),pd(pd(pd({},c),mm.getWithHeight(o,s)),{},{payload:u,item:o})};function rx(t){"@babel/helpers - typeof";return rx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rx(t)}function Q5(t){return z9e(t)||U9e(t)||B9e(t)||V9e()}function V9e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B9e(t,e){if(t){if(typeof t=="string")return uI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uI(t,e)}}function U9e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function z9e(t){if(Array.isArray(t))return uI(t)}function uI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function X5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function cr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?X5(Object(n),!0).forEach(function(r){gm(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gm(t,e,n){return e=q9e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q9e(t){var e=W9e(t,"string");return rx(e)=="symbol"?e:e+""}function W9e(t,e){if(rx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(rx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vr(t,e,n){return Ft(t)||Ft(e)?n:zr(e)?$i(t,e,n):_t(e)?e(t):n}function Wy(t,e,n,r){var s=Uze(t,function(l){return Vr(l,e)});if(n==="number"){var a=s.filter(function(l){return Ee(l)||parseFloat(l)});return a.length?[KS(a),Qc(a)]:[1/0,-1/0]}var o=r?s.filter(function(l){return!Ft(l)}):s;return o.map(function(l){return zr(l)||l instanceof Date?l:""})}var H9e=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var c=a.range,u=0;u<l;u++){var d=u>0?s[u-1].coordinate:s[l-1].coordinate,h=s[u].coordinate,f=u>=l-1?s[0].coordinate:s[u+1].coordinate,m=void 0;if(Hs(h-d)!==Hs(f-h)){var v=[];if(Hs(f-h)===Hs(c[1]-c[0])){m=f;var g=h+c[1]-c[0];v[0]=Math.min(g,(g+d)/2),v[1]=Math.max(g,(g+d)/2)}else{m=d;var y=f+c[1]-c[0];v[0]=Math.min(h,(y+h)/2),v[1]=Math.max(h,(y+h)/2)}var b=[Math.min(h,(m+h)/2),Math.max(h,(m+h)/2)];if(e>b[0]&&e<=b[1]||e>=v[0]&&e<=v[1]){o=s[u].index;break}}else{var x=Math.min(d,f),S=Math.max(d,f);if(e>(x+h)/2&&e<=(S+h)/2){o=s[u].index;break}}}else for(var T=0;T<l;T++)if(T===0&&e<=(r[T].coordinate+r[T+1].coordinate)/2||T>0&&T<l-1&&e>(r[T].coordinate+r[T-1].coordinate)/2&&e<=(r[T].coordinate+r[T+1].coordinate)/2||T===l-1&&e>(r[T].coordinate+r[T-1].coordinate)/2){o=r[T].index;break}return o},DM=function(e){var n,r=e,s=r.type.displayName,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?cr(cr({},e.type.defaultProps),e.props):e.props,o=a.stroke,l=a.fill,c;switch(s){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},K9e=function(e){var n=e.barSize,r=e.totalSize,s=e.stackGroups,a=s===void 0?{}:s;if(!a)return{};for(var o={},l=Object.keys(a),c=0,u=l.length;c<u;c++)for(var d=a[l[c]].stackGroups,h=Object.keys(d),f=0,m=h.length;f<m;f++){var v=d[h[f]],g=v.items,y=v.cateAxisId,b=g.filter(function(E){return wl(E.type).indexOf("Bar")>=0});if(b&&b.length){var x=b[0].type.defaultProps,S=x!==void 0?cr(cr({},x),b[0].props):b[0].props,T=S.barSize,_=S[y];o[_]||(o[_]=[]);var C=Ft(T)?n:T;o[_].push({item:b[0],stackList:b.slice(1),barSize:Ft(C)?void 0:Ks(C,r,0)})}}return o},G9e=function(e){var n=e.barGap,r=e.barCategoryGap,s=e.bandSize,a=e.sizeList,o=a===void 0?[]:a,l=e.maxBarSize,c=o.length;if(c<1)return null;var u=Ks(n,s,0,!0),d,h=[];if(o[0].barSize===+o[0].barSize){var f=!1,m=s/c,v=o.reduce(function(T,_){return T+_.barSize||0},0);v+=(c-1)*u,v>=s&&(v-=(c-1)*u,u=0),v>=s&&m>0&&(f=!0,m*=.9,v=c*m);var g=(s-v)/2>>0,y={offset:g-u,size:0};d=o.reduce(function(T,_){var C={item:_.item,position:{offset:y.offset+y.size+u,size:f?m:_.barSize}},E=[].concat(Q5(T),[C]);return y=E[E.length-1].position,_.stackList&&_.stackList.length&&_.stackList.forEach(function(p){E.push({item:p,position:y})}),E},h)}else{var b=Ks(r,s,0,!0);s-2*b-(c-1)*u<=0&&(u=0);var x=(s-2*b-(c-1)*u)/c;x>1&&(x>>=0);var S=l===+l?Math.min(x,l):x;d=o.reduce(function(T,_,C){var E=[].concat(Q5(T),[{item:_.item,position:{offset:b+(x+u)*C+(x-S)/2,size:S}}]);return _.stackList&&_.stackList.length&&_.stackList.forEach(function(p){E.push({item:p,position:E[E.length-1].position})}),E},h)}return d},Y9e=function(e,n,r,s){var a=r.children,o=r.width,l=r.margin,c=o-(l.left||0)-(l.right||0),u=ate({children:a,legendWidth:c});if(u){var d=s||{},h=d.width,f=d.height,m=u.align,v=u.verticalAlign,g=u.layout;if((g==="vertical"||g==="horizontal"&&v==="middle")&&m!=="center"&&Ee(e[m]))return cr(cr({},e),{},gm({},m,e[m]+(h||0)));if((g==="horizontal"||g==="vertical"&&m==="center")&&v!=="middle"&&Ee(e[v]))return cr(cr({},e),{},gm({},v,e[v]+(f||0)))}return e},Q9e=function(e,n,r){return Ft(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},ote=function(e,n,r,s,a){var o=n.props.children,l=ua(o,QS).filter(function(u){return Q9e(s,a,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var h=Vr(d,r);if(Ft(h))return u;var f=Array.isArray(h)?[KS(h),Qc(h)]:[h,h],m=c.reduce(function(v,g){var y=Vr(d,g,0),b=f[0]-Math.abs(Array.isArray(y)?y[0]:y),x=f[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(b,v[0]),Math.max(x,v[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},X9e=function(e,n,r,s,a){var o=n.map(function(l){return ote(e,l,r,a,s)}).filter(function(l){return!Ft(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},lte=function(e,n,r,s,a){var o=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&ote(e,c,u,s)||Wy(e,u,r,a)});if(r==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,h=u.length;d<h;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},cte=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},ute=function(e,n,r,s){if(s)return e.map(function(c){return c.coordinate});var a,o,l=e.map(function(c){return c.coordinate===n&&(a=!0),c.coordinate===r&&(o=!0),c.coordinate});return a||l.push(n),o||l.push(r),l},yl=function(e,n,r){if(!e)return null;var s=e.scale,a=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?s.bandwidth()/2:2,u=(n||r)&&o==="category"&&s.bandwidth?s.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Hs(l[0]-l[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(h){var f=a?a.indexOf(h):h;return{coordinate:s(f)+u,value:h,offset:u}});return d.filter(function(h){return!ig(h.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(h,f){return{coordinate:s(h)+u,value:h,index:f,offset:u}}):s.ticks&&!r?s.ticks(e.tickCount).map(function(h){return{coordinate:s(h)+u,value:h,offset:u}}):s.domain().map(function(h,f){return{coordinate:s(h)+u,value:a?a[h]:h,index:f,offset:u}})},SA=new WeakMap,C0=function(e,n){if(typeof n!="function")return e;SA.has(e)||SA.set(e,new WeakMap);var r=SA.get(e);if(r.has(n))return r.get(n);var s=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,s),s},dte=function(e,n,r){var s=e.scale,a=e.type,o=e.layout,l=e.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Yv(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:hj(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:qy(),realScaleType:"point"}:a==="category"?{scale:Yv(),realScaleType:"band"}:{scale:hj(),realScaleType:"linear"};if(Rh(s)){var c="scale".concat(kS(s));return{scale:(q5[c]||qy)(),realScaleType:q5[c]?c:"point"}}return _t(s)?{scale:s}:{scale:qy(),realScaleType:"point"}},Z5=1e-4,hte=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,s=e.range(),a=Math.min(s[0],s[1])-Z5,o=Math.max(s[0],s[1])+Z5,l=e(n[0]),c=e(n[r-1]);(l<a||l>o||c<a||c>o)&&e.domain([n[0],n[r-1]])}},Z9e=function(e,n){if(!e)return null;for(var r=0,s=e.length;r<s;r++)if(e[r].item===n)return e[r].position;return null},J9e=function(e,n){if(!n||n.length!==2||!Ee(n[0])||!Ee(n[1]))return e;var r=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]),a=[e[0],e[1]];return(!Ee(e[0])||e[0]<r)&&(a[0]=r),(!Ee(e[1])||e[1]>s)&&(a[1]=s),a[0]>s&&(a[0]=s),a[1]<r&&(a[1]=r),a},eqe=function(e){var n=e.length;if(!(n<=0))for(var r=0,s=e[0].length;r<s;++r)for(var a=0,o=0,l=0;l<n;++l){var c=ig(e[l][r][1])?e[l][r][0]:e[l][r][1];c>=0?(e[l][r][0]=a,e[l][r][1]=a+c,a=e[l][r][1]):(e[l][r][0]=o,e[l][r][1]=o+c,o=e[l][r][1])}},tqe=function(e){var n=e.length;if(!(n<=0))for(var r=0,s=e[0].length;r<s;++r)for(var a=0,o=0;o<n;++o){var l=ig(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},nqe={sign:eqe,expand:wMe,none:rp,silhouette:_Me,wiggle:jMe,positive:tqe},rqe=function(e,n,r){var s=n.map(function(l){return l.props.dataKey}),a=nqe[r],o=bMe().keys(s).value(function(l,c){return+Vr(l,c,0)}).order(MP).offset(a);return o(e)},sqe=function(e,n,r,s,a,o){if(!e)return null;var l=o?n.reverse():n,c={},u=l.reduce(function(h,f){var m,v=(m=f.type)!==null&&m!==void 0&&m.defaultProps?cr(cr({},f.type.defaultProps),f.props):f.props,g=v.stackId,y=v.hide;if(y)return h;var b=v[r],x=h[b]||{hasStack:!1,stackGroups:{}};if(zr(g)){var S=x.stackGroups[g]||{numericAxisId:r,cateAxisId:s,items:[]};S.items.push(f),x.hasStack=!0,x.stackGroups[g]=S}else x.stackGroups[ag("_stackId_")]={numericAxisId:r,cateAxisId:s,items:[f]};return cr(cr({},h),{},gm({},b,x))},c),d={};return Object.keys(u).reduce(function(h,f){var m=u[f];if(m.hasStack){var v={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(g,y){var b=m.stackGroups[y];return cr(cr({},g),{},gm({},y,{numericAxisId:r,cateAxisId:s,items:b.items,stackedData:rqe(e,b.items,a)}))},v)}return cr(cr({},h),{},gm({},f,m))},d)},fte=function(e,n){var r=n.realScaleType,s=n.type,a=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(a&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=v9e(u,a,l);return e.domain([KS(d),Qc(d)]),{niceTicks:d}}if(a&&s==="number"){var h=e.domain(),f=x9e(h,a,l);return{niceTicks:f}}return null};function J5(t){var e=t.axis,n=t.ticks,r=t.bandSize,s=t.entry,a=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Ft(s[e.dataKey])){var l=W_(n,"value",s[e.dataKey]);if(l)return l.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var c=Vr(s,Ft(o)?e.dataKey:o);return Ft(c)?null:e.scale(c)}var eU=function(e){var n=e.axis,r=e.ticks,s=e.offset,a=e.bandSize,o=e.entry,l=e.index;if(n.type==="category")return r[l]?r[l].coordinate+s:null;var c=Vr(o,n.dataKey,n.domain[l]);return Ft(c)?null:n.scale(c)-a/2+s},iqe=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var s=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return s<=0&&a>=0?0:a<0?a:s}return r[0]},aqe=function(e,n){var r,s=(r=e.type)!==null&&r!==void 0&&r.defaultProps?cr(cr({},e.type.defaultProps),e.props):e.props,a=s.stackId;if(zr(a)){var o=n[a];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},oqe=function(e){return e.reduce(function(n,r){return[KS(r.concat([n[0]]).filter(Ee)),Qc(r.concat([n[1]]).filter(Ee))]},[1/0,-1/0])},mte=function(e,n,r){return Object.keys(e).reduce(function(s,a){var o=e[a],l=o.stackedData,c=l.reduce(function(u,d){var h=oqe(d.slice(n,r+1));return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},tU=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,nU=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,dI=function(e,n,r){if(_t(e))return e(n,r);if(!Array.isArray(e))return n;var s=[];if(Ee(e[0]))s[0]=r?e[0]:Math.min(e[0],n[0]);else if(tU.test(e[0])){var a=+tU.exec(e[0])[1];s[0]=n[0]-a}else _t(e[0])?s[0]=e[0](n[0]):s[0]=n[0];if(Ee(e[1]))s[1]=r?e[1]:Math.max(e[1],n[1]);else if(nU.test(e[1])){var o=+nU.exec(e[1])[1];s[1]=n[1]+o}else _t(e[1])?s[1]=e[1](n[1]):s[1]=n[1];return s},xj=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!r||s>0)return s}if(e&&n&&n.length>=2){for(var a=uM(n,function(h){return h.coordinate}),o=1/0,l=1,c=a.length;l<c;l++){var u=a[l],d=a[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},rU=function(e,n,r){return!e||!e.length||dp(e,$i(r,"type.defaultProps.domain"))?n:e},pte=function(e,n){var r=e.type.defaultProps?cr(cr({},e.type.defaultProps),e.props):e.props,s=r.dataKey,a=r.name,o=r.unit,l=r.formatter,c=r.tooltipType,u=r.chartType,d=r.hide;return cr(cr({},pt(e,!1)),{},{dataKey:s,unit:o,formatter:l,name:a||s,color:DM(e),value:Vr(n,s),type:c,payload:n,chartType:u,hide:d})};function sx(t){"@babel/helpers - typeof";return sx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sx(t)}function sU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function il(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sU(Object(n),!0).forEach(function(r){gte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gte(t,e,n){return e=lqe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lqe(t){var e=cqe(t,"string");return sx(e)=="symbol"?e:e+""}function cqe(t,e){if(sx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(sx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uqe(t,e){return mqe(t)||fqe(t,e)||hqe(t,e)||dqe()}function dqe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hqe(t,e){if(t){if(typeof t=="string")return iU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iU(t,e)}}function iU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function fqe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function mqe(t){if(Array.isArray(t))return t}var bj=Math.PI/180,pqe=function(e){return e*180/Math.PI},Ln=function(e,n,r,s){return{x:e+Math.cos(-bj*s)*r,y:n+Math.sin(-bj*s)*r}},yte=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},gqe=function(e,n,r,s,a){var o=e.width,l=e.height,c=e.startAngle,u=e.endAngle,d=Ks(e.cx,o,o/2),h=Ks(e.cy,l,l/2),f=yte(o,l,r),m=Ks(e.innerRadius,f,0),v=Ks(e.outerRadius,f,f*.8),g=Object.keys(n);return g.reduce(function(y,b){var x=n[b],S=x.domain,T=x.reversed,_;if(Ft(x.range))s==="angleAxis"?_=[c,u]:s==="radiusAxis"&&(_=[m,v]),T&&(_=[_[1],_[0]]);else{_=x.range;var C=_,E=uqe(C,2);c=E[0],u=E[1]}var p=dte(x,a),w=p.realScaleType,A=p.scale;A.domain(S).range(_),hte(A);var P=fte(A,il(il({},x),{},{realScaleType:w})),I=il(il(il({},x),P),{},{range:_,radius:v,realScaleType:w,scale:A,cx:d,cy:h,innerRadius:m,outerRadius:v,startAngle:c,endAngle:u});return il(il({},y),{},gte({},b,I))},{})},yqe=function(e,n){var r=e.x,s=e.y,a=n.x,o=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(s-o,2))},vqe=function(e,n){var r=e.x,s=e.y,a=n.cx,o=n.cy,l=yqe({x:r,y:s},{x:a,y:o});if(l<=0)return{radius:l};var c=(r-a)/l,u=Math.acos(c);return s>o&&(u=2*Math.PI-u),{radius:l,angle:pqe(u),angleInRadian:u}},xqe=function(e){var n=e.startAngle,r=e.endAngle,s=Math.floor(n/360),a=Math.floor(r/360),o=Math.min(s,a);return{startAngle:n-o*360,endAngle:r-o*360}},bqe=function(e,n){var r=n.startAngle,s=n.endAngle,a=Math.floor(r/360),o=Math.floor(s/360),l=Math.min(a,o);return e+l*360},aU=function(e,n){var r=e.x,s=e.y,a=vqe({x:r,y:s},n),o=a.radius,l=a.angle,c=n.innerRadius,u=n.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=xqe(n),h=d.startAngle,f=d.endAngle,m=l,v;if(h<=f){for(;m>f;)m-=360;for(;m<h;)m+=360;v=m>=h&&m<=f}else{for(;m>h;)m-=360;for(;m<f;)m+=360;v=m>=f&&m<=h}return v?il(il({},n),{},{radius:o,angle:bqe(m,n)}):null},vte=function(e){return!N.isValidElement(e)&&!_t(e)&&typeof e!="boolean"?e.className:""};function ix(t){"@babel/helpers - typeof";return ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ix(t)}var wqe=["offset"];function _qe(t){return Eqe(t)||Sqe(t)||Nqe(t)||jqe()}function jqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nqe(t,e){if(t){if(typeof t=="string")return hI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hI(t,e)}}function Sqe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Eqe(t){if(Array.isArray(t))return hI(t)}function hI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Aqe(t,e){if(t==null)return{};var n=Tqe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Tqe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function oU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Mr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oU(Object(n),!0).forEach(function(r){Cqe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cqe(t,e,n){return e=Pqe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pqe(t){var e=Iqe(t,"string");return ix(e)=="symbol"?e:e+""}function Iqe(t,e){if(ix(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ix(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ax(){return ax=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ax.apply(this,arguments)}var kqe=function(e){var n=e.value,r=e.formatter,s=Ft(e.children)?n:e.children;return _t(r)?r(s):s},Rqe=function(e,n){var r=Hs(n-e),s=Math.min(Math.abs(n-e),360);return r*s},Oqe=function(e,n,r){var s=e.position,a=e.viewBox,o=e.offset,l=e.className,c=a,u=c.cx,d=c.cy,h=c.innerRadius,f=c.outerRadius,m=c.startAngle,v=c.endAngle,g=c.clockWise,y=(h+f)/2,b=Rqe(m,v),x=b>=0?1:-1,S,T;s==="insideStart"?(S=m+x*o,T=g):s==="insideEnd"?(S=v-x*o,T=!g):s==="end"&&(S=v+x*o,T=g),T=b<=0?T:!T;var _=Ln(u,d,y,S),C=Ln(u,d,y,S+(T?1:-1)*359),E="M".concat(_.x,",").concat(_.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(T?0:1,`,
    `).concat(C.x,",").concat(C.y),p=Ft(e.id)?ag("recharts-radial-line-"):e.id;return F.createElement("text",ax({},r,{dominantBaseline:"central",className:$t("recharts-radial-bar-label",l)}),F.createElement("defs",null,F.createElement("path",{id:p,d:E})),F.createElement("textPath",{xlinkHref:"#".concat(p)},n))},Mqe=function(e){var n=e.viewBox,r=e.offset,s=e.position,a=n,o=a.cx,l=a.cy,c=a.innerRadius,u=a.outerRadius,d=a.startAngle,h=a.endAngle,f=(d+h)/2;if(s==="outside"){var m=Ln(o,l,u+r,f),v=m.x,g=m.y;return{x:v,y:g,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var y=(c+u)/2,b=Ln(o,l,y,f),x=b.x,S=b.y;return{x,y:S,textAnchor:"middle",verticalAnchor:"middle"}},Dqe=function(e){var n=e.viewBox,r=e.parentViewBox,s=e.offset,a=e.position,o=n,l=o.x,c=o.y,u=o.width,d=o.height,h=d>=0?1:-1,f=h*s,m=h>0?"end":"start",v=h>0?"start":"end",g=u>=0?1:-1,y=g*s,b=g>0?"end":"start",x=g>0?"start":"end";if(a==="top"){var S={x:l+u/2,y:c-h*s,textAnchor:"middle",verticalAnchor:m};return Mr(Mr({},S),r?{height:Math.max(c-r.y,0),width:u}:{})}if(a==="bottom"){var T={x:l+u/2,y:c+d+f,textAnchor:"middle",verticalAnchor:v};return Mr(Mr({},T),r?{height:Math.max(r.y+r.height-(c+d),0),width:u}:{})}if(a==="left"){var _={x:l-y,y:c+d/2,textAnchor:b,verticalAnchor:"middle"};return Mr(Mr({},_),r?{width:Math.max(_.x-r.x,0),height:d}:{})}if(a==="right"){var C={x:l+u+y,y:c+d/2,textAnchor:x,verticalAnchor:"middle"};return Mr(Mr({},C),r?{width:Math.max(r.x+r.width-C.x,0),height:d}:{})}var E=r?{width:u,height:d}:{};return a==="insideLeft"?Mr({x:l+y,y:c+d/2,textAnchor:x,verticalAnchor:"middle"},E):a==="insideRight"?Mr({x:l+u-y,y:c+d/2,textAnchor:b,verticalAnchor:"middle"},E):a==="insideTop"?Mr({x:l+u/2,y:c+f,textAnchor:"middle",verticalAnchor:v},E):a==="insideBottom"?Mr({x:l+u/2,y:c+d-f,textAnchor:"middle",verticalAnchor:m},E):a==="insideTopLeft"?Mr({x:l+y,y:c+f,textAnchor:x,verticalAnchor:v},E):a==="insideTopRight"?Mr({x:l+u-y,y:c+f,textAnchor:b,verticalAnchor:v},E):a==="insideBottomLeft"?Mr({x:l+y,y:c+d-f,textAnchor:x,verticalAnchor:m},E):a==="insideBottomRight"?Mr({x:l+u-y,y:c+d-f,textAnchor:b,verticalAnchor:m},E):tg(a)&&(Ee(a.x)||Ld(a.x))&&(Ee(a.y)||Ld(a.y))?Mr({x:l+Ks(a.x,u),y:c+Ks(a.y,d),textAnchor:"end",verticalAnchor:"end"},E):Mr({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},E)},Lqe=function(e){return"cx"in e&&Ee(e.cx)};function Zr(t){var e=t.offset,n=e===void 0?5:e,r=Aqe(t,wqe),s=Mr({offset:n},r),a=s.viewBox,o=s.position,l=s.value,c=s.children,u=s.content,d=s.className,h=d===void 0?"":d,f=s.textBreakAll;if(!a||Ft(l)&&Ft(c)&&!N.isValidElement(u)&&!_t(u))return null;if(N.isValidElement(u))return N.cloneElement(u,s);var m;if(_t(u)){if(m=N.createElement(u,s),N.isValidElement(m))return m}else m=kqe(s);var v=Lqe(a),g=pt(s,!0);if(v&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Oqe(s,m,g);var y=v?Mqe(s):Dqe(s);return F.createElement(Mh,ax({className:$t("recharts-label",h)},g,y,{breakAll:f}),m)}Zr.displayName="Label";var xte=function(e){var n=e.cx,r=e.cy,s=e.angle,a=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,u=e.innerRadius,d=e.outerRadius,h=e.x,f=e.y,m=e.top,v=e.left,g=e.width,y=e.height,b=e.clockWise,x=e.labelViewBox;if(x)return x;if(Ee(g)&&Ee(y)){if(Ee(h)&&Ee(f))return{x:h,y:f,width:g,height:y};if(Ee(m)&&Ee(v))return{x:m,y:v,width:g,height:y}}return Ee(h)&&Ee(f)?{x:h,y:f,width:0,height:0}:Ee(n)&&Ee(r)?{cx:n,cy:r,startAngle:a||s||0,endAngle:o||s||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:b}:e.viewBox?e.viewBox:{}},$qe=function(e,n){return e?e===!0?F.createElement(Zr,{key:"label-implicit",viewBox:n}):zr(e)?F.createElement(Zr,{key:"label-implicit",viewBox:n,value:e}):N.isValidElement(e)?e.type===Zr?N.cloneElement(e,{key:"label-implicit",viewBox:n}):F.createElement(Zr,{key:"label-implicit",content:e,viewBox:n}):_t(e)?F.createElement(Zr,{key:"label-implicit",content:e,viewBox:n}):tg(e)?F.createElement(Zr,ax({viewBox:n},e,{key:"label-implicit"})):null:null},Fqe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var s=e.children,a=xte(e),o=ua(s,Zr).map(function(c,u){return N.cloneElement(c,{viewBox:n||a,key:"label-".concat(u)})});if(!r)return o;var l=$qe(e.label,n||a);return[l].concat(_qe(o))};Zr.parseViewBox=xte;Zr.renderCallByParent=Fqe;function Vqe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Bqe=Vqe;const Uqe=vn(Bqe);function ox(t){"@babel/helpers - typeof";return ox=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ox(t)}var zqe=["valueAccessor"],qqe=["data","dataKey","clockWise","id","textBreakAll"];function Wqe(t){return Yqe(t)||Gqe(t)||Kqe(t)||Hqe()}function Hqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kqe(t,e){if(t){if(typeof t=="string")return fI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fI(t,e)}}function Gqe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Yqe(t){if(Array.isArray(t))return fI(t)}function fI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wj(){return wj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wj.apply(this,arguments)}function lU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function cU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lU(Object(n),!0).forEach(function(r){Qqe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qqe(t,e,n){return e=Xqe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xqe(t){var e=Zqe(t,"string");return ox(e)=="symbol"?e:e+""}function Zqe(t,e){if(ox(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ox(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uU(t,e){if(t==null)return{};var n=Jqe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Jqe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var e8e=function(e){return Array.isArray(e.value)?Uqe(e.value):e.value};function jl(t){var e=t.valueAccessor,n=e===void 0?e8e:e,r=uU(t,zqe),s=r.data,a=r.dataKey,o=r.clockWise,l=r.id,c=r.textBreakAll,u=uU(r,qqe);return!s||!s.length?null:F.createElement(rn,{className:"recharts-label-list"},s.map(function(d,h){var f=Ft(a)?n(d,h):Vr(d&&d.payload,a),m=Ft(l)?{}:{id:"".concat(l,"-").concat(h)};return F.createElement(Zr,wj({},pt(d,!0),u,m,{parentViewBox:d.parentViewBox,value:f,textBreakAll:c,viewBox:Zr.parseViewBox(Ft(o)?d:cU(cU({},d),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}jl.displayName="LabelList";function t8e(t,e){return t?t===!0?F.createElement(jl,{key:"labelList-implicit",data:e}):F.isValidElement(t)||_t(t)?F.createElement(jl,{key:"labelList-implicit",data:e,content:t}):tg(t)?F.createElement(jl,wj({data:e},t,{key:"labelList-implicit"})):null:null}function n8e(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,s=ua(r,jl).map(function(o,l){return N.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!n)return s;var a=t8e(t.label,e);return[a].concat(Wqe(s))}jl.renderCallByParent=n8e;function lx(t){"@babel/helpers - typeof";return lx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lx(t)}function mI(){return mI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mI.apply(this,arguments)}function dU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function hU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dU(Object(n),!0).forEach(function(r){r8e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function r8e(t,e,n){return e=s8e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s8e(t){var e=i8e(t,"string");return lx(e)=="symbol"?e:e+""}function i8e(t,e){if(lx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(lx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var a8e=function(e,n){var r=Hs(n-e),s=Math.min(Math.abs(n-e),359.999);return r*s},P0=function(e){var n=e.cx,r=e.cy,s=e.radius,a=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,d=c*(l?1:-1)+s,h=Math.asin(c/d)/bj,f=u?a:a+o*h,m=Ln(n,r,d,f),v=Ln(n,r,s,f),g=u?a-o*h:a,y=Ln(n,r,d*Math.cos(h*bj),g);return{center:m,circleTangency:v,lineTangency:y,theta:h}},bte=function(e){var n=e.cx,r=e.cy,s=e.innerRadius,a=e.outerRadius,o=e.startAngle,l=e.endAngle,c=a8e(o,l),u=o+c,d=Ln(n,r,a,o),h=Ln(n,r,a,u),f="M ".concat(d.x,",").concat(d.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(s>0){var m=Ln(n,r,s,o),v=Ln(n,r,s,u);f+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else f+="L ".concat(n,",").concat(r," Z");return f},o8e=function(e){var n=e.cx,r=e.cy,s=e.innerRadius,a=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,h=Hs(d-u),f=P0({cx:n,cy:r,radius:a,angle:u,sign:h,cornerRadius:o,cornerIsExternal:c}),m=f.circleTangency,v=f.lineTangency,g=f.theta,y=P0({cx:n,cy:r,radius:a,angle:d,sign:-h,cornerRadius:o,cornerIsExternal:c}),b=y.circleTangency,x=y.lineTangency,S=y.theta,T=c?Math.abs(u-d):Math.abs(u-d)-g-S;if(T<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):bte({cx:n,cy:r,innerRadius:s,outerRadius:a,startAngle:u,endAngle:d});var _="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(T>180),",").concat(+(h<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(x.x,",").concat(x.y,`
  `);if(s>0){var C=P0({cx:n,cy:r,radius:s,angle:u,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),E=C.circleTangency,p=C.lineTangency,w=C.theta,A=P0({cx:n,cy:r,radius:s,angle:d,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),P=A.circleTangency,I=A.lineTangency,k=A.theta,L=c?Math.abs(u-d):Math.abs(u-d)-w-k;if(L<0&&o===0)return"".concat(_,"L").concat(n,",").concat(r,"Z");_+="L".concat(I.x,",").concat(I.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(L>180),",").concat(+(h>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(p.x,",").concat(p.y,"Z")}else _+="L".concat(n,",").concat(r,"Z");return _},l8e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},wte=function(e){var n=hU(hU({},l8e),e),r=n.cx,s=n.cy,a=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,h=n.endAngle,f=n.className;if(o<a||d===h)return null;var m=$t("recharts-sector",f),v=o-a,g=Ks(l,v,0,!0),y;return g>0&&Math.abs(d-h)<360?y=o8e({cx:r,cy:s,innerRadius:a,outerRadius:o,cornerRadius:Math.min(g,v/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:h}):y=bte({cx:r,cy:s,innerRadius:a,outerRadius:o,startAngle:d,endAngle:h}),F.createElement("path",mI({},pt(n,!0),{className:m,d:y,role:"img"}))};function cx(t){"@babel/helpers - typeof";return cx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cx(t)}function pI(){return pI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pI.apply(this,arguments)}function fU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function mU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fU(Object(n),!0).forEach(function(r){c8e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function c8e(t,e,n){return e=u8e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u8e(t){var e=d8e(t,"string");return cx(e)=="symbol"?e:e+""}function d8e(t,e){if(cx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(cx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pU={curveBasisClosed:cMe,curveBasisOpen:uMe,curveBasis:lMe,curveBumpX:G2e,curveBumpY:Y2e,curveLinearClosed:dMe,curveLinear:OS,curveMonotoneX:hMe,curveMonotoneY:fMe,curveNatural:mMe,curveStep:pMe,curveStepAfter:yMe,curveStepBefore:gMe},I0=function(e){return e.x===+e.x&&e.y===+e.y},Gg=function(e){return e.x},Yg=function(e){return e.y},h8e=function(e,n){if(_t(e))return e;var r="curve".concat(kS(e));return(r==="curveMonotone"||r==="curveBump")&&n?pU["".concat(r).concat(n==="vertical"?"Y":"X")]:pU[r]||OS},f8e=function(e){var n=e.type,r=n===void 0?"linear":n,s=e.points,a=s===void 0?[]:s,o=e.baseLine,l=e.layout,c=e.connectNulls,u=c===void 0?!1:c,d=h8e(r,l),h=u?a.filter(function(g){return I0(g)}):a,f;if(Array.isArray(o)){var m=u?o.filter(function(g){return I0(g)}):o,v=h.map(function(g,y){return mU(mU({},g),{},{base:m[y]})});return l==="vertical"?f=w0().y(Yg).x1(Gg).x0(function(g){return g.base.x}):f=w0().x(Gg).y1(Yg).y0(function(g){return g.base.y}),f.defined(I0).curve(d),f(v)}return l==="vertical"&&Ee(o)?f=w0().y(Yg).x1(Gg).x0(o):Ee(o)?f=w0().x(Gg).y1(Yg).y0(o):f=pJ().x(Gg).y(Yg),f.defined(I0).curve(d),f(h)},ym=function(e){var n=e.className,r=e.points,s=e.path,a=e.pathRef;if((!r||!r.length)&&!s)return null;var o=r&&r.length?f8e(e):s;return N.createElement("path",pI({},pt(e,!1),H_(e),{className:$t("recharts-curve",n),d:o,ref:a}))},_te={exports:{}},m8e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",p8e=m8e,g8e=p8e;function jte(){}function Nte(){}Nte.resetWarningCache=jte;var y8e=function(){function t(r,s,a,o,l,c){if(c!==g8e){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Nte,resetWarningCache:jte};return n.PropTypes=n,n};_te.exports=y8e();var v8e=_te.exports;const pn=vn(v8e);var x8e=Object.getOwnPropertyNames,b8e=Object.getOwnPropertySymbols,w8e=Object.prototype.hasOwnProperty;function gU(t,e){return function(r,s,a){return t(r,s,a)&&e(r,s,a)}}function k0(t){return function(n,r,s){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,s);var a=s.cache,o=a.get(n),l=a.get(r);if(o&&l)return o===r&&l===n;a.set(n,r),a.set(r,n);var c=t(n,r,s);return a.delete(n),a.delete(r),c}}function yU(t){return x8e(t).concat(b8e(t))}var _8e=Object.hasOwn||function(t,e){return w8e.call(t,e)};function ef(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var j8e="__v",N8e="__o",S8e="_owner",vU=Object.getOwnPropertyDescriptor,xU=Object.keys;function E8e(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function A8e(t,e){return ef(t.getTime(),e.getTime())}function T8e(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function C8e(t,e){return t===e}function bU(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var s=new Array(r),a=t.entries(),o,l,c=0;(o=a.next())&&!o.done;){for(var u=e.entries(),d=!1,h=0;(l=u.next())&&!l.done;){if(s[h]){h++;continue}var f=o.value,m=l.value;if(n.equals(f[0],m[0],c,h,t,e,n)&&n.equals(f[1],m[1],f[0],m[0],t,e,n)){d=s[h]=!0;break}h++}if(!d)return!1;c++}return!0}var P8e=ef;function I8e(t,e,n){var r=xU(t),s=r.length;if(xU(e).length!==s)return!1;for(;s-- >0;)if(!Ste(t,e,n,r[s]))return!1;return!0}function Qg(t,e,n){var r=yU(t),s=r.length;if(yU(e).length!==s)return!1;for(var a,o,l;s-- >0;)if(a=r[s],!Ste(t,e,n,a)||(o=vU(t,a),l=vU(e,a),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function k8e(t,e){return ef(t.valueOf(),e.valueOf())}function R8e(t,e){return t.source===e.source&&t.flags===e.flags}function wU(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var s=new Array(r),a=t.values(),o,l;(o=a.next())&&!o.done;){for(var c=e.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!s[d]&&n.equals(o.value,l.value,o.value,l.value,t,e,n)){u=s[d]=!0;break}d++}if(!u)return!1}return!0}function O8e(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function M8e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function Ste(t,e,n,r){return(r===S8e||r===N8e||r===j8e)&&(t.$$typeof||e.$$typeof)?!0:_8e(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var D8e="[object Arguments]",L8e="[object Boolean]",$8e="[object Date]",F8e="[object Error]",V8e="[object Map]",B8e="[object Number]",U8e="[object Object]",z8e="[object RegExp]",q8e="[object Set]",W8e="[object String]",H8e="[object URL]",K8e=Array.isArray,_U=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,jU=Object.assign,G8e=Object.prototype.toString.call.bind(Object.prototype.toString);function Y8e(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,s=t.areFunctionsEqual,a=t.areMapsEqual,o=t.areNumbersEqual,l=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,d=t.areSetsEqual,h=t.areTypedArraysEqual,f=t.areUrlsEqual;return function(v,g,y){if(v===g)return!0;if(v==null||g==null)return!1;var b=typeof v;if(b!==typeof g)return!1;if(b!=="object")return b==="number"?o(v,g,y):b==="function"?s(v,g,y):!1;var x=v.constructor;if(x!==g.constructor)return!1;if(x===Object)return l(v,g,y);if(K8e(v))return e(v,g,y);if(_U!=null&&_U(v))return h(v,g,y);if(x===Date)return n(v,g,y);if(x===RegExp)return u(v,g,y);if(x===Map)return a(v,g,y);if(x===Set)return d(v,g,y);var S=G8e(v);return S===$8e?n(v,g,y):S===z8e?u(v,g,y):S===V8e?a(v,g,y):S===q8e?d(v,g,y):S===U8e?typeof v.then!="function"&&typeof g.then!="function"&&l(v,g,y):S===H8e?f(v,g,y):S===F8e?r(v,g,y):S===D8e?l(v,g,y):S===L8e||S===B8e||S===W8e?c(v,g,y):!1}}function Q8e(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,s={areArraysEqual:r?Qg:E8e,areDatesEqual:A8e,areErrorsEqual:T8e,areFunctionsEqual:C8e,areMapsEqual:r?gU(bU,Qg):bU,areNumbersEqual:P8e,areObjectsEqual:r?Qg:I8e,arePrimitiveWrappersEqual:k8e,areRegExpsEqual:R8e,areSetsEqual:r?gU(wU,Qg):wU,areTypedArraysEqual:r?Qg:O8e,areUrlsEqual:M8e};if(n&&(s=jU({},s,n(s))),e){var a=k0(s.areArraysEqual),o=k0(s.areMapsEqual),l=k0(s.areObjectsEqual),c=k0(s.areSetsEqual);s=jU({},s,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return s}function X8e(t){return function(e,n,r,s,a,o,l){return t(e,n,l)}}function Z8e(t){var e=t.circular,n=t.comparator,r=t.createState,s=t.equals,a=t.strict;if(r)return function(c,u){var d=r(),h=d.cache,f=h===void 0?e?new WeakMap:void 0:h,m=d.meta;return n(c,u,{cache:f,equals:s,meta:m,strict:a})};if(e)return function(c,u){return n(c,u,{cache:new WeakMap,equals:s,meta:void 0,strict:a})};var o={cache:void 0,equals:s,meta:void 0,strict:a};return function(c,u){return n(c,u,o)}}var J8e=id();id({strict:!0});id({circular:!0});id({circular:!0,strict:!0});id({createInternalComparator:function(){return ef}});id({strict:!0,createInternalComparator:function(){return ef}});id({circular:!0,createInternalComparator:function(){return ef}});id({circular:!0,createInternalComparator:function(){return ef},strict:!0});function id(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,s=t.createState,a=t.strict,o=a===void 0?!1:a,l=Q8e(t),c=Y8e(l),u=r?r(c):X8e(c);return Z8e({circular:n,comparator:c,createState:s,equals:u,strict:o})}function eWe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function NU(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function s(a){n<0&&(n=a),a-n>e?(t(a),n=-1):eWe(s)};requestAnimationFrame(r)}function gI(t){"@babel/helpers - typeof";return gI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gI(t)}function tWe(t){return iWe(t)||sWe(t)||rWe(t)||nWe()}function nWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rWe(t,e){if(t){if(typeof t=="string")return SU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SU(t,e)}}function SU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function sWe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function iWe(t){if(Array.isArray(t))return t}function aWe(){var t={},e=function(){return null},n=!1,r=function s(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var o=a,l=tWe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){NU(s.bind(null,u),c);return}s(c),NU(s.bind(null,u));return}gI(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function ux(t){"@babel/helpers - typeof";return ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ux(t)}function EU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function AU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EU(Object(n),!0).forEach(function(r){Ete(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ete(t,e,n){return e=oWe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oWe(t){var e=lWe(t,"string");return ux(e)==="symbol"?e:String(e)}function lWe(t,e){if(ux(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ux(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cWe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,s){return r.filter(function(a){return s.includes(a)})})},uWe=function(e){return e},dWe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Hy=function(e,n){return Object.keys(n).reduce(function(r,s){return AU(AU({},r),{},Ete({},s,e(s,n[s])))},{})},TU=function(e,n,r){return e.map(function(s){return"".concat(dWe(s)," ").concat(n,"ms ").concat(r)}).join(",")};function hWe(t,e){return pWe(t)||mWe(t,e)||Ate(t,e)||fWe()}function fWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mWe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function pWe(t){if(Array.isArray(t))return t}function gWe(t){return xWe(t)||vWe(t)||Ate(t)||yWe()}function yWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ate(t,e){if(t){if(typeof t=="string")return yI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yI(t,e)}}function vWe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xWe(t){if(Array.isArray(t))return yI(t)}function yI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var _j=1e-4,Tte=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},Cte=function(e,n){return e.map(function(r,s){return r*Math.pow(n,s)}).reduce(function(r,s){return r+s})},CU=function(e,n){return function(r){var s=Tte(e,n);return Cte(s,r)}},bWe=function(e,n){return function(r){var s=Tte(e,n),a=[].concat(gWe(s.map(function(o,l){return o*l}).slice(1)),[0]);return Cte(a,r)}},PU=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n[0],a=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":s=0,a=0,o=1,l=1;break;case"ease":s=.25,a=.1,o=.25,l=1;break;case"ease-in":s=.42,a=0,o=1,l=1;break;case"ease-out":s=.42,a=0,o=.58,l=1;break;case"ease-in-out":s=0,a=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),d=hWe(u,4);s=d[0],a=d[1],o=d[2],l=d[3]}}}var h=CU(s,o),f=CU(a,l),m=bWe(s,o),v=function(b){return b>1?1:b<0?0:b},g=function(b){for(var x=b>1?1:b,S=x,T=0;T<8;++T){var _=h(S)-x,C=m(S);if(Math.abs(_-x)<_j||C<_j)return f(S);S=v(S-_/C)}return f(S)};return g.isStepper=!1,g},wWe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,s=e.damping,a=s===void 0?8:s,o=e.dt,l=o===void 0?17:o,c=function(d,h,f){var m=-(d-h)*r,v=f*a,g=f+(m-v)*l/1e3,y=f*l/1e3+d;return Math.abs(y-h)<_j&&Math.abs(g)<_j?[h,0]:[y,g]};return c.isStepper=!0,c.dt=l,c},_We=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return PU(s);case"spring":return wWe();default:if(s.split("(")[0]==="cubic-bezier")return PU(s)}return typeof s=="function"?s:null};function dx(t){"@babel/helpers - typeof";return dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dx(t)}function IU(t){return SWe(t)||NWe(t)||Pte(t)||jWe()}function jWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NWe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function SWe(t){if(Array.isArray(t))return xI(t)}function kU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function as(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kU(Object(n),!0).forEach(function(r){vI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vI(t,e,n){return e=EWe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EWe(t){var e=AWe(t,"string");return dx(e)==="symbol"?e:String(e)}function AWe(t,e){if(dx(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(dx(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TWe(t,e){return IWe(t)||PWe(t,e)||Pte(t,e)||CWe()}function CWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pte(t,e){if(t){if(typeof t=="string")return xI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xI(t,e)}}function xI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function PWe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function IWe(t){if(Array.isArray(t))return t}var jj=function(e,n,r){return e+(n-e)*r},bI=function(e){var n=e.from,r=e.to;return n!==r},kWe=function t(e,n,r){var s=Hy(function(a,o){if(bI(o)){var l=e(o.from,o.to,o.velocity),c=TWe(l,2),u=c[0],d=c[1];return as(as({},o),{},{from:u,velocity:d})}return o},n);return r<1?Hy(function(a,o){return bI(o)?as(as({},o),{},{velocity:jj(o.velocity,s[a].velocity,r),from:jj(o.from,s[a].from,r)}):o},n):t(e,s,r-1)};const RWe=function(t,e,n,r,s){var a=cWe(t,e),o=a.reduce(function(y,b){return as(as({},y),{},vI({},b,[t[b],e[b]]))},{}),l=a.reduce(function(y,b){return as(as({},y),{},vI({},b,{from:t[b],velocity:0,to:e[b]}))},{}),c=-1,u,d,h=function(){return null},f=function(){return Hy(function(b,x){return x.from},l)},m=function(){return!Object.values(l).filter(bI).length},v=function(b){u||(u=b);var x=b-u,S=x/n.dt;l=kWe(n,l,S),s(as(as(as({},t),e),f())),u=b,m()||(c=requestAnimationFrame(h))},g=function(b){d||(d=b);var x=(b-d)/r,S=Hy(function(_,C){return jj.apply(void 0,IU(C).concat([n(x)]))},o);if(s(as(as(as({},t),e),S)),x<1)c=requestAnimationFrame(h);else{var T=Hy(function(_,C){return jj.apply(void 0,IU(C).concat([n(1)]))},o);s(as(as(as({},t),e),T))}};return h=n.isStepper?v:g,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}};function fp(t){"@babel/helpers - typeof";return fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fp(t)}var OWe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function MWe(t,e){if(t==null)return{};var n=DWe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function DWe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function EA(t){return VWe(t)||FWe(t)||$We(t)||LWe()}function LWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $We(t,e){if(t){if(typeof t=="string")return wI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wI(t,e)}}function FWe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function VWe(t){if(Array.isArray(t))return wI(t)}function wI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function RU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ta(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RU(Object(n),!0).forEach(function(r){xy(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xy(t,e,n){return e=Ite(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BWe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UWe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ite(r.key),r)}}function zWe(t,e,n){return e&&UWe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ite(t){var e=qWe(t,"string");return fp(e)==="symbol"?e:String(e)}function qWe(t,e){if(fp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(fp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WWe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_I(t,e)}function _I(t,e){return _I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},_I(t,e)}function HWe(t){var e=KWe();return function(){var r=Nj(t),s;if(e){var a=Nj(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return jI(this,s)}}function jI(t,e){if(e&&(fp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NI(t)}function NI(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KWe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Nj(t){return Nj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Nj(t)}var Wo=function(t){WWe(n,t);var e=HWe(n);function n(r,s){var a;BWe(this,n),a=e.call(this,r,s);var o=a.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,h=o.steps,f=o.children,m=o.duration;if(a.handleStyleChange=a.handleStyleChange.bind(NI(a)),a.changeStyle=a.changeStyle.bind(NI(a)),!l||m<=0)return a.state={style:{}},typeof f=="function"&&(a.state={style:d}),jI(a);if(h&&h.length)a.state={style:h[0].style};else if(u){if(typeof f=="function")return a.state={style:u},jI(a);a.state={style:c?xy({},c,u):u}}else a.state={style:{}};return a}return zWe(n,[{key:"componentDidMount",value:function(){var s=this.props,a=s.isActive,o=s.canBegin;this.mounted=!0,!(!a||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var a=this.props,o=a.isActive,l=a.canBegin,c=a.attributeName,u=a.shouldReAnimate,d=a.to,h=a.from,f=this.state.style;if(l){if(!o){var m={style:c?xy({},c,d):d};this.state&&f&&(c&&f[c]!==d||!c&&f!==d)&&this.setState(m);return}if(!(J8e(s.to,d)&&s.canBegin&&s.isActive)){var v=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=v||u?h:s.to;if(this.state&&f){var y={style:c?xy({},c,g):g};(c&&f[c]!==g||!c&&f!==g)&&this.setState(y)}this.runAnimation(Ta(Ta({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var a=this,o=s.from,l=s.to,c=s.duration,u=s.easing,d=s.begin,h=s.onAnimationEnd,f=s.onAnimationStart,m=RWe(o,l,_We(u),c,this.changeStyle),v=function(){a.stopJSAnimation=m()};this.manager.start([f,d,v,c,h])}},{key:"runStepAnimation",value:function(s){var a=this,o=s.steps,l=s.begin,c=s.onAnimationStart,u=o[0],d=u.style,h=u.duration,f=h===void 0?0:h,m=function(g,y,b){if(b===0)return g;var x=y.duration,S=y.easing,T=S===void 0?"ease":S,_=y.style,C=y.properties,E=y.onAnimationEnd,p=b>0?o[b-1]:y,w=C||Object.keys(_);if(typeof T=="function"||T==="spring")return[].concat(EA(g),[a.runJSAnimation.bind(a,{from:p.style,to:_,duration:x,easing:T}),x]);var A=TU(w,x,T),P=Ta(Ta(Ta({},p.style),_),{},{transition:A});return[].concat(EA(g),[P,x,E]).filter(uWe)};return this.manager.start([c].concat(EA(o.reduce(m,[d,Math.max(f,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=aWe());var a=s.begin,o=s.duration,l=s.attributeName,c=s.to,u=s.easing,d=s.onAnimationStart,h=s.onAnimationEnd,f=s.steps,m=s.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(s);return}if(f.length>1){this.runStepAnimation(s);return}var g=l?xy({},l,c):c,y=TU(Object.keys(g),o,u);v.start([d,a,Ta(Ta({},g),{},{transition:y}),o,h])}},{key:"render",value:function(){var s=this.props,a=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var c=MWe(s,OWe),u=N.Children.count(a),d=this.state.style;if(typeof a=="function")return a(d);if(!l||u===0||o<=0)return a;var h=function(m){var v=m.props,g=v.style,y=g===void 0?{}:g,b=v.className,x=N.cloneElement(m,Ta(Ta({},c),{},{style:Ta(Ta({},y),d),className:b}));return x};return u===1?h(N.Children.only(a)):F.createElement("div",null,N.Children.map(a,function(f){return h(f)}))}}]),n}(N.PureComponent);Wo.displayName="Animate";Wo.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Wo.propTypes={from:pn.oneOfType([pn.object,pn.string]),to:pn.oneOfType([pn.object,pn.string]),attributeName:pn.string,duration:pn.number,begin:pn.number,easing:pn.oneOfType([pn.string,pn.func]),steps:pn.arrayOf(pn.shape({duration:pn.number.isRequired,style:pn.object.isRequired,easing:pn.oneOfType([pn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),pn.func]),properties:pn.arrayOf("string"),onAnimationEnd:pn.func})),children:pn.oneOfType([pn.node,pn.func]),isActive:pn.bool,canBegin:pn.bool,onAnimationEnd:pn.func,shouldReAnimate:pn.bool,onAnimationStart:pn.func,onAnimationReStart:pn.func};function hx(t){"@babel/helpers - typeof";return hx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hx(t)}function Sj(){return Sj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sj.apply(this,arguments)}function GWe(t,e){return ZWe(t)||XWe(t,e)||QWe(t,e)||YWe()}function YWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QWe(t,e){if(t){if(typeof t=="string")return OU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OU(t,e)}}function OU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function XWe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function ZWe(t){if(Array.isArray(t))return t}function MU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function DU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MU(Object(n),!0).forEach(function(r){JWe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JWe(t,e,n){return e=eHe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eHe(t){var e=tHe(t,"string");return hx(e)=="symbol"?e:e+""}function tHe(t,e){if(hx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(hx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var LU=function(e,n,r,s,a){var o=Math.min(Math.abs(r)/2,Math.abs(s)/2),l=s>=0?1:-1,c=r>=0?1:-1,u=s>=0&&r>=0||s<0&&r<0?1:0,d;if(o>0&&a instanceof Array){for(var h=[0,0,0,0],f=0,m=4;f<m;f++)h[f]=a[f]>o?o:a[f];d="M".concat(e,",").concat(n+l*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(e+c*h[0],",").concat(n)),d+="L ".concat(e+r-c*h[1],",").concat(n),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+l*h[1])),d+="L ".concat(e+r,",").concat(n+s-l*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(e+r-c*h[2],",").concat(n+s)),d+="L ".concat(e+c*h[3],",").concat(n+s),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+s-l*h[3])),d+="Z"}else if(o>0&&a===+a&&a>0){var v=Math.min(o,a);d="M ".concat(e,",").concat(n+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+c*v,",").concat(n,`
            L `).concat(e+r-c*v,",").concat(n,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+r,",").concat(n+l*v,`
            L `).concat(e+r,",").concat(n+s-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+r-c*v,",").concat(n+s,`
            L `).concat(e+c*v,",").concat(n+s,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e,",").concat(n+s-l*v," Z")}else d="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(s," h ").concat(-r," Z");return d},nHe=function(e,n){if(!e||!n)return!1;var r=e.x,s=e.y,a=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(a,a+l),d=Math.max(a,a+l),h=Math.min(o,o+c),f=Math.max(o,o+c);return r>=u&&r<=d&&s>=h&&s<=f}return!1},rHe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},LM=function(e){var n=DU(DU({},rHe),e),r=N.useRef(),s=N.useState(-1),a=GWe(s,2),o=a[0],l=a[1];N.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var T=r.current.getTotalLength();T&&l(T)}catch{}},[]);var c=n.x,u=n.y,d=n.width,h=n.height,f=n.radius,m=n.className,v=n.animationEasing,g=n.animationDuration,y=n.animationBegin,b=n.isAnimationActive,x=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||d===0||h===0)return null;var S=$t("recharts-rectangle",m);return x?F.createElement(Wo,{canBegin:o>0,from:{width:d,height:h,x:c,y:u},to:{width:d,height:h,x:c,y:u},duration:g,animationEasing:v,isActive:x},function(T){var _=T.width,C=T.height,E=T.x,p=T.y;return F.createElement(Wo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:g,isActive:b,easing:v},F.createElement("path",Sj({},pt(n,!0),{className:S,d:LU(E,p,_,C,f),ref:r})))}):F.createElement("path",Sj({},pt(n,!0),{className:S,d:LU(c,u,d,h,f)}))},sHe=["points","className","baseLinePoints","connectNulls"];function Hf(){return Hf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hf.apply(this,arguments)}function iHe(t,e){if(t==null)return{};var n=aHe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function aHe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function $U(t){return uHe(t)||cHe(t)||lHe(t)||oHe()}function oHe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lHe(t,e){if(t){if(typeof t=="string")return SI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SI(t,e)}}function cHe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function uHe(t){if(Array.isArray(t))return SI(t)}function SI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var FU=function(e){return e&&e.x===+e.x&&e.y===+e.y},dHe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){FU(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),FU(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Ky=function(e,n){var r=dHe(e);n&&(r=[r.reduce(function(a,o){return[].concat($U(a),$U(o))},[])]);var s=r.map(function(a){return a.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return r.length===1?"".concat(s,"Z"):s},hHe=function(e,n,r){var s=Ky(e,r);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(Ky(n.reverse(),r).slice(1))},fHe=function(e){var n=e.points,r=e.className,s=e.baseLinePoints,a=e.connectNulls,o=iHe(e,sHe);if(!n||!n.length)return null;var l=$t("recharts-polygon",r);if(s&&s.length){var c=o.stroke&&o.stroke!=="none",u=hHe(n,s,a);return F.createElement("g",{className:l},F.createElement("path",Hf({},pt(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?F.createElement("path",Hf({},pt(o,!0),{fill:"none",d:Ky(n,a)})):null,c?F.createElement("path",Hf({},pt(o,!0),{fill:"none",d:Ky(s,a)})):null)}var d=Ky(n,a);return F.createElement("path",Hf({},pt(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function EI(){return EI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EI.apply(this,arguments)}var XS=function(e){var n=e.cx,r=e.cy,s=e.r,a=e.className,o=$t("recharts-dot",a);return n===+n&&r===+r&&s===+s?N.createElement("circle",EI({},pt(e,!1),H_(e),{className:o,cx:n,cy:r,r:s})):null};function fx(t){"@babel/helpers - typeof";return fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fx(t)}var mHe=["x","y","top","left","width","height","className"];function AI(){return AI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AI.apply(this,arguments)}function VU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function pHe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VU(Object(n),!0).forEach(function(r){gHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gHe(t,e,n){return e=yHe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yHe(t){var e=vHe(t,"string");return fx(e)=="symbol"?e:e+""}function vHe(t,e){if(fx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(fx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xHe(t,e){if(t==null)return{};var n=bHe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function bHe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var wHe=function(e,n,r,s,a,o){return"M".concat(e,",").concat(a,"v").concat(s,"M").concat(o,",").concat(n,"h").concat(r)},_He=function(e){var n=e.x,r=n===void 0?0:n,s=e.y,a=s===void 0?0:s,o=e.top,l=o===void 0?0:o,c=e.left,u=c===void 0?0:c,d=e.width,h=d===void 0?0:d,f=e.height,m=f===void 0?0:f,v=e.className,g=xHe(e,mHe),y=pHe({x:r,y:a,top:l,left:u,width:h,height:m},g);return!Ee(r)||!Ee(a)||!Ee(h)||!Ee(m)||!Ee(l)||!Ee(u)?null:F.createElement("path",AI({},pt(y,!0),{className:$t("recharts-cross",v),d:wHe(r,a,h,m,l,u)}))},jHe=HS,NHe=zee,SHe=Zo;function EHe(t,e){return t&&t.length?jHe(t,SHe(e),NHe):void 0}var AHe=EHe;const THe=vn(AHe);var CHe=HS,PHe=Zo,IHe=qee;function kHe(t,e){return t&&t.length?CHe(t,PHe(e),IHe):void 0}var RHe=kHe;const OHe=vn(RHe);var MHe=["cx","cy","angle","ticks","axisLine"],DHe=["ticks","tick","angle","tickFormatter","stroke"];function mp(t){"@babel/helpers - typeof";return mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mp(t)}function Gy(){return Gy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gy.apply(this,arguments)}function BU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function gd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BU(Object(n),!0).forEach(function(r){ZS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UU(t,e){if(t==null)return{};var n=LHe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function LHe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function $He(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Rte(r.key),r)}}function FHe(t,e,n){return e&&zU(t.prototype,e),n&&zU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function VHe(t,e,n){return e=Ej(e),BHe(t,kte()?Reflect.construct(e,n||[],Ej(t).constructor):e.apply(t,n))}function BHe(t,e){if(e&&(mp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UHe(t)}function UHe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kte=function(){return!!t})()}function Ej(t){return Ej=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ej(t)}function zHe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TI(t,e)}function TI(t,e){return TI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},TI(t,e)}function ZS(t,e,n){return e=Rte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rte(t){var e=qHe(t,"string");return mp(e)=="symbol"?e:e+""}function qHe(t,e){if(mp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var JS=function(t){function e(){return $He(this,e),VHe(this,e,arguments)}return zHe(e,t),FHe(e,[{key:"getTickValueCoord",value:function(r){var s=r.coordinate,a=this.props,o=a.angle,l=a.cx,c=a.cy;return Ln(l,c,s,o)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,s;switch(r){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var r=this.props,s=r.cx,a=r.cy,o=r.angle,l=r.ticks,c=THe(l,function(d){return d.coordinate||0}),u=OHe(l,function(d){return d.coordinate||0});return{cx:s,cy:a,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,a=r.cy,o=r.angle,l=r.ticks,c=r.axisLine,u=UU(r,MHe),d=l.reduce(function(v,g){return[Math.min(v[0],g.coordinate),Math.max(v[1],g.coordinate)]},[1/0,-1/0]),h=Ln(s,a,d[0],o),f=Ln(s,a,d[1],o),m=gd(gd(gd({},pt(u,!1)),{},{fill:"none"},pt(c,!1)),{},{x1:h.x,y1:h.y,x2:f.x,y2:f.y});return F.createElement("line",Gy({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var r=this,s=this.props,a=s.ticks,o=s.tick,l=s.angle,c=s.tickFormatter,u=s.stroke,d=UU(s,DHe),h=this.getTickTextAnchor(),f=pt(d,!1),m=pt(o,!1),v=a.map(function(g,y){var b=r.getTickValueCoord(g),x=gd(gd(gd(gd({textAnchor:h,transform:"rotate(".concat(90-l,", ").concat(b.x,", ").concat(b.y,")")},f),{},{stroke:"none",fill:u},m),{},{index:y},b),{},{payload:g});return F.createElement(rn,Gy({className:$t("recharts-polar-radius-axis-tick",vte(o)),key:"tick-".concat(g.coordinate)},Oh(r.props,g,y)),e.renderTickItem(o,x,c?c(g.value,y):g.value))});return F.createElement(rn,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var r=this.props,s=r.ticks,a=r.axisLine,o=r.tick;return!s||!s.length?null:F.createElement(rn,{className:$t("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),o&&this.renderTicks(),Zr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,s,a){var o;return F.isValidElement(r)?o=F.cloneElement(r,s):_t(r)?o=r(s):o=F.createElement(Mh,Gy({},s,{className:"recharts-polar-radius-axis-tick-value"}),a),o}}])}(N.PureComponent);ZS(JS,"displayName","PolarRadiusAxis");ZS(JS,"axisType","radiusAxis");ZS(JS,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function pp(t){"@babel/helpers - typeof";return pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pp(t)}function Td(){return Td=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Td.apply(this,arguments)}function qU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function yd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qU(Object(n),!0).forEach(function(r){e1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WHe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Mte(r.key),r)}}function HHe(t,e,n){return e&&WU(t.prototype,e),n&&WU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function KHe(t,e,n){return e=Aj(e),GHe(t,Ote()?Reflect.construct(e,n||[],Aj(t).constructor):e.apply(t,n))}function GHe(t,e){if(e&&(pp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YHe(t)}function YHe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ote(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ote=function(){return!!t})()}function Aj(t){return Aj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Aj(t)}function QHe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CI(t,e)}function CI(t,e){return CI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},CI(t,e)}function e1(t,e,n){return e=Mte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mte(t){var e=XHe(t,"string");return pp(e)=="symbol"?e:e+""}function XHe(t,e){if(pp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(pp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ZHe=Math.PI/180,HU=1e-5,t1=function(t){function e(){return WHe(this,e),KHe(this,e,arguments)}return QHe(e,t),HHe(e,[{key:"getTickLineCoord",value:function(r){var s=this.props,a=s.cx,o=s.cy,l=s.radius,c=s.orientation,u=s.tickSize,d=u||8,h=Ln(a,o,l,r.coordinate),f=Ln(a,o,l+(c==="inner"?-1:1)*d,r.coordinate);return{x1:h.x,y1:h.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(r){var s=this.props.orientation,a=Math.cos(-r.coordinate*ZHe),o;return a>HU?o=s==="outer"?"start":"end":a<-HU?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,a=r.cy,o=r.radius,l=r.axisLine,c=r.axisLineType,u=yd(yd({},pt(this.props,!1)),{},{fill:"none"},pt(l,!1));if(c==="circle")return F.createElement(XS,Td({className:"recharts-polar-angle-axis-line"},u,{cx:s,cy:a,r:o}));var d=this.props.ticks,h=d.map(function(f){return Ln(s,a,o,f.coordinate)});return F.createElement(fHe,Td({className:"recharts-polar-angle-axis-line"},u,{points:h}))}},{key:"renderTicks",value:function(){var r=this,s=this.props,a=s.ticks,o=s.tick,l=s.tickLine,c=s.tickFormatter,u=s.stroke,d=pt(this.props,!1),h=pt(o,!1),f=yd(yd({},d),{},{fill:"none"},pt(l,!1)),m=a.map(function(v,g){var y=r.getTickLineCoord(v),b=r.getTickTextAnchor(v),x=yd(yd(yd({textAnchor:b},d),{},{stroke:"none",fill:u},h),{},{index:g,payload:v,x:y.x2,y:y.y2});return F.createElement(rn,Td({className:$t("recharts-polar-angle-axis-tick",vte(o)),key:"tick-".concat(v.coordinate)},Oh(r.props,v,g)),l&&F.createElement("line",Td({className:"recharts-polar-angle-axis-tick-line"},f,y)),o&&e.renderTickItem(o,x,c?c(v.value,g):v.value))});return F.createElement(rn,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var r=this.props,s=r.ticks,a=r.radius,o=r.axisLine;return a<=0||!s||!s.length?null:F.createElement(rn,{className:$t("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,s,a){var o;return F.isValidElement(r)?o=F.cloneElement(r,s):_t(r)?o=r(s):o=F.createElement(Mh,Td({},s,{className:"recharts-polar-angle-axis-tick-value"}),a),o}}])}(N.PureComponent);e1(t1,"displayName","PolarAngleAxis");e1(t1,"axisType","angleAxis");e1(t1,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var JHe=FJ,e7e=JHe(Object.getPrototypeOf,Object),t7e=e7e,n7e=Ql,r7e=t7e,s7e=Xl,i7e="[object Object]",a7e=Function.prototype,o7e=Object.prototype,Dte=a7e.toString,l7e=o7e.hasOwnProperty,c7e=Dte.call(Object);function u7e(t){if(!s7e(t)||n7e(t)!=i7e)return!1;var e=r7e(t);if(e===null)return!0;var n=l7e.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Dte.call(n)==c7e}var d7e=u7e;const h7e=vn(d7e);var f7e=Ql,m7e=Xl,p7e="[object Boolean]";function g7e(t){return t===!0||t===!1||m7e(t)&&f7e(t)==p7e}var y7e=g7e;const v7e=vn(y7e);function mx(t){"@babel/helpers - typeof";return mx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mx(t)}function Tj(){return Tj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tj.apply(this,arguments)}function x7e(t,e){return j7e(t)||_7e(t,e)||w7e(t,e)||b7e()}function b7e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w7e(t,e){if(t){if(typeof t=="string")return KU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KU(t,e)}}function KU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _7e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function j7e(t){if(Array.isArray(t))return t}function GU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function YU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GU(Object(n),!0).forEach(function(r){N7e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function N7e(t,e,n){return e=S7e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S7e(t){var e=E7e(t,"string");return mx(e)=="symbol"?e:e+""}function E7e(t,e){if(mx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var QU=function(e,n,r,s,a){var o=r-s,l;return l="M ".concat(e,",").concat(n),l+="L ".concat(e+r,",").concat(n),l+="L ".concat(e+r-o/2,",").concat(n+a),l+="L ".concat(e+r-o/2-s,",").concat(n+a),l+="L ".concat(e,",").concat(n," Z"),l},A7e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},T7e=function(e){var n=YU(YU({},A7e),e),r=N.useRef(),s=N.useState(-1),a=x7e(s,2),o=a[0],l=a[1];N.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var S=r.current.getTotalLength();S&&l(S)}catch{}},[]);var c=n.x,u=n.y,d=n.upperWidth,h=n.lowerWidth,f=n.height,m=n.className,v=n.animationEasing,g=n.animationDuration,y=n.animationBegin,b=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||f!==+f||d===0&&h===0||f===0)return null;var x=$t("recharts-trapezoid",m);return b?F.createElement(Wo,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:u},to:{upperWidth:d,lowerWidth:h,height:f,x:c,y:u},duration:g,animationEasing:v,isActive:b},function(S){var T=S.upperWidth,_=S.lowerWidth,C=S.height,E=S.x,p=S.y;return F.createElement(Wo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:g,easing:v},F.createElement("path",Tj({},pt(n,!0),{className:x,d:QU(E,p,T,_,C),ref:r})))}):F.createElement("g",null,F.createElement("path",Tj({},pt(n,!0),{className:x,d:QU(c,u,d,h,f)})))},C7e=["option","shapeType","propTransformer","activeClassName","isActive"];function px(t){"@babel/helpers - typeof";return px=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},px(t)}function P7e(t,e){if(t==null)return{};var n=I7e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function I7e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function XU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Cj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XU(Object(n),!0).forEach(function(r){k7e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function k7e(t,e,n){return e=R7e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R7e(t){var e=O7e(t,"string");return px(e)=="symbol"?e:e+""}function O7e(t,e){if(px(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(px(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function M7e(t,e){return Cj(Cj({},e),t)}function D7e(t,e){return t==="symbols"}function ZU(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return F.createElement(LM,n);case"trapezoid":return F.createElement(T7e,n);case"sector":return F.createElement(wte,n);case"symbols":if(D7e(e))return F.createElement(nM,n);break;default:return null}}function L7e(t){return N.isValidElement(t)?t.props:t}function Lte(t){var e=t.option,n=t.shapeType,r=t.propTransformer,s=r===void 0?M7e:r,a=t.activeClassName,o=a===void 0?"recharts-active-shape":a,l=t.isActive,c=P7e(t,C7e),u;if(N.isValidElement(e))u=N.cloneElement(e,Cj(Cj({},c),L7e(e)));else if(_t(e))u=e(c);else if(h7e(e)&&!v7e(e)){var d=s(e,c);u=F.createElement(ZU,{shapeType:n,elementProps:d})}else{var h=c;u=F.createElement(ZU,{shapeType:n,elementProps:h})}return l?F.createElement(rn,{className:o},u):u}function n1(t,e){return e!=null&&"trapezoids"in t.props}function r1(t,e){return e!=null&&"sectors"in t.props}function gx(t,e){return e!=null&&"points"in t.props}function $7e(t,e){var n,r,s=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,a=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return s&&a}function F7e(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function V7e(t,e){var n=t.x===e.x,r=t.y===e.y,s=t.z===e.z;return n&&r&&s}function B7e(t,e){var n;return n1(t,e)?n=$7e:r1(t,e)?n=F7e:gx(t,e)&&(n=V7e),n}function U7e(t,e){var n;return n1(t,e)?n="trapezoids":r1(t,e)?n="sectors":gx(t,e)&&(n="points"),n}function z7e(t,e){if(n1(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(r1(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return gx(t,e)?e.payload:{}}function q7e(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,s=U7e(n,e),a=z7e(n,e),o=r.filter(function(c,u){var d=dp(a,c),h=n.props[s].filter(function(v){var g=B7e(n,e);return g(v,e)}),f=n.props[s].indexOf(h[h.length-1]),m=u===f;return d&&m}),l=r.indexOf(o[o.length-1]);return l}var yw;function gp(t){"@babel/helpers - typeof";return gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gp(t)}function Kf(){return Kf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kf.apply(this,arguments)}function JU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function In(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JU(Object(n),!0).forEach(function(r){Ji(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function W7e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Fte(r.key),r)}}function H7e(t,e,n){return e&&e6(t.prototype,e),n&&e6(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function K7e(t,e,n){return e=Pj(e),G7e(t,$te()?Reflect.construct(e,n||[],Pj(t).constructor):e.apply(t,n))}function G7e(t,e){if(e&&(gp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y7e(t)}function Y7e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $te(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($te=function(){return!!t})()}function Pj(t){return Pj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Pj(t)}function Q7e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PI(t,e)}function PI(t,e){return PI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},PI(t,e)}function Ji(t,e,n){return e=Fte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fte(t){var e=X7e(t,"string");return gp(e)=="symbol"?e:e+""}function X7e(t,e){if(gp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(gp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jl=function(t){function e(n){var r;return W7e(this,e),r=K7e(this,e,[n]),Ji(r,"pieRef",null),Ji(r,"sectorRefs",[]),Ji(r,"id",ag("recharts-pie-")),Ji(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),_t(s)&&s()}),Ji(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),_t(s)&&s()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return Q7e(e,t),H7e(e,[{key:"isActiveIndex",value:function(r){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(r)!==-1:r===s}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.label,l=a.labelLine,c=a.dataKey,u=a.valueKey,d=pt(this.props,!1),h=pt(o,!1),f=pt(l,!1),m=o&&o.offsetRadius||20,v=r.map(function(g,y){var b=(g.startAngle+g.endAngle)/2,x=Ln(g.cx,g.cy,g.outerRadius+m,b),S=In(In(In(In({},d),g),{},{stroke:"none"},h),{},{index:y,textAnchor:e.getTextAnchor(x.x,g.cx)},x),T=In(In(In(In({},d),g),{},{fill:"none",stroke:g.fill},f),{},{index:y,points:[Ln(g.cx,g.cy,g.outerRadius,b),x]}),_=c;return Ft(c)&&Ft(u)?_="value":Ft(c)&&(_=u),F.createElement(rn,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(y)},l&&e.renderLabelLineItem(l,T,"line"),e.renderLabelItem(o,S,Vr(g,_)))});return F.createElement(rn,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(r){var s=this,a=this.props,o=a.activeShape,l=a.blendStroke,c=a.inactiveShape;return r.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var h=s.isActiveIndex(d),f=c&&s.hasActiveIndex()?c:null,m=h?o:f,v=In(In({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return F.createElement(rn,Kf({ref:function(y){y&&!s.sectorRefs.includes(y)&&s.sectorRefs.push(y)},tabIndex:-1,className:"recharts-pie-sector"},Oh(s.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),F.createElement(Lte,Kf({option:m,isActive:h,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,s=this.props,a=s.sectors,o=s.isAnimationActive,l=s.animationBegin,c=s.animationDuration,u=s.animationEasing,d=s.animationId,h=this.state,f=h.prevSectors,m=h.prevIsAnimationActive;return F.createElement(Wo,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var g=v.t,y=[],b=a&&a[0],x=b.startAngle;return a.forEach(function(S,T){var _=f&&f[T],C=T>0?$i(S,"paddingAngle",0):0;if(_){var E=ci(_.endAngle-_.startAngle,S.endAngle-S.startAngle),p=In(In({},S),{},{startAngle:x+C,endAngle:x+E(g)+C});y.push(p),x=p.endAngle}else{var w=S.endAngle,A=S.startAngle,P=ci(0,w-A),I=P(g),k=In(In({},S),{},{startAngle:x+C,endAngle:x+I+C});y.push(k),x=k.endAngle}}),F.createElement(rn,null,r.renderSectorsStatically(y))})}},{key:"attachKeyboardHandlers",value:function(r){var s=this;r.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var o=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[o].focus(),s.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[l].focus(),s.setState({sectorToFocus:l});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,s=r.sectors,a=r.isAnimationActive,o=this.state.prevSectors;return a&&s&&s.length&&(!o||!dp(o,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,s=this.props,a=s.hide,o=s.sectors,l=s.className,c=s.label,u=s.cx,d=s.cy,h=s.innerRadius,f=s.outerRadius,m=s.isAnimationActive,v=this.state.isAnimationFinished;if(a||!o||!o.length||!Ee(u)||!Ee(d)||!Ee(h)||!Ee(f))return null;var g=$t("recharts-pie",l);return F.createElement(rn,{tabIndex:this.props.rootTabIndex,className:g,ref:function(b){r.pieRef=b}},this.renderSectors(),c&&this.renderLabels(o),Zr.renderCallByParent(this.props,null,!1),(!m||v)&&jl.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return s.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:r.sectors!==s.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,s){return r>s?"start":r<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,s,a){if(F.isValidElement(r))return F.cloneElement(r,s);if(_t(r))return r(s);var o=$t("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return F.createElement(ym,Kf({},s,{key:a,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(r,s,a){if(F.isValidElement(r))return F.cloneElement(r,s);var o=a;if(_t(r)&&(o=r(s),F.isValidElement(o)))return o;var l=$t("recharts-pie-label-text",typeof r!="boolean"&&!_t(r)?r.className:"");return F.createElement(Mh,Kf({},s,{alignmentBaseline:"middle",className:l}),o)}}])}(N.PureComponent);yw=Jl;Ji(Jl,"displayName","Pie");Ji(Jl,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Lo.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Ji(Jl,"parseDeltaAngle",function(t,e){var n=Hs(e-t),r=Math.min(Math.abs(e-t),360);return n*r});Ji(Jl,"getRealPieData",function(t){var e=t.data,n=t.children,r=pt(t,!1),s=ua(n,FS);return e&&e.length?e.map(function(a,o){return In(In(In({payload:a},r),a),s&&s[o]&&s[o].props)}):s&&s.length?s.map(function(a){return In(In({},r),a.props)}):[]});Ji(Jl,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,s=e.width,a=e.height,o=yte(s,a),l=r+Ks(t.cx,s,s/2),c=n+Ks(t.cy,a,a/2),u=Ks(t.innerRadius,o,0),d=Ks(t.outerRadius,o,o*.8),h=t.maxRadius||Math.sqrt(s*s+a*a)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:h}});Ji(Jl,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?In(In({},e.type.defaultProps),e.props):e.props,s=yw.getRealPieData(r);if(!s||!s.length)return null;var a=r.cornerRadius,o=r.startAngle,l=r.endAngle,c=r.paddingAngle,u=r.dataKey,d=r.nameKey,h=r.valueKey,f=r.tooltipType,m=Math.abs(r.minAngle),v=yw.parseCoordinateOfPie(r,n),g=yw.parseDeltaAngle(o,l),y=Math.abs(g),b=u;Ft(u)&&Ft(h)?(Ga(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b="value"):Ft(u)&&(Ga(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b=h);var x=s.filter(function(p){return Vr(p,b,0)!==0}).length,S=(y>=360?x:x-1)*c,T=y-x*m-S,_=s.reduce(function(p,w){var A=Vr(w,b,0);return p+(Ee(A)?A:0)},0),C;if(_>0){var E;C=s.map(function(p,w){var A=Vr(p,b,0),P=Vr(p,d,w),I=(Ee(A)?A:0)/_,k;w?k=E.endAngle+Hs(g)*c*(A!==0?1:0):k=o;var L=k+Hs(g)*((A!==0?m:0)+I*T),U=(k+L)/2,z=(v.innerRadius+v.outerRadius)/2,O=[{name:P,value:A,payload:p,dataKey:b,type:f}],$=Ln(v.cx,v.cy,z,U);return E=In(In(In({percent:I,cornerRadius:a,name:P,tooltipPayload:O,midAngle:U,middleRadius:z,tooltipPosition:$},p),v),{},{value:Vr(p,b),startAngle:k,endAngle:L,payload:p,paddingAngle:Hs(g)*c}),E})}return In(In({},v),{},{sectors:C,data:s})});var Z7e=Math.ceil,J7e=Math.max;function eKe(t,e,n,r){for(var s=-1,a=J7e(Z7e((e-t)/(n||1)),0),o=Array(a);a--;)o[r?a:++s]=t,t+=n;return o}var tKe=eKe,nKe=see,t6=1/0,rKe=17976931348623157e292;function sKe(t){if(!t)return t===0?t:0;if(t=nKe(t),t===t6||t===-t6){var e=t<0?-1:1;return e*rKe}return t===t?t:0}var Vte=sKe,iKe=tKe,aKe=$S,AA=Vte;function oKe(t){return function(e,n,r){return r&&typeof r!="number"&&aKe(e,n,r)&&(n=r=void 0),e=AA(e),n===void 0?(n=e,e=0):n=AA(n),r=r===void 0?e<n?1:-1:AA(r),iKe(e,n,r,t)}}var lKe=oKe,cKe=lKe,uKe=cKe(),dKe=uKe;const Ij=vn(dKe);function yx(t){"@babel/helpers - typeof";return yx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yx(t)}function n6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function r6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n6(Object(n),!0).forEach(function(r){Bte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bte(t,e,n){return e=hKe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hKe(t){var e=fKe(t,"string");return yx(e)=="symbol"?e:e+""}function fKe(t,e){if(yx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(yx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mKe=["Webkit","Moz","O","ms"],pKe=function(e,n){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),s=mKe.reduce(function(a,o){return r6(r6({},a),{},Bte({},o+r,n))},{});return s[e]=n,s};function yp(t){"@babel/helpers - typeof";return yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yp(t)}function kj(){return kj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kj.apply(this,arguments)}function s6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function TA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s6(Object(n),!0).forEach(function(r){Si(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gKe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zte(r.key),r)}}function yKe(t,e,n){return e&&i6(t.prototype,e),n&&i6(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function vKe(t,e,n){return e=Rj(e),xKe(t,Ute()?Reflect.construct(e,n||[],Rj(t).constructor):e.apply(t,n))}function xKe(t,e){if(e&&(yp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bKe(t)}function bKe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ute(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ute=function(){return!!t})()}function Rj(t){return Rj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rj(t)}function wKe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&II(t,e)}function II(t,e){return II=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},II(t,e)}function Si(t,e,n){return e=zte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zte(t){var e=_Ke(t,"string");return yp(e)=="symbol"?e:e+""}function _Ke(t,e){if(yp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(yp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jKe=function(e){var n=e.data,r=e.startIndex,s=e.endIndex,a=e.x,o=e.width,l=e.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=qy().domain(Ij(0,c)).range([a,a+o-l]),d=u.domain().map(function(h){return u(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(s),scale:u,scaleValues:d}},a6=function(e){return e.changedTouches&&!!e.changedTouches.length},vp=function(t){function e(n){var r;return gKe(this,e),r=vKe(this,e,[n]),Si(r,"handleDrag",function(s){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(s):r.state.isSlideMoving&&r.handleSlideDrag(s)}),Si(r,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&r.handleDrag(s.changedTouches[0])}),Si(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=r.props,a=s.endIndex,o=s.onDragEnd,l=s.startIndex;o==null||o({endIndex:a,startIndex:l})}),r.detachDragEndListener()}),Si(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Si(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Si(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Si(r,"handleSlideDragStart",function(s){var a=a6(s)?s.changedTouches[0]:s;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return wKe(e,t),yKe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var s=r.startX,a=r.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,h=Math.min(s,a),f=Math.max(s,a),m=e.getIndexInRange(o,h),v=e.getIndexInRange(o,f);return{startIndex:m-m%c,endIndex:v===d?d:v-v%c}}},{key:"getTextOfTick",value:function(r){var s=this.props,a=s.data,o=s.tickFormatter,l=s.dataKey,c=Vr(a[r],l,r);return _t(o)?o(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var s=this.state,a=s.slideMoveStartX,o=s.startX,l=s.endX,c=this.props,u=c.x,d=c.width,h=c.travellerWidth,f=c.startIndex,m=c.endIndex,v=c.onChange,g=r.pageX-a;g>0?g=Math.min(g,u+d-h-l,u+d-h-o):g<0&&(g=Math.max(g,u-o,u-l));var y=this.getIndex({startX:o+g,endX:l+g});(y.startIndex!==f||y.endIndex!==m)&&v&&v(y),this.setState({startX:o+g,endX:l+g,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,s){var a=a6(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var s=this.state,a=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,c=s.startX,u=this.state[o],d=this.props,h=d.x,f=d.width,m=d.travellerWidth,v=d.onChange,g=d.gap,y=d.data,b={startX:this.state.startX,endX:this.state.endX},x=r.pageX-a;x>0?x=Math.min(x,h+f-m-u):x<0&&(x=Math.max(x,h-u)),b[o]=u+x;var S=this.getIndex(b),T=S.startIndex,_=S.endIndex,C=function(){var p=y.length-1;return o==="startX"&&(l>c?T%g===0:_%g===0)||l<c&&_===p||o==="endX"&&(l>c?_%g===0:T%g===0)||l>c&&_===p};this.setState(Si(Si({},o,u+x),"brushMoveStartX",r.pageX),function(){v&&C()&&v(S)})}},{key:"handleTravellerMoveKeyboard",value:function(r,s){var a=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[s],h=l.indexOf(d);if(h!==-1){var f=h+r;if(!(f===-1||f>=l.length)){var m=l[f];s==="startX"&&m>=u||s==="endX"&&m<=c||this.setState(Si({},s,m),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,s=r.x,a=r.y,o=r.width,l=r.height,c=r.fill,u=r.stroke;return F.createElement("rect",{stroke:u,fill:c,x:s,y:a,width:o,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,s=r.x,a=r.y,o=r.width,l=r.height,c=r.data,u=r.children,d=r.padding,h=N.Children.only(u);return h?F.cloneElement(h,{x:s,y:a,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,s){var a,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,h=c.height,f=c.traveller,m=c.ariaLabel,v=c.data,g=c.startIndex,y=c.endIndex,b=Math.max(r,this.props.x),x=TA(TA({},pt(this.props,!1)),{},{x:b,y:u,width:d,height:h}),S=m||"Min value: ".concat((a=v[g])===null||a===void 0?void 0:a.name,", Max value: ").concat((o=v[y])===null||o===void 0?void 0:o.name);return F.createElement(rn,{tabIndex:0,role:"slider","aria-label":S,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(_){["ArrowLeft","ArrowRight"].includes(_.key)&&(_.preventDefault(),_.stopPropagation(),l.handleTravellerMoveKeyboard(_.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,x))}},{key:"renderSlide",value:function(r,s){var a=this.props,o=a.y,l=a.height,c=a.stroke,u=a.travellerWidth,d=Math.min(r,s)+u,h=Math.max(Math.abs(s-r)-u,0);return F.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:h,height:l})}},{key:"renderText",value:function(){var r=this.props,s=r.startIndex,a=r.endIndex,o=r.y,l=r.height,c=r.travellerWidth,u=r.stroke,d=this.state,h=d.startX,f=d.endX,m=5,v={pointerEvents:"none",fill:u};return F.createElement(rn,{className:"recharts-brush-texts"},F.createElement(Mh,kj({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,f)-m,y:o+l/2},v),this.getTextOfTick(s)),F.createElement(Mh,kj({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,f)+c+m,y:o+l/2},v),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,s=r.data,a=r.className,o=r.children,l=r.x,c=r.y,u=r.width,d=r.height,h=r.alwaysShowText,f=this.state,m=f.startX,v=f.endX,g=f.isTextActive,y=f.isSlideMoving,b=f.isTravellerMoving,x=f.isTravellerFocused;if(!s||!s.length||!Ee(l)||!Ee(c)||!Ee(u)||!Ee(d)||u<=0||d<=0)return null;var S=$t("recharts-brush",a),T=F.Children.count(o)===1,_=pKe("userSelect","none");return F.createElement(rn,{className:S,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:_},this.renderBackground(),T&&this.renderPanorama(),this.renderSlide(m,v),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(v,"endX"),(g||y||b||x||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var s=r.x,a=r.y,o=r.width,l=r.height,c=r.stroke,u=Math.floor(a+l/2)-1;return F.createElement(F.Fragment,null,F.createElement("rect",{x:s,y:a,width:o,height:l,fill:c,stroke:"none"}),F.createElement("line",{x1:s+1,y1:u,x2:s+o-1,y2:u,fill:"none",stroke:"#fff"}),F.createElement("line",{x1:s+1,y1:u+2,x2:s+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,s){var a;return F.isValidElement(r)?a=F.cloneElement(r,s):_t(r)?a=r(s):a=e.renderDefaultTraveller(s),a}},{key:"getDerivedStateFromProps",value:function(r,s){var a=r.data,o=r.width,l=r.x,c=r.travellerWidth,u=r.updateId,d=r.startIndex,h=r.endIndex;if(a!==s.prevData||u!==s.prevUpdateId)return TA({prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},a&&a.length?jKe({data:a,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:h}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||c!==s.prevTravellerWidth)){s.scale.range([l,l+o-c]);var f=s.scale.domain().map(function(m){return s.scale(m)});return{prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:s.scale(r.startIndex),endX:s.scale(r.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(r,s){for(var a=r.length,o=0,l=a-1;l-o>1;){var c=Math.floor((o+l)/2);r[c]>s?l=c:o=c}return s>=r[l]?l:o}}])}(N.PureComponent);Si(vp,"displayName","Brush");Si(vp,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var NKe=cM;function SKe(t,e){var n;return NKe(t,function(r,s,a){return n=e(r,s,a),!n}),!!n}var EKe=SKe,AKe=IJ,TKe=Zo,CKe=EKe,PKe=bi,IKe=$S;function kKe(t,e,n){var r=PKe(t)?AKe:CKe;return n&&IKe(t,e,n)&&(e=void 0),r(t,TKe(e))}var RKe=kKe;const OKe=vn(RKe);var Fo=function(e,n){var r=e.alwaysShow,s=e.ifOverflow;return r&&(s="extendDomain"),s===n},o6=JJ;function MKe(t,e,n){e=="__proto__"&&o6?o6(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var DKe=MKe,LKe=DKe,$Ke=XJ,FKe=Zo;function VKe(t,e){var n={};return e=FKe(e),$Ke(t,function(r,s,a){LKe(n,s,e(r,s,a))}),n}var BKe=VKe;const UKe=vn(BKe);function zKe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var qKe=zKe,WKe=cM;function HKe(t,e){var n=!0;return WKe(t,function(r,s,a){return n=!!e(r,s,a),n}),n}var KKe=HKe,GKe=qKe,YKe=KKe,QKe=Zo,XKe=bi,ZKe=$S;function JKe(t,e,n){var r=XKe(t)?GKe:YKe;return n&&ZKe(t,e,n)&&(e=void 0),r(t,QKe(e))}var eGe=JKe;const qte=vn(eGe);var tGe=["x","y"];function vx(t){"@babel/helpers - typeof";return vx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vx(t)}function kI(){return kI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kI.apply(this,arguments)}function l6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Xg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l6(Object(n),!0).forEach(function(r){nGe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nGe(t,e,n){return e=rGe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rGe(t){var e=sGe(t,"string");return vx(e)=="symbol"?e:e+""}function sGe(t,e){if(vx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(vx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iGe(t,e){if(t==null)return{};var n=aGe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function aGe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function oGe(t,e){var n=t.x,r=t.y,s=iGe(t,tGe),a="".concat(n),o=parseInt(a,10),l="".concat(r),c=parseInt(l,10),u="".concat(e.height||s.height),d=parseInt(u,10),h="".concat(e.width||s.width),f=parseInt(h,10);return Xg(Xg(Xg(Xg(Xg({},e),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:f,name:e.name,radius:e.radius})}function c6(t){return F.createElement(Lte,kI({shapeType:"rectangle",propTransformer:oGe,activeClassName:"recharts-active-bar"},t))}var lGe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,s){if(typeof e=="number")return e;var a=Ee(r)||ROe(r);return a?e(r,s):(a||Lh(),n)}},cGe=["value","background"],Wte;function xp(t){"@babel/helpers - typeof";return xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xp(t)}function uGe(t,e){if(t==null)return{};var n=dGe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function dGe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Oj(){return Oj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oj.apply(this,arguments)}function u6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Er(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u6(Object(n),!0).forEach(function(r){Xc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Kte(r.key),r)}}function fGe(t,e,n){return e&&d6(t.prototype,e),n&&d6(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function mGe(t,e,n){return e=Mj(e),pGe(t,Hte()?Reflect.construct(e,n||[],Mj(t).constructor):e.apply(t,n))}function pGe(t,e){if(e&&(xp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gGe(t)}function gGe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hte=function(){return!!t})()}function Mj(t){return Mj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Mj(t)}function yGe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RI(t,e)}function RI(t,e){return RI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},RI(t,e)}function Xc(t,e,n){return e=Kte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kte(t){var e=vGe(t,"string");return xp(e)=="symbol"?e:e+""}function vGe(t,e){if(xp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(xp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tf=function(t){function e(){var n;hGe(this,e);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=mGe(this,e,[].concat(s)),Xc(n,"state",{isAnimationFinished:!1}),Xc(n,"id",ag("recharts-bar-")),Xc(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),Xc(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return yGe(e,t),fGe(e,[{key:"renderRectanglesStatically",value:function(r){var s=this,a=this.props,o=a.shape,l=a.dataKey,c=a.activeIndex,u=a.activeBar,d=pt(this.props,!1);return r&&r.map(function(h,f){var m=f===c,v=m?u:o,g=Er(Er(Er({},d),h),{},{isActive:m,option:v,index:f,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return F.createElement(rn,Oj({className:"recharts-bar-rectangle"},Oh(s.props,h,f),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(f)}),F.createElement(c6,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,s=this.props,a=s.data,o=s.layout,l=s.isAnimationActive,c=s.animationBegin,u=s.animationDuration,d=s.animationEasing,h=s.animationId,f=this.state.prevData;return F.createElement(Wo,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var v=m.t,g=a.map(function(y,b){var x=f&&f[b];if(x){var S=ci(x.x,y.x),T=ci(x.y,y.y),_=ci(x.width,y.width),C=ci(x.height,y.height);return Er(Er({},y),{},{x:S(v),y:T(v),width:_(v),height:C(v)})}if(o==="horizontal"){var E=ci(0,y.height),p=E(v);return Er(Er({},y),{},{y:y.y+y.height-p,height:p})}var w=ci(0,y.width),A=w(v);return Er(Er({},y),{},{width:A})});return F.createElement(rn,null,r.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var r=this.props,s=r.data,a=r.isAnimationActive,o=this.state.prevData;return a&&s&&s.length&&(!o||!dp(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var r=this,s=this.props,a=s.data,o=s.dataKey,l=s.activeIndex,c=pt(this.props.background,!1);return a.map(function(u,d){u.value;var h=u.background,f=uGe(u,cGe);if(!h)return null;var m=Er(Er(Er(Er(Er({},f),{},{fill:"#eee"},h),c),Oh(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return F.createElement(c6,Oj({key:"background-bar-".concat(d),option:r.props.background,isActive:d===l},m))})}},{key:"renderErrorBar",value:function(r,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.data,l=a.xAxis,c=a.yAxis,u=a.layout,d=a.children,h=ua(d,QS);if(!h)return null;var f=u==="vertical"?o[0].height/2:o[0].width/2,m=function(y,b){var x=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:x,errorVal:Vr(y,b)}},v={clipPath:r?"url(#clipPath-".concat(s,")"):null};return F.createElement(rn,v,h.map(function(g){return F.cloneElement(g,{key:"error-bar-".concat(s,"-").concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:f,dataPointFormatter:m})}))}},{key:"render",value:function(){var r=this.props,s=r.hide,a=r.data,o=r.className,l=r.xAxis,c=r.yAxis,u=r.left,d=r.top,h=r.width,f=r.height,m=r.isAnimationActive,v=r.background,g=r.id;if(s||!a||!a.length)return null;var y=this.state.isAnimationFinished,b=$t("recharts-bar",o),x=l&&l.allowDataOverflow,S=c&&c.allowDataOverflow,T=x||S,_=Ft(g)?this.id:g;return F.createElement(rn,{className:b},x||S?F.createElement("defs",null,F.createElement("clipPath",{id:"clipPath-".concat(_)},F.createElement("rect",{x:x?u:u-h/2,y:S?d:d-f/2,width:x?h:h*2,height:S?f:f*2}))):null,F.createElement(rn,{className:"recharts-bar-rectangles",clipPath:T?"url(#clipPath-".concat(_,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(T,_),(!m||y)&&jl.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:s.curData}:r.data!==s.curData?{curData:r.data}:null}}])}(N.PureComponent);Wte=tf;Xc(tf,"displayName","Bar");Xc(tf,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Lo.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Xc(tf,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,s=t.bandSize,a=t.xAxis,o=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,u=t.stackedData,d=t.dataStartIndex,h=t.displayedData,f=t.offset,m=Z9e(r,n);if(!m)return null;var v=e.layout,g=n.type.defaultProps,y=g!==void 0?Er(Er({},g),n.props):n.props,b=y.dataKey,x=y.children,S=y.minPointSize,T=v==="horizontal"?o:a,_=u?T.scale.domain():null,C=iqe({numericAxis:T}),E=ua(x,FS),p=h.map(function(w,A){var P,I,k,L,U,z;u?P=J9e(u[d+A],_):(P=Vr(w,b),Array.isArray(P)||(P=[C,P]));var O=lGe(S,Wte.defaultProps.minPointSize)(P[1],A);if(v==="horizontal"){var $,D=[o.scale(P[0]),o.scale(P[1])],K=D[0],ie=D[1];I=eU({axis:a,ticks:l,bandSize:s,offset:m.offset,entry:w,index:A}),k=($=ie??K)!==null&&$!==void 0?$:void 0,L=m.size;var ae=K-ie;if(U=Number.isNaN(ae)?0:ae,z={x:I,y:o.y,width:L,height:o.height},Math.abs(O)>0&&Math.abs(U)<Math.abs(O)){var _e=Hs(U||O)*(Math.abs(O)-Math.abs(U));k-=_e,U+=_e}}else{var Le=[a.scale(P[0]),a.scale(P[1])],ct=Le[0],Nt=Le[1];if(I=ct,k=eU({axis:o,ticks:c,bandSize:s,offset:m.offset,entry:w,index:A}),L=Nt-ct,U=m.size,z={x:a.x,y:k,width:a.width,height:U},Math.abs(O)>0&&Math.abs(L)<Math.abs(O)){var Ne=Hs(L||O)*(Math.abs(O)-Math.abs(L));L+=Ne}}return Er(Er(Er({},w),{},{x:I,y:k,width:L,height:U,value:u?P:P[1],payload:w,background:z},E&&E[A]&&E[A].props),{},{tooltipPayload:[pte(n,w)],tooltipPosition:{x:I+L/2,y:k+U/2}})});return Er({data:p,layout:v},f)});function xx(t){"@babel/helpers - typeof";return xx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xx(t)}function xGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gte(r.key),r)}}function bGe(t,e,n){return e&&h6(t.prototype,e),n&&h6(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function f6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Da(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f6(Object(n),!0).forEach(function(r){s1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function s1(t,e,n){return e=Gte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gte(t){var e=wGe(t,"string");return xx(e)=="symbol"?e:e+""}function wGe(t,e){if(xx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(xx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yte=function(e,n,r,s,a){var o=e.width,l=e.height,c=e.layout,u=e.children,d=Object.keys(n),h={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},f=!!Ai(u,tf);return d.reduce(function(m,v){var g=n[v],y=g.orientation,b=g.domain,x=g.padding,S=x===void 0?{}:x,T=g.mirror,_=g.reversed,C="".concat(y).concat(T?"Mirror":""),E,p,w,A,P;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var I=b[1]-b[0],k=1/0,L=g.categoricalDomain.sort(DOe);if(L.forEach(function(Le,ct){ct>0&&(k=Math.min((Le||0)-(L[ct-1]||0),k))}),Number.isFinite(k)){var U=k/I,z=g.layout==="vertical"?r.height:r.width;if(g.padding==="gap"&&(E=U*z/2),g.padding==="no-gap"){var O=Ks(e.barCategoryGap,U*z),$=U*z/2;E=$-O-($-O)/z*O}}}s==="xAxis"?p=[r.left+(S.left||0)+(E||0),r.left+r.width-(S.right||0)-(E||0)]:s==="yAxis"?p=c==="horizontal"?[r.top+r.height-(S.bottom||0),r.top+(S.top||0)]:[r.top+(S.top||0)+(E||0),r.top+r.height-(S.bottom||0)-(E||0)]:p=g.range,_&&(p=[p[1],p[0]]);var D=dte(g,a,f),K=D.scale,ie=D.realScaleType;K.domain(b).range(p),hte(K);var ae=fte(K,Da(Da({},g),{},{realScaleType:ie}));s==="xAxis"?(P=y==="top"&&!T||y==="bottom"&&T,w=r.left,A=h[C]-P*g.height):s==="yAxis"&&(P=y==="left"&&!T||y==="right"&&T,w=h[C]-P*g.width,A=r.top);var _e=Da(Da(Da({},g),ae),{},{realScaleType:ie,x:w,y:A,scale:K,width:s==="xAxis"?r.width:g.width,height:s==="yAxis"?r.height:g.height});return _e.bandSize=xj(_e,ae),!g.hide&&s==="xAxis"?h[C]+=(P?-1:1)*_e.height:g.hide||(h[C]+=(P?-1:1)*_e.width),Da(Da({},m),{},s1({},v,_e))},{})},Qte=function(e,n){var r=e.x,s=e.y,a=n.x,o=n.y;return{x:Math.min(r,a),y:Math.min(s,o),width:Math.abs(a-r),height:Math.abs(o-s)}},_Ge=function(e){var n=e.x1,r=e.y1,s=e.x2,a=e.y2;return Qte({x:n,y:r},{x:s,y:a})},Xte=function(){function t(e){xGe(this,t),this.scale=e}return bGe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(s){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),s=r[0],a=r[r.length-1];return s<=a?n>=s&&n<=a:n>=a&&n<=s}}],[{key:"create",value:function(n){return new t(n)}}])}();s1(Xte,"EPS",1e-4);var $M=function(e){var n=Object.keys(e).reduce(function(r,s){return Da(Da({},r),{},s1({},s,Xte.create(e[s])))},{});return Da(Da({},n),{},{apply:function(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.bandAware,l=a.position;return UKe(s,function(c,u){return n[u].apply(c,{bandAware:o,position:l})})},isInRange:function(s){return qte(s,function(a,o){return n[o].isInRange(a)})}})};function jGe(t){return(t%180+180)%180}var NGe=function(e){var n=e.width,r=e.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=jGe(s),o=a*Math.PI/180,l=Math.atan(r/n),c=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(c)},SGe=Zo,EGe=xb,AGe=DS;function TGe(t){return function(e,n,r){var s=Object(e);if(!EGe(e)){var a=SGe(n);e=AGe(e),n=function(l){return a(s[l],l,s)}}var o=t(e,n,r);return o>-1?s[a?e[o]:o]:void 0}}var CGe=TGe,PGe=Vte;function IGe(t){var e=PGe(t),n=e%1;return e===e?n?e-n:e:0}var kGe=IGe,RGe=WJ,OGe=Zo,MGe=kGe,DGe=Math.max;function LGe(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var s=n==null?0:MGe(n);return s<0&&(s=DGe(r+s,0)),RGe(t,OGe(e),s)}var $Ge=LGe,FGe=CGe,VGe=$Ge,BGe=FGe(VGe),UGe=BGe;const zGe=vn(UGe);var qGe=LRe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),FM=N.createContext(void 0),VM=N.createContext(void 0),Zte=N.createContext(void 0),Jte=N.createContext({}),ene=N.createContext(void 0),tne=N.createContext(0),nne=N.createContext(0),m6=function(e){var n=e.state,r=n.xAxisMap,s=n.yAxisMap,a=n.offset,o=e.clipPathId,l=e.children,c=e.width,u=e.height,d=qGe(a);return F.createElement(FM.Provider,{value:r},F.createElement(VM.Provider,{value:s},F.createElement(Jte.Provider,{value:a},F.createElement(Zte.Provider,{value:d},F.createElement(ene.Provider,{value:o},F.createElement(tne.Provider,{value:u},F.createElement(nne.Provider,{value:c},l)))))))},WGe=function(){return N.useContext(ene)},rne=function(e){var n=N.useContext(FM);n==null&&Lh();var r=n[e];return r==null&&Lh(),r},HGe=function(){var e=N.useContext(FM);return Rc(e)},KGe=function(){var e=N.useContext(VM),n=zGe(e,function(r){return qte(r.domain,Number.isFinite)});return n||Rc(e)},sne=function(e){var n=N.useContext(VM);n==null&&Lh();var r=n[e];return r==null&&Lh(),r},GGe=function(){var e=N.useContext(Zte);return e},YGe=function(){return N.useContext(Jte)},BM=function(){return N.useContext(nne)},UM=function(){return N.useContext(tne)};function bp(t){"@babel/helpers - typeof";return bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bp(t)}function QGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function XGe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ane(r.key),r)}}function ZGe(t,e,n){return e&&XGe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function JGe(t,e,n){return e=Dj(e),eYe(t,ine()?Reflect.construct(e,n||[],Dj(t).constructor):e.apply(t,n))}function eYe(t,e){if(e&&(bp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tYe(t)}function tYe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ine(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ine=function(){return!!t})()}function Dj(t){return Dj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dj(t)}function nYe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OI(t,e)}function OI(t,e){return OI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},OI(t,e)}function p6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function g6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p6(Object(n),!0).forEach(function(r){zM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zM(t,e,n){return e=ane(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ane(t){var e=rYe(t,"string");return bp(e)=="symbol"?e:e+""}function rYe(t,e){if(bp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(bp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sYe(t,e){return lYe(t)||oYe(t,e)||aYe(t,e)||iYe()}function iYe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aYe(t,e){if(t){if(typeof t=="string")return y6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y6(t,e)}}function y6(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function oYe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function lYe(t){if(Array.isArray(t))return t}function MI(){return MI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MI.apply(this,arguments)}var cYe=function(e,n){var r;return F.isValidElement(e)?r=F.cloneElement(e,n):_t(e)?r=e(n):r=F.createElement("line",MI({},n,{className:"recharts-reference-line-line"})),r},uYe=function(e,n,r,s,a,o,l,c,u){var d=a.x,h=a.y,f=a.width,m=a.height;if(r){var v=u.y,g=e.y.apply(v,{position:o});if(Fo(u,"discard")&&!e.y.isInRange(g))return null;var y=[{x:d+f,y:g},{x:d,y:g}];return c==="left"?y.reverse():y}if(n){var b=u.x,x=e.x.apply(b,{position:o});if(Fo(u,"discard")&&!e.x.isInRange(x))return null;var S=[{x,y:h+m},{x,y:h}];return l==="top"?S.reverse():S}if(s){var T=u.segment,_=T.map(function(C){return e.apply(C,{position:o})});return Fo(u,"discard")&&OKe(_,function(C){return!e.isInRange(C)})?null:_}return null};function dYe(t){var e=t.x,n=t.y,r=t.segment,s=t.xAxisId,a=t.yAxisId,o=t.shape,l=t.className,c=t.alwaysShow,u=WGe(),d=rne(s),h=sne(a),f=GGe();if(!u||!f)return null;Ga(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=$M({x:d.scale,y:h.scale}),v=zr(e),g=zr(n),y=r&&r.length===2,b=uYe(m,v,g,y,f,t.position,d.orientation,h.orientation,t);if(!b)return null;var x=sYe(b,2),S=x[0],T=S.x,_=S.y,C=x[1],E=C.x,p=C.y,w=Fo(t,"hidden")?"url(#".concat(u,")"):void 0,A=g6(g6({clipPath:w},pt(t,!0)),{},{x1:T,y1:_,x2:E,y2:p});return F.createElement(rn,{className:$t("recharts-reference-line",l)},cYe(o,A),Zr.renderCallByParent(t,_Ge({x1:T,y1:_,x2:E,y2:p})))}var qM=function(t){function e(){return QGe(this,e),JGe(this,e,arguments)}return nYe(e,t),ZGe(e,[{key:"render",value:function(){return F.createElement(dYe,this.props)}}])}(F.Component);zM(qM,"displayName","ReferenceLine");zM(qM,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function DI(){return DI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DI.apply(this,arguments)}function wp(t){"@babel/helpers - typeof";return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wp(t)}function v6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function x6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v6(Object(n),!0).forEach(function(r){i1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hYe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fYe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lne(r.key),r)}}function mYe(t,e,n){return e&&fYe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function pYe(t,e,n){return e=Lj(e),gYe(t,one()?Reflect.construct(e,n||[],Lj(t).constructor):e.apply(t,n))}function gYe(t,e){if(e&&(wp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yYe(t)}function yYe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function one(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(one=function(){return!!t})()}function Lj(t){return Lj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Lj(t)}function vYe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LI(t,e)}function LI(t,e){return LI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},LI(t,e)}function i1(t,e,n){return e=lne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lne(t){var e=xYe(t,"string");return wp(e)=="symbol"?e:e+""}function xYe(t,e){if(wp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(wp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bYe=function(e){var n=e.x,r=e.y,s=e.xAxis,a=e.yAxis,o=$M({x:s.scale,y:a.scale}),l=o.apply({x:n,y:r},{bandAware:!0});return Fo(e,"discard")&&!o.isInRange(l)?null:l},a1=function(t){function e(){return hYe(this,e),pYe(this,e,arguments)}return vYe(e,t),mYe(e,[{key:"render",value:function(){var r=this.props,s=r.x,a=r.y,o=r.r,l=r.alwaysShow,c=r.clipPathId,u=zr(s),d=zr(a);if(Ga(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var h=bYe(this.props);if(!h)return null;var f=h.x,m=h.y,v=this.props,g=v.shape,y=v.className,b=Fo(this.props,"hidden")?"url(#".concat(c,")"):void 0,x=x6(x6({clipPath:b},pt(this.props,!0)),{},{cx:f,cy:m});return F.createElement(rn,{className:$t("recharts-reference-dot",y)},e.renderDot(g,x),Zr.renderCallByParent(this.props,{x:f-o,y:m-o,width:2*o,height:2*o}))}}])}(F.Component);i1(a1,"displayName","ReferenceDot");i1(a1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});i1(a1,"renderDot",function(t,e){var n;return F.isValidElement(t)?n=F.cloneElement(t,e):_t(t)?n=t(e):n=F.createElement(XS,DI({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function $I(){return $I=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$I.apply(this,arguments)}function _p(t){"@babel/helpers - typeof";return _p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_p(t)}function b6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function w6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b6(Object(n),!0).forEach(function(r){o1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wYe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _Ye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,une(r.key),r)}}function jYe(t,e,n){return e&&_Ye(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function NYe(t,e,n){return e=$j(e),SYe(t,cne()?Reflect.construct(e,n||[],$j(t).constructor):e.apply(t,n))}function SYe(t,e){if(e&&(_p(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EYe(t)}function EYe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cne=function(){return!!t})()}function $j(t){return $j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$j(t)}function AYe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FI(t,e)}function FI(t,e){return FI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},FI(t,e)}function o1(t,e,n){return e=une(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function une(t){var e=TYe(t,"string");return _p(e)=="symbol"?e:e+""}function TYe(t,e){if(_p(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_p(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CYe=function(e,n,r,s,a){var o=a.x1,l=a.x2,c=a.y1,u=a.y2,d=a.xAxis,h=a.yAxis;if(!d||!h)return null;var f=$M({x:d.scale,y:h.scale}),m={x:e?f.x.apply(o,{position:"start"}):f.x.rangeMin,y:r?f.y.apply(c,{position:"start"}):f.y.rangeMin},v={x:n?f.x.apply(l,{position:"end"}):f.x.rangeMax,y:s?f.y.apply(u,{position:"end"}):f.y.rangeMax};return Fo(a,"discard")&&(!f.isInRange(m)||!f.isInRange(v))?null:Qte(m,v)},l1=function(t){function e(){return wYe(this,e),NYe(this,e,arguments)}return AYe(e,t),jYe(e,[{key:"render",value:function(){var r=this.props,s=r.x1,a=r.x2,o=r.y1,l=r.y2,c=r.className,u=r.alwaysShow,d=r.clipPathId;Ga(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=zr(s),f=zr(a),m=zr(o),v=zr(l),g=this.props.shape;if(!h&&!f&&!m&&!v&&!g)return null;var y=CYe(h,f,m,v,this.props);if(!y&&!g)return null;var b=Fo(this.props,"hidden")?"url(#".concat(d,")"):void 0;return F.createElement(rn,{className:$t("recharts-reference-area",c)},e.renderRect(g,w6(w6({clipPath:b},pt(this.props,!0)),y)),Zr.renderCallByParent(this.props,y))}}])}(F.Component);o1(l1,"displayName","ReferenceArea");o1(l1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});o1(l1,"renderRect",function(t,e){var n;return F.isValidElement(t)?n=F.cloneElement(t,e):_t(t)?n=t(e):n=F.createElement(LM,$I({},e,{className:"recharts-reference-area-rect"})),n});function dne(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],s=0;s<t.length;s+=e)r.push(t[s]);return r}function PYe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return NGe(r,n)}function IYe(t,e,n){var r=n==="width",s=t.x,a=t.y,o=t.width,l=t.height;return e===1?{start:r?s:a,end:r?s+o:a+l}:{start:r?s+o:a+l,end:r?s:a}}function Fj(t,e,n,r,s){if(t*e<t*r||t*e>t*s)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-s)<=0}function kYe(t,e){return dne(t,e+1)}function RYe(t,e,n,r,s){for(var a=(r||[]).slice(),o=e.start,l=e.end,c=0,u=1,d=o,h=function(){var v=r==null?void 0:r[c];if(v===void 0)return{v:dne(r,u)};var g=c,y,b=function(){return y===void 0&&(y=n(v,g)),y},x=v.coordinate,S=c===0||Fj(t,x,b,d,l);S||(c=0,d=o,u+=1),S&&(d=x+t*(b()/2+s),c+=u)},f;u<=a.length;)if(f=h(),f)return f.v;return[]}function bx(t){"@babel/helpers - typeof";return bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bx(t)}function _6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function _s(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_6(Object(n),!0).forEach(function(r){OYe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OYe(t,e,n){return e=MYe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MYe(t){var e=DYe(t,"string");return bx(e)=="symbol"?e:e+""}function DYe(t,e){if(bx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(bx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LYe(t,e,n,r,s){for(var a=(r||[]).slice(),o=a.length,l=e.start,c=e.end,u=function(f){var m=a[f],v,g=function(){return v===void 0&&(v=n(m,f)),v};if(f===o-1){var y=t*(m.coordinate+t*g()/2-c);a[f]=m=_s(_s({},m),{},{tickCoord:y>0?m.coordinate-y*t:m.coordinate})}else a[f]=m=_s(_s({},m),{},{tickCoord:m.coordinate});var b=Fj(t,m.tickCoord,g,l,c);b&&(c=m.tickCoord-t*(g()/2+s),a[f]=_s(_s({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return a}function $Ye(t,e,n,r,s,a){var o=(r||[]).slice(),l=o.length,c=e.start,u=e.end;if(a){var d=r[l-1],h=n(d,l-1),f=t*(d.coordinate+t*h/2-u);o[l-1]=d=_s(_s({},d),{},{tickCoord:f>0?d.coordinate-f*t:d.coordinate});var m=Fj(t,d.tickCoord,function(){return h},c,u);m&&(u=d.tickCoord-t*(h/2+s),o[l-1]=_s(_s({},d),{},{isShow:!0}))}for(var v=a?l-1:l,g=function(x){var S=o[x],T,_=function(){return T===void 0&&(T=n(S,x)),T};if(x===0){var C=t*(S.coordinate-t*_()/2-c);o[x]=S=_s(_s({},S),{},{tickCoord:C<0?S.coordinate-C*t:S.coordinate})}else o[x]=S=_s(_s({},S),{},{tickCoord:S.coordinate});var E=Fj(t,S.tickCoord,_,c,u);E&&(c=S.tickCoord+t*(_()/2+s),o[x]=_s(_s({},S),{},{isShow:!0}))},y=0;y<v;y++)g(y);return o}function WM(t,e,n){var r=t.tick,s=t.ticks,a=t.viewBox,o=t.minTickGap,l=t.orientation,c=t.interval,u=t.tickFormatter,d=t.unit,h=t.angle;if(!s||!s.length||!r)return[];if(Ee(c)||Lo.isSsr)return kYe(s,typeof c=="number"&&Ee(c)?c:0);var f=[],m=l==="top"||l==="bottom"?"width":"height",v=d&&m==="width"?zy(d,{fontSize:e,letterSpacing:n}):{width:0,height:0},g=function(S,T){var _=_t(u)?u(S.value,T):S.value;return m==="width"?PYe(zy(_,{fontSize:e,letterSpacing:n}),v,h):zy(_,{fontSize:e,letterSpacing:n})[m]},y=s.length>=2?Hs(s[1].coordinate-s[0].coordinate):1,b=IYe(a,y,m);return c==="equidistantPreserveStart"?RYe(y,b,g,s,o):(c==="preserveStart"||c==="preserveStartEnd"?f=$Ye(y,b,g,s,o,c==="preserveStartEnd"):f=LYe(y,b,g,s,o),f.filter(function(x){return x.isShow}))}var FYe=["viewBox"],VYe=["viewBox"],BYe=["ticks"];function jp(t){"@babel/helpers - typeof";return jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jp(t)}function Gf(){return Gf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gf.apply(this,arguments)}function j6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Or(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j6(Object(n),!0).forEach(function(r){HM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CA(t,e){if(t==null)return{};var n=UYe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function UYe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function zYe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fne(r.key),r)}}function qYe(t,e,n){return e&&N6(t.prototype,e),n&&N6(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function WYe(t,e,n){return e=Vj(e),HYe(t,hne()?Reflect.construct(e,n||[],Vj(t).constructor):e.apply(t,n))}function HYe(t,e){if(e&&(jp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KYe(t)}function KYe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hne=function(){return!!t})()}function Vj(t){return Vj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vj(t)}function GYe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VI(t,e)}function VI(t,e){return VI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},VI(t,e)}function HM(t,e,n){return e=fne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fne(t){var e=YYe(t,"string");return jp(e)=="symbol"?e:e+""}function YYe(t,e){if(jp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(jp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fg=function(t){function e(n){var r;return zYe(this,e),r=WYe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return GYe(e,t),qYe(e,[{key:"shouldComponentUpdate",value:function(r,s){var a=r.viewBox,o=CA(r,FYe),l=this.props,c=l.viewBox,u=CA(l,VYe);return!fm(a,c)||!fm(o,u)||!fm(s,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var s=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var s=this.props,a=s.x,o=s.y,l=s.width,c=s.height,u=s.orientation,d=s.tickSize,h=s.mirror,f=s.tickMargin,m,v,g,y,b,x,S=h?-1:1,T=r.tickSize||d,_=Ee(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":m=v=r.coordinate,y=o+ +!h*c,g=y-S*T,x=g-S*f,b=_;break;case"left":g=y=r.coordinate,v=a+ +!h*l,m=v-S*T,b=m-S*f,x=_;break;case"right":g=y=r.coordinate,v=a+ +h*l,m=v+S*T,b=m+S*f,x=_;break;default:m=v=r.coordinate,y=o+ +h*c,g=y+S*T,x=g+S*f,b=_;break}return{line:{x1:m,y1:g,x2:v,y2:y},tick:{x:b,y:x}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,s=r.orientation,a=r.mirror,o;switch(s){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,s=r.orientation,a=r.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.x,a=r.y,o=r.width,l=r.height,c=r.orientation,u=r.mirror,d=r.axisLine,h=Or(Or(Or({},pt(this.props,!1)),pt(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!u||c==="bottom"&&u);h=Or(Or({},h),{},{x1:s,y1:a+f*l,x2:s+o,y2:a+f*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);h=Or(Or({},h),{},{x1:s+m*o,y1:a,x2:s+m*o,y2:a+l})}return F.createElement("line",Gf({},h,{className:$t("recharts-cartesian-axis-line",$i(d,"className"))}))}},{key:"renderTicks",value:function(r,s,a){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,h=l.tickFormatter,f=l.unit,m=WM(Or(Or({},this.props),{},{ticks:r}),s,a),v=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),y=pt(this.props,!1),b=pt(d,!1),x=Or(Or({},y),{},{fill:"none"},pt(c,!1)),S=m.map(function(T,_){var C=o.getTickLineCoord(T),E=C.line,p=C.tick,w=Or(Or(Or(Or({textAnchor:v,verticalAnchor:g},y),{},{stroke:"none",fill:u},b),p),{},{index:_,payload:T,visibleTicksCount:m.length,tickFormatter:h});return F.createElement(rn,Gf({className:"recharts-cartesian-axis-tick",key:"tick-".concat(T.value,"-").concat(T.coordinate,"-").concat(T.tickCoord)},Oh(o.props,T,_)),c&&F.createElement("line",Gf({},x,E,{className:$t("recharts-cartesian-axis-tick-line",$i(c,"className"))})),d&&e.renderTickItem(d,w,"".concat(_t(h)?h(T.value,_):T.value).concat(f||"")))});return F.createElement("g",{className:"recharts-cartesian-axis-ticks"},S)}},{key:"render",value:function(){var r=this,s=this.props,a=s.axisLine,o=s.width,l=s.height,c=s.ticksGenerator,u=s.className,d=s.hide;if(d)return null;var h=this.props,f=h.ticks,m=CA(h,BYe),v=f;return _t(c)&&(v=f&&f.length>0?c(this.props):c(m)),o<=0||l<=0||!v||!v.length?null:F.createElement(rn,{className:$t("recharts-cartesian-axis",u),ref:function(y){r.layerReference=y}},a&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),Zr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,s,a){var o,l=$t(s.className,"recharts-cartesian-axis-tick-value");return F.isValidElement(r)?o=F.cloneElement(r,Or(Or({},s),{},{className:l})):_t(r)?o=r(Or(Or({},s),{},{className:l})):o=F.createElement(Mh,Gf({},s,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])}(N.Component);HM(fg,"displayName","CartesianAxis");HM(fg,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var QYe=["x1","y1","x2","y2","key"],XYe=["offset"];function $h(t){"@babel/helpers - typeof";return $h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$h(t)}function S6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Cs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S6(Object(n),!0).forEach(function(r){ZYe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZYe(t,e,n){return e=JYe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JYe(t){var e=eQe(t,"string");return $h(e)=="symbol"?e:e+""}function eQe(t,e){if($h(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if($h(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vd(){return Vd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vd.apply(this,arguments)}function E6(t,e){if(t==null)return{};var n=tQe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function tQe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var nQe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,s=e.x,a=e.y,o=e.width,l=e.height,c=e.ry;return F.createElement("rect",{x:s,y:a,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function mne(t,e){var n;if(F.isValidElement(t))n=F.cloneElement(t,e);else if(_t(t))n=t(e);else{var r=e.x1,s=e.y1,a=e.x2,o=e.y2,l=e.key,c=E6(e,QYe),u=pt(c,!1);u.offset;var d=E6(u,XYe);n=F.createElement("line",Vd({},d,{x1:r,y1:s,x2:a,y2:o,fill:"none",key:l}))}return n}function rQe(t){var e=t.x,n=t.width,r=t.horizontal,s=r===void 0?!0:r,a=t.horizontalPoints;if(!s||!a||!a.length)return null;var o=a.map(function(l,c){var u=Cs(Cs({},t),{},{x1:e,y1:l,x2:e+n,y2:l,key:"line-".concat(c),index:c});return mne(s,u)});return F.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function sQe(t){var e=t.y,n=t.height,r=t.vertical,s=r===void 0?!0:r,a=t.verticalPoints;if(!s||!a||!a.length)return null;var o=a.map(function(l,c){var u=Cs(Cs({},t),{},{x1:l,y1:e,x2:l,y2:e+n,key:"line-".concat(c),index:c});return mne(s,u)});return F.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function iQe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,s=t.y,a=t.width,o=t.height,l=t.horizontalPoints,c=t.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var d=l.map(function(f){return Math.round(f+s-s)}).sort(function(f,m){return f-m});s!==d[0]&&d.unshift(0);var h=d.map(function(f,m){var v=!d[m+1],g=v?s+o-f:d[m+1]-f;if(g<=0)return null;var y=m%e.length;return F.createElement("rect",{key:"react-".concat(m),y:f,x:r,height:g,width:a,stroke:"none",fill:e[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return F.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function aQe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,s=t.fillOpacity,a=t.x,o=t.y,l=t.width,c=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(f){return Math.round(f+a-a)}).sort(function(f,m){return f-m});a!==d[0]&&d.unshift(0);var h=d.map(function(f,m){var v=!d[m+1],g=v?a+l-f:d[m+1]-f;if(g<=0)return null;var y=m%r.length;return F.createElement("rect",{key:"react-".concat(m),x:f,y:o,width:g,height:c,stroke:"none",fill:r[y],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return F.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var oQe=function(e,n){var r=e.xAxis,s=e.width,a=e.height,o=e.offset;return ute(WM(Cs(Cs(Cs({},fg.defaultProps),r),{},{ticks:yl(r,!0),viewBox:{x:0,y:0,width:s,height:a}})),o.left,o.left+o.width,n)},lQe=function(e,n){var r=e.yAxis,s=e.width,a=e.height,o=e.offset;return ute(WM(Cs(Cs(Cs({},fg.defaultProps),r),{},{ticks:yl(r,!0),viewBox:{x:0,y:0,width:s,height:a}})),o.top,o.top+o.height,n)},gf={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function pne(t){var e,n,r,s,a,o,l=BM(),c=UM(),u=YGe(),d=Cs(Cs({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:gf.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:gf.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:gf.horizontal,horizontalFill:(s=t.horizontalFill)!==null&&s!==void 0?s:gf.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:gf.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:gf.verticalFill,x:Ee(t.x)?t.x:u.left,y:Ee(t.y)?t.y:u.top,width:Ee(t.width)?t.width:u.width,height:Ee(t.height)?t.height:u.height}),h=d.x,f=d.y,m=d.width,v=d.height,g=d.syncWithTicks,y=d.horizontalValues,b=d.verticalValues,x=HGe(),S=KGe();if(!Ee(m)||m<=0||!Ee(v)||v<=0||!Ee(h)||h!==+h||!Ee(f)||f!==+f)return null;var T=d.verticalCoordinatesGenerator||oQe,_=d.horizontalCoordinatesGenerator||lQe,C=d.horizontalPoints,E=d.verticalPoints;if((!C||!C.length)&&_t(_)){var p=y&&y.length,w=_({yAxis:S?Cs(Cs({},S),{},{ticks:p?y:S.ticks}):void 0,width:l,height:c,offset:u},p?!0:g);Ga(Array.isArray(w),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat($h(w),"]")),Array.isArray(w)&&(C=w)}if((!E||!E.length)&&_t(T)){var A=b&&b.length,P=T({xAxis:x?Cs(Cs({},x),{},{ticks:A?b:x.ticks}):void 0,width:l,height:c,offset:u},A?!0:g);Ga(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat($h(P),"]")),Array.isArray(P)&&(E=P)}return F.createElement("g",{className:"recharts-cartesian-grid"},F.createElement(nQe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),F.createElement(rQe,Vd({},d,{offset:u,horizontalPoints:C,xAxis:x,yAxis:S})),F.createElement(sQe,Vd({},d,{offset:u,verticalPoints:E,xAxis:x,yAxis:S})),F.createElement(iQe,Vd({},d,{horizontalPoints:C})),F.createElement(aQe,Vd({},d,{verticalPoints:E})))}pne.displayName="CartesianGrid";var cQe=["layout","type","stroke","connectNulls","isRange","ref"],uQe=["key"],gne;function Np(t){"@babel/helpers - typeof";return Np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Np(t)}function yne(t,e){if(t==null)return{};var n=dQe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function dQe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Bd(){return Bd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bd.apply(this,arguments)}function A6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function bc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A6(Object(n),!0).forEach(function(r){So(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hQe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xne(r.key),r)}}function fQe(t,e,n){return e&&T6(t.prototype,e),n&&T6(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function mQe(t,e,n){return e=Bj(e),pQe(t,vne()?Reflect.construct(e,n||[],Bj(t).constructor):e.apply(t,n))}function pQe(t,e){if(e&&(Np(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gQe(t)}function gQe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vne=function(){return!!t})()}function Bj(t){return Bj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bj(t)}function yQe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BI(t,e)}function BI(t,e){return BI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},BI(t,e)}function So(t,e,n){return e=xne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xne(t){var e=vQe(t,"string");return Np(e)=="symbol"?e:e+""}function vQe(t,e){if(Np(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Np(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ql=function(t){function e(){var n;hQe(this,e);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=mQe(this,e,[].concat(s)),So(n,"state",{isAnimationFinished:!0}),So(n,"id",ag("recharts-area-")),So(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),_t(o)&&o()}),So(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),_t(o)&&o()}),n}return yQe(e,t),fQe(e,[{key:"renderDots",value:function(r,s,a){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,d=c.points,h=c.dataKey,f=pt(this.props,!1),m=pt(u,!0),v=d.map(function(y,b){var x=bc(bc(bc({key:"dot-".concat(b),r:3},f),m),{},{index:b,cx:y.x,cy:y.y,dataKey:h,value:y.value,payload:y.payload,points:d});return e.renderDotItem(u,x)}),g={clipPath:r?"url(#clipPath-".concat(s?"":"dots-").concat(a,")"):null};return F.createElement(rn,Bd({className:"recharts-area-dots"},g),v)}},{key:"renderHorizontalRect",value:function(r){var s=this.props,a=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].x,u=o[o.length-1].x,d=r*Math.abs(c-u),h=Qc(o.map(function(f){return f.y||0}));return Ee(a)&&typeof a=="number"?h=Math.max(a,h):a&&Array.isArray(a)&&a.length&&(h=Math.max(Qc(a.map(function(f){return f.y||0})),h)),Ee(h)?F.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(h+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var s=this.props,a=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].y,u=o[o.length-1].y,d=r*Math.abs(c-u),h=Qc(o.map(function(f){return f.x||0}));return Ee(a)&&typeof a=="number"?h=Math.max(a,h):a&&Array.isArray(a)&&a.length&&(h=Math.max(Qc(a.map(function(f){return f.x||0})),h)),Ee(h)?F.createElement("rect",{x:0,y:c<u?c:c-d,width:h+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(r){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,s,a,o){var l=this.props,c=l.layout,u=l.type,d=l.stroke,h=l.connectNulls,f=l.isRange;l.ref;var m=yne(l,cQe);return F.createElement(rn,{clipPath:a?"url(#clipPath-".concat(o,")"):null},F.createElement(ym,Bd({},pt(m,!0),{points:r,connectNulls:h,type:u,baseLine:s,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&F.createElement(ym,Bd({},pt(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:r})),d!=="none"&&f&&F.createElement(ym,Bd({},pt(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(r,s){var a=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,h=o.animationDuration,f=o.animationEasing,m=o.animationId,v=this.state,g=v.prevPoints,y=v.prevBaseLine;return F.createElement(Wo,{begin:d,duration:h,isActive:u,easing:f,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var x=b.t;if(g){var S=g.length/l.length,T=l.map(function(p,w){var A=Math.floor(w*S);if(g[A]){var P=g[A],I=ci(P.x,p.x),k=ci(P.y,p.y);return bc(bc({},p),{},{x:I(x),y:k(x)})}return p}),_;if(Ee(c)&&typeof c=="number"){var C=ci(y,c);_=C(x)}else if(Ft(c)||ig(c)){var E=ci(y,0);_=E(x)}else _=c.map(function(p,w){var A=Math.floor(w*S);if(y[A]){var P=y[A],I=ci(P.x,p.x),k=ci(P.y,p.y);return bc(bc({},p),{},{x:I(x),y:k(x)})}return p});return a.renderAreaStatically(T,_,r,s)}return F.createElement(rn,null,F.createElement("defs",null,F.createElement("clipPath",{id:"animationClipPath-".concat(s)},a.renderClipRect(x))),F.createElement(rn,{clipPath:"url(#animationClipPath-".concat(s,")")},a.renderAreaStatically(l,c,r,s)))})}},{key:"renderArea",value:function(r,s){var a=this.props,o=a.points,l=a.baseLine,c=a.isAnimationActive,u=this.state,d=u.prevPoints,h=u.prevBaseLine,f=u.totalLength;return c&&o&&o.length&&(!d&&f>0||!dp(d,o)||!dp(h,l))?this.renderAreaWithAnimation(r,s):this.renderAreaStatically(o,l,r,s)}},{key:"render",value:function(){var r,s=this.props,a=s.hide,o=s.dot,l=s.points,c=s.className,u=s.top,d=s.left,h=s.xAxis,f=s.yAxis,m=s.width,v=s.height,g=s.isAnimationActive,y=s.id;if(a||!l||!l.length)return null;var b=this.state.isAnimationFinished,x=l.length===1,S=$t("recharts-area",c),T=h&&h.allowDataOverflow,_=f&&f.allowDataOverflow,C=T||_,E=Ft(y)?this.id:y,p=(r=pt(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},w=p.r,A=w===void 0?3:w,P=p.strokeWidth,I=P===void 0?2:P,k=WOe(o)?o:{},L=k.clipDot,U=L===void 0?!0:L,z=A*2+I;return F.createElement(rn,{className:S},T||_?F.createElement("defs",null,F.createElement("clipPath",{id:"clipPath-".concat(E)},F.createElement("rect",{x:T?d:d-m/2,y:_?u:u-v/2,width:T?m:m*2,height:_?v:v*2})),!U&&F.createElement("clipPath",{id:"clipPath-dots-".concat(E)},F.createElement("rect",{x:d-z/2,y:u-z/2,width:m+z,height:v+z}))):null,x?null:this.renderArea(C,E),(o||x)&&this.renderDots(C,U,E),(!g||b)&&jl.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:r.points!==s.curPoints||r.baseLine!==s.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(N.PureComponent);gne=ql;So(ql,"displayName","Area");So(ql,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Lo.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});So(ql,"getBaseValue",function(t,e,n,r){var s=t.layout,a=t.baseValue,o=e.props.baseValue,l=o??a;if(Ee(l)&&typeof l=="number")return l;var c=s==="horizontal"?r:n,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),h=Math.min(u[0],u[1]);return l==="dataMin"?h:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});So(ql,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,s=t.yAxis,a=t.xAxisTicks,o=t.yAxisTicks,l=t.bandSize,c=t.dataKey,u=t.stackedData,d=t.dataStartIndex,h=t.displayedData,f=t.offset,m=e.layout,v=u&&u.length,g=gne.getBaseValue(e,n,r,s),y=m==="horizontal",b=!1,x=h.map(function(T,_){var C;v?C=u[d+_]:(C=Vr(T,c),Array.isArray(C)?b=!0:C=[g,C]);var E=C[1]==null||v&&Vr(T,c)==null;return y?{x:J5({axis:r,ticks:a,bandSize:l,entry:T,index:_}),y:E?null:s.scale(C[1]),value:C,payload:T}:{x:E?null:r.scale(C[1]),y:J5({axis:s,ticks:o,bandSize:l,entry:T,index:_}),value:C,payload:T}}),S;return v||b?S=x.map(function(T){var _=Array.isArray(T.value)?T.value[0]:null;return y?{x:T.x,y:_!=null&&T.y!=null?s.scale(_):null}:{x:_!=null?r.scale(_):null,y:T.y}}):S=y?s.scale(g):r.scale(g),bc({points:x,baseLine:S,layout:m,isRange:b},f)});So(ql,"renderDotItem",function(t,e){var n;if(F.isValidElement(t))n=F.cloneElement(t,e);else if(_t(t))n=t(e);else{var r=$t("recharts-area-dot",typeof t!="boolean"?t.className:""),s=e.key,a=yne(e,uQe);n=F.createElement(XS,Bd({},a,{key:s,className:r}))}return n});function Sp(t){"@babel/helpers - typeof";return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sp(t)}function xQe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bQe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_ne(r.key),r)}}function wQe(t,e,n){return e&&bQe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _Qe(t,e,n){return e=Uj(e),jQe(t,bne()?Reflect.construct(e,n||[],Uj(t).constructor):e.apply(t,n))}function jQe(t,e){if(e&&(Sp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NQe(t)}function NQe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bne=function(){return!!t})()}function Uj(t){return Uj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Uj(t)}function SQe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UI(t,e)}function UI(t,e){return UI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},UI(t,e)}function wne(t,e,n){return e=_ne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _ne(t){var e=EQe(t,"string");return Sp(e)=="symbol"?e:e+""}function EQe(t,e){if(Sp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Sp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zI(){return zI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zI.apply(this,arguments)}function AQe(t){var e=t.xAxisId,n=BM(),r=UM(),s=rne(e);return s==null?null:N.createElement(fg,zI({},s,{className:$t("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return yl(o,!0)}}))}var Ep=function(t){function e(){return xQe(this,e),_Qe(this,e,arguments)}return SQe(e,t),wQe(e,[{key:"render",value:function(){return N.createElement(AQe,this.props)}}])}(N.Component);wne(Ep,"displayName","XAxis");wne(Ep,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Ap(t){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ap(t)}function TQe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CQe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Sne(r.key),r)}}function PQe(t,e,n){return e&&CQe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function IQe(t,e,n){return e=zj(e),kQe(t,jne()?Reflect.construct(e,n||[],zj(t).constructor):e.apply(t,n))}function kQe(t,e){if(e&&(Ap(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RQe(t)}function RQe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jne=function(){return!!t})()}function zj(t){return zj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zj(t)}function OQe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qI(t,e)}function qI(t,e){return qI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},qI(t,e)}function Nne(t,e,n){return e=Sne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sne(t){var e=MQe(t,"string");return Ap(e)=="symbol"?e:e+""}function MQe(t,e){if(Ap(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ap(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WI(){return WI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WI.apply(this,arguments)}var DQe=function(e){var n=e.yAxisId,r=BM(),s=UM(),a=sne(n);return a==null?null:N.createElement(fg,WI({},a,{className:$t("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:s},ticksGenerator:function(l){return yl(l,!0)}}))},Tp=function(t){function e(){return TQe(this,e),IQe(this,e,arguments)}return OQe(e,t),PQe(e,[{key:"render",value:function(){return N.createElement(DQe,this.props)}}])}(N.Component);Nne(Tp,"displayName","YAxis");Nne(Tp,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function C6(t){return VQe(t)||FQe(t)||$Qe(t)||LQe()}function LQe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Qe(t,e){if(t){if(typeof t=="string")return HI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HI(t,e)}}function FQe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function VQe(t){if(Array.isArray(t))return HI(t)}function HI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var KI=function(e,n,r,s,a){var o=ua(e,qM),l=ua(e,a1),c=[].concat(C6(o),C6(l)),u=ua(e,l1),d="".concat(s,"Id"),h=s[0],f=n;if(c.length&&(f=c.reduce(function(g,y){if(y.props[d]===r&&Fo(y.props,"extendDomain")&&Ee(y.props[h])){var b=y.props[h];return[Math.min(g[0],b),Math.max(g[1],b)]}return g},f)),u.length){var m="".concat(h,"1"),v="".concat(h,"2");f=u.reduce(function(g,y){if(y.props[d]===r&&Fo(y.props,"extendDomain")&&Ee(y.props[m])&&Ee(y.props[v])){var b=y.props[m],x=y.props[v];return[Math.min(g[0],b,x),Math.max(g[1],b,x)]}return g},f)}return a&&a.length&&(f=a.reduce(function(g,y){return Ee(y)?[Math.min(g[0],y),Math.max(g[1],y)]:g},f)),f},Ene={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function a(c,u,d,h,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new s(d,h||c,f),v=n?n+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],m]:c._events[v].push(m):(c._events[v]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)e.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,m=h.length,v=new Array(m);f<m;f++)v[f]=h[f].fn;return v},l.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},l.prototype.emit=function(u,d,h,f,m,v){var g=n?n+u:u;if(!this._events[g])return!1;var y=this._events[g],b=arguments.length,x,S;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),b){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,h),!0;case 4:return y.fn.call(y.context,d,h,f),!0;case 5:return y.fn.call(y.context,d,h,f,m),!0;case 6:return y.fn.call(y.context,d,h,f,m,v),!0}for(S=1,x=new Array(b-1);S<b;S++)x[S-1]=arguments[S];y.fn.apply(y.context,x)}else{var T=y.length,_;for(S=0;S<T;S++)switch(y[S].once&&this.removeListener(u,y[S].fn,void 0,!0),b){case 1:y[S].fn.call(y[S].context);break;case 2:y[S].fn.call(y[S].context,d);break;case 3:y[S].fn.call(y[S].context,d,h);break;case 4:y[S].fn.call(y[S].context,d,h,f);break;default:if(!x)for(_=1,x=new Array(b-1);_<b;_++)x[_-1]=arguments[_];y[S].fn.apply(y[S].context,x)}}return!0},l.prototype.on=function(u,d,h){return a(this,u,d,h,!1)},l.prototype.once=function(u,d,h){return a(this,u,d,h,!0)},l.prototype.removeListener=function(u,d,h,f){var m=n?n+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var v=this._events[m];if(v.fn)v.fn===d&&(!f||v.once)&&(!h||v.context===h)&&o(this,m);else{for(var g=0,y=[],b=v.length;g<b;g++)(v[g].fn!==d||f&&!v[g].once||h&&v[g].context!==h)&&y.push(v[g]);y.length?this._events[m]=y.length===1?y[0]:y:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(Ene);var BQe=Ene.exports;const UQe=vn(BQe);var PA=new UQe,IA="recharts.syncMouseEvents";function wx(t){"@babel/helpers - typeof";return wx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wx(t)}function zQe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qQe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ane(r.key),r)}}function WQe(t,e,n){return e&&qQe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function kA(t,e,n){return e=Ane(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ane(t){var e=HQe(t,"string");return wx(e)=="symbol"?e:e+""}function HQe(t,e){if(wx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var KQe=function(){function t(){zQe(this,t),kA(this,"activeIndex",0),kA(this,"coordinateList",[]),kA(this,"layout","horizontal")}return WQe(t,[{key:"setDetails",value:function(n){var r,s=n.coordinateList,a=s===void 0?null:s,o=n.container,l=o===void 0?null:o,c=n.layout,u=c===void 0?null:c,d=n.offset,h=d===void 0?null:d,f=n.mouseHandlerCallback,m=f===void 0?null:f;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),a=s.x,o=s.y,l=s.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,h=a+c+u,f=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:h,pageY:f})}}}])}();function GQe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],s=t==null?void 0:t[1];if(r&&s&&Ee(r)&&Ee(s))return!0}return!1}function YQe(t,e,n,r){var s=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-s:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-s,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function Tne(t){var e=t.cx,n=t.cy,r=t.radius,s=t.startAngle,a=t.endAngle,o=Ln(e,n,r,s),l=Ln(e,n,r,a);return{points:[o,l],cx:e,cy:n,radius:r,startAngle:s,endAngle:a}}function QQe(t,e,n){var r,s,a,o;if(t==="horizontal")r=e.x,a=r,s=n.top,o=n.top+n.height;else if(t==="vertical")s=e.y,o=s,r=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,u=e.innerRadius,d=e.outerRadius,h=e.angle,f=Ln(l,c,u,h),m=Ln(l,c,d,h);r=f.x,s=f.y,a=m.x,o=m.y}else return Tne(e);return[{x:r,y:s},{x:a,y:o}]}function _x(t){"@babel/helpers - typeof";return _x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_x(t)}function P6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function R0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P6(Object(n),!0).forEach(function(r){XQe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function XQe(t,e,n){return e=ZQe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZQe(t){var e=JQe(t,"string");return _x(e)=="symbol"?e:e+""}function JQe(t,e){if(_x(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_x(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eXe(t){var e,n,r=t.element,s=t.tooltipEventType,a=t.isActive,o=t.activeCoordinate,l=t.activePayload,c=t.offset,u=t.activeTooltipIndex,d=t.tooltipAxisBandSize,h=t.layout,f=t.chartName,m=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!m||!a||!o||f!=="ScatterChart"&&s!=="axis")return null;var v,g=ym;if(f==="ScatterChart")v=o,g=_He;else if(f==="BarChart")v=YQe(h,o,c,d),g=LM;else if(h==="radial"){var y=Tne(o),b=y.cx,x=y.cy,S=y.radius,T=y.startAngle,_=y.endAngle;v={cx:b,cy:x,startAngle:T,endAngle:_,innerRadius:S,outerRadius:S},g=wte}else v={points:QQe(h,o,c)},g=ym;var C=R0(R0(R0(R0({stroke:"#ccc",pointerEvents:"none"},c),v),pt(m,!1)),{},{payload:l,payloadIndex:u,className:$t("recharts-tooltip-cursor",m.className)});return N.isValidElement(m)?N.cloneElement(m,C):N.createElement(g,C)}var tXe=["item"],nXe=["children","className","width","height","style","compact","title","desc"];function Cp(t){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cp(t)}function Yf(){return Yf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yf.apply(this,arguments)}function I6(t,e){return iXe(t)||sXe(t,e)||Pne(t,e)||rXe()}function rXe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sXe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function iXe(t){if(Array.isArray(t))return t}function k6(t,e){if(t==null)return{};var n=aXe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function aXe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function oXe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lXe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ine(r.key),r)}}function cXe(t,e,n){return e&&lXe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function uXe(t,e,n){return e=qj(e),dXe(t,Cne()?Reflect.construct(e,n||[],qj(t).constructor):e.apply(t,n))}function dXe(t,e){if(e&&(Cp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hXe(t)}function hXe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cne=function(){return!!t})()}function qj(t){return qj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qj(t)}function fXe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GI(t,e)}function GI(t,e){return GI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},GI(t,e)}function Pp(t){return gXe(t)||pXe(t)||Pne(t)||mXe()}function mXe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pne(t,e){if(t){if(typeof t=="string")return YI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YI(t,e)}}function pXe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gXe(t){if(Array.isArray(t))return YI(t)}function YI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function R6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function fe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R6(Object(n),!0).forEach(function(r){bt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bt(t,e,n){return e=Ine(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ine(t){var e=yXe(t,"string");return Cp(e)=="symbol"?e:e+""}function yXe(t,e){if(Cp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Cp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vXe={xAxis:["bottom","top"],yAxis:["left","right"]},xXe={width:"100%",height:"100%"},kne={x:0,y:0};function O0(t){return t}var bXe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},wXe=function(e,n,r,s){var a=n.find(function(d){return d&&d.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:s.y};if(e==="vertical")return{x:s.x,y:a.coordinate};if(e==="centric"){var o=a.coordinate,l=s.radius;return fe(fe(fe({},s),Ln(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var c=a.coordinate,u=s.angle;return fe(fe(fe({},s),Ln(s.cx,s.cy,c,u)),{},{angle:u,radius:c})}return kne},c1=function(e,n){var r=n.graphicalItems,s=n.dataStartIndex,a=n.dataEndIndex,o=(r??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Pp(l),Pp(u)):l},[]);return o.length>0?o:e&&e.length&&Ee(s)&&Ee(a)?e.slice(s,a+1):[]};function Rne(t){return t==="number"?[0,"auto"]:void 0}var QI=function(e,n,r,s){var a=e.graphicalItems,o=e.tooltipAxis,l=c1(n,e);return r<0||!a||!a.length||r>=l.length?null:a.reduce(function(c,u){var d,h=(d=u.props.data)!==null&&d!==void 0?d:n;h&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(h=h.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(o.dataKey&&!o.allowDuplicatedCategory){var m=h===void 0?l:h;f=W_(m,o.dataKey,s)}else f=h&&h[r]||l[r];return f?[].concat(Pp(c),[pte(u,f)]):c},[])},O6=function(e,n,r,s){var a=s||{x:e.chartX,y:e.chartY},o=bXe(a,r),l=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,d=H9e(o,l,u,c);if(d>=0&&u){var h=u[d]&&u[d].value,f=QI(e,n,d,h),m=wXe(r,l,d,a);return{activeTooltipIndex:d,activeLabel:h,activePayload:f,activeCoordinate:m}}return null},_Xe=function(e,n){var r=n.axes,s=n.graphicalItems,a=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,h=e.children,f=e.stackOffset,m=cte(d,a);return r.reduce(function(v,g){var y,b=g.type.defaultProps!==void 0?fe(fe({},g.type.defaultProps),g.props):g.props,x=b.type,S=b.dataKey,T=b.allowDataOverflow,_=b.allowDuplicatedCategory,C=b.scale,E=b.ticks,p=b.includeHidden,w=b[o];if(v[w])return v;var A=c1(e.data,{graphicalItems:s.filter(function(ae){var _e,Le=o in ae.props?ae.props[o]:(_e=ae.type.defaultProps)===null||_e===void 0?void 0:_e[o];return Le===w}),dataStartIndex:c,dataEndIndex:u}),P=A.length,I,k,L;GQe(b.domain,T,x)&&(I=dI(b.domain,null,T),m&&(x==="number"||C!=="auto")&&(L=Wy(A,S,"category")));var U=Rne(x);if(!I||I.length===0){var z,O=(z=b.domain)!==null&&z!==void 0?z:U;if(S){if(I=Wy(A,S,x),x==="category"&&m){var $=MOe(I);_&&$?(k=I,I=Ij(0,P)):_||(I=rU(O,I,g).reduce(function(ae,_e){return ae.indexOf(_e)>=0?ae:[].concat(Pp(ae),[_e])},[]))}else if(x==="category")_?I=I.filter(function(ae){return ae!==""&&!Ft(ae)}):I=rU(O,I,g).reduce(function(ae,_e){return ae.indexOf(_e)>=0||_e===""||Ft(_e)?ae:[].concat(Pp(ae),[_e])},[]);else if(x==="number"){var D=X9e(A,s.filter(function(ae){var _e,Le,ct=o in ae.props?ae.props[o]:(_e=ae.type.defaultProps)===null||_e===void 0?void 0:_e[o],Nt="hide"in ae.props?ae.props.hide:(Le=ae.type.defaultProps)===null||Le===void 0?void 0:Le.hide;return ct===w&&(p||!Nt)}),S,a,d);D&&(I=D)}m&&(x==="number"||C!=="auto")&&(L=Wy(A,S,"category"))}else m?I=Ij(0,P):l&&l[w]&&l[w].hasStack&&x==="number"?I=f==="expand"?[0,1]:mte(l[w].stackGroups,c,u):I=lte(A,s.filter(function(ae){var _e=o in ae.props?ae.props[o]:ae.type.defaultProps[o],Le="hide"in ae.props?ae.props.hide:ae.type.defaultProps.hide;return _e===w&&(p||!Le)}),x,d,!0);if(x==="number")I=KI(h,I,w,a,E),O&&(I=dI(O,I,T));else if(x==="category"&&O){var K=O,ie=I.every(function(ae){return K.indexOf(ae)>=0});ie&&(I=K)}}return fe(fe({},v),{},bt({},w,fe(fe({},b),{},{axisType:a,domain:I,categoricalDomain:L,duplicateDomain:k,originalDomain:(y=b.domain)!==null&&y!==void 0?y:U,isCategorical:m,layout:d})))},{})},jXe=function(e,n){var r=n.graphicalItems,s=n.Axis,a=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,h=e.children,f=c1(e.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),m=f.length,v=cte(d,a),g=-1;return r.reduce(function(y,b){var x=b.type.defaultProps!==void 0?fe(fe({},b.type.defaultProps),b.props):b.props,S=x[o],T=Rne("number");if(!y[S]){g++;var _;return v?_=Ij(0,m):l&&l[S]&&l[S].hasStack?(_=mte(l[S].stackGroups,c,u),_=KI(h,_,S,a)):(_=dI(T,lte(f,r.filter(function(C){var E,p,w=o in C.props?C.props[o]:(E=C.type.defaultProps)===null||E===void 0?void 0:E[o],A="hide"in C.props?C.props.hide:(p=C.type.defaultProps)===null||p===void 0?void 0:p.hide;return w===S&&!A}),"number",d),s.defaultProps.allowDataOverflow),_=KI(h,_,S,a)),fe(fe({},y),{},bt({},S,fe(fe({axisType:a},s.defaultProps),{},{hide:!0,orientation:$i(vXe,"".concat(a,".").concat(g%2),null),domain:_,originalDomain:T,isCategorical:v,layout:d})))}return y},{})},NXe=function(e,n){var r=n.axisType,s=r===void 0?"xAxis":r,a=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.children,h="".concat(s,"Id"),f=ua(d,a),m={};return f&&f.length?m=_Xe(e,{axes:f,graphicalItems:o,axisType:s,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=jXe(e,{Axis:a,graphicalItems:o,axisType:s,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},SXe=function(e){var n=Rc(e),r=yl(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:uM(r,function(s){return s.coordinate}),tooltipAxis:n,tooltipAxisBandSize:xj(n,r)}},M6=function(e){var n=e.children,r=e.defaultShowTooltip,s=Ai(n,vp),a=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(a=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},EXe=function(e){return!e||!e.length?!1:e.some(function(n){var r=wl(n&&n.type);return r&&r.indexOf("Bar")>=0})},D6=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},AXe=function(e,n){var r=e.props,s=e.graphicalItems,a=e.xAxisMap,o=a===void 0?{}:a,l=e.yAxisMap,c=l===void 0?{}:l,u=r.width,d=r.height,h=r.children,f=r.margin||{},m=Ai(h,vp),v=Ai(h,mm),g=Object.keys(c).reduce(function(_,C){var E=c[C],p=E.orientation;return!E.mirror&&!E.hide?fe(fe({},_),{},bt({},p,_[p]+E.width)):_},{left:f.left||0,right:f.right||0}),y=Object.keys(o).reduce(function(_,C){var E=o[C],p=E.orientation;return!E.mirror&&!E.hide?fe(fe({},_),{},bt({},p,$i(_,"".concat(p))+E.height)):_},{top:f.top||0,bottom:f.bottom||0}),b=fe(fe({},y),g),x=b.bottom;m&&(b.bottom+=m.props.height||vp.defaultProps.height),v&&n&&(b=Y9e(b,s,r,n));var S=u-b.left-b.right,T=d-b.top-b.bottom;return fe(fe({brushBottom:x},b),{},{width:Math.max(S,0),height:Math.max(T,0)})},TXe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},KM=function(e){var n=e.chartName,r=e.GraphicalChild,s=e.defaultTooltipEventType,a=s===void 0?"axis":s,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,h=e.defaultProps,f=function(b,x){var S=x.graphicalItems,T=x.stackGroups,_=x.offset,C=x.updateId,E=x.dataStartIndex,p=x.dataEndIndex,w=b.barSize,A=b.layout,P=b.barGap,I=b.barCategoryGap,k=b.maxBarSize,L=D6(A),U=L.numericAxisName,z=L.cateAxisName,O=EXe(S),$=[];return S.forEach(function(D,K){var ie=c1(b.data,{graphicalItems:[D],dataStartIndex:E,dataEndIndex:p}),ae=D.type.defaultProps!==void 0?fe(fe({},D.type.defaultProps),D.props):D.props,_e=ae.dataKey,Le=ae.maxBarSize,ct=ae["".concat(U,"Id")],Nt=ae["".concat(z,"Id")],Ne={},ft=c.reduce(function(se,de){var Re=x["".concat(de.axisType,"Map")],Oe=ae["".concat(de.axisType,"Id")];Re&&Re[Oe]||de.axisType==="zAxis"||Lh();var Se=Re[Oe];return fe(fe({},se),{},bt(bt({},de.axisType,Se),"".concat(de.axisType,"Ticks"),yl(Se)))},Ne),be=ft[z],Me=ft["".concat(z,"Ticks")],$e=T&&T[ct]&&T[ct].hasStack&&aqe(D,T[ct].stackGroups),ue=wl(D.type).indexOf("Bar")>=0,It=xj(be,Me),vt=[],un=O&&K9e({barSize:w,stackGroups:T,totalSize:TXe(ft,z)});if(ue){var tn,Nn,Hr=Ft(Le)?k:Le,an=(tn=(Nn=xj(be,Me,!0))!==null&&Nn!==void 0?Nn:Hr)!==null&&tn!==void 0?tn:0;vt=G9e({barGap:P,barCategoryGap:I,bandSize:an!==It?an:It,sizeList:un[Nt],maxBarSize:Hr}),an!==It&&(vt=vt.map(function(se){return fe(fe({},se),{},{position:fe(fe({},se.position),{},{offset:se.position.offset-an/2})})}))}var H=D&&D.type&&D.type.getComposedData;H&&$.push({props:fe(fe({},H(fe(fe({},ft),{},{displayedData:ie,props:b,dataKey:_e,item:D,bandSize:It,barPosition:vt,offset:_,stackedData:$e,layout:A,dataStartIndex:E,dataEndIndex:p}))),{},bt(bt(bt({key:D.key||"item-".concat(K)},U,ft[U]),z,ft[z]),"animationId",C)),childIndex:GOe(D,b.children),item:D})}),$},m=function(b,x){var S=b.props,T=b.dataStartIndex,_=b.dataEndIndex,C=b.updateId;if(!QB({props:S}))return null;var E=S.children,p=S.layout,w=S.stackOffset,A=S.data,P=S.reverseStackOrder,I=D6(p),k=I.numericAxisName,L=I.cateAxisName,U=ua(E,r),z=sqe(A,U,"".concat(k,"Id"),"".concat(L,"Id"),w,P),O=c.reduce(function(ae,_e){var Le="".concat(_e.axisType,"Map");return fe(fe({},ae),{},bt({},Le,NXe(S,fe(fe({},_e),{},{graphicalItems:U,stackGroups:_e.axisType===k&&z,dataStartIndex:T,dataEndIndex:_}))))},{}),$=AXe(fe(fe({},O),{},{props:S,graphicalItems:U}),x==null?void 0:x.legendBBox);Object.keys(O).forEach(function(ae){O[ae]=d(S,O[ae],$,ae.replace("Map",""),n)});var D=O["".concat(L,"Map")],K=SXe(D),ie=f(S,fe(fe({},O),{},{dataStartIndex:T,dataEndIndex:_,updateId:C,graphicalItems:U,stackGroups:z,offset:$}));return fe(fe({formattedGraphicalItems:ie,graphicalItems:U,offset:$,stackGroups:z},K),O)},v=function(y){function b(x){var S,T,_;return oXe(this,b),_=uXe(this,b,[x]),bt(_,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),bt(_,"accessibilityManager",new KQe),bt(_,"handleLegendBBoxUpdate",function(C){if(C){var E=_.state,p=E.dataStartIndex,w=E.dataEndIndex,A=E.updateId;_.setState(fe({legendBBox:C},m({props:_.props,dataStartIndex:p,dataEndIndex:w,updateId:A},fe(fe({},_.state),{},{legendBBox:C}))))}}),bt(_,"handleReceiveSyncEvent",function(C,E,p){if(_.props.syncId===C){if(p===_.eventEmitterSymbol&&typeof _.props.syncMethod!="function")return;_.applySyncEvent(E)}}),bt(_,"handleBrushChange",function(C){var E=C.startIndex,p=C.endIndex;if(E!==_.state.dataStartIndex||p!==_.state.dataEndIndex){var w=_.state.updateId;_.setState(function(){return fe({dataStartIndex:E,dataEndIndex:p},m({props:_.props,dataStartIndex:E,dataEndIndex:p,updateId:w},_.state))}),_.triggerSyncEvent({dataStartIndex:E,dataEndIndex:p})}}),bt(_,"handleMouseEnter",function(C){var E=_.getMouseInfo(C);if(E){var p=fe(fe({},E),{},{isTooltipActive:!0});_.setState(p),_.triggerSyncEvent(p);var w=_.props.onMouseEnter;_t(w)&&w(p,C)}}),bt(_,"triggeredAfterMouseMove",function(C){var E=_.getMouseInfo(C),p=E?fe(fe({},E),{},{isTooltipActive:!0}):{isTooltipActive:!1};_.setState(p),_.triggerSyncEvent(p);var w=_.props.onMouseMove;_t(w)&&w(p,C)}),bt(_,"handleItemMouseEnter",function(C){_.setState(function(){return{isTooltipActive:!0,activeItem:C,activePayload:C.tooltipPayload,activeCoordinate:C.tooltipPosition||{x:C.cx,y:C.cy}}})}),bt(_,"handleItemMouseLeave",function(){_.setState(function(){return{isTooltipActive:!1}})}),bt(_,"handleMouseMove",function(C){C.persist(),_.throttleTriggeredAfterMouseMove(C)}),bt(_,"handleMouseLeave",function(C){_.throttleTriggeredAfterMouseMove.cancel();var E={isTooltipActive:!1};_.setState(E),_.triggerSyncEvent(E);var p=_.props.onMouseLeave;_t(p)&&p(E,C)}),bt(_,"handleOuterEvent",function(C){var E=KOe(C),p=$i(_.props,"".concat(E));if(E&&_t(p)){var w,A;/.*touch.*/i.test(E)?A=_.getMouseInfo(C.changedTouches[0]):A=_.getMouseInfo(C),p((w=A)!==null&&w!==void 0?w:{},C)}}),bt(_,"handleClick",function(C){var E=_.getMouseInfo(C);if(E){var p=fe(fe({},E),{},{isTooltipActive:!0});_.setState(p),_.triggerSyncEvent(p);var w=_.props.onClick;_t(w)&&w(p,C)}}),bt(_,"handleMouseDown",function(C){var E=_.props.onMouseDown;if(_t(E)){var p=_.getMouseInfo(C);E(p,C)}}),bt(_,"handleMouseUp",function(C){var E=_.props.onMouseUp;if(_t(E)){var p=_.getMouseInfo(C);E(p,C)}}),bt(_,"handleTouchMove",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&_.throttleTriggeredAfterMouseMove(C.changedTouches[0])}),bt(_,"handleTouchStart",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&_.handleMouseDown(C.changedTouches[0])}),bt(_,"handleTouchEnd",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&_.handleMouseUp(C.changedTouches[0])}),bt(_,"handleDoubleClick",function(C){var E=_.props.onDoubleClick;if(_t(E)){var p=_.getMouseInfo(C);E(p,C)}}),bt(_,"handleContextMenu",function(C){var E=_.props.onContextMenu;if(_t(E)){var p=_.getMouseInfo(C);E(p,C)}}),bt(_,"triggerSyncEvent",function(C){_.props.syncId!==void 0&&PA.emit(IA,_.props.syncId,C,_.eventEmitterSymbol)}),bt(_,"applySyncEvent",function(C){var E=_.props,p=E.layout,w=E.syncMethod,A=_.state.updateId,P=C.dataStartIndex,I=C.dataEndIndex;if(C.dataStartIndex!==void 0||C.dataEndIndex!==void 0)_.setState(fe({dataStartIndex:P,dataEndIndex:I},m({props:_.props,dataStartIndex:P,dataEndIndex:I,updateId:A},_.state)));else if(C.activeTooltipIndex!==void 0){var k=C.chartX,L=C.chartY,U=C.activeTooltipIndex,z=_.state,O=z.offset,$=z.tooltipTicks;if(!O)return;if(typeof w=="function")U=w($,C);else if(w==="value"){U=-1;for(var D=0;D<$.length;D++)if($[D].value===C.activeLabel){U=D;break}}var K=fe(fe({},O),{},{x:O.left,y:O.top}),ie=Math.min(k,K.x+K.width),ae=Math.min(L,K.y+K.height),_e=$[U]&&$[U].value,Le=QI(_.state,_.props.data,U),ct=$[U]?{x:p==="horizontal"?$[U].coordinate:ie,y:p==="horizontal"?ae:$[U].coordinate}:kne;_.setState(fe(fe({},C),{},{activeLabel:_e,activeCoordinate:ct,activePayload:Le,activeTooltipIndex:U}))}else _.setState(C)}),bt(_,"renderCursor",function(C){var E,p=_.state,w=p.isTooltipActive,A=p.activeCoordinate,P=p.activePayload,I=p.offset,k=p.activeTooltipIndex,L=p.tooltipAxisBandSize,U=_.getTooltipEventType(),z=(E=C.props.active)!==null&&E!==void 0?E:w,O=_.props.layout,$=C.key||"_recharts-cursor";return F.createElement(eXe,{key:$,activeCoordinate:A,activePayload:P,activeTooltipIndex:k,chartName:n,element:C,isActive:z,layout:O,offset:I,tooltipAxisBandSize:L,tooltipEventType:U})}),bt(_,"renderPolarAxis",function(C,E,p){var w=$i(C,"type.axisType"),A=$i(_.state,"".concat(w,"Map")),P=C.type.defaultProps,I=P!==void 0?fe(fe({},P),C.props):C.props,k=A&&A[I["".concat(w,"Id")]];return N.cloneElement(C,fe(fe({},k),{},{className:$t(w,k.className),key:C.key||"".concat(E,"-").concat(p),ticks:yl(k,!0)}))}),bt(_,"renderPolarGrid",function(C){var E=C.props,p=E.radialLines,w=E.polarAngles,A=E.polarRadius,P=_.state,I=P.radiusAxisMap,k=P.angleAxisMap,L=Rc(I),U=Rc(k),z=U.cx,O=U.cy,$=U.innerRadius,D=U.outerRadius;return N.cloneElement(C,{polarAngles:Array.isArray(w)?w:yl(U,!0).map(function(K){return K.coordinate}),polarRadius:Array.isArray(A)?A:yl(L,!0).map(function(K){return K.coordinate}),cx:z,cy:O,innerRadius:$,outerRadius:D,key:C.key||"polar-grid",radialLines:p})}),bt(_,"renderLegend",function(){var C=_.state.formattedGraphicalItems,E=_.props,p=E.children,w=E.width,A=E.height,P=_.props.margin||{},I=w-(P.left||0)-(P.right||0),k=ate({children:p,formattedGraphicalItems:C,legendWidth:I,legendContent:u});if(!k)return null;var L=k.item,U=k6(k,tXe);return N.cloneElement(L,fe(fe({},U),{},{chartWidth:w,chartHeight:A,margin:P,onBBoxUpdate:_.handleLegendBBoxUpdate}))}),bt(_,"renderTooltip",function(){var C,E=_.props,p=E.children,w=E.accessibilityLayer,A=Ai(p,Ma);if(!A)return null;var P=_.state,I=P.isTooltipActive,k=P.activeCoordinate,L=P.activePayload,U=P.activeLabel,z=P.offset,O=(C=A.props.active)!==null&&C!==void 0?C:I;return N.cloneElement(A,{viewBox:fe(fe({},z),{},{x:z.left,y:z.top}),active:O,label:U,payload:O?L:[],coordinate:k,accessibilityLayer:w})}),bt(_,"renderBrush",function(C){var E=_.props,p=E.margin,w=E.data,A=_.state,P=A.offset,I=A.dataStartIndex,k=A.dataEndIndex,L=A.updateId;return N.cloneElement(C,{key:C.key||"_recharts-brush",onChange:C0(_.handleBrushChange,C.props.onChange),data:w,x:Ee(C.props.x)?C.props.x:P.left,y:Ee(C.props.y)?C.props.y:P.top+P.height+P.brushBottom-(p.bottom||0),width:Ee(C.props.width)?C.props.width:P.width,startIndex:I,endIndex:k,updateId:"brush-".concat(L)})}),bt(_,"renderReferenceElement",function(C,E,p){if(!C)return null;var w=_,A=w.clipPathId,P=_.state,I=P.xAxisMap,k=P.yAxisMap,L=P.offset,U=C.type.defaultProps||{},z=C.props,O=z.xAxisId,$=O===void 0?U.xAxisId:O,D=z.yAxisId,K=D===void 0?U.yAxisId:D;return N.cloneElement(C,{key:C.key||"".concat(E,"-").concat(p),xAxis:I[$],yAxis:k[K],viewBox:{x:L.left,y:L.top,width:L.width,height:L.height},clipPathId:A})}),bt(_,"renderActivePoints",function(C){var E=C.item,p=C.activePoint,w=C.basePoint,A=C.childIndex,P=C.isRange,I=[],k=E.props.key,L=E.item.type.defaultProps!==void 0?fe(fe({},E.item.type.defaultProps),E.item.props):E.item.props,U=L.activeDot,z=L.dataKey,O=fe(fe({index:A,dataKey:z,cx:p.x,cy:p.y,r:4,fill:DM(E.item),strokeWidth:2,stroke:"#fff",payload:p.payload,value:p.value},pt(U,!1)),H_(U));return I.push(b.renderActiveDot(U,O,"".concat(k,"-activePoint-").concat(A))),w?I.push(b.renderActiveDot(U,fe(fe({},O),{},{cx:w.x,cy:w.y}),"".concat(k,"-basePoint-").concat(A))):P&&I.push(null),I}),bt(_,"renderGraphicChild",function(C,E,p){var w=_.filterFormatItem(C,E,p);if(!w)return null;var A=_.getTooltipEventType(),P=_.state,I=P.isTooltipActive,k=P.tooltipAxis,L=P.activeTooltipIndex,U=P.activeLabel,z=_.props.children,O=Ai(z,Ma),$=w.props,D=$.points,K=$.isRange,ie=$.baseLine,ae=w.item.type.defaultProps!==void 0?fe(fe({},w.item.type.defaultProps),w.item.props):w.item.props,_e=ae.activeDot,Le=ae.hide,ct=ae.activeBar,Nt=ae.activeShape,Ne=!!(!Le&&I&&O&&(_e||ct||Nt)),ft={};A!=="axis"&&O&&O.props.trigger==="click"?ft={onClick:C0(_.handleItemMouseEnter,C.props.onClick)}:A!=="axis"&&(ft={onMouseLeave:C0(_.handleItemMouseLeave,C.props.onMouseLeave),onMouseEnter:C0(_.handleItemMouseEnter,C.props.onMouseEnter)});var be=N.cloneElement(C,fe(fe({},w.props),ft));function Me(de){return typeof k.dataKey=="function"?k.dataKey(de.payload):null}if(Ne)if(L>=0){var $e,ue;if(k.dataKey&&!k.allowDuplicatedCategory){var It=typeof k.dataKey=="function"?Me:"payload.".concat(k.dataKey.toString());$e=W_(D,It,U),ue=K&&ie&&W_(ie,It,U)}else $e=D==null?void 0:D[L],ue=K&&ie&&ie[L];if(Nt||ct){var vt=C.props.activeIndex!==void 0?C.props.activeIndex:L;return[N.cloneElement(C,fe(fe(fe({},w.props),ft),{},{activeIndex:vt})),null,null]}if(!Ft($e))return[be].concat(Pp(_.renderActivePoints({item:w,activePoint:$e,basePoint:ue,childIndex:L,isRange:K})))}else{var un,tn=(un=_.getItemByXY(_.state.activeCoordinate))!==null&&un!==void 0?un:{graphicalItem:be},Nn=tn.graphicalItem,Hr=Nn.item,an=Hr===void 0?C:Hr,H=Nn.childIndex,se=fe(fe(fe({},w.props),ft),{},{activeIndex:H});return[N.cloneElement(an,se),null,null]}return K?[be,null,null]:[be,null]}),bt(_,"renderCustomized",function(C,E,p){return N.cloneElement(C,fe(fe({key:"recharts-customized-".concat(p)},_.props),_.state))}),bt(_,"renderMap",{CartesianGrid:{handler:O0,once:!0},ReferenceArea:{handler:_.renderReferenceElement},ReferenceLine:{handler:O0},ReferenceDot:{handler:_.renderReferenceElement},XAxis:{handler:O0},YAxis:{handler:O0},Brush:{handler:_.renderBrush,once:!0},Bar:{handler:_.renderGraphicChild},Line:{handler:_.renderGraphicChild},Area:{handler:_.renderGraphicChild},Radar:{handler:_.renderGraphicChild},RadialBar:{handler:_.renderGraphicChild},Scatter:{handler:_.renderGraphicChild},Pie:{handler:_.renderGraphicChild},Funnel:{handler:_.renderGraphicChild},Tooltip:{handler:_.renderCursor,once:!0},PolarGrid:{handler:_.renderPolarGrid,once:!0},PolarAngleAxis:{handler:_.renderPolarAxis},PolarRadiusAxis:{handler:_.renderPolarAxis},Customized:{handler:_.renderCustomized}}),_.clipPathId="".concat((S=x.id)!==null&&S!==void 0?S:ag("recharts"),"-clip"),_.throttleTriggeredAfterMouseMove=iee(_.triggeredAfterMouseMove,(T=x.throttleDelay)!==null&&T!==void 0?T:1e3/60),_.state={},_}return fXe(b,y),cXe(b,[{key:"componentDidMount",value:function(){var S,T;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(T=this.props.margin.top)!==null&&T!==void 0?T:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var S=this.props,T=S.children,_=S.data,C=S.height,E=S.layout,p=Ai(T,Ma);if(p){var w=p.props.defaultIndex;if(!(typeof w!="number"||w<0||w>this.state.tooltipTicks.length-1)){var A=this.state.tooltipTicks[w]&&this.state.tooltipTicks[w].value,P=QI(this.state,_,w,A),I=this.state.tooltipTicks[w].coordinate,k=(this.state.offset.top+C)/2,L=E==="horizontal",U=L?{x:I,y:k}:{y:I,x:k},z=this.state.formattedGraphicalItems.find(function($){var D=$.item;return D.type.name==="Scatter"});z&&(U=fe(fe({},U),z.props.points[w].tooltipPosition),P=z.props.points[w].tooltipPayload);var O={activeTooltipIndex:w,isTooltipActive:!0,activeLabel:A,activePayload:P,activeCoordinate:U};this.setState(O),this.renderCursor(p),this.accessibilityManager.setIndex(w)}}}},{key:"getSnapshotBeforeUpdate",value:function(S,T){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==T.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==S.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==S.margin){var _,C;this.accessibilityManager.setDetails({offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0}})}return null}},{key:"componentDidUpdate",value:function(S){EP([Ai(S.children,Ma)],[Ai(this.props.children,Ma)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var S=Ai(this.props.children,Ma);if(S&&typeof S.props.shared=="boolean"){var T=S.props.shared?"axis":"item";return l.indexOf(T)>=0?T:a}return a}},{key:"getMouseInfo",value:function(S){if(!this.container)return null;var T=this.container,_=T.getBoundingClientRect(),C=b5e(_),E={chartX:Math.round(S.pageX-C.left),chartY:Math.round(S.pageY-C.top)},p=_.width/T.offsetWidth||1,w=this.inRange(E.chartX,E.chartY,p);if(!w)return null;var A=this.state,P=A.xAxisMap,I=A.yAxisMap,k=this.getTooltipEventType(),L=O6(this.state,this.props.data,this.props.layout,w);if(k!=="axis"&&P&&I){var U=Rc(P).scale,z=Rc(I).scale,O=U&&U.invert?U.invert(E.chartX):null,$=z&&z.invert?z.invert(E.chartY):null;return fe(fe({},E),{},{xValue:O,yValue:$},L)}return L?fe(fe({},E),L):null}},{key:"inRange",value:function(S,T){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,C=this.props.layout,E=S/_,p=T/_;if(C==="horizontal"||C==="vertical"){var w=this.state.offset,A=E>=w.left&&E<=w.left+w.width&&p>=w.top&&p<=w.top+w.height;return A?{x:E,y:p}:null}var P=this.state,I=P.angleAxisMap,k=P.radiusAxisMap;if(I&&k){var L=Rc(I);return aU({x:E,y:p},L)}return null}},{key:"parseEventsOfWrapper",value:function(){var S=this.props.children,T=this.getTooltipEventType(),_=Ai(S,Ma),C={};_&&T==="axis"&&(_.props.trigger==="click"?C={onClick:this.handleClick}:C={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var E=H_(this.props,this.handleOuterEvent);return fe(fe({},E),C)}},{key:"addListener",value:function(){PA.on(IA,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){PA.removeListener(IA,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(S,T,_){for(var C=this.state.formattedGraphicalItems,E=0,p=C.length;E<p;E++){var w=C[E];if(w.item===S||w.props.key===S.key||T===wl(w.item.type)&&_===w.childIndex)return w}return null}},{key:"renderClipPath",value:function(){var S=this.clipPathId,T=this.state.offset,_=T.left,C=T.top,E=T.height,p=T.width;return F.createElement("defs",null,F.createElement("clipPath",{id:S},F.createElement("rect",{x:_,y:C,height:E,width:p})))}},{key:"getXScales",value:function(){var S=this.state.xAxisMap;return S?Object.entries(S).reduce(function(T,_){var C=I6(_,2),E=C[0],p=C[1];return fe(fe({},T),{},bt({},E,p.scale))},{}):null}},{key:"getYScales",value:function(){var S=this.state.yAxisMap;return S?Object.entries(S).reduce(function(T,_){var C=I6(_,2),E=C[0],p=C[1];return fe(fe({},T),{},bt({},E,p.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(S){var T;return(T=this.state.xAxisMap)===null||T===void 0||(T=T[S])===null||T===void 0?void 0:T.scale}},{key:"getYScaleByAxisId",value:function(S){var T;return(T=this.state.yAxisMap)===null||T===void 0||(T=T[S])===null||T===void 0?void 0:T.scale}},{key:"getItemByXY",value:function(S){var T=this.state,_=T.formattedGraphicalItems,C=T.activeItem;if(_&&_.length)for(var E=0,p=_.length;E<p;E++){var w=_[E],A=w.props,P=w.item,I=P.type.defaultProps!==void 0?fe(fe({},P.type.defaultProps),P.props):P.props,k=wl(P.type);if(k==="Bar"){var L=(A.data||[]).find(function($){return nHe(S,$)});if(L)return{graphicalItem:w,payload:L}}else if(k==="RadialBar"){var U=(A.data||[]).find(function($){return aU(S,$)});if(U)return{graphicalItem:w,payload:U}}else if(n1(w,C)||r1(w,C)||gx(w,C)){var z=q7e({graphicalItem:w,activeTooltipItem:C,itemData:I.data}),O=I.activeIndex===void 0?z:I.activeIndex;return{graphicalItem:fe(fe({},w),{},{childIndex:O}),payload:gx(w,C)?I.data[z]:w.props.data[z]}}}return null}},{key:"render",value:function(){var S=this;if(!QB(this))return null;var T=this.props,_=T.children,C=T.className,E=T.width,p=T.height,w=T.style,A=T.compact,P=T.title,I=T.desc,k=k6(T,nXe),L=pt(k,!1);if(A)return F.createElement(m6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},F.createElement(TP,Yf({},L,{width:E,height:p,title:P,desc:I}),this.renderClipPath(),ZB(_,this.renderMap)));if(this.props.accessibilityLayer){var U,z;L.tabIndex=(U=this.props.tabIndex)!==null&&U!==void 0?U:0,L.role=(z=this.props.role)!==null&&z!==void 0?z:"application",L.onKeyDown=function($){S.accessibilityManager.keyboardEvent($)},L.onFocus=function(){S.accessibilityManager.focus()}}var O=this.parseEventsOfWrapper();return F.createElement(m6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},F.createElement("div",Yf({className:$t("recharts-wrapper",C),style:fe({position:"relative",cursor:"default",width:E,height:p},w)},O,{ref:function(D){S.container=D}}),F.createElement(TP,Yf({},L,{width:E,height:p,title:P,desc:I,style:xXe}),this.renderClipPath(),ZB(_,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(N.Component);bt(v,"displayName",n),bt(v,"defaultProps",fe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),bt(v,"getDerivedStateFromProps",function(y,b){var x=y.dataKey,S=y.data,T=y.children,_=y.width,C=y.height,E=y.layout,p=y.stackOffset,w=y.margin,A=b.dataStartIndex,P=b.dataEndIndex;if(b.updateId===void 0){var I=M6(y);return fe(fe(fe({},I),{},{updateId:0},m(fe(fe({props:y},I),{},{updateId:0}),b)),{},{prevDataKey:x,prevData:S,prevWidth:_,prevHeight:C,prevLayout:E,prevStackOffset:p,prevMargin:w,prevChildren:T})}if(x!==b.prevDataKey||S!==b.prevData||_!==b.prevWidth||C!==b.prevHeight||E!==b.prevLayout||p!==b.prevStackOffset||!fm(w,b.prevMargin)){var k=M6(y),L={chartX:b.chartX,chartY:b.chartY,isTooltipActive:b.isTooltipActive},U=fe(fe({},O6(b,S,E)),{},{updateId:b.updateId+1}),z=fe(fe(fe({},k),L),U);return fe(fe(fe({},z),m(fe({props:y},z),b)),{},{prevDataKey:x,prevData:S,prevWidth:_,prevHeight:C,prevLayout:E,prevStackOffset:p,prevMargin:w,prevChildren:T})}if(!EP(T,b.prevChildren)){var O,$,D,K,ie=Ai(T,vp),ae=ie&&(O=($=ie.props)===null||$===void 0?void 0:$.startIndex)!==null&&O!==void 0?O:A,_e=ie&&(D=(K=ie.props)===null||K===void 0?void 0:K.endIndex)!==null&&D!==void 0?D:P,Le=ae!==A||_e!==P,ct=!Ft(S),Nt=ct&&!Le?b.updateId:b.updateId+1;return fe(fe({updateId:Nt},m(fe(fe({props:y},b),{},{updateId:Nt,dataStartIndex:ae,dataEndIndex:_e}),b)),{},{prevChildren:T,dataStartIndex:ae,dataEndIndex:_e})}return null}),bt(v,"renderActiveDot",function(y,b,x){var S;return N.isValidElement(y)?S=N.cloneElement(y,b):_t(y)?S=y(b):S=F.createElement(XS,b),F.createElement(rn,{className:"recharts-active-dot",key:x},S)});var g=N.forwardRef(function(b,x){return F.createElement(v,Yf({},b,{ref:x}))});return g.displayName=v.displayName,g},CXe=KM({chartName:"BarChart",GraphicalChild:tf,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Ep},{axisType:"yAxis",AxisComp:Tp}],formatAxisMap:Yte}),PXe=KM({chartName:"PieChart",GraphicalChild:Jl,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:t1},{axisType:"radiusAxis",AxisComp:JS}],formatAxisMap:gqe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),IXe=KM({chartName:"AreaChart",GraphicalChild:ql,axisComponents:[{axisType:"xAxis",AxisComp:Ep},{axisType:"yAxis",AxisComp:Tp}],formatAxisMap:Yte});function kXe(){return i.jsxs("div",{className:"space-y-6 p-4 md:p-8 pt-6",children:[i.jsxs("div",{className:"flex flex-col space-y-2",children:[i.jsx(jc,{className:"h-8 w-[250px]"}),i.jsx(jc,{className:"h-4 w-[350px]"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((t,e)=>i.jsx(jc,{className:"h-[120px] rounded-xl"},e))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-7",children:[i.jsx(jc,{className:"col-span-4 h-[400px] rounded-xl"}),i.jsx(jc,{className:"col-span-3 h-[400px] rounded-xl"})]}),i.jsx(jc,{className:"h-[300px] w-full rounded-xl"})]})}const M0=["#0f172a","#334155","#475569","#64748b","#94a3b8"];function RXe(){var l,c,u,d;const{user:t}=ot(),{data:e,isLoading:n}=we({queryKey:["admin-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalRevenue:0,pendingInvoices:0,activeEmployees:0,totalEmployees:0,totalPayroll:0,totalExpenses:0,activeProjects:0,totalCustomers:0,departmentData:[],monthlyRevenue:[],projects:[]};const h=await jr.getCompanyIdForUser(t.id),[f,{invoices:m,employees:v,payrollRuns:g,projects:y,customers:b}]=await Promise.all([Cn.getDashboardLiveMetrics({companyId:h}),jr.runQueries(t.id,{invoices:{collectionName:Y.INVOICES},employees:{collectionName:Y.EMPLOYEES},payrollRuns:{collectionName:Y.PAYROLL_RUNS},projects:{collectionName:Y.PROJECTS},customers:{collectionName:Y.CUSTOMERS}})]),x=v.reduce((C,E)=>{const p=Ke(E,["department"],"Other");return C[p]||(C[p]=0),C[p]++,C},{}),S=Array.from({length:6}).map((C,E)=>{const p=new Date;p.setDate(1),p.setMonth(p.getMonth()-(5-E));const w=new Date(p.getFullYear(),p.getMonth(),1),A=new Date(p.getFullYear(),p.getMonth()+1,0);return{label:w.toLocaleString("en-US",{month:"short"}),startDate:w.toISOString().slice(0,10),endDate:A.toISOString().slice(0,10)}}),T=await Promise.all(S.map(C=>Cn.getProfitLossReport({companyId:h,startDate:C.startDate,endDate:C.endDate}))),_=S.map((C,E)=>{var p,w;return{name:C.label,revenue:((p=T[E])==null?void 0:p.totalIncome)||0,expenses:((w=T[E])==null?void 0:w.totalExpenses)||0}});return{totalRevenue:f.monthlyIncome,pendingInvoices:m.filter(C=>{const E=Ke(C,["status"]).toLowerCase();return!["paid","cancelled","rejected"].includes(E)}).length,activeEmployees:v.filter(C=>Ke(C,["employmentStatus","employment_status"])==="active").length,totalEmployees:v.length,totalPayroll:g.filter(C=>{const E=Ke(C,["status","payrollStatus","payroll_status"]).toLowerCase();return["processed","paid","approved","final"].includes(E)}).reduce((C,E)=>C+Jt(E,["totalNet","total_net"]),0),totalExpenses:f.monthlyExpenses,activeProjects:y.filter(C=>Ke(C,["status"])==="active").length,totalCustomers:b.length,departmentData:Object.entries(x).map(([C,E])=>({name:C,value:E})),monthlyRevenue:_,projects:y.slice(0,5)}}}),r=(t==null?void 0:t.displayName)||((l=t==null?void 0:t.email)==null?void 0:l.split("@")[0])||"Admin";if(n)return i.jsx(kXe,{});const a=[{title:"Total Revenue",value:`ZMW ${(e||{totalRevenue:0,pendingInvoices:0,activeEmployees:0,totalEmployees:0,totalPayroll:0,totalExpenses:0,activeProjects:0,totalCustomers:0,departmentData:[],monthlyRevenue:[],projects:[]}).totalRevenue.toLocaleString()}`,icon:Xn,trend:"Current month (GL)",color:"text-green-600",bgColor:"bg-green-100",iconColor:"text-green-600"},{title:"Employees",value:((c=e==null?void 0:e.totalEmployees)==null?void 0:c.toLocaleString())||"0",subtitle:`${(e==null?void 0:e.activeEmployees)||0} active`,icon:ui,color:"bg-blue-500",bgColor:"bg-blue-50",iconColor:"text-blue-500"},{title:"Health Index",value:"75%",icon:Xk,color:"bg-green-500",bgColor:"bg-green-50",iconColor:"text-green-500",trend:"+2%"},{title:"Customers",value:((u=e==null?void 0:e.totalCustomers)==null?void 0:u.toLocaleString())||"0",icon:ale,color:"bg-purple-500",bgColor:"bg-purple-50",iconColor:"text-purple-500"}],o=[{name:"Invoice #1234",type:"Payment Due",date:"Today",status:"urgent"},{name:"Payroll Run",type:"Monthly",date:"Friday",status:"scheduled"},{name:"Tax Filing",type:"ZRA Compliance",date:"Next Week",status:"pending"},{name:"Budget Review",type:"Finance",date:"Monday",status:"scheduled"}];return i.jsxs("div",{className:"space-y-6 min-h-screen pb-10",children:[i.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-3 md:gap-4 w-full md:w-auto justify-between md:justify-start",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-foreground",children:["Welcome ",r,","]}),i.jsx("p",{className:"text-xs md:text-base text-muted-foreground",children:"Here's your organization's financial overview."})]}),i.jsx("div",{className:"md:hidden",children:i.jsx(_P,{className:"h-8 w-8 border border-border",children:i.jsx(jP,{className:"bg-primary/10 text-primary font-medium text-xs",children:r.charAt(0).toUpperCase()})})})]}),i.jsxs("div",{className:"flex items-center gap-2 md:gap-4 w-full md:w-auto justify-end",children:[i.jsxs("div",{className:"relative hidden md:block",children:[i.jsx(Ms,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"Search...",className:"pl-10 w-64 rounded-full bg-muted/50 focus:bg-background transition-colors"})]}),i.jsxs(W,{variant:"ghost",size:"icon",className:"relative text-muted-foreground hover:text-foreground",children:[i.jsx($oe,{className:"h-5 w-5"}),i.jsx("span",{className:"absolute top-2 right-2 h-2 w-2 bg-red-500 rounded-full ring-2 ring-background"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(tle,{className:"h-4 w-4 text-muted-foreground"}),i.jsx(us,{}),i.jsx("span",{className:"hidden md:inline text-sm text-muted-foreground",children:"Dark Mode"})]}),i.jsxs("div",{className:"hidden md:flex items-center gap-3 pl-4 border-l",children:[i.jsx(_P,{className:"h-9 w-9 border border-border",children:i.jsx(jP,{className:"bg-primary/10 text-primary font-medium",children:r.charAt(0).toUpperCase()})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:r}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Administrator"})]})]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:a.map((h,f)=>i.jsx(Q,{className:"border border-border/50 shadow-sm hover:shadow-md transition-shadow",children:i.jsxs(ne,{className:"p-4 md:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:`p-2 md:p-3 rounded-xl ${h.bgColor}`,children:i.jsx(h.icon,{className:`h-4 w-4 md:h-5 md:w-5 ${h.iconColor}`})}),h.trend&&i.jsxs(Ve,{className:"bg-green-100 text-green-700 hover:bg-green-200 border-green-200 gap-1 text-xs px-1.5 py-0.5",children:[i.jsx(ma,{className:"h-3 w-3"}),h.trend]})]}),i.jsxs("div",{className:"mt-3 md:mt-4",children:[i.jsx("p",{className:"text-xs md:text-sm font-medium text-muted-foreground",children:h.title}),i.jsx("p",{className:"text-2xl md:text-3xl font-bold mt-1 tracking-tight text-foreground",children:h.value}),h.subtitle&&i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:h.subtitle})]})]})},f))}),i.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[i.jsxs(Q,{className:"border border-border/50 shadow-sm",children:[i.jsx(ee,{children:i.jsx(te,{className:"text-lg",children:"Department Distribution"})}),i.jsx(ne,{children:i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsxs("div",{className:"relative w-40 h-40",children:[i.jsx(pA,{width:"100%",height:"100%",children:i.jsx(PXe,{children:i.jsx(Jl,{data:(d=e==null?void 0:e.departmentData)!=null&&d.length?e.departmentData:[{name:"No Data",value:1}],innerRadius:50,outerRadius:70,paddingAngle:2,dataKey:"value",children:((e==null?void 0:e.departmentData)||[{name:"No Data",value:1}]).map((h,f)=>i.jsx(FS,{fill:M0[f%M0.length]},`cell-${f}`))})})}),i.jsxs("div",{className:"absolute inset-0 flex items-center justify-center flex-col",children:[i.jsx("p",{className:"text-2xl font-bold text-primary",children:(e==null?void 0:e.totalEmployees)||0}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Total"})]})]}),i.jsxs("div",{className:"flex-1 space-y-2",children:[((e==null?void 0:e.departmentData)||[]).slice(0,5).map((h,f)=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:M0[f%M0.length]}}),i.jsx("span",{className:"truncate max-w-[100px] text-muted-foreground",children:h.name})]}),i.jsx("span",{className:"font-medium",children:h.value})]},h.name)),(!(e!=null&&e.departmentData)||e.departmentData.length===0)&&i.jsx("p",{className:"text-sm text-muted-foreground",children:"No employee data"})]})]})})]}),i.jsxs(Q,{className:"lg:col-span-2 border border-border/50 shadow-sm",children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between",children:[i.jsx(te,{className:"text-lg",children:"Revenue Overview"}),i.jsxs("div",{className:"flex gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-slate-900"}),i.jsx("span",{className:"text-muted-foreground",children:"Revenue"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-blue-500"}),i.jsx("span",{className:"text-muted-foreground",children:"Expenses"})]})]})]}),i.jsx(ne,{children:i.jsx(pA,{width:"100%",height:250,children:i.jsxs(IXe,{data:(e==null?void 0:e.monthlyRevenue)||[],children:[i.jsxs("defs",{children:[i.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"5%",stopColor:"#0f172a",stopOpacity:.1}),i.jsx("stop",{offset:"95%",stopColor:"#0f172a",stopOpacity:0})]}),i.jsxs("linearGradient",{id:"colorExpenses",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.1}),i.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})]}),i.jsx(pne,{strokeDasharray:"3 3",vertical:!1,stroke:"#e2e8f0"}),i.jsx(Ep,{dataKey:"name",axisLine:!1,tickLine:!1,fontSize:12,tick:{fill:"#64748b"}}),i.jsx(Tp,{axisLine:!1,tickLine:!1,fontSize:12,tick:{fill:"#64748b"},tickFormatter:h=>`K${h/1e3}k`}),i.jsx(Ma,{contentStyle:{borderRadius:"8px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),i.jsx(ql,{type:"monotone",dataKey:"revenue",stroke:"#0f172a",fill:"url(#colorRevenue)",strokeWidth:2}),i.jsx(ql,{type:"monotone",dataKey:"expenses",stroke:"#3b82f6",fill:"url(#colorExpenses)",strokeWidth:2})]})})})]})]}),i.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[i.jsxs(Q,{className:"lg:col-span-2 border border-border/50 shadow-sm",children:[i.jsx(ee,{children:i.jsxs(te,{className:"text-lg flex items-center gap-2",children:[i.jsx(Joe,{className:"h-5 w-5 text-primary"}),"Regional Performance"]})}),i.jsx(ne,{children:i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsx("div",{className:"space-y-4",children:[{region:"Lusaka",value:42e3,color:"bg-primary"},{region:"Copperbelt",value:28e3,color:"bg-blue-500"},{region:"Southern",value:18e3,color:"bg-indigo-500"},{region:"Eastern",value:12e3,color:"bg-violet-500"}].map(h=>i.jsxs("div",{className:"flex items-center justify-between group",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${h.color}`}),i.jsx("span",{className:"font-medium text-muted-foreground group-hover:text-foreground transition-colors",children:h.region})]}),i.jsx("span",{className:"font-bold tabular-nums",children:le(h.value)})]},h.region))}),i.jsx("div",{className:"flex items-center justify-center",children:i.jsx(pA,{width:"100%",height:200,children:i.jsxs(CXe,{data:[{name:"Lusaka",value:42},{name:"Copperbelt",value:28},{name:"Southern",value:18},{name:"Eastern",value:12}],children:[i.jsx(Ep,{dataKey:"name",axisLine:!1,tickLine:!1,fontSize:12,tick:{fill:"#64748b"}}),i.jsx(Tp,{hide:!0}),i.jsx(Ma,{cursor:{fill:"#f1f5f9"},contentStyle:{borderRadius:"8px",border:"1px solid #e2e8f0"}}),i.jsx(tf,{dataKey:"value",fill:"#0f172a",radius:[4,4,0,0],barSize:40})]})})})]})})]}),i.jsxs(Q,{className:"border border-border/50 shadow-sm",children:[i.jsx(ee,{children:i.jsxs(te,{className:"text-lg flex items-center gap-2",children:[i.jsx($m,{className:"h-5 w-5 text-primary"}),"Upcoming Tasks"]})}),i.jsx(ne,{children:i.jsx("div",{className:"space-y-4",children:o.map((h,f)=>i.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg hover:bg-muted/50 transition-colors border border-transparent hover:border-border/50",children:[i.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center ${h.status==="urgent"?"bg-red-50 text-red-600":h.status==="scheduled"?"bg-blue-50 text-blue-600":"bg-slate-50 text-slate-600"}`,children:i.jsx(Roe,{className:"h-4.5 w-4.5"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium text-sm text-foreground",children:h.name}),i.jsx("p",{className:"text-xs text-muted-foreground",children:h.type})]}),i.jsx(Ve,{variant:h.status==="urgent"?"destructive":"secondary",className:"text-xs font-normal",children:h.date})]},f))})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsx(Q,{className:"border border-border/50 shadow-sm hover:border-primary/20 transition-colors",children:i.jsx(ne,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Active Projects"}),i.jsx("p",{className:"text-2xl font-bold mt-1",children:(e==null?void 0:e.activeProjects)||0})]}),i.jsx("div",{className:"h-10 w-10 rounded-xl bg-green-50 flex items-center justify-center",children:i.jsx(ur,{className:"h-5 w-5 text-green-600"})})]})})}),i.jsx(Q,{className:"border border-border/50 shadow-sm hover:border-primary/20 transition-colors",children:i.jsx(ne,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Pending Invoices"}),i.jsx("p",{className:"text-2xl font-bold mt-1",children:(e==null?void 0:e.pendingInvoices)||0})]}),i.jsx("div",{className:"h-10 w-10 rounded-xl bg-amber-50 flex items-center justify-center",children:i.jsx(Xn,{className:"h-5 w-5 text-amber-600"})})]})})}),i.jsx(Q,{className:"border border-border/50 shadow-sm hover:border-primary/20 transition-colors",children:i.jsx(ne,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Total Payroll"}),i.jsx("p",{className:"text-2xl font-bold mt-1",children:le((e==null?void 0:e.totalPayroll)||0)})]}),i.jsx("div",{className:"h-10 w-10 rounded-xl bg-blue-50 flex items-center justify-center",children:i.jsx(ui,{className:"h-5 w-5 text-blue-600"})})]})})}),i.jsx(Q,{className:"border border-border/50 shadow-sm hover:border-primary/20 transition-colors",children:i.jsx(ne,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Total Expenses"}),i.jsx("p",{className:"text-2xl font-bold mt-1",children:le((e==null?void 0:e.totalExpenses)||0)})]}),i.jsx("div",{className:"h-10 w-10 rounded-xl bg-red-50 flex items-center justify-center",children:i.jsx(ma,{className:"h-5 w-5 text-red-600"})})]})})})]})]})}function OXe(){var s;const{user:t}=ot(),{data:e}=we({queryKey:["accountant-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalRevenue:0,outstandingReceivables:0,totalExpenses:0,outstandingPayables:0,cashBalance:0,pendingInvoices:0,bankAccounts:[]};const a=await jr.getCompanyIdForUser(t.id),[o,{invoices:l,bankAccounts:c}]=await Promise.all([Cn.getDashboardLiveMetrics({companyId:a}),jr.runQueries(t.id,{invoices:{collectionName:Y.INVOICES},bankAccounts:{collectionName:Y.BANK_ACCOUNTS}})]);return{totalRevenue:o.monthlyIncome,outstandingReceivables:o.outstandingAccountsReceivable,totalExpenses:o.monthlyExpenses,outstandingPayables:o.outstandingAccountsPayable,cashBalance:o.bankDefaultBalance,pendingInvoices:l.filter(u=>{const d=Ke(u,["status"]).toLowerCase();return!["paid","cancelled","rejected"].includes(d)}).length,bankAccounts:c}}}),n=[{title:"Total Revenue",value:le((e==null?void 0:e.totalRevenue)||0),icon:Xn,trend:"up"},{title:"Outstanding Receivables",value:le((e==null?void 0:e.outstandingReceivables)||0),icon:ur,trend:"neutral"},{title:"Total Expenses",value:le((e==null?void 0:e.totalExpenses)||0),icon:Ja,trend:"down"},{title:"Cash Balance",value:le((e==null?void 0:e.cashBalance)||0),icon:fh,trend:"up"}],r=((e==null?void 0:e.totalRevenue)||0)-((e==null?void 0:e.totalExpenses)||0);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Accountant Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Financial overview and key metrics"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(a=>i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:a.title}),i.jsx(a.icon,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(ne,{children:[i.jsx("div",{className:"text-2xl font-bold",children:a.value}),a.trend==="up"&&i.jsx(ma,{className:"h-3 w-3 text-green-500 inline ml-1"}),a.trend==="down"&&i.jsx(Ja,{className:"h-3 w-3 text-red-500 inline ml-1"})]})]},a.title))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"Profit & Loss Summary"})}),i.jsxs(ne,{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Revenue"}),i.jsx("span",{className:"font-medium text-green-600",children:le((e==null?void 0:e.totalRevenue)||0)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Expenses"}),i.jsxs("span",{className:"font-medium text-red-600",children:["(",le((e==null?void 0:e.totalExpenses)||0),")"]})]}),i.jsxs("div",{className:"border-t pt-3 flex justify-between",children:[i.jsx("span",{className:"font-semibold",children:"Net Income"}),i.jsx("span",{className:`font-bold ${r>=0?"text-green-600":"text-red-600"}`,children:le(r)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Outstanding Payables"}),i.jsx("span",{className:"font-medium",children:le((e==null?void 0:e.outstandingPayables)||0)})]})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsxs(te,{className:"flex items-center gap-2",children:[i.jsx(Voe,{className:"h-5 w-5"}),"Bank Accounts"]})}),i.jsx(ne,{children:i.jsxs("div",{className:"space-y-3",children:[(s=e==null?void 0:e.bankAccounts)==null?void 0:s.map(a=>i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:Ke(a,["accountName","account_name"],"Bank Account")}),i.jsx("span",{className:"font-medium",children:le(Jt(a,["currentBalance","current_balance"]))})]},Ke(a,["accountName","account_name","id"],"bank-account"))),(!(e!=null&&e.bankAccounts)||e.bankAccounts.length===0)&&i.jsx("p",{className:"text-muted-foreground text-sm",children:"No bank accounts configured"})]})})]})]})]})}function MXe(){const{user:t}=ot(),{data:e}=we({queryKey:["bookkeeper-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalInvoices:0,paidInvoices:0,unpaidInvoicesAmount:0,totalExpenses:0,unpaidBillsAmount:0,overdueBillsCount:0,overdueBillsAmount:0,vendorCount:0,customerCount:0,recentExpenses:[]};const r=await jr.getCompanyIdForUser(t.id),[s,{invoices:a,expenses:o,bills:l,vendors:c,customers:u}]=await Promise.all([Cn.getDashboardLiveMetrics({companyId:r}),jr.runQueries(t.id,{invoices:{collectionName:Y.INVOICES},expenses:{collectionName:Y.EXPENSES},bills:{collectionName:Y.BILLS},vendors:{collectionName:Y.VENDORS},customers:{collectionName:Y.CUSTOMERS}})]),d=new Date().toISOString().split("T")[0],h=l.filter(f=>{const m=Ke(f,["dueDate","due_date"]);return Ke(f,["status"]).toLowerCase()!=="paid"&&!!m&&m<d});return{totalInvoices:a.length,paidInvoices:a.filter(f=>Ke(f,["status"]).toLowerCase()==="paid").length,unpaidInvoicesAmount:s.outstandingAccountsReceivable,totalExpenses:s.monthlyExpenses,unpaidBillsAmount:s.outstandingAccountsPayable,overdueBillsCount:h.length,overdueBillsAmount:h.reduce((f,m)=>f+Jt(m,["total","amount"]),0),vendorCount:c.length,customerCount:u.length,recentExpenses:o.slice(0,5)}}}),n=[{title:"Invoices Created",value:(e==null?void 0:e.totalInvoices)||0,subtitle:`${(e==null?void 0:e.paidInvoices)||0} paid`,icon:ur,color:"text-primary"},{title:"Unpaid Invoices",value:le((e==null?void 0:e.unpaidInvoicesAmount)||0),icon:Fx,color:"text-warning"},{title:"Total Expenses",value:le((e==null?void 0:e.totalExpenses)||0),icon:Ja,color:"text-destructive"},{title:"Unpaid Bills",value:le((e==null?void 0:e.unpaidBillsAmount)||0),icon:fh,color:"text-amber-600"}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Bookkeeper Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Daily transaction overview and data entry tasks"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(r=>i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:r.title}),i.jsx(r.icon,{className:`h-4 w-4 ${r.color}`})]}),i.jsxs(ne,{children:[i.jsx("div",{className:"text-2xl font-bold",children:r.value}),"subtitle"in r&&i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r.subtitle})]})]},r.title))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsxs(te,{className:"flex items-center gap-2",children:[i.jsx(ma,{className:"h-5 w-5 text-primary"}),"Quick Stats"]})}),i.jsxs(ne,{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Customers"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.customerCount)||0})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Vendors"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.vendorCount)||0})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Overdue Bills"}),i.jsx("span",{className:"font-medium text-destructive",children:(e==null?void 0:e.overdueBillsCount)||0})]})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsxs(te,{className:"flex items-center gap-2 text-destructive",children:[i.jsx(Xn,{className:"h-5 w-5"}),"Overdue Payments"]})}),i.jsx(ne,{children:(e==null?void 0:e.overdueBillsCount)>0?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Bills Overdue"}),i.jsx("span",{className:"font-bold text-destructive",children:e.overdueBillsCount})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Amount"}),i.jsx("span",{className:"font-bold text-destructive",children:le(e.overdueBillsAmount||0)})]})]}):i.jsx("p",{className:"text-muted-foreground text-sm",children:"No overdue payments"})})]})]})]})}function ts(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Wl(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function One(t,e){const n=ts(t);if(isNaN(e))return Wl(t,NaN);if(!e)return n;const r=n.getDate(),s=Wl(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const a=s.getDate();return r>=a?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}const Mne=6048e5,DXe=864e5;let LXe={};function u1(){return LXe}function jx(t,e){var l,c,u,d;const n=u1(),r=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=ts(t),a=s.getDay(),o=(a<r?7:0)+a-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Wj(t){return jx(t,{weekStartsOn:1})}function Dne(t){const e=ts(t),n=e.getFullYear(),r=Wl(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Wj(r),a=Wl(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=Wj(a);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function L6(t){const e=ts(t);return e.setHours(0,0,0,0),e}function $6(t){const e=ts(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Lne(t,e){const n=L6(t),r=L6(e),s=+n-$6(n),a=+r-$6(r);return Math.round((s-a)/DXe)}function $Xe(t){const e=Dne(t),n=Wl(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Wj(n)}function FXe(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function VXe(t){if(!FXe(t)&&typeof t!="number")return!1;const e=ts(t);return!isNaN(Number(e))}function Ns(t,e){const n=ts(t),r=ts(e),s=F6(n,r),a=Math.abs(Lne(n,r));n.setDate(n.getDate()-s*a);const o=+(F6(n,r)===-s),l=s*(a-o);return l===0?0:l}function F6(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function $ne(t){const e=ts(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function Fne(t){const e=ts(t);return e.setDate(1),e.setHours(0,0,0,0),e}function BXe(t){const e=ts(t),n=Wl(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const UXe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},zXe=(t,e,n)=>{let r;const s=UXe[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function RA(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const qXe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},WXe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},HXe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},KXe={date:RA({formats:qXe,defaultWidth:"full"}),time:RA({formats:WXe,defaultWidth:"full"}),dateTime:RA({formats:HXe,defaultWidth:"full"})},GXe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},YXe=(t,e,n,r)=>GXe[t];function Zg(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):o;s=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[l]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return s[a]}}const QXe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},XXe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ZXe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},JXe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eZe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},tZe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},nZe=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},rZe={ordinalNumber:nZe,era:Zg({values:QXe,defaultWidth:"wide"}),quarter:Zg({values:XXe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Zg({values:ZXe,defaultWidth:"wide"}),day:Zg({values:JXe,defaultWidth:"wide"}),dayPeriod:Zg({values:eZe,defaultWidth:"wide",formattingValues:tZe,defaultFormattingWidth:"wide"})};function Jg(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(s);if(!a)return null;const o=a[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?iZe(l,h=>h.test(o)):sZe(l,h=>h.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function sZe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function iZe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function aZe(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(s.length);return{value:o,rest:l}}}const oZe=/^(\d+)(th|st|nd|rd)?/i,lZe=/\d+/i,cZe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},uZe={any:[/^b/i,/^(a|c)/i]},dZe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},hZe={any:[/1/i,/2/i,/3/i,/4/i]},fZe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},mZe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},pZe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},gZe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},yZe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},vZe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},xZe={ordinalNumber:aZe({matchPattern:oZe,parsePattern:lZe,valueCallback:t=>parseInt(t,10)}),era:Jg({matchPatterns:cZe,defaultMatchWidth:"wide",parsePatterns:uZe,defaultParseWidth:"any"}),quarter:Jg({matchPatterns:dZe,defaultMatchWidth:"wide",parsePatterns:hZe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Jg({matchPatterns:fZe,defaultMatchWidth:"wide",parsePatterns:mZe,defaultParseWidth:"any"}),day:Jg({matchPatterns:pZe,defaultMatchWidth:"wide",parsePatterns:gZe,defaultParseWidth:"any"}),dayPeriod:Jg({matchPatterns:yZe,defaultMatchWidth:"any",parsePatterns:vZe,defaultParseWidth:"any"})},bZe={code:"en-US",formatDistance:zXe,formatLong:KXe,formatRelative:YXe,localize:rZe,match:xZe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function wZe(t){const e=ts(t);return Lne(e,BXe(e))+1}function _Ze(t){const e=ts(t),n=+Wj(e)-+$Xe(e);return Math.round(n/Mne)+1}function Vne(t,e){var d,h,f,m;const n=ts(t),r=n.getFullYear(),s=u1(),a=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=Wl(t,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const l=jx(o,e),c=Wl(t,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const u=jx(c,e);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function jZe(t,e){var l,c,u,d;const n=u1(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=Vne(t,e),a=Wl(t,0);return a.setFullYear(s,0,r),a.setHours(0,0,0,0),jx(a,e)}function NZe(t,e){const n=ts(t),r=+jx(n,e)-+jZe(n,e);return Math.round(r/Mne)+1}function bn(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const fc={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return bn(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):bn(n+1,2)},d(t,e){return bn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return bn(t.getHours()%12||12,e.length)},H(t,e){return bn(t.getHours(),e.length)},m(t,e){return bn(t.getMinutes(),e.length)},s(t,e){return bn(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return bn(s,e.length)}},yf={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},V6={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return fc.y(t,e)},Y:function(t,e,n,r){const s=Vne(t,r),a=s>0?s:1-s;if(e==="YY"){const o=a%100;return bn(o,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):bn(a,e.length)},R:function(t,e){const n=Dne(t);return bn(n,e.length)},u:function(t,e){const n=t.getFullYear();return bn(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return bn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return bn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return fc.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return bn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=NZe(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):bn(s,e.length)},I:function(t,e,n){const r=_Ze(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):bn(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):fc.d(t,e)},D:function(t,e,n){const r=wZe(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):bn(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return bn(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return bn(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return bn(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=yf.noon:r===0?s=yf.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=yf.evening:r>=12?s=yf.afternoon:r>=4?s=yf.morning:s=yf.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return fc.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):fc.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):bn(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):bn(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):fc.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):fc.s(t,e)},S:function(t,e){return fc.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return U6(r);case"XXXX":case"XX":return Ad(r);case"XXXXX":case"XXX":default:return Ad(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return U6(r);case"xxxx":case"xx":return Ad(r);case"xxxxx":case"xxx":default:return Ad(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+B6(r,":");case"OOOO":default:return"GMT"+Ad(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+B6(r,":");case"zzzz":default:return"GMT"+Ad(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return bn(r,e.length)},T:function(t,e,n){const r=t.getTime();return bn(r,e.length)}};function B6(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),a=r%60;return a===0?n+String(s):n+String(s)+e+bn(a,2)}function U6(t,e){return t%60===0?(t>0?"-":"+")+bn(Math.abs(t)/60,2):Ad(t,e)}function Ad(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=bn(Math.trunc(r/60),2),a=bn(r%60,2);return n+s+e+a}const z6=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Bne=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},SZe=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return z6(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",z6(r,e)).replace("{{time}}",Bne(s,e))},EZe={p:Bne,P:SZe},AZe=/^D+$/,TZe=/^Y+$/,CZe=["D","DD","YY","YYYY"];function PZe(t){return AZe.test(t)}function IZe(t){return TZe.test(t)}function kZe(t,e,n){const r=RZe(t,e,n);if(console.warn(r),CZe.includes(t))throw new RangeError(r)}function RZe(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const OZe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,MZe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,DZe=/^'([^]*?)'?$/,LZe=/''/g,$Ze=/[a-zA-Z]/;function ut(t,e,n){var d,h,f,m;const r=u1(),s=r.locale??bZe,a=r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=r.weekStartsOn??((m=(f=r.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??0,l=ts(t);if(!VXe(l))throw new RangeError("Invalid time value");let c=e.match(MZe).map(v=>{const g=v[0];if(g==="p"||g==="P"){const y=EZe[g];return y(v,s.formatLong)}return v}).join("").match(OZe).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const g=v[0];if(g==="'")return{isToken:!1,value:FZe(v)};if(V6[g])return{isToken:!0,value:v};if(g.match($Ze))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:v}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:a,weekStartsOn:o,locale:s};return c.map(v=>{if(!v.isToken)return v.value;const g=v.value;(IZe(g)||PZe(g))&&kZe(g,e,String(t));const y=V6[g[0]];return y(l,g,s.localize,u)}).join("")}function FZe(t){const e=t.match(DZe);return e?e[1].replace(LZe,"'"):t}function vf(t){return ts(t).getFullYear()}function Une(t){return+ts(t)<Date.now()}function q6(t,e){return One(t,-e)}function VZe(){const{user:t}=ot(),{data:e}=we({queryKey:["hr-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalEmployees:0,activeEmployees:0,permanentEmployees:0,contractEmployees:0,departments:0,monthlyPayroll:0,pendingPayroll:0,activeAdvances:0,totalAdvanceBalance:0,hoursLogged:0,pendingTimeEntries:0};const r=ut(new Date,"yyyy-MM"),s=`${r}-01`,a=new Date(parseInt(r.split("-")[0]),parseInt(r.split("-")[1]),0).toISOString().split("T")[0],{employees:o,payrollRuns:l,advances:c,timeEntries:u}=await jr.runQueries(t.id,{employees:{collectionName:Y.EMPLOYEES},payrollRuns:{collectionName:Y.PAYROLL_RUNS,filters:[{field:"runDate",op:">=",value:s},{field:"runDate",op:"<=",value:a}]},advances:{collectionName:Y.ADVANCES},timeEntries:{collectionName:Y.TIME_ENTRIES,filters:[{field:"workDate",op:">=",value:s}]}}),d=new Set(o.map(h=>Ke(h,["department"])).filter(h=>!!h));return{totalEmployees:o.length,activeEmployees:o.filter(h=>Ke(h,["employmentStatus","employment_status"])==="active").length,permanentEmployees:o.filter(h=>Ke(h,["contractType","contract_type"])==="permanent").length,contractEmployees:o.filter(h=>Ke(h,["contractType","contract_type"])==="contract").length,departments:d.size,monthlyPayroll:l.filter(h=>{const f=Ke(h,["status","payrollStatus","payroll_status"]).toLowerCase();return["processed","paid","approved","final"].includes(f)}).reduce((h,f)=>h+Jt(f,["totalNet","total_net"]),0),pendingPayroll:l.filter(h=>{const f=Ke(h,["status","payrollStatus","payroll_status"]).toLowerCase();return["draft","pending"].includes(f)}).length,activeAdvances:c.filter(h=>Ke(h,["status"])==="active").length,totalAdvanceBalance:c.filter(h=>Ke(h,["status"])==="active").reduce((h,f)=>h+Jt(f,["remainingBalance","remaining_balance"]),0),hoursLogged:u.reduce((h,f)=>h+Jt(f,["hoursWorked","hours_worked"]),0),pendingTimeEntries:u.filter(h=>Ke(h,["status"])==="pending").length}}}),n=[{title:"Active Employees",value:(e==null?void 0:e.activeEmployees)||0,icon:ui,color:"text-blue-500"},{title:"Monthly Payroll",value:le((e==null?void 0:e.monthlyPayroll)||0),icon:Xn,color:"text-green-500"},{title:"Active Advances",value:(e==null?void 0:e.activeAdvances)||0,icon:$m,color:"text-amber-500"},{title:"Hours Logged",value:`${(e==null?void 0:e.hoursLogged)||0}h`,icon:Di,color:"text-purple-500"}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"HR & Payroll Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Employee and payroll management overview"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(r=>i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:r.title}),i.jsx(r.icon,{className:`h-4 w-4 ${r.color}`})]}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:r.value})})]},r.title))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"Workforce Breakdown"})}),i.jsxs(ne,{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Employees"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.totalEmployees)||0})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Permanent Staff"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.permanentEmployees)||0})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Contract Staff"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.contractEmployees)||0})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Departments"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.departments)||0})]})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsxs(te,{className:"flex items-center gap-2",children:[i.jsx(ks,{className:"h-5 w-5 text-warning"}),"Pending Actions"]})}),i.jsxs(ne,{className:"space-y-3",children:[(e==null?void 0:e.pendingPayroll)>0&&i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(ks,{className:"h-5 w-5 text-warning mt-0.5"}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-medium",children:[e.pendingPayroll," Pending Payroll Run(s)"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Awaiting approval"})]})]}),(e==null?void 0:e.pendingTimeEntries)>0&&i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Di,{className:"h-5 w-5 text-accent mt-0.5"}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-medium",children:[e.pendingTimeEntries," Pending Time Entries"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Need review"})]})]}),i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Xn,{className:"h-5 w-5 text-amber-500 mt-0.5"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Outstanding Advances"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[le((e==null?void 0:e.totalAdvanceBalance)||0)," remaining"]})]})]})]})]})]})]})}function BZe(){var r;const{user:t}=ot(),{data:e}=we({queryKey:["inventory-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalItems:0,lowStockCount:0,lowStockItems:[],totalValue:0,categories:0,recentMovements:0,inMovements:0,outMovements:0};const{items:s,movements:a}=await jr.runQueries(t.id,{items:{collectionName:Y.INVENTORY_ITEMS},movements:{collectionName:Y.STOCK_MOVEMENTS,orderByField:"createdAt",orderDirection:"desc",limitCount:100}}),o=s.filter(u=>{const d=Jt(u,["quantityOnHand","quantity_on_hand"]),h=Jt(u,["reorderPoint","reorder_point"]);return d<=h}),l=s.reduce((u,d)=>{const h=Jt(d,["quantityOnHand","quantity_on_hand"]),f=Jt(d,["unitCost","unit_cost"]);return u+h*f},0),c=new Set(s.map(u=>Ke(u,["category"])).filter(u=>!!u)).size;return{totalItems:s.length,lowStockCount:o.length,lowStockItems:o.slice(0,5),totalValue:l,categories:c,recentMovements:a.length,inMovements:a.filter(u=>Ke(u,["movementType","movement_type"])==="in").reduce((u,d)=>u+Jt(d,["quantity"]),0),outMovements:a.filter(u=>Ke(u,["movementType","movement_type"])==="out").reduce((u,d)=>u+Jt(d,["quantity"]),0)}}}),n=[{title:"Total Items",value:(e==null?void 0:e.totalItems)||0,icon:sa,color:"text-blue-500"},{title:"Low Stock Alerts",value:(e==null?void 0:e.lowStockCount)||0,icon:eo,color:"text-red-500"},{title:"Total Value",value:le((e==null?void 0:e.totalValue)||0),icon:Xn,color:"text-green-500"},{title:"Categories",value:(e==null?void 0:e.categories)||0,icon:ma,color:"text-purple-500"}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Inventory Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Stock levels and inventory management overview"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(s=>i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:s.title}),i.jsx(s.icon,{className:`h-4 w-4 ${s.color}`})]}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:s.value})})]},s.title))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsxs(te,{className:"flex items-center gap-2",children:[i.jsx(eo,{className:"h-5 w-5 text-destructive"}),"Low Stock Items"]})}),i.jsx(ne,{children:i.jsxs("div",{className:"space-y-3",children:[(r=e==null?void 0:e.lowStockItems)==null?void 0:r.map(s=>i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:Ke(s,["name"],"Unnamed Item")}),i.jsxs("span",{className:"font-medium text-destructive",children:[Jt(s,["quantityOnHand","quantity_on_hand"])," / ",Jt(s,["reorderPoint","reorder_point"])]})]},Ke(s,["id","name"],"inventory-item"))),(!(e!=null&&e.lowStockItems)||e.lowStockItems.length===0)&&i.jsx("p",{className:"text-muted-foreground text-sm",children:"No low stock alerts"})]})})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"Recent Activity"})}),i.jsxs(ne,{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Items Received"}),i.jsxs("span",{className:"font-medium text-green-600",children:["+",(e==null?void 0:e.inMovements)||0]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Items Issued"}),i.jsxs("span",{className:"font-medium text-red-600",children:["-",(e==null?void 0:e.outMovements)||0]})]}),i.jsxs("div",{className:"border-t pt-3 flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Recent Movements"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.recentMovements)||0})]})]})]})]})]})}var GM="Progress",YM=100,[UZe,Vtt]=ps(GM),[zZe,qZe]=UZe(GM),zne=N.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=WZe,...o}=t;(s||s===0)&&!W6(s)&&console.error(HZe(`${s}`,"Progress"));const l=W6(s)?s:YM;r!==null&&!H6(r,l)&&console.error(KZe(`${r}`,"Progress"));const c=H6(r,l)?r:null,u=Hj(c)?a(c,l):void 0;return i.jsx(zZe,{scope:n,value:c,max:l,children:i.jsx(Je.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Hj(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":Hne(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});zne.displayName=GM;var qne="ProgressIndicator",Wne=N.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=qZe(qne,n);return i.jsx(Je.div,{"data-state":Hne(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});Wne.displayName=qne;function WZe(t,e){return`${Math.round(t/e*100)}%`}function Hne(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Hj(t){return typeof t=="number"}function W6(t){return Hj(t)&&!isNaN(t)&&t>0}function H6(t,e){return Hj(t)&&!isNaN(t)&&t<=e&&t>=0}function HZe(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${YM}\`.`}function KZe(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${YM} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Kne=zne,GZe=Wne;const mu=N.forwardRef(({className:t,value:e,...n},r)=>i.jsx(Kne,{ref:r,className:me("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:i.jsx(GZe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));mu.displayName=Kne.displayName;function YZe(){var r;const{user:t}=ot(),{data:e}=we({queryKey:["project-manager-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalProjects:0,activeProjects:0,completedProjects:0,totalBudget:0,totalSpent:0,budgetUtilization:0,projectsNearBudget:[],pendingTimeEntries:0,totalHoursLogged:0,topProjects:[]};const{projects:s,timeEntries:a}=await jr.runQueries(t.id,{projects:{collectionName:Y.PROJECTS},projectExpenses:{collectionName:Y.PROJECT_EXPENSES},timeEntries:{collectionName:Y.TIME_ENTRIES}}),o=s.filter(m=>Ke(m,["status"])==="active"),l=s.filter(m=>Ke(m,["status"])==="completed"),c=o.reduce((m,v)=>m+Jt(v,["budget"]),0),u=o.reduce((m,v)=>m+Jt(v,["spent"]),0),d=o.filter(m=>{const v=Jt(m,["budget"]),g=Jt(m,["spent"]);return v>0&&g/v>=.8}),h=a.filter(m=>Ke(m,["status"])==="pending"),f=a.reduce((m,v)=>m+Jt(v,["hoursWorked","hours_worked"]),0);return{totalProjects:s.length,activeProjects:o.length,completedProjects:l.length,totalBudget:c,totalSpent:u,budgetUtilization:c>0?u/c*100:0,projectsNearBudget:d,pendingTimeEntries:h.length,totalHoursLogged:f,topProjects:o.slice(0,5)}}}),n=[{title:"Active Projects",value:(e==null?void 0:e.activeProjects)||0,icon:Uw,color:"text-primary"},{title:"Total Budget",value:le((e==null?void 0:e.totalBudget)||0),icon:Xn,color:"text-green-500"},{title:"Total Spent",value:le((e==null?void 0:e.totalSpent)||0),icon:ma,color:"text-blue-500"},{title:"Hours Logged",value:((r=e==null?void 0:e.totalHoursLogged)==null?void 0:r.toFixed(1))||"0",icon:Di,color:"text-blue-500"}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Project Manager Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Project portfolio and resource overview"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(s=>i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:s.title}),i.jsx(s.icon,{className:`h-4 w-4 ${s.color}`})]}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:s.value})})]},s.title))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsxs(te,{className:"flex items-center gap-2",children:[i.jsx(ma,{className:"h-5 w-5 text-primary"}),"Budget Utilization"]})}),i.jsxs(ne,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Overall Utilization"}),i.jsxs("span",{className:"font-medium",children:[((e==null?void 0:e.budgetUtilization)||0).toFixed(1),"%"]})]}),i.jsx(mu,{value:(e==null?void 0:e.budgetUtilization)||0,className:"h-2"})]}),i.jsxs("div",{className:"pt-4 space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Budget"}),i.jsx("span",{className:"font-medium",children:le((e==null?void 0:e.totalBudget)||0)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Spent to Date"}),i.jsx("span",{className:"font-medium text-blue-500",children:le((e==null?void 0:e.totalSpent)||0)})]}),i.jsxs("div",{className:"flex justify-between border-t pt-3",children:[i.jsx("span",{className:"font-semibold",children:"Remaining"}),i.jsx("span",{className:"font-bold text-green-600",children:le(((e==null?void 0:e.totalBudget)||0)-((e==null?void 0:e.totalSpent)||0))})]})]})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsxs(te,{className:"flex items-center gap-2 text-warning",children:[i.jsx(ks,{className:"h-5 w-5"}),"Projects Near Budget Limit"]})}),i.jsx(ne,{children:e!=null&&e.projectsNearBudget&&e.projectsNearBudget.length>0?i.jsx("div",{className:"space-y-4",children:e.projectsNearBudget.map(s=>{const a=Jt(s,["budget"]),o=Jt(s,["spent"]),l=a>0?o/a*100:0;return i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"font-medium truncate max-w-[200px]",children:Ke(s,["name"],"Unnamed Project")}),i.jsxs("span",{className:l>=100?"text-destructive":"text-warning",children:[l.toFixed(0),"%"]})]}),i.jsx(mu,{value:Math.min(l,100),className:`h-2 ${l>=100?"[&>div]:bg-destructive":"[&>div]:bg-warning"}`}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[i.jsxs("span",{children:[le(o)," spent"]}),i.jsxs("span",{children:[le(a)," budget"]})]})]},Ke(s,["id"],"project"))})}):i.jsx("p",{className:"text-muted-foreground text-sm py-4",children:"No projects approaching budget limit"})})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsxs(te,{className:"flex items-center gap-2",children:[i.jsx(Uw,{className:"h-5 w-5 text-primary"}),"Active Projects Overview"]})}),i.jsx(ne,{children:e!=null&&e.topProjects&&e.topProjects.length>0?i.jsx("div",{className:"space-y-4",children:e.topProjects.map(s=>{const a=Jt(s,["budget"]),o=Jt(s,["spent"]),l=a>0?o/a*100:0;return i.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/30",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"font-medium",children:Ke(s,["name"],"Unnamed Project")}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[Ke(s,["donorName","donor_name"],"No donor")," - ",Ke(s,["grantReference","grant_reference"],"No reference")]})]}),i.jsxs("div",{className:"text-right space-y-1",children:[i.jsx("p",{className:"font-medium",children:le(o)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["of ",le(a)]})]}),i.jsx("div",{className:"w-20",children:i.jsx(mu,{value:Math.min(l,100),className:"h-2"})})]},Ke(s,["id"],"project"))})}):i.jsx("p",{className:"text-muted-foreground text-sm py-4",children:"No active projects"})})]})]})}const Vt=N.forwardRef(({className:t,...e},n)=>i.jsx("div",{className:"relative w-full overflow-auto",children:i.jsx("table",{ref:n,className:me("w-full caption-bottom text-sm",t),...e})}));Vt.displayName="Table";const Bt=N.forwardRef(({className:t,...e},n)=>i.jsx("thead",{ref:n,className:me("[&_tr]:border-b",t),...e}));Bt.displayName="TableHeader";const Ut=N.forwardRef(({className:t,...e},n)=>i.jsx("tbody",{ref:n,className:me("[&_tr:last-child]:border-0",t),...e}));Ut.displayName="TableBody";const QZe=N.forwardRef(({className:t,...e},n)=>i.jsx("tfoot",{ref:n,className:me("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));QZe.displayName="TableFooter";const ve=N.forwardRef(({className:t,...e},n)=>i.jsx("tr",{ref:n,className:me("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",t),...e}));ve.displayName="TableRow";const q=N.forwardRef(({className:t,...e},n)=>i.jsx("th",{ref:n,className:me("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));q.displayName="TableHead";const V=N.forwardRef(({className:t,...e},n)=>i.jsx("td",{ref:n,className:me("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));V.displayName="TableCell";const XZe=N.forwardRef(({className:t,...e},n)=>i.jsx("caption",{ref:n,className:me("mt-4 text-sm text-muted-foreground",t),...e}));XZe.displayName="TableCaption";const ZZe=(t,e)=>{const n=Ke(t,e),r=n?new Date(n):null;return r&&!Number.isNaN(r.getTime())?r:null};function JZe(){const{user:t}=ot(),{data:e}=we({queryKey:["auditor-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{auditLogs:[],payrollRuns:[],expenseRows:[],projects:[]};const g=await jr.getCompanyIdForUser(t.id),y=new Date,b=new Date(y.getFullYear(),y.getMonth(),1).toISOString().slice(0,10),x=y.toISOString().slice(0,10),[S,T]=await Promise.all([Cn.getExpenseReport({companyId:g,startDate:b,endDate:x}),jr.runQueries(t.id,{auditLogs:{collectionName:Y.AUDIT_LOGS,orderByField:"createdAt",orderDirection:"desc",limitCount:20},payrollRuns:{collectionName:Y.PAYROLL_RUNS,orderByField:"createdAt",orderDirection:"desc",limitCount:10},projects:{collectionName:Y.PROJECTS,orderByField:"createdAt",orderDirection:"desc"}})]);return{...T,expenseRows:S.rows}}}),n=(e==null?void 0:e.auditLogs)??[],r=(e==null?void 0:e.payrollRuns)??[],s=(e==null?void 0:e.expenseRows)??[],a=(e==null?void 0:e.projects)??[],o=g=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(g),l=r.filter(g=>{const y=Ke(g,["status","payrollStatus","payroll_status"]).toLowerCase();return y==="pending"||y==="draft"}).length,c=r.filter(g=>{const y=Ke(g,["status","payrollStatus","payroll_status"]).toLowerCase();return["approved","final","processed","paid"].includes(y)}).length,u=s.reduce((g,y)=>g+Number(y.amount||0),0),d=a.filter(g=>Jt(g,["spent"])>Jt(g,["budget"])).length,h=n.length,f=s.filter(g=>Number(g.amount||0)>5e3).slice(0,5),m=n.reduce((g,y)=>{const b=Ke(y,["action"]).toUpperCase()||"UNKNOWN";return g[b]=(g[b]||0)+1,g},{}),v=a.filter(g=>{const y=Jt(g,["budget"]),b=Jt(g,["spent"]);return(y>0?b/y*100:0)>80});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Auditor Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Compliance monitoring and audit trail overview"})]}),i.jsxs(Ve,{variant:"outline",className:"flex items-center gap-1",children:[i.jsx(gh,{className:"h-3 w-3"}),"Audit Mode"]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Pending Approvals"}),i.jsx(eo,{className:"h-4 w-4 text-warning"})]}),i.jsxs(ne,{children:[i.jsx("div",{className:"text-2xl font-bold",children:l}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Payroll runs awaiting approval"})]})]}),i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Approved Payrolls"}),i.jsx(i8,{className:"h-4 w-4 text-success"})]}),i.jsxs(ne,{children:[i.jsx("div",{className:"text-2xl font-bold",children:c}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Successfully processed"})]})]}),i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Projects Over Budget"}),i.jsx(ma,{className:"h-4 w-4 text-destructive"})]}),i.jsxs(ne,{children:[i.jsx("div",{className:"text-2xl font-bold",children:d}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Require attention"})]})]}),i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Recent Changes"}),i.jsx(vu,{className:"h-4 w-4 text-primary"})]}),i.jsxs(ne,{children:[i.jsx("div",{className:"text-2xl font-bold",children:h}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Audit log entries (last 20)"})]})]})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsxs(te,{className:"flex items-center gap-2",children:[i.jsx(vu,{className:"h-5 w-5"}),"Recent Activity Log"]})}),i.jsx(ne,{children:i.jsx(th,{className:"h-[300px]",children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Action"}),i.jsx(q,{children:"Entity"}),i.jsx(q,{children:"Time"})]})}),i.jsx(Ut,{children:n.length===0?i.jsx(ve,{children:i.jsx(V,{colSpan:3,className:"text-center text-muted-foreground",children:"No audit logs found"})}):n.map(g=>{const y=Ke(g,["action"]).toUpperCase(),b=ZZe(g,["createdAt","created_at"]);return i.jsxs(ve,{children:[i.jsx(V,{children:i.jsx(Ve,{variant:y==="DELETE"?"destructive":y==="INSERT"?"default":"secondary",children:y||"UNKNOWN"})}),i.jsx(V,{className:"font-medium",children:Ke(g,["tableName","table_name","entity"],"Unknown")}),i.jsx(V,{className:"text-muted-foreground",children:b?ut(b,"MMM dd, HH:mm"):"-"})]},Ke(g,["id"],"audit-log"))})})]})})})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsxs(te,{className:"flex items-center gap-2",children:[i.jsx(Xn,{className:"h-5 w-5"}),"High-Value Expense Postings (> ZMW 5,000)"]})}),i.jsx(ne,{children:i.jsx(th,{className:"h-[300px]",children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Description"}),i.jsx(q,{children:"Expense Account"}),i.jsx(q,{className:"text-right",children:"Amount"})]})}),i.jsx(Ut,{children:f.length===0?i.jsx(ve,{children:i.jsx(V,{colSpan:3,className:"text-center text-muted-foreground",children:"No high-value expenses found"})}):f.map((g,y)=>i.jsxs(ve,{children:[i.jsx(V,{className:"font-medium max-w-[150px] truncate",children:g.description||"Expense"}),i.jsx(V,{children:i.jsx(Ve,{variant:"outline",children:g.expenseAccount||"Expense"})}),i.jsx(V,{className:"text-right font-mono",children:o(Number(g.amount||0))})]},`${g.expenseAccount}-${g.entryDate}-${y}`))})]})})})]})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsxs(te,{className:"flex items-center gap-2",children:[i.jsx(ui,{className:"h-5 w-5"}),"Action Distribution"]})}),i.jsx(ne,{children:i.jsxs("div",{className:"space-y-3",children:[Object.entries(m).map(([g,y])=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(Ve,{variant:g==="DELETE"?"destructive":g==="INSERT"?"default":"secondary",children:g})}),i.jsx("span",{className:"font-bold",children:y})]},g)),Object.keys(m).length===0&&i.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No actions recorded"})]})})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsxs(te,{className:"flex items-center gap-2",children:[i.jsx($m,{className:"h-5 w-5"}),"Project Budget Alerts"]})}),i.jsx(ne,{children:i.jsx(th,{className:"h-[200px]",children:i.jsxs("div",{className:"space-y-3",children:[v.map(g=>{const y=Jt(g,["budget"]),b=Jt(g,["spent"]),x=y>0?b/y*100:0;return i.jsxs("div",{className:"flex items-center justify-between p-2 rounded border",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:Ke(g,["name"],"Project")}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Ke(g,["code"],"-")})]}),i.jsxs(Ve,{variant:x>100?"destructive":"secondary",children:[x.toFixed(0),"% used"]})]},Ke(g,["id"],"project"))}),v.length===0&&i.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No budget alerts"})]})})})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"Total Expense Volume"})}),i.jsx(ne,{children:i.jsx("p",{className:"text-2xl font-bold",children:o(u)})})]})]})}function eJe(){var s;const{user:t}=ot(),{data:e}=we({queryKey:["financial-manager-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalRevenue:0,totalExpenses:0,cashBalance:0,unpaidBills:0,pendingApprovals:0,pendingApprovalsAmount:0,expensesPendingApproval:0,lastPayrollGross:0,lastPayrollNet:0,monthlyProfit:0,bankAccounts:[]};const a=await jr.getCompanyIdForUser(t.id),[o,{expenses:l,bankAccounts:c,payrollRuns:u,approvalRequests:d}]=await Promise.all([Cn.getDashboardLiveMetrics({companyId:a}),jr.runQueries(t.id,{invoices:{collectionName:Y.INVOICES},expenses:{collectionName:Y.EXPENSES},bankAccounts:{collectionName:Y.BANK_ACCOUNTS},payrollRuns:{collectionName:Y.PAYROLL_RUNS,orderByField:"createdAt",orderDirection:"desc"},approvalRequests:{collectionName:Y.APPROVAL_REQUESTS}})]),h=d.filter(f=>Ke(f,["status"])==="pending");return{totalRevenue:o.monthlyIncome,totalExpenses:o.monthlyExpenses,cashBalance:o.bankDefaultBalance,unpaidBills:o.outstandingAccountsPayable,pendingApprovals:h.length,pendingApprovalsAmount:h.reduce((f,m)=>f+Jt(m,["amount"]),0),expensesPendingApproval:l.filter(f=>Ke(f,["approvalStatus","approval_status"])==="pending").length,lastPayrollGross:u[0]?Jt(u[0],["totalGross","total_gross"]):0,lastPayrollNet:u[0]?Jt(u[0],["totalNet","total_net"]):0,monthlyProfit:o.monthlyProfit,bankAccounts:c}}}),n=((e==null?void 0:e.totalRevenue)||0)-((e==null?void 0:e.totalExpenses)||0),r=[{title:"Total Revenue",value:le((e==null?void 0:e.totalRevenue)||0),icon:Xn,color:"text-green-500"},{title:"Total Expenses",value:le((e==null?void 0:e.totalExpenses)||0),icon:Ja,color:"text-destructive"},{title:"Cash Balance",value:le((e==null?void 0:e.cashBalance)||0),icon:fh,color:"text-primary"},{title:"Pending Approvals",value:(e==null?void 0:e.pendingApprovals)||0,icon:Jk,color:"text-warning"}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Financial Manager Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Oversee all financial operations and approvals"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:r.map(a=>i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:a.title}),i.jsx(a.icon,{className:`h-4 w-4 ${a.color}`})]}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:a.value})})]},a.title))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsxs(te,{className:"flex items-center gap-2",children:[i.jsx(ma,{className:"h-5 w-5 text-primary"}),"Profit & Loss"]})}),i.jsxs(ne,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Revenue"}),i.jsx("span",{className:"font-medium text-green-600",children:le((e==null?void 0:e.totalRevenue)||0)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Expenses"}),i.jsxs("span",{className:"font-medium text-destructive",children:["(",le((e==null?void 0:e.totalExpenses)||0),")"]})]}),i.jsxs("div",{className:"border-t pt-2 flex justify-between",children:[i.jsx("span",{className:"font-semibold",children:"Net Income"}),i.jsx("span",{className:`font-bold ${n>=0?"text-green-600":"text-destructive"}`,children:le(n)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Monthly Profit (GL)"}),i.jsx("span",{className:"font-medium",children:le((e==null?void 0:e.monthlyProfit)||0)})]})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsxs(te,{className:"flex items-center gap-2",children:[i.jsx(eo,{className:"h-5 w-5 text-warning"}),"Pending Actions"]})}),i.jsxs(ne,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Approval Requests"}),i.jsx(Ve,{variant:e!=null&&e.pendingApprovals?"destructive":"secondary",children:(e==null?void 0:e.pendingApprovals)||0})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Approvals Value"}),i.jsx("span",{className:"font-medium",children:le((e==null?void 0:e.pendingApprovalsAmount)||0)})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Expenses Pending"}),i.jsx(Ve,{variant:e!=null&&e.expensesPendingApproval?"outline":"secondary",children:(e==null?void 0:e.expensesPendingApproval)||0})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Unpaid Bills"}),i.jsx("span",{className:"font-medium text-destructive",children:le((e==null?void 0:e.unpaidBills)||0)})]})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsxs(te,{className:"flex items-center gap-2",children:[i.jsx(Vo,{className:"h-5 w-5 text-green-500"}),"Payroll Summary"]})}),i.jsxs(ne,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Last Gross Payroll"}),i.jsx("span",{className:"font-medium",children:le((e==null?void 0:e.lastPayrollGross)||0)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Last Net Payroll"}),i.jsx("span",{className:"font-medium",children:le((e==null?void 0:e.lastPayrollNet)||0)})]}),i.jsxs("div",{className:"border-t pt-2",children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Bank Accounts"}),(s=e==null?void 0:e.bankAccounts)==null?void 0:s.map(a=>i.jsxs("div",{className:"flex justify-between mt-1",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:Ke(a,["accountName","account_name"],"Bank Account")}),i.jsx("span",{className:"text-sm font-medium",children:le(Jt(a,["currentBalance","current_balance"]))})]},Ke(a,["accountName","account_name","id"],"bank-account")))]})]})]})]})]})}function tJe(){const{user:t}=ot(),{data:e}=we({queryKey:["assistant-accountant-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{draftInvoices:0,pendingInvoices:0,recentExpenses:0,totalExpenses:0,unpaidBills:0,unpaidBillsAmount:0,unpostedJournals:0,totalCustomers:0,totalVendors:0};const r=await jr.getCompanyIdForUser(t.id),s=new Date,a=new Date(s.getFullYear(),s.getMonth(),1).toISOString().slice(0,10),o=s.toISOString().slice(0,10),[l,c,{invoices:u,bills:d,journalEntries:h,customers:f,vendors:m}]=await Promise.all([Cn.getDashboardLiveMetrics({companyId:r}),Cn.getExpenseReport({companyId:r,startDate:a,endDate:o}),jr.runQueries(t.id,{invoices:{collectionName:Y.INVOICES},bills:{collectionName:Y.BILLS},journalEntries:{collectionName:Y.JOURNAL_ENTRIES},customers:{collectionName:Y.CUSTOMERS},vendors:{collectionName:Y.VENDORS}})]),v=g=>{const y=g.toLowerCase();return["sent","unpaid","partially paid","overdue","pending"].includes(y)};return{draftInvoices:u.filter(g=>Ke(g,["status"]).toLowerCase()==="draft").length,pendingInvoices:u.filter(g=>v(Ke(g,["status"]))).length,recentExpenses:c.rows.length,totalExpenses:l.monthlyExpenses,unpaidBills:d.filter(g=>Ke(g,["status"]).toLowerCase()!=="paid").length,unpaidBillsAmount:l.outstandingAccountsPayable,unpostedJournals:h.filter(g=>!gy(g,["isPosted","is_posted"])).length,totalCustomers:f.length,totalVendors:m.length}}}),n=[{title:"Draft Invoices",value:(e==null?void 0:e.draftInvoices)||0,subtitle:`${(e==null?void 0:e.pendingInvoices)||0} pending`,icon:ur},{title:"Unpaid Bills",value:(e==null?void 0:e.unpaidBills)||0,subtitle:le((e==null?void 0:e.unpaidBillsAmount)||0),icon:Fx},{title:"Total Expenses",value:le((e==null?void 0:e.totalExpenses)||0),subtitle:`${(e==null?void 0:e.recentExpenses)||0} records`,icon:Ja},{title:"Unposted Journals",value:(e==null?void 0:e.unpostedJournals)||0,subtitle:"Awaiting review",icon:hv}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Assistant Accountant Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Data entry tasks and bookkeeping overview"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(r=>i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:r.title}),i.jsx(r.icon,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(ne,{children:[i.jsx("div",{className:"text-2xl font-bold",children:r.value}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r.subtitle})]})]},r.title))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsxs(te,{className:"flex items-center gap-2",children:[i.jsx(vu,{className:"h-5 w-5 text-primary"}),"Daily Tasks"]})}),i.jsxs(ne,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Record new expenses"}),i.jsxs("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:[(e==null?void 0:e.recentExpenses)||0," total"]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Process draft invoices"}),i.jsxs("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:[(e==null?void 0:e.draftInvoices)||0," drafts"]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Review unposted journals"}),i.jsxs("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:[(e==null?void 0:e.unpostedJournals)||0," unposted"]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Process vendor bills"}),i.jsxs("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:[(e==null?void 0:e.unpaidBills)||0," unpaid"]})]})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsxs(te,{className:"flex items-center gap-2",children:[i.jsx(fh,{className:"h-5 w-5 text-primary"}),"Directory"]})}),i.jsxs(ne,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Customers"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.totalCustomers)||0})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Vendors"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.totalVendors)||0})]})]})]})]})]})}function nJe(){const{user:t}=ot(),{data:e}=we({queryKey:["finance-officer-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{paidInvoices:0,pendingInvoices:0,overdueInvoices:0,totalExpenses:0,pendingExpenses:0,unpaidBills:0,overdueBills:0,cashBalance:0};const r=await jr.getCompanyIdForUser(t.id),[s,{invoices:a,expenses:o,bills:l}]=await Promise.all([Cn.getDashboardLiveMetrics({companyId:r}),jr.runQueries(t.id,{invoices:{collectionName:Y.INVOICES},expenses:{collectionName:Y.EXPENSES},bills:{collectionName:Y.BILLS}})]),c=new Date().toISOString().split("T")[0];return{paidInvoices:s.monthlyIncome,pendingInvoices:a.filter(u=>{const d=Ke(u,["status"]).toLowerCase();return!["paid","cancelled","rejected"].includes(d)}).length,overdueInvoices:a.filter(u=>{const d=Ke(u,["dueDate","due_date"]);return Ke(u,["status"]).toLowerCase()!=="paid"&&!!d&&d<c}).length,totalExpenses:s.monthlyExpenses,pendingExpenses:o.filter(u=>Ke(u,["approvalStatus","approval_status"])==="pending").length,unpaidBills:s.outstandingAccountsPayable,overdueBills:l.filter(u=>{const d=Ke(u,["dueDate","due_date"]);return Ke(u,["status"]).toLowerCase()!=="paid"&&!!d&&d<c}).length,cashBalance:s.bankDefaultBalance}}}),n=[{title:"Monthly Revenue",value:le((e==null?void 0:e.paidInvoices)||0),icon:Xn},{title:"Total Expenses",value:le((e==null?void 0:e.totalExpenses)||0),icon:Ja},{title:"Unpaid Bills",value:le((e==null?void 0:e.unpaidBills)||0),icon:Fx},{title:"Cash Balance",value:le((e==null?void 0:e.cashBalance)||0),icon:fh}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Finance Officer Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage invoices, bills, and expenses"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(r=>i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:r.title}),i.jsx(r.icon,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:r.value})})]},r.title))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsxs(te,{className:"flex items-center gap-2",children:[i.jsx(ur,{className:"h-5 w-5 text-primary"}),"Invoice Status"]})}),i.jsxs(ne,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Pending Invoices"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.pendingInvoices)||0})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Overdue Invoices"}),i.jsx("span",{className:"font-medium text-destructive",children:(e==null?void 0:e.overdueInvoices)||0})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Expenses Pending Approval"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.pendingExpenses)||0})]})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsxs(te,{className:"flex items-center gap-2",children:[i.jsx(eo,{className:"h-5 w-5 text-warning"}),"Alerts"]})}),i.jsxs(ne,{className:"space-y-3",children:[((e==null?void 0:e.overdueInvoices)||0)>0&&i.jsxs("div",{className:"p-2 bg-destructive/10 rounded text-sm text-destructive",children:[e==null?void 0:e.overdueInvoices," overdue invoice(s) require follow-up"]}),((e==null?void 0:e.overdueBills)||0)>0&&i.jsxs("div",{className:"p-2 bg-warning/10 rounded text-sm text-warning",children:[e==null?void 0:e.overdueBills," overdue bill(s) need payment"]}),((e==null?void 0:e.overdueInvoices)||0)===0&&((e==null?void 0:e.overdueBills)||0)===0&&i.jsx("p",{className:"text-muted-foreground text-sm",children:"No urgent alerts"})]})]})]})]})}function rJe(){var r,s;const{user:t}=ot(),{data:e}=we({queryKey:["cashier-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{cashBalance:0,totalBalance:0,cashAccounts:[],recentReconciliations:[],recentReceipts:[],recentPayments:[],todayReceipts:0,todayPayments:0};const a=await jr.getCompanyIdForUser(t.id),o=new Date,l=o.toISOString().slice(0,10),c=new Date(o.getFullYear(),o.getMonth(),1).toISOString().slice(0,10),[u,d,h,{cashReconciliations:f}]=await Promise.all([Cn.getDashboardLiveMetrics({companyId:a}),Cn.getBalanceSheetReport({companyId:a,asOfDate:l}),Cn.getCashFlowReport({companyId:a,startDate:c,endDate:l}),jr.runQueries(t.id,{cashReconciliations:{collectionName:Y.CASH_RECONCILIATIONS,orderByField:"reconciliationDate",orderDirection:"desc",limitCount:5}})]),m=d.assets.filter(b=>{const x=b.accountName.toLowerCase();return x.includes("cash")||x.includes("bank")||x.includes("money")}),v=m.map(b=>({accountName:b.accountName,currentBalance:b.balance})),g=h.rows.filter(b=>b.moneyIn>0).slice(0,5).map(b=>({description:b.description||b.referenceType||"Receipt",amount:b.moneyIn})),y=h.rows.filter(b=>b.moneyOut>0).slice(0,5).map(b=>({description:b.description||b.referenceType||"Payment",amount:b.moneyOut}));return{cashBalance:u.bankDefaultBalance,totalBalance:m.reduce((b,x)=>b+Number(x.balance||0),0),cashAccounts:v,recentReconciliations:f,recentReceipts:g,recentPayments:y,todayReceipts:h.rows.reduce((b,x)=>b+Number(x.moneyIn||0),0),todayPayments:h.rows.reduce((b,x)=>b+Number(x.moneyOut||0),0)}}}),n=[{title:"Cash on Hand",value:le((e==null?void 0:e.cashBalance)||0),icon:$a,color:"text-green-500"},{title:"Total Balance",value:le((e==null?void 0:e.totalBalance)||0),icon:Loe,color:"text-primary"},{title:"Recent Receipts",value:le((e==null?void 0:e.todayReceipts)||0),icon:n4,color:"text-green-500"},{title:"Recent Payments",value:le((e==null?void 0:e.todayPayments)||0),icon:zoe,color:"text-destructive"}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Cashier Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Cash transactions and petty cash management"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(a=>i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:a.title}),i.jsx(a.icon,{className:`h-4 w-4 ${a.color}`})]}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:a.value})})]},a.title))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsxs(te,{className:"flex items-center gap-2",children:[i.jsx(n4,{className:"h-5 w-5 text-green-500"}),"Recent Receipts"]})}),i.jsx(ne,{children:i.jsx("div",{className:"space-y-2",children:(r=e==null?void 0:e.recentReceipts)!=null&&r.length?e.recentReceipts.map((a,o)=>i.jsxs("div",{className:"flex justify-between items-center text-sm",children:[i.jsx("span",{className:"text-muted-foreground truncate max-w-[60%]",children:Ke(a,["description"],"Deposit")}),i.jsx("span",{className:"font-medium text-green-600",children:le(Jt(a,["amount"]))})]},o)):i.jsx("p",{className:"text-muted-foreground text-sm",children:"No recent receipts"})})})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsxs(te,{className:"flex items-center gap-2",children:[i.jsx(Woe,{className:"h-5 w-5 text-primary"}),"Recent Reconciliations"]})}),i.jsx(ne,{children:i.jsx("div",{className:"space-y-2",children:(s=e==null?void 0:e.recentReconciliations)!=null&&s.length?e.recentReconciliations.map(a=>i.jsxs("div",{className:"flex justify-between items-center text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:Ke(a,["reconciliationDate","reconciliation_date"],"-")}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium",children:le(Jt(a,["closingBalance","closing_balance"]))}),i.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${Ke(a,["status"])==="approved"?"bg-green-100 text-green-700":"bg-muted text-muted-foreground"}`,children:Ke(a,["status"],"pending")})]})]},Ke(a,["id"],"reconciliation"))):i.jsx("p",{className:"text-muted-foreground text-sm",children:"No reconciliations yet"})})})]})]})]})}function sJe(){return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Staff Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Your personal workspace"})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Time Tracking"}),i.jsx(Di,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(ne,{children:[i.jsx("div",{className:"text-2xl font-bold",children:""}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Log your hours"})]})]}),i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"My Payslips"}),i.jsx(ur,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(ne,{children:[i.jsx("div",{className:"text-2xl font-bold",children:""}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"View payslip history"})]})]}),i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Leave Balance"}),i.jsx(Boe,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(ne,{children:[i.jsx("div",{className:"text-2xl font-bold",children:""}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Days remaining"})]})]}),i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"My Profile"}),i.jsx(d8,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(ne,{children:[i.jsx("div",{className:"text-2xl font-bold",children:""}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"View personal info"})]})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"Welcome"})}),i.jsx(ne,{children:i.jsx("p",{className:"text-muted-foreground",children:"Use the sidebar to access time tracking and view your information. Contact your HR manager for any employment-related queries."})})]})]})}function K6(){const{user:t}=ot(),{data:e}=we({queryKey:["readonly-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalRevenue:0,totalExpenses:0,invoiceCount:0};const r=await jr.getCompanyIdForUser(t.id),[s,{invoices:a}]=await Promise.all([Cn.getDashboardLiveMetrics({companyId:r}),jr.runQueries(t.id,{invoices:{collectionName:Y.INVOICES}})]);return{totalRevenue:s.monthlyIncome,totalExpenses:s.monthlyExpenses,invoiceCount:a.length}}}),n=((e==null?void 0:e.totalRevenue)||0)-((e==null?void 0:e.totalExpenses)||0);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),i.jsxs("p",{className:"text-muted-foreground flex items-center gap-1",children:[i.jsx(Hoe,{className:"h-4 w-4"})," View-only access"]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Total Revenue"}),i.jsx(Xn,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:le((e==null?void 0:e.totalRevenue)||0)})})]}),i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Total Expenses"}),i.jsx(Ja,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:le((e==null?void 0:e.totalExpenses)||0)})})]}),i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Net Income"}),i.jsx(ma,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(ne,{children:i.jsx("div",{className:`text-2xl font-bold ${n>=0?"text-green-600":"text-destructive"}`,children:le(n)})})]}),i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Total Invoices"}),i.jsx(ui,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:(e==null?void 0:e.invoiceCount)||0})})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"Read-Only Access"})}),i.jsx(ne,{children:i.jsx("p",{className:"text-muted-foreground",children:"You have view-only access to this system. Contact your administrator to request additional permissions."})})]})]})}function iJe(){const{data:t,isLoading:e}=Yl();if(e)return i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});switch(t){case"super_admin":case"admin":return i.jsx(RXe,{});case"financial_manager":return i.jsx(eJe,{});case"accountant":return i.jsx(OXe,{});case"assistant_accountant":return i.jsx(tJe,{});case"finance_officer":return i.jsx(nJe,{});case"bookkeeper":return i.jsx(MXe,{});case"cashier":return i.jsx(rJe,{});case"hr_manager":return i.jsx(VZe,{});case"inventory_manager":return i.jsx(BZe,{});case"project_manager":return i.jsx(YZe,{});case"auditor":return i.jsx(JZe,{});case"staff":return i.jsx(sJe,{});case"read_only":return i.jsx(K6,{});default:return i.jsx(K6,{})}}const aJe=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},G6=t=>{if(!t)return"";if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return""};function oJe(){const[t,e]=N.useState(""),{user:n}=ot(),{data:r}=Yl(),s=en(),a=nS(),o=["super_admin","admin","financial_manager","accountant","assistant_accountant"].includes(r||""),{data:l,isLoading:c}=we({queryKey:["invoices",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const f=await Fe.getPrimaryMembershipByUser(n.id);if(!(f!=null&&f.companyId))return[];const m=ge(re,Y.INVOICES),g=(await Te(je(m,he("companyId","==",f.companyId)))).docs.map(x=>{const S=x.data();return{id:x.id,invoiceNumber:String(S.invoiceNumber??S.invoice_number??""),invoiceDate:G6(S.invoiceDate??S.invoice_date),dueDate:G6(S.dueDate??S.due_date)||null,customerId:S.customerId??S.customer_id??null,customerName:"-",total:Number(S.totalAmount??S.total_amount??S.total??0),amountPaid:Number(S.amountPaid??S.amount_paid??0),status:String(S.status??"draft"),journal_entry_id:S.journalEntryId??S.journal_entry_id??null}}),y=Array.from(new Set(g.map(x=>x.customerId).filter(Boolean))),b=new Map;if(y.length>0){const x=ge(re,Y.CUSTOMERS),S=aJe(y,30);(await Promise.all(S.map(_=>Te(je(x,he(Ha(),"in",_)))))).forEach(_=>{_.docs.forEach(C=>{const E=C.data();b.set(C.id,String(E.name??"-"))})})}return g.map(x=>({...x,customerName:x.customerId&&b.get(x.customerId)||"-"})).sort((x,S)=>String(S.invoiceDate).localeCompare(String(x.invoiceDate)))},enabled:!!n}),u=Xe({mutationFn:async f=>{if(!n)throw new Error("Not authenticated");if(!f.journal_entry_id)throw new Error("Invoice has no posted journal entry to reverse.");if(Number(f.amountPaid||0)>.001)throw new Error("Reverse invoice payment entries first before reversing this invoice.");const m=await Fe.getPrimaryMembershipByUser(n.id);if(!(m!=null&&m.companyId))throw new Error("Company context not found");const v=prompt(`Reason for reversing invoice ${f.invoiceNumber} (optional):`)||void 0;return Cn.reverseJournalEntry({companyId:m.companyId,journalEntryId:f.journal_entry_id,reason:v})},onSuccess:()=>{s.invalidateQueries({queryKey:["invoices",n==null?void 0:n.id]}),s.invalidateQueries({queryKey:["accounts-receivable"]}),s.invalidateQueries({queryKey:["customers"]}),s.invalidateQueries({queryKey:["bank-accounts"]}),s.invalidateQueries({queryKey:["journal-entries"]}),s.invalidateQueries({queryKey:["financial-reports"]}),s.invalidateQueries({queryKey:["dashboard"]}),Z.success("Invoice journal entry reversed")},onError:f=>{Z.error(`Failed to reverse invoice: ${f.message}`)}}),d=f=>{switch(f){case"paid":return"default";case"sent":return"secondary";case"overdue":return"destructive";case"draft":return"outline";default:return"secondary"}},h=l==null?void 0:l.filter(f=>f.invoiceNumber.toLowerCase().includes(t.toLowerCase())||f.customerName.toLowerCase().includes(t.toLowerCase()));return c?i.jsx("div",{children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Invoices"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage customer invoices and payments"})]}),i.jsx(Pi,{to:"/invoices/new",children:i.jsxs(W,{className:"gap-2",children:[i.jsx(_n,{className:"h-4 w-4"}),"New Invoice"]})})]}),i.jsxs(Q,{children:[i.jsxs(ee,{children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(te,{children:"All Invoices"}),!a&&i.jsxs("div",{className:"relative w-64",children:[i.jsx(Ms,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"Search invoices...",value:t,onChange:f=>e(f.target.value),className:"pl-8"})]})]}),a&&i.jsxs("div",{className:"relative mt-4",children:[i.jsx(Ms,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"Search invoices...",value:t,onChange:f=>e(f.target.value),className:"pl-8 w-full"})]})]}),i.jsx(ne,{children:a?i.jsxs("div",{className:"space-y-4",children:[h==null?void 0:h.map(f=>i.jsxs("div",{className:"border rounded-lg p-4 space-y-3 bg-card shadow-sm",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold text-foreground",children:f.invoiceNumber}),i.jsx("p",{className:"text-sm text-muted-foreground",children:f.customerName||"-"})]}),i.jsx(Ve,{variant:d(f.status||"draft"),children:f.status})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Date"}),i.jsx("p",{children:f.invoiceDate?ut(new Date(f.invoiceDate),"dd MMM yyyy"):"-"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Due Date"}),i.jsx("p",{children:f.dueDate?ut(new Date(f.dueDate),"dd MMM yyyy"):"-"})]})]}),i.jsxs("div",{className:"pt-2 border-t flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Total Amount"}),i.jsxs("span",{className:"text-lg font-bold text-primary",children:["ZMW ",f.total.toFixed(2)]})]}),f.journal_entry_id&&o&&i.jsx("div",{className:"pt-2",children:i.jsxs(W,{variant:"outline",size:"sm",className:"w-full",disabled:u.isPending||Number(f.amountPaid||0)>.001,onClick:()=>{if(Number(f.amountPaid||0)>.001){Z.error("Reverse invoice payments first before reversing this invoice.");return}confirm("Reverse this invoice posting? This creates an opposite journal entry.")&&u.mutate(f)},children:[i.jsx(mh,{className:"h-4 w-4 mr-2"}),"Reverse Posting"]})})]},f.id)),(h==null?void 0:h.length)===0&&i.jsx("div",{className:"text-center p-4 text-muted-foreground",children:"No invoices found"})]}):i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Invoice #"}),i.jsx(q,{children:"Date"}),i.jsx(q,{children:"Customer"}),i.jsx(q,{children:"Due Date"}),i.jsx(q,{className:"text-right",children:"Amount"}),i.jsx(q,{children:"Status"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ut,{children:[h==null?void 0:h.map(f=>i.jsxs(ve,{children:[i.jsx(V,{className:"font-medium",children:f.invoiceNumber}),i.jsx(V,{children:f.invoiceDate?ut(new Date(f.invoiceDate),"dd MMM yyyy"):"-"}),i.jsx(V,{children:f.customerName||"-"}),i.jsx(V,{children:f.dueDate?ut(new Date(f.dueDate),"dd MMM yyyy"):"-"}),i.jsxs(V,{className:"text-right font-medium",children:["ZMW ",f.total.toFixed(2)]}),i.jsx(V,{children:i.jsx(Ve,{variant:d(f.status||"draft"),children:f.status})}),i.jsx(V,{className:"text-right",children:f.journal_entry_id&&o&&i.jsx(W,{variant:"ghost",size:"icon",disabled:u.isPending||Number(f.amountPaid||0)>.001,onClick:()=>{if(Number(f.amountPaid||0)>.001){Z.error("Reverse invoice payments first before reversing this invoice.");return}confirm("Reverse this invoice posting? This creates an opposite journal entry.")&&u.mutate(f)},title:Number(f.amountPaid||0)>.001?"Reverse payments first":"Reverse invoice posting",children:i.jsx(mh,{className:"h-4 w-4"})})})]},f.id)),(h==null?void 0:h.length)===0&&i.jsx(ve,{children:i.jsx(V,{colSpan:7,className:"text-center text-muted-foreground",children:"No invoices found"})})]})]})})]})]})}const hr=N.forwardRef(({className:t,...e},n)=>i.jsx("textarea",{className:me("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));hr.displayName="Textarea";function ad(){const{user:t,isAuthenticated:e}=ot();return we({queryKey:["company-settings",t==null?void 0:t.id],queryFn:async()=>{if(!t||!Oo)return null;const n=await Fe.getPrimaryMembershipByUser(t.id);return n?Fe.getCompanySettings(n.companyId):null},enabled:e&&!!t})}function lJe(t){const e=en(),{data:n,isLoading:r}=we({queryKey:["zra-status",t],queryFn:async()=>null,enabled:!!t}),s=Xe({mutationFn:async o=>Rt("zraSmartInvoice",{action:"submit_invoice",invoiceId:o}),onSuccess:o=>{o.success?(Z.success(`Invoice submitted to ZRA: ${o.zra_invoice_number??"Submitted"}`),e.invalidateQueries({queryKey:["invoices"]}),e.invalidateQueries({queryKey:["zra-status"]})):Z.warning(o.message||"Invoice queued for ZRA submission")},onError:o=>{Z.error(o.message||"Failed to submit to ZRA")}}),a=Xe({mutationFn:async()=>Rt("zraSmartInvoice",{action:"retry_pending"}),onSuccess:o=>{Z.success(`Processed ${o.processed??0} pending invoices`),e.invalidateQueries({queryKey:["invoices"]}),e.invalidateQueries({queryKey:["zra-status"]})},onError:o=>{Z.error(o.message||"Failed to retry pending invoices")}});return{zraStatus:n,isLoadingStatus:r,submitToZRA:s,retryPending:a,isSubmitting:s.isPending,isRetrying:a.isPending}}function cJe(){const{user:t}=ot(),e=$n(),n=en(),[r]=NR(),s=r.get("customer"),{data:a}=ad(),{submitToZRA:o,isSubmitting:l}=lJe(),[c,u]=N.useState(s||""),[d,h]=N.useState(`INV-${Date.now()}`),[f,m]=N.useState(new Date().toISOString().split("T")[0]),[v,g]=N.useState(""),[y,b]=N.useState(""),[x,S]=N.useState(""),[T,_]=N.useState(!0);N.useState(!1),N.useState(""),N.useState("A");const[C,E]=N.useState([{id:"1",description:"",quantity:1,rate:0,amount:0}]);we({queryKey:["customers",t==null?void 0:t.id],queryFn:async()=>{if(!t)return[];const D=await Fe.getPrimaryMembershipByUser(t.id);return D!=null&&D.companyId?(await Te(je(ge(re,Y.CUSTOMERS),he("companyId","==",D.companyId)))).docs.map(ie=>{const ae=ie.data();return{id:ie.id,name:String(ae.name??"")}}).sort((ie,ae)=>ie.name.localeCompare(ae.name)):[]},enabled:!!t});const{data:p}=we({queryKey:["new-invoice-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const D=await Fe.getPrimaryMembershipByUser(t.id);return(D==null?void 0:D.companyId)??null},enabled:!!t}),w=(a==null?void 0:a.isVatRegistered)||!1,A=(a==null?void 0:a.vatRate)||16,P=()=>{E([...C,{id:Date.now().toString(),description:"",quantity:1,rate:0,amount:0}])},I=D=>{C.length>1&&E(C.filter(K=>K.id!==D))},k=(D,K,ie)=>{E(C.map(ae=>{if(ae.id===D){const _e={...ae,[K]:ie};return(K==="quantity"||K==="rate")&&(_e.amount=_e.quantity*_e.rate),_e}return ae}))},L=C.reduce((D,K)=>D+K.amount,0),U=w?L*(A/100):0,z=L+U,O=Xe({mutationFn:async D=>{if(!p||!t)throw new Error("No company context found");const K=C.filter(ie=>ie.description.trim().length>0).map(ie=>({description:ie.description.trim(),quantity:ie.quantity,unitPrice:ie.rate}));if(K.length===0)throw new Error("At least one invoice line item is required.");return Cn.createInvoice({companyId:p,customerId:c||void 0,invoiceNumber:d,invoiceDate:f,dueDate:v||f,status:D==="sent"?"Unpaid":"Draft",notes:[y,x].filter(Boolean).join(`

`)||void 0,taxAmount:U,totalAmount:z,lineItems:K})},onSuccess:async(D,K)=>{if(w&&T&&K==="sent")try{await o.mutateAsync(D.invoiceId)}catch{console.log("ZRA submission queued for retry")}n.invalidateQueries({queryKey:["invoices"]}),n.invalidateQueries({queryKey:["accounts-receivable"]}),n.invalidateQueries({queryKey:["customers"]}),n.invalidateQueries({queryKey:["dashboard"]}),Z.success(K==="sent"?"Invoice sent successfully":"Invoice saved as draft"),e("/invoices")},onError:D=>{Z.error("Failed to save invoice: "+D.message)}}),$=(D=!1)=>{O.mutate(D?"sent":"draft")};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"New Invoice"}),i.jsxs("p",{className:"text-muted-foreground",children:["Create a new invoice for a customer",w&&i.jsxs("span",{className:"ml-2 text-xs bg-primary/10 text-primary px-2 py-0.5 rounded",children:["VAT ",A,"%"]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(W,{variant:"outline",onClick:()=>e("/invoices"),children:"Cancel"}),i.jsxs(W,{variant:"outline",className:"gap-2",onClick:()=>$(!1),disabled:O.isPending,children:[i.jsx(ph,{className:"h-4 w-4"}),"Save Draft"]}),i.jsxs(W,{className:"gap-2",onClick:()=>$(!0),disabled:O.isPending,children:[i.jsx(Zk,{className:"h-4 w-4"}),"Save & Send"]})]})]}),i.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"Invoice Details"})}),i.jsx(ne,{className:"space-y-4",children:i.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Due Date"}),i.jsx(G,{type:"date",value:v,onChange:D=>g(D.target.value)})]})})})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"Line Items"})}),i.jsx(ne,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-12 text-sm font-medium text-muted-foreground",children:[i.jsx("div",{className:"md:col-span-5",children:"Description"}),i.jsx("div",{className:"md:col-span-2",children:"Qty"}),i.jsx("div",{className:"md:col-span-2",children:"Rate (ZMW)"}),i.jsx("div",{className:"md:col-span-2",children:"Amount"}),i.jsx("div",{className:"md:col-span-1"})]}),C.map(D=>i.jsxs("div",{className:"grid gap-4 md:grid-cols-12 items-start",children:[i.jsx("div",{className:"md:col-span-5",children:i.jsx(hr,{placeholder:"Description",value:D.description,onChange:K=>k(D.id,"description",K.target.value),rows:2})}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(G,{type:"number",placeholder:"Qty",value:D.quantity,onChange:K=>k(D.id,"quantity",parseFloat(K.target.value)||0),min:"0",step:"0.01"})}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(G,{type:"number",placeholder:"Rate",value:D.rate,onChange:K=>k(D.id,"rate",parseFloat(K.target.value)||0),min:"0",step:"0.01"})}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(G,{value:`ZMW ${D.amount.toFixed(2)}`,disabled:!0,className:"bg-muted"})}),i.jsx("div",{className:"md:col-span-1",children:i.jsx(W,{type:"button",variant:"ghost",size:"icon",onClick:()=>I(D.id),disabled:C.length===1,children:i.jsx(Ds,{className:"h-4 w-4"})})})]},D.id)),i.jsxs(W,{type:"button",variant:"outline",className:"gap-2",onClick:P,children:[i.jsx(_n,{className:"h-4 w-4"}),"Add Line"]})]})})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"Notes & Terms"})}),i.jsxs(ne,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"notes",children:"Notes (visible to customer)"}),i.jsx(hr,{id:"notes",placeholder:"Add any notes or special instructions",rows:3,value:y,onChange:D=>b(D.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"terms",children:"Terms & Conditions"}),i.jsx(hr,{id:"terms",placeholder:"Payment terms and conditions",rows:3,value:x,onChange:D=>S(D.target.value)})]})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"Summary"})}),i.jsxs(ne,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),i.jsxs("span",{className:"font-medium",children:["ZMW ",L.toFixed(2)]})]}),w&&i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsxs("span",{className:"text-muted-foreground",children:["VAT (",A,"%)"]}),i.jsxs("span",{className:"font-medium",children:["ZMW ",U.toFixed(2)]})]}),i.jsxs("div",{className:"border-t pt-3 flex justify-between",children:[i.jsx("span",{className:"font-semibold",children:"Total"}),i.jsxs("span",{className:"text-xl font-bold text-primary",children:["ZMW ",z.toFixed(2)]})]})]})]}),w&&i.jsx(Q,{className:"border-primary/20 bg-primary/5",children:i.jsxs(ne,{className:"pt-4 space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(i8,{className:"h-4 w-4 text-primary"}),i.jsx("span",{className:"font-medium text-sm",children:"ZRA Smart Invoice"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm",children:"Submit to ZRA on send"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Invoice will be submitted for ZRA approval"})]}),i.jsx(us,{checked:T,onCheckedChange:_})]}),l&&i.jsxs(Ve,{variant:"outline",className:"animate-pulse",children:[i.jsx(ks,{className:"h-3 w-3 mr-1"}),"Submitting to ZRA..."]})]})}),!w&&i.jsx(Q,{className:"bg-muted/50",children:i.jsx(ne,{className:"pt-4",children:i.jsxs("p",{className:"text-sm text-muted-foreground",children:["VAT is not applied. To enable VAT, go to"," ",i.jsx(W,{variant:"link",className:"p-0 h-auto",onClick:()=>e("/settings"),children:"Settings"})," ","and enable VAT registration."]})})})]})]})]})}function uJe(){const t=$n(),{user:e}=ot(),{data:n,isLoading:r,refetch:s}=we({queryKey:["employees",e==null?void 0:e.id],queryFn:async()=>{if(!e)return[];const o=await Fe.getPrimaryMembershipByUser(e.id);if(!(o!=null&&o.companyId))return[];const l=ge(re,Y.EMPLOYEES),u=(await Te(je(l,he("companyId","==",o.companyId)))).docs.map(d=>{const h=d.data();return{id:d.id,employeeNumber:String(h.employeeNumber??h.employee_number??""),fullName:String(h.fullName??h.full_name??""),position:h.position??null,department:h.department??null,basicSalary:Number(h.basicSalary??h.basic_salary??0),employmentStatus:String(h.employmentStatus??h.employment_status??"active")}});return u.sort((d,h)=>d.fullName.localeCompare(h.fullName)),u},enabled:!!e}),a=async o=>{if(confirm("Are you sure you want to delete this employee?"))try{await Ll(Ye(re,Y.EMPLOYEES,o)),Z.success("Employee deleted successfully"),s()}catch{Z.error("Failed to delete employee")}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Employees"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your employee records"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(W,{variant:"outline",onClick:()=>t("/employees/bulk-upload"),children:[i.jsx(Ho,{className:"mr-2 h-4 w-4"}),"Bulk Upload"]}),i.jsxs(W,{onClick:()=>t("/employees/new"),children:[i.jsx(_n,{className:"mr-2 h-4 w-4"}),"Add Employee"]})]})]}),r?i.jsx("div",{children:"Loading..."}):i.jsx("div",{className:"border rounded-lg",children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Employee #"}),i.jsx(q,{children:"Name"}),i.jsx(q,{children:"Position"}),i.jsx(q,{children:"Department"}),i.jsx(q,{children:"Basic Salary"}),i.jsx(q,{children:"Status"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ut,{children:[n==null?void 0:n.map(o=>i.jsxs(ve,{children:[i.jsx(V,{className:"font-medium",children:o.employeeNumber}),i.jsx(V,{children:o.fullName}),i.jsx(V,{children:o.position||"-"}),i.jsx(V,{children:o.department||"-"}),i.jsx(V,{children:le(o.basicSalary)}),i.jsx(V,{children:i.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${o.employmentStatus==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:o.employmentStatus})}),i.jsxs(V,{className:"text-right",children:[i.jsx(W,{variant:"ghost",size:"sm",onClick:()=>t(`/employees/${o.id}/edit`),children:i.jsx(Mp,{className:"h-4 w-4"})}),i.jsx(W,{variant:"ghost",size:"sm",onClick:()=>a(o.id),children:i.jsx(Ds,{className:"h-4 w-4"})})]})]},o.id)),(n==null?void 0:n.length)===0&&i.jsx(ve,{children:i.jsx(V,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No employees found. Add your first employee to get started."})})]})]})})]})}const d1=BTe,Gne=N.createContext({}),rt=({...t})=>i.jsx(Gne.Provider,{value:{name:t.name},children:i.jsx(WTe,{...t})}),h1=()=>{const t=N.useContext(Gne),e=N.useContext(Yne),{getFieldState:n,formState:r}=hS(),s=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:a}=e;return{id:a,name:t.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...s}},Yne=N.createContext({}),tt=N.forwardRef(({className:t,...e},n)=>{const r=N.useId();return i.jsx(Yne.Provider,{value:{id:r},children:i.jsx("div",{ref:n,className:me("space-y-2",t),...e})})});tt.displayName="FormItem";const st=N.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:s}=h1();return i.jsx(J,{ref:n,className:me(r&&"text-destructive",t),htmlFor:s,...e})});st.displayName="FormLabel";const nt=N.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:s,formMessageId:a}=h1();return i.jsx(zh,{ref:e,id:r,"aria-describedby":n?`${s} ${a}`:`${s}`,"aria-invalid":!!n,...t})});nt.displayName="FormControl";const ah=N.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=h1();return i.jsx("p",{ref:n,id:r,className:me("text-sm text-muted-foreground",t),...e})});ah.displayName="FormDescription";const it=N.forwardRef(({className:t,children:e,...n},r)=>{const{error:s,formMessageId:a}=h1(),o=s?String(s==null?void 0:s.message):e;return o?i.jsx("p",{ref:r,id:a,className:me("text-sm font-medium text-destructive",t),...n,children:o}):null});it.displayName="FormMessage";var f1="Tabs",[dJe,Btt]=ps(f1,[GN]),Qne=GN(),[hJe,QM]=dJe(f1),Xne=N.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=sb(l),[h,f]=Za({prop:r,onChange:s,defaultProp:a??"",caller:f1});return i.jsx(hJe,{scope:n,baseId:ia(),value:h,onValueChange:f,orientation:o,dir:d,activationMode:c,children:i.jsx(Je.div,{dir:d,"data-orientation":o,...u,ref:e})})});Xne.displayName=f1;var Zne="TabsList",Jne=N.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,a=QM(Zne,n),o=Qne(n);return i.jsx(EK,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:i.jsx(Je.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:e})})});Jne.displayName=Zne;var ere="TabsTrigger",tre=N.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=t,o=QM(ere,n),l=Qne(n),c=sre(o.baseId,r),u=ire(o.baseId,r),d=r===o.value;return i.jsx(AK,{asChild:!0,...l,focusable:!s,active:d,children:i.jsx(Je.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...a,ref:e,onMouseDown:ke(t.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:ke(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:ke(t.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!s&&h&&o.onValueChange(r)})})})});tre.displayName=ere;var nre="TabsContent",rre=N.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...o}=t,l=QM(nre,n),c=sre(l.baseId,r),u=ire(l.baseId,r),d=r===l.value,h=N.useRef(d);return N.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),i.jsx(gs,{present:s||d,children:({present:f})=>i.jsx(Je.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:f&&a})})});rre.displayName=nre;function sre(t,e){return`${t}-trigger-${e}`}function ire(t,e){return`${t}-content-${e}`}var fJe=Xne,are=Jne,ore=tre,lre=rre;const m1=fJe,Nb=N.forwardRef(({className:t,...e},n)=>i.jsx(are,{ref:n,className:me("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Nb.displayName=are.displayName;const Ya=N.forwardRef(({className:t,...e},n)=>i.jsx(ore,{ref:n,className:me("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...e}));Ya.displayName=ore.displayName;const Qa=N.forwardRef(({className:t,...e},n)=>i.jsx(lre,{ref:n,className:me("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Qa.displayName=lre.displayName;function mJe({form:t}){return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(rt,{control:t.control,name:"employee_number",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Employee No *"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"EMP001",...e})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"nrc_number",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"NRC/ID Number"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"123456/78/1",...e})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"tpin",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"TPIN"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"1234567890",maxLength:10,...e})}),i.jsx(it,{})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(rt,{control:t.control,name:"napsa_number",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"NAPSA No"}),i.jsx(nt,{children:i.jsx(G,{...e})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"nhima_number",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"NHIMA No"}),i.jsx(nt,{children:i.jsx(G,{...e})}),i.jsx(it,{})]})})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Personal Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(rt,{control:t.control,name:"full_name",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Full Name *"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"John Doe",...e})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"date_of_birth",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Date of Birth"}),i.jsx(nt,{children:i.jsx(G,{type:"date",...e})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"gender",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Gender"}),i.jsxs(Ct,{onValueChange:e.onChange,value:e.value,children:[i.jsx(nt,{children:i.jsx(Et,{children:i.jsx(Pt,{placeholder:"Select gender"})})}),i.jsxs(At,{children:[i.jsx(ye,{value:"male",children:"Male"}),i.jsx(ye,{value:"female",children:"Female"}),i.jsx(ye,{value:"other",children:"Other"})]})]}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"nationality",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Nationality"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"Zambian",...e})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"marital_status",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Marital Status"}),i.jsxs(Ct,{onValueChange:e.onChange,value:e.value,children:[i.jsx(nt,{children:i.jsx(Et,{children:i.jsx(Pt,{placeholder:"Select status"})})}),i.jsxs(At,{children:[i.jsx(ye,{value:"single",children:"Single"}),i.jsx(ye,{value:"married",children:"Married"}),i.jsx(ye,{value:"divorced",children:"Divorced"}),i.jsx(ye,{value:"widowed",children:"Widowed"})]})]}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"phone",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Phone"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"+260 9X XXX XXXX",...e})}),i.jsx(it,{})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-4 mt-4",children:[i.jsx(rt,{control:t.control,name:"address",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Address"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"123 Main Street, Lusaka",...e})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"email",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Email (for payslips)"}),i.jsx(nt,{children:i.jsx(G,{type:"email",placeholder:"john.doe@example.com",...e})}),i.jsx(it,{})]})})]})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Organization"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsx(rt,{control:t.control,name:"department",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Department"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"Finance",...e})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"division",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Division"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"Operations",...e})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"position",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Job Title"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"Accountant",...e})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"job_grade",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Grade"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"Grade 5",...e})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"cost_centre",render:({field:e})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Cost Centre"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"CC001",...e})}),i.jsx(it,{})]})})]})]})]})}const pJe=qh("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ku=N.forwardRef(({className:t,variant:e,...n},r)=>i.jsx("div",{ref:r,role:"alert",className:me(pJe({variant:e}),t),...n}));ku.displayName="Alert";const cre=N.forwardRef(({className:t,...e},n)=>i.jsx("h5",{ref:n,className:me("mb-1 font-medium leading-none tracking-tight",t),...e}));cre.displayName="AlertTitle";const Ru=N.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:me("text-sm [&_p]:leading-relaxed",t),...e}));Ru.displayName="AlertDescription";function gJe({form:t}){const e=t.watch("contract_type"),n=e==="consultant";return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(rt,{control:t.control,name:"contract_type",render:({field:r})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Employment Type *"}),i.jsxs(Ct,{onValueChange:r.onChange,value:r.value,children:[i.jsx(nt,{children:i.jsx(Et,{children:i.jsx(Pt,{placeholder:"Select type"})})}),i.jsxs(At,{children:[i.jsx(ye,{value:"permanent",children:"Permanent"}),i.jsx(ye,{value:"fixed-term",children:"Fixed-Term Contract"}),i.jsx(ye,{value:"temporary",children:"Temporary"}),i.jsx(ye,{value:"internship",children:"Internship"}),i.jsx(ye,{value:"consultant",children:"Consultant"})]})]}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"employment_status",render:({field:r})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Status"}),i.jsxs(Ct,{onValueChange:r.onChange,value:r.value||"active",children:[i.jsx(nt,{children:i.jsx(Et,{children:i.jsx(Pt,{})})}),i.jsxs(At,{children:[i.jsx(ye,{value:"active",children:"Active"}),i.jsx(ye,{value:"inactive",children:"Inactive"}),i.jsx(ye,{value:"terminated",children:"Terminated"}),i.jsx(ye,{value:"on_leave",children:"On Leave"})]})]}),i.jsx(it,{})]})})]}),n&&i.jsxs(ku,{children:[i.jsx(ks,{className:"h-4 w-4"}),i.jsxs(Ru,{children:[i.jsx("strong",{children:"Consultant:"})," PAYE, NAPSA, and NHIMA will be disabled. Withholding Tax (WHT) will apply based on consultant type."]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(rt,{control:t.control,name:"employment_date",render:({field:r})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Engagement Date *"}),i.jsx(nt,{children:i.jsx(G,{type:"date",...r})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"contract_end_date",render:({field:r})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Contract End Date"}),i.jsx(nt,{children:i.jsx(G,{type:"date",...r})}),i.jsx(it,{})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(rt,{control:t.control,name:"currency",render:({field:r})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Currency"}),i.jsxs(Ct,{onValueChange:r.onChange,value:r.value||"ZMW",children:[i.jsx(nt,{children:i.jsx(Et,{children:i.jsx(Pt,{})})}),i.jsxs(At,{children:[i.jsx(ye,{value:"ZMW",children:"ZMW - Zambian Kwacha"}),i.jsx(ye,{value:"USD",children:"USD - US Dollar"}),i.jsx(ye,{value:"EUR",children:"EUR - Euro"}),i.jsx(ye,{value:"GBP",children:"GBP - British Pound"})]})]}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"pay_point",render:({field:r})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Pay Point"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"Head Office",...r})}),i.jsx(it,{})]})})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Bank Details"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(rt,{control:t.control,name:"bank_name",render:({field:r})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Bank Name"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"Zanaco",...r})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"bank_branch",render:({field:r})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Branch"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"Cairo Road",...r})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"bank_account_number",render:({field:r})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Account Number"}),i.jsx(nt,{children:i.jsx(G,{placeholder:"1234567890",...r})}),i.jsx(it,{})]})})]})]}),(e==="fixed-term"||e==="consultant")&&i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Contract Options"}),i.jsx(rt,{control:t.control,name:"has_gratuity",render:({field:r})=>i.jsxs(tt,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx(st,{className:"text-base",children:"Attracts Gratuity"}),i.jsx(ah,{children:"Enable if this contract includes gratuity payment at end"})]}),i.jsx(nt,{children:i.jsx(us,{checked:r.value,onCheckedChange:r.onChange})})]})}),t.watch("has_gratuity")&&i.jsx("div",{className:"mt-4",children:i.jsx(rt,{control:t.control,name:"gratuity_rate",render:({field:r})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Gratuity Rate (%)"}),i.jsx(nt,{children:i.jsx(G,{type:"number",step:"0.01",placeholder:"25",...r})}),i.jsx(ah,{children:"Standard rate is 25% of total basic pay earned"}),i.jsx(it,{})]})})})]})]})}function yJe({form:t}){const e=Number(t.watch("basic_salary"))||0,n=Number(t.watch("housing_allowance"))||0,r=Number(t.watch("transport_allowance"))||0,s=Number(t.watch("other_allowances"))||0,a=e+n+r+s;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(rt,{control:t.control,name:"rate_type",render:({field:o})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Rate Type"}),i.jsxs(Ct,{onValueChange:o.onChange,value:o.value||"monthly",children:[i.jsx(nt,{children:i.jsx(Et,{children:i.jsx(Pt,{})})}),i.jsxs(At,{children:[i.jsx(ye,{value:"monthly",children:"Monthly"}),i.jsx(ye,{value:"daily",children:"Daily"}),i.jsx(ye,{value:"hourly",children:"Hourly"})]})]}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"basic_salary",render:({field:o})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Basic Pay (ZMW) *"}),i.jsx(nt,{children:i.jsx(G,{type:"number",step:"0.01",placeholder:"5000.00",...o})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"pay_rate",render:({field:o})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Pay Rate"}),i.jsx(nt,{children:i.jsx(G,{type:"number",step:"0.01",placeholder:"Rate per period",...o})}),i.jsx(ah,{children:"Optional alternative rate"}),i.jsx(it,{})]})})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Allowances"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(rt,{control:t.control,name:"housing_allowance",render:({field:o})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Housing Allowance (ZMW)"}),i.jsx(nt,{children:i.jsx(G,{type:"number",step:"0.01",placeholder:"1500.00",...o})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"transport_allowance",render:({field:o})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Transport Allowance (ZMW)"}),i.jsx(nt,{children:i.jsx(G,{type:"number",step:"0.01",placeholder:"500.00",...o})}),i.jsx(it,{})]})}),i.jsx(rt,{control:t.control,name:"other_allowances",render:({field:o})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Other Allowances (ZMW)"}),i.jsx(nt,{children:i.jsx(G,{type:"number",step:"0.01",placeholder:"0.00",...o})}),i.jsx(ah,{children:"Meal, medical, or other fixed allowances"}),i.jsx(it,{})]})})]})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Overtime Rates"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.jsx(rt,{control:t.control,name:"overtime_rate_multiplier",render:({field:o})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Overtime Multiplier"}),i.jsx(nt,{children:i.jsx(G,{type:"number",step:"0.1",placeholder:"1.5",...o})}),i.jsx(ah,{children:"e.g., 1.5 = time and a half"}),i.jsx(it,{})]})})})]}),i.jsxs(Q,{className:"bg-muted/50",children:[i.jsx(ee,{children:i.jsx(te,{className:"text-lg",children:"Pay Summary"})}),i.jsx(ne,{children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Basic Salary"}),i.jsx("p",{className:"text-lg font-semibold",children:le(e)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Housing"}),i.jsx("p",{className:"text-lg font-semibold",children:le(n)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Transport"}),i.jsx("p",{className:"text-lg font-semibold",children:le(r)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Gross Salary"}),i.jsx("p",{className:"text-xl font-bold text-primary",children:le(a)})]})]})})]})]})}const vJe=Ju({employee_number:ze().min(1,"Employee number is required"),nrc_number:ze().optional(),tpin:ze().optional(),napsa_number:ze().optional(),nhima_number:ze().optional(),full_name:ze().min(1,"Full name is required"),date_of_birth:ze().optional(),gender:ze().optional(),nationality:ze().optional(),marital_status:ze().optional(),phone:ze().optional(),address:ze().optional(),email:ze().email().optional().or(LX("")),department:ze().optional(),division:ze().optional(),position:ze().optional(),job_grade:ze().optional(),cost_centre:ze().optional(),contract_type:ze().optional(),employment_status:ze().default("active"),employment_date:ze().min(1,"Employment date is required"),contract_end_date:ze().optional(),currency:ze().default("ZMW"),pay_point:ze().optional(),bank_name:ze().optional(),bank_branch:ze().optional(),bank_account_number:ze().optional(),has_gratuity:OB().default(!1),gratuity_rate:ze().optional(),rate_type:ze().default("monthly"),basic_salary:ze().min(1,"Basic salary is required"),pay_rate:ze().optional(),housing_allowance:ze().optional(),transport_allowance:ze().optional(),other_allowances:ze().optional(),overtime_rate_multiplier:ze().optional(),send_invite:OB().default(!1)});function xJe(){const t=$n(),{data:e}=ad(),{user:n}=ot(),[r,s]=N.useState("personal"),[a,o]=N.useState(!1),l=Xu({resolver:Zu(vJe),defaultValues:{employment_status:"active",has_gratuity:!1,send_invite:!1,currency:"ZMW",rate_type:"monthly",nationality:"Zambian"}}),c=async h=>{o(!0);try{if(!n){Z.error("You must be logged in");return}const f=await Fe.getPrimaryMembershipByUser(n.id);if(!(f!=null&&f.companyId)){Z.error("No company profile found for your account");return}const m=await es(ge(re,Y.EMPLOYEES),{employeeNumber:h.employee_number,nrcNumber:h.nrc_number||null,tpin:h.tpin||null,napsaNumber:h.napsa_number||null,nhimaNumber:h.nhima_number||null,fullName:h.full_name,dateOfBirth:h.date_of_birth||null,gender:h.gender||null,nationality:h.nationality||null,maritalStatus:h.marital_status||null,phone:h.phone||null,address:h.address||null,email:h.email||null,department:h.department||null,division:h.division||null,position:h.position||null,jobGrade:h.job_grade||null,costCentre:h.cost_centre||null,contractType:h.contract_type||null,employmentStatus:h.employment_status||"active",employmentDate:h.employment_date,contractEndDate:h.contract_end_date||null,hasGratuity:h.has_gratuity||!1,gratuityRate:h.gratuity_rate?Number(h.gratuity_rate):0,bankName:h.bank_name||null,bankBranch:h.bank_branch||null,bankAccountNumber:h.bank_account_number||null,basicSalary:Number(h.basic_salary),housingAllowance:h.housing_allowance?Number(h.housing_allowance):0,transportAllowance:h.transport_allowance?Number(h.transport_allowance):0,otherAllowances:h.other_allowances?Number(h.other_allowances):0,userId:n.id,companyId:f.companyId,createdAt:Ce(),updatedAt:Ce()}),v=h.contract_type==="consultant";if(await xr(Ye(re,Y.EMPLOYEE_PAYROLL_PROFILES,`${f.companyId}_${m.id}`),{employeeId:m.id,companyId:f.companyId,rateType:h.rate_type,payRate:h.pay_rate?Number(h.pay_rate):null,overtimeRateMultiplier:h.overtime_rate_multiplier?Number(h.overtime_rate_multiplier):1.5,currency:h.currency,applyPaye:!v,applyNapsa:!v,applyNhima:!v,isConsultant:v,applyWht:v,consultantType:v?"local":null,createdAt:Ce(),updatedAt:Ce()}),h.send_invite&&h.email)try{await Ps.sendInvitation({inviteeName:h.full_name,email:h.email,role:"staff",loginUrl:`${window.location.origin}/auth`})}catch{const y=(e==null?void 0:e.companyName)||"ZedBooks";Z.warning(`Employee created, but invite setup failed for ${y}`)}Z.success("Employee created successfully"),t(`/employees/${m.id}/payroll-setup`)}catch{Z.error("Failed to create employee")}finally{o(!1)}},u=()=>{r==="personal"?s("engagement"):r==="engagement"&&s("pay")},d=()=>{r==="pay"?s("engagement"):r==="engagement"&&s("personal")};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(W,{variant:"ghost",size:"sm",onClick:()=>t("/employees"),children:[i.jsx(fa,{className:"h-4 w-4 mr-2"}),"Back"]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Add New Employee"}),i.jsx("p",{className:"text-muted-foreground",children:"Complete the onboarding form in 3 steps"})]})]}),i.jsx(d1,{...l,children:i.jsx("form",{onSubmit:l.handleSubmit(c),children:i.jsxs(m1,{value:r,onValueChange:s,className:"space-y-6",children:[i.jsxs(Nb,{className:"grid w-full grid-cols-3",children:[i.jsxs(Ya,{value:"personal",className:"flex items-center gap-2",children:[i.jsx("span",{className:"hidden sm:inline",children:"1."})," Personal Details"]}),i.jsxs(Ya,{value:"engagement",className:"flex items-center gap-2",children:[i.jsx("span",{className:"hidden sm:inline",children:"2."})," Engagement"]}),i.jsxs(Ya,{value:"pay",className:"flex items-center gap-2",children:[i.jsx("span",{className:"hidden sm:inline",children:"3."})," Pay"]})]}),i.jsx(Q,{children:i.jsxs(ne,{className:"pt-6",children:[i.jsx(Qa,{value:"personal",className:"mt-0",children:i.jsx(mJe,{form:l})}),i.jsx(Qa,{value:"engagement",className:"mt-0",children:i.jsx(gJe,{form:l})}),i.jsx(Qa,{value:"pay",className:"mt-0",children:i.jsx(yJe,{form:l})})]})}),r==="pay"&&i.jsxs(Q,{children:[i.jsxs(ee,{children:[i.jsx(te,{children:"Employee Invite"}),i.jsx(dt,{children:"Send login credentials to the employee"})]}),i.jsx(ne,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qu,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx(J,{children:"Send Invite Email"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Send login credentials to employee's email"})]})]}),i.jsx(us,{checked:l.watch("send_invite"),onCheckedChange:h=>l.setValue("send_invite",h),disabled:!l.watch("email")})]})})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx(W,{type:"button",variant:"outline",onClick:d,disabled:r==="personal",children:"Previous"}),i.jsx("div",{className:"flex gap-2",children:r!=="pay"?i.jsxs(W,{type:"button",onClick:u,children:["Next",i.jsx(r8,{className:"h-4 w-4 ml-1"})]}):i.jsxs(W,{type:"submit",disabled:a,children:[i.jsx(ph,{className:"h-4 w-4 mr-2"}),a?"Saving...":"Save & Setup Payroll"]})})]})]})})})]})}const bJe=Ju({full_name:ze().min(2,"Name must be at least 2 characters"),employee_number:ze().min(1,"Employee number is required"),position:ze().optional(),department:ze().optional(),email:ze().email().optional().or(LX("")),phone:ze().optional(),basic_salary:ze().min(1,"Basic salary is required"),housing_allowance:ze().optional(),transport_allowance:ze().optional(),other_allowances:ze().optional(),employment_date:ze().min(1,"Employment date is required"),employment_status:$X(["active","inactive","terminated"]),tpin:ze().optional(),napsa_number:ze().optional(),nhima_number:ze().optional(),bank_name:ze().optional(),bank_branch:ze().optional(),bank_account_number:ze().optional()}),wJe=t=>{if(!t)return"";if(typeof t=="string")return t.slice(0,10);if(t instanceof Date)return t.toISOString().slice(0,10);if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString().slice(0,10)}return""};function _Je(){const t=$n(),{id:e}=Wh(),{user:n}=ot(),{data:r,isLoading:s}=we({queryKey:["employee",e,n==null?void 0:n.id],queryFn:async()=>{if(!e||!n)return null;const l=await Fe.getPrimaryMembershipByUser(n.id);if(!(l!=null&&l.companyId))return null;const c=Ye(re,Y.EMPLOYEES,e),u=await xi(c);if(!u.exists())return null;const d=u.data(),h=d.companyId??d.company_id;return h&&h!==l.companyId?null:{id:u.id,...d}},enabled:!!(e&&n)}),a=Xu({resolver:Zu(bJe)});N.useEffect(()=>{r&&a.reset({full_name:String(r.fullName??r.full_name??""),employee_number:String(r.employeeNumber??r.employee_number??""),position:String(r.position??""),department:String(r.department??""),email:String(r.email??""),phone:String(r.phone??""),basic_salary:String(r.basicSalary??r.basic_salary??""),housing_allowance:String(r.housingAllowance??r.housing_allowance??0),transport_allowance:String(r.transportAllowance??r.transport_allowance??0),other_allowances:String(r.otherAllowances??r.other_allowances??0),employment_date:wJe(r.employmentDate??r.employment_date),employment_status:String(r.employmentStatus??r.employment_status??"active"),tpin:String(r.tpin??""),napsa_number:String(r.napsaNumber??r.napsa_number??""),nhima_number:String(r.nhimaNumber??r.nhima_number??""),bank_name:String(r.bankName??r.bank_name??""),bank_branch:String(r.bankBranch??r.bank_branch??""),bank_account_number:String(r.bankAccountNumber??r.bank_account_number??"")})},[r,a]);const o=async l=>{try{if(!e||!n){Z.error("You must be logged in");return}const c=await Fe.getPrimaryMembershipByUser(n.id);if(!(c!=null&&c.companyId)){Z.error("No company profile found for your account");return}await xr(Ye(re,Y.EMPLOYEES,e),{companyId:c.companyId,employeeNumber:l.employee_number,fullName:l.full_name,position:l.position||null,department:l.department||null,email:l.email||null,phone:l.phone||null,basicSalary:Number(l.basic_salary),housingAllowance:l.housing_allowance?Number(l.housing_allowance):0,transportAllowance:l.transport_allowance?Number(l.transport_allowance):0,otherAllowances:l.other_allowances?Number(l.other_allowances):0,employmentDate:l.employment_date,employmentStatus:l.employment_status,tpin:l.tpin||null,napsaNumber:l.napsa_number||null,nhimaNumber:l.nhima_number||null,bankName:l.bank_name||null,bankBranch:l.bank_branch||null,bankAccountNumber:l.bank_account_number||null,updatedAt:Ce()},{merge:!0}),Z.success("Employee updated successfully"),t("/employees")}catch{Z.error("Failed to update employee")}};return s?i.jsx("div",{children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(W,{variant:"ghost",size:"sm",onClick:()=>t("/employees"),children:[i.jsx(fa,{className:"h-4 w-4 mr-2"}),"Back"]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Edit Employee"}),i.jsx("p",{className:"text-muted-foreground",children:"Update employee information"})]})]}),i.jsx(d1,{...a,children:i.jsxs("form",{onSubmit:a.handleSubmit(o),className:"space-y-6",children:[i.jsxs("div",{className:"border rounded-lg p-6 space-y-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Personal Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(rt,{control:a.control,name:"full_name",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Full Name *"}),i.jsx(nt,{children:i.jsx(G,{...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"employee_number",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Employee Number *"}),i.jsx(nt,{children:i.jsx(G,{...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"position",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Position"}),i.jsx(nt,{children:i.jsx(G,{...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"department",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Department"}),i.jsx(nt,{children:i.jsx(G,{...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"email",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Email"}),i.jsx(nt,{children:i.jsx(G,{type:"email",...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"phone",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Phone"}),i.jsx(nt,{children:i.jsx(G,{...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"employment_date",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Employment Date *"}),i.jsx(nt,{children:i.jsx(G,{type:"date",...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"employment_status",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Employment Status *"}),i.jsxs(Ct,{onValueChange:l.onChange,defaultValue:l.value,children:[i.jsx(nt,{children:i.jsx(Et,{children:i.jsx(Pt,{})})}),i.jsxs(At,{children:[i.jsx(ye,{value:"active",children:"Active"}),i.jsx(ye,{value:"inactive",children:"Inactive"}),i.jsx(ye,{value:"terminated",children:"Terminated"})]})]}),i.jsx(it,{})]})})]})]}),i.jsxs("div",{className:"border rounded-lg p-6 space-y-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Salary Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(rt,{control:a.control,name:"basic_salary",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Basic Salary (ZMW) *"}),i.jsx(nt,{children:i.jsx(G,{type:"number",step:"0.01",...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"housing_allowance",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Housing Allowance (ZMW)"}),i.jsx(nt,{children:i.jsx(G,{type:"number",step:"0.01",...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"transport_allowance",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Transport Allowance (ZMW)"}),i.jsx(nt,{children:i.jsx(G,{type:"number",step:"0.01",...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"other_allowances",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Other Allowances (ZMW)"}),i.jsx(nt,{children:i.jsx(G,{type:"number",step:"0.01",...l})}),i.jsx(it,{})]})})]})]}),i.jsxs("div",{className:"border rounded-lg p-6 space-y-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Statutory Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(rt,{control:a.control,name:"tpin",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"TPIN"}),i.jsx(nt,{children:i.jsx(G,{...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"napsa_number",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"NAPSA Number"}),i.jsx(nt,{children:i.jsx(G,{...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"nhima_number",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"NHIMA Number"}),i.jsx(nt,{children:i.jsx(G,{...l})}),i.jsx(it,{})]})})]})]}),i.jsxs("div",{className:"border rounded-lg p-6 space-y-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Bank Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(rt,{control:a.control,name:"bank_name",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Bank Name"}),i.jsx(nt,{children:i.jsx(G,{...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"bank_branch",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Branch"}),i.jsx(nt,{children:i.jsx(G,{...l})}),i.jsx(it,{})]})}),i.jsx(rt,{control:a.control,name:"bank_account_number",render:({field:l})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Account Number"}),i.jsx(nt,{children:i.jsx(G,{...l})}),i.jsx(it,{})]})})]})]}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx(W,{type:"button",variant:"outline",onClick:()=>t("/employees"),children:"Cancel"}),i.jsx(W,{type:"submit",children:"Update Employee"})]})]})})]})}const jJe=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n};function NJe(){const t=$n(),{user:e}=ot(),[n,r]=N.useState(null),[s,a]=N.useState(!1),o=()=>{const d=["full_name","employee_number","position","department","email","phone","basic_salary","housing_allowance","transport_allowance","other_allowances","employment_date","employment_status","tpin","napsa_number","nhima_number","bank_name","bank_branch","bank_account_number"],h=["John Doe","EMP001","Software Engineer","IT","john@example.com","+260971234567","15000","3000","1000","500","2024-01-01","active","1234567890","NAPSA123","NHIMA123","Zanaco","Cairo Road","1234567890"],f=[d.join(","),h.join(",")].join(`
`),m=new Blob([f],{type:"text/csv"}),v=window.URL.createObjectURL(m),g=document.createElement("a");g.href=v,g.download="employee_template.csv",g.click(),window.URL.revokeObjectURL(v),Z.success("Template downloaded")},l=d=>{d.target.files&&d.target.files[0]&&r(d.target.files[0])},c=d=>{const h=d.split(`
`).filter(m=>m.trim()),f=h[0].split(",").map(m=>m.trim());return h.slice(1).map(m=>{const v=m.split(",").map(y=>y.trim()),g={};return f.forEach((y,b)=>{g[y]=v[b]||null}),g})},u=async()=>{if(!n){Z.error("Please select a file");return}a(!0);try{if(!e)throw new Error("Not authenticated");const d=await Fe.getPrimaryMembershipByUser(e.id);if(!(d!=null&&d.companyId))throw new Error("No company profile found for your account");const h=await n.text(),m=c(h).map(y=>({userId:e.id,companyId:d.companyId,fullName:y.full_name||"",employeeNumber:y.employee_number||"",position:y.position||null,department:y.department||null,email:y.email||null,phone:y.phone||null,basicSalary:y.basic_salary?Number(y.basic_salary):0,housingAllowance:y.housing_allowance?Number(y.housing_allowance):0,transportAllowance:y.transport_allowance?Number(y.transport_allowance):0,otherAllowances:y.other_allowances?Number(y.other_allowances):0,employmentDate:y.employment_date||null,employmentStatus:y.employment_status||"active",tpin:y.tpin||null,napsaNumber:y.napsa_number||null,nhimaNumber:y.nhima_number||null,bankName:y.bank_name||null,bankBranch:y.bank_branch||null,bankAccountNumber:y.bank_account_number||null,createdAt:Ce(),updatedAt:Ce()})),v=ge(re,Y.EMPLOYEES),g=jJe(m,400);for(const y of g){const b=$l(re);y.forEach(x=>{b.set(Ye(v),x)}),await b.commit()}Z.success(`Successfully uploaded ${m.length} employees`),t("/employees")}catch{Z.error("Failed to upload employees. Please check your CSV format.")}finally{a(!1)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(W,{variant:"ghost",size:"sm",onClick:()=>t("/employees"),children:[i.jsx(fa,{className:"h-4 w-4 mr-2"}),"Back"]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Bulk Upload Employees"}),i.jsx("p",{className:"text-muted-foreground",children:"Upload multiple employees using a CSV file"})]})]}),i.jsxs("div",{className:"border rounded-lg p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Instructions"}),i.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-muted-foreground",children:[i.jsx("li",{children:"Download the CSV template below"}),i.jsx("li",{children:"Fill in your employee data following the template format"}),i.jsx("li",{children:"Make sure all required fields are filled (full_name, employee_number, basic_salary, employment_date)"}),i.jsx("li",{children:"Save your file as CSV format"}),i.jsx("li",{children:"Upload your completed CSV file"})]})]}),i.jsx("div",{className:"flex gap-4",children:i.jsxs(W,{variant:"outline",onClick:o,children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Download Template"]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Upload CSV File"}),i.jsx(G,{type:"file",accept:".csv",onChange:l,disabled:s})]}),n&&i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Selected file: ",n.name]})]}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx(W,{variant:"outline",onClick:()=>t("/employees"),children:"Cancel"}),i.jsxs(W,{onClick:u,disabled:s||!n,children:[i.jsx(Ho,{className:"mr-2 h-4 w-4"}),s?"Uploading...":"Upload Employees"]})]})]})]})}const SJe=t=>t==="pending_approval"?"Pending Approval":t==="final"?"Final":t,EJe=t=>["completed","approved","final"].includes(t)?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":t==="pending_approval"?"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";function AJe(){const t=$n(),{user:e}=ot(),{data:n,isLoading:r}=we({queryKey:["payrollRuns",e==null?void 0:e.id],queryFn:async()=>{if(!e)return[];const s=await Fe.getPrimaryMembershipByUser(e.id);if(!(s!=null&&s.companyId))return[];const a=ge(re,Y.PAYROLL_RUNS);return(await Te(je(a,he("companyId","==",s.companyId),WN("runDate","desc")))).docs.map(l=>{const c=l.data();return{id:l.id,runDate:String(c.runDate??c.run_date??""),periodStart:String(c.periodStart??c.period_start??""),periodEnd:String(c.periodEnd??c.period_end??""),totalGross:Number(c.totalGross??c.total_gross??0),totalDeductions:Number(c.totalDeductions??c.total_deductions??0),totalNet:Number(c.totalNet??c.total_net??0),status:String(c.status??c.payrollStatus??c.payroll_status??"draft")}})},enabled:!!e});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Payroll"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage payroll runs and employee payments"})]}),i.jsxs(W,{onClick:()=>t("/payroll/new"),children:[i.jsx(_n,{className:"mr-2 h-4 w-4"}),"New Payroll Run"]})]}),r?i.jsx("div",{children:"Loading..."}):i.jsx("div",{className:"border rounded-lg",children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Run Date"}),i.jsx(q,{children:"Period"}),i.jsx(q,{children:"Total Gross"}),i.jsx(q,{children:"Total Deductions"}),i.jsx(q,{children:"Total Net"}),i.jsx(q,{children:"Status"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ut,{children:[n==null?void 0:n.map(s=>i.jsxs(ve,{children:[i.jsx(V,{className:"font-medium",children:s.runDate?ut(new Date(s.runDate),"dd MMM yyyy"):"-"}),i.jsxs(V,{children:[s.periodStart?ut(new Date(s.periodStart),"dd MMM"):"-"," -"," ",s.periodEnd?ut(new Date(s.periodEnd),"dd MMM yyyy"):"-"]}),i.jsx(V,{children:le(s.totalGross)}),i.jsx(V,{children:le(s.totalDeductions)}),i.jsx(V,{children:le(s.totalNet)}),i.jsx(V,{children:i.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${EJe(s.status)}`,children:SJe(s.status)})}),i.jsx(V,{className:"text-right",children:s.status==="pending_approval"?i.jsx(W,{variant:"default",size:"sm",onClick:()=>t(`/payroll/${s.id}/approve`),children:"Review & Approve"}):i.jsx(W,{variant:"ghost",size:"sm",onClick:()=>t(`/payroll/${s.id}`),children:"View"})})]},s.id)),(n==null?void 0:n.length)===0&&i.jsx(ve,{children:i.jsx(V,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No payroll runs found. Create your first payroll run to get started."})})]})]})})]})}const Zn=KO,ns=fY,TJe=GO,ure=N.forwardRef(({className:t,...e},n)=>i.jsx(lb,{ref:n,className:me("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));ure.displayName=lb.displayName;const Hn=N.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(TJe,{children:[i.jsx(ure,{}),i.jsxs(cb,{ref:r,className:me("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,i.jsxs(sS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[i.jsx(Vm,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Hn.displayName=cb.displayName;const Kn=({className:t,...e})=>i.jsx("div",{className:me("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Kn.displayName="DialogHeader";const p1=({className:t,...e})=>i.jsx("div",{className:me("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});p1.displayName="DialogFooter";const Gn=N.forwardRef(({className:t,...e},n)=>i.jsx(ub,{ref:n,className:me("text-lg font-semibold leading-none tracking-tight",t),...e}));Gn.displayName=ub.displayName;const od=N.forwardRef(({className:t,...e},n)=>i.jsx(db,{ref:n,className:me("text-sm text-muted-foreground",t),...e}));od.displayName=db.displayName;function CJe({employees:t,additions:e,onAddition:n,onRemove:r}){const[s,a]=N.useState(!1),[o,l]=N.useState("earning"),[c,u]=N.useState(""),[d,h]=N.useState(""),[f,m]=N.useState(""),[v,g]=N.useState(""),[y,b]=N.useState(""),[x,S]=N.useState(""),T=()=>{u(""),h(""),m(""),g(""),b(""),S("")},_=()=>{if(!c)return;let E;if(o==="overtime"){const p=Number(y)*Number(x);E={employee_id:c,type:o,name:d||"Overtime",amount:p}}else if(o==="advance"){const p=Number(f),w=Number(v)||1,A=Math.ceil(p/w);E={employee_id:c,type:o,name:d||"Advance",amount:A,total_amount:p,months_to_pay:w,monthly_deduction:A}}else E={employee_id:c,type:o,name:d||(o==="bonus"?"Bonus":"Additional Earning"),amount:Number(f)};n(E),T(),a(!1)},C=E=>{switch(E){case"earning":return i.jsx(Xn,{className:"h-4 w-4"});case"bonus":return i.jsx(r4,{className:"h-4 w-4"});case"overtime":return i.jsx(Di,{className:"h-4 w-4"});case"advance":return i.jsx(fh,{className:"h-4 w-4"});default:return null}};return i.jsxs(Zn,{open:s,onOpenChange:a,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(W,{variant:"outline",size:"sm",children:[i.jsx(_n,{className:"h-4 w-4 mr-2"}),"Add Earnings/Deductions"]})}),i.jsxs(Hn,{className:"max-w-md",children:[i.jsxs(Kn,{children:[i.jsx(Gn,{children:"Add Payroll Items"}),i.jsx(od,{children:"Assign earnings, bonuses, overtime, or advances to employees"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Type"}),i.jsxs(Ct,{value:o,onValueChange:E=>l(E),children:[i.jsx(Et,{children:i.jsx(Pt,{})}),i.jsxs(At,{children:[i.jsx(ye,{value:"earning",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Xn,{className:"h-4 w-4"}),"Custom Earning"]})}),i.jsx(ye,{value:"bonus",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(r4,{className:"h-4 w-4"}),"Bonus"]})}),i.jsx(ye,{value:"overtime",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Di,{className:"h-4 w-4"}),"Overtime"]})}),i.jsx(ye,{value:"advance",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(fh,{className:"h-4 w-4"}),"Advance (Deduction)"]})})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Employee"}),i.jsxs(Ct,{value:c,onValueChange:u,children:[i.jsx(Et,{children:i.jsx(Pt,{placeholder:"Select employee"})}),i.jsx(At,{children:t.map(E=>i.jsxs(ye,{value:E.id,children:[E.full_name," (",E.employee_number,")"]},E.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Description"}),i.jsx(G,{value:d,onChange:E=>h(E.target.value),placeholder:o==="earning"?"e.g., Commission":o==="bonus"?"e.g., Performance Bonus":o==="overtime"?"e.g., Weekend Overtime":"e.g., Salary Advance"})]}),o==="overtime"?i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Hourly Rate (K)"}),i.jsx(G,{type:"number",value:y,onChange:E=>b(E.target.value),placeholder:"0.00"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Hours Worked"}),i.jsx(G,{type:"number",value:x,onChange:E=>S(E.target.value),placeholder:"0"})]}),y&&x&&i.jsxs("div",{className:"col-span-2 p-3 bg-muted rounded-lg",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Overtime Pay"}),i.jsxs("p",{className:"text-lg font-semibold",children:["K",(Number(y)*Number(x)).toFixed(2)]})]})]}):o==="advance"?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Advance Amount (K)"}),i.jsx(G,{type:"number",value:f,onChange:E=>m(E.target.value),placeholder:"0.00"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Months to Repay"}),i.jsx(G,{type:"number",min:"1",value:v,onChange:E=>g(E.target.value),placeholder:"e.g., 3"})]}),f&&v&&i.jsxs("div",{className:"p-3 bg-muted rounded-lg space-y-1",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Deduction"}),i.jsxs("p",{className:"text-lg font-semibold",children:["K",Math.ceil(Number(f)/Number(v)).toFixed(2)]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["To be deducted from net pay over ",v," month(s)"]})]})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Amount (K)"}),i.jsx(G,{type:"number",value:f,onChange:E=>m(E.target.value),placeholder:"0.00"})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(W,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),i.jsx(W,{onClick:_,disabled:!c,children:"Add to Payroll"})]})]})]}),e.length>0&&i.jsxs("div",{className:"mt-4 border rounded-lg",children:[i.jsx("div",{className:"p-3 border-b bg-muted/50",children:i.jsxs("h4",{className:"font-medium text-sm",children:["Pending Additions (",e.length,")"]})}),i.jsx("div",{className:"divide-y max-h-48 overflow-y-auto",children:e.map(E=>{const p=t.find(w=>w.id===E.employee_id);return i.jsxs("div",{className:"p-3 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[C(E.type),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-sm",children:E.name}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[p==null?void 0:p.full_name,"  K",E.amount.toFixed(2),E.type==="advance"&&` per month for ${E.months_to_pay} months`]})]})]}),i.jsx(W,{variant:"ghost",size:"sm",className:"text-destructive",onClick:()=>r(E.id),children:"Remove"})]},E.id)})})]})]})}const PJe=Ju({period_start:ze().min(1,"Start date is required"),period_end:ze().min(1,"End date is required"),run_date:ze().min(1,"Run date is required"),notes:ze().optional()});function IJe(){const{user:t}=ot(),e=$n(),[n,r]=N.useState(!1),[s,a]=N.useState([]),o=m=>{a([...s,{...m,id:crypto.randomUUID()}])},l=m=>{a(s.filter(v=>v.id!==m))},c=Xu({resolver:Zu(PJe),defaultValues:{run_date:new Date().toISOString().split("T")[0]}}),{data:u}=we({queryKey:["new-payroll-company",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const m=await Fe.getPrimaryMembershipByUser(t.id);return(m==null?void 0:m.companyId)??null},enabled:!!t}),{data:d}=we({queryKey:["employees",u],queryFn:async()=>{if(!u)return[];const m=ge(re,Y.EMPLOYEES),v=await Te(je(m,he("companyId","==",u),he("employmentStatus","==","active")));return v.empty?(await Te(je(m,he("companyId","==",u),he("employment_status","==","active")))).docs.map(y=>{const b=y.data();return{id:y.id,full_name:String(b.fullName??b.full_name??""),employee_number:String(b.employeeNumber??b.employee_number??""),basic_salary:Number(b.basicSalary??b.basic_salary??0),housing_allowance:Number(b.housingAllowance??b.housing_allowance??0),transport_allowance:Number(b.transportAllowance??b.transport_allowance??0),other_allowances:Number(b.otherAllowances??b.other_allowances??0)}}):v.docs.map(g=>{const y=g.data();return{id:g.id,full_name:String(y.fullName??y.full_name??""),employee_number:String(y.employeeNumber??y.employee_number??""),basic_salary:Number(y.basicSalary??y.basic_salary??0),housing_allowance:Number(y.housingAllowance??y.housing_allowance??0),transport_allowance:Number(y.transportAllowance??y.transport_allowance??0),other_allowances:Number(y.otherAllowances??y.other_allowances??0)}})},enabled:!!u}),{data:h}=we({queryKey:["open-payroll-period",u],queryFn:async()=>{if(!u)return null;const m=ge(re,Y.FINANCIAL_PERIODS),v=await Te(je(m,he("companyId","==",u),he("status","==","open")));if(v.empty)return null;const g=v.docs.map(y=>{const b=y.data();return{id:y.id,startDate:String(b.startDate??b.start_date??""),endDate:String(b.endDate??b.end_date??""),periodName:String(b.periodName??b.period_name??"")}});return g.sort((y,b)=>b.startDate.localeCompare(y.startDate)),g[0]},enabled:!!u}),f=async m=>{if(!d||d.length===0){Z.error("No active employees found");return}r(!0);try{if(!t)throw new Error("Not authenticated");if(!u)throw new Error("Company not found");const g=(await Te(je(ge(re,Y.ADVANCES),he("companyId","==",u),he("status","in",["pending","partial"])))).docs.map(S=>{const T=S.data();return{id:S.id,employee_id:String(T.employeeId??T.employee_id??""),status:String(T.status??""),date_to_deduct:T.dateToDeduct??T.date_to_deduct??null,monthly_deduction:Number(T.monthlyDeduction??T.monthly_deduction??0)||null,remaining_balance:Number(T.remainingBalance??T.remaining_balance??0)||null,amount:Number(T.amount??0)}}).filter(S=>!S.employee_id||!d.some(T=>T.id===S.employee_id)?!1:S.date_to_deduct?S.date_to_deduct<=m.period_end:!0),y=d.map(S=>{const T=g.filter(E=>E.employee_id===S.id);let _=0;T.forEach(E=>{const p=E.monthly_deduction?Math.min(Number(E.monthly_deduction),Number(E.remaining_balance||E.amount)):Number(E.remaining_balance||E.amount);_+=p});const C=eIe(Number(S.basic_salary),Number(S.housing_allowance||0),Number(S.transport_allowance||0),Number(S.other_allowances||0),_);return{employeeId:S.id,employeeName:S.full_name,grossSalary:C.grossSalary,payeDeduction:C.paye,napsaDeduction:C.napsaEmployee,nhimaDeduction:C.nhimaEmployee,otherDeductions:_,netSalary:C.netSalary,basicSalary:C.basicSalary,housingAllowance:C.housingAllowance,transportAllowance:C.transportAllowance,otherAllowances:C.otherAllowances,advancesDeducted:_}}),b=s.map(S=>({employeeId:S.employee_id,type:S.type,name:S.name,amount:S.amount,totalAmount:S.total_amount,monthsToPay:S.months_to_pay,monthlyDeduction:S.monthly_deduction})),x=await rh.createPayrollDraft({companyId:u,periodStart:m.period_start,periodEnd:m.period_end,runDate:m.run_date,notes:m.notes||void 0,employees:y.map(S=>({employeeId:S.employeeId,employeeName:S.employeeName,grossSalary:S.grossSalary,payeDeduction:S.payeDeduction,napsaDeduction:S.napsaDeduction,nhimaDeduction:S.nhimaDeduction,otherDeductions:S.otherDeductions,netSalary:S.netSalary,basicSalary:S.basicSalary,housingAllowance:S.housingAllowance,transportAllowance:S.transportAllowance,otherAllowances:S.otherAllowances,advancesDeducted:S.advancesDeducted})),additions:b});Z.success("Payroll draft created successfully"),e(`/payroll/${x.payrollRunId}`)}catch{Z.error("Failed to create payroll run")}finally{r(!1)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(W,{variant:"ghost",size:"sm",onClick:()=>e("/payroll"),children:[i.jsx(fa,{className:"h-4 w-4 mr-2"}),"Back"]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"New Payroll Run"}),i.jsxs("p",{className:"text-muted-foreground",children:["Create a new payroll run for ",(d==null?void 0:d.length)||0," active employees"]})]}),i.jsx(Ve,{variant:"outline",className:"text-lg px-3 py-1",children:"DRAFT"})]}),i.jsxs(ku,{children:[i.jsx(ks,{className:"h-4 w-4"}),i.jsx(cre,{children:"Payroll Workflow"}),i.jsxs(Ru,{children:["Payroll follows a strict workflow: ",i.jsx("strong",{children:"Draft -> Processed -> Paid"}),". Draft payrolls can be edited and saved without posting journals. Processing creates the payroll journal entry, and payment creates the settlement journal."]})]}),h&&i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Open financial period: ",h.periodName||`${h.startDate} to ${h.endDate}`]}),i.jsx(d1,{...c,children:i.jsxs("form",{onSubmit:c.handleSubmit(f),className:"space-y-6",children:[i.jsxs(Q,{children:[i.jsxs(ee,{children:[i.jsx(te,{children:"Payroll Period"}),i.jsx(dt,{children:"Define the period for this payroll run"})]}),i.jsx(ne,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(rt,{control:c.control,name:"period_start",render:({field:m})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Period Start *"}),i.jsx(nt,{children:i.jsx(G,{type:"date",...m})}),i.jsx(it,{})]})}),i.jsx(rt,{control:c.control,name:"period_end",render:({field:m})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Period End *"}),i.jsx(nt,{children:i.jsx(G,{type:"date",...m})}),i.jsx(it,{})]})}),i.jsx(rt,{control:c.control,name:"run_date",render:({field:m})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Run Date *"}),i.jsx(nt,{children:i.jsx(G,{type:"date",...m})}),i.jsx(it,{})]})})]})})]}),i.jsxs(Q,{children:[i.jsxs(ee,{children:[i.jsx(te,{children:"Payroll Additions"}),i.jsx(dt,{children:"Add earnings, bonuses, overtime, or advances for this payroll run"})]}),i.jsx(ne,{children:i.jsx(CJe,{employees:(d==null?void 0:d.map(m=>({id:m.id,full_name:m.full_name,employee_number:m.employee_number})))||[],additions:s,onAddition:o,onRemove:l})})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"Notes"})}),i.jsx(ne,{children:i.jsx(rt,{control:c.control,name:"notes",render:({field:m})=>i.jsxs(tt,{children:[i.jsx(nt,{children:i.jsx(hr,{...m,rows:3,placeholder:"Add any notes for this payroll run..."})}),i.jsx(it,{})]})})})]}),d&&d.length>0&&i.jsxs(Q,{children:[i.jsxs(ee,{children:[i.jsx(te,{children:"Employees to Process"}),i.jsxs(dt,{children:[d.length," active employees will be included"]})]}),i.jsx(ne,{children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Basic Salary"}),i.jsx("p",{className:"text-xl font-bold",children:le(d.reduce((m,v)=>m+Number(v.basic_salary||0),0))})]}),i.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Housing"}),i.jsx("p",{className:"text-xl font-bold",children:le(d.reduce((m,v)=>m+Number(v.housing_allowance||0),0))})]}),i.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Transport"}),i.jsx("p",{className:"text-xl font-bold",children:le(d.reduce((m,v)=>m+Number(v.transport_allowance||0),0))})]}),i.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Other Allowances"}),i.jsx("p",{className:"text-xl font-bold",children:le(d.reduce((m,v)=>m+Number(v.other_allowances||0),0))})]})]})})]}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx(W,{type:"button",variant:"outline",onClick:()=>e("/payroll"),children:"Cancel"}),i.jsxs(W,{type:"submit",disabled:n,children:[i.jsx(ph,{className:"h-4 w-4 mr-2"}),n?"Creating...":"Save as Draft"]})]})]})})]})}var dre="AlertDialog",[kJe,Utt]=ps(dre,[XG]),ec=XG(),hre=t=>{const{__scopeAlertDialog:e,...n}=t,r=ec(e);return i.jsx(KO,{...r,...n,modal:!0})};hre.displayName=dre;var RJe="AlertDialogTrigger",fre=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ec(n);return i.jsx(fY,{...s,...r,ref:e})});fre.displayName=RJe;var OJe="AlertDialogPortal",mre=t=>{const{__scopeAlertDialog:e,...n}=t,r=ec(e);return i.jsx(GO,{...r,...n})};mre.displayName=OJe;var MJe="AlertDialogOverlay",pre=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ec(n);return i.jsx(lb,{...s,...r,ref:e})});pre.displayName=MJe;var vm="AlertDialogContent",[DJe,LJe]=kJe(vm),$Je=Cq("AlertDialogContent"),gre=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,a=ec(n),o=N.useRef(null),l=Dt(e,o),c=N.useRef(null);return i.jsx(Wje,{contentName:vm,titleName:yre,docsSlug:"alert-dialog",children:i.jsx(DJe,{scope:n,cancelRef:c,children:i.jsxs(cb,{role:"alertdialog",...a,...s,ref:l,onOpenAutoFocus:ke(s.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[i.jsx($Je,{children:r}),i.jsx(VJe,{contentRef:o})]})})})});gre.displayName=vm;var yre="AlertDialogTitle",vre=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ec(n);return i.jsx(ub,{...s,...r,ref:e})});vre.displayName=yre;var xre="AlertDialogDescription",bre=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ec(n);return i.jsx(db,{...s,...r,ref:e})});bre.displayName=xre;var FJe="AlertDialogAction",wre=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ec(n);return i.jsx(sS,{...s,...r,ref:e})});wre.displayName=FJe;var _re="AlertDialogCancel",jre=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=LJe(_re,n),a=ec(n),o=Dt(e,s);return i.jsx(sS,{...a,...r,ref:o})});jre.displayName=_re;var VJe=({contentRef:t})=>{const e=`\`${vm}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${vm}\` by passing a \`${xre}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${vm}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return N.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},BJe=hre,UJe=fre,zJe=mre,Nre=pre,Sre=gre,Ere=wre,Are=jre,Tre=vre,Cre=bre;const Fh=BJe,Nx=UJe,qJe=zJe,Pre=N.forwardRef(({className:t,...e},n)=>i.jsx(Nre,{className:me("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));Pre.displayName=Nre.displayName;const Ou=N.forwardRef(({className:t,...e},n)=>i.jsxs(qJe,{children:[i.jsx(Pre,{}),i.jsx(Sre,{ref:n,className:me("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Ou.displayName=Sre.displayName;const Mu=({className:t,...e})=>i.jsx("div",{className:me("flex flex-col space-y-2 text-center sm:text-left",t),...e});Mu.displayName="AlertDialogHeader";const Du=({className:t,...e})=>i.jsx("div",{className:me("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Du.displayName="AlertDialogFooter";const Lu=N.forwardRef(({className:t,...e},n)=>i.jsx(Tre,{ref:n,className:me("text-lg font-semibold",t),...e}));Lu.displayName=Tre.displayName;const $u=N.forwardRef(({className:t,...e},n)=>i.jsx(Cre,{ref:n,className:me("text-sm text-muted-foreground",t),...e}));$u.displayName=Cre.displayName;const Fu=N.forwardRef(({className:t,...e},n)=>i.jsx(Ere,{ref:n,className:me(AO(),t),...e}));Fu.displayName=Ere.displayName;const Vu=N.forwardRef(({className:t,...e},n)=>i.jsx(Are,{ref:n,className:me(AO({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));Vu.displayName=Are.displayName;function WJe(){const{user:t}=ot(),e=$n(),{id:n}=Wh(),r=en(),{data:s,isLoading:a}=we({queryKey:["payrollRun",n],queryFn:async()=>{if(!n)return null;const T=await xi(Ye(re,Y.PAYROLL_RUNS,n));if(!T.exists())return null;const _=T.data();return{id:T.id,run_date:String(_.runDate??_.run_date??""),period_start:String(_.periodStart??_.period_start??""),period_end:String(_.periodEnd??_.period_end??""),payroll_status:_.payrollStatus??_.payroll_status??_.status??"draft",status:_.status??null,payroll_number:_.payrollNumber??_.payroll_number??null,total_gross:Number(_.totalGross??_.total_gross??0),total_deductions:Number(_.totalDeductions??_.total_deductions??0),total_net:Number(_.totalNet??_.total_net??0),gl_journal_id:_.glJournalId??_.gl_journal_id??null}},enabled:!!(t&&n)}),{data:o}=we({queryKey:["payrollItems",n],queryFn:async()=>{if(!n)return[];const T=ge(re,Y.PAYROLL_ITEMS);let _=await Te(je(T,he("payrollRunId","==",n)));_.empty&&(_=await Te(je(T,he("payroll_run_id","==",n))));const C=_.docs.map(A=>({id:A.id,row:A.data()})),E=Array.from(new Set(C.map(({row:A})=>String(A.employeeId??A.employee_id??"")).filter(Boolean))),p=await Promise.all(E.map(async A=>{const P=await xi(Ye(re,Y.EMPLOYEES,A));return{employeeDocId:A,snap:P}})),w=new Map;return p.forEach(({employeeDocId:A,snap:P})=>{if(!P.exists())return;const I=P.data();w.set(A,{full_name:String(I.fullName??I.full_name??""),employee_number:String(I.employeeNumber??I.employee_number??""),email:I.email??null,position:I.position??null,department:I.department??null,tpin:I.tpin??null,napsa_number:I.napsaNumber??I.napsa_number??null,nhima_number:I.nhimaNumber??I.nhima_number??null,bank_name:I.bankName??I.bank_name??null,bank_account_number:I.bankAccountNumber??I.bank_account_number??null})}),C.map(({id:A,row:P})=>{const I=String(P.employeeId??P.employee_id??"");return{id:A,employee_id:I,basic_salary:Number(P.basicSalary??P.basic_salary??0),housing_allowance:Number(P.housingAllowance??P.housing_allowance??0),transport_allowance:Number(P.transportAllowance??P.transport_allowance??0),other_allowances:Number(P.otherAllowances??P.other_allowances??0),gross_salary:Number(P.grossSalary??P.gross_salary??0),advances_deducted:Number(P.advancesDeducted??P.advances_deducted??0),net_salary:Number(P.netSalary??P.net_salary??0),paye:Number(P.paye??0),napsa_employee:Number(P.napsaEmployee??P.napsa_employee??0),napsa_employer:Number(P.napsaEmployer??P.napsa_employer??0),nhima_employee:Number(P.nhimaEmployee??P.nhima_employee??0),nhima_employer:Number(P.nhimaEmployer??P.nhima_employer??0),total_deductions:Number(P.totalDeductions??P.total_deductions??0),employees:w.get(I)??null}})},enabled:!!(t&&n)}),{data:l}=we({queryKey:["payroll-journals",n],queryFn:async()=>{if(!n)return[];const T=ge(re,Y.PAYROLL_JOURNALS);let _=await Te(je(T,he("payrollRunId","==",n)));_.empty&&(_=await Te(je(T,he("payroll_run_id","==",n))));const C=_.docs.map(A=>({id:A.id,row:A.data()})),E=Array.from(new Set(C.map(({row:A})=>String(A.journalEntryId??A.journal_entry_id??"")).filter(Boolean))),p=await Promise.all(E.map(async A=>{const P=await xi(Ye(re,Y.JOURNAL_ENTRIES,A));return{entryId:A,snap:P}})),w=new Map;return p.forEach(({entryId:A,snap:P})=>{if(!P.exists()){w.set(A,null);return}const I=P.data();w.set(A,{id:P.id,reference_number:I.referenceNumber??I.reference_number??null,entry_date:String(I.entryDate??I.entry_date??""),description:I.description??null,is_posted:!!(I.isPosted??I.is_posted)})}),C.map(({id:A,row:P})=>{const I=String(P.journalEntryId??P.journal_entry_id??"");return{id:A,description:P.description??null,journal_entries:w.get(I)??null}})},enabled:(s==null?void 0:s.payroll_status)==="final"}),c=Xe({mutationFn:async()=>{if(!n)throw new Error("Payroll run not found");await rh.runPayrollTrial({payrollRunId:n})},onSuccess:()=>{r.invalidateQueries({queryKey:["payrollRun",n]}),Z.success("Trial payroll run completed. Review the calculations before finalizing.")},onError:T=>{Z.error(T.message||"Failed to run trial payroll")}}),u=Xe({mutationFn:async()=>{if(!n)throw new Error("Payroll run not found");await Dl(Ye(re,Y.PAYROLL_RUNS,n),{payrollStatus:"draft",trialRunAt:null,trialRunBy:null,updatedAt:Ce()})},onSuccess:()=>{r.invalidateQueries({queryKey:["payrollRun",n]}),Z.success("Payroll reverted to draft. You can make changes and re-run trial.")},onError:T=>{Z.error(T.message||"Failed to revert payroll")}}),d=Xe({mutationFn:async()=>{if(!n)throw new Error("Payroll run not found");await rh.finalizePayroll({payrollRunId:n})},onSuccess:()=>{r.invalidateQueries({queryKey:["payrollRun",n]}),r.invalidateQueries({queryKey:["payrollItems",n]}),r.invalidateQueries({queryKey:["payroll-journals",n]}),Z.success("Payroll finalized and posted to General Ledger!")},onError:T=>{Z.error(T.message||"Failed to finalize payroll")}}),h=()=>{if(!o||!s)return;const T=["Employee Number","Name","Basic Salary","Housing","Transport","Other Allowances","Gross Salary","Advances Deducted","Net Salary","PAYE (Employer)","NAPSA Employee (Employer)","NAPSA Employer","NHIMA Employee (Employer)","NHIMA Employer"],_=o.map(A=>{var P,I;return[((P=A.employees)==null?void 0:P.employee_number)??"",((I=A.employees)==null?void 0:I.full_name)??"",A.basic_salary,A.housing_allowance,A.transport_allowance,A.other_allowances,A.gross_salary,A.advances_deducted??0,A.net_salary,A.paye,A.napsa_employee,A.napsa_employer,A.nhima_employee,A.nhima_employer]}),C=[T.join(","),..._.map(A=>A.join(","))].join(`
`),E=new Blob([C],{type:"text/csv"}),p=window.URL.createObjectURL(E),w=document.createElement("a");w.href=p,w.download=`payroll_${ut(new Date(s.run_date),"yyyy-MM-dd")}.csv`,w.click(),Z.success("Payroll exported successfully")},f=T=>{e(`/payroll/${n}/payslip/${T}`)},m=async()=>{!o||!s||!window.confirm(`Queue payslip emails for ${o.length} employees?`)||Z.promise(async()=>{for(const _ of o){const C=_.employees;C!=null&&C.email&&n&&await rh.sendPayslipEmail({payrollRunId:n,employeeId:_.employee_id})}},{loading:"Queueing payslip emails...",success:"Payslip emails queued successfully!",error:"Failed to queue some emails."})},v=()=>{if(!o||!s)return;let T=`PAYSLIPS - ${new Date(s.period_start).toLocaleDateString()} to ${new Date(s.period_end).toLocaleDateString()}
`;T+="=".repeat(100)+`

`,o.forEach((w,A)=>{const P=w.employees??{full_name:"Unknown",employee_number:"-",position:null,department:null,tpin:null,napsa_number:null,nhima_number:null,bank_name:null,bank_account_number:null,email:null};T+=`PAYSLIP ${A+1}
`,T+="-".repeat(100)+`
`,T+=`Employee: ${P.full_name} (${P.employee_number})
`,T+=`Position: ${P.position||"N/A"}
`,T+=`Department: ${P.department||"N/A"}
`,T+=`TPIN: ${P.tpin||"N/A"}
`,T+=`NAPSA: ${P.napsa_number||"N/A"}
`,T+=`NHIMA: ${P.nhima_number||"N/A"}

`,T+=`EARNINGS:
`,T+=`  Basic Salary:        K${w.basic_salary.toFixed(2)}
`,T+=`  Housing Allowance:   K${w.housing_allowance.toFixed(2)}
`,T+=`  Transport Allowance: K${w.transport_allowance.toFixed(2)}
`,T+=`  Other Allowances:    K${w.other_allowances.toFixed(2)}
`,T+=`  Gross Salary:        K${w.gross_salary.toFixed(2)}

`,T+=`DEDUCTIONS:
`,T+=`  NAPSA (5%):          K${w.napsa_employee.toFixed(2)}
`,T+=`  NHIMA (1%):          K${w.nhima_employee.toFixed(2)}
`,T+=`  PAYE:                K${w.paye.toFixed(2)}
`,T+=`  Total Deductions:    K${w.total_deductions.toFixed(2)}

`,T+=`NET PAY:               K${w.net_salary.toFixed(2)}
`,T+=`
Bank: ${P.bank_name||"N/A"}
`,T+=`Account: ${P.bank_account_number||"N/A"}
`,T+=`
`+"=".repeat(100)+`

`});const _=new Blob([T],{type:"text/plain"}),C=window.URL.createObjectURL(_),E=document.createElement("a");E.href=C;const p=new Date(s.period_start).toLocaleDateString("en-GB",{month:"short",year:"numeric"});E.download=`Payslips_${p.replace(" ","_")}.txt`,document.body.appendChild(E),E.click(),document.body.removeChild(E),window.URL.revokeObjectURL(C),Z.success("Batch payslips downloaded successfully!")},g=T=>{switch(T){case"draft":return i.jsx(Ve,{variant:"outline",className:"border-yellow-500 text-yellow-600",children:"Draft"});case"trial":return i.jsx(Ve,{variant:"secondary",className:"bg-blue-100 text-blue-700",children:"Trial Run"});case"final":return i.jsx(Ve,{className:"bg-green-600",children:"Finalized"});default:return i.jsx(Ve,{variant:"outline",children:"Unknown"})}},y=s==null?void 0:s.payroll_status,b=y==="draft",x=y==="trial",S=y==="final";return a?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx(En,{className:"h-8 w-8 animate-spin text-primary"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(W,{variant:"ghost",size:"sm",onClick:()=>e("/payroll"),children:[i.jsx(fa,{className:"h-4 w-4 mr-2"}),"Back"]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Payroll Details"}),g(y),(s==null?void 0:s.payroll_number)&&i.jsx("span",{className:"text-sm text-muted-foreground font-mono",children:s.payroll_number})]}),i.jsx("p",{className:"text-muted-foreground",children:s&&i.jsxs(i.Fragment,{children:[ut(new Date(s.period_start),"dd MMM")," -"," ",ut(new Date(s.period_end),"dd MMM yyyy")]})})]})]}),i.jsxs("div",{className:"flex gap-2",children:[b&&i.jsxs(W,{onClick:()=>c.mutate(),disabled:c.isPending,className:"bg-blue-600 hover:bg-blue-700",children:[c.isPending?i.jsx(En,{className:"h-4 w-4 mr-2 animate-spin"}):i.jsx(c8,{className:"h-4 w-4 mr-2"}),"Run Trial Payroll"]}),x&&i.jsxs(i.Fragment,{children:[i.jsxs(W,{variant:"outline",onClick:()=>u.mutate(),disabled:u.isPending,children:[u.isPending?i.jsx(En,{className:"h-4 w-4 mr-2 animate-spin"}):i.jsx(mh,{className:"h-4 w-4 mr-2"}),"Revert to Draft"]}),i.jsxs(Fh,{children:[i.jsx(Nx,{asChild:!0,children:i.jsxs(W,{className:"bg-green-600 hover:bg-green-700",children:[i.jsx(Vo,{className:"h-4 w-4 mr-2"}),"Finalize Payroll"]})}),i.jsxs(Ou,{children:[i.jsxs(Mu,{children:[i.jsxs(Lu,{className:"flex items-center gap-2",children:[i.jsx(eo,{className:"h-5 w-5 text-amber-500"}),"Finalize Payroll"]}),i.jsxs($u,{className:"space-y-2",children:[i.jsx("p",{children:"This action will:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[i.jsx("li",{children:"Lock the payroll permanently - no further edits allowed"}),i.jsx("li",{children:"Post journal entries to the General Ledger"}),i.jsx("li",{children:"Create statutory liability accounts (PAYE, NAPSA, NHIMA)"}),i.jsx("li",{children:"Generate payroll number for reference"})]}),i.jsx("p",{className:"font-medium mt-4",children:"Are you sure you want to proceed?"})]})]}),i.jsxs(Du,{children:[i.jsx(Vu,{children:"Cancel"}),i.jsxs(Fu,{onClick:()=>d.mutate(),disabled:d.isPending,className:"bg-green-600 hover:bg-green-700",children:[d.isPending?i.jsx(En,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Finalize & Post to GL"]})]})]})]})]}),S&&i.jsxs(i.Fragment,{children:[i.jsx(W,{onClick:m,variant:"outline",children:"Email Payslips"}),i.jsx(W,{onClick:v,variant:"outline",children:"Download All"})]}),i.jsxs(W,{onClick:h,variant:"outline",children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export CSV"]})]})]}),x&&i.jsx(Q,{className:"border-blue-200 bg-blue-50",children:i.jsx(ne,{className:"py-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(eo,{className:"h-5 w-5 text-blue-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-blue-900",children:"Trial Payroll Run"}),i.jsx("p",{className:"text-sm text-blue-700",children:'Review the calculations below. No GL entries have been posted. Click "Finalize Payroll" when ready.'})]})]})})}),S&&l&&l.length>0&&i.jsxs(Q,{className:"border-green-200 bg-green-50",children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(te,{className:"text-lg flex items-center gap-2",children:[i.jsx(hv,{className:"h-5 w-5 text-green-600"}),"General Ledger Postings"]})}),i.jsxs(ne,{children:[i.jsx("div",{className:"space-y-2",children:l.map(T=>{var _,C;return i.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:(_=T.journal_entries)==null?void 0:_.reference_number}),i.jsx("p",{className:"text-sm text-muted-foreground",children:T.description})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm",children:((C=T.journal_entries)==null?void 0:C.entry_date)&&ut(new Date(T.journal_entries.entry_date),"dd MMM yyyy")}),i.jsx(Ve,{variant:"outline",className:"text-green-600 border-green-600",children:"Posted"})]})]},T.id)})}),i.jsx(W,{variant:"link",className:"mt-2 p-0 h-auto text-green-700",onClick:()=>e("/journal-entries"),children:"View all journal entries "})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(Q,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(dt,{children:"Total Gross"}),i.jsx(te,{className:"text-2xl",children:le(Number((s==null?void 0:s.total_gross)||0))})]})}),i.jsx(Q,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(dt,{children:"Total Deductions"}),i.jsx(te,{className:"text-2xl text-destructive",children:le(Number((s==null?void 0:s.total_deductions)||0))})]})}),i.jsx(Q,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(dt,{children:"Total Net"}),i.jsx(te,{className:"text-2xl text-primary",children:le(Number((s==null?void 0:s.total_net)||0))})]})}),i.jsx(Q,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(dt,{children:"Employees"}),i.jsx(te,{className:"text-2xl",children:(o==null?void 0:o.length)||0})]})})]}),i.jsxs(Q,{children:[i.jsxs(ee,{children:[i.jsx(te,{children:"Payroll Items"}),i.jsx(dt,{children:"Individual employee payroll calculations"})]}),i.jsx(ne,{children:i.jsx("div",{className:"border rounded-lg overflow-x-auto",children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Employee"}),i.jsx(q,{className:"text-right",children:"Basic"}),i.jsx(q,{className:"text-right",children:"Allowances"}),i.jsx(q,{className:"text-right",children:"Gross"}),i.jsx(q,{className:"text-right",children:"PAYE"}),i.jsx(q,{className:"text-right",children:"NAPSA"}),i.jsx(q,{className:"text-right",children:"NHIMA"}),i.jsx(q,{className:"text-right",children:"Total Ded."}),i.jsx(q,{className:"text-right",children:"Net Salary"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsx(Ut,{children:o==null?void 0:o.map(T=>{var _,C;return i.jsxs(ve,{children:[i.jsx(V,{children:i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:((_=T.employees)==null?void 0:_.full_name)||"Unknown"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:((C=T.employees)==null?void 0:C.employee_number)||"-"})]})}),i.jsx(V,{className:"text-right",children:le(Number(T.basic_salary))}),i.jsx(V,{className:"text-right",children:le(Number(T.housing_allowance||0)+Number(T.transport_allowance||0)+Number(T.other_allowances||0))}),i.jsx(V,{className:"text-right font-medium",children:le(Number(T.gross_salary))}),i.jsx(V,{className:"text-right text-destructive",children:le(Number(T.paye))}),i.jsx(V,{className:"text-right text-destructive",children:le(Number(T.napsa_employee))}),i.jsx(V,{className:"text-right text-destructive",children:le(Number(T.nhima_employee))}),i.jsx(V,{className:"text-right text-destructive",children:le(Number(T.total_deductions))}),i.jsx(V,{className:"text-right font-medium text-primary",children:le(Number(T.net_salary))}),i.jsx(V,{className:"text-right",children:i.jsxs(W,{variant:"ghost",size:"sm",onClick:()=>f(T.employee_id),children:[i.jsx(ur,{className:"h-4 w-4 mr-2"}),"Payslip"]})})]},T.id)})})]})})})]})]})}function XM({onUploaded:t}){const[e,n]=N.useState(!1),[r,s]=N.useState(""),a=N.useRef(null),o=en(),{user:l}=ot(),{data:c}=we({queryKey:["company-settings",l==null?void 0:l.id],queryFn:async()=>{if(!l||!Oo)return null;const f=await Fe.getPrimaryMembershipByUser(l.id);if(!f)return null;const[m,v]=await Promise.all([Fe.getCompanyById(f.companyId),Fe.getCompanySettings(f.companyId)]);return{companyId:f.companyId,companyName:(v==null?void 0:v.companyName)||(m==null?void 0:m.name)||"My Organization",logoUrl:(v==null?void 0:v.logoUrl)||(m==null?void 0:m.logoUrl)||null}},enabled:!!l}),u=Xe({mutationFn:async({logoUrl:f,companyName:m})=>{if(!c)throw new Error("No company linked to current user.");await Fe.updateCompanyBasics({companyId:c.companyId,logoUrl:f,name:m})},onSuccess:()=>{o.invalidateQueries({queryKey:["company-settings"]}),o.invalidateQueries({queryKey:["company"]}),Z.success("Settings updated successfully")},onError:f=>{const m=f instanceof Error?f.message:"Failed to update settings";Z.error(m)}});N.useEffect(()=>{t&&t((c==null?void 0:c.logoUrl)||null)},[t,c==null?void 0:c.logoUrl]),N.useEffect(()=>{s((c==null?void 0:c.companyName)||"")},[c==null?void 0:c.companyName]);const d=async f=>{var v;const m=(v=f.target.files)==null?void 0:v[0];if(m){if(!c){Z.error("No company linked to this user.");return}if(!m.type.startsWith("image/")){Z.error("Please upload an image file");return}if(m.size>5*1024*1024){Z.error("File size must be less than 5MB");return}n(!0);try{const g=await STe.uploadCompanyLogo(c.companyId,m);await u.mutateAsync({logoUrl:g}),t==null||t(g)}catch(g){const y=g instanceof Error?g.message:"Failed to upload logo";Z.error(y)}finally{n(!1)}}},h=()=>{const f=r.trim();!f||!c||f===c.companyName||u.mutate({companyName:f})};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"h-20 w-20 rounded-lg border-2 border-dashed border-border flex items-center justify-center overflow-hidden bg-muted",children:c!=null&&c.logoUrl?i.jsx("img",{src:c.logoUrl,alt:"Company Logo",className:"h-full w-full object-contain"}):i.jsx(Lx,{className:"h-8 w-8 text-muted-foreground"})}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Company Logo"}),i.jsx("input",{ref:a,type:"file",accept:"image/*",onChange:d,className:"hidden"}),i.jsx(W,{variant:"outline",size:"sm",onClick:()=>{var f;return(f=a.current)==null?void 0:f.click()},disabled:e||!c,children:e?i.jsxs(i.Fragment,{children:[i.jsx(En,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Ho,{className:"h-4 w-4 mr-2"}),"Upload Logo"]})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Company Name"}),i.jsx(G,{value:r,placeholder:"Enter company name",onChange:f=>s(f.target.value),onBlur:h,disabled:!c})]})]})}const ni=t=>Number(t??0),mc=t=>String(t??"");function HJe(){const{user:t}=ot(),e=$n(),{runId:n,employeeId:r}=Wh(),[s,a]=N.useState(!1),[o,l]=N.useState(!1),{data:c}=ad(),{data:u}=we({queryKey:["payrollRun",n],queryFn:async()=>{if(!n)return null;const E=await xi(Ye(re,Y.PAYROLL_RUNS,n));if(!E.exists())return null;const p=E.data();return{id:E.id,period_start:mc(p.periodStart??p.period_start),period_end:mc(p.periodEnd??p.period_end),run_date:mc(p.runDate??p.run_date)}},enabled:!!(t&&n)}),{data:d,isLoading:h}=we({queryKey:["payrollItem",n,r],queryFn:async()=>{if(!n||!r)return null;const E=ge(re,Y.PAYROLL_ITEMS),p=async(k,L)=>{const U=await Te(je(E,he(k,"==",n),he(L,"==",r),Ts(1)));return U.empty?null:U.docs[0]},w=await p("payrollRunId","employeeId")??await p("payroll_run_id","employee_id");if(!w)return null;const A=w.data(),P=mc(A.employeeId??A.employee_id??r);let I=null;if(P){const k=await xi(Ye(re,Y.EMPLOYEES,P));if(k.exists()){const L=k.data();I={full_name:mc(L.fullName??L.full_name),employee_number:mc(L.employeeNumber??L.employee_number),position:L.position??null,department:L.department??null,tpin:L.tpin??null,napsa_number:L.napsaNumber??L.napsa_number??null,nhima_number:L.nhimaNumber??L.nhima_number??null,bank_name:L.bankName??L.bank_name??null,bank_account_number:L.bankAccountNumber??L.bank_account_number??null,email:L.email??null}}}return{id:w.id,employee_id:P,basic_salary:ni(A.basicSalary??A.basic_salary),housing_allowance:ni(A.housingAllowance??A.housing_allowance),transport_allowance:ni(A.transportAllowance??A.transport_allowance),other_allowances:ni(A.otherAllowances??A.other_allowances),gross_salary:ni(A.grossSalary??A.gross_salary),napsa_employee:ni(A.napsaEmployee??A.napsa_employee),napsa_employer:ni(A.napsaEmployer??A.napsa_employer),nhima_employee:ni(A.nhimaEmployee??A.nhima_employee),nhima_employer:ni(A.nhimaEmployer??A.nhima_employer),paye:ni(A.paye),advances_deducted:ni(A.advancesDeducted??A.advances_deducted),total_deductions:ni(A.totalDeductions??A.total_deductions),net_salary:ni(A.netSalary??A.net_salary),employees:I}},enabled:!!(t&&n&&r)}),{data:f}=we({queryKey:["payroll-additions",n,r],queryFn:async()=>{if(!n||!r)return[];const E=ge(re,Y.PAYROLL_ADDITIONS);let p=await Te(je(E,he("payrollRunId","==",n),he("employeeId","==",r)));return p.empty&&(p=await Te(je(E,he("payroll_run_id","==",n),he("employee_id","==",r)))),p.docs.map(w=>{const A=w.data();return{id:w.id,type:mc(A.type),name:mc(A.name),amount:ni(A.amount)}})},enabled:!!(t&&n&&r)}),m=()=>{window.print(),Z.success("Print dialog opened")},v=async()=>{if(!(g!=null&&g.email)){Z.error("Employee email not found");return}a(!0);try{if(!n||!r)throw new Error("Invalid payroll context");await rh.sendPayslipEmail({payrollRunId:n,employeeId:r}),Z.success(`Payslip queued for ${g.email}`)}catch{Z.error("Failed to send payslip email")}finally{a(!1)}};if(h)return i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});const g=d==null?void 0:d.employees,y=(f==null?void 0:f.filter(E=>E.type!=="advance"))||[],b=(f==null?void 0:f.filter(E=>E.type==="advance"))||[],x=y.reduce((E,p)=>E+Number(p.amount),0),S=b.reduce((E,p)=>E+Number(p.amount),0),T=Number(d==null?void 0:d.gross_salary)+x,_=Number(d==null?void 0:d.total_deductions)+S,C=Number(d==null?void 0:d.net_salary)-S;return i.jsxs("div",{className:"space-y-6 max-w-3xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between print:hidden",children:[i.jsxs(W,{variant:"ghost",size:"sm",onClick:()=>e(`/payroll/${n}`),children:[i.jsx(fa,{className:"h-4 w-4 mr-2"}),"Back to Payroll Run"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(Zn,{open:o,onOpenChange:l,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(W,{variant:"outline",size:"sm",children:[i.jsx(qw,{className:"h-4 w-4 mr-2"}),"Company Settings"]})}),i.jsxs(Hn,{children:[i.jsxs(Kn,{children:[i.jsx(Gn,{children:"Company Settings"}),i.jsx(od,{children:"Upload your company logo and set your company name"})]}),i.jsx(XM,{})]})]}),i.jsx(W,{variant:"outline",onClick:v,disabled:s||!(g!=null&&g.email),children:s?i.jsxs(i.Fragment,{children:[i.jsx(En,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):i.jsxs(i.Fragment,{children:[i.jsx(qu,{className:"mr-2 h-4 w-4"}),"Email Payslip"]})}),i.jsxs(W,{onClick:m,children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Print / Download"]})]})]}),i.jsxs("div",{id:"payslip-content",className:"bg-card border rounded-lg shadow-lg print:border-0 print:shadow-none",children:[i.jsx("div",{className:"bg-primary text-primary-foreground p-6 rounded-t-lg print:rounded-none",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-primary-foreground/20 p-3 rounded-lg h-16 w-16 flex items-center justify-center overflow-hidden",children:c!=null&&c.logoUrl?i.jsx("img",{src:c.logoUrl,alt:"Company Logo",className:"h-full w-full object-contain"}):i.jsx(Lx,{className:"h-10 w-10"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold",children:(c==null?void 0:c.companyName)||"ZedBooks NGO"}),i.jsx("p",{className:"text-primary-foreground/80 text-sm",children:"Accounting Suite"})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("h2",{className:"text-xl font-bold",children:"PAYSLIP"}),i.jsx("p",{className:"text-primary-foreground/80 text-sm",children:u&&ut(new Date(u.period_start),"MMMM yyyy")})]})]})}),i.jsx("div",{className:"bg-muted/50 px-6 py-3 border-b text-sm",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Pay Period:"}),i.jsxs("span",{className:"font-medium",children:[u&&ut(new Date(u.period_start),"dd MMM yyyy")," - ",u&&ut(new Date(u.period_end),"dd MMM yyyy")]})]})}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-3",children:"Employee Details"}),i.jsx("div",{className:"bg-muted/30 rounded-lg p-4",children:i.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-3 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Name:"}),i.jsx("span",{className:"font-semibold",children:g==null?void 0:g.full_name})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Employee No:"}),i.jsx("span",{className:"font-semibold",children:g==null?void 0:g.employee_number})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Position:"}),i.jsx("span",{className:"font-semibold",children:(g==null?void 0:g.position)||"N/A"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Department:"}),i.jsx("span",{className:"font-semibold",children:(g==null?void 0:g.department)||"N/A"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"TPIN:"}),i.jsx("span",{className:"font-semibold",children:(g==null?void 0:g.tpin)||"N/A"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"NAPSA No:"}),i.jsx("span",{className:"font-semibold",children:(g==null?void 0:g.napsa_number)||"N/A"})]})]})})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-3",children:"Earnings"}),i.jsx("div",{className:"border rounded-lg overflow-hidden",children:i.jsx("table",{className:"w-full text-sm",children:i.jsxs("tbody",{children:[i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"Basic Salary"}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(d==null?void 0:d.basic_salary))})]}),i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"Housing Allowance"}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(d==null?void 0:d.housing_allowance))})]}),i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"Transport Allowance"}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(d==null?void 0:d.transport_allowance))})]}),i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"Other Allowances"}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(d==null?void 0:d.other_allowances))})]}),y.map(E=>i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:E.name}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(E.amount))})]},E.id)),i.jsxs("tr",{className:"bg-primary/5",children:[i.jsx("td",{className:"px-4 py-3 font-semibold",children:"Gross Pay"}),i.jsx("td",{className:"px-4 py-3 text-right font-bold text-primary",children:le(T)})]})]})})})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-3",children:"Deductions"}),i.jsx("div",{className:"border rounded-lg overflow-hidden",children:i.jsx("table",{className:"w-full text-sm",children:i.jsxs("tbody",{children:[i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"NAPSA (5%)"}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(d==null?void 0:d.napsa_employee))})]}),i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"NHIMA (1%)"}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(d==null?void 0:d.nhima_employee))})]}),i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"PAYE"}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(d==null?void 0:d.paye))})]}),Number(d==null?void 0:d.advances_deducted)>0&&i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"Advances (Previous)"}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(d==null?void 0:d.advances_deducted))})]}),b.map(E=>i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:E.name}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(E.amount))})]},E.id)),i.jsxs("tr",{className:"bg-destructive/5",children:[i.jsx("td",{className:"px-4 py-3 font-semibold",children:"Total Deductions"}),i.jsx("td",{className:"px-4 py-3 text-right font-bold text-destructive",children:le(_)})]})]})})})]})]}),i.jsx("div",{className:"bg-primary rounded-lg p-5 text-primary-foreground",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-primary-foreground/80 text-sm",children:"Net Pay"}),i.jsx("p",{className:"text-xs text-primary-foreground/60",children:"Amount payable to employee"})]}),i.jsx("p",{className:"text-3xl font-bold",children:le(C)})]})}),(g==null?void 0:g.bank_name)&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-3",children:"Payment Details"}),i.jsx("div",{className:"bg-muted/30 rounded-lg p-4",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Bank:"}),i.jsx("span",{className:"font-semibold",children:g.bank_name})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Account Number:"}),i.jsx("span",{className:"font-semibold",children:g.bank_account_number})]})]})})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Employer Contributions (for reference only):"}),i.jsxs("div",{className:"flex gap-6 text-xs text-muted-foreground",children:[i.jsxs("span",{children:["NAPSA: ",le(Number(d==null?void 0:d.napsa_employer))]}),i.jsxs("span",{children:["NHIMA: ",le(Number(d==null?void 0:d.nhima_employer))]})]})]})]}),i.jsxs("div",{className:"bg-muted/30 px-6 py-4 rounded-b-lg border-t text-center",children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"This is a computer-generated payslip. Please keep it confidential."}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Generated on ",ut(new Date,"dd MMMM yyyy 'at' HH:mm")]})]})]})]})}function KJe(){const{user:t}=ot(),e=$n(),{id:n}=Wh(),r=en(),[s,a]=N.useState(!1),{data:o,isLoading:l}=we({queryKey:["payrollRun",n],queryFn:async()=>{if(!n)return null;const y=await xi(Ye(re,Y.PAYROLL_RUNS,n));if(!y.exists())return null;const b=y.data();return{id:y.id,status:b.status??b.payrollStatus??"draft",period_start:String(b.periodStart??b.period_start??""),period_end:String(b.periodEnd??b.period_end??""),approved_at:b.approvedAt??b.approved_at??null,total_gross:Number(b.totalGross??b.total_gross??0),total_deductions:Number(b.totalDeductions??b.total_deductions??0),total_net:Number(b.totalNet??b.total_net??0),notes:b.notes??null}},enabled:!!(t&&n)}),{data:c}=we({queryKey:["payrollItems",n],queryFn:async()=>{if(!n)return[];const y=ge(re,Y.PAYROLL_ITEMS);let b=await Te(je(y,he("payrollRunId","==",n)));b.empty&&(b=await Te(je(y,he("payroll_run_id","==",n))));const x=b.docs.map(C=>({id:C.id,row:C.data()})),S=Array.from(new Set(x.map(({row:C})=>String(C.employeeId??C.employee_id??"")).filter(Boolean))),T=await Promise.all(S.map(async C=>{const E=await xi(Ye(re,Y.EMPLOYEES,C));return{employeeDocId:C,snap:E}})),_=new Map;return T.forEach(({employeeDocId:C,snap:E})=>{if(!E.exists())return;const p=E.data();_.set(C,{id:E.id,full_name:String(p.fullName??p.full_name??""),employee_number:String(p.employeeNumber??p.employee_number??""),position:p.position??null,department:p.department??null,email:p.email??null,bank_account_number:p.bankAccountNumber??p.bank_account_number??null})}),x.map(({id:C,row:E})=>{const p=String(E.employeeId??E.employee_id??"");return{id:C,employee_id:p,basic_salary:Number(E.basicSalary??E.basic_salary??0),housing_allowance:Number(E.housingAllowance??E.housing_allowance??0),transport_allowance:Number(E.transportAllowance??E.transport_allowance??0),other_allowances:Number(E.otherAllowances??E.other_allowances??0),gross_salary:Number(E.grossSalary??E.gross_salary??0),napsa_employee:Number(E.napsaEmployee??E.napsa_employee??0),nhima_employee:Number(E.nhimaEmployee??E.nhima_employee??0),paye:Number(E.paye??0),advances_deducted:Number(E.advancesDeducted??E.advances_deducted??0),total_deductions:Number(E.totalDeductions??E.total_deductions??0),net_salary:Number(E.netSalary??E.net_salary??0),employees:_.get(p)??null}})},enabled:!!(t&&n)}),{data:u}=we({queryKey:["payrollAdditions",n],queryFn:async()=>{if(!n)return[];const y=ge(re,Y.PAYROLL_ADDITIONS);let b=await Te(je(y,he("payrollRunId","==",n)));b.empty&&(b=await Te(je(y,he("payroll_run_id","==",n))));const x=b.docs.map(C=>({id:C.id,row:C.data()})),S=Array.from(new Set(x.map(({row:C})=>String(C.employeeId??C.employee_id??"")).filter(Boolean))),T=await Promise.all(S.map(async C=>{const E=await xi(Ye(re,Y.EMPLOYEES,C));return{employeeDocId:C,snap:E}})),_=new Map;return T.forEach(({employeeDocId:C,snap:E})=>{if(!E.exists())return;const p=E.data();_.set(C,{full_name:String(p.fullName??p.full_name??""),employee_number:String(p.employeeNumber??p.employee_number??"")})}),x.map(({id:C,row:E})=>{const p=String(E.employeeId??E.employee_id??"");return{id:C,type:String(E.type??""),name:String(E.name??""),amount:Number(E.amount??0),employees:_.get(p)??null}})},enabled:!!(t&&n)}),d=Xe({mutationFn:async()=>{if(!n||!t)throw new Error("Not authenticated");await Dl(Ye(re,Y.PAYROLL_RUNS,n),{status:"approved",approvedAt:new Date().toISOString(),approvedBy:t.id,updatedAt:Ce()})},onSuccess:()=>{r.invalidateQueries({queryKey:["payrollRun",n]}),Z.success("Payroll approved successfully!")},onError:()=>{Z.error("Failed to approve payroll")}}),h=Xe({mutationFn:async()=>{if(!n)throw new Error("Payroll run not found");await Dl(Ye(re,Y.PAYROLL_RUNS,n),{status:"draft",updatedAt:Ce()})},onSuccess:()=>{r.invalidateQueries({queryKey:["payrollRun",n]}),Z.success("Payroll rejected and returned to draft"),e("/payroll")},onError:()=>{Z.error("Failed to reject payroll")}}),f=async()=>{if(!c||c.length===0){Z.error("No payroll items to email");return}const y=c.filter(S=>{var T;return!!((T=S.employees)!=null&&T.email)});if(y.length===0){Z.error("No employees have email addresses configured");return}a(!0);let b=0,x=0;for(const S of y)try{if(!n)continue;await rh.sendPayslipEmail({payrollRunId:n,employeeId:S.employee_id}),b++}catch{x++}a(!1),b>0&&Z.success(`Successfully sent ${b} payslip email(s)`),x>0&&Z.error(`Failed to send ${x} email(s)`)};if(l)return i.jsx("div",{children:"Loading..."});if(!o)return i.jsx("div",{children:"Payroll run not found"});const m=o.status==="approved"||o.status==="completed",v=(u==null?void 0:u.reduce((y,b)=>y+(b.type!=="advance"?Number(b.amount):0),0))||0,g=(u==null?void 0:u.reduce((y,b)=>y+(b.type==="advance"?Number(b.amount):0),0))||0;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(W,{variant:"ghost",size:"sm",onClick:()=>e("/payroll"),children:[i.jsx(fa,{className:"h-4 w-4 mr-2"}),"Back"]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Payroll Approval"}),i.jsxs("p",{className:"text-muted-foreground",children:["Review and approve payroll for"," ",ut(new Date(o.period_start),"dd MMM")," -"," ",ut(new Date(o.period_end),"dd MMM yyyy")]})]}),m&&i.jsxs(W,{onClick:f,disabled:s,children:[s?i.jsx(En,{className:"h-4 w-4 mr-2 animate-spin"}):i.jsx(qu,{className:"h-4 w-4 mr-2"}),s?"Sending...":"Email All Payslips"]})]}),m&&i.jsxs("div",{className:"bg-green-100 dark:bg-green-900/30 border border-green-200 dark:border-green-800 rounded-lg p-4 flex items-center gap-3",children:[i.jsx(Vo,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-green-800 dark:text-green-200",children:"This payroll has been approved"}),o.approved_at&&i.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400",children:["Approved on ",ut(new Date(o.approved_at),"dd MMM yyyy 'at' HH:mm")]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(Q,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(dt,{children:"Employees"}),i.jsx(te,{className:"text-2xl",children:(c==null?void 0:c.length)||0})]})}),i.jsx(Q,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(dt,{children:"Total Gross Pay"}),i.jsx(te,{className:"text-2xl text-primary",children:le(Number(o.total_gross||0))})]})}),i.jsx(Q,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(dt,{children:"Total Deductions"}),i.jsx(te,{className:"text-2xl text-destructive",children:le(Number(o.total_deductions||0))})]})}),i.jsx(Q,{className:"bg-primary/5 border-primary/20",children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(dt,{children:"Total Net Pay"}),i.jsx(te,{className:"text-2xl text-primary",children:le(Number(o.total_net||0))})]})})]}),u&&u.length>0&&i.jsxs(Q,{children:[i.jsxs(ee,{children:[i.jsx(te,{children:"Payroll Additions & Advances"}),i.jsx(dt,{children:"Custom earnings, bonuses, overtime, and advance deductions for this payroll run"})]}),i.jsxs(ne,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Additional Earnings"}),i.jsx("p",{className:"text-xl font-bold text-primary",children:le(v)})]}),i.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Advance Deductions"}),i.jsx("p",{className:"text-xl font-bold text-destructive",children:le(g)})]}),i.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Additions"}),i.jsx("p",{className:"text-xl font-bold",children:u.length})]})]}),i.jsx("div",{className:"border rounded-lg",children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Employee"}),i.jsx(q,{children:"Type"}),i.jsx(q,{children:"Name"}),i.jsx(q,{className:"text-right",children:"Amount"})]})}),i.jsx(Ut,{children:u.map(y=>{var b,x;return i.jsxs(ve,{children:[i.jsx(V,{children:i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:(b=y.employees)==null?void 0:b.full_name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:(x=y.employees)==null?void 0:x.employee_number})]})}),i.jsx(V,{children:i.jsx(Ve,{variant:y.type==="advance"?"destructive":"default",children:y.type})}),i.jsx(V,{children:y.name}),i.jsxs(V,{className:`text-right font-medium ${y.type==="advance"?"text-destructive":"text-primary"}`,children:[y.type==="advance"?"-":"",le(Number(y.amount))]})]},y.id)})})]})})]})]}),i.jsxs(Q,{children:[i.jsxs(ee,{children:[i.jsx(te,{children:"Employee Breakdown"}),i.jsx(dt,{children:"Review individual payroll calculations"})]}),i.jsx(ne,{children:i.jsx("div",{className:"border rounded-lg",children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Employee"}),i.jsx(q,{children:"Department"}),i.jsx(q,{className:"text-right",children:"Gross"}),i.jsx(q,{className:"text-right",children:"PAYE"}),i.jsx(q,{className:"text-right",children:"NAPSA"}),i.jsx(q,{className:"text-right",children:"NHIMA"}),i.jsx(q,{className:"text-right",children:"Advances"}),i.jsx(q,{className:"text-right",children:"Total Deductions"}),i.jsx(q,{className:"text-right",children:"Net Pay"})]})}),i.jsx(Ut,{children:c==null?void 0:c.map(y=>{var b,x,S;return i.jsxs(ve,{children:[i.jsx(V,{children:i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:((b=y.employees)==null?void 0:b.full_name)||"Unknown"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:((x=y.employees)==null?void 0:x.employee_number)||"-"})]})}),i.jsx(V,{children:((S=y.employees)==null?void 0:S.department)||"-"}),i.jsx(V,{className:"text-right",children:le(Number(y.gross_salary))}),i.jsx(V,{className:"text-right",children:le(Number(y.paye))}),i.jsx(V,{className:"text-right",children:le(Number(y.napsa_employee))}),i.jsx(V,{className:"text-right",children:le(Number(y.nhima_employee))}),i.jsx(V,{className:"text-right text-destructive",children:le(Number(y.advances_deducted||0))}),i.jsx(V,{className:"text-right text-destructive",children:le(Number(y.total_deductions))}),i.jsx(V,{className:"text-right font-medium",children:le(Number(y.net_salary))})]},y.id)})})]})})})]}),o.notes&&i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"Notes"})}),i.jsx(ne,{children:i.jsx("p",{className:"text-muted-foreground",children:o.notes})})]}),!m&&i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsxs(Fh,{children:[i.jsx(Nx,{asChild:!0,children:i.jsxs(W,{variant:"outline",className:"text-destructive border-destructive",children:[i.jsx(s8,{className:"h-4 w-4 mr-2"}),"Reject"]})}),i.jsxs(Ou,{children:[i.jsxs(Mu,{children:[i.jsx(Lu,{children:"Reject Payroll?"}),i.jsx($u,{children:"This will return the payroll to draft status for corrections. The payroll will need to be resubmitted for approval."})]}),i.jsxs(Du,{children:[i.jsx(Vu,{children:"Cancel"}),i.jsx(Fu,{onClick:()=>h.mutate(),className:"bg-destructive text-destructive-foreground",children:"Reject Payroll"})]})]})]}),i.jsxs(Fh,{children:[i.jsx(Nx,{asChild:!0,children:i.jsxs(W,{children:[i.jsx(Vo,{className:"h-4 w-4 mr-2"}),"Approve Payroll"]})}),i.jsxs(Ou,{children:[i.jsxs(Mu,{children:[i.jsx(Lu,{children:"Approve Payroll?"}),i.jsxs($u,{children:["By approving this payroll, you confirm that all calculations are correct and payments can proceed.",i.jsx("br",{}),i.jsx("br",{}),i.jsxs("strong",{children:["Total Net Pay: ",le(Number(o.total_net||0))]})]})]}),i.jsxs(Du,{children:[i.jsx(Vu,{children:"Cancel"}),i.jsx(Fu,{onClick:()=>d.mutate(),children:"Approve Payroll"})]})]})]})]})]})}const GJe=Ju({employee_id:ze().min(1,"Employee is required"),amount:ze().min(1,"Amount is required"),date_given:ze().min(1,"Date given is required"),months_to_repay:ze().min(1,"Months to repay is required"),reason:ze().optional()});function YJe(){const{user:t}=ot(),[e,n]=N.useState(!1),r=en(),s=Xu({resolver:Zu(GJe),defaultValues:{employee_id:"",amount:"",date_given:ut(new Date,"yyyy-MM-dd"),months_to_repay:"1",reason:""}}),a=s.watch("amount"),o=s.watch("months_to_repay"),l=a&&o?(parseFloat(a)/parseInt(o)).toFixed(2):"0.00",{data:c}=we({queryKey:["advances-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const _=await Fe.getPrimaryMembershipByUser(t.id);return(_==null?void 0:_.companyId)??null},enabled:!!t}),{data:u}=we({queryKey:["employees-active"],queryFn:async()=>{if(!c)return[];const _=ge(re,Y.EMPLOYEES);return(await Te(je(_,he("companyId","==",c)))).docs.map(E=>{const p=E.data();return{id:E.id,full_name:String(p.fullName??p.full_name??""),employee_number:p.employeeNumber??p.employee_number??null,department:p.department??null,employment_status:String(p.employmentStatus??p.employment_status??"active")}}).filter(E=>E.employment_status==="active").sort((E,p)=>E.full_name.localeCompare(p.full_name))},enabled:!!c}),{data:d,isLoading:h}=we({queryKey:["advances",c],queryFn:async()=>{if(!c)return[];const _=ge(re,Y.ADVANCES),E=(await Te(je(_,he("companyId","==",c)))).docs.map(A=>{var L;const P=A.data(),I=P.dateGiven??P.date_given,k=typeof I=="string"?I:((L=I==null?void 0:I.toDate)==null?void 0:L.call(I).toISOString().slice(0,10))??"";return{id:A.id,employee_id:String(P.employeeId??P.employee_id??""),amount:Number(P.amount??0),date_given:k,reason:P.reason??null,status:String(P.status??"pending"),months_to_repay:Number(P.monthsToRepay??P.months_to_repay??1),monthly_deduction:Number(P.monthlyDeduction??P.monthly_deduction??0),remaining_balance:Number(P.remainingBalance??P.remaining_balance??P.amount??0),months_deducted:Number(P.monthsDeducted??P.months_deducted??0),created_at:String(P.createdAt??P.created_at??"")}}),p=Array.from(new Set(E.map(A=>A.employee_id).filter(Boolean))),w=new Map;if(p.length>0){const A=ge(re,Y.EMPLOYEES);(await Te(je(A,he(Ha(),"in",p.slice(0,30))))).docs.forEach(I=>{const k=I.data();w.set(I.id,{full_name:String(k.fullName??k.full_name??""),employee_number:k.employeeNumber??k.employee_number??null,department:k.department??null})})}return E.map(A=>({...A,employees:w.get(A.employee_id)??null})).sort((A,P)=>String(P.created_at).localeCompare(String(A.created_at)))},enabled:!!c}),f=Xe({mutationFn:async _=>{if(!t||!c)throw new Error("Not authenticated");const C=parseFloat(_.amount),E=parseInt(_.months_to_repay),p=C/E;await es(ge(re,Y.ADVANCES),{companyId:c,employeeId:_.employee_id,amount:C,dateGiven:_.date_given,reason:_.reason||null,status:"pending",monthsToRepay:E,monthlyDeduction:p,remainingBalance:C,monthsDeducted:0,createdBy:t.id,createdAt:Ce(),updatedAt:Ce()})},onSuccess:()=>{r.invalidateQueries({queryKey:["advances",c]}),Z.success("Advance recorded successfully"),n(!1),s.reset()},onError:_=>{Z.error("Failed to record advance: "+_.message)}}),m=Xe({mutationFn:async({id:_,status:C})=>{await xr(Ye(re,Y.ADVANCES,_),{status:C,updatedAt:Ce()},{merge:!0})},onSuccess:()=>{r.invalidateQueries({queryKey:["advances",c]}),Z.success("Advance status updated")},onError:()=>{Z.error("Failed to update status")}}),v=Xe({mutationFn:async _=>{const C=(_.months_deducted||0)+1,E=Number(_.remaining_balance)-Number(_.monthly_deduction),p=C>=_.months_to_repay;await xr(Ye(re,Y.ADVANCES,_.id),{monthsDeducted:C,remainingBalance:Math.max(0,E),status:p?"deducted":"pending",updatedAt:Ce()},{merge:!0})},onSuccess:()=>{r.invalidateQueries({queryKey:["advances",c]}),Z.success("Deduction recorded")},onError:()=>{Z.error("Failed to record deduction")}}),g=_=>{f.mutate(_)},y=_=>{switch(_){case"pending":return i.jsxs(Ve,{variant:"outline",className:"gap-1",children:[i.jsx(Di,{className:"h-3 w-3"})," Pending"]});case"deducted":return i.jsxs(Ve,{variant:"default",className:"gap-1 bg-green-600",children:[i.jsx(Vo,{className:"h-3 w-3"})," Fully Repaid"]});case"cancelled":return i.jsxs(Ve,{variant:"destructive",className:"gap-1",children:[i.jsx(s8,{className:"h-3 w-3"})," Cancelled"]});default:return i.jsx(Ve,{variant:"secondary",children:_})}},b=(d==null?void 0:d.reduce((_,C)=>_+Number(C.amount),0))||0,x=(d==null?void 0:d.filter(_=>_.status==="pending"))||[],S=x.reduce((_,C)=>_+Number(C.remaining_balance||C.amount),0),T=(d==null?void 0:d.filter(_=>_.status==="deducted").reduce((_,C)=>_+Number(C.amount),0))||0;return h?i.jsx("div",{children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Employee Advances"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage salary advances and repayment schedules"})]}),i.jsxs(W,{onClick:()=>n(!0),children:[i.jsx(_n,{className:"mr-2 h-4 w-4"}),"Record Advance"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(Q,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(dt,{children:"Total Advances"}),i.jsx(te,{className:"text-2xl",children:(d==null?void 0:d.length)||0})]})}),i.jsx(Q,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(dt,{children:"Total Amount Issued"}),i.jsx(te,{className:"text-2xl text-primary",children:le(b)})]})}),i.jsxs(Q,{className:"border-amber-200 dark:border-amber-800",children:[i.jsxs(ee,{className:"pb-2",children:[i.jsx(dt,{children:"Outstanding Balance"}),i.jsx(te,{className:"text-2xl text-amber-600",children:le(S)})]}),i.jsx(ne,{children:i.jsxs("p",{className:"text-xs text-muted-foreground",children:[x.length," active advance(s)"]})})]}),i.jsx(Q,{className:"border-green-200 dark:border-green-800",children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(dt,{children:"Fully Repaid"}),i.jsx(te,{className:"text-2xl text-green-600",children:le(T)})]})})]}),i.jsxs(Q,{children:[i.jsxs(ee,{children:[i.jsxs(te,{className:"flex items-center gap-2",children:[i.jsx($a,{className:"h-5 w-5"}),"All Advances"]}),i.jsx(dt,{children:"View and manage employee salary advances with repayment tracking"})]}),i.jsx(ne,{children:i.jsx("div",{className:"rounded-lg border",children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Employee"}),i.jsx(q,{className:"text-right",children:"Total Amount"}),i.jsx(q,{children:"Repayment Schedule"}),i.jsx(q,{children:"Progress"}),i.jsx(q,{className:"text-right",children:"Remaining"}),i.jsx(q,{children:"Status"}),i.jsx(q,{children:"Actions"})]})}),i.jsxs(Ut,{children:[d==null?void 0:d.map(_=>{const C=_.employees,E=_.months_deducted||0,p=_.months_to_repay||1,w=_.remaining_balance??_.amount,A=E/p*100;return i.jsxs(ve,{children:[i.jsx(V,{children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:C==null?void 0:C.full_name}),i.jsx("div",{className:"text-sm text-muted-foreground",children:C==null?void 0:C.employee_number}),i.jsx("div",{className:"text-xs text-muted-foreground",children:ut(new Date(_.date_given),"dd MMM yyyy")})]})}),i.jsx(V,{className:"text-right font-medium",children:le(Number(_.amount))}),i.jsx(V,{children:i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[i.jsx($m,{className:"h-3 w-3 text-muted-foreground"}),p," month",p>1?"s":""]}),i.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[i.jsx(Ja,{className:"h-3 w-3"}),le(Number(_.monthly_deduction||_.amount)),"/month"]})]})}),i.jsx(V,{children:i.jsxs("div",{className:"space-y-1 min-w-[120px]",children:[i.jsx(mu,{value:A,className:"h-2"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[E," of ",p," payments"]})]})}),i.jsx(V,{className:"text-right font-medium text-amber-600",children:le(Number(w))}),i.jsx(V,{children:y(_.status)}),i.jsx(V,{children:_.status==="pending"&&i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs(Fh,{children:[i.jsx(Nx,{asChild:!0,children:i.jsx(W,{size:"sm",variant:"outline",children:"Record Deduction"})}),i.jsxs(Ou,{children:[i.jsxs(Mu,{children:[i.jsx(Lu,{children:"Record Monthly Deduction?"}),i.jsxs($u,{children:["This will record a deduction of ",le(Number(_.monthly_deduction||_.amount))," for ",C==null?void 0:C.full_name,".",i.jsx("br",{}),i.jsx("br",{}),i.jsx("strong",{children:"Current Progress:"})," ",E," of ",p," payments",i.jsx("br",{}),i.jsx("strong",{children:"Remaining after this:"})," ",le(Math.max(0,Number(w)-Number(_.monthly_deduction||_.amount)))]})]}),i.jsxs(Du,{children:[i.jsx(Vu,{children:"Cancel"}),i.jsx(Fu,{onClick:()=>v.mutate(_),children:"Record Deduction"})]})]})]}),i.jsxs(Fh,{children:[i.jsx(Nx,{asChild:!0,children:i.jsx(W,{size:"sm",variant:"ghost",className:"text-destructive",children:"Cancel"})}),i.jsxs(Ou,{children:[i.jsxs(Mu,{children:[i.jsx(Lu,{children:"Cancel Advance?"}),i.jsx($u,{children:"This will cancel the advance. This action cannot be undone."})]}),i.jsxs(Du,{children:[i.jsx(Vu,{children:"Keep"}),i.jsx(Fu,{className:"bg-destructive text-destructive-foreground",onClick:()=>m.mutate({id:_.id,status:"cancelled"}),children:"Cancel Advance"})]})]})]})]})})]},_.id)}),(d==null?void 0:d.length)===0&&i.jsx(ve,{children:i.jsxs(V,{colSpan:7,className:"text-center py-12",children:[i.jsx($a,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),i.jsx("h3",{className:"text-lg font-medium",children:"No advances recorded"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Start by recording an employee advance"}),i.jsxs(W,{onClick:()=>n(!0),children:[i.jsx(_n,{className:"h-4 w-4 mr-2"}),"Record Advance"]})]})})]})]})})})]}),i.jsx(Zn,{open:e,onOpenChange:n,children:i.jsxs(Hn,{className:"max-w-md",children:[i.jsxs(Kn,{children:[i.jsx(Gn,{children:"Record Employee Advance"}),i.jsx(od,{children:"Enter the advance details and repayment schedule"})]}),i.jsx(d1,{...s,children:i.jsxs("form",{onSubmit:s.handleSubmit(g),className:"space-y-4",children:[i.jsx(rt,{control:s.control,name:"employee_id",render:({field:_})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Employee"}),i.jsxs(Ct,{onValueChange:_.onChange,value:_.value,children:[i.jsx(nt,{children:i.jsx(Et,{children:i.jsx(Pt,{placeholder:"Select employee"})})}),i.jsx(At,{children:u==null?void 0:u.map(C=>i.jsxs(ye,{value:C.id,children:[C.full_name," (",C.employee_number,")"]},C.id))})]}),i.jsx(it,{})]})}),i.jsx(rt,{control:s.control,name:"amount",render:({field:_})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Total Amount (ZMW)"}),i.jsx(nt,{children:i.jsx(G,{type:"number",step:"0.01",placeholder:"0.00",..._})}),i.jsx(it,{})]})}),i.jsx(rt,{control:s.control,name:"date_given",render:({field:_})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Date Given"}),i.jsx(nt,{children:i.jsx(G,{type:"date",..._})}),i.jsx(it,{})]})}),i.jsx(rt,{control:s.control,name:"months_to_repay",render:({field:_})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Months to Repay"}),i.jsxs(Ct,{onValueChange:_.onChange,value:_.value,children:[i.jsx(nt,{children:i.jsx(Et,{children:i.jsx(Pt,{placeholder:"Select months"})})}),i.jsx(At,{children:[1,2,3,4,5,6,9,12].map(C=>i.jsxs(ye,{value:C.toString(),children:[C," month",C>1?"s":""]},C))})]}),i.jsxs(ah,{children:["Monthly deduction: ",i.jsx("strong",{children:le(parseFloat(l))})]}),i.jsx(it,{})]})}),i.jsx(rt,{control:s.control,name:"reason",render:({field:_})=>i.jsxs(tt,{children:[i.jsx(st,{children:"Reason (Optional)"}),i.jsx(nt,{children:i.jsx(hr,{placeholder:"Enter reason for advance",..._})}),i.jsx(it,{})]})}),i.jsxs(p1,{children:[i.jsx(W,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),i.jsx(W,{type:"submit",disabled:f.isPending,children:f.isPending?"Recording...":"Record Advance"})]})]})})]})})]})}const Y6=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},QJe=t=>{if(!t)return"";if(typeof t=="string")return t.slice(0,10);if(t instanceof Date)return t.toISOString().slice(0,10);if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString().slice(0,10)}return""},xf=t=>{const e=Number(t);return Number.isFinite(e)?e:0},XJe=t=>t==null?"":String(t).replaceAll('"','""'),OA=(t,e,n)=>{const r=[t,...e].map(l=>l.map(c=>`"${XJe(c)}"`).join(",")).join(`
`),s=new Blob([r],{type:"text/csv"}),a=window.URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download=n,o.click(),window.URL.revokeObjectURL(a)};function ZJe(){var S,T;const{user:t}=ot(),[e,n]=N.useState(ut(new Date,"yyyy-MM")),r=we({queryKey:["zra-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const _=await Fe.getPrimaryMembershipByUser(t.id);return(_==null?void 0:_.companyId)??null},enabled:!!t}),s=r.data??null,a=`${e}-01`,o=`${e}-31`,l=we({queryKey:["payroll-runs-zra",s,e],queryFn:async()=>{if(!s)return[];const _=ge(re,Y.PAYROLL_RUNS);return(await Te(je(_,he("companyId","==",s)))).docs.map(E=>{const p=E.data();return{id:E.id,runDate:QJe(p.runDate??p.run_date)}}).filter(E=>E.runDate>=a&&E.runDate<=o).sort((E,p)=>p.runDate.localeCompare(E.runDate))},enabled:!!s}),c=we({queryKey:["payroll-items-zra",s,e,(S=l.data)==null?void 0:S.map(_=>_.id).join(",")],queryFn:async()=>{if(!s||!l.data||l.data.length===0)return[];const _=l.data.map(I=>I.id),C=ge(re,Y.PAYROLL_ITEMS),E=Y6(_,30),w=(await Promise.all(E.map(I=>Te(je(C,he("payrollRunId","in",I)))))).flatMap(I=>I.docs.map(k=>{const L=k.data();return{id:k.id,employeeId:String(L.employeeId??L.employee_id??""),payrollRunId:String(L.payrollRunId??L.payroll_run_id??""),grossSalary:xf(L.grossSalary??L.gross_salary),paye:xf(L.paye),napsaEmployee:xf(L.napsaEmployee??L.napsa_employee),napsaEmployer:xf(L.napsaEmployer??L.napsa_employer),nhimaEmployee:xf(L.nhimaEmployee??L.nhima_employee),nhimaEmployer:xf(L.nhimaEmployer??L.nhima_employer)}})),A=Array.from(new Set(w.map(I=>I.employeeId).filter(Boolean))),P=new Map;if(A.length>0){const I=ge(re,Y.EMPLOYEES),k=Y6(A,30);(await Promise.all(k.map(U=>Te(je(I,he(Ha(),"in",U)))))).forEach(U=>{U.docs.forEach(z=>{const O=z.data();P.set(z.id,{id:z.id,fullName:String(O.fullName??O.full_name??""),employeeNumber:O.employeeNumber??O.employee_number??null,tpin:O.tpin??null,napsaNumber:O.napsaNumber??O.napsa_number??null,nhimaNumber:O.nhimaNumber??O.nhima_number??null})})})}return w.map(I=>({...I,employee:P.get(I.employeeId)??null}))},enabled:!!s&&!!l.data&&(((T=l.data)==null?void 0:T.length)??0)>0}),u=c.data??[],d=r.isLoading||l.isLoading||c.isLoading,h=N.useMemo(()=>u.reduce((_,C)=>_+C.paye,0),[u]),f=N.useMemo(()=>u.reduce((_,C)=>_+C.napsaEmployee,0),[u]),m=N.useMemo(()=>u.reduce((_,C)=>_+C.napsaEmployer,0),[u]),v=N.useMemo(()=>u.reduce((_,C)=>_+C.nhimaEmployee,0),[u]),g=N.useMemo(()=>u.reduce((_,C)=>_+C.nhimaEmployer,0),[u]),y=()=>{u.length!==0&&OA(["TPIN","Employee Number","Employee Name","Gross Salary","PAYE"],u.map(_=>{var C,E,p;return[((C=_.employee)==null?void 0:C.tpin)||"N/A",((E=_.employee)==null?void 0:E.employeeNumber)||"",((p=_.employee)==null?void 0:p.fullName)||"",_.grossSalary,_.paye]}),`PAYE-Report-${e}.csv`)},b=()=>{u.length!==0&&OA(["NAPSA Number","Employee Number","Employee Name","Gross Salary","NAPSA Employee (5%)","NAPSA Employer (5%)","Total NAPSA"],u.map(_=>{var C,E,p;return[((C=_.employee)==null?void 0:C.napsaNumber)||"N/A",((E=_.employee)==null?void 0:E.employeeNumber)||"",((p=_.employee)==null?void 0:p.fullName)||"",_.grossSalary,_.napsaEmployee,_.napsaEmployer,_.napsaEmployee+_.napsaEmployer]}),`NAPSA-Report-${e}.csv`)},x=()=>{u.length!==0&&OA(["NHIMA Number","Employee Number","Employee Name","Gross Salary","NHIMA Employee (1%)","NHIMA Employer (1%)","Total NHIMA"],u.map(_=>{var C,E,p;return[((C=_.employee)==null?void 0:C.nhimaNumber)||"N/A",((E=_.employee)==null?void 0:E.employeeNumber)||"",((p=_.employee)==null?void 0:p.fullName)||"",_.grossSalary,_.nhimaEmployee,_.nhimaEmployer,_.nhimaEmployee+_.nhimaEmployer]}),`NHIMA-Report-${e}.csv`)};return d?i.jsx("div",{children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"ZRA Compliance Reports"}),i.jsx("p",{className:"text-muted-foreground",children:"Generate statutory compliance reports for ZRA, NAPSA, and NHIMA"})]}),i.jsxs("div",{className:"max-w-xs",children:[i.jsx(J,{children:"Select Month"}),i.jsx(G,{type:"month",value:e,onChange:_=>n(_.target.value)})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{className:"text-sm font-medium",children:"Total PAYE"})}),i.jsxs(ne,{children:[i.jsx("div",{className:"text-2xl font-bold",children:le(h)}),i.jsxs(W,{className:"mt-4 w-full",variant:"outline",onClick:y,disabled:u.length===0,children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export PAYE Report"]})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{className:"text-sm font-medium",children:"Total NAPSA"})}),i.jsxs(ne,{children:[i.jsx("div",{className:"text-2xl font-bold",children:le(f+m)}),i.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Employee: ",le(f)," | Employer: ",le(m)]}),i.jsxs(W,{className:"mt-4 w-full",variant:"outline",onClick:b,disabled:u.length===0,children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export NAPSA Report"]})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{className:"text-sm font-medium",children:"Total NHIMA"})}),i.jsxs(ne,{children:[i.jsx("div",{className:"text-2xl font-bold",children:le(v+g)}),i.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Employee: ",le(v)," | Employer: ",le(g)]}),i.jsxs(W,{className:"mt-4 w-full",variant:"outline",onClick:x,disabled:u.length===0,children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export NHIMA Report"]})]})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"Employee Details"})}),i.jsx(ne,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Employee"}),i.jsx(q,{children:"TPIN"}),i.jsx(q,{children:"NAPSA No."}),i.jsx(q,{children:"NHIMA No."}),i.jsx(q,{children:"Gross"}),i.jsx(q,{children:"PAYE"}),i.jsx(q,{children:"NAPSA"}),i.jsx(q,{children:"NHIMA"})]})}),i.jsxs(Ut,{children:[u.map(_=>{var C,E,p,w,A;return i.jsxs(ve,{children:[i.jsx(V,{children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:((C=_.employee)==null?void 0:C.fullName)||"Unknown Employee"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:((E=_.employee)==null?void 0:E.employeeNumber)||"-"})]})}),i.jsx(V,{className:"text-sm",children:((p=_.employee)==null?void 0:p.tpin)||"N/A"}),i.jsx(V,{className:"text-sm",children:((w=_.employee)==null?void 0:w.napsaNumber)||"N/A"}),i.jsx(V,{className:"text-sm",children:((A=_.employee)==null?void 0:A.nhimaNumber)||"N/A"}),i.jsx(V,{children:le(_.grossSalary)}),i.jsx(V,{children:le(_.paye)}),i.jsx(V,{children:le(_.napsaEmployee)}),i.jsx(V,{children:le(_.nhimaEmployee)})]},_.id)}),u.length===0&&i.jsx(ve,{children:i.jsx(V,{colSpan:8,className:"text-center text-muted-foreground",children:"No payroll data found for the selected month"})})]})]})})]})]})}function JJe(){const t=$n(),[e,n]=N.useState(""),[r,s]=N.useState(""),[a,o]=N.useState(null),l=()=>{const u=Number(r)||0;if(u<=0)return;const d=UZ(u),h=zZ(u),f=qZ(u),m=d+h.employee+f.employee,v=u-m,g=u+h.employer+f.employer;o({paye:d,napsaEmployee:h.employee,napsaEmployer:h.employer,nhimaEmployee:f.employee,nhimaEmployer:f.employer,totalDeductions:m,netSalary:v,employerCost:g})},c=[{gross:5e3,description:"Below first threshold"},{gross:6e3,description:"In second band"},{gross:8e3,description:"In third band"},{gross:12e3,description:"In fourth band"},{gross:45e3,description:"High income example"}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(W,{variant:"ghost",size:"sm",onClick:()=>t("/dashboard"),children:[i.jsx(fa,{className:"h-4 w-4 mr-2"}),"Back"]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Tax Calculator"}),i.jsx("p",{className:"text-muted-foreground",children:"Calculate PAYE, NAPSA, NHIMA, and net salary"})]})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[i.jsxs(Q,{children:[i.jsxs(ee,{children:[i.jsxs(te,{className:"flex items-center gap-2",children:[i.jsx(fv,{className:"h-5 w-5"}),"Calculate Taxes"]}),i.jsx(dt,{children:"Enter salary details to see tax breakdown"})]}),i.jsxs(ne,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"basicSalary",children:"Basic Salary (ZMW)"}),i.jsx(G,{id:"basicSalary",type:"number",step:"0.01",placeholder:"Enter basic salary",value:e,onChange:u=>n(u.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"grossSalary",children:"Gross Salary (ZMW)"}),i.jsx(G,{id:"grossSalary",type:"number",step:"0.01",placeholder:"Enter gross salary",value:r,onChange:u=>s(u.target.value)})]}),i.jsx(W,{onClick:l,className:"w-full",children:"Calculate"}),a&&i.jsxs("div",{className:"mt-6 space-y-4 pt-4 border-t",children:[i.jsx("h3",{className:"font-semibold",children:"Results"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"PAYE Tax:"}),i.jsx("span",{className:"font-medium",children:le(a.paye)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"NAPSA (Employee):"}),i.jsx("span",{className:"font-medium",children:le(a.napsaEmployee)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"NHIMA (Employee):"}),i.jsx("span",{className:"font-medium",children:le(a.nhimaEmployee)})]}),i.jsxs("div",{className:"flex justify-between text-sm font-semibold pt-2 border-t",children:[i.jsx("span",{children:"Total Deductions:"}),i.jsx("span",{children:le(a.totalDeductions)})]}),i.jsxs("div",{className:"flex justify-between text-lg font-bold pt-2 border-t",children:[i.jsx("span",{children:"Net Salary:"}),i.jsx("span",{className:"text-primary",children:le(a.netSalary)})]})]}),i.jsxs("div",{className:"mt-4 pt-4 border-t space-y-2",children:[i.jsx("h4",{className:"font-semibold text-sm",children:"Employer Contributions"}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"NAPSA (Employer):"}),i.jsx("span",{className:"font-medium",children:le(a.napsaEmployer)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"NHIMA (Employer):"}),i.jsx("span",{className:"font-medium",children:le(a.nhimaEmployer)})]}),i.jsxs("div",{className:"flex justify-between text-sm font-semibold pt-2 border-t",children:[i.jsx("span",{children:"Total Employer Cost:"}),i.jsx("span",{children:le(a.employerCost)})]})]})]})]})]}),i.jsxs(Q,{children:[i.jsxs(ee,{children:[i.jsx(te,{children:"Tax Band Reference"}),i.jsx(dt,{children:"Zambian PAYE tax bands (2025/26)"})]}),i.jsxs(ne,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"border rounded-lg p-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm font-medium",children:"K0 - K5,100"}),i.jsx("span",{className:"text-sm font-bold",children:"0%"})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"First K5,100 is tax-free"})]}),i.jsxs("div",{className:"border rounded-lg p-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm font-medium",children:"K5,100.01 - K7,100"}),i.jsx("span",{className:"text-sm font-bold",children:"20%"})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Next K2,000 taxed at 20%"})]}),i.jsxs("div",{className:"border rounded-lg p-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm font-medium",children:"K7,100.01 - K9,200"}),i.jsx("span",{className:"text-sm font-bold",children:"30%"})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Next K2,100 taxed at 30%"})]}),i.jsxs("div",{className:"border rounded-lg p-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm font-medium",children:"Above K9,200"}),i.jsx("span",{className:"text-sm font-bold",children:"37%"})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Balance taxed at 37%"})]})]}),i.jsxs("div",{className:"mt-6 pt-4 border-t",children:[i.jsx("h4",{className:"font-semibold text-sm mb-3",children:"Quick Examples"}),i.jsx("div",{className:"space-y-2",children:c.map(u=>i.jsxs(W,{variant:"outline",size:"sm",className:"w-full justify-between",onClick:()=>{n(u.gross.toString()),s(u.gross.toString())},children:[i.jsx("span",{className:"text-xs",children:u.description}),i.jsx("span",{className:"font-semibold",children:le(u.gross)})]},u.gross))})]}),i.jsxs("div",{className:"mt-4 p-3 bg-muted rounded-lg text-xs space-y-1",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"NAPSA:"})," 5% of gross salary, capped at K1,342.00 (employee & employer)"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"NHIMA:"})," 1% of gross salary, capped at K250.00 (employee & employer)"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"PAYE:"})," Progressive tax on gross salary"]})]})]})]})]})]})}function eet(t){const e=[];let n="",r=!1;for(let s=0;s<t.length;s++){const a=t[s];a==='"'?r&&t[s+1]==='"'?(n+='"',s++):r=!r:a===","&&!r?(e.push(n.trim()),n=""):n+=a}return e.push(n.trim()),e}function tet(t){return t.replace(/^\uFEFF/,"").split(/\r?\n/).filter(r=>r.trim()).map(eet)}function net(t,e){const n={success:!1,data:[],errors:[],totalRows:0,successfulRows:0};if(t.length<2)return n.errors.push("File must contain at least a header row and one data row"),n;const r=t[0].map(l=>l.toLowerCase().trim()),s=t.slice(1);n.totalRows=s.length;const a={};e.forEach(l=>{const c=r.findIndex(u=>u===l.header.toLowerCase()||u===l.key.toLowerCase());c!==-1&&(a[l.key]=c)});const o=e.filter(l=>l.required&&a[l.key]===void 0).map(l=>l.header);return o.length>0?(n.errors.push(`Missing required columns: ${o.join(", ")}`),n):(s.forEach((l,c)=>{try{const u={};let d=!1;e.forEach(h=>{var m;const f=a[h.key];if(f!==void 0&&f<l.length){const v=((m=l[f])==null?void 0:m.trim())||"";if(h.required&&!v){n.errors.push(`Row ${c+2}: Missing required value for ${h.header}`),d=!0;return}u[h.key]=h.transform?h.transform(v):v}else h.required&&(n.errors.push(`Row ${c+2}: Missing required value for ${h.header}`),d=!0)}),d||(n.data.push(u),n.successfulRows++)}catch(u){n.errors.push(`Row ${c+2}: ${u instanceof Error?u.message:"Unknown error"}`)}}),n.success=n.successfulRows>0,n)}function ret(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=s=>{var a;return e((a=s.target)==null?void 0:a.result)},r.onerror=()=>n(new Error("Failed to read file")),r.readAsText(t)})}async function set(t,e){try{const n=await ret(t),r=tet(n);return net(r,e)}catch(n){return{success:!1,data:[],errors:[n instanceof Error?n.message:"Failed to parse file"],totalRows:0,successfulRows:0}}}const Ss={toNumber:t=>{const e=parseFloat(t.replace(/[^0-9.-]/g,""));return isNaN(e)?0:e},toDate:t=>{if(!t)return"";try{return new Date(t).toISOString().split("T")[0]}catch{return t}},toBoolean:t=>["true","yes","1","y"].includes(t.toLowerCase()),trim:t=>t.trim()};function iet(t){const e=t.map(c=>c.header),n=t.map(c=>c.key.includes("date")?"2025-01-01":c.key.includes("amount")||c.key.includes("price")||c.key.includes("salary")?"1000.00":c.key.includes("email")?"example@email.com":c.key.includes("phone")?"+260971234567":`Example ${c.header}`),r=[e.join(","),n.join(",")].join(`
`),s="\uFEFF",a=new Blob([s+r],{type:"text/csv;charset=utf-8;"}),o=window.URL.createObjectURL(a),l=document.createElement("a");l.href=o,l.download="import-template.csv",l.click(),window.URL.revokeObjectURL(o),Z.success("Template downloaded")}function mg({open:t,onOpenChange:e,title:n,description:r,columns:s,onImport:a,templateName:o="import-template"}){const[l,c]=N.useState("upload"),[u,d]=N.useState(null),[h,f]=N.useState(!1),[m,v]=N.useState(!1),[g,y]=N.useState(null),b=N.useRef(null),x=async C=>{var w;const E=(w=C.target.files)==null?void 0:w[0];if(!E)return;const p=await set(E,s);d(p),c("preview")},S=async()=>{if(!(!u||u.data.length===0)){f(!0),y(null),c("importing");try{await a(u.data),v(!0),c("complete")}catch(C){y(C instanceof Error?C.message:"Import failed"),c("preview")}finally{f(!1)}}},T=()=>{c("upload"),d(null),v(!1),y(null),b.current&&(b.current.value=""),e(!1)},_=()=>{iet(s)};return i.jsx(Zn,{open:t,onOpenChange:T,children:i.jsxs(Hn,{className:"max-w-2xl",children:[i.jsxs(Kn,{children:[i.jsxs(Gn,{className:"flex items-center gap-2",children:[i.jsx(Koe,{className:"h-5 w-5"}),n]}),r&&i.jsx(od,{children:r})]}),l==="upload"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>{var C;return(C=b.current)==null?void 0:C.click()},children:[i.jsx(Ho,{className:"h-10 w-10 mx-auto text-muted-foreground mb-4"}),i.jsx("p",{className:"text-lg font-medium",children:"Drop your CSV file here"}),i.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"or click to browse"}),i.jsx("input",{ref:b,type:"file",accept:".csv",onChange:x,className:"hidden"})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"Need a template?"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Download our CSV template with the correct headers"})]}),i.jsxs(W,{variant:"outline",size:"sm",onClick:_,children:[i.jsx(Rs,{className:"h-4 w-4 mr-2"}),"Template"]})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[i.jsx("p",{className:"font-medium mb-2",children:"Expected columns:"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:s.map(C=>i.jsxs(Ve,{variant:C.required?"default":"outline",children:[C.header,C.required&&" *"]},C.key))})]})]}),l==="preview"&&u&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Import Preview"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[u.successfulRows," of ",u.totalRows," rows ready to import"]})]}),u.success?i.jsxs(Ve,{variant:"default",className:"bg-success",children:[i.jsx(zw,{className:"h-3 w-3 mr-1"}),"Valid"]}):i.jsxs(Ve,{variant:"destructive",children:[i.jsx(ks,{className:"h-3 w-3 mr-1"}),"Has Errors"]})]}),u.errors.length>0&&i.jsxs(ku,{variant:"destructive",children:[i.jsx(ks,{className:"h-4 w-4"}),i.jsxs(Ru,{children:[i.jsxs("p",{className:"font-medium mb-2",children:["Found ",u.errors.length," error(s):"]}),i.jsx(th,{className:"h-24",children:i.jsxs("ul",{className:"list-disc list-inside text-sm space-y-1",children:[u.errors.slice(0,10).map((C,E)=>i.jsx("li",{children:C},E)),u.errors.length>10&&i.jsxs("li",{children:["...and ",u.errors.length-10," more"]})]})})]})]}),g&&i.jsxs(ku,{variant:"destructive",children:[i.jsx(ks,{className:"h-4 w-4"}),i.jsx(Ru,{children:g})]}),u.data.length>0&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium mb-2",children:"Preview (first 5 rows):"}),i.jsx(th,{className:"h-40 border rounded",children:i.jsx("div",{className:"p-2 text-xs font-mono",children:u.data.slice(0,5).map((C,E)=>i.jsxs("div",{className:"py-1 border-b last:border-0",children:[JSON.stringify(C,null,0).slice(0,100),"..."]},E))})})]})]}),l==="importing"&&i.jsxs("div",{className:"py-8 text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),i.jsx("p",{className:"text-lg font-medium",children:"Importing data..."}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Please wait while we process your data"})]}),l==="complete"&&i.jsxs("div",{className:"py-8 text-center",children:[i.jsx(zw,{className:"h-12 w-12 text-success mx-auto mb-4"}),i.jsx("p",{className:"text-lg font-medium",children:"Import Complete!"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Successfully imported ",(u==null?void 0:u.successfulRows)||0," records"]})]}),i.jsxs(p1,{children:[l==="upload"&&i.jsx(W,{variant:"outline",onClick:T,children:"Cancel"}),l==="preview"&&i.jsxs(i.Fragment,{children:[i.jsx(W,{variant:"outline",onClick:()=>c("upload"),children:"Back"}),i.jsxs(W,{onClick:S,disabled:!(u!=null&&u.success)||u.data.length===0,children:["Import ",(u==null?void 0:u.successfulRows)||0," Records"]})]}),l==="complete"&&i.jsx(W,{onClick:T,children:"Done"})]})]})})}function nf(t,e,n){if(t.length===0){console.warn("No data to export");return}const r=e.map(d=>d.header),s=t.map(d=>e.map(h=>{const f=d[h.key],v=(h.formatter?h.formatter(f):String(f??"")).replace(/"/g,'""');return v.includes(",")||v.includes('"')||v.includes(`
`)?`"${v}"`:v})),a=[r.join(","),...s.map(d=>d.join(","))].join(`
`),o="\uFEFF",l=new Blob([o+a],{type:"text/csv;charset=utf-8;"}),c=window.URL.createObjectURL(l),u=document.createElement("a");u.href=c,u.download=`${n}.csv`,u.click(),window.URL.revokeObjectURL(c)}function aet(t){return(typeof t=="number"?t:parseFloat(String(t))||0).toFixed(2)}function oet(t){if(!t)return"";try{return new Date(String(t)).toISOString().split("T")[0]}catch{return String(t)}}const cet=[{header:"Name",key:"name",required:!0,transform:Ss.trim},{header:"Email",key:"email",transform:Ss.trim},{header:"Phone",key:"phone",transform:Ss.trim},{header:"Address",key:"address",transform:Ss.trim},{header:"TPIN",key:"tpin",transform:Ss.trim},{header:"Contact Person",key:"contact_person",transform:Ss.trim},{header:"Notes",key:"notes",transform:Ss.trim},{header:"Grant Reference",key:"grant_reference",transform:Ss.trim}],uet=[{header:"Name",key:"name"},{header:"Email",key:"email"},{header:"Phone",key:"phone"},{header:"TPIN",key:"tpin"},{header:"Contact Person",key:"contact_person"},{header:"Address",key:"address"},{header:"Grant Reference",key:"grant_reference"},{header:"Notes",key:"notes"}],det=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n};function het(){const t=$n(),e=en(),{user:n}=ot(),[r,s]=N.useState(""),[a,o]=N.useState(!1),[l,c]=N.useState(!1),[u,d]=N.useState(null),[h,f]=N.useState({name:"",email:"",phone:"",address:"",tpin:"",contact_person:"",notes:"",project_id:"",grant_reference:""}),{data:m,isLoading:v}=we({queryKey:["customers",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const p=await Fe.getPrimaryMembershipByUser(n.id);if(!(p!=null&&p.companyId))return[];const w=ge(re,Y.CUSTOMERS);return(await Te(je(w,he("companyId","==",p.companyId)))).docs.map(P=>{const I=P.data();return{id:P.id,name:String(I.name??""),email:I.email??null,phone:I.phone??null,address:I.address??null,tpin:I.tpin??null,contact_person:I.contactPerson??I.contact_person??null,notes:I.notes??null,project_id:I.projectId??I.project_id??null,grant_reference:I.grantReference??I.grant_reference??null}}).sort((P,I)=>P.name.localeCompare(I.name))},enabled:!!n}),g=Xe({mutationFn:async p=>{if(!n)throw new Error("You must be logged in");const w=await Fe.getPrimaryMembershipByUser(n.id);if(!(w!=null&&w.companyId))throw new Error("No company profile found for your account");await es(ge(re,Y.CUSTOMERS),{companyId:w.companyId,userId:n.id,name:p.name,email:p.email||null,phone:p.phone||null,address:p.address||null,tpin:p.tpin||null,contactPerson:p.contact_person||null,notes:p.notes||null,projectId:p.project_id||null,grantReference:p.grant_reference||null,createdAt:Ce(),updatedAt:Ce()})},onSuccess:()=>{e.invalidateQueries({queryKey:["customers",n==null?void 0:n.id]}),Z.success("Customer created successfully"),x()},onError:p=>{Z.error("Failed to create customer: "+(p instanceof Error?p.message:"Unknown error"))}}),y=Xe({mutationFn:async({id:p,data:w})=>{await xr(Ye(re,Y.CUSTOMERS,p),{name:w.name,email:w.email||null,phone:w.phone||null,address:w.address||null,tpin:w.tpin||null,contactPerson:w.contact_person||null,notes:w.notes||null,projectId:w.project_id||null,grantReference:w.grant_reference||null,updatedAt:Ce()},{merge:!0})},onSuccess:()=>{e.invalidateQueries({queryKey:["customers",n==null?void 0:n.id]}),Z.success("Customer updated successfully"),x()},onError:p=>{Z.error("Failed to update customer: "+(p instanceof Error?p.message:"Unknown error"))}}),b=Xe({mutationFn:async p=>{await Ll(Ye(re,Y.CUSTOMERS,p))},onSuccess:()=>{e.invalidateQueries({queryKey:["customers",n==null?void 0:n.id]}),Z.success("Customer deleted successfully")},onError:p=>{Z.error("Failed to delete customer: "+(p instanceof Error?p.message:"Unknown error"))}}),x=()=>{f({name:"",email:"",phone:"",address:"",tpin:"",contact_person:"",notes:"",project_id:"",grant_reference:""}),d(null),o(!1)},S=p=>{d(p),f({name:p.name,email:p.email||"",phone:p.phone||"",address:p.address||"",tpin:p.tpin||"",contact_person:p.contact_person||"",notes:p.notes||"",project_id:p.project_id||"",grant_reference:p.grant_reference||""}),o(!0)},T=p=>{p.preventDefault(),u?y.mutate({id:u.id,data:h}):g.mutate(h)},_=m==null?void 0:m.filter(p=>{var w,A;return p.name.toLowerCase().includes(r.toLowerCase())||((w=p.email)==null?void 0:w.toLowerCase().includes(r.toLowerCase()))||((A=p.phone)==null?void 0:A.includes(r))}),C=async p=>{if(!n)throw new Error("You must be logged in");const w=await Fe.getPrimaryMembershipByUser(n.id);if(!(w!=null&&w.companyId))throw new Error("No company profile found for your account");const A=p.map(k=>({companyId:w.companyId,userId:n.id,name:String(k.name||""),email:k.email||null,phone:k.phone||null,address:k.address||null,tpin:k.tpin||null,contactPerson:k.contact_person||null,notes:k.notes||null,projectId:null,grantReference:k.grant_reference||null,createdAt:Ce(),updatedAt:Ce()})),P=ge(re,Y.CUSTOMERS),I=det(A,400);for(const k of I){const L=$l(re);k.forEach(U=>{L.set(Ye(P),U)}),await L.commit()}e.invalidateQueries({queryKey:["customers",n==null?void 0:n.id]}),Z.success(`Imported ${p.length} customers`)},E=()=>{if(!m||m.length===0){Z.error("No customers to export");return}nf(m,uet,"customers-export"),Z.success("Customers exported")};return v?i.jsx("div",{children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Customers"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your customers and their information"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(W,{variant:"outline",onClick:()=>c(!0),children:[i.jsx(Ho,{className:"mr-2 h-4 w-4"}),"Import"]}),i.jsxs(W,{variant:"outline",onClick:E,children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export"]}),i.jsxs(Zn,{open:a,onOpenChange:p=>{o(p),p||x()},children:[i.jsx(ns,{asChild:!0,children:i.jsxs(W,{children:[i.jsx(_n,{className:"mr-2 h-4 w-4"}),"Add Customer"]})}),i.jsxs(Hn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsx(Kn,{children:i.jsx(Gn,{children:u?"Edit Customer":"Add New Customer"})}),i.jsxs("form",{onSubmit:T,className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"name",children:"Customer Name *"}),i.jsx(G,{id:"name",value:h.name,onChange:p=>f({...h,name:p.target.value}),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"contact_person",children:"Contact Person"}),i.jsx(G,{id:"contact_person",value:h.contact_person,onChange:p=>f({...h,contact_person:p.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"email",children:"Email"}),i.jsx(G,{id:"email",type:"email",value:h.email,onChange:p=>f({...h,email:p.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"phone",children:"Phone"}),i.jsx(G,{id:"phone",value:h.phone,onChange:p=>f({...h,phone:p.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"tpin",children:"TPIN"}),i.jsx(G,{id:"tpin",value:h.tpin,onChange:p=>f({...h,tpin:p.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"project_id",children:"Project Reference"}),i.jsx(G,{id:"project_id",value:h.project_id,onChange:p=>f({...h,project_id:p.target.value}),placeholder:"For NGO project tracking"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"grant_reference",children:"Grant Reference"}),i.jsx(G,{id:"grant_reference",value:h.grant_reference,onChange:p=>f({...h,grant_reference:p.target.value}),placeholder:"For donor/grant tracking"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"address",children:"Address"}),i.jsx(hr,{id:"address",value:h.address,onChange:p=>f({...h,address:p.target.value}),rows:2})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"notes",children:"Notes"}),i.jsx(hr,{id:"notes",value:h.notes,onChange:p=>f({...h,notes:p.target.value}),rows:2})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(W,{type:"button",variant:"outline",onClick:x,children:"Cancel"}),i.jsxs(W,{type:"submit",children:[u?"Update":"Create"," Customer"]})]})]})]})]})]})]}),i.jsx(mg,{open:l,onOpenChange:c,title:"Import Customers",description:"Upload a CSV file to import customers in bulk",columns:cet,onImport:C}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Ms,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{placeholder:"Search customers...",value:r,onChange:p=>s(p.target.value),className:"pl-10"})]})})}),i.jsx(ne,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Name"}),i.jsx(q,{children:"Contact Person"}),i.jsx(q,{children:"Email"}),i.jsx(q,{children:"Phone"}),i.jsx(q,{children:"TPIN"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ut,{children:[_==null?void 0:_.map(p=>i.jsxs(ve,{children:[i.jsx(V,{className:"font-medium",children:p.name}),i.jsx(V,{children:p.contact_person||"-"}),i.jsx(V,{children:p.email||"-"}),i.jsx(V,{children:p.phone||"-"}),i.jsx(V,{children:p.tpin||"-"}),i.jsx(V,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(W,{variant:"ghost",size:"icon",onClick:()=>t(`/quotations/new?customer=${p.id}`),title:"Create Quotation",children:i.jsx(vu,{className:"h-4 w-4"})}),i.jsx(W,{variant:"ghost",size:"icon",onClick:()=>t(`/invoices/new?customer=${p.id}`),title:"Create Invoice",children:i.jsx(ur,{className:"h-4 w-4"})}),i.jsx(W,{variant:"ghost",size:"icon",onClick:()=>S(p),children:i.jsx(Mp,{className:"h-4 w-4"})}),i.jsx(W,{variant:"ghost",size:"icon",onClick:()=>b.mutate(p.id),children:i.jsx(Ds,{className:"h-4 w-4"})})]})})]},p.id)),(_==null?void 0:_.length)===0&&i.jsx(ve,{children:i.jsx(V,{colSpan:6,className:"text-center text-muted-foreground",children:"No customers found"})})]})]})})]})]})}const fet=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},met=t=>{if(!t)return"";if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return""};function pet(){const t=$n(),e=en(),{user:n}=ot(),[r,s]=N.useState(""),[a,o]=N.useState(!1),{data:l}=ad(),[c,u]=N.useState({customer_id:"",order_type:"sale",notes:""}),{data:d,isLoading:h}=we({queryKey:["sales-orders",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const b=await Fe.getPrimaryMembershipByUser(n.id);if(!(b!=null&&b.companyId))return[];const x=ge(re,Y.SALES_ORDERS),T=(await Te(je(x,he("companyId","==",b.companyId)))).docs.map(E=>{const p=E.data();return{id:E.id,orderNumber:String(p.orderNumber??p.order_number??""),orderDate:met(p.orderDate??p.order_date),customerId:p.customerId??p.customer_id??null,customerName:"-",orderType:String(p.orderType??p.order_type??"sale"),subtotal:Number(p.subtotal??0),vatAmount:Number(p.vatAmount??p.vat_amount??0),total:Number(p.total??0),status:String(p.status??"pending")}}),_=Array.from(new Set(T.map(E=>E.customerId).filter(Boolean))),C=new Map;if(_.length>0){const E=ge(re,Y.CUSTOMERS),p=fet(_,30);(await Promise.all(p.map(A=>Te(je(E,he(Ha(),"in",A)))))).forEach(A=>{A.docs.forEach(P=>{const I=P.data();C.set(P.id,String(I.name??"-"))})})}return T.map(E=>({...E,customerName:E.customerId&&C.get(E.customerId)||"-"})).sort((E,p)=>String(p.orderDate).localeCompare(String(E.orderDate)))},enabled:!!n}),{data:f}=we({queryKey:["customers",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const b=await Fe.getPrimaryMembershipByUser(n.id);if(!(b!=null&&b.companyId))return[];const x=ge(re,Y.CUSTOMERS);return(await Te(je(x,he("companyId","==",b.companyId)))).docs.map(T=>{const _=T.data();return{id:T.id,name:String(_.name??"")}}).sort((T,_)=>T.name.localeCompare(_.name))},enabled:!!n}),m=Xe({mutationFn:async b=>{if(!n)throw new Error("You must be logged in");const x=await Fe.getPrimaryMembershipByUser(n.id);if(!(x!=null&&x.companyId))throw new Error("No company profile found for your account");const S=`SO-${Date.now()}`;await es(ge(re,Y.SALES_ORDERS),{companyId:x.companyId,userId:n.id,customerId:b.customer_id||null,orderType:b.order_type,notes:b.notes||null,orderNumber:S,orderDate:new Date().toISOString().slice(0,10),subtotal:0,vatAmount:0,total:0,status:"pending",createdAt:Ce(),updatedAt:Ce()})},onSuccess:()=>{e.invalidateQueries({queryKey:["sales-orders",n==null?void 0:n.id]}),Z.success("Sales order created successfully"),o(!1),u({customer_id:"",order_type:"sale",notes:""})},onError:b=>{Z.error("Failed to create order: "+(b instanceof Error?b.message:"Unknown error"))}}),v=b=>{switch(b){case"completed":case"accepted":return"default";case"pending":case"draft":return"secondary";case"cancelled":case"rejected":return"destructive";default:return"outline"}},g=b=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(b),y=d==null?void 0:d.filter(b=>b.orderNumber.toLowerCase().includes(r.toLowerCase())||b.customerName.toLowerCase().includes(r.toLowerCase()));return h?i.jsx("div",{children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Sales & Orders"}),i.jsxs("p",{className:"text-muted-foreground",children:["Manage sales transactions and orders",(l==null?void 0:l.isVatRegistered)&&i.jsx("span",{className:"ml-2 text-xs bg-primary/10 text-primary px-2 py-0.5 rounded",children:"VAT Registered (16%)"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(W,{variant:"outline",onClick:()=>t("/quotations/new"),children:[i.jsx(vu,{className:"mr-2 h-4 w-4"}),"New Quotation"]}),i.jsxs(Zn,{open:a,onOpenChange:o,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(W,{children:[i.jsx(_n,{className:"mr-2 h-4 w-4"}),"New Order"]})}),i.jsxs(Hn,{children:[i.jsx(Kn,{children:i.jsx(Gn,{children:"Create Sales Order"})}),i.jsxs("form",{onSubmit:b=>{b.preventDefault(),m.mutate(c)},className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"customer",children:"Customer"}),i.jsxs(Ct,{value:c.customer_id,onValueChange:b=>u({...c,customer_id:b}),children:[i.jsx(Et,{children:i.jsx(Pt,{placeholder:"Select customer"})}),i.jsx(At,{children:f==null?void 0:f.map(b=>i.jsx(ye,{value:b.id,children:b.name},b.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"type",children:"Order Type"}),i.jsxs(Ct,{value:c.order_type,onValueChange:b=>u({...c,order_type:b}),children:[i.jsx(Et,{children:i.jsx(Pt,{})}),i.jsxs(At,{children:[i.jsx(ye,{value:"sale",children:"Sale"}),i.jsx(ye,{value:"estimate",children:"Estimate"}),i.jsx(ye,{value:"quote",children:"Quote"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"notes",children:"Notes"}),i.jsx(hr,{id:"notes",value:c.notes,onChange:b=>u({...c,notes:b.target.value})})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(W,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),i.jsx(W,{type:"submit",children:"Create Order"})]})]})]})]})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Ms,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{placeholder:"Search orders...",value:r,onChange:b=>s(b.target.value),className:"pl-10"})]})})}),i.jsx(ne,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Order #"}),i.jsx(q,{children:"Date"}),i.jsx(q,{children:"Customer"}),i.jsx(q,{children:"Type"}),i.jsx(q,{className:"text-right",children:"Subtotal"}),(l==null?void 0:l.isVatRegistered)&&i.jsx(q,{className:"text-right",children:"VAT"}),i.jsx(q,{className:"text-right",children:"Total"}),i.jsx(q,{children:"Status"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ut,{children:[y==null?void 0:y.map(b=>i.jsxs(ve,{children:[i.jsx(V,{className:"font-medium",children:b.orderNumber}),i.jsx(V,{children:b.orderDate?ut(new Date(b.orderDate),"dd MMM yyyy"):"-"}),i.jsx(V,{children:b.customerName||"-"}),i.jsx(V,{className:"capitalize",children:b.orderType}),i.jsx(V,{className:"text-right",children:g(b.subtotal)}),(l==null?void 0:l.isVatRegistered)&&i.jsx(V,{className:"text-right",children:g(b.vatAmount)}),i.jsx(V,{className:"text-right",children:g(b.total)}),i.jsx(V,{children:i.jsx(Ve,{variant:v(b.status||"pending"),children:b.status})}),i.jsx(V,{className:"text-right",children:i.jsx(W,{variant:"ghost",size:"icon",onClick:()=>t(`/invoices/new?order=${b.id}`),title:"Convert to Invoice",children:i.jsx(ur,{className:"h-4 w-4"})})})]},b.id)),(y==null?void 0:y.length)===0&&i.jsx(ve,{children:i.jsx(V,{colSpan:l!=null&&l.isVatRegistered?9:8,className:"text-center text-muted-foreground",children:"No orders found"})})]})]})})]})]})}function get(){const t=$n(),[e]=NR(),n=e.get("customer"),{user:r}=ot(),{data:s}=ad(),[a,o]=N.useState(n||""),[l,c]=N.useState(`QT-${Date.now()}`),[u,d]=N.useState(new Date().toISOString().split("T")[0]),[h,f]=N.useState(""),[m,v]=N.useState(""),[g,y]=N.useState("This quotation is valid for 30 days from the date of issue."),[b,x]=N.useState([{id:"1",description:"",quantity:1,rate:0,amount:0}]),{data:S}=we({queryKey:["customers",r==null?void 0:r.id],queryFn:async()=>{if(!r)return[];const O=await Fe.getPrimaryMembershipByUser(r.id);if(!(O!=null&&O.companyId))return[];const $=ge(re,Y.CUSTOMERS);return(await Te(je($,he("companyId","==",O.companyId)))).docs.map(K=>{const ie=K.data();return{id:K.id,name:String(ie.name??""),email:ie.email?String(ie.email):void 0,address:ie.address?String(ie.address):void 0}}).sort((K,ie)=>K.name.localeCompare(ie.name))},enabled:!!r}),T=(s==null?void 0:s.isVatRegistered)||!1,_=(s==null?void 0:s.vatRate)||16,C=()=>{x([...b,{id:Date.now().toString(),description:"",quantity:1,rate:0,amount:0}])},E=O=>{b.length>1&&x(b.filter($=>$.id!==O))},p=(O,$,D)=>{x(b.map(K=>{if(K.id===O){const ie={...K,[$]:D};return($==="quantity"||$==="rate")&&(ie.amount=ie.quantity*ie.rate),ie}return K}))},w=b.reduce((O,$)=>O+$.amount,0),A=T?w*(_/100):0,P=w+A,I=S==null?void 0:S.find(O=>O.id===a),k=Xe({mutationFn:async O=>{if(!r)throw new Error("You must be logged in");const $=await Fe.getPrimaryMembershipByUser(r.id);if(!($!=null&&$.companyId))throw new Error("No company profile found for your account");const D=b.filter(K=>K.description.trim().length>0).map(K=>({description:K.description.trim(),quantity:K.quantity,unitPrice:K.rate}));if(D.length===0)throw new Error("At least one quotation line item is required.");await Cn.createQuotation({companyId:$.companyId,customerId:a||void 0,quotationNumber:l,quotationDate:u,validUntil:h||u,status:O==="sent"?"Sent":"Draft",notes:[m,g].filter(Boolean).join(`

`)||void 0,taxAmount:A,totalAmount:P,lineItems:D})},onSuccess:(O,$)=>{Z.success($==="sent"?"Quotation sent successfully":"Quotation saved as draft"),t("/sales-orders")},onError:O=>{Z.error("Failed to save quotation: "+(O instanceof Error?O.message:"Unknown error"))}}),L=()=>{const O=encodeURIComponent(JSON.stringify(b));t(`/invoices/new?customer=${a}&lines=${O}`)},U=(O=!1)=>{if(!a){Z.error("Please select a customer");return}k.mutate(O?"sent":"draft")},z=O=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(O);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"New Quotation"}),i.jsxs("p",{className:"text-muted-foreground",children:["Create a quotation for a customer",T&&i.jsxs("span",{className:"ml-2 text-xs bg-primary/10 text-primary px-2 py-0.5 rounded",children:["VAT ",_,"%"]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(W,{variant:"outline",onClick:()=>t("/sales-orders"),children:"Cancel"}),i.jsxs(W,{variant:"outline",className:"gap-2",onClick:()=>U(!1),disabled:k.isPending,children:[i.jsx(ph,{className:"h-4 w-4"}),"Save Draft"]}),i.jsxs(W,{className:"gap-2",onClick:()=>U(!0),disabled:k.isPending,children:[i.jsx(Zk,{className:"h-4 w-4"}),"Save & Send"]})]})]}),i.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"Quotation Details"})}),i.jsx(ne,{className:"space-y-4",children:i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"customer",children:"Customer *"}),i.jsxs(Ct,{value:a,onValueChange:o,children:[i.jsx(Et,{id:"customer",children:i.jsx(Pt,{placeholder:"Select customer"})}),i.jsx(At,{children:S==null?void 0:S.map(O=>i.jsx(ye,{value:O.id,children:O.name},O.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"quoteNumber",children:"Quotation Number *"}),i.jsx(G,{id:"quoteNumber",value:l,onChange:O=>c(O.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"quoteDate",children:"Quotation Date *"}),i.jsx(G,{id:"quoteDate",type:"date",value:u,onChange:O=>d(O.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"validUntil",children:"Valid Until"}),i.jsx(G,{id:"validUntil",type:"date",value:h,onChange:O=>f(O.target.value)})]})]})})]}),I&&i.jsx(Q,{className:"bg-muted/30",children:i.jsx(ne,{className:"pt-4",children:i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"font-medium",children:I.name}),I.email&&i.jsx("p",{className:"text-muted-foreground",children:I.email}),I.address&&i.jsx("p",{className:"text-muted-foreground",children:I.address})]})})}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"Line Items"})}),i.jsx(ne,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-12 text-sm font-medium text-muted-foreground",children:[i.jsx("div",{className:"md:col-span-5",children:"Description"}),i.jsx("div",{className:"md:col-span-2",children:"Qty"}),i.jsx("div",{className:"md:col-span-2",children:"Rate (ZMW)"}),i.jsx("div",{className:"md:col-span-2",children:"Amount"}),i.jsx("div",{className:"md:col-span-1"})]}),b.map(O=>i.jsxs("div",{className:"grid gap-4 md:grid-cols-12 items-start",children:[i.jsx("div",{className:"md:col-span-5",children:i.jsx(hr,{placeholder:"Item description",value:O.description,onChange:$=>p(O.id,"description",$.target.value),rows:2})}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(G,{type:"number",placeholder:"Qty",value:O.quantity,onChange:$=>p(O.id,"quantity",parseFloat($.target.value)||0),min:"0",step:"0.01"})}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(G,{type:"number",placeholder:"Rate",value:O.rate,onChange:$=>p(O.id,"rate",parseFloat($.target.value)||0),min:"0",step:"0.01"})}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(G,{value:z(O.amount),disabled:!0,className:"bg-muted"})}),i.jsx("div",{className:"md:col-span-1",children:i.jsx(W,{type:"button",variant:"ghost",size:"icon",onClick:()=>E(O.id),disabled:b.length===1,children:i.jsx(Ds,{className:"h-4 w-4"})})})]},O.id)),i.jsxs(W,{type:"button",variant:"outline",className:"gap-2",onClick:C,children:[i.jsx(_n,{className:"h-4 w-4"}),"Add Line Item"]})]})})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"Notes & Terms"})}),i.jsxs(ne,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"notes",children:"Notes (visible to customer)"}),i.jsx(hr,{id:"notes",placeholder:"Add any notes or special conditions",rows:3,value:m,onChange:O=>v(O.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"terms",children:"Terms & Conditions"}),i.jsx(hr,{id:"terms",placeholder:"Quotation terms and conditions",rows:3,value:g,onChange:O=>y(O.target.value)})]})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"Summary"})}),i.jsxs(ne,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),i.jsx("span",{className:"font-medium",children:z(w)})]}),T&&i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsxs("span",{className:"text-muted-foreground",children:["VAT (",_,"%)"]}),i.jsx("span",{className:"font-medium",children:z(A)})]}),i.jsxs("div",{className:"border-t pt-3 flex justify-between",children:[i.jsx("span",{className:"font-semibold",children:"Total"}),i.jsx("span",{className:"text-xl font-bold text-primary",children:z(P)})]})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"Actions"})}),i.jsx(ne,{className:"space-y-2",children:i.jsxs(W,{variant:"outline",className:"w-full gap-2",onClick:L,disabled:!a||b.every(O=>!O.description),children:[i.jsx(ur,{className:"h-4 w-4"}),"Convert to Invoice"]})})]}),!T&&i.jsx(Q,{className:"bg-muted/50",children:i.jsx(ne,{className:"pt-4",children:i.jsxs("p",{className:"text-sm text-muted-foreground",children:["VAT is not applied. To enable VAT, go to"," ",i.jsx(W,{variant:"link",className:"p-0 h-auto",onClick:()=>t("/settings"),children:"Settings"})," ","and enable VAT registration."]})})})]})]})]})}const yet=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},vet=t=>{if(!t)return"";if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return""};function xet(){const t=$n(),e=en(),{user:n}=ot(),[r,s]=N.useState(""),{data:a}=ad(),{data:o,isLoading:l}=we({queryKey:["estimates",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const f=await Fe.getPrimaryMembershipByUser(n.id);if(!(f!=null&&f.companyId))return[];const m=ge(re,Y.SALES_ORDERS),g=(await Te(je(m,he("companyId","==",f.companyId)))).docs.map(x=>{const S=x.data();return{id:x.id,orderNumber:String(S.orderNumber??S.order_number??""),orderDate:vet(S.orderDate??S.order_date),orderType:String(S.orderType??S.order_type??"sale"),subtotal:Number(S.subtotal??0),vatAmount:Number(S.vatAmount??S.vat_amount??0),total:Number(S.total??0),status:String(S.status??"draft"),customerId:S.customerId??S.customer_id??null,customerName:"-"}}).filter(x=>["quote","estimate"].includes(x.orderType)),y=Array.from(new Set(g.map(x=>x.customerId).filter(Boolean))),b=new Map;if(y.length>0){const x=ge(re,Y.CUSTOMERS),S=yet(y,30);(await Promise.all(S.map(_=>Te(je(x,he(Ha(),"in",_)))))).forEach(_=>{_.docs.forEach(C=>{const E=C.data();b.set(C.id,String(E.name??"-"))})})}return g.map(x=>({...x,customerName:x.customerId&&b.get(x.customerId)||"-"})).sort((x,S)=>String(S.orderDate).localeCompare(String(x.orderDate)))},enabled:!!n}),c=Xe({mutationFn:async f=>{await Ll(Ye(re,Y.SALES_ORDERS,f))},onSuccess:()=>{e.invalidateQueries({queryKey:["estimates",n==null?void 0:n.id]}),Z.success("Estimate deleted successfully")},onError:f=>{Z.error("Failed to delete estimate: "+(f instanceof Error?f.message:"Unknown error"))}}),u=f=>{switch(f){case"sent":case"accepted":return"default";case"draft":return"secondary";case"rejected":return"destructive";default:return"outline"}},d=f=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(f),h=o==null?void 0:o.filter(f=>f.orderNumber.toLowerCase().includes(r.toLowerCase())||f.customerName.toLowerCase().includes(r.toLowerCase()));return l?i.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Estimates & Quotations"}),i.jsx("p",{className:"text-muted-foreground",children:"Create and manage quotes for your customers"})]}),i.jsxs(W,{onClick:()=>t("/quotations/new"),children:[i.jsx(_n,{className:"mr-2 h-4 w-4"}),"New Quotation"]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Ms,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{placeholder:"Search estimates...",value:r,onChange:f=>s(f.target.value),className:"pl-10"})]})})}),i.jsx(ne,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Quote #"}),i.jsx(q,{children:"Date"}),i.jsx(q,{children:"Customer"}),i.jsx(q,{className:"text-right",children:"Subtotal"}),(a==null?void 0:a.isVatRegistered)&&i.jsx(q,{className:"text-right",children:"VAT"}),i.jsx(q,{className:"text-right",children:"Total"}),i.jsx(q,{children:"Status"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ut,{children:[h==null?void 0:h.map(f=>i.jsxs(ve,{children:[i.jsx(V,{className:"font-medium",children:f.orderNumber}),i.jsx(V,{children:f.orderDate?ut(new Date(f.orderDate),"dd MMM yyyy"):"-"}),i.jsx(V,{children:f.customerName||"-"}),i.jsx(V,{className:"text-right",children:d(f.subtotal)}),(a==null?void 0:a.isVatRegistered)&&i.jsx(V,{className:"text-right",children:d(f.vatAmount)}),i.jsx(V,{className:"text-right",children:d(f.total)}),i.jsx(V,{children:i.jsx(Ve,{variant:u(f.status||"draft"),children:f.status})}),i.jsx(V,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(W,{variant:"ghost",size:"icon",onClick:()=>t(`/invoices/new?customer=${f.customerId}`),title:"Convert to Invoice",children:i.jsx(ur,{className:"h-4 w-4"})}),i.jsx(W,{variant:"ghost",size:"icon",onClick:()=>c.mutate(f.id),title:"Delete",children:i.jsx(Ds,{className:"h-4 w-4"})})]})})]},f.id)),(h==null?void 0:h.length)===0&&i.jsx(ve,{children:i.jsx(V,{colSpan:a!=null&&a.isVatRegistered?8:7,className:"text-center text-muted-foreground py-8",children:"No estimates found. Create your first quotation!"})})]})]})})]})]})}const bet=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n};function wet(){const t=$n(),e=en(),{user:n}=ot(),[r,s]=N.useState(""),[a,o]=N.useState(!1),[l,c]=N.useState(!1),[u,d]=N.useState(null),[h,f]=N.useState({name:"",email:"",phone:"",address:"",tpin:"",contact_person:"",notes:"",bank_name:"",bank_account_number:"",payment_terms:""}),{data:m,isLoading:v}=we({queryKey:["vendors",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const w=await Fe.getPrimaryMembershipByUser(n.id);if(!(w!=null&&w.companyId))return[];const A=ge(re,Y.VENDORS);return(await Te(je(A,he("companyId","==",w.companyId)))).docs.map(I=>{const k=I.data();return{id:I.id,name:String(k.name??""),email:k.email??null,phone:k.phone??null,address:k.address??null,tpin:k.tpin??null,contact_person:k.contactPerson??k.contact_person??null,notes:k.notes??null,bank_name:k.bankName??k.bank_name??null,bank_account_number:k.bankAccountNumber??k.bank_account_number??null,payment_terms:k.paymentTerms??k.payment_terms??null}}).sort((I,k)=>I.name.localeCompare(k.name))},enabled:!!n}),g=Xe({mutationFn:async w=>{if(!n)throw new Error("You must be logged in");const A=await Fe.getPrimaryMembershipByUser(n.id);if(!(A!=null&&A.companyId))throw new Error("No company profile found for your account");await es(ge(re,Y.VENDORS),{companyId:A.companyId,userId:n.id,name:w.name,email:w.email||null,phone:w.phone||null,address:w.address||null,tpin:w.tpin||null,contactPerson:w.contact_person||null,notes:w.notes||null,bankName:w.bank_name||null,bankAccountNumber:w.bank_account_number||null,paymentTerms:w.payment_terms||null,createdAt:Ce(),updatedAt:Ce()})},onSuccess:()=>{e.invalidateQueries({queryKey:["vendors",n==null?void 0:n.id]}),Z.success("Vendor created successfully"),x()},onError:w=>{Z.error("Failed to create vendor: "+(w instanceof Error?w.message:"Unknown error"))}}),y=Xe({mutationFn:async({id:w,data:A})=>{await xr(Ye(re,Y.VENDORS,w),{name:A.name,email:A.email||null,phone:A.phone||null,address:A.address||null,tpin:A.tpin||null,contactPerson:A.contact_person||null,notes:A.notes||null,bankName:A.bank_name||null,bankAccountNumber:A.bank_account_number||null,paymentTerms:A.payment_terms||null,updatedAt:Ce()},{merge:!0})},onSuccess:()=>{e.invalidateQueries({queryKey:["vendors",n==null?void 0:n.id]}),Z.success("Vendor updated successfully"),x()},onError:w=>{Z.error("Failed to update vendor: "+(w instanceof Error?w.message:"Unknown error"))}}),b=Xe({mutationFn:async w=>{await Ll(Ye(re,Y.VENDORS,w))},onSuccess:()=>{e.invalidateQueries({queryKey:["vendors",n==null?void 0:n.id]}),Z.success("Vendor deleted successfully")},onError:w=>{Z.error("Failed to delete vendor: "+(w instanceof Error?w.message:"Unknown error"))}}),x=()=>{f({name:"",email:"",phone:"",address:"",tpin:"",contact_person:"",notes:"",bank_name:"",bank_account_number:"",payment_terms:""}),d(null),o(!1)},S=w=>{d(w),f({name:w.name,email:w.email||"",phone:w.phone||"",address:w.address||"",tpin:w.tpin||"",contact_person:w.contact_person||"",notes:w.notes||"",bank_name:w.bank_name||"",bank_account_number:w.bank_account_number||"",payment_terms:w.payment_terms||""}),o(!0)},T=w=>{w.preventDefault(),u?y.mutate({id:u.id,data:h}):g.mutate(h)},_=m==null?void 0:m.filter(w=>{var A,P;return w.name.toLowerCase().includes(r.toLowerCase())||((A=w.email)==null?void 0:A.toLowerCase().includes(r.toLowerCase()))||((P=w.phone)==null?void 0:P.includes(r))}),C=[{key:"name",header:"Vendor Name",required:!0},{key:"email",header:"Email",required:!1},{key:"phone",header:"Phone",required:!1},{key:"address",header:"Address",required:!1},{key:"tpin",header:"TPIN",required:!1},{key:"contact_person",header:"Contact Person",required:!1},{key:"bank_name",header:"Bank Name",required:!1},{key:"bank_account_number",header:"Bank Account",required:!1},{key:"payment_terms",header:"Payment Terms",required:!1}],E=async w=>{if(!n)throw new Error("You must be logged in");const A=await Fe.getPrimaryMembershipByUser(n.id);if(!(A!=null&&A.companyId))throw new Error("No company profile found for your account");const P=w.map(L=>({companyId:A.companyId,userId:n.id,name:String(L.name||""),email:L.email||null,phone:L.phone||null,address:L.address||null,tpin:L.tpin||null,contactPerson:L.contact_person||null,bankName:L.bank_name||null,bankAccountNumber:L.bank_account_number||null,paymentTerms:L.payment_terms||null,createdAt:Ce(),updatedAt:Ce()})),I=ge(re,Y.VENDORS),k=bet(P,400);for(const L of k){const U=$l(re);L.forEach(z=>{U.set(Ye(I),z)}),await U.commit()}e.invalidateQueries({queryKey:["vendors",n==null?void 0:n.id]})},p=()=>{if(!(_!=null&&_.length))return;nf(_,[{header:"Vendor Name",key:"name"},{header:"Contact Person",key:"contact_person"},{header:"Email",key:"email"},{header:"Phone",key:"phone"},{header:"Address",key:"address"},{header:"TPIN",key:"tpin"},{header:"Bank Name",key:"bank_name"},{header:"Bank Account",key:"bank_account_number"},{header:"Payment Terms",key:"payment_terms"}],"vendors-export")};return v?i.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Vendors"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your suppliers and vendors"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(W,{variant:"outline",onClick:()=>c(!0),children:[i.jsx(Ho,{className:"mr-2 h-4 w-4"}),"Import"]}),i.jsxs(W,{variant:"outline",onClick:p,children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export"]}),i.jsxs(Zn,{open:a,onOpenChange:w=>{o(w),w||x()},children:[i.jsx(ns,{asChild:!0,children:i.jsxs(W,{children:[i.jsx(_n,{className:"mr-2 h-4 w-4"}),"Add Vendor"]})}),i.jsxs(Hn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsx(Kn,{children:i.jsx(Gn,{children:u?"Edit Vendor":"Add New Vendor"})}),i.jsxs("form",{onSubmit:T,className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"name",children:"Vendor Name *"}),i.jsx(G,{id:"name",value:h.name,onChange:w=>f({...h,name:w.target.value}),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"contact_person",children:"Contact Person"}),i.jsx(G,{id:"contact_person",value:h.contact_person,onChange:w=>f({...h,contact_person:w.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"email",children:"Email"}),i.jsx(G,{id:"email",type:"email",value:h.email,onChange:w=>f({...h,email:w.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"phone",children:"Phone"}),i.jsx(G,{id:"phone",value:h.phone,onChange:w=>f({...h,phone:w.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"tpin",children:"TPIN"}),i.jsx(G,{id:"tpin",value:h.tpin,onChange:w=>f({...h,tpin:w.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"payment_terms",children:"Payment Terms"}),i.jsx(G,{id:"payment_terms",value:h.payment_terms,onChange:w=>f({...h,payment_terms:w.target.value}),placeholder:"e.g., Net 30"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"bank_name",children:"Bank Name"}),i.jsx(G,{id:"bank_name",value:h.bank_name,onChange:w=>f({...h,bank_name:w.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"bank_account_number",children:"Bank Account Number"}),i.jsx(G,{id:"bank_account_number",value:h.bank_account_number,onChange:w=>f({...h,bank_account_number:w.target.value})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"address",children:"Address"}),i.jsx(hr,{id:"address",value:h.address,onChange:w=>f({...h,address:w.target.value}),rows:2})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"notes",children:"Notes"}),i.jsx(hr,{id:"notes",value:h.notes,onChange:w=>f({...h,notes:w.target.value}),rows:2})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(W,{type:"button",variant:"outline",onClick:x,children:"Cancel"}),i.jsxs(W,{type:"submit",children:[u?"Update":"Create"," Vendor"]})]})]})]})]})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Ms,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{placeholder:"Search vendors...",value:r,onChange:w=>s(w.target.value),className:"pl-10"})]})})}),i.jsx(ne,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Name"}),i.jsx(q,{children:"Contact Person"}),i.jsx(q,{children:"Email"}),i.jsx(q,{children:"Phone"}),i.jsx(q,{children:"TPIN"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ut,{children:[_==null?void 0:_.map(w=>i.jsxs(ve,{children:[i.jsx(V,{className:"font-medium",children:w.name}),i.jsx(V,{children:w.contact_person||"-"}),i.jsx(V,{children:w.email||"-"}),i.jsx(V,{children:w.phone||"-"}),i.jsx(V,{children:w.tpin||"-"}),i.jsx(V,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(W,{variant:"ghost",size:"icon",onClick:()=>t("/purchase-orders"),title:"Create Purchase Order",children:i.jsx(vu,{className:"h-4 w-4"})}),i.jsx(W,{variant:"ghost",size:"icon",onClick:()=>t("/bills"),title:"Create Bill",children:i.jsx(ur,{className:"h-4 w-4"})}),i.jsx(W,{variant:"ghost",size:"icon",onClick:()=>S(w),children:i.jsx(Mp,{className:"h-4 w-4"})}),i.jsx(W,{variant:"ghost",size:"icon",onClick:()=>b.mutate(w.id),children:i.jsx(Ds,{className:"h-4 w-4"})})]})})]},w.id)),(_==null?void 0:_.length)===0&&i.jsx(ve,{children:i.jsx(V,{colSpan:6,className:"text-center text-muted-foreground py-8",children:"No vendors found. Add your first vendor!"})})]})]})})]}),i.jsx(mg,{open:l,onOpenChange:c,onImport:E,columns:C,title:"Import Vendors"})]})}function _et(){const{user:t}=ot(),{data:e}=Yl(),n=en(),[r,s]=N.useState(""),[a,o]=N.useState(!1),{data:l}=ad(),c=["super_admin","admin","financial_manager","accountant","assistant_accountant"].includes(e||""),[u,d]=N.useState({vendor_id:"",bill_number:`BILL-${Date.now()}`,bill_date:new Date().toISOString().split("T")[0],due_date:"",category:"",amount:"",description:""}),{data:h}=we({queryKey:["bills-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const k=await Fe.getPrimaryMembershipByUser(t.id);return(k==null?void 0:k.companyId)??null},enabled:!!t}),{data:f,isLoading:m}=we({queryKey:["bills",h],queryFn:async()=>{if(!h)return[];const[k,L]=await Promise.all([Te(je(ge(re,Y.BILLS),he("companyId","==",h))),Te(je(ge(re,Y.VENDORS),he("companyId","==",h)))]),U=new Map;return L.docs.forEach(z=>{const O=z.data();U.set(z.id,String(O.name??""))}),k.docs.map(z=>{const O=z.data(),$=O.vendorId??O.vendor_id??null;return{id:z.id,bill_number:String(O.billNumber??O.bill_number??`BILL-${z.id.slice(0,8).toUpperCase()}`),bill_date:String(O.billDate??O.bill_date??""),due_date:O.dueDate??O.due_date??null,subtotal:Number(O.subtotal??0),vat_amount:Number(O.vatAmount??O.vat_amount??0),total:Number(O.total??0),status:O.status??"pending",description:O.description??null,vendor_id:$,amount_paid:Number(O.amountPaid??O.amount_paid??0),journal_entry_id:O.journalEntryId??O.journal_entry_id??null,vendors:$?{name:U.get($)||"Unknown Vendor"}:null}}).sort((z,O)=>O.bill_date.localeCompare(z.bill_date))},enabled:!!h}),{data:v=[]}=we({queryKey:["bill-expense-category-mappings",h],queryFn:async()=>h?(await Te(je(ge(re,Y.EXPENSE_CATEGORY_MAPPINGS),he("companyId","==",h)))).docs.map(L=>{const U=L.data();return{id:L.id,categoryName:String(U.categoryName??U.category_name??"")}}).filter(L=>L.categoryName).sort((L,U)=>L.categoryName.localeCompare(U.categoryName)):[],enabled:!!h}),{data:g=[]}=we({queryKey:["bill-payment-accounts",h],queryFn:async()=>h?(await Te(je(ge(re,Y.CHART_OF_ACCOUNTS),he("companyId","==",h),he("accountType","==","Asset"),he("status","==","active")))).docs.map(L=>{const U=L.data();return{id:L.id,accountName:String(U.accountName??"")}}).filter(L=>L.accountName).sort((L,U)=>L.accountName.localeCompare(U.accountName)):[],enabled:!!h}),y=()=>{if(!g.length)return"";const k=g.find(L=>L.accountName.toLowerCase().includes("bank"))||g.find(L=>L.accountName.toLowerCase().includes("cash"));return(k==null?void 0:k.id)||g[0].id},{data:b}=we({queryKey:["vendors",h],queryFn:async()=>h?(await Te(je(ge(re,Y.VENDORS),he("companyId","==",h)))).docs.map(L=>{const U=L.data();return{id:L.id,name:String(U.name??"")}}).sort((L,U)=>L.name.localeCompare(U.name)):[],enabled:!!h}),x=(l==null?void 0:l.isVatRegistered)||!1,S=(l==null?void 0:l.vatRate)||16,T=parseFloat(u.amount)||0,_=x?T*(S/100):0,C=T+_,E=Xe({mutationFn:async k=>{if(!h||!t)throw new Error("Not authenticated");await Cn.createBill({companyId:h,vendorId:k.vendor_id||void 0,amount:C,categoryName:k.category||"Miscellaneous",billDate:k.bill_date,dueDate:k.due_date||k.bill_date,description:k.description||void 0})},onSuccess:()=>{n.invalidateQueries({queryKey:["bills",h]}),n.invalidateQueries({queryKey:["accounts-payable"]}),n.invalidateQueries({queryKey:["vendors"]}),n.invalidateQueries({queryKey:["dashboard"]}),Z.success("Bill created successfully"),o(!1),d({vendor_id:"",bill_number:`BILL-${Date.now()}`,bill_date:new Date().toISOString().split("T")[0],due_date:"",category:"",amount:"",description:""})},onError:k=>{Z.error("Failed to create bill: "+k.message)}}),p=Xe({mutationFn:async k=>{if(!h)throw new Error("Company not found");const L=f==null?void 0:f.find(O=>O.id===k);if(!L)throw new Error("Bill not found");const U=Math.max(Number(L.total)-Number(L.amount_paid||0),0);if(U<=0)throw new Error("Bill is already fully paid");const z=y();if(!z)throw new Error("No active Asset payment account found.");await Cn.payBill({companyId:h,billId:k,amount:U,paymentDate:new Date().toISOString().split("T")[0],paymentAccountId:z,notes:"Bill payment recorded from Bills page"})},onSuccess:()=>{n.invalidateQueries({queryKey:["bills",h]}),n.invalidateQueries({queryKey:["accounts-payable"]}),n.invalidateQueries({queryKey:["vendors"]}),n.invalidateQueries({queryKey:["bank-accounts"]}),n.invalidateQueries({queryKey:["dashboard"]}),Z.success("Bill payment recorded")},onError:k=>{Z.error("Failed to update bill: "+k.message)}}),w=Xe({mutationFn:async k=>{if(!h)throw new Error("Company not found");if(!k.journal_entry_id)throw new Error("Bill has no posted journal entry to reverse.");if(Number(k.amount_paid||0)>.001)throw new Error("Reverse bill payment entries first before reversing this bill.");const L=prompt(`Reason for reversing bill ${k.bill_number} (optional):`)||void 0;return Cn.reverseJournalEntry({companyId:h,journalEntryId:k.journal_entry_id,reason:L})},onSuccess:()=>{n.invalidateQueries({queryKey:["bills",h]}),n.invalidateQueries({queryKey:["accounts-payable"]}),n.invalidateQueries({queryKey:["vendors"]}),n.invalidateQueries({queryKey:["bank-accounts"]}),n.invalidateQueries({queryKey:["journal-entries"]}),n.invalidateQueries({queryKey:["financial-reports"]}),n.invalidateQueries({queryKey:["dashboard"]}),Z.success("Bill journal entry reversed")},onError:k=>{Z.error("Failed to reverse bill: "+k.message)}}),A=k=>{switch(String(k||"").toLowerCase()){case"paid":return"default";case"unpaid":return"secondary";case"partially paid":return"secondary";case"pending":return"secondary";case"overdue":return"destructive";default:return"outline"}},P=k=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(k),I=f==null?void 0:f.filter(k=>{var L,U;return k.bill_number.toLowerCase().includes(r.toLowerCase())||((U=(L=k.vendors)==null?void 0:L.name)==null?void 0:U.toLowerCase().includes(r.toLowerCase()))});return m?i.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Bills"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage bills and payments to vendors"})]}),i.jsxs(Zn,{open:a,onOpenChange:o,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(W,{children:[i.jsx(_n,{className:"mr-2 h-4 w-4"}),"New Bill"]})}),i.jsxs(Hn,{className:"max-w-lg",children:[i.jsx(Kn,{children:i.jsx(Gn,{children:"Create New Bill"})}),i.jsxs("form",{onSubmit:k=>{k.preventDefault(),E.mutate(u)},className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"vendor",children:"Vendor *"}),i.jsxs(Ct,{value:u.vendor_id,onValueChange:k=>d({...u,vendor_id:k}),children:[i.jsx(Et,{children:i.jsx(Pt,{placeholder:"Select vendor"})}),i.jsx(At,{children:b==null?void 0:b.map(k=>i.jsx(ye,{value:k.id,children:k.name},k.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"bill_number",children:"Bill Number"}),i.jsx(G,{id:"bill_number",value:u.bill_number,onChange:k=>d({...u,bill_number:k.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"bill_date",children:"Bill Date *"}),i.jsx(G,{id:"bill_date",type:"date",value:u.bill_date,onChange:k=>d({...u,bill_date:k.target.value}),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"due_date",children:"Due Date"}),i.jsx(G,{id:"due_date",type:"date",value:u.due_date,onChange:k=>d({...u,due_date:k.target.value})})]}),i.jsxs("div",{className:"space-y-2 md:col-span-2",children:[i.jsx(J,{htmlFor:"category",children:"Category *"}),i.jsxs(Ct,{value:u.category,onValueChange:k=>d({...u,category:k}),children:[i.jsx(Et,{children:i.jsx(Pt,{placeholder:"Select category"})}),i.jsx(At,{children:v.map(k=>i.jsx(ye,{value:k.categoryName,children:k.categoryName},k.id))})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"amount",children:"Amount (ZMW) *"}),i.jsx(G,{id:"amount",type:"number",step:"0.01",value:u.amount,onChange:k=>d({...u,amount:k.target.value}),required:!0})]}),x&&i.jsxs("div",{className:"rounded-lg bg-muted p-3 space-y-1 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Subtotal:"}),i.jsx("span",{children:P(T)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{children:["VAT (",S,"%):"]}),i.jsx("span",{children:P(_)})]}),i.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[i.jsx("span",{children:"Total:"}),i.jsx("span",{children:P(C)})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"description",children:"Description"}),i.jsx(hr,{id:"description",value:u.description,onChange:k=>d({...u,description:k.target.value}),rows:2})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(W,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),i.jsx(W,{type:"submit",children:"Create Bill"})]})]})]})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Ms,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{placeholder:"Search bills...",value:r,onChange:k=>s(k.target.value),className:"pl-10"})]})})}),i.jsx(ne,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Bill #"}),i.jsx(q,{children:"Date"}),i.jsx(q,{children:"Vendor"}),i.jsx(q,{children:"Due Date"}),i.jsx(q,{className:"text-right",children:"Total"}),i.jsx(q,{children:"Status"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ut,{children:[I==null?void 0:I.map(k=>{var L;return i.jsxs(ve,{children:[i.jsx(V,{className:"font-medium",children:k.bill_number}),i.jsx(V,{children:ut(new Date(k.bill_date),"dd MMM yyyy")}),i.jsx(V,{children:((L=k.vendors)==null?void 0:L.name)||"-"}),i.jsx(V,{children:k.due_date?ut(new Date(k.due_date),"dd MMM yyyy"):"-"}),i.jsx(V,{className:"text-right",children:P(Number(k.total))}),i.jsx(V,{children:i.jsx(Ve,{variant:A(k.status||"pending"),children:k.status})}),i.jsx(V,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[k.journal_entry_id&&c&&i.jsx(W,{variant:"ghost",size:"icon",disabled:w.isPending||Number(k.amount_paid||0)>.001,onClick:()=>{if(Number(k.amount_paid||0)>.001){Z.error("Reverse bill payments first before reversing this bill.");return}confirm("Reverse this bill posting? This creates an opposite journal entry.")&&w.mutate(k)},title:Number(k.amount_paid||0)>.001?"Reverse payments first":"Reverse bill posting",children:i.jsx(mh,{className:"h-4 w-4"})}),String(k.status||"").toLowerCase()!=="paid"&&i.jsx(W,{variant:"ghost",size:"icon",onClick:()=>p.mutate(k.id),title:"Mark as Paid",children:i.jsx($x,{className:"h-4 w-4"})}),i.jsx(W,{variant:"ghost",size:"icon",onClick:()=>{Z.error("Bill deletion is blocked. Use a reversal/credit-note workflow.")},disabled:!0,title:"Bill deletion is blocked",children:i.jsx(Ds,{className:"h-4 w-4"})})]})})]},k.id)}),(I==null?void 0:I.length)===0&&i.jsx(ve,{children:i.jsx(V,{colSpan:7,className:"text-center text-muted-foreground py-8",children:"No bills found. Create your first bill!"})})]})]})})]})]})}function jet(){const{user:t}=ot(),e=$n(),n=en(),[r,s]=N.useState(""),[a,o]=N.useState(!1),{data:l}=ad(),[c,u]=N.useState({vendor_id:"",order_number:`PO-${Date.now()}`,order_date:new Date().toISOString().split("T")[0],expected_date:"",amount:"",description:""}),{data:d}=we({queryKey:["purchase-orders-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const p=await Fe.getPrimaryMembershipByUser(t.id);return(p==null?void 0:p.companyId)??null},enabled:!!t}),{data:h,isLoading:f}=we({queryKey:["purchase-orders",d],queryFn:async()=>{if(!d)return[];const p=ge(re,Y.PURCHASE_ORDERS),A=(await Te(je(p,he("companyId","==",d)))).docs.map(k=>{const L=k.data();return{id:k.id,order_number:String(L.orderNumber??L.order_number??""),order_date:String(L.orderDate??L.order_date??""),expected_date:L.expectedDate??L.expected_date??null,subtotal:Number(L.subtotal??0),vat_amount:Number(L.vatAmount??L.vat_amount??0),total:Number(L.total??0),status:L.status??"pending",description:L.description??null,vendor_id:L.vendorId??L.vendor_id??null,vendors:null}}),P=Array.from(new Set(A.map(k=>k.vendor_id).filter(Boolean))),I=new Map;if(P.length>0){const k=ge(re,Y.VENDORS);(await Te(je(k,he("companyId","==",d)))).docs.forEach(U=>{const z=U.data();I.set(U.id,String(z.name??""))})}return A.map(k=>({...k,vendors:k.vendor_id?{name:I.get(k.vendor_id)||"Unknown Vendor"}:null})).sort((k,L)=>L.order_date.localeCompare(k.order_date))},enabled:!!d}),{data:m}=we({queryKey:["vendors",d],queryFn:async()=>{if(!d)return[];const p=ge(re,Y.VENDORS);return(await Te(je(p,he("companyId","==",d)))).docs.map(A=>{const P=A.data();return{id:A.id,name:String(P.name??"")}}).sort((A,P)=>A.name.localeCompare(P.name))},enabled:!!d}),v=(l==null?void 0:l.isVatRegistered)||!1,g=(l==null?void 0:l.vatRate)||16,y=parseFloat(c.amount)||0,b=v?y*(g/100):0,x=y+b,S=Xe({mutationFn:async p=>{if(!d||!t)throw new Error("No active company context");await es(ge(re,Y.PURCHASE_ORDERS),{companyId:d,vendorId:p.vendor_id,orderNumber:p.order_number,orderDate:p.order_date,expectedDate:p.expected_date||null,subtotal:y,vatAmount:b,total:x,status:"pending",description:p.description||null,createdBy:t.id,createdAt:Ce(),updatedAt:Ce()})},onSuccess:()=>{n.invalidateQueries({queryKey:["purchase-orders",d]}),Z.success("Purchase order created successfully"),o(!1),u({vendor_id:"",order_number:`PO-${Date.now()}`,order_date:new Date().toISOString().split("T")[0],expected_date:"",amount:"",description:""})},onError:p=>{Z.error("Failed to create purchase order: "+p.message)}}),T=Xe({mutationFn:async p=>{await Ll(Ye(re,Y.PURCHASE_ORDERS,p))},onSuccess:()=>{n.invalidateQueries({queryKey:["purchase-orders",d]}),Z.success("Purchase order deleted successfully")},onError:p=>{Z.error("Failed to delete purchase order: "+p.message)}}),_=p=>{switch(p){case"received":return"default";case"pending":return"secondary";case"cancelled":return"destructive";default:return"outline"}},C=p=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(p),E=h==null?void 0:h.filter(p=>{var w,A;return p.order_number.toLowerCase().includes(r.toLowerCase())||((A=(w=p.vendors)==null?void 0:w.name)==null?void 0:A.toLowerCase().includes(r.toLowerCase()))});return f?i.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Purchase Orders"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage purchase orders to vendors"})]}),i.jsxs(Zn,{open:a,onOpenChange:o,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(W,{children:[i.jsx(_n,{className:"mr-2 h-4 w-4"}),"New Purchase Order"]})}),i.jsxs(Hn,{className:"max-w-lg",children:[i.jsx(Kn,{children:i.jsx(Gn,{children:"Create Purchase Order"})}),i.jsxs("form",{onSubmit:p=>{p.preventDefault(),S.mutate(c)},className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"vendor",children:"Vendor *"}),i.jsxs(Ct,{value:c.vendor_id,onValueChange:p=>u({...c,vendor_id:p}),children:[i.jsx(Et,{children:i.jsx(Pt,{placeholder:"Select vendor"})}),i.jsx(At,{children:m==null?void 0:m.map(p=>i.jsx(ye,{value:p.id,children:p.name},p.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"order_number",children:"PO Number"}),i.jsx(G,{id:"order_number",value:c.order_number,onChange:p=>u({...c,order_number:p.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"order_date",children:"Order Date *"}),i.jsx(G,{id:"order_date",type:"date",value:c.order_date,onChange:p=>u({...c,order_date:p.target.value}),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"expected_date",children:"Expected Delivery"}),i.jsx(G,{id:"expected_date",type:"date",value:c.expected_date,onChange:p=>u({...c,expected_date:p.target.value})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"amount",children:"Amount (ZMW) *"}),i.jsx(G,{id:"amount",type:"number",step:"0.01",value:c.amount,onChange:p=>u({...c,amount:p.target.value}),required:!0})]}),v&&i.jsxs("div",{className:"rounded-lg bg-muted p-3 space-y-1 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Subtotal:"}),i.jsx("span",{children:C(y)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{children:["VAT (",g,"%):"]}),i.jsx("span",{children:C(b)})]}),i.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[i.jsx("span",{children:"Total:"}),i.jsx("span",{children:C(x)})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"description",children:"Description"}),i.jsx(hr,{id:"description",value:c.description,onChange:p=>u({...c,description:p.target.value}),rows:2})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(W,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),i.jsx(W,{type:"submit",children:"Create Order"})]})]})]})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Ms,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{placeholder:"Search purchase orders...",value:r,onChange:p=>s(p.target.value),className:"pl-10"})]})})}),i.jsx(ne,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"PO #"}),i.jsx(q,{children:"Date"}),i.jsx(q,{children:"Vendor"}),i.jsx(q,{children:"Expected Delivery"}),i.jsx(q,{className:"text-right",children:"Total"}),i.jsx(q,{children:"Status"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ut,{children:[E==null?void 0:E.map(p=>{var w;return i.jsxs(ve,{children:[i.jsx(V,{className:"font-medium",children:p.order_number}),i.jsx(V,{children:ut(new Date(p.order_date),"dd MMM yyyy")}),i.jsx(V,{children:((w=p.vendors)==null?void 0:w.name)||"-"}),i.jsx(V,{children:p.expected_date?ut(new Date(p.expected_date),"dd MMM yyyy"):"-"}),i.jsx(V,{className:"text-right",children:C(Number(p.total))}),i.jsx(V,{children:i.jsx(Ve,{variant:_(p.status||"pending"),children:p.status})}),i.jsx(V,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(W,{variant:"ghost",size:"icon",onClick:()=>e("/bills"),title:"Convert to Bill",children:i.jsx(ur,{className:"h-4 w-4"})}),i.jsx(W,{variant:"ghost",size:"icon",onClick:()=>T.mutate(p.id),title:"Delete",children:i.jsx(Ds,{className:"h-4 w-4"})})]})})]},p.id)}),(E==null?void 0:E.length)===0&&i.jsx(ve,{children:i.jsx(V,{colSpan:7,className:"text-center text-muted-foreground py-8",children:"No purchase orders found. Create your first PO!"})})]})]})})]})]})}const Net=[{header:"Description",key:"description",required:!0,transform:Ss.trim},{header:"Category",key:"category",transform:Ss.trim},{header:"Amount",key:"amount",required:!0,transform:Ss.toNumber},{header:"Date",key:"expense_date",required:!0,transform:Ss.toDate},{header:"Vendor",key:"vendor_name",transform:Ss.trim},{header:"Payment Method",key:"payment_method",transform:Ss.trim},{header:"Reference",key:"reference_number",transform:Ss.trim},{header:"Notes",key:"notes",transform:Ss.trim}],Eet=[{header:"Date",key:"expense_date",formatter:oet},{header:"Description",key:"description"},{header:"Category",key:"category"},{header:"Vendor",key:"vendor_name"},{header:"Amount",key:"amount",formatter:aet},{header:"Payment Method",key:"payment_method"},{header:"Reference",key:"reference_number"},{header:"Notes",key:"notes"}];function Aet(){const{user:t}=ot(),{data:e}=Yl(),n=en(),[r,s]=N.useState(""),[a,o]=N.useState(!1),[l,c]=N.useState(!1),[u,d]=N.useState(null),h=["super_admin","admin","financial_manager","accountant","assistant_accountant"].includes(e||""),[f,m]=N.useState({description:"",category:"",amount:"",expense_date:new Date().toISOString().split("T")[0],vendor_name:"",payment_method:"cash",reference_number:"",notes:""}),{data:v}=we({queryKey:["expenses-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const O=await Fe.getPrimaryMembershipByUser(t.id);return(O==null?void 0:O.companyId)??null},enabled:!!t}),{data:g,isLoading:y}=we({queryKey:["expenses",v],queryFn:async()=>v?(await Te(je(ge(re,Y.EXPENSES),he("companyId","==",v)))).docs.map($=>{const D=$.data();return{id:$.id,description:String(D.description??""),category:D.category??null,amount:Number(D.amount??0),expense_date:String(D.expenseDate??D.expense_date??new Date().toISOString().slice(0,10)),vendor_name:D.vendorName??D.vendor_name??null,payment_method:D.paymentMethod??D.payment_method??null,reference_number:D.referenceNumber??D.reference_number??null,notes:D.notes??null,journal_entry_id:D.journalEntryId??D.journal_entry_id??null}}).sort(($,D)=>D.expense_date.localeCompare($.expense_date)):[],enabled:!!v}),{data:b=[]}=we({queryKey:["expense-category-mappings",v],queryFn:async()=>v?(await Te(je(ge(re,Y.EXPENSE_CATEGORY_MAPPINGS),he("companyId","==",v)))).docs.map($=>{const D=$.data();return{id:$.id,categoryName:String(D.categoryName??D.category_name??"")}}).filter($=>$.categoryName).sort(($,D)=>$.categoryName.localeCompare(D.categoryName)):[],enabled:!!v}),{data:x=[]}=we({queryKey:["expense-payment-accounts",v],queryFn:async()=>v?(await Te(je(ge(re,Y.CHART_OF_ACCOUNTS),he("companyId","==",v),he("accountType","==","Asset"),he("status","==","active")))).docs.map($=>{const D=$.data();return{id:$.id,accountName:String(D.accountName??"")}}).filter($=>$.accountName).sort(($,D)=>$.accountName.localeCompare(D.accountName)):[],enabled:!!v}),S=O=>{const $=O.toLowerCase();return $==="mobile_money"?"Mobile Money":$==="cash"?"Cash":$==="credit"?"Credit":"Bank"},T=O=>{if(!x.length)return"";const $=O.toLowerCase(),D=K=>{var ie;return((ie=x.find(ae=>K.some(_e=>ae.accountName.toLowerCase().includes(_e))))==null?void 0:ie.id)||""};return $==="cash"?D(["cash"])||x[0].id:$==="mobile_money"?D(["mobile","airtel","mtn"])||x[0].id:D(["bank"])||x[0].id},_=Xe({mutationFn:async O=>{if(!v||!t)throw new Error("Not authenticated");const $=T(O.payment_method);if(!$)throw new Error("No active Asset payment account found in Chart of Accounts.");if(!O.category)throw new Error("Expense category is required.");await Cn.recordExpense({companyId:v,amount:Number(O.amount),categoryName:O.category,paymentMethod:S(O.payment_method),paymentAccountId:$,expenseDate:O.expense_date,description:O.description})},onSuccess:()=>{n.invalidateQueries({queryKey:["expenses",v]}),n.invalidateQueries({queryKey:["dashboard"]}),n.invalidateQueries({queryKey:["bank-accounts"]}),Z.success("Expense recorded successfully"),p()},onError:O=>{Z.error("Failed to create expense: "+O.message)}}),C=Xe({mutationFn:async({id:O,data:$})=>(await xr(Ye(re,Y.EXPENSES,O),{description:$.description,category:$.category||null,amount:Number($.amount),expenseDate:$.expense_date,vendorName:$.vendor_name||null,paymentMethod:$.payment_method||null,referenceNumber:$.reference_number||null,notes:$.notes||null,updatedAt:Ce()},{merge:!0}),O),onSuccess:()=>{n.invalidateQueries({queryKey:["expenses",v]}),Z.success("Expense updated successfully"),p()},onError:O=>{Z.error("Failed to update expense: "+O.message)}}),E=Xe({mutationFn:async O=>{if(!v)throw new Error("Company not found");if(!O.journal_entry_id)throw new Error("Expense has no posted journal entry to reverse.");const $=prompt(`Reason for reversing expense "${O.description}" (optional):`)||void 0;return Cn.reverseJournalEntry({companyId:v,journalEntryId:O.journal_entry_id,reason:$})},onSuccess:()=>{n.invalidateQueries({queryKey:["expenses",v]}),n.invalidateQueries({queryKey:["bank-accounts"]}),n.invalidateQueries({queryKey:["journal-entries"]}),n.invalidateQueries({queryKey:["financial-reports"]}),n.invalidateQueries({queryKey:["dashboard"]}),Z.success("Expense journal entry reversed")},onError:O=>{Z.error("Failed to reverse expense: "+O.message)}}),p=()=>{m({description:"",category:"",amount:"",expense_date:new Date().toISOString().split("T")[0],vendor_name:"",payment_method:"cash",reference_number:"",notes:""}),d(null),o(!1)},w=O=>{var $;if(O.journal_entry_id){Z.error("Posted expenses cannot be edited directly.");return}d(O),m({description:O.description||"",category:O.category||"",amount:(($=O.amount)==null?void 0:$.toString())||"",expense_date:O.expense_date||new Date().toISOString().split("T")[0],vendor_name:O.vendor_name||"",payment_method:O.payment_method||"cash",reference_number:O.reference_number||"",notes:O.notes||""}),o(!0)},A=O=>{if(O.preventDefault(),u){if(u.journal_entry_id){Z.error("Posted expenses cannot be edited directly.");return}C.mutate({id:u.id,data:f})}else _.mutate(f)},P=O=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(O),I=O=>({"Office Supplies":"default",Travel:"secondary","Meals & Entertainment":"outline",Utilities:"default",Rent:"secondary"})[O]||"outline",k=g==null?void 0:g.filter(O=>{var $,D,K;return(($=O.description)==null?void 0:$.toLowerCase().includes(r.toLowerCase()))||((D=O.category)==null?void 0:D.toLowerCase().includes(r.toLowerCase()))||((K=O.vendor_name)==null?void 0:K.toLowerCase().includes(r.toLowerCase()))}),L=(g==null?void 0:g.reduce((O,$)=>O+Number($.amount||0),0))||0,U=async O=>{if(!(t!=null&&t.id)||!v)throw new Error("Not authenticated");for(const $ of O){const D=$,K=String(D.payment_method??"cash"),ie=T(K);if(!ie)throw new Error("No active Asset payment account found in Chart of Accounts.");await Cn.recordExpense({companyId:v,description:String(D.description??"").trim(),categoryName:D.category?String(D.category).trim():"Miscellaneous",amount:Number(D.amount??0),expenseDate:String(D.expense_date??new Date().toISOString().split("T")[0]),paymentMethod:S(K),paymentAccountId:ie})}n.invalidateQueries({queryKey:["expenses",v]}),n.invalidateQueries({queryKey:["dashboard"]}),n.invalidateQueries({queryKey:["bank-accounts"]}),Z.success(`Imported ${O.length} expenses`)},z=()=>{if(!g||g.length===0){Z.error("No expenses to export");return}nf(g,Eet,"expenses-export"),Z.success("Expenses exported")};return y?i.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Expenses"}),i.jsx("p",{className:"text-muted-foreground",children:"Track and manage business expenses"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(W,{variant:"outline",onClick:()=>c(!0),children:[i.jsx(Ho,{className:"mr-2 h-4 w-4"}),"Import"]}),i.jsxs(W,{variant:"outline",onClick:z,children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export"]}),i.jsxs(Zn,{open:a,onOpenChange:O=>{o(O),O||p()},children:[i.jsx(ns,{asChild:!0,children:i.jsxs(W,{children:[i.jsx(_n,{className:"mr-2 h-4 w-4"}),"Add Expense"]})}),i.jsxs(Hn,{className:"max-w-lg",children:[i.jsx(Kn,{children:i.jsx(Gn,{children:u?"Edit Expense":"Record New Expense"})}),i.jsxs("form",{onSubmit:A,className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2 md:col-span-2",children:[i.jsx(J,{htmlFor:"description",children:"Description *"}),i.jsx(G,{id:"description",value:f.description,onChange:O=>m({...f,description:O.target.value}),placeholder:"What was this expense for?",required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"category",children:"Category *"}),i.jsxs(Ct,{value:f.category,onValueChange:O=>m({...f,category:O}),children:[i.jsx(Et,{children:i.jsx(Pt,{placeholder:"Select category"})}),i.jsx(At,{children:b.map(O=>i.jsx(ye,{value:O.categoryName,children:O.categoryName},O.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"amount",children:"Amount (ZMW) *"}),i.jsx(G,{id:"amount",type:"number",step:"0.01",value:f.amount,onChange:O=>m({...f,amount:O.target.value}),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"expense_date",children:"Date *"}),i.jsx(G,{id:"expense_date",type:"date",value:f.expense_date,onChange:O=>m({...f,expense_date:O.target.value}),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"vendor_name",children:"Vendor/Payee"}),i.jsx(G,{id:"vendor_name",value:f.vendor_name,onChange:O=>m({...f,vendor_name:O.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"payment_method",children:"Payment Method"}),i.jsxs(Ct,{value:f.payment_method,onValueChange:O=>m({...f,payment_method:O}),children:[i.jsx(Et,{children:i.jsx(Pt,{})}),i.jsxs(At,{children:[i.jsx(ye,{value:"cash",children:"Cash"}),i.jsx(ye,{value:"bank_transfer",children:"Bank Transfer"}),i.jsx(ye,{value:"mobile_money",children:"Mobile Money"}),i.jsx(ye,{value:"cheque",children:"Cheque"}),i.jsx(ye,{value:"card",children:"Card"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"reference_number",children:"Reference #"}),i.jsx(G,{id:"reference_number",value:f.reference_number,onChange:O=>m({...f,reference_number:O.target.value}),placeholder:"Receipt/Invoice number"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"notes",children:"Notes"}),i.jsx(hr,{id:"notes",value:f.notes,onChange:O=>m({...f,notes:O.target.value}),rows:2})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(W,{type:"button",variant:"outline",onClick:p,children:"Cancel"}),i.jsxs(W,{type:"submit",children:[u?"Update":"Record"," Expense"]})]})]})]})]})]})]}),i.jsx(mg,{open:l,onOpenChange:c,title:"Import Expenses",description:"Upload a CSV file to import expenses in bulk",columns:Net,onImport:U}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[i.jsxs(Q,{children:[i.jsx(ee,{className:"pb-2",children:i.jsx(te,{className:"text-sm font-medium text-muted-foreground",children:"Total Expenses"})}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:P(L)})})]}),i.jsxs(Q,{children:[i.jsx(ee,{className:"pb-2",children:i.jsx(te,{className:"text-sm font-medium text-muted-foreground",children:"This Month"})}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:P((g==null?void 0:g.filter(O=>{const $=new Date(O.expense_date),D=new Date;return $.getMonth()===D.getMonth()&&$.getFullYear()===D.getFullYear()}).reduce((O,$)=>O+Number($.amount||0),0))||0)})})]}),i.jsxs(Q,{children:[i.jsx(ee,{className:"pb-2",children:i.jsx(te,{className:"text-sm font-medium text-muted-foreground",children:"Total Records"})}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:(g==null?void 0:g.length)||0})})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Ms,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{placeholder:"Search expenses...",value:r,onChange:O=>s(O.target.value),className:"pl-10"})]})})}),i.jsx(ne,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Date"}),i.jsx(q,{children:"Description"}),i.jsx(q,{children:"Category"}),i.jsx(q,{children:"Vendor"}),i.jsx(q,{className:"text-right",children:"Amount"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ut,{children:[k==null?void 0:k.map(O=>i.jsxs(ve,{children:[i.jsx(V,{children:ut(new Date(O.expense_date),"dd MMM yyyy")}),i.jsx(V,{className:"font-medium",children:O.description}),i.jsx(V,{children:i.jsx(Ve,{variant:I(O.category||""),children:O.category})}),i.jsx(V,{children:O.vendor_name||"-"}),i.jsx(V,{className:"text-right font-medium",children:P(Number(O.amount))}),i.jsx(V,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[O.journal_entry_id&&h&&i.jsx(W,{variant:"ghost",size:"icon",disabled:E.isPending,onClick:()=>{confirm("Reverse this expense posting? This creates an opposite journal entry.")&&E.mutate(O)},title:"Reverse expense posting",children:i.jsx(mh,{className:"h-4 w-4"})}),i.jsx(W,{variant:"ghost",size:"icon",onClick:()=>w(O),disabled:!!O.journal_entry_id,title:O.journal_entry_id?"Posted expenses cannot be edited":"Edit",children:i.jsx(Mp,{className:"h-4 w-4"})}),i.jsx(W,{variant:"ghost",size:"icon",onClick:()=>{Z.error("Expense deletion is blocked. Use a reversal journal workflow.")},disabled:!0,title:"Expense deletion is blocked",children:i.jsx(Ds,{className:"h-4 w-4"})})]})})]},O.id)),(k==null?void 0:k.length)===0&&i.jsx(ve,{children:i.jsx(V,{colSpan:6,className:"text-center text-muted-foreground py-8",children:"No expenses found. Record your first expense!"})})]})]})})]})]})}function Q6(){const t=en(),{user:e}=ot(),[n,r]=N.useState(""),[s,a]=N.useState(!1),[o,l]=N.useState(16),{data:c}=we({queryKey:["primary-membership",e==null?void 0:e.id],queryFn:async()=>e?Fe.getPrimaryMembershipByUser(e.id):null,enabled:!!e}),u=c==null?void 0:c.companyId,{data:d,isLoading:h}=we({queryKey:["company-settings",u],queryFn:async()=>u?Fe.getCompanySettings(u):null,enabled:!!u});N.useEffect(()=>{d&&(r(d.companyName||""),a(!!d.isVatRegistered),l(Number(d.vatRate??16)))},[d]);const f=Xe({mutationFn:async()=>{if(!u)throw new Error("No company linked to your account.");await Fe.updateCompanyBasics({companyId:u,name:n}),await xr(Ye(re,Y.COMPANY_SETTINGS,u),{companyId:u,companyName:n,isVatRegistered:s,vatRate:s?o:null,updatedAt:Ce()},{merge:!0})},onSuccess:()=>{t.invalidateQueries({queryKey:["company-settings",u]}),t.invalidateQueries({queryKey:["company-settings",e==null?void 0:e.id]}),Z.success("Settings saved successfully")},onError:m=>{Z.error("Failed to save settings: "+(m instanceof Error?m.message:"Unknown error"))}});return h?i.jsx("div",{children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Company Settings"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your company information and tax settings"})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[i.jsxs(Q,{children:[i.jsxs(ee,{children:[i.jsx(te,{children:"Company Information"}),i.jsx(dt,{children:"Basic company details and branding"})]}),i.jsxs(ne,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"company-name",children:"Company Name"}),i.jsx(G,{id:"company-name",value:n,onChange:m=>r(m.target.value),placeholder:"Enter company name"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Company Logo"}),i.jsx(XM,{})]})]})]}),i.jsxs(Q,{children:[i.jsxs(ee,{children:[i.jsx(te,{children:"VAT / Tax Settings"}),i.jsx(dt,{children:"Configure VAT registration for ZRA compliance"})]}),i.jsxs(ne,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx(J,{children:"VAT Registered"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Are you registered for VAT with ZRA?"})]}),i.jsx(us,{checked:s,onCheckedChange:a})]}),s&&i.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[i.jsx(J,{htmlFor:"vat-rate",children:"VAT Rate (%)"}),i.jsx(G,{id:"vat-rate",type:"number",value:o,onChange:m=>l(Number(m.target.value)),min:0,max:100}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Standard Zambian VAT rate is 16%"})]})]})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx(W,{onClick:()=>f.mutate(),disabled:f.isPending,children:f.isPending?"Saving...":"Save Settings"})})]})}const Tet=()=>{const t=Go();return N.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),i.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),i.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),i.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},Cet=()=>{const{user:t}=ot(),e=en(),[n,r]=N.useState(""),[s,a]=N.useState(!1),[o,l]=N.useState(!1),[c,u]=N.useState(null),[d,h]=N.useState({name:"",sku:"",category:"",description:"",unit_of_measure:"units",quantity_on_hand:0,reorder_point:0,unit_cost:0,selling_price:0}),[f,m]=N.useState({movement_type:"in",quantity:0,reference_number:"",notes:""}),{data:v}=we({queryKey:["inventory-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const p=await Fe.getPrimaryMembershipByUser(t.id);return(p==null?void 0:p.companyId)??null},enabled:!!t}),{data:g=[],isLoading:y}=we({queryKey:["inventory-items",v],queryFn:async()=>{if(!v)return[];const p=ge(re,Y.INVENTORY_ITEMS);return(await Te(je(p,he("companyId","==",v)))).docs.map(A=>{const P=A.data();return{id:A.id,name:String(P.name??""),sku:P.sku??null,category:P.category??null,description:P.description??null,unit_of_measure:P.unitOfMeasure??P.unit_of_measure??"units",quantity_on_hand:Number(P.quantityOnHand??P.quantity_on_hand??0),reorder_point:Number(P.reorderPoint??P.reorder_point??0),unit_cost:Number(P.unitCost??P.unit_cost??0),selling_price:Number(P.sellingPrice??P.selling_price??0)}}).sort((A,P)=>A.name.localeCompare(P.name))},enabled:!!v}),b=Xe({mutationFn:async p=>{if(!v||!t)throw new Error("No active company context");await es(ge(re,Y.INVENTORY_ITEMS),{companyId:v,name:p.name,sku:p.sku||null,category:p.category||null,description:p.description||null,unitOfMeasure:p.unit_of_measure||"units",quantityOnHand:p.quantity_on_hand,reorderPoint:p.reorder_point,unitCost:p.unit_cost,sellingPrice:p.selling_price,createdBy:t.id,createdAt:Ce(),updatedAt:Ce()})},onSuccess:()=>{e.invalidateQueries({queryKey:["inventory-items",v]}),Z.success("Item added successfully"),a(!1),h({name:"",sku:"",category:"",description:"",unit_of_measure:"units",quantity_on_hand:0,reorder_point:0,unit_cost:0,selling_price:0})},onError:p=>{Z.error(p.message)}}),x=Xe({mutationFn:async({itemId:p,movementData:w})=>{if(!v||!t)throw new Error("No active company context");const A=g.find(U=>U.id===p);if(!A)throw new Error("Item not found");let P=A.quantity_on_hand;w.movement_type==="in"?P+=w.quantity:w.movement_type==="out"?P-=w.quantity:P=w.quantity;const I=$l(re),k=Ye(ge(re,Y.STOCK_MOVEMENTS)),L=Ye(re,Y.INVENTORY_ITEMS,p);I.set(k,{companyId:v,inventoryItemId:p,movementType:w.movement_type,quantity:w.quantity,referenceNumber:w.reference_number||null,notes:w.notes||null,createdBy:t.id,createdAt:Ce()}),I.update(L,{quantityOnHand:P,updatedAt:Ce()}),await I.commit()},onSuccess:()=>{e.invalidateQueries({queryKey:["inventory-items",v]}),Z.success("Stock movement recorded"),l(!1),u(null),m({movement_type:"in",quantity:0,reference_number:"",notes:""})},onError:p=>{Z.error(p.message)}}),S=g.filter(p=>{var w,A;return p.name.toLowerCase().includes(n.toLowerCase())||((w=p.sku)==null?void 0:w.toLowerCase().includes(n.toLowerCase()))||((A=p.category)==null?void 0:A.toLowerCase().includes(n.toLowerCase()))}),T=g.filter(p=>p.quantity_on_hand<=p.reorder_point),_=g.reduce((p,w)=>p+w.quantity_on_hand*w.unit_cost,0),C=p=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(p),E=["Raw Materials","Finished Goods","Supplies","Equipment","Other"];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Inventory"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your stock and inventory items"})]}),i.jsxs(Zn,{open:s,onOpenChange:a,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(W,{children:[i.jsx(_n,{className:"mr-2 h-4 w-4"}),"Add Item"]})}),i.jsxs(Hn,{className:"max-w-2xl",children:[i.jsx(Kn,{children:i.jsx(Gn,{children:"Add Inventory Item"})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Item Name *"}),i.jsx(G,{value:d.name,onChange:p=>h({...d,name:p.target.value}),placeholder:"Enter item name"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"SKU"}),i.jsx(G,{value:d.sku,onChange:p=>h({...d,sku:p.target.value}),placeholder:"Stock Keeping Unit"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Category"}),i.jsxs(Ct,{value:d.category,onValueChange:p=>h({...d,category:p}),children:[i.jsx(Et,{children:i.jsx(Pt,{placeholder:"Select category"})}),i.jsx(At,{children:E.map(p=>i.jsx(ye,{value:p,children:p},p))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Unit of Measure"}),i.jsxs(Ct,{value:d.unit_of_measure,onValueChange:p=>h({...d,unit_of_measure:p}),children:[i.jsx(Et,{children:i.jsx(Pt,{})}),i.jsxs(At,{children:[i.jsx(ye,{value:"units",children:"Units"}),i.jsx(ye,{value:"kg",children:"Kilograms"}),i.jsx(ye,{value:"liters",children:"Liters"}),i.jsx(ye,{value:"meters",children:"Meters"}),i.jsx(ye,{value:"pieces",children:"Pieces"}),i.jsx(ye,{value:"boxes",children:"Boxes"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Initial Quantity"}),i.jsx(G,{type:"number",value:d.quantity_on_hand,onChange:p=>h({...d,quantity_on_hand:parseFloat(p.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Reorder Point"}),i.jsx(G,{type:"number",value:d.reorder_point,onChange:p=>h({...d,reorder_point:parseFloat(p.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Unit Cost (ZMW)"}),i.jsx(G,{type:"number",step:"0.01",value:d.unit_cost,onChange:p=>h({...d,unit_cost:parseFloat(p.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Selling Price (ZMW)"}),i.jsx(G,{type:"number",step:"0.01",value:d.selling_price,onChange:p=>h({...d,selling_price:parseFloat(p.target.value)||0})})]}),i.jsxs("div",{className:"col-span-2 space-y-2",children:[i.jsx(J,{children:"Description"}),i.jsx(G,{value:d.description,onChange:p=>h({...d,description:p.target.value}),placeholder:"Item description"})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(W,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),i.jsx(W,{onClick:()=>b.mutate(d),disabled:!d.name,children:"Add Item"})]})]})]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Total Items"}),i.jsx(sa,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:g.length})})]}),i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Total Value"}),i.jsx(sa,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:C(_)})})]}),i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Low Stock Items"}),i.jsx(eo,{className:"h-4 w-4 text-destructive"})]}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold text-destructive",children:T.length})})]}),i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Categories"}),i.jsx(sa,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:new Set(g.map(p=>p.category).filter(Boolean)).size})})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(te,{children:"Inventory Items"}),i.jsxs("div",{className:"relative w-64",children:[i.jsx(Ms,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"Search items...",value:n,onChange:p=>r(p.target.value),className:"pl-8"})]})]})}),i.jsx(ne,{children:y?i.jsx("p",{children:"Loading inventory..."}):S.length===0?i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No inventory items found. Add your first item to get started."}):i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Item Name"}),i.jsx(q,{children:"SKU"}),i.jsx(q,{children:"Category"}),i.jsx(q,{className:"text-right",children:"Qty on Hand"}),i.jsx(q,{className:"text-right",children:"Reorder Point"}),i.jsx(q,{className:"text-right",children:"Unit Cost"}),i.jsx(q,{className:"text-right",children:"Total Value"}),i.jsx(q,{children:"Status"}),i.jsx(q,{children:"Actions"})]})}),i.jsx(Ut,{children:S.map(p=>i.jsxs(ve,{children:[i.jsx(V,{className:"font-medium",children:p.name}),i.jsx(V,{children:p.sku||"-"}),i.jsx(V,{children:p.category||"-"}),i.jsxs(V,{className:"text-right",children:[p.quantity_on_hand," ",p.unit_of_measure]}),i.jsx(V,{className:"text-right",children:p.reorder_point}),i.jsx(V,{className:"text-right",children:C(p.unit_cost)}),i.jsx(V,{className:"text-right",children:C(p.quantity_on_hand*p.unit_cost)}),i.jsx(V,{children:p.quantity_on_hand<=p.reorder_point?i.jsx(Ve,{variant:"destructive",children:"Low Stock"}):i.jsx(Ve,{variant:"secondary",children:"In Stock"})}),i.jsx(V,{children:i.jsxs(W,{variant:"outline",size:"sm",onClick:()=>{u(p),l(!0)},children:[i.jsx(Doe,{className:"h-4 w-4 mr-1"}),"Adjust"]})})]},p.id))})]})})]}),i.jsx(Zn,{open:o,onOpenChange:l,children:i.jsxs(Hn,{children:[i.jsx(Kn,{children:i.jsxs(Gn,{children:["Stock Movement - ",c==null?void 0:c.name]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Movement Type"}),i.jsxs(Ct,{value:f.movement_type,onValueChange:p=>m({...f,movement_type:p}),children:[i.jsx(Et,{children:i.jsx(Pt,{})}),i.jsxs(At,{children:[i.jsx(ye,{value:"in",children:"Stock In (Add)"}),i.jsx(ye,{value:"out",children:"Stock Out (Remove)"}),i.jsx(ye,{value:"adjustment",children:"Adjustment (Set)"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Quantity"}),i.jsx(G,{type:"number",value:f.quantity,onChange:p=>m({...f,quantity:parseFloat(p.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Reference Number"}),i.jsx(G,{value:f.reference_number,onChange:p=>m({...f,reference_number:p.target.value}),placeholder:"PO#, Invoice#, etc."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Notes"}),i.jsx(G,{value:f.notes,onChange:p=>m({...f,notes:p.target.value}),placeholder:"Reason for adjustment"})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(W,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),i.jsx(W,{onClick:()=>c&&x.mutate({itemId:c.id,movementData:f}),disabled:f.quantity<=0,children:"Record Movement"})]})]})})]})},Pet=()=>{const{user:t}=ot(),e=en(),[n,r]=N.useState(!1),[s,a]=N.useState(!1),[o,l]=N.useState(null),[c,u]=N.useState({account_name:"",account_number:"",bank_name:"",branch:"",account_type:"checking",currency:"ZMW",opening_balance:0}),[d,h]=N.useState({transaction_type:"deposit",amount:0,description:"",reference_number:"",transaction_date:new Date().toISOString().split("T")[0]}),{data:f}=we({queryKey:["bank-accounts-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const T=await Fe.getPrimaryMembershipByUser(t.id);return(T==null?void 0:T.companyId)??null},enabled:!!t}),{data:m=[],isLoading:v}=we({queryKey:["bank-accounts",f],queryFn:async()=>{if(!f)return[];const T=ge(re,Y.BANK_ACCOUNTS);return(await Te(je(T,he("companyId","==",f)))).docs.map(C=>{const E=C.data();return{id:C.id,account_name:String(E.accountName??E.account_name??""),account_number:E.accountNumber??E.account_number??null,bank_name:String(E.bankName??E.bank_name??""),branch:E.branch??null,account_type:E.accountType??E.account_type??null,currency:E.currency??"ZMW",opening_balance:Number(E.openingBalance??E.opening_balance??0),current_balance:Number(E.currentBalance??E.current_balance??0),is_active:!!(E.isActive??E.is_active??!0)}}).sort((C,E)=>C.account_name.localeCompare(E.account_name))},enabled:!!f}),{data:g=[]}=we({queryKey:["bank-transactions",f,o==null?void 0:o.id],queryFn:async()=>{if(!o||!f)return[];const T=ge(re,Y.BANK_TRANSACTIONS);return(await Te(je(T,he("companyId","==",f),he("bankAccountId","==",o.id)))).docs.map(C=>{var A;const E=C.data(),p=E.transactionDate??E.transaction_date,w=typeof p=="string"?p:((A=p==null?void 0:p.toDate)==null?void 0:A.call(p).toISOString().slice(0,10))??"";return{id:C.id,bank_account_id:String(E.bankAccountId??E.bank_account_id??""),transaction_type:String(E.transactionType??E.transaction_type??""),amount:Number(E.amount??0),description:E.description??null,reference_number:E.referenceNumber??E.reference_number??null,transaction_date:w,is_reconciled:!!(E.isReconciled??E.is_reconciled??!1)}}).sort((C,E)=>E.transaction_date.localeCompare(C.transaction_date))},enabled:!!(o&&f)}),y=Xe({mutationFn:async T=>{if(!f||!t)throw new Error("No active company context");await es(ge(re,Y.BANK_ACCOUNTS),{companyId:f,accountName:T.account_name,accountNumber:T.account_number||null,bankName:T.bank_name,branch:T.branch||null,accountType:T.account_type||"checking",currency:T.currency||"ZMW",openingBalance:T.opening_balance,currentBalance:T.opening_balance,isActive:!0,createdBy:t.id,createdAt:Ce(),updatedAt:Ce()})},onSuccess:()=>{e.invalidateQueries({queryKey:["bank-accounts",f]}),Z.success("Bank account added successfully"),r(!1),u({account_name:"",account_number:"",bank_name:"",branch:"",account_type:"checking",currency:"ZMW",opening_balance:0})},onError:T=>{Z.error(T.message)}}),b=Xe({mutationFn:async T=>{if(!o||!f||!t)throw new Error("No account selected");const _=T.transaction_type==="deposit"?o.current_balance+T.amount:o.current_balance-T.amount,C=$l(re),E=Ye(ge(re,Y.BANK_TRANSACTIONS)),p=Ye(re,Y.BANK_ACCOUNTS,o.id);C.set(E,{companyId:f,bankAccountId:o.id,transactionType:T.transaction_type,amount:T.amount,description:T.description||null,referenceNumber:T.reference_number||null,transactionDate:T.transaction_date,isReconciled:!1,createdBy:t.id,createdAt:Ce(),updatedAt:Ce()}),C.update(p,{currentBalance:_,updatedAt:Ce()}),await C.commit()},onSuccess:()=>{e.invalidateQueries({queryKey:["bank-accounts",f]}),e.invalidateQueries({queryKey:["bank-transactions",f,o==null?void 0:o.id]}),Z.success("Transaction recorded"),a(!1),h({transaction_type:"deposit",amount:0,description:"",reference_number:"",transaction_date:new Date().toISOString().split("T")[0]})},onError:T=>{Z.error(T.message)}}),x=(T,_="ZMW")=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:_}).format(T),S=m.reduce((T,_)=>T+_.current_balance,0);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Bank Accounts"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your bank accounts and transactions"})]}),i.jsxs(Zn,{open:n,onOpenChange:r,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(W,{children:[i.jsx(_n,{className:"mr-2 h-4 w-4"}),"Add Account"]})}),i.jsxs(Hn,{children:[i.jsx(Kn,{children:i.jsx(Gn,{children:"Add Bank Account"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Account Name *"}),i.jsx(G,{value:c.account_name,onChange:T=>u({...c,account_name:T.target.value}),placeholder:"e.g., Main Operating Account"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Bank Name *"}),i.jsx(G,{value:c.bank_name,onChange:T=>u({...c,bank_name:T.target.value}),placeholder:"e.g., Zanaco, Stanbic, FNB"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Account Number"}),i.jsx(G,{value:c.account_number,onChange:T=>u({...c,account_number:T.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Branch"}),i.jsx(G,{value:c.branch,onChange:T=>u({...c,branch:T.target.value})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Account Type"}),i.jsxs(Ct,{value:c.account_type,onValueChange:T=>u({...c,account_type:T}),children:[i.jsx(Et,{children:i.jsx(Pt,{})}),i.jsxs(At,{children:[i.jsx(ye,{value:"checking",children:"Checking"}),i.jsx(ye,{value:"savings",children:"Savings"}),i.jsx(ye,{value:"money_market",children:"Money Market"}),i.jsx(ye,{value:"fixed_deposit",children:"Fixed Deposit"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Currency"}),i.jsxs(Ct,{value:c.currency,onValueChange:T=>u({...c,currency:T}),children:[i.jsx(Et,{children:i.jsx(Pt,{})}),i.jsxs(At,{children:[i.jsx(ye,{value:"ZMW",children:"ZMW - Zambian Kwacha"}),i.jsx(ye,{value:"USD",children:"USD - US Dollar"}),i.jsx(ye,{value:"EUR",children:"EUR - Euro"}),i.jsx(ye,{value:"GBP",children:"GBP - British Pound"})]})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Opening Balance"}),i.jsx(G,{type:"number",step:"0.01",value:c.opening_balance,onChange:T=>u({...c,opening_balance:parseFloat(T.target.value)||0})})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(W,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),i.jsx(W,{onClick:()=>y.mutate(c),disabled:!c.account_name||!c.bank_name,children:"Add Account"})]})]})]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Total Accounts"}),i.jsx($a,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:m.length})})]}),i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Total Balance"}),i.jsx($a,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:x(S)})})]}),i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Active Accounts"}),i.jsx($a,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:m.filter(T=>T.is_active).length})})]})]}),i.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"Bank Accounts"})}),i.jsx(ne,{children:v?i.jsx("p",{children:"Loading accounts..."}):m.length===0?i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No bank accounts found. Add your first account to get started."}):i.jsx("div",{className:"space-y-4",children:m.map(T=>i.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors ${(o==null?void 0:o.id)===T.id?"border-primary bg-primary/5":"hover:bg-muted/50"}`,onClick:()=>l(T),children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:T.account_name}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[T.bank_name," ",T.account_number?`- ${T.account_number}`:""]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-bold",children:x(T.current_balance,T.currency||"ZMW")}),i.jsx(Ve,{variant:T.is_active?"secondary":"outline",children:T.account_type})]})]})},T.id))})})]}),i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between",children:[i.jsx(te,{children:o?`Transactions - ${o.account_name}`:"Select an Account"}),o&&i.jsxs(Zn,{open:s,onOpenChange:a,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(W,{size:"sm",children:[i.jsx(_n,{className:"h-4 w-4 mr-1"}),"Add Transaction"]})}),i.jsxs(Hn,{children:[i.jsx(Kn,{children:i.jsx(Gn,{children:"Record Transaction"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Transaction Type"}),i.jsxs(Ct,{value:d.transaction_type,onValueChange:T=>h({...d,transaction_type:T}),children:[i.jsx(Et,{children:i.jsx(Pt,{})}),i.jsxs(At,{children:[i.jsx(ye,{value:"deposit",children:"Deposit"}),i.jsx(ye,{value:"withdrawal",children:"Withdrawal"}),i.jsx(ye,{value:"transfer",children:"Transfer"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Amount"}),i.jsx(G,{type:"number",step:"0.01",value:d.amount,onChange:T=>h({...d,amount:parseFloat(T.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Date"}),i.jsx(G,{type:"date",value:d.transaction_date,onChange:T=>h({...d,transaction_date:T.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Description"}),i.jsx(G,{value:d.description,onChange:T=>h({...d,description:T.target.value}),placeholder:"Transaction description"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Reference Number"}),i.jsx(G,{value:d.reference_number,onChange:T=>h({...d,reference_number:T.target.value}),placeholder:"Check#, Transfer#, etc."})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(W,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),i.jsx(W,{onClick:()=>b.mutate(d),disabled:d.amount<=0,children:"Record Transaction"})]})]})]})]}),i.jsx(ne,{children:o?g.length===0?i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No transactions recorded for this account"}):i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Date"}),i.jsx(q,{children:"Description"}),i.jsx(q,{className:"text-right",children:"Amount"})]})}),i.jsx(Ut,{children:g.slice(0,10).map(T=>i.jsxs(ve,{children:[i.jsx(V,{children:new Date(T.transaction_date).toLocaleDateString()}),i.jsx(V,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[T.transaction_type==="deposit"?i.jsx(Moe,{className:"h-4 w-4 text-green-500"}):i.jsx(t8,{className:"h-4 w-4 text-red-500"}),T.description||T.transaction_type]})}),i.jsxs(V,{className:`text-right font-medium ${T.transaction_type==="deposit"?"text-green-600":"text-red-600"}`,children:[T.transaction_type==="deposit"?"+":"-",x(T.amount)]})]},T.id))})]}):i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Select an account to view transactions"})})]})]})]})};var g1="Checkbox",[Iet,ztt]=ps(g1),[ket,ZM]=Iet(g1);function Ret(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:a,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:h}=t,[f,m]=Za({prop:n,defaultProp:s??!1,onChange:c,caller:g1}),[v,g]=N.useState(null),[y,b]=N.useState(null),x=N.useRef(!1),S=v?!!o||!!v.closest("form"):!0,T={checked:f,disabled:a,setChecked:m,control:v,setControl:g,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:x,required:u,defaultChecked:pu(s)?!1:s,isFormControl:S,bubbleInput:y,setBubbleInput:b};return i.jsx(ket,{scope:e,...T,children:Oet(h)?h(T):r})}var Ire="CheckboxTrigger",kre=N.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:a,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:m,bubbleInput:v}=ZM(Ire,t),g=Dt(s,d),y=N.useRef(c);return N.useEffect(()=>{const b=a==null?void 0:a.form;if(b){const x=()=>h(y.current);return b.addEventListener("reset",x),()=>b.removeEventListener("reset",x)}},[a,h]),i.jsx(Je.button,{type:"button",role:"checkbox","aria-checked":pu(c)?"mixed":c,"aria-required":u,"data-state":Lre(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:g,onKeyDown:ke(e,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:ke(n,b=>{h(x=>pu(x)?!0:!x),v&&m&&(f.current=b.isPropagationStopped(),f.current||b.stopPropagation())})})});kre.displayName=Ire;var JM=N.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:a,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...h}=t;return i.jsx(Ret,{__scopeCheckbox:n,checked:s,defaultChecked:a,disabled:l,required:o,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:f})=>i.jsxs(i.Fragment,{children:[i.jsx(kre,{...h,ref:e,__scopeCheckbox:n}),f&&i.jsx(Dre,{__scopeCheckbox:n})]})})});JM.displayName=g1;var Rre="CheckboxIndicator",Ore=N.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,a=ZM(Rre,n);return i.jsx(gs,{present:r||pu(a.checked)||a.checked===!0,children:i.jsx(Je.span,{"data-state":Lre(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});Ore.displayName=Rre;var Mre="CheckboxBubbleInput",Dre=N.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:a,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:h,bubbleInput:f,setBubbleInput:m}=ZM(Mre,t),v=Dt(n,m),g=$2(a),y=lR(r);N.useEffect(()=>{const x=f;if(!x)return;const S=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(S,"checked").set,C=!s.current;if(g!==a&&_){const E=new Event("click",{bubbles:C});x.indeterminate=pu(a),_.call(x,pu(a)?!1:a),x.dispatchEvent(E)}},[f,g,a,s]);const b=N.useRef(pu(a)?!1:a);return i.jsx(Je.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??b.current,required:l,disabled:c,name:u,value:d,form:h,...e,tabIndex:-1,ref:v,style:{...e.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Dre.displayName=Mre;function Oet(t){return typeof t=="function"}function pu(t){return t==="indeterminate"}function Lre(t){return pu(t)?"indeterminate":t?"checked":"unchecked"}const $re=N.forwardRef(({className:t,...e},n)=>i.jsx(JM,{ref:n,className:me("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:i.jsx(Ore,{className:me("flex items-center justify-center text-current"),children:i.jsx($x,{className:"h-4 w-4"})})}));$re.displayName=JM.displayName;const Met=()=>{const{user:t}=ot(),e=en(),[n,r]=N.useState(""),[s,a]=N.useState(0),[o,l]=N.useState(new Date().toISOString().split("T")[0]),[c,u]=N.useState(new Set),{data:d}=we({queryKey:["reconciliation-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const T=await Fe.getPrimaryMembershipByUser(t.id);return(T==null?void 0:T.companyId)??null},enabled:!!t}),{data:h=[]}=we({queryKey:["bank-accounts",d],queryFn:async()=>{if(!d)return[];const T=ge(re,Y.BANK_ACCOUNTS);return(await Te(je(T,he("companyId","==",d),he("isActive","==",!0)))).docs.map(C=>{const E=C.data();return{id:C.id,account_name:String(E.accountName??E.account_name??""),bank_name:String(E.bankName??E.bank_name??""),current_balance:Number(E.currentBalance??E.current_balance??0)}}).sort((C,E)=>C.account_name.localeCompare(E.account_name))},enabled:!!d}),{data:f=[]}=we({queryKey:["unreconciled-transactions",d,n],queryFn:async()=>{if(!n||!d)return[];const T=ge(re,Y.BANK_TRANSACTIONS);return(await Te(je(T,he("companyId","==",d),he("bankAccountId","==",n),he("isReconciled","==",!1)))).docs.map(C=>{var A;const E=C.data(),p=E.transactionDate??E.transaction_date,w=typeof p=="string"?p:((A=p==null?void 0:p.toDate)==null?void 0:A.call(p).toISOString().slice(0,10))??"";return{id:C.id,transaction_type:String(E.transactionType??E.transaction_type??""),amount:Number(E.amount??0),description:E.description??null,reference_number:E.referenceNumber??E.reference_number??null,transaction_date:w,is_reconciled:!!(E.isReconciled??E.is_reconciled??!1)}}).sort((C,E)=>E.transaction_date.localeCompare(C.transaction_date))},enabled:!!(n&&d)}),m=Xe({mutationFn:async()=>{if(!n||c.size===0||!d||!t)throw new Error("Please select transactions to reconcile");const T=Array.from(c),_=$l(re);T.forEach(p=>{const w=Ye(re,Y.BANK_TRANSACTIONS,p);_.update(w,{isReconciled:!0,reconciledDate:o,updatedAt:Ce()})});const C=h.find(p=>p.id===n),E=Ye(ge(re,Y.RECONCILIATIONS));_.set(E,{companyId:d,bankAccountId:n,reconciliationDate:o,statementBalance:s,bookBalance:(C==null?void 0:C.current_balance)||0,difference:s-((C==null?void 0:C.current_balance)||0),status:"completed",transactionIds:T,reconciledBy:t.id,createdAt:Ce(),updatedAt:Ce()}),await _.commit()},onSuccess:()=>{e.invalidateQueries({queryKey:["unreconciled-transactions",d,n]}),Z.success("Transactions reconciled successfully"),u(new Set)},onError:T=>{Z.error(T.message)}}),v=h.find(T=>T.id===n),g=f.filter(T=>c.has(T.id)).reduce((T,_)=>_.transaction_type==="deposit"?T+_.amount:T-_.amount,(v==null?void 0:v.current_balance)||0),y=s-g,b=T=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(T),x=T=>{const _=new Set(c);_.has(T)?_.delete(T):_.add(T),u(_)},S=()=>{c.size===f.length?u(new Set):u(new Set(f.map(T=>T.id)))};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Bank Reconciliation"}),i.jsx("p",{className:"text-muted-foreground",children:"Match your bank statement with recorded transactions"})]}),i.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[i.jsxs(Q,{className:"lg:col-span-1",children:[i.jsx(ee,{children:i.jsx(te,{children:"Reconciliation Setup"})}),i.jsxs(ne,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Bank Account"}),i.jsxs(Ct,{value:n,onValueChange:r,children:[i.jsx(Et,{children:i.jsx(Pt,{placeholder:"Select account"})}),i.jsx(At,{children:h.map(T=>i.jsxs(ye,{value:T.id,children:[T.account_name," (",T.bank_name,")"]},T.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Statement Date"}),i.jsx(G,{type:"date",value:o,onChange:T=>l(T.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Statement Ending Balance"}),i.jsx(G,{type:"number",step:"0.01",value:s,onChange:T=>a(parseFloat(T.target.value)||0),placeholder:"Enter balance from bank statement"})]}),v&&i.jsxs("div",{className:"pt-4 border-t space-y-3",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Book Balance:"}),i.jsx("span",{className:"font-medium",children:b(v.current_balance)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Cleared Balance:"}),i.jsx("span",{className:"font-medium",children:b(g)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Statement Balance:"}),i.jsx("span",{className:"font-medium",children:b(s)})]}),i.jsxs("div",{className:"flex justify-between font-semibold pt-2 border-t",children:[i.jsx("span",{children:"Difference:"}),i.jsx("span",{className:y===0?"text-green-600":"text-red-600",children:b(y)})]}),y===0?i.jsxs("div",{className:"flex items-center gap-2 text-green-600 text-sm",children:[i.jsx(Vo,{className:"h-4 w-4"}),i.jsx("span",{children:"Balanced! Ready to reconcile."})]}):i.jsxs("div",{className:"flex items-center gap-2 text-amber-600 text-sm",children:[i.jsx(ks,{className:"h-4 w-4"}),i.jsx("span",{children:"Difference must be zero to reconcile."})]})]}),i.jsxs(W,{className:"w-full",onClick:()=>m.mutate(),disabled:y!==0||c.size===0,children:[i.jsx(sle,{className:"h-4 w-4 mr-2"}),"Complete Reconciliation"]})]})]}),i.jsxs(Q,{className:"lg:col-span-2",children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between",children:[i.jsx(te,{children:"Unreconciled Transactions"}),f.length>0&&i.jsx(W,{variant:"outline",size:"sm",onClick:S,children:c.size===f.length?"Deselect All":"Select All"})]}),i.jsx(ne,{children:n?f.length===0?i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No unreconciled transactions for this account"}):i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{className:"w-12",children:"Clear"}),i.jsx(q,{children:"Date"}),i.jsx(q,{children:"Description"}),i.jsx(q,{children:"Reference"}),i.jsx(q,{children:"Type"}),i.jsx(q,{className:"text-right",children:"Amount"})]})}),i.jsx(Ut,{children:f.map(T=>i.jsxs(ve,{className:c.has(T.id)?"bg-primary/5":"",children:[i.jsx(V,{children:i.jsx($re,{checked:c.has(T.id),onCheckedChange:()=>x(T.id)})}),i.jsx(V,{children:new Date(T.transaction_date).toLocaleDateString()}),i.jsx(V,{children:T.description||"-"}),i.jsx(V,{children:T.reference_number||"-"}),i.jsx(V,{children:i.jsx(Ve,{variant:T.transaction_type==="deposit"?"secondary":"outline",children:T.transaction_type})}),i.jsxs(V,{className:`text-right font-medium ${T.transaction_type==="deposit"?"text-green-600":"text-red-600"}`,children:[T.transaction_type==="deposit"?"+":"-",b(T.amount)]})]},T.id))})]}):i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Select a bank account to view transactions"})})]})]})]})},Det=()=>{const{user:t}=ot(),e=en(),[n,r]=N.useState(""),[s,a]=N.useState(!1),[o,l]=N.useState(!1),[c,u]=N.useState({name:"",email:"",phone:"",specialty:"",hourly_rate:0,daily_rate:0,tpin:"",bank_name:"",bank_account_number:""}),[d,h]=N.useState({contractor_id:"",project_name:"",description:"",work_date:new Date().toISOString().split("T")[0],hours_worked:0,hourly_rate:0}),{data:f}=we({queryKey:["time-tracking-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const p=await Fe.getPrimaryMembershipByUser(t.id);return(p==null?void 0:p.companyId)??null},enabled:!!t}),{data:m=[],isLoading:v}=we({queryKey:["contractors",f],queryFn:async()=>{if(!f)return[];const p=ge(re,Y.CONTRACTORS);return(await Te(je(p,he("companyId","==",f)))).docs.map(A=>{const P=A.data();return{id:A.id,name:String(P.name??""),email:P.email??null,phone:P.phone??null,specialty:P.specialty??null,hourly_rate:Number(P.hourlyRate??P.hourly_rate??0),daily_rate:Number(P.dailyRate??P.daily_rate??0),tpin:P.tpin??null,bank_name:P.bankName??P.bank_name??null,bank_account_number:P.bankAccountNumber??P.bank_account_number??null,is_active:!!(P.isActive??P.is_active??!0)}}).sort((A,P)=>A.name.localeCompare(P.name))},enabled:!!f}),{data:g=[],isLoading:y}=we({queryKey:["time-entries",f],queryFn:async()=>{if(!f)return[];const[p,w]=await Promise.all([Te(je(ge(re,Y.TIME_ENTRIES),he("companyId","==",f))),Te(je(ge(re,Y.CONTRACTORS),he("companyId","==",f)))]),A=new Map;return w.docs.forEach(P=>{const I=P.data();A.set(P.id,String(I.name??""))}),p.docs.map(P=>{var z;const I=P.data(),k=I.workDate??I.work_date,L=typeof k=="string"?k:((z=k==null?void 0:k.toDate)==null?void 0:z.call(k).toISOString().slice(0,10))??"",U=I.contractorId??I.contractor_id??null;return{id:P.id,contractor_id:U,employee_id:I.employeeId??I.employee_id??null,project_name:I.projectName??I.project_name??null,description:I.description??null,work_date:L,hours_worked:Number(I.hoursWorked??I.hours_worked??0),hourly_rate:Number(I.hourlyRate??I.hourly_rate??0),total_amount:Number(I.totalAmount??I.total_amount??0),status:I.status??"pending",contractor:U?{name:A.get(U)||"-"}:void 0}}).sort((P,I)=>I.work_date.localeCompare(P.work_date))},enabled:!!f}),b=Xe({mutationFn:async p=>{if(!f||!t)throw new Error("No active company context");await es(ge(re,Y.CONTRACTORS),{companyId:f,name:p.name,email:p.email||null,phone:p.phone||null,specialty:p.specialty||null,hourlyRate:p.hourly_rate,dailyRate:p.daily_rate,tpin:p.tpin||null,bankName:p.bank_name||null,bankAccountNumber:p.bank_account_number||null,isActive:!0,createdBy:t.id,createdAt:Ce(),updatedAt:Ce()})},onSuccess:()=>{e.invalidateQueries({queryKey:["contractors",f]}),Z.success("Contractor added successfully"),a(!1),u({name:"",email:"",phone:"",specialty:"",hourly_rate:0,daily_rate:0,tpin:"",bank_name:"",bank_account_number:""})},onError:p=>{Z.error(p.message)}}),x=Xe({mutationFn:async p=>{if(!f||!t)throw new Error("No active company context");const w=p.hours_worked*p.hourly_rate;await es(ge(re,Y.TIME_ENTRIES),{companyId:f,contractorId:p.contractor_id||null,projectName:p.project_name||null,description:p.description||null,workDate:p.work_date,hoursWorked:p.hours_worked,hourlyRate:p.hourly_rate,totalAmount:w,status:"pending",createdBy:t.id,createdAt:Ce(),updatedAt:Ce()})},onSuccess:()=>{e.invalidateQueries({queryKey:["time-entries",f]}),Z.success("Time entry recorded"),l(!1),h({contractor_id:"",project_name:"",description:"",work_date:new Date().toISOString().split("T")[0],hours_worked:0,hourly_rate:0})},onError:p=>{Z.error(p.message)}}),S=Xe({mutationFn:async({id:p,status:w})=>{await xr(Ye(re,Y.TIME_ENTRIES,p),{status:w,updatedAt:Ce()},{merge:!0})},onSuccess:()=>{e.invalidateQueries({queryKey:["time-entries",f]}),Z.success("Status updated")},onError:p=>{Z.error(p.message)}}),T=m.filter(p=>{var w;return p.name.toLowerCase().includes(n.toLowerCase())||((w=p.specialty)==null?void 0:w.toLowerCase().includes(n.toLowerCase()))}),_=p=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(p),C=g.filter(p=>p.status==="pending").reduce((p,w)=>p+w.total_amount,0),E=g.filter(p=>{const w=new Date(p.work_date),A=new Date;return w.getMonth()===A.getMonth()&&w.getFullYear()===A.getFullYear()}).reduce((p,w)=>p+w.hours_worked,0);return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Time & Contractors"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage contractors and track time entries"})]})}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Active Contractors"}),i.jsx(ui,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:m.filter(p=>p.is_active).length})})]}),i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Hours This Month"}),i.jsx(Di,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:E.toFixed(1)})})]}),i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Pending Entries"}),i.jsx(Di,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:g.filter(p=>p.status==="pending").length})})]}),i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Pending Amount"}),i.jsx(Di,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:_(C)})})]})]}),i.jsxs(m1,{defaultValue:"contractors",children:[i.jsxs(Nb,{children:[i.jsx(Ya,{value:"contractors",children:"Contractors"}),i.jsx(Ya,{value:"time-entries",children:"Time Entries"})]}),i.jsxs(Qa,{value:"contractors",className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"relative w-64",children:[i.jsx(Ms,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"Search contractors...",value:n,onChange:p=>r(p.target.value),className:"pl-8"})]}),i.jsxs(Zn,{open:s,onOpenChange:a,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(W,{children:[i.jsx(_n,{className:"mr-2 h-4 w-4"}),"Add Contractor"]})}),i.jsxs(Hn,{className:"max-w-2xl",children:[i.jsx(Kn,{children:i.jsx(Gn,{children:"Add Contractor"})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Name *"}),i.jsx(G,{value:c.name,onChange:p=>u({...c,name:p.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Email"}),i.jsx(G,{type:"email",value:c.email,onChange:p=>u({...c,email:p.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Phone"}),i.jsx(G,{value:c.phone,onChange:p=>u({...c,phone:p.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Specialty"}),i.jsx(G,{value:c.specialty,onChange:p=>u({...c,specialty:p.target.value}),placeholder:"e.g., IT Consultant, Trainer"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Hourly Rate (ZMW)"}),i.jsx(G,{type:"number",step:"0.01",value:c.hourly_rate,onChange:p=>u({...c,hourly_rate:parseFloat(p.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Daily Rate (ZMW)"}),i.jsx(G,{type:"number",step:"0.01",value:c.daily_rate,onChange:p=>u({...c,daily_rate:parseFloat(p.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"TPIN"}),i.jsx(G,{value:c.tpin,onChange:p=>u({...c,tpin:p.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Bank Name"}),i.jsx(G,{value:c.bank_name,onChange:p=>u({...c,bank_name:p.target.value})})]}),i.jsxs("div",{className:"col-span-2 space-y-2",children:[i.jsx(J,{children:"Bank Account Number"}),i.jsx(G,{value:c.bank_account_number,onChange:p=>u({...c,bank_account_number:p.target.value})})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(W,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),i.jsx(W,{onClick:()=>b.mutate(c),disabled:!c.name,children:"Add Contractor"})]})]})]})]}),i.jsx(Q,{children:i.jsx(ne,{className:"pt-6",children:v?i.jsx("p",{children:"Loading contractors..."}):T.length===0?i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No contractors found."}):i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Name"}),i.jsx(q,{children:"Specialty"}),i.jsx(q,{children:"Contact"}),i.jsx(q,{className:"text-right",children:"Hourly Rate"}),i.jsx(q,{className:"text-right",children:"Daily Rate"}),i.jsx(q,{children:"Status"})]})}),i.jsx(Ut,{children:T.map(p=>i.jsxs(ve,{children:[i.jsx(V,{className:"font-medium",children:p.name}),i.jsx(V,{children:p.specialty||"-"}),i.jsx(V,{children:i.jsxs("div",{className:"text-sm",children:[p.email&&i.jsx("div",{children:p.email}),p.phone&&i.jsx("div",{children:p.phone})]})}),i.jsx(V,{className:"text-right",children:_(p.hourly_rate)}),i.jsx(V,{className:"text-right",children:_(p.daily_rate)}),i.jsx(V,{children:i.jsx(Ve,{variant:p.is_active?"secondary":"outline",children:p.is_active?"Active":"Inactive"})})]},p.id))})]})})})]}),i.jsxs(Qa,{value:"time-entries",className:"space-y-4",children:[i.jsx("div",{className:"flex justify-end",children:i.jsxs(Zn,{open:o,onOpenChange:l,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(W,{children:[i.jsx(_n,{className:"mr-2 h-4 w-4"}),"Record Time"]})}),i.jsxs(Hn,{children:[i.jsx(Kn,{children:i.jsx(Gn,{children:"Record Time Entry"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Contractor"}),i.jsxs(Ct,{value:d.contractor_id,onValueChange:p=>{const w=m.find(A=>A.id===p);h({...d,contractor_id:p,hourly_rate:(w==null?void 0:w.hourly_rate)||0})},children:[i.jsx(Et,{children:i.jsx(Pt,{placeholder:"Select contractor"})}),i.jsx(At,{children:m.filter(p=>p.is_active).map(p=>i.jsx(ye,{value:p.id,children:p.name},p.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Project Name"}),i.jsx(G,{value:d.project_name,onChange:p=>h({...d,project_name:p.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Work Date"}),i.jsx(G,{type:"date",value:d.work_date,onChange:p=>h({...d,work_date:p.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Hours Worked"}),i.jsx(G,{type:"number",step:"0.5",value:d.hours_worked,onChange:p=>h({...d,hours_worked:parseFloat(p.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Hourly Rate (ZMW)"}),i.jsx(G,{type:"number",step:"0.01",value:d.hourly_rate,onChange:p=>h({...d,hourly_rate:parseFloat(p.target.value)||0})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Description"}),i.jsx(G,{value:d.description,onChange:p=>h({...d,description:p.target.value}),placeholder:"Work performed"})]}),i.jsx("div",{className:"pt-2 border-t",children:i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Total Amount:"}),i.jsx("span",{className:"font-bold",children:_(d.hours_worked*d.hourly_rate)})]})})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(W,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),i.jsx(W,{onClick:()=>x.mutate(d),disabled:d.hours_worked<=0,children:"Record Entry"})]})]})]})}),i.jsx(Q,{children:i.jsx(ne,{className:"pt-6",children:y?i.jsx("p",{children:"Loading time entries..."}):g.length===0?i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No time entries found."}):i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Date"}),i.jsx(q,{children:"Contractor"}),i.jsx(q,{children:"Project"}),i.jsx(q,{className:"text-right",children:"Hours"}),i.jsx(q,{className:"text-right",children:"Rate"}),i.jsx(q,{className:"text-right",children:"Amount"}),i.jsx(q,{children:"Status"}),i.jsx(q,{children:"Actions"})]})}),i.jsx(Ut,{children:g.map(p=>{var w;return i.jsxs(ve,{children:[i.jsx(V,{children:new Date(p.work_date).toLocaleDateString()}),i.jsx(V,{children:((w=p.contractor)==null?void 0:w.name)||"-"}),i.jsx(V,{children:p.project_name||"-"}),i.jsx(V,{className:"text-right",children:p.hours_worked}),i.jsx(V,{className:"text-right",children:_(p.hourly_rate)}),i.jsx(V,{className:"text-right font-medium",children:_(p.total_amount)}),i.jsx(V,{children:i.jsx(Ve,{variant:p.status==="paid"?"secondary":p.status==="approved"?"default":"outline",children:p.status})}),i.jsxs(V,{children:[p.status==="pending"&&i.jsx(W,{size:"sm",variant:"outline",onClick:()=>S.mutate({id:p.id,status:"approved"}),children:"Approve"}),p.status==="approved"&&i.jsx(W,{size:"sm",variant:"outline",onClick:()=>S.mutate({id:p.id,status:"paid"}),children:"Mark Paid"})]})]},p.id)})})]})})})]})]})]})},bf={super_admin:{label:"Super Admin",description:"Full system access, can manage all users and settings",color:"bg-red-500"},admin:{label:"Admin",description:"Can manage most settings and users",color:"bg-orange-500"},financial_manager:{label:"Financial Manager",description:"Oversees all financial operations and approvals",color:"bg-rose-500"},accountant:{label:"Accountant",description:"Full access to financial records, reports, and transactions",color:"bg-blue-500"},assistant_accountant:{label:"Assistant Accountant",description:"Assists with bookkeeping and data entry under supervision",color:"bg-sky-500"},finance_officer:{label:"Finance Officer",description:"Can manage invoices, bills, and expenses",color:"bg-cyan-500"},bookkeeper:{label:"Bookkeeper",description:"Can record transactions and reconcile accounts",color:"bg-teal-500"},cashier:{label:"Cashier",description:"Handles cash transactions and petty cash management",color:"bg-emerald-500"},inventory_manager:{label:"Inventory Manager",description:"Can manage inventory and stock movements",color:"bg-green-500"},hr_manager:{label:"HR Manager",description:"Can manage employees and payroll",color:"bg-purple-500"},project_manager:{label:"Project Manager",description:"Can manage projects and grants",color:"bg-indigo-500"},auditor:{label:"Auditor",description:"Read-only access to all financial records for auditing",color:"bg-yellow-500"},staff:{label:"Staff",description:"Basic access for regular employees",color:"bg-slate-500"},read_only:{label:"Read Only",description:"Can only view data, no editing permissions",color:"bg-gray-500"}},MA=["super_admin","admin","financial_manager","accountant","assistant_accountant","finance_officer","bookkeeper","cashier","inventory_manager","hr_manager","project_manager","auditor","staff","read_only"];function Let(){const{user:t}=ot(),{data:e}=Yl(),[n,r]=N.useState(!1),[s,a]=N.useState(""),[o,l]=N.useState(""),[c,u]=N.useState("finance_officer"),[d,h]=N.useState(null),{data:f}=we({queryKey:["primary-membership",t==null?void 0:t.uid],queryFn:()=>t?Fe.getPrimaryMembershipByUser(t.uid):null,enabled:!!t}),m=f==null?void 0:f.companyId,v=en(),{data:g,isLoading:y,error:b}=we({queryKey:["company-users",m],queryFn:async()=>m?Fe.listCompanyUsers(m):[],enabled:!!m}),x=Xe({mutationFn:async({userId:A,newRole:P})=>{if(!m)throw new Error("No company ID found");await Fe.updateUserRole({companyId:m,userId:A,newRole:P})},onSuccess:()=>{v.invalidateQueries({queryKey:["company-users",m]}),Z.success("User role updated successfully"),h(null)},onError:A=>{Z.error("Failed to update role: "+(A instanceof Error?A.message:"Unknown error"))}}),S=Xe({mutationFn:async A=>{if(!m)throw new Error("No company ID found");await Fe.removeCompanyUser({companyId:m,userId:A})},onSuccess:()=>{v.invalidateQueries({queryKey:["company-users",m]}),Z.success("User removed successfully")},onError:A=>{Z.error("Failed to remove user: "+(A instanceof Error?A.message:"Unknown error"))}}),T=Xe({mutationFn:async({userId:A,action:P})=>{if(!m)throw new Error("No company ID found");P==="suspend"?await Fe.suspendUser({companyId:m,userId:A}):await Fe.reactivateUser({companyId:m,userId:A})},onSuccess:()=>{v.invalidateQueries({queryKey:["company-users",m]}),Z.success("User status updated successfully")},onError:A=>{Z.error("Failed to update status: "+(A instanceof Error?A.message:"Unknown error"))}}),_=Xe({mutationFn:async A=>{if(!m)throw new Error("No company ID found");await Fe.revokeInvitation({companyId:m,invitationId:A})},onSuccess:()=>{v.invalidateQueries({queryKey:["company-users",m]}),Z.success("Invitation revoked")},onError:A=>{Z.error("Failed to revoke: "+(A instanceof Error?A.message:"Unknown error"))}}),C=Xe({mutationFn:async()=>{if(!s)throw new Error("Email is required");if(!m)throw new Error("No company ID found");await Ps.sendInvitation({email:s,role:c,inviteeName:o,companyId:m,loginUrl:`${window.location.origin}/auth`})},onSuccess:()=>{Z.success("Invitation sent successfully"),a(""),l(""),u("finance_officer"),r(!1)},onError:A=>{Z.error("Failed to send invite: "+(A instanceof Error?A.message:"Unknown error"))}}),E=e==="super_admin"||e==="admin",p=A=>{const P=bf[A];return i.jsx(Ve,{className:`${P.color} text-white hover:${P.color}`,children:P.label})},w=A=>A.fullName||A.email||A.userId||"Unknown User";return!t||!m&&!y?i.jsx("div",{className:"flex items-center justify-center py-20",children:i.jsx(En,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Users & Roles"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage user access and permissions like QuickBooks"})]}),E&&i.jsxs(Zn,{open:n,onOpenChange:r,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(W,{children:[i.jsx(ole,{className:"mr-2 h-4 w-4"}),"Invite User"]})}),i.jsxs(Hn,{children:[i.jsxs(Kn,{children:[i.jsx(Gn,{children:"Invite New User"}),i.jsx(od,{children:"Send an invitation to a new user with a specific role"})]}),i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"name",children:"Full Name"}),i.jsx(G,{id:"name",type:"text",placeholder:"Jane Doe",value:o,onChange:A=>l(A.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"email",children:"Email Address"}),i.jsx(G,{id:"email",type:"email",placeholder:"user@example.com",value:s,onChange:A=>a(A.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"role",children:"Role"}),i.jsxs(Ct,{value:c,onValueChange:A=>u(A),children:[i.jsx(Et,{children:i.jsx(Pt,{})}),i.jsx(At,{children:MA.map(A=>i.jsx(ye,{value:A,children:i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("span",{children:bf[A].label})})},A))})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:bf[c].description})]})]}),i.jsxs(p1,{children:[i.jsx(W,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),i.jsx(W,{onClick:()=>C.mutate(),disabled:C.isPending,children:C.isPending?i.jsxs(i.Fragment,{children:[i.jsx(En,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):"Send Invitation"})]})]})]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Total Users"}),i.jsx(ui,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:(g==null?void 0:g.length)||0})})]}),i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Admins"}),i.jsx(gh,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:(g==null?void 0:g.filter(A=>A.role==="super_admin"||A.role==="admin").length)||0})})]}),i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Accountants"}),i.jsx(ui,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:(g==null?void 0:g.filter(A=>["accountant","finance_officer","bookkeeper"].includes(A.role)).length)||0})})]}),i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Your Role"}),i.jsx(gh,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(ne,{children:e&&p(e)})]})]}),i.jsxs(Q,{children:[i.jsxs(ee,{children:[i.jsx(te,{children:"All Users"}),i.jsx(dt,{children:"Manage user roles and permissions across your organization"})]}),i.jsx(ne,{children:y?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx(En,{className:"h-8 w-8 animate-spin text-primary"})}):b?i.jsx("div",{className:"p-4 text-red-500 text-center",children:"Failed to load users. Please try again."}):i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"User"}),i.jsx(q,{children:"Role"}),i.jsx(q,{children:"Status"}),i.jsx(q,{children:"Added"}),E&&i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ut,{children:[g==null?void 0:g.map(A=>i.jsxs(ve,{children:[i.jsx(V,{children:i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"font-medium",children:w(A)}),A.email&&i.jsx("span",{className:"text-sm text-muted-foreground",children:A.email}),A.status==="invited"&&i.jsx("span",{className:"text-xs text-amber-500 font-mono",children:"Invitation Pending"})]})}),i.jsx(V,{children:(d==null?void 0:d.id)===A.id&&A.status!=="invited"?i.jsxs(Ct,{value:d.role,onValueChange:P=>h({...d,role:P}),children:[i.jsx(Et,{className:"w-48",children:i.jsx(Pt,{})}),i.jsx(At,{children:MA.map(P=>i.jsx(ye,{value:P,children:bf[P].label},P))})]}):i.jsxs("div",{className:"space-y-1",children:[p(A.role),i.jsx("p",{className:"text-xs text-muted-foreground",children:bf[A.role].description})]})}),i.jsx(V,{children:i.jsx(Ve,{variant:A.status==="active"?"default":A.status==="invited"?"outline":"destructive",children:A.status==="invited"?"Pending":A.status})}),i.jsx(V,{children:A.createdAt?new Date(A.createdAt).toLocaleDateString():"-"}),E&&i.jsx(V,{className:"text-right",children:(d==null?void 0:d.id)===A.id?i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(W,{size:"sm",onClick:()=>x.mutate({userId:A.userId,newRole:d.role}),disabled:x.isPending,children:x.isPending?i.jsx(En,{className:"h-4 w-4 animate-spin"}):"Save"}),i.jsx(W,{size:"sm",variant:"outline",onClick:()=>h(null),children:"Cancel"})]}):i.jsx("div",{className:"flex justify-end gap-2",children:A.status==="invited"?i.jsx(W,{size:"sm",variant:"destructive",onClick:()=>{confirm("Revoke this invitation? The link will no longer work.")&&_.mutate(A.id)},disabled:_.isPending,children:"Revoke"}):i.jsxs(i.Fragment,{children:[i.jsx(W,{size:"sm",variant:"outline",onClick:()=>h(A),children:i.jsx(rle,{className:"h-4 w-4"})}),A.status==="suspended"?i.jsx(W,{size:"sm",variant:"outline",className:"text-green-600 hover:text-green-700 hover:bg-green-50",onClick:()=>T.mutate({userId:A.userId,action:"reactivate"}),disabled:T.isPending,children:"Activate"}):i.jsx(W,{size:"sm",variant:"outline",className:"text-orange-600 hover:text-orange-700 hover:bg-orange-50",onClick:()=>{confirm("Suspend this user? They will lose access immediately.")&&T.mutate({userId:A.userId,action:"suspend"})},disabled:T.isPending||A.role==="super_admin",children:"Suspend"}),i.jsx(W,{size:"sm",variant:"destructive",onClick:()=>{confirm("Permanently remove this user? This cannot be undone.")&&S.mutate(A.userId)},disabled:A.role==="super_admin"||S.isPending,children:i.jsx(Ds,{className:"h-4 w-4"})})]})})})]},A.id)),(!g||g.length===0)&&i.jsx(ve,{children:i.jsx(V,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No users found"})})]})]})})]}),i.jsxs(Q,{children:[i.jsxs(ee,{children:[i.jsx(te,{children:"Role Permissions Reference"}),i.jsx(dt,{children:"Understanding what each role can access"})]}),i.jsx(ne,{children:i.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:MA.map(A=>i.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border",children:[p(A),i.jsx("div",{children:i.jsx("p",{className:"text-sm text-muted-foreground",children:bf[A].description})})]},A))})})]})]})}const X6={in_progress:{label:"In Progress",dotClass:"bg-warning",badgeClass:"border-warning/30 bg-warning/15 text-warning"},behind:{label:"Behind",dotClass:"bg-destructive",badgeClass:"border-destructive/30 bg-destructive/10 text-destructive"},on_track:{label:"On Track",dotClass:"bg-success",badgeClass:"border-success/30 bg-success/10 text-success"},completed:{label:"Completed",dotClass:"bg-sky-600",badgeClass:"border-sky-300 bg-sky-50 text-sky-700"}};function $et(){const{user:t}=ot(),e=en(),[n,r]=N.useState(!1),[s,a]=N.useState(null),[o,l]=N.useState({name:"",code:"",description:"",status:"active",start_date:"",end_date:"",budget:"",donor_name:"",grant_reference:"",current_phase:"Initiation"}),c=w=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(w),{data:u}=we({queryKey:["projects-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const w=await Fe.getPrimaryMembershipByUser(t.id);return(w==null?void 0:w.companyId)??null},enabled:!!t}),{data:d=[],isLoading:h}=we({queryKey:["projects",u],queryFn:async()=>{if(!u)return[];const w=ge(re,Y.PROJECTS);return(await Te(je(w,he("companyId","==",u)))).docs.map(P=>{var U;const I=P.data(),k=I.createdAt??I.created_at,L=typeof k=="string"?k:((U=k==null?void 0:k.toDate)==null?void 0:U.call(k).toISOString())??new Date().toISOString();return{id:P.id,name:String(I.name??""),code:I.code??null,description:I.description??null,status:I.status??"active",start_date:I.startDate??I.start_date??null,end_date:I.endDate??I.end_date??null,budget:Number(I.budget??0),spent:Number(I.spent??0),donor_name:I.donorName??I.donor_name??null,grant_reference:I.grantReference??I.grant_reference??null,current_phase:I.currentPhase??I.current_phase??null,created_by:I.createdBy??I.created_by??null,created_at:L}}).sort((P,I)=>I.created_at.localeCompare(P.created_at))},enabled:!!u,refetchInterval:2e4}),{data:f=[]}=we({queryKey:["project-activity-logs",u],queryFn:async()=>u?ml.listByCompany(u,{limitCount:3e3}):[],enabled:!!u,refetchInterval:15e3}),m=N.useMemo(()=>LTe(d,f),[d,f]),v=Xe({mutationFn:async w=>{if(!u||!t)throw new Error("No active company context");const A=await es(ge(re,Y.PROJECTS),{companyId:u,name:w.name,code:w.code||null,description:w.description||null,status:w.status,currentPhase:w.current_phase||"Initiation",startDate:w.start_date||null,endDate:w.end_date||null,budget:w.budget?Number.parseFloat(w.budget):0,spent:0,donorName:w.donor_name||null,grantReference:w.grant_reference||null,createdBy:t.id,createdAt:Ce(),updatedAt:Ce()});await ml.create({companyId:u,projectId:A.id,activity:"Project Created",description:`${w.name} workspace created`,source:"Projects Dashboard",sourceType:Y.PROJECTS,sourceId:A.id,phase:w.current_phase||"Initiation",status:"pending",approvalStatus:"pending",appliedToSection:"Project Setup",implemented:!1,createdBy:t.id})},onSuccess:()=>{e.invalidateQueries({queryKey:["projects",u]}),e.invalidateQueries({queryKey:["project-activity-logs",u]}),Z.success("Project created successfully"),b()},onError:w=>{Z.error("Failed to create project: "+w.message)}}),g=Xe({mutationFn:async({id:w,data:A})=>{if(!u||!t)throw new Error("No active company context");await xr(Ye(re,Y.PROJECTS,w),{name:A.name,code:A.code||null,description:A.description||null,status:A.status,currentPhase:A.current_phase||"Initiation",startDate:A.start_date||null,endDate:A.end_date||null,budget:A.budget?Number.parseFloat(A.budget):0,donorName:A.donor_name||null,grantReference:A.grant_reference||null,updatedAt:Ce()},{merge:!0}),await ml.create({companyId:u,projectId:w,activity:"Project Updated",description:`${A.name} details updated`,source:"Projects Dashboard",sourceType:Y.PROJECTS,sourceId:w,phase:A.current_phase||"Initiation",status:A.status==="completed"?"completed":"implemented",approvalStatus:A.status==="completed"?"approved":null,appliedToSection:"Project Plan",milestoneName:A.status==="completed"?"Project Completion":null,milestoneAchieved:A.status==="completed",implemented:!0,createdBy:t.id})},onSuccess:()=>{e.invalidateQueries({queryKey:["projects",u]}),e.invalidateQueries({queryKey:["project-activity-logs",u]}),Z.success("Project updated successfully"),b()},onError:w=>{Z.error("Failed to update project: "+w.message)}}),y=Xe({mutationFn:async w=>{if(!u||!t)throw new Error("No active company context");await ml.create({companyId:u,projectId:w.id,activity:"Project Removed",description:`${w.name} was removed from active projects`,source:"Projects Dashboard",sourceType:Y.PROJECTS,sourceId:w.id,phase:w.current_phase,status:"implemented",appliedToSection:"Project Setup",implemented:!0,createdBy:t.id}),await Ll(Ye(re,Y.PROJECTS,w.id))},onSuccess:()=>{e.invalidateQueries({queryKey:["projects",u]}),e.invalidateQueries({queryKey:["project-activity-logs",u]}),Z.success("Project deleted successfully")},onError:w=>{Z.error("Failed to delete project: "+w.message)}}),b=()=>{l({name:"",code:"",description:"",status:"active",start_date:"",end_date:"",budget:"",donor_name:"",grant_reference:"",current_phase:"Initiation"}),a(null),r(!1)},x=w=>{var A;a(w),l({name:w.name,code:w.code||"",description:w.description||"",status:w.status||"active",start_date:w.start_date||"",end_date:w.end_date||"",budget:((A=w.budget)==null?void 0:A.toString())||"",donor_name:w.donor_name||"",grant_reference:w.grant_reference||"",current_phase:w.current_phase||"Initiation"}),r(!0)},S=w=>{if(w.preventDefault(),s){g.mutate({id:s.id,data:o});return}v.mutate(o)},T=()=>{if(d.length===0)return;const w=["Project Code","Name","Donor","Grant Reference","Status","Current Phase","Completion","Progress Status","Start Date","End Date","Budget","Spent","Remaining"],A=d.map(U=>{const z=m.get(U.id);return[U.code||"",U.name,U.donor_name||"",U.grant_reference||"",U.status||"",(z==null?void 0:z.currentPhase)||U.current_phase||"Initiation",`${(z==null?void 0:z.completion)??0}%`,z?X6[z.status].label:"In Progress",U.start_date||"",U.end_date||"",U.budget||0,U.spent||0,(U.budget||0)-(U.spent||0)]}),P=[w,...A].map(U=>U.map(z=>`"${String(z).replaceAll('"','""')}"`).join(",")).join(`
`),I=new Blob([P],{type:"text/csv"}),k=window.URL.createObjectURL(I),L=document.createElement("a");L.href=k,L.download="projects-grants.csv",L.click(),window.URL.revokeObjectURL(k)},_=d.reduce((w,A)=>w+(A.budget||0),0),C=d.reduce((w,A)=>w+(A.spent||0),0),E=d.filter(w=>w.status==="active").length,p=d.length?Math.round(d.reduce((w,A)=>{var P;return w+(((P=m.get(A.id))==null?void 0:P.completion)||0)},0)/d.length):0;return h?i.jsx("div",{className:"flex h-64 items-center justify-center",children:"Loading..."}):i.jsxs("div",{className:"w-full space-y-6",children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Projects & Grants"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage donor-funded projects and track real-time progression"})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsxs(W,{variant:"outline",onClick:T,disabled:d.length===0,children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export CSV"]}),i.jsxs(Zn,{open:n,onOpenChange:r,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(W,{onClick:()=>{b(),r(!0)},children:[i.jsx(_n,{className:"mr-2 h-4 w-4"}),"Add Project"]})}),i.jsxs(Hn,{className:"max-w-2xl",children:[i.jsx(Kn,{children:i.jsx(Gn,{children:s?"Edit Project":"Add New Project"})}),i.jsxs("form",{onSubmit:S,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Project Name *"}),i.jsx(G,{value:o.name,onChange:w=>l({...o,name:w.target.value}),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Project Code"}),i.jsx(G,{value:o.code,onChange:w=>l({...o,code:w.target.value}),placeholder:"e.g., PRJ-001"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Description"}),i.jsx(hr,{value:o.description,onChange:w=>l({...o,description:w.target.value}),rows:3})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Donor Name"}),i.jsx(G,{value:o.donor_name,onChange:w=>l({...o,donor_name:w.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Grant Reference"}),i.jsx(G,{value:o.grant_reference,onChange:w=>l({...o,grant_reference:w.target.value})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Status"}),i.jsxs(Ct,{value:o.status,onValueChange:w=>l({...o,status:w}),children:[i.jsx(Et,{children:i.jsx(Pt,{})}),i.jsxs(At,{children:[i.jsx(ye,{value:"active",children:"Active"}),i.jsx(ye,{value:"completed",children:"Completed"}),i.jsx(ye,{value:"on_hold",children:"On Hold"}),i.jsx(ye,{value:"cancelled",children:"Cancelled"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Current Phase"}),i.jsxs(Ct,{value:o.current_phase,onValueChange:w=>l({...o,current_phase:w}),children:[i.jsx(Et,{children:i.jsx(Pt,{})}),i.jsx(At,{children:ITe.map(w=>i.jsx(ye,{value:w,children:w},w))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Budget (ZMW)"}),i.jsx(G,{type:"number",step:"0.01",value:o.budget,onChange:w=>l({...o,budget:w.target.value})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Start Date"}),i.jsx(G,{type:"date",value:o.start_date,onChange:w=>l({...o,start_date:w.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"End Date"}),i.jsx(G,{type:"date",value:o.end_date,onChange:w=>l({...o,end_date:w.target.value})})]})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(W,{type:"button",variant:"outline",onClick:b,children:"Cancel"}),i.jsxs(W,{type:"submit",children:[s?"Update":"Create"," Project"]})]})]})]})]})]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(Q,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(te,{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx(a8,{className:"h-4 w-4"}),"Total Projects"]})}),i.jsxs(ne,{children:[i.jsx("div",{className:"text-2xl font-bold",children:d.length}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[E," active"]})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(te,{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx(Xn,{className:"h-4 w-4"}),"Average Completion"]})}),i.jsxs(ne,{children:[i.jsxs("div",{className:"text-2xl font-bold",children:[p,"%"]}),i.jsx(mu,{value:p,className:"mt-2 h-2"})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(te,{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx(Xn,{className:"h-4 w-4"}),"Total Budget"]})}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:c(_)})})]}),i.jsxs(Q,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(te,{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx(Xn,{className:"h-4 w-4"}),"Remaining"]})}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:c(_-C)})})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"All Projects"})}),i.jsx(ne,{children:i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs(Vt,{className:"min-w-[1320px]",children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Code"}),i.jsx(q,{children:"Name"}),i.jsx(q,{children:"Donor"}),i.jsx(q,{children:"Current Phase"}),i.jsx(q,{children:"Progress"}),i.jsx(q,{children:"Indicator"}),i.jsx(q,{children:"Period"}),i.jsx(q,{className:"text-right",children:"Budget"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsx(Ut,{children:d.length===0?i.jsx(ve,{children:i.jsx(V,{colSpan:9,className:"py-10 text-center text-muted-foreground",children:"No projects found. Create your first project to get started."})}):d.map(w=>{const A=m.get(w.id)??{completion:0,currentPhase:w.current_phase||"Initiation",status:"in_progress",metrics:{completedActivities:0,totalActivities:0,approvedSections:0,totalSections:0,milestonesAchieved:0,totalMilestones:0,pendingCount:0,implementedCount:0}},P=X6[A.status];return i.jsxs(ve,{children:[i.jsx(V,{className:"font-mono",children:w.code||"-"}),i.jsx(V,{children:i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"font-medium",children:w.name}),i.jsx("p",{className:"max-w-[240px] truncate text-xs text-muted-foreground",children:w.description||"No description"})]})}),i.jsx(V,{children:w.donor_name||"-"}),i.jsx(V,{children:i.jsx(Ve,{variant:"outline",className:"font-medium",children:A.currentPhase})}),i.jsx(V,{children:i.jsxs("div",{className:"w-[240px] space-y-1.5",children:[i.jsxs("div",{className:"flex items-center justify-between text-xs",children:[i.jsxs("span",{className:"font-medium",children:[A.completion,"%"]}),i.jsxs("span",{className:"text-muted-foreground",children:[A.metrics.completedActivities,"/",Math.max(A.metrics.totalActivities,A.metrics.completedActivities)," done"]})]}),i.jsx(mu,{value:A.completion,className:"h-2"}),i.jsxs("p",{className:"text-[11px] text-muted-foreground",children:[A.metrics.implementedCount," implemented  ",A.metrics.pendingCount," pending  ",A.metrics.milestonesAchieved,"/",Math.max(A.metrics.totalMilestones,A.metrics.milestonesAchieved)," milestones"]})]})}),i.jsx(V,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`h-2.5 w-2.5 rounded-full ${P.dotClass}`}),i.jsx(Ve,{variant:"outline",className:P.badgeClass,children:P.label})]})}),i.jsx(V,{children:w.start_date&&w.end_date?`${ut(new Date(w.start_date),"MMM yyyy")} - ${ut(new Date(w.end_date),"MMM yyyy")}`:"-"}),i.jsx(V,{className:"text-right",children:c(w.budget||0)}),i.jsx(V,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-1",children:[i.jsx(Pi,{to:`/projects/${w.id}/expenses`,children:i.jsx(W,{variant:"ghost",size:"icon",title:"View Expenses",children:i.jsx(Fx,{className:"h-4 w-4"})})}),i.jsx(Pi,{to:`/projects/${w.id}/activity-log`,children:i.jsx(W,{variant:"ghost",size:"icon",title:"View Activity Log",children:i.jsx(vu,{className:"h-4 w-4"})})}),i.jsx(W,{variant:"ghost",size:"icon",onClick:()=>x(w),title:"Edit Project",children:i.jsx(Mp,{className:"h-4 w-4"})}),i.jsx(W,{variant:"ghost",size:"icon",onClick:()=>y.mutate(w),title:"Delete Project",children:i.jsx(Ds,{className:"h-4 w-4"})})]})})]},w.id)})})]})})})]})]})}const Z6=t=>me("h-9 gap-2 px-3 text-xs sm:text-sm",t?"bg-warning/15 text-warning hover:bg-warning/20":"text-muted-foreground hover:text-foreground");function Fre({projectId:t,projectName:e,subtitle:n,activeTab:r,actions:s}){const a=t?`/projects/${t}/expenses`:"/projects",o=t?`/projects/${t}/activity-log`:"/projects";return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex min-w-0 flex-1 items-start gap-3",children:[i.jsx(Pi,{to:"/projects",children:i.jsx(W,{variant:"ghost",size:"icon",className:"h-9 w-9",children:i.jsx(fa,{className:"h-4 w-4"})})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("h1",{className:"truncate text-2xl font-bold tracking-tight sm:text-3xl",children:e||"Project Workspace"}),n&&i.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:n})]})]}),s&&i.jsx("div",{className:"flex flex-wrap items-center gap-2",children:s})]}),i.jsxs("div",{className:"inline-flex flex-wrap items-center gap-1 rounded-xl border bg-card p-1",children:[i.jsx(Pi,{to:a,children:i.jsxs(W,{type:"button",variant:r==="expenses"?"secondary":"ghost",className:Z6(r==="expenses"),children:[i.jsx(Fx,{className:"h-4 w-4"}),"Expenses"]})}),i.jsx(Pi,{to:o,children:i.jsxs(W,{type:"button",variant:r==="activity-log"?"secondary":"ghost",className:Z6(r==="activity-log"),title:"Project Activity Log",children:[i.jsx(vu,{className:"h-4 w-4"}),"Activity Log"]})})]})]})}const Fet=["Personnel","Equipment","Travel","Supplies","Training","Consultancy","Utilities","Communications","Other"];function Vet(){const{user:t}=ot(),{projectId:e}=Wh(),n=en(),[r,s]=N.useState(!1),[a,o]=N.useState(null),[l,c]=N.useState({description:"",amount:"",expense_date:new Date().toISOString().split("T")[0],category:"",notes:""}),u=p=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(p),{data:d}=we({queryKey:["project-expenses-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const p=await Fe.getPrimaryMembershipByUser(t.id);return(p==null?void 0:p.companyId)??null},enabled:!!t}),{data:h}=we({queryKey:["project",d,e],queryFn:async()=>{if(!e||!d)return null;const p=await xi(Ye(re,Y.PROJECTS,e));if(!p.exists())return null;const w=p.data();return String(w.companyId??"")!==d?null:{id:p.id,name:String(w.name??""),budget:Number(w.budget??0),spent:Number(w.spent??0),status:w.status??null,currentPhase:w.currentPhase??w.current_phase??null}},enabled:!!(e&&d)}),{data:f=[],isLoading:m}=we({queryKey:["project-expenses",d,e],queryFn:async()=>{if(!e||!d)return[];const p=ge(re,Y.PROJECT_EXPENSES);return(await Te(je(p,he("companyId","==",d),he("projectId","==",e)))).docs.map(A=>{var L;const P=A.data(),I=P.expenseDate??P.expense_date,k=typeof I=="string"?I:((L=I==null?void 0:I.toDate)==null?void 0:L.call(I).toISOString().slice(0,10))??new Date().toISOString().slice(0,10);return{id:A.id,description:String(P.description??""),amount:Number(P.amount??0),expense_date:k,category:P.category??null,notes:P.notes??null}}).sort((A,P)=>P.expense_date.localeCompare(A.expense_date))},enabled:!!(e&&d)}),v=async()=>{if(!e||!d)return;const p=ge(re,Y.PROJECT_EXPENSES),A=(await Te(je(p,he("companyId","==",d),he("projectId","==",e)))).docs.reduce((P,I)=>P+Number(I.data().amount??0),0);await xr(Ye(re,Y.PROJECTS,e),{spent:A,updatedAt:Ce()},{merge:!0})},g=()=>{n.invalidateQueries({queryKey:["project-expenses",d,e]}),n.invalidateQueries({queryKey:["project",d,e]}),n.invalidateQueries({queryKey:["projects",d]}),n.invalidateQueries({queryKey:["project-activity-log",d,e]}),n.invalidateQueries({queryKey:["project-activity-logs",d]})},y=Xe({mutationFn:async p=>{if(!e||!d||!t)throw new Error("No active company context");const w=Number.parseFloat(p.amount),A=await es(ge(re,Y.PROJECT_EXPENSES),{companyId:d,projectId:e,userId:t.id,description:p.description,amount:w,expenseDate:p.expense_date,category:p.category||null,notes:p.notes||null,createdAt:Ce(),updatedAt:Ce()});await v(),await ml.create({companyId:d,projectId:e,activity:"Expense Added",description:`${p.description} recorded (${u(w)})`,source:"Project Expenses",sourceType:Y.PROJECT_EXPENSES,sourceId:A.id,phase:h==null?void 0:h.currentPhase,status:"implemented",approvalStatus:"approved",appliedToSection:"Budget & Expenses",implemented:!0,createdBy:t.id,metadata:{category:p.category||null,expenseDate:p.expense_date}})},onSuccess:()=>{g(),Z.success("Expense added successfully"),S()},onError:p=>{Z.error("Failed to add expense: "+p.message)}}),b=Xe({mutationFn:async({expense:p,data:w})=>{if(!d||!e||!t)throw new Error("No active company context");const A=Number.parseFloat(w.amount);await xr(Ye(re,Y.PROJECT_EXPENSES,p.id),{description:w.description,amount:A,expenseDate:w.expense_date,category:w.category||null,notes:w.notes||null,updatedAt:Ce()},{merge:!0}),await v(),await ml.create({companyId:d,projectId:e,activity:"Expense Updated",description:`${w.description} updated (${u(A)})`,source:"Project Expenses",sourceType:Y.PROJECT_EXPENSES,sourceId:p.id,phase:h==null?void 0:h.currentPhase,status:"implemented",approvalStatus:"approved",appliedToSection:"Budget & Expenses",implemented:!0,createdBy:t.id,metadata:{previousAmount:p.amount,previousDate:p.expense_date}})},onSuccess:()=>{g(),Z.success("Expense updated successfully"),S()},onError:p=>{Z.error("Failed to update expense: "+p.message)}}),x=Xe({mutationFn:async p=>{if(!d||!e||!t)throw new Error("No active company context");await Ll(Ye(re,Y.PROJECT_EXPENSES,p.id)),await v(),await ml.create({companyId:d,projectId:e,activity:"Expense Removed",description:`${p.description} removed (${u(p.amount)})`,source:"Project Expenses",sourceType:Y.PROJECT_EXPENSES,sourceId:p.id,phase:h==null?void 0:h.currentPhase,status:"implemented",approvalStatus:"approved",appliedToSection:"Budget & Expenses",implemented:!0,createdBy:t.id})},onSuccess:()=>{g(),Z.success("Expense deleted successfully")},onError:p=>{Z.error("Failed to delete expense: "+p.message)}}),S=()=>{c({description:"",amount:"",expense_date:new Date().toISOString().split("T")[0],category:"",notes:""}),o(null),s(!1)},T=p=>{o(p),c({description:p.description,amount:p.amount.toString(),expense_date:p.expense_date,category:p.category||"",notes:p.notes||""}),s(!0)},_=p=>{if(p.preventDefault(),a){b.mutate({expense:a,data:l});return}y.mutate(l)},C=()=>{nf(f,[{header:"Date",key:"expense_date"},{header:"Description",key:"description"},{header:"Category",key:"category"},{header:"Amount",key:"amount"},{header:"Notes",key:"notes"}],`${(h==null?void 0:h.name)||"project"}-expenses`)},E=f.reduce((p,w)=>p+Number(w.amount),0);return m?i.jsx("div",{className:"flex h-64 items-center justify-center",children:"Loading..."}):i.jsxs("div",{className:"w-full space-y-6",children:[i.jsx(Fre,{projectId:e,projectName:h?`${h.name} - Expenses`:"Project Expenses",subtitle:[`Budget: ${u((h==null?void 0:h.budget)||0)}`,`Spent: ${u(E)}`,`Remaining: ${u(((h==null?void 0:h.budget)||0)-E)}`].join(" | "),activeTab:"expenses",actions:i.jsxs(i.Fragment,{children:[i.jsxs(W,{variant:"outline",onClick:C,disabled:f.length===0,children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export"]}),i.jsxs(Zn,{open:r,onOpenChange:s,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(W,{onClick:()=>{S(),s(!0)},children:[i.jsx(_n,{className:"mr-2 h-4 w-4"}),"Add Expense"]})}),i.jsxs(Hn,{children:[i.jsx(Kn,{children:i.jsx(Gn,{children:a?"Edit Expense":"Add Expense"})}),i.jsxs("form",{onSubmit:_,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Description *"}),i.jsx(G,{value:l.description,onChange:p=>c({...l,description:p.target.value}),required:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Amount (ZMW) *"}),i.jsx(G,{type:"number",step:"0.01",value:l.amount,onChange:p=>c({...l,amount:p.target.value}),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Date *"}),i.jsx(G,{type:"date",value:l.expense_date,onChange:p=>c({...l,expense_date:p.target.value}),required:!0})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Category"}),i.jsxs(Ct,{value:l.category,onValueChange:p=>c({...l,category:p}),children:[i.jsx(Et,{children:i.jsx(Pt,{placeholder:"Select category"})}),i.jsx(At,{children:Fet.map(p=>i.jsx(ye,{value:p,children:p},p))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Notes"}),i.jsx(hr,{value:l.notes,onChange:p=>c({...l,notes:p.target.value}),rows:2})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(W,{type:"button",variant:"outline",onClick:S,children:"Cancel"}),i.jsxs(W,{type:"submit",children:[a?"Update":"Add"," Expense"]})]})]})]})]})]})}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[i.jsxs(Q,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(te,{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx(Xn,{className:"h-4 w-4"}),"Total Budget"]})}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:u((h==null?void 0:h.budget)||0)})})]}),i.jsxs(Q,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(te,{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx(Xn,{className:"h-4 w-4"}),"Total Spent"]})}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:u(E)})})]}),i.jsxs(Q,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(te,{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx(Xn,{className:"h-4 w-4"}),"Remaining"]})}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:u(((h==null?void 0:h.budget)||0)-E)})})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"Expense Records"})}),i.jsx(ne,{children:i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs(Vt,{className:"min-w-[760px]",children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Date"}),i.jsx(q,{children:"Description"}),i.jsx(q,{children:"Category"}),i.jsx(q,{className:"text-right",children:"Amount"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsx(Ut,{children:f.length===0?i.jsx(ve,{children:i.jsx(V,{colSpan:5,className:"py-8 text-center text-muted-foreground",children:"No expenses recorded yet"})}):f.map(p=>i.jsxs(ve,{children:[i.jsx(V,{children:ut(new Date(p.expense_date),"dd MMM yyyy")}),i.jsx(V,{className:"max-w-[280px] truncate",children:p.description}),i.jsx(V,{children:p.category||"-"}),i.jsx(V,{className:"text-right",children:u(Number(p.amount))}),i.jsx(V,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(W,{variant:"ghost",size:"icon",onClick:()=>T(p),children:i.jsx(Mp,{className:"h-4 w-4"})}),i.jsx(W,{variant:"ghost",size:"icon",onClick:()=>x.mutate(p),children:i.jsx(Ds,{className:"h-4 w-4"})})]})})]},p.id))})]})})})]})]})}const ey=20,J6={roles:[],assignees:[],phases:[],disciplines:[],approvalStatuses:[],appliedSections:[],statuses:[],startDate:"",endDate:""};function vd({label:t,options:e,selected:n,onChange:r}){const s=(a,o)=>{if(o){r(Array.from(new Set([...n,a])));return}r(n.filter(l=>l!==a))};return i.jsxs(CG,{children:[i.jsx(PG,{asChild:!0,children:i.jsxs(W,{variant:"outline",className:me("h-9 justify-between gap-2",n.length>0&&"border-warning/40 bg-warning/10 text-warning"),children:[i.jsx("span",{className:"truncate text-left",children:t}),i.jsx("span",{className:"rounded-md bg-muted px-1.5 py-0.5 text-xs text-muted-foreground",children:n.length||"All"})]})}),i.jsxs(LO,{align:"start",className:"max-h-80 w-56 overflow-y-auto",children:[i.jsx($O,{children:t}),n.length>0&&i.jsxs(i.Fragment,{children:[i.jsx(j_,{onSelect:a=>{a.preventDefault(),r([])},children:"Clear selection"}),i.jsx(FO,{})]}),e.length===0?i.jsx(j_,{disabled:!0,children:"No options"}):e.map(a=>i.jsx(IG,{checked:n.includes(a),onCheckedChange:o=>s(a,o),children:a},a))]})]})}const xd=t=>Array.from(new Set(t.filter(e=>!!(e&&e.trim())))).sort((e,n)=>e.localeCompare(n)),Bet=t=>t.slice(0,10),ez=t=>{const e=(t||"").toLowerCase();return["approved","completed","implemented","done"].includes(e)?"border-success/30 bg-success/10 text-success":["pending","in_progress","in progress"].includes(e)?"border-warning/30 bg-warning/15 text-warning":["behind","rejected","blocked"].includes(e)?"border-destructive/30 bg-destructive/10 text-destructive":"border-border bg-muted/40 text-muted-foreground"};function Uet(){const{user:t}=ot(),{projectId:e}=Wh(),[n,r]=N.useState(J6),[s,a]=N.useState(""),[o,l]=N.useState(1),[c,u]=N.useState(null),d=p=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(p),{data:h}=we({queryKey:["project-activity-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const p=await Fe.getPrimaryMembershipByUser(t.id);return(p==null?void 0:p.companyId)??null},enabled:!!t}),{data:f}=we({queryKey:["project-summary",h,e],queryFn:async()=>{if(!e||!h)return null;const p=await xi(Ye(re,Y.PROJECTS,e));if(!p.exists())return null;const w=p.data();return String(w.companyId??"")!==h?null:{id:p.id,name:String(w.name??"Project"),budget:Number(w.budget??0),spent:Number(w.spent??0)}},enabled:!!(h&&e)}),{data:m=[],isLoading:v}=we({queryKey:["project-activity-log",h,e],queryFn:async()=>!h||!e?[]:ml.listByProject(h,e,{limitCount:3e3}),enabled:!!(h&&e),refetchInterval:15e3}),g=N.useMemo(()=>({roles:xd(m.map(p=>p.role)),assignees:xd(m.map(p=>p.assignedTo)),phases:xd(m.map(p=>p.phase)),disciplines:xd(m.map(p=>p.discipline)),approvalStatuses:xd(m.map(p=>p.approvalStatus)),appliedSections:xd(m.map(p=>p.appliedToSection)),statuses:xd(m.map(p=>p.status))}),[m]),y=N.useMemo(()=>{const p=s.trim().toLowerCase();return m.filter(w=>{const A=Bet(w.createdAt);return n.startDate&&A<n.startDate||n.endDate&&A>n.endDate||n.roles.length>0&&!n.roles.includes(w.role||"")||n.assignees.length>0&&!n.assignees.includes(w.assignedTo||"")||n.phases.length>0&&!n.phases.includes(w.phase||"")||n.disciplines.length>0&&!n.disciplines.includes(w.discipline||"")||n.approvalStatuses.length>0&&!n.approvalStatuses.includes(w.approvalStatus||"")||n.appliedSections.length>0&&!n.appliedSections.includes(w.appliedToSection||"")||n.statuses.length>0&&!n.statuses.includes(w.status||"")?!1:p?[w.activity,w.description,w.source,w.role,w.assignedTo,w.phase,w.discipline,w.approvalStatus,w.appliedToSection,w.status].filter(Boolean).map(I=>String(I).toLowerCase()).some(I=>I.includes(p)):!0})},[m,n,s]),b=Math.max(1,Math.ceil(y.length/ey));N.useEffect(()=>{l(p=>Math.min(p,b))},[b]);const x=N.useMemo(()=>{const p=(o-1)*ey;return y.slice(p,p+ey)},[y,o]),S=!!(s||n.roles.length||n.assignees.length||n.phases.length||n.disciplines.length||n.approvalStatuses.length||n.appliedSections.length||n.statuses.length||n.startDate||n.endDate),T=()=>{r(J6),a(""),l(1)},_=[...n.roles.map(p=>({key:`role-${p}`,label:`Role: ${p}`,clear:()=>r(w=>({...w,roles:w.roles.filter(A=>A!==p)}))})),...n.assignees.map(p=>({key:`assigned-${p}`,label:`Assigned: ${p}`,clear:()=>r(w=>({...w,assignees:w.assignees.filter(A=>A!==p)}))})),...n.phases.map(p=>({key:`phase-${p}`,label:`Phase: ${p}`,clear:()=>r(w=>({...w,phases:w.phases.filter(A=>A!==p)}))})),...n.disciplines.map(p=>({key:`discipline-${p}`,label:`Discipline: ${p}`,clear:()=>r(w=>({...w,disciplines:w.disciplines.filter(A=>A!==p)}))})),...n.approvalStatuses.map(p=>({key:`approval-${p}`,label:`Approval: ${p}`,clear:()=>r(w=>({...w,approvalStatuses:w.approvalStatuses.filter(A=>A!==p)}))})),...n.appliedSections.map(p=>({key:`section-${p}`,label:`Section: ${p}`,clear:()=>r(w=>({...w,appliedSections:w.appliedSections.filter(A=>A!==p)}))})),...n.statuses.map(p=>({key:`status-${p}`,label:`Status: ${p}`,clear:()=>r(w=>({...w,statuses:w.statuses.filter(A=>A!==p)}))})),...n.startDate?[{key:"start-date",label:`From: ${n.startDate}`,clear:()=>r(p=>({...p,startDate:""}))}]:[],...n.endDate?[{key:"end-date",label:`To: ${n.endDate}`,clear:()=>r(p=>({...p,endDate:""}))}]:[]],C=ml.getProjectHealthStats(y),E=(p,w,A="max-w-[220px]")=>{const P=p&&p.trim()?p.trim():"-",I=P!=="-";return i.jsx("button",{type:"button",className:me("truncate text-left text-sm",A,I?"cursor-pointer hover:text-warning":"cursor-default text-muted-foreground"),onClick:()=>{I&&u({label:w,value:P})},children:P})};return v?i.jsx("div",{className:"flex h-64 items-center justify-center",children:"Loading..."}):i.jsxs("div",{className:"w-full space-y-6",children:[i.jsx(Fre,{projectId:e,projectName:f?`${f.name} - Activity Log`:"Project Activity Log",subtitle:f?`Budget: ${d(f.budget)} | Spent: ${d(f.spent)}`:"Track project activities, approvals, and implementation progress",activeTab:"activity-log",actions:i.jsxs(Ve,{variant:"outline",children:[y.length," records"]})}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(Q,{children:[i.jsx(ee,{className:"pb-2",children:i.jsx(te,{className:"text-sm font-medium",children:"Total Entries"})}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:y.length})})]}),i.jsxs(Q,{children:[i.jsx(ee,{className:"pb-2",children:i.jsx(te,{className:"text-sm font-medium",children:"Implemented"})}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:C.implementedCount})})]}),i.jsxs(Q,{children:[i.jsx(ee,{className:"pb-2",children:i.jsx(te,{className:"text-sm font-medium",children:"Pending"})}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:C.pendingCount})})]}),i.jsxs(Q,{children:[i.jsx(ee,{className:"pb-2",children:i.jsx(te,{className:"text-sm font-medium",children:"Completion Signal"})}),i.jsx(ne,{children:i.jsxs("div",{className:"text-2xl font-bold",children:[C.completion,"%"]})})]})]}),i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between",children:[i.jsxs(te,{className:"flex items-center gap-2 text-base",children:[i.jsx(Yoe,{className:"h-4 w-4"}),"Advanced Filters"]}),i.jsx(W,{variant:"outline",onClick:T,disabled:!S,children:"Clear All"})]}),i.jsxs(ne,{className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 xl:grid-cols-4",children:[i.jsx("div",{className:"sm:col-span-2 xl:col-span-2",children:i.jsxs("div",{className:"relative",children:[i.jsx(Ms,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{value:s,onChange:p=>{a(p.target.value),l(1)},className:"pl-9",placeholder:"Search activity, description, role, source..."})]})}),i.jsx(vd,{label:"Role",options:g.roles,selected:n.roles,onChange:p=>{r(w=>({...w,roles:p})),l(1)}}),i.jsx(vd,{label:"Assigned To",options:g.assignees,selected:n.assignees,onChange:p=>{r(w=>({...w,assignees:p})),l(1)}}),i.jsx(vd,{label:"Phase",options:g.phases,selected:n.phases,onChange:p=>{r(w=>({...w,phases:p})),l(1)}}),i.jsx(vd,{label:"Discipline",options:g.disciplines,selected:n.disciplines,onChange:p=>{r(w=>({...w,disciplines:p})),l(1)}}),i.jsx(vd,{label:"Approval Status",options:g.approvalStatuses,selected:n.approvalStatuses,onChange:p=>{r(w=>({...w,approvalStatuses:p})),l(1)}}),i.jsx(vd,{label:"Applied To Section",options:g.appliedSections,selected:n.appliedSections,onChange:p=>{r(w=>({...w,appliedSections:p})),l(1)}}),i.jsx(vd,{label:"Status",options:g.statuses,selected:n.statuses,onChange:p=>{r(w=>({...w,statuses:p})),l(1)}}),i.jsx(G,{type:"date",value:n.startDate,onChange:p=>{r(w=>({...w,startDate:p.target.value})),l(1)},placeholder:"Start date"}),i.jsx(G,{type:"date",value:n.endDate,onChange:p=>{r(w=>({...w,endDate:p.target.value})),l(1)},placeholder:"End date"})]}),_.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2",children:_.map(p=>i.jsxs(Ve,{variant:"outline",className:"gap-1 border-warning/40 bg-warning/10 text-warning",children:[p.label,i.jsx("button",{type:"button",onClick:()=>{p.clear(),l(1)},className:"rounded-full p-0.5 hover:bg-warning/20","aria-label":`Clear ${p.label}`,children:i.jsx(Vm,{className:"h-3 w-3"})})]},p.key))})]})]}),i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between",children:[i.jsx(te,{children:"Project Activity Log"}),i.jsxs(Ve,{variant:"outline",children:["Page ",o," of ",b]})]}),i.jsxs(ne,{className:"space-y-4",children:[i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs(Vt,{className:"min-w-[1720px]",children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Date"}),i.jsx(q,{children:"Activity"}),i.jsx(q,{children:"Description"}),i.jsx(q,{children:"Source"}),i.jsx(q,{children:"Role"}),i.jsx(q,{children:"Assigned To"}),i.jsx(q,{children:"Phase"}),i.jsx(q,{children:"Discipline"}),i.jsx(q,{children:"Approval Status"}),i.jsx(q,{children:"Applied To"}),i.jsx(q,{children:"Status"})]})}),i.jsx(Ut,{children:x.length===0?i.jsx(ve,{children:i.jsx(V,{colSpan:11,className:"py-10 text-center text-muted-foreground",children:"No activity records matched the selected filters."})}):x.map(p=>i.jsxs(ve,{children:[i.jsx(V,{className:"whitespace-nowrap",children:ut(new Date(p.createdAt),"yyyy-MM-dd HH:mm")}),i.jsx(V,{children:E(p.activity,"Activity")}),i.jsx(V,{children:E(p.description||"-","Description","max-w-[300px]")}),i.jsx(V,{children:E(`${p.source}${p.sourceType?` (${p.sourceType})`:""}`,"Source")}),i.jsx(V,{children:E(p.role||"-","Role","max-w-[160px]")}),i.jsx(V,{children:E(p.assignedTo||"-","Assigned To","max-w-[180px]")}),i.jsx(V,{children:E(p.phase||"-","Phase","max-w-[140px]")}),i.jsx(V,{children:E(p.discipline||"-","Discipline","max-w-[160px]")}),i.jsx(V,{children:i.jsx(Ve,{variant:"outline",className:ez(p.approvalStatus),children:p.approvalStatus||"-"})}),i.jsx(V,{children:E(p.appliedToSection||"-","Applied To Section","max-w-[220px]")}),i.jsx(V,{children:i.jsx(Ve,{variant:"outline",className:ez(p.status),children:p.status||"-"})})]},p.id))})]})}),i.jsxs("div",{className:"flex flex-col justify-between gap-3 border-t pt-4 sm:flex-row sm:items-center",children:[i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",y.length===0?0:(o-1)*ey+1,"-",Math.min(o*ey,y.length)," of ",y.length]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(W,{variant:"outline",onClick:()=>l(p=>Math.max(1,p-1)),disabled:o<=1,children:"Previous"}),i.jsx(W,{variant:"outline",onClick:()=>l(p=>Math.min(b,p+1)),disabled:o>=b,children:"Next"})]})]})]})]}),i.jsx(Zn,{open:!!c,onOpenChange:p=>!p&&u(null),children:i.jsxs(Hn,{className:"max-w-3xl",children:[i.jsx(Kn,{children:i.jsx(Gn,{children:(c==null?void 0:c.label)||"Details"})}),i.jsx("div",{className:"max-h-[70vh] overflow-y-auto rounded-md border bg-muted/30 p-4 text-sm leading-relaxed whitespace-pre-wrap",children:c==null?void 0:c.value})]})})]})}const zet=["Agriculture","Construction","Education","Financial Services","Healthcare","Hospitality","Information Technology","Manufacturing","Mining","Non-Profit","Professional Services","Retail","Transportation","Wholesale","Other"],qet=[{value:"vat_registered",label:"VAT Registered",description:"Turnover > K800k. 16% VAT."},{value:"turnover_tax",label:"Turnover Tax",description:"Turnover < K800k. 4% Tax."},{value:"non_vat",label:"Non-VAT Registered",description:"Not registered for VAT."}],Wet=[{value:"charitable",label:"Registered Charitable Organization"},{value:"faith_based",label:"Faith-Based Organization"},{value:"educational",label:"Educational Non-profit"},{value:"grant_funded",label:"Grant-Funded NGO"}],Het=()=>i.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-6",children:[i.jsx(Ur.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-indigo-500/10 backdrop-blur-md border border-indigo-500/20 p-8 rounded-full",children:i.jsx(Lx,{className:"h-16 w-16 text-indigo-400"})}),i.jsxs("div",{className:"text-center max-w-xs",children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:"Organization Profile"}),i.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Setting up your digital headquarters."})]})]}),Ket=()=>i.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-6",children:[i.jsx(Ur.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-pink-500/10 backdrop-blur-md border border-pink-500/20 p-8 rounded-full",children:i.jsx(Xk,{className:"h-16 w-16 text-pink-400"})}),i.jsxs("div",{className:"text-center max-w-xs",children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:"Brand Identity"}),i.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Make your invoices and reports stand out."})]})]}),Get=()=>i.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-6",children:[i.jsx(Ur.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-emerald-500/10 backdrop-blur-md border border-emerald-500/20 p-8 rounded-full",children:i.jsx(gh,{className:"h-16 w-16 text-emerald-400"})}),i.jsxs("div",{className:"text-center max-w-xs",children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:"Compliance & Tax"}),i.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Ensuring ZRA compliance from day one."})]})]});function Yet(){const t=$n(),e=en(),{user:n}=ot(),[r,s]=N.useState(1),[a,o]=N.useState(null),[l,c]=N.useState({name:"",organizationType:"business",businessType:"sme",address:"",phone:"",email:"",tpin:"",registrationNumber:"",industryType:"",taxType:"non_vat",taxClassification:"",vatRate:"16",turnoverTaxNumber:""}),u=(y,b)=>{c(x=>({...x,[y]:b}))},d=Xe({mutationFn:async()=>{if(!n)throw new Error("Not authenticated");const y=await Fe.getPrimaryMembershipByUser(n.id);if(!(y!=null&&y.companyId))throw new Error("No company associated with user");const b=l.organizationType==="business"&&l.taxType==="vat_registered",x=l.organizationType==="business"?l.taxType:l.taxClassification;await Fe.completeCompanySetup({companyId:y.companyId,name:l.name,organizationType:l.organizationType,businessType:l.businessType,taxType:l.organizationType==="business"?l.taxType:"tax_exempt",taxClassification:x,address:l.address||void 0,phone:l.phone||void 0,email:l.email||void 0,tpin:l.tpin||void 0,registrationNumber:l.registrationNumber||void 0,industryType:l.industryType||void 0,logoUrl:a,isVatRegistered:b,vatRate:b?parseFloat(l.vatRate):null})},onSuccess:()=>{e.invalidateQueries({queryKey:["company-settings"]}),e.invalidateQueries({queryKey:["company"]}),Z.success("Setup complete!"),t("/dashboard")},onError:y=>Z.error("Setup failed: "+y.message)}),h=()=>{if(r===1){if(!l.name)return!!Z.error("Company Name is required");if(!l.phone)return!!Z.error("Phone is required");if(!l.email)return!!Z.error("Email is required");if(!l.tpin||!/^\d{10}$/.test(l.tpin))return!!Z.error("Valid 10-digit TPIN required")}if(r===2&&!a)return!!Z.error("Logo is required");if(r===3){if(l.organizationType==="business"&&l.taxType==="turnover_tax"&&!l.turnoverTaxNumber)return!!Z.error("Turnover Tax Number required");if(l.organizationType==="non_profit"&&!l.taxClassification)return!!Z.error("Classification required")}return!0},f=()=>{h()&&(r<3?s(r+1):d.mutate())},m=r===1?i.jsx(Het,{}):r===2?i.jsx(Ket,{}):i.jsx(Get,{}),v=r===1?"Organization Details":r===2?"Upload Identity":"Tax Configuration",g=`Step ${r} of 3`;return i.jsx(Zp,{title:v,subtitle:g,visualContent:i.jsx(aX,{mode:"wait",children:i.jsx(Ur.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"w-full h-full",children:m},r)}),children:i.jsxs("div",{className:"space-y-6 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar",children:[r===1&&i.jsxs(Ur.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Company Name"}),i.jsxs("div",{className:"relative",children:[i.jsx(Lx,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"Acme Corp",className:"pl-10",value:l.name,onChange:y=>u("name",y.target.value)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Org Type"}),i.jsxs(Ct,{value:l.organizationType,onValueChange:y=>u("organizationType",y),children:[i.jsx(Et,{children:i.jsx(Pt,{})}),i.jsxs(At,{children:[i.jsx(ye,{value:"business",children:"Business"}),i.jsx(ye,{value:"non_profit",children:"Non-Profit"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Business Type"}),i.jsxs(Ct,{value:l.businessType,onValueChange:y=>u("businessType",y),children:[i.jsx(Et,{children:i.jsx(Pt,{})}),i.jsxs(At,{children:[i.jsx(ye,{value:"sme",children:"SME"}),i.jsx(ye,{value:"corporate",children:"Corporate"}),i.jsx(ye,{value:"ngo",children:"NGO"}),i.jsx(ye,{value:"school",children:"School"})]})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"TPIN (10 Digits)"}),i.jsxs("div",{className:"relative",children:[i.jsx(o8,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"1234567890",className:"pl-10",value:l.tpin,onChange:y=>u("tpin",y.target.value.replace(/\D/g,"").slice(0,10))})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Phone"}),i.jsxs("div",{className:"relative",children:[i.jsx(l8,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"+260...",className:"pl-10",value:l.phone,onChange:y=>u("phone",y.target.value)})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(qu,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"info@...",className:"pl-10",value:l.email,onChange:y=>u("email",y.target.value)})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Industry"}),i.jsxs(Ct,{value:l.industryType,onValueChange:y=>u("industryType",y),children:[i.jsx(Et,{children:i.jsx(Pt,{placeholder:"Select..."})}),i.jsx(At,{children:zet.map(y=>i.jsx(ye,{value:y.toLowerCase(),children:y},y))})]})]})]}),r===2&&i.jsxs(Ur.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6 text-center",children:[i.jsx("div",{className:"border-2 border-dashed border-slate-200 rounded-xl p-8 bg-slate-50/50",children:i.jsx(XM,{onUploaded:o})}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload your official organization logo. This will be displayed on all your financial documents."})]}),r===3&&i.jsx(Ur.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:l.organizationType==="business"?i.jsxs("div",{className:"space-y-4",children:[i.jsx(J,{children:"Select Tax Category"}),i.jsx("div",{className:"grid gap-3",children:qet.map(y=>i.jsx("div",{onClick:()=>u("taxType",y.value),className:`p-4 rounded-lg border cursor-pointer transition-all ${l.taxType===y.value?"border-primary bg-primary/5 ring-1 ring-primary":"border-border hover:border-primary/50"}`,children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${l.taxType===y.value?"border-primary":"border-slate-400"}`,children:l.taxType===y.value&&i.jsx("div",{className:"w-2.5 h-2.5 bg-primary rounded-full"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-sm",children:y.label}),i.jsx("p",{className:"text-xs text-muted-foreground",children:y.description})]})]})},y.value))}),l.taxType==="vat_registered"&&i.jsxs("div",{className:"space-y-2 pt-2",children:[i.jsx(J,{children:"VAT Rate (%)"}),i.jsx(G,{type:"number",value:l.vatRate,onChange:y=>u("vatRate",y.target.value)})]}),l.taxType==="turnover_tax"&&i.jsxs("div",{className:"space-y-2 pt-2",children:[i.jsx(J,{children:"Turnover Tax ID"}),i.jsx(G,{placeholder:"TOT-...",value:l.turnoverTaxNumber,onChange:y=>u("turnoverTaxNumber",y.target.value)})]})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsx(J,{children:"Non-Profit Classification"}),i.jsxs(Ct,{value:l.taxClassification,onValueChange:y=>u("taxClassification",y),children:[i.jsx(Et,{children:i.jsx(Pt,{placeholder:"Select classification..."})}),i.jsx(At,{children:Wet.map(y=>i.jsx(ye,{value:y.value,children:y.label},y.value))})]})]})}),i.jsxs("div",{className:"flex justify-between pt-6 border-t mt-6",children:[r>1?i.jsx(W,{variant:"ghost",onClick:()=>s(r-1),children:"Back"}):i.jsx("div",{}),i.jsx(W,{onClick:f,disabled:d.isPending,className:"px-8",children:r<3?i.jsxs(i.Fragment,{children:["Next ",i.jsx(LT,{className:"ml-2 h-4 w-4"})]}):d.isPending?"Completing...":"Complete Setup"})]})]})})}const Qet=[{icon:ui,title:"Employee Management",description:"Complete database with role-based access control and history tracking.",className:"border-l-4 border-blue-500"},{icon:Uw,title:"Payroll Processing",description:"Automated calculations for PAYE, NAPSA, and NHIMA with one-click rendering.",className:"border-l-4 border-indigo-500"},{icon:gh,title:"Compliance & Audit",description:"Built-in ZRA compliance rules and detailed audit logs for every action.",className:"border-l-4 border-slate-500"},{icon:n8,title:"Real-time Analytics",description:"Live financial dashboards and customizable reports for better decision making.",className:"border-l-4 border-sky-500"}];function Xet(){const[t,e]=N.useState(null);N.useEffect(()=>{window.addEventListener("beforeinstallprompt",r=>{r.preventDefault(),e(r)})},[]);const n=()=>{t&&(t.prompt(),t.userChoice.then(r=>{r.outcome==="accepted"&&console.log("User accepted the install prompt"),e(null)}))};return i.jsxs("div",{className:"min-h-screen bg-[#F8FAFC] font-sans text-slate-900 selection:bg-blue-100 selection:text-blue-900 overflow-x-hidden",children:[i.jsx("header",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-slate-200/60",children:i.jsxs("div",{className:"container mx-auto px-4 lg:px-6 flex items-center justify-between h-20",children:[i.jsx(Pi,{to:"/",className:"flex items-center gap-3",children:i.jsx(Rv,{variant:"full",size:"md"})}),i.jsxs("nav",{className:"hidden md:flex items-center gap-8 text-sm font-medium text-slate-600",children:[i.jsx("a",{href:"#features",className:"hover:text-blue-700 transition-colors",children:"Features"}),i.jsx("a",{href:"#pricing",className:"hover:text-blue-700 transition-colors",children:"Pricing"}),i.jsx("a",{href:"#compliance",className:"hover:text-blue-700 transition-colors",children:"Compliance"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Pi,{to:"/auth",children:i.jsx(W,{variant:"ghost",className:"hidden sm:inline-flex text-slate-600 hover:text-blue-700 hover:bg-blue-50",children:"Sign In"})}),i.jsx(Pi,{to:"/auth",children:i.jsx(W,{className:"rounded-full bg-slate-900 hover:bg-slate-800 text-white shadow-lg shadow-slate-900/20 px-6 transition-all hover:scale-105",children:"Get Started"})})]})]})}),i.jsxs("section",{className:"relative pt-20 pb-32 lg:pt-32 lg:pb-48 overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[1000px] h-[600px] bg-blue-100/40 rounded-[100%] blur-[100px] -z-10 pointer-events-none opacity-60"}),i.jsx("div",{className:"absolute top-40 right-0 w-[500px] h-[500px] bg-indigo-100/40 rounded-full blur-[80px] -z-10 pointer-events-none opacity-50"}),i.jsxs("div",{className:"container mx-auto px-4 lg:px-6 relative z-10 text-center",children:[i.jsxs(Ve,{variant:"outline",className:"mb-8 px-4 py-1.5 rounded-full bg-blue-50/50 text-blue-700 border-blue-200 backdrop-blur-sm animate-fade-in-up",children:[i.jsxs("span",{className:"relative flex h-2 w-2 mr-2",children:[i.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"}),i.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-blue-500"})]}),"New: Automated ZRA Tax Submission"]}),i.jsxs("h1",{className:"text-5xl lg:text-7xl font-bold tracking-tight text-slate-900 mb-8 max-w-4xl mx-auto leading-[1.1]",children:["The Financial Operating System for ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-700 to-indigo-600",children:"Zambian NGOs"})]}),i.jsx("p",{className:"text-xl text-slate-600 mb-12 max-w-2xl mx-auto leading-relaxed",children:"Manage your finances, payroll, and compliance in one unified secure platform. Designed for purpose-driven organizations."}),i.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mb-20",children:[i.jsx(Pi,{to:"/auth",children:i.jsx(W,{size:"lg",className:"h-14 px-10 rounded-full bg-blue-600 hover:bg-blue-700 text-white shadow-xl shadow-blue-600/20 text-lg transition-all hover:scale-105",children:"Start Free Trial"})}),t&&i.jsxs(W,{size:"lg",variant:"outline",onClick:n,className:"h-14 px-10 rounded-full border-slate-200 hover:bg-white hover:text-blue-700 hover:border-blue-200 text-lg shadow-sm transition-all",children:[i.jsx(Rs,{className:"mr-2 h-5 w-5"}),"Install App"]}),!t&&i.jsxs(W,{size:"lg",variant:"outline",className:"h-14 px-10 rounded-full border-slate-200 hover:bg-white hover:text-slate-900 text-lg shadow-sm transition-all opacity-50 cursor-not-allowed",children:[i.jsx(Qoe,{className:"mr-2 h-5 w-5"}),"Web Version"]})]}),i.jsxs("div",{className:"relative max-w-5xl mx-auto",children:[i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl border border-slate-200/60 overflow-hidden backdrop-blur-sm",children:[i.jsxs("div",{className:"h-12 bg-slate-50 border-b border-slate-100 flex items-center px-4 gap-2",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-red-400/80"}),i.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-400/80"}),i.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-400/80"})]}),i.jsx("div",{className:"mx-auto bg-slate-200/50 h-6 w-64 rounded-md text-[10px] flex items-center justify-center text-slate-400 font-mono",children:"app.zedbooks.com/dashboard"})]}),i.jsx("div",{className:"p-1 bg-slate-50/50",children:i.jsxs("div",{className:"grid grid-cols-12 gap-1 p-4 h-[400px] lg:h-[600px] bg-white rounded-xl overflow-hidden relative",children:[i.jsxs("div",{className:"col-span-2 hidden lg:flex flex-col gap-3 border-r border-slate-50 pr-4",children:[i.jsx("div",{className:"h-8 w-full bg-slate-100 rounded-lg"}),i.jsx("div",{className:"h-8 w-3/4 bg-slate-50 rounded-lg"}),i.jsx("div",{className:"h-8 w-full bg-slate-50 rounded-lg"}),i.jsx("div",{className:"h-8 w-5/6 bg-slate-50 rounded-lg"})]}),i.jsxs("div",{className:"col-span-12 lg:col-span-10 flex flex-col gap-6 pl-0 lg:pl-6 pt-2",children:[i.jsxs("div",{className:"flex justify-between items-end",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"h-4 w-32 bg-slate-100 rounded"}),i.jsx("div",{className:"h-8 w-64 bg-slate-900 rounded-lg"})]}),i.jsx("div",{className:"h-10 w-32 bg-blue-600 rounded-lg"})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"h-32 bg-blue-50 rounded-2xl border border-blue-100 p-4 space-y-3",children:[i.jsx("div",{className:"h-8 w-8 bg-blue-200 rounded-lg"}),i.jsx("div",{className:"h-6 w-24 bg-blue-200/50 rounded"})]}),i.jsxs("div",{className:"h-32 bg-slate-50 rounded-2xl border border-slate-100 p-4 space-y-3",children:[i.jsx("div",{className:"h-8 w-8 bg-slate-200 rounded-lg"}),i.jsx("div",{className:"h-6 w-24 bg-slate-200/50 rounded"})]}),i.jsxs("div",{className:"h-32 bg-slate-50 rounded-2xl border border-slate-100 p-4 space-y-3",children:[i.jsx("div",{className:"h-8 w-8 bg-slate-200 rounded-lg"}),i.jsx("div",{className:"h-6 w-24 bg-slate-200/50 rounded"})]})]}),i.jsx("div",{className:"flex-1 bg-slate-50 rounded-2xl border border-slate-100 p-6 flex items-center justify-center",children:i.jsx("div",{className:"text-slate-300 font-medium",children:"Interactive Financial Ledger Mockup"})})]})]})})]}),i.jsxs("div",{className:"absolute -left-12 bottom-20 bg-white p-6 rounded-2xl shadow-xl border border-slate-100 hidden lg:block animate-float",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"h-10 w-10 bg-green-100 rounded-full flex items-center justify-center text-green-600",children:i.jsx(gh,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Compliance Status"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Last checked today"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Ve,{variant:"secondary",className:"bg-green-50 text-green-700",children:"NAPSA Verified"}),i.jsx(Ve,{variant:"secondary",className:"bg-green-50 text-green-700",children:"ZRA Compliant"})]})]}),i.jsxs("div",{className:"absolute -right-8 top-20 bg-white p-5 rounded-2xl shadow-xl border border-slate-100 hidden lg:block animate-float-delayed",children:[i.jsx("p",{className:"text-xs text-slate-500 uppercase font-semibold mb-3",children:"Recent Transactions"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-8 w-8 rounded-full bg-slate-100 flex items-center justify-center text-xs font-bold",children:"JD"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Payroll Run"}),i.jsx("p",{className:"text-xs text-slate-400",children:"Just now"})]}),i.jsx("span",{className:"text-sm font-medium text-slate-900 ml-4",children:"- K45,200"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center text-xs font-bold text-blue-700",children:"IN"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Grant Deposit"}),i.jsx("p",{className:"text-xs text-slate-400",children:"2h ago"})]}),i.jsx("span",{className:"text-sm font-medium text-green-600 ml-4",children:"+ K150,000"})]})]})]})]})]})]}),i.jsx("section",{id:"features",className:"py-24 bg-white relative",children:i.jsxs("div",{className:"container mx-auto px-4 lg:px-6",children:[i.jsxs("div",{className:"text-center mb-16 max-w-2xl mx-auto",children:[i.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-4",children:"Everything you need to run your NGO"}),i.jsx("p",{className:"text-slate-600",children:"Robust features designed specifically for the unique compliance and reporting needs of Zambian non-profits."})]}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:Qet.map((r,s)=>i.jsx(Q,{className:`shadow-sm hover:shadow-lg transition-all border-slate-200 bg-white ${r.className}`,children:i.jsxs(ne,{className:"p-8",children:[i.jsx("div",{className:"h-12 w-12 rounded-xl bg-slate-50 flex items-center justify-center mb-6",children:i.jsx(r.icon,{className:"h-6 w-6 text-slate-700"})}),i.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-3",children:r.title}),i.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:r.description})]})},s))})]})}),i.jsxs("section",{id:"compliance",className:"py-24 bg-slate-900 text-white overflow-hidden relative",children:[i.jsx("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-blue-600/10 rounded-full blur-[120px] translate-x-1/2 -translate-y-1/2"}),i.jsx("div",{className:"container mx-auto px-4 lg:px-6 relative z-10",children:i.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-4xl font-bold mb-6",children:"Fully Compliant with Zambian Regulation"}),i.jsx("p",{className:"text-slate-300 text-lg mb-8",children:"Stay ahead of regulatory requirements with automated updates for domestic tax laws and labor regulations."}),i.jsx("div",{className:"flex flex-wrap gap-4 mb-8",children:["ZRA Smart Invoice","NAPSA e-Returns","NHIMA Compliant","PACRA Returns"].map(r=>i.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-full bg-slate-800 border border-slate-700 text-sm font-medium text-slate-200",children:[i.jsx($x,{className:"h-4 w-4 text-green-400"}),r]},r))}),i.jsx(Pi,{to:"/auth",children:i.jsx(W,{className:"rounded-full bg-white text-slate-900 hover:bg-slate-100 px-8 h-12 shadow-md",children:"Get Compliant Today"})})]}),i.jsx("div",{className:"relative",children:i.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 p-8 rounded-3xl border border-slate-700 shadow-2xl",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-8 border-b border-slate-700 pb-8",children:[i.jsx("div",{className:"h-14 w-14 bg-blue-600 rounded-2xl flex items-center justify-center",children:i.jsx(gh,{className:"h-8 w-8 text-white"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold",children:"Compliance Monitor"}),i.jsx("p",{className:"text-slate-400 text-sm",children:"Real-time status tracking"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-slate-800/50 border border-slate-700",children:[i.jsx("span",{className:"text-slate-200 font-medium",children:"TPIN Verification"}),i.jsx(Ve,{className:"bg-green-500/20 text-green-400 hover:bg-green-500/20 border-green-500/20",children:"Verified"})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-slate-800/50 border border-slate-700",children:[i.jsx("span",{className:"text-slate-200 font-medium",children:"Tax Clearance"}),i.jsx(Ve,{className:"bg-green-500/20 text-green-400 hover:bg-green-500/20 border-green-500/20",children:"Valid"})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-slate-800/50 border border-slate-700",children:[i.jsx("span",{className:"text-slate-200 font-medium",children:"Annual Returns"}),i.jsx(Ve,{className:"bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/20 border-yellow-500/20",children:"Due in 5 days"})]})]})]})})]})})]}),i.jsx("footer",{className:"py-12 bg-white border-t border-slate-200",children:i.jsxs("div",{className:"container mx-auto px-4 text-center",children:[i.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:i.jsx(Rv,{variant:"full",size:"md",className:"grayscale opacity-70 hover:grayscale-0 hover:opacity-100"})}),i.jsxs("p",{className:"text-slate-500 text-sm",children:[" ",new Date().getFullYear()," Byte & Berry. All rights reserved."]})]})}),i.jsx(ZO,{})]})}function Zet(){const{user:t}=ot(),e=en(),[n,r]=N.useState(""),[s,a]=N.useState(!1),{data:o}=we({queryKey:["donors-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const x=await Fe.getPrimaryMembershipByUser(t.id);return(x==null?void 0:x.companyId)??null},enabled:!!t}),{data:l=[],isLoading:c}=we({queryKey:["donors-from-projects",o],queryFn:async()=>{if(!o)return[];const x=ge(re,Y.PROJECTS),T=(await Te(je(x,he("companyId","==",o)))).docs.map(C=>{const E=C.data();return{donor_name:String(E.donorName??E.donor_name??""),grant_reference:E.grantReference??E.grant_reference??null,budget:Number(E.budget??0),spent:Number(E.spent??0),status:String(E.status??"active")}}),_=new Map;return T.forEach(C=>{if(C.donor_name){const E=_.get(C.donor_name)||{grants:0,totalBudget:0,activeGrants:0};_.set(C.donor_name,{grants:E.grants+1,totalBudget:E.totalBudget+(C.budget||0),activeGrants:E.activeGrants+(C.status==="active"?1:0)})}}),Array.from(_.entries()).map(([C,E])=>({name:C,totalGrants:E.grants,totalBudget:E.totalBudget,activeGrants:E.activeGrants}))},enabled:!!o}),{data:u=[]}=we({queryKey:["projects-for-donors",o],queryFn:async()=>{if(!o)return[];const x=ge(re,Y.PROJECTS);return(await Te(je(x,he("companyId","==",o)))).docs.map(T=>{var p;const _=T.data(),C=_.createdAt??_.created_at,E=typeof C=="string"?C:((p=C==null?void 0:C.toDate)==null?void 0:p.call(C).toISOString())??"";return{id:T.id,..._,donor_name:_.donorName??_.donor_name??null,grant_reference:_.grantReference??_.grant_reference??null,start_date:_.startDate??_.start_date??null,end_date:_.endDate??_.end_date??null,created_at:E}}).sort((T,_)=>String(_.created_at??"").localeCompare(String(T.created_at??"")))},enabled:!!o}),d=x=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(x),h=l.filter(x=>x.name.toLowerCase().includes(n.toLowerCase())),f=l.reduce((x,S)=>x+S.totalBudget,0),m=l.reduce((x,S)=>x+S.activeGrants,0),v=l.reduce((x,S)=>x+S.totalGrants,0),g=()=>{nf(h,[{header:"Donor Name",key:"name"},{header:"Total Grants",key:"totalGrants"},{header:"Active Grants",key:"activeGrants"},{header:"Total Budget (ZMW)",key:"totalBudget"}],"donors-report")},y=[{key:"name",header:"Project Name",required:!0},{key:"donor_name",header:"Donor Name",required:!0},{key:"grant_reference",header:"Grant Reference",required:!1},{key:"budget",header:"Budget (ZMW)",required:!1},{key:"start_date",header:"Start Date",required:!1},{key:"end_date",header:"End Date",required:!1}],b=async x=>{if(!o||!t)throw new Error("No active company context");for(const S of x)await es(ge(re,Y.PROJECTS),{companyId:o,name:S.name,donorName:S.donor_name,grantReference:S.grant_reference||null,budget:parseFloat(S.budget)||0,spent:0,startDate:S.start_date||null,endDate:S.end_date||null,status:"active",createdBy:t.id,createdAt:Ce(),updatedAt:Ce()});e.invalidateQueries({queryKey:["donors-from-projects",o]}),e.invalidateQueries({queryKey:["projects-for-donors",o]})};return c?i.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Donors & Grants"}),i.jsx("p",{className:"text-muted-foreground",children:"Track donors and their grant contributions"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(W,{variant:"outline",onClick:()=>a(!0),children:[i.jsx(Ho,{className:"mr-2 h-4 w-4"}),"Import"]}),i.jsxs(W,{variant:"outline",onClick:g,children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export"]})]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(Q,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(te,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Xk,{className:"h-4 w-4"}),"Total Donors"]})}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:l.length})})]}),i.jsxs(Q,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(te,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(a8,{className:"h-4 w-4"}),"Total Grants"]})}),i.jsxs(ne,{children:[i.jsx("div",{className:"text-2xl font-bold",children:v}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[m," active"]})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(te,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Xn,{className:"h-4 w-4"}),"Total Funding"]})}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:d(f)})})]}),i.jsxs(Q,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(te,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Xn,{className:"h-4 w-4"}),"Avg. per Donor"]})}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:d(l.length>0?f/l.length:0)})})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Ms,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{placeholder:"Search donors...",value:n,onChange:x=>r(x.target.value),className:"pl-10"})]})})}),i.jsx(ne,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Donor Name"}),i.jsx(q,{className:"text-right",children:"Total Grants"}),i.jsx(q,{className:"text-right",children:"Active Grants"}),i.jsx(q,{className:"text-right",children:"Total Funding"})]})}),i.jsxs(Ut,{children:[h.map((x,S)=>i.jsxs(ve,{children:[i.jsx(V,{className:"font-medium",children:x.name}),i.jsx(V,{className:"text-right",children:x.totalGrants}),i.jsx(V,{className:"text-right",children:i.jsx(Ve,{variant:x.activeGrants>0?"default":"secondary",children:x.activeGrants})}),i.jsx(V,{className:"text-right",children:d(x.totalBudget)})]},S)),h.length===0&&i.jsx(ve,{children:i.jsx(V,{colSpan:4,className:"text-center text-muted-foreground py-8",children:"No donors found. Add projects with donor information to see them here."})})]})]})})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"All Grants"})}),i.jsx(ne,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Grant Reference"}),i.jsx(q,{children:"Project Name"}),i.jsx(q,{children:"Donor"}),i.jsx(q,{children:"Status"}),i.jsx(q,{className:"text-right",children:"Budget"}),i.jsx(q,{className:"text-right",children:"Spent"})]})}),i.jsx(Ut,{children:u.filter(x=>x.donor_name).map(x=>i.jsxs(ve,{children:[i.jsx(V,{className:"font-mono",children:x.grant_reference||"-"}),i.jsx(V,{className:"font-medium",children:x.name}),i.jsx(V,{children:x.donor_name}),i.jsx(V,{children:i.jsx(Ve,{variant:x.status==="active"?"default":"secondary",children:x.status})}),i.jsx(V,{className:"text-right",children:d(x.budget||0)}),i.jsx(V,{className:"text-right",children:d(x.spent||0)})]},x.id))})]})})]}),i.jsx(mg,{open:s,onOpenChange:a,onImport:b,columns:y,title:"Import Grants"})]})}const DA=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},LA=t=>{if(!t)return"";if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString().slice(0,10);if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString().slice(0,10)}return""};function Jet(){const{user:t}=ot(),{data:e}=Yl(),n=en(),[r,s]=N.useState(()=>{const A=new Date;return A.setMonth(A.getMonth()-3),A.toISOString().split("T")[0]}),[a,o]=N.useState(new Date().toISOString().split("T")[0]),[l,c]=N.useState(!1),u=["super_admin","admin","financial_manager","accountant","assistant_accountant"].includes(e||""),{data:d=[],isLoading:h,refetch:f}=we({queryKey:["accounts-payable",r,a,t==null?void 0:t.id],queryFn:async()=>{if(!t)return[];const A=await Fe.getPrimaryMembershipByUser(t.id);if(!(A!=null&&A.companyId))return[];const P=ge(re,Y.BILLS),k=(await Te(je(P,he("companyId","==",A.companyId)))).docs.map(z=>{const O=z.data();return{id:z.id,bill_number:String(O.billNumber??O.bill_number??`BILL-${z.id.slice(0,8).toUpperCase()}`),bill_date:LA(O.billDate??O.bill_date),due_date:LA(O.dueDate??O.due_date)||null,total:Number(O.total??0),status:String(O.status??"pending"),vendor_id:O.vendorId??O.vendor_id??null,vendors:null}}).filter(z=>z.bill_date>=r&&z.bill_date<=a),L=Array.from(new Set(k.map(z=>z.vendor_id).filter(Boolean))),U=new Map;if(L.length>0){const z=ge(re,Y.VENDORS),O=DA(L,30);(await Promise.all(O.map(D=>Te(je(z,he(Ha(),"in",D)))))).forEach(D=>{D.docs.forEach(K=>{const ie=K.data();U.set(K.id,String(ie.name??"-"))})})}return k.map(z=>({...z,vendors:z.vendor_id?{name:U.get(z.vendor_id)||"-"}:null})).sort((z,O)=>String(z.due_date||"").localeCompare(String(O.due_date||"")))},enabled:!!t}),{data:m=[]}=we({queryKey:["accounts-payable-payments",r,a,t==null?void 0:t.id],queryFn:async()=>{if(!t)return[];const A=await Fe.getPrimaryMembershipByUser(t.id);if(!(A!=null&&A.companyId))return[];const P=ge(re,Y.BILL_PAYMENTS),k=(await Te(je(P,he("companyId","==",A.companyId)))).docs.map($=>{const D=$.data();return{id:$.id,bill_id:D.billId??D.bill_id??null,amount:Number(D.amount??0),payment_date:LA(D.paymentDate??D.payment_date),notes:D.notes??null,journal_entry_id:D.journalEntryId??D.journal_entry_id??null,is_reversed:!!(D.isReversed??D.is_reversed??!1)}}).filter($=>$.payment_date>=r&&$.payment_date<=a),L=Array.from(new Set(k.map($=>$.bill_id).filter(Boolean))),U=new Map;if(L.length>0){const $=DA(L,30);(await Promise.all($.map(K=>Te(je(ge(re,Y.BILLS),he(Ha(),"in",K)))))).forEach(K=>{K.docs.forEach(ie=>{const ae=ie.data();U.set(ie.id,{billNumber:String(ae.billNumber??ae.bill_number??`BILL-${ie.id.slice(0,8).toUpperCase()}`),vendorId:ae.vendorId??ae.vendor_id??null})})})}const z=Array.from(new Set(Array.from(U.values()).map($=>$.vendorId).filter(Boolean))),O=new Map;if(z.length>0){const $=DA(z,30);(await Promise.all($.map(K=>Te(je(ge(re,Y.VENDORS),he(Ha(),"in",K)))))).forEach(K=>{K.docs.forEach(ie=>{const ae=ie.data();O.set(ie.id,String(ae.name??"-"))})})}return k.map($=>{const D=$.bill_id?U.get($.bill_id):null,K=(D==null?void 0:D.vendorId)&&O.get(D.vendorId)||"-";return{id:$.id,bill_id:$.bill_id,bill_number:(D==null?void 0:D.billNumber)||"-",vendor_name:K,amount:$.amount,payment_date:$.payment_date,notes:$.notes,journal_entry_id:$.journal_entry_id,is_reversed:$.is_reversed}}).sort(($,D)=>D.payment_date.localeCompare($.payment_date))},enabled:!!t}),v=Xe({mutationFn:async A=>{if(!t)throw new Error("Not authenticated");if(!A.journal_entry_id)throw new Error("Payment has no posted journal entry to reverse.");const P=await Fe.getPrimaryMembershipByUser(t.id);if(!(P!=null&&P.companyId))throw new Error("No company profile found for your account");const I=prompt(`Reason for reversing payment for ${A.bill_number} (optional):`)||void 0;return Cn.reverseJournalEntry({companyId:P.companyId,journalEntryId:A.journal_entry_id,reason:I})},onSuccess:()=>{n.invalidateQueries({queryKey:["accounts-payable"]}),n.invalidateQueries({queryKey:["accounts-payable-payments"]}),n.invalidateQueries({queryKey:["bills"]}),n.invalidateQueries({queryKey:["vendors"]}),n.invalidateQueries({queryKey:["bank-accounts"]}),n.invalidateQueries({queryKey:["journal-entries"]}),n.invalidateQueries({queryKey:["financial-reports"]}),n.invalidateQueries({queryKey:["dashboard"]}),Z.success("Bill payment journal entry reversed")},onError:A=>{Z.error(`Failed to reverse payment: ${A.message}`)}}),g=A=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(A),y=d.filter(A=>A.status.toLowerCase()!=="paid"),b=y.filter(A=>A.due_date&&Une(new Date(A.due_date))),x=y.filter(A=>{if(!A.due_date)return!1;const P=Ns(new Date(A.due_date),new Date);return P>=0&&P<=7}),S=d.filter(A=>A.status.toLowerCase()==="paid"),T=y.reduce((A,P)=>A+(P.total||0),0),_=b.reduce((A,P)=>A+(P.total||0),0),C=S.reduce((A,P)=>A+(P.total||0),0),E=()=>{nf(d,[{header:"Bill Number",key:"bill_number"},{header:"Bill Date",key:"bill_date"},{header:"Due Date",key:"due_date"},{header:"Amount",key:"total"},{header:"Status",key:"status"}],`accounts-payable-${r}-to-${a}`)},p=[{key:"bill_number",header:"Bill Number",required:!0},{key:"vendor_name",header:"Vendor Name",required:!1},{key:"bill_date",header:"Bill Date (YYYY-MM-DD)",required:!0},{key:"due_date",header:"Due Date (YYYY-MM-DD)",required:!1},{key:"amount",header:"Amount",required:!0},{key:"description",header:"Description",required:!1}],w=async A=>{if(!t)throw new Error("You must be logged in");const P=await Fe.getPrimaryMembershipByUser(t.id);if(!(P!=null&&P.companyId))throw new Error("No company profile found for your account");for(const I of A){const k=String(I.bill_date||new Date().toISOString().slice(0,10)),L=I.due_date||k,U=Number(I.amount)||0;await Cn.createBill({companyId:P.companyId,amount:U,billDate:k,dueDate:L,categoryName:"Miscellaneous",description:I.description||"Imported bill"})}f(),Z.success("Bills imported successfully")};return h?i.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Accounts Payable"}),i.jsx("p",{className:"text-muted-foreground",children:"Track and manage vendor bills and payments"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(W,{variant:"outline",onClick:()=>c(!0),children:[i.jsx(Ho,{className:"mr-2 h-4 w-4"}),"Import"]}),i.jsxs(W,{variant:"outline",onClick:E,children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export"]})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"Report Period"})}),i.jsx(ne,{children:i.jsxs("div",{className:"flex gap-4 items-end",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Start Date"}),i.jsx(G,{type:"date",value:r,onChange:A=>s(A.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"End Date"}),i.jsx(G,{type:"date",value:a,onChange:A=>o(A.target.value)})]})]})})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(Q,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(te,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(ur,{className:"h-4 w-4"}),"Total Bills"]})}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:d.length})})]}),i.jsxs(Q,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(te,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Di,{className:"h-4 w-4 text-warning"}),"Outstanding"]})}),i.jsxs(ne,{children:[i.jsx("div",{className:"text-2xl font-bold text-warning",children:g(T)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[y.length," bills"]})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(te,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(ks,{className:"h-4 w-4 text-destructive"}),"Overdue"]})}),i.jsxs(ne,{children:[i.jsx("div",{className:"text-2xl font-bold text-destructive",children:g(_)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[b.length," bills"]})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(te,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Vo,{className:"h-4 w-4 text-success"}),"Paid"]})}),i.jsxs(ne,{children:[i.jsx("div",{className:"text-2xl font-bold text-success",children:g(C)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[S.length," bills"]})]})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"Aging Summary"})}),i.jsx(ne,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Category"}),i.jsx(q,{className:"text-right",children:"Bills"}),i.jsx(q,{className:"text-right",children:"Amount"})]})}),i.jsxs(Ut,{children:[i.jsxs(ve,{children:[i.jsx(V,{children:"Current (not due)"}),i.jsx(V,{className:"text-right",children:y.filter(A=>!A.due_date||Ns(new Date(A.due_date),new Date)>7).length}),i.jsx(V,{className:"text-right",children:g(y.filter(A=>!A.due_date||Ns(new Date(A.due_date),new Date)>7).reduce((A,P)=>A+(P.total||0),0))})]}),i.jsxs(ve,{children:[i.jsx(V,{children:"Due within 7 days"}),i.jsx(V,{className:"text-right",children:x.length}),i.jsx(V,{className:"text-right text-warning",children:g(x.reduce((A,P)=>A+(P.total||0),0))})]}),i.jsxs(ve,{children:[i.jsx(V,{children:"1-30 days overdue"}),i.jsx(V,{className:"text-right",children:b.filter(A=>Ns(new Date,new Date(A.due_date||""))<=30).length}),i.jsx(V,{className:"text-right text-destructive",children:g(b.filter(A=>Ns(new Date,new Date(A.due_date||""))<=30).reduce((A,P)=>A+(P.total||0),0))})]}),i.jsxs(ve,{children:[i.jsx(V,{children:"Over 30 days overdue"}),i.jsx(V,{className:"text-right",children:b.filter(A=>Ns(new Date,new Date(A.due_date||""))>30).length}),i.jsx(V,{className:"text-right text-destructive font-bold",children:g(b.filter(A=>Ns(new Date,new Date(A.due_date||""))>30).reduce((A,P)=>A+(P.total||0),0))})]})]})]})})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"All Bills"})}),i.jsx(ne,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Bill #"}),i.jsx(q,{children:"Vendor"}),i.jsx(q,{children:"Bill Date"}),i.jsx(q,{children:"Due Date"}),i.jsx(q,{className:"text-right",children:"Amount"}),i.jsx(q,{children:"Status"}),i.jsx(q,{children:"Days Overdue"})]})}),i.jsx(Ut,{children:d.map(A=>{var I;const P=A.due_date&&A.status.toLowerCase()!=="paid"?Math.max(0,Ns(new Date,new Date(A.due_date))):0;return i.jsxs(ve,{children:[i.jsx(V,{className:"font-medium",children:A.bill_number}),i.jsx(V,{children:((I=A.vendors)==null?void 0:I.name)||"-"}),i.jsx(V,{children:ut(new Date(A.bill_date),"dd MMM yyyy")}),i.jsx(V,{children:A.due_date?ut(new Date(A.due_date),"dd MMM yyyy"):"-"}),i.jsx(V,{className:"text-right",children:g(A.total)}),i.jsx(V,{children:i.jsx(Ve,{variant:A.status.toLowerCase()==="paid"?"default":P>0?"destructive":"secondary",children:A.status})}),i.jsx(V,{children:A.status.toLowerCase()==="paid"?"-":P>0?`${P} days`:"Current"})]},A.id)})})]})})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"Bill Payments"})}),i.jsx(ne,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Date"}),i.jsx(q,{children:"Bill #"}),i.jsx(q,{children:"Vendor"}),i.jsx(q,{className:"text-right",children:"Amount"}),i.jsx(q,{children:"Notes"}),i.jsx(q,{children:"Status"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ut,{children:[m.map(A=>i.jsxs(ve,{children:[i.jsx(V,{children:A.payment_date?ut(new Date(A.payment_date),"dd MMM yyyy"):"-"}),i.jsx(V,{className:"font-medium",children:A.bill_number}),i.jsx(V,{children:A.vendor_name}),i.jsx(V,{className:"text-right",children:g(A.amount)}),i.jsx(V,{children:A.notes||"-"}),i.jsx(V,{children:A.is_reversed?i.jsx(Ve,{variant:"outline",className:"text-orange-600 border-orange-600",children:"Reversed"}):i.jsx(Ve,{variant:"secondary",children:"Posted"})}),i.jsx(V,{className:"text-right",children:A.journal_entry_id&&u&&!A.is_reversed&&i.jsx(W,{variant:"ghost",size:"icon",disabled:v.isPending,onClick:()=>{confirm("Reverse this bill payment entry?")&&v.mutate(A)},title:"Reverse payment entry",children:i.jsx(mh,{className:"h-4 w-4"})})})]},A.id)),m.length===0&&i.jsx(ve,{children:i.jsx(V,{colSpan:7,className:"text-center text-muted-foreground",children:"No payments in selected period"})})]})]})})]}),i.jsx(mg,{open:l,onOpenChange:c,onImport:w,columns:p,title:"Import Bills"})]})}const $A=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},FA=t=>{if(!t)return"";if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString().slice(0,10);if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString().slice(0,10)}return""};function ett(){const{user:t}=ot(),{data:e}=Yl(),n=en(),[r,s]=N.useState(()=>{const A=new Date;return A.setMonth(A.getMonth()-3),A.toISOString().split("T")[0]}),[a,o]=N.useState(new Date().toISOString().split("T")[0]),[l,c]=N.useState(!1),u=["super_admin","admin","financial_manager","accountant","assistant_accountant"].includes(e||""),{data:d=[],isLoading:h,refetch:f}=we({queryKey:["accounts-receivable",r,a,t==null?void 0:t.id],queryFn:async()=>{if(!t)return[];const A=await Fe.getPrimaryMembershipByUser(t.id);if(!(A!=null&&A.companyId))return[];const P=ge(re,Y.INVOICES),k=(await Te(je(P,he("companyId","==",A.companyId)))).docs.map(z=>{const O=z.data();return{id:z.id,invoice_number:String(O.invoiceNumber??O.invoice_number??`INV-${z.id.slice(0,8).toUpperCase()}`),invoice_date:FA(O.invoiceDate??O.invoice_date),due_date:FA(O.dueDate??O.due_date)||null,total:Number(O.total??0),status:String(O.status??"draft"),customer_id:O.customerId??O.customer_id??null,customers:null}}).filter(z=>z.invoice_date>=r&&z.invoice_date<=a),L=Array.from(new Set(k.map(z=>z.customer_id).filter(Boolean))),U=new Map;if(L.length>0){const z=ge(re,Y.CUSTOMERS),O=$A(L,30);(await Promise.all(O.map(D=>Te(je(z,he(Ha(),"in",D)))))).forEach(D=>{D.docs.forEach(K=>{const ie=K.data();U.set(K.id,String(ie.name??"-"))})})}return k.map(z=>({...z,customers:z.customer_id?{name:U.get(z.customer_id)||"-"}:null})).sort((z,O)=>String(z.due_date||"").localeCompare(String(O.due_date||"")))},enabled:!!t}),{data:m=[]}=we({queryKey:["accounts-receivable-payments",r,a,t==null?void 0:t.id],queryFn:async()=>{if(!t)return[];const A=await Fe.getPrimaryMembershipByUser(t.id);if(!(A!=null&&A.companyId))return[];const P=ge(re,Y.INVOICE_PAYMENTS),k=(await Te(je(P,he("companyId","==",A.companyId)))).docs.map($=>{const D=$.data();return{id:$.id,invoice_id:D.invoiceId??D.invoice_id??null,amount:Number(D.amount??0),payment_date:FA(D.paymentDate??D.payment_date),notes:D.notes??null,journal_entry_id:D.journalEntryId??D.journal_entry_id??null,is_reversed:!!(D.isReversed??D.is_reversed??!1)}}).filter($=>$.payment_date>=r&&$.payment_date<=a),L=Array.from(new Set(k.map($=>$.invoice_id).filter(Boolean))),U=new Map;if(L.length>0){const $=$A(L,30);(await Promise.all($.map(K=>Te(je(ge(re,Y.INVOICES),he(Ha(),"in",K)))))).forEach(K=>{K.docs.forEach(ie=>{const ae=ie.data();U.set(ie.id,{invoiceNumber:String(ae.invoiceNumber??ae.invoice_number??`INV-${ie.id.slice(0,8).toUpperCase()}`),customerId:ae.customerId??ae.customer_id??null})})})}const z=Array.from(new Set(Array.from(U.values()).map($=>$.customerId).filter(Boolean))),O=new Map;if(z.length>0){const $=$A(z,30);(await Promise.all($.map(K=>Te(je(ge(re,Y.CUSTOMERS),he(Ha(),"in",K)))))).forEach(K=>{K.docs.forEach(ie=>{const ae=ie.data();O.set(ie.id,String(ae.name??"-"))})})}return k.map($=>{const D=$.invoice_id?U.get($.invoice_id):null,K=(D==null?void 0:D.customerId)&&O.get(D.customerId)||"-";return{id:$.id,invoice_id:$.invoice_id,invoice_number:(D==null?void 0:D.invoiceNumber)||"-",customer_name:K,amount:$.amount,payment_date:$.payment_date,notes:$.notes,journal_entry_id:$.journal_entry_id,is_reversed:$.is_reversed}}).sort(($,D)=>D.payment_date.localeCompare($.payment_date))},enabled:!!t}),v=Xe({mutationFn:async A=>{if(!t)throw new Error("Not authenticated");if(!A.journal_entry_id)throw new Error("Payment has no posted journal entry to reverse.");const P=await Fe.getPrimaryMembershipByUser(t.id);if(!(P!=null&&P.companyId))throw new Error("No company profile found for your account");const I=prompt(`Reason for reversing payment for ${A.invoice_number} (optional):`)||void 0;return Cn.reverseJournalEntry({companyId:P.companyId,journalEntryId:A.journal_entry_id,reason:I})},onSuccess:()=>{n.invalidateQueries({queryKey:["accounts-receivable"]}),n.invalidateQueries({queryKey:["accounts-receivable-payments"]}),n.invalidateQueries({queryKey:["invoices"]}),n.invalidateQueries({queryKey:["customers"]}),n.invalidateQueries({queryKey:["bank-accounts"]}),n.invalidateQueries({queryKey:["journal-entries"]}),n.invalidateQueries({queryKey:["financial-reports"]}),n.invalidateQueries({queryKey:["dashboard"]}),Z.success("Invoice payment journal entry reversed")},onError:A=>{Z.error(`Failed to reverse payment: ${A.message}`)}}),g=A=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(A),y=d.filter(A=>A.status.toLowerCase()!=="paid"),b=y.filter(A=>A.due_date&&Une(new Date(A.due_date))),x=y.filter(A=>{if(!A.due_date)return!1;const P=Ns(new Date(A.due_date),new Date);return P>=0&&P<=7}),S=d.filter(A=>A.status.toLowerCase()==="paid"),T=y.reduce((A,P)=>A+(P.total||0),0),_=b.reduce((A,P)=>A+(P.total||0),0),C=S.reduce((A,P)=>A+(P.total||0),0),E=()=>{nf(d,[{header:"Invoice Number",key:"invoice_number"},{header:"Invoice Date",key:"invoice_date"},{header:"Due Date",key:"due_date"},{header:"Amount",key:"total"},{header:"Status",key:"status"}],`accounts-receivable-${r}-to-${a}`)},p=[{key:"invoice_number",header:"Invoice Number",required:!0},{key:"customer_name",header:"Customer Name",required:!1},{key:"invoice_date",header:"Invoice Date (YYYY-MM-DD)",required:!0},{key:"due_date",header:"Due Date (YYYY-MM-DD)",required:!1},{key:"amount",header:"Amount",required:!0},{key:"notes",header:"Notes",required:!1}],w=async A=>{if(!t)throw new Error("You must be logged in");const P=await Fe.getPrimaryMembershipByUser(t.id);if(!(P!=null&&P.companyId))throw new Error("No company profile found for your account");for(const I of A){const k=String(I.invoice_date||new Date().toISOString().slice(0,10)),L=I.due_date||k,U=Number(I.amount)||0;await Cn.createInvoice({companyId:P.companyId,invoiceNumber:String(I.invoice_number||"").trim()||void 0,invoiceDate:k,dueDate:L,status:"Unpaid",notes:I.notes||void 0,totalAmount:U,lineItems:[{description:I.notes||"Imported invoice",quantity:1,unitPrice:U}]})}f(),Z.success("Invoices imported successfully")};return h?i.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Accounts Receivable"}),i.jsx("p",{className:"text-muted-foreground",children:"Track customer invoices and collections"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(W,{variant:"outline",onClick:()=>c(!0),children:[i.jsx(Ho,{className:"mr-2 h-4 w-4"}),"Import"]}),i.jsxs(W,{variant:"outline",onClick:E,children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export"]})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"Report Period"})}),i.jsx(ne,{children:i.jsxs("div",{className:"flex gap-4 items-end",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Start Date"}),i.jsx(G,{type:"date",value:r,onChange:A=>s(A.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"End Date"}),i.jsx(G,{type:"date",value:a,onChange:A=>o(A.target.value)})]})]})})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(Q,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(te,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(ur,{className:"h-4 w-4"}),"Total Invoices"]})}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:d.length})})]}),i.jsxs(Q,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(te,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(ma,{className:"h-4 w-4 text-primary"}),"Receivable"]})}),i.jsxs(ne,{children:[i.jsx("div",{className:"text-2xl font-bold text-primary",children:g(T)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[y.length," invoices"]})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(te,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(ks,{className:"h-4 w-4 text-destructive"}),"Overdue"]})}),i.jsxs(ne,{children:[i.jsx("div",{className:"text-2xl font-bold text-destructive",children:g(_)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[b.length," invoices"]})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{className:"pb-2",children:i.jsxs(te,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Vo,{className:"h-4 w-4 text-success"}),"Collected"]})}),i.jsxs(ne,{children:[i.jsx("div",{className:"text-2xl font-bold text-success",children:g(C)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[S.length," invoices"]})]})]})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"Aging Summary"})}),i.jsx(ne,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Category"}),i.jsx(q,{className:"text-right",children:"Invoices"}),i.jsx(q,{className:"text-right",children:"Amount"})]})}),i.jsxs(Ut,{children:[i.jsxs(ve,{children:[i.jsx(V,{children:"Current (not due)"}),i.jsx(V,{className:"text-right",children:y.filter(A=>!A.due_date||Ns(new Date(A.due_date),new Date)>7).length}),i.jsx(V,{className:"text-right",children:g(y.filter(A=>!A.due_date||Ns(new Date(A.due_date),new Date)>7).reduce((A,P)=>A+(P.total||0),0))})]}),i.jsxs(ve,{children:[i.jsx(V,{children:"Due within 7 days"}),i.jsx(V,{className:"text-right",children:x.length}),i.jsx(V,{className:"text-right text-warning",children:g(x.reduce((A,P)=>A+(P.total||0),0))})]}),i.jsxs(ve,{children:[i.jsx(V,{children:"1-30 days overdue"}),i.jsx(V,{className:"text-right",children:b.filter(A=>Ns(new Date,new Date(A.due_date||""))<=30).length}),i.jsx(V,{className:"text-right text-destructive",children:g(b.filter(A=>Ns(new Date,new Date(A.due_date||""))<=30).reduce((A,P)=>A+(P.total||0),0))})]}),i.jsxs(ve,{children:[i.jsx(V,{children:"Over 30 days overdue"}),i.jsx(V,{className:"text-right",children:b.filter(A=>Ns(new Date,new Date(A.due_date||""))>30).length}),i.jsx(V,{className:"text-right text-destructive font-bold",children:g(b.filter(A=>Ns(new Date,new Date(A.due_date||""))>30).reduce((A,P)=>A+(P.total||0),0))})]})]})]})})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"All Invoices"})}),i.jsx(ne,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Invoice #"}),i.jsx(q,{children:"Customer"}),i.jsx(q,{children:"Invoice Date"}),i.jsx(q,{children:"Due Date"}),i.jsx(q,{className:"text-right",children:"Amount"}),i.jsx(q,{children:"Status"}),i.jsx(q,{children:"Days Overdue"})]})}),i.jsx(Ut,{children:d.map(A=>{var I;const P=A.due_date&&A.status.toLowerCase()!=="paid"?Math.max(0,Ns(new Date,new Date(A.due_date))):0;return i.jsxs(ve,{children:[i.jsx(V,{className:"font-medium",children:A.invoice_number}),i.jsx(V,{children:((I=A.customers)==null?void 0:I.name)||"-"}),i.jsx(V,{children:ut(new Date(A.invoice_date),"dd MMM yyyy")}),i.jsx(V,{children:A.due_date?ut(new Date(A.due_date),"dd MMM yyyy"):"-"}),i.jsx(V,{className:"text-right",children:g(A.total)}),i.jsx(V,{children:i.jsx(Ve,{variant:A.status.toLowerCase()==="paid"?"default":P>0?"destructive":"secondary",children:A.status})}),i.jsx(V,{children:A.status.toLowerCase()==="paid"?"-":P>0?`${P} days`:"Current"})]},A.id)})})]})})]}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"Invoice Payments"})}),i.jsx(ne,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Date"}),i.jsx(q,{children:"Invoice #"}),i.jsx(q,{children:"Customer"}),i.jsx(q,{className:"text-right",children:"Amount"}),i.jsx(q,{children:"Notes"}),i.jsx(q,{children:"Status"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ut,{children:[m.map(A=>i.jsxs(ve,{children:[i.jsx(V,{children:A.payment_date?ut(new Date(A.payment_date),"dd MMM yyyy"):"-"}),i.jsx(V,{className:"font-medium",children:A.invoice_number}),i.jsx(V,{children:A.customer_name}),i.jsx(V,{className:"text-right",children:g(A.amount)}),i.jsx(V,{children:A.notes||"-"}),i.jsx(V,{children:A.is_reversed?i.jsx(Ve,{variant:"outline",className:"text-orange-600 border-orange-600",children:"Reversed"}):i.jsx(Ve,{variant:"secondary",children:"Posted"})}),i.jsx(V,{className:"text-right",children:A.journal_entry_id&&u&&!A.is_reversed&&i.jsx(W,{variant:"ghost",size:"icon",disabled:v.isPending,onClick:()=>{confirm("Reverse this invoice payment entry?")&&v.mutate(A)},title:"Reverse payment entry",children:i.jsx(mh,{className:"h-4 w-4"})})})]},A.id)),m.length===0&&i.jsx(ve,{children:i.jsx(V,{colSpan:7,className:"text-center text-muted-foreground",children:"No payments in selected period"})})]})]})})]}),i.jsx(mg,{open:l,onOpenChange:c,onImport:w,columns:p,title:"Import Invoices"})]})}function ttt(){const{user:t}=ot(),e=en(),[n,r]=N.useState(""),[s,a]=N.useState(!1),[o,l]=N.useState({asset_number:"",name:"",description:"",category_id:"",purchase_date:new Date().toISOString().split("T")[0],purchase_cost:"",residual_value:"0",useful_life_months:"60",depreciation_method:"straight_line",location:"",serial_number:""}),{data:c}=we({queryKey:["fixed-assets-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const x=await Fe.getPrimaryMembershipByUser(t.id);return(x==null?void 0:x.companyId)??null},enabled:!!t}),{data:u,isLoading:d}=we({queryKey:["fixed-assets",c],queryFn:async()=>{if(!c)return[];const x=ge(re,Y.FIXED_ASSETS),S=ge(re,Y.ASSET_CATEGORIES),[T,_]=await Promise.all([Te(je(x,he("companyId","==",c))),Te(je(S,he("companyId","==",c)))]),C=new Map;return _.docs.forEach(E=>{const p=E.data();C.set(E.id,{name:String(p.name??""),depreciation_method:p.depreciationMethod??p.depreciation_method??null,useful_life_years:Number(p.usefulLifeYears??p.useful_life_years??0)||null})}),T.docs.map(E=>{var I;const p=E.data(),w=p.createdAt??p.created_at,A=typeof w=="string"?w:((I=w==null?void 0:w.toDate)==null?void 0:I.call(w).toISOString())??"",P=p.categoryId??p.category_id??null;return{id:E.id,user_id:String(p.userId??p.user_id??""),company_id:String(p.companyId??p.company_id??""),asset_number:String(p.assetNumber??p.asset_number??""),name:String(p.name??""),description:p.description??null,category_id:P,purchase_date:String(p.purchaseDate??p.purchase_date??""),purchase_cost:Number(p.purchaseCost??p.purchase_cost??0),residual_value:Number(p.residualValue??p.residual_value??0),useful_life_months:Number(p.usefulLifeMonths??p.useful_life_months??0),depreciation_method:String(p.depreciationMethod??p.depreciation_method??"straight_line"),location:p.location??null,serial_number:p.serialNumber??p.serial_number??null,net_book_value:Number(p.netBookValue??p.net_book_value??p.purchaseCost??p.purchase_cost??0),accumulated_depreciation:Number(p.accumulatedDepreciation??p.accumulated_depreciation??0),status:String(p.status??"active"),is_deleted:!!(p.isDeleted??p.is_deleted??!1),created_at:A,asset_categories:P?C.get(P)??null:null}}).filter(E=>!E.is_deleted).sort((E,p)=>p.created_at.localeCompare(E.created_at))},enabled:!!c}),{data:h}=we({queryKey:["asset-categories",c],queryFn:async()=>{if(!c)return[];const x=ge(re,Y.ASSET_CATEGORIES);return(await Te(je(x,he("companyId","==",c)))).docs.map(T=>{const _=T.data();return{id:T.id,name:String(_.name??"")}}).sort((T,_)=>T.name.localeCompare(_.name))},enabled:!!c}),f=Xe({mutationFn:async()=>{if(!t||!c)throw new Error("Not authenticated");const x=parseFloat(o.purchase_cost),S=parseFloat(o.residual_value)||0,T=parseInt(o.useful_life_months,10),_=T>0?Math.max(0,(x-S)/T):0;await es(ge(re,Y.FIXED_ASSETS),{userId:t.id,companyId:c,assetNumber:o.asset_number,name:o.name,description:o.description||null,categoryId:o.category_id||null,purchaseDate:o.purchase_date,purchaseCost:x,residualValue:S,usefulLifeMonths:T,depreciationMethod:o.depreciation_method,location:o.location||null,serialNumber:o.serial_number||null,monthlyDepreciation:_,netBookValue:x,accumulatedDepreciation:0,status:"active",isDeleted:!1,createdAt:Ce(),updatedAt:Ce()})},onSuccess:()=>{e.invalidateQueries({queryKey:["fixed-assets",c]}),Z.success("Asset created successfully"),a(!1),l({asset_number:"",name:"",description:"",category_id:"",purchase_date:new Date().toISOString().split("T")[0],purchase_cost:"",residual_value:"0",useful_life_months:"60",depreciation_method:"straight_line",location:"",serial_number:""})},onError:x=>{Z.error(x.message||"Failed to create asset")}}),m=u==null?void 0:u.filter(x=>x.name.toLowerCase().includes(n.toLowerCase())||x.asset_number.toLowerCase().includes(n.toLowerCase())),v=(u==null?void 0:u.reduce((x,S)=>x+Number(S.purchase_cost||0),0))||0,g=(u==null?void 0:u.reduce((x,S)=>x+Number(S.accumulated_depreciation||0),0))||0,y=(u==null?void 0:u.reduce((x,S)=>x+Number(S.net_book_value||S.purchase_cost||0),0))||0,b=x=>{switch(x){case"active":return i.jsx(Ve,{className:"bg-green-600",children:"Active"});case"disposed":return i.jsx(Ve,{variant:"destructive",children:"Disposed"});case"fully_depreciated":return i.jsx(Ve,{variant:"secondary",children:"Fully Depreciated"});case"under_maintenance":return i.jsx(Ve,{variant:"outline",className:"text-yellow-600 border-yellow-600",children:"Maintenance"});default:return i.jsx(Ve,{variant:"outline",children:x})}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Fixed Assets"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your organization's fixed assets and depreciation"})]}),i.jsxs(Zn,{open:s,onOpenChange:a,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(W,{children:[i.jsx(_n,{className:"h-4 w-4 mr-2"}),"Add Asset"]})}),i.jsxs(Hn,{className:"max-w-2xl",children:[i.jsxs(Kn,{children:[i.jsx(Gn,{children:"Add New Fixed Asset"}),i.jsx(od,{children:"Enter the details of the new asset"})]}),i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Asset Number *"}),i.jsx(G,{value:o.asset_number,onChange:x=>l({...o,asset_number:x.target.value}),placeholder:"FA-001"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Asset Name *"}),i.jsx(G,{value:o.name,onChange:x=>l({...o,name:x.target.value}),placeholder:"Office Computer"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Description"}),i.jsx(hr,{value:o.description,onChange:x=>l({...o,description:x.target.value}),placeholder:"Asset description..."})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Category"}),i.jsxs(Ct,{value:o.category_id,onValueChange:x=>l({...o,category_id:x}),children:[i.jsx(Et,{children:i.jsx(Pt,{placeholder:"Select category"})}),i.jsx(At,{children:h==null?void 0:h.map(x=>i.jsx(ye,{value:x.id,children:x.name},x.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Purchase Date *"}),i.jsx(G,{type:"date",value:o.purchase_date,onChange:x=>l({...o,purchase_date:x.target.value})})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Purchase Cost (ZMW) *"}),i.jsx(G,{type:"number",value:o.purchase_cost,onChange:x=>l({...o,purchase_cost:x.target.value}),placeholder:"0.00"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Residual Value (ZMW)"}),i.jsx(G,{type:"number",value:o.residual_value,onChange:x=>l({...o,residual_value:x.target.value}),placeholder:"0.00"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Useful Life (Months)"}),i.jsx(G,{type:"number",value:o.useful_life_months,onChange:x=>l({...o,useful_life_months:x.target.value}),placeholder:"60"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Depreciation Method"}),i.jsxs(Ct,{value:o.depreciation_method,onValueChange:x=>l({...o,depreciation_method:x}),children:[i.jsx(Et,{children:i.jsx(Pt,{})}),i.jsxs(At,{children:[i.jsx(ye,{value:"straight_line",children:"Straight Line"}),i.jsx(ye,{value:"reducing_balance",children:"Reducing Balance"}),i.jsx(ye,{value:"units_of_production",children:"Units of Production"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Location"}),i.jsx(G,{value:o.location,onChange:x=>l({...o,location:x.target.value}),placeholder:"Head Office"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Serial Number"}),i.jsx(G,{value:o.serial_number,onChange:x=>l({...o,serial_number:x.target.value}),placeholder:"SN-12345"})]})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(W,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),i.jsxs(W,{onClick:()=>f.mutate(),disabled:!o.asset_number||!o.name||!o.purchase_cost||f.isPending,children:[f.isPending?i.jsx(En,{className:"h-4 w-4 animate-spin mr-2"}):null,"Create Asset"]})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(Q,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsxs(dt,{className:"flex items-center gap-2",children:[i.jsx(sa,{className:"h-4 w-4"}),"Total Assets"]}),i.jsx(te,{className:"text-2xl",children:(u==null?void 0:u.length)||0})]})}),i.jsx(Q,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(dt,{children:"Total Asset Value"}),i.jsx(te,{className:"text-2xl text-primary",children:le(v)})]})}),i.jsx(Q,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsxs(dt,{className:"flex items-center gap-2",children:[i.jsx(Ja,{className:"h-4 w-4"}),"Accumulated Depreciation"]}),i.jsx(te,{className:"text-2xl text-destructive",children:le(g)})]})}),i.jsx(Q,{className:"bg-primary/5 border-primary/20",children:i.jsxs(ee,{className:"pb-2",children:[i.jsxs(dt,{className:"flex items-center gap-2",children:[i.jsx(fv,{className:"h-4 w-4"}),"Net Book Value"]}),i.jsx(te,{className:"text-2xl text-primary",children:le(y)})]})})]}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative flex-1 max-w-sm",children:[i.jsx(Ms,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"Search assets...",value:n,onChange:x=>r(x.target.value),className:"pl-9"})]})}),i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsx(te,{children:"Asset Register"})}),i.jsx(ne,{children:d?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx(En,{className:"h-8 w-8 animate-spin"})}):m&&m.length>0?i.jsx("div",{className:"border rounded-lg overflow-x-auto",children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Asset #"}),i.jsx(q,{children:"Name"}),i.jsx(q,{children:"Category"}),i.jsx(q,{children:"Purchase Date"}),i.jsx(q,{className:"text-right",children:"Cost"}),i.jsx(q,{className:"text-right",children:"Accum. Dep."}),i.jsx(q,{className:"text-right",children:"NBV"}),i.jsx(q,{children:"Status"})]})}),i.jsx(Ut,{children:m.map(x=>{var S;return i.jsxs(ve,{children:[i.jsx(V,{className:"font-mono",children:x.asset_number}),i.jsx(V,{children:i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:x.name}),x.serial_number&&i.jsxs("p",{className:"text-sm text-muted-foreground",children:["SN: ",x.serial_number]})]})}),i.jsx(V,{children:((S=x.asset_categories)==null?void 0:S.name)||"-"}),i.jsx(V,{children:ut(new Date(x.purchase_date),"dd MMM yyyy")}),i.jsx(V,{className:"text-right",children:le(Number(x.purchase_cost))}),i.jsx(V,{className:"text-right text-destructive",children:le(Number(x.accumulated_depreciation||0))}),i.jsx(V,{className:"text-right font-medium",children:le(Number(x.net_book_value||x.purchase_cost))}),i.jsx(V,{children:b(x.status||"active")})]},x.id)})})]})}):i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(sa,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No fixed assets found"}),i.jsx("p",{className:"text-sm",children:"Add your first asset to get started"})]})})]})]})}function ntt(){const t=en(),{user:e}=ot(),n=Xe({mutationFn:async({periodMonth:r,postToGL:s=!0})=>{if(!e)throw new Error("Not authenticated");const a=await Fe.getPrimaryMembershipByUser(e.id);if(!(a!=null&&a.companyId))throw new Error("No company found");const o=await rh.runDepreciation({companyId:a.companyId,periodMonth:r,postToGL:s});return{success:o.success,period:r,assets_processed:o.assetsProcessed,total_depreciation:o.totalDepreciation,posted_to_gl:!!s,results:[]}},onSuccess:r=>{Z.success(`Depreciation completed: ${r.assets_processed} assets, K${r.total_depreciation.toFixed(2)} total`),t.invalidateQueries({queryKey:["asset-depreciation"]}),t.invalidateQueries({queryKey:["fixed-assets"]}),t.invalidateQueries({queryKey:["depreciable-assets"]}),t.invalidateQueries({queryKey:["journal-entries"]})},onError:r=>{Z.error(r.message||"Failed to run depreciation")}});return{runDepreciation:n,isRunning:n.isPending,lastResult:n.data}}function rtt(){const{user:t}=ot(),[e,n]=N.useState(ut(q6(new Date,1),"yyyy-MM")),[r,s]=N.useState(!1),[a,o]=N.useState(!0),{runDepreciation:l,isRunning:c,lastResult:u}=ntt(),{data:d}=we({queryKey:["asset-depreciation-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const b=await Fe.getPrimaryMembershipByUser(t.id);return(b==null?void 0:b.companyId)??null},enabled:!!t}),{data:h,isLoading:f}=we({queryKey:["asset-depreciation",d,e],queryFn:async()=>{if(!d)return[];const b=Fne(new Date(e+"-01")),x=$ne(b),S=ut(b,"yyyy-MM-dd"),T=ut(x,"yyyy-MM-dd"),[_,C]=await Promise.all([Te(je(ge(re,Y.DEPRECIATION_ENTRIES),he("companyId","==",d))),Te(je(ge(re,Y.FIXED_ASSETS),he("companyId","==",d)))]),E=new Map;return C.docs.forEach(p=>{const w=p.data();E.set(p.id,{asset_number:String(w.assetNumber??w.asset_number??""),name:String(w.name??""),purchase_cost:Number(w.purchaseCost??w.purchase_cost??0),depreciation_method:String(w.depreciationMethod??w.depreciation_method??"straight_line")})}),_.docs.map(p=>{const w=p.data(),A=String(w.periodStart??w.period_start??""),P=String(w.periodEnd??w.period_end??"");return{id:p.id,asset_id:String(w.assetId??w.asset_id??""),depreciation_amount:Number(w.depreciationAmount??w.depreciation_amount??0),accumulated_depreciation:Number(w.accumulatedDepreciation??w.accumulated_depreciation??0),net_book_value:Number(w.netBookValue??w.net_book_value??0),is_posted:!!(w.isPosted??w.is_posted??!1),period_start:A,period_end:P,created_at:String(w.createdAt??w.created_at??""),fixed_assets:E.get(String(w.assetId??w.asset_id??""))??null}}).filter(p=>p.period_start>=S&&p.period_end<=T).sort((p,w)=>String(w.created_at).localeCompare(String(p.created_at)))},enabled:!!d}),{data:m}=we({queryKey:["depreciable-assets",d],queryFn:async()=>d?(await Te(je(ge(re,Y.FIXED_ASSETS),he("companyId","==",d),he("status","==","active")))).docs.map(x=>{const S=x.data();return{id:x.id,status:String(S.status??"active"),is_deleted:!!(S.isDeleted??S.is_deleted??!1)}}).filter(x=>!x.is_deleted):[],enabled:!!d}),v=async()=>{try{await l.mutateAsync({periodMonth:e,postToGL:a}),s(!1)}catch{}},g=(h==null?void 0:h.reduce((b,x)=>b+Number(x.depreciation_amount||0),0))||0,y=Array.from({length:12},(b,x)=>{const S=q6(new Date,x);return{value:ut(S,"yyyy-MM"),label:ut(S,"MMMM yyyy")}});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Asset Depreciation"}),i.jsx("p",{className:"text-muted-foreground",children:"Run and view depreciation calculations"})]}),i.jsxs(W,{onClick:()=>s(!0),children:[i.jsx(c8,{className:"h-4 w-4 mr-2"}),"Run Depreciation"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(Q,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsxs(dt,{className:"flex items-center gap-2",children:[i.jsx(fv,{className:"h-4 w-4"}),"Active Assets"]}),i.jsx(te,{className:"text-2xl",children:(m==null?void 0:m.filter(b=>b.status==="active").length)||0})]})}),i.jsx(Q,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(dt,{children:"Records This Period"}),i.jsx(te,{className:"text-2xl",children:(h==null?void 0:h.length)||0})]})}),i.jsx(Q,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsxs(dt,{className:"flex items-center gap-2",children:[i.jsx(Ja,{className:"h-4 w-4 text-destructive"}),"Total Depreciation"]}),i.jsx(te,{className:"text-2xl text-destructive",children:le(g)})]})}),i.jsx(Q,{className:"bg-muted/50",children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(dt,{children:"Posted to GL"}),i.jsx(te,{className:"text-2xl text-green-600",children:(h==null?void 0:h.filter(b=>b.is_posted).length)||0})]})})]}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs(Ct,{value:e,onValueChange:n,children:[i.jsx(Et,{className:"w-[200px]",children:i.jsx(Pt,{placeholder:"Select month"})}),i.jsx(At,{children:y.map(b=>i.jsx(ye,{value:b.value,children:b.label},b.value))})]})}),i.jsxs(Q,{children:[i.jsxs(ee,{children:[i.jsx(te,{children:"Depreciation Records"}),i.jsxs(dt,{children:["Monthly depreciation entries for ",ut(new Date(e+"-01"),"MMMM yyyy")]})]}),i.jsx(ne,{children:f?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(En,{className:"h-8 w-8 animate-spin"})}):h&&h.length>0?i.jsx("div",{className:"border rounded-lg overflow-x-auto",children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Asset"}),i.jsx(q,{children:"Method"}),i.jsx(q,{className:"text-right",children:"Depreciation"}),i.jsx(q,{className:"text-right",children:"Accum. Dep."}),i.jsx(q,{className:"text-right",children:"NBV"}),i.jsx(q,{children:"Status"})]})}),i.jsx(Ut,{children:h.map(b=>{var x,S,T,_;return i.jsxs(ve,{children:[i.jsx(V,{children:i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:(x=b.fixed_assets)==null?void 0:x.name}),i.jsx("p",{className:"text-sm text-muted-foreground font-mono",children:(S=b.fixed_assets)==null?void 0:S.asset_number})]})}),i.jsx(V,{className:"capitalize",children:(_=(T=b.fixed_assets)==null?void 0:T.depreciation_method)==null?void 0:_.replace("_"," ")}),i.jsx(V,{className:"text-right text-destructive",children:le(Number(b.depreciation_amount))}),i.jsx(V,{className:"text-right",children:le(Number(b.accumulated_depreciation))}),i.jsx(V,{className:"text-right font-medium",children:le(Number(b.net_book_value))}),i.jsx(V,{children:b.is_posted?i.jsxs(Ve,{className:"bg-green-600",children:[i.jsx(Vo,{className:"h-3 w-3 mr-1"}),"Posted"]}):i.jsx(Ve,{variant:"outline",children:"Pending"})})]},b.id)})})]})}):i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(Ja,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No depreciation records for this period"}),i.jsx("p",{className:"text-sm",children:"Run depreciation to calculate monthly values"})]})})]}),i.jsx(Fh,{open:r,onOpenChange:s,children:i.jsxs(Ou,{children:[i.jsxs(Mu,{children:[i.jsxs(Lu,{className:"flex items-center gap-2",children:[i.jsx(eo,{className:"h-5 w-5 text-amber-500"}),"Run Monthly Depreciation"]}),i.jsxs($u,{className:"space-y-2",children:[i.jsx("p",{children:"This will calculate depreciation for all active fixed assets for:"}),i.jsx("p",{className:"font-medium text-foreground",children:ut(new Date(e+"-01"),"MMMM yyyy")}),i.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm mt-4",children:[i.jsx("li",{children:"Calculate depreciation based on each asset's method"}),i.jsx("li",{children:"Update accumulated depreciation and net book value"}),i.jsx("li",{children:"Create journal entries for the GL"}),i.jsx("li",{children:"Mark fully depreciated assets"})]})]})]}),i.jsx("div",{className:"py-4",children:i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(hv,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"Post to General Ledger"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Create journal entries automatically"})]})]}),i.jsx("input",{type:"checkbox",checked:a,onChange:b=>o(b.target.checked),className:"h-4 w-4"})]})}),i.jsxs(Du,{children:[i.jsx(Vu,{children:"Cancel"}),i.jsxs(Fu,{onClick:v,disabled:c,children:[c&&i.jsx(En,{className:"h-4 w-4 mr-2 animate-spin"}),"Run Depreciation"]})]})]})}),u&&i.jsx(Q,{className:"border-green-500/20 bg-green-500/5",children:i.jsxs(ee,{className:"pb-2",children:[i.jsxs(te,{className:"text-sm flex items-center gap-2",children:[i.jsx(Vo,{className:"h-4 w-4 text-green-600"}),"Last Run: ",u.period]}),i.jsxs(dt,{children:[u.assets_processed," assets processed, K",u.total_depreciation.toFixed(2)," total",u.posted_to_gl&&" (Posted to GL)"]})]})})]})}const Vre=t=>{if(!t)return null;if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return null},Kj=t=>{const e=Vre(t);return e?e.slice(0,10):""},stt=(t,e)=>({id:t,companyId:String(e.companyId??e.company_id??""),yearName:String(e.yearName??e.year_name??""),startDate:Kj(e.startDate??e.start_date),endDate:Kj(e.endDate??e.end_date),status:String(e.status??"open")}),itt=(t,e)=>({id:t,companyId:String(e.companyId??e.company_id??""),financialYearId:String(e.financialYearId??e.financial_year_id??""),periodNumber:Number(e.periodNumber??e.period_number??0),periodName:String(e.periodName??e.period_name??""),startDate:Kj(e.startDate??e.start_date),endDate:Kj(e.endDate??e.end_date),status:String(e.status??"open"),closedAt:Vre(e.closedAt??e.closed_at),closedBy:e.closedBy??e.closed_by??null});function att(){const t=en(),{user:e}=ot(),[n,r]=N.useState(!1),[s,a]=N.useState(null),[o,l]=N.useState(null),[c,u]=N.useState({year_name:`FY ${vf(new Date)}`,start_date:`${vf(new Date)}-01-01`,end_date:`${vf(new Date)}-12-31`}),d=we({queryKey:["financial-periods-company-id",e==null?void 0:e.id],queryFn:async()=>{if(!e)return null;const w=await Fe.getPrimaryMembershipByUser(e.id);return(w==null?void 0:w.companyId)??null},enabled:!!e}),h=d.data??null,{data:f,isLoading:m}=we({queryKey:["financial-years",h],queryFn:async()=>{if(!h)return[];const w=ge(re,Y.FINANCIAL_YEARS);return(await Te(je(w,he("companyId","==",h)))).docs.map(P=>stt(P.id,P.data())).sort((P,I)=>I.startDate.localeCompare(P.startDate))},enabled:!!h});N.useEffect(()=>{!o&&f&&f.length>0&&l(f[0].id)},[f,o]);const{data:v,isLoading:g}=we({queryKey:["financial-periods",h,o],queryFn:async()=>{if(!h||!o)return[];const w=ge(re,Y.FINANCIAL_PERIODS);return(await Te(je(w,he("companyId","==",h),he("financialYearId","==",o)))).docs.map(P=>itt(P.id,P.data())).sort((P,I)=>P.periodNumber-I.periodNumber)},enabled:!!(h&&o)}),y=N.useMemo(()=>(v==null?void 0:v.find(w=>w.id===s))??null,[v,s]),b=Xe({mutationFn:async()=>{if(!e)throw new Error("Not authenticated");if(!h)throw new Error("No company profile found for your account");if(!c.year_name.trim())throw new Error("Year name is required");if(c.start_date>c.end_date)throw new Error("Start date must be before end date");const w=new Date(c.start_date),A=$l(re),P=Ye(ge(re,Y.FINANCIAL_YEARS));A.set(P,{companyId:h,yearName:c.year_name.trim(),startDate:c.start_date,endDate:c.end_date,status:"open",createdAt:Ce(),updatedAt:Ce()});for(let I=0;I<12;I+=1){const k=One(Fne(w),I),L=$ne(k),U=Ye(ge(re,Y.FINANCIAL_PERIODS));A.set(U,{companyId:h,financialYearId:P.id,periodNumber:I+1,periodName:ut(k,"MMMM yyyy"),startDate:ut(k,"yyyy-MM-dd"),endDate:ut(L,"yyyy-MM-dd"),status:"open",closedAt:null,closedBy:null,createdAt:Ce(),updatedAt:Ce()})}await A.commit()},onSuccess:()=>{t.invalidateQueries({queryKey:["financial-years",h]}),t.invalidateQueries({queryKey:["financial-periods",h]}),Z.success("Financial year created with 12 monthly periods"),r(!1),u({year_name:`FY ${vf(new Date)+1}`,start_date:`${vf(new Date)+1}-01-01`,end_date:`${vf(new Date)+1}-12-31`})},onError:w=>{Z.error(w.message||"Failed to create financial year")}}),x=Xe({mutationFn:async w=>{if(!e)throw new Error("Not authenticated");await Dl(Ye(re,Y.FINANCIAL_PERIODS,w.id),{status:"closed",closedAt:Ce(),closedBy:e.id,updatedAt:Ce()}),await xr(Ye(re,Y.PERIOD_LOCKS,`${w.companyId}_${w.id}`),{companyId:w.companyId,periodId:w.id,financialYearId:w.financialYearId,periodName:w.periodName,startDate:w.startDate,endDate:w.endDate,status:"closed",lockedBy:e.id,lockedAt:Ce(),updatedAt:Ce()},{merge:!0})},onSuccess:()=>{t.invalidateQueries({queryKey:["financial-periods",h,o]}),Z.success("Period closed successfully"),a(null)},onError:w=>{Z.error(w.message||"Failed to close period")}}),S=Xe({mutationFn:async w=>{if(!e)throw new Error("Not authenticated");await Dl(Ye(re,Y.FINANCIAL_PERIODS,w.id),{status:"open",closedAt:null,closedBy:null,updatedAt:Ce()}),await xr(Ye(re,Y.PERIOD_LOCKS,`${w.companyId}_${w.id}`),{companyId:w.companyId,periodId:w.id,status:"open",unlockedBy:e.id,unlockedAt:Ce(),updatedAt:Ce()},{merge:!0})},onSuccess:()=>{t.invalidateQueries({queryKey:["financial-periods",h,o]}),Z.success("Period reopened")},onError:w=>{Z.error(w.message||"Failed to reopen period")}}),T=w=>{switch(w){case"open":return i.jsx(Ve,{className:"bg-green-600",children:"Open"});case"closed":return i.jsx(Ve,{variant:"secondary",children:"Closed"});default:return i.jsx(Ve,{variant:"outline",children:w})}},_=f==null?void 0:f.find(w=>w.status==="open"),C=(v==null?void 0:v.filter(w=>w.status==="open"))??[],E=(v==null?void 0:v.filter(w=>w.status==="closed"))??[],p=d.isLoading||m;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Financial Periods"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage financial years and accounting periods"})]}),i.jsxs(Zn,{open:n,onOpenChange:r,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(W,{disabled:!h,children:[i.jsx(_n,{className:"h-4 w-4 mr-2"}),"New Financial Year"]})}),i.jsxs(Hn,{children:[i.jsxs(Kn,{children:[i.jsx(Gn,{children:"Create Financial Year"}),i.jsx(od,{children:"This creates a new financial year with 12 monthly periods."})]}),i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Year Name"}),i.jsx(G,{value:c.year_name,onChange:w=>u({...c,year_name:w.target.value}),placeholder:"FY 2026"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Start Date"}),i.jsx(G,{type:"date",value:c.start_date,onChange:w=>u({...c,start_date:w.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"End Date"}),i.jsx(G,{type:"date",value:c.end_date,onChange:w=>u({...c,end_date:w.target.value})})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(W,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),i.jsxs(W,{onClick:()=>b.mutate(),disabled:!c.year_name||b.isPending,children:[b.isPending&&i.jsx(En,{className:"h-4 w-4 mr-2 animate-spin"}),"Create Year"]})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(Q,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsxs(dt,{className:"flex items-center gap-2",children:[i.jsx($m,{className:"h-4 w-4"}),"Current Year"]}),i.jsx(te,{className:"text-xl",children:(_==null?void 0:_.yearName)||"Not Set"})]})}),i.jsx(Q,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(dt,{children:"Total Years"}),i.jsx(te,{className:"text-2xl",children:(f==null?void 0:f.length)||0})]})}),i.jsx(Q,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsxs(dt,{className:"flex items-center gap-2",children:[i.jsx(s4,{className:"h-4 w-4 text-green-600"}),"Open Periods"]}),i.jsx(te,{className:"text-2xl text-green-600",children:C.length})]})}),i.jsx(Q,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsxs(dt,{className:"flex items-center gap-2",children:[i.jsx(Fm,{className:"h-4 w-4"}),"Closed Periods"]}),i.jsx(te,{className:"text-2xl",children:E.length})]})})]}),i.jsxs(Q,{children:[i.jsxs(ee,{children:[i.jsx(te,{children:"Financial Years"}),i.jsx(dt,{children:"Select a year to view its periods"})]}),i.jsx(ne,{children:p?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(En,{className:"h-8 w-8 animate-spin"})}):h?f&&f.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:f.map(w=>i.jsx(Q,{className:`cursor-pointer transition-colors ${o===w.id?"border-primary ring-1 ring-primary":"hover:border-primary/50"}`,onClick:()=>l(w.id),children:i.jsx(ne,{className:"pt-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:w.yearName}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[w.startDate?ut(new Date(w.startDate),"dd MMM yyyy"):"-"," ","-"," ",w.endDate?ut(new Date(w.endDate),"dd MMM yyyy"):"-"]})]}),T(w.status||"open")]})})},w.id))}):i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx($m,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No financial years found"}),i.jsx("p",{className:"text-sm",children:"Create your first financial year to get started"})]}):i.jsx("div",{className:"text-center py-8 text-muted-foreground",children:i.jsx("p",{children:"No company profile found for your account"})})})]}),o&&i.jsxs(Q,{children:[i.jsxs(ee,{children:[i.jsx(te,{children:"Accounting Periods"}),i.jsx(dt,{children:"Manage period status. Closed periods prevent back-dated entries."})]}),i.jsx(ne,{children:g?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(En,{className:"h-8 w-8 animate-spin"})}):v&&v.length>0?i.jsx("div",{className:"border rounded-lg",children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Period"}),i.jsx(q,{children:"Name"}),i.jsx(q,{children:"Start Date"}),i.jsx(q,{children:"End Date"}),i.jsx(q,{children:"Status"}),i.jsx(q,{children:"Closed At"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsx(Ut,{children:v.map(w=>i.jsxs(ve,{children:[i.jsxs(V,{className:"font-mono",children:["P",w.periodNumber]}),i.jsx(V,{className:"font-medium",children:w.periodName}),i.jsx(V,{children:w.startDate?ut(new Date(w.startDate),"dd MMM yyyy"):"-"}),i.jsx(V,{children:w.endDate?ut(new Date(w.endDate),"dd MMM yyyy"):"-"}),i.jsx(V,{children:T(w.status||"open")}),i.jsx(V,{children:w.closedAt?ut(new Date(w.closedAt),"dd MMM yyyy HH:mm"):"-"}),i.jsx(V,{className:"text-right",children:w.status==="open"?i.jsxs(W,{variant:"outline",size:"sm",onClick:()=>a(w.id),children:[i.jsx(Fm,{className:"h-4 w-4 mr-2"}),"Close"]}):i.jsxs(W,{variant:"ghost",size:"sm",onClick:()=>S.mutate(w),disabled:S.isPending,children:[i.jsx(s4,{className:"h-4 w-4 mr-2"}),"Reopen"]})})]},w.id))})]})}):i.jsx("div",{className:"text-center py-8 text-muted-foreground",children:i.jsx("p",{children:"No periods found for this year"})})})]}),i.jsx(Fh,{open:!!s,onOpenChange:()=>a(null),children:i.jsxs(Ou,{children:[i.jsxs(Mu,{children:[i.jsxs(Lu,{className:"flex items-center gap-2",children:[i.jsx(eo,{className:"h-5 w-5 text-amber-500"}),"Close Accounting Period"]}),i.jsxs($u,{className:"space-y-2",children:[i.jsx("p",{children:"Closing this period will:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[i.jsx("li",{children:"Prevent new entries dated within this period"}),i.jsx("li",{children:"Block modifications to existing entries in this period"}),i.jsx("li",{children:"Lock payroll postings for this period"})]}),i.jsx("p",{className:"mt-4 font-medium",children:"You can reopen the period later if needed."})]})]}),i.jsxs(Du,{children:[i.jsx(Vu,{children:"Cancel"}),i.jsxs(Fu,{onClick:()=>y&&x.mutate(y),disabled:x.isPending||!y,children:[x.isPending&&i.jsx(En,{className:"h-4 w-4 mr-2 animate-spin"}),"Close Period"]})]})]})})]})}const tz=[{value:"housing",label:"Housing Allowance"},{value:"transport",label:"Transport Allowance"},{value:"meal",label:"Meal Allowance"},{value:"medical",label:"Medical Allowance"},{value:"phone",label:"Phone Allowance"},{value:"fuel",label:"Fuel Allowance"},{value:"education",label:"Education Allowance"},{value:"custom",label:"Custom Allowance"}];function ott({employeeId:t,employeeName:e,contractType:n,basicSalary:r,onClose:s}){const a=en(),{user:o}=ot(),l=n==="consultant",[c,u]=N.useState({apply_paye:!l,apply_napsa:!l,apply_nhima:!l,pension_enabled:!1,pension_employee_rate:5,pension_employer_rate:5,is_consultant:l,consultant_type:"local",apply_wht:l,rate_type:"monthly",currency:"ZMW"}),[d,h]=N.useState([]),[f,m]=N.useState({allowance_type:"housing",allowance_name:"Housing Allowance",amount:0,is_taxable:!0}),{data:v}=we({queryKey:["employee-payroll-profile",t,o==null?void 0:o.id],enabled:!!o,queryFn:async()=>{if(!o)return null;const _=await Fe.getPrimaryMembershipByUser(o.id);if(!(_!=null&&_.companyId))return null;const C=je(ge(re,Y.EMPLOYEE_PAYROLL_PROFILES),he("companyId","==",_.companyId),he("employeeId","==",t),Ts(1)),E=await Te(C);if(E.empty)return null;const p=E.docs[0];return{id:p.id,...p.data()}}}),{data:g}=we({queryKey:["employee-allowances",t,o==null?void 0:o.id],enabled:!!o,queryFn:async()=>{if(!o)return[];const _=await Fe.getPrimaryMembershipByUser(o.id);if(!(_!=null&&_.companyId))return[];const C=je(ge(re,Y.EMPLOYEE_ALLOWANCES),he("companyId","==",_.companyId),he("employeeId","==",t),he("isActive","==",!0));return(await Te(C)).docs.map(p=>({id:p.id,...p.data()}))}});N.useEffect(()=>{v&&u({apply_paye:v.applyPaye??v.apply_paye??!l,apply_napsa:v.applyNapsa??v.apply_napsa??!l,apply_nhima:v.applyNhima??v.apply_nhima??!l,pension_enabled:v.pensionEnabled??v.pension_enabled??!1,pension_employee_rate:Number(v.pensionEmployeeRate??v.pension_employee_rate??5),pension_employer_rate:Number(v.pensionEmployerRate??v.pension_employer_rate??5),is_consultant:v.isConsultant??v.is_consultant??l,consultant_type:v.consultantType??v.consultant_type??"local",apply_wht:v.applyWht??v.apply_wht??l,rate_type:v.rateType??v.rate_type??"monthly",currency:v.currency??"ZMW"})},[v,l]),N.useEffect(()=>{g&&h(g.map(_=>({id:_.id,allowance_type:_.allowanceType??_.allowance_type??"custom",allowance_name:_.allowanceName??_.allowance_name??"Allowance",amount:Number(_.amount??0),is_taxable:_.isTaxable??_.is_taxable??!0})))},[g]);const y=Xe({mutationFn:async()=>{if(!o)throw new Error("Not authenticated");const _=await Fe.getPrimaryMembershipByUser(o.id);if(!(_!=null&&_.companyId))throw new Error("No company associated with user");const C=v&&typeof v.id=="string"?String(v.id):t,E={employeeId:t,companyId:_.companyId,applyPaye:c.apply_paye,applyNapsa:c.apply_napsa,applyNhima:c.apply_nhima,pensionEnabled:c.pension_enabled,pensionEmployeeRate:c.pension_employee_rate,pensionEmployerRate:c.pension_employer_rate,isConsultant:c.is_consultant,consultantType:c.consultant_type,applyWht:c.apply_wht,rateType:c.rate_type,currency:c.currency,updatedAt:Ce()};if(await xr(Ye(re,Y.EMPLOYEE_PAYROLL_PROFILES,C),v?E:{...E,createdAt:Ce()},{merge:!0}),g){const p=g.map(P=>String(P.id)).filter(P=>!!P),w=d.filter(P=>P.id).map(P=>String(P.id)),A=p.filter(P=>!w.includes(P));await Promise.all(A.map(P=>Dl(Ye(re,Y.EMPLOYEE_ALLOWANCES,P),{isActive:!1,updatedAt:Ce()})))}for(const p of d){const w={employeeId:t,companyId:_.companyId,allowanceType:p.allowance_type,allowanceName:p.allowance_name,amount:p.amount,isTaxable:p.is_taxable,isActive:!0,updatedAt:Ce()};p.id?await xr(Ye(re,Y.EMPLOYEE_ALLOWANCES,String(p.id)),w,{merge:!0}):await es(ge(re,Y.EMPLOYEE_ALLOWANCES),{...w,createdAt:Ce()})}},onSuccess:()=>{Z.success("Payroll setup saved successfully"),a.invalidateQueries({queryKey:["employee-payroll-profile",t]}),a.invalidateQueries({queryKey:["employee-allowances",t]}),s==null||s()},onError:_=>{Z.error(_ instanceof Error?_.message:"Failed to save payroll setup")}}),b=()=>{f.amount>0&&(h([...d,{...f}]),m({allowance_type:"housing",allowance_name:"Housing Allowance",amount:0,is_taxable:!0}))},x=_=>{h(d.filter((C,E)=>E!==_))},S=d.reduce((_,C)=>_+C.amount,0),T=r+S;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Payroll Setup"}),i.jsx("p",{className:"text-muted-foreground",children:e})]}),i.jsx(Ve,{variant:l?"secondary":"default",children:l?"Consultant":"Employee"})]}),i.jsxs(Q,{children:[i.jsxs(ee,{children:[i.jsx(te,{children:"Earnings Assignment"}),i.jsx(dt,{children:"Configure allowances for this employee"})]}),i.jsxs(ne,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[i.jsx("span",{children:"Basic Pay"}),i.jsx("span",{className:"font-semibold",children:le(r)})]}),d.map((_,C)=>i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:_.allowance_name}),!_.is_taxable&&i.jsx(Ve,{variant:"outline",className:"ml-2 text-xs",children:"Non-taxable"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-semibold",children:le(_.amount)}),i.jsx(W,{variant:"ghost",size:"sm",onClick:()=>x(C),children:i.jsx(Ds,{className:"h-4 w-4 text-destructive"})})]})]},C)),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 p-3 border rounded-lg bg-muted/50",children:[i.jsxs(Ct,{value:f.allowance_type,onValueChange:_=>{const C=tz.find(E=>E.value===_);m({...f,allowance_type:_,allowance_name:(C==null?void 0:C.label)||_})},children:[i.jsx(Et,{children:i.jsx(Pt,{})}),i.jsx(At,{children:tz.map(_=>i.jsx(ye,{value:_.value,children:_.label},_.value))})]}),i.jsx(G,{type:"number",step:"0.01",placeholder:"Amount",value:f.amount||"",onChange:_=>m({...f,amount:Number(_.target.value)})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(us,{checked:f.is_taxable,onCheckedChange:_=>m({...f,is_taxable:_})}),i.jsx(J,{className:"text-sm",children:"Taxable"})]}),i.jsxs(W,{onClick:b,disabled:f.amount<=0,children:[i.jsx(_n,{className:"h-4 w-4 mr-1"})," Add"]})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 bg-primary/10 rounded-lg font-semibold",children:[i.jsx("span",{children:"Gross Salary"}),i.jsx("span",{className:"text-lg",children:le(T)})]})]})]}),i.jsxs(Q,{children:[i.jsxs(ee,{children:[i.jsx(te,{children:"Statutory Deductions"}),i.jsx(dt,{children:"Configure which deductions apply to this employee"})]}),i.jsxs(ne,{className:"space-y-4",children:[l&&i.jsxs(ku,{children:[i.jsx(ks,{className:"h-4 w-4"}),i.jsx(Ru,{children:"Consultants are subject to Withholding Tax (WHT) instead of PAYE, NAPSA, and NHIMA."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx(J,{className:"font-medium",children:"Apply PAYE"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Pay As You Earn tax"})]}),i.jsx(us,{checked:c.apply_paye,onCheckedChange:_=>u({...c,apply_paye:_}),disabled:l})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx(J,{className:"font-medium",children:"Apply NAPSA"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"5% of gross (max K1,342)"})]}),i.jsx(us,{checked:c.apply_napsa,onCheckedChange:_=>u({...c,apply_napsa:_}),disabled:l})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx(J,{className:"font-medium",children:"Apply NHIMA"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"1% of basic (max K250)"})]}),i.jsx(us,{checked:c.apply_nhima,onCheckedChange:_=>u({...c,apply_nhima:_}),disabled:l})]})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx(J,{className:"font-medium",children:"Pension Enabled"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Optional pension contribution"})]}),i.jsx(us,{checked:c.pension_enabled,onCheckedChange:_=>u({...c,pension_enabled:_})})]}),c.pension_enabled&&i.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[i.jsxs("div",{children:[i.jsx(J,{children:"Employee Rate (%)"}),i.jsx(G,{type:"number",step:"0.1",value:c.pension_employee_rate,onChange:_=>u({...c,pension_employee_rate:Number(_.target.value)})})]}),i.jsxs("div",{children:[i.jsx(J,{children:"Employer Rate (%)"}),i.jsx(G,{type:"number",step:"0.1",value:c.pension_employer_rate,onChange:_=>u({...c,pension_employer_rate:Number(_.target.value)})})]})]})]}),l&&i.jsxs("div",{className:"border-t pt-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg mb-4",children:[i.jsxs("div",{children:[i.jsx(J,{className:"font-medium",children:"Apply Withholding Tax (WHT)"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Tax on consultancy payments"})]}),i.jsx(us,{checked:c.apply_wht,onCheckedChange:_=>u({...c,apply_wht:_})})]}),c.apply_wht&&i.jsxs("div",{children:[i.jsx(J,{children:"Consultant Type"}),i.jsxs(Ct,{value:c.consultant_type,onValueChange:_=>u({...c,consultant_type:_}),children:[i.jsx(Et,{className:"mt-2",children:i.jsx(Pt,{})}),i.jsxs(At,{children:[i.jsx(ye,{value:"local",children:"Local Consultant (15% WHT)"}),i.jsx(ye,{value:"non_resident",children:"Non-Resident (20% WHT - Final Tax)"})]})]})]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(W,{variant:"outline",onClick:s,children:"Cancel"}),i.jsxs(W,{onClick:()=>y.mutate(),disabled:y.isPending,children:[i.jsx(ph,{className:"h-4 w-4 mr-2"}),y.isPending?"Saving...":"Save Payroll Setup"]})]})]})}function ltt(){const{id:t}=Wh(),e=$n(),{user:n}=ot(),{data:r,isLoading:s}=we({queryKey:["employee",t,n==null?void 0:n.id],queryFn:async()=>{if(!t||!n)return null;const a=await Fe.getPrimaryMembershipByUser(n.id);if(!(a!=null&&a.companyId))return null;const o=Ye(re,Y.EMPLOYEES,t),l=await xi(o);if(!l.exists())return null;const c=l.data(),u=c.companyId??c.company_id;return u&&u!==a.companyId?null:{id:l.id,...c}},enabled:!!(t&&n)});return s?i.jsx(um,{}):r?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs(W,{variant:"ghost",size:"sm",onClick:()=>e("/employees"),children:[i.jsx(fa,{className:"h-4 w-4 mr-2"}),"Back to Employees"]})}),i.jsx(ott,{employeeId:String(r.id),employeeName:String(r.fullName??r.full_name??"Employee"),contractType:String(r.contractType??r.contract_type??"")||void 0,basicSalary:Number(r.basicSalary??r.basic_salary??0),onClose:()=>e("/employees")})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx("p",{className:"text-muted-foreground",children:"Employee not found"}),i.jsx(W,{variant:"link",onClick:()=>e("/employees"),children:"Go back to employees"})]})}const ctt=[{band_order:1,min_amount:0,max_amount:5100,rate:0},{band_order:2,min_amount:5100,max_amount:7100,rate:.2},{band_order:3,min_amount:7100,max_amount:9200,rate:.3},{band_order:4,min_amount:9200,max_amount:null,rate:.37}],utt=[{rate_type:"napsa",employee_rate:.05,employer_rate:.05,cap_amount:1342},{rate_type:"nhima",employee_rate:.01,employer_rate:.01,cap_amount:250},{rate_type:"pension",employee_rate:.05,employer_rate:.05,cap_amount:null},{rate_type:"wht_local",employee_rate:.15,employer_rate:0,cap_amount:null},{rate_type:"wht_nonresident",employee_rate:.2,employer_rate:0,cap_amount:null}],ty=(t,e=0)=>{const n=Number(t);return Number.isFinite(n)?n:e},nz=t=>{if(t==null||t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null};function dtt(){const{user:t}=ot(),e=en(),[n,r]=N.useState([]),[s,a]=N.useState([]),[o,l]=N.useState(!1),c=we({queryKey:["payroll-settings-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const C=await Fe.getPrimaryMembershipByUser(t.id);return(C==null?void 0:C.companyId)??null},enabled:!!t}),u=c.data??null,{data:d,isLoading:h}=we({queryKey:["paye-tax-bands",u],queryFn:async()=>{if(!u)return[];const C=ge(re,Y.PAYE_TAX_BANDS);return(await Te(je(C,he("companyId","==",u)))).docs.map(p=>{const w=p.data();return{id:p.id,band_order:ty(w.bandOrder??w.band_order,0),min_amount:ty(w.minAmount??w.min_amount,0),max_amount:nz(w.maxAmount??w.max_amount),rate:ty(w.rate,0),is_active:!!(w.isActive??w.is_active??!0)}}).filter(p=>p.is_active).sort((p,w)=>p.band_order-w.band_order).map(({is_active:p,...w})=>w)},enabled:!!u}),{data:f,isLoading:m}=we({queryKey:["statutory-rates",u],queryFn:async()=>{if(!u)return[];const C=ge(re,Y.PAYROLL_STATUTORY_RATES);return(await Te(je(C,he("companyId","==",u)))).docs.map(p=>{const w=p.data();return{id:p.id,rate_type:String(w.rateType??w.rate_type??""),employee_rate:ty(w.employeeRate??w.employee_rate,0),employer_rate:ty(w.employerRate??w.employer_rate,0),cap_amount:nz(w.capAmount??w.cap_amount),is_active:!!(w.isActive??w.is_active??!0)}}).filter(p=>p.is_active).map(({is_active:p,...w})=>w)},enabled:!!u});N.useEffect(()=>{o||h||m||(d&&d.length>0?r(d):r(ctt),f&&f.length>0?a(f):a(utt),l(!0))},[o,h,m,d,f]);const v=Xe({mutationFn:async()=>{if(!u)throw new Error("No company context found");const C=ge(re,Y.PAYE_TAX_BANDS),E=await Te(je(C,he("companyId","==",u))),p=$l(re);E.docs.forEach(w=>{p.set(w.ref,{isActive:!1,updatedAt:Ce()},{merge:!0})}),n.forEach((w,A)=>{const P=Ye(ge(re,Y.PAYE_TAX_BANDS));p.set(P,{companyId:u,bandOrder:A+1,minAmount:Number(w.min_amount),maxAmount:w.max_amount===null?null:Number(w.max_amount),rate:Number(w.rate),isActive:!0,createdAt:Ce(),updatedAt:Ce()})}),await p.commit()},onSuccess:()=>{Z.success("PAYE tax bands saved successfully"),e.invalidateQueries({queryKey:["paye-tax-bands",u]})},onError:C=>{Z.error(C.message||"Failed to save tax bands")}}),g=Xe({mutationFn:async()=>{if(!u)throw new Error("No company context found");const C=ge(re,Y.PAYROLL_STATUTORY_RATES),E=await Te(je(C,he("companyId","==",u))),p=$l(re);E.docs.forEach(w=>{p.set(w.ref,{isActive:!1,updatedAt:Ce()},{merge:!0})}),s.forEach(w=>{const A=Ye(ge(re,Y.PAYROLL_STATUTORY_RATES));p.set(A,{companyId:u,rateType:w.rate_type,employeeRate:Number(w.employee_rate),employerRate:Number(w.employer_rate),capAmount:w.cap_amount===null?null:Number(w.cap_amount),isActive:!0,createdAt:Ce(),updatedAt:Ce()})}),await p.commit()},onSuccess:()=>{Z.success("Statutory rates saved successfully"),e.invalidateQueries({queryKey:["statutory-rates",u]})},onError:C=>{Z.error(C.message||"Failed to save statutory rates")}}),y=()=>{const C=n[n.length-1];r([...n,{band_order:n.length+1,min_amount:(C==null?void 0:C.max_amount)||0,max_amount:null,rate:0}])},b=C=>{r(n.filter((E,p)=>p!==C))},x=(C,E,p)=>{const w=[...n];w[C]={...w[C],[E]:p},r(w)},S=(C,E,p)=>{const w=[...s];w[C]={...w[C],[E]:p},a(w)},T=C=>{switch(C){case"napsa":return"NAPSA";case"nhima":return"NHIMA";case"pension":return"Pension";case"wht_local":return"WHT (Local Consultant)";case"wht_nonresident":return"WHT (Non-Resident)";default:return C}},_=c.isLoading||h||m;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Payroll Settings"}),i.jsx("p",{className:"text-muted-foreground",children:"Configure PAYE tax bands and statutory rates"})]}),i.jsx(qw,{className:"h-8 w-8 text-muted-foreground"})]}),i.jsxs(m1,{defaultValue:"paye",className:"space-y-4",children:[i.jsxs(Nb,{children:[i.jsx(Ya,{value:"paye",children:"PAYE Tax Bands"}),i.jsx(Ya,{value:"statutory",children:"Statutory Rates"})]}),i.jsx(Qa,{value:"paye",children:i.jsxs(Q,{children:[i.jsxs(ee,{children:[i.jsx(te,{children:"PAYE Tax Bands (Monthly)"}),i.jsx(dt,{children:"Configure the progressive tax bands for Pay As You Earn calculations."})]}),i.jsxs(ne,{className:"space-y-4",children:[i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Band"}),i.jsx(q,{children:"Min Amount (ZMW)"}),i.jsx(q,{children:"Max Amount (ZMW)"}),i.jsx(q,{children:"Rate (%)"}),i.jsx(q,{className:"w-16"})]})}),i.jsx(Ut,{children:n.map((C,E)=>i.jsxs(ve,{children:[i.jsxs(V,{className:"font-medium",children:["Band ",E+1]}),i.jsx(V,{children:i.jsx(G,{type:"number",step:"0.01",value:C.min_amount,onChange:p=>x(E,"min_amount",Number(p.target.value)),className:"w-32"})}),i.jsx(V,{children:i.jsx(G,{type:"number",step:"0.01",value:C.max_amount??"",onChange:p=>x(E,"max_amount",p.target.value?Number(p.target.value):null),placeholder:"inf",className:"w-32"})}),i.jsx(V,{children:i.jsx(G,{type:"number",step:"0.01",value:C.rate*100,onChange:p=>x(E,"rate",Number(p.target.value)/100),className:"w-24"})}),i.jsx(V,{children:i.jsx(W,{variant:"ghost",size:"sm",onClick:()=>b(E),disabled:n.length<=1,children:i.jsx(Ds,{className:"h-4 w-4 text-destructive"})})})]},E))})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(W,{variant:"outline",onClick:y,disabled:!u||_,children:[i.jsx(_n,{className:"h-4 w-4 mr-2"}),"Add Band"]}),i.jsxs(W,{onClick:()=>v.mutate(),disabled:v.isPending||!u||_,children:[i.jsx(ph,{className:"h-4 w-4 mr-2"}),v.isPending?"Saving...":"Save Tax Bands"]})]})]})]})}),i.jsx(Qa,{value:"statutory",children:i.jsxs(Q,{children:[i.jsxs(ee,{children:[i.jsx(te,{children:"Statutory Contribution Rates"}),i.jsx(dt,{children:"Configure NAPSA, NHIMA, Pension, and WHT rates."})]}),i.jsxs(ne,{className:"space-y-4",children:[i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Contribution Type"}),i.jsx(q,{children:"Employee Rate (%)"}),i.jsx(q,{children:"Employer Rate (%)"}),i.jsx(q,{children:"Cap Amount (ZMW)"})]})}),i.jsx(Ut,{children:s.map((C,E)=>i.jsxs(ve,{children:[i.jsx(V,{className:"font-medium",children:T(C.rate_type)}),i.jsx(V,{children:i.jsx(G,{type:"number",step:"0.01",value:C.employee_rate*100,onChange:p=>S(E,"employee_rate",Number(p.target.value)/100),className:"w-24"})}),i.jsx(V,{children:i.jsx(G,{type:"number",step:"0.01",value:C.employer_rate*100,onChange:p=>S(E,"employer_rate",Number(p.target.value)/100),className:"w-24",disabled:C.rate_type.startsWith("wht")})}),i.jsx(V,{children:i.jsx(G,{type:"number",step:"0.01",value:C.cap_amount??"",onChange:p=>S(E,"cap_amount",p.target.value?Number(p.target.value):null),placeholder:"No cap",className:"w-32"})})]},C.rate_type))})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs(W,{onClick:()=>g.mutate(),disabled:g.isPending||!u||_,children:[i.jsx(ph,{className:"h-4 w-4 mr-2"}),g.isPending?"Saving...":"Save Rates"]})})]})]})})]})]})}function rz({icon:t,title:e,description:n,actionLabel:r,onAction:s,className:a}){return i.jsxs("div",{className:me("flex flex-col items-center justify-center py-12 px-4 text-center",a),children:[i.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-muted",children:t||i.jsx(Goe,{className:"h-8 w-8 text-muted-foreground"})}),i.jsx("h3",{className:"text-lg font-semibold",children:e}),n&&i.jsx("p",{className:"mt-1 text-sm text-muted-foreground max-w-sm",children:n}),r&&s&&i.jsxs(W,{onClick:s,className:"mt-4",children:[i.jsx(_n,{className:"mr-2 h-4 w-4"}),r]})]})}const htt={name:"",sku:"",description:"",type:"product",category:"",unit_of_measure:"Unit",selling_price:0,cost_price:0,track_inventory:!1,quantity_on_hand:0,reorder_point:0,is_taxable:!0,tax_rate:16,is_active:!0},VA=t=>{if(!t)return null;if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return null};function ftt(){const{user:t}=ot(),[e,n]=N.useState("catalog"),[r,s]=N.useState(""),[a,o]=N.useState("all"),[l,c]=N.useState(!1),[u,d]=N.useState(!1),[h,f]=N.useState(null),[m,v]=N.useState(null),g=en(),{data:y}=we({queryKey:["products-company",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const O=await Fe.getPrimaryMembershipByUser(t.id);return(O==null?void 0:O.companyId)??null},enabled:!!t}),{data:b,isLoading:x}=we({queryKey:["products",y],queryFn:async()=>y?(await Te(je(ge(re,Y.PRODUCTS),he("companyId","==",y)))).docs.map($=>{const D=$.data();return{id:$.id,name:String(D.name??""),sku:D.sku??null,description:D.description??null,type:D.type??"product",category:D.category??null,unit_of_measure:D.unitOfMeasure??D.unit_of_measure??null,selling_price:Number(D.sellingPrice??D.selling_price??0),cost_price:Number(D.costPrice??D.cost_price??0),track_inventory:!!(D.trackInventory??D.track_inventory),quantity_on_hand:Number(D.quantityOnHand??D.quantity_on_hand??0),reorder_point:Number(D.reorderPoint??D.reorder_point??0),is_taxable:!!(D.isTaxable??D.is_taxable),tax_rate:Number(D.taxRate??D.tax_rate??16),is_active:D.isActive===void 0&&D.is_active===void 0?!0:!!(D.isActive??D.is_active),created_at:VA(D.createdAt??D.created_at)}}):[],enabled:!!y}),{data:S,isLoading:T}=we({queryKey:["priceLists",y],queryFn:async()=>y?(await Te(je(ge(re,Y.PRICE_LISTS),he("companyId","==",y)))).docs.map($=>{const D=$.data();return{id:$.id,name:String(D.name??""),description:D.description??null,currency:String(D.currency??"ZMW"),is_default:!!(D.isDefault??D.is_default),is_active:D.isActive===void 0&&D.is_active===void 0?!0:!!(D.isActive??D.is_active),valid_from:VA(D.validFrom??D.valid_from),valid_to:VA(D.validTo??D.valid_to)}}):[],enabled:!!y}),_=Xe({mutationFn:async O=>{if(!y)throw new Error("No company found");const $={companyId:y,name:O.name||"",sku:O.sku||null,description:O.description||null,type:O.type||"product",category:O.category||null,unitOfMeasure:O.unit_of_measure||"Unit",sellingPrice:Number(O.selling_price||0),costPrice:Number(O.cost_price||0),trackInventory:!!O.track_inventory,quantityOnHand:Number(O.quantity_on_hand||0),reorderPoint:Number(O.reorder_point||0),isTaxable:!!O.is_taxable,taxRate:Number(O.tax_rate||16),isActive:O.is_active===void 0?!0:!!O.is_active,updatedAt:Ce()};O.id?await Dl(Ye(re,Y.PRODUCTS,O.id),$):await es(ge(re,Y.PRODUCTS),{...$,createdAt:Ce()})},onSuccess:()=>{g.invalidateQueries({queryKey:["products"]}),c(!1),f(null),Z.success(h!=null&&h.id?"Product updated":"Product created")},onError:O=>{Z.error("Failed to save product: "+O.message)}}),C=Xe({mutationFn:async O=>{await Ll(Ye(re,Y.PRODUCTS,O))},onSuccess:()=>{g.invalidateQueries({queryKey:["products"]}),Z.success("Product deleted")},onError:O=>{Z.error("Failed to delete product: "+O.message)}}),E=Xe({mutationFn:async O=>{if(!y)throw new Error("No company found");const $={companyId:y,name:O.name||"",description:O.description||null,currency:O.currency||"ZMW",isDefault:!!O.is_default,isActive:O.is_active===void 0?!0:!!O.is_active,validFrom:O.valid_from||null,validTo:O.valid_to||null,updatedAt:Ce()};O.id?await Dl(Ye(re,Y.PRICE_LISTS,O.id),$):await es(ge(re,Y.PRICE_LISTS),{...$,createdAt:Ce()})},onSuccess:()=>{g.invalidateQueries({queryKey:["priceLists"]}),d(!1),v(null),Z.success(m!=null&&m.id?"Price list updated":"Price list created")},onError:O=>{Z.error("Failed to save price list: "+O.message)}}),p=Xe({mutationFn:async O=>{await Ll(Ye(re,Y.PRICE_LISTS,O))},onSuccess:()=>{g.invalidateQueries({queryKey:["priceLists"]}),Z.success("Price list deleted")},onError:O=>{Z.error("Failed to delete price list: "+O.message)}}),w=O=>{f(O),c(!0)},A=()=>{f({...htt}),c(!0)},P=O=>{v(O),d(!0)},I=()=>{v({name:"",description:"",currency:"ZMW",is_default:!1,is_active:!0}),d(!0)},k=(b==null?void 0:b.filter(O=>O.type==="product").length)||0,L=(b==null?void 0:b.filter(O=>O.type==="service").length)||0,U=(b==null?void 0:b.filter(O=>O.track_inventory&&O.quantity_on_hand<=O.reorder_point).length)||0,z=(b||[]).filter(O=>{const $=`${O.name} ${O.sku||""}`.toLowerCase(),D=!r||$.includes(r.toLowerCase()),K=a==="all"||O.type===a;return D&&K});return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Products & Services"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your product catalog, inventory, and pricing"})]})}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Total Products"}),i.jsx(sa,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:k})})]}),i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Total Services"}),i.jsx(l4,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:L})})]}),i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Low Stock Items"}),i.jsx(Ooe,{className:"h-4 w-4 text-orange-500"})]}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold text-orange-500",children:U})})]}),i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(te,{className:"text-sm font-medium",children:"Price Lists"}),i.jsx(o4,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(ne,{children:i.jsx("div",{className:"text-2xl font-bold",children:(S==null?void 0:S.length)||0})})]})]}),i.jsxs(m1,{value:e,onValueChange:n,children:[i.jsxs(Nb,{children:[i.jsx(Ya,{value:"catalog",children:"Product Catalog"}),i.jsx(Ya,{value:"pricing",children:"Price Lists"}),i.jsx(Ya,{value:"inventory",children:"Inventory"})]}),i.jsxs(Qa,{value:"catalog",className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[i.jsxs("div",{className:"relative flex-1 max-w-sm",children:[i.jsx(Ms,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{placeholder:"Search products...",value:r,onChange:O=>s(O.target.value),className:"pl-10"})]}),i.jsxs(Ct,{value:a,onValueChange:o,children:[i.jsx(Et,{className:"w-[150px]",children:i.jsx(Pt,{placeholder:"Filter by type"})}),i.jsxs(At,{children:[i.jsx(ye,{value:"all",children:"All Types"}),i.jsx(ye,{value:"product",children:"Products"}),i.jsx(ye,{value:"service",children:"Services"})]})]})]}),i.jsxs(W,{onClick:A,children:[i.jsx(_n,{className:"h-4 w-4 mr-2"}),"Add Product/Service"]})]}),x?i.jsx(um,{message:"Loading products..."}):z.length?i.jsx(Q,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Name"}),i.jsx(q,{children:"SKU"}),i.jsx(q,{children:"Type"}),i.jsx(q,{children:"Category"}),i.jsx(q,{className:"text-right",children:"Selling Price"}),i.jsx(q,{className:"text-right",children:"Cost Price"}),i.jsx(q,{className:"text-right",children:"Stock"}),i.jsx(q,{children:"Status"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsx(Ut,{children:z.map(O=>i.jsxs(ve,{children:[i.jsx(V,{className:"font-medium",children:O.name}),i.jsx(V,{children:O.sku||"-"}),i.jsx(V,{children:i.jsxs(Ve,{variant:O.type==="product"?"default":"secondary",children:[O.type==="product"?i.jsx(sa,{className:"h-3 w-3 mr-1"}):i.jsx(l4,{className:"h-3 w-3 mr-1"}),O.type]})}),i.jsx(V,{children:O.category||"-"}),i.jsxs(V,{className:"text-right",children:["K",O.selling_price.toLocaleString()]}),i.jsxs(V,{className:"text-right",children:["K",O.cost_price.toLocaleString()]}),i.jsx(V,{className:"text-right",children:O.track_inventory?i.jsx("span",{className:O.quantity_on_hand<=O.reorder_point?"text-orange-500 font-medium":"",children:O.quantity_on_hand}):"-"}),i.jsx(V,{children:i.jsx(Ve,{variant:O.is_active?"default":"secondary",children:O.is_active?"Active":"Inactive"})}),i.jsx(V,{className:"text-right",children:i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx(W,{variant:"ghost",size:"icon",onClick:()=>w(O),children:i.jsx(a4,{className:"h-4 w-4"})}),i.jsx(W,{variant:"ghost",size:"icon",onClick:()=>C.mutate(O.id),children:i.jsx(Ds,{className:"h-4 w-4 text-destructive"})})]})})]},O.id))})]})}):i.jsx(rz,{icon:i.jsx(sa,{className:"h-8 w-8 text-muted-foreground"}),title:"No products or services",description:"Add your first product or service to get started",actionLabel:"Add Product/Service",onAction:A})]}),i.jsxs(Qa,{value:"pricing",className:"space-y-4",children:[i.jsx("div",{className:"flex items-center justify-end",children:i.jsxs(W,{onClick:I,children:[i.jsx(_n,{className:"h-4 w-4 mr-2"}),"Create Price List"]})}),T?i.jsx(um,{message:"Loading price lists..."}):S!=null&&S.length?i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:S.map(O=>i.jsxs(Q,{children:[i.jsxs(ee,{className:"flex flex-row items-start justify-between space-y-0",children:[i.jsxs("div",{children:[i.jsx(te,{className:"text-lg",children:O.name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:O.description||"No description"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[O.is_default&&i.jsx(Ve,{variant:"secondary",children:"Default"}),i.jsx(Ve,{variant:O.is_active?"default":"secondary",children:O.is_active?"Active":"Inactive"})]})]}),i.jsxs(ne,{children:[i.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground mb-4",children:[i.jsxs("span",{children:["Currency: ",O.currency]}),O.valid_from&&i.jsxs("span",{children:["Valid: ",new Date(O.valid_from).toLocaleDateString(),O.valid_to&&` - ${new Date(O.valid_to).toLocaleDateString()}`]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(W,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>P(O),children:[i.jsx(a4,{className:"h-4 w-4 mr-2"}),"Edit"]}),i.jsx(W,{variant:"outline",size:"sm",onClick:()=>p.mutate(O.id),children:i.jsx(Ds,{className:"h-4 w-4 text-destructive"})})]})]})]},O.id))}):i.jsx(rz,{icon:i.jsx(o4,{className:"h-8 w-8 text-muted-foreground"}),title:"No price lists",description:"Create price lists to offer different pricing tiers",actionLabel:"Create Price List",onAction:I})]}),i.jsx(Qa,{value:"inventory",className:"space-y-4",children:i.jsxs(Q,{children:[i.jsx(ee,{children:i.jsxs(te,{className:"flex items-center gap-2",children:[i.jsx(ma,{className:"h-5 w-5"}),"Inventory Tracking"]})}),i.jsx(ne,{children:x?i.jsx(um,{message:"Loading inventory..."}):i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Product"}),i.jsx(q,{children:"SKU"}),i.jsx(q,{className:"text-right",children:"On Hand"}),i.jsx(q,{className:"text-right",children:"Reorder Point"}),i.jsx(q,{className:"text-right",children:"Unit Cost"}),i.jsx(q,{className:"text-right",children:"Total Value"}),i.jsx(q,{children:"Status"})]})}),i.jsxs(Ut,{children:[b==null?void 0:b.filter(O=>O.track_inventory).map(O=>{const $=O.quantity_on_hand<=O.reorder_point,D=O.quantity_on_hand*O.cost_price;return i.jsxs(ve,{children:[i.jsx(V,{className:"font-medium",children:O.name}),i.jsx(V,{children:O.sku||"-"}),i.jsx(V,{className:"text-right",children:i.jsx("span",{className:$?"text-orange-500 font-medium":"",children:O.quantity_on_hand})}),i.jsx(V,{className:"text-right",children:O.reorder_point}),i.jsxs(V,{className:"text-right",children:["K",O.cost_price.toLocaleString()]}),i.jsxs(V,{className:"text-right font-medium",children:["K",D.toLocaleString()]}),i.jsx(V,{children:i.jsx(Ve,{variant:$?"destructive":"default",className:$?"bg-orange-500":"",children:$?"Low Stock":"In Stock"})})]},O.id)}),!(b!=null&&b.filter(O=>O.track_inventory).length)&&i.jsx(ve,{children:i.jsx(V,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No products with inventory tracking enabled"})})]})]})})]})})]}),i.jsx(Zn,{open:l,onOpenChange:c,children:i.jsxs(Hn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsx(Kn,{children:i.jsxs(Gn,{children:[h!=null&&h.id?"Edit":"New"," Product/Service"]})}),h&&i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"name",children:"Name *"}),i.jsx(G,{id:"name",value:h.name||"",onChange:O=>f({...h,name:O.target.value}),placeholder:"Product name"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"sku",children:"SKU"}),i.jsx(G,{id:"sku",value:h.sku||"",onChange:O=>f({...h,sku:O.target.value}),placeholder:"Stock keeping unit"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"type",children:"Type"}),i.jsxs(Ct,{value:h.type,onValueChange:O=>f({...h,type:O}),children:[i.jsx(Et,{children:i.jsx(Pt,{})}),i.jsxs(At,{children:[i.jsx(ye,{value:"product",children:"Product"}),i.jsx(ye,{value:"service",children:"Service"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"category",children:"Category"}),i.jsx(G,{id:"category",value:h.category||"",onChange:O=>f({...h,category:O.target.value}),placeholder:"Category"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"description",children:"Description"}),i.jsx(hr,{id:"description",value:h.description||"",onChange:O=>f({...h,description:O.target.value}),placeholder:"Product description",rows:3})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"selling_price",children:"Selling Price (K)"}),i.jsx(G,{id:"selling_price",type:"number",value:h.selling_price||0,onChange:O=>f({...h,selling_price:parseFloat(O.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"cost_price",children:"Cost Price (K)"}),i.jsx(G,{id:"cost_price",type:"number",value:h.cost_price||0,onChange:O=>f({...h,cost_price:parseFloat(O.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"unit_of_measure",children:"Unit of Measure"}),i.jsx(G,{id:"unit_of_measure",value:h.unit_of_measure||"Unit",onChange:O=>f({...h,unit_of_measure:O.target.value})})]})]}),h.type==="product"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(us,{id:"track_inventory",checked:h.track_inventory||!1,onCheckedChange:O=>f({...h,track_inventory:O})}),i.jsx(J,{htmlFor:"track_inventory",children:"Track Inventory"})]}),h.track_inventory&&i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"quantity_on_hand",children:"Quantity on Hand"}),i.jsx(G,{id:"quantity_on_hand",type:"number",value:h.quantity_on_hand||0,onChange:O=>f({...h,quantity_on_hand:parseFloat(O.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"reorder_point",children:"Reorder Point"}),i.jsx(G,{id:"reorder_point",type:"number",value:h.reorder_point||0,onChange:O=>f({...h,reorder_point:parseFloat(O.target.value)||0})})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(us,{id:"is_taxable",checked:h.is_taxable||!1,onCheckedChange:O=>f({...h,is_taxable:O})}),i.jsx(J,{htmlFor:"is_taxable",children:"Taxable (VAT)"})]}),h.is_taxable&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"tax_rate",children:"Tax Rate (%)"}),i.jsx(G,{id:"tax_rate",type:"number",value:h.tax_rate||16,onChange:O=>f({...h,tax_rate:parseFloat(O.target.value)||16})})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(us,{id:"is_active",checked:h.is_active||!1,onCheckedChange:O=>f({...h,is_active:O})}),i.jsx(J,{htmlFor:"is_active",children:"Active"})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(W,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),i.jsx(W,{onClick:()=>_.mutate(h),disabled:!h.name||_.isPending,children:_.isPending?"Saving...":"Save"})]})]})]})}),i.jsx(Zn,{open:u,onOpenChange:d,children:i.jsxs(Hn,{children:[i.jsx(Kn,{children:i.jsxs(Gn,{children:[m!=null&&m.id?"Edit":"New"," Price List"]})}),m&&i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"pl_name",children:"Name *"}),i.jsx(G,{id:"pl_name",value:m.name||"",onChange:O=>v({...m,name:O.target.value}),placeholder:"Price list name"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"pl_description",children:"Description"}),i.jsx(hr,{id:"pl_description",value:m.description||"",onChange:O=>v({...m,description:O.target.value}),placeholder:"Description",rows:2})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"pl_currency",children:"Currency"}),i.jsxs(Ct,{value:m.currency||"ZMW",onValueChange:O=>v({...m,currency:O}),children:[i.jsx(Et,{children:i.jsx(Pt,{})}),i.jsxs(At,{children:[i.jsx(ye,{value:"ZMW",children:"ZMW"}),i.jsx(ye,{value:"USD",children:"USD"}),i.jsx(ye,{value:"EUR",children:"EUR"}),i.jsx(ye,{value:"GBP",children:"GBP"})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[i.jsx(us,{id:"pl_is_default",checked:m.is_default||!1,onCheckedChange:O=>v({...m,is_default:O})}),i.jsx(J,{htmlFor:"pl_is_default",children:"Default Price List"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"pl_valid_from",children:"Valid From"}),i.jsx(G,{id:"pl_valid_from",type:"date",value:m.valid_from||"",onChange:O=>v({...m,valid_from:O.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"pl_valid_to",children:"Valid To"}),i.jsx(G,{id:"pl_valid_to",type:"date",value:m.valid_to||"",onChange:O=>v({...m,valid_to:O.target.value})})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(us,{id:"pl_is_active",checked:m.is_active||!1,onCheckedChange:O=>v({...m,is_active:O})}),i.jsx(J,{htmlFor:"pl_is_active",children:"Active"})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(W,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),i.jsx(W,{onClick:()=>E.mutate(m),disabled:!m.name||E.isPending,children:E.isPending?"Saving...":"Save"})]})]})]})})]})}function mtt(){const{user:t}=ot(),e=$n(),n=en(),[r,s]=N.useState(1),[a,o]=N.useState(new Date().toISOString().split("T")[0]),[l,c]=N.useState([]),[u,d]=N.useState(""),[h,f]=N.useState(""),{data:m=[],isLoading:v}=we({queryKey:["chart-of-accounts-opening",t==null?void 0:t.id],queryFn:async()=>{if(!t)return[];const I=await Fe.getPrimaryMembershipByUser(t.id);if(!(I!=null&&I.companyId))return[];const k=ge(re,Y.CHART_OF_ACCOUNTS);return(await Te(je(k,he("companyId","==",I.companyId),he("status","==","active")))).docs.map(U=>{const z=U.data();return{id:U.id,accountCode:String(z.accountCode||""),accountName:String(z.accountName||""),accountType:String(z.accountType||"")}}).sort((U,z)=>U.accountCode.localeCompare(z.accountCode))},enabled:!!t}),{data:g}=we({queryKey:["opening-balances-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const I=await Fe.getPrimaryMembershipByUser(t.id);return(I==null?void 0:I.companyId)??null},enabled:!!t}),y=Xe({mutationFn:async I=>Cn.postJournalEntry(I),onSuccess:()=>{Z.success("Opening balances posted successfully!"),n.invalidateQueries({queryKey:["journal-entries"]}),e("/chart-of-accounts")},onError:I=>{const k=I instanceof Error?I.message:"Failed to post opening balances";Z.error(k)}}),b=()=>{if(!u||!h||parseFloat(h)===0)return;if(l.find(k=>k.accountId===u)){Z.error("This account already has an opening balance");return}c([...l,{accountId:u,balance:parseFloat(h)}]),d(""),f("")},x=I=>{c(l.filter(k=>k.accountId!==I))},S=(I,k)=>{c(l.map(L=>L.accountId===I?{...L,balance:k}:L))},T=I=>{var k;return((k=m.find(L=>L.id===I))==null?void 0:k.accountType)||""},_=l.filter(I=>T(I.accountId)==="Asset").reduce((I,k)=>I+k.balance,0),C=l.filter(I=>T(I.accountId)==="Liability").reduce((I,k)=>I+k.balance,0),E=l.filter(I=>T(I.accountId)==="Equity").reduce((I,k)=>I+k.balance,0),p=_-(C+E),w=Math.abs(p)<.01,A=()=>{if(!g){Z.error("No company context found.");return}if(!w&&!window.confirm(`The accounting equation is not balanced. A journal entry of ${le(Math.abs(p))} will be auto-posted to Retained Earnings to balance the books. Continue?`))return;const I=l.map(k=>{const L=T(k.accountId),U=m.find(z=>z.id===k.accountId);return L==="Asset"||L==="Expense"?{accountId:k.accountId,debit:Math.abs(k.balance),credit:0,description:`Opening balance for ${U==null?void 0:U.accountName}`}:{accountId:k.accountId,debit:0,credit:Math.abs(k.balance),description:`Opening balance for ${U==null?void 0:U.accountName}`}});if(!w){const k=m.find(L=>L.accountName.toLowerCase().includes("retained earnings")||L.accountCode==="3010");if(k)I.push({accountId:k.id,debit:p<0?Math.abs(p):0,credit:p>0?Math.abs(p):0,description:"Auto-balancing entry for opening balances"});else{Z.error("Retained Earnings account is required to auto-balance opening entries.");return}}y.mutate({companyId:g,entryDate:a,description:"Opening balances",referenceType:"OpeningBalance",sourceType:"opening_balance",lines:I})},P=r/3*100;return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex justify-between items-center",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Opening Balances"}),i.jsx("p",{className:"text-muted-foreground",children:"Enter your initial account balances when migrating from another system"})]})}),i.jsx(mu,{value:P,className:"h-2"}),r===1&&i.jsxs(Q,{children:[i.jsxs(ee,{children:[i.jsx(te,{children:"Step 1: Entry Date"}),i.jsx(dt,{children:"Select the date for your opening balances. This is typically your go-live date or the start of your fiscal year."})]}),i.jsxs(ne,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{htmlFor:"entry-date",children:"Opening Balance Date *"}),i.jsx(G,{id:"entry-date",type:"date",value:a,onChange:I=>o(I.target.value)})]}),i.jsxs(ku,{children:[i.jsx(ks,{className:"h-4 w-4"}),i.jsx(Ru,{children:"All opening balances will be posted with this date. Make sure this date is before any other transactions in your system."})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs(W,{onClick:()=>s(2),className:"gap-2",children:["Next: Enter Balances",i.jsx(LT,{className:"h-4 w-4"})]})})]})]}),r===2&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs(Q,{children:[i.jsxs(ee,{children:[i.jsx(te,{children:"Step 2: Enter Account Balances"}),i.jsx(dt,{children:"Add opening balances for each account. Enter positive values for all balance types."})]}),i.jsxs(ne,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"md:col-span-2 space-y-2",children:[i.jsx(J,{children:"Account"}),i.jsxs(Ct,{value:u,onValueChange:d,children:[i.jsx(Et,{children:i.jsx(Pt,{placeholder:"Select account"})}),i.jsx(At,{children:m.map(I=>i.jsxs(ye,{value:I.id,children:[I.accountCode," - ",I.accountName," (",I.accountType,")"]},I.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(J,{children:"Balance"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(G,{type:"number",step:"0.01",placeholder:"0.00",value:h,onChange:I=>f(I.target.value)}),i.jsx(W,{onClick:b,type:"button",children:"Add"})]})]})]}),l.length>0&&i.jsx("div",{className:"border rounded-lg",children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(ve,{children:[i.jsx(q,{children:"Account"}),i.jsx(q,{children:"Type"}),i.jsx(q,{className:"text-right",children:"Balance"}),i.jsx(q,{className:"w-[50px]"})]})}),i.jsx(Ut,{children:l.map(I=>{const k=m.find(L=>L.id===I.accountId);return i.jsxs(ve,{children:[i.jsxs(V,{children:[k==null?void 0:k.accountCode," - ",k==null?void 0:k.accountName]}),i.jsx(V,{children:k==null?void 0:k.accountType}),i.jsx(V,{className:"text-right",children:i.jsx(G,{type:"number",step:"0.01",className:"text-right w-32 ml-auto",value:I.balance,onChange:L=>S(I.accountId,parseFloat(L.target.value)||0)})}),i.jsx(V,{children:i.jsx(W,{variant:"ghost",size:"sm",onClick:()=>x(I.accountId),children:"x"})})]},I.accountId)})})]})})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(W,{variant:"outline",onClick:()=>s(1),className:"gap-2",children:[i.jsx(fa,{className:"h-4 w-4"}),"Back"]}),i.jsxs(W,{onClick:()=>s(3),disabled:l.length===0,className:"gap-2",children:["Next: Review",i.jsx(LT,{className:"h-4 w-4"})]})]})]}),r===3&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs(Q,{children:[i.jsxs(ee,{children:[i.jsx(te,{children:"Step 3: Review & Post"}),i.jsx(dt,{children:"Review your opening balances and verify the accounting equation"})]}),i.jsxs(ne,{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(Q,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(dt,{children:"Total Assets"}),i.jsx(te,{className:"text-2xl",children:le(_)})]})}),i.jsx(Q,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(dt,{children:"Total Liabilities"}),i.jsx(te,{className:"text-2xl",children:le(C)})]})}),i.jsx(Q,{children:i.jsxs(ee,{className:"pb-2",children:[i.jsx(dt,{children:"Total Equity"}),i.jsx(te,{className:"text-2xl",children:le(E)})]})})]}),i.jsx("div",{className:`p-4 rounded-lg border-2 ${w?"bg-green-50 border-green-500":"bg-amber-50 border-amber-500"}`,children:w?i.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[i.jsx(zw,{className:"h-5 w-5"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Equation is balanced!"}),i.jsx("div",{className:"text-sm",children:"Assets = Liabilities + Equity"})]})]}):i.jsxs("div",{className:"flex items-start gap-2 text-amber-700",children:[i.jsx(ks,{className:"h-5 w-5 mt-0.5"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Equation is not balanced"}),i.jsxs("div",{className:"text-sm",children:["Difference: ",le(Math.abs(p))]}),i.jsx("div",{className:"text-sm mt-1",children:"This will be automatically balanced to Retained Earnings when posted."})]})]})}),i.jsxs(ku,{children:[i.jsx(ks,{className:"h-4 w-4"}),i.jsxs(Ru,{children:["Once posted, these opening balances will create a journal entry dated ",a,". Make sure this is correct before proceeding."]})]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(W,{variant:"outline",onClick:()=>s(2),className:"gap-2",children:[i.jsx(fa,{className:"h-4 w-4"}),"Back"]}),i.jsx(W,{onClick:A,disabled:y.isPending||l.length===0,children:y.isPending?"Posting...":"Post Opening Balances"})]})]})]})}const ptt=N.lazy(()=>Ox(()=>import("./FinancialReports-DWDFwP9G.js"),[])),gtt=N.lazy(()=>Ox(()=>import("./PayrollReports-skQ_jkv6.js"),[])),ytt=N.lazy(()=>Ox(()=>import("./AuditLogs-z9qzvQCT.js"),[])),vtt=N.lazy(()=>Ox(()=>import("./JournalEntries-BkPslUtO.js"),[])),xtt=N.lazy(()=>Ox(()=>import("./ChartOfAccounts-BvHDR8gm.js"),[])),btt=new Nde({defaultOptions:{queries:{staleTime:1e3*60*5,retry:2,refetchOnWindowFocus:!1},mutations:{retry:1}}}),ny=i.jsx("div",{className:"py-10",children:i.jsx(um,{message:"Loading page..."})}),wtt=()=>i.jsx(nwe,{children:i.jsx(Cde,{client:btt,children:i.jsxs(X8,{children:[i.jsx(zle,{}),i.jsx(wce,{}),i.jsx(Lhe,{basename:"/",children:i.jsx(twe,{children:i.jsxs(Che,{children:[i.jsx(mt,{path:"/",element:i.jsx(Xet,{})}),i.jsx(mt,{path:"/auth",element:i.jsx(SPe,{})}),i.jsx(mt,{path:"/accept-invitation",element:i.jsx(EPe,{})}),i.jsx(mt,{path:"/setup",element:i.jsx(xt,{children:i.jsx(Yet,{})})}),i.jsx(mt,{path:"/dashboard",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(iJe,{})})})}),i.jsx(mt,{path:"/invoices",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(oJe,{})})})})}),i.jsx(mt,{path:"/invoices/new",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(cJe,{})})})})}),i.jsx(mt,{path:"/customers",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(het,{})})})})}),i.jsx(mt,{path:"/estimates",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(xet,{})})})})}),i.jsx(mt,{path:"/quotations/new",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(get,{})})})})}),i.jsx(mt,{path:"/sales-orders",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(pet,{})})})})}),i.jsx(mt,{path:"/vendors",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(wet,{})})})})}),i.jsx(mt,{path:"/bills",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(_et,{})})})})}),i.jsx(mt,{path:"/purchase-orders",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(jet,{})})})})}),i.jsx(mt,{path:"/expenses",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(Aet,{})})})})}),i.jsx(mt,{path:"/products",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(ftt,{})})})})}),i.jsx(mt,{path:"/inventory",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(Cet,{})})})})}),i.jsx(mt,{path:"/bank-accounts",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(Pet,{})})})})}),i.jsx(mt,{path:"/reconciliation",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(Met,{})})})})}),i.jsx(mt,{path:"/employees",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(uJe,{})})})})}),i.jsx(mt,{path:"/employees/new",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(xJe,{})})})})}),i.jsx(mt,{path:"/employees/:id/edit",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(_Je,{})})})})}),i.jsx(mt,{path:"/employees/bulk-upload",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(NJe,{})})})})}),i.jsx(mt,{path:"/employees/:id/payroll-setup",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(ltt,{})})})})}),i.jsx(mt,{path:"/payroll",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(AJe,{})})})})}),i.jsx(mt,{path:"/payroll/new",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(IJe,{})})})})}),i.jsx(mt,{path:"/payroll/:id",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(WJe,{})})})})}),i.jsx(mt,{path:"/payroll/:id/approve",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(KJe,{})})})})}),i.jsx(mt,{path:"/payroll/:runId/payslip/:employeeId",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(HJe,{})})})})}),i.jsx(mt,{path:"/advances",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(YJe,{})})})})}),i.jsx(mt,{path:"/time-tracking",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(Det,{})})})})}),i.jsx(mt,{path:"/projects",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx($et,{})})})})}),i.jsx(mt,{path:"/projects/:projectId/expenses",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(Vet,{})})})})}),i.jsx(mt,{path:"/projects/:projectId/activity-log",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(Uet,{})})})})}),i.jsx(mt,{path:"/donors",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(Zet,{})})})})}),i.jsx(mt,{path:"/accounts-payable",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(Jet,{})})})})}),i.jsx(mt,{path:"/accounts-receivable",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(ett,{})})})})}),i.jsx(mt,{path:"/company-settings",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{allowedRoles:["super_admin","admin"],children:i.jsx(Q6,{})})})})}),i.jsx(mt,{path:"/reports",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(N.Suspense,{fallback:ny,children:i.jsx(ptt,{})})})})})}),i.jsx(mt,{path:"/payroll-reports",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(N.Suspense,{fallback:ny,children:i.jsx(gtt,{})})})})})}),i.jsx(mt,{path:"/zra-compliance",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(ZJe,{})})})})}),i.jsx(mt,{path:"/tax-calculator",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(JJe,{})})})})}),i.jsx(mt,{path:"/payroll-settings",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{allowedRoles:["super_admin","admin"],children:i.jsx(dtt,{})})})})}),i.jsx(mt,{path:"/settings",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(Q6,{})})})})}),i.jsx(mt,{path:"/users",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{allowedRoles:["super_admin","admin"],children:i.jsx(Let,{})})})})}),i.jsx(mt,{path:"/audit-logs",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{allowedRoles:["super_admin","admin","auditor"],children:i.jsx(N.Suspense,{fallback:ny,children:i.jsx(ytt,{})})})})})}),i.jsx(mt,{path:"/fixed-assets",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(ttt,{})})})})}),i.jsx(mt,{path:"/asset-depreciation",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(rtt,{})})})})}),i.jsx(mt,{path:"/financial-periods",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{allowedRoles:["super_admin","admin","accountant"],children:i.jsx(att,{})})})})}),i.jsx(mt,{path:"/journal-entries",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(N.Suspense,{fallback:ny,children:i.jsx(vtt,{})})})})})}),i.jsx(mt,{path:"/chart-of-accounts",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{children:i.jsx(N.Suspense,{fallback:ny,children:i.jsx(xtt,{})})})})})}),i.jsx(mt,{path:"/opening-balances",element:i.jsx(xt,{children:i.jsx(St,{children:i.jsx(Tt,{allowedRoles:["super_admin","admin","financial_manager","accountant"],children:i.jsx(mtt,{})})})})}),i.jsx(mt,{path:"*",element:i.jsx(Tet,{})})]})})})]})})});Aq(document.getElementById("root")).render(i.jsx(wtt,{}));export{Ve as $,ut as A,W as B,ks as C,Rs as D,rz as E,ur as F,ge as G,Te as H,G as I,je as J,he as K,um as L,Ha as M,le as N,Y as O,re as P,Ts as Q,u8 as R,gh as S,m1 as T,Ms as U,Ct as V,Et as W,Pt as X,At as Y,ye as Z,Di as _,me as a,en as a0,Xe as a1,Ds as a2,_n as a3,Z as a4,dt as a5,Yoe as a6,En as a7,mh as a8,Hoe as a9,Zn as aa,Hn as ab,Kn as ac,Gn as ad,ns as ae,hr as af,p1 as ag,r8 as ah,rle as ai,es as aj,Ce as ak,xr as al,Ye as am,we as b,Ie as c,Fe as d,hv as e,Q as f,ee as g,te as h,ne as i,i as j,J as k,Nb as l,Ya as m,ma as n,n8 as o,Qa as p,Vt as q,N as r,Bt as s,ve as t,ot as u,q as v,Ut as w,V as x,Cn as y,$n as z};
