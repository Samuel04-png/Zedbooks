var ase=Object.defineProperty;var LM=t=>{throw TypeError(t)};var ose=(t,e,n)=>e in t?ase(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var $M=(t,e,n)=>ose(t,typeof e!="symbol"?e+"":e,n),I1=(t,e,n)=>e.has(t)||LM("Cannot "+n);var J=(t,e,n)=>(I1(t,e,"read from private field"),n?n.call(t):e.get(t)),xt=(t,e,n)=>e.has(t)?LM("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ge=(t,e,n,r)=>(I1(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ht=(t,e,n)=>(I1(t,e,"access private method"),n);var Db=(t,e,n,r)=>({set _(s){Ge(t,e,s,n)},get _(){return J(t,e,r)}});function lse(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var Mb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mz={exports:{}},Gj={},pz={exports:{}},Yt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cx=Symbol.for("react.element"),cse=Symbol.for("react.portal"),use=Symbol.for("react.fragment"),dse=Symbol.for("react.strict_mode"),hse=Symbol.for("react.profiler"),fse=Symbol.for("react.provider"),mse=Symbol.for("react.context"),pse=Symbol.for("react.forward_ref"),gse=Symbol.for("react.suspense"),yse=Symbol.for("react.memo"),vse=Symbol.for("react.lazy"),FM=Symbol.iterator;function xse(t){return t===null||typeof t!="object"?null:(t=FM&&t[FM]||t["@@iterator"],typeof t=="function"?t:null)}var gz={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yz=Object.assign,vz={};function kp(t,e,n){this.props=t,this.context=e,this.refs=vz,this.updater=n||gz}kp.prototype.isReactComponent={};kp.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};kp.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function xz(){}xz.prototype=kp.prototype;function XI(t,e,n){this.props=t,this.context=e,this.refs=vz,this.updater=n||gz}var ZI=XI.prototype=new xz;ZI.constructor=XI;yz(ZI,kp.prototype);ZI.isPureReactComponent=!0;var VM=Array.isArray,bz=Object.prototype.hasOwnProperty,JI={current:null},wz={key:!0,ref:!0,__self:!0,__source:!0};function _z(t,e,n){var r,s={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)bz.call(e,r)&&!wz.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Cx,type:t,key:a,ref:o,props:s,_owner:JI.current}}function bse(t,e){return{$$typeof:Cx,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ek(t){return typeof t=="object"&&t!==null&&t.$$typeof===Cx}function wse(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var BM=/\/+/g;function k1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?wse(""+t.key):e.toString(36)}function M0(t,e,n,r,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Cx:case cse:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+k1(o,0):r,VM(s)?(n="",t!=null&&(n=t.replace(BM,"$&/")+"/"),M0(s,e,n,"",function(u){return u})):s!=null&&(ek(s)&&(s=bse(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(BM,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",VM(t))for(var l=0;l<t.length;l++){a=t[l];var c=r+k1(a,l);o+=M0(a,e,n,c,s)}else if(c=xse(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=r+k1(a,l++),o+=M0(a,e,n,c,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Lb(t,e,n){if(t==null)return t;var r=[],s=0;return M0(t,r,"","",function(a){return e.call(n,a,s++)}),r}function _se(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xs={current:null},L0={transition:null},jse={ReactCurrentDispatcher:Xs,ReactCurrentBatchConfig:L0,ReactCurrentOwner:JI};function jz(){throw Error("act(...) is not supported in production builds of React.")}Yt.Children={map:Lb,forEach:function(t,e,n){Lb(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Lb(t,function(){e++}),e},toArray:function(t){return Lb(t,function(e){return e})||[]},only:function(t){if(!ek(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Yt.Component=kp;Yt.Fragment=use;Yt.Profiler=hse;Yt.PureComponent=XI;Yt.StrictMode=dse;Yt.Suspense=gse;Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jse;Yt.act=jz;Yt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=yz({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=JI.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)bz.call(e,c)&&!wz.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Cx,type:t.type,key:s,ref:a,props:r,_owner:o}};Yt.createContext=function(t){return t={$$typeof:mse,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:fse,_context:t},t.Consumer=t};Yt.createElement=_z;Yt.createFactory=function(t){var e=_z.bind(null,t);return e.type=t,e};Yt.createRef=function(){return{current:null}};Yt.forwardRef=function(t){return{$$typeof:pse,render:t}};Yt.isValidElement=ek;Yt.lazy=function(t){return{$$typeof:vse,_payload:{_status:-1,_result:t},_init:_se}};Yt.memo=function(t,e){return{$$typeof:yse,type:t,compare:e===void 0?null:e}};Yt.startTransition=function(t){var e=L0.transition;L0.transition={};try{t()}finally{L0.transition=e}};Yt.unstable_act=jz;Yt.useCallback=function(t,e){return Xs.current.useCallback(t,e)};Yt.useContext=function(t){return Xs.current.useContext(t)};Yt.useDebugValue=function(){};Yt.useDeferredValue=function(t){return Xs.current.useDeferredValue(t)};Yt.useEffect=function(t,e){return Xs.current.useEffect(t,e)};Yt.useId=function(){return Xs.current.useId()};Yt.useImperativeHandle=function(t,e,n){return Xs.current.useImperativeHandle(t,e,n)};Yt.useInsertionEffect=function(t,e){return Xs.current.useInsertionEffect(t,e)};Yt.useLayoutEffect=function(t,e){return Xs.current.useLayoutEffect(t,e)};Yt.useMemo=function(t,e){return Xs.current.useMemo(t,e)};Yt.useReducer=function(t,e,n){return Xs.current.useReducer(t,e,n)};Yt.useRef=function(t){return Xs.current.useRef(t)};Yt.useState=function(t){return Xs.current.useState(t)};Yt.useSyncExternalStore=function(t,e,n){return Xs.current.useSyncExternalStore(t,e,n)};Yt.useTransition=function(){return Xs.current.useTransition()};Yt.version="18.3.1";pz.exports=Yt;var _=pz.exports;const F=xn(_),tk=lse({__proto__:null,default:F},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nse=_,Sse=Symbol.for("react.element"),Ese=Symbol.for("react.fragment"),Ase=Object.prototype.hasOwnProperty,Tse=Nse.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Cse={key:!0,ref:!0,__self:!0,__source:!0};function Nz(t,e,n){var r,s={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Ase.call(e,r)&&!Cse.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Sse,type:t,key:a,ref:o,props:s,_owner:Tse.current}}Gj.Fragment=Ese;Gj.jsx=Nz;Gj.jsxs=Nz;mz.exports=Gj;var i=mz.exports,Sz={exports:{}},zi={},Ez={exports:{}},Az={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,O){var W=$.length;$.push(O);e:for(;0<W;){var Z=W-1>>>1,ae=$[Z];if(0<s(ae,O))$[Z]=O,$[W]=ae,W=Z;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var O=$[0],W=$.pop();if(W!==O){$[0]=W;e:for(var Z=0,ae=$.length,Ae=ae>>>1;Z<Ae;){var ie=2*(Z+1)-1,pe=$[ie],Ue=ie+1,Ne=$[Ue];if(0>s(pe,W))Ue<ae&&0>s(Ne,pe)?($[Z]=Ne,$[Ue]=W,Z=Ue):($[Z]=pe,$[ie]=W,Z=ie);else if(Ue<ae&&0>s(Ne,W))$[Z]=Ne,$[Ue]=W,Z=Ue;else break e}}return O}function s($,O){var W=$.sortIndex-O.sortIndex;return W!==0?W:$.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,y=!1,p=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w($){for(var O=n(u);O!==null;){if(O.callback===null)r(u);else if(O.startTime<=$)r(u),O.sortIndex=O.expirationTime,e(c,O);else break;O=n(u)}}function C($){if(p=!1,w($),!y)if(n(c)!==null)y=!0,B(S);else{var O=n(u);O!==null&&M(C,O.startTime-$)}}function S($,O){y=!1,p&&(p=!1,b(g),g=-1),m=!0;var W=f;try{for(w(O),h=n(c);h!==null&&(!(h.expirationTime>O)||$&&!A());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,f=h.priorityLevel;var ae=Z(h.expirationTime<=O);O=t.unstable_now(),typeof ae=="function"?h.callback=ae:h===n(c)&&r(c),w(O)}else r(c);h=n(c)}if(h!==null)var Ae=!0;else{var ie=n(u);ie!==null&&M(C,ie.startTime-O),Ae=!1}return Ae}finally{h=null,f=W,m=!1}}var P=!1,j=null,g=-1,T=5,E=-1;function A(){return!(t.unstable_now()-E<T)}function I(){if(j!==null){var $=t.unstable_now();E=$;var O=!0;try{O=j(!0,$)}finally{O?k():(P=!1,j=null)}}else P=!1}var k;if(typeof x=="function")k=function(){x(I)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,V=L.port2;L.port1.onmessage=I,k=function(){V.postMessage(null)}}else k=function(){v(I,0)};function B($){j=$,P||(P=!0,k())}function M($,O){g=v(function(){$(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,B(S))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function($){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var W=f;f=O;try{return $()}finally{f=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,O){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var W=f;f=$;try{return O()}finally{f=W}},t.unstable_scheduleCallback=function($,O,W){var Z=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Z+W:Z):W=Z,$){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=W+ae,$={id:d++,callback:O,priorityLevel:$,startTime:W,expirationTime:ae,sortIndex:-1},W>Z?($.sortIndex=W,e(u,$),n(c)===null&&$===n(u)&&(p?(b(g),g=-1):p=!0,M(C,W-Z))):($.sortIndex=ae,e(c,$),y||m||(y=!0,B(S))),$},t.unstable_shouldYield=A,t.unstable_wrapCallback=function($){var O=f;return function(){var W=f;f=O;try{return $.apply(this,arguments)}finally{f=W}}}})(Az);Ez.exports=Az;var Pse=Ez.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ise=_,Bi=Pse;function ke(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Tz=new Set,Qy={};function Bh(t,e){km(t,e),km(t+"Capture",e)}function km(t,e){for(Qy[t]=e,t=0;t<e.length;t++)Tz.add(e[t])}var Ml=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),BA=Object.prototype.hasOwnProperty,kse=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,UM={},zM={};function Rse(t){return BA.call(zM,t)?!0:BA.call(UM,t)?!1:kse.test(t)?zM[t]=!0:(UM[t]=!0,!1)}function Ose(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Dse(t,e,n,r){if(e===null||typeof e>"u"||Ose(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zs(t,e,n,r,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var fs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){fs[t]=new Zs(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];fs[e]=new Zs(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){fs[t]=new Zs(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){fs[t]=new Zs(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){fs[t]=new Zs(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){fs[t]=new Zs(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){fs[t]=new Zs(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){fs[t]=new Zs(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){fs[t]=new Zs(t,5,!1,t.toLowerCase(),null,!1,!1)});var nk=/[\-:]([a-z])/g;function rk(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(nk,rk);fs[e]=new Zs(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(nk,rk);fs[e]=new Zs(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(nk,rk);fs[e]=new Zs(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){fs[t]=new Zs(t,1,!1,t.toLowerCase(),null,!1,!1)});fs.xlinkHref=new Zs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){fs[t]=new Zs(t,1,!1,t.toLowerCase(),null,!0,!0)});function sk(t,e,n,r){var s=fs.hasOwnProperty(e)?fs[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Dse(e,n,s,r)&&(n=null),r||s===null?Rse(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var rc=Ise.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$b=Symbol.for("react.element"),Tf=Symbol.for("react.portal"),Cf=Symbol.for("react.fragment"),ik=Symbol.for("react.strict_mode"),UA=Symbol.for("react.profiler"),Cz=Symbol.for("react.provider"),Pz=Symbol.for("react.context"),ak=Symbol.for("react.forward_ref"),zA=Symbol.for("react.suspense"),qA=Symbol.for("react.suspense_list"),ok=Symbol.for("react.memo"),Ic=Symbol.for("react.lazy"),Iz=Symbol.for("react.offscreen"),qM=Symbol.iterator;function Tg(t){return t===null||typeof t!="object"?null:(t=qM&&t[qM]||t["@@iterator"],typeof t=="function"?t:null)}var sr=Object.assign,R1;function sy(t){if(R1===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);R1=e&&e[1]||""}return`
`+R1+t}var O1=!1;function D1(t,e){if(!t||O1)return"";O1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=r.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{O1=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?sy(t):""}function Mse(t){switch(t.tag){case 5:return sy(t.type);case 16:return sy("Lazy");case 13:return sy("Suspense");case 19:return sy("SuspenseList");case 0:case 2:case 15:return t=D1(t.type,!1),t;case 11:return t=D1(t.type.render,!1),t;case 1:return t=D1(t.type,!0),t;default:return""}}function WA(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Cf:return"Fragment";case Tf:return"Portal";case UA:return"Profiler";case ik:return"StrictMode";case zA:return"Suspense";case qA:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Pz:return(t.displayName||"Context")+".Consumer";case Cz:return(t._context.displayName||"Context")+".Provider";case ak:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ok:return e=t.displayName||null,e!==null?e:WA(t.type)||"Memo";case Ic:e=t._payload,t=t._init;try{return WA(t(e))}catch{}}return null}function Lse(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return WA(e);case 8:return e===ik?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Au(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kz(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $se(t){var e=kz(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fb(t){t._valueTracker||(t._valueTracker=$se(t))}function Rz(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=kz(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function vw(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function HA(t,e){var n=e.checked;return sr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function WM(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Au(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Oz(t,e){e=e.checked,e!=null&&sk(t,"checked",e,!1)}function KA(t,e){Oz(t,e);var n=Au(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?GA(t,e.type,n):e.hasOwnProperty("defaultValue")&&GA(t,e.type,Au(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function HM(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function GA(t,e,n){(e!=="number"||vw(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var iy=Array.isArray;function Xf(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Au(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function YA(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ke(91));return sr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function KM(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ke(92));if(iy(n)){if(1<n.length)throw Error(ke(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Au(n)}}function Dz(t,e){var n=Au(e.value),r=Au(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function GM(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Mz(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function QA(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Mz(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vb,Lz=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Vb=Vb||document.createElement("div"),Vb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vb.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Xy(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var wy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fse=["Webkit","ms","Moz","O"];Object.keys(wy).forEach(function(t){Fse.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wy[e]=wy[t]})});function $z(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||wy.hasOwnProperty(t)&&wy[t]?(""+e).trim():e+"px"}function Fz(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=$z(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Vse=sr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function XA(t,e){if(e){if(Vse[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ke(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ke(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ke(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ke(62))}}function ZA(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var JA=null;function lk(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var eT=null,Zf=null,Jf=null;function YM(t){if(t=kx(t)){if(typeof eT!="function")throw Error(ke(280));var e=t.stateNode;e&&(e=Jj(e),eT(t.stateNode,t.type,e))}}function Vz(t){Zf?Jf?Jf.push(t):Jf=[t]:Zf=t}function Bz(){if(Zf){var t=Zf,e=Jf;if(Jf=Zf=null,YM(t),e)for(t=0;t<e.length;t++)YM(e[t])}}function Uz(t,e){return t(e)}function zz(){}var M1=!1;function qz(t,e,n){if(M1)return t(e,n);M1=!0;try{return Uz(t,e,n)}finally{M1=!1,(Zf!==null||Jf!==null)&&(zz(),Bz())}}function Zy(t,e){var n=t.stateNode;if(n===null)return null;var r=Jj(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ke(231,e,typeof n));return n}var tT=!1;if(Ml)try{var Cg={};Object.defineProperty(Cg,"passive",{get:function(){tT=!0}}),window.addEventListener("test",Cg,Cg),window.removeEventListener("test",Cg,Cg)}catch{tT=!1}function Bse(t,e,n,r,s,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var _y=!1,xw=null,bw=!1,nT=null,Use={onError:function(t){_y=!0,xw=t}};function zse(t,e,n,r,s,a,o,l,c){_y=!1,xw=null,Bse.apply(Use,arguments)}function qse(t,e,n,r,s,a,o,l,c){if(zse.apply(this,arguments),_y){if(_y){var u=xw;_y=!1,xw=null}else throw Error(ke(198));bw||(bw=!0,nT=u)}}function Uh(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Wz(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function QM(t){if(Uh(t)!==t)throw Error(ke(188))}function Wse(t){var e=t.alternate;if(!e){if(e=Uh(t),e===null)throw Error(ke(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return QM(s),t;if(a===r)return QM(s),e;a=a.sibling}throw Error(ke(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(ke(189))}}if(n.alternate!==r)throw Error(ke(190))}if(n.tag!==3)throw Error(ke(188));return n.stateNode.current===n?t:e}function Hz(t){return t=Wse(t),t!==null?Kz(t):null}function Kz(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Kz(t);if(e!==null)return e;t=t.sibling}return null}var Gz=Bi.unstable_scheduleCallback,XM=Bi.unstable_cancelCallback,Hse=Bi.unstable_shouldYield,Kse=Bi.unstable_requestPaint,vr=Bi.unstable_now,Gse=Bi.unstable_getCurrentPriorityLevel,ck=Bi.unstable_ImmediatePriority,Yz=Bi.unstable_UserBlockingPriority,ww=Bi.unstable_NormalPriority,Yse=Bi.unstable_LowPriority,Qz=Bi.unstable_IdlePriority,Yj=null,Mo=null;function Qse(t){if(Mo&&typeof Mo.onCommitFiberRoot=="function")try{Mo.onCommitFiberRoot(Yj,t,void 0,(t.current.flags&128)===128)}catch{}}var Ja=Math.clz32?Math.clz32:Jse,Xse=Math.log,Zse=Math.LN2;function Jse(t){return t>>>=0,t===0?32:31-(Xse(t)/Zse|0)|0}var Bb=64,Ub=4194304;function ay(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _w(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=ay(l):(a&=o,a!==0&&(r=ay(a)))}else o=n&~s,o!==0?r=ay(o):a!==0&&(r=ay(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ja(e),s=1<<n,r|=t[n],e&=~s;return r}function eie(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tie(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Ja(a),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=eie(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function rT(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Xz(){var t=Bb;return Bb<<=1,!(Bb&4194240)&&(Bb=64),t}function L1(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Px(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ja(e),t[e]=n}function nie(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ja(n),a=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~a}}function uk(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ja(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var jn=0;function Zz(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Jz,dk,e9,t9,n9,sT=!1,zb=[],cu=null,uu=null,du=null,Jy=new Map,ev=new Map,Mc=[],rie="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ZM(t,e){switch(t){case"focusin":case"focusout":cu=null;break;case"dragenter":case"dragleave":uu=null;break;case"mouseover":case"mouseout":du=null;break;case"pointerover":case"pointerout":Jy.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ev.delete(e.pointerId)}}function Pg(t,e,n,r,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},e!==null&&(e=kx(e),e!==null&&dk(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function sie(t,e,n,r,s){switch(e){case"focusin":return cu=Pg(cu,t,e,n,r,s),!0;case"dragenter":return uu=Pg(uu,t,e,n,r,s),!0;case"mouseover":return du=Pg(du,t,e,n,r,s),!0;case"pointerover":var a=s.pointerId;return Jy.set(a,Pg(Jy.get(a)||null,t,e,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,ev.set(a,Pg(ev.get(a)||null,t,e,n,r,s)),!0}return!1}function r9(t){var e=Rd(t.target);if(e!==null){var n=Uh(e);if(n!==null){if(e=n.tag,e===13){if(e=Wz(n),e!==null){t.blockedOn=e,n9(t.priority,function(){e9(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=iT(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);JA=r,n.target.dispatchEvent(r),JA=null}else return e=kx(n),e!==null&&dk(e),t.blockedOn=n,!1;e.shift()}return!0}function JM(t,e,n){$0(t)&&n.delete(e)}function iie(){sT=!1,cu!==null&&$0(cu)&&(cu=null),uu!==null&&$0(uu)&&(uu=null),du!==null&&$0(du)&&(du=null),Jy.forEach(JM),ev.forEach(JM)}function Ig(t,e){t.blockedOn===e&&(t.blockedOn=null,sT||(sT=!0,Bi.unstable_scheduleCallback(Bi.unstable_NormalPriority,iie)))}function tv(t){function e(s){return Ig(s,t)}if(0<zb.length){Ig(zb[0],t);for(var n=1;n<zb.length;n++){var r=zb[n];r.blockedOn===t&&(r.blockedOn=null)}}for(cu!==null&&Ig(cu,t),uu!==null&&Ig(uu,t),du!==null&&Ig(du,t),Jy.forEach(e),ev.forEach(e),n=0;n<Mc.length;n++)r=Mc[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Mc.length&&(n=Mc[0],n.blockedOn===null);)r9(n),n.blockedOn===null&&Mc.shift()}var em=rc.ReactCurrentBatchConfig,jw=!0;function aie(t,e,n,r){var s=jn,a=em.transition;em.transition=null;try{jn=1,hk(t,e,n,r)}finally{jn=s,em.transition=a}}function oie(t,e,n,r){var s=jn,a=em.transition;em.transition=null;try{jn=4,hk(t,e,n,r)}finally{jn=s,em.transition=a}}function hk(t,e,n,r){if(jw){var s=iT(t,e,n,r);if(s===null)K1(t,e,r,Nw,n),ZM(t,r);else if(sie(s,t,e,n,r))r.stopPropagation();else if(ZM(t,r),e&4&&-1<rie.indexOf(t)){for(;s!==null;){var a=kx(s);if(a!==null&&Jz(a),a=iT(t,e,n,r),a===null&&K1(t,e,r,Nw,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else K1(t,e,r,null,n)}}var Nw=null;function iT(t,e,n,r){if(Nw=null,t=lk(r),t=Rd(t),t!==null)if(e=Uh(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Wz(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nw=t,null}function s9(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gse()){case ck:return 1;case Yz:return 4;case ww:case Yse:return 16;case Qz:return 536870912;default:return 16}default:return 16}}var eu=null,fk=null,F0=null;function i9(){if(F0)return F0;var t,e=fk,n=e.length,r,s="value"in eu?eu.value:eu.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[a-r];r++);return F0=s.slice(t,1<r?1-r:void 0)}function V0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qb(){return!0}function eL(){return!1}function qi(t){function e(n,r,s,a,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?qb:eL,this.isPropagationStopped=eL,this}return sr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qb)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qb)},persist:function(){},isPersistent:qb}),e}var Rp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mk=qi(Rp),Ix=sr({},Rp,{view:0,detail:0}),lie=qi(Ix),$1,F1,kg,Qj=sr({},Ix,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pk,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==kg&&(kg&&t.type==="mousemove"?($1=t.screenX-kg.screenX,F1=t.screenY-kg.screenY):F1=$1=0,kg=t),$1)},movementY:function(t){return"movementY"in t?t.movementY:F1}}),tL=qi(Qj),cie=sr({},Qj,{dataTransfer:0}),uie=qi(cie),die=sr({},Ix,{relatedTarget:0}),V1=qi(die),hie=sr({},Rp,{animationName:0,elapsedTime:0,pseudoElement:0}),fie=qi(hie),mie=sr({},Rp,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pie=qi(mie),gie=sr({},Rp,{data:0}),nL=qi(gie),yie={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vie={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xie={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bie(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xie[t])?!!e[t]:!1}function pk(){return bie}var wie=sr({},Ix,{key:function(t){if(t.key){var e=yie[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=V0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?vie[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pk,charCode:function(t){return t.type==="keypress"?V0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?V0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_ie=qi(wie),jie=sr({},Qj,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rL=qi(jie),Nie=sr({},Ix,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pk}),Sie=qi(Nie),Eie=sr({},Rp,{propertyName:0,elapsedTime:0,pseudoElement:0}),Aie=qi(Eie),Tie=sr({},Qj,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Cie=qi(Tie),Pie=[9,13,27,32],gk=Ml&&"CompositionEvent"in window,jy=null;Ml&&"documentMode"in document&&(jy=document.documentMode);var Iie=Ml&&"TextEvent"in window&&!jy,a9=Ml&&(!gk||jy&&8<jy&&11>=jy),sL=" ",iL=!1;function o9(t,e){switch(t){case"keyup":return Pie.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function l9(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pf=!1;function kie(t,e){switch(t){case"compositionend":return l9(e);case"keypress":return e.which!==32?null:(iL=!0,sL);case"textInput":return t=e.data,t===sL&&iL?null:t;default:return null}}function Rie(t,e){if(Pf)return t==="compositionend"||!gk&&o9(t,e)?(t=i9(),F0=fk=eu=null,Pf=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return a9&&e.locale!=="ko"?null:e.data;default:return null}}var Oie={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function aL(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Oie[t.type]:e==="textarea"}function c9(t,e,n,r){Vz(r),e=Sw(e,"onChange"),0<e.length&&(n=new mk("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ny=null,nv=null;function Die(t){b9(t,0)}function Xj(t){var e=Rf(t);if(Rz(e))return t}function Mie(t,e){if(t==="change")return e}var u9=!1;if(Ml){var B1;if(Ml){var U1="oninput"in document;if(!U1){var oL=document.createElement("div");oL.setAttribute("oninput","return;"),U1=typeof oL.oninput=="function"}B1=U1}else B1=!1;u9=B1&&(!document.documentMode||9<document.documentMode)}function lL(){Ny&&(Ny.detachEvent("onpropertychange",d9),nv=Ny=null)}function d9(t){if(t.propertyName==="value"&&Xj(nv)){var e=[];c9(e,nv,t,lk(t)),qz(Die,e)}}function Lie(t,e,n){t==="focusin"?(lL(),Ny=e,nv=n,Ny.attachEvent("onpropertychange",d9)):t==="focusout"&&lL()}function $ie(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xj(nv)}function Fie(t,e){if(t==="click")return Xj(e)}function Vie(t,e){if(t==="input"||t==="change")return Xj(e)}function Bie(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ao=typeof Object.is=="function"?Object.is:Bie;function rv(t,e){if(ao(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!BA.call(e,s)||!ao(t[s],e[s]))return!1}return!0}function cL(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function uL(t,e){var n=cL(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cL(n)}}function h9(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?h9(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function f9(){for(var t=window,e=vw();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vw(t.document)}return e}function yk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Uie(t){var e=f9(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&h9(n.ownerDocument.documentElement,n)){if(r!==null&&yk(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!t.extend&&a>r&&(s=r,r=a,a=s),s=uL(n,a);var o=uL(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var zie=Ml&&"documentMode"in document&&11>=document.documentMode,If=null,aT=null,Sy=null,oT=!1;function dL(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;oT||If==null||If!==vw(r)||(r=If,"selectionStart"in r&&yk(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Sy&&rv(Sy,r)||(Sy=r,r=Sw(aT,"onSelect"),0<r.length&&(e=new mk("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=If)))}function Wb(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var kf={animationend:Wb("Animation","AnimationEnd"),animationiteration:Wb("Animation","AnimationIteration"),animationstart:Wb("Animation","AnimationStart"),transitionend:Wb("Transition","TransitionEnd")},z1={},m9={};Ml&&(m9=document.createElement("div").style,"AnimationEvent"in window||(delete kf.animationend.animation,delete kf.animationiteration.animation,delete kf.animationstart.animation),"TransitionEvent"in window||delete kf.transitionend.transition);function Zj(t){if(z1[t])return z1[t];if(!kf[t])return t;var e=kf[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in m9)return z1[t]=e[n];return t}var p9=Zj("animationend"),g9=Zj("animationiteration"),y9=Zj("animationstart"),v9=Zj("transitionend"),x9=new Map,hL="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wu(t,e){x9.set(t,e),Bh(e,[t])}for(var q1=0;q1<hL.length;q1++){var W1=hL[q1],qie=W1.toLowerCase(),Wie=W1[0].toUpperCase()+W1.slice(1);Wu(qie,"on"+Wie)}Wu(p9,"onAnimationEnd");Wu(g9,"onAnimationIteration");Wu(y9,"onAnimationStart");Wu("dblclick","onDoubleClick");Wu("focusin","onFocus");Wu("focusout","onBlur");Wu(v9,"onTransitionEnd");km("onMouseEnter",["mouseout","mouseover"]);km("onMouseLeave",["mouseout","mouseover"]);km("onPointerEnter",["pointerout","pointerover"]);km("onPointerLeave",["pointerout","pointerover"]);Bh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bh("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hie=new Set("cancel close invalid load scroll toggle".split(" ").concat(oy));function fL(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,qse(r,e,void 0,t),t.currentTarget=null}function b9(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;fL(s,l,u),a=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;fL(s,l,u),a=c}}}if(bw)throw t=nT,bw=!1,nT=null,t}function Bn(t,e){var n=e[hT];n===void 0&&(n=e[hT]=new Set);var r=t+"__bubble";n.has(r)||(w9(e,t,2,!1),n.add(r))}function H1(t,e,n){var r=0;e&&(r|=4),w9(n,t,r,e)}var Hb="_reactListening"+Math.random().toString(36).slice(2);function sv(t){if(!t[Hb]){t[Hb]=!0,Tz.forEach(function(n){n!=="selectionchange"&&(Hie.has(n)||H1(n,!1,t),H1(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Hb]||(e[Hb]=!0,H1("selectionchange",!1,e))}}function w9(t,e,n,r){switch(s9(e)){case 1:var s=aie;break;case 4:s=oie;break;default:s=hk}n=s.bind(null,e,n,t),s=void 0,!tT||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function K1(t,e,n,r,s){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Rd(l),o===null)return;if(c=o.tag,c===5||c===6){r=a=o;continue e}l=l.parentNode}}r=r.return}qz(function(){var u=a,d=lk(n),h=[];e:{var f=x9.get(t);if(f!==void 0){var m=mk,y=t;switch(t){case"keypress":if(V0(n)===0)break e;case"keydown":case"keyup":m=_ie;break;case"focusin":y="focus",m=V1;break;case"focusout":y="blur",m=V1;break;case"beforeblur":case"afterblur":m=V1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=tL;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=uie;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Sie;break;case p9:case g9:case y9:m=fie;break;case v9:m=Aie;break;case"scroll":m=lie;break;case"wheel":m=Cie;break;case"copy":case"cut":case"paste":m=pie;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=rL}var p=(e&4)!==0,v=!p&&t==="scroll",b=p?f!==null?f+"Capture":null:f;p=[];for(var x=u,w;x!==null;){w=x;var C=w.stateNode;if(w.tag===5&&C!==null&&(w=C,b!==null&&(C=Zy(x,b),C!=null&&p.push(iv(x,C,w)))),v)break;x=x.return}0<p.length&&(f=new m(f,y,null,n,d),h.push({event:f,listeners:p}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==JA&&(y=n.relatedTarget||n.fromElement)&&(Rd(y)||y[Ll]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=u,y=y?Rd(y):null,y!==null&&(v=Uh(y),y!==v||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(p=tL,C="onMouseLeave",b="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(p=rL,C="onPointerLeave",b="onPointerEnter",x="pointer"),v=m==null?f:Rf(m),w=y==null?f:Rf(y),f=new p(C,x+"leave",m,n,d),f.target=v,f.relatedTarget=w,C=null,Rd(d)===u&&(p=new p(b,x+"enter",y,n,d),p.target=w,p.relatedTarget=v,C=p),v=C,m&&y)t:{for(p=m,b=y,x=0,w=p;w;w=lf(w))x++;for(w=0,C=b;C;C=lf(C))w++;for(;0<x-w;)p=lf(p),x--;for(;0<w-x;)b=lf(b),w--;for(;x--;){if(p===b||b!==null&&p===b.alternate)break t;p=lf(p),b=lf(b)}p=null}else p=null;m!==null&&mL(h,f,m,p,!1),y!==null&&v!==null&&mL(h,v,y,p,!0)}}e:{if(f=u?Rf(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var S=Mie;else if(aL(f))if(u9)S=Vie;else{S=$ie;var P=Lie}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=Fie);if(S&&(S=S(t,u))){c9(h,S,n,d);break e}P&&P(t,f,u),t==="focusout"&&(P=f._wrapperState)&&P.controlled&&f.type==="number"&&GA(f,"number",f.value)}switch(P=u?Rf(u):window,t){case"focusin":(aL(P)||P.contentEditable==="true")&&(If=P,aT=u,Sy=null);break;case"focusout":Sy=aT=If=null;break;case"mousedown":oT=!0;break;case"contextmenu":case"mouseup":case"dragend":oT=!1,dL(h,n,d);break;case"selectionchange":if(zie)break;case"keydown":case"keyup":dL(h,n,d)}var j;if(gk)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else Pf?o9(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(a9&&n.locale!=="ko"&&(Pf||g!=="onCompositionStart"?g==="onCompositionEnd"&&Pf&&(j=i9()):(eu=d,fk="value"in eu?eu.value:eu.textContent,Pf=!0)),P=Sw(u,g),0<P.length&&(g=new nL(g,t,null,n,d),h.push({event:g,listeners:P}),j?g.data=j:(j=l9(n),j!==null&&(g.data=j)))),(j=Iie?kie(t,n):Rie(t,n))&&(u=Sw(u,"onBeforeInput"),0<u.length&&(d=new nL("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=j))}b9(h,e)})}function iv(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sw(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Zy(t,n),a!=null&&r.unshift(iv(t,a,s)),a=Zy(t,e),a!=null&&r.push(iv(t,a,s))),t=t.return}return r}function lf(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function mL(t,e,n,r,s){for(var a=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Zy(n,a),c!=null&&o.unshift(iv(n,c,l))):s||(c=Zy(n,a),c!=null&&o.push(iv(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Kie=/\r\n?/g,Gie=/\u0000|\uFFFD/g;function pL(t){return(typeof t=="string"?t:""+t).replace(Kie,`
`).replace(Gie,"")}function Kb(t,e,n){if(e=pL(e),pL(t)!==e&&n)throw Error(ke(425))}function Ew(){}var lT=null,cT=null;function uT(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dT=typeof setTimeout=="function"?setTimeout:void 0,Yie=typeof clearTimeout=="function"?clearTimeout:void 0,gL=typeof Promise=="function"?Promise:void 0,Qie=typeof queueMicrotask=="function"?queueMicrotask:typeof gL<"u"?function(t){return gL.resolve(null).then(t).catch(Xie)}:dT;function Xie(t){setTimeout(function(){throw t})}function G1(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),tv(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);tv(e)}function hu(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function yL(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Op=Math.random().toString(36).slice(2),To="__reactFiber$"+Op,av="__reactProps$"+Op,Ll="__reactContainer$"+Op,hT="__reactEvents$"+Op,Zie="__reactListeners$"+Op,Jie="__reactHandles$"+Op;function Rd(t){var e=t[To];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ll]||n[To]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=yL(t);t!==null;){if(n=t[To])return n;t=yL(t)}return e}t=n,n=t.parentNode}return null}function kx(t){return t=t[To]||t[Ll],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Rf(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ke(33))}function Jj(t){return t[av]||null}var fT=[],Of=-1;function Hu(t){return{current:t}}function Wn(t){0>Of||(t.current=fT[Of],fT[Of]=null,Of--)}function Dn(t,e){Of++,fT[Of]=t.current,t.current=e}var Tu={},Os=Hu(Tu),yi=Hu(!1),uh=Tu;function Rm(t,e){var n=t.type.contextTypes;if(!n)return Tu;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function vi(t){return t=t.childContextTypes,t!=null}function Aw(){Wn(yi),Wn(Os)}function vL(t,e,n){if(Os.current!==Tu)throw Error(ke(168));Dn(Os,e),Dn(yi,n)}function _9(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ke(108,Lse(t)||"Unknown",s));return sr({},n,r)}function Tw(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Tu,uh=Os.current,Dn(Os,t),Dn(yi,yi.current),!0}function xL(t,e,n){var r=t.stateNode;if(!r)throw Error(ke(169));n?(t=_9(t,e,uh),r.__reactInternalMemoizedMergedChildContext=t,Wn(yi),Wn(Os),Dn(Os,t)):Wn(yi),Dn(yi,n)}var gl=null,eN=!1,Y1=!1;function j9(t){gl===null?gl=[t]:gl.push(t)}function eae(t){eN=!0,j9(t)}function Ku(){if(!Y1&&gl!==null){Y1=!0;var t=0,e=jn;try{var n=gl;for(jn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}gl=null,eN=!1}catch(s){throw gl!==null&&(gl=gl.slice(t+1)),Gz(ck,Ku),s}finally{jn=e,Y1=!1}}return null}var Df=[],Mf=0,Cw=null,Pw=0,Zi=[],Ji=0,dh=null,bl=1,wl="";function Nd(t,e){Df[Mf++]=Pw,Df[Mf++]=Cw,Cw=t,Pw=e}function N9(t,e,n){Zi[Ji++]=bl,Zi[Ji++]=wl,Zi[Ji++]=dh,dh=t;var r=bl;t=wl;var s=32-Ja(r)-1;r&=~(1<<s),n+=1;var a=32-Ja(e)+s;if(30<a){var o=s-s%5;a=(r&(1<<o)-1).toString(32),r>>=o,s-=o,bl=1<<32-Ja(e)+s|n<<s|r,wl=a+t}else bl=1<<a|n<<s|r,wl=t}function vk(t){t.return!==null&&(Nd(t,1),N9(t,1,0))}function xk(t){for(;t===Cw;)Cw=Df[--Mf],Df[Mf]=null,Pw=Df[--Mf],Df[Mf]=null;for(;t===dh;)dh=Zi[--Ji],Zi[Ji]=null,wl=Zi[--Ji],Zi[Ji]=null,bl=Zi[--Ji],Zi[Ji]=null}var Li=null,Ri=null,Yn=!1,Fa=null;function S9(t,e){var n=na(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function bL(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Li=t,Ri=hu(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Li=t,Ri=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=dh!==null?{id:bl,overflow:wl}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=na(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Li=t,Ri=null,!0):!1;default:return!1}}function mT(t){return(t.mode&1)!==0&&(t.flags&128)===0}function pT(t){if(Yn){var e=Ri;if(e){var n=e;if(!bL(t,e)){if(mT(t))throw Error(ke(418));e=hu(n.nextSibling);var r=Li;e&&bL(t,e)?S9(r,n):(t.flags=t.flags&-4097|2,Yn=!1,Li=t)}}else{if(mT(t))throw Error(ke(418));t.flags=t.flags&-4097|2,Yn=!1,Li=t}}}function wL(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Li=t}function Gb(t){if(t!==Li)return!1;if(!Yn)return wL(t),Yn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!uT(t.type,t.memoizedProps)),e&&(e=Ri)){if(mT(t))throw E9(),Error(ke(418));for(;e;)S9(t,e),e=hu(e.nextSibling)}if(wL(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ke(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ri=hu(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ri=null}}else Ri=Li?hu(t.stateNode.nextSibling):null;return!0}function E9(){for(var t=Ri;t;)t=hu(t.nextSibling)}function Om(){Ri=Li=null,Yn=!1}function bk(t){Fa===null?Fa=[t]:Fa.push(t)}var tae=rc.ReactCurrentBatchConfig;function Rg(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ke(309));var r=n.stateNode}if(!r)throw Error(ke(147,t));var s=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(ke(284));if(!n._owner)throw Error(ke(290,t))}return t}function Yb(t,e){throw t=Object.prototype.toString.call(e),Error(ke(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _L(t){var e=t._init;return e(t._payload)}function A9(t){function e(b,x){if(t){var w=b.deletions;w===null?(b.deletions=[x],b.flags|=16):w.push(x)}}function n(b,x){if(!t)return null;for(;x!==null;)e(b,x),x=x.sibling;return null}function r(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function s(b,x){return b=gu(b,x),b.index=0,b.sibling=null,b}function a(b,x,w){return b.index=w,t?(w=b.alternate,w!==null?(w=w.index,w<x?(b.flags|=2,x):w):(b.flags|=2,x)):(b.flags|=1048576,x)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function l(b,x,w,C){return x===null||x.tag!==6?(x=nE(w,b.mode,C),x.return=b,x):(x=s(x,w),x.return=b,x)}function c(b,x,w,C){var S=w.type;return S===Cf?d(b,x,w.props.children,C,w.key):x!==null&&(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ic&&_L(S)===x.type)?(C=s(x,w.props),C.ref=Rg(b,x,w),C.return=b,C):(C=K0(w.type,w.key,w.props,null,b.mode,C),C.ref=Rg(b,x,w),C.return=b,C)}function u(b,x,w,C){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=rE(w,b.mode,C),x.return=b,x):(x=s(x,w.children||[]),x.return=b,x)}function d(b,x,w,C,S){return x===null||x.tag!==7?(x=nh(w,b.mode,C,S),x.return=b,x):(x=s(x,w),x.return=b,x)}function h(b,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=nE(""+x,b.mode,w),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case $b:return w=K0(x.type,x.key,x.props,null,b.mode,w),w.ref=Rg(b,null,x),w.return=b,w;case Tf:return x=rE(x,b.mode,w),x.return=b,x;case Ic:var C=x._init;return h(b,C(x._payload),w)}if(iy(x)||Tg(x))return x=nh(x,b.mode,w,null),x.return=b,x;Yb(b,x)}return null}function f(b,x,w,C){var S=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:l(b,x,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case $b:return w.key===S?c(b,x,w,C):null;case Tf:return w.key===S?u(b,x,w,C):null;case Ic:return S=w._init,f(b,x,S(w._payload),C)}if(iy(w)||Tg(w))return S!==null?null:d(b,x,w,C,null);Yb(b,w)}return null}function m(b,x,w,C,S){if(typeof C=="string"&&C!==""||typeof C=="number")return b=b.get(w)||null,l(x,b,""+C,S);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case $b:return b=b.get(C.key===null?w:C.key)||null,c(x,b,C,S);case Tf:return b=b.get(C.key===null?w:C.key)||null,u(x,b,C,S);case Ic:var P=C._init;return m(b,x,w,P(C._payload),S)}if(iy(C)||Tg(C))return b=b.get(w)||null,d(x,b,C,S,null);Yb(x,C)}return null}function y(b,x,w,C){for(var S=null,P=null,j=x,g=x=0,T=null;j!==null&&g<w.length;g++){j.index>g?(T=j,j=null):T=j.sibling;var E=f(b,j,w[g],C);if(E===null){j===null&&(j=T);break}t&&j&&E.alternate===null&&e(b,j),x=a(E,x,g),P===null?S=E:P.sibling=E,P=E,j=T}if(g===w.length)return n(b,j),Yn&&Nd(b,g),S;if(j===null){for(;g<w.length;g++)j=h(b,w[g],C),j!==null&&(x=a(j,x,g),P===null?S=j:P.sibling=j,P=j);return Yn&&Nd(b,g),S}for(j=r(b,j);g<w.length;g++)T=m(j,b,g,w[g],C),T!==null&&(t&&T.alternate!==null&&j.delete(T.key===null?g:T.key),x=a(T,x,g),P===null?S=T:P.sibling=T,P=T);return t&&j.forEach(function(A){return e(b,A)}),Yn&&Nd(b,g),S}function p(b,x,w,C){var S=Tg(w);if(typeof S!="function")throw Error(ke(150));if(w=S.call(w),w==null)throw Error(ke(151));for(var P=S=null,j=x,g=x=0,T=null,E=w.next();j!==null&&!E.done;g++,E=w.next()){j.index>g?(T=j,j=null):T=j.sibling;var A=f(b,j,E.value,C);if(A===null){j===null&&(j=T);break}t&&j&&A.alternate===null&&e(b,j),x=a(A,x,g),P===null?S=A:P.sibling=A,P=A,j=T}if(E.done)return n(b,j),Yn&&Nd(b,g),S;if(j===null){for(;!E.done;g++,E=w.next())E=h(b,E.value,C),E!==null&&(x=a(E,x,g),P===null?S=E:P.sibling=E,P=E);return Yn&&Nd(b,g),S}for(j=r(b,j);!E.done;g++,E=w.next())E=m(j,b,g,E.value,C),E!==null&&(t&&E.alternate!==null&&j.delete(E.key===null?g:E.key),x=a(E,x,g),P===null?S=E:P.sibling=E,P=E);return t&&j.forEach(function(I){return e(b,I)}),Yn&&Nd(b,g),S}function v(b,x,w,C){if(typeof w=="object"&&w!==null&&w.type===Cf&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case $b:e:{for(var S=w.key,P=x;P!==null;){if(P.key===S){if(S=w.type,S===Cf){if(P.tag===7){n(b,P.sibling),x=s(P,w.props.children),x.return=b,b=x;break e}}else if(P.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ic&&_L(S)===P.type){n(b,P.sibling),x=s(P,w.props),x.ref=Rg(b,P,w),x.return=b,b=x;break e}n(b,P);break}else e(b,P);P=P.sibling}w.type===Cf?(x=nh(w.props.children,b.mode,C,w.key),x.return=b,b=x):(C=K0(w.type,w.key,w.props,null,b.mode,C),C.ref=Rg(b,x,w),C.return=b,b=C)}return o(b);case Tf:e:{for(P=w.key;x!==null;){if(x.key===P)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(b,x.sibling),x=s(x,w.children||[]),x.return=b,b=x;break e}else{n(b,x);break}else e(b,x);x=x.sibling}x=rE(w,b.mode,C),x.return=b,b=x}return o(b);case Ic:return P=w._init,v(b,x,P(w._payload),C)}if(iy(w))return y(b,x,w,C);if(Tg(w))return p(b,x,w,C);Yb(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(b,x.sibling),x=s(x,w),x.return=b,b=x):(n(b,x),x=nE(w,b.mode,C),x.return=b,b=x),o(b)):n(b,x)}return v}var Dm=A9(!0),T9=A9(!1),Iw=Hu(null),kw=null,Lf=null,wk=null;function _k(){wk=Lf=kw=null}function jk(t){var e=Iw.current;Wn(Iw),t._currentValue=e}function gT(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function tm(t,e){kw=t,wk=Lf=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mi=!0),t.firstContext=null)}function fa(t){var e=t._currentValue;if(wk!==t)if(t={context:t,memoizedValue:e,next:null},Lf===null){if(kw===null)throw Error(ke(308));Lf=t,kw.dependencies={lanes:0,firstContext:t}}else Lf=Lf.next=t;return e}var Od=null;function Nk(t){Od===null?Od=[t]:Od.push(t)}function C9(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Nk(e)):(n.next=s.next,s.next=n),e.interleaved=n,$l(t,r)}function $l(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var kc=!1;function Sk(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function P9(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Tl(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fu(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,cn&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,$l(t,n)}return s=r.interleaved,s===null?(e.next=e,Nk(r)):(e.next=s.next,s.next=e),r.interleaved=e,$l(t,n)}function B0(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uk(t,n)}}function jL(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Rw(t,e,n,r){var s=t.updateQueue;kc=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var h=s.baseState;o=0,d=u=c=null,l=a;do{var f=l.lane,m=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,p=l;switch(f=e,m=n,p.tag){case 1:if(y=p.payload,typeof y=="function"){h=y.call(m,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=p.payload,f=typeof y=="function"?y.call(m,h,f):y,f==null)break e;h=sr({},h,f);break e;case 2:kc=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);fh|=o,t.lanes=o,t.memoizedState=h}}function NL(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ke(191,s));s.call(r)}}}var Rx={},Lo=Hu(Rx),ov=Hu(Rx),lv=Hu(Rx);function Dd(t){if(t===Rx)throw Error(ke(174));return t}function Ek(t,e){switch(Dn(lv,e),Dn(ov,t),Dn(Lo,Rx),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:QA(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=QA(e,t)}Wn(Lo),Dn(Lo,e)}function Mm(){Wn(Lo),Wn(ov),Wn(lv)}function I9(t){Dd(lv.current);var e=Dd(Lo.current),n=QA(e,t.type);e!==n&&(Dn(ov,t),Dn(Lo,n))}function Ak(t){ov.current===t&&(Wn(Lo),Wn(ov))}var tr=Hu(0);function Ow(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Q1=[];function Tk(){for(var t=0;t<Q1.length;t++)Q1[t]._workInProgressVersionPrimary=null;Q1.length=0}var U0=rc.ReactCurrentDispatcher,X1=rc.ReactCurrentBatchConfig,hh=0,rr=null,$r=null,Xr=null,Dw=!1,Ey=!1,cv=0,nae=0;function vs(){throw Error(ke(321))}function Ck(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ao(t[n],e[n]))return!1;return!0}function Pk(t,e,n,r,s,a){if(hh=a,rr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,U0.current=t===null||t.memoizedState===null?aae:oae,t=n(r,s),Ey){a=0;do{if(Ey=!1,cv=0,25<=a)throw Error(ke(301));a+=1,Xr=$r=null,e.updateQueue=null,U0.current=lae,t=n(r,s)}while(Ey)}if(U0.current=Mw,e=$r!==null&&$r.next!==null,hh=0,Xr=$r=rr=null,Dw=!1,e)throw Error(ke(300));return t}function Ik(){var t=cv!==0;return cv=0,t}function wo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xr===null?rr.memoizedState=Xr=t:Xr=Xr.next=t,Xr}function ma(){if($r===null){var t=rr.alternate;t=t!==null?t.memoizedState:null}else t=$r.next;var e=Xr===null?rr.memoizedState:Xr.next;if(e!==null)Xr=e,$r=t;else{if(t===null)throw Error(ke(310));$r=t,t={memoizedState:$r.memoizedState,baseState:$r.baseState,baseQueue:$r.baseQueue,queue:$r.queue,next:null},Xr===null?rr.memoizedState=Xr=t:Xr=Xr.next=t}return Xr}function uv(t,e){return typeof e=="function"?e(t):e}function Z1(t){var e=ma(),n=e.queue;if(n===null)throw Error(ke(311));n.lastRenderedReducer=t;var r=$r,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((hh&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,rr.lanes|=d,fh|=d}u=u.next}while(u!==null&&u!==a);c===null?o=r:c.next=l,ao(r,e.memoizedState)||(mi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do a=s.lane,rr.lanes|=a,fh|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function J1(t){var e=ma(),n=e.queue;if(n===null)throw Error(ke(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);ao(a,e.memoizedState)||(mi=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function k9(){}function R9(t,e){var n=rr,r=ma(),s=e(),a=!ao(r.memoizedState,s);if(a&&(r.memoizedState=s,mi=!0),r=r.queue,kk(M9.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Xr!==null&&Xr.memoizedState.tag&1){if(n.flags|=2048,dv(9,D9.bind(null,n,r,s,e),void 0,null),Jr===null)throw Error(ke(349));hh&30||O9(n,e,s)}return s}function O9(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=rr.updateQueue,e===null?(e={lastEffect:null,stores:null},rr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function D9(t,e,n,r){e.value=n,e.getSnapshot=r,L9(e)&&$9(t)}function M9(t,e,n){return n(function(){L9(e)&&$9(t)})}function L9(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ao(t,n)}catch{return!0}}function $9(t){var e=$l(t,1);e!==null&&eo(e,t,1,-1)}function SL(t){var e=wo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:uv,lastRenderedState:t},e.queue=t,t=t.dispatch=iae.bind(null,rr,t),[e.memoizedState,t]}function dv(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=rr.updateQueue,e===null?(e={lastEffect:null,stores:null},rr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function F9(){return ma().memoizedState}function z0(t,e,n,r){var s=wo();rr.flags|=t,s.memoizedState=dv(1|e,n,void 0,r===void 0?null:r)}function tN(t,e,n,r){var s=ma();r=r===void 0?null:r;var a=void 0;if($r!==null){var o=$r.memoizedState;if(a=o.destroy,r!==null&&Ck(r,o.deps)){s.memoizedState=dv(e,n,a,r);return}}rr.flags|=t,s.memoizedState=dv(1|e,n,a,r)}function EL(t,e){return z0(8390656,8,t,e)}function kk(t,e){return tN(2048,8,t,e)}function V9(t,e){return tN(4,2,t,e)}function B9(t,e){return tN(4,4,t,e)}function U9(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function z9(t,e,n){return n=n!=null?n.concat([t]):null,tN(4,4,U9.bind(null,e,t),n)}function Rk(){}function q9(t,e){var n=ma();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ck(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function W9(t,e){var n=ma();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ck(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function H9(t,e,n){return hh&21?(ao(n,e)||(n=Xz(),rr.lanes|=n,fh|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mi=!0),t.memoizedState=n)}function rae(t,e){var n=jn;jn=n!==0&&4>n?n:4,t(!0);var r=X1.transition;X1.transition={};try{t(!1),e()}finally{jn=n,X1.transition=r}}function K9(){return ma().memoizedState}function sae(t,e,n){var r=pu(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},G9(t))Y9(e,n);else if(n=C9(t,e,n,r),n!==null){var s=Ys();eo(n,t,r,s),Q9(n,e,r)}}function iae(t,e,n){var r=pu(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(G9(t))Y9(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,n);if(s.hasEagerState=!0,s.eagerState=l,ao(l,o)){var c=e.interleaved;c===null?(s.next=s,Nk(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=C9(t,e,s,r),n!==null&&(s=Ys(),eo(n,t,r,s),Q9(n,e,r))}}function G9(t){var e=t.alternate;return t===rr||e!==null&&e===rr}function Y9(t,e){Ey=Dw=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Q9(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uk(t,n)}}var Mw={readContext:fa,useCallback:vs,useContext:vs,useEffect:vs,useImperativeHandle:vs,useInsertionEffect:vs,useLayoutEffect:vs,useMemo:vs,useReducer:vs,useRef:vs,useState:vs,useDebugValue:vs,useDeferredValue:vs,useTransition:vs,useMutableSource:vs,useSyncExternalStore:vs,useId:vs,unstable_isNewReconciler:!1},aae={readContext:fa,useCallback:function(t,e){return wo().memoizedState=[t,e===void 0?null:e],t},useContext:fa,useEffect:EL,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,z0(4194308,4,U9.bind(null,e,t),n)},useLayoutEffect:function(t,e){return z0(4194308,4,t,e)},useInsertionEffect:function(t,e){return z0(4,2,t,e)},useMemo:function(t,e){var n=wo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=wo();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=sae.bind(null,rr,t),[r.memoizedState,t]},useRef:function(t){var e=wo();return t={current:t},e.memoizedState=t},useState:SL,useDebugValue:Rk,useDeferredValue:function(t){return wo().memoizedState=t},useTransition:function(){var t=SL(!1),e=t[0];return t=rae.bind(null,t[1]),wo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=rr,s=wo();if(Yn){if(n===void 0)throw Error(ke(407));n=n()}else{if(n=e(),Jr===null)throw Error(ke(349));hh&30||O9(r,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,EL(M9.bind(null,r,a,t),[t]),r.flags|=2048,dv(9,D9.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=wo(),e=Jr.identifierPrefix;if(Yn){var n=wl,r=bl;n=(r&~(1<<32-Ja(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=cv++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=nae++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},oae={readContext:fa,useCallback:q9,useContext:fa,useEffect:kk,useImperativeHandle:z9,useInsertionEffect:V9,useLayoutEffect:B9,useMemo:W9,useReducer:Z1,useRef:F9,useState:function(){return Z1(uv)},useDebugValue:Rk,useDeferredValue:function(t){var e=ma();return H9(e,$r.memoizedState,t)},useTransition:function(){var t=Z1(uv)[0],e=ma().memoizedState;return[t,e]},useMutableSource:k9,useSyncExternalStore:R9,useId:K9,unstable_isNewReconciler:!1},lae={readContext:fa,useCallback:q9,useContext:fa,useEffect:kk,useImperativeHandle:z9,useInsertionEffect:V9,useLayoutEffect:B9,useMemo:W9,useReducer:J1,useRef:F9,useState:function(){return J1(uv)},useDebugValue:Rk,useDeferredValue:function(t){var e=ma();return $r===null?e.memoizedState=t:H9(e,$r.memoizedState,t)},useTransition:function(){var t=J1(uv)[0],e=ma().memoizedState;return[t,e]},useMutableSource:k9,useSyncExternalStore:R9,useId:K9,unstable_isNewReconciler:!1};function Ra(t,e){if(t&&t.defaultProps){e=sr({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function yT(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:sr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var nN={isMounted:function(t){return(t=t._reactInternals)?Uh(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ys(),s=pu(t),a=Tl(r,s);a.payload=e,n!=null&&(a.callback=n),e=fu(t,a,s),e!==null&&(eo(e,t,s,r),B0(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ys(),s=pu(t),a=Tl(r,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=fu(t,a,s),e!==null&&(eo(e,t,s,r),B0(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ys(),r=pu(t),s=Tl(n,r);s.tag=2,e!=null&&(s.callback=e),e=fu(t,s,r),e!==null&&(eo(e,t,r,n),B0(e,t,r))}};function AL(t,e,n,r,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!rv(n,r)||!rv(s,a):!0}function X9(t,e,n){var r=!1,s=Tu,a=e.contextType;return typeof a=="object"&&a!==null?a=fa(a):(s=vi(e)?uh:Os.current,r=e.contextTypes,a=(r=r!=null)?Rm(t,s):Tu),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nN,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function TL(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&nN.enqueueReplaceState(e,e.state,null)}function vT(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Sk(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=fa(a):(a=vi(e)?uh:Os.current,s.context=Rm(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(yT(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&nN.enqueueReplaceState(s,s.state,null),Rw(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Lm(t,e){try{var n="",r=e;do n+=Mse(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function eE(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function xT(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var cae=typeof WeakMap=="function"?WeakMap:Map;function Z9(t,e,n){n=Tl(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$w||($w=!0,CT=r),xT(t,e)},n}function J9(t,e,n){n=Tl(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){xT(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){xT(t,e),typeof r!="function"&&(mu===null?mu=new Set([this]):mu.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function CL(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new cae;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=jae.bind(null,t,e,n),e.then(t,t))}function PL(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function IL(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Tl(-1,1),e.tag=2,fu(n,e,1))),n.lanes|=1),t)}var uae=rc.ReactCurrentOwner,mi=!1;function Bs(t,e,n,r){e.child=t===null?T9(e,null,n,r):Dm(e,t.child,n,r)}function kL(t,e,n,r,s){n=n.render;var a=e.ref;return tm(e,s),r=Pk(t,e,n,r,a,s),n=Ik(),t!==null&&!mi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Fl(t,e,s)):(Yn&&n&&vk(e),e.flags|=1,Bs(t,e,r,s),e.child)}function RL(t,e,n,r,s){if(t===null){var a=n.type;return typeof a=="function"&&!Bk(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,eq(t,e,a,r,s)):(t=K0(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:rv,n(o,r)&&t.ref===e.ref)return Fl(t,e,s)}return e.flags|=1,t=gu(a,r),t.ref=e.ref,t.return=e,e.child=t}function eq(t,e,n,r,s){if(t!==null){var a=t.memoizedProps;if(rv(a,r)&&t.ref===e.ref)if(mi=!1,e.pendingProps=r=a,(t.lanes&s)!==0)t.flags&131072&&(mi=!0);else return e.lanes=t.lanes,Fl(t,e,s)}return bT(t,e,n,r,s)}function tq(t,e,n){var r=e.pendingProps,s=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dn(Ff,Ai),Ai|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Dn(Ff,Ai),Ai|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Dn(Ff,Ai),Ai|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,Dn(Ff,Ai),Ai|=r;return Bs(t,e,s,n),e.child}function nq(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function bT(t,e,n,r,s){var a=vi(n)?uh:Os.current;return a=Rm(e,a),tm(e,s),n=Pk(t,e,n,r,a,s),r=Ik(),t!==null&&!mi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Fl(t,e,s)):(Yn&&r&&vk(e),e.flags|=1,Bs(t,e,n,s),e.child)}function OL(t,e,n,r,s){if(vi(n)){var a=!0;Tw(e)}else a=!1;if(tm(e,s),e.stateNode===null)q0(t,e),X9(e,n,r),vT(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=fa(u):(u=vi(n)?uh:Os.current,u=Rm(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&TL(e,o,r,u),kc=!1;var f=e.memoizedState;o.state=f,Rw(e,r,o,s),c=e.memoizedState,l!==r||f!==c||yi.current||kc?(typeof d=="function"&&(yT(e,n,d,r),c=e.memoizedState),(l=kc||AL(e,n,l,r,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,P9(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Ra(e.type,l),o.props=u,h=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=fa(c):(c=vi(n)?uh:Os.current,c=Rm(e,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&TL(e,o,r,c),kc=!1,f=e.memoizedState,o.state=f,Rw(e,r,o,s);var y=e.memoizedState;l!==h||f!==y||yi.current||kc?(typeof m=="function"&&(yT(e,n,m,r),y=e.memoizedState),(u=kc||AL(e,n,u,r,f,y,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return wT(t,e,n,r,a,s)}function wT(t,e,n,r,s,a){nq(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&xL(e,n,!1),Fl(t,e,a);r=e.stateNode,uae.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Dm(e,t.child,null,a),e.child=Dm(e,null,l,a)):Bs(t,e,l,a),e.memoizedState=r.state,s&&xL(e,n,!0),e.child}function rq(t){var e=t.stateNode;e.pendingContext?vL(t,e.pendingContext,e.pendingContext!==e.context):e.context&&vL(t,e.context,!1),Ek(t,e.containerInfo)}function DL(t,e,n,r,s){return Om(),bk(s),e.flags|=256,Bs(t,e,n,r),e.child}var _T={dehydrated:null,treeContext:null,retryLane:0};function jT(t){return{baseLanes:t,cachePool:null,transitions:null}}function sq(t,e,n){var r=e.pendingProps,s=tr.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Dn(tr,s&1),t===null)return pT(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=iN(o,r,0,null),t=nh(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=jT(n),e.memoizedState=_T,t):Ok(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return dae(t,e,o,r,l,s,n);if(a){a=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=gu(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=gu(l,a):(a=nh(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?jT(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=_T,r}return a=t.child,t=a.sibling,r=gu(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ok(t,e){return e=iN({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qb(t,e,n,r){return r!==null&&bk(r),Dm(e,t.child,null,n),t=Ok(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function dae(t,e,n,r,s,a,o){if(n)return e.flags&256?(e.flags&=-257,r=eE(Error(ke(422))),Qb(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,s=e.mode,r=iN({mode:"visible",children:r.children},s,0,null),a=nh(a,s,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Dm(e,t.child,null,o),e.child.memoizedState=jT(o),e.memoizedState=_T,a);if(!(e.mode&1))return Qb(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(ke(419)),r=eE(a,r,void 0),Qb(t,e,o,r)}if(l=(o&t.childLanes)!==0,mi||l){if(r=Jr,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,$l(t,s),eo(r,t,s,-1))}return Vk(),r=eE(Error(ke(421))),Qb(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Nae.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,Ri=hu(s.nextSibling),Li=e,Yn=!0,Fa=null,t!==null&&(Zi[Ji++]=bl,Zi[Ji++]=wl,Zi[Ji++]=dh,bl=t.id,wl=t.overflow,dh=e),e=Ok(e,r.children),e.flags|=4096,e)}function ML(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),gT(t.return,e,n)}function tE(t,e,n,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function iq(t,e,n){var r=e.pendingProps,s=r.revealOrder,a=r.tail;if(Bs(t,e,r.children,n),r=tr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ML(t,n,e);else if(t.tag===19)ML(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Dn(tr,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ow(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),tE(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ow(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}tE(e,!0,n,null,a);break;case"together":tE(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function q0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Fl(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),fh|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ke(153));if(e.child!==null){for(t=e.child,n=gu(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gu(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function hae(t,e,n){switch(e.tag){case 3:rq(e),Om();break;case 5:I9(e);break;case 1:vi(e.type)&&Tw(e);break;case 4:Ek(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Dn(Iw,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Dn(tr,tr.current&1),e.flags|=128,null):n&e.child.childLanes?sq(t,e,n):(Dn(tr,tr.current&1),t=Fl(t,e,n),t!==null?t.sibling:null);Dn(tr,tr.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return iq(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Dn(tr,tr.current),r)break;return null;case 22:case 23:return e.lanes=0,tq(t,e,n)}return Fl(t,e,n)}var aq,NT,oq,lq;aq=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};NT=function(){};oq=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Dd(Lo.current);var a=null;switch(n){case"input":s=HA(t,s),r=HA(t,r),a=[];break;case"select":s=sr({},s,{value:void 0}),r=sr({},r,{value:void 0}),a=[];break;case"textarea":s=YA(t,s),r=YA(t,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ew)}XA(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Qy.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Qy.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Bn("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};lq=function(t,e,n,r){n!==r&&(e.flags|=4)};function Og(t,e){if(!Yn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function xs(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function fae(t,e,n){var r=e.pendingProps;switch(xk(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xs(e),null;case 1:return vi(e.type)&&Aw(),xs(e),null;case 3:return r=e.stateNode,Mm(),Wn(yi),Wn(Os),Tk(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Gb(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fa!==null&&(kT(Fa),Fa=null))),NT(t,e),xs(e),null;case 5:Ak(e);var s=Dd(lv.current);if(n=e.type,t!==null&&e.stateNode!=null)oq(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ke(166));return xs(e),null}if(t=Dd(Lo.current),Gb(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[To]=e,r[av]=a,t=(e.mode&1)!==0,n){case"dialog":Bn("cancel",r),Bn("close",r);break;case"iframe":case"object":case"embed":Bn("load",r);break;case"video":case"audio":for(s=0;s<oy.length;s++)Bn(oy[s],r);break;case"source":Bn("error",r);break;case"img":case"image":case"link":Bn("error",r),Bn("load",r);break;case"details":Bn("toggle",r);break;case"input":WM(r,a),Bn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Bn("invalid",r);break;case"textarea":KM(r,a),Bn("invalid",r)}XA(n,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&Kb(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Kb(r.textContent,l,t),s=["children",""+l]):Qy.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Bn("scroll",r)}switch(n){case"input":Fb(r),HM(r,a,!0);break;case"textarea":Fb(r),GM(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Ew)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Mz(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[To]=e,t[av]=r,aq(t,e,!1,!1),e.stateNode=t;e:{switch(o=ZA(n,r),n){case"dialog":Bn("cancel",t),Bn("close",t),s=r;break;case"iframe":case"object":case"embed":Bn("load",t),s=r;break;case"video":case"audio":for(s=0;s<oy.length;s++)Bn(oy[s],t);s=r;break;case"source":Bn("error",t),s=r;break;case"img":case"image":case"link":Bn("error",t),Bn("load",t),s=r;break;case"details":Bn("toggle",t),s=r;break;case"input":WM(t,r),s=HA(t,r),Bn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=sr({},r,{value:void 0}),Bn("invalid",t);break;case"textarea":KM(t,r),s=YA(t,r),Bn("invalid",t);break;default:s=r}XA(n,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?Fz(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Lz(t,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Xy(t,c):typeof c=="number"&&Xy(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Qy.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Bn("scroll",t):c!=null&&sk(t,a,c,o))}switch(n){case"input":Fb(t),HM(t,r,!1);break;case"textarea":Fb(t),GM(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Au(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Xf(t,!!r.multiple,a,!1):r.defaultValue!=null&&Xf(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ew)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xs(e),null;case 6:if(t&&e.stateNode!=null)lq(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ke(166));if(n=Dd(lv.current),Dd(Lo.current),Gb(e)){if(r=e.stateNode,n=e.memoizedProps,r[To]=e,(a=r.nodeValue!==n)&&(t=Li,t!==null))switch(t.tag){case 3:Kb(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Kb(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[To]=e,e.stateNode=r}return xs(e),null;case 13:if(Wn(tr),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Yn&&Ri!==null&&e.mode&1&&!(e.flags&128))E9(),Om(),e.flags|=98560,a=!1;else if(a=Gb(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(ke(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ke(317));a[To]=e}else Om(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xs(e),a=!1}else Fa!==null&&(kT(Fa),Fa=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||tr.current&1?Br===0&&(Br=3):Vk())),e.updateQueue!==null&&(e.flags|=4),xs(e),null);case 4:return Mm(),NT(t,e),t===null&&sv(e.stateNode.containerInfo),xs(e),null;case 10:return jk(e.type._context),xs(e),null;case 17:return vi(e.type)&&Aw(),xs(e),null;case 19:if(Wn(tr),a=e.memoizedState,a===null)return xs(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)Og(a,!1);else{if(Br!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ow(t),o!==null){for(e.flags|=128,Og(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Dn(tr,tr.current&1|2),e.child}t=t.sibling}a.tail!==null&&vr()>$m&&(e.flags|=128,r=!0,Og(a,!1),e.lanes=4194304)}else{if(!r)if(t=Ow(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Og(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Yn)return xs(e),null}else 2*vr()-a.renderingStartTime>$m&&n!==1073741824&&(e.flags|=128,r=!0,Og(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=vr(),e.sibling=null,n=tr.current,Dn(tr,r?n&1|2:n&1),e):(xs(e),null);case 22:case 23:return Fk(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ai&1073741824&&(xs(e),e.subtreeFlags&6&&(e.flags|=8192)):xs(e),null;case 24:return null;case 25:return null}throw Error(ke(156,e.tag))}function mae(t,e){switch(xk(e),e.tag){case 1:return vi(e.type)&&Aw(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Mm(),Wn(yi),Wn(Os),Tk(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ak(e),null;case 13:if(Wn(tr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ke(340));Om()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Wn(tr),null;case 4:return Mm(),null;case 10:return jk(e.type._context),null;case 22:case 23:return Fk(),null;case 24:return null;default:return null}}var Xb=!1,Es=!1,pae=typeof WeakSet=="function"?WeakSet:Set,et=null;function $f(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){cr(t,e,r)}else n.current=null}function ST(t,e,n){try{n()}catch(r){cr(t,e,r)}}var LL=!1;function gae(t,e){if(lT=jw,t=f9(),yk(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==a||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++u===s&&(l=o),f===a&&++d===r&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(cT={focusedElem:t,selectionRange:n},jw=!1,et=e;et!==null;)if(e=et,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,et=t;else for(;et!==null;){e=et;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var p=y.memoizedProps,v=y.memoizedState,b=e.stateNode,x=b.getSnapshotBeforeUpdate(e.elementType===e.type?p:Ra(e.type,p),v);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ke(163))}}catch(C){cr(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,et=t;break}et=e.return}return y=LL,LL=!1,y}function Ay(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&ST(e,n,a)}s=s.next}while(s!==r)}}function rN(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ET(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function cq(t){var e=t.alternate;e!==null&&(t.alternate=null,cq(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[To],delete e[av],delete e[hT],delete e[Zie],delete e[Jie])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function uq(t){return t.tag===5||t.tag===3||t.tag===4}function $L(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||uq(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function AT(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ew));else if(r!==4&&(t=t.child,t!==null))for(AT(t,e,n),t=t.sibling;t!==null;)AT(t,e,n),t=t.sibling}function TT(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(TT(t,e,n),t=t.sibling;t!==null;)TT(t,e,n),t=t.sibling}var os=null,Ma=!1;function xc(t,e,n){for(n=n.child;n!==null;)dq(t,e,n),n=n.sibling}function dq(t,e,n){if(Mo&&typeof Mo.onCommitFiberUnmount=="function")try{Mo.onCommitFiberUnmount(Yj,n)}catch{}switch(n.tag){case 5:Es||$f(n,e);case 6:var r=os,s=Ma;os=null,xc(t,e,n),os=r,Ma=s,os!==null&&(Ma?(t=os,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):os.removeChild(n.stateNode));break;case 18:os!==null&&(Ma?(t=os,n=n.stateNode,t.nodeType===8?G1(t.parentNode,n):t.nodeType===1&&G1(t,n),tv(t)):G1(os,n.stateNode));break;case 4:r=os,s=Ma,os=n.stateNode.containerInfo,Ma=!0,xc(t,e,n),os=r,Ma=s;break;case 0:case 11:case 14:case 15:if(!Es&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&ST(n,e,o),s=s.next}while(s!==r)}xc(t,e,n);break;case 1:if(!Es&&($f(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){cr(n,e,l)}xc(t,e,n);break;case 21:xc(t,e,n);break;case 22:n.mode&1?(Es=(r=Es)||n.memoizedState!==null,xc(t,e,n),Es=r):xc(t,e,n);break;default:xc(t,e,n)}}function FL(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new pae),e.forEach(function(r){var s=Sae.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Aa(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:os=l.stateNode,Ma=!1;break e;case 3:os=l.stateNode.containerInfo,Ma=!0;break e;case 4:os=l.stateNode.containerInfo,Ma=!0;break e}l=l.return}if(os===null)throw Error(ke(160));dq(a,o,s),os=null,Ma=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){cr(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hq(e,t),e=e.sibling}function hq(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Aa(e,t),bo(t),r&4){try{Ay(3,t,t.return),rN(3,t)}catch(p){cr(t,t.return,p)}try{Ay(5,t,t.return)}catch(p){cr(t,t.return,p)}}break;case 1:Aa(e,t),bo(t),r&512&&n!==null&&$f(n,n.return);break;case 5:if(Aa(e,t),bo(t),r&512&&n!==null&&$f(n,n.return),t.flags&32){var s=t.stateNode;try{Xy(s,"")}catch(p){cr(t,t.return,p)}}if(r&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&Oz(s,a),ZA(l,o);var u=ZA(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?Fz(s,h):d==="dangerouslySetInnerHTML"?Lz(s,h):d==="children"?Xy(s,h):sk(s,d,h,u)}switch(l){case"input":KA(s,a);break;case"textarea":Dz(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?Xf(s,!!a.multiple,m,!1):f!==!!a.multiple&&(a.defaultValue!=null?Xf(s,!!a.multiple,a.defaultValue,!0):Xf(s,!!a.multiple,a.multiple?[]:"",!1))}s[av]=a}catch(p){cr(t,t.return,p)}}break;case 6:if(Aa(e,t),bo(t),r&4){if(t.stateNode===null)throw Error(ke(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(p){cr(t,t.return,p)}}break;case 3:if(Aa(e,t),bo(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{tv(e.containerInfo)}catch(p){cr(t,t.return,p)}break;case 4:Aa(e,t),bo(t);break;case 13:Aa(e,t),bo(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Lk=vr())),r&4&&FL(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Es=(u=Es)||d,Aa(e,t),Es=u):Aa(e,t),bo(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(et=t,d=t.child;d!==null;){for(h=et=d;et!==null;){switch(f=et,m=f.child,f.tag){case 0:case 11:case 14:case 15:Ay(4,f,f.return);break;case 1:$f(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(p){cr(r,n,p)}}break;case 5:$f(f,f.return);break;case 22:if(f.memoizedState!==null){BL(h);continue}}m!==null?(m.return=f,et=m):BL(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=$z("display",o))}catch(p){cr(t,t.return,p)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(p){cr(t,t.return,p)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Aa(e,t),bo(t),r&4&&FL(t);break;case 21:break;default:Aa(e,t),bo(t)}}function bo(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(uq(n)){var r=n;break e}n=n.return}throw Error(ke(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Xy(s,""),r.flags&=-33);var a=$L(t);TT(t,a,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=$L(t);AT(t,l,o);break;default:throw Error(ke(161))}}catch(c){cr(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function yae(t,e,n){et=t,fq(t)}function fq(t,e,n){for(var r=(t.mode&1)!==0;et!==null;){var s=et,a=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Xb;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Es;l=Xb;var u=Es;if(Xb=o,(Es=c)&&!u)for(et=s;et!==null;)o=et,c=o.child,o.tag===22&&o.memoizedState!==null?UL(s):c!==null?(c.return=o,et=c):UL(s);for(;a!==null;)et=a,fq(a),a=a.sibling;et=s,Xb=l,Es=u}VL(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,et=a):VL(t)}}function VL(t){for(;et!==null;){var e=et;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Es||rN(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Es)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ra(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&NL(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}NL(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&tv(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ke(163))}Es||e.flags&512&&ET(e)}catch(f){cr(e,e.return,f)}}if(e===t){et=null;break}if(n=e.sibling,n!==null){n.return=e.return,et=n;break}et=e.return}}function BL(t){for(;et!==null;){var e=et;if(e===t){et=null;break}var n=e.sibling;if(n!==null){n.return=e.return,et=n;break}et=e.return}}function UL(t){for(;et!==null;){var e=et;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rN(4,e)}catch(c){cr(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){cr(e,s,c)}}var a=e.return;try{ET(e)}catch(c){cr(e,a,c)}break;case 5:var o=e.return;try{ET(e)}catch(c){cr(e,o,c)}}}catch(c){cr(e,e.return,c)}if(e===t){et=null;break}var l=e.sibling;if(l!==null){l.return=e.return,et=l;break}et=e.return}}var vae=Math.ceil,Lw=rc.ReactCurrentDispatcher,Dk=rc.ReactCurrentOwner,ia=rc.ReactCurrentBatchConfig,cn=0,Jr=null,Tr=null,hs=0,Ai=0,Ff=Hu(0),Br=0,hv=null,fh=0,sN=0,Mk=0,Ty=null,ci=null,Lk=0,$m=1/0,ml=null,$w=!1,CT=null,mu=null,Zb=!1,tu=null,Fw=0,Cy=0,PT=null,W0=-1,H0=0;function Ys(){return cn&6?vr():W0!==-1?W0:W0=vr()}function pu(t){return t.mode&1?cn&2&&hs!==0?hs&-hs:tae.transition!==null?(H0===0&&(H0=Xz()),H0):(t=jn,t!==0||(t=window.event,t=t===void 0?16:s9(t.type)),t):1}function eo(t,e,n,r){if(50<Cy)throw Cy=0,PT=null,Error(ke(185));Px(t,n,r),(!(cn&2)||t!==Jr)&&(t===Jr&&(!(cn&2)&&(sN|=n),Br===4&&Lc(t,hs)),xi(t,r),n===1&&cn===0&&!(e.mode&1)&&($m=vr()+500,eN&&Ku()))}function xi(t,e){var n=t.callbackNode;tie(t,e);var r=_w(t,t===Jr?hs:0);if(r===0)n!==null&&XM(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&XM(n),e===1)t.tag===0?eae(zL.bind(null,t)):j9(zL.bind(null,t)),Qie(function(){!(cn&6)&&Ku()}),n=null;else{switch(Zz(r)){case 1:n=ck;break;case 4:n=Yz;break;case 16:n=ww;break;case 536870912:n=Qz;break;default:n=ww}n=wq(n,mq.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function mq(t,e){if(W0=-1,H0=0,cn&6)throw Error(ke(327));var n=t.callbackNode;if(nm()&&t.callbackNode!==n)return null;var r=_w(t,t===Jr?hs:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Vw(t,r);else{e=r;var s=cn;cn|=2;var a=gq();(Jr!==t||hs!==e)&&(ml=null,$m=vr()+500,th(t,e));do try{wae();break}catch(l){pq(t,l)}while(!0);_k(),Lw.current=a,cn=s,Tr!==null?e=0:(Jr=null,hs=0,e=Br)}if(e!==0){if(e===2&&(s=rT(t),s!==0&&(r=s,e=IT(t,s))),e===1)throw n=hv,th(t,0),Lc(t,r),xi(t,vr()),n;if(e===6)Lc(t,r);else{if(s=t.current.alternate,!(r&30)&&!xae(s)&&(e=Vw(t,r),e===2&&(a=rT(t),a!==0&&(r=a,e=IT(t,a))),e===1))throw n=hv,th(t,0),Lc(t,r),xi(t,vr()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ke(345));case 2:Sd(t,ci,ml);break;case 3:if(Lc(t,r),(r&130023424)===r&&(e=Lk+500-vr(),10<e)){if(_w(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ys(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=dT(Sd.bind(null,t,ci,ml),e);break}Sd(t,ci,ml);break;case 4:if(Lc(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ja(r);a=1<<o,o=e[o],o>s&&(s=o),r&=~a}if(r=s,r=vr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vae(r/1960))-r,10<r){t.timeoutHandle=dT(Sd.bind(null,t,ci,ml),r);break}Sd(t,ci,ml);break;case 5:Sd(t,ci,ml);break;default:throw Error(ke(329))}}}return xi(t,vr()),t.callbackNode===n?mq.bind(null,t):null}function IT(t,e){var n=Ty;return t.current.memoizedState.isDehydrated&&(th(t,e).flags|=256),t=Vw(t,e),t!==2&&(e=ci,ci=n,e!==null&&kT(e)),t}function kT(t){ci===null?ci=t:ci.push.apply(ci,t)}function xae(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!ao(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Lc(t,e){for(e&=~Mk,e&=~sN,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ja(e),r=1<<n;t[n]=-1,e&=~r}}function zL(t){if(cn&6)throw Error(ke(327));nm();var e=_w(t,0);if(!(e&1))return xi(t,vr()),null;var n=Vw(t,e);if(t.tag!==0&&n===2){var r=rT(t);r!==0&&(e=r,n=IT(t,r))}if(n===1)throw n=hv,th(t,0),Lc(t,e),xi(t,vr()),n;if(n===6)throw Error(ke(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Sd(t,ci,ml),xi(t,vr()),null}function $k(t,e){var n=cn;cn|=1;try{return t(e)}finally{cn=n,cn===0&&($m=vr()+500,eN&&Ku())}}function mh(t){tu!==null&&tu.tag===0&&!(cn&6)&&nm();var e=cn;cn|=1;var n=ia.transition,r=jn;try{if(ia.transition=null,jn=1,t)return t()}finally{jn=r,ia.transition=n,cn=e,!(cn&6)&&Ku()}}function Fk(){Ai=Ff.current,Wn(Ff)}function th(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Yie(n)),Tr!==null)for(n=Tr.return;n!==null;){var r=n;switch(xk(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Aw();break;case 3:Mm(),Wn(yi),Wn(Os),Tk();break;case 5:Ak(r);break;case 4:Mm();break;case 13:Wn(tr);break;case 19:Wn(tr);break;case 10:jk(r.type._context);break;case 22:case 23:Fk()}n=n.return}if(Jr=t,Tr=t=gu(t.current,null),hs=Ai=e,Br=0,hv=null,Mk=sN=fh=0,ci=Ty=null,Od!==null){for(e=0;e<Od.length;e++)if(n=Od[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=s,r.next=o}n.pending=r}Od=null}return t}function pq(t,e){do{var n=Tr;try{if(_k(),U0.current=Mw,Dw){for(var r=rr.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Dw=!1}if(hh=0,Xr=$r=rr=null,Ey=!1,cv=0,Dk.current=null,n===null||n.return===null){Br=1,hv=e,Tr=null;break}e:{var a=t,o=n.return,l=n,c=e;if(e=hs,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=PL(o);if(m!==null){m.flags&=-257,IL(m,o,l,a,e),m.mode&1&&CL(a,u,e),e=m,c=u;var y=e.updateQueue;if(y===null){var p=new Set;p.add(c),e.updateQueue=p}else y.add(c);break e}else{if(!(e&1)){CL(a,u,e),Vk();break e}c=Error(ke(426))}}else if(Yn&&l.mode&1){var v=PL(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),IL(v,o,l,a,e),bk(Lm(c,l));break e}}a=c=Lm(c,l),Br!==4&&(Br=2),Ty===null?Ty=[a]:Ty.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var b=Z9(a,c,e);jL(a,b);break e;case 1:l=c;var x=a.type,w=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(mu===null||!mu.has(w)))){a.flags|=65536,e&=-e,a.lanes|=e;var C=J9(a,l,e);jL(a,C);break e}}a=a.return}while(a!==null)}vq(n)}catch(S){e=S,Tr===n&&n!==null&&(Tr=n=n.return);continue}break}while(!0)}function gq(){var t=Lw.current;return Lw.current=Mw,t===null?Mw:t}function Vk(){(Br===0||Br===3||Br===2)&&(Br=4),Jr===null||!(fh&268435455)&&!(sN&268435455)||Lc(Jr,hs)}function Vw(t,e){var n=cn;cn|=2;var r=gq();(Jr!==t||hs!==e)&&(ml=null,th(t,e));do try{bae();break}catch(s){pq(t,s)}while(!0);if(_k(),cn=n,Lw.current=r,Tr!==null)throw Error(ke(261));return Jr=null,hs=0,Br}function bae(){for(;Tr!==null;)yq(Tr)}function wae(){for(;Tr!==null&&!Hse();)yq(Tr)}function yq(t){var e=bq(t.alternate,t,Ai);t.memoizedProps=t.pendingProps,e===null?vq(t):Tr=e,Dk.current=null}function vq(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=mae(n,e),n!==null){n.flags&=32767,Tr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Br=6,Tr=null;return}}else if(n=fae(n,e,Ai),n!==null){Tr=n;return}if(e=e.sibling,e!==null){Tr=e;return}Tr=e=t}while(e!==null);Br===0&&(Br=5)}function Sd(t,e,n){var r=jn,s=ia.transition;try{ia.transition=null,jn=1,_ae(t,e,n,r)}finally{ia.transition=s,jn=r}return null}function _ae(t,e,n,r){do nm();while(tu!==null);if(cn&6)throw Error(ke(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ke(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(nie(t,a),t===Jr&&(Tr=Jr=null,hs=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zb||(Zb=!0,wq(ww,function(){return nm(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=ia.transition,ia.transition=null;var o=jn;jn=1;var l=cn;cn|=4,Dk.current=null,gae(t,n),hq(n,t),Uie(cT),jw=!!lT,cT=lT=null,t.current=n,yae(n),Kse(),cn=l,jn=o,ia.transition=a}else t.current=n;if(Zb&&(Zb=!1,tu=t,Fw=s),a=t.pendingLanes,a===0&&(mu=null),Qse(n.stateNode),xi(t,vr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if($w)throw $w=!1,t=CT,CT=null,t;return Fw&1&&t.tag!==0&&nm(),a=t.pendingLanes,a&1?t===PT?Cy++:(Cy=0,PT=t):Cy=0,Ku(),null}function nm(){if(tu!==null){var t=Zz(Fw),e=ia.transition,n=jn;try{if(ia.transition=null,jn=16>t?16:t,tu===null)var r=!1;else{if(t=tu,tu=null,Fw=0,cn&6)throw Error(ke(331));var s=cn;for(cn|=4,et=t.current;et!==null;){var a=et,o=a.child;if(et.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(et=u;et!==null;){var d=et;switch(d.tag){case 0:case 11:case 15:Ay(8,d,a)}var h=d.child;if(h!==null)h.return=d,et=h;else for(;et!==null;){d=et;var f=d.sibling,m=d.return;if(cq(d),d===u){et=null;break}if(f!==null){f.return=m,et=f;break}et=m}}}var y=a.alternate;if(y!==null){var p=y.child;if(p!==null){y.child=null;do{var v=p.sibling;p.sibling=null,p=v}while(p!==null)}}et=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,et=o;else e:for(;et!==null;){if(a=et,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ay(9,a,a.return)}var b=a.sibling;if(b!==null){b.return=a.return,et=b;break e}et=a.return}}var x=t.current;for(et=x;et!==null;){o=et;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,et=w;else e:for(o=x;et!==null;){if(l=et,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:rN(9,l)}}catch(S){cr(l,l.return,S)}if(l===o){et=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,et=C;break e}et=l.return}}if(cn=s,Ku(),Mo&&typeof Mo.onPostCommitFiberRoot=="function")try{Mo.onPostCommitFiberRoot(Yj,t)}catch{}r=!0}return r}finally{jn=n,ia.transition=e}}return!1}function qL(t,e,n){e=Lm(n,e),e=Z9(t,e,1),t=fu(t,e,1),e=Ys(),t!==null&&(Px(t,1,e),xi(t,e))}function cr(t,e,n){if(t.tag===3)qL(t,t,n);else for(;e!==null;){if(e.tag===3){qL(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mu===null||!mu.has(r))){t=Lm(n,t),t=J9(e,t,1),e=fu(e,t,1),t=Ys(),e!==null&&(Px(e,1,t),xi(e,t));break}}e=e.return}}function jae(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ys(),t.pingedLanes|=t.suspendedLanes&n,Jr===t&&(hs&n)===n&&(Br===4||Br===3&&(hs&130023424)===hs&&500>vr()-Lk?th(t,0):Mk|=n),xi(t,e)}function xq(t,e){e===0&&(t.mode&1?(e=Ub,Ub<<=1,!(Ub&130023424)&&(Ub=4194304)):e=1);var n=Ys();t=$l(t,e),t!==null&&(Px(t,e,n),xi(t,n))}function Nae(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),xq(t,n)}function Sae(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ke(314))}r!==null&&r.delete(e),xq(t,n)}var bq;bq=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||yi.current)mi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return mi=!1,hae(t,e,n);mi=!!(t.flags&131072)}else mi=!1,Yn&&e.flags&1048576&&N9(e,Pw,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;q0(t,e),t=e.pendingProps;var s=Rm(e,Os.current);tm(e,n),s=Pk(null,e,r,t,s,n);var a=Ik();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,vi(r)?(a=!0,Tw(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Sk(e),s.updater=nN,e.stateNode=s,s._reactInternals=e,vT(e,r,t,n),e=wT(null,e,r,!0,a,n)):(e.tag=0,Yn&&a&&vk(e),Bs(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(q0(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Aae(r),t=Ra(r,t),s){case 0:e=bT(null,e,r,t,n);break e;case 1:e=OL(null,e,r,t,n);break e;case 11:e=kL(null,e,r,t,n);break e;case 14:e=RL(null,e,r,Ra(r.type,t),n);break e}throw Error(ke(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ra(r,s),bT(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ra(r,s),OL(t,e,r,s,n);case 3:e:{if(rq(e),t===null)throw Error(ke(387));r=e.pendingProps,a=e.memoizedState,s=a.element,P9(t,e),Rw(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=Lm(Error(ke(423)),e),e=DL(t,e,r,n,s);break e}else if(r!==s){s=Lm(Error(ke(424)),e),e=DL(t,e,r,n,s);break e}else for(Ri=hu(e.stateNode.containerInfo.firstChild),Li=e,Yn=!0,Fa=null,n=T9(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Om(),r===s){e=Fl(t,e,n);break e}Bs(t,e,r,n)}e=e.child}return e;case 5:return I9(e),t===null&&pT(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,uT(r,s)?o=null:a!==null&&uT(r,a)&&(e.flags|=32),nq(t,e),Bs(t,e,o,n),e.child;case 6:return t===null&&pT(e),null;case 13:return sq(t,e,n);case 4:return Ek(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Dm(e,null,r,n):Bs(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ra(r,s),kL(t,e,r,s,n);case 7:return Bs(t,e,e.pendingProps,n),e.child;case 8:return Bs(t,e,e.pendingProps.children,n),e.child;case 12:return Bs(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,Dn(Iw,r._currentValue),r._currentValue=o,a!==null)if(ao(a.value,o)){if(a.children===s.children&&!yi.current){e=Fl(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=Tl(-1,n&-n),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),gT(a.return,n,e),l.lanes|=n;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ke(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),gT(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Bs(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,tm(e,n),s=fa(s),r=r(s),e.flags|=1,Bs(t,e,r,n),e.child;case 14:return r=e.type,s=Ra(r,e.pendingProps),s=Ra(r.type,s),RL(t,e,r,s,n);case 15:return eq(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ra(r,s),q0(t,e),e.tag=1,vi(r)?(t=!0,Tw(e)):t=!1,tm(e,n),X9(e,r,s),vT(e,r,s,n),wT(null,e,r,!0,t,n);case 19:return iq(t,e,n);case 22:return tq(t,e,n)}throw Error(ke(156,e.tag))};function wq(t,e){return Gz(t,e)}function Eae(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function na(t,e,n,r){return new Eae(t,e,n,r)}function Bk(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Aae(t){if(typeof t=="function")return Bk(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ak)return 11;if(t===ok)return 14}return 2}function gu(t,e){var n=t.alternate;return n===null?(n=na(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function K0(t,e,n,r,s,a){var o=2;if(r=t,typeof t=="function")Bk(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Cf:return nh(n.children,s,a,e);case ik:o=8,s|=8;break;case UA:return t=na(12,n,e,s|2),t.elementType=UA,t.lanes=a,t;case zA:return t=na(13,n,e,s),t.elementType=zA,t.lanes=a,t;case qA:return t=na(19,n,e,s),t.elementType=qA,t.lanes=a,t;case Iz:return iN(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Cz:o=10;break e;case Pz:o=9;break e;case ak:o=11;break e;case ok:o=14;break e;case Ic:o=16,r=null;break e}throw Error(ke(130,t==null?t:typeof t,""))}return e=na(o,n,e,s),e.elementType=t,e.type=r,e.lanes=a,e}function nh(t,e,n,r){return t=na(7,t,r,e),t.lanes=n,t}function iN(t,e,n,r){return t=na(22,t,r,e),t.elementType=Iz,t.lanes=n,t.stateNode={isHidden:!1},t}function nE(t,e,n){return t=na(6,t,null,e),t.lanes=n,t}function rE(t,e,n){return e=na(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Tae(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=L1(0),this.expirationTimes=L1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=L1(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Uk(t,e,n,r,s,a,o,l,c){return t=new Tae(t,e,n,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=na(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sk(a),t}function Cae(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tf,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _q(t){if(!t)return Tu;t=t._reactInternals;e:{if(Uh(t)!==t||t.tag!==1)throw Error(ke(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(vi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ke(171))}if(t.tag===1){var n=t.type;if(vi(n))return _9(t,n,e)}return e}function jq(t,e,n,r,s,a,o,l,c){return t=Uk(n,r,!0,t,s,a,o,l,c),t.context=_q(null),n=t.current,r=Ys(),s=pu(n),a=Tl(r,s),a.callback=e??null,fu(n,a,s),t.current.lanes=s,Px(t,s,r),xi(t,r),t}function aN(t,e,n,r){var s=e.current,a=Ys(),o=pu(s);return n=_q(n),e.context===null?e.context=n:e.pendingContext=n,e=Tl(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=fu(s,e,o),t!==null&&(eo(t,s,o,a),B0(t,s,o)),o}function Bw(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function WL(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zk(t,e){WL(t,e),(t=t.alternate)&&WL(t,e)}function Pae(){return null}var Nq=typeof reportError=="function"?reportError:function(t){console.error(t)};function qk(t){this._internalRoot=t}oN.prototype.render=qk.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ke(409));aN(t,e,null,null)};oN.prototype.unmount=qk.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;mh(function(){aN(null,t,null,null)}),e[Ll]=null}};function oN(t){this._internalRoot=t}oN.prototype.unstable_scheduleHydration=function(t){if(t){var e=t9();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Mc.length&&e!==0&&e<Mc[n].priority;n++);Mc.splice(n,0,t),n===0&&r9(t)}};function Wk(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function lN(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function HL(){}function Iae(t,e,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var u=Bw(o);a.call(u)}}var o=jq(e,r,t,0,null,!1,!1,"",HL);return t._reactRootContainer=o,t[Ll]=o.current,sv(t.nodeType===8?t.parentNode:t),mh(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Bw(c);l.call(u)}}var c=Uk(t,0,!1,null,null,!1,!1,"",HL);return t._reactRootContainer=c,t[Ll]=c.current,sv(t.nodeType===8?t.parentNode:t),mh(function(){aN(e,c,n,r)}),c}function cN(t,e,n,r,s){var a=n._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var c=Bw(o);l.call(c)}}aN(e,o,t,s)}else o=Iae(n,e,t,s,r);return Bw(o)}Jz=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ay(e.pendingLanes);n!==0&&(uk(e,n|1),xi(e,vr()),!(cn&6)&&($m=vr()+500,Ku()))}break;case 13:mh(function(){var r=$l(t,1);if(r!==null){var s=Ys();eo(r,t,1,s)}}),zk(t,1)}};dk=function(t){if(t.tag===13){var e=$l(t,134217728);if(e!==null){var n=Ys();eo(e,t,134217728,n)}zk(t,134217728)}};e9=function(t){if(t.tag===13){var e=pu(t),n=$l(t,e);if(n!==null){var r=Ys();eo(n,t,e,r)}zk(t,e)}};t9=function(){return jn};n9=function(t,e){var n=jn;try{return jn=t,e()}finally{jn=n}};eT=function(t,e,n){switch(e){case"input":if(KA(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Jj(r);if(!s)throw Error(ke(90));Rz(r),KA(r,s)}}}break;case"textarea":Dz(t,n);break;case"select":e=n.value,e!=null&&Xf(t,!!n.multiple,e,!1)}};Uz=$k;zz=mh;var kae={usingClientEntryPoint:!1,Events:[kx,Rf,Jj,Vz,Bz,$k]},Dg={findFiberByHostInstance:Rd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Rae={bundleType:Dg.bundleType,version:Dg.version,rendererPackageName:Dg.rendererPackageName,rendererConfig:Dg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rc.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Hz(t),t===null?null:t.stateNode},findFiberByHostInstance:Dg.findFiberByHostInstance||Pae,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jb.isDisabled&&Jb.supportsFiber)try{Yj=Jb.inject(Rae),Mo=Jb}catch{}}zi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kae;zi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wk(e))throw Error(ke(200));return Cae(t,e,null,n)};zi.createRoot=function(t,e){if(!Wk(t))throw Error(ke(299));var n=!1,r="",s=Nq;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Uk(t,1,!1,null,null,n,!1,r,s),t[Ll]=e.current,sv(t.nodeType===8?t.parentNode:t),new qk(e)};zi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ke(188)):(t=Object.keys(t).join(","),Error(ke(268,t)));return t=Hz(e),t=t===null?null:t.stateNode,t};zi.flushSync=function(t){return mh(t)};zi.hydrate=function(t,e,n){if(!lN(e))throw Error(ke(200));return cN(null,t,e,!0,n)};zi.hydrateRoot=function(t,e,n){if(!Wk(t))throw Error(ke(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",o=Nq;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=jq(e,null,t,1,n??null,s,!1,a,o),t[Ll]=e.current,sv(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new oN(e)};zi.render=function(t,e,n){if(!lN(e))throw Error(ke(200));return cN(null,t,e,!1,n)};zi.unmountComponentAtNode=function(t){if(!lN(t))throw Error(ke(40));return t._reactRootContainer?(mh(function(){cN(null,null,t,!1,function(){t._reactRootContainer=null,t[Ll]=null})}),!0):!1};zi.unstable_batchedUpdates=$k;zi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!lN(n))throw Error(ke(200));if(t==null||t._reactInternals===void 0)throw Error(ke(38));return cN(t,e,n,!1,r)};zi.version="18.3.1-next-f1338f8080-20240426";function Sq(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sq)}catch(t){console.error(t)}}Sq(),Sz.exports=zi;var zh=Sz.exports;const Eq=xn(zh);var Aq,KL=zh;Aq=KL.createRoot,KL.hydrateRoot;const Oae="modulepreload",Dae=function(t){return"/"+t},GL={},Ox=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=Dae(c),c in GL)return;GL[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Oae,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},Mae=1,Lae=1e6;let sE=0;function $ae(){return sE=(sE+1)%Number.MAX_SAFE_INTEGER,sE.toString()}const iE=new Map,YL=t=>{if(iE.has(t))return;const e=setTimeout(()=>{iE.delete(t),Py({type:"REMOVE_TOAST",toastId:t})},Lae);iE.set(t,e)},Fae=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,Mae)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?YL(n):t.toasts.forEach(r=>{YL(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},G0=[];let Y0={toasts:[]};function Py(t){Y0=Fae(Y0,t),G0.forEach(e=>{e(Y0)})}function Vae({...t}){const e=$ae(),n=s=>Py({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Py({type:"DISMISS_TOAST",toastId:e});return Py({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Bae(){const[t,e]=_.useState(Y0);return _.useEffect(()=>(G0.push(e),()=>{const n=G0.indexOf(e);n>-1&&G0.splice(n,1)}),[t]),{...t,toast:Vae,dismiss:n=>Py({type:"DISMISS_TOAST",toastId:n})}}function Me(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function QL(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function uN(...t){return e=>{let n=!1;const r=t.map(s=>{const a=QL(s,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():QL(t[s],null)}}}}function Mt(...t){return _.useCallback(uN(...t),t)}function Uae(t,e){const n=_.createContext(e),r=a=>{const{children:o,...l}=a,c=_.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(a){const o=_.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,s]}function ps(t,e=[]){let n=[];function r(a,o){const l=_.createContext(o),c=n.length;n=[...n,o];const u=h=>{var b;const{scope:f,children:m,...y}=h,p=((b=f==null?void 0:f[t])==null?void 0:b[c])||l,v=_.useMemo(()=>y,Object.values(y));return i.jsx(p.Provider,{value:v,children:m})};u.displayName=a+"Provider";function d(h,f){var p;const m=((p=f==null?void 0:f[t])==null?void 0:p[c])||l,y=_.useContext(m);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[u,d]}const s=()=>{const a=n.map(o=>_.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return _.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,zae(s,...e)]}function zae(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function ph(t){const e=qae(t),n=_.forwardRef((r,s)=>{const{children:a,...o}=r,l=_.Children.toArray(a),c=l.find(Wae);if(c){const u=c.props.children,d=l.map(h=>h===c?_.Children.count(u)>1?_.Children.only(null):_.isValidElement(u)?u.props.children:null:h);return i.jsx(e,{...o,ref:s,children:_.isValidElement(u)?_.cloneElement(u,void 0,d):null})}return i.jsx(e,{...o,ref:s,children:a})});return n.displayName=`${t}.Slot`,n}var qh=ph("Slot");function qae(t){const e=_.forwardRef((n,r)=>{const{children:s,...a}=n;if(_.isValidElement(s)){const o=Kae(s),l=Hae(a,s.props);return s.type!==_.Fragment&&(l.ref=r?uN(r,o):o),_.cloneElement(s,l)}return _.Children.count(s)>1?_.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Tq=Symbol("radix.slottable");function Cq(t){const e=({children:n})=>i.jsx(i.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=Tq,e}function Wae(t){return _.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Tq}function Hae(t,e){const n={...e};for(const r in e){const s=t[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...t,...n}}function Kae(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function dN(t){const e=t+"CollectionProvider",[n,r]=ps(e),[s,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:v,children:b}=p,x=F.useRef(null),w=F.useRef(new Map).current;return i.jsx(s,{scope:v,itemMap:w,collectionRef:x,children:b})};o.displayName=e;const l=t+"CollectionSlot",c=ph(l),u=F.forwardRef((p,v)=>{const{scope:b,children:x}=p,w=a(l,b),C=Mt(v,w.collectionRef);return i.jsx(c,{ref:C,children:x})});u.displayName=l;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=ph(d),m=F.forwardRef((p,v)=>{const{scope:b,children:x,...w}=p,C=F.useRef(null),S=Mt(v,C),P=a(d,b);return F.useEffect(()=>(P.itemMap.set(C,{ref:C,...w}),()=>void P.itemMap.delete(C))),i.jsx(f,{[h]:"",ref:S,children:x})});m.displayName=d;function y(p){const v=a(t+"CollectionConsumer",p);return F.useCallback(()=>{const x=v.collectionRef.current;if(!x)return[];const w=Array.from(x.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((P,j)=>w.indexOf(P.ref.current)-w.indexOf(j.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},y,r]}var Gae=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],st=Gae.reduce((t,e)=>{const n=ph(`Primitive.${e}`),r=_.forwardRef((s,a)=>{const{asChild:o,...l}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Hk(t,e){t&&zh.flushSync(()=>t.dispatchEvent(e))}function hr(t){const e=_.useRef(t);return _.useEffect(()=>{e.current=t}),_.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Yae(t,e=globalThis==null?void 0:globalThis.document){const n=hr(t);_.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var Qae="DismissableLayer",RT="dismissableLayer.update",Xae="dismissableLayer.pointerDownOutside",Zae="dismissableLayer.focusOutside",XL,Pq=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Dp=_.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=t,u=_.useContext(Pq),[d,h]=_.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=_.useState({}),y=Mt(e,j=>h(j)),p=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=p.indexOf(v),x=d?p.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,C=x>=b,S=eoe(j=>{const g=j.target,T=[...u.branches].some(E=>E.contains(g));!C||T||(s==null||s(j),o==null||o(j),j.defaultPrevented||l==null||l())},f),P=toe(j=>{const g=j.target;[...u.branches].some(E=>E.contains(g))||(a==null||a(j),o==null||o(j),j.defaultPrevented||l==null||l())},f);return Yae(j=>{x===u.layers.size-1&&(r==null||r(j),!j.defaultPrevented&&l&&(j.preventDefault(),l()))},f),_.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(XL=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),ZL(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=XL)}},[d,f,n,u]),_.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),ZL())},[d,u]),_.useEffect(()=>{const j=()=>m({});return document.addEventListener(RT,j),()=>document.removeEventListener(RT,j)},[]),i.jsx(st.div,{...c,ref:y,style:{pointerEvents:w?C?"auto":"none":void 0,...t.style},onFocusCapture:Me(t.onFocusCapture,P.onFocusCapture),onBlurCapture:Me(t.onBlurCapture,P.onBlurCapture),onPointerDownCapture:Me(t.onPointerDownCapture,S.onPointerDownCapture)})});Dp.displayName=Qae;var Jae="DismissableLayerBranch",Iq=_.forwardRef((t,e)=>{const n=_.useContext(Pq),r=_.useRef(null),s=Mt(e,r);return _.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),i.jsx(st.div,{...t,ref:s})});Iq.displayName=Jae;function eoe(t,e=globalThis==null?void 0:globalThis.document){const n=hr(t),r=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let c=function(){kq(Xae,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function toe(t,e=globalThis==null?void 0:globalThis.document){const n=hr(t),r=_.useRef(!1);return _.useEffect(()=>{const s=a=>{a.target&&!r.current&&kq(Zae,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function ZL(){const t=new CustomEvent(RT);document.dispatchEvent(t)}function kq(t,e,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Hk(s,a):s.dispatchEvent(a)}var noe=Dp,roe=Iq,fr=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},soe="Portal",Dx=_.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,a]=_.useState(!1);fr(()=>a(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?Eq.createPortal(i.jsx(st.div,{...r,ref:e}),o):null});Dx.displayName=soe;function ioe(t,e){return _.useReducer((n,r)=>e[n][r]??n,t)}var gs=t=>{const{present:e,children:n}=t,r=aoe(e),s=typeof n=="function"?n({present:r.isPresent}):_.Children.only(n),a=Mt(r.ref,ooe(s));return typeof n=="function"||r.isPresent?_.cloneElement(s,{ref:a}):null};gs.displayName="Presence";function aoe(t){const[e,n]=_.useState(),r=_.useRef(null),s=_.useRef(t),a=_.useRef("none"),o=t?"mounted":"unmounted",[l,c]=ioe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const u=e0(r.current);a.current=l==="mounted"?u:"none"},[l]),fr(()=>{const u=r.current,d=s.current;if(d!==t){const f=a.current,m=e0(u);t?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),fr(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=m=>{const p=e0(r.current).includes(m.animationName);if(m.target===e&&p&&(c("ANIMATION_END"),!s.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},f=m=>{m.target===e&&(a.current=e0(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:_.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function e0(t){return(t==null?void 0:t.animationName)||"none"}function ooe(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var loe=tk[" useInsertionEffect ".trim().toString()]||fr;function oo({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,a,o]=coe({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:s;{const d=_.useRef(t!==void 0);_.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const u=_.useCallback(d=>{var h;if(l){const f=uoe(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else a(d)},[l,t,a,o]);return[c,u]}function coe({defaultProp:t,onChange:e}){const[n,r]=_.useState(t),s=_.useRef(n),a=_.useRef(e);return loe(()=>{a.current=e},[e]),_.useEffect(()=>{var o;s.current!==n&&((o=a.current)==null||o.call(a,n),s.current=n)},[n,s]),[n,r,a]}function uoe(t){return typeof t=="function"}var Rq=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),doe="VisuallyHidden",hN=_.forwardRef((t,e)=>i.jsx(st.span,{...t,ref:e,style:{...Rq,...t.style}}));hN.displayName=doe;var hoe=hN,Kk="ToastProvider",[Gk,foe,moe]=dN("Toast"),[Oq,Ttt]=ps("Toast",[moe]),[poe,fN]=Oq(Kk),Dq=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:o}=t,[l,c]=_.useState(null),[u,d]=_.useState(0),h=_.useRef(!1),f=_.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Kk}\`. Expected non-empty \`string\`.`),i.jsx(Gk.Provider,{scope:e,children:i.jsx(poe,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:a,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:_.useCallback(()=>d(m=>m+1),[]),onToastRemove:_.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};Dq.displayName=Kk;var Mq="ToastViewport",goe=["F8"],OT="toast.viewportPause",DT="toast.viewportResume",Lq=_.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=goe,label:s="Notifications ({hotkey})",...a}=t,o=fN(Mq,n),l=foe(n),c=_.useRef(null),u=_.useRef(null),d=_.useRef(null),h=_.useRef(null),f=Mt(e,h,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;_.useEffect(()=>{const v=b=>{var w;r.length!==0&&r.every(C=>b[C]||b.code===C)&&((w=h.current)==null||w.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),_.useEffect(()=>{const v=c.current,b=h.current;if(y&&v&&b){const x=()=>{if(!o.isClosePausedRef.current){const P=new CustomEvent(OT);b.dispatchEvent(P),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const P=new CustomEvent(DT);b.dispatchEvent(P),o.isClosePausedRef.current=!1}},C=P=>{!v.contains(P.relatedTarget)&&w()},S=()=>{v.contains(document.activeElement)||w()};return v.addEventListener("focusin",x),v.addEventListener("focusout",C),v.addEventListener("pointermove",x),v.addEventListener("pointerleave",S),window.addEventListener("blur",x),window.addEventListener("focus",w),()=>{v.removeEventListener("focusin",x),v.removeEventListener("focusout",C),v.removeEventListener("pointermove",x),v.removeEventListener("pointerleave",S),window.removeEventListener("blur",x),window.removeEventListener("focus",w)}}},[y,o.isClosePausedRef]);const p=_.useCallback(({tabbingDirection:v})=>{const x=l().map(w=>{const C=w.ref.current,S=[C,...Coe(C)];return v==="forwards"?S:S.reverse()});return(v==="forwards"?x.reverse():x).flat()},[l]);return _.useEffect(()=>{const v=h.current;if(v){const b=x=>{var S,P,j;const w=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!w){const g=document.activeElement,T=x.shiftKey;if(x.target===v&&T){(S=u.current)==null||S.focus();return}const I=p({tabbingDirection:T?"backwards":"forwards"}),k=I.findIndex(L=>L===g);aE(I.slice(k+1))?x.preventDefault():T?(P=u.current)==null||P.focus():(j=d.current)==null||j.focus()}};return v.addEventListener("keydown",b),()=>v.removeEventListener("keydown",b)}},[l,p]),i.jsxs(roe,{ref:c,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&i.jsx(MT,{ref:u,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"forwards"});aE(v)}}),i.jsx(Gk.Slot,{scope:n,children:i.jsx(st.ol,{tabIndex:-1,...a,ref:f})}),y&&i.jsx(MT,{ref:d,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"backwards"});aE(v)}})]})});Lq.displayName=Mq;var $q="ToastFocusProxy",MT=_.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,a=fN($q,n);return i.jsx(hN,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=a.viewport)!=null&&u.contains(l))&&r()}})});MT.displayName=$q;var Mx="Toast",yoe="toast.swipeStart",voe="toast.swipeMove",xoe="toast.swipeCancel",boe="toast.swipeEnd",Fq=_.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:a,...o}=t,[l,c]=oo({prop:r,defaultProp:s??!0,onChange:a,caller:Mx});return i.jsx(gs,{present:n||l,children:i.jsx(joe,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:hr(t.onPause),onResume:hr(t.onResume),onSwipeStart:Me(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Me(t.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Me(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Me(t.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});Fq.displayName=Mx;var[woe,_oe]=Oq(Mx,{onClose(){}}),joe=_.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...y}=t,p=fN(Mx,n),[v,b]=_.useState(null),x=Mt(e,L=>b(L)),w=_.useRef(null),C=_.useRef(null),S=s||p.duration,P=_.useRef(0),j=_.useRef(S),g=_.useRef(0),{onToastAdd:T,onToastRemove:E}=p,A=hr(()=>{var V;(v==null?void 0:v.contains(document.activeElement))&&((V=p.viewport)==null||V.focus()),o()}),I=_.useCallback(L=>{!L||L===1/0||(window.clearTimeout(g.current),P.current=new Date().getTime(),g.current=window.setTimeout(A,L))},[A]);_.useEffect(()=>{const L=p.viewport;if(L){const V=()=>{I(j.current),u==null||u()},B=()=>{const M=new Date().getTime()-P.current;j.current=j.current-M,window.clearTimeout(g.current),c==null||c()};return L.addEventListener(OT,B),L.addEventListener(DT,V),()=>{L.removeEventListener(OT,B),L.removeEventListener(DT,V)}}},[p.viewport,S,c,u,I]),_.useEffect(()=>{a&&!p.isClosePausedRef.current&&I(S)},[a,S,p.isClosePausedRef,I]),_.useEffect(()=>(T(),()=>E()),[T,E]);const k=_.useMemo(()=>v?Hq(v):null,[v]);return p.viewport?i.jsxs(i.Fragment,{children:[k&&i.jsx(Noe,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:k}),i.jsx(woe,{scope:n,onClose:A,children:zh.createPortal(i.jsx(Gk.ItemSlot,{scope:n,children:i.jsx(noe,{asChild:!0,onEscapeKeyDown:Me(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||A(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(st.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":p.swipeDirection,...y,ref:x,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Me(t.onKeyDown,L=>{L.key==="Escape"&&(l==null||l(L.nativeEvent),L.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:Me(t.onPointerDown,L=>{L.button===0&&(w.current={x:L.clientX,y:L.clientY})}),onPointerMove:Me(t.onPointerMove,L=>{if(!w.current)return;const V=L.clientX-w.current.x,B=L.clientY-w.current.y,M=!!C.current,$=["left","right"].includes(p.swipeDirection),O=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,W=$?O(0,V):0,Z=$?0:O(0,B),ae=L.pointerType==="touch"?10:2,Ae={x:W,y:Z},ie={originalEvent:L,delta:Ae};M?(C.current=Ae,t0(voe,h,ie,{discrete:!1})):JL(Ae,p.swipeDirection,ae)?(C.current=Ae,t0(yoe,d,ie,{discrete:!1}),L.target.setPointerCapture(L.pointerId)):(Math.abs(V)>ae||Math.abs(B)>ae)&&(w.current=null)}),onPointerUp:Me(t.onPointerUp,L=>{const V=C.current,B=L.target;if(B.hasPointerCapture(L.pointerId)&&B.releasePointerCapture(L.pointerId),C.current=null,w.current=null,V){const M=L.currentTarget,$={originalEvent:L,delta:V};JL(V,p.swipeDirection,p.swipeThreshold)?t0(boe,m,$,{discrete:!0}):t0(xoe,f,$,{discrete:!0}),M.addEventListener("click",O=>O.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),Noe=t=>{const{__scopeToast:e,children:n,...r}=t,s=fN(Mx,e),[a,o]=_.useState(!1),[l,c]=_.useState(!1);return Aoe(()=>o(!0)),_.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(Dx,{asChild:!0,children:i.jsx(hN,{...r,children:a&&i.jsxs(i.Fragment,{children:[s.label," ",n]})})})},Soe="ToastTitle",Vq=_.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return i.jsx(st.div,{...r,ref:e})});Vq.displayName=Soe;var Eoe="ToastDescription",Bq=_.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return i.jsx(st.div,{...r,ref:e})});Bq.displayName=Eoe;var Uq="ToastAction",zq=_.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?i.jsx(Wq,{altText:n,asChild:!0,children:i.jsx(Yk,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Uq}\`. Expected non-empty \`string\`.`),null)});zq.displayName=Uq;var qq="ToastClose",Yk=_.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=_oe(qq,n);return i.jsx(Wq,{asChild:!0,children:i.jsx(st.button,{type:"button",...r,ref:e,onClick:Me(t.onClick,s.onClose)})})});Yk.displayName=qq;var Wq=_.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return i.jsx(st.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function Hq(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),Toe(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...Hq(r))}}),e}function t0(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Hk(s,a):s.dispatchEvent(a)}var JL=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),a=r>s;return e==="left"||e==="right"?a&&r>n:!a&&s>n};function Aoe(t=()=>{}){const e=hr(t);fr(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function Toe(t){return t.nodeType===t.ELEMENT_NODE}function Coe(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function aE(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Poe=Dq,Kq=Lq,Gq=Fq,Yq=Vq,Qq=Bq,Xq=zq,Zq=Yk;function Jq(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=Jq(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function $t(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=Jq(t))&&(r&&(r+=" "),r+=e);return r}const e4=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,t4=$t,Wh=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return t4(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:a}=e,o=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],h=a==null?void 0:a[u];if(d===null)return null;const f=e4(d)||e4(h);return s[u][f]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(y=>{let[p,v]=y;return Array.isArray(v)?v.includes({...a,...l}[p]):{...a,...l}[p]===v})?[...u,h,f]:u},[]);return t4(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ioe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),e8=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var koe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Roe=_.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:o,...l},c)=>_.createElement("svg",{ref:c,...koe,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:e8("lucide",s),...l},[...o.map(([u,d])=>_.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=(t,e)=>{const n=_.forwardRef(({className:r,...s},a)=>_.createElement(Roe,{ref:a,iconNode:e,className:e8(`lucide-${Ioe(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ooe=De("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Doe=De("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Moe=De("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=De("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=De("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Loe=De("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=De("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=De("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $oe=De("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=De("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Foe=De("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=De("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=De("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Voe=De("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=De("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Boe=De("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=De("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=De("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=De("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=De("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8=De("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uoe=De("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=De("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=De("CircleArrowDown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zoe=De("CircleArrowUp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=De("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=De("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=De("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qoe=De("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Woe=De("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=De("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=De("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=De("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=De("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=De("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hoe=De("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=De("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Koe=De("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=De("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Goe=De("FileX",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yoe=De("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=De("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=De("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=De("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=De("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qoe=De("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xoe=De("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=De("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=De("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=De("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zoe=De("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=De("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Joe=De("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ele=De("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tle=De("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=De("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nle=De("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rle=De("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=De("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=De("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=De("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=De("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=De("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8=De("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=De("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=De("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sle=De("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=De("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=De("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=De("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=De("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=De("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=De("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ile=De("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=De("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ale=De("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=De("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=De("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=De("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=De("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=De("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=De("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ole=De("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=De("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=De("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=De("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=De("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=De("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),eR="-",lle=t=>{const e=ule(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(eR);return l[0]===""&&l.length!==1&&l.shift(),f8(l,e)||cle(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},f8=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?f8(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const a=t.join(eR);return(o=e.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},c4=/^\[(.+)\]$/,cle=t=>{if(c4.test(t)){const e=c4.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},ule=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return hle(Object.entries(t.classGroups),n).forEach(([a,o])=>{$T(o,r,a,e)}),r},$T=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const a=s===""?e:u4(e,s);a.classGroupId=n;return}if(typeof s=="function"){if(dle(s)){$T(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([a,o])=>{$T(o,u4(e,a),n,r)})})},u4=(t,e)=>{let n=t;return e.split(eR).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},dle=t=>t.isThemeGetter,hle=(t,e)=>e?t.map(([n,r])=>{const s=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[e+o,l])):a);return[n,s]}):t,fle=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(a,o)=>{n.set(a,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return s(a,o),o},set(a,o){n.has(a)?n.set(a,o):s(a,o)}}},m8="!",mle=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],a=e.length,o=l=>{const c=[];let u=0,d=0,h;for(let v=0;v<l.length;v++){let b=l[v];if(u===0){if(b===s&&(r||l.slice(v,v+a)===e)){c.push(l.slice(d,v)),d=v+a;continue}if(b==="/"){h=v;continue}}b==="["?u++:b==="]"&&u--}const f=c.length===0?l:l.substring(d),m=f.startsWith(m8),y=m?f.substring(1):f,p=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:y,maybePostfixModifierPosition:p}};return n?l=>n({className:l,parseClassName:o}):o},ple=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},gle=t=>({cache:fle(t.cacheSize),parseClassName:mle(t),...lle(t)}),yle=/\s+/,vle=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,a=[],o=t.trim().split(yle);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=n(u);let y=!!m,p=r(y?f.substring(0,m):f);if(!p){if(!y){l=u+(l.length>0?" "+l:l);continue}if(p=r(f),!p){l=u+(l.length>0?" "+l:l);continue}y=!1}const v=ple(d).join(":"),b=h?v+m8:v,x=b+p;if(a.includes(x))continue;a.push(x);const w=s(p,y);for(let C=0;C<w.length;++C){const S=w[C];a.push(b+S)}l=u+(l.length>0?" "+l:l)}return l};function xle(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=p8(e))&&(r&&(r+=" "),r+=n);return r}const p8=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=p8(t[r]))&&(n&&(n+=" "),n+=e);return n};function ble(t,...e){let n,r,s,a=o;function o(c){const u=e.reduce((d,h)=>h(d),t());return n=gle(u),r=n.cache.get,s=n.cache.set,a=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=vle(c,n);return s(c,d),d}return function(){return a(xle.apply(null,arguments))}}const Vn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},g8=/^\[(?:([a-z-]+):)?(.+)\]$/i,wle=/^\d+\/\d+$/,_le=new Set(["px","full","screen"]),jle=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Nle=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Sle=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Ele=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ale=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ul=t=>rm(t)||_le.has(t)||wle.test(t),bc=t=>Lp(t,"length",Dle),rm=t=>!!t&&!Number.isNaN(Number(t)),oE=t=>Lp(t,"number",rm),Mg=t=>!!t&&Number.isInteger(Number(t)),Tle=t=>t.endsWith("%")&&rm(t.slice(0,-1)),qt=t=>g8.test(t),wc=t=>jle.test(t),Cle=new Set(["length","size","percentage"]),Ple=t=>Lp(t,Cle,y8),Ile=t=>Lp(t,"position",y8),kle=new Set(["image","url"]),Rle=t=>Lp(t,kle,Lle),Ole=t=>Lp(t,"",Mle),Lg=()=>!0,Lp=(t,e,n)=>{const r=g8.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Dle=t=>Nle.test(t)&&!Sle.test(t),y8=()=>!1,Mle=t=>Ele.test(t),Lle=t=>Ale.test(t),$le=()=>{const t=Vn("colors"),e=Vn("spacing"),n=Vn("blur"),r=Vn("brightness"),s=Vn("borderColor"),a=Vn("borderRadius"),o=Vn("borderSpacing"),l=Vn("borderWidth"),c=Vn("contrast"),u=Vn("grayscale"),d=Vn("hueRotate"),h=Vn("invert"),f=Vn("gap"),m=Vn("gradientColorStops"),y=Vn("gradientColorStopPositions"),p=Vn("inset"),v=Vn("margin"),b=Vn("opacity"),x=Vn("padding"),w=Vn("saturate"),C=Vn("scale"),S=Vn("sepia"),P=Vn("skew"),j=Vn("space"),g=Vn("translate"),T=()=>["auto","contain","none"],E=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",qt,e],I=()=>[qt,e],k=()=>["",ul,bc],L=()=>["auto",rm,qt],V=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],M=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>["start","end","center","between","around","evenly","stretch"],O=()=>["","0",qt],W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Z=()=>[rm,qt];return{cacheSize:500,separator:":",theme:{colors:[Lg],spacing:[ul,bc],blur:["none","",wc,qt],brightness:Z(),borderColor:[t],borderRadius:["none","","full",wc,qt],borderSpacing:I(),borderWidth:k(),contrast:Z(),grayscale:O(),hueRotate:Z(),invert:O(),gap:I(),gradientColorStops:[t],gradientColorStopPositions:[Tle,bc],inset:A(),margin:A(),opacity:Z(),padding:I(),saturate:Z(),scale:Z(),sepia:O(),skew:Z(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",qt]}],container:["container"],columns:[{columns:[wc]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...V(),qt]}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Mg,qt]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",qt]}],grow:[{grow:O()}],shrink:[{shrink:O()}],order:[{order:["first","last","none",Mg,qt]}],"grid-cols":[{"grid-cols":[Lg]}],"col-start-end":[{col:["auto",{span:["full",Mg,qt]},qt]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[Lg]}],"row-start-end":[{row:["auto",{span:[Mg,qt]},qt]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",qt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",qt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...$()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...$(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...$(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",qt,e]}],"min-w":[{"min-w":[qt,e,"min","max","fit"]}],"max-w":[{"max-w":[qt,e,"none","full","min","max","fit","prose",{screen:[wc]},wc]}],h:[{h:[qt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[qt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[qt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[qt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",wc,bc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",oE]}],"font-family":[{font:[Lg]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",qt]}],"line-clamp":[{"line-clamp":["none",rm,oE]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ul,qt]}],"list-image":[{"list-image":["none",qt]}],"list-style-type":[{list:["none","disc","decimal",qt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ul,bc]}],"underline-offset":[{"underline-offset":["auto",ul,qt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",qt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",qt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...V(),Ile]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Ple]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Rle]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:B()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[ul,qt]}],"outline-w":[{outline:[ul,bc]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[ul,bc]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",wc,Ole]}],"shadow-color":[{shadow:[Lg]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...M(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":M()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",wc,qt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",qt]}],duration:[{duration:Z()}],ease:[{ease:["linear","in","out","in-out",qt]}],delay:[{delay:Z()}],animate:[{animate:["none","spin","ping","pulse","bounce",qt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[Mg,qt]}],"translate-x":[{"translate-x":[g]}],"translate-y":[{"translate-y":[g]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",qt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",qt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",qt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ul,bc,oE]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Fle=ble($le);function ve(...t){return Fle($t(t))}const Vle=Poe,v8=_.forwardRef(({className:t,...e},n)=>i.jsx(Kq,{ref:n,className:ve("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));v8.displayName=Kq.displayName;const Ble=Wh("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),x8=_.forwardRef(({className:t,variant:e,...n},r)=>i.jsx(Gq,{ref:r,className:ve(Ble({variant:e}),t),...n}));x8.displayName=Gq.displayName;const Ule=_.forwardRef(({className:t,...e},n)=>i.jsx(Xq,{ref:n,className:ve("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));Ule.displayName=Xq.displayName;const b8=_.forwardRef(({className:t,...e},n)=>i.jsx(Zq,{ref:n,className:ve("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:i.jsx(Bm,{className:"h-4 w-4"})}));b8.displayName=Zq.displayName;const w8=_.forwardRef(({className:t,...e},n)=>i.jsx(Yq,{ref:n,className:ve("text-sm font-semibold",t),...e}));w8.displayName=Yq.displayName;const _8=_.forwardRef(({className:t,...e},n)=>i.jsx(Qq,{ref:n,className:ve("text-sm opacity-90",t),...e}));_8.displayName=Qq.displayName;function zle(){const{toasts:t}=Bae();return i.jsxs(Vle,{children:[t.map(function({id:e,title:n,description:r,action:s,...a}){return i.jsxs(x8,{...a,children:[i.jsxs("div",{className:"grid gap-1",children:[n&&i.jsx(w8,{children:n}),r&&i.jsx(_8,{children:r})]}),s,i.jsx(b8,{})]},e)}),i.jsx(v8,{})]})}var d4=["light","dark"],qle="(prefers-color-scheme: dark)",Wle=_.createContext(void 0),Hle={setTheme:t=>{},themes:[]},Kle=()=>{var t;return(t=_.useContext(Wle))!=null?t:Hle};_.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:o,attrs:l,nonce:c})=>{let u=a==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(y=>`'${y}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?d4.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(y,p=!1,v=!0)=>{let b=o?o[y]:y,x=p?y+"|| ''":`'${b}'`,w="";return s&&v&&!p&&d4.includes(y)&&(w+=`d.style.colorScheme = '${y}';`),n==="class"?p||b?w+=`c.add(${x})`:w+="null":b&&(w+=`d[s](n,${x})`),w},m=t?`!function(){${d}${f(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${qle}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${u?"":"else{"+f(a,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(a,!1,!1)};}${h}}catch(t){}}();`;return _.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var Gle=t=>{switch(t){case"success":return Xle;case"info":return Jle;case"warning":return Zle;case"error":return ece;default:return null}},Yle=Array(12).fill(0),Qle=({visible:t,className:e})=>F.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},F.createElement("div",{className:"sonner-spinner"},Yle.map((n,r)=>F.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),Xle=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Zle=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Jle=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ece=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),tce=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},F.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),F.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),nce=()=>{let[t,e]=F.useState(document.hidden);return F.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},FT=1,rce=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:FT++,a=this.toasts.find(l=>l.id===s),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),a?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...t,id:s,title:n}),{...l,...t,id:s,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:s}),s},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),s=n!==void 0,a,o=r.then(async c=>{if(a=["resolve",c],F.isValidElement(c))s=!1,this.create({id:n,type:"default",message:c});else if(ice(c)&&!c.ok){s=!1;let u=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:n,type:"error",message:u,description:d})}else if(e.success!==void 0){s=!1;let u=typeof e.success=="function"?await e.success(c):e.success,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(a=["reject",c],e.error!==void 0){s=!1;let u=typeof e.error=="function"?await e.error(c):e.error,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;s&&(this.dismiss(n),n=void 0),(c=e.finally)==null||c.call(e)}),l=()=>new Promise((c,u)=>o.then(()=>a[0]==="reject"?u(a[1]):c(a[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||FT++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},oi=new rce,sce=(t,e)=>{let n=(e==null?void 0:e.id)||FT++;return oi.addToast({title:t,...e,id:n}),n},ice=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",ace=sce,oce=()=>oi.toasts,lce=()=>oi.getActiveToasts(),Y=Object.assign(ace,{success:oi.success,info:oi.info,warning:oi.warning,error:oi.error,custom:oi.custom,message:oi.message,promise:oi.promise,dismiss:oi.dismiss,loading:oi.loading},{getHistory:oce,getToasts:lce});function cce(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}cce(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function n0(t){return t.label!==void 0}var uce=3,dce="32px",hce="16px",h4=4e3,fce=356,mce=14,pce=20,gce=200;function Ta(...t){return t.filter(Boolean).join(" ")}function yce(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var vce=t=>{var e,n,r,s,a,o,l,c,u,d,h;let{invert:f,toast:m,unstyled:y,interacting:p,setHeights:v,visibleToasts:b,heights:x,index:w,toasts:C,expanded:S,removeToast:P,defaultRichColors:j,closeButton:g,style:T,cancelButtonStyle:E,actionButtonStyle:A,className:I="",descriptionClassName:k="",duration:L,position:V,gap:B,loadingIcon:M,expandByDefault:$,classNames:O,icons:W,closeButtonAriaLabel:Z="Close toast",pauseWhenPageIsHidden:ae}=t,[Ae,ie]=F.useState(null),[pe,Ue]=F.useState(null),[Ne,nt]=F.useState(!1),[fe,_e]=F.useState(!1),[ge,ce]=F.useState(!1),[He,rt]=F.useState(!1),[zt,nn]=F.useState(!1),[En,Hr]=F.useState(0),[on,K]=F.useState(0),oe=F.useRef(m.duration||L||h4),me=F.useRef(null),Le=F.useRef(null),$e=w===0,Pe=w+1<=b,Ke=m.type,Kt=m.dismissible!==!1,dn=m.className||"",ys=m.descriptionClassName||"",Na=F.useMemo(()=>x.findIndex(St=>St.toastId===m.id)||0,[x,m.id]),_i=F.useMemo(()=>{var St;return(St=m.closeButton)!=null?St:g},[m.closeButton,g]),hd=F.useMemo(()=>m.duration||L||h4,[m.duration,L]),ji=F.useRef(0),ti=F.useRef(0),dc=F.useRef(0),ss=F.useRef(null),[sf,cl]=V.split("-"),gg=F.useMemo(()=>x.reduce((St,pn,Pn)=>Pn>=Na?St:St+pn.height,0),[x,Na]),hc=nce(),Sb=m.invert||f,kr=Ke==="loading";ti.current=F.useMemo(()=>Na*B+gg,[Na,gg]),F.useEffect(()=>{oe.current=hd},[hd]),F.useEffect(()=>{nt(!0)},[]),F.useEffect(()=>{let St=Le.current;if(St){let pn=St.getBoundingClientRect().height;return K(pn),v(Pn=>[{toastId:m.id,height:pn,position:m.position},...Pn]),()=>v(Pn=>Pn.filter(Kr=>Kr.toastId!==m.id))}},[v,m.id]),F.useLayoutEffect(()=>{if(!Ne)return;let St=Le.current,pn=St.style.height;St.style.height="auto";let Pn=St.getBoundingClientRect().height;St.style.height=pn,K(Pn),v(Kr=>Kr.find(Ni=>Ni.toastId===m.id)?Kr.map(Ni=>Ni.toastId===m.id?{...Ni,height:Pn}:Ni):[{toastId:m.id,height:Pn,position:m.position},...Kr])},[Ne,m.title,m.description,v,m.id]);let Sa=F.useCallback(()=>{_e(!0),Hr(ti.current),v(St=>St.filter(pn=>pn.toastId!==m.id)),setTimeout(()=>{P(m)},gce)},[m,P,v,ti]);F.useEffect(()=>{if(m.promise&&Ke==="loading"||m.duration===1/0||m.type==="loading")return;let St;return S||p||ae&&hc?(()=>{if(dc.current<ji.current){let pn=new Date().getTime()-ji.current;oe.current=oe.current-pn}dc.current=new Date().getTime()})():oe.current!==1/0&&(ji.current=new Date().getTime(),St=setTimeout(()=>{var pn;(pn=m.onAutoClose)==null||pn.call(m,m),Sa()},oe.current)),()=>clearTimeout(St)},[S,p,m,Ke,ae,hc,Sa]),F.useEffect(()=>{m.delete&&Sa()},[Sa,m.delete]);function fd(){var St,pn,Pn;return W!=null&&W.loading?F.createElement("div",{className:Ta(O==null?void 0:O.loader,(St=m==null?void 0:m.classNames)==null?void 0:St.loader,"sonner-loader"),"data-visible":Ke==="loading"},W.loading):M?F.createElement("div",{className:Ta(O==null?void 0:O.loader,(pn=m==null?void 0:m.classNames)==null?void 0:pn.loader,"sonner-loader"),"data-visible":Ke==="loading"},M):F.createElement(Qle,{className:Ta(O==null?void 0:O.loader,(Pn=m==null?void 0:m.classNames)==null?void 0:Pn.loader),visible:Ke==="loading"})}return F.createElement("li",{tabIndex:0,ref:Le,className:Ta(I,dn,O==null?void 0:O.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,O==null?void 0:O.default,O==null?void 0:O[Ke],(n=m==null?void 0:m.classNames)==null?void 0:n[Ke]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:j,"data-styled":!(m.jsx||m.unstyled||y),"data-mounted":Ne,"data-promise":!!m.promise,"data-swiped":zt,"data-removed":fe,"data-visible":Pe,"data-y-position":sf,"data-x-position":cl,"data-index":w,"data-front":$e,"data-swiping":ge,"data-dismissible":Kt,"data-type":Ke,"data-invert":Sb,"data-swipe-out":He,"data-swipe-direction":pe,"data-expanded":!!(S||$&&Ne),style:{"--index":w,"--toasts-before":w,"--z-index":C.length-w,"--offset":`${fe?En:ti.current}px`,"--initial-height":$?"auto":`${on}px`,...T,...m.style},onDragEnd:()=>{ce(!1),ie(null),ss.current=null},onPointerDown:St=>{kr||!Kt||(me.current=new Date,Hr(ti.current),St.target.setPointerCapture(St.pointerId),St.target.tagName!=="BUTTON"&&(ce(!0),ss.current={x:St.clientX,y:St.clientY}))},onPointerUp:()=>{var St,pn,Pn,Kr;if(He||!Kt)return;ss.current=null;let Ni=Number(((St=Le.current)==null?void 0:St.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),yo=Number(((pn=Le.current)==null?void 0:pn.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Hi=new Date().getTime()-((Pn=me.current)==null?void 0:Pn.getTime()),ni=Ae==="x"?Ni:yo,Ea=Math.abs(ni)/Hi;if(Math.abs(ni)>=pce||Ea>.11){Hr(ti.current),(Kr=m.onDismiss)==null||Kr.call(m,m),Ue(Ae==="x"?Ni>0?"right":"left":yo>0?"down":"up"),Sa(),rt(!0),nn(!1);return}ce(!1),ie(null)},onPointerMove:St=>{var pn,Pn,Kr,Ni;if(!ss.current||!Kt||((pn=window.getSelection())==null?void 0:pn.toString().length)>0)return;let yo=St.clientY-ss.current.y,Hi=St.clientX-ss.current.x,ni=(Pn=t.swipeDirections)!=null?Pn:yce(V);!Ae&&(Math.abs(Hi)>1||Math.abs(yo)>1)&&ie(Math.abs(Hi)>Math.abs(yo)?"x":"y");let Ea={x:0,y:0};Ae==="y"?(ni.includes("top")||ni.includes("bottom"))&&(ni.includes("top")&&yo<0||ni.includes("bottom")&&yo>0)&&(Ea.y=yo):Ae==="x"&&(ni.includes("left")||ni.includes("right"))&&(ni.includes("left")&&Hi<0||ni.includes("right")&&Hi>0)&&(Ea.x=Hi),(Math.abs(Ea.x)>0||Math.abs(Ea.y)>0)&&nn(!0),(Kr=Le.current)==null||Kr.style.setProperty("--swipe-amount-x",`${Ea.x}px`),(Ni=Le.current)==null||Ni.style.setProperty("--swipe-amount-y",`${Ea.y}px`)}},_i&&!m.jsx?F.createElement("button",{"aria-label":Z,"data-disabled":kr,"data-close-button":!0,onClick:kr||!Kt?()=>{}:()=>{var St;Sa(),(St=m.onDismiss)==null||St.call(m,m)},className:Ta(O==null?void 0:O.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(a=W==null?void 0:W.close)!=null?a:tce):null,m.jsx||_.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:F.createElement(F.Fragment,null,Ke||m.icon||m.promise?F.createElement("div",{"data-icon":"",className:Ta(O==null?void 0:O.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||fd():null,m.type!=="loading"?m.icon||(W==null?void 0:W[Ke])||Gle(Ke):null):null,F.createElement("div",{"data-content":"",className:Ta(O==null?void 0:O.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},F.createElement("div",{"data-title":"",className:Ta(O==null?void 0:O.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?F.createElement("div",{"data-description":"",className:Ta(k,ys,O==null?void 0:O.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),_.isValidElement(m.cancel)?m.cancel:m.cancel&&n0(m.cancel)?F.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||E,onClick:St=>{var pn,Pn;n0(m.cancel)&&Kt&&((Pn=(pn=m.cancel).onClick)==null||Pn.call(pn,St),Sa())},className:Ta(O==null?void 0:O.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,_.isValidElement(m.action)?m.action:m.action&&n0(m.action)?F.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||A,onClick:St=>{var pn,Pn;n0(m.action)&&((Pn=(pn=m.action).onClick)==null||Pn.call(pn,St),!St.defaultPrevented&&Sa())},className:Ta(O==null?void 0:O.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function f4(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function xce(t,e){let n={};return[t,e].forEach((r,s)=>{let a=s===1,o=a?"--mobile-offset":"--offset",l=a?hce:dce;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=l:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var bce=_.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:a,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:f,style:m,visibleToasts:y=uce,toastOptions:p,dir:v=f4(),gap:b=mce,loadingIcon:x,icons:w,containerAriaLabel:C="Notifications",pauseWhenPageIsHidden:S}=t,[P,j]=F.useState([]),g=F.useMemo(()=>Array.from(new Set([r].concat(P.filter(ae=>ae.position).map(ae=>ae.position)))),[P,r]),[T,E]=F.useState([]),[A,I]=F.useState(!1),[k,L]=F.useState(!1),[V,B]=F.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),M=F.useRef(null),$=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),O=F.useRef(null),W=F.useRef(!1),Z=F.useCallback(ae=>{j(Ae=>{var ie;return(ie=Ae.find(pe=>pe.id===ae.id))!=null&&ie.delete||oi.dismiss(ae.id),Ae.filter(({id:pe})=>pe!==ae.id)})},[]);return F.useEffect(()=>oi.subscribe(ae=>{if(ae.dismiss){j(Ae=>Ae.map(ie=>ie.id===ae.id?{...ie,delete:!0}:ie));return}setTimeout(()=>{Eq.flushSync(()=>{j(Ae=>{let ie=Ae.findIndex(pe=>pe.id===ae.id);return ie!==-1?[...Ae.slice(0,ie),{...Ae[ie],...ae},...Ae.slice(ie+1)]:[ae,...Ae]})})})}),[]),F.useEffect(()=>{if(d!=="system"){B(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?B("dark"):B("light")),typeof window>"u")return;let ae=window.matchMedia("(prefers-color-scheme: dark)");try{ae.addEventListener("change",({matches:Ae})=>{B(Ae?"dark":"light")})}catch{ae.addListener(({matches:ie})=>{try{B(ie?"dark":"light")}catch(pe){console.error(pe)}})}},[d]),F.useEffect(()=>{P.length<=1&&I(!1)},[P]),F.useEffect(()=>{let ae=Ae=>{var ie,pe;s.every(Ue=>Ae[Ue]||Ae.code===Ue)&&(I(!0),(ie=M.current)==null||ie.focus()),Ae.code==="Escape"&&(document.activeElement===M.current||(pe=M.current)!=null&&pe.contains(document.activeElement))&&I(!1)};return document.addEventListener("keydown",ae),()=>document.removeEventListener("keydown",ae)},[s]),F.useEffect(()=>{if(M.current)return()=>{O.current&&(O.current.focus({preventScroll:!0}),O.current=null,W.current=!1)}},[M.current]),F.createElement("section",{ref:e,"aria-label":`${C} ${$}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},g.map((ae,Ae)=>{var ie;let[pe,Ue]=ae.split("-");return P.length?F.createElement("ol",{key:ae,dir:v==="auto"?f4():v,tabIndex:-1,ref:M,className:l,"data-sonner-toaster":!0,"data-theme":V,"data-y-position":pe,"data-lifted":A&&P.length>1&&!a,"data-x-position":Ue,style:{"--front-toast-height":`${((ie=T[0])==null?void 0:ie.height)||0}px`,"--width":`${fce}px`,"--gap":`${b}px`,...m,...xce(c,u)},onBlur:Ne=>{W.current&&!Ne.currentTarget.contains(Ne.relatedTarget)&&(W.current=!1,O.current&&(O.current.focus({preventScroll:!0}),O.current=null))},onFocus:Ne=>{Ne.target instanceof HTMLElement&&Ne.target.dataset.dismissible==="false"||W.current||(W.current=!0,O.current=Ne.relatedTarget)},onMouseEnter:()=>I(!0),onMouseMove:()=>I(!0),onMouseLeave:()=>{k||I(!1)},onDragEnd:()=>I(!1),onPointerDown:Ne=>{Ne.target instanceof HTMLElement&&Ne.target.dataset.dismissible==="false"||L(!0)},onPointerUp:()=>L(!1)},P.filter(Ne=>!Ne.position&&Ae===0||Ne.position===ae).map((Ne,nt)=>{var fe,_e;return F.createElement(vce,{key:Ne.id,icons:w,index:nt,toast:Ne,defaultRichColors:h,duration:(fe=p==null?void 0:p.duration)!=null?fe:f,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:n,visibleToasts:y,closeButton:(_e=p==null?void 0:p.closeButton)!=null?_e:o,interacting:k,position:ae,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:Z,toasts:P.filter(ge=>ge.position==Ne.position),heights:T.filter(ge=>ge.position==Ne.position),setHeights:E,expandByDefault:a,gap:b,loadingIcon:x,expanded:A,pauseWhenPageIsHidden:S,swipeDirections:t.swipeDirections})})):null}))});const wce=({...t})=>{const{theme:e="system"}=Kle();return i.jsx(bce,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var _ce=tk[" useId ".trim().toString()]||(()=>{}),jce=0;function oa(t){const[e,n]=_.useState(_ce());return fr(()=>{n(r=>r??String(jce++))},[t]),e?`radix-${e}`:""}const Nce=["top","right","bottom","left"],Pu=Math.min,Pi=Math.max,Ww=Math.round,r0=Math.floor,$o=t=>({x:t,y:t}),Sce={left:"right",right:"left",bottom:"top",top:"bottom"},Ece={start:"end",end:"start"};function VT(t,e,n){return Pi(t,Pu(e,n))}function Vl(t,e){return typeof t=="function"?t(e):t}function Bl(t){return t.split("-")[0]}function $p(t){return t.split("-")[1]}function tR(t){return t==="x"?"y":"x"}function nR(t){return t==="y"?"height":"width"}const Ace=new Set(["top","bottom"]);function Po(t){return Ace.has(Bl(t))?"y":"x"}function rR(t){return tR(Po(t))}function Tce(t,e,n){n===void 0&&(n=!1);const r=$p(t),s=rR(t),a=nR(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=Hw(o)),[o,Hw(o)]}function Cce(t){const e=Hw(t);return[BT(t),e,BT(e)]}function BT(t){return t.replace(/start|end/g,e=>Ece[e])}const m4=["left","right"],p4=["right","left"],Pce=["top","bottom"],Ice=["bottom","top"];function kce(t,e,n){switch(t){case"top":case"bottom":return n?e?p4:m4:e?m4:p4;case"left":case"right":return e?Pce:Ice;default:return[]}}function Rce(t,e,n,r){const s=$p(t);let a=kce(Bl(t),n==="start",r);return s&&(a=a.map(o=>o+"-"+s),e&&(a=a.concat(a.map(BT)))),a}function Hw(t){return t.replace(/left|right|bottom|top/g,e=>Sce[e])}function Oce(t){return{top:0,right:0,bottom:0,left:0,...t}}function j8(t){return typeof t!="number"?Oce(t):{top:t,right:t,bottom:t,left:t}}function Kw(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function g4(t,e,n){let{reference:r,floating:s}=t;const a=Po(e),o=rR(e),l=nR(o),c=Bl(e),u=a==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[l]/2-s[l]/2;let m;switch(c){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch($p(e)){case"start":m[o]-=f*(n&&u?-1:1);break;case"end":m[o]+=f*(n&&u?-1:1);break}return m}const Dce=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=g4(u,r,c),f=r,m={},y=0;for(let p=0;p<l.length;p++){const{name:v,fn:b}=l[p],{x,y:w,data:C,reset:S}=await b({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:m,rects:u,platform:o,elements:{reference:t,floating:e}});d=x??d,h=w??h,m={...m,[v]:{...m[v],...C}},S&&y<=50&&(y++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(u=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):S.rects),{x:d,y:h}=g4(u,f,c)),p=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:m}};async function pv(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:a,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=Vl(e,t),y=j8(m),v=l[f?h==="floating"?"reference":"floating":h],b=Kw(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(v)))==null||n?v:v.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),x=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,w=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),C=await(a.isElement==null?void 0:a.isElement(w))?await(a.getScale==null?void 0:a.getScale(w))||{x:1,y:1}:{x:1,y:1},S=Kw(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:w,strategy:c}):x);return{top:(b.top-S.top+y.top)/C.y,bottom:(S.bottom-b.bottom+y.bottom)/C.y,left:(b.left-S.left+y.left)/C.x,right:(S.right-b.right+y.right)/C.x}}const Mce=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:a,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=Vl(t,e)||{};if(u==null)return{};const h=j8(d),f={x:n,y:r},m=rR(s),y=nR(m),p=await o.getDimensions(u),v=m==="y",b=v?"top":"left",x=v?"bottom":"right",w=v?"clientHeight":"clientWidth",C=a.reference[y]+a.reference[m]-f[m]-a.floating[y],S=f[m]-a.reference[m],P=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let j=P?P[w]:0;(!j||!await(o.isElement==null?void 0:o.isElement(P)))&&(j=l.floating[w]||a.floating[y]);const g=C/2-S/2,T=j/2-p[y]/2-1,E=Pu(h[b],T),A=Pu(h[x],T),I=E,k=j-p[y]-A,L=j/2-p[y]/2+g,V=VT(I,L,k),B=!c.arrow&&$p(s)!=null&&L!==V&&a.reference[y]/2-(L<I?E:A)-p[y]/2<0,M=B?L<I?L-I:L-k:0;return{[m]:f[m]+M,data:{[m]:V,centerOffset:L-V-M,...B&&{alignmentOffset:M}},reset:B}}}),Lce=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:p=!0,...v}=Vl(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const b=Bl(s),x=Po(l),w=Bl(l)===l,C=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=f||(w||!p?[Hw(l)]:Cce(l)),P=y!=="none";!f&&P&&S.push(...Rce(l,p,y,C));const j=[l,...S],g=await pv(e,v),T=[];let E=((r=a.flip)==null?void 0:r.overflows)||[];if(d&&T.push(g[b]),h){const L=Tce(s,o,C);T.push(g[L[0]],g[L[1]])}if(E=[...E,{placement:s,overflows:T}],!T.every(L=>L<=0)){var A,I;const L=(((A=a.flip)==null?void 0:A.index)||0)+1,V=j[L];if(V&&(!(h==="alignment"?x!==Po(V):!1)||E.every($=>$.overflows[0]>0&&Po($.placement)===x)))return{data:{index:L,overflows:E},reset:{placement:V}};let B=(I=E.filter(M=>M.overflows[0]<=0).sort((M,$)=>M.overflows[1]-$.overflows[1])[0])==null?void 0:I.placement;if(!B)switch(m){case"bestFit":{var k;const M=(k=E.filter($=>{if(P){const O=Po($.placement);return O===x||O==="y"}return!0}).map($=>[$.placement,$.overflows.filter(O=>O>0).reduce((O,W)=>O+W,0)]).sort(($,O)=>$[1]-O[1])[0])==null?void 0:k[0];M&&(B=M);break}case"initialPlacement":B=l;break}if(s!==B)return{reset:{placement:B}}}return{}}}};function y4(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function v4(t){return Nce.some(e=>t[e]>=0)}const $ce=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Vl(t,e);switch(r){case"referenceHidden":{const a=await pv(e,{...s,elementContext:"reference"}),o=y4(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:v4(o)}}}case"escaped":{const a=await pv(e,{...s,altBoundary:!0}),o=y4(a,n.floating);return{data:{escapedOffsets:o,escaped:v4(o)}}}default:return{}}}}},N8=new Set(["left","top"]);async function Fce(t,e){const{placement:n,platform:r,elements:s}=t,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Bl(n),l=$p(n),c=Po(n)==="y",u=N8.has(o)?-1:1,d=a&&c?-1:1,h=Vl(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof y=="number"&&(m=l==="end"?y*-1:y),c?{x:m*d,y:f*u}:{x:f*u,y:m*d}}const Vce=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:a,placement:o,middlewareData:l}=e,c=await Fce(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:o}}}}},Bce=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:v=>{let{x:b,y:x}=v;return{x:b,y:x}}},...c}=Vl(t,e),u={x:n,y:r},d=await pv(e,c),h=Po(Bl(s)),f=tR(h);let m=u[f],y=u[h];if(a){const v=f==="y"?"top":"left",b=f==="y"?"bottom":"right",x=m+d[v],w=m-d[b];m=VT(x,m,w)}if(o){const v=h==="y"?"top":"left",b=h==="y"?"bottom":"right",x=y+d[v],w=y-d[b];y=VT(x,y,w)}const p=l.fn({...e,[f]:m,[h]:y});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[f]:a,[h]:o}}}}}},Uce=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:a,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Vl(t,e),d={x:n,y:r},h=Po(s),f=tR(h);let m=d[f],y=d[h];const p=Vl(l,e),v=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const w=f==="y"?"height":"width",C=a.reference[f]-a.floating[w]+v.mainAxis,S=a.reference[f]+a.reference[w]-v.mainAxis;m<C?m=C:m>S&&(m=S)}if(u){var b,x;const w=f==="y"?"width":"height",C=N8.has(Bl(s)),S=a.reference[h]-a.floating[w]+(C&&((b=o.offset)==null?void 0:b[h])||0)+(C?0:v.crossAxis),P=a.reference[h]+a.reference[w]+(C?0:((x=o.offset)==null?void 0:x[h])||0)-(C?v.crossAxis:0);y<S?y=S:y>P&&(y=P)}return{[f]:m,[h]:y}}}},zce=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:a,platform:o,elements:l}=e,{apply:c=()=>{},...u}=Vl(t,e),d=await pv(e,u),h=Bl(s),f=$p(s),m=Po(s)==="y",{width:y,height:p}=a.floating;let v,b;h==="top"||h==="bottom"?(v=h,b=f===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(b=h,v=f==="end"?"top":"bottom");const x=p-d.top-d.bottom,w=y-d.left-d.right,C=Pu(p-d[v],x),S=Pu(y-d[b],w),P=!e.middlewareData.shift;let j=C,g=S;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(g=w),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(j=x),P&&!f){const E=Pi(d.left,0),A=Pi(d.right,0),I=Pi(d.top,0),k=Pi(d.bottom,0);m?g=y-2*(E!==0||A!==0?E+A:Pi(d.left,d.right)):j=p-2*(I!==0||k!==0?I+k:Pi(d.top,d.bottom))}await c({...e,availableWidth:g,availableHeight:j});const T=await o.getDimensions(l.floating);return y!==T.width||p!==T.height?{reset:{rects:!0}}:{}}}};function mN(){return typeof window<"u"}function Fp(t){return S8(t)?(t.nodeName||"").toLowerCase():"#document"}function Fi(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function rl(t){var e;return(e=(S8(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function S8(t){return mN()?t instanceof Node||t instanceof Fi(t).Node:!1}function co(t){return mN()?t instanceof Element||t instanceof Fi(t).Element:!1}function Xo(t){return mN()?t instanceof HTMLElement||t instanceof Fi(t).HTMLElement:!1}function x4(t){return!mN()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Fi(t).ShadowRoot}const qce=new Set(["inline","contents"]);function Vx(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=uo(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!qce.has(s)}const Wce=new Set(["table","td","th"]);function Hce(t){return Wce.has(Fp(t))}const Kce=[":popover-open",":modal"];function pN(t){return Kce.some(e=>{try{return t.matches(e)}catch{return!1}})}const Gce=["transform","translate","scale","rotate","perspective"],Yce=["transform","translate","scale","rotate","perspective","filter"],Qce=["paint","layout","strict","content"];function sR(t){const e=iR(),n=co(t)?uo(t):t;return Gce.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Yce.some(r=>(n.willChange||"").includes(r))||Qce.some(r=>(n.contain||"").includes(r))}function Xce(t){let e=Iu(t);for(;Xo(e)&&!Um(e);){if(sR(e))return e;if(pN(e))return null;e=Iu(e)}return null}function iR(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Zce=new Set(["html","body","#document"]);function Um(t){return Zce.has(Fp(t))}function uo(t){return Fi(t).getComputedStyle(t)}function gN(t){return co(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Iu(t){if(Fp(t)==="html")return t;const e=t.assignedSlot||t.parentNode||x4(t)&&t.host||rl(t);return x4(e)?e.host:e}function E8(t){const e=Iu(t);return Um(e)?t.ownerDocument?t.ownerDocument.body:t.body:Xo(e)&&Vx(e)?e:E8(e)}function gv(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=E8(t),a=s===((r=t.ownerDocument)==null?void 0:r.body),o=Fi(s);if(a){const l=UT(o);return e.concat(o,o.visualViewport||[],Vx(s)?s:[],l&&n?gv(l):[])}return e.concat(s,gv(s,[],n))}function UT(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function A8(t){const e=uo(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Xo(t),a=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=Ww(n)!==a||Ww(r)!==o;return l&&(n=a,r=o),{width:n,height:r,$:l}}function aR(t){return co(t)?t:t.contextElement}function sm(t){const e=aR(t);if(!Xo(e))return $o(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:a}=A8(e);let o=(a?Ww(n.width):n.width)/r,l=(a?Ww(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Jce=$o(0);function T8(t){const e=Fi(t);return!iR()||!e.visualViewport?Jce:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function eue(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Fi(t)?!1:e}function xh(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),a=aR(t);let o=$o(1);e&&(r?co(r)&&(o=sm(r)):o=sm(t));const l=eue(a,n,r)?T8(a):$o(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(a){const f=Fi(a),m=r&&co(r)?Fi(r):r;let y=f,p=UT(y);for(;p&&r&&m!==y;){const v=sm(p),b=p.getBoundingClientRect(),x=uo(p),w=b.left+(p.clientLeft+parseFloat(x.paddingLeft))*v.x,C=b.top+(p.clientTop+parseFloat(x.paddingTop))*v.y;c*=v.x,u*=v.y,d*=v.x,h*=v.y,c+=w,u+=C,y=Fi(p),p=UT(y)}}return Kw({width:d,height:h,x:c,y:u})}function oR(t,e){const n=gN(t).scrollLeft;return e?e.left+n:xh(rl(t)).left+n}function C8(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:oR(t,r)),a=r.top+e.scrollTop;return{x:s,y:a}}function tue(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const a=s==="fixed",o=rl(r),l=e?pN(e.floating):!1;if(r===o||l&&a)return n;let c={scrollLeft:0,scrollTop:0},u=$o(1);const d=$o(0),h=Xo(r);if((h||!h&&!a)&&((Fp(r)!=="body"||Vx(o))&&(c=gN(r)),Xo(r))){const m=xh(r);u=sm(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const f=o&&!h&&!a?C8(o,c,!0):$o(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:n.y*u.y-c.scrollTop*u.y+d.y+f.y}}function nue(t){return Array.from(t.getClientRects())}function rue(t){const e=rl(t),n=gN(t),r=t.ownerDocument.body,s=Pi(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Pi(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+oR(t);const l=-n.scrollTop;return uo(r).direction==="rtl"&&(o+=Pi(e.clientWidth,r.clientWidth)-s),{width:s,height:a,x:o,y:l}}function sue(t,e){const n=Fi(t),r=rl(t),s=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){a=s.width,o=s.height;const u=iR();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:a,height:o,x:l,y:c}}const iue=new Set(["absolute","fixed"]);function aue(t,e){const n=xh(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,a=Xo(t)?sm(t):$o(1),o=t.clientWidth*a.x,l=t.clientHeight*a.y,c=s*a.x,u=r*a.y;return{width:o,height:l,x:c,y:u}}function b4(t,e,n){let r;if(e==="viewport")r=sue(t,n);else if(e==="document")r=rue(rl(t));else if(co(e))r=aue(e,n);else{const s=T8(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Kw(r)}function P8(t,e){const n=Iu(t);return n===e||!co(n)||Um(n)?!1:uo(n).position==="fixed"||P8(n,e)}function oue(t,e){const n=e.get(t);if(n)return n;let r=gv(t,[],!1).filter(l=>co(l)&&Fp(l)!=="body"),s=null;const a=uo(t).position==="fixed";let o=a?Iu(t):t;for(;co(o)&&!Um(o);){const l=uo(o),c=sR(o);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&iue.has(s.position)||Vx(o)&&!c&&P8(t,o))?r=r.filter(d=>d!==o):s=l,o=Iu(o)}return e.set(t,r),r}function lue(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?pN(e)?[]:oue(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,d)=>{const h=b4(e,d,s);return u.top=Pi(h.top,u.top),u.right=Pu(h.right,u.right),u.bottom=Pu(h.bottom,u.bottom),u.left=Pi(h.left,u.left),u},b4(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function cue(t){const{width:e,height:n}=A8(t);return{width:e,height:n}}function uue(t,e,n){const r=Xo(e),s=rl(e),a=n==="fixed",o=xh(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const c=$o(0);function u(){c.x=oR(s)}if(r||!r&&!a)if((Fp(e)!=="body"||Vx(s))&&(l=gN(e)),r){const m=xh(e,!0,a,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else s&&u();a&&!r&&s&&u();const d=s&&!r&&!a?C8(s,l):$o(0),h=o.left+l.scrollLeft-c.x-d.x,f=o.top+l.scrollTop-c.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function lE(t){return uo(t).position==="static"}function w4(t,e){if(!Xo(t)||uo(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return rl(t)===n&&(n=n.ownerDocument.body),n}function I8(t,e){const n=Fi(t);if(pN(t))return n;if(!Xo(t)){let s=Iu(t);for(;s&&!Um(s);){if(co(s)&&!lE(s))return s;s=Iu(s)}return n}let r=w4(t,e);for(;r&&Hce(r)&&lE(r);)r=w4(r,e);return r&&Um(r)&&lE(r)&&!sR(r)?n:r||Xce(t)||n}const due=async function(t){const e=this.getOffsetParent||I8,n=this.getDimensions,r=await n(t.floating);return{reference:uue(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function hue(t){return uo(t).direction==="rtl"}const fue={convertOffsetParentRelativeRectToViewportRelativeRect:tue,getDocumentElement:rl,getClippingRect:lue,getOffsetParent:I8,getElementRects:due,getClientRects:nue,getDimensions:cue,getScale:sm,isElement:co,isRTL:hue};function k8(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function mue(t,e){let n=null,r;const s=rl(t);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const u=t.getBoundingClientRect(),{left:d,top:h,width:f,height:m}=u;if(l||e(),!f||!m)return;const y=r0(h),p=r0(s.clientWidth-(d+f)),v=r0(s.clientHeight-(h+m)),b=r0(d),w={rootMargin:-y+"px "+-p+"px "+-v+"px "+-b+"px",threshold:Pi(0,Pu(1,c))||1};let C=!0;function S(P){const j=P[0].intersectionRatio;if(j!==c){if(!C)return o();j?o(!1,j):r=setTimeout(()=>{o(!1,1e-7)},1e3)}j===1&&!k8(u,t.getBoundingClientRect())&&o(),C=!1}try{n=new IntersectionObserver(S,{...w,root:s.ownerDocument})}catch{n=new IntersectionObserver(S,w)}n.observe(t)}return o(!0),a}function pue(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=aR(t),d=s||a?[...u?gv(u):[],...gv(e)]:[];d.forEach(b=>{s&&b.addEventListener("scroll",n,{passive:!0}),a&&b.addEventListener("resize",n)});const h=u&&l?mue(u,n):null;let f=-1,m=null;o&&(m=new ResizeObserver(b=>{let[x]=b;x&&x.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(e)})),n()}),u&&!c&&m.observe(u),m.observe(e));let y,p=c?xh(t):null;c&&v();function v(){const b=xh(t);p&&!k8(p,b)&&n(),p=b,y=requestAnimationFrame(v)}return n(),()=>{var b;d.forEach(x=>{s&&x.removeEventListener("scroll",n),a&&x.removeEventListener("resize",n)}),h==null||h(),(b=m)==null||b.disconnect(),m=null,c&&cancelAnimationFrame(y)}}const gue=Vce,yue=Bce,vue=Lce,xue=zce,bue=$ce,_4=Mce,wue=Uce,_ue=(t,e,n)=>{const r=new Map,s={platform:fue,...n},a={...s.platform,_c:r};return Dce(t,e,{...s,platform:a})};var jue=typeof document<"u",Nue=function(){},Q0=jue?_.useLayoutEffect:Nue;function Gw(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Gw(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&t.$$typeof)&&!Gw(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function R8(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function j4(t,e){const n=R8(t);return Math.round(e*n)/n}function cE(t){const e=_.useRef(t);return Q0(()=>{e.current=t}),e}function Sue(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,h]=_.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=_.useState(r);Gw(f,r)||m(r);const[y,p]=_.useState(null),[v,b]=_.useState(null),x=_.useCallback($=>{$!==P.current&&(P.current=$,p($))},[]),w=_.useCallback($=>{$!==j.current&&(j.current=$,b($))},[]),C=a||y,S=o||v,P=_.useRef(null),j=_.useRef(null),g=_.useRef(d),T=c!=null,E=cE(c),A=cE(s),I=cE(u),k=_.useCallback(()=>{if(!P.current||!j.current)return;const $={placement:e,strategy:n,middleware:f};A.current&&($.platform=A.current),_ue(P.current,j.current,$).then(O=>{const W={...O,isPositioned:I.current!==!1};L.current&&!Gw(g.current,W)&&(g.current=W,zh.flushSync(()=>{h(W)}))})},[f,e,n,A,I]);Q0(()=>{u===!1&&g.current.isPositioned&&(g.current.isPositioned=!1,h($=>({...$,isPositioned:!1})))},[u]);const L=_.useRef(!1);Q0(()=>(L.current=!0,()=>{L.current=!1}),[]),Q0(()=>{if(C&&(P.current=C),S&&(j.current=S),C&&S){if(E.current)return E.current(C,S,k);k()}},[C,S,k,E,T]);const V=_.useMemo(()=>({reference:P,floating:j,setReference:x,setFloating:w}),[x,w]),B=_.useMemo(()=>({reference:C,floating:S}),[C,S]),M=_.useMemo(()=>{const $={position:n,left:0,top:0};if(!B.floating)return $;const O=j4(B.floating,d.x),W=j4(B.floating,d.y);return l?{...$,transform:"translate("+O+"px, "+W+"px)",...R8(B.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:O,top:W}},[n,l,B.floating,d.x,d.y]);return _.useMemo(()=>({...d,update:k,refs:V,elements:B,floatingStyles:M}),[d,k,V,B,M])}const Eue=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?_4({element:r.current,padding:s}).fn(n):{}:r?_4({element:r,padding:s}).fn(n):{}}}},Aue=(t,e)=>({...gue(t),options:[t,e]}),Tue=(t,e)=>({...yue(t),options:[t,e]}),Cue=(t,e)=>({...wue(t),options:[t,e]}),Pue=(t,e)=>({...vue(t),options:[t,e]}),Iue=(t,e)=>({...xue(t),options:[t,e]}),kue=(t,e)=>({...bue(t),options:[t,e]}),Rue=(t,e)=>({...Eue(t),options:[t,e]});var Oue="Arrow",O8=_.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...a}=t;return i.jsx(st.svg,{...a,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});O8.displayName=Oue;var Due=O8;function lR(t){const[e,n]=_.useState(void 0);return fr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var cR="Popper",[D8,Vp]=ps(cR),[Mue,M8]=D8(cR),L8=t=>{const{__scopePopper:e,children:n}=t,[r,s]=_.useState(null);return i.jsx(Mue,{scope:e,anchor:r,onAnchorChange:s,children:n})};L8.displayName=cR;var $8="PopperAnchor",F8=_.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,a=M8($8,n),o=_.useRef(null),l=Mt(e,o);return _.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:i.jsx(st.div,{...s,ref:l})});F8.displayName=$8;var uR="PopperContent",[Lue,$ue]=D8(uR),V8=_.forwardRef((t,e)=>{var Ne,nt,fe,_e,ge,ce;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:y,...p}=t,v=M8(uR,n),[b,x]=_.useState(null),w=Mt(e,He=>x(He)),[C,S]=_.useState(null),P=lR(C),j=(P==null?void 0:P.width)??0,g=(P==null?void 0:P.height)??0,T=r+(a!=="center"?"-"+a:""),E=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},A=Array.isArray(u)?u:[u],I=A.length>0,k={padding:E,boundary:A.filter(Vue),altBoundary:I},{refs:L,floatingStyles:V,placement:B,isPositioned:M,middlewareData:$}=Sue({strategy:"fixed",placement:T,whileElementsMounted:(...He)=>pue(...He,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[Aue({mainAxis:s+g,alignmentAxis:o}),c&&Tue({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Cue():void 0,...k}),c&&Pue({...k}),Iue({...k,apply:({elements:He,rects:rt,availableWidth:zt,availableHeight:nn})=>{const{width:En,height:Hr}=rt.reference,on=He.floating.style;on.setProperty("--radix-popper-available-width",`${zt}px`),on.setProperty("--radix-popper-available-height",`${nn}px`),on.setProperty("--radix-popper-anchor-width",`${En}px`),on.setProperty("--radix-popper-anchor-height",`${Hr}px`)}}),C&&Rue({element:C,padding:l}),Bue({arrowWidth:j,arrowHeight:g}),f&&kue({strategy:"referenceHidden",...k})]}),[O,W]=z8(B),Z=hr(y);fr(()=>{M&&(Z==null||Z())},[M,Z]);const ae=(Ne=$.arrow)==null?void 0:Ne.x,Ae=(nt=$.arrow)==null?void 0:nt.y,ie=((fe=$.arrow)==null?void 0:fe.centerOffset)!==0,[pe,Ue]=_.useState();return fr(()=>{b&&Ue(window.getComputedStyle(b).zIndex)},[b]),i.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...V,transform:M?V.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:pe,"--radix-popper-transform-origin":[(_e=$.transformOrigin)==null?void 0:_e.x,(ge=$.transformOrigin)==null?void 0:ge.y].join(" "),...((ce=$.hide)==null?void 0:ce.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:i.jsx(Lue,{scope:n,placedSide:O,onArrowChange:S,arrowX:ae,arrowY:Ae,shouldHideArrow:ie,children:i.jsx(st.div,{"data-side":O,"data-align":W,...p,ref:w,style:{...p.style,animation:M?void 0:"none"}})})})});V8.displayName=uR;var B8="PopperArrow",Fue={top:"bottom",right:"left",bottom:"top",left:"right"},U8=_.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,a=$ue(B8,r),o=Fue[a.placedSide];return i.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:i.jsx(Due,{...s,ref:n,style:{...s.style,display:"block"}})})});U8.displayName=B8;function Vue(t){return t!==null}var Bue=t=>({name:"transformOrigin",options:t,fn(e){var v,b,x;const{placement:n,rects:r,middlewareData:s}=e,o=((v=s.arrow)==null?void 0:v.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,d]=z8(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((b=s.arrow)==null?void 0:b.x)??0)+l/2,m=(((x=s.arrow)==null?void 0:x.y)??0)+c/2;let y="",p="";return u==="bottom"?(y=o?h:`${f}px`,p=`${-c}px`):u==="top"?(y=o?h:`${f}px`,p=`${r.floating.height+c}px`):u==="right"?(y=`${-c}px`,p=o?h:`${m}px`):u==="left"&&(y=`${r.floating.width+c}px`,p=o?h:`${m}px`),{data:{x:y,y:p}}}});function z8(t){const[e,n="center"]=t.split("-");return[e,n]}var dR=L8,hR=F8,fR=V8,mR=U8,[yN,Ctt]=ps("Tooltip",[Vp]),vN=Vp(),q8="TooltipProvider",Uue=700,zT="tooltip.open",[zue,pR]=yN(q8),W8=t=>{const{__scopeTooltip:e,delayDuration:n=Uue,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=t,o=_.useRef(!0),l=_.useRef(!1),c=_.useRef(0);return _.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),i.jsx(zue,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:_.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:_.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:_.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:a})};W8.displayName=q8;var yv="Tooltip",[que,xN]=yN(yv),H8=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s,onOpenChange:a,disableHoverableContent:o,delayDuration:l}=t,c=pR(yv,t.__scopeTooltip),u=vN(e),[d,h]=_.useState(null),f=oa(),m=_.useRef(0),y=o??c.disableHoverableContent,p=l??c.delayDuration,v=_.useRef(!1),[b,x]=oo({prop:r,defaultProp:s??!1,onChange:j=>{j?(c.onOpen(),document.dispatchEvent(new CustomEvent(zT))):c.onClose(),a==null||a(j)},caller:yv}),w=_.useMemo(()=>b?v.current?"delayed-open":"instant-open":"closed",[b]),C=_.useCallback(()=>{window.clearTimeout(m.current),m.current=0,v.current=!1,x(!0)},[x]),S=_.useCallback(()=>{window.clearTimeout(m.current),m.current=0,x(!1)},[x]),P=_.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{v.current=!0,x(!0),m.current=0},p)},[p,x]);return _.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),i.jsx(dR,{...u,children:i.jsx(que,{scope:e,contentId:f,open:b,stateAttribute:w,trigger:d,onTriggerChange:h,onTriggerEnter:_.useCallback(()=>{c.isOpenDelayedRef.current?P():C()},[c.isOpenDelayedRef,P,C]),onTriggerLeave:_.useCallback(()=>{y?S():(window.clearTimeout(m.current),m.current=0)},[S,y]),onOpen:C,onClose:S,disableHoverableContent:y,children:n})})};H8.displayName=yv;var qT="TooltipTrigger",K8=_.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=xN(qT,n),a=pR(qT,n),o=vN(n),l=_.useRef(null),c=Mt(e,l,s.onTriggerChange),u=_.useRef(!1),d=_.useRef(!1),h=_.useCallback(()=>u.current=!1,[]);return _.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),i.jsx(hR,{asChild:!0,...o,children:i.jsx(st.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:Me(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Me(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Me(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Me(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:Me(t.onBlur,s.onClose),onClick:Me(t.onClick,s.onClose)})})});K8.displayName=qT;var Wue="TooltipPortal",[Ptt,Hue]=yN(Wue,{forceMount:void 0}),zm="TooltipContent",G8=_.forwardRef((t,e)=>{const n=Hue(zm,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=t,o=xN(zm,t.__scopeTooltip);return i.jsx(gs,{present:r||o.open,children:o.disableHoverableContent?i.jsx(Y8,{side:s,...a,ref:e}):i.jsx(Kue,{side:s,...a,ref:e})})}),Kue=_.forwardRef((t,e)=>{const n=xN(zm,t.__scopeTooltip),r=pR(zm,t.__scopeTooltip),s=_.useRef(null),a=Mt(e,s),[o,l]=_.useState(null),{trigger:c,onClose:u}=n,d=s.current,{onPointerInTransitChange:h}=r,f=_.useCallback(()=>{l(null),h(!1)},[h]),m=_.useCallback((y,p)=>{const v=y.currentTarget,b={x:y.clientX,y:y.clientY},x=Zue(b,v.getBoundingClientRect()),w=Jue(b,x),C=ede(p.getBoundingClientRect()),S=nde([...w,...C]);l(S),h(!0)},[h]);return _.useEffect(()=>()=>f(),[f]),_.useEffect(()=>{if(c&&d){const y=v=>m(v,d),p=v=>m(v,c);return c.addEventListener("pointerleave",y),d.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",y),d.removeEventListener("pointerleave",p)}}},[c,d,m,f]),_.useEffect(()=>{if(o){const y=p=>{const v=p.target,b={x:p.clientX,y:p.clientY},x=(c==null?void 0:c.contains(v))||(d==null?void 0:d.contains(v)),w=!tde(b,o);x?f():w&&(f(),u())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,d,o,u,f]),i.jsx(Y8,{...t,ref:a})}),[Gue,Yue]=yN(yv,{isInside:!1}),Que=Cq("TooltipContent"),Y8=_.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=t,c=xN(zm,n),u=vN(n),{onClose:d}=c;return _.useEffect(()=>(document.addEventListener(zT,d),()=>document.removeEventListener(zT,d)),[d]),_.useEffect(()=>{if(c.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),i.jsx(Dp,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:i.jsxs(fR,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(Que,{children:r}),i.jsx(Gue,{scope:n,isInside:!0,children:i.jsx(hoe,{id:c.contentId,role:"tooltip",children:s||r})})]})})});G8.displayName=zm;var Q8="TooltipArrow",Xue=_.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=vN(n);return Yue(Q8,n).isInside?null:i.jsx(mR,{...s,...r,ref:e})});Xue.displayName=Q8;function Zue(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Jue(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function ede(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function tde(t,e){const{x:n,y:r}=t;let s=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a],c=e[o],u=l.x,d=l.y,h=c.x,f=c.y;d>r!=f>r&&n<(h-u)*(r-d)/(f-d)+u&&(s=!s)}return s}function nde(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),rde(e)}function rde(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const a=e[e.length-1],o=e[e.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const a=n[n.length-1],o=n[n.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var sde=W8,ide=H8,ade=K8,X8=G8;const Z8=sde,ode=ide,lde=ade,J8=_.forwardRef(({className:t,sideOffset:e=4,...n},r)=>i.jsx(X8,{ref:r,sideOffset:e,className:ve("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));J8.displayName=X8.displayName;var Bp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},bh=typeof window>"u"||"Deno"in globalThis;function Us(){}function cde(t,e){return typeof t=="function"?t(e):t}function WT(t){return typeof t=="number"&&t>=0&&t!==1/0}function eW(t,e){return Math.max(t+(e||0)-Date.now(),0)}function yu(t,e){return typeof t=="function"?t(e):t}function Xi(t,e){return typeof t=="function"?t(e):t}function N4(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==gR(o,e.options))return!1}else if(!vv(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||a&&!a(e))}function S4(t,e){const{exact:n,status:r,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(wh(e.options.mutationKey)!==wh(a))return!1}else if(!vv(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function gR(t,e){return((e==null?void 0:e.queryKeyHashFn)||wh)(t)}function wh(t){return JSON.stringify(t,(e,n)=>HT(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function vv(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>vv(t[n],e[n])):!1}function tW(t,e){if(t===e)return t;const n=E4(t)&&E4(e);if(n||HT(t)&&HT(e)){const r=n?t:Object.keys(t),s=r.length,a=n?e:Object.keys(e),o=a.length,l=n?[]:{},c=new Set(r);let u=0;for(let d=0;d<o;d++){const h=n?d:a[d];(!n&&c.has(h)||n)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,u++):(l[h]=tW(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&u++)}return s===o&&u===s?t:l}return e}function Yw(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function E4(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function HT(t){if(!A4(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!A4(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function A4(t){return Object.prototype.toString.call(t)==="[object Object]"}function ude(t){return new Promise(e=>{setTimeout(e,t)})}function KT(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?tW(t,e):e}function dde(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function hde(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var yR=Symbol();function nW(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===yR?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function rW(t,e){return typeof t=="function"?t(...e):!!t}var Hd,qc,bm,sz,fde=(sz=class extends Bp{constructor(){super();xt(this,Hd);xt(this,qc);xt(this,bm);Ge(this,bm,e=>{if(!bh&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){J(this,qc)||this.setEventListener(J(this,bm))}onUnsubscribe(){var e;this.hasListeners()||((e=J(this,qc))==null||e.call(this),Ge(this,qc,void 0))}setEventListener(e){var n;Ge(this,bm,e),(n=J(this,qc))==null||n.call(this),Ge(this,qc,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){J(this,Hd)!==e&&(Ge(this,Hd,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof J(this,Hd)=="boolean"?J(this,Hd):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Hd=new WeakMap,qc=new WeakMap,bm=new WeakMap,sz),vR=new fde,wm,Wc,_m,iz,mde=(iz=class extends Bp{constructor(){super();xt(this,wm,!0);xt(this,Wc);xt(this,_m);Ge(this,_m,e=>{if(!bh&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){J(this,Wc)||this.setEventListener(J(this,_m))}onUnsubscribe(){var e;this.hasListeners()||((e=J(this,Wc))==null||e.call(this),Ge(this,Wc,void 0))}setEventListener(e){var n;Ge(this,_m,e),(n=J(this,Wc))==null||n.call(this),Ge(this,Wc,e(this.setOnline.bind(this)))}setOnline(e){J(this,wm)!==e&&(Ge(this,wm,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return J(this,wm)}},wm=new WeakMap,Wc=new WeakMap,_m=new WeakMap,iz),Qw=new mde;function GT(){let t,e;const n=new Promise((s,a)=>{t=s,e=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function pde(t){return Math.min(1e3*2**t,3e4)}function sW(t){return(t??"online")==="online"?Qw.isOnline():!0}var iW=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function uE(t){return t instanceof iW}function aW(t){let e=!1,n=0,r=!1,s;const a=GT(),o=p=>{var v;r||(f(new iW(p)),(v=t.abort)==null||v.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>vR.isFocused()&&(t.networkMode==="always"||Qw.isOnline())&&t.canRun(),d=()=>sW(t.networkMode)&&t.canRun(),h=p=>{var v;r||(r=!0,(v=t.onSuccess)==null||v.call(t,p),s==null||s(),a.resolve(p))},f=p=>{var v;r||(r=!0,(v=t.onError)==null||v.call(t,p),s==null||s(),a.reject(p))},m=()=>new Promise(p=>{var v;s=b=>{(r||u())&&p(b)},(v=t.onPause)==null||v.call(t)}).then(()=>{var p;s=void 0,r||(p=t.onContinue)==null||p.call(t)}),y=()=>{if(r)return;let p;const v=n===0?t.initialPromise:void 0;try{p=v??t.fn()}catch(b){p=Promise.reject(b)}Promise.resolve(p).then(h).catch(b=>{var P;if(r)return;const x=t.retry??(bh?0:3),w=t.retryDelay??pde,C=typeof w=="function"?w(n,b):w,S=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,b);if(e||!S){f(b);return}n++,(P=t.onFail)==null||P.call(t,n,b),ude(C).then(()=>u()?void 0:m()).then(()=>{e?f(b):y()})})};return{promise:a,cancel:o,continue:()=>(s==null||s(),a),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?y():m().then(y),a)}}var gde=t=>setTimeout(t,0);function yde(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=gde;const a=l=>{e?t.push(l):s(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Fr=yde(),Kd,az,oW=(az=class{constructor(){xt(this,Kd)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),WT(this.gcTime)&&Ge(this,Kd,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(bh?1/0:5*60*1e3))}clearGcTimeout(){J(this,Kd)&&(clearTimeout(J(this,Kd)),Ge(this,Kd,void 0))}},Kd=new WeakMap,az),jm,Gd,Qi,Yd,ws,Sx,Qd,Oa,fl,oz,vde=(oz=class extends oW{constructor(n){super();xt(this,Oa);xt(this,jm);xt(this,Gd);xt(this,Qi);xt(this,Yd);xt(this,ws);xt(this,Sx);xt(this,Qd);Ge(this,Qd,!1),Ge(this,Sx,n.defaultOptions),this.setOptions(n.options),this.observers=[],Ge(this,Yd,n.client),Ge(this,Qi,J(this,Yd).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Ge(this,jm,xde(this.options)),this.state=n.state??J(this,jm),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=J(this,ws))==null?void 0:n.promise}setOptions(n){this.options={...J(this,Sx),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&J(this,Qi).remove(this)}setData(n,r){const s=KT(this.state.data,n,this.options);return Ht(this,Oa,fl).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Ht(this,Oa,fl).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,a;const r=(s=J(this,ws))==null?void 0:s.promise;return(a=J(this,ws))==null||a.cancel(n),r?r.then(Us).catch(Us):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(J(this,jm))}isActive(){return this.observers.some(n=>Xi(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===yR||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>yu(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!eW(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=J(this,ws))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=J(this,ws))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),J(this,Qi).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(J(this,ws)&&(J(this,Qd)?J(this,ws).cancel({revert:!0}):J(this,ws).cancelRetry()),this.scheduleGc()),J(this,Qi).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ht(this,Oa,fl).call(this,{type:"invalidate"})}fetch(n,r){var d,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(J(this,ws))return J(this,ws).continueRetry(),J(this,ws).promise}if(n&&this.setOptions(n),!this.options.queryFn){const m=this.observers.find(y=>y.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,a=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(Ge(this,Qd,!0),s.signal)})},o=()=>{const m=nW(this.options,r),p=(()=>{const v={client:J(this,Yd),queryKey:this.queryKey,meta:this.meta};return a(v),v})();return Ge(this,Qd,!1),this.options.persister?this.options.persister(m,p,this):m(p)},c=(()=>{const m={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:J(this,Yd),state:this.state,fetchFn:o};return a(m),m})();(d=this.options.behavior)==null||d.onFetch(c,this),Ge(this,Gd,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=c.fetchOptions)==null?void 0:h.meta))&&Ht(this,Oa,fl).call(this,{type:"fetch",meta:(f=c.fetchOptions)==null?void 0:f.meta});const u=m=>{var y,p,v,b;uE(m)&&m.silent||Ht(this,Oa,fl).call(this,{type:"error",error:m}),uE(m)||((p=(y=J(this,Qi).config).onError)==null||p.call(y,m,this),(b=(v=J(this,Qi).config).onSettled)==null||b.call(v,this.state.data,m,this)),this.scheduleGc()};return Ge(this,ws,aW({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var y,p,v,b;if(m===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(x){u(x);return}(p=(y=J(this,Qi).config).onSuccess)==null||p.call(y,m,this),(b=(v=J(this,Qi).config).onSettled)==null||b.call(v,m,this.state.error,this),this.scheduleGc()},onError:u,onFail:(m,y)=>{Ht(this,Oa,fl).call(this,{type:"failed",failureCount:m,error:y})},onPause:()=>{Ht(this,Oa,fl).call(this,{type:"pause"})},onContinue:()=>{Ht(this,Oa,fl).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),J(this,ws).start()}},jm=new WeakMap,Gd=new WeakMap,Qi=new WeakMap,Yd=new WeakMap,ws=new WeakMap,Sx=new WeakMap,Qd=new WeakMap,Oa=new WeakSet,fl=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...lW(s.data,this.options),fetchMeta:n.meta??null};case"success":return Ge(this,Gd,void 0),{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=n.error;return uE(a)&&a.revert&&J(this,Gd)?{...J(this,Gd),fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Fr.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),J(this,Qi).notify({query:this,type:"updated",action:n})})},oz);function lW(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:sW(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function xde(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var No,lz,bde=(lz=class extends Bp{constructor(e={}){super();xt(this,No);this.config=e,Ge(this,No,new Map)}build(e,n,r){const s=n.queryKey,a=n.queryHash??gR(s,n);let o=this.get(a);return o||(o=new vde({client:e,queryKey:s,queryHash:a,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){J(this,No).has(e.queryHash)||(J(this,No).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=J(this,No).get(e.queryHash);n&&(e.destroy(),n===e&&J(this,No).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Fr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return J(this,No).get(e)}getAll(){return[...J(this,No).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>N4(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>N4(e,r)):n}notify(e){Fr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Fr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Fr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},No=new WeakMap,lz),So,Fs,Xd,Eo,Sc,cz,wde=(cz=class extends oW{constructor(n){super();xt(this,Eo);xt(this,So);xt(this,Fs);xt(this,Xd);this.mutationId=n.mutationId,Ge(this,Fs,n.mutationCache),Ge(this,So,[]),this.state=n.state||cW(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){J(this,So).includes(n)||(J(this,So).push(n),this.clearGcTimeout(),J(this,Fs).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Ge(this,So,J(this,So).filter(r=>r!==n)),this.scheduleGc(),J(this,Fs).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){J(this,So).length||(this.state.status==="pending"?this.scheduleGc():J(this,Fs).remove(this))}continue(){var n;return((n=J(this,Xd))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var o,l,c,u,d,h,f,m,y,p,v,b,x,w,C,S,P,j,g,T;const r=()=>{Ht(this,Eo,Sc).call(this,{type:"continue"})};Ge(this,Xd,aW({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(E,A)=>{Ht(this,Eo,Sc).call(this,{type:"failed",failureCount:E,error:A})},onPause:()=>{Ht(this,Eo,Sc).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>J(this,Fs).canRun(this)}));const s=this.state.status==="pending",a=!J(this,Xd).canStart();try{if(s)r();else{Ht(this,Eo,Sc).call(this,{type:"pending",variables:n,isPaused:a}),await((l=(o=J(this,Fs).config).onMutate)==null?void 0:l.call(o,n,this));const A=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,n));A!==this.state.context&&Ht(this,Eo,Sc).call(this,{type:"pending",context:A,variables:n,isPaused:a})}const E=await J(this,Xd).start();return await((h=(d=J(this,Fs).config).onSuccess)==null?void 0:h.call(d,E,n,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,E,n,this.state.context)),await((p=(y=J(this,Fs).config).onSettled)==null?void 0:p.call(y,E,null,this.state.variables,this.state.context,this)),await((b=(v=this.options).onSettled)==null?void 0:b.call(v,E,null,n,this.state.context)),Ht(this,Eo,Sc).call(this,{type:"success",data:E}),E}catch(E){try{throw await((w=(x=J(this,Fs).config).onError)==null?void 0:w.call(x,E,n,this.state.context,this)),await((S=(C=this.options).onError)==null?void 0:S.call(C,E,n,this.state.context)),await((j=(P=J(this,Fs).config).onSettled)==null?void 0:j.call(P,void 0,E,this.state.variables,this.state.context,this)),await((T=(g=this.options).onSettled)==null?void 0:T.call(g,void 0,E,n,this.state.context)),E}finally{Ht(this,Eo,Sc).call(this,{type:"error",error:E})}}finally{J(this,Fs).runNext(this)}}},So=new WeakMap,Fs=new WeakMap,Xd=new WeakMap,Eo=new WeakSet,Sc=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Fr.batch(()=>{J(this,So).forEach(s=>{s.onMutationUpdate(n)}),J(this,Fs).notify({mutation:this,type:"updated",action:n})})},cz);function cW(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var yl,Da,Ex,uz,_de=(uz=class extends Bp{constructor(e={}){super();xt(this,yl);xt(this,Da);xt(this,Ex);this.config=e,Ge(this,yl,new Set),Ge(this,Da,new Map),Ge(this,Ex,0)}build(e,n,r){const s=new wde({mutationCache:this,mutationId:++Db(this,Ex)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){J(this,yl).add(e);const n=s0(e);if(typeof n=="string"){const r=J(this,Da).get(n);r?r.push(e):J(this,Da).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(J(this,yl).delete(e)){const n=s0(e);if(typeof n=="string"){const r=J(this,Da).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&J(this,Da).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=s0(e);if(typeof n=="string"){const r=J(this,Da).get(n),s=r==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=s0(e);if(typeof n=="string"){const s=(r=J(this,Da).get(n))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Fr.batch(()=>{J(this,yl).forEach(e=>{this.notify({type:"removed",mutation:e})}),J(this,yl).clear(),J(this,Da).clear()})}getAll(){return Array.from(J(this,yl))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>S4(n,r))}findAll(e={}){return this.getAll().filter(n=>S4(e,n))}notify(e){Fr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Fr.batch(()=>Promise.all(e.map(n=>n.continue().catch(Us))))}},yl=new WeakMap,Da=new WeakMap,Ex=new WeakMap,uz);function s0(t){var e;return(e=t.options.scope)==null?void 0:e.id}function T4(t){return{onFetch:(e,n)=>{var d,h,f,m,y;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,a=((m=e.state.data)==null?void 0:m.pages)||[],o=((y=e.state.data)==null?void 0:y.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let p=!1;const v=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},b=nW(e.options,e.fetchOptions),x=async(w,C,S)=>{if(p)return Promise.reject();if(C==null&&w.pages.length)return Promise.resolve(w);const j=(()=>{const A={client:e.client,queryKey:e.queryKey,pageParam:C,direction:S?"backward":"forward",meta:e.options.meta};return v(A),A})(),g=await b(j),{maxPages:T}=e.options,E=S?hde:dde;return{pages:E(w.pages,g,T),pageParams:E(w.pageParams,C,T)}};if(s&&a.length){const w=s==="backward",C=w?jde:C4,S={pages:a,pageParams:o},P=C(r,S);l=await x(S,P,w)}else{const w=t??a.length;do{const C=c===0?o[0]??r.initialPageParam:C4(r,l);if(c>0&&C==null)break;l=await x(l,C),c++}while(c<w)}return l};e.options.persister?e.fetchFn=()=>{var p,v;return(v=(p=e.options).persister)==null?void 0:v.call(p,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function C4(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function jde(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var or,Hc,Kc,Nm,Sm,Gc,Em,Am,dz,Nde=(dz=class{constructor(t={}){xt(this,or);xt(this,Hc);xt(this,Kc);xt(this,Nm);xt(this,Sm);xt(this,Gc);xt(this,Em);xt(this,Am);Ge(this,or,t.queryCache||new bde),Ge(this,Hc,t.mutationCache||new _de),Ge(this,Kc,t.defaultOptions||{}),Ge(this,Nm,new Map),Ge(this,Sm,new Map),Ge(this,Gc,0)}mount(){Db(this,Gc)._++,J(this,Gc)===1&&(Ge(this,Em,vR.subscribe(async t=>{t&&(await this.resumePausedMutations(),J(this,or).onFocus())})),Ge(this,Am,Qw.subscribe(async t=>{t&&(await this.resumePausedMutations(),J(this,or).onOnline())})))}unmount(){var t,e;Db(this,Gc)._--,J(this,Gc)===0&&((t=J(this,Em))==null||t.call(this),Ge(this,Em,void 0),(e=J(this,Am))==null||e.call(this),Ge(this,Am,void 0))}isFetching(t){return J(this,or).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return J(this,Hc).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=J(this,or).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=J(this,or).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(yu(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return J(this,or).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=J(this,or).get(r.queryHash),a=s==null?void 0:s.state.data,o=cde(e,a);if(o!==void 0)return J(this,or).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Fr.batch(()=>J(this,or).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=J(this,or).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=J(this,or);Fr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=J(this,or);return Fr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Fr.batch(()=>J(this,or).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Us).catch(Us)}invalidateQueries(t,e={}){return Fr.batch(()=>(J(this,or).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Fr.batch(()=>J(this,or).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(Us)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Us)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=J(this,or).build(this,e);return n.isStaleByTime(yu(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Us).catch(Us)}fetchInfiniteQuery(t){return t.behavior=T4(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Us).catch(Us)}ensureInfiniteQueryData(t){return t.behavior=T4(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Qw.isOnline()?J(this,Hc).resumePausedMutations():Promise.resolve()}getQueryCache(){return J(this,or)}getMutationCache(){return J(this,Hc)}getDefaultOptions(){return J(this,Kc)}setDefaultOptions(t){Ge(this,Kc,t)}setQueryDefaults(t,e){J(this,Nm).set(wh(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...J(this,Nm).values()],n={};return e.forEach(r=>{vv(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){J(this,Sm).set(wh(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...J(this,Sm).values()],n={};return e.forEach(r=>{vv(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...J(this,Kc).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=gR(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===yR&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...J(this,Kc).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){J(this,or).clear(),J(this,Hc).clear()}},or=new WeakMap,Hc=new WeakMap,Kc=new WeakMap,Nm=new WeakMap,Sm=new WeakMap,Gc=new WeakMap,Em=new WeakMap,Am=new WeakMap,dz),si,Jt,Ax,Vs,Zd,Tm,Yc,Qc,Tx,Cm,Pm,Jd,eh,Xc,Im,yn,ly,YT,QT,XT,ZT,JT,eC,tC,uW,hz,Sde=(hz=class extends Bp{constructor(e,n){super();xt(this,yn);xt(this,si);xt(this,Jt);xt(this,Ax);xt(this,Vs);xt(this,Zd);xt(this,Tm);xt(this,Yc);xt(this,Qc);xt(this,Tx);xt(this,Cm);xt(this,Pm);xt(this,Jd);xt(this,eh);xt(this,Xc);xt(this,Im,new Set);this.options=n,Ge(this,si,e),Ge(this,Qc,null),Ge(this,Yc,GT()),this.options.experimental_prefetchInRender||J(this,Yc).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(J(this,Jt).addObserver(this),P4(J(this,Jt),this.options)?Ht(this,yn,ly).call(this):this.updateResult(),Ht(this,yn,ZT).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return nC(J(this,Jt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return nC(J(this,Jt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ht(this,yn,JT).call(this),Ht(this,yn,eC).call(this),J(this,Jt).removeObserver(this)}setOptions(e){const n=this.options,r=J(this,Jt);if(this.options=J(this,si).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Xi(this.options.enabled,J(this,Jt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ht(this,yn,tC).call(this),J(this,Jt).setOptions(this.options),n._defaulted&&!Yw(this.options,n)&&J(this,si).getQueryCache().notify({type:"observerOptionsUpdated",query:J(this,Jt),observer:this});const s=this.hasListeners();s&&I4(J(this,Jt),r,this.options,n)&&Ht(this,yn,ly).call(this),this.updateResult(),s&&(J(this,Jt)!==r||Xi(this.options.enabled,J(this,Jt))!==Xi(n.enabled,J(this,Jt))||yu(this.options.staleTime,J(this,Jt))!==yu(n.staleTime,J(this,Jt)))&&Ht(this,yn,YT).call(this);const a=Ht(this,yn,QT).call(this);s&&(J(this,Jt)!==r||Xi(this.options.enabled,J(this,Jt))!==Xi(n.enabled,J(this,Jt))||a!==J(this,Xc))&&Ht(this,yn,XT).call(this,a)}getOptimisticResult(e){const n=J(this,si).getQueryCache().build(J(this,si),e),r=this.createResult(n,e);return Ade(this,r)&&(Ge(this,Vs,r),Ge(this,Tm,this.options),Ge(this,Zd,J(this,Jt).state)),r}getCurrentResult(){return J(this,Vs)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){J(this,Im).add(e)}getCurrentQuery(){return J(this,Jt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=J(this,si).defaultQueryOptions(e),r=J(this,si).getQueryCache().build(J(this,si),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Ht(this,yn,ly).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),J(this,Vs)))}createResult(e,n){var T;const r=J(this,Jt),s=this.options,a=J(this,Vs),o=J(this,Zd),l=J(this,Tm),u=e!==r?e.state:J(this,Ax),{state:d}=e;let h={...d},f=!1,m;if(n._optimisticResults){const E=this.hasListeners(),A=!E&&P4(e,n),I=E&&I4(e,r,n,s);(A||I)&&(h={...h,...lW(d.data,e.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:y,errorUpdatedAt:p,status:v}=h;m=h.data;let b=!1;if(n.placeholderData!==void 0&&m===void 0&&v==="pending"){let E;a!=null&&a.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(E=a.data,b=!0):E=typeof n.placeholderData=="function"?n.placeholderData((T=J(this,Pm))==null?void 0:T.state.data,J(this,Pm)):n.placeholderData,E!==void 0&&(v="success",m=KT(a==null?void 0:a.data,E,n),f=!0)}if(n.select&&m!==void 0&&!b)if(a&&m===(o==null?void 0:o.data)&&n.select===J(this,Tx))m=J(this,Cm);else try{Ge(this,Tx,n.select),m=n.select(m),m=KT(a==null?void 0:a.data,m,n),Ge(this,Cm,m),Ge(this,Qc,null)}catch(E){Ge(this,Qc,E)}J(this,Qc)&&(y=J(this,Qc),m=J(this,Cm),p=Date.now(),v="error");const x=h.fetchStatus==="fetching",w=v==="pending",C=v==="error",S=w&&x,P=m!==void 0,g={status:v,fetchStatus:h.fetchStatus,isPending:w,isSuccess:v==="success",isError:C,isInitialLoading:S,isLoading:S,data:m,dataUpdatedAt:h.dataUpdatedAt,error:y,errorUpdatedAt:p,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:x,isRefetching:x&&!w,isLoadingError:C&&!P,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:C&&P,isStale:xR(e,n),refetch:this.refetch,promise:J(this,Yc),isEnabled:Xi(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const E=k=>{g.status==="error"?k.reject(g.error):g.data!==void 0&&k.resolve(g.data)},A=()=>{const k=Ge(this,Yc,g.promise=GT());E(k)},I=J(this,Yc);switch(I.status){case"pending":e.queryHash===r.queryHash&&E(I);break;case"fulfilled":(g.status==="error"||g.data!==I.value)&&A();break;case"rejected":(g.status!=="error"||g.error!==I.reason)&&A();break}}return g}updateResult(){const e=J(this,Vs),n=this.createResult(J(this,Jt),this.options);if(Ge(this,Zd,J(this,Jt).state),Ge(this,Tm,this.options),J(this,Zd).data!==void 0&&Ge(this,Pm,J(this,Jt)),Yw(n,e))return;Ge(this,Vs,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!J(this,Im).size)return!0;const o=new Set(a??J(this,Im));return this.options.throwOnError&&o.add("error"),Object.keys(J(this,Vs)).some(l=>{const c=l;return J(this,Vs)[c]!==e[c]&&o.has(c)})};Ht(this,yn,uW).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ht(this,yn,ZT).call(this)}},si=new WeakMap,Jt=new WeakMap,Ax=new WeakMap,Vs=new WeakMap,Zd=new WeakMap,Tm=new WeakMap,Yc=new WeakMap,Qc=new WeakMap,Tx=new WeakMap,Cm=new WeakMap,Pm=new WeakMap,Jd=new WeakMap,eh=new WeakMap,Xc=new WeakMap,Im=new WeakMap,yn=new WeakSet,ly=function(e){Ht(this,yn,tC).call(this);let n=J(this,Jt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Us)),n},YT=function(){Ht(this,yn,JT).call(this);const e=yu(this.options.staleTime,J(this,Jt));if(bh||J(this,Vs).isStale||!WT(e))return;const r=eW(J(this,Vs).dataUpdatedAt,e)+1;Ge(this,Jd,setTimeout(()=>{J(this,Vs).isStale||this.updateResult()},r))},QT=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(J(this,Jt)):this.options.refetchInterval)??!1},XT=function(e){Ht(this,yn,eC).call(this),Ge(this,Xc,e),!(bh||Xi(this.options.enabled,J(this,Jt))===!1||!WT(J(this,Xc))||J(this,Xc)===0)&&Ge(this,eh,setInterval(()=>{(this.options.refetchIntervalInBackground||vR.isFocused())&&Ht(this,yn,ly).call(this)},J(this,Xc)))},ZT=function(){Ht(this,yn,YT).call(this),Ht(this,yn,XT).call(this,Ht(this,yn,QT).call(this))},JT=function(){J(this,Jd)&&(clearTimeout(J(this,Jd)),Ge(this,Jd,void 0))},eC=function(){J(this,eh)&&(clearInterval(J(this,eh)),Ge(this,eh,void 0))},tC=function(){const e=J(this,si).getQueryCache().build(J(this,si),this.options);if(e===J(this,Jt))return;const n=J(this,Jt);Ge(this,Jt,e),Ge(this,Ax,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},uW=function(e){Fr.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(J(this,Vs))}),J(this,si).getQueryCache().notify({query:J(this,Jt),type:"observerResultsUpdated"})})},hz);function Ede(t,e){return Xi(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function P4(t,e){return Ede(t,e)||t.state.data!==void 0&&nC(t,e,e.refetchOnMount)}function nC(t,e,n){if(Xi(e.enabled,t)!==!1&&yu(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&xR(t,e)}return!1}function I4(t,e,n,r){return(t!==e||Xi(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&xR(t,n)}function xR(t,e){return Xi(e.enabled,t)!==!1&&t.isStaleByTime(yu(e.staleTime,t))}function Ade(t,e){return!Yw(t.getCurrentResult(),e)}var Zc,Jc,ii,vl,Dl,X0,rC,fz,Tde=(fz=class extends Bp{constructor(n,r){super();xt(this,Dl);xt(this,Zc);xt(this,Jc);xt(this,ii);xt(this,vl);Ge(this,Zc,n),this.setOptions(r),this.bindMethods(),Ht(this,Dl,X0).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=J(this,Zc).defaultMutationOptions(n),Yw(this.options,r)||J(this,Zc).getMutationCache().notify({type:"observerOptionsUpdated",mutation:J(this,ii),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&wh(r.mutationKey)!==wh(this.options.mutationKey)?this.reset():((s=J(this,ii))==null?void 0:s.state.status)==="pending"&&J(this,ii).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=J(this,ii))==null||n.removeObserver(this)}onMutationUpdate(n){Ht(this,Dl,X0).call(this),Ht(this,Dl,rC).call(this,n)}getCurrentResult(){return J(this,Jc)}reset(){var n;(n=J(this,ii))==null||n.removeObserver(this),Ge(this,ii,void 0),Ht(this,Dl,X0).call(this),Ht(this,Dl,rC).call(this)}mutate(n,r){var s;return Ge(this,vl,r),(s=J(this,ii))==null||s.removeObserver(this),Ge(this,ii,J(this,Zc).getMutationCache().build(J(this,Zc),this.options)),J(this,ii).addObserver(this),J(this,ii).execute(n)}},Zc=new WeakMap,Jc=new WeakMap,ii=new WeakMap,vl=new WeakMap,Dl=new WeakSet,X0=function(){var r;const n=((r=J(this,ii))==null?void 0:r.state)??cW();Ge(this,Jc,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},rC=function(n){Fr.batch(()=>{var r,s,a,o,l,c,u,d;if(J(this,vl)&&this.hasListeners()){const h=J(this,Jc).variables,f=J(this,Jc).context;(n==null?void 0:n.type)==="success"?((s=(r=J(this,vl)).onSuccess)==null||s.call(r,n.data,h,f),(o=(a=J(this,vl)).onSettled)==null||o.call(a,n.data,null,h,f)):(n==null?void 0:n.type)==="error"&&((c=(l=J(this,vl)).onError)==null||c.call(l,n.error,h,f),(d=(u=J(this,vl)).onSettled)==null||d.call(u,void 0,n.error,h,f))}this.listeners.forEach(h=>{h(J(this,Jc))})})},fz),dW=_.createContext(void 0),tn=t=>{const e=_.useContext(dW);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Cde=({client:t,children:e})=>(_.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),i.jsx(dW.Provider,{value:t,children:e})),hW=_.createContext(!1),Pde=()=>_.useContext(hW);hW.Provider;function Ide(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var kde=_.createContext(Ide()),Rde=()=>_.useContext(kde),Ode=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},Dde=t=>{_.useEffect(()=>{t.clearReset()},[t])},Mde=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||rW(n,[t.error,r])),Lde=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},$de=(t,e)=>t.isLoading&&t.isFetching&&!e,Fde=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,k4=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function Vde(t,e,n){var h,f,m,y,p;const r=Pde(),s=Rde(),a=tn(),o=a.defaultQueryOptions(t);(f=(h=a.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o),o._optimisticResults=r?"isRestoring":"optimistic",Lde(o),Ode(o,s),Dde(s);const l=!a.getQueryCache().get(o.queryHash),[c]=_.useState(()=>new e(a,o)),u=c.getOptimisticResult(o),d=!r&&t.subscribed!==!1;if(_.useSyncExternalStore(_.useCallback(v=>{const b=d?c.subscribe(Fr.batchCalls(v)):Us;return c.updateResult(),b},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),_.useEffect(()=>{c.setOptions(o)},[o,c]),Fde(o,u))throw k4(o,c,s);if(Mde({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:a.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((y=(m=a.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||y.call(m,o,u),o.experimental_prefetchInRender&&!bh&&$de(u,r)){const v=l?k4(o,c,s):(p=a.getQueryCache().get(o.queryHash))==null?void 0:p.promise;v==null||v.catch(Us).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function Ee(t,e){return Vde(t,Sde)}function Xe(t,e){const n=tn(),[r]=_.useState(()=>new Tde(n,t));_.useEffect(()=>{r.setOptions(t)},[r,t]);const s=_.useSyncExternalStore(_.useCallback(o=>r.subscribe(Fr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=_.useCallback((o,l)=>{r.mutate(o,l).catch(Us)},[r]);if(s.error&&rW(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xv(){return xv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xv.apply(this,arguments)}var nu;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(nu||(nu={}));const R4="popstate";function Bde(t){t===void 0&&(t={});function e(r,s){let{pathname:a,search:o,hash:l}=r.location;return sC("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Xw(s)}return zde(e,n,null,t)}function wr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function fW(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ude(){return Math.random().toString(36).substr(2,8)}function O4(t,e){return{usr:t.state,key:t.key,idx:e}}function sC(t,e,n,r){return n===void 0&&(n=null),xv({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Up(e):e,{state:n,key:e&&e.key||r||Ude()})}function Xw(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Up(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function zde(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,o=s.history,l=nu.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(xv({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=nu.Pop;let v=d(),b=v==null?null:v-u;u=v,c&&c({action:l,location:p.location,delta:b})}function f(v,b){l=nu.Push;let x=sC(p.location,v,b);u=d()+1;let w=O4(x,u),C=p.createHref(x);try{o.pushState(w,"",C)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(C)}a&&c&&c({action:l,location:p.location,delta:1})}function m(v,b){l=nu.Replace;let x=sC(p.location,v,b);u=d();let w=O4(x,u),C=p.createHref(x);o.replaceState(w,"",C),a&&c&&c({action:l,location:p.location,delta:0})}function y(v){let b=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof v=="string"?v:Xw(v);return x=x.replace(/ $/,"%20"),wr(b,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,b)}let p={get action(){return l},get location(){return t(s,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(R4,h),c=v,()=>{s.removeEventListener(R4,h),c=null}},createHref(v){return e(s,v)},createURL:y,encodeLocation(v){let b=y(v);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:m,go(v){return o.go(v)}};return p}var D4;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(D4||(D4={}));function qde(t,e,n){return n===void 0&&(n="/"),Wde(t,e,n,!1)}function Wde(t,e,n,r){let s=typeof e=="string"?Up(e):e,a=bR(s.pathname||"/",n);if(a==null)return null;let o=mW(t);Hde(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=rhe(a);l=the(o[c],u,r)}return l}function mW(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(wr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=vu([r,c.relativePath]),d=n.concat(c);a.children&&a.children.length>0&&(wr(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),mW(a.children,e,d,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:Jde(u,a.index),routesMeta:d})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let c of pW(a.path))s(a,o,c)}),e}function pW(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let o=pW(r.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Hde(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:ehe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Kde=/^:[\w-]+$/,Gde=3,Yde=2,Qde=1,Xde=10,Zde=-2,M4=t=>t==="*";function Jde(t,e){let n=t.split("/"),r=n.length;return n.some(M4)&&(r+=Zde),e&&(r+=Yde),n.filter(s=>!M4(s)).reduce((s,a)=>s+(Kde.test(a)?Gde:a===""?Qde:Xde),r)}function ehe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function the(t,e,n){let{routesMeta:r}=t,s={},a="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=a==="/"?e:e.slice(a.length)||"/",h=L4({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=L4({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:vu([a,h.pathname]),pathnameBase:ohe(vu([a,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(a=vu([a,h.pathnameBase]))}return o}function L4(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=nhe(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let p=l[h]||"";o=a.slice(0,a.length-p.length).replace(/(.)\/+$/,"$1")}const y=l[h];return m&&!y?u[f]=void 0:u[f]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:t}}function nhe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),fW(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function rhe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fW(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function bR(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function she(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Up(t):t;return{pathname:n?n.startsWith("/")?n:ihe(n,e):e,search:lhe(r),hash:che(s)}}function ihe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function dE(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ahe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function wR(t,e){let n=ahe(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function _R(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Up(t):(s=xv({},t),wr(!s.pathname||!s.pathname.includes("?"),dE("?","pathname","search",s)),wr(!s.pathname||!s.pathname.includes("#"),dE("#","pathname","hash",s)),wr(!s.search||!s.search.includes("#"),dE("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?e[h]:"/"}let c=she(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const vu=t=>t.join("/").replace(/\/\/+/g,"/"),ohe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),lhe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,che=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function uhe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const gW=["post","put","patch","delete"];new Set(gW);const dhe=["get",...gW];new Set(dhe);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bv(){return bv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bv.apply(this,arguments)}const jR=_.createContext(null),hhe=_.createContext(null),Yu=_.createContext(null),bN=_.createContext(null),sc=_.createContext({outlet:null,matches:[],isDataRoute:!1}),yW=_.createContext(null);function fhe(t,e){let{relative:n}=e===void 0?{}:e;zp()||wr(!1);let{basename:r,navigator:s}=_.useContext(Yu),{hash:a,pathname:o,search:l}=xW(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:vu([r,o])),s.createHref({pathname:c,search:l,hash:a})}function zp(){return _.useContext(bN)!=null}function sl(){return zp()||wr(!1),_.useContext(bN).location}function vW(t){_.useContext(Yu).static||_.useLayoutEffect(t)}function $n(){let{isDataRoute:t}=_.useContext(sc);return t?Ehe():mhe()}function mhe(){zp()||wr(!1);let t=_.useContext(jR),{basename:e,future:n,navigator:r}=_.useContext(Yu),{matches:s}=_.useContext(sc),{pathname:a}=sl(),o=JSON.stringify(wR(s,n.v7_relativeSplatPath)),l=_.useRef(!1);return vW(()=>{l.current=!0}),_.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=_R(u,JSON.parse(o),a,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:vu([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,a,t])}function Hh(){let{matches:t}=_.useContext(sc),e=t[t.length-1];return e?e.params:{}}function xW(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=_.useContext(Yu),{matches:s}=_.useContext(sc),{pathname:a}=sl(),o=JSON.stringify(wR(s,r.v7_relativeSplatPath));return _.useMemo(()=>_R(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function phe(t,e){return ghe(t,e)}function ghe(t,e,n,r){zp()||wr(!1);let{navigator:s}=_.useContext(Yu),{matches:a}=_.useContext(sc),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=sl(),d;if(e){var h;let v=typeof e=="string"?Up(e):e;c==="/"||(h=v.pathname)!=null&&h.startsWith(c)||wr(!1),d=v}else d=u;let f=d.pathname||"/",m=f;if(c!=="/"){let v=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let y=qde(t,{pathname:m}),p=whe(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:vu([c,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:vu([c,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,n,r);return e&&p?_.createElement(bN.Provider,{value:{location:bv({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:nu.Pop}},p):p}function yhe(){let t=She(),e=uhe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:s},n):null,null)}const vhe=_.createElement(yhe,null);class xhe extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?_.createElement(sc.Provider,{value:this.props.routeContext},_.createElement(yW.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function bhe(t){let{routeContext:e,match:n,children:r}=t,s=_.useContext(jR);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(sc.Provider,{value:e},r)}function whe(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||wr(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:m}=n,y=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||y){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,y=!1,p=null,v=null;n&&(m=l&&h.route.id?l[h.route.id]:void 0,p=h.route.errorElement||vhe,c&&(u<0&&f===0?(y=!0,v=null):u===f&&(y=!0,v=h.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,f+1)),x=()=>{let w;return m?w=p:y?w=v:h.route.Component?w=_.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,_.createElement(bhe,{match:h,routeContext:{outlet:d,matches:b,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?_.createElement(xhe,{location:n.location,revalidation:n.revalidation,component:p,error:m,children:x(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):x()},null)}var bW=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(bW||{}),Zw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Zw||{});function _he(t){let e=_.useContext(jR);return e||wr(!1),e}function jhe(t){let e=_.useContext(hhe);return e||wr(!1),e}function Nhe(t){let e=_.useContext(sc);return e||wr(!1),e}function wW(t){let e=Nhe(),n=e.matches[e.matches.length-1];return n.route.id||wr(!1),n.route.id}function She(){var t;let e=_.useContext(yW),n=jhe(Zw.UseRouteError),r=wW(Zw.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Ehe(){let{router:t}=_he(bW.UseNavigateStable),e=wW(Zw.UseNavigateStable),n=_.useRef(!1);return vW(()=>{n.current=!0}),_.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,bv({fromRouteId:e},a)))},[t,e])}function Ahe(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function iC(t){let{to:e,replace:n,state:r,relative:s}=t;zp()||wr(!1);let{future:a,static:o}=_.useContext(Yu),{matches:l}=_.useContext(sc),{pathname:c}=sl(),u=$n(),d=_R(e,wR(l,a.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return _.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:s}),[u,h,s,n,r]),null}function yt(t){wr(!1)}function The(t){let{basename:e="/",children:n=null,location:r,navigationType:s=nu.Pop,navigator:a,static:o=!1,future:l}=t;zp()&&wr(!1);let c=e.replace(/^\/*/,"/"),u=_.useMemo(()=>({basename:c,navigator:a,static:o,future:bv({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof r=="string"&&(r=Up(r));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:y="default"}=r,p=_.useMemo(()=>{let v=bR(d,c);return v==null?null:{location:{pathname:v,search:h,hash:f,state:m,key:y},navigationType:s}},[c,d,h,f,m,y,s]);return p==null?null:_.createElement(Yu.Provider,{value:u},_.createElement(bN.Provider,{children:n,value:p}))}function Che(t){let{children:e,location:n}=t;return phe(aC(e),n)}new Promise(()=>{});function aC(t,e){e===void 0&&(e=[]);let n=[];return _.Children.forEach(t,(r,s)=>{if(!_.isValidElement(r))return;let a=[...e,s];if(r.type===_.Fragment){n.push.apply(n,aC(r.props.children,a));return}r.type!==yt&&wr(!1),!r.props.index||!r.props.children||wr(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=aC(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oC(){return oC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oC.apply(this,arguments)}function Phe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Ihe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function khe(t,e){return t.button===0&&(!e||e==="_self")&&!Ihe(t)}function lC(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function Rhe(t,e){let n=lC(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(a=>{n.append(s,a)})}),n}const Ohe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Dhe="6";try{window.__reactRouterVersion=Dhe}catch{}const Mhe="startTransition",$4=tk[Mhe];function Lhe(t){let{basename:e,children:n,future:r,window:s}=t,a=_.useRef();a.current==null&&(a.current=Bde({window:s,v5Compat:!0}));let o=a.current,[l,c]=_.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=_.useCallback(h=>{u&&$4?$4(()=>c(h)):c(h)},[c,u]);return _.useLayoutEffect(()=>o.listen(d),[o,d]),_.useEffect(()=>Ahe(r),[r]),_.createElement(The,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const $he=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Fhe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ii=_.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=e,f=Phe(e,Ohe),{basename:m}=_.useContext(Yu),y,p=!1;if(typeof u=="string"&&Fhe.test(u)&&(y=u,$he))try{let w=new URL(window.location.href),C=u.startsWith("//")?new URL(w.protocol+u):new URL(u),S=bR(C.pathname,m);C.origin===w.origin&&S!=null?u=S+C.search+C.hash:p=!0}catch{}let v=fhe(u,{relative:s}),b=Vhe(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function x(w){r&&r(w),w.defaultPrevented||b(w)}return _.createElement("a",oC({},f,{href:y||v,onClick:p||a?r:x,ref:n,target:c}))});var F4;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(F4||(F4={}));var V4;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(V4||(V4={}));function Vhe(t,e){let{target:n,replace:r,state:s,preventScrollReset:a,relative:o,viewTransition:l}=e===void 0?{}:e,c=$n(),u=sl(),d=xW(t,{relative:o});return _.useCallback(h=>{if(khe(h,n)){h.preventDefault();let f=r!==void 0?r:Xw(u)===Xw(d);c(t,{replace:f,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,r,s,n,t,a,o,l])}function NR(t){let e=_.useRef(lC(t)),n=_.useRef(!1),r=sl(),s=_.useMemo(()=>Rhe(r.search,n.current?null:e.current),[r.search]),a=$n(),o=_.useCallback((l,c)=>{const u=lC(typeof l=="function"?l(s):l);n.current=!0,a("?"+u,c)},[a,s]);return[s,o]}const Bhe=()=>{};var B4={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _W=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Uhe=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},jW={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,d=a>>2,h=(a&3)<<4|l>>4;let f=(l&15)<<2|u>>6,m=u&63;c||(m=64,o||(f=64)),r.push(n[d],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_W(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Uhe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||l==null||u==null||h==null)throw new zhe;const f=a<<2|l>>4;if(r.push(f),u!==64){const m=l<<4&240|u>>2;if(r.push(m),h!==64){const y=u<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class zhe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qhe=function(t){const e=_W(t);return jW.encodeByteArray(e,!0)},Jw=function(t){return qhe(t).replace(/\./g,"")},NW=function(t){try{return jW.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Whe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hhe=()=>Whe().__FIREBASE_DEFAULTS__,Khe=()=>{if(typeof process>"u"||typeof B4>"u")return;const t=B4.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Ghe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&NW(t[1]);return e&&JSON.parse(e)},wN=()=>{try{return Bhe()||Hhe()||Khe()||Ghe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},SW=t=>{var e,n;return(n=(e=wN())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},SR=t=>{const e=SW(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},EW=()=>{var t;return(t=wN())==null?void 0:t.config},AW=t=>{var e;return(e=wN())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yhe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _N(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TW(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Jw(JSON.stringify(n)),Jw(JSON.stringify(o)),""].join(".")}const Iy={};function Qhe(){const t={prod:[],emulator:[]};for(const e of Object.keys(Iy))Iy[e]?t.emulator.push(e):t.prod.push(e);return t}function Xhe(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let U4=!1;function jN(t,e){if(typeof window>"u"||typeof document>"u"||!il(window.location.host)||Iy[t]===e||Iy[t]||U4)return;Iy[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",a=Qhe().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function l(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{U4=!0,o()},f}function d(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=Xhe(r),m=n("text"),y=document.getElementById(m)||document.createElement("span"),p=n("learnmore"),v=document.getElementById(p)||document.createElement("a"),b=n("preprendIcon"),x=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const w=f.element;l(w),d(v,p);const C=u();c(x,b),w.append(x,y,v,C),document.body.appendChild(w)}a?(y.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Zhe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ls())}function Jhe(){var e;const t=(e=wN())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function efe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tfe(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function nfe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rfe(){const t=Ls();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function sfe(){return!Jhe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ife(){try{return typeof indexedDB=="object"}catch{return!1}}function afe(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ofe="FirebaseError";class fo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ofe,Object.setPrototypeOf(this,fo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bx.prototype.create)}}class Bx{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?lfe(a,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new fo(s,l,r)}}function lfe(t,e){return t.replace(cfe,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const cfe=/\{\$([^}]+)}/g;function ufe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function _h(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],o=e[s];if(z4(a)&&z4(o)){if(!_h(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function z4(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function cy(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function uy(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function dfe(t,e){const n=new hfe(t,e);return n.subscribe.bind(n)}class hfe{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ffe(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=hE),s.error===void 0&&(s.error=hE),s.complete===void 0&&(s.complete=hE);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ffe(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function hE(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(t){return t&&t._delegate?t._delegate:t}class Ul{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mfe{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Yhe;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gfe(e))try{this.getOrInitializeService({instanceIdentifier:Ed})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=Ed){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ed){return this.instances.has(e)}getOptions(e=Ed){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pfe(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ed){return this.component?this.component.multipleInstances?e:Ed:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pfe(t){return t===Ed?void 0:t}function gfe(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yfe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mfe(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Qt||(Qt={}));const vfe={debug:Qt.DEBUG,verbose:Qt.VERBOSE,info:Qt.INFO,warn:Qt.WARN,error:Qt.ERROR,silent:Qt.SILENT},xfe=Qt.INFO,bfe={[Qt.DEBUG]:"log",[Qt.VERBOSE]:"log",[Qt.INFO]:"info",[Qt.WARN]:"warn",[Qt.ERROR]:"error"},wfe=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=bfe[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ER{constructor(e){this.name=e,this._logLevel=xfe,this._logHandler=wfe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vfe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qt.DEBUG,...e),this._logHandler(this,Qt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qt.VERBOSE,...e),this._logHandler(this,Qt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qt.INFO,...e),this._logHandler(this,Qt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qt.WARN,...e),this._logHandler(this,Qt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qt.ERROR,...e),this._logHandler(this,Qt.ERROR,...e)}}const _fe=(t,e)=>e.some(n=>t instanceof n);let q4,W4;function jfe(){return q4||(q4=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Nfe(){return W4||(W4=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CW=new WeakMap,cC=new WeakMap,PW=new WeakMap,fE=new WeakMap,AR=new WeakMap;function Sfe(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(xu(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&CW.set(n,t)}).catch(()=>{}),AR.set(e,t),e}function Efe(t){if(cC.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});cC.set(t,e)}let uC={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return cC.get(t);if(e==="objectStoreNames")return t.objectStoreNames||PW.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xu(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Afe(t){uC=t(uC)}function Tfe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(mE(this),e,...n);return PW.set(r,e.sort?e.sort():[e]),xu(r)}:Nfe().includes(t)?function(...e){return t.apply(mE(this),e),xu(CW.get(this))}:function(...e){return xu(t.apply(mE(this),e))}}function Cfe(t){return typeof t=="function"?Tfe(t):(t instanceof IDBTransaction&&Efe(t),_fe(t,jfe())?new Proxy(t,uC):t)}function xu(t){if(t instanceof IDBRequest)return Sfe(t);if(fE.has(t))return fE.get(t);const e=Cfe(t);return e!==t&&(fE.set(t,e),AR.set(e,t)),e}const mE=t=>AR.get(t);function Pfe(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),l=xu(o);return r&&o.addEventListener("upgradeneeded",c=>{r(xu(o.result),c.oldVersion,c.newVersion,xu(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const Ife=["get","getKey","getAll","getAllKeys","count"],kfe=["put","add","delete","clear"],pE=new Map;function H4(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pE.get(e))return pE.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=kfe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Ife.includes(n)))return;const a=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return pE.set(e,a),a}Afe(t=>({...t,get:(e,n,r)=>H4(e,n)||t.get(e,n,r),has:(e,n)=>!!H4(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rfe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Ofe(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Ofe(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dC="@firebase/app",K4="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl=new ER("@firebase/app"),Dfe="@firebase/app-compat",Mfe="@firebase/analytics-compat",Lfe="@firebase/analytics",$fe="@firebase/app-check-compat",Ffe="@firebase/app-check",Vfe="@firebase/auth",Bfe="@firebase/auth-compat",Ufe="@firebase/database",zfe="@firebase/data-connect",qfe="@firebase/database-compat",Wfe="@firebase/functions",Hfe="@firebase/functions-compat",Kfe="@firebase/installations",Gfe="@firebase/installations-compat",Yfe="@firebase/messaging",Qfe="@firebase/messaging-compat",Xfe="@firebase/performance",Zfe="@firebase/performance-compat",Jfe="@firebase/remote-config",eme="@firebase/remote-config-compat",tme="@firebase/storage",nme="@firebase/storage-compat",rme="@firebase/firestore",sme="@firebase/ai",ime="@firebase/firestore-compat",ame="firebase",ome="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC="[DEFAULT]",lme={[dC]:"fire-core",[Dfe]:"fire-core-compat",[Lfe]:"fire-analytics",[Mfe]:"fire-analytics-compat",[Ffe]:"fire-app-check",[$fe]:"fire-app-check-compat",[Vfe]:"fire-auth",[Bfe]:"fire-auth-compat",[Ufe]:"fire-rtdb",[zfe]:"fire-data-connect",[qfe]:"fire-rtdb-compat",[Wfe]:"fire-fn",[Hfe]:"fire-fn-compat",[Kfe]:"fire-iid",[Gfe]:"fire-iid-compat",[Yfe]:"fire-fcm",[Qfe]:"fire-fcm-compat",[Xfe]:"fire-perf",[Zfe]:"fire-perf-compat",[Jfe]:"fire-rc",[eme]:"fire-rc-compat",[tme]:"fire-gcs",[nme]:"fire-gcs-compat",[rme]:"fire-fst",[ime]:"fire-fst-compat",[sme]:"fire-vertex","fire-js":"fire-js",[ame]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv=new Map,cme=new Map,fC=new Map;function G4(t,e){try{t.container.addComponent(e)}catch(n){zl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ku(t){const e=t.name;if(fC.has(e))return zl.debug(`There were multiple attempts to register component ${e}.`),!1;fC.set(e,t);for(const n of wv.values())G4(n,t);for(const n of cme.values())G4(n,t);return!0}function zx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hi(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ume={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bu=new Bx("app","Firebase",ume);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dme{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ul("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh=ome;function IW(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:hC,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw bu.create("bad-app-name",{appName:String(s)});if(n||(n=EW()),!n)throw bu.create("no-options");const a=wv.get(s);if(a){if(_h(n,a.options)&&_h(r,a.config))return a;throw bu.create("duplicate-app",{appName:s})}const o=new yfe(s);for(const c of fC.values())o.addComponent(c);const l=new dme(n,r,o);return wv.set(s,l),l}function qx(t=hC){const e=wv.get(t);if(!e&&t===hC&&EW())return IW();if(!e)throw bu.create("no-app",{appName:t});return e}function hme(){return Array.from(wv.values())}function la(t,e,n){let r=lme[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zl.warn(o.join(" "));return}ku(new Ul(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fme="firebase-heartbeat-database",mme=1,_v="firebase-heartbeat-store";let gE=null;function kW(){return gE||(gE=Pfe(fme,mme,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(_v)}catch(n){console.warn(n)}}}}).catch(t=>{throw bu.create("idb-open",{originalErrorMessage:t.message})})),gE}async function pme(t){try{const n=(await kW()).transaction(_v),r=await n.objectStore(_v).get(RW(t));return await n.done,r}catch(e){if(e instanceof fo)zl.warn(e.message);else{const n=bu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});zl.warn(n.message)}}}async function Y4(t,e){try{const r=(await kW()).transaction(_v,"readwrite");await r.objectStore(_v).put(e,RW(t)),await r.done}catch(n){if(n instanceof fo)zl.warn(n.message);else{const r=bu.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});zl.warn(r.message)}}}function RW(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gme=1024,yme=30;class vme{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new bme(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Q4();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>yme){const o=wme(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){zl.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Q4(),{heartbeatsToSend:r,unsentEntries:s}=xme(this._heartbeatsCache.heartbeats),a=Jw(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return zl.warn(n),""}}}function Q4(){return new Date().toISOString().substring(0,10)}function xme(t,e=gme){const n=[];let r=t.slice();for(const s of t){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),X4(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),X4(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class bme{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ife()?afe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await pme(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Y4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Y4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function X4(t){return Jw(JSON.stringify({version:2,heartbeats:t})).length}function wme(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _me(t){ku(new Ul("platform-logger",e=>new Rfe(e),"PRIVATE")),ku(new Ul("heartbeat",e=>new vme(e),"PRIVATE")),la(dC,K4,t),la(dC,K4,"esm2020"),la("fire-js","")}_me("");var jme="firebase",Nme="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */la(jme,Nme,"app");function OW(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Sme=OW,DW=new Bx("auth","Firebase",OW());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_=new ER("@firebase/auth");function Eme(t,...e){e_.logLevel<=Qt.WARN&&e_.warn(`Auth (${Kh}): ${t}`,...e)}function Z0(t,...e){e_.logLevel<=Qt.ERROR&&e_.error(`Auth (${Kh}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(t,...e){throw TR(t,...e)}function Fo(t,...e){return TR(t,...e)}function MW(t,e,n){const r={...Sme(),[e]:n};return new Bx("auth","Firebase",r).create(e,{appName:t.name})}function Pl(t){return MW(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function TR(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return DW.create(t,...e)}function bt(t,e,...n){if(!t)throw TR(e,...n)}function _l(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Z0(e),new Error(e)}function ql(t,e){t||_l(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Ame(){return Z4()==="http:"||Z4()==="https:"}function Z4(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tme(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ame()||tfe()||"connection"in navigator)?navigator.onLine:!0}function Cme(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,n){this.shortDelay=e,this.longDelay=n,ql(n>e,"Short delay should be less than long delay!"),this.isMobile=Zhe()||nfe()}get(){return Tme()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(t,e){ql(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LW{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_l("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_l("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_l("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pme={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ime=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],kme=new Wx(3e4,6e4);function mo(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Wi(t,e,n,r,s={}){return $W(t,s,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const l=Ux({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...a};return efe()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&il(t.emulatorConfig.host)&&(u.credentials="include"),LW.fetch()(await FW(t,t.config.apiHost,n,l),u)})}async function $W(t,e,n){t._canInitEmulator=!1;const r={...Pme,...e};try{const s=new Ome(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw i0(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw i0(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw i0(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw i0(t,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw MW(t,d,u);ya(t,d)}}catch(s){if(s instanceof fo)throw s;ya(t,"network-request-failed",{message:String(s)})}}async function Hx(t,e,n,r,s={}){const a=await Wi(t,e,n,r,s);return"mfaPendingCredential"in a&&ya(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function FW(t,e,n,r){const s=`${e}${n}?${r}`,a=t,o=a.config.emulator?CR(t.config,s):`${t.config.apiScheme}://${s}`;return Ime.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function Rme(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ome{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Fo(this.auth,"network-request-failed")),kme.get())})}}function i0(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Fo(t,e,r);return s.customData._tokenResponse=n,s}function J4(t){return t!==void 0&&t.enterprise!==void 0}class Dme{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Rme(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Mme(t,e){return Wi(t,"GET","/v2/recaptchaConfig",mo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lme(t,e){return Wi(t,"POST","/v1/accounts:delete",e)}async function t_(t,e){return Wi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $me(t,e=!1){const n=an(t),r=await n.getIdToken(e),s=PR(r);bt(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:ky(yE(s.auth_time)),issuedAtTime:ky(yE(s.iat)),expirationTime:ky(yE(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function yE(t){return Number(t)*1e3}function PR(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Z0("JWT malformed, contained fewer than 3 sections"),null;try{const s=NW(n);return s?JSON.parse(s):(Z0("Failed to decode base64 JWT payload"),null)}catch(s){return Z0("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function e$(t){const e=PR(t);return bt(e,"internal-error"),bt(typeof e.exp<"u","internal-error"),bt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jh(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof fo&&Fme(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Fme({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vme{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ky(this.lastLoginAt),this.creationTime=ky(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n_(t){var h;const e=t.auth,n=await t.getIdToken(),r=await jh(t,t_(e,{idToken:n}));bt(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=(h=s.providerUserInfo)!=null&&h.length?VW(s.providerUserInfo):[],o=Ume(t.providerData,a),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new pC(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function Bme(t){const e=an(t);await n_(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Ume(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function VW(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zme(t,e){const n=await $W(t,{},async()=>{const r=Ux({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=await FW(t,s,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&il(t.emulatorConfig.host)&&(c.credentials="include"),LW.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function qme(t,e){return Wi(t,"POST","/v2/accounts:revokeToken",mo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){bt(e.idToken,"internal-error"),bt(typeof e.idToken<"u","internal-error"),bt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):e$(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){bt(e.length!==0,"internal-error");const n=e$(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(bt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await zme(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,o=new im;return r&&(bt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(bt(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(bt(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new im,this.toJSON())}_performRefresh(){return _l("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(t,e){bt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Wa{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new Vme(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new pC(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await jh(this,this.stsTokenManager.getToken(this.auth,e));return bt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return $me(this,e)}reload(){return Bme(this)}_assign(e){this!==e&&(bt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Wa({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){bt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await n_(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hi(this.auth.app))return Promise.reject(Pl(this.auth));const e=await this.getIdToken();return await jh(this,Lme(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:m,providerData:y,stsTokenManager:p}=n;bt(h&&p,e,"internal-error");const v=im.fromJSON(this.name,p);bt(typeof h=="string",e,"internal-error"),_c(r,e.name),_c(s,e.name),bt(typeof f=="boolean",e,"internal-error"),bt(typeof m=="boolean",e,"internal-error"),_c(a,e.name),_c(o,e.name),_c(l,e.name),_c(c,e.name),_c(u,e.name),_c(d,e.name);const b=new Wa({uid:h,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:a,tenantId:l,stsTokenManager:v,createdAt:u,lastLoginAt:d});return y&&Array.isArray(y)&&(b.providerData=y.map(x=>({...x}))),c&&(b._redirectEventId=c),b}static async _fromIdTokenResponse(e,n,r=!1){const s=new im;s.updateFromServerResponse(n);const a=new Wa({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await n_(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];bt(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?VW(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),l=new im;l.updateFromIdToken(r);const c=new Wa({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new pC(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t$=new Map;function jl(t){ql(t instanceof Function,"Expected a class definition");let e=t$.get(t);return e?(ql(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,t$.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BW{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}BW.type="NONE";const n$=BW;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(t,e,n){return`firebase:${t}:${e}:${n}`}class am{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=J0(this.userKey,s.apiKey,a),this.fullPersistenceKey=J0("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await t_(this.auth,{idToken:e}).catch(()=>{});return n?Wa._fromGetAccountInfoResponse(this.auth,n,e):null}return Wa._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new am(jl(n$),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=s[0]||jl(n$);const o=J0(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const d=await u._get(o);if(d){let h;if(typeof d=="string"){const f=await t_(e,{idToken:d}).catch(()=>{});if(!f)break;h=await Wa._fromGetAccountInfoResponse(e,f,d)}else h=Wa._fromJSON(e,d);u!==a&&(l=h),a=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new am(a,e,r):(a=c[0],l&&await a._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==a)try{await u._remove(o)}catch{}})),new am(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r$(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WW(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(UW(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(KW(e))return"Blackberry";if(GW(e))return"Webos";if(zW(e))return"Safari";if((e.includes("chrome/")||qW(e))&&!e.includes("edge/"))return"Chrome";if(HW(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function UW(t=Ls()){return/firefox\//i.test(t)}function zW(t=Ls()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qW(t=Ls()){return/crios\//i.test(t)}function WW(t=Ls()){return/iemobile/i.test(t)}function HW(t=Ls()){return/android/i.test(t)}function KW(t=Ls()){return/blackberry/i.test(t)}function GW(t=Ls()){return/webos/i.test(t)}function IR(t=Ls()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Wme(t=Ls()){var e;return IR(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Hme(){return rfe()&&document.documentMode===10}function YW(t=Ls()){return IR(t)||HW(t)||GW(t)||KW(t)||/windows phone/i.test(t)||WW(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QW(t,e=[]){let n;switch(t){case"Browser":n=r$(Ls());break;case"Worker":n=`${r$(Ls())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Kh}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kme{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,l)=>{try{const c=e(a);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gme(t,e={}){return Wi(t,"GET","/v2/passwordPolicy",mo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yme=6;class Qme{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Yme,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xme{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new s$(this),this.idTokenSubscription=new s$(this),this.beforeStateQueue=new Kme(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DW,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=jl(n)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await am.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await t_(this,{idToken:e}),r=await Wa._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(hi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(a=this.redirectUser)==null?void 0:a._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return bt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await n_(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Cme()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hi(this.app))return Promise.reject(Pl(this));const n=e?an(e):null;return n&&bt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&bt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hi(this.app)?Promise.reject(Pl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hi(this.app)?Promise.reject(Pl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(jl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Gme(this),n=new Qme(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bx("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await qme(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&jl(e)||this._popupRedirectResolver;bt(n,this,"argument-error"),this.redirectPersistenceManager=await am.create(this,[jl(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(bt(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return bt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=QW(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(hi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Eme(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ic(t){return an(t)}class s${constructor(e){this.auth=e,this.observer=null,this.addObserver=dfe(n=>this.observer=n)}get next(){return bt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NN={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Zme(t){NN=t}function XW(t){return NN.loadJS(t)}function Jme(){return NN.recaptchaEnterpriseScript}function epe(){return NN.gapiScript}function tpe(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class npe{constructor(){this.enterprise=new rpe}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class rpe{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const spe="recaptcha-enterprise",ZW="NO_RECAPTCHA";class ipe{constructor(e){this.type=spe,this.auth=ic(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{Mme(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new Dme(c);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function s(a,o,l){const c=window.grecaptcha;J4(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(u=>{o(u)}).catch(()=>{o(ZW)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new npe().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(l=>{if(!n&&J4(window.grecaptcha))s(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Jme();c.length!==0&&(c+=l),XW(c).then(()=>{s(l,a,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function i$(t,e,n,r=!1,s=!1){const a=new ipe(t);let o;if(s)o=ZW;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function r_(t,e,n,r,s){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await i$(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await i$(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ape(t,e){const n=zx(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(_h(a,e??{}))return s;ya(s,"already-initialized")}return n.initialize({options:e})}function ope(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(jl);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function lpe(t,e,n){const r=ic(t);bt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),a=JW(e),{host:o,port:l}=cpe(e),c=l===null?"":`:${l}`,u={url:`${a}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){bt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),bt(_h(u,r.config.emulator)&&_h(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,il(o)?(_N(`${a}//${o}${c}`),jN("Auth",!0)):upe()}function JW(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function cpe(t){const e=JW(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:a$(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:a$(o)}}}function a$(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function upe(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return _l("not implemented")}_getIdTokenResponse(e){return _l("not implemented")}_linkToIdToken(e,n){return _l("not implemented")}_getReauthenticationResolver(e){return _l("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eH(t,e){return Wi(t,"POST","/v1/accounts:resetPassword",mo(t,e))}async function dpe(t,e){return Wi(t,"POST","/v1/accounts:update",e)}async function hpe(t,e){return Wi(t,"POST","/v1/accounts:signUp",e)}async function fpe(t,e){return Wi(t,"POST","/v1/accounts:update",mo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mpe(t,e){return Hx(t,"POST","/v1/accounts:signInWithPassword",mo(t,e))}async function tH(t,e){return Wi(t,"POST","/v1/accounts:sendOobCode",mo(t,e))}async function ppe(t,e){return tH(t,e)}async function gpe(t,e){return tH(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ype(t,e){return Hx(t,"POST","/v1/accounts:signInWithEmailLink",mo(t,e))}async function vpe(t,e){return Hx(t,"POST","/v1/accounts:signInWithEmailLink",mo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv extends kR{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new jv(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new jv(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return r_(e,n,"signInWithPassword",mpe);case"emailLink":return ype(e,{email:this._email,oobCode:this._password});default:ya(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return r_(e,r,"signUpPassword",hpe);case"emailLink":return vpe(e,{idToken:n,email:this._email,oobCode:this._password});default:ya(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function om(t,e){return Hx(t,"POST","/v1/accounts:signInWithIdp",mo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xpe="http://localhost";class Nh extends kR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Nh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ya("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...a}=n;if(!r||!s)return null;const o=new Nh(r,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return om(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,om(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,om(e,n)}buildRequest(){const e={requestUri:xpe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ux(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bpe(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wpe(t){const e=cy(uy(t)).link,n=e?cy(uy(e)).deep_link_id:null,r=cy(uy(t)).deep_link_id;return(r?cy(uy(r)).link:null)||r||n||e||t}class RR{constructor(e){const n=cy(uy(e)),r=n.apiKey??null,s=n.oobCode??null,a=bpe(n.mode??null);bt(r&&s&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=wpe(e);try{return new RR(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(){this.providerId=qp.PROVIDER_ID}static credential(e,n){return jv._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=RR.parseLink(n);return bt(r,"argument-error"),jv._fromEmailAndCode(e,r.code,r.tenantId)}}qp.PROVIDER_ID="password";qp.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qp.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nH{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx extends nH{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends Kx{constructor(){super("facebook.com")}static credential(e){return Nh._fromParams({providerId:$c.PROVIDER_ID,signInMethod:$c.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $c.credentialFromTaggedObject(e)}static credentialFromError(e){return $c.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $c.credential(e.oauthAccessToken)}catch{return null}}}$c.FACEBOOK_SIGN_IN_METHOD="facebook.com";$c.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc extends Kx{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Nh._fromParams({providerId:Fc.PROVIDER_ID,signInMethod:Fc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Fc.credentialFromTaggedObject(e)}static credentialFromError(e){return Fc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Fc.credential(n,r)}catch{return null}}}Fc.GOOGLE_SIGN_IN_METHOD="google.com";Fc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc extends Kx{constructor(){super("github.com")}static credential(e){return Nh._fromParams({providerId:Vc.PROVIDER_ID,signInMethod:Vc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vc.credentialFromTaggedObject(e)}static credentialFromError(e){return Vc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vc.credential(e.oauthAccessToken)}catch{return null}}}Vc.GITHUB_SIGN_IN_METHOD="github.com";Vc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc extends Kx{constructor(){super("twitter.com")}static credential(e,n){return Nh._fromParams({providerId:Bc.PROVIDER_ID,signInMethod:Bc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Bc.credentialFromTaggedObject(e)}static credentialFromError(e){return Bc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Bc.credential(n,r)}catch{return null}}}Bc.TWITTER_SIGN_IN_METHOD="twitter.com";Bc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _pe(t,e){return Hx(t,"POST","/v1/accounts:signUp",mo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await Wa._fromIdTokenResponse(e,r,s),o=o$(r);return new Sh({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=o$(r);return new Sh({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function o$(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_ extends fo{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,s_.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new s_(e,n,r,s)}}function rH(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?s_._fromErrorAndOperation(t,a,e,r):a})}async function jpe(t,e,n=!1){const r=await jh(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Sh._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Npe(t,e,n=!1){const{auth:r}=t;if(hi(r.app))return Promise.reject(Pl(r));const s="reauthenticate";try{const a=await jh(t,rH(r,s,e,t),n);bt(a.idToken,r,"internal-error");const o=PR(a.idToken);bt(o,r,"internal-error");const{sub:l}=o;return bt(t.uid===l,r,"user-mismatch"),Sh._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ya(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sH(t,e,n=!1){if(hi(t.app))return Promise.reject(Pl(t));const r="signIn",s=await rH(t,r,e),a=await Sh._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function Spe(t,e){return sH(ic(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?DR._fromServerResponse(e,n):"totpInfo"in n?MR._fromServerResponse(e,n):ya(e,"internal-error")}}class DR extends OR{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new DR(n)}}class MR extends OR{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new MR(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LR(t){const e=ic(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Epe(t,e,n){const r=ic(t);await r_(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",gpe)}async function Ape(t,e,n){await eH(an(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&LR(t),r})}async function Tpe(t,e){await fpe(an(t),{oobCode:e})}async function Cpe(t,e){const n=an(t),r=await eH(n,{oobCode:e}),s=r.requestType;switch(bt(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":bt(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":bt(r.mfaInfo,n,"internal-error");default:bt(r.email,n,"internal-error")}let a=null;return r.mfaInfo&&(a=OR._fromServerResponse(ic(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:a},operation:s}}async function Ppe(t,e){const{data:n}=await Cpe(an(t),e);return n.email}async function Ipe(t,e,n){if(hi(t.app))return Promise.reject(Pl(t));const r=ic(t),o=await r_(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_pe).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&LR(t),c}),l=await Sh._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function kpe(t,e,n){return hi(t.app)?Promise.reject(Pl(t)):Spe(an(t),qp.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&LR(t),r})}async function l$(t,e){const n=an(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:a}=await ppe(n.auth,s);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rpe(t,e){return Wi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ope(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=an(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await jh(r,Rpe(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Dpe(t,e){return Mpe(an(t),null,e)}async function Mpe(t,e,n){const{auth:r}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(a.password=n);const o=await jh(t,dpe(r,a));await t._updateTokensIfNecessary(o,!0)}function Lpe(t,e,n,r){return an(t).onIdTokenChanged(e,n,r)}function $pe(t,e,n){return an(t).beforeAuthStateChanged(e,n)}function Fpe(t,e,n,r){return an(t).onAuthStateChanged(e,n,r)}function Vpe(t){return an(t).signOut()}const i_="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iH{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(i_,"1"),this.storage.removeItem(i_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bpe=1e3,Upe=10;class aH extends iH{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YW(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);Hme()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Upe):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Bpe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}aH.type="LOCAL";const zpe=aH;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oH extends iH{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}oH.type="SESSION";const lH=oH;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qpe(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new SN(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,a)),c=await qpe(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}SN.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wpe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((l,c)=>{const u=$R("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(f.data.response);break;default:clearTimeout(d),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(){return window}function Hpe(t){Vo().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cH(){return typeof Vo().WorkerGlobalScope<"u"&&typeof Vo().importScripts=="function"}async function Kpe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Gpe(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Ype(){return cH()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uH="firebaseLocalStorageDb",Qpe=1,a_="firebaseLocalStorage",dH="fbase_key";class Gx{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function EN(t,e){return t.transaction([a_],e?"readwrite":"readonly").objectStore(a_)}function Xpe(){const t=indexedDB.deleteDatabase(uH);return new Gx(t).toPromise()}function gC(){const t=indexedDB.open(uH,Qpe);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(a_,{keyPath:dH})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(a_)?e(r):(r.close(),await Xpe(),e(await gC()))})})}async function c$(t,e,n){const r=EN(t,!0).put({[dH]:e,value:n});return new Gx(r).toPromise()}async function Zpe(t,e){const n=EN(t,!1).get(e),r=await new Gx(n).toPromise();return r===void 0?null:r.value}function u$(t,e){const n=EN(t,!0).delete(e);return new Gx(n).toPromise()}const Jpe=800,ege=3;class hH{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gC(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>ege)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cH()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=SN._getInstance(Ype()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Kpe(),!this.activeServiceWorker)return;this.sender=new Wpe(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Gpe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gC();return await c$(e,i_,"1"),await u$(e,i_),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>c$(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Zpe(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>u$(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=EN(s,!1).getAll();return new Gx(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Jpe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hH.type="LOCAL";const tge=hH;new Wx(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nge(t,e){return e?jl(e):(bt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR extends kR{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return om(e,this._buildIdpRequest())}_linkToIdToken(e,n){return om(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return om(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function rge(t){return sH(t.auth,new FR(t),t.bypassAuthState)}function sge(t){const{auth:e,user:n}=t;return bt(n,e,"internal-error"),Npe(n,new FR(t),t.bypassAuthState)}async function ige(t){const{auth:e,user:n}=t;return bt(n,e,"internal-error"),jpe(n,new FR(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fH{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rge;case"linkViaPopup":case"linkViaRedirect":return ige;case"reauthViaPopup":case"reauthViaRedirect":return sge;default:ya(this.auth,"internal-error")}}resolve(e){ql(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ql(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const age=new Wx(2e3,1e4);class Vf extends fH{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Vf.currentPopupAction&&Vf.currentPopupAction.cancel(),Vf.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return bt(e,this.auth,"internal-error"),e}async onExecution(){ql(this.filter.length===1,"Popup operations only handle one event");const e=$R();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Fo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vf.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,age.get())};e()}}Vf.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oge="pendingRedirect",ew=new Map;class lge extends fH{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ew.get(this.auth._key());if(!e){try{const r=await cge(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ew.set(this.auth._key(),e)}return this.bypassAuthState||ew.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cge(t,e){const n=hge(e),r=dge(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function uge(t,e){ew.set(t._key(),e)}function dge(t){return jl(t._redirectPersistence)}function hge(t){return J0(oge,t.config.apiKey,t.name)}async function fge(t,e,n=!1){if(hi(t.app))return Promise.reject(Pl(t));const r=ic(t),s=nge(r,e),o=await new lge(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mge=10*60*1e3;class pge{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gge(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!mH(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Fo(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mge&&this.cachedEventUids.clear(),this.cachedEventUids.has(d$(e))}saveEventToCache(e){this.cachedEventUids.add(d$(e)),this.lastProcessedEventTime=Date.now()}}function d$(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function mH({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function gge(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mH(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yge(t,e={}){return Wi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vge=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xge=/^https?/;async function bge(t){if(t.config.emulator)return;const{authorizedDomains:e}=await yge(t);for(const n of e)try{if(wge(n))return}catch{}ya(t,"unauthorized-domain")}function wge(t){const e=mC(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!xge.test(n))return!1;if(vge.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ge=new Wx(3e4,6e4);function h$(){const t=Vo().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function jge(t){return new Promise((e,n)=>{var s,a,o;function r(){h$(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{h$(),n(Fo(t,"network-request-failed"))},timeout:_ge.get()})}if((a=(s=Vo().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((o=Vo().gapi)!=null&&o.load)r();else{const l=tpe("iframefcb");return Vo()[l]=()=>{gapi.load?r():n(Fo(t,"network-request-failed"))},XW(`${epe()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw tw=null,e})}let tw=null;function Nge(t){return tw=tw||jge(t),tw}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sge=new Wx(5e3,15e3),Ege="__/auth/iframe",Age="emulator/auth/iframe",Tge={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cge=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pge(t){const e=t.config;bt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?CR(e,Age):`https://${t.config.authDomain}/${Ege}`,r={apiKey:e.apiKey,appName:t.name,v:Kh},s=Cge.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Ux(r).slice(1)}`}async function Ige(t){const e=await Nge(t),n=Vo().gapi;return bt(n,t,"internal-error"),e.open({where:document.body,url:Pge(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Tge,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const o=Fo(t,"network-request-failed"),l=Vo().setTimeout(()=>{a(o)},Sge.get());function c(){Vo().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kge={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Rge=500,Oge=600,Dge="_blank",Mge="http://localhost";class f${constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Lge(t,e,n,r=Rge,s=Oge){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...kge,width:r.toString(),height:s.toString(),top:a,left:o},u=Ls().toLowerCase();n&&(l=qW(u)?Dge:n),UW(u)&&(e=e||Mge,c.scrollbars="yes");const d=Object.entries(c).reduce((f,[m,y])=>`${f}${m}=${y},`,"");if(Wme(u)&&l!=="_self")return $ge(e||"",l),new f$(null);const h=window.open(e||"",l,d);bt(h,t,"popup-blocked");try{h.focus()}catch{}return new f$(h)}function $ge(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fge="__/auth/handler",Vge="emulator/auth/handler",Bge=encodeURIComponent("fac");async function m$(t,e,n,r,s,a){bt(t.config.authDomain,t,"auth-domain-config-required"),bt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Kh,eventId:s};if(e instanceof nH){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ufe(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof Kx){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${Bge}=${encodeURIComponent(c)}`:"";return`${Uge(t)}?${Ux(l).slice(1)}${u}`}function Uge({config:t}){return t.emulator?CR(t,Vge):`https://${t.authDomain}/${Fge}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="webStorageSupport";class zge{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lH,this._completeRedirectFn=fge,this._overrideRedirectResult=uge}async _openPopup(e,n,r,s){var o;ql((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await m$(e,n,r,mC(),s);return Lge(e,a,$R())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await m$(e,n,r,mC(),s);return Hpe(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(ql(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Ige(e),r=new pge(e);return n.register("authEvent",s=>(bt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vE,{type:vE},s=>{var o;const a=(o=s==null?void 0:s[0])==null?void 0:o[vE];a!==void 0&&n(!!a),ya(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=bge(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return YW()||zW()||IR()}}const qge=zge;var p$="@firebase/auth",g$="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wge{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){bt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hge(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Kge(t){ku(new Ul("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;bt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QW(t)},u=new Xme(r,s,a,c);return ope(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ku(new Ul("auth-internal",e=>{const n=ic(e.getProvider("auth").getImmediate());return(r=>new Wge(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),la(p$,g$,Hge(t)),la(p$,g$,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gge=5*60,Yge=AW("authIdTokenMaxAge")||Gge;let y$=null;const Qge=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Yge)return;const s=n==null?void 0:n.token;y$!==s&&(y$=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Xge(t=qx()){const e=zx(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ape(t,{popupRedirectResolver:qge,persistence:[tge,zpe,lH]}),r=AW("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=Qge(a.toString());$pe(n,o,()=>o(n.currentUser)),Lpe(n,l=>o(l))}}const s=SW("auth");return s&&lpe(n,`http://${s}`),n}function Zge(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Zme({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=Fo("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",Zge().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Kge("Browser");var v$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wu,pH;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,g){function T(){}T.prototype=g.prototype,j.F=g.prototype,j.prototype=new T,j.prototype.constructor=j,j.D=function(E,A,I){for(var k=Array(arguments.length-2),L=2;L<arguments.length;L++)k[L-2]=arguments[L];return g.prototype[A].apply(E,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(j,g,T){T||(T=0);const E=Array(16);if(typeof g=="string")for(var A=0;A<16;++A)E[A]=g.charCodeAt(T++)|g.charCodeAt(T++)<<8|g.charCodeAt(T++)<<16|g.charCodeAt(T++)<<24;else for(A=0;A<16;++A)E[A]=g[T++]|g[T++]<<8|g[T++]<<16|g[T++]<<24;g=j.g[0],T=j.g[1],A=j.g[2];let I=j.g[3],k;k=g+(I^T&(A^I))+E[0]+3614090360&4294967295,g=T+(k<<7&4294967295|k>>>25),k=I+(A^g&(T^A))+E[1]+3905402710&4294967295,I=g+(k<<12&4294967295|k>>>20),k=A+(T^I&(g^T))+E[2]+606105819&4294967295,A=I+(k<<17&4294967295|k>>>15),k=T+(g^A&(I^g))+E[3]+3250441966&4294967295,T=A+(k<<22&4294967295|k>>>10),k=g+(I^T&(A^I))+E[4]+4118548399&4294967295,g=T+(k<<7&4294967295|k>>>25),k=I+(A^g&(T^A))+E[5]+1200080426&4294967295,I=g+(k<<12&4294967295|k>>>20),k=A+(T^I&(g^T))+E[6]+2821735955&4294967295,A=I+(k<<17&4294967295|k>>>15),k=T+(g^A&(I^g))+E[7]+4249261313&4294967295,T=A+(k<<22&4294967295|k>>>10),k=g+(I^T&(A^I))+E[8]+1770035416&4294967295,g=T+(k<<7&4294967295|k>>>25),k=I+(A^g&(T^A))+E[9]+2336552879&4294967295,I=g+(k<<12&4294967295|k>>>20),k=A+(T^I&(g^T))+E[10]+4294925233&4294967295,A=I+(k<<17&4294967295|k>>>15),k=T+(g^A&(I^g))+E[11]+2304563134&4294967295,T=A+(k<<22&4294967295|k>>>10),k=g+(I^T&(A^I))+E[12]+1804603682&4294967295,g=T+(k<<7&4294967295|k>>>25),k=I+(A^g&(T^A))+E[13]+4254626195&4294967295,I=g+(k<<12&4294967295|k>>>20),k=A+(T^I&(g^T))+E[14]+2792965006&4294967295,A=I+(k<<17&4294967295|k>>>15),k=T+(g^A&(I^g))+E[15]+1236535329&4294967295,T=A+(k<<22&4294967295|k>>>10),k=g+(A^I&(T^A))+E[1]+4129170786&4294967295,g=T+(k<<5&4294967295|k>>>27),k=I+(T^A&(g^T))+E[6]+3225465664&4294967295,I=g+(k<<9&4294967295|k>>>23),k=A+(g^T&(I^g))+E[11]+643717713&4294967295,A=I+(k<<14&4294967295|k>>>18),k=T+(I^g&(A^I))+E[0]+3921069994&4294967295,T=A+(k<<20&4294967295|k>>>12),k=g+(A^I&(T^A))+E[5]+3593408605&4294967295,g=T+(k<<5&4294967295|k>>>27),k=I+(T^A&(g^T))+E[10]+38016083&4294967295,I=g+(k<<9&4294967295|k>>>23),k=A+(g^T&(I^g))+E[15]+3634488961&4294967295,A=I+(k<<14&4294967295|k>>>18),k=T+(I^g&(A^I))+E[4]+3889429448&4294967295,T=A+(k<<20&4294967295|k>>>12),k=g+(A^I&(T^A))+E[9]+568446438&4294967295,g=T+(k<<5&4294967295|k>>>27),k=I+(T^A&(g^T))+E[14]+3275163606&4294967295,I=g+(k<<9&4294967295|k>>>23),k=A+(g^T&(I^g))+E[3]+4107603335&4294967295,A=I+(k<<14&4294967295|k>>>18),k=T+(I^g&(A^I))+E[8]+1163531501&4294967295,T=A+(k<<20&4294967295|k>>>12),k=g+(A^I&(T^A))+E[13]+2850285829&4294967295,g=T+(k<<5&4294967295|k>>>27),k=I+(T^A&(g^T))+E[2]+4243563512&4294967295,I=g+(k<<9&4294967295|k>>>23),k=A+(g^T&(I^g))+E[7]+1735328473&4294967295,A=I+(k<<14&4294967295|k>>>18),k=T+(I^g&(A^I))+E[12]+2368359562&4294967295,T=A+(k<<20&4294967295|k>>>12),k=g+(T^A^I)+E[5]+4294588738&4294967295,g=T+(k<<4&4294967295|k>>>28),k=I+(g^T^A)+E[8]+2272392833&4294967295,I=g+(k<<11&4294967295|k>>>21),k=A+(I^g^T)+E[11]+1839030562&4294967295,A=I+(k<<16&4294967295|k>>>16),k=T+(A^I^g)+E[14]+4259657740&4294967295,T=A+(k<<23&4294967295|k>>>9),k=g+(T^A^I)+E[1]+2763975236&4294967295,g=T+(k<<4&4294967295|k>>>28),k=I+(g^T^A)+E[4]+1272893353&4294967295,I=g+(k<<11&4294967295|k>>>21),k=A+(I^g^T)+E[7]+4139469664&4294967295,A=I+(k<<16&4294967295|k>>>16),k=T+(A^I^g)+E[10]+3200236656&4294967295,T=A+(k<<23&4294967295|k>>>9),k=g+(T^A^I)+E[13]+681279174&4294967295,g=T+(k<<4&4294967295|k>>>28),k=I+(g^T^A)+E[0]+3936430074&4294967295,I=g+(k<<11&4294967295|k>>>21),k=A+(I^g^T)+E[3]+3572445317&4294967295,A=I+(k<<16&4294967295|k>>>16),k=T+(A^I^g)+E[6]+76029189&4294967295,T=A+(k<<23&4294967295|k>>>9),k=g+(T^A^I)+E[9]+3654602809&4294967295,g=T+(k<<4&4294967295|k>>>28),k=I+(g^T^A)+E[12]+3873151461&4294967295,I=g+(k<<11&4294967295|k>>>21),k=A+(I^g^T)+E[15]+530742520&4294967295,A=I+(k<<16&4294967295|k>>>16),k=T+(A^I^g)+E[2]+3299628645&4294967295,T=A+(k<<23&4294967295|k>>>9),k=g+(A^(T|~I))+E[0]+4096336452&4294967295,g=T+(k<<6&4294967295|k>>>26),k=I+(T^(g|~A))+E[7]+1126891415&4294967295,I=g+(k<<10&4294967295|k>>>22),k=A+(g^(I|~T))+E[14]+2878612391&4294967295,A=I+(k<<15&4294967295|k>>>17),k=T+(I^(A|~g))+E[5]+4237533241&4294967295,T=A+(k<<21&4294967295|k>>>11),k=g+(A^(T|~I))+E[12]+1700485571&4294967295,g=T+(k<<6&4294967295|k>>>26),k=I+(T^(g|~A))+E[3]+2399980690&4294967295,I=g+(k<<10&4294967295|k>>>22),k=A+(g^(I|~T))+E[10]+4293915773&4294967295,A=I+(k<<15&4294967295|k>>>17),k=T+(I^(A|~g))+E[1]+2240044497&4294967295,T=A+(k<<21&4294967295|k>>>11),k=g+(A^(T|~I))+E[8]+1873313359&4294967295,g=T+(k<<6&4294967295|k>>>26),k=I+(T^(g|~A))+E[15]+4264355552&4294967295,I=g+(k<<10&4294967295|k>>>22),k=A+(g^(I|~T))+E[6]+2734768916&4294967295,A=I+(k<<15&4294967295|k>>>17),k=T+(I^(A|~g))+E[13]+1309151649&4294967295,T=A+(k<<21&4294967295|k>>>11),k=g+(A^(T|~I))+E[4]+4149444226&4294967295,g=T+(k<<6&4294967295|k>>>26),k=I+(T^(g|~A))+E[11]+3174756917&4294967295,I=g+(k<<10&4294967295|k>>>22),k=A+(g^(I|~T))+E[2]+718787259&4294967295,A=I+(k<<15&4294967295|k>>>17),k=T+(I^(A|~g))+E[9]+3951481745&4294967295,j.g[0]=j.g[0]+g&4294967295,j.g[1]=j.g[1]+(A+(k<<21&4294967295|k>>>11))&4294967295,j.g[2]=j.g[2]+A&4294967295,j.g[3]=j.g[3]+I&4294967295}r.prototype.v=function(j,g){g===void 0&&(g=j.length);const T=g-this.blockSize,E=this.C;let A=this.h,I=0;for(;I<g;){if(A==0)for(;I<=T;)s(this,j,I),I+=this.blockSize;if(typeof j=="string"){for(;I<g;)if(E[A++]=j.charCodeAt(I++),A==this.blockSize){s(this,E),A=0;break}}else for(;I<g;)if(E[A++]=j[I++],A==this.blockSize){s(this,E),A=0;break}}this.h=A,this.o+=g},r.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var g=1;g<j.length-8;++g)j[g]=0;g=this.o*8;for(var T=j.length-8;T<j.length;++T)j[T]=g&255,g/=256;for(this.v(j),j=Array(16),g=0,T=0;T<4;++T)for(let E=0;E<32;E+=8)j[g++]=this.g[T]>>>E&255;return j};function a(j,g){var T=l;return Object.prototype.hasOwnProperty.call(T,j)?T[j]:T[j]=g(j)}function o(j,g){this.h=g;const T=[];let E=!0;for(let A=j.length-1;A>=0;A--){const I=j[A]|0;E&&I==g||(T[A]=I,E=!1)}this.g=T}var l={};function c(j){return-128<=j&&j<128?a(j,function(g){return new o([g|0],g<0?-1:0)}):new o([j|0],j<0?-1:0)}function u(j){if(isNaN(j)||!isFinite(j))return h;if(j<0)return v(u(-j));const g=[];let T=1;for(let E=0;j>=T;E++)g[E]=j/T|0,T*=4294967296;return new o(g,0)}function d(j,g){if(j.length==0)throw Error("number format error: empty string");if(g=g||10,g<2||36<g)throw Error("radix out of range: "+g);if(j.charAt(0)=="-")return v(d(j.substring(1),g));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=u(Math.pow(g,8));let E=h;for(let I=0;I<j.length;I+=8){var A=Math.min(8,j.length-I);const k=parseInt(j.substring(I,I+A),g);A<8?(A=u(Math.pow(g,A)),E=E.j(A).add(u(k))):(E=E.j(T),E=E.add(u(k)))}return E}var h=c(0),f=c(1),m=c(16777216);t=o.prototype,t.m=function(){if(p(this))return-v(this).m();let j=0,g=1;for(let T=0;T<this.g.length;T++){const E=this.i(T);j+=(E>=0?E:4294967296+E)*g,g*=4294967296}return j},t.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(y(this))return"0";if(p(this))return"-"+v(this).toString(j);const g=u(Math.pow(j,6));var T=this;let E="";for(;;){const A=C(T,g).g;T=b(T,A.j(g));let I=((T.g.length>0?T.g[0]:T.h)>>>0).toString(j);if(T=A,y(T))return I+E;for(;I.length<6;)I="0"+I;E=I+E}},t.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function y(j){if(j.h!=0)return!1;for(let g=0;g<j.g.length;g++)if(j.g[g]!=0)return!1;return!0}function p(j){return j.h==-1}t.l=function(j){return j=b(this,j),p(j)?-1:y(j)?0:1};function v(j){const g=j.g.length,T=[];for(let E=0;E<g;E++)T[E]=~j.g[E];return new o(T,~j.h).add(f)}t.abs=function(){return p(this)?v(this):this},t.add=function(j){const g=Math.max(this.g.length,j.g.length),T=[];let E=0;for(let A=0;A<=g;A++){let I=E+(this.i(A)&65535)+(j.i(A)&65535),k=(I>>>16)+(this.i(A)>>>16)+(j.i(A)>>>16);E=k>>>16,I&=65535,k&=65535,T[A]=k<<16|I}return new o(T,T[T.length-1]&-2147483648?-1:0)};function b(j,g){return j.add(v(g))}t.j=function(j){if(y(this)||y(j))return h;if(p(this))return p(j)?v(this).j(v(j)):v(v(this).j(j));if(p(j))return v(this.j(v(j)));if(this.l(m)<0&&j.l(m)<0)return u(this.m()*j.m());const g=this.g.length+j.g.length,T=[];for(var E=0;E<2*g;E++)T[E]=0;for(E=0;E<this.g.length;E++)for(let A=0;A<j.g.length;A++){const I=this.i(E)>>>16,k=this.i(E)&65535,L=j.i(A)>>>16,V=j.i(A)&65535;T[2*E+2*A]+=k*V,x(T,2*E+2*A),T[2*E+2*A+1]+=I*V,x(T,2*E+2*A+1),T[2*E+2*A+1]+=k*L,x(T,2*E+2*A+1),T[2*E+2*A+2]+=I*L,x(T,2*E+2*A+2)}for(j=0;j<g;j++)T[j]=T[2*j+1]<<16|T[2*j];for(j=g;j<2*g;j++)T[j]=0;return new o(T,0)};function x(j,g){for(;(j[g]&65535)!=j[g];)j[g+1]+=j[g]>>>16,j[g]&=65535,g++}function w(j,g){this.g=j,this.h=g}function C(j,g){if(y(g))throw Error("division by zero");if(y(j))return new w(h,h);if(p(j))return g=C(v(j),g),new w(v(g.g),v(g.h));if(p(g))return g=C(j,v(g)),new w(v(g.g),g.h);if(j.g.length>30){if(p(j)||p(g))throw Error("slowDivide_ only works with positive integers.");for(var T=f,E=g;E.l(j)<=0;)T=S(T),E=S(E);var A=P(T,1),I=P(E,1);for(E=P(E,2),T=P(T,2);!y(E);){var k=I.add(E);k.l(j)<=0&&(A=A.add(T),I=k),E=P(E,1),T=P(T,1)}return g=b(j,A.j(g)),new w(A,g)}for(A=h;j.l(g)>=0;){for(T=Math.max(1,Math.floor(j.m()/g.m())),E=Math.ceil(Math.log(T)/Math.LN2),E=E<=48?1:Math.pow(2,E-48),I=u(T),k=I.j(g);p(k)||k.l(j)>0;)T-=E,I=u(T),k=I.j(g);y(I)&&(I=f),A=A.add(I),j=b(j,k)}return new w(A,j)}t.B=function(j){return C(this,j).h},t.and=function(j){const g=Math.max(this.g.length,j.g.length),T=[];for(let E=0;E<g;E++)T[E]=this.i(E)&j.i(E);return new o(T,this.h&j.h)},t.or=function(j){const g=Math.max(this.g.length,j.g.length),T=[];for(let E=0;E<g;E++)T[E]=this.i(E)|j.i(E);return new o(T,this.h|j.h)},t.xor=function(j){const g=Math.max(this.g.length,j.g.length),T=[];for(let E=0;E<g;E++)T[E]=this.i(E)^j.i(E);return new o(T,this.h^j.h)};function S(j){const g=j.g.length+1,T=[];for(let E=0;E<g;E++)T[E]=j.i(E)<<1|j.i(E-1)>>>31;return new o(T,j.h)}function P(j,g){const T=g>>5;g%=32;const E=j.g.length-T,A=[];for(let I=0;I<E;I++)A[I]=g>0?j.i(I+T)>>>g|j.i(I+T+1)<<32-g:j.i(I+T);return new o(A,j.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,pH=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,wu=o}).apply(typeof v$<"u"?v$:typeof self<"u"?self:typeof window<"u"?window:{});var a0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gH,dy,yH,nw,yC,vH,xH,bH;(function(){var t,e=Object.defineProperty;function n(N){N=[typeof globalThis=="object"&&globalThis,N,typeof window=="object"&&window,typeof self=="object"&&self,typeof a0=="object"&&a0];for(var R=0;R<N.length;++R){var D=N[R];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var r=n(this);function s(N,R){if(R)e:{var D=r;N=N.split(".");for(var z=0;z<N.length-1;z++){var le=N[z];if(!(le in D))break e;D=D[le]}N=N[N.length-1],z=D[N],R=R(z),R!=z&&R!=null&&e(D,N,{configurable:!0,writable:!0,value:R})}}s("Symbol.dispose",function(N){return N||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(N){return N||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(N){return N||function(R){var D=[],z;for(z in R)Object.prototype.hasOwnProperty.call(R,z)&&D.push([z,R[z]]);return D}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(N){var R=typeof N;return R=="object"&&N!=null||R=="function"}function c(N,R,D){return N.call.apply(N.bind,arguments)}function u(N,R,D){return u=c,u.apply(null,arguments)}function d(N,R){var D=Array.prototype.slice.call(arguments,1);return function(){var z=D.slice();return z.push.apply(z,arguments),N.apply(this,z)}}function h(N,R){function D(){}D.prototype=R.prototype,N.Z=R.prototype,N.prototype=new D,N.prototype.constructor=N,N.Ob=function(z,le,de){for(var Fe=Array(arguments.length-2),Wt=2;Wt<arguments.length;Wt++)Fe[Wt-2]=arguments[Wt];return R.prototype[le].apply(z,Fe)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?N=>N&&AsyncContext.Snapshot.wrap(N):N=>N;function m(N){const R=N.length;if(R>0){const D=Array(R);for(let z=0;z<R;z++)D[z]=N[z];return D}return[]}function y(N,R){for(let z=1;z<arguments.length;z++){const le=arguments[z];var D=typeof le;if(D=D!="object"?D:le?Array.isArray(le)?"array":D:"null",D=="array"||D=="object"&&typeof le.length=="number"){D=N.length||0;const de=le.length||0;N.length=D+de;for(let Fe=0;Fe<de;Fe++)N[D+Fe]=le[Fe]}else N.push(le)}}class p{constructor(R,D){this.i=R,this.j=D,this.h=0,this.g=null}get(){let R;return this.h>0?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function v(N){o.setTimeout(()=>{throw N},0)}function b(){var N=j;let R=null;return N.g&&(R=N.g,N.g=N.g.next,N.g||(N.h=null),R.next=null),R}class x{constructor(){this.h=this.g=null}add(R,D){const z=w.get();z.set(R,D),this.h?this.h.next=z:this.g=z,this.h=z}}var w=new p(()=>new C,N=>N.reset());class C{constructor(){this.next=this.g=this.h=null}set(R,D){this.h=R,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let S,P=!1,j=new x,g=()=>{const N=Promise.resolve(void 0);S=()=>{N.then(T)}};function T(){for(var N;N=b();){try{N.h.call(N.g)}catch(D){v(D)}var R=w;R.j(N),R.h<100&&(R.h++,N.next=R.g,R.g=N)}P=!1}function E(){this.u=this.u,this.C=this.C}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(N,R){this.type=N,this.g=this.target=R,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var I=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var N=!1,R=Object.defineProperty({},"passive",{get:function(){N=!0}});try{const D=()=>{};o.addEventListener("test",D,R),o.removeEventListener("test",D,R)}catch{}return N}();function k(N){return/^[\s\xa0]*$/.test(N)}function L(N,R){A.call(this,N?N.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,N&&this.init(N,R)}h(L,A),L.prototype.init=function(N,R){const D=this.type=N.type,z=N.changedTouches&&N.changedTouches.length?N.changedTouches[0]:null;this.target=N.target||N.srcElement,this.g=R,R=N.relatedTarget,R||(D=="mouseover"?R=N.fromElement:D=="mouseout"&&(R=N.toElement)),this.relatedTarget=R,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0),this.button=N.button,this.key=N.key||"",this.ctrlKey=N.ctrlKey,this.altKey=N.altKey,this.shiftKey=N.shiftKey,this.metaKey=N.metaKey,this.pointerId=N.pointerId||0,this.pointerType=N.pointerType,this.state=N.state,this.i=N,N.defaultPrevented&&L.Z.h.call(this)},L.prototype.h=function(){L.Z.h.call(this);const N=this.i;N.preventDefault?N.preventDefault():N.returnValue=!1};var V="closure_listenable_"+(Math.random()*1e6|0),B=0;function M(N,R,D,z,le){this.listener=N,this.proxy=null,this.src=R,this.type=D,this.capture=!!z,this.ha=le,this.key=++B,this.da=this.fa=!1}function $(N){N.da=!0,N.listener=null,N.proxy=null,N.src=null,N.ha=null}function O(N,R,D){for(const z in N)R.call(D,N[z],z,N)}function W(N,R){for(const D in N)R.call(void 0,N[D],D,N)}function Z(N){const R={};for(const D in N)R[D]=N[D];return R}const ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ae(N,R){let D,z;for(let le=1;le<arguments.length;le++){z=arguments[le];for(D in z)N[D]=z[D];for(let de=0;de<ae.length;de++)D=ae[de],Object.prototype.hasOwnProperty.call(z,D)&&(N[D]=z[D])}}function ie(N){this.src=N,this.g={},this.h=0}ie.prototype.add=function(N,R,D,z,le){const de=N.toString();N=this.g[de],N||(N=this.g[de]=[],this.h++);const Fe=Ue(N,R,z,le);return Fe>-1?(R=N[Fe],D||(R.fa=!1)):(R=new M(R,this.src,de,!!z,le),R.fa=D,N.push(R)),R};function pe(N,R){const D=R.type;if(D in N.g){var z=N.g[D],le=Array.prototype.indexOf.call(z,R,void 0),de;(de=le>=0)&&Array.prototype.splice.call(z,le,1),de&&($(R),N.g[D].length==0&&(delete N.g[D],N.h--))}}function Ue(N,R,D,z){for(let le=0;le<N.length;++le){const de=N[le];if(!de.da&&de.listener==R&&de.capture==!!D&&de.ha==z)return le}return-1}var Ne="closure_lm_"+(Math.random()*1e6|0),nt={};function fe(N,R,D,z,le){if(Array.isArray(R)){for(let de=0;de<R.length;de++)fe(N,R[de],D,z,le);return null}return D=Hr(D),N&&N[V]?N.J(R,D,l(z)?!!z.capture:!!z,le):_e(N,R,D,!1,z,le)}function _e(N,R,D,z,le,de){if(!R)throw Error("Invalid event type");const Fe=l(le)?!!le.capture:!!le;let Wt=nn(N);if(Wt||(N[Ne]=Wt=new ie(N)),D=Wt.add(R,D,z,Fe,de),D.proxy)return D;if(z=ge(),D.proxy=z,z.src=N,z.listener=D,N.addEventListener)I||(le=Fe),le===void 0&&(le=!1),N.addEventListener(R.toString(),z,le);else if(N.attachEvent)N.attachEvent(rt(R.toString()),z);else if(N.addListener&&N.removeListener)N.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return D}function ge(){function N(D){return R.call(N.src,N.listener,D)}const R=zt;return N}function ce(N,R,D,z,le){if(Array.isArray(R))for(var de=0;de<R.length;de++)ce(N,R[de],D,z,le);else z=l(z)?!!z.capture:!!z,D=Hr(D),N&&N[V]?(N=N.i,de=String(R).toString(),de in N.g&&(R=N.g[de],D=Ue(R,D,z,le),D>-1&&($(R[D]),Array.prototype.splice.call(R,D,1),R.length==0&&(delete N.g[de],N.h--)))):N&&(N=nn(N))&&(R=N.g[R.toString()],N=-1,R&&(N=Ue(R,D,z,le)),(D=N>-1?R[N]:null)&&He(D))}function He(N){if(typeof N!="number"&&N&&!N.da){var R=N.src;if(R&&R[V])pe(R.i,N);else{var D=N.type,z=N.proxy;R.removeEventListener?R.removeEventListener(D,z,N.capture):R.detachEvent?R.detachEvent(rt(D),z):R.addListener&&R.removeListener&&R.removeListener(z),(D=nn(R))?(pe(D,N),D.h==0&&(D.src=null,R[Ne]=null)):$(N)}}}function rt(N){return N in nt?nt[N]:nt[N]="on"+N}function zt(N,R){if(N.da)N=!0;else{R=new L(R,this);const D=N.listener,z=N.ha||N.src;N.fa&&He(N),N=D.call(z,R)}return N}function nn(N){return N=N[Ne],N instanceof ie?N:null}var En="__closure_events_fn_"+(Math.random()*1e9>>>0);function Hr(N){return typeof N=="function"?N:(N[En]||(N[En]=function(R){return N.handleEvent(R)}),N[En])}function on(){E.call(this),this.i=new ie(this),this.M=this,this.G=null}h(on,E),on.prototype[V]=!0,on.prototype.removeEventListener=function(N,R,D,z){ce(this,N,R,D,z)};function K(N,R){var D,z=N.G;if(z)for(D=[];z;z=z.G)D.push(z);if(N=N.M,z=R.type||R,typeof R=="string")R=new A(R,N);else if(R instanceof A)R.target=R.target||N;else{var le=R;R=new A(z,N),Ae(R,le)}le=!0;let de,Fe;if(D)for(Fe=D.length-1;Fe>=0;Fe--)de=R.g=D[Fe],le=oe(de,z,!0,R)&&le;if(de=R.g=N,le=oe(de,z,!0,R)&&le,le=oe(de,z,!1,R)&&le,D)for(Fe=0;Fe<D.length;Fe++)de=R.g=D[Fe],le=oe(de,z,!1,R)&&le}on.prototype.N=function(){if(on.Z.N.call(this),this.i){var N=this.i;for(const R in N.g){const D=N.g[R];for(let z=0;z<D.length;z++)$(D[z]);delete N.g[R],N.h--}}this.G=null},on.prototype.J=function(N,R,D,z){return this.i.add(String(N),R,!1,D,z)},on.prototype.K=function(N,R,D,z){return this.i.add(String(N),R,!0,D,z)};function oe(N,R,D,z){if(R=N.i.g[String(R)],!R)return!0;R=R.concat();let le=!0;for(let de=0;de<R.length;++de){const Fe=R[de];if(Fe&&!Fe.da&&Fe.capture==D){const Wt=Fe.listener,Rr=Fe.ha||Fe.src;Fe.fa&&pe(N.i,Fe),le=Wt.call(Rr,z)!==!1&&le}}return le&&!z.defaultPrevented}function me(N,R){if(typeof N!="function")if(N&&typeof N.handleEvent=="function")N=u(N.handleEvent,N);else throw Error("Invalid listener argument");return Number(R)>2147483647?-1:o.setTimeout(N,R||0)}function Le(N){N.g=me(()=>{N.g=null,N.i&&(N.i=!1,Le(N))},N.l);const R=N.h;N.h=null,N.m.apply(null,R)}class $e extends E{constructor(R,D){super(),this.m=R,this.l=D,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:Le(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pe(N){E.call(this),this.h=N,this.g={}}h(Pe,E);var Ke=[];function Kt(N){O(N.g,function(R,D){this.g.hasOwnProperty(D)&&He(R)},N),N.g={}}Pe.prototype.N=function(){Pe.Z.N.call(this),Kt(this)},Pe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dn=o.JSON.stringify,ys=o.JSON.parse,Na=class{stringify(N){return o.JSON.stringify(N,void 0)}parse(N){return o.JSON.parse(N,void 0)}};function _i(){}function hd(){}var ji={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ti(){A.call(this,"d")}h(ti,A);function dc(){A.call(this,"c")}h(dc,A);var ss={},sf=null;function cl(){return sf=sf||new on}ss.Ia="serverreachability";function gg(N){A.call(this,ss.Ia,N)}h(gg,A);function hc(N){const R=cl();K(R,new gg(R))}ss.STAT_EVENT="statevent";function Sb(N,R){A.call(this,ss.STAT_EVENT,N),this.stat=R}h(Sb,A);function kr(N){const R=cl();K(R,new Sb(R,N))}ss.Ja="timingevent";function Sa(N,R){A.call(this,ss.Ja,N),this.size=R}h(Sa,A);function fd(N,R){if(typeof N!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){N()},R)}function St(){this.g=!0}St.prototype.ua=function(){this.g=!1};function pn(N,R,D,z,le,de){N.info(function(){if(N.g)if(de){var Fe="",Wt=de.split("&");for(let Tn=0;Tn<Wt.length;Tn++){var Rr=Wt[Tn].split("=");if(Rr.length>1){const Gr=Rr[0];Rr=Rr[1];const xo=Gr.split("_");Fe=xo.length>=2&&xo[1]=="type"?Fe+(Gr+"="+Rr+"&"):Fe+(Gr+"=redacted&")}}}else Fe=null;else Fe=de;return"XMLHTTP REQ ("+z+") [attempt "+le+"]: "+R+`
`+D+`
`+Fe})}function Pn(N,R,D,z,le,de,Fe){N.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+le+"]: "+R+`
`+D+`
`+de+" "+Fe})}function Kr(N,R,D,z){N.info(function(){return"XMLHTTP TEXT ("+R+"): "+yo(N,D)+(z?" "+z:"")})}function Ni(N,R){N.info(function(){return"TIMEOUT: "+R})}St.prototype.info=function(){};function yo(N,R){if(!N.g)return R;if(!R)return null;try{const de=JSON.parse(R);if(de){for(N=0;N<de.length;N++)if(Array.isArray(de[N])){var D=de[N];if(!(D.length<2)){var z=D[1];if(Array.isArray(z)&&!(z.length<1)){var le=z[0];if(le!="noop"&&le!="stop"&&le!="close")for(let Fe=1;Fe<z.length;Fe++)z[Fe]=""}}}}return dn(de)}catch{return R}}var Hi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ni={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ea;function y1(){}h(y1,_i),y1.prototype.g=function(){return new XMLHttpRequest},Ea=new y1;function yg(N){return encodeURIComponent(String(N))}function Ure(N){var R=1;N=N.split(":");const D=[];for(;R>0&&N.length;)D.push(N.shift()),R--;return N.length&&D.push(N.join(":")),D}function fc(N,R,D,z){this.j=N,this.i=R,this.l=D,this.S=z||1,this.V=new Pe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new eM}function eM(){this.i=null,this.g="",this.h=!1}var tM={},v1={};function x1(N,R,D){N.M=1,N.A=Ab(vo(R)),N.u=D,N.R=!0,nM(N,null)}function nM(N,R){N.F=Date.now(),Eb(N),N.B=vo(N.A);var D=N.B,z=N.S;Array.isArray(z)||(z=[String(z)]),pM(D.i,"t",z),N.C=0,D=N.j.L,N.h=new eM,N.g=RM(N.j,D?R:null,!N.u),N.P>0&&(N.O=new $e(u(N.Y,N,N.g),N.P)),R=N.V,D=N.g,z=N.ba;var le="readystatechange";Array.isArray(le)||(le&&(Ke[0]=le.toString()),le=Ke);for(let de=0;de<le.length;de++){const Fe=fe(D,le[de],z||R.handleEvent,!1,R.h||R);if(!Fe)break;R.g[Fe.key]=Fe}R=N.J?Z(N.J):{},N.u?(N.v||(N.v="POST"),R["Content-Type"]="application/x-www-form-urlencoded",N.g.ea(N.B,N.v,N.u,R)):(N.v="GET",N.g.ea(N.B,N.v,null,R)),hc(),pn(N.i,N.v,N.B,N.l,N.S,N.u)}fc.prototype.ba=function(N){N=N.target;const R=this.O;R&&gc(N)==3?R.j():this.Y(N)},fc.prototype.Y=function(N){try{if(N==this.g)e:{const Wt=gc(this.g),Rr=this.g.ya(),Tn=this.g.ca();if(!(Wt<3)&&(Wt!=3||this.g&&(this.h.h||this.g.la()||_M(this.g)))){this.K||Wt!=4||Rr==7||(Rr==8||Tn<=0?hc(3):hc(2)),b1(this);var R=this.g.ca();this.X=R;var D=zre(this);if(this.o=R==200,Pn(this.i,this.v,this.B,this.l,this.S,Wt,R),this.o){if(this.U&&!this.L){t:{if(this.g){var z,le=this.g;if((z=le.g?le.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(z)){var de=z;break t}}de=null}if(N=de)Kr(this.i,this.l,N,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,w1(this,N);else{this.o=!1,this.m=3,kr(12),md(this),vg(this);break e}}if(this.R){N=!0;let Gr;for(;!this.K&&this.C<D.length;)if(Gr=qre(this,D),Gr==v1){Wt==4&&(this.m=4,kr(14),N=!1),Kr(this.i,this.l,null,"[Incomplete Response]");break}else if(Gr==tM){this.m=4,kr(15),Kr(this.i,this.l,D,"[Invalid Chunk]"),N=!1;break}else Kr(this.i,this.l,Gr,null),w1(this,Gr);if(rM(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wt!=4||D.length!=0||this.h.h||(this.m=1,kr(16),N=!1),this.o=this.o&&N,!N)Kr(this.i,this.l,D,"[Invalid Chunked Response]"),md(this),vg(this);else if(D.length>0&&!this.W){this.W=!0;var Fe=this.j;Fe.g==this&&Fe.aa&&!Fe.P&&(Fe.j.info("Great, no buffering proxy detected. Bytes received: "+D.length),C1(Fe),Fe.P=!0,kr(11))}}else Kr(this.i,this.l,D,null),w1(this,D);Wt==4&&md(this),this.o&&!this.K&&(Wt==4?CM(this.j,this):(this.o=!1,Eb(this)))}else sse(this.g),R==400&&D.indexOf("Unknown SID")>0?(this.m=3,kr(12)):(this.m=0,kr(13)),md(this),vg(this)}}}catch{}finally{}};function zre(N){if(!rM(N))return N.g.la();const R=_M(N.g);if(R==="")return"";let D="";const z=R.length,le=gc(N.g)==4;if(!N.h.i){if(typeof TextDecoder>"u")return md(N),vg(N),"";N.h.i=new o.TextDecoder}for(let de=0;de<z;de++)N.h.h=!0,D+=N.h.i.decode(R[de],{stream:!(le&&de==z-1)});return R.length=0,N.h.g+=D,N.C=0,N.h.g}function rM(N){return N.g?N.v=="GET"&&N.M!=2&&N.j.Aa:!1}function qre(N,R){var D=N.C,z=R.indexOf(`
`,D);return z==-1?v1:(D=Number(R.substring(D,z)),isNaN(D)?tM:(z+=1,z+D>R.length?v1:(R=R.slice(z,z+D),N.C=z+D,R)))}fc.prototype.cancel=function(){this.K=!0,md(this)};function Eb(N){N.T=Date.now()+N.H,sM(N,N.H)}function sM(N,R){if(N.D!=null)throw Error("WatchDog timer not null");N.D=fd(u(N.aa,N),R)}function b1(N){N.D&&(o.clearTimeout(N.D),N.D=null)}fc.prototype.aa=function(){this.D=null;const N=Date.now();N-this.T>=0?(Ni(this.i,this.B),this.M!=2&&(hc(),kr(17)),md(this),this.m=2,vg(this)):sM(this,this.T-N)};function vg(N){N.j.I==0||N.K||CM(N.j,N)}function md(N){b1(N);var R=N.O;R&&typeof R.dispose=="function"&&R.dispose(),N.O=null,Kt(N.V),N.g&&(R=N.g,N.g=null,R.abort(),R.dispose())}function w1(N,R){try{var D=N.j;if(D.I!=0&&(D.g==N||_1(D.h,N))){if(!N.L&&_1(D.h,N)&&D.I==3){try{var z=D.Ba.g.parse(R)}catch{z=null}if(Array.isArray(z)&&z.length==3){var le=z;if(le[0]==0){e:if(!D.v){if(D.g)if(D.g.F+3e3<N.F)kb(D),Pb(D);else break e;T1(D),kr(18)}}else D.xa=le[1],0<D.xa-D.K&&le[2]<37500&&D.F&&D.A==0&&!D.C&&(D.C=fd(u(D.Va,D),6e3));oM(D.h)<=1&&D.ta&&(D.ta=void 0)}else gd(D,11)}else if((N.L||D.g==N)&&kb(D),!k(R))for(le=D.Ba.g.parse(R),R=0;R<le.length;R++){let Tn=le[R];const Gr=Tn[0];if(!(Gr<=D.K))if(D.K=Gr,Tn=Tn[1],D.I==2)if(Tn[0]=="c"){D.M=Tn[1],D.ba=Tn[2];const xo=Tn[3];xo!=null&&(D.ka=xo,D.j.info("VER="+D.ka));const yd=Tn[4];yd!=null&&(D.za=yd,D.j.info("SVER="+D.za));const yc=Tn[5];yc!=null&&typeof yc=="number"&&yc>0&&(z=1.5*yc,D.O=z,D.j.info("backChannelRequestTimeoutMs_="+z)),z=D;const vc=N.g;if(vc){const Ob=vc.g?vc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ob){var de=z.h;de.g||Ob.indexOf("spdy")==-1&&Ob.indexOf("quic")==-1&&Ob.indexOf("h2")==-1||(de.j=de.l,de.g=new Set,de.h&&(j1(de,de.h),de.h=null))}if(z.G){const P1=vc.g?vc.g.getResponseHeader("X-HTTP-Session-Id"):null;P1&&(z.wa=P1,Fn(z.J,z.G,P1))}}D.I=3,D.l&&D.l.ra(),D.aa&&(D.T=Date.now()-N.F,D.j.info("Handshake RTT: "+D.T+"ms")),z=D;var Fe=N;if(z.na=kM(z,z.L?z.ba:null,z.W),Fe.L){lM(z.h,Fe);var Wt=Fe,Rr=z.O;Rr&&(Wt.H=Rr),Wt.D&&(b1(Wt),Eb(Wt)),z.g=Fe}else AM(z);D.i.length>0&&Ib(D)}else Tn[0]!="stop"&&Tn[0]!="close"||gd(D,7);else D.I==3&&(Tn[0]=="stop"||Tn[0]=="close"?Tn[0]=="stop"?gd(D,7):A1(D):Tn[0]!="noop"&&D.l&&D.l.qa(Tn),D.A=0)}}hc(4)}catch{}}var Wre=class{constructor(N,R){this.g=N,this.map=R}};function iM(N){this.l=N||10,o.PerformanceNavigationTiming?(N=o.performance.getEntriesByType("navigation"),N=N.length>0&&(N[0].nextHopProtocol=="hq"||N[0].nextHopProtocol=="h2")):N=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=N?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function aM(N){return N.h?!0:N.g?N.g.size>=N.j:!1}function oM(N){return N.h?1:N.g?N.g.size:0}function _1(N,R){return N.h?N.h==R:N.g?N.g.has(R):!1}function j1(N,R){N.g?N.g.add(R):N.h=R}function lM(N,R){N.h&&N.h==R?N.h=null:N.g&&N.g.has(R)&&N.g.delete(R)}iM.prototype.cancel=function(){if(this.i=cM(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const N of this.g.values())N.cancel();this.g.clear()}};function cM(N){if(N.h!=null)return N.i.concat(N.h.G);if(N.g!=null&&N.g.size!==0){let R=N.i;for(const D of N.g.values())R=R.concat(D.G);return R}return m(N.i)}var uM=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hre(N,R){if(N){N=N.split("&");for(let D=0;D<N.length;D++){const z=N[D].indexOf("=");let le,de=null;z>=0?(le=N[D].substring(0,z),de=N[D].substring(z+1)):le=N[D],R(le,de?decodeURIComponent(de.replace(/\+/g," ")):"")}}}function mc(N){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let R;N instanceof mc?(this.l=N.l,xg(this,N.j),this.o=N.o,this.g=N.g,bg(this,N.u),this.h=N.h,N1(this,gM(N.i)),this.m=N.m):N&&(R=String(N).match(uM))?(this.l=!1,xg(this,R[1]||"",!0),this.o=wg(R[2]||""),this.g=wg(R[3]||"",!0),bg(this,R[4]),this.h=wg(R[5]||"",!0),N1(this,R[6]||"",!0),this.m=wg(R[7]||"")):(this.l=!1,this.i=new jg(null,this.l))}mc.prototype.toString=function(){const N=[];var R=this.j;R&&N.push(_g(R,dM,!0),":");var D=this.g;return(D||R=="file")&&(N.push("//"),(R=this.o)&&N.push(_g(R,dM,!0),"@"),N.push(yg(D).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.u,D!=null&&N.push(":",String(D))),(D=this.h)&&(this.g&&D.charAt(0)!="/"&&N.push("/"),N.push(_g(D,D.charAt(0)=="/"?Yre:Gre,!0))),(D=this.i.toString())&&N.push("?",D),(D=this.m)&&N.push("#",_g(D,Xre)),N.join("")},mc.prototype.resolve=function(N){const R=vo(this);let D=!!N.j;D?xg(R,N.j):D=!!N.o,D?R.o=N.o:D=!!N.g,D?R.g=N.g:D=N.u!=null;var z=N.h;if(D)bg(R,N.u);else if(D=!!N.h){if(z.charAt(0)!="/")if(this.g&&!this.h)z="/"+z;else{var le=R.h.lastIndexOf("/");le!=-1&&(z=R.h.slice(0,le+1)+z)}if(le=z,le==".."||le==".")z="";else if(le.indexOf("./")!=-1||le.indexOf("/.")!=-1){z=le.lastIndexOf("/",0)==0,le=le.split("/");const de=[];for(let Fe=0;Fe<le.length;){const Wt=le[Fe++];Wt=="."?z&&Fe==le.length&&de.push(""):Wt==".."?((de.length>1||de.length==1&&de[0]!="")&&de.pop(),z&&Fe==le.length&&de.push("")):(de.push(Wt),z=!0)}z=de.join("/")}else z=le}return D?R.h=z:D=N.i.toString()!=="",D?N1(R,gM(N.i)):D=!!N.m,D&&(R.m=N.m),R};function vo(N){return new mc(N)}function xg(N,R,D){N.j=D?wg(R,!0):R,N.j&&(N.j=N.j.replace(/:$/,""))}function bg(N,R){if(R){if(R=Number(R),isNaN(R)||R<0)throw Error("Bad port number "+R);N.u=R}else N.u=null}function N1(N,R,D){R instanceof jg?(N.i=R,Zre(N.i,N.l)):(D||(R=_g(R,Qre)),N.i=new jg(R,N.l))}function Fn(N,R,D){N.i.set(R,D)}function Ab(N){return Fn(N,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),N}function wg(N,R){return N?R?decodeURI(N.replace(/%25/g,"%2525")):decodeURIComponent(N):""}function _g(N,R,D){return typeof N=="string"?(N=encodeURI(N).replace(R,Kre),D&&(N=N.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N):null}function Kre(N){return N=N.charCodeAt(0),"%"+(N>>4&15).toString(16)+(N&15).toString(16)}var dM=/[#\/\?@]/g,Gre=/[#\?:]/g,Yre=/[#\?]/g,Qre=/[#\?@]/g,Xre=/#/g;function jg(N,R){this.h=this.g=null,this.i=N||null,this.j=!!R}function pd(N){N.g||(N.g=new Map,N.h=0,N.i&&Hre(N.i,function(R,D){N.add(decodeURIComponent(R.replace(/\+/g," ")),D)}))}t=jg.prototype,t.add=function(N,R){pd(this),this.i=null,N=af(this,N);let D=this.g.get(N);return D||this.g.set(N,D=[]),D.push(R),this.h+=1,this};function hM(N,R){pd(N),R=af(N,R),N.g.has(R)&&(N.i=null,N.h-=N.g.get(R).length,N.g.delete(R))}function fM(N,R){return pd(N),R=af(N,R),N.g.has(R)}t.forEach=function(N,R){pd(this),this.g.forEach(function(D,z){D.forEach(function(le){N.call(R,le,z,this)},this)},this)};function mM(N,R){pd(N);let D=[];if(typeof R=="string")fM(N,R)&&(D=D.concat(N.g.get(af(N,R))));else for(N=Array.from(N.g.values()),R=0;R<N.length;R++)D=D.concat(N[R]);return D}t.set=function(N,R){return pd(this),this.i=null,N=af(this,N),fM(this,N)&&(this.h-=this.g.get(N).length),this.g.set(N,[R]),this.h+=1,this},t.get=function(N,R){return N?(N=mM(this,N),N.length>0?String(N[0]):R):R};function pM(N,R,D){hM(N,R),D.length>0&&(N.i=null,N.g.set(af(N,R),m(D)),N.h+=D.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const N=[],R=Array.from(this.g.keys());for(let z=0;z<R.length;z++){var D=R[z];const le=yg(D);D=mM(this,D);for(let de=0;de<D.length;de++){let Fe=le;D[de]!==""&&(Fe+="="+yg(D[de])),N.push(Fe)}}return this.i=N.join("&")};function gM(N){const R=new jg;return R.i=N.i,N.g&&(R.g=new Map(N.g),R.h=N.h),R}function af(N,R){return R=String(R),N.j&&(R=R.toLowerCase()),R}function Zre(N,R){R&&!N.j&&(pd(N),N.i=null,N.g.forEach(function(D,z){const le=z.toLowerCase();z!=le&&(hM(this,z),pM(this,le,D))},N)),N.j=R}function Jre(N,R){const D=new St;if(o.Image){const z=new Image;z.onload=d(pc,D,"TestLoadImage: loaded",!0,R,z),z.onerror=d(pc,D,"TestLoadImage: error",!1,R,z),z.onabort=d(pc,D,"TestLoadImage: abort",!1,R,z),z.ontimeout=d(pc,D,"TestLoadImage: timeout",!1,R,z),o.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=N}else R(!1)}function ese(N,R){const D=new St,z=new AbortController,le=setTimeout(()=>{z.abort(),pc(D,"TestPingServer: timeout",!1,R)},1e4);fetch(N,{signal:z.signal}).then(de=>{clearTimeout(le),de.ok?pc(D,"TestPingServer: ok",!0,R):pc(D,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(le),pc(D,"TestPingServer: error",!1,R)})}function pc(N,R,D,z,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),z(D)}catch{}}function tse(){this.g=new Na}function S1(N){this.i=N.Sb||null,this.h=N.ab||!1}h(S1,_i),S1.prototype.g=function(){return new Tb(this.i,this.h)};function Tb(N,R){on.call(this),this.H=N,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Tb,on),t=Tb.prototype,t.open=function(N,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=N,this.D=R,this.readyState=1,Sg(this)},t.send=function(N){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const R={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};N&&(R.body=N),(this.H||o).fetch(new Request(this.D,R)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ng(this)),this.readyState=0},t.Pa=function(N){if(this.g&&(this.l=N,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=N.headers,this.readyState=2,Sg(this)),this.g&&(this.readyState=3,Sg(this),this.g)))if(this.responseType==="arraybuffer")N.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in N){if(this.j=N.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;yM(this)}else N.text().then(this.Oa.bind(this),this.ga.bind(this))};function yM(N){N.j.read().then(N.Ma.bind(N)).catch(N.ga.bind(N))}t.Ma=function(N){if(this.g){if(this.o&&N.value)this.response.push(N.value);else if(!this.o){var R=N.value?N.value:new Uint8Array(0);(R=this.B.decode(R,{stream:!N.done}))&&(this.response=this.responseText+=R)}N.done?Ng(this):Sg(this),this.readyState==3&&yM(this)}},t.Oa=function(N){this.g&&(this.response=this.responseText=N,Ng(this))},t.Na=function(N){this.g&&(this.response=N,Ng(this))},t.ga=function(){this.g&&Ng(this)};function Ng(N){N.readyState=4,N.l=null,N.j=null,N.B=null,Sg(N)}t.setRequestHeader=function(N,R){this.A.append(N,R)},t.getResponseHeader=function(N){return this.h&&this.h.get(N.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const N=[],R=this.h.entries();for(var D=R.next();!D.done;)D=D.value,N.push(D[0]+": "+D[1]),D=R.next();return N.join(`\r
`)};function Sg(N){N.onreadystatechange&&N.onreadystatechange.call(N)}Object.defineProperty(Tb.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(N){this.m=N?"include":"same-origin"}});function vM(N){let R="";return O(N,function(D,z){R+=z,R+=":",R+=D,R+=`\r
`}),R}function E1(N,R,D){e:{for(z in D){var z=!1;break e}z=!0}z||(D=vM(D),typeof N=="string"?D!=null&&yg(D):Fn(N,R,D))}function ar(N){on.call(this),this.headers=new Map,this.L=N||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(ar,on);var nse=/^https?$/i,rse=["POST","PUT"];t=ar.prototype,t.Fa=function(N){this.H=N},t.ea=function(N,R,D,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+N);R=R?R.toUpperCase():"GET",this.D=N,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ea.g(),this.g.onreadystatechange=f(u(this.Ca,this));try{this.B=!0,this.g.open(R,String(N),!0),this.B=!1}catch(de){xM(this,de);return}if(N=D||"",D=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var le in z)D.set(le,z[le]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const de of z.keys())D.set(de,z.get(de));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(D.keys()).find(de=>de.toLowerCase()=="content-type"),le=o.FormData&&N instanceof o.FormData,!(Array.prototype.indexOf.call(rse,R,void 0)>=0)||z||le||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[de,Fe]of D)this.g.setRequestHeader(de,Fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(N),this.v=!1}catch(de){xM(this,de)}};function xM(N,R){N.h=!1,N.g&&(N.j=!0,N.g.abort(),N.j=!1),N.l=R,N.o=5,bM(N),Cb(N)}function bM(N){N.A||(N.A=!0,K(N,"complete"),K(N,"error"))}t.abort=function(N){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=N||7,K(this,"complete"),K(this,"abort"),Cb(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cb(this,!0)),ar.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?wM(this):this.Xa())},t.Xa=function(){wM(this)};function wM(N){if(N.h&&typeof a<"u"){if(N.v&&gc(N)==4)setTimeout(N.Ca.bind(N),0);else if(K(N,"readystatechange"),gc(N)==4){N.h=!1;try{const de=N.ca();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var D;if(!(D=R)){var z;if(z=de===0){let Fe=String(N.D).match(uM)[1]||null;!Fe&&o.self&&o.self.location&&(Fe=o.self.location.protocol.slice(0,-1)),z=!nse.test(Fe?Fe.toLowerCase():"")}D=z}if(D)K(N,"complete"),K(N,"success");else{N.o=6;try{var le=gc(N)>2?N.g.statusText:""}catch{le=""}N.l=le+" ["+N.ca()+"]",bM(N)}}finally{Cb(N)}}}}function Cb(N,R){if(N.g){N.m&&(clearTimeout(N.m),N.m=null);const D=N.g;N.g=null,R||K(N,"ready");try{D.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function gc(N){return N.g?N.g.readyState:0}t.ca=function(){try{return gc(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(N){if(this.g){var R=this.g.responseText;return N&&R.indexOf(N)==0&&(R=R.substring(N.length)),ys(R)}};function _M(N){try{if(!N.g)return null;if("response"in N.g)return N.g.response;switch(N.F){case"":case"text":return N.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in N.g)return N.g.mozResponseArrayBuffer}return null}catch{return null}}function sse(N){const R={};N=(N.g&&gc(N)>=2&&N.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<N.length;z++){if(k(N[z]))continue;var D=Ure(N[z]);const le=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const de=R[le]||[];R[le]=de,de.push(D)}W(R,function(z){return z.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Eg(N,R,D){return D&&D.internalChannelParams&&D.internalChannelParams[N]||R}function jM(N){this.za=0,this.i=[],this.j=new St,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Eg("failFast",!1,N),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Eg("baseRetryDelayMs",5e3,N),this.Za=Eg("retryDelaySeedMs",1e4,N),this.Ta=Eg("forwardChannelMaxRetries",2,N),this.va=Eg("forwardChannelRequestTimeoutMs",2e4,N),this.ma=N&&N.xmlHttpFactory||void 0,this.Ua=N&&N.Rb||void 0,this.Aa=N&&N.useFetchStreams||!1,this.O=void 0,this.L=N&&N.supportsCrossDomainXhr||!1,this.M="",this.h=new iM(N&&N.concurrentRequestLimit),this.Ba=new tse,this.S=N&&N.fastHandshake||!1,this.R=N&&N.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=N&&N.Pb||!1,N&&N.ua&&this.j.ua(),N&&N.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&N&&N.detectBufferingProxy||!1,this.ia=void 0,N&&N.longPollingTimeout&&N.longPollingTimeout>0&&(this.ia=N.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=jM.prototype,t.ka=8,t.I=1,t.connect=function(N,R,D,z){kr(0),this.W=N,this.H=R||{},D&&z!==void 0&&(this.H.OSID=D,this.H.OAID=z),this.F=this.X,this.J=kM(this,null,this.W),Ib(this)};function A1(N){if(NM(N),N.I==3){var R=N.V++,D=vo(N.J);if(Fn(D,"SID",N.M),Fn(D,"RID",R),Fn(D,"TYPE","terminate"),Ag(N,D),R=new fc(N,N.j,R),R.M=2,R.A=Ab(vo(D)),D=!1,o.navigator&&o.navigator.sendBeacon)try{D=o.navigator.sendBeacon(R.A.toString(),"")}catch{}!D&&o.Image&&(new Image().src=R.A,D=!0),D||(R.g=RM(R.j,null),R.g.ea(R.A)),R.F=Date.now(),Eb(R)}IM(N)}function Pb(N){N.g&&(C1(N),N.g.cancel(),N.g=null)}function NM(N){Pb(N),N.v&&(o.clearTimeout(N.v),N.v=null),kb(N),N.h.cancel(),N.m&&(typeof N.m=="number"&&o.clearTimeout(N.m),N.m=null)}function Ib(N){if(!aM(N.h)&&!N.m){N.m=!0;var R=N.Ea;S||g(),P||(S(),P=!0),j.add(R,N),N.D=0}}function ise(N,R){return oM(N.h)>=N.h.j-(N.m?1:0)?!1:N.m?(N.i=R.G.concat(N.i),!0):N.I==1||N.I==2||N.D>=(N.Sa?0:N.Ta)?!1:(N.m=fd(u(N.Ea,N,R),PM(N,N.D)),N.D++,!0)}t.Ea=function(N){if(this.m)if(this.m=null,this.I==1){if(!N){this.V=Math.floor(Math.random()*1e5),N=this.V++;const le=new fc(this,this.j,N);let de=this.o;if(this.U&&(de?(de=Z(de),Ae(de,this.U)):de=this.U),this.u!==null||this.R||(le.J=de,de=null),this.S)e:{for(var R=0,D=0;D<this.i.length;D++){t:{var z=this.i[D];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(R+=z,R>4096){R=D;break e}if(R===4096||D===this.i.length-1){R=D+1;break e}}R=1e3}else R=1e3;R=EM(this,le,R),D=vo(this.J),Fn(D,"RID",N),Fn(D,"CVER",22),this.G&&Fn(D,"X-HTTP-Session-Id",this.G),Ag(this,D),de&&(this.R?R="headers="+yg(vM(de))+"&"+R:this.u&&E1(D,this.u,de)),j1(this.h,le),this.Ra&&Fn(D,"TYPE","init"),this.S?(Fn(D,"$req",R),Fn(D,"SID","null"),le.U=!0,x1(le,D,null)):x1(le,D,R),this.I=2}}else this.I==3&&(N?SM(this,N):this.i.length==0||aM(this.h)||SM(this))};function SM(N,R){var D;R?D=R.l:D=N.V++;const z=vo(N.J);Fn(z,"SID",N.M),Fn(z,"RID",D),Fn(z,"AID",N.K),Ag(N,z),N.u&&N.o&&E1(z,N.u,N.o),D=new fc(N,N.j,D,N.D+1),N.u===null&&(D.J=N.o),R&&(N.i=R.G.concat(N.i)),R=EM(N,D,1e3),D.H=Math.round(N.va*.5)+Math.round(N.va*.5*Math.random()),j1(N.h,D),x1(D,z,R)}function Ag(N,R){N.H&&O(N.H,function(D,z){Fn(R,z,D)}),N.l&&O({},function(D,z){Fn(R,z,D)})}function EM(N,R,D){D=Math.min(N.i.length,D);const z=N.l?u(N.l.Ka,N.l,N):null;e:{var le=N.i;let Wt=-1;for(;;){const Rr=["count="+D];Wt==-1?D>0?(Wt=le[0].g,Rr.push("ofs="+Wt)):Wt=0:Rr.push("ofs="+Wt);let Tn=!0;for(let Gr=0;Gr<D;Gr++){var de=le[Gr].g;const xo=le[Gr].map;if(de-=Wt,de<0)Wt=Math.max(0,le[Gr].g-100),Tn=!1;else try{de="req"+de+"_"||"";try{var Fe=xo instanceof Map?xo:Object.entries(xo);for(const[yd,yc]of Fe){let vc=yc;l(yc)&&(vc=dn(yc)),Rr.push(de+yd+"="+encodeURIComponent(vc))}}catch(yd){throw Rr.push(de+"type="+encodeURIComponent("_badmap")),yd}}catch{z&&z(xo)}}if(Tn){Fe=Rr.join("&");break e}}Fe=void 0}return N=N.i.splice(0,D),R.G=N,Fe}function AM(N){if(!N.g&&!N.v){N.Y=1;var R=N.Da;S||g(),P||(S(),P=!0),j.add(R,N),N.A=0}}function T1(N){return N.g||N.v||N.A>=3?!1:(N.Y++,N.v=fd(u(N.Da,N),PM(N,N.A)),N.A++,!0)}t.Da=function(){if(this.v=null,TM(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var N=4*this.T;this.j.info("BP detection timer enabled: "+N),this.B=fd(u(this.Wa,this),N)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,kr(10),Pb(this),TM(this))};function C1(N){N.B!=null&&(o.clearTimeout(N.B),N.B=null)}function TM(N){N.g=new fc(N,N.j,"rpc",N.Y),N.u===null&&(N.g.J=N.o),N.g.P=0;var R=vo(N.na);Fn(R,"RID","rpc"),Fn(R,"SID",N.M),Fn(R,"AID",N.K),Fn(R,"CI",N.F?"0":"1"),!N.F&&N.ia&&Fn(R,"TO",N.ia),Fn(R,"TYPE","xmlhttp"),Ag(N,R),N.u&&N.o&&E1(R,N.u,N.o),N.O&&(N.g.H=N.O);var D=N.g;N=N.ba,D.M=1,D.A=Ab(vo(R)),D.u=null,D.R=!0,nM(D,N)}t.Va=function(){this.C!=null&&(this.C=null,Pb(this),T1(this),kr(19))};function kb(N){N.C!=null&&(o.clearTimeout(N.C),N.C=null)}function CM(N,R){var D=null;if(N.g==R){kb(N),C1(N),N.g=null;var z=2}else if(_1(N.h,R))D=R.G,lM(N.h,R),z=1;else return;if(N.I!=0){if(R.o)if(z==1){D=R.u?R.u.length:0,R=Date.now()-R.F;var le=N.D;z=cl(),K(z,new Sa(z,D)),Ib(N)}else AM(N);else if(le=R.m,le==3||le==0&&R.X>0||!(z==1&&ise(N,R)||z==2&&T1(N)))switch(D&&D.length>0&&(R=N.h,R.i=R.i.concat(D)),le){case 1:gd(N,5);break;case 4:gd(N,10);break;case 3:gd(N,6);break;default:gd(N,2)}}}function PM(N,R){let D=N.Qa+Math.floor(Math.random()*N.Za);return N.isActive()||(D*=2),D*R}function gd(N,R){if(N.j.info("Error code "+R),R==2){var D=u(N.bb,N),z=N.Ua;const le=!z;z=new mc(z||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||xg(z,"https"),Ab(z),le?Jre(z.toString(),D):ese(z.toString(),D)}else kr(2);N.I=0,N.l&&N.l.pa(R),IM(N),NM(N)}t.bb=function(N){N?(this.j.info("Successfully pinged google.com"),kr(2)):(this.j.info("Failed to ping google.com"),kr(1))};function IM(N){if(N.I=0,N.ja=[],N.l){const R=cM(N.h);(R.length!=0||N.i.length!=0)&&(y(N.ja,R),y(N.ja,N.i),N.h.i.length=0,m(N.i),N.i.length=0),N.l.oa()}}function kM(N,R,D){var z=D instanceof mc?vo(D):new mc(D);if(z.g!="")R&&(z.g=R+"."+z.g),bg(z,z.u);else{var le=o.location;z=le.protocol,R=R?R+"."+le.hostname:le.hostname,le=+le.port;const de=new mc(null);z&&xg(de,z),R&&(de.g=R),le&&bg(de,le),D&&(de.h=D),z=de}return D=N.G,R=N.wa,D&&R&&Fn(z,D,R),Fn(z,"VER",N.ka),Ag(N,z),z}function RM(N,R,D){if(R&&!N.L)throw Error("Can't create secondary domain capable XhrIo object.");return R=N.Aa&&!N.ma?new ar(new S1({ab:D})):new ar(N.ma),R.Fa(N.L),R}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function OM(){}t=OM.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Rb(){}Rb.prototype.g=function(N,R){return new Si(N,R)};function Si(N,R){on.call(this),this.g=new jM(R),this.l=N,this.h=R&&R.messageUrlParams||null,N=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(N?N["X-Client-Protocol"]="webchannel":N={"X-Client-Protocol":"webchannel"}),this.g.o=N,N=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(N?N["X-WebChannel-Content-Type"]=R.messageContentType:N={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.sa&&(N?N["X-WebChannel-Client-Profile"]=R.sa:N={"X-WebChannel-Client-Profile":R.sa}),this.g.U=N,(N=R&&R.Qb)&&!k(N)&&(this.g.u=N),this.A=R&&R.supportsCrossDomainXhr||!1,this.v=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!k(R)&&(this.g.G=R,N=this.h,N!==null&&R in N&&(N=this.h,R in N&&delete N[R])),this.j=new of(this)}h(Si,on),Si.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Si.prototype.close=function(){A1(this.g)},Si.prototype.o=function(N){var R=this.g;if(typeof N=="string"){var D={};D.__data__=N,N=D}else this.v&&(D={},D.__data__=dn(N),N=D);R.i.push(new Wre(R.Ya++,N)),R.I==3&&Ib(R)},Si.prototype.N=function(){this.g.l=null,delete this.j,A1(this.g),delete this.g,Si.Z.N.call(this)};function DM(N){ti.call(this),N.__headers__&&(this.headers=N.__headers__,this.statusCode=N.__status__,delete N.__headers__,delete N.__status__);var R=N.__sm__;if(R){e:{for(const D in R){N=D;break e}N=void 0}(this.i=N)&&(N=this.i,R=R!==null&&N in R?R[N]:void 0),this.data=R}else this.data=N}h(DM,ti);function MM(){dc.call(this),this.status=1}h(MM,dc);function of(N){this.g=N}h(of,OM),of.prototype.ra=function(){K(this.g,"a")},of.prototype.qa=function(N){K(this.g,new DM(N))},of.prototype.pa=function(N){K(this.g,new MM)},of.prototype.oa=function(){K(this.g,"b")},Rb.prototype.createWebChannel=Rb.prototype.g,Si.prototype.send=Si.prototype.o,Si.prototype.open=Si.prototype.m,Si.prototype.close=Si.prototype.close,bH=function(){return new Rb},xH=function(){return cl()},vH=ss,yC={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Hi.NO_ERROR=0,Hi.TIMEOUT=8,Hi.HTTP_ERROR=6,nw=Hi,ni.COMPLETE="complete",yH=ni,hd.EventType=ji,ji.OPEN="a",ji.CLOSE="b",ji.ERROR="c",ji.MESSAGE="d",on.prototype.listen=on.prototype.J,dy=hd,ar.prototype.listenOnce=ar.prototype.K,ar.prototype.getLastError=ar.prototype.Ha,ar.prototype.getLastErrorCode=ar.prototype.ya,ar.prototype.getStatus=ar.prototype.ca,ar.prototype.getResponseJson=ar.prototype.La,ar.prototype.getResponseText=ar.prototype.la,ar.prototype.send=ar.prototype.ea,ar.prototype.setWithCredentials=ar.prototype.Fa,gH=ar}).apply(typeof a0<"u"?a0:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}js.UNAUTHENTICATED=new js(null),js.GOOGLE_CREDENTIALS=new js("google-credentials-uid"),js.FIRST_PARTY=new js("first-party-uid"),js.MOCK_USER=new js("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wp="12.9.0";function Jge(t){Wp=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=new ER("@firebase/firestore");function _f(){return Eh.logLevel}function Ze(t,...e){if(Eh.logLevel<=Qt.DEBUG){const n=e.map(VR);Eh.debug(`Firestore (${Wp}): ${t}`,...n)}}function Wl(t,...e){if(Eh.logLevel<=Qt.ERROR){const n=e.map(VR);Eh.error(`Firestore (${Wp}): ${t}`,...n)}}function Ah(t,...e){if(Eh.logLevel<=Qt.WARN){const n=e.map(VR);Eh.warn(`Firestore (${Wp}): ${t}`,...n)}}function VR(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,wH(t,r,n)}function wH(t,e,n){let r=`FIRESTORE (${Wp}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Wl(r),new Error(r)}function vn(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||wH(e,s,r)}function Lt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends fo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _H{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eye{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(js.UNAUTHENTICATED))}shutdown(){}}class tye{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class nye{constructor(e){this.t=e,this.currentUser=js.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){vn(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let a=new Il;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Il,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{Ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Il)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(vn(typeof r.accessToken=="string",31837,{l:r}),new _H(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return vn(e===null||typeof e=="string",2055,{h:e}),new js(e)}}class rye{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=js.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class sye{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new rye(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(js.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class x${constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iye{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){vn(this.o===void 0,3512);const r=a=>{a.error!=null&&Ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,Ze("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{Ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):Ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new x$(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(vn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new x$(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aye(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=aye(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function Xt(t,e){return t<e?-1:t>e?1:0}function vC(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),a=e.charAt(r);if(s!==a)return xE(s)===xE(a)?Xt(s,a):xE(s)?1:-1}return Xt(t.length,e.length)}const oye=55296,lye=57343;function xE(t){const e=t.charCodeAt(0);return e>=oye&&e<=lye}function qm(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC="__name__";class jo{constructor(e,n,r){n===void 0?n=0:n>e.length&&At(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&At(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return jo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof jo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=jo.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return Xt(e.length,n.length)}static compareSegments(e,n){const r=jo.isNumericId(e),s=jo.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?jo.extractNumericId(e).compare(jo.extractNumericId(n)):vC(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wu.fromString(e.substring(4,e.length-2))}}class On extends jo{construct(e,n,r){return new On(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new qe(xe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new On(n)}static emptyPath(){return new On([])}}const cye=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ds extends jo{construct(e,n,r){return new ds(e,n,r)}static isValidIdentifier(e){return cye.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ds.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xC}static keyField(){return new ds([xC])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new qe(xe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new qe(xe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new qe(xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(a(),s++)}if(a(),o)throw new qe(xe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ds(n)}static emptyPath(){return new ds([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.path=e}static fromPath(e){return new gt(On.fromString(e))}static fromName(e){return new gt(On.fromString(e).popFirst(5))}static empty(){return new gt(On.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&On.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return On.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new gt(new On(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jH(t,e,n){if(!n)throw new qe(xe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function uye(t,e,n,r){if(e===!0&&r===!0)throw new qe(xe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function b$(t){if(!gt.isDocumentKey(t))throw new qe(xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function w$(t){if(gt.isDocumentKey(t))throw new qe(xe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function NH(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function AN(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":At(12329,{type:typeof t})}function va(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new qe(xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=AN(t);throw new qe(xe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function dye(t,e){if(e<=0)throw new qe(xe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(t,e){const n={typeString:t};return e&&(n.value=e),n}function Yx(t,e){if(!NH(t))throw new qe(xe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new qe(xe.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _$=-62135596800,j$=1e6;class qn{static now(){return qn.fromMillis(Date.now())}static fromDate(e){return qn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*j$);return new qn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new qe(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new qe(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<_$)throw new qe(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qe(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/j$}_compareTo(e){return this.seconds===e.seconds?Xt(this.nanoseconds,e.nanoseconds):Xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yx(e,qn._jsonSchema))return new qn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_$;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qn._jsonSchemaVersion="firestore/timestamp/1.0",qn._jsonSchema={type:Pr("string",qn._jsonSchemaVersion),seconds:Pr("number"),nanoseconds:Pr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{static fromTimestamp(e){return new Rt(e)}static min(){return new Rt(new qn(0,0))}static max(){return new Rt(new qn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=-1;function hye(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Rt.fromTimestamp(r===1e9?new qn(n+1,0):new qn(n,r));return new Ru(s,gt.empty(),e)}function fye(t){return new Ru(t.readTime,t.key,Nv)}class Ru{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ru(Rt.min(),gt.empty(),Nv)}static max(){return new Ru(Rt.max(),gt.empty(),Nv)}}function mye(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=gt.comparator(t.documentKey,e.documentKey),n!==0?n:Xt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pye="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gye{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hp(t){if(t.code!==xe.FAILED_PRECONDITION||t.message!==pye)throw t;Ze("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&At(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Se((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Se?n:Se.resolve(n)}catch(n){return Se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Se.reject(n)}static resolve(e){return new Se((n,r)=>{n(e)})}static reject(e){return new Se((n,r)=>{r(e)})}static waitFor(e){return new Se((n,r)=>{let s=0,a=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++a,o&&a===s&&n()},c=>r(c))}),o=!0,a===s&&n()})}static or(e){let n=Se.resolve(!1);for(const r of e)n=n.next(s=>s?Se.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new Se((r,s)=>{const a=e.length,o=new Array(a);let l=0;for(let c=0;c<a;c++){const u=c;n(e[u]).next(d=>{o[u]=d,++l,l===a&&r(o)},d=>s(d))}})}static doWhile(e,n){return new Se((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function yye(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Kp(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}TN.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=-1;function CN(t){return t==null}function o_(t){return t===0&&1/t==-1/0}function vye(t){return typeof t=="number"&&Number.isInteger(t)&&!o_(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SH="";function xye(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=N$(e)),e=bye(t.get(n),e);return N$(e)}function bye(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case SH:n+="";break;default:n+=a}}return n}function N$(t){return t+SH+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S$(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function EH(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,n){this.comparator=e,this.root=n||cs.EMPTY}insert(e,n){return new ir(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,cs.BLACK,null,null))}remove(e){return new ir(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cs.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new o0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new o0(this.root,e,this.comparator,!1)}getReverseIterator(){return new o0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new o0(this.root,e,this.comparator,!0)}}class o0{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cs{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??cs.RED,this.left=s??cs.EMPTY,this.right=a??cs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new cs(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return cs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return cs.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw At(43730,{key:this.key,value:this.value});if(this.right.isRed())throw At(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw At(27949);return e+(this.isRed()?0:1)}}cs.EMPTY=null,cs.RED=!0,cs.BLACK=!1;cs.EMPTY=new class{constructor(){this.size=0}get key(){throw At(57766)}get value(){throw At(16141)}get color(){throw At(16727)}get left(){throw At(29726)}get right(){throw At(36894)}copy(e,n,r,s,a){return this}insert(e,n,r){return new cs(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this.comparator=e,this.data=new ir(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new E$(this.data.getIterator())}getIteratorFrom(e){return new E$(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof qr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new qr(this.comparator);return n.data=e,n}}class E${constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this.fields=e,e.sort(ds.comparator)}static empty(){return new Di([])}unionWith(e){let n=new qr(ds.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Di(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qm(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AH extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new AH("Invalid base64 string: "+a):a}}(e);return new ms(n)}static fromUint8Array(e){const n=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new ms(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ms.EMPTY_BYTE_STRING=new ms("");const wye=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ou(t){if(vn(!!t,39018),typeof t=="string"){let e=0;const n=wye.exec(t);if(vn(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gr(t.seconds),nanos:gr(t.nanos)}}function gr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Du(t){return typeof t=="string"?ms.fromBase64String(t):ms.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TH="server_timestamp",CH="__type__",PH="__previous_value__",IH="__local_write_time__";function zR(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[CH])==null?void 0:r.stringValue)===TH}function PN(t){const e=t.mapValue.fields[PH];return zR(e)?PN(e):e}function Sv(t){const e=Ou(t.mapValue.fields[IH].timestampValue);return new qn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ye{constructor(e,n,r,s,a,o,l,c,u,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d,this.apiKey=h}}const l_="(default)";class Ev{constructor(e,n){this.projectId=e,this.database=n||l_}static empty(){return new Ev("","")}get isDefaultDatabase(){return this.database===l_}isEqual(e){return e instanceof Ev&&e.projectId===this.projectId&&e.database===this.database}}function jye(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new qe(xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ev(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kH="__type__",RH="__max__",l0={mapValue:{fields:{__type__:{stringValue:RH}}}},OH="__vector__",c_="value";function Mu(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zR(t)?4:Sye(t)?9007199254740991:Nye(t)?10:11:At(28295,{value:t})}function Zo(t,e){if(t===e)return!0;const n=Mu(t);if(n!==Mu(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Sv(t).isEqual(Sv(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=Ou(s.timestampValue),l=Ou(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return Du(s.bytesValue).isEqual(Du(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return gr(s.geoPointValue.latitude)===gr(a.geoPointValue.latitude)&&gr(s.geoPointValue.longitude)===gr(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return gr(s.integerValue)===gr(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=gr(s.doubleValue),l=gr(a.doubleValue);return o===l?o_(o)===o_(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return qm(t.arrayValue.values||[],e.arrayValue.values||[],Zo);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},l=a.mapValue.fields||{};if(S$(o)!==S$(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Zo(o[c],l[c])))return!1;return!0}(t,e);default:return At(52216,{left:t})}}function Av(t,e){return(t.values||[]).find(n=>Zo(n,e))!==void 0}function Wm(t,e){if(t===e)return 0;const n=Mu(t),r=Mu(e);if(n!==r)return Xt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xt(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=gr(a.integerValue||a.doubleValue),c=gr(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return A$(t.timestampValue,e.timestampValue);case 4:return A$(Sv(t),Sv(e));case 5:return vC(t.stringValue,e.stringValue);case 6:return function(a,o){const l=Du(a),c=Du(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=Xt(l[u],c[u]);if(d!==0)return d}return Xt(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=Xt(gr(a.latitude),gr(o.latitude));return l!==0?l:Xt(gr(a.longitude),gr(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return T$(t.arrayValue,e.arrayValue);case 10:return function(a,o){var f,m,y,p;const l=a.fields||{},c=o.fields||{},u=(f=l[c_])==null?void 0:f.arrayValue,d=(m=c[c_])==null?void 0:m.arrayValue,h=Xt(((y=u==null?void 0:u.values)==null?void 0:y.length)||0,((p=d==null?void 0:d.values)==null?void 0:p.length)||0);return h!==0?h:T$(u,d)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===l0.mapValue&&o===l0.mapValue)return 0;if(a===l0.mapValue)return 1;if(o===l0.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){const f=vC(c[h],d[h]);if(f!==0)return f;const m=Wm(l[c[h]],u[d[h]]);if(m!==0)return m}return Xt(c.length,d.length)}(t.mapValue,e.mapValue);default:throw At(23264,{he:n})}}function A$(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Xt(t,e);const n=Ou(t),r=Ou(e),s=Xt(n.seconds,r.seconds);return s!==0?s:Xt(n.nanos,r.nanos)}function T$(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=Wm(n[s],r[s]);if(a)return a}return Xt(n.length,r.length)}function Hm(t){return bC(t)}function bC(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ou(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Du(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return gt.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=bC(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const o of r)a?a=!1:s+=",",s+=`${o}:${bC(n.fields[o])}`;return s+"}"}(t.mapValue):At(61005,{value:t})}function rw(t){switch(Mu(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=PN(t);return e?16+rw(e):16;case 5:return 2*t.stringValue.length;case 6:return Du(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+rw(a),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Qu(r.fields,(a,o)=>{s+=a.length+rw(o)}),s}(t.mapValue);default:throw At(13486,{value:t})}}function C$(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function wC(t){return!!t&&"integerValue"in t}function qR(t){return!!t&&"arrayValue"in t}function P$(t){return!!t&&"nullValue"in t}function I$(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function sw(t){return!!t&&"mapValue"in t}function Nye(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[kH])==null?void 0:r.stringValue)===OH}function Ry(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Qu(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ry(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ry(t.arrayValue.values[n]);return e}return{...t}}function Sye(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===RH}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.value=e}static empty(){return new fi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!sw(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ry(n)}setAll(e){let n=ds.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Ry(o):s.push(l.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());sw(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Zo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];sw(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Qu(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new fi(Ry(this.value))}}function DH(t){const e=[];return Qu(t.fields,(n,r)=>{const s=new ds([n]);if(sw(r)){const a=DH(r.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new Di(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n,r,s,a,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new As(e,0,Rt.min(),Rt.min(),Rt.min(),fi.empty(),0)}static newFoundDocument(e,n,r,s){return new As(e,1,n,Rt.min(),r,s,0)}static newNoDocument(e,n){return new As(e,2,n,Rt.min(),Rt.min(),fi.empty(),0)}static newUnknownDocument(e,n){return new As(e,3,n,Rt.min(),Rt.min(),fi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Rt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Rt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof As&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new As(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e,n){this.position=e,this.inclusive=n}}function k$(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?r=gt.comparator(gt.fromName(o.referenceValue),n.key):r=Wm(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function R$(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Zo(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,n="asc"){this.field=e,this.dir=n}}function Eye(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MH{}class Cr extends MH{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Tye(e,n,r):n==="array-contains"?new Iye(e,r):n==="in"?new kye(e,r):n==="not-in"?new Rye(e,r):n==="array-contains-any"?new Oye(e,r):new Cr(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Cye(e,r):new Pye(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Wm(n,this.value)):n!==null&&Mu(this.value)===Mu(n)&&this.matchesComparison(Wm(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return At(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ho extends MH{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ho(e,n)}matches(e){return LH(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function LH(t){return t.op==="and"}function $H(t){return Aye(t)&&LH(t)}function Aye(t){for(const e of t.filters)if(e instanceof ho)return!1;return!0}function _C(t){if(t instanceof Cr)return t.field.canonicalString()+t.op.toString()+Hm(t.value);if($H(t))return t.filters.map(e=>_C(e)).join(",");{const e=t.filters.map(n=>_C(n)).join(",");return`${t.op}(${e})`}}function FH(t,e){return t instanceof Cr?function(r,s){return s instanceof Cr&&r.op===s.op&&r.field.isEqual(s.field)&&Zo(r.value,s.value)}(t,e):t instanceof ho?function(r,s){return s instanceof ho&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,o,l)=>a&&FH(o,s.filters[l]),!0):!1}(t,e):void At(19439)}function VH(t){return t instanceof Cr?function(n){return`${n.field.canonicalString()} ${n.op} ${Hm(n.value)}`}(t):t instanceof ho?function(n){return n.op.toString()+" {"+n.getFilters().map(VH).join(" ,")+"}"}(t):"Filter"}class Tye extends Cr{constructor(e,n,r){super(e,n,r),this.key=gt.fromName(r.referenceValue)}matches(e){const n=gt.comparator(e.key,this.key);return this.matchesComparison(n)}}class Cye extends Cr{constructor(e,n){super(e,"in",n),this.keys=BH("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Pye extends Cr{constructor(e,n){super(e,"not-in",n),this.keys=BH("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function BH(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>gt.fromName(r.referenceValue))}class Iye extends Cr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return qR(n)&&Av(n.arrayValue,this.value)}}class kye extends Cr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Av(this.value.arrayValue,n)}}class Rye extends Cr{constructor(e,n){super(e,"not-in",n)}matches(e){if(Av(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Av(this.value.arrayValue,n)}}class Oye extends Cr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!qR(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Av(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dye{constructor(e,n=null,r=[],s=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=o,this.endAt=l,this.Te=null}}function O$(t,e=null,n=[],r=[],s=null,a=null,o=null){return new Dye(t,e,n,r,s,a,o)}function WR(t){const e=Lt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>_C(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),CN(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Hm(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Hm(r)).join(",")),e.Te=n}return e.Te}function HR(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Eye(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!FH(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!R$(t.startAt,e.startAt)&&R$(t.endAt,e.endAt)}function jC(t){return gt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n=null,r=[],s=[],a=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Mye(t,e,n,r,s,a,o,l){return new Gp(t,e,n,r,s,a,o,l)}function KR(t){return new Gp(t)}function D$(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Lye(t){return gt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function UH(t){return t.collectionGroup!==null}function Oy(t){const e=Lt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new qr(ds.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Tv(a,r))}),n.has(ds.keyField().canonicalString())||e.Ie.push(new Tv(ds.keyField(),r))}return e.Ie}function Bo(t){const e=Lt(t);return e.Ee||(e.Ee=$ye(e,Oy(t))),e.Ee}function $ye(t,e){if(t.limitType==="F")return O$(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Tv(s.field,a)});const n=t.endAt?new u_(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new u_(t.startAt.position,t.startAt.inclusive):null;return O$(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function NC(t,e){const n=t.filters.concat([e]);return new Gp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Fye(t,e){const n=t.explicitOrderBy.concat([e]);return new Gp(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function d_(t,e,n){return new Gp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function IN(t,e){return HR(Bo(t),Bo(e))&&t.limitType===e.limitType}function zH(t){return`${WR(Bo(t))}|lt:${t.limitType}`}function jf(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>VH(s)).join(", ")}]`),CN(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Hm(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Hm(s)).join(",")),`Target(${r})`}(Bo(t))}; limitType=${t.limitType})`}function kN(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):gt.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of Oy(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const u=k$(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,Oy(r),s)||r.endAt&&!function(o,l,c){const u=k$(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,Oy(r),s))}(t,e)}function Vye(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qH(t){return(e,n)=>{let r=!1;for(const s of Oy(t)){const a=Bye(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function Bye(t,e,n){const r=t.field.isKeyField()?gt.comparator(e.key,n.key):function(a,o,l){const c=o.data.field(a),u=l.data.field(a);return c!==null&&u!==null?Wm(c,u):At(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return At(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Qu(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return EH(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uye=new ir(gt.comparator);function Hl(){return Uye}const WH=new ir(gt.comparator);function hy(...t){let e=WH;for(const n of t)e=e.insert(n.key,n);return e}function HH(t){let e=WH;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Md(){return Dy()}function KH(){return Dy()}function Dy(){return new Gh(t=>t.toString(),(t,e)=>t.isEqual(e))}const zye=new ir(gt.comparator),qye=new qr(gt.comparator);function Zt(...t){let e=qye;for(const n of t)e=e.add(n);return e}const Wye=new qr(Xt);function Hye(){return Wye}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:o_(e)?"-0":e}}function GH(t){return{integerValue:""+t}}function Kye(t,e){return vye(e)?GH(e):GR(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(){this._=void 0}}function Gye(t,e,n){return t instanceof Cv?function(s,a){const o={fields:{[CH]:{stringValue:TH},[IH]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&zR(a)&&(a=PN(a)),a&&(o.fields[PH]=a),{mapValue:o}}(n,e):t instanceof Pv?QH(t,e):t instanceof Iv?XH(t,e):function(s,a){const o=YH(s,a),l=M$(o)+M$(s.Ae);return wC(o)&&wC(s.Ae)?GH(l):GR(s.serializer,l)}(t,e)}function Yye(t,e,n){return t instanceof Pv?QH(t,e):t instanceof Iv?XH(t,e):n}function YH(t,e){return t instanceof h_?function(r){return wC(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Cv extends RN{}class Pv extends RN{constructor(e){super(),this.elements=e}}function QH(t,e){const n=ZH(e);for(const r of t.elements)n.some(s=>Zo(s,r))||n.push(r);return{arrayValue:{values:n}}}class Iv extends RN{constructor(e){super(),this.elements=e}}function XH(t,e){let n=ZH(e);for(const r of t.elements)n=n.filter(s=>!Zo(s,r));return{arrayValue:{values:n}}}class h_ extends RN{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function M$(t){return gr(t.integerValue||t.doubleValue)}function ZH(t){return qR(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qye{constructor(e,n){this.field=e,this.transform=n}}function Xye(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Pv&&s instanceof Pv||r instanceof Iv&&s instanceof Iv?qm(r.elements,s.elements,Zo):r instanceof h_&&s instanceof h_?Zo(r.Ae,s.Ae):r instanceof Cv&&s instanceof Cv}(t.transform,e.transform)}class Zye{constructor(e,n){this.version=e,this.transformResults=n}}class Qs{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Qs}static exists(e){return new Qs(void 0,e)}static updateTime(e){return new Qs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function iw(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ON{}function JH(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new DN(t.key,Qs.none()):new Qx(t.key,t.data,Qs.none());{const n=t.data,r=fi.empty();let s=new qr(ds.comparator);for(let a of e.fields)if(!s.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),s=s.add(a)}return new Xu(t.key,r,new Di(s.toArray()),Qs.none())}}function Jye(t,e,n){t instanceof Qx?function(s,a,o){const l=s.value.clone(),c=$$(s.fieldTransforms,a,o.transformResults);l.setAll(c),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Xu?function(s,a,o){if(!iw(s.precondition,a))return void a.convertToUnknownDocument(o.version);const l=$$(s.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(e7(s)),c.setAll(l),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function My(t,e,n,r){return t instanceof Qx?function(a,o,l,c){if(!iw(a.precondition,o))return l;const u=a.value.clone(),d=F$(a.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Xu?function(a,o,l,c){if(!iw(a.precondition,o))return l;const u=F$(a.fieldTransforms,c,o),d=o.data;return d.setAll(e7(a)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(a,o,l){return iw(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function eve(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=YH(r.transform,s||null);a!=null&&(n===null&&(n=fi.empty()),n.set(r.field,a))}return n||null}function L$(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&qm(r,s,(a,o)=>Xye(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Qx extends ON{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Xu extends ON{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function e7(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function $$(t,e,n){const r=new Map;vn(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const a=t[s],o=a.transform,l=e.data.field(a.field);r.set(a.field,Yye(o,l,n[s]))}return r}function F$(t,e,n){const r=new Map;for(const s of t){const a=s.transform,o=n.data.field(s.field);r.set(s.field,Gye(a,o,e))}return r}class DN extends ON{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tve extends ON{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nve{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&Jye(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=My(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=My(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=KH();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=n.has(s.key)?null:l;const c=JH(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(Rt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Zt())}isEqual(e){return this.batchId===e.batchId&&qm(this.mutations,e.mutations,(n,r)=>L$(n,r))&&qm(this.baseMutations,e.baseMutations,(n,r)=>L$(n,r))}}class YR{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){vn(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return zye}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,r[o].version);return new YR(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rve=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sve{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sr,rn;function ive(t){switch(t){case xe.OK:return At(64938);case xe.CANCELLED:case xe.UNKNOWN:case xe.DEADLINE_EXCEEDED:case xe.RESOURCE_EXHAUSTED:case xe.INTERNAL:case xe.UNAVAILABLE:case xe.UNAUTHENTICATED:return!1;case xe.INVALID_ARGUMENT:case xe.NOT_FOUND:case xe.ALREADY_EXISTS:case xe.PERMISSION_DENIED:case xe.FAILED_PRECONDITION:case xe.ABORTED:case xe.OUT_OF_RANGE:case xe.UNIMPLEMENTED:case xe.DATA_LOSS:return!0;default:return At(15467,{code:t})}}function t7(t){if(t===void 0)return Wl("GRPC error has no .code"),xe.UNKNOWN;switch(t){case Sr.OK:return xe.OK;case Sr.CANCELLED:return xe.CANCELLED;case Sr.UNKNOWN:return xe.UNKNOWN;case Sr.DEADLINE_EXCEEDED:return xe.DEADLINE_EXCEEDED;case Sr.RESOURCE_EXHAUSTED:return xe.RESOURCE_EXHAUSTED;case Sr.INTERNAL:return xe.INTERNAL;case Sr.UNAVAILABLE:return xe.UNAVAILABLE;case Sr.UNAUTHENTICATED:return xe.UNAUTHENTICATED;case Sr.INVALID_ARGUMENT:return xe.INVALID_ARGUMENT;case Sr.NOT_FOUND:return xe.NOT_FOUND;case Sr.ALREADY_EXISTS:return xe.ALREADY_EXISTS;case Sr.PERMISSION_DENIED:return xe.PERMISSION_DENIED;case Sr.FAILED_PRECONDITION:return xe.FAILED_PRECONDITION;case Sr.ABORTED:return xe.ABORTED;case Sr.OUT_OF_RANGE:return xe.OUT_OF_RANGE;case Sr.UNIMPLEMENTED:return xe.UNIMPLEMENTED;case Sr.DATA_LOSS:return xe.DATA_LOSS;default:return At(39323,{code:t})}}(rn=Sr||(Sr={}))[rn.OK=0]="OK",rn[rn.CANCELLED=1]="CANCELLED",rn[rn.UNKNOWN=2]="UNKNOWN",rn[rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rn[rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rn[rn.NOT_FOUND=5]="NOT_FOUND",rn[rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",rn[rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",rn[rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",rn[rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rn[rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rn[rn.ABORTED=10]="ABORTED",rn[rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",rn[rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",rn[rn.INTERNAL=13]="INTERNAL",rn[rn.UNAVAILABLE=14]="UNAVAILABLE",rn[rn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ave(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ove=new wu([4294967295,4294967295],0);function V$(t){const e=ave().encode(t),n=new pH;return n.update(e),new Uint8Array(n.digest())}function B$(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new wu([n,r],0),new wu([s,a],0)]}class QR{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new fy(`Invalid padding: ${n}`);if(r<0)throw new fy(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fy(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new fy(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=wu.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(wu.fromNumber(r)));return s.compare(ove)===1&&(s=new wu([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=V$(e),[r,s]=B$(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,s,a);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new QR(a,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=V$(e),[r,s]=B$(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,s,a);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class fy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Xx.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new MN(Rt.min(),s,new ir(Xt),Hl(),Zt())}}class Xx{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Xx(r,n,Zt(),Zt(),Zt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class n7{constructor(e,n){this.targetId=e,this.Ce=n}}class r7{constructor(e,n,r=ms.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class U${constructor(){this.ve=0,this.Fe=z$(),this.Me=ms.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Zt(),n=Zt(),r=Zt();return this.Fe.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:At(38017,{changeType:a})}}),new Xx(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=z$()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,vn(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class lve{constructor(e){this.Ge=e,this.ze=new Map,this.je=Hl(),this.He=c0(),this.Je=c0(),this.Ze=new ir(Xt)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:At(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const a=s.target;if(jC(a))if(r===0){const o=new gt(a.path);this.et(n,o,As.newNoDocument(o,Rt.min()))}else vn(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let o,l;try{o=Du(r).toUint8Array()}catch(c){if(c instanceof AH)return Ah("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new QR(o,s,a)}catch(c){return Ah(c instanceof fy?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.et(n,a,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((a,o)=>{const l=this.ot(o);if(l){if(a.current&&jC(l.target)){const c=new gt(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,As.newNoDocument(c,e))}a.Be&&(n.set(o,a.ke()),a.Ke())}});let r=Zt();this.Je.forEach((a,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(a))}),this.je.forEach((a,o)=>o.setReadTime(e));const s=new MN(e,n,this.Ze,this.je,r);return this.je=Hl(),this.He=c0(),this.Je=c0(),this.Ze=new ir(Xt),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new U$,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new qr(Xt),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new qr(Xt),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ze("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new U$),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function c0(){return new ir(gt.comparator)}function z$(){return new ir(gt.comparator)}const cve={asc:"ASCENDING",desc:"DESCENDING"},uve={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dve={and:"AND",or:"OR"};class hve{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function SC(t,e){return t.useProto3Json||CN(e)?e:{value:e}}function f_(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function s7(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fve(t,e){return f_(t,e.toTimestamp())}function Uo(t){return vn(!!t,49232),Rt.fromTimestamp(function(n){const r=Ou(n);return new qn(r.seconds,r.nanos)}(t))}function XR(t,e){return EC(t,e).canonicalString()}function EC(t,e){const n=function(s){return new On(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function i7(t){const e=On.fromString(t);return vn(u7(e),10190,{key:e.toString()}),e}function AC(t,e){return XR(t.databaseId,e.path)}function bE(t,e){const n=i7(e);if(n.get(1)!==t.databaseId.projectId)throw new qe(xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new qe(xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new gt(o7(n))}function a7(t,e){return XR(t.databaseId,e)}function mve(t){const e=i7(t);return e.length===4?On.emptyPath():o7(e)}function TC(t){return new On(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function o7(t){return vn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function q$(t,e,n){return{name:AC(t,e),fields:n.value.mapValue.fields}}function pve(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:At(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(u,d){return u.useProto3Json?(vn(d===void 0||typeof d=="string",58123),ms.fromBase64String(d||"")):(vn(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ms.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?xe.UNKNOWN:t7(u.code);return new qe(d,u.message||"")}(o);n=new r7(r,s,a,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=bE(t,r.document.name),a=Uo(r.document.updateTime),o=r.document.createTime?Uo(r.document.createTime):Rt.min(),l=new fi({mapValue:{fields:r.document.fields}}),c=As.newFoundDocument(s,a,o,l),u=r.targetIds||[],d=r.removedTargetIds||[];n=new aw(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=bE(t,r.document),a=r.readTime?Uo(r.readTime):Rt.min(),o=As.newNoDocument(s,a),l=r.removedTargetIds||[];n=new aw([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=bE(t,r.document),a=r.removedTargetIds||[];n=new aw([],a,s,null)}else{if(!("filter"in e))return At(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,o=new sve(s,a),l=r.targetId;n=new n7(l,o)}}return n}function gve(t,e){let n;if(e instanceof Qx)n={update:q$(t,e.key,e.value)};else if(e instanceof DN)n={delete:AC(t,e.key)};else if(e instanceof Xu)n={update:q$(t,e.key,e.data),updateMask:Sve(e.fieldMask)};else{if(!(e instanceof tve))return At(16599,{dt:e.type});n={verify:AC(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const l=o.transform;if(l instanceof Cv)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Pv)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Iv)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof h_)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw At(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:fve(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:At(27497)}(t,e.precondition)),n}function yve(t,e){return t&&t.length>0?(vn(e!==void 0,14353),t.map(n=>function(s,a){let o=s.updateTime?Uo(s.updateTime):Uo(a);return o.isEqual(Rt.min())&&(o=Uo(a)),new Zye(o,s.transformResults||[])}(n,e))):[]}function vve(t,e){return{documents:[a7(t,e.path)]}}function xve(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=a7(t,s);const a=function(u){if(u.length!==0)return c7(ho.create(u,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(u){if(u.length!==0)return u.map(d=>function(f){return{field:Nf(f.field),direction:_ve(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=SC(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function bve(t){let e=mve(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){vn(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let a=[];n.where&&(a=function(h){const f=l7(h);return f instanceof ho&&$H(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(y){return new Tv(Sf(y.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(n.orderBy));let l=null;n.limit&&(l=function(h){let f;return f=typeof h=="object"?h.value:h,CN(f)?null:f}(n.limit));let c=null;n.startAt&&(c=function(h){const f=!!h.before,m=h.values||[];return new u_(m,f)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const f=!h.before,m=h.values||[];return new u_(m,f)}(n.endAt)),Mye(e,s,o,a,l,"F",c,u)}function wve(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return At(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function l7(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Sf(n.unaryFilter.field);return Cr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Sf(n.unaryFilter.field);return Cr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Sf(n.unaryFilter.field);return Cr.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Sf(n.unaryFilter.field);return Cr.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return At(61313);default:return At(60726)}}(t):t.fieldFilter!==void 0?function(n){return Cr.create(Sf(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return At(58110);default:return At(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ho.create(n.compositeFilter.filters.map(r=>l7(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return At(1026)}}(n.compositeFilter.op))}(t):At(30097,{filter:t})}function _ve(t){return cve[t]}function jve(t){return uve[t]}function Nve(t){return dve[t]}function Nf(t){return{fieldPath:t.canonicalString()}}function Sf(t){return ds.fromServerFormat(t.fieldPath)}function c7(t){return t instanceof Cr?function(n){if(n.op==="=="){if(I$(n.value))return{unaryFilter:{field:Nf(n.field),op:"IS_NAN"}};if(P$(n.value))return{unaryFilter:{field:Nf(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(I$(n.value))return{unaryFilter:{field:Nf(n.field),op:"IS_NOT_NAN"}};if(P$(n.value))return{unaryFilter:{field:Nf(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nf(n.field),op:jve(n.op),value:n.value}}}(t):t instanceof ho?function(n){const r=n.getFilters().map(s=>c7(s));return r.length===1?r[0]:{compositeFilter:{op:Nve(n.op),filters:r}}}(t):At(54877,{filter:t})}function Sve(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function u7(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function d7(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n,r,s,a=Rt.min(),o=Rt.min(),l=ms.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new ru(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ru(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ru(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ru(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eve{constructor(e){this.yt=e}}function Ave(t){const e=bve({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?d_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tve{constructor(){this.Sn=new Cve}addToCollectionParentIndex(e,n){return this.Sn.add(n),Se.resolve()}getCollectionParents(e,n){return Se.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return Se.resolve()}deleteFieldIndex(e,n){return Se.resolve()}deleteAllFieldIndexes(e){return Se.resolve()}createTargetIndexes(e,n){return Se.resolve()}getDocumentsMatchingTarget(e,n){return Se.resolve(null)}getIndexType(e,n){return Se.resolve(0)}getFieldIndexes(e,n){return Se.resolve([])}getNextCollectionGroupToUpdate(e){return Se.resolve(null)}getMinOffset(e,n){return Se.resolve(Ru.min())}getMinOffsetFromCollectionGroup(e,n){return Se.resolve(Ru.min())}updateCollectionGroup(e,n,r){return Se.resolve()}updateIndexEntries(e,n){return Se.resolve()}}class Cve{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new qr(On.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new qr(On.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W$={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},h7=41943040;class li{static withCacheSize(e){return new li(e,li.DEFAULT_COLLECTION_PERCENTILE,li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */li.DEFAULT_COLLECTION_PERCENTILE=10,li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,li.DEFAULT=new li(h7,li.DEFAULT_COLLECTION_PERCENTILE,li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),li.DISABLED=new li(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Km(0)}static ar(){return new Km(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H$="LruGarbageCollector",Pve=1048576;function K$([t,e],[n,r]){const s=Xt(t,n);return s===0?Xt(e,r):s}class Ive{constructor(e){this.Pr=e,this.buffer=new qr(K$),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();K$(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class kve{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ze(H$,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Kp(n)?Ze(H$,"Ignoring IndexedDB error during garbage collection: ",n):await Hp(n)}await this.Ar(3e5)})}}class Rve{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Se.resolve(TN.ce);const r=new Ive(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ze("LruGarbageCollector","Garbage collection skipped; disabled"),Se.resolve(W$)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),W$):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,a,o,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,l=Date.now(),this.removeTargets(e,r,n))).next(h=>(a=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),_f()<=Qt.DEBUG&&Ze("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${a} targets in `+(c-l)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),Se.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:h})))}}function Ove(t,e){return new Rve(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dve{constructor(){this.changes=new Gh(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,As.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Se.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mve{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lve{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&My(r.mutation,s,Di.empty(),qn.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Zt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Zt()){const s=Md();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let o=hy();return a.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Md();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Zt()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let a=Hl();const o=Dy(),l=function(){return Dy()}();return n.forEach((c,u)=>{const d=r.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof Xu)?a=a.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),My(d.mutation,u,d.mutation.getFieldMask(),qn.now())):o.set(u.key,Di.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>l.set(u,new Mve(d,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Dy();let s=new ir((o,l)=>o-l),a=Zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=r.get(c)||Di.empty();d=l.applyToLocalView(u,d),r.set(c,d);const h=(s.get(l.batchId)||Zt()).add(c);s=s.insert(l.batchId,h)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,h=KH();d.forEach(f=>{if(!a.has(f)){const m=JH(n.get(f),r.get(f));m!==null&&h.set(f,m),a=a.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return Se.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return Lye(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):UH(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):Se.resolve(Md());let l=Nv,c=a;return o.next(u=>Se.forEach(u,(d,h)=>(l<h.largestBatchId&&(l=h.largestBatchId),a.get(d)?Se.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{c=c.insert(d,f)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,c,u,Zt())).next(d=>({batchId:l,changes:HH(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new gt(n)).next(r=>{let s=hy();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let o=hy();return this.indexManager.getCollectionParents(e,a).next(l=>Se.forEach(l,c=>{const u=function(h,f){return new Gp(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(o=>{a.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,As.newInvalidDocument(d)))});let l=hy();return o.forEach((c,u)=>{const d=a.get(c);d!==void 0&&My(d.mutation,u,Di.empty(),qn.now()),kN(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ve{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return Se.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Uo(s.createTime)}}(n)),Se.resolve()}getNamedQuery(e,n){return Se.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:Ave(s.bundledQuery),readTime:Uo(s.readTime)}}(n)),Se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fve{constructor(){this.overlays=new ir(gt.comparator),this.Lr=new Map}getOverlay(e,n){return Se.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Md();return Se.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.bt(e,n,a)}),Se.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Lr.delete(r)),Se.resolve()}getOverlaysForCollection(e,n,r){const s=Md(),a=n.length+1,o=new gt(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&c.largestBatchId>r&&s.set(c.getKey(),c)}return Se.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new ir((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=a.get(u.largestBatchId);d===null&&(d=Md(),a=a.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=Md(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=s)););return Se.resolve(l)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new rve(n,r));let a=this.Lr.get(n);a===void 0&&(a=Zt(),this.Lr.set(n,a)),this.Lr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vve{constructor(){this.sessionToken=ms.EMPTY_BYTE_STRING}getSessionToken(e){return Se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(){this.kr=new qr(Yr.Kr),this.qr=new qr(Yr.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Yr(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Yr(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new gt(new On([])),r=new Yr(n,e),s=new Yr(n,e+1),a=[];return this.qr.forEachInRange([r,s],o=>{this.Wr(o),a.push(o.key)}),a}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new gt(new On([])),r=new Yr(n,e),s=new Yr(n,e+1);let a=Zt();return this.qr.forEachInRange([r,s],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new Yr(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Yr{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return gt.comparator(e.key,n.key)||Xt(e.Hr,n.Hr)}static Ur(e,n){return Xt(e.Hr,n.Hr)||gt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bve{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new qr(Yr.Kr)}checkEmpty(e){return Se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new nve(a,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Jr=this.Jr.add(new Yr(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Se.resolve(o)}lookupMutationBatch(e,n){return Se.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),a=s<0?0:s;return Se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Se.resolve(this.mutationQueue.length===0?UR:this.Yn-1)}getAllMutationBatches(e){return Se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Yr(n,0),s=new Yr(n,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([r,s],o=>{const l=this.Zr(o.Hr);a.push(l)}),Se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qr(Xt);return n.forEach(s=>{const a=new Yr(s,0),o=new Yr(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,o],l=>{r=r.add(l.Hr)})}),Se.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;gt.isDocumentKey(a)||(a=a.child(""));const o=new Yr(new gt(a),0);let l=new qr(Xt);return this.Jr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Hr)),!0)},o),Se.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){vn(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return Se.forEach(n.mutations,s=>{const a=new Yr(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new Yr(n,0),s=this.Jr.firstAfterOrEqual(r);return Se.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Se.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uve{constructor(e){this.ti=e,this.docs=function(){return new ir(gt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Se.resolve(r?r.document.mutableCopy():As.newInvalidDocument(n))}getEntries(e,n){let r=Hl();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():As.newInvalidDocument(s))}),Se.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=Hl();const o=n.path,l=new gt(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||mye(fye(d),r)<=0||(s.has(d.key)||kN(n,d))&&(a=a.insert(d.key,d.mutableCopy()))}return Se.resolve(a)}getAllFromCollectionGroup(e,n,r,s){At(9500)}ni(e,n){return Se.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new zve(this)}getSize(e){return Se.resolve(this.size)}}class zve extends Dve{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),Se.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qve{constructor(e){this.persistence=e,this.ri=new Gh(n=>WR(n),HR),this.lastRemoteSnapshotVersion=Rt.min(),this.highestTargetId=0,this.ii=0,this.si=new ZR,this.targetCount=0,this.oi=Km._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),Se.resolve()}getLastRemoteSnapshotVersion(e){return Se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Se.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),Se.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Km(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,Se.resolve()}updateTargetData(e,n){return this.lr(n),Se.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,Se.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.ri.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ri.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),Se.waitFor(a).next(()=>s)}getTargetCount(e){return Se.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return Se.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),Se.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),Se.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),Se.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return Se.resolve(r)}containsKey(e,n){return Se.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f7{constructor(e,n){this._i={},this.overlays={},this.ai=new TN(0),this.ui=!1,this.ui=!0,this.ci=new Vve,this.referenceDelegate=e(this),this.li=new qve(this),this.indexManager=new Tve,this.remoteDocumentCache=function(s){return new Uve(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new Eve(n),this.Pi=new $ve(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Fve,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new Bve(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){Ze("MemoryPersistence","Starting transaction:",e);const s=new Wve(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(a=>this.referenceDelegate.Ii(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ei(e,n){return Se.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class Wve extends gye{constructor(e){super(),this.currentSequenceNumber=e}}class JR{constructor(e){this.persistence=e,this.Ri=new ZR,this.Ai=null}static Vi(e){return new JR(e)}get di(){if(this.Ai)return this.Ai;throw At(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),Se.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),Se.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),Se.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.di.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Se.forEach(this.di,r=>{const s=gt.fromPath(r);return this.mi(e,s).next(a=>{a||n.removeEntry(s,Rt.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return Se.or([()=>Se.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class m_{constructor(e,n){this.persistence=e,this.fi=new Gh(r=>xye(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Ove(this,n)}static Vi(e,n){return new m_(e,n)}Ti(){}Ii(e){return Se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return Se.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(a=>a?Se.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ni(e,o=>this.wr(e,o,n).next(l=>{l||(r++,a.removeEntry(o,Rt.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),Se.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),Se.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),Se.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),Se.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=rw(e.data.value)),n}wr(e,n,r){return Se.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return Se.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=Zt(),s=Zt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new eO(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hve{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kve{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return sfe()?8:yye(Ls())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.gs(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.ps(e,n,s,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new Hve;return this.ys(e,n,o).next(l=>{if(a.result=l,this.As)return this.ws(e,n,o,l.size)})}).next(()=>a.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?(_f()<=Qt.DEBUG&&Ze("QueryEngine","SDK will not create cache indexes for query:",jf(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Se.resolve()):(_f()<=Qt.DEBUG&&Ze("QueryEngine","Query:",jf(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(_f()<=Qt.DEBUG&&Ze("QueryEngine","The SDK decides to create cache indexes for query:",jf(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bo(n))):Se.resolve())}gs(e,n){if(D$(n))return Se.resolve(null);let r=Bo(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=d_(n,null,"F"),r=Bo(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=Zt(...a);return this.fs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.bs(n,l);return this.Ss(n,u,o,c.readTime)?this.gs(e,d_(n,null,"F")):this.Ds(e,u,n,c)}))})))}ps(e,n,r,s){return D$(n)||s.isEqual(Rt.min())?Se.resolve(null):this.fs.getDocuments(e,r).next(a=>{const o=this.bs(n,a);return this.Ss(n,o,r,s)?Se.resolve(null):(_f()<=Qt.DEBUG&&Ze("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),jf(n)),this.Ds(e,o,n,hye(s,Nv)).next(l=>l))})}bs(e,n){let r=new qr(qH(e));return n.forEach((s,a)=>{kN(e,a)&&(r=r.add(a))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ys(e,n,r){return _f()<=Qt.DEBUG&&Ze("QueryEngine","Using full collection scan to execute query:",jf(n)),this.fs.getDocumentsMatchingQuery(e,n,Ru.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO="LocalStore",Gve=3e8;class Yve{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new ir(Xt),this.Fs=new Gh(a=>WR(a),HR),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lve(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function Qve(t,e,n,r){return new Yve(t,e,n,r)}async function m7(t,e){const n=Lt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],l=[];let c=Zt();for(const u of s){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of a){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ns:u,removedBatchIds:o,addedBatchIds:l}))})})}function Xve(t,e){const n=Lt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const h=u.batch,f=h.keys();let m=Se.resolve();return f.forEach(y=>{m=m.next(()=>d.getEntry(c,y)).next(p=>{const v=u.docVersions.get(y);vn(v!==null,48541),p.version.compareTo(v)<0&&(h.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),d.addEntry(p)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(c,h))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Zt();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function p7(t){const e=Lt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function Zve(t,e){const n=Lt(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const l=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;l.push(n.li.removeMatchingKeys(a,d.removedDocuments,h).next(()=>n.li.addMatchingKeys(a,d.addedDocuments,h)));let m=f.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(ms.EMPTY_BYTE_STRING,Rt.min()).withLastLimboFreeSnapshotVersion(Rt.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(h,m),function(p,v,b){return p.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=Gve?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(f,m,d)&&l.push(n.li.updateTargetData(a,m))});let c=Hl(),u=Zt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(a,d))}),l.push(Jve(a,o,e.documentUpdates).next(d=>{c=d.Bs,u=d.Ls})),!r.isEqual(Rt.min())){const d=n.li.getLastRemoteSnapshotVersion(a).next(h=>n.li.setTargetsMetadata(a,a.currentSequenceNumber,r));l.push(d)}return Se.waitFor(l).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,c,u)).next(()=>c)}).then(a=>(n.vs=s,a))}function Jve(t,e,n){let r=Zt(),s=Zt();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=Hl();return n.forEach((l,c)=>{const u=a.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(Rt.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):Ze(tO,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Bs:o,Ls:s}})}function exe(t,e){const n=Lt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=UR),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function txe(t,e){const n=Lt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(a=>a?(s=a,Se.resolve(s)):n.li.allocateTargetId(r).next(o=>(s=new ru(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function CC(t,e,n){const r=Lt(t),s=r.vs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Kp(o))throw o;Ze(tO,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function G$(t,e,n){const r=Lt(t);let s=Rt.min(),a=Zt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const h=Lt(c),f=h.Fs.get(d);return f!==void 0?Se.resolve(h.vs.get(f)):h.li.getTargetData(u,d)}(r,o,Bo(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,l.targetId).next(c=>{a=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:Rt.min(),n?a:Zt())).next(l=>(nxe(r,Vye(e),l),{documents:l,ks:a})))}function nxe(t,e,n){let r=t.Ms.get(e)||Rt.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Ms.set(e,r)}class Y${constructor(){this.activeTargetIds=Hye()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rxe{constructor(){this.vo=new Y$,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Y$,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sxe{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q$="ConnectivityMonitor";class X${constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ze(Q$,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ze(Q$,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let u0=null;function PC(){return u0===null?u0=function(){return 268435456+Math.round(2147483648*Math.random())}():u0++,"0x"+u0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="RestConnection",ixe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class axe{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===l_?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,a){const o=PC(),l=this.Qo(e,n.toUriEncodedString());Ze(wE,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,s,a);const{host:u}=new URL(l),d=il(u);return this.zo(e,l,c,r,d).then(h=>(Ze(wE,`Received RPC '${e}' ${o}: `,h),h),h=>{throw Ah(wE,`RPC '${e}' ${o} failed with error: `,h,"url: ",l,"request:",r),h})}jo(e,n,r,s,a,o){return this.Wo(e,n,r,s,a)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wp}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}Qo(e,n){const r=ixe[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oxe{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="WebChannelConnection",$g=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class lm extends axe{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!lm.c_){const e=xH();$g(e,vH.STAT_EVENT,n=>{n.stat===yC.PROXY?Ze(bs,"STAT_EVENT: detected buffering proxy"):n.stat===yC.NOPROXY&&Ze(bs,"STAT_EVENT: detected no buffering proxy")}),lm.c_=!0}}zo(e,n,r,s,a){const o=PC();return new Promise((l,c)=>{const u=new gH;u.setWithCredentials(!0),u.listenOnce(yH.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case nw.NO_ERROR:const h=u.getResponseJson();Ze(bs,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),l(h);break;case nw.TIMEOUT:Ze(bs,`RPC '${e}' ${o} timed out`),c(new qe(xe.DEADLINE_EXCEEDED,"Request time out"));break;case nw.HTTP_ERROR:const f=u.getStatus();if(Ze(bs,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m==null?void 0:m.error;if(y&&y.status&&y.message){const p=function(b){const x=b.toLowerCase().replace(/_/g,"-");return Object.values(xe).indexOf(x)>=0?x:xe.UNKNOWN}(y.status);c(new qe(p,y.message))}else c(new qe(xe.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new qe(xe.UNAVAILABLE,"Connection failed."));break;default:At(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Ze(bs,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);Ze(bs,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",d,r,15)})}T_(e,n,r){const s=PC(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=a.join("");Ze(bs,`Creating RPC '${e}' stream ${s}: ${u}`,l);const d=o.createWebChannel(u,l);this.I_(d);let h=!1,f=!1;const m=new oxe({Ho:y=>{f?Ze(bs,`Not sending because RPC '${e}' stream ${s} is closed:`,y):(h||(Ze(bs,`Opening RPC '${e}' stream ${s} transport.`),d.open(),h=!0),Ze(bs,`RPC '${e}' stream ${s} sending:`,y),d.send(y))},Jo:()=>d.close()});return $g(d,dy.EventType.OPEN,()=>{f||(Ze(bs,`RPC '${e}' stream ${s} transport opened.`),m.i_())}),$g(d,dy.EventType.CLOSE,()=>{f||(f=!0,Ze(bs,`RPC '${e}' stream ${s} transport closed`),m.o_(),this.E_(d))}),$g(d,dy.EventType.ERROR,y=>{f||(f=!0,Ah(bs,`RPC '${e}' stream ${s} transport errored. Name:`,y.name,"Message:",y.message),m.o_(new qe(xe.UNAVAILABLE,"The operation could not be completed")))}),$g(d,dy.EventType.MESSAGE,y=>{var p;if(!f){const v=y.data[0];vn(!!v,16349);const b=v,x=(b==null?void 0:b.error)||((p=b[0])==null?void 0:p.error);if(x){Ze(bs,`RPC '${e}' stream ${s} received error:`,x);const w=x.status;let C=function(j){const g=Sr[j];if(g!==void 0)return t7(g)}(w),S=x.message;w==="NOT_FOUND"&&S.includes("database")&&S.includes("does not exist")&&S.includes(this.databaseId.database)&&Ah(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),C===void 0&&(C=xe.INTERNAL,S="Unknown error status: "+w+" with message "+x.message),f=!0,m.o_(new qe(C,S)),d.close()}else Ze(bs,`RPC '${e}' stream ${s} received:`,v),m.__(v)}}),lm.u_(),setTimeout(()=>{m.s_()},0),m}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return bH()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lxe(t){return new lm(t)}function _E(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t){return new hve(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lm.c_=!1;class g7{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Ze("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z$="PersistentStream";class y7{constructor(e,n,r,s,a,o,l,c){this.Ci=e,this.b_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new g7(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===xe.RESOURCE_EXHAUSTED?(Wl(n.toString()),Wl("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===xe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new qe(xe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Ze(Z$,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(Ze(Z$,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cxe extends y7{constructor(e,n,r,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=pve(this.serializer,e),r=function(a){if(!("targetChange"in a))return Rt.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Rt.min():o.readTime?Uo(o.readTime):Rt.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=TC(this.serializer),n.addTarget=function(a,o){let l;const c=o.target;if(l=jC(c)?{documents:vve(a,c)}:{query:xve(a,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=s7(a,o.resumeToken);const u=SC(a,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Rt.min())>0){l.readTime=f_(a,o.snapshotVersion.toTimestamp());const u=SC(a,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=wve(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=TC(this.serializer),n.removeTarget=e,this.K_(n)}}class uxe extends y7{constructor(e,n,r,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return vn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,vn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){vn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=yve(e.writeResults,e.commitTime),r=Uo(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=TC(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>gve(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dxe{}class hxe extends dxe{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new qe(xe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Wo(e,EC(n,r),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new qe(xe.UNKNOWN,a.toString())})}jo(e,n,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.jo(e,EC(n,r),s,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new qe(xe.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function fxe(t,e,n,r){return new hxe(t,e,n,r)}class mxe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Wl(n),this.aa=!1):Ze("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th="RemoteStore";class pxe{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{Yh(this)&&(Ze(Th,"Restarting streams for network reachability change."),await async function(c){const u=Lt(c);u.Ea.add(4),await Zx(u),u.Va.set("Unknown"),u.Ea.delete(4),await $N(u)}(this))})}),this.Va=new mxe(r,s)}}async function $N(t){if(Yh(t))for(const e of t.Ra)await e(!0)}async function Zx(t){for(const e of t.Ra)await e(!1)}function v7(t,e){const n=Lt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),iO(n)?sO(n):Yp(n).O_()&&rO(n,e))}function nO(t,e){const n=Lt(t),r=Yp(n);n.Ia.delete(e),r.O_()&&x7(n,e),n.Ia.size===0&&(r.O_()?r.L_():Yh(n)&&n.Va.set("Unknown"))}function rO(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Rt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Yp(t).Z_(e)}function x7(t,e){t.da.$e(e),Yp(t).X_(e)}function sO(t){t.da=new lve({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Yp(t).start(),t.Va.ua()}function iO(t){return Yh(t)&&!Yp(t).x_()&&t.Ia.size>0}function Yh(t){return Lt(t).Ea.size===0}function b7(t){t.da=void 0}async function gxe(t){t.Va.set("Online")}async function yxe(t){t.Ia.forEach((e,n)=>{rO(t,e)})}async function vxe(t,e){b7(t),iO(t)?(t.Va.ha(e),sO(t)):t.Va.set("Unknown")}async function xxe(t,e,n){if(t.Va.set("Online"),e instanceof r7&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const l of a.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.da.removeTarget(l))}(t,e)}catch(r){Ze(Th,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await p_(t,r)}else if(e instanceof aw?t.da.Xe(e):e instanceof n7?t.da.st(e):t.da.tt(e),!n.isEqual(Rt.min()))try{const r=await p7(t.localStore);n.compareTo(r)>=0&&await function(a,o){const l=a.da.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=a.Ia.get(u);d&&a.Ia.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=a.Ia.get(c);if(!d)return;a.Ia.set(c,d.withResumeToken(ms.EMPTY_BYTE_STRING,d.snapshotVersion)),x7(a,c);const h=new ru(d.target,c,u,d.sequenceNumber);rO(a,h)}),a.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Ze(Th,"Failed to raise snapshot:",r),await p_(t,r)}}async function p_(t,e,n){if(!Kp(e))throw e;t.Ea.add(1),await Zx(t),t.Va.set("Offline"),n||(n=()=>p7(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ze(Th,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await $N(t)})}function w7(t,e){return e().catch(n=>p_(t,n,e))}async function FN(t){const e=Lt(t),n=Lu(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:UR;for(;bxe(e);)try{const s=await exe(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,wxe(e,s)}catch(s){await p_(e,s)}_7(e)&&j7(e)}function bxe(t){return Yh(t)&&t.Ta.length<10}function wxe(t,e){t.Ta.push(e);const n=Lu(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function _7(t){return Yh(t)&&!Lu(t).x_()&&t.Ta.length>0}function j7(t){Lu(t).start()}async function _xe(t){Lu(t).ra()}async function jxe(t){const e=Lu(t);for(const n of t.Ta)e.ea(n.mutations)}async function Nxe(t,e,n){const r=t.Ta.shift(),s=YR.from(r,e,n);await w7(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await FN(t)}async function Sxe(t,e){e&&Lu(t).Y_&&await async function(r,s){if(function(o){return ive(o)&&o!==xe.ABORTED}(s.code)){const a=r.Ta.shift();Lu(r).B_(),await w7(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await FN(r)}}(t,e),_7(t)&&j7(t)}async function J$(t,e){const n=Lt(t);n.asyncQueue.verifyOperationInProgress(),Ze(Th,"RemoteStore received new credentials");const r=Yh(n);n.Ea.add(3),await Zx(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await $N(n)}async function Exe(t,e){const n=Lt(t);e?(n.Ea.delete(2),await $N(n)):e||(n.Ea.add(2),await Zx(n),n.Va.set("Unknown"))}function Yp(t){return t.ma||(t.ma=function(n,r,s){const a=Lt(n);return a.sa(),new cxe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Zo:gxe.bind(null,t),Yo:yxe.bind(null,t),t_:vxe.bind(null,t),J_:xxe.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),iO(t)?sO(t):t.Va.set("Unknown")):(await t.ma.stop(),b7(t))})),t.ma}function Lu(t){return t.fa||(t.fa=function(n,r,s){const a=Lt(n);return a.sa(),new uxe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:_xe.bind(null,t),t_:Sxe.bind(null,t),ta:jxe.bind(null,t),na:Nxe.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await FN(t)):(await t.fa.stop(),t.Ta.length>0&&(Ze(Th,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Il,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const o=Date.now()+r,l=new aO(e,n,o,s,a);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qe(xe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oO(t,e){if(Wl("AsyncQueue",`${e}: ${t}`),Kp(t))return new qe(xe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{static emptySet(e){return new cm(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||gt.comparator(n.key,r.key):(n,r)=>gt.comparator(n.key,r.key),this.keyedMap=hy(),this.sortedSet=new ir(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof cm)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new cm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(){this.ga=new ir(gt.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):At(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Gm{constructor(e,n,r,s,a,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,a){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Gm(e,n,cm.emptySet(n),o,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&IN(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Axe{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class Txe{constructor(){this.queries=tF(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Lt(n),a=s.queries;s.queries=tF(),a.forEach((o,l)=>{for(const c of l.ba)c.onError(r)})})(this,new qe(xe.ABORTED,"Firestore shutting down"))}}function tF(){return new Gh(t=>zH(t),IN)}async function N7(t,e){const n=Lt(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.Sa()&&e.Da()&&(r=2):(a=new Axe,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(s,!0);break;case 1:a.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=oO(o,`Initialization of query '${jf(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,a),a.ba.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&lO(n)}async function S7(t,e){const n=Lt(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const o=a.ba.indexOf(e);o>=0&&(a.ba.splice(o,1),a.ba.length===0?s=e.Da()?0:1:!a.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Cxe(t,e){const n=Lt(t);let r=!1;for(const s of e){const a=s.query,o=n.queries.get(a);if(o){for(const l of o.ba)l.Fa(s)&&(r=!0);o.wa=s}}r&&lO(n)}function Pxe(t,e,n){const r=Lt(t),s=r.queries.get(e);if(s)for(const a of s.ba)a.onError(n);r.queries.delete(e)}function lO(t){t.Ca.forEach(e=>{e.next()})}var IC,nF;(nF=IC||(IC={})).Ma="default",nF.Cache="cache";class E7{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Gm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Gm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==IC.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A7{constructor(e){this.key=e}}class T7{constructor(e){this.key=e}}class Ixe{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Zt(),this.mutatedKeys=Zt(),this.eu=qH(e),this.tu=new cm(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new eF,s=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),m=kN(this.query,h)?h:null,y=!!f&&this.mutatedKeys.has(f.key),p=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let v=!1;f&&m?f.data.isEqual(m.data)?y!==p&&(r.track({type:3,doc:m}),v=!0):this.su(f,m)||(r.track({type:2,doc:m}),v=!0,(c&&this.eu(m,c)>0||u&&this.eu(m,u)<0)&&(l=!0)):!f&&m?(r.track({type:0,doc:m}),v=!0):f&&!m&&(r.track({type:1,doc:f}),v=!0,(c||u)&&(l=!0)),v&&(m?(o=o.add(m),a=p?a.add(d):a.delete(d)):(o=o.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),a=a.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Ss:l,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(m,y){const p=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return At(20277,{Vt:v})}};return p(m)-p(y)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Ya.size===0&&this.current&&!s?1:0,u=c!==this.Xa;return this.Xa=c,o.length!==0||u?{snapshot:new Gm(this.query,e.tu,a,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new eF,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Zt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new T7(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new A7(r))}),n}cu(e){this.Za=e.ks,this.Ya=Zt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Gm.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const cO="SyncEngine";class kxe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Rxe{constructor(e){this.key=e,this.hu=!1}}class Oxe{constructor(e,n,r,s,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Gh(l=>zH(l),IN),this.Iu=new Map,this.Eu=new Set,this.Ru=new ir(gt.comparator),this.Au=new Map,this.Vu=new ZR,this.du={},this.mu=new Map,this.fu=Km.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Dxe(t,e,n=!0){const r=O7(t);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await C7(r,e,n,!0),s}async function Mxe(t,e){const n=O7(t);await C7(n,e,!0,!1)}async function C7(t,e,n,r){const s=await txe(t.localStore,Bo(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let l;return r&&(l=await Lxe(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&v7(t.remoteStore,s),l}async function Lxe(t,e,n,r,s){t.pu=(h,f,m)=>async function(p,v,b,x){let w=v.view.ru(b);w.Ss&&(w=await G$(p.localStore,v.query,!1).then(({documents:j})=>v.view.ru(j,w)));const C=x&&x.targetChanges.get(v.targetId),S=x&&x.targetMismatches.get(v.targetId)!=null,P=v.view.applyChanges(w,p.isPrimaryClient,C,S);return sF(p,v.targetId,P.au),P.snapshot}(t,h,f,m);const a=await G$(t.localStore,e,!0),o=new Ixe(e,a.ks),l=o.ru(a.documents),c=Xx.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);sF(t,n,u.au);const d=new kxe(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function $xe(t,e,n){const r=Lt(t),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter(o=>!IN(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await CC(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&nO(r.remoteStore,s.targetId),kC(r,s.targetId)}).catch(Hp)):(kC(r,s.targetId),await CC(r.localStore,s.targetId,!0))}async function Fxe(t,e){const n=Lt(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),nO(n.remoteStore,r.targetId))}async function Vxe(t,e,n){const r=Kxe(t);try{const s=await function(o,l){const c=Lt(o),u=qn.now(),d=l.reduce((m,y)=>m.add(y.key),Zt());let h,f;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=Hl(),p=Zt();return c.xs.getEntries(m,d).next(v=>{y=v,y.forEach((b,x)=>{x.isValidDocument()||(p=p.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,y)).next(v=>{h=v;const b=[];for(const x of l){const w=eve(x,h.get(x.key).overlayedDocument);w!=null&&b.push(new Xu(x.key,w,DH(w.value.mapValue),Qs.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,b,l)}).next(v=>{f=v;const b=v.applyToLocalDocumentSet(h,p);return c.documentOverlayCache.saveOverlays(m,v.batchId,b)})}).then(()=>({batchId:f.batchId,changes:HH(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.du[o.currentUser.toKey()];u||(u=new ir(Xt)),u=u.insert(l,c),o.du[o.currentUser.toKey()]=u}(r,s.batchId,n),await Jx(r,s.changes),await FN(r.remoteStore)}catch(s){const a=oO(s,"Failed to persist write");n.reject(a)}}async function P7(t,e){const n=Lt(t);try{const r=await Zve(n.localStore,e);e.targetChanges.forEach((s,a)=>{const o=n.Au.get(a);o&&(vn(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?vn(o.hu,14607):s.removedDocuments.size>0&&(vn(o.hu,42227),o.hu=!1))}),await Jx(n,r,e)}catch(r){await Hp(r)}}function rF(t,e,n){const r=Lt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((a,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=Lt(o);c.onlineState=l;let u=!1;c.queries.forEach((d,h)=>{for(const f of h.ba)f.va(l)&&(u=!0)}),u&&lO(c)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Bxe(t,e,n){const r=Lt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),a=s&&s.key;if(a){let o=new ir(gt.comparator);o=o.insert(a,As.newNoDocument(a,Rt.min()));const l=Zt().add(a),c=new MN(Rt.min(),new Map,new ir(Xt),o,l);await P7(r,c),r.Ru=r.Ru.remove(a),r.Au.delete(e),uO(r)}else await CC(r.localStore,e,!1).then(()=>kC(r,e,n)).catch(Hp)}async function Uxe(t,e){const n=Lt(t),r=e.batch.batchId;try{const s=await Xve(n.localStore,e);k7(n,r,null),I7(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Jx(n,s)}catch(s){await Hp(s)}}async function zxe(t,e,n){const r=Lt(t);try{const s=await function(o,l){const c=Lt(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(h=>(vn(h!==null,37113),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);k7(r,e,n),I7(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Jx(r,s)}catch(s){await Hp(s)}}function I7(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function k7(t,e,n){const r=Lt(t);let s=r.du[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function kC(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||R7(t,r)})}function R7(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(nO(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),uO(t))}function sF(t,e,n){for(const r of n)r instanceof A7?(t.Vu.addReference(r.key,e),qxe(t,r)):r instanceof T7?(Ze(cO,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||R7(t,r.key)):At(19791,{wu:r})}function qxe(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(Ze(cO,"New document in limbo: "+n),t.Eu.add(r),uO(t))}function uO(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new gt(On.fromString(e)),r=t.fu.next();t.Au.set(r,new Rxe(n)),t.Ru=t.Ru.insert(n,r),v7(t.remoteStore,new ru(Bo(KR(n.path)),r,"TargetPurposeLimboResolution",TN.ce))}}async function Jx(t,e,n){const r=Lt(t),s=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){s.push(u);const h=eO.Es(c.targetId,u);a.push(h)}}))}),await Promise.all(o),r.Pu.J_(s),await async function(c,u){const d=Lt(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>Se.forEach(u,f=>Se.forEach(f.Ts,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>Se.forEach(f.Is,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!Kp(h))throw h;Ze(tO,"Failed to update sequence numbers: "+h)}for(const h of u){const f=h.targetId;if(!h.fromCache){const m=d.vs.get(f),y=m.snapshotVersion,p=m.withLastLimboFreeSnapshotVersion(y);d.vs=d.vs.insert(f,p)}}}(r.localStore,a))}async function Wxe(t,e){const n=Lt(t);if(!n.currentUser.isEqual(e)){Ze(cO,"User change. New user:",e.toKey());const r=await m7(n.localStore,e);n.currentUser=e,function(a,o){a.mu.forEach(l=>{l.forEach(c=>{c.reject(new qe(xe.CANCELLED,o))})}),a.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Jx(n,r.Ns)}}function Hxe(t,e){const n=Lt(t),r=n.Au.get(e);if(r&&r.hu)return Zt().add(r.key);{let s=Zt();const a=n.Iu.get(e);if(!a)return s;for(const o of a){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function O7(t){const e=Lt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=P7.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hxe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Bxe.bind(null,e),e.Pu.J_=Cxe.bind(null,e.eventManager),e.Pu.yu=Pxe.bind(null,e.eventManager),e}function Kxe(t){const e=Lt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Uxe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zxe.bind(null,e),e}class g_{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=LN(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Qve(this.persistence,new Kve,e.initialUser,this.serializer)}Cu(e){return new f7(JR.Vi,this.serializer)}Du(e){return new rxe}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}g_.provider={build:()=>new g_};class Gxe extends g_{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){vn(this.persistence.referenceDelegate instanceof m_,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new kve(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?li.withCacheSize(this.cacheSizeBytes):li.DEFAULT;return new f7(r=>m_.Vi(r,n),this.serializer)}}class RC{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>rF(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Wxe.bind(null,this.syncEngine),await Exe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Txe}()}createDatastore(e){const n=LN(e.databaseInfo.databaseId),r=lxe(e.databaseInfo);return fxe(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,o,l){return new pxe(r,s,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>rF(this.syncEngine,n,0),function(){return X$.v()?new X$:new sxe}())}createSyncEngine(e,n){return function(s,a,o,l,c,u,d){const h=new Oxe(s,a,o,l,c,u);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=Lt(s);Ze(Th,"RemoteStore shutting down."),a.Ea.add(5),await Zx(a),a.Aa.shutdown(),a.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}RC.provider={build:()=>new RC};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Wl("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $u="FirestoreClient";class Yxe{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=js.UNAUTHENTICATED,this.clientId=BR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{Ze($u,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Ze($u,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Il;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=oO(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function jE(t,e){t.asyncQueue.verifyOperationInProgress(),Ze($u,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await m7(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function iF(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Qxe(t);Ze($u,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>J$(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>J$(e.remoteStore,s)),t._onlineComponents=e}async function Qxe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ze($u,"Using user provided OfflineComponentProvider");try{await jE(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===xe.FAILED_PRECONDITION||s.code===xe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ah("Error using user provided cache. Falling back to memory cache: "+n),await jE(t,new g_)}}else Ze($u,"Using default OfflineComponentProvider"),await jE(t,new Gxe(void 0));return t._offlineComponents}async function M7(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ze($u,"Using user provided OnlineComponentProvider"),await iF(t,t._uninitializedComponentsProvider._online)):(Ze($u,"Using default OnlineComponentProvider"),await iF(t,new RC))),t._onlineComponents}function Xxe(t){return M7(t).then(e=>e.syncEngine)}async function L7(t){const e=await M7(t),n=e.eventManager;return n.onListen=Dxe.bind(null,e.syncEngine),n.onUnlisten=$xe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Mxe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Fxe.bind(null,e.syncEngine),n}function Zxe(t,e,n={}){const r=new Il;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const d=new D7({next:f=>{d.Nu(),o.enqueueAndForget(()=>S7(a,h));const m=f.docs.has(l);!m&&f.fromCache?u.reject(new qe(xe.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&c&&c.source==="server"?u.reject(new qe(xe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new E7(KR(l.path),d,{includeMetadataChanges:!0,Ka:!0});return N7(a,h)}(await L7(t),t.asyncQueue,e,n,r)),r.promise}function Jxe(t,e,n={}){const r=new Il;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const d=new D7({next:f=>{d.Nu(),o.enqueueAndForget(()=>S7(a,h)),f.fromCache&&c.source==="server"?u.reject(new qe(xe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new E7(l,d,{includeMetadataChanges:!0,Ka:!0});return N7(a,h)}(await L7(t),t.asyncQueue,e,n,r)),r.promise}function ebe(t,e){const n=new Il;return t.asyncQueue.enqueueAndForget(async()=>Vxe(await Xxe(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $7(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tbe="ComponentProvider",aF=new Map;function nbe(t,e,n,r,s){return new _ye(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,$7(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F7="firestore.googleapis.com",oF=!0;class lF{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new qe(xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=F7,this.ssl=oF}else this.host=e.host,this.ssl=e.ssl??oF;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=h7;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Pve)throw new qe(xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uye("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$7(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new qe(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new qe(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new qe(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class VN{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lF({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qe(xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new qe(xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lF(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new eye;switch(r.type){case"firstParty":return new sye(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new qe(xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=aF.get(n);r&&(Ze(tbe,"Removing Datastore"),aF.delete(n),r.terminate())}(this),Promise.resolve()}}function rbe(t,e,n,r={}){var u;t=va(t,VN);const s=il(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(_N(`https://${l}`),jN("Firestore",!0)),a.host!==F7&&a.host!==l&&Ah("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...a,host:l,ssl:s,emulatorOptions:r};if(!_h(c,o)&&(t._setSettings(c),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=js.MOCK_USER;else{d=TW(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new qe(xe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new js(f)}t._authCredentials=new tye(new _H(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zu(this.firestore,e,this._query)}}class br{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _u(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new br(this.firestore,e,this._key)}toJSON(){return{type:br._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Yx(n,br._jsonSchema))return new br(e,r||null,new gt(On.fromString(n.referencePath)))}}br._jsonSchemaVersion="firestore/documentReference/1.0",br._jsonSchema={type:Pr("string",br._jsonSchemaVersion),referencePath:Pr("string")};class _u extends Zu{constructor(e,n,r){super(e,n,KR(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new br(this.firestore,null,new gt(e))}withConverter(e){return new _u(this.firestore,e,this._path)}}function we(t,e,...n){if(t=an(t),jH("collection","path",e),t instanceof VN){const r=On.fromString(e,...n);return w$(r),new _u(t,null,r)}{if(!(t instanceof br||t instanceof _u))throw new qe(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(On.fromString(e,...n));return w$(r),new _u(t.firestore,null,r)}}function Je(t,e,...n){if(t=an(t),arguments.length===1&&(e=BR.newId()),jH("doc","path",e),t instanceof VN){const r=On.fromString(e,...n);return b$(r),new br(t,null,new gt(r))}{if(!(t instanceof br||t instanceof _u))throw new qe(xe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(On.fromString(e,...n));return b$(r),new br(t.firestore,t instanceof _u?t.converter:null,new gt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cF="AsyncQueue";class uF{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new g7(this,"async_queue_retry"),this._c=()=>{const r=_E();r&&Ze(cF,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=_E();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=_E();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Il;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Kp(e))throw e;Ze(cF,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Wl("INTERNAL UNHANDLED ERROR: ",dF(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=aO.createAndSchedule(this,e,n,r,a=>this.hc(a));return this.tc.push(s),s}uc(){this.nc&&At(47125,{Pc:dF(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function dF(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ju extends VN{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new uF,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uF(e),this._firestoreClient=void 0,await e}}}function sbe(t,e){const n=typeof t=="object"?t:qx(),r=typeof t=="string"?t:l_,s=zx(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=SR("firestore");a&&rbe(s,...a)}return s}function BN(t){if(t._terminated)throw new qe(xe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ibe(t),t._firestoreClient}function ibe(t){var r,s,a,o;const e=t._freezeSettings(),n=nbe(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Yxe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ea(ms.fromBase64String(e))}catch(n){throw new qe(xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ea(ms.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ea._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yx(e,ea._jsonSchema))return ea.fromBase64String(e.bytes)}}ea._jsonSchemaVersion="firestore/bytes/1.0",ea._jsonSchema={type:Pr("string",ea._jsonSchemaVersion),bytes:Pr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new qe(xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ds(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function to(){return new eb(xC)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new qe(xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new qe(xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xt(this._lat,e._lat)||Xt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:zo._jsonSchemaVersion}}static fromJSON(e){if(Yx(e,zo._jsonSchema))return new zo(e.latitude,e.longitude)}}zo._jsonSchemaVersion="firestore/geoPoint/1.0",zo._jsonSchema={type:Pr("string",zo._jsonSchemaVersion),latitude:Pr("number"),longitude:Pr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:no._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yx(e,no._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new no(e.vectorValues);throw new qe(xe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}no._jsonSchemaVersion="firestore/vectorValue/1.0",no._jsonSchema={type:Pr("string",no._jsonSchemaVersion),vectorValues:Pr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const abe=/^__.*__$/;class obe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xu(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qx(e,this.data,n,this.fieldTransforms)}}class V7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Xu(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function B7(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw At(40011,{dataSource:t})}}class dO{constructor(e,n,r,s,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new dO({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return y_(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(B7(this.dataSource)&&abe.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class lbe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||LN(e)}createContext(e,n,r,s=!1){return new dO({dataSource:e,methodName:n,targetDoc:r,path:ds.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tb(t){const e=t._freezeSettings(),n=LN(t._databaseId);return new lbe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hO(t,e,n,r,s,a={}){const o=t.createContext(a.merge||a.mergeFields?2:0,e,n,s);mO("Data must be an object, but it was:",o,r);const l=q7(r,o);let c,u;if(a.merge)c=new Di(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){const d=[];for(const h of a.mergeFields){const f=Ch(e,h,n);if(!o.contains(f))throw new qe(xe.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);K7(d,f)||d.push(f)}c=new Di(d),u=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=o.fieldTransforms;return new obe(new fi(l),c,u)}class zN extends UN{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zN}}class fO extends UN{_toFieldTransform(e){return new Qye(e.path,new Cv)}isEqual(e){return e instanceof fO}}function U7(t,e,n,r){const s=t.createContext(1,e,n);mO("Data must be an object, but it was:",s,r);const a=[],o=fi.empty();Qu(r,(c,u)=>{const d=H7(e,c,n);u=an(u);const h=s.childContextForFieldPath(d);if(u instanceof zN)a.push(d);else{const f=nb(u,h);f!=null&&(a.push(d),o.set(d,f))}});const l=new Di(a);return new V7(o,l,s.fieldTransforms)}function z7(t,e,n,r,s,a){const o=t.createContext(1,e,n),l=[Ch(e,r,n)],c=[s];if(a.length%2!=0)throw new qe(xe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<a.length;f+=2)l.push(Ch(e,a[f])),c.push(a[f+1]);const u=[],d=fi.empty();for(let f=l.length-1;f>=0;--f)if(!K7(u,l[f])){const m=l[f];let y=c[f];y=an(y);const p=o.childContextForFieldPath(m);if(y instanceof zN)u.push(m);else{const v=nb(y,p);v!=null&&(u.push(m),d.set(m,v))}}const h=new Di(u);return new V7(d,h,o.fieldTransforms)}function cbe(t,e,n,r=!1){return nb(n,t.createContext(r?4:3,e))}function nb(t,e){if(W7(t=an(t)))return mO("Unsupported field value:",e,t),q7(t,e);if(t instanceof UN)return function(r,s){if(!B7(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const a=[];let o=0;for(const l of r){let c=nb(l,s.childContextForArray(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=an(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Kye(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=qn.fromDate(r);return{timestampValue:f_(s.serializer,a)}}if(r instanceof qn){const a=new qn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:f_(s.serializer,a)}}if(r instanceof zo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ea)return{bytesValue:s7(s.serializer,r._byteString)};if(r instanceof br){const a=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:XR(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof no)return function(o,l){const c=o instanceof no?o.toArray():o;return{mapValue:{fields:{[kH]:{stringValue:OH},[c_]:{arrayValue:{values:c.map(d=>{if(typeof d!="number")throw l.createError("VectorValues must only contain numeric values.");return GR(l.serializer,d)})}}}}}}(r,s);if(d7(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${AN(r)}`)}(t,e)}function q7(t,e){const n={};return EH(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qu(t,(r,s)=>{const a=nb(s,e.childContextForField(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function W7(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qn||t instanceof zo||t instanceof ea||t instanceof br||t instanceof UN||t instanceof no||d7(t))}function mO(t,e,n){if(!W7(n)||!NH(n)){const r=AN(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Ch(t,e,n){if((e=an(e))instanceof eb)return e._internalPath;if(typeof e=="string")return H7(t,e);throw y_("Field path arguments must be of type string or ",t,!1,void 0,n)}const ube=new RegExp("[~\\*/\\[\\]]");function H7(t,e,n){if(e.search(ube)>=0)throw y_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new eb(...e.split("."))._internalPath}catch{throw y_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function y_(t,e,n,r,s){const a=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new qe(xe.INVALID_ARGUMENT,l+t+c)}function K7(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dbe{convertValue(e,n="none"){switch(Mu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Du(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw At(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Qu(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var r,s,a;const n=(a=(s=(r=e.fields)==null?void 0:r[c_].arrayValue)==null?void 0:s.values)==null?void 0:a.map(o=>gr(o.doubleValue));return new no(n)}convertGeoPoint(e){return new zo(gr(e.latitude),gr(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=PN(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Sv(e));default:return null}}convertTimestamp(e){const n=Ou(e);return new qn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=On.fromString(e);vn(u7(r),9688,{name:e});const s=new Ev(r.get(1),r.get(3)),a=new gt(r.popFirst(5));return s.isEqual(n)||Wl(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G7 extends dbe{constructor(e){super(),this.firestore=e}convertBytes(e){return new ea(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new br(this.firestore,null,n)}}function Re(){return new fO("serverTimestamp")}const hF="@firebase/firestore",fF="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y7{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new br(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new hbe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Ch("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class hbe extends Y7{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fbe(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new qe(xe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pO{}class gO extends pO{}function Te(t,e,...n){let r=[];e instanceof pO&&r.push(e),r=r.concat(n),function(a){const o=a.filter(c=>c instanceof yO).length,l=a.filter(c=>c instanceof qN).length;if(o>1||o>0&&l>0)throw new qe(xe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class qN extends gO{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new qN(e,n,r)}_apply(e){const n=this._parse(e);return Q7(e._query,n),new Zu(e.firestore,e.converter,NC(e._query,n))}_parse(e){const n=tb(e.firestore);return function(a,o,l,c,u,d,h){let f;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new qe(xe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){pF(h,d);const y=[];for(const p of h)y.push(mF(c,a,p));f={arrayValue:{values:y}}}else f=mF(c,a,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||pF(h,d),f=cbe(l,o,h,d==="in"||d==="not-in");return Cr.create(u,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function he(t,e,n){const r=e,s=Ch("where",t);return qN._create(s,r,n)}class yO extends pO{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new yO(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ho.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let o=s;const l=a.getFlattenedFilters();for(const c of l)Q7(o,c),o=NC(o,c)}(e._query,n),new Zu(e.firestore,e.converter,NC(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class vO extends gO{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new vO(e,n)}_apply(e){const n=function(s,a,o){if(s.startAt!==null)throw new qe(xe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new qe(xe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Tv(a,o)}(e._query,this._field,this._direction);return new Zu(e.firestore,e.converter,Fye(e._query,n))}}function WN(t,e="asc"){const n=e,r=Ch("orderBy",t);return vO._create(r,n)}class xO extends gO{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new xO(e,n,r)}_apply(e){return new Zu(e.firestore,e.converter,d_(e._query,this._limit,this._limitType))}}function Ts(t){return dye("limit",t),xO._create("limit",t,"F")}function mF(t,e,n){if(typeof(n=an(n))=="string"){if(n==="")throw new qe(xe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!UH(e)&&n.indexOf("/")!==-1)throw new qe(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(On.fromString(n));if(!gt.isDocumentKey(r))throw new qe(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return C$(t,new gt(r))}if(n instanceof br)return C$(t,n._key);throw new qe(xe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${AN(n)}.`)}function pF(t,e){if(!Array.isArray(t)||t.length===0)throw new qe(xe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Q7(t,e){const n=function(s,a){for(const o of s)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new qe(xe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new qe(xe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function bO(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class my{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rh extends Y7{constructor(e,n,r,s,a,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ow(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ch("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(xe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=rh._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}rh._jsonSchemaVersion="firestore/documentSnapshot/1.0",rh._jsonSchema={type:Pr("string",rh._jsonSchemaVersion),bundleSource:Pr("string","DocumentSnapshot"),bundleName:Pr("string"),bundle:Pr("string")};class ow extends rh{data(e={}){return super.data(e)}}class um{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new my(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ow(this._firestore,this._userDataWriter,r.key,r,new my(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new qe(xe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new ow(s._firestore,s._userDataWriter,l.doc.key,l.doc,new my(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const c=new ow(s._firestore,s._userDataWriter,l.doc.key,l.doc,new my(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:mbe(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(xe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=um._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=BR.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function mbe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return At(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */um._jsonSchemaVersion="firestore/querySnapshot/1.0",um._jsonSchema={type:Pr("string",um._jsonSchemaVersion),bundleSource:Pr("string","QuerySnapshot"),bundleName:Pr("string"),bundle:Pr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pbe{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=tb(e)}set(e,n,r){this._verifyNotCommitted();const s=NE(e,this._firestore),a=bO(s.converter,n,r),o=hO(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Qs.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const a=NE(e,this._firestore);let o;return o=typeof(n=an(n))=="string"||n instanceof eb?z7(this._dataReader,"WriteBatch.update",a._key,n,r,s):U7(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(o.toMutation(a._key,Qs.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=NE(e,this._firestore);return this._mutations=this._mutations.concat(new DN(n._key,Qs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new qe(xe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function NE(t,e){if((t=an(t)).firestore!==e)throw new qe(xe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(t){t=va(t,br);const e=va(t.firestore,Ju),n=BN(e);return Zxe(n,t._key).then(r=>gbe(e,t,r))}function Ce(t){t=va(t,Zu);const e=va(t.firestore,Ju),n=BN(e),r=new G7(e);return fbe(t._query),Jxe(n,t._query).then(s=>new um(e,r,t,s))}function xr(t,e,n){t=va(t,br);const r=va(t.firestore,Ju),s=bO(t.converter,e,n),a=tb(r);return rb(r,[hO(a,"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Qs.none())])}function Kl(t,e,n,...r){t=va(t,br);const s=va(t.firestore,Ju),a=tb(s);let o;return o=typeof(e=an(e))=="string"||e instanceof eb?z7(a,"updateDoc",t._key,e,n,r):U7(a,"updateDoc",t._key,e),rb(s,[o.toMutation(t._key,Qs.exists(!0))])}function Gl(t){return rb(va(t.firestore,Ju),[new DN(t._key,Qs.none())])}function es(t,e){const n=va(t.firestore,Ju),r=Je(t),s=bO(t.converter,e),a=tb(t.firestore);return rb(n,[hO(a,"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Qs.exists(!1))]).then(()=>r)}function rb(t,e){const n=BN(t);return ebe(n,e)}function gbe(t,e,n){const r=n.docs.get(e._key),s=new G7(t);return new rh(t,s,e._key,r,new my(n.hasPendingWrites,n.fromCache),e.converter)}function Yl(t){return t=va(t,Ju),BN(t),new pbe(t,e=>rb(t,e))}(function(e,n=!0){Jge(Kh),ku(new Ul("firestore",(r,{instanceIdentifier:s,options:a})=>{const o=r.getProvider("app").getImmediate(),l=new Ju(new nye(r.getProvider("auth-internal")),new iye(o,r.getProvider("app-check-internal")),jye(o,s),o);return a={useFetchStreams:n,...a},l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),la(hF,fF,e),la(hF,fF,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ybe="type.googleapis.com/google.protobuf.Int64Value",vbe="type.googleapis.com/google.protobuf.UInt64Value";function X7(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function v_(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>v_(e));if(typeof t=="function"||typeof t=="object")return X7(t,e=>v_(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Ym(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case ybe:case vbe:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Ym(e)):typeof t=="function"||typeof t=="object"?X7(t,e=>Ym(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gF={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pi extends fo{constructor(e,n,r){super(`${wO}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,pi.prototype)}}function xbe(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function x_(t,e){let n=xbe(t),r=n,s;try{const a=e&&e.error;if(a){const o=a.status;if(typeof o=="string"){if(!gF[o])return new pi("internal","internal");n=gF[o],r=o}const l=a.message;typeof l=="string"&&(r=l),s=a.details,s!==void 0&&(s=Ym(s))}}catch{}return n==="ok"?null:new pi(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bbe{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,hi(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s==null||s.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="us-central1",wbe=/^data: (.*?)(?:\n|$)/;function _be(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new pi("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class jbe{constructor(e,n,r,s,a=OC,o=(...l)=>fetch(...l)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new bbe(e,n,r,s),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(a);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=OC}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Nbe(t,e,n){const r=il(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(_N(t.emulatorOrigin+"/backends"),jN("Functions",!0))}function Sbe(t,e,n){const r=s=>Abe(t,e,s,{});return r.stream=(s,a)=>Cbe(t,e,s,a),r}function Z7(t){return t.emulatorOrigin&&il(t.emulatorOrigin)?"include":void 0}async function Ebe(t,e,n,r,s){n["Content-Type"]="application/json";let a;try{a=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:Z7(s)})}catch{return{status:0,json:null}}let o=null;try{o=await a.json()}catch{}return{status:a.status,json:o}}async function J7(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function Abe(t,e,n,r){const s=t._url(e);return Tbe(t,s,n,r)}async function Tbe(t,e,n,r){n=v_(n);const s={data:n},a=await J7(t,r),o=r.timeout||7e4,l=_be(o),c=await Promise.race([Ebe(e,s,a,t.fetchImpl,t),l.promise,t.cancelAllRequests]);if(l.cancel(),!c)throw new pi("cancelled","Firebase Functions instance was deleted.");const u=x_(c.status,c.json);if(u)throw u;if(!c.json)throw new pi("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new pi("internal","Response is missing data field.");return{data:Ym(d)}}function Cbe(t,e,n,r){const s=t._url(e);return Pbe(t,s,n,r||{})}async function Pbe(t,e,n,r){var f;n=v_(n);const s={data:n},a=await J7(t,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:a,signal:r==null?void 0:r.signal,credentials:Z7(t)})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const p=new pi("cancelled","Request was cancelled.");return{data:Promise.reject(p),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(p)}}}}}}const y=x_(0,null);return{data:Promise.reject(y),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(y)}}}}}}let l,c;const u=new Promise((m,y)=>{l=m,c=y});(f=r==null?void 0:r.signal)==null||f.addEventListener("abort",()=>{const m=new pi("cancelled","Request was cancelled.");c(m)});const d=o.body.getReader(),h=Ibe(d,l,c,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const m=h.getReader();return{async next(){const{value:y,done:p}=await m.read();return{value:y,done:p}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:u}}function Ibe(t,e,n,r){const s=(o,l)=>{const c=o.match(wbe);if(!c)return;const u=c[1];try{const d=JSON.parse(u);if("result"in d){e(Ym(d.result));return}if("message"in d){l.enqueue(Ym(d.message));return}if("error"in d){const h=x_(0,d);l.error(h),n(h);return}}catch(d){if(d instanceof pi){l.error(d),n(d);return}}},a=new TextDecoder;return new ReadableStream({start(o){let l="";return c();async function c(){if(r!=null&&r.aborted){const u=new pi("cancelled","Request was cancelled");return o.error(u),n(u),Promise.resolve()}try{const{value:u,done:d}=await t.read();if(d){l.trim()&&s(l.trim(),o),o.close();return}if(r!=null&&r.aborted){const f=new pi("cancelled","Request was cancelled");o.error(f),n(f),await t.cancel();return}l+=a.decode(u,{stream:!0});const h=l.split(`
`);l=h.pop()||"";for(const f of h)f.trim()&&s(f.trim(),o);return c()}catch(u){const d=u instanceof pi?u:x_(0,null);o.error(d),n(d)}}},cancel(){return t.cancel()}})}const yF="@firebase/functions",vF="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kbe="auth-internal",Rbe="app-check-internal",Obe="messaging-internal";function Dbe(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),a=n.getProvider(kbe),o=n.getProvider(Obe),l=n.getProvider(Rbe);return new jbe(s,a,o,l,r)};ku(new Ul(wO,e,"PUBLIC").setMultipleInstances(!0)),la(yF,vF,t),la(yF,vF,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mbe(t=qx(),e=OC){const r=zx(an(t),wO).getImmediate({identifier:e}),s=SR("functions");return s&&Lbe(r,...s),r}function Lbe(t,e,n){Nbe(an(t),e,n)}function eK(t,e,n){return Sbe(an(t),e)}Dbe();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tK="firebasestorage.googleapis.com",nK="storageBucket",$be=2*60*1e3,Fbe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends fo{constructor(e,n,r=0){super(SE(e),`Firebase Storage: ${n} (${SE(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return SE(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var mr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(mr||(mr={}));function SE(t){return"storage/"+t}function _O(){const t="An unknown error occurred, please check the error payload for server response.";return new pr(mr.UNKNOWN,t)}function Vbe(t){return new pr(mr.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Bbe(t){return new pr(mr.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Ube(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new pr(mr.UNAUTHENTICATED,t)}function zbe(){return new pr(mr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function qbe(t){return new pr(mr.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Wbe(){return new pr(mr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Hbe(){return new pr(mr.CANCELED,"User canceled the upload/download.")}function Kbe(t){return new pr(mr.INVALID_URL,"Invalid URL '"+t+"'.")}function Gbe(t){return new pr(mr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Ybe(){return new pr(mr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+nK+"' property when initializing the app?")}function Qbe(){return new pr(mr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Xbe(){return new pr(mr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Zbe(t){return new pr(mr.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function DC(t){return new pr(mr.INVALID_ARGUMENT,t)}function rK(){return new pr(mr.APP_DELETED,"The Firebase app was deleted.")}function Jbe(t){return new pr(mr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ly(t,e){return new pr(mr.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Fg(t){throw new pr(mr.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Mi.makeFromUrl(e,n)}catch{return new Mi(e,"")}if(r.path==="")return r;throw Gbe(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(C){C.path_=decodeURIComponent(C.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${s}/o${f}`,"i"),y={bucket:1,path:3},p=n===tK?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",b=new RegExp(`^https?://${p}/${s}/${v}`,"i"),w=[{regex:l,indices:c,postModify:a},{regex:m,indices:y,postModify:u},{regex:b,indices:{bucket:1,path:2},postModify:u}];for(let C=0;C<w.length;C++){const S=w[C],P=S.regex.exec(e);if(P){const j=P[S.indices.bucket];let g=P[S.indices.path];g||(g=""),r=new Mi(j,g),S.postModify(r);break}}if(r==null)throw Kbe(e);return r}}class e0e{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0e(t,e,n){let r=1,s=null,a=null,o=!1,l=0;function c(){return l===2}let u=!1;function d(...v){u||(u=!0,e.apply(null,v))}function h(v){s=setTimeout(()=>{s=null,t(m,c())},v)}function f(){a&&clearTimeout(a)}function m(v,...b){if(u){f();return}if(v){f(),d.call(null,v,...b);return}if(c()||o){f(),d.call(null,v,...b);return}r<64&&(r*=2);let w;l===1?(l=2,w=0):w=(r+Math.random())*1e3,h(w)}let y=!1;function p(v){y||(y=!0,f(),!u&&(s!==null?(v||(l=2),clearTimeout(s),h(0)):v||(l=1)))}return h(0),a=setTimeout(()=>{o=!0,p(!0)},n),p}function n0e(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0e(t){return t!==void 0}function s0e(t){return typeof t=="object"&&!Array.isArray(t)}function jO(t){return typeof t=="string"||t instanceof String}function xF(t){return NO()&&t instanceof Blob}function NO(){return typeof Blob<"u"}function bF(t,e,n,r){if(r<e)throw DC(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw DC(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function sK(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var sh;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(sh||(sh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0e(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0e{constructor(e,n,r,s,a,o,l,c,u,d,h,f=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,p)=>{this.resolve_=y,this.reject_=p,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new d0(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===sh.NO_ERROR,c=a.getStatus();if(!l||i0e(c,this.additionalRetryCodes_)&&this.retry){const d=a.getErrorCode()===sh.ABORT;r(!1,new d0(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new d0(u,a))})},n=(r,s)=>{const a=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());r0e(c)?a(c):a()}catch(c){o(c)}else if(l!==null){const c=_O();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?rK():Hbe();o(c)}else{const c=Wbe();o(c)}};this.canceled_?n(!1,new d0(!1,null,!0)):this.backoffId_=t0e(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&n0e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class d0{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function o0e(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function l0e(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function c0e(t,e){e&&(t["X-Firebase-GMPID"]=e)}function u0e(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function d0e(t,e,n,r,s,a,o=!0,l=!1){const c=sK(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return c0e(d,e),o0e(d,n),l0e(d,a),u0e(d,r),new a0e(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0e(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function f0e(...t){const e=h0e();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(NO())return new Blob(t);throw new pr(mr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function m0e(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0e(t){if(typeof atob>"u")throw Zbe("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class EE{constructor(e,n){this.data=e,this.contentType=n||null}}function g0e(t,e){switch(t){case Io.RAW:return new EE(iK(e));case Io.BASE64:case Io.BASE64URL:return new EE(aK(t,e));case Io.DATA_URL:return new EE(v0e(e),x0e(e))}throw _O()}function iK(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,o=t.charCodeAt(++n);r=65536|(a&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function y0e(t){let e;try{e=decodeURIComponent(t)}catch{throw Ly(Io.DATA_URL,"Malformed data URL.")}return iK(e)}function aK(t,e){switch(t){case Io.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw Ly(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Io.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw Ly(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=p0e(e)}catch(s){throw s.message.includes("polyfill")?s:Ly(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class oK{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ly(Io.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=b0e(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function v0e(t){const e=new oK(t);return e.base64?aK(Io.BASE64,e.rest):y0e(e.rest)}function x0e(t){return new oK(t).contentType}function b0e(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,n){let r=0,s="";xF(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(xF(this.data_)){const r=this.data_,s=m0e(r,e,n);return s===null?null:new Uc(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Uc(r,!0)}}static getBlob(...e){if(NO()){const n=e.map(r=>r instanceof Uc?r.data_:r);return new Uc(f0e.apply(null,n))}else{const n=e.map(o=>jO(o)?g0e(Io.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let a=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[a++]=o[l]}),new Uc(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lK(t){let e;try{e=JSON.parse(t)}catch{return null}return s0e(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0e(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function _0e(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function cK(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0e(t,e){return e}class $s{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||j0e}}let h0=null;function N0e(t){return!jO(t)||t.length<2?t:cK(t)}function uK(){if(h0)return h0;const t=[];t.push(new $s("bucket")),t.push(new $s("generation")),t.push(new $s("metageneration")),t.push(new $s("name","fullPath",!0));function e(a,o){return N0e(o)}const n=new $s("name");n.xform=e,t.push(n);function r(a,o){return o!==void 0?Number(o):o}const s=new $s("size");return s.xform=r,t.push(s),t.push(new $s("timeCreated")),t.push(new $s("updated")),t.push(new $s("md5Hash",null,!0)),t.push(new $s("cacheControl",null,!0)),t.push(new $s("contentDisposition",null,!0)),t.push(new $s("contentEncoding",null,!0)),t.push(new $s("contentLanguage",null,!0)),t.push(new $s("contentType",null,!0)),t.push(new $s("metadata","customMetadata",!0)),h0=t,h0}function S0e(t,e){function n(){const r=t.bucket,s=t.fullPath,a=new Mi(r,s);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function E0e(t,e,n){const r={};r.type="file";const s=n.length;for(let a=0;a<s;a++){const o=n[a];r[o.local]=o.xform(r,e[o.server])}return S0e(r,t),r}function dK(t,e,n){const r=lK(e);return r===null?null:E0e(t,r,n)}function A0e(t,e,n,r){const s=lK(e);if(s===null||!jO(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(u=>{const d=t.bucket,h=t.fullPath,f="/b/"+o(d)+"/o/"+o(h),m=SO(f,n,r),y=sK({alt:"media",token:u});return m+y})[0]}function T0e(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const a=e[s];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class hK{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fK(t){if(!t)throw _O()}function C0e(t,e){function n(r,s){const a=dK(t,s,e);return fK(a!==null),a}return n}function P0e(t,e){function n(r,s){const a=dK(t,s,e);return fK(a!==null),A0e(a,s,t.host,t._protocol)}return n}function mK(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=zbe():s=Ube():n.getStatus()===402?s=Bbe(t.bucket):n.getStatus()===403?s=qbe(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function I0e(t){const e=mK(t);function n(r,s){let a=e(r,s);return r.getStatus()===404&&(a=Vbe(t.path)),a.serverResponse=s.serverResponse,a}return n}function k0e(t,e,n){const r=e.fullServerUrl(),s=SO(r,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,l=new hK(s,a,P0e(t,n),o);return l.errorHandler=I0e(e),l}function R0e(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function O0e(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=R0e(null,e)),r}function D0e(t,e,n,r,s){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let w="";for(let C=0;C<2;C++)w=w+Math.random().toString().slice(2);return w}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=O0e(e,r,s),d=T0e(u,n),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,f=`\r
--`+c+"--",m=Uc.getBlob(h,r,f);if(m===null)throw Qbe();const y={name:u.fullPath},p=SO(a,t.host,t._protocol),v="POST",b=t.maxUploadRetryTime,x=new hK(p,v,C0e(t,n),b);return x.urlParams=y,x.headers=o,x.body=m.uploadData(),x.errorHandler=mK(e),x}class M0e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=sh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=sh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=sh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,a){if(this.sent_)throw Fg("cannot .send() more than once");if(il(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const o in a)a.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,a[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Fg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Fg("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Fg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Fg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class L0e extends M0e{initXhr(){this.xhr_.responseType="text"}}function pK(){return new L0e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n){this._service=e,n instanceof Mi?this._location=n:this._location=Mi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ph(e,n)}get root(){const e=new Mi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cK(this._location.path)}get storage(){return this._service}get parent(){const e=w0e(this._location.path);if(e===null)return null;const n=new Mi(this._location.bucket,e);return new Ph(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Jbe(e)}}function $0e(t,e,n){t._throwIfRoot("uploadBytes");const r=D0e(t.storage,t._location,uK(),new Uc(e,!0),n);return t.storage.makeRequestWithTokens(r,pK).then(s=>({metadata:s,ref:t}))}function F0e(t){t._throwIfRoot("getDownloadURL");const e=k0e(t.storage,t._location,uK());return t.storage.makeRequestWithTokens(e,pK).then(n=>{if(n===null)throw Xbe();return n})}function V0e(t,e){const n=_0e(t._location.path,e),r=new Mi(t._location.bucket,n);return new Ph(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0e(t){return/^[A-Za-z]+:\/\//.test(t)}function U0e(t,e){return new Ph(t,e)}function gK(t,e){if(t instanceof EO){const n=t;if(n._bucket==null)throw Ybe();const r=new Ph(n,n._bucket);return e!=null?gK(r,e):r}else return e!==void 0?V0e(t,e):t}function z0e(t,e){if(e&&B0e(e)){if(t instanceof EO)return U0e(t,e);throw DC("To use ref(service, url), the first argument must be a Storage instance.")}else return gK(t,e)}function wF(t,e){const n=e==null?void 0:e[nK];return n==null?null:Mi.makeFromBucketSpec(n,t)}function q0e(t,e,n,r={}){t.host=`${e}:${n}`;const s=il(e);s&&(_N(`https://${t.host}/b`),jN("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:TW(a,t.app.options.projectId))}class EO{constructor(e,n,r,s,a,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=o,this._bucket=null,this._host=tK,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=$be,this._maxUploadRetryTime=Fbe,this._requests=new Set,s!=null?this._bucket=Mi.makeFromBucketSpec(s,this._host):this._bucket=wF(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Mi.makeFromBucketSpec(this._url,e):this._bucket=wF(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){bF("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){bF("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(hi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ph(this,e)}_makeRequest(e,n,r,s,a=!0){if(this._deleted)return new e0e(rK());{const o=d0e(e,this._appId,r,s,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const _F="@firebase/storage",jF="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yK="storage";function W0e(t,e,n){return t=an(t),$0e(t,e,n)}function H0e(t){return t=an(t),F0e(t)}function K0e(t,e){return t=an(t),z0e(t,e)}function G0e(t=qx(),e){t=an(t);const r=zx(t,yK).getImmediate({identifier:e}),s=SR("storage");return s&&Y0e(r,...s),r}function Y0e(t,e,n,r={}){q0e(t,e,n,r)}function Q0e(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new EO(n,r,s,e,Kh)}function X0e(){ku(new Ul(yK,Q0e,"PUBLIC").setMultipleInstances(!0)),la(_F,jF,""),la(_F,jF,"esm2020")}X0e();const cf=t=>t==null?void 0:t.replace(/^"|"$/g,"").replace(/^'|'$/g,""),vK={apiKey:cf('"AIzaSyBDWUqW91mg2wvCJ6lAJ1wrBb5az6elfUU"')??"FIREBASE_API_KEY_PLACEHOLDER",authDomain:cf('"zedbooks-53601.firebaseapp.com"')??"FIREBASE_AUTH_DOMAIN_PLACEHOLDER",projectId:cf('"zedbooks-53601"')??"FIREBASE_PROJECT_ID_PLACEHOLDER",storageBucket:cf('"zedbooks-53601.firebasestorage.app"')??"FIREBASE_STORAGE_BUCKET_PLACEHOLDER",messagingSenderId:cf('"938148277875"')??"FIREBASE_MESSAGING_SENDER_ID_PLACEHOLDER",appId:cf('"1:938148277875:web:c98c15ac02f3625d20c406"')??"FIREBASE_APP_ID_PLACEHOLDER"},Z0e="us-central1",J0e=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"],qo=J0e.every(t=>{const e=vK[t];return!!e&&!e.includes("PLACEHOLDER")}),kn=()=>{if(!qo)throw new Error("Firebase is not configured. Set VITE_FIREBASE_* environment variables before running the migrated backend.")},HN=hme().length?qx():IW(vK),b_=Xge(HN),se=sbe(HN),xK=Mbe(HN,Z0e),ewe=G0e(HN),kt=async(t,e)=>(kn(),(await eK(xK,t)(e)).data),uf=()=>b_,Ps={async signIn(t,e){return kn(),kpe(uf(),t,e)},async signUp(t){kn();const e=await Ipe(uf(),t.email,t.password);return t.fullName&&await Ope(e.user,{displayName:t.fullName}),await l$(e.user),await kt("bootstrapUserAccount",{...t,uid:e.user.uid}),e},async resendVerificationEmail(){kn();const t=this.getCurrentUser();if(!t)throw new Error("No authenticated user found.");await l$(t)},async sendResetPasswordEmail(t){kn(),await Epe(uf(),t)},async updateUserPassword(t){kn();const e=this.getCurrentUser();if(!e)throw new Error("No authenticated user found.");await Dpe(e,t)},async logout(){kn(),await Vpe(uf())},async getIdToken(t=!1){const e=this.getCurrentUser();return e?e.getIdToken(t):null},getCurrentUser(){return qo?uf().currentUser:null},onAuthStateChanged(t){return qo?{unsubscribe:Fpe(uf(),t)}:(t(null),{unsubscribe:()=>{}})},async sendInvitation(t){kn(),await kt("createInvitation",t)},async acceptInvitation(t){return kn(),kt("acceptInvitation",{token:t})},async ensureCurrentMembership(){return kn(),kt("ensureCurrentMembership",{})}},bK=_.createContext(void 0),AE=t=>({id:t.uid,uid:t.uid,email:t.email,displayName:t.displayName,phoneNumber:t.phoneNumber,emailVerified:t.emailVerified}),TE=async t=>({userId:t.uid,email:t.email,emailVerified:t.emailVerified,idToken:await t.getIdToken()});function twe({children:t}){const[e,n]=_.useState(null),[r,s]=_.useState(null),[a,o]=_.useState(!0),l=_.useCallback(()=>{n(null),s(null)},[]),c=_.useCallback(async()=>{if(!qo){l();return}try{const h=Ps.getCurrentUser();if(!h){l();return}await h.reload();const f=Ps.getCurrentUser();if(!f){l();return}s(AE(f)),n(await TE(f))}catch(h){l(),console.error("Failed to refresh Firebase session:",h)}},[l]),u=_.useCallback(async()=>{try{qo&&await Ps.logout()}catch(h){console.error("Firebase sign out failed:",h)}finally{l(),Y.success("Signed out successfully")}},[l]);_.useEffect(()=>{let h=!0;if(!qo){o(!1);return}const f=Ps.getCurrentUser();f?(s(AE(f)),TE(f).then(y=>{h&&n(y)}).finally(()=>{h&&o(!1)})):o(!1);const m=Ps.onAuthStateChanged(async y=>{if(h){if(!y){l(),o(!1);return}s(AE(y)),n(await TE(y)),o(!1)}});return()=>{h=!1,m.unsubscribe()}},[l]);const d={session:e,user:r,isLoading:a,isAuthenticated:!!(e&&r),signOut:u,refreshSession:c};return i.jsx(bK.Provider,{value:d,children:t})}function ht(){const t=_.useContext(bK);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const AO=Wh("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),H=_.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},a)=>{const o=r?qh:"button";return i.jsx(o,{className:ve(AO({variant:e,size:n,className:t})),ref:a,...s})});H.displayName="Button";class nwe extends _.Component{constructor(){super(...arguments);$M(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Uncaught error:",n,r)}render(){return this.state.hasError?i.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-background text-foreground",children:i.jsxs("div",{className:"max-w-md w-full text-center space-y-4",children:[i.jsx("div",{className:"flex justify-center",children:i.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:i.jsx(Oi,{className:"h-8 w-8 text-red-600"})})}),i.jsx("h1",{className:"text-2xl font-bold",children:"Something went wrong"}),i.jsx("p",{className:"text-muted-foreground",children:"We encountered an unexpected error. Please try refreshing the page."}),this.state.error&&i.jsx("pre",{className:"p-4 bg-muted rounded-lg text-xs text-left overflow-auto max-h-40",children:this.state.error.message}),i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx(H,{onClick:()=>window.location.reload(),children:"Refresh Page"}),i.jsx(H,{variant:"outline",onClick:()=>window.location.href="/",children:"Go Home"})]})]})}):this.props.children}}function dm({message:t="Loading...",className:e,size:n="md",fullScreen:r=!1}){const s={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"},a=i.jsxs("div",{className:ve("flex flex-col items-center justify-center gap-3",e),children:[i.jsx(mn,{className:ve("animate-spin text-primary",s[n])}),t&&i.jsx("p",{className:"text-sm text-muted-foreground animate-pulse",children:t})]});return r?i.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-background/80 backdrop-blur-sm z-50",children:a}):a}var rwe=_.createContext(void 0);function sb(t){const e=_.useContext(rwe);return t||e||"ltr"}var CE=0;function TO(){_.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??NF()),document.body.insertAdjacentElement("beforeend",t[1]??NF()),CE++,()=>{CE===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),CE--}},[])}function NF(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var PE="focusScope.autoFocusOnMount",IE="focusScope.autoFocusOnUnmount",SF={bubbles:!1,cancelable:!0},swe="FocusScope",KN=_.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=t,[l,c]=_.useState(null),u=hr(s),d=hr(a),h=_.useRef(null),f=Mt(e,p=>c(p)),m=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(r){let p=function(w){if(m.paused||!l)return;const C=w.target;l.contains(C)?h.current=C:Ec(h.current,{select:!0})},v=function(w){if(m.paused||!l)return;const C=w.relatedTarget;C!==null&&(l.contains(C)||Ec(h.current,{select:!0}))},b=function(w){if(document.activeElement===document.body)for(const S of w)S.removedNodes.length>0&&Ec(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",v);const x=new MutationObserver(b);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",v),x.disconnect()}}},[r,l,m.paused]),_.useEffect(()=>{if(l){AF.add(m);const p=document.activeElement;if(!l.contains(p)){const b=new CustomEvent(PE,SF);l.addEventListener(PE,u),l.dispatchEvent(b),b.defaultPrevented||(iwe(uwe(wK(l)),{select:!0}),document.activeElement===p&&Ec(l))}return()=>{l.removeEventListener(PE,u),setTimeout(()=>{const b=new CustomEvent(IE,SF);l.addEventListener(IE,d),l.dispatchEvent(b),b.defaultPrevented||Ec(p??document.body,{select:!0}),l.removeEventListener(IE,d),AF.remove(m)},0)}}},[l,u,d,m]);const y=_.useCallback(p=>{if(!n&&!r||m.paused)return;const v=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,b=document.activeElement;if(v&&b){const x=p.currentTarget,[w,C]=awe(x);w&&C?!p.shiftKey&&b===C?(p.preventDefault(),n&&Ec(w,{select:!0})):p.shiftKey&&b===w&&(p.preventDefault(),n&&Ec(C,{select:!0})):b===x&&p.preventDefault()}},[n,r,m.paused]);return i.jsx(st.div,{tabIndex:-1,...o,ref:f,onKeyDown:y})});KN.displayName=swe;function iwe(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ec(r,{select:e}),document.activeElement!==n)return}function awe(t){const e=wK(t),n=EF(e,t),r=EF(e.reverse(),t);return[n,r]}function wK(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function EF(t,e){for(const n of t)if(!owe(n,{upTo:e}))return n}function owe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function lwe(t){return t instanceof HTMLInputElement&&"select"in t}function Ec(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&lwe(t)&&e&&t.select()}}var AF=cwe();function cwe(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=TF(t,e),t.unshift(e)},remove(e){var n;t=TF(t,e),(n=t[0])==null||n.resume()}}}function TF(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function uwe(t){return t.filter(e=>e.tagName!=="A")}var kE="rovingFocusGroup.onEntryFocus",dwe={bubbles:!1,cancelable:!0},ib="RovingFocusGroup",[MC,_K,hwe]=dN(ib),[fwe,GN]=ps(ib,[hwe]),[mwe,pwe]=fwe(ib),jK=_.forwardRef((t,e)=>i.jsx(MC.Provider,{scope:t.__scopeRovingFocusGroup,children:i.jsx(MC.Slot,{scope:t.__scopeRovingFocusGroup,children:i.jsx(gwe,{...t,ref:e})})}));jK.displayName=ib;var gwe=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,f=_.useRef(null),m=Mt(e,f),y=sb(a),[p,v]=oo({prop:o,defaultProp:l??null,onChange:c,caller:ib}),[b,x]=_.useState(!1),w=hr(u),C=_K(n),S=_.useRef(!1),[P,j]=_.useState(0);return _.useEffect(()=>{const g=f.current;if(g)return g.addEventListener(kE,w),()=>g.removeEventListener(kE,w)},[w]),i.jsx(mwe,{scope:n,orientation:r,dir:y,loop:s,currentTabStopId:p,onItemFocus:_.useCallback(g=>v(g),[v]),onItemShiftTab:_.useCallback(()=>x(!0),[]),onFocusableItemAdd:_.useCallback(()=>j(g=>g+1),[]),onFocusableItemRemove:_.useCallback(()=>j(g=>g-1),[]),children:i.jsx(st.div,{tabIndex:b||P===0?-1:0,"data-orientation":r,...h,ref:m,style:{outline:"none",...t.style},onMouseDown:Me(t.onMouseDown,()=>{S.current=!0}),onFocus:Me(t.onFocus,g=>{const T=!S.current;if(g.target===g.currentTarget&&T&&!b){const E=new CustomEvent(kE,dwe);if(g.currentTarget.dispatchEvent(E),!E.defaultPrevented){const A=C().filter(B=>B.focusable),I=A.find(B=>B.active),k=A.find(B=>B.id===p),V=[I,k,...A].filter(Boolean).map(B=>B.ref.current);EK(V,d)}}S.current=!1}),onBlur:Me(t.onBlur,()=>x(!1))})})}),NK="RovingFocusGroupItem",SK=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:o,...l}=t,c=oa(),u=a||c,d=pwe(NK,n),h=d.currentTabStopId===u,f=_K(n),{onFocusableItemAdd:m,onFocusableItemRemove:y,currentTabStopId:p}=d;return _.useEffect(()=>{if(r)return m(),()=>y()},[r,m,y]),i.jsx(MC.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:i.jsx(st.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:e,onMouseDown:Me(t.onMouseDown,v=>{r?d.onItemFocus(u):v.preventDefault()}),onFocus:Me(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:Me(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const b=xwe(v,d.orientation,d.dir);if(b!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let w=f().filter(C=>C.focusable).map(C=>C.ref.current);if(b==="last")w.reverse();else if(b==="prev"||b==="next"){b==="prev"&&w.reverse();const C=w.indexOf(v.currentTarget);w=d.loop?bwe(w,C+1):w.slice(C+1)}setTimeout(()=>EK(w))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:p!=null}):o})})});SK.displayName=NK;var ywe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function vwe(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function xwe(t,e,n){const r=vwe(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return ywe[r]}function EK(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function bwe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var AK=jK,TK=SK,wwe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},df=new WeakMap,f0=new WeakMap,m0={},RE=0,CK=function(t){return t&&(t.host||CK(t.parentNode))},_we=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=CK(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},jwe=function(t,e,n,r){var s=_we(e,Array.isArray(t)?t:[t]);m0[n]||(m0[n]=new WeakMap);var a=m0[n],o=[],l=new Set,c=new Set(s),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(l.has(f))d(f);else try{var m=f.getAttribute(r),y=m!==null&&m!=="false",p=(df.get(f)||0)+1,v=(a.get(f)||0)+1;df.set(f,p),a.set(f,v),o.push(f),p===1&&y&&f0.set(f,!0),v===1&&f.setAttribute(n,"true"),y||f.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",f,b)}})};return d(e),l.clear(),RE++,function(){o.forEach(function(h){var f=df.get(h)-1,m=a.get(h)-1;df.set(h,f),a.set(h,m),f||(f0.has(h)||h.removeAttribute(r),f0.delete(h)),m||h.removeAttribute(n)}),RE--,RE||(df=new WeakMap,df=new WeakMap,f0=new WeakMap,m0={})}},CO=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=wwe(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),jwe(r,s,n,"aria-hidden")):function(){return null}},Co=function(){return Co=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Co.apply(this,arguments)};function PK(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Nwe(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}var lw="right-scroll-bar-position",cw="width-before-scroll-bar",Swe="with-scroll-bars-hidden",Ewe="--removed-body-scroll-bar-size";function OE(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Awe(t,e){var n=_.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var Twe=typeof window<"u"?_.useLayoutEffect:_.useEffect,CF=new WeakMap;function Cwe(t,e){var n=Awe(null,function(r){return t.forEach(function(s){return OE(s,r)})});return Twe(function(){var r=CF.get(n);if(r){var s=new Set(r),a=new Set(t),o=n.current;s.forEach(function(l){a.has(l)||OE(l,null)}),a.forEach(function(l){s.has(l)||OE(l,o)})}CF.set(n,t)},[t]),n}function Pwe(t){return t}function Iwe(t,e){e===void 0&&(e=Pwe);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var o=e(a,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var c=function(){var d=o;o=[],d.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return s}function kwe(t){t===void 0&&(t={});var e=Iwe(null);return e.options=Co({async:!0,ssr:!1},t),e}var IK=function(t){var e=t.sideCar,n=PK(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return _.createElement(r,Co({},n))};IK.isSideCarExport=!0;function Rwe(t,e){return t.useMedium(e),IK}var kK=kwe(),DE=function(){},YN=_.forwardRef(function(t,e){var n=_.useRef(null),r=_.useState({onScrollCapture:DE,onWheelCapture:DE,onTouchMoveCapture:DE}),s=r[0],a=r[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,m=t.noRelative,y=t.noIsolation,p=t.inert,v=t.allowPinchZoom,b=t.as,x=b===void 0?"div":b,w=t.gapMode,C=PK(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=f,P=Cwe([n,e]),j=Co(Co({},C),s);return _.createElement(_.Fragment,null,d&&_.createElement(S,{sideCar:kK,removeScrollBar:u,shards:h,noRelative:m,noIsolation:y,inert:p,setCallbacks:a,allowPinchZoom:!!v,lockRef:n,gapMode:w}),o?_.cloneElement(_.Children.only(l),Co(Co({},j),{ref:P})):_.createElement(x,Co({},j,{className:c,ref:P}),l))});YN.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};YN.classNames={fullWidth:cw,zeroRight:lw};var Owe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Dwe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Owe();return e&&t.setAttribute("nonce",e),t}function Mwe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Lwe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var $we=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Dwe())&&(Mwe(e,n),Lwe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Fwe=function(){var t=$we();return function(e,n){_.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},RK=function(){var t=Fwe(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},Vwe={left:0,top:0,right:0,gap:0},ME=function(t){return parseInt(t||"",10)||0},Bwe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[ME(n),ME(r),ME(s)]},Uwe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Vwe;var e=Bwe(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},zwe=RK(),hm="data-scroll-locked",qwe=function(t,e,n,r){var s=t.left,a=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Swe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(hm,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(lw,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(cw,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(lw," .").concat(lw,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(cw," .").concat(cw,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(hm,`] {
    `).concat(Ewe,": ").concat(l,`px;
  }
`)},PF=function(){var t=parseInt(document.body.getAttribute(hm)||"0",10);return isFinite(t)?t:0},Wwe=function(){_.useEffect(function(){return document.body.setAttribute(hm,(PF()+1).toString()),function(){var t=PF()-1;t<=0?document.body.removeAttribute(hm):document.body.setAttribute(hm,t.toString())}},[])},Hwe=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;Wwe();var a=_.useMemo(function(){return Uwe(s)},[s]);return _.createElement(zwe,{styles:qwe(a,!e,s,n?"":"!important")})},LC=!1;if(typeof window<"u")try{var p0=Object.defineProperty({},"passive",{get:function(){return LC=!0,!0}});window.addEventListener("test",p0,p0),window.removeEventListener("test",p0,p0)}catch{LC=!1}var hf=LC?{passive:!1}:!1,Kwe=function(t){return t.tagName==="TEXTAREA"},OK=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Kwe(t)&&n[e]==="visible")},Gwe=function(t){return OK(t,"overflowY")},Ywe=function(t){return OK(t,"overflowX")},IF=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=DK(t,r);if(s){var a=MK(t,r),o=a[1],l=a[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Qwe=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Xwe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},DK=function(t,e){return t==="v"?Gwe(e):Ywe(e)},MK=function(t,e){return t==="v"?Qwe(e):Xwe(e)},Zwe=function(t,e){return t==="h"&&e==="rtl"?-1:1},Jwe=function(t,e,n,r,s){var a=Zwe(t,window.getComputedStyle(e).direction),o=a*r,l=n.target,c=e.contains(l),u=!1,d=o>0,h=0,f=0;do{if(!l)break;var m=MK(t,l),y=m[0],p=m[1],v=m[2],b=p-v-a*y;(y||b)&&DK(t,l)&&(h+=b,f+=y);var x=l.parentNode;l=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(f)<1||!s))&&(u=!0),u},g0=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},kF=function(t){return[t.deltaX,t.deltaY]},RF=function(t){return t&&"current"in t?t.current:t},e_e=function(t,e){return t[0]===e[0]&&t[1]===e[1]},t_e=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},n_e=0,ff=[];function r_e(t){var e=_.useRef([]),n=_.useRef([0,0]),r=_.useRef(),s=_.useState(n_e++)[0],a=_.useState(RK)[0],o=_.useRef(t);_.useEffect(function(){o.current=t},[t]),_.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var p=Nwe([t.lockRef.current],(t.shards||[]).map(RF),!0).filter(Boolean);return p.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),p.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=_.useCallback(function(p,v){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var b=g0(p),x=n.current,w="deltaX"in p?p.deltaX:x[0]-b[0],C="deltaY"in p?p.deltaY:x[1]-b[1],S,P=p.target,j=Math.abs(w)>Math.abs(C)?"h":"v";if("touches"in p&&j==="h"&&P.type==="range")return!1;var g=IF(j,P);if(!g)return!0;if(g?S=j:(S=j==="v"?"h":"v",g=IF(j,P)),!g)return!1;if(!r.current&&"changedTouches"in p&&(w||C)&&(r.current=S),!S)return!0;var T=r.current||S;return Jwe(T,v,p,T==="h"?w:C,!0)},[]),c=_.useCallback(function(p){var v=p;if(!(!ff.length||ff[ff.length-1]!==a)){var b="deltaY"in v?kF(v):g0(v),x=e.current.filter(function(S){return S.name===v.type&&(S.target===v.target||v.target===S.shadowParent)&&e_e(S.delta,b)})[0];if(x&&x.should){v.cancelable&&v.preventDefault();return}if(!x){var w=(o.current.shards||[]).map(RF).filter(Boolean).filter(function(S){return S.contains(v.target)}),C=w.length>0?l(v,w[0]):!o.current.noIsolation;C&&v.cancelable&&v.preventDefault()}}},[]),u=_.useCallback(function(p,v,b,x){var w={name:p,delta:v,target:b,should:x,shadowParent:s_e(b)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(C){return C!==w})},1)},[]),d=_.useCallback(function(p){n.current=g0(p),r.current=void 0},[]),h=_.useCallback(function(p){u(p.type,kF(p),p.target,l(p,t.lockRef.current))},[]),f=_.useCallback(function(p){u(p.type,g0(p),p.target,l(p,t.lockRef.current))},[]);_.useEffect(function(){return ff.push(a),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,hf),document.addEventListener("touchmove",c,hf),document.addEventListener("touchstart",d,hf),function(){ff=ff.filter(function(p){return p!==a}),document.removeEventListener("wheel",c,hf),document.removeEventListener("touchmove",c,hf),document.removeEventListener("touchstart",d,hf)}},[]);var m=t.removeScrollBar,y=t.inert;return _.createElement(_.Fragment,null,y?_.createElement(a,{styles:t_e(s)}):null,m?_.createElement(Hwe,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function s_e(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const i_e=Rwe(kK,r_e);var QN=_.forwardRef(function(t,e){return _.createElement(YN,Co({},t,{ref:e,sideCar:i_e}))});QN.classNames=YN.classNames;var $C=["Enter"," "],a_e=["ArrowDown","PageUp","Home"],LK=["ArrowUp","PageDown","End"],o_e=[...a_e,...LK],l_e={ltr:[...$C,"ArrowRight"],rtl:[...$C,"ArrowLeft"]},c_e={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ab="Menu",[kv,u_e,d_e]=dN(ab),[Qh,$K]=ps(ab,[d_e,Vp,GN]),XN=Vp(),FK=GN(),[h_e,Xh]=Qh(ab),[f_e,ob]=Qh(ab),VK=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:a,modal:o=!0}=t,l=XN(e),[c,u]=_.useState(null),d=_.useRef(!1),h=hr(a),f=sb(s);return _.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),i.jsx(dR,{...l,children:i.jsx(h_e,{scope:e,open:n,onOpenChange:h,content:c,onContentChange:u,children:i.jsx(f_e,{scope:e,onClose:_.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:f,modal:o,children:r})})})};VK.displayName=ab;var m_e="MenuAnchor",PO=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=XN(n);return i.jsx(hR,{...s,...r,ref:e})});PO.displayName=m_e;var IO="MenuPortal",[p_e,BK]=Qh(IO,{forceMount:void 0}),UK=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,a=Xh(IO,e);return i.jsx(p_e,{scope:e,forceMount:n,children:i.jsx(gs,{present:n||a.open,children:i.jsx(Dx,{asChild:!0,container:s,children:r})})})};UK.displayName=IO;var ca="MenuContent",[g_e,kO]=Qh(ca),zK=_.forwardRef((t,e)=>{const n=BK(ca,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,a=Xh(ca,t.__scopeMenu),o=ob(ca,t.__scopeMenu);return i.jsx(kv.Provider,{scope:t.__scopeMenu,children:i.jsx(gs,{present:r||a.open,children:i.jsx(kv.Slot,{scope:t.__scopeMenu,children:o.modal?i.jsx(y_e,{...s,ref:e}):i.jsx(v_e,{...s,ref:e})})})})}),y_e=_.forwardRef((t,e)=>{const n=Xh(ca,t.__scopeMenu),r=_.useRef(null),s=Mt(e,r);return _.useEffect(()=>{const a=r.current;if(a)return CO(a)},[]),i.jsx(RO,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Me(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),v_e=_.forwardRef((t,e)=>{const n=Xh(ca,t.__scopeMenu);return i.jsx(RO,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),x_e=ph("MenuContent.ScrollLock"),RO=_.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,disableOutsideScroll:y,...p}=t,v=Xh(ca,n),b=ob(ca,n),x=XN(n),w=FK(n),C=u_e(n),[S,P]=_.useState(null),j=_.useRef(null),g=Mt(e,j,v.onContentChange),T=_.useRef(0),E=_.useRef(""),A=_.useRef(0),I=_.useRef(null),k=_.useRef("right"),L=_.useRef(0),V=y?QN:_.Fragment,B=y?{as:x_e,allowPinchZoom:!0}:void 0,M=O=>{var Ne,nt;const W=E.current+O,Z=C().filter(fe=>!fe.disabled),ae=document.activeElement,Ae=(Ne=Z.find(fe=>fe.ref.current===ae))==null?void 0:Ne.textValue,ie=Z.map(fe=>fe.textValue),pe=I_e(ie,W,Ae),Ue=(nt=Z.find(fe=>fe.textValue===pe))==null?void 0:nt.ref.current;(function fe(_e){E.current=_e,window.clearTimeout(T.current),_e!==""&&(T.current=window.setTimeout(()=>fe(""),1e3))})(W),Ue&&setTimeout(()=>Ue.focus())};_.useEffect(()=>()=>window.clearTimeout(T.current),[]),TO();const $=_.useCallback(O=>{var Z,ae;return k.current===((Z=I.current)==null?void 0:Z.side)&&R_e(O,(ae=I.current)==null?void 0:ae.area)},[]);return i.jsx(g_e,{scope:n,searchRef:E,onItemEnter:_.useCallback(O=>{$(O)&&O.preventDefault()},[$]),onItemLeave:_.useCallback(O=>{var W;$(O)||((W=j.current)==null||W.focus(),P(null))},[$]),onTriggerLeave:_.useCallback(O=>{$(O)&&O.preventDefault()},[$]),pointerGraceTimerRef:A,onPointerGraceIntentChange:_.useCallback(O=>{I.current=O},[]),children:i.jsx(V,{...B,children:i.jsx(KN,{asChild:!0,trapped:s,onMountAutoFocus:Me(a,O=>{var W;O.preventDefault(),(W=j.current)==null||W.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:i.jsx(Dp,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,children:i.jsx(AK,{asChild:!0,...w,dir:b.dir,orientation:"vertical",loop:r,currentTabStopId:S,onCurrentTabStopIdChange:P,onEntryFocus:Me(c,O=>{b.isUsingKeyboardRef.current||O.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(fR,{role:"menu","aria-orientation":"vertical","data-state":iG(v.open),"data-radix-menu-content":"",dir:b.dir,...x,...p,ref:g,style:{outline:"none",...p.style},onKeyDown:Me(p.onKeyDown,O=>{const Z=O.target.closest("[data-radix-menu-content]")===O.currentTarget,ae=O.ctrlKey||O.altKey||O.metaKey,Ae=O.key.length===1;Z&&(O.key==="Tab"&&O.preventDefault(),!ae&&Ae&&M(O.key));const ie=j.current;if(O.target!==ie||!o_e.includes(O.key))return;O.preventDefault();const Ue=C().filter(Ne=>!Ne.disabled).map(Ne=>Ne.ref.current);LK.includes(O.key)&&Ue.reverse(),C_e(Ue)}),onBlur:Me(t.onBlur,O=>{O.currentTarget.contains(O.target)||(window.clearTimeout(T.current),E.current="")}),onPointerMove:Me(t.onPointerMove,Rv(O=>{const W=O.target,Z=L.current!==O.clientX;if(O.currentTarget.contains(W)&&Z){const ae=O.clientX>L.current?"right":"left";k.current=ae,L.current=O.clientX}}))})})})})})})});zK.displayName=ca;var b_e="MenuGroup",OO=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(st.div,{role:"group",...r,ref:e})});OO.displayName=b_e;var w_e="MenuLabel",qK=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(st.div,{...r,ref:e})});qK.displayName=w_e;var w_="MenuItem",OF="menu.itemSelect",ZN=_.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,a=_.useRef(null),o=ob(w_,t.__scopeMenu),l=kO(w_,t.__scopeMenu),c=Mt(e,a),u=_.useRef(!1),d=()=>{const h=a.current;if(!n&&h){const f=new CustomEvent(OF,{bubbles:!0,cancelable:!0});h.addEventListener(OF,m=>r==null?void 0:r(m),{once:!0}),Hk(h,f),f.defaultPrevented?u.current=!1:o.onClose()}};return i.jsx(WK,{...s,ref:c,disabled:n,onClick:Me(t.onClick,d),onPointerDown:h=>{var f;(f=t.onPointerDown)==null||f.call(t,h),u.current=!0},onPointerUp:Me(t.onPointerUp,h=>{var f;u.current||(f=h.currentTarget)==null||f.click()}),onKeyDown:Me(t.onKeyDown,h=>{const f=l.searchRef.current!=="";n||f&&h.key===" "||$C.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});ZN.displayName=w_;var WK=_.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...a}=t,o=kO(w_,n),l=FK(n),c=_.useRef(null),u=Mt(e,c),[d,h]=_.useState(!1),[f,m]=_.useState("");return _.useEffect(()=>{const y=c.current;y&&m((y.textContent??"").trim())},[a.children]),i.jsx(kv.ItemSlot,{scope:n,disabled:r,textValue:s??f,children:i.jsx(TK,{asChild:!0,...l,focusable:!r,children:i.jsx(st.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:u,onPointerMove:Me(t.onPointerMove,Rv(y=>{r?o.onItemLeave(y):(o.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Me(t.onPointerLeave,Rv(y=>o.onItemLeave(y))),onFocus:Me(t.onFocus,()=>h(!0)),onBlur:Me(t.onBlur,()=>h(!1))})})})}),__e="MenuCheckboxItem",HK=_.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return i.jsx(XK,{scope:t.__scopeMenu,checked:n,children:i.jsx(ZN,{role:"menuitemcheckbox","aria-checked":__(n)?"mixed":n,...s,ref:e,"data-state":MO(n),onSelect:Me(s.onSelect,()=>r==null?void 0:r(__(n)?!0:!n),{checkForDefaultPrevented:!1})})})});HK.displayName=__e;var KK="MenuRadioGroup",[j_e,N_e]=Qh(KK,{value:void 0,onValueChange:()=>{}}),GK=_.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,a=hr(r);return i.jsx(j_e,{scope:t.__scopeMenu,value:n,onValueChange:a,children:i.jsx(OO,{...s,ref:e})})});GK.displayName=KK;var YK="MenuRadioItem",QK=_.forwardRef((t,e)=>{const{value:n,...r}=t,s=N_e(YK,t.__scopeMenu),a=n===s.value;return i.jsx(XK,{scope:t.__scopeMenu,checked:a,children:i.jsx(ZN,{role:"menuitemradio","aria-checked":a,...r,ref:e,"data-state":MO(a),onSelect:Me(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});QK.displayName=YK;var DO="MenuItemIndicator",[XK,S_e]=Qh(DO,{checked:!1}),ZK=_.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,a=S_e(DO,n);return i.jsx(gs,{present:r||__(a.checked)||a.checked===!0,children:i.jsx(st.span,{...s,ref:e,"data-state":MO(a.checked)})})});ZK.displayName=DO;var E_e="MenuSeparator",JK=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(st.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});JK.displayName=E_e;var A_e="MenuArrow",eG=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=XN(n);return i.jsx(mR,{...s,...r,ref:e})});eG.displayName=A_e;var T_e="MenuSub",[Mtt,tG]=Qh(T_e),py="MenuSubTrigger",nG=_.forwardRef((t,e)=>{const n=Xh(py,t.__scopeMenu),r=ob(py,t.__scopeMenu),s=tG(py,t.__scopeMenu),a=kO(py,t.__scopeMenu),o=_.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,u={__scopeMenu:t.__scopeMenu},d=_.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return _.useEffect(()=>d,[d]),_.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),i.jsx(PO,{asChild:!0,...u,children:i.jsx(WK,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":iG(n.open),...t,ref:uN(e,s.onTriggerChange),onClick:h=>{var f;(f=t.onClick)==null||f.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Me(t.onPointerMove,Rv(h=>{a.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:Me(t.onPointerLeave,Rv(h=>{var m,y;d();const f=(m=n.content)==null?void 0:m.getBoundingClientRect();if(f){const p=(y=n.content)==null?void 0:y.dataset.side,v=p==="right",b=v?-5:5,x=f[v?"left":"right"],w=f[v?"right":"left"];a.onPointerGraceIntentChange({area:[{x:h.clientX+b,y:h.clientY},{x,y:f.top},{x:w,y:f.top},{x:w,y:f.bottom},{x,y:f.bottom}],side:p}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(h),h.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Me(t.onKeyDown,h=>{var m;const f=a.searchRef.current!=="";t.disabled||f&&h.key===" "||l_e[r.dir].includes(h.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),h.preventDefault())})})})});nG.displayName=py;var rG="MenuSubContent",sG=_.forwardRef((t,e)=>{const n=BK(ca,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,a=Xh(ca,t.__scopeMenu),o=ob(ca,t.__scopeMenu),l=tG(rG,t.__scopeMenu),c=_.useRef(null),u=Mt(e,c);return i.jsx(kv.Provider,{scope:t.__scopeMenu,children:i.jsx(gs,{present:r||a.open,children:i.jsx(kv.Slot,{scope:t.__scopeMenu,children:i.jsx(RO,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Me(t.onFocusOutside,d=>{d.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Me(t.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:Me(t.onKeyDown,d=>{var m;const h=d.currentTarget.contains(d.target),f=c_e[o.dir].includes(d.key);h&&f&&(a.onOpenChange(!1),(m=l.trigger)==null||m.focus(),d.preventDefault())})})})})})});sG.displayName=rG;function iG(t){return t?"open":"closed"}function __(t){return t==="indeterminate"}function MO(t){return __(t)?"indeterminate":t?"checked":"unchecked"}function C_e(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function P_e(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function I_e(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=P_e(t,Math.max(a,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function k_e(t,e){const{x:n,y:r}=t;let s=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a],c=e[o],u=l.x,d=l.y,h=c.x,f=c.y;d>r!=f>r&&n<(h-u)*(r-d)/(f-d)+u&&(s=!s)}return s}function R_e(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return k_e(n,e)}function Rv(t){return e=>e.pointerType==="mouse"?t(e):void 0}var O_e=VK,D_e=PO,M_e=UK,L_e=zK,$_e=OO,F_e=qK,V_e=ZN,B_e=HK,U_e=GK,z_e=QK,q_e=ZK,W_e=JK,H_e=eG,K_e=nG,G_e=sG,JN="DropdownMenu",[Y_e,Ltt]=ps(JN,[$K]),Js=$K(),[Q_e,aG]=Y_e(JN),oG=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:a,onOpenChange:o,modal:l=!0}=t,c=Js(e),u=_.useRef(null),[d,h]=oo({prop:s,defaultProp:a??!1,onChange:o,caller:JN});return i.jsx(Q_e,{scope:e,triggerId:oa(),triggerRef:u,contentId:oa(),open:d,onOpenChange:h,onOpenToggle:_.useCallback(()=>h(f=>!f),[h]),modal:l,children:i.jsx(O_e,{...c,open:d,onOpenChange:h,dir:r,modal:l,children:n})})};oG.displayName=JN;var lG="DropdownMenuTrigger",cG=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,a=aG(lG,n),o=Js(n);return i.jsx(D_e,{asChild:!0,...o,children:i.jsx(st.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:uN(e,a.triggerRef),onPointerDown:Me(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:Me(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});cG.displayName=lG;var X_e="DropdownMenuPortal",uG=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Js(e);return i.jsx(M_e,{...r,...n})};uG.displayName=X_e;var dG="DropdownMenuContent",hG=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=aG(dG,n),a=Js(n),o=_.useRef(!1);return i.jsx(L_e,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...r,ref:e,onCloseAutoFocus:Me(t.onCloseAutoFocus,l=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Me(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});hG.displayName=dG;var Z_e="DropdownMenuGroup",J_e=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Js(n);return i.jsx($_e,{...s,...r,ref:e})});J_e.displayName=Z_e;var eje="DropdownMenuLabel",fG=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Js(n);return i.jsx(F_e,{...s,...r,ref:e})});fG.displayName=eje;var tje="DropdownMenuItem",mG=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Js(n);return i.jsx(V_e,{...s,...r,ref:e})});mG.displayName=tje;var nje="DropdownMenuCheckboxItem",pG=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Js(n);return i.jsx(B_e,{...s,...r,ref:e})});pG.displayName=nje;var rje="DropdownMenuRadioGroup",sje=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Js(n);return i.jsx(U_e,{...s,...r,ref:e})});sje.displayName=rje;var ije="DropdownMenuRadioItem",gG=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Js(n);return i.jsx(z_e,{...s,...r,ref:e})});gG.displayName=ije;var aje="DropdownMenuItemIndicator",yG=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Js(n);return i.jsx(q_e,{...s,...r,ref:e})});yG.displayName=aje;var oje="DropdownMenuSeparator",vG=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Js(n);return i.jsx(W_e,{...s,...r,ref:e})});vG.displayName=oje;var lje="DropdownMenuArrow",cje=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Js(n);return i.jsx(H_e,{...s,...r,ref:e})});cje.displayName=lje;var uje="DropdownMenuSubTrigger",xG=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Js(n);return i.jsx(K_e,{...s,...r,ref:e})});xG.displayName=uje;var dje="DropdownMenuSubContent",bG=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Js(n);return i.jsx(G_e,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});bG.displayName=dje;var hje=oG,fje=cG,mje=uG,wG=hG,_G=fG,jG=mG,NG=pG,SG=gG,EG=yG,AG=vG,TG=xG,CG=bG;const PG=hje,IG=fje,pje=_.forwardRef(({className:t,inset:e,children:n,...r},s)=>i.jsxs(TG,{ref:s,className:ve("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",e&&"pl-8",t),...r,children:[n,i.jsx(s8,{className:"ml-auto h-4 w-4"})]}));pje.displayName=TG.displayName;const gje=_.forwardRef(({className:t,...e},n)=>i.jsx(CG,{ref:n,className:ve("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));gje.displayName=CG.displayName;const LO=_.forwardRef(({className:t,sideOffset:e=4,...n},r)=>i.jsx(mje,{children:i.jsx(wG,{ref:r,sideOffset:e,className:ve("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));LO.displayName=wG.displayName;const j_=_.forwardRef(({className:t,inset:e,...n},r)=>i.jsx(jG,{ref:r,className:ve("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e&&"pl-8",t),...n}));j_.displayName=jG.displayName;const kG=_.forwardRef(({className:t,children:e,checked:n,...r},s)=>i.jsxs(NG,{ref:s,className:ve("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),checked:n,...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(EG,{children:i.jsx($x,{className:"h-4 w-4"})})}),e]}));kG.displayName=NG.displayName;const yje=_.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(SG,{ref:r,className:ve("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(EG,{children:i.jsx(qoe,{className:"h-2 w-2 fill-current"})})}),e]}));yje.displayName=SG.displayName;const $O=_.forwardRef(({className:t,inset:e,...n},r)=>i.jsx(_G,{ref:r,className:ve("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));$O.displayName=_G.displayName;const FO=_.forwardRef(({className:t,...e},n)=>i.jsx(AG,{ref:n,className:ve("-mx-1 my-1 h-px bg-muted",t),...e}));FO.displayName=AG.displayName;function vje(){const t=$n(),{user:e,signOut:n}=ht(),r=async()=>{await n(),t("/auth")};return i.jsxs(PG,{children:[i.jsx(IG,{asChild:!0,children:i.jsx(H,{variant:"ghost",size:"icon",className:"rounded-full",children:i.jsx(h8,{className:"h-5 w-5"})})}),i.jsxs(LO,{align:"end",className:"w-56",children:[i.jsx($O,{children:i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"text-sm",children:"My Account"}),i.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:(e==null?void 0:e.email)||""})]})}),i.jsx(FO,{}),i.jsxs(j_,{onClick:r,children:[i.jsx(Zoe,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Log out"})]})]})]})}const Q={COMPANIES:"companies",USERS:"users",COMPANY_USERS:"companyUsers",COMPANY_SETTINGS:"companySettings",INVITATIONS:"invitations",USER_ROLES:"userRoles",CHART_OF_ACCOUNTS:"chartOfAccounts",JOURNAL_ENTRIES:"journalEntries",JOURNAL_LINES:"journalLines",INVOICES:"invoices",INVOICE_ITEMS:"invoiceItems",INVOICE_PAYMENTS:"invoicePayments",BILLS:"bills",BILL_PAYMENTS:"billPayments",EXPENSES:"expenses",EXPENSE_CATEGORY_MAPPINGS:"expenseCategoryMappings",SALES_ORDERS:"salesOrders",PURCHASE_ORDERS:"purchaseOrders",EMPLOYEES:"employees",CONTRACTORS:"contractors",ADVANCES:"advances",TIME_ENTRIES:"timeEntries",EMPLOYEE_ALLOWANCES:"employeeAllowances",EMPLOYEE_PAYROLL_PROFILES:"employeePayrollProfiles",PAYROLL_RUNS:"payrollRuns",PAYROLL_ITEMS:"payrollItems",PAYROLL_ADDITIONS:"payrollAdditions",PAYROLL_JOURNALS:"payrollJournals",PAYE_TAX_BANDS:"payeTaxBands",PAYROLL_STATUTORY_RATES:"payrollStatutoryRates",CUSTOMERS:"customers",VENDORS:"vendors",PROJECTS:"projects",PROJECT_ACTIVITY_LOGS:"projectActivityLogs",PROJECT_EXPENSES:"projectExpenses",APPROVAL_REQUESTS:"approvalRequests",PRODUCTS:"products",FIXED_ASSETS:"fixedAssets",ASSET_CATEGORIES:"assetCategories",DEPRECIATION_ENTRIES:"depreciationEntries",INVENTORY_ITEMS:"inventoryItems",STOCK_MOVEMENTS:"stockMovements",PRICE_LISTS:"priceLists",PRICE_LIST_ITEMS:"priceListItems",BANK_ACCOUNTS:"bankAccounts",BANK_TRANSACTIONS:"bankTransactions",FINANCIAL_YEARS:"financialYears",FINANCIAL_PERIODS:"financialPeriods",CASH_RECONCILIATIONS:"cashReconciliations",RECONCILIATIONS:"reconciliations",PERIOD_LOCKS:"periodLocks",NOTIFICATIONS:"notifications",AUDIT_LOGS:"auditLogs"},xje=["super_admin","admin","financial_manager","accountant","bookkeeper","assistant_accountant","finance_officer","hr_manager","project_manager","inventory_manager","cashier","auditor","staff","read_only"],bje=t=>{if(!t.length)return"read_only";for(const e of xje)if(t.includes(e))return e;return"read_only"};function ei(){const{user:t,isAuthenticated:e}=ht();return Ee({queryKey:["user-role",t==null?void 0:t.id],queryFn:async()=>{if(!t||!qo)return"read_only";try{const n=new Set,r=we(se,Q.COMPANY_USERS),s=[Te(r,he("userId","==",t.id),he("status","==","active"),Ts(20)),Te(r,he("user_id","==",t.id),he("status","==","active"),Ts(20)),Te(r,he("userId","==",t.id),Ts(20)),Te(r,he("user_id","==",t.id),Ts(20))];for(const a of s)if((await Ce(a)).docs.forEach(l=>{const c=l.data().role;c&&n.add(c)}),n.size)break;if(!n.size){const a=we(se,Q.USER_ROLES),o=[Te(a,he("userId","==",t.id),Ts(20)),Te(a,he("user_id","==",t.id),Ts(20))];for(const l of o)if((await Ce(l)).docs.forEach(u=>{const d=u.data().role;d&&n.add(d)}),n.size)break}return n.size?bje(Array.from(n)):"read_only"}catch{return"read_only"}},enabled:e&&!!t,staleTime:1e3*60*5})}function wje(t){const{data:e,isLoading:n}=ei();return{hasRole:(e?t.includes(e):!1)||e==="super_admin",isLoading:n,userRole:e}}const _je={super_admin:["*"],admin:["*"],financial_manager:["dashboard","invoices","customers","estimates","sales-orders","vendors","bills","purchase-orders","expenses","bank-accounts","reconciliation","reports","settings","chart-of-accounts","journal-entries","accounts-payable","accounts-receivable","payroll","payroll-reports","employees","fixed-assets","asset-depreciation","opening-balances","financial-periods","zra-compliance","tax-calculator"],accountant:["dashboard","invoices","customers","estimates","sales-orders","vendors","bills","purchase-orders","expenses","bank-accounts","reconciliation","reports","settings","chart-of-accounts","journal-entries","accounts-payable","accounts-receivable","payroll","payroll-reports","fixed-assets","asset-depreciation","opening-balances","financial-periods","tax-calculator"],assistant_accountant:["dashboard","invoices","customers","estimates","sales-orders","vendors","bills","purchase-orders","expenses","chart-of-accounts","journal-entries","accounts-payable","accounts-receivable","financial-periods"],finance_officer:["dashboard","invoices","expenses","bills","bank-accounts","reconciliation","reports","chart-of-accounts","journal-entries","accounts-payable","accounts-receivable","financial-periods"],bookkeeper:["dashboard","invoices","customers","estimates","sales-orders","vendors","bills","purchase-orders","expenses","chart-of-accounts","journal-entries","fixed-assets","reconciliation","accounts-payable","accounts-receivable","financial-periods"],cashier:["dashboard","bank-accounts","expenses","reconciliation","products","inventory"],inventory_manager:["dashboard","inventory","products","purchase-orders","vendors"],hr_manager:["dashboard","employees","payroll","advances","payroll-reports","time-tracking"],project_manager:["dashboard","projects","donors","time-tracking","reports"],auditor:["dashboard","reports","payroll-reports","audit-logs","journal-entries","chart-of-accounts"],staff:["dashboard","time-tracking"],read_only:["dashboard"]};function RG(t,e){if(!t)return!1;if(t==="super_admin"||t==="admin")return!0;const n=_je[t]||[],r=e.replace(/^\//,"").split("/")[0];return n.includes(r)||n.includes("*")}function FC(t,[e,n]){return Math.min(n,Math.max(e,t))}function jje(t,e){return _.useReducer((n,r)=>e[n][r]??n,t)}var VO="ScrollArea",[OG,$tt]=ps(VO),[Nje,ba]=OG(VO),DG=_.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:a=600,...o}=t,[l,c]=_.useState(null),[u,d]=_.useState(null),[h,f]=_.useState(null),[m,y]=_.useState(null),[p,v]=_.useState(null),[b,x]=_.useState(0),[w,C]=_.useState(0),[S,P]=_.useState(!1),[j,g]=_.useState(!1),T=Mt(e,A=>c(A)),E=sb(s);return i.jsx(Nje,{scope:n,type:r,dir:E,scrollHideDelay:a,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:f,scrollbarX:m,onScrollbarXChange:y,scrollbarXEnabled:S,onScrollbarXEnabledChange:P,scrollbarY:p,onScrollbarYChange:v,scrollbarYEnabled:j,onScrollbarYEnabledChange:g,onCornerWidthChange:x,onCornerHeightChange:C,children:i.jsx(st.div,{dir:E,...o,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":w+"px",...t.style}})})});DG.displayName=VO;var MG="ScrollAreaViewport",LG=_.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...a}=t,o=ba(MG,n),l=_.useRef(null),c=Mt(e,l,o.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),i.jsx(st.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:i.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});LG.displayName=MG;var al="ScrollAreaScrollbar",BO=_.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=ba(al,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=s,l=t.orientation==="horizontal";return _.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),s.type==="hover"?i.jsx(Sje,{...r,ref:e,forceMount:n}):s.type==="scroll"?i.jsx(Eje,{...r,ref:e,forceMount:n}):s.type==="auto"?i.jsx($G,{...r,ref:e,forceMount:n}):s.type==="always"?i.jsx(UO,{...r,ref:e}):null});BO.displayName=al;var Sje=_.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=ba(al,t.__scopeScrollArea),[a,o]=_.useState(!1);return _.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),i.jsx(gs,{present:n||a,children:i.jsx($G,{"data-state":a?"visible":"hidden",...r,ref:e})})}),Eje=_.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=ba(al,t.__scopeScrollArea),a=t.orientation==="horizontal",o=tS(()=>c("SCROLL_END"),100),[l,c]=jje("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return _.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),_.useEffect(()=>{const u=s.viewport,d=a?"scrollLeft":"scrollTop";if(u){let h=u[d];const f=()=>{const m=u[d];h!==m&&(c("SCROLL"),o()),h=m};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[s.viewport,a,c,o]),i.jsx(gs,{present:n||l!=="hidden",children:i.jsx(UO,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Me(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Me(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),$G=_.forwardRef((t,e)=>{const n=ba(al,t.__scopeScrollArea),{forceMount:r,...s}=t,[a,o]=_.useState(!1),l=t.orientation==="horizontal",c=tS(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?u:d)}},10);return Qm(n.viewport,c),Qm(n.content,c),i.jsx(gs,{present:r||a,children:i.jsx(UO,{"data-state":a?"visible":"hidden",...s,ref:e})})}),UO=_.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=ba(al,t.__scopeScrollArea),a=_.useRef(null),o=_.useRef(0),[l,c]=_.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=zG(l.viewport,l.content),d={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:f=>a.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function h(f,m){return kje(f,o.current,l,m)}return n==="horizontal"?i.jsx(Aje,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&a.current){const f=s.viewport.scrollLeft,m=DF(f,l,s.dir);a.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollLeft=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollLeft=h(f,s.dir))}}):n==="vertical"?i.jsx(Tje,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&a.current){const f=s.viewport.scrollTop,m=DF(f,l);a.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollTop=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollTop=h(f))}}):null}),Aje=_.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,a=ba(al,t.__scopeScrollArea),[o,l]=_.useState(),c=_.useRef(null),u=Mt(e,c,a.onScrollbarXChange);return _.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(VG,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":eS(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(a.viewport){const f=a.viewport.scrollLeft+d.deltaX;t.onWheelScroll(f),WG(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:S_(o.paddingLeft),paddingEnd:S_(o.paddingRight)}})}})}),Tje=_.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,a=ba(al,t.__scopeScrollArea),[o,l]=_.useState(),c=_.useRef(null),u=Mt(e,c,a.onScrollbarYChange);return _.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(VG,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":eS(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(a.viewport){const f=a.viewport.scrollTop+d.deltaY;t.onWheelScroll(f),WG(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:S_(o.paddingTop),paddingEnd:S_(o.paddingBottom)}})}})}),[Cje,FG]=OG(al),VG=_.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...f}=t,m=ba(al,n),[y,p]=_.useState(null),v=Mt(e,T=>p(T)),b=_.useRef(null),x=_.useRef(""),w=m.viewport,C=r.content-r.viewport,S=hr(d),P=hr(c),j=tS(h,10);function g(T){if(b.current){const E=T.clientX-b.current.left,A=T.clientY-b.current.top;u({x:E,y:A})}}return _.useEffect(()=>{const T=E=>{const A=E.target;(y==null?void 0:y.contains(A))&&S(E,C)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[w,y,C,S]),_.useEffect(P,[r,P]),Qm(y,j),Qm(m.content,j),i.jsx(Cje,{scope:n,scrollbar:y,hasThumb:s,onThumbChange:hr(a),onThumbPointerUp:hr(o),onThumbPositionChange:P,onThumbPointerDown:hr(l),children:i.jsx(st.div,{...f,ref:v,style:{position:"absolute",...f.style},onPointerDown:Me(t.onPointerDown,T=>{T.button===0&&(T.target.setPointerCapture(T.pointerId),b.current=y.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),g(T))}),onPointerMove:Me(t.onPointerMove,g),onPointerUp:Me(t.onPointerUp,T=>{const E=T.target;E.hasPointerCapture(T.pointerId)&&E.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=x.current,m.viewport&&(m.viewport.style.scrollBehavior=""),b.current=null})})})}),N_="ScrollAreaThumb",BG=_.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=FG(N_,t.__scopeScrollArea);return i.jsx(gs,{present:n||s.hasThumb,children:i.jsx(Pje,{ref:e,...r})})}),Pje=_.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,a=ba(N_,n),o=FG(N_,n),{onThumbPositionChange:l}=o,c=Mt(e,h=>o.onThumbChange(h)),u=_.useRef(void 0),d=tS(()=>{u.current&&(u.current(),u.current=void 0)},100);return _.useEffect(()=>{const h=a.viewport;if(h){const f=()=>{if(d(),!u.current){const m=Rje(h,l);u.current=m,l()}};return l(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[a.viewport,d,l]),i.jsx(st.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Me(t.onPointerDownCapture,h=>{const m=h.target.getBoundingClientRect(),y=h.clientX-m.left,p=h.clientY-m.top;o.onThumbPointerDown({x:y,y:p})}),onPointerUp:Me(t.onPointerUp,o.onThumbPointerUp)})});BG.displayName=N_;var zO="ScrollAreaCorner",UG=_.forwardRef((t,e)=>{const n=ba(zO,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(Ije,{...t,ref:e}):null});UG.displayName=zO;var Ije=_.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=ba(zO,n),[a,o]=_.useState(0),[l,c]=_.useState(0),u=!!(a&&l);return Qm(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),Qm(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),o(d)}),u?i.jsx(st.div,{...r,ref:e,style:{width:a,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function S_(t){return t?parseInt(t,10):0}function zG(t,e){const n=t/e;return isNaN(n)?0:n}function eS(t){const e=zG(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function kje(t,e,n,r="ltr"){const s=eS(n),a=s/2,o=e||a,l=s-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return qG([c,u],h)(t)}function DF(t,e,n="ltr"){const r=eS(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-s,o=e.content-e.viewport,l=a-r,c=n==="ltr"?[0,o]:[o*-1,0],u=FC(t,c);return qG([0,o],[0,l])(u)}function qG(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function WG(t,e){return t>0&&t<e}var Rje=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const a={left:t.scrollLeft,top:t.scrollTop},o=n.left!==a.left,l=n.top!==a.top;(o||l)&&e(),n=a,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function tS(t,e){const n=hr(t),r=_.useRef(0);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),_.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Qm(t,e){const n=hr(e);fr(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var HG=DG,Oje=LG,Dje=UG;const ih=_.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(HG,{ref:r,className:ve("relative overflow-hidden",t),...n,children:[i.jsx(Oje,{className:"h-full w-full rounded-[inherit]",children:e}),i.jsx(KG,{}),i.jsx(Dje,{})]}));ih.displayName=HG.displayName;const KG=_.forwardRef(({className:t,orientation:e="vertical",...n},r)=>i.jsx(BO,{ref:r,orientation:e,className:ve("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:i.jsx(BG,{className:"relative flex-1 rounded-full bg-border"})}));KG.displayName=BO.displayName;const LE=768;function nS(){const[t,e]=_.useState(void 0);return _.useEffect(()=>{const n=window.matchMedia(`(max-width: ${LE-1}px)`),r=()=>{e(window.innerWidth<LE)};return n.addEventListener("change",r),e(window.innerWidth<LE),()=>n.removeEventListener("change",r)},[]),!!t}const G=_.forwardRef(({className:t,type:e,...n},r)=>i.jsx("input",{type:e,className:ve("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));G.displayName="Input";var Mje="Separator",MF="horizontal",Lje=["horizontal","vertical"],GG=_.forwardRef((t,e)=>{const{decorative:n,orientation:r=MF,...s}=t,a=$je(r)?r:MF,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return i.jsx(st.div,{"data-orientation":a,...l,...s,ref:e})});GG.displayName=Mje;function $je(t){return Lje.includes(t)}var YG=GG;const QG=_.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>i.jsx(YG,{ref:s,decorative:n,orientation:e,className:ve("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));QG.displayName=YG.displayName;var rS="Dialog",[XG,ZG]=ps(rS),[Fje,po]=XG(rS),JG=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:o=!0}=t,l=_.useRef(null),c=_.useRef(null),[u,d]=oo({prop:r,defaultProp:s??!1,onChange:a,caller:rS});return i.jsx(Fje,{scope:e,triggerRef:l,contentRef:c,contentId:oa(),titleId:oa(),descriptionId:oa(),open:u,onOpenChange:d,onOpenToggle:_.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};JG.displayName=rS;var eY="DialogTrigger",tY=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=po(eY,n),a=Mt(e,s.triggerRef);return i.jsx(st.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":HO(s.open),...r,ref:a,onClick:Me(t.onClick,s.onOpenToggle)})});tY.displayName=eY;var qO="DialogPortal",[Vje,nY]=XG(qO,{forceMount:void 0}),rY=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,a=po(qO,e);return i.jsx(Vje,{scope:e,forceMount:n,children:_.Children.map(r,o=>i.jsx(gs,{present:n||a.open,children:i.jsx(Dx,{asChild:!0,container:s,children:o})}))})};rY.displayName=qO;var E_="DialogOverlay",sY=_.forwardRef((t,e)=>{const n=nY(E_,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=po(E_,t.__scopeDialog);return a.modal?i.jsx(gs,{present:r||a.open,children:i.jsx(Uje,{...s,ref:e})}):null});sY.displayName=E_;var Bje=ph("DialogOverlay.RemoveScroll"),Uje=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=po(E_,n);return i.jsx(QN,{as:Bje,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(st.div,{"data-state":HO(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Ih="DialogContent",iY=_.forwardRef((t,e)=>{const n=nY(Ih,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=po(Ih,t.__scopeDialog);return i.jsx(gs,{present:r||a.open,children:a.modal?i.jsx(zje,{...s,ref:e}):i.jsx(qje,{...s,ref:e})})});iY.displayName=Ih;var zje=_.forwardRef((t,e)=>{const n=po(Ih,t.__scopeDialog),r=_.useRef(null),s=Mt(e,n.contentRef,r);return _.useEffect(()=>{const a=r.current;if(a)return CO(a)},[]),i.jsx(aY,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Me(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Me(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:Me(t.onFocusOutside,a=>a.preventDefault())})}),qje=_.forwardRef((t,e)=>{const n=po(Ih,t.__scopeDialog),r=_.useRef(!1),s=_.useRef(!1);return i.jsx(aY,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),aY=_.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...o}=t,l=po(Ih,n),c=_.useRef(null),u=Mt(e,c);return TO(),i.jsxs(i.Fragment,{children:[i.jsx(KN,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(Dp,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":HO(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(Hje,{titleId:l.titleId}),i.jsx(Gje,{contentRef:c,descriptionId:l.descriptionId})]})]})}),WO="DialogTitle",oY=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=po(WO,n);return i.jsx(st.h2,{id:s.titleId,...r,ref:e})});oY.displayName=WO;var lY="DialogDescription",cY=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=po(lY,n);return i.jsx(st.p,{id:s.descriptionId,...r,ref:e})});cY.displayName=lY;var uY="DialogClose",dY=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=po(uY,n);return i.jsx(st.button,{type:"button",...r,ref:e,onClick:Me(t.onClick,()=>s.onOpenChange(!1))})});dY.displayName=uY;function HO(t){return t?"open":"closed"}var hY="DialogTitleWarning",[Wje,fY]=Uae(hY,{contentName:Ih,titleName:WO,docsSlug:"dialog"}),Hje=({titleId:t})=>{const e=fY(hY),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return _.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Kje="DialogDescriptionWarning",Gje=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${fY(Kje).contentName}}.`;return _.useEffect(()=>{var a;const s=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},KO=JG,mY=tY,GO=rY,lb=sY,cb=iY,ub=oY,db=cY,sS=dY;const Yje=KO,Qje=GO,pY=_.forwardRef(({className:t,...e},n)=>i.jsx(lb,{className:ve("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));pY.displayName=lb.displayName;const Xje=Wh("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),gY=_.forwardRef(({side:t="right",className:e,children:n,...r},s)=>i.jsxs(Qje,{children:[i.jsx(pY,{}),i.jsxs(cb,{ref:s,className:ve(Xje({side:t}),e),...r,children:[n,i.jsxs(sS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[i.jsx(Bm,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));gY.displayName=cb.displayName;const Zje=_.forwardRef(({className:t,...e},n)=>i.jsx(ub,{ref:n,className:ve("text-lg font-semibold text-foreground",t),...e}));Zje.displayName=ub.displayName;const Jje=_.forwardRef(({className:t,...e},n)=>i.jsx(db,{ref:n,className:ve("text-sm text-muted-foreground",t),...e}));Jje.displayName=db.displayName;function Rc({className:t,...e}){return i.jsx("div",{className:ve("animate-pulse rounded-md bg-muted",t),...e})}const eNe="sidebar:state",tNe=60*60*24*7,nNe="16rem",rNe="18rem",sNe="3rem",iNe="b",yY=_.createContext(null);function hb(){const t=_.useContext(yY);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}const vY=_.forwardRef(({defaultOpen:t=!0,open:e,onOpenChange:n,className:r,style:s,children:a,...o},l)=>{const c=nS(),[u,d]=_.useState(!1),[h,f]=_.useState(t),m=e??h,y=_.useCallback(x=>{const w=typeof x=="function"?x(m):x;n?n(w):f(w),document.cookie=`${eNe}=${w}; path=/; max-age=${tNe}`},[n,m]),p=_.useCallback(()=>c?d(x=>!x):y(x=>!x),[c,y,d]);_.useEffect(()=>{const x=w=>{w.key===iNe&&(w.metaKey||w.ctrlKey)&&(w.preventDefault(),p())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[p]);const v=m?"expanded":"collapsed",b=_.useMemo(()=>({state:v,open:m,setOpen:y,isMobile:c,openMobile:u,setOpenMobile:d,toggleSidebar:p}),[v,m,y,c,u,d,p]);return i.jsx(yY.Provider,{value:b,children:i.jsx(Z8,{delayDuration:0,children:i.jsx("div",{style:{"--sidebar-width":nNe,"--sidebar-width-icon":sNe,...s},className:ve("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:l,...o,children:a})})})});vY.displayName="SidebarProvider";const xY=_.forwardRef(({side:t="left",variant:e="sidebar",collapsible:n="offcanvas",className:r,children:s,...a},o)=>{const{isMobile:l,state:c,openMobile:u,setOpenMobile:d}=hb();return n==="none"?i.jsx("div",{className:ve("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:o,...a,children:s}):l?i.jsx(Yje,{open:u,onOpenChange:d,...a,children:i.jsx(gY,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":rNe},side:t,children:i.jsx("div",{className:"flex h-full w-full flex-col",children:s})})}):i.jsxs("div",{ref:o,className:"group peer hidden text-sidebar-foreground md:block","data-state":c,"data-collapsible":c==="collapsed"?n:"","data-variant":e,"data-side":t,children:[i.jsx("div",{className:ve("relative h-svh w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),i.jsx("div",{className:ve("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...a,children:i.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:s})})]})});xY.displayName="Sidebar";const bY=_.forwardRef(({className:t,onClick:e,...n},r)=>{const{toggleSidebar:s}=hb();return i.jsxs(H,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:ve("h-7 w-7",t),onClick:a=>{e==null||e(a),s()},...n,children:[i.jsx(nle,{}),i.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});bY.displayName="SidebarTrigger";const aNe=_.forwardRef(({className:t,...e},n)=>{const{toggleSidebar:r}=hb();return i.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:ve("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] group-data-[side=left]:-right-4 group-data-[side=right]:left-0 hover:after:bg-sidebar-border sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t),...e})});aNe.displayName="SidebarRail";const wY=_.forwardRef(({className:t,...e},n)=>i.jsx("main",{ref:n,className:ve("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",t),...e}));wY.displayName="SidebarInset";const oNe=_.forwardRef(({className:t,...e},n)=>i.jsx(G,{ref:n,"data-sidebar":"input",className:ve("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",t),...e}));oNe.displayName="SidebarInput";const _Y=_.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,"data-sidebar":"header",className:ve("flex flex-col gap-2 p-2",t),...e}));_Y.displayName="SidebarHeader";const jY=_.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,"data-sidebar":"footer",className:ve("flex flex-col gap-2 p-2",t),...e}));jY.displayName="SidebarFooter";const lNe=_.forwardRef(({className:t,...e},n)=>i.jsx(QG,{ref:n,"data-sidebar":"separator",className:ve("mx-2 w-auto bg-sidebar-border",t),...e}));lNe.displayName="SidebarSeparator";const NY=_.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,"data-sidebar":"content",className:ve("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...e}));NY.displayName="SidebarContent";const SY=_.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,"data-sidebar":"group",className:ve("relative flex w-full min-w-0 flex-col p-2",t),...e}));SY.displayName="SidebarGroup";const cNe=_.forwardRef(({className:t,asChild:e=!1,...n},r)=>{const s=e?qh:"div";return i.jsx(s,{ref:r,"data-sidebar":"group-label",className:ve("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...n})});cNe.displayName="SidebarGroupLabel";const uNe=_.forwardRef(({className:t,asChild:e=!1,...n},r)=>{const s=e?qh:"button";return i.jsx(s,{ref:r,"data-sidebar":"group-action",className:ve("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",t),...n})});uNe.displayName="SidebarGroupAction";const EY=_.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,"data-sidebar":"group-content",className:ve("w-full text-sm",t),...e}));EY.displayName="SidebarGroupContent";const AY=_.forwardRef(({className:t,...e},n)=>i.jsx("ul",{ref:n,"data-sidebar":"menu",className:ve("flex w-full min-w-0 flex-col gap-1",t),...e}));AY.displayName="SidebarMenu";const TY=_.forwardRef(({className:t,...e},n)=>i.jsx("li",{ref:n,"data-sidebar":"menu-item",className:ve("group/menu-item relative",t),...e}));TY.displayName="SidebarMenuItem";const dNe=Wh("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),CY=_.forwardRef(({asChild:t=!1,isActive:e=!1,variant:n="default",size:r="default",tooltip:s,className:a,...o},l)=>{const c=t?qh:"button",{isMobile:u,state:d}=hb(),h=i.jsx(c,{ref:l,"data-sidebar":"menu-button","data-size":r,"data-active":e,className:ve(dNe({variant:n,size:r}),a),...o});return s?(typeof s=="string"&&(s={children:s}),i.jsxs(ode,{children:[i.jsx(lde,{asChild:!0,children:h}),i.jsx(J8,{side:"right",align:"center",hidden:d!=="collapsed"||u,...s})]})):h});CY.displayName="SidebarMenuButton";const hNe=_.forwardRef(({className:t,asChild:e=!1,showOnHover:n=!1,...r},s)=>{const a=e?qh:"button";return i.jsx(a,{ref:s,"data-sidebar":"menu-action",className:ve("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform peer-hover/menu-button:text-sidebar-accent-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",t),...r})});hNe.displayName="SidebarMenuAction";const fNe=_.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:ve("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t),...e}));fNe.displayName="SidebarMenuBadge";const mNe=_.forwardRef(({className:t,showIcon:e=!1,...n},r)=>{const s=_.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return i.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:ve("flex h-8 items-center gap-2 rounded-md px-2",t),...n,children:[e&&i.jsx(Rc,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),i.jsx(Rc,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":s}})]})});mNe.displayName="SidebarMenuSkeleton";const pNe=_.forwardRef(({className:t,...e},n)=>i.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:ve("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",t),...e}));pNe.displayName="SidebarMenuSub";const gNe=_.forwardRef(({...t},e)=>i.jsx("li",{ref:e,...t}));gNe.displayName="SidebarMenuSubItem";const yNe=_.forwardRef(({asChild:t=!1,size:e="md",isActive:n,className:r,...s},a)=>{const o=t?qh:"a";return i.jsx(o,{ref:a,"data-sidebar":"menu-sub-button","data-size":e,"data-active":n,className:ve("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring aria-disabled:pointer-events-none aria-disabled:opacity-50 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",e==="sm"&&"text-xs",e==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...s})});yNe.displayName="SidebarMenuSubButton";var iS="Collapsible",[vNe,Ftt]=ps(iS),[xNe,YO]=vNe(iS),PY=_.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:a,onOpenChange:o,...l}=t,[c,u]=oo({prop:r,defaultProp:s??!1,onChange:o,caller:iS});return i.jsx(xNe,{scope:n,disabled:a,contentId:oa(),open:c,onOpenToggle:_.useCallback(()=>u(d=>!d),[u]),children:i.jsx(st.div,{"data-state":XO(c),"data-disabled":a?"":void 0,...l,ref:e})})});PY.displayName=iS;var IY="CollapsibleTrigger",kY=_.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,s=YO(IY,n);return i.jsx(st.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":XO(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:e,onClick:Me(t.onClick,s.onOpenToggle)})});kY.displayName=IY;var QO="CollapsibleContent",RY=_.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=YO(QO,t.__scopeCollapsible);return i.jsx(gs,{present:n||s.open,children:({present:a})=>i.jsx(bNe,{...r,ref:e,present:a})})});RY.displayName=QO;var bNe=_.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:s,...a}=t,o=YO(QO,n),[l,c]=_.useState(r),u=_.useRef(null),d=Mt(e,u),h=_.useRef(0),f=h.current,m=_.useRef(0),y=m.current,p=o.open||l,v=_.useRef(p),b=_.useRef(void 0);return _.useEffect(()=>{const x=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(x)},[]),fr(()=>{const x=u.current;if(x){b.current=b.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const w=x.getBoundingClientRect();h.current=w.height,m.current=w.width,v.current||(x.style.transitionDuration=b.current.transitionDuration,x.style.animationName=b.current.animationName),c(r)}},[o.open,r]),i.jsx(st.div,{"data-state":XO(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!p,...a,ref:d,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...t.style},children:p&&s})});function XO(t){return t?"open":"closed"}var wNe=PY;const _Ne=wNe,jNe=kY,NNe=RY;function Ov({variant:t="full",size:e="md",className:n}){const r={sm:"h-8 w-8",md:"h-10 w-10",lg:"h-12 w-12",xl:"h-16 w-16"},s={sm:"text-base",md:"text-xl",lg:"text-2xl",xl:"text-3xl"},a={sm:"text-[8px]",md:"text-[10px]",lg:"text-xs",xl:"text-sm"};return i.jsxs("div",{className:ve("flex items-center gap-3",n),children:[t!=="text"&&i.jsxs("div",{className:ve("relative flex items-center justify-center transition-all duration-300",r[e]),children:[i.jsx("img",{src:"/logo_new.png",alt:"ZedBooks",className:"h-full w-full object-contain drop-shadow-sm"}),i.jsx("div",{className:"absolute inset-0 bg-blue-500/10 rounded-full blur-xl -z-10 scale-150 opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),(t==="full"||t==="text")&&i.jsxs("div",{className:"flex flex-col select-none",children:[i.jsx("span",{className:ve("font-bold leading-none tracking-tight",s[e]),children:"ZedBooks"}),i.jsx("span",{className:ve("font-medium uppercase tracking-[0.2em] opacity-70",a[e]),children:"Purpose Ledger"})]})]})}const SNe=[{title:"Overview",items:[{title:"Dashboard",icon:Xoe,href:"/dashboard"}]},{title:"Sales & Receivables",items:[{title:"Customers",icon:di,href:"/customers"},{title:"Invoices",icon:dr,href:"/invoices"},{title:"Accounts Receivable",icon:Va,href:"/accounts-receivable"},{title:"Estimates",icon:dr,href:"/estimates"},{title:"Sales Orders",icon:i4,href:"/sales-orders"}]},{title:"Purchasing & Payables",items:[{title:"Vendors",icon:di,href:"/vendors"},{title:"Bills",icon:dr,href:"/bills"},{title:"Accounts Payable",icon:Va,href:"/accounts-payable"},{title:"Purchase Orders",icon:i4,href:"/purchase-orders"},{title:"Expenses",icon:Xn,href:"/expenses"}]},{title:"Inventory & Assets",items:[{title:"Products & Services",icon:aa,href:"/products"},{title:"Inventory",icon:aa,href:"/inventory"},{title:"Fixed Assets",icon:aa,href:"/fixed-assets"},{title:"Depreciation",icon:mv,href:"/asset-depreciation"}]},{title:"Banking",items:[{title:"Bank Accounts",icon:Va,href:"/bank-accounts"},{title:"Reconciliation",icon:Va,href:"/reconciliation"}]},{title:"People",items:[{title:"Employees",icon:di,href:"/employees"},{title:"Payroll",icon:Xn,href:"/payroll"},{title:"Advances",icon:Va,href:"/advances"},{title:"Time & Contractors",icon:$i,href:"/time-tracking"}]},{title:"Projects & Grants",items:[{title:"Projects",icon:Uw,href:"/projects"},{title:"Donors & Grants",icon:di,href:"/donors"}]},{title:"Accounting",items:[{title:"Chart of Accounts",icon:fv,href:"/chart-of-accounts"},{title:"Journal Entries",icon:dr,href:"/journal-entries"},{title:"Opening Balances",icon:fv,href:"/opening-balances"},{title:"Financial Periods",icon:$i,href:"/financial-periods"}]},{title:"Reports",items:[{title:"Financial Reports",icon:r8,href:"/reports"},{title:"Payroll Reports",icon:dr,href:"/payroll-reports"},{title:"ZRA Compliance",icon:dr,href:"/zra-compliance"},{title:"Tax Calculator",icon:mv,href:"/tax-calculator"}]},{title:"Administration",items:[{title:"Users & Roles",icon:di,href:"/users"},{title:"Audit Logs",icon:dr,href:"/audit-logs"},{title:"Payroll Settings",icon:qw,href:"/payroll-settings"},{title:"Company Settings",icon:qw,href:"/company-settings"}]}];function ENe(t,e){return e?e==="super_admin"||e==="admin"?t:t.map(n=>({...n,items:n.items.filter(r=>RG(e,r.href))})).filter(n=>n.items.length>0):t.map(n=>({...n,items:n.items.filter(r=>r.href==="/dashboard")})).filter(n=>n.items.length>0)}function ANe(){const t=sl(),{data:e}=ei(),{setOpenMobile:n}=hb(),r=nS(),s=ENe(SNe,e||null),a=()=>{r&&n(!1)};return i.jsxs(xY,{className:"border-r border-sidebar-border",children:[i.jsx(_Y,{className:"border-b border-sidebar-border p-4",children:i.jsx(Ii,{to:"/dashboard",className:"flex items-center gap-3",onClick:a,children:i.jsx(Ov,{variant:"full",size:"lg"})})}),i.jsx(NY,{children:i.jsx(ih,{className:"h-full",children:i.jsx("div",{className:"space-y-1 p-2",children:s.map((o,l)=>{const c=o.items.some(u=>t.pathname===u.href);return i.jsx(_Ne,{defaultOpen:c||l<3,className:"group/collapsible",children:i.jsxs(SY,{className:"p-0",children:[i.jsxs(jNe,{className:"flex w-full items-center justify-between rounded-lg px-3 py-2 text-sm font-medium text-sidebar-foreground/70 hover:bg-sidebar-accent hover:text-sidebar-foreground transition-colors",children:[i.jsx("span",{children:o.title}),i.jsx(Qk,{className:"h-4 w-4 transition-transform group-data-[state=open]/collapsible:rotate-180"})]}),i.jsx(NNe,{children:i.jsx(EY,{className:"mt-1",children:i.jsx(AY,{children:o.items.map(u=>{const d=t.pathname===u.href;return i.jsx(TY,{children:i.jsx(CY,{asChild:!0,isActive:d,className:ve("w-full transition-colors",d?"bg-primary text-primary-foreground hover:bg-primary/90 hover:text-primary-foreground":"text-sidebar-foreground/70 hover:bg-sidebar-accent hover:text-sidebar-foreground"),children:i.jsxs(Ii,{to:u.href,onClick:a,className:"flex items-center gap-2",children:[i.jsx(u.icon,{className:ve("h-4 w-4",d?"text-primary-foreground":"")}),i.jsx("span",{children:u.title})]})})},u.title)})})})})]})},o.title)})})})}),i.jsx(jY,{className:"border-t border-sidebar-border p-4",children:i.jsx(vje,{})})]})}function wt({children:t}){const{isAuthenticated:e,isLoading:n}=ht(),r=sl();return n?i.jsx("div",{className:"flex min-h-screen items-center justify-center",children:i.jsx(dm,{message:"Verifying authentication...",size:"lg"})}):e?i.jsx(i.Fragment,{children:t}):i.jsx(iC,{to:"/auth",state:{from:r},replace:!0})}function ZO({className:t}){return i.jsx("a",{href:"https://byteandberry.com/",target:"_blank",rel:"noopener noreferrer",className:ve("fixed bottom-4 right-4 z-50 flex items-center gap-1 text-xs font-medium text-muted-foreground/40 hover:text-primary transition-all duration-200 bg-background/50 hover:bg-background px-2 py-1 rounded-full backdrop-blur-[2px]",t),"aria-label":"Made by Byte & Berry - Visit Website",children:i.jsx("span",{children:"Made by Byte & Berry"})})}function TNe(){const[t,e]=_.useState([{role:"assistant",content:"Hello! I am your ZedBooks financial assistant. I can help you analyze your data, explain accounting concepts, or check for anomalies. How can I help you today?",timestamp:new Date().toISOString()}]),[n,r]=_.useState(!1);return{messages:t,isLoading:n,askAI:async(o,l)=>{if(!o.trim())return;const c={role:"user",content:o,timestamp:new Date().toISOString()};e(u=>[...u,c]),r(!0);try{const h={role:"assistant",content:(await eK(xK,"askDeepSeek")({query:o,includeFinancialContext:!0,companyId:l})).data.answer,timestamp:new Date().toISOString()};e(f=>[...f,h])}catch(u){console.error("AI Error:",u),Y.error("Failed to get response from AI assistant."),e(d=>[...d,{role:"assistant",content:"I'm sorry, I encountered an error while processing your request. Please try again later.",timestamp:new Date().toISOString()}])}finally{r(!1)}},clearChat:()=>{e([{role:"assistant",content:"Chat cleared. How can I help you now?",timestamp:new Date().toISOString()}])}}}const X=_.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:ve("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));X.displayName="Card";const te=_.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:ve("flex flex-col space-y-1.5 p-6",t),...e}));te.displayName="CardHeader";const ne=_.forwardRef(({className:t,...e},n)=>i.jsx("h3",{ref:n,className:ve("text-2xl font-semibold leading-none tracking-tight",t),...e}));ne.displayName="CardTitle";const pt=_.forwardRef(({className:t,...e},n)=>i.jsx("p",{ref:n,className:ve("text-sm text-muted-foreground",t),...e}));pt.displayName="CardDescription";const re=_.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:ve("p-6 pt-0",t),...e}));re.displayName="CardContent";const OY=_.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:ve("flex items-center p-6 pt-0",t),...e}));OY.displayName="CardFooter";const JO=_.createContext({});function e2(t){const e=_.useRef(null);return e.current===null&&(e.current=t()),e.current}const DY=typeof window<"u",MY=DY?_.useLayoutEffect:_.useEffect,aS=_.createContext(null);function t2(t,e){t.indexOf(e)===-1&&t.push(e)}function A_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Jo=(t,e,n)=>n>e?e:n<t?t:n;let oS=()=>{},Xm=()=>{};const Ql={},LY=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function $Y(t){return typeof t=="object"&&t!==null}const FY=t=>/^0[^.\s]+$/u.test(t);function n2(t){let e;return()=>(e===void 0&&(e=t()),e)}const ua=t=>t,CNe=(t,e)=>n=>e(t(n)),fb=(...t)=>t.reduce(CNe),Dv=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class r2{constructor(){this.subscriptions=[]}add(e){return t2(this.subscriptions,e),()=>A_(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let a=0;a<s;a++){const o=this.subscriptions[a];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const da=t=>t*1e3,ra=t=>t/1e3;function VY(t,e){return e?t*(1e3/e):0}const BY=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,PNe=1e-7,INe=12;function kNe(t,e,n,r,s){let a,o,l=0;do o=e+(n-e)/2,a=BY(o,r,s)-t,a>0?n=o:e=o;while(Math.abs(a)>PNe&&++l<INe);return o}function mb(t,e,n,r){if(t===e&&n===r)return ua;const s=a=>kNe(a,0,1,t,n);return a=>a===0||a===1?a:BY(s(a),e,r)}const UY=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,zY=t=>e=>1-t(1-e),qY=mb(.33,1.53,.69,.99),s2=zY(qY),WY=UY(s2),HY=t=>(t*=2)<1?.5*s2(t):.5*(2-Math.pow(2,-10*(t-1))),i2=t=>1-Math.sin(Math.acos(t)),KY=zY(i2),GY=UY(i2),RNe=mb(.42,0,1,1),ONe=mb(0,0,.58,1),YY=mb(.42,0,.58,1),DNe=t=>Array.isArray(t)&&typeof t[0]!="number",QY=t=>Array.isArray(t)&&typeof t[0]=="number",LF={linear:ua,easeIn:RNe,easeInOut:YY,easeOut:ONe,circIn:i2,circInOut:GY,circOut:KY,backIn:s2,backInOut:WY,backOut:qY,anticipate:HY},MNe=t=>typeof t=="string",$F=t=>{if(QY(t)){Xm(t.length===4,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");const[e,n,r,s]=t;return mb(e,n,r,s)}else if(MNe(t))return Xm(LF[t]!==void 0,`Invalid easing type '${t}'`,"invalid-easing-type"),LF[t];return t},y0=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],FF={value:null,addProjectionMetrics:null};function LNe(t,e){let n=new Set,r=new Set,s=!1,a=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},c=0;function u(h){o.has(h)&&(d.schedule(h),t()),c++,h(l)}const d={schedule:(h,f=!1,m=!1)=>{const p=m&&s?n:r;return f&&o.add(h),p.has(h)||p.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(l=h,s){a=!0;return}s=!0,[n,r]=[r,n],n.forEach(u),e&&FF.value&&FF.value.frameloop[e].push(c),c=0,n.clear(),s=!1,a&&(a=!1,d.process(h))}};return d}const $Ne=40;function XY(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=y0.reduce((w,C)=>(w[C]=LNe(a,e?C:void 0),w),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:f,render:m,postRender:y}=o,p=()=>{const w=Ql.useManualTiming?s.timestamp:performance.now();n=!1,Ql.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(w-s.timestamp,$Ne),1)),s.timestamp=w,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),f.process(s),m.process(s),y.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(p))},v=()=>{n=!0,r=!0,s.isProcessing||t(p)};return{schedule:y0.reduce((w,C)=>{const S=o[C];return w[C]=(P,j=!1,g=!1)=>(n||v(),S.schedule(P,j,g)),w},{}),cancel:w=>{for(let C=0;C<y0.length;C++)o[y0[C]].cancel(w)},state:s,steps:o}}const{schedule:Mn,cancel:Fu,state:ls,steps:$E}=XY(typeof requestAnimationFrame<"u"?requestAnimationFrame:ua,!0);let uw;function FNe(){uw=void 0}const qs={now:()=>(uw===void 0&&qs.set(ls.isProcessing||Ql.useManualTiming?ls.timestamp:performance.now()),uw),set:t=>{uw=t,queueMicrotask(FNe)}},ZY=t=>e=>typeof e=="string"&&e.startsWith(t),JY=ZY("--"),VNe=ZY("var(--"),a2=t=>VNe(t)?BNe.test(t.split("/*")[0].trim()):!1,BNe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function VF(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const Qp={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Mv={...Qp,transform:t=>Jo(0,1,t)},v0={...Qp,default:1},$y=t=>Math.round(t*1e5)/1e5,o2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function UNe(t){return t==null}const zNe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,l2=(t,e)=>n=>!!(typeof n=="string"&&zNe.test(n)&&n.startsWith(t)||e&&!UNe(n)&&Object.prototype.hasOwnProperty.call(n,e)),eQ=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,a,o,l]=r.match(o2);return{[t]:parseFloat(s),[e]:parseFloat(a),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},qNe=t=>Jo(0,255,t),FE={...Qp,transform:t=>Math.round(qNe(t))},Ld={test:l2("rgb","red"),parse:eQ("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+FE.transform(t)+", "+FE.transform(e)+", "+FE.transform(n)+", "+$y(Mv.transform(r))+")"};function WNe(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const VC={test:l2("#"),parse:WNe,transform:Ld.transform},pb=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ac=pb("deg"),Wo=pb("%"),it=pb("px"),HNe=pb("vh"),KNe=pb("vw"),BF={...Wo,parse:t=>Wo.parse(t)/100,transform:t=>Wo.transform(t*100)},Bf={test:l2("hsl","hue"),parse:eQ("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Wo.transform($y(e))+", "+Wo.transform($y(n))+", "+$y(Mv.transform(r))+")"},Ar={test:t=>Ld.test(t)||VC.test(t)||Bf.test(t),parse:t=>Ld.test(t)?Ld.parse(t):Bf.test(t)?Bf.parse(t):VC.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ld.transform(t):Bf.transform(t),getAnimatableNone:t=>{const e=Ar.parse(t);return e.alpha=0,Ar.transform(e)}},GNe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function YNe(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(o2))==null?void 0:e.length)||0)+(((n=t.match(GNe))==null?void 0:n.length)||0)>0}const tQ="number",nQ="color",QNe="var",XNe="var(",UF="${}",ZNe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Lv(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const l=e.replace(ZNe,c=>(Ar.test(c)?(r.color.push(a),s.push(nQ),n.push(Ar.parse(c))):c.startsWith(XNe)?(r.var.push(a),s.push(QNe),n.push(c)):(r.number.push(a),s.push(tQ),n.push(parseFloat(c))),++a,UF)).split(UF);return{values:n,split:l,indexes:r,types:s}}function rQ(t){return Lv(t).values}function sQ(t){const{split:e,types:n}=Lv(t),r=e.length;return s=>{let a="";for(let o=0;o<r;o++)if(a+=e[o],s[o]!==void 0){const l=n[o];l===tQ?a+=$y(s[o]):l===nQ?a+=Ar.transform(s[o]):a+=s[o]}return a}}const JNe=t=>typeof t=="number"?0:Ar.test(t)?Ar.getAnimatableNone(t):t;function eSe(t){const e=rQ(t);return sQ(t)(e.map(JNe))}const Vu={test:YNe,parse:rQ,createTransformer:sQ,getAnimatableNone:eSe};function VE(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function tSe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,a=0,o=0;if(!e)s=a=o=n;else{const l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;s=VE(c,l,t+1/3),a=VE(c,l,t),o=VE(c,l,t-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function T_(t,e){return n=>n>0?e:t}const nr=(t,e,n)=>t+(e-t)*n,BE=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},nSe=[VC,Ld,Bf],rSe=t=>nSe.find(e=>e.test(t));function zF(t){const e=rSe(t);if(oS(!!e,`'${t}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!e)return!1;let n=e.parse(t);return e===Bf&&(n=tSe(n)),n}const qF=(t,e)=>{const n=zF(t),r=zF(e);if(!n||!r)return T_(t,e);const s={...n};return a=>(s.red=BE(n.red,r.red,a),s.green=BE(n.green,r.green,a),s.blue=BE(n.blue,r.blue,a),s.alpha=nr(n.alpha,r.alpha,a),Ld.transform(s))},BC=new Set(["none","hidden"]);function sSe(t,e){return BC.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function iSe(t,e){return n=>nr(t,e,n)}function c2(t){return typeof t=="number"?iSe:typeof t=="string"?a2(t)?T_:Ar.test(t)?qF:lSe:Array.isArray(t)?iQ:typeof t=="object"?Ar.test(t)?qF:aSe:T_}function iQ(t,e){const n=[...t],r=n.length,s=t.map((a,o)=>c2(a)(a,e[o]));return a=>{for(let o=0;o<r;o++)n[o]=s[o](a);return n}}function aSe(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=c2(t[s])(t[s],e[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function oSe(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=t.indexes[a][r[a]],l=t.values[o]??0;n[s]=l,r[a]++}return n}const lSe=(t,e)=>{const n=Vu.createTransformer(e),r=Lv(t),s=Lv(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?BC.has(t)&&!s.values.length||BC.has(e)&&!r.values.length?sSe(t,e):fb(iQ(oSe(r,s),s.values),n):(oS(!0,`Complex values '${t}' and '${e}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),T_(t,e))};function aQ(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?nr(t,e,n):c2(t)(t,e)}const cSe=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Mn.update(e,n),stop:()=>Fu(e),now:()=>ls.isProcessing?ls.timestamp:qs.now()}},oQ=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let a=0;a<s;a++)r+=Math.round(t(a/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},C_=2e4;function u2(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<C_;)e+=n,r=t.next(e);return e>=C_?1/0:e}function uSe(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(u2(r),C_);return{type:"keyframes",ease:a=>r.next(s*a).value/e,duration:ra(s)}}const dSe=5;function lQ(t,e,n){const r=Math.max(e-dSe,0);return VY(n-t(r),e-r)}const er={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},UE=.001;function hSe({duration:t=er.duration,bounce:e=er.bounce,velocity:n=er.velocity,mass:r=er.mass}){let s,a;oS(t<=da(er.maxDuration),"Spring duration must be 10 seconds or less","spring-duration-limit");let o=1-e;o=Jo(er.minDamping,er.maxDamping,o),t=Jo(er.minDuration,er.maxDuration,ra(t)),o<1?(s=u=>{const d=u*o,h=d*t,f=d-n,m=UC(u,o),y=Math.exp(-h);return UE-f/m*y},a=u=>{const h=u*o*t,f=h*n+n,m=Math.pow(o,2)*Math.pow(u,2)*t,y=Math.exp(-h),p=UC(Math.pow(u,2),o);return(-s(u)+UE>0?-1:1)*((f-m)*y)/p}):(s=u=>{const d=Math.exp(-u*t),h=(u-n)*t+1;return-UE+d*h},a=u=>{const d=Math.exp(-u*t),h=(n-u)*(t*t);return d*h});const l=5/t,c=mSe(s,a,l);if(t=da(t),isNaN(c))return{stiffness:er.stiffness,damping:er.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const fSe=12;function mSe(t,e,n){let r=n;for(let s=1;s<fSe;s++)r=r-t(r)/e(r);return r}function UC(t,e){return t*Math.sqrt(1-e*e)}const pSe=["duration","bounce"],gSe=["stiffness","damping","mass"];function WF(t,e){return e.some(n=>t[n]!==void 0)}function ySe(t){let e={velocity:er.velocity,stiffness:er.stiffness,damping:er.damping,mass:er.mass,isResolvedFromDuration:!1,...t};if(!WF(t,gSe)&&WF(t,pSe))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,a=2*Jo(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:er.mass,stiffness:s,damping:a}}else{const n=hSe(t);e={...e,...n,mass:er.mass},e.isResolvedFromDuration=!0}return e}function P_(t=er.visualDuration,e=er.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:a},{stiffness:c,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:m}=ySe({...n,velocity:-ra(n.velocity||0)}),y=f||0,p=u/(2*Math.sqrt(c*d)),v=o-a,b=ra(Math.sqrt(c/d)),x=Math.abs(v)<5;r||(r=x?er.restSpeed.granular:er.restSpeed.default),s||(s=x?er.restDelta.granular:er.restDelta.default);let w;if(p<1){const S=UC(b,p);w=P=>{const j=Math.exp(-p*b*P);return o-j*((y+p*b*v)/S*Math.sin(S*P)+v*Math.cos(S*P))}}else if(p===1)w=S=>o-Math.exp(-b*S)*(v+(y+b*v)*S);else{const S=b*Math.sqrt(p*p-1);w=P=>{const j=Math.exp(-p*b*P),g=Math.min(S*P,300);return o-j*((y+p*b*v)*Math.sinh(g)+S*v*Math.cosh(g))/S}}const C={calculatedDuration:m&&h||null,next:S=>{const P=w(S);if(m)l.done=S>=h;else{let j=S===0?y:0;p<1&&(j=S===0?da(y):lQ(w,S,P));const g=Math.abs(j)<=r,T=Math.abs(o-P)<=s;l.done=g&&T}return l.value=l.done?o:P,l},toString:()=>{const S=Math.min(u2(C),C_),P=oQ(j=>C.next(S*j).value,S,30);return S+"ms "+P},toTransition:()=>{}};return C}P_.applyToOptions=t=>{const e=uSe(t,100,P_);return t.ease=e.ease,t.duration=da(e.duration),t.type="keyframes",t};function zC({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=t[0],f={done:!1,value:h},m=g=>l!==void 0&&g<l||c!==void 0&&g>c,y=g=>l===void 0?c:c===void 0||Math.abs(l-g)<Math.abs(c-g)?l:c;let p=n*e;const v=h+p,b=o===void 0?v:o(v);b!==v&&(p=b-h);const x=g=>-p*Math.exp(-g/r),w=g=>b+x(g),C=g=>{const T=x(g),E=w(g);f.done=Math.abs(T)<=u,f.value=f.done?b:E};let S,P;const j=g=>{m(f.value)&&(S=g,P=P_({keyframes:[f.value,y(f.value)],velocity:lQ(w,g,f.value),damping:s,stiffness:a,restDelta:u,restSpeed:d}))};return j(0),{calculatedDuration:null,next:g=>{let T=!1;return!P&&S===void 0&&(T=!0,C(g),j(g)),S!==void 0&&g>=S?P.next(g-S):(!T&&C(g),f)}}}function vSe(t,e,n){const r=[],s=n||Ql.mix||aQ,a=t.length-1;for(let o=0;o<a;o++){let l=s(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||ua:e;l=fb(c,l)}r.push(l)}return r}function xSe(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const a=t.length;if(Xm(a===e.length,"Both input and output ranges must be the same length","range-length"),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=vSe(e,r,s),c=l.length,u=d=>{if(o&&d<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const f=Dv(t[h],t[h+1],d);return l[h](f)};return n?d=>u(Jo(t[0],t[a-1],d)):u}function bSe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Dv(0,e,r);t.push(nr(n,1,s))}}function wSe(t){const e=[0];return bSe(e,t.length-1),e}function _Se(t,e){return t.map(n=>n*e)}function jSe(t,e){return t.map(()=>e||YY).splice(0,t.length-1)}function Fy({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=DNe(r)?r.map($F):$F(r),a={done:!1,value:e[0]},o=_Se(n&&n.length===e.length?n:wSe(e),t),l=xSe(o,e,{ease:Array.isArray(s)?s:jSe(e,s)});return{calculatedDuration:t,next:c=>(a.value=l(c),a.done=c>=t,a)}}const NSe=t=>t!==null;function d2(t,{repeat:e,repeatType:n="loop"},r,s=1){const a=t.filter(NSe),l=s<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!l||r===void 0?a[l]:r}const SSe={decay:zC,inertia:zC,tween:Fy,keyframes:Fy,spring:P_};function cQ(t){typeof t.type=="string"&&(t.type=SSe[t.type])}class h2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const ESe=t=>t/100;class f2 extends h2{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==qs.now()&&this.tick(qs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;cQ(e);const{type:n=Fy,repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:o=0}=e;let{keyframes:l}=e;const c=n||Fy;c!==Fy&&typeof l[0]!="number"&&(this.mixKeyframes=fb(ESe,aQ(l[0],l[1])),l=[0,100]);const u=c({...e,keyframes:l});a==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=u2(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:f,repeatDelay:m,type:y,onUpdate:p,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const b=this.currentTime-u*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?b<0:b>s;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let w=this.currentTime,C=r;if(h){const g=Math.min(this.currentTime,s)/l;let T=Math.floor(g),E=g%1;!E&&g>=1&&(E=1),E===1&&T--,T=Math.min(T,h+1),!!(T%2)&&(f==="reverse"?(E=1-E,m&&(E-=m/l)):f==="mirror"&&(C=o)),w=Jo(0,1,E)*l}const S=x?{done:!1,value:d[0]}:C.next(w);a&&(S.value=a(S.value));let{done:P}=S;!x&&c!==null&&(P=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return j&&y!==zC&&(S.value=d2(d,this.options,v,this.speed)),p&&p(S.value),j&&this.finish(),S}then(e,n){return this.finished.then(e,n)}get duration(){return ra(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ra(e)}get time(){return ra(this.currentTime)}set time(e){var n;e=da(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(qs.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ra(this.currentTime))}play(){var s,a;if(this.isStopped)return;const{driver:e=cSe,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(a=(s=this.options).onPlay)==null||a.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(qs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function ASe(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const $d=t=>t*180/Math.PI,qC=t=>{const e=$d(Math.atan2(t[1],t[0]));return WC(e)},TSe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:qC,rotateZ:qC,skewX:t=>$d(Math.atan(t[1])),skewY:t=>$d(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},WC=t=>(t=t%360,t<0&&(t+=360),t),HF=qC,KF=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),GF=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),CSe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:KF,scaleY:GF,scale:t=>(KF(t)+GF(t))/2,rotateX:t=>WC($d(Math.atan2(t[6],t[5]))),rotateY:t=>WC($d(Math.atan2(-t[2],t[0]))),rotateZ:HF,rotate:HF,skewX:t=>$d(Math.atan(t[4])),skewY:t=>$d(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function HC(t){return t.includes("scale")?1:0}function KC(t,e){if(!t||t==="none")return HC(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=CSe,s=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=TSe,s=l}if(!s)return HC(e);const a=r[e],o=s[1].split(",").map(ISe);return typeof a=="function"?a(o):o[a]}const PSe=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return KC(n,e)};function ISe(t){return parseFloat(t.trim())}const Xp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Zp=new Set(Xp),YF=t=>t===Qp||t===it,kSe=new Set(["x","y","z"]),RSe=Xp.filter(t=>!kSe.has(t));function OSe(t){const e=[];return RSe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const su={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>KC(e,"x"),y:(t,{transform:e})=>KC(e,"y")};su.translateX=su.x;su.translateY=su.y;const ah=new Set;let GC=!1,YC=!1,QC=!1;function uQ(){if(YC){const t=Array.from(ah).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=OSe(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,o])=>{var l;(l=r.getValue(a))==null||l.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}YC=!1,GC=!1,ah.forEach(t=>t.complete(QC)),ah.clear()}function dQ(){ah.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(YC=!0)})}function DSe(){QC=!0,dQ(),uQ(),QC=!1}class m2{constructor(e,n,r,s,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ah.add(this),GC||(GC=!0,Mn.read(dQ),Mn.resolveKeyframes(uQ))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const a=s==null?void 0:s.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const l=r.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),s&&a===void 0&&s.set(e[0])}ASe(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ah.delete(this)}cancel(){this.state==="scheduled"&&(ah.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const MSe=t=>t.startsWith("--");function LSe(t,e,n){MSe(e)?t.style.setProperty(e,n):t.style[e]=n}const $Se=n2(()=>window.ScrollTimeline!==void 0),FSe={};function VSe(t,e){const n=n2(t);return()=>FSe[e]??n()}const hQ=VSe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),gy=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,QF={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:gy([0,.65,.55,1]),circOut:gy([.55,0,1,.45]),backIn:gy([.31,.01,.66,-.59]),backOut:gy([.33,1.53,.69,.99])};function fQ(t,e){if(t)return typeof t=="function"?hQ()?oQ(t,e):"ease-out":QY(t)?gy(t):Array.isArray(t)?t.map(n=>fQ(n,e)||QF.easeOut):QF[t]}function BSe(t,e,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:o="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[e]:n};c&&(d.offset=c);const h=fQ(l,s);Array.isArray(h)&&(d.easing=h);const f={delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),t.animate(d,f)}function mQ(t){return typeof t=="function"&&"applyToOptions"in t}function USe({type:t,...e}){return mQ(t)&&hQ()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class pQ extends h2{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=e,Xm(typeof e.type!="string",`Mini animate() doesn't support "type" as a string.`,"mini-spring");const u=USe(e);this.animation=BSe(n,r,s,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const d=d2(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):LSe(n,r,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var n,r,s;const e=(n=this.options)==null?void 0:n.element;!this.isPseudoElement&&(e!=null&&e.isConnected)&&((s=(r=this.animation).commitStyles)==null||s.call(r))}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return ra(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ra(e)}get time(){return ra(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=da(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&$Se()?(this.animation.timeline=e,ua):n(this)}}const gQ={anticipate:HY,backInOut:WY,circInOut:GY};function zSe(t){return t in gQ}function qSe(t){typeof t.ease=="string"&&zSe(t.ease)&&(t.ease=gQ[t.ease])}const zE=10;class WSe extends pQ{constructor(e){qSe(e),cQ(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:a,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new f2({...o,autoplay:!1}),c=Math.max(zE,qs.now()-this.startTime),u=Jo(0,zE,c-zE);n.setWithVelocity(l.sample(Math.max(0,c-u)).value,l.sample(c).value,u),l.stop()}}const XF=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Vu.test(t)||t==="0")&&!t.startsWith("url("));function HSe(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function KSe(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],o=XF(s,e),l=XF(a,e);return oS(o===l,`You are trying to animate ${e} from "${s}" to "${a}". "${o?a:s}" is not an animatable value.`,"value-not-animatable"),!o||!l?!1:HSe(t)||(n==="spring"||mQ(n))&&r}function XC(t){t.duration=0,t.type="keyframes"}const GSe=new Set(["opacity","clipPath","filter","transform"]),YSe=n2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function QSe(t){var d;const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:a,type:o}=t;if(!(((d=e==null?void 0:e.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return YSe()&&n&&GSe.has(n)&&(n!=="transform"||!u)&&!c&&!r&&s!=="mirror"&&a!==0&&o!=="inertia"}const XSe=40;class ZSe extends h2{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:o="loop",keyframes:l,name:c,motionValue:u,element:d,...h}){var y;super(),this.stop=()=>{var p,v;this._animation&&(this._animation.stop(),(p=this.stopTimeline)==null||p.call(this)),(v=this.keyframeResolver)==null||v.cancel()},this.createdAt=qs.now();const f={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:o,name:c,motionValue:u,element:d,...h},m=(d==null?void 0:d.KeyframeResolver)||m2;this.keyframeResolver=new m(l,(p,v,b)=>this.onKeyframesResolved(p,v,f,!b),c,u,d),(y=this.keyframeResolver)==null||y.scheduleResolve()}onKeyframesResolved(e,n,r,s){var v,b;this.keyframeResolver=void 0;const{name:a,type:o,velocity:l,delay:c,isHandoff:u,onUpdate:d}=r;this.resolvedAt=qs.now(),KSe(e,a,o,l)||((Ql.instantAnimations||!c)&&(d==null||d(d2(e,r,n))),e[0]=e[e.length-1],XC(r),r.repeat=0);const f={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>XSe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},m=!u&&QSe(f),y=(b=(v=f.motionValue)==null?void 0:v.owner)==null?void 0:b.current,p=m?new WSe({...f,element:y}):new f2(f);p.finished.then(()=>{this.notifyFinished()}).catch(ua),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),DSe()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function yQ(t,e,n,r=0,s=1){const a=Array.from(t).sort((u,d)=>u.sortNodePosition(d)).indexOf(e),o=t.size,l=(o-1)*r;return typeof n=="function"?n(a,o):s===1?a*r:l-a*r}const JSe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function e1e(t){const e=JSe.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}const t1e=4;function vQ(t,e,n=1){Xm(n<=t1e,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`,"max-css-var-depth");const[r,s]=e1e(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const o=a.trim();return LY(o)?parseFloat(o):o}return a2(s)?vQ(s,e,n+1):s}const n1e={type:"spring",stiffness:500,damping:25,restSpeed:10},r1e=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),s1e={type:"keyframes",duration:.8},i1e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},a1e=(t,{keyframes:e})=>e.length>2?s1e:Zp.has(t)?t.startsWith("scale")?r1e(e[1]):n1e:i1e,o1e=t=>t!==null;function l1e(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(o1e),a=e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}function xQ(t,e){if(t!=null&&t.inherit&&e){const{inherit:n,...r}=t;return{...e,...r}}return t}function p2(t,e){const n=(t==null?void 0:t[e])??(t==null?void 0:t.default)??t;return n!==t?xQ(n,t):n}function c1e({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const g2=(t,e,n,r={},s,a)=>o=>{const l=p2(r,t)||{},c=l.delay||r.delay||0;let{elapsed:u=0}=r;u=u-da(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-u,onUpdate:f=>{e.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:a?void 0:s};c1e(l)||Object.assign(d,a1e(t,d)),d.duration&&(d.duration=da(d.duration)),d.repeatDelay&&(d.repeatDelay=da(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(XC(d),d.delay===0&&(h=!0)),(Ql.instantAnimations||Ql.skipAnimations||s!=null&&s.shouldSkipAnimations)&&(h=!0,XC(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,h&&!a&&e.get()!==void 0){const f=l1e(d.keyframes,l);if(f!==void 0){Mn.update(()=>{d.onUpdate(f),d.onComplete()});return}}return l.isSync?new f2(d):new ZSe(d)};function ZF(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function y2(t,e,n,r){if(typeof e=="function"){const[s,a]=ZF(r);e=e(n!==void 0?n:t.custom,s,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,a]=ZF(r);e=e(n!==void 0?n:t.custom,s,a)}return e}function fm(t,e,n){const r=t.getProps();return y2(r,e,n!==void 0?n:r.custom,t)}const bQ=new Set(["width","height","top","left","right","bottom",...Xp]),JF=30,u1e=t=>!isNaN(parseFloat(t));class d1e{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var a;const s=qs.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=qs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=u1e(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new r2);const r=this.events[e].add(n);return e==="change"?()=>{r(),Mn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=qs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>JF)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,JF);return VY(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Zm(t,e){return new d1e(t,e)}const ZC=t=>Array.isArray(t);function h1e(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Zm(n))}function f1e(t){return ZC(t)?t[t.length-1]||0:t}function m1e(t,e){const n=fm(t,e);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const o in a){const l=f1e(a[o]);h1e(t,o,l)}}const Is=t=>!!(t&&t.getVelocity);function p1e(t){return!!(Is(t)&&t.add)}function JC(t,e){const n=t.getValue("willChange");if(p1e(n))return n.add(e);if(!n&&Ql.WillChange){const r=new Ql.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function v2(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const g1e="framerAppearId",wQ="data-"+v2(g1e);function _Q(t){return t.props[wQ]}function y1e({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function jQ(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:a,transitionEnd:o,...l}=e;const c=t.getDefaultTransition();a=a?xQ(a,c):c;const u=a==null?void 0:a.reduceMotion;r&&(a=r);const d=[],h=s&&t.animationState&&t.animationState.getState()[s];for(const f in l){const m=t.getValue(f,t.latestValues[f]??null),y=l[f];if(y===void 0||h&&y1e(h,f))continue;const p={delay:n,...p2(a||{},f)},v=m.get();if(v!==void 0&&!m.isAnimating&&!Array.isArray(y)&&y===v&&!p.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const C=_Q(t);if(C){const S=window.MotionHandoffAnimation(C,f,Mn);S!==null&&(p.startTime=S,b=!0)}}JC(t,f);const x=u??t.shouldReduceMotion;m.start(g2(f,m,y,x&&bQ.has(f)?{type:!1}:p,t,b));const w=m.animation;w&&d.push(w)}if(o){const f=()=>Mn.update(()=>{o&&m1e(t,o)});d.length?Promise.all(d).then(f):f()}return d}function eP(t,e,n={}){var c;const r=fm(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(jQ(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=s;return v1e(t,e,u,d,h,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,d]=l==="beforeChildren"?[a,o]:[o,a];return u().then(()=>d())}else return Promise.all([a(),o(n.delay)])}function v1e(t,e,n=0,r=0,s=0,a=1,o){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(eP(c,e,{...o,delay:n+(typeof r=="function"?0:r)+yQ(t.variantChildren,c,r,s,a)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function x1e(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(a=>eP(t,a,n));r=Promise.all(s)}else if(typeof e=="string")r=eP(t,e,n);else{const s=typeof e=="function"?fm(t,e,n.custom):e;r=Promise.all(jQ(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const b1e={test:t=>t==="auto",parse:t=>t},NQ=t=>e=>e.test(t),SQ=[Qp,it,Wo,Ac,KNe,HNe,b1e],eV=t=>SQ.find(NQ(t));function w1e(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||FY(t):!0}const _1e=new Set(["brightness","contrast","saturate","opacity"]);function j1e(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(o2)||[];if(!r)return t;const s=n.replace(r,"");let a=_1e.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+s+")"}const N1e=/\b([a-z-]*)\(.*?\)/gu,tP={...Vu,getAnimatableNone:t=>{const e=t.match(N1e);return e?e.map(j1e).join(" "):t}},tV={...Qp,transform:Math.round},S1e={rotate:Ac,rotateX:Ac,rotateY:Ac,rotateZ:Ac,scale:v0,scaleX:v0,scaleY:v0,scaleZ:v0,skew:Ac,skewX:Ac,skewY:Ac,distance:it,translateX:it,translateY:it,translateZ:it,x:it,y:it,z:it,perspective:it,transformPerspective:it,opacity:Mv,originX:BF,originY:BF,originZ:it},x2={borderWidth:it,borderTopWidth:it,borderRightWidth:it,borderBottomWidth:it,borderLeftWidth:it,borderRadius:it,borderTopLeftRadius:it,borderTopRightRadius:it,borderBottomRightRadius:it,borderBottomLeftRadius:it,width:it,maxWidth:it,height:it,maxHeight:it,top:it,right:it,bottom:it,left:it,inset:it,insetBlock:it,insetBlockStart:it,insetBlockEnd:it,insetInline:it,insetInlineStart:it,insetInlineEnd:it,padding:it,paddingTop:it,paddingRight:it,paddingBottom:it,paddingLeft:it,paddingBlock:it,paddingBlockStart:it,paddingBlockEnd:it,paddingInline:it,paddingInlineStart:it,paddingInlineEnd:it,margin:it,marginTop:it,marginRight:it,marginBottom:it,marginLeft:it,marginBlock:it,marginBlockStart:it,marginBlockEnd:it,marginInline:it,marginInlineStart:it,marginInlineEnd:it,fontSize:it,backgroundPositionX:it,backgroundPositionY:it,...S1e,zIndex:tV,fillOpacity:Mv,strokeOpacity:Mv,numOctaves:tV},E1e={...x2,color:Ar,backgroundColor:Ar,outlineColor:Ar,fill:Ar,stroke:Ar,borderColor:Ar,borderTopColor:Ar,borderRightColor:Ar,borderBottomColor:Ar,borderLeftColor:Ar,filter:tP,WebkitFilter:tP},EQ=t=>E1e[t];function AQ(t,e){let n=EQ(t);return n!==tP&&(n=Vu),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const A1e=new Set(["auto","none","0"]);function T1e(t,e,n){let r=0,s;for(;r<t.length&&!s;){const a=t[r];typeof a=="string"&&!A1e.has(a)&&Lv(a).values.length&&(s=t[r]),r++}if(s&&n)for(const a of e)t[a]=AQ(n,s)}class C1e extends m2{constructor(e,n,r,s,a){super(e,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let h=e[d];if(typeof h=="string"&&(h=h.trim(),a2(h))){const f=vQ(h,n.current);f!==void 0&&(e[d]=f),d===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!bQ.has(r)||e.length!==2)return;const[s,a]=e,o=eV(s),l=eV(a),c=VF(s),u=VF(a);if(c!==u&&su[r]){this.needsMeasurement=!0;return}if(o!==l)if(YF(o)&&YF(l))for(let d=0;d<e.length;d++){const h=e[d];typeof h=="string"&&(e[d]=parseFloat(h))}else su[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||w1e(e[s]))&&r.push(s);r.length&&T1e(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=su[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var l;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=su[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}const P1e=new Set(["opacity","clipPath","filter","transform"]);function TQ(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){const s=document.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t).filter(r=>r!=null)}const CQ=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function nP(t){return $Y(t)&&"offsetHeight"in t}const{schedule:b2,cancel:Vtt}=XY(queueMicrotask,!1),Ia={x:!1,y:!1};function PQ(){return Ia.x||Ia.y}function I1e(t){return t==="x"||t==="y"?Ia[t]?null:(Ia[t]=!0,()=>{Ia[t]=!1}):Ia.x||Ia.y?null:(Ia.x=Ia.y=!0,()=>{Ia.x=Ia.y=!1})}function IQ(t,e){const n=TQ(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function k1e(t){return!(t.pointerType==="touch"||PQ())}function R1e(t,e,n={}){const[r,s,a]=IQ(t,n);return r.forEach(o=>{let l=!1,c=!1,u;const d=()=>{o.removeEventListener("pointerleave",y)},h=v=>{u&&(u(v),u=void 0),d()},f=v=>{l=!1,window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",f),c&&(c=!1,h(v))},m=()=>{l=!0,window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",f,s)},y=v=>{if(v.pointerType!=="touch"){if(l){c=!0;return}h(v)}},p=v=>{if(!k1e(v))return;c=!1;const b=e(o,v);typeof b=="function"&&(u=b,o.addEventListener("pointerleave",y,s))};o.addEventListener("pointerenter",p,s),o.addEventListener("pointerdown",m,s)}),a}const kQ=(t,e)=>e?t===e?!0:kQ(t,e.parentElement):!1,w2=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,O1e=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function D1e(t){return O1e.has(t.tagName)||t.isContentEditable===!0}const M1e=new Set(["INPUT","SELECT","TEXTAREA"]);function L1e(t){return M1e.has(t.tagName)||t.isContentEditable===!0}const dw=new WeakSet;function nV(t){return e=>{e.key==="Enter"&&t(e)}}function qE(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const $1e=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=nV(()=>{if(dw.has(n))return;qE(n,"down");const s=nV(()=>{qE(n,"up")}),a=()=>qE(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function rV(t){return w2(t)&&!PQ()}const sV=new WeakSet;function F1e(t,e,n={}){const[r,s,a]=IQ(t,n),o=l=>{const c=l.currentTarget;if(!rV(l)||sV.has(l))return;dw.add(c),n.stopPropagation&&sV.add(l);const u=e(c,l),d=(m,y)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),dw.has(c)&&dw.delete(c),rV(m)&&typeof u=="function"&&u(m,{success:y})},h=m=>{d(m,c===window||c===document||n.useGlobalTarget||kQ(c,m.target))},f=m=>{d(m,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,s),nP(l)&&(l.addEventListener("focus",u=>$1e(u,s)),!D1e(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),a}function _2(t){return $Y(t)&&"ownerSVGElement"in t}const hw=new WeakMap;let Tc;const RQ=(t,e,n)=>(r,s)=>s&&s[0]?s[0][t+"Size"]:_2(r)&&"getBBox"in r?r.getBBox()[e]:r[n],V1e=RQ("inline","width","offsetWidth"),B1e=RQ("block","height","offsetHeight");function U1e({target:t,borderBoxSize:e}){var n;(n=hw.get(t))==null||n.forEach(r=>{r(t,{get width(){return V1e(t,e)},get height(){return B1e(t,e)}})})}function z1e(t){t.forEach(U1e)}function q1e(){typeof ResizeObserver>"u"||(Tc=new ResizeObserver(z1e))}function W1e(t,e){Tc||q1e();const n=TQ(t);return n.forEach(r=>{let s=hw.get(r);s||(s=new Set,hw.set(r,s)),s.add(e),Tc==null||Tc.observe(r)}),()=>{n.forEach(r=>{const s=hw.get(r);s==null||s.delete(e),s!=null&&s.size||Tc==null||Tc.unobserve(r)})}}const fw=new Set;let Uf;function H1e(){Uf=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};fw.forEach(e=>e(t))},window.addEventListener("resize",Uf)}function K1e(t){return fw.add(t),Uf||H1e(),()=>{fw.delete(t),!fw.size&&typeof Uf=="function"&&(window.removeEventListener("resize",Uf),Uf=void 0)}}function iV(t,e){return typeof t=="function"?K1e(t):W1e(t,e)}function G1e(t){return _2(t)&&t.tagName==="svg"}const Y1e=[...SQ,Ar,Vu],Q1e=t=>Y1e.find(NQ(t)),aV=()=>({translate:0,scale:1,origin:0,originPoint:0}),zf=()=>({x:aV(),y:aV()}),oV=()=>({min:0,max:0}),Lr=()=>({x:oV(),y:oV()}),X1e=new WeakMap;function lS(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function $v(t){return typeof t=="string"||Array.isArray(t)}const j2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],N2=["initial",...j2];function cS(t){return lS(t.animate)||N2.some(e=>$v(t[e]))}function OQ(t){return!!(cS(t)||t.variants)}function Z1e(t,e,n){for(const r in e){const s=e[r],a=n[r];if(Is(s))t.addValue(r,s);else if(Is(a))t.addValue(r,Zm(s,{owner:t}));else if(a!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,Zm(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const rP={current:null},DQ={current:!1},J1e=typeof window<"u";function eEe(){if(DQ.current=!0,!!J1e)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>rP.current=t.matches;t.addEventListener("change",e),e()}else rP.current=!1}const lV=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let I_={};function MQ(t){I_=t}function tEe(){return I_}class nEe{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,skipAnimations:a,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=m2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=qs.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Mn.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=l;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.skipAnimationsConfig=a,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=cS(n),this.isVariantNode=OQ(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in f){const y=f[m];u[m]!==void 0&&Is(y)&&y.set(u[m])}}mount(e){var n,r;if(this.hasBeenMounted)for(const s in this.initialValues)(n=this.values.get(s))==null||n.jump(this.initialValues[s]),this.latestValues[s]=this.initialValues[s];this.current=e,X1e.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,a)=>this.bindToMotionValue(a,s)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(DQ.current||eEe(),this.shouldReduceMotion=rP.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var e;this.projection&&this.projection.unmount(),Fu(this.notifyUpdate),Fu(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),n.accelerate&&P1e.has(e)&&this.current instanceof HTMLElement){const{factory:o,keyframes:l,times:c,ease:u,duration:d}=n.accelerate,h=new pQ({element:this.current,name:e,keyframes:l,times:c,ease:u,duration:da(d)}),f=o(h);this.valueSubscriptions.set(e,()=>{f(),h.cancel()});return}const r=Zp.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Mn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in I_){const n=I_[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Lr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<lV.length;r++){const s=lV[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,o=e[a];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=Z1e(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Zm(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(LY(r)||FY(r))?r=parseFloat(r):!Q1e(r)&&Vu.test(n)&&(r=AQ(e,n)),this.setBaseTarget(e,Is(r)?r.get():r)),Is(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var a;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=y2(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Is(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new r2),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){b2.render(this.render)}}class LQ extends nEe{constructor(){super(...arguments),this.KeyframeResolver=C1e}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const r=e.style;return r?r[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Is(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class ed{constructor(e){this.isMounted=!1,this.node=e}update(){}}function $Q({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function rEe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function sEe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function WE(t){return t===void 0||t===1}function sP({scale:t,scaleX:e,scaleY:n}){return!WE(t)||!WE(e)||!WE(n)}function Ad(t){return sP(t)||FQ(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function FQ(t){return cV(t.x)||cV(t.y)}function cV(t){return t&&t!=="0%"}function k_(t,e,n){const r=t-n,s=e*r;return n+s}function uV(t,e,n,r,s){return s!==void 0&&(t=k_(t,s,r)),k_(t,n,r)+e}function iP(t,e=0,n=1,r,s){t.min=uV(t.min,e,n,r,s),t.max=uV(t.max,e,n,r,s)}function VQ(t,{x:e,y:n}){iP(t.x,e.translate,e.scale,e.originPoint),iP(t.y,n.translate,n.scale,n.originPoint)}const dV=.999999999999,hV=1.0000000000001;function iEe(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let a,o;for(let l=0;l<s;l++){a=n[l],o=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Wf(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,VQ(t,o)),r&&Ad(a.latestValues)&&Wf(t,a.latestValues))}e.x<hV&&e.x>dV&&(e.x=1),e.y<hV&&e.y>dV&&(e.y=1)}function qf(t,e){t.min=t.min+e,t.max=t.max+e}function fV(t,e,n,r,s=.5){const a=nr(t.min,t.max,s);iP(t,e,n,a,r)}function Wf(t,e){fV(t.x,e.x,e.scaleX,e.scale,e.originX),fV(t.y,e.y,e.scaleY,e.scale,e.originY)}function BQ(t,e){return $Q(sEe(t.getBoundingClientRect(),e))}function aEe(t,e,n){const r=BQ(t,n),{scroll:s}=e;return s&&(qf(r.x,s.offset.x),qf(r.y,s.offset.y)),r}const oEe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},lEe=Xp.length;function cEe(t,e,n){let r="",s=!0;for(let a=0;a<lEe;a++){const o=Xp[a],l=t[o];if(l===void 0)continue;let c=!0;if(typeof l=="number")c=l===(o.startsWith("scale")?1:0);else{const u=parseFloat(l);c=o.startsWith("scale")?u===1:u===0}if(!c||n){const u=CQ(l,x2[o]);if(!c){s=!1;const d=oEe[o]||o;r+=`${d}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function S2(t,e,n){const{style:r,vars:s,transformOrigin:a}=t;let o=!1,l=!1;for(const c in e){const u=e[c];if(Zp.has(c)){o=!0;continue}else if(JY(c)){s[c]=u;continue}else{const d=CQ(u,x2[c]);c.startsWith("origin")?(l=!0,a[c]=d):r[c]=d}}if(e.transform||(o||n?r.transform=cEe(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=a;r.transformOrigin=`${c} ${u} ${d}`}}function UQ(t,{style:e,vars:n},r,s){const a=t.style;let o;for(o in e)a[o]=e[o];s==null||s.applyProjectionStyles(a,r);for(o in n)a.setProperty(o,n[o])}function mV(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Vg={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(it.test(t))t=parseFloat(t);else return t;const n=mV(t,e.target.x),r=mV(t,e.target.y);return`${n}% ${r}%`}},uEe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Vu.parse(t);if(s.length>5)return r;const a=Vu.createTransformer(t),o=typeof s[0]!="number"?1:0,l=n.x.scale*e.x,c=n.y.scale*e.y;s[0+o]/=l,s[1+o]/=c;const u=nr(l,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),a(s)}},aP={borderRadius:{...Vg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Vg,borderTopRightRadius:Vg,borderBottomLeftRadius:Vg,borderBottomRightRadius:Vg,boxShadow:uEe};function zQ(t,{layout:e,layoutId:n}){return Zp.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!aP[t]||t==="opacity")}function E2(t,e,n){var o;const r=t.style,s=e==null?void 0:e.style,a={};if(!r)return a;for(const l in r)(Is(r[l])||s&&Is(s[l])||zQ(l,t)||((o=n==null?void 0:n.getValue(l))==null?void 0:o.liveStyle)!==void 0)&&(a[l]=r[l]);return a}function dEe(t){return window.getComputedStyle(t)}class hEe extends LQ{constructor(){super(...arguments),this.type="html",this.renderInstance=UQ}readValueFromInstance(e,n){var r;if(Zp.has(n))return(r=this.projection)!=null&&r.isProjecting?HC(n):PSe(e,n);{const s=dEe(e),a=(JY(n)?s.getPropertyValue(n):s[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return BQ(e,n)}build(e,n,r){S2(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return E2(e,n,r)}}const fEe={offset:"stroke-dashoffset",array:"stroke-dasharray"},mEe={offset:"strokeDashoffset",array:"strokeDasharray"};function pEe(t,e,n=1,r=0,s=!0){t.pathLength=1;const a=s?fEe:mEe;t[a.offset]=`${-r}`,t[a.array]=`${e} ${n}`}const gEe=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function qQ(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:o=0,...l},c,u,d){if(S2(t,l,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:f}=t;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox);for(const m of gEe)h[m]!==void 0&&(f[m]=h[m],delete h[m]);e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&pEe(h,s,a,o,!1)}const WQ=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),HQ=t=>typeof t=="string"&&t.toLowerCase()==="svg";function yEe(t,e,n,r){UQ(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(WQ.has(s)?s:v2(s),e.attrs[s])}function KQ(t,e,n){const r=E2(t,e,n);for(const s in t)if(Is(t[s])||Is(e[s])){const a=Xp.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=t[s]}return r}class vEe extends LQ{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Lr}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Zp.has(n)){const r=EQ(n);return r&&r.default||0}return n=WQ.has(n)?n:v2(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return KQ(e,n,r)}build(e,n,r){qQ(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){yEe(e,n,r,s)}mount(e){this.isSVGTag=HQ(e.tagName),super.mount(e)}}const xEe=N2.length;function GQ(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?GQ(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<xEe;n++){const r=N2[n],s=t.props[r];($v(s)||s===!1)&&(e[r]=s)}return e}function YQ(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const bEe=[...j2].reverse(),wEe=j2.length;function _Ee(t){return e=>Promise.all(e.map(({animation:n,options:r})=>x1e(t,n,r)))}function jEe(t){let e=_Ee(t),n=pV(),r=!0;const s=c=>(u,d)=>{var f;const h=fm(t,d,c==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:m,transitionEnd:y,...p}=h;u={...u,...p,...y}}return u};function a(c){e=c(t)}function o(c){const{props:u}=t,d=GQ(t.parent)||{},h=[],f=new Set;let m={},y=1/0;for(let v=0;v<wEe;v++){const b=bEe[v],x=n[b],w=u[b]!==void 0?u[b]:d[b],C=$v(w),S=b===c?x.isActive:null;S===!1&&(y=v);let P=w===d[b]&&w!==u[b]&&C;if(P&&r&&t.manuallyAnimateOnMount&&(P=!1),x.protectedKeys={...m},!x.isActive&&S===null||!w&&!x.prevProp||lS(w)||typeof w=="boolean")continue;if(b==="exit"&&x.isActive&&S!==!0){x.prevResolvedValues&&(m={...m,...x.prevResolvedValues});continue}const j=NEe(x.prevProp,w);let g=j||b===c&&x.isActive&&!P&&C||v>y&&C,T=!1;const E=Array.isArray(w)?w:[w];let A=E.reduce(s(b),{});S===!1&&(A={});const{prevResolvedValues:I={}}=x,k={...I,...A},L=M=>{g=!0,f.has(M)&&(T=!0,f.delete(M)),x.needsAnimating[M]=!0;const $=t.getValue(M);$&&($.liveStyle=!1)};for(const M in k){const $=A[M],O=I[M];if(m.hasOwnProperty(M))continue;let W=!1;ZC($)&&ZC(O)?W=!YQ($,O):W=$!==O,W?$!=null?L(M):f.add(M):$!==void 0&&f.has(M)?L(M):x.protectedKeys[M]=!0}x.prevProp=w,x.prevResolvedValues=A,x.isActive&&(m={...m,...A}),r&&t.blockInitialAnimation&&(g=!1);const V=P&&j;g&&(!V||T)&&h.push(...E.map(M=>{const $={type:b};if(typeof M=="string"&&r&&!V&&t.manuallyAnimateOnMount&&t.parent){const{parent:O}=t,W=fm(O,M);if(O.enteringChildren&&W){const{delayChildren:Z}=W.transition||{};$.delay=yQ(O.enteringChildren,t,Z)}}return{animation:M,options:$}}))}if(f.size){const v={};if(typeof u.initial!="boolean"){const b=fm(t,Array.isArray(u.initial)?u.initial[0]:u.initial);b&&b.transition&&(v.transition=b.transition)}f.forEach(b=>{const x=t.getBaseTarget(b),w=t.getValue(b);w&&(w.liveStyle=!0),v[b]=x??null}),h.push({animation:v})}let p=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(p=!1),r=!1,p?e(h):Promise.resolve()}function l(c,u){var h;if(n[c].isActive===u)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(f=>{var m;return(m=f.animationState)==null?void 0:m.setActive(c,u)}),n[c].isActive=u;const d=o(c);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:o,setActive:l,setAnimateFunction:a,getState:()=>n,reset:()=>{n=pV()}}}function NEe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!YQ(e,t):!1}function vd(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function pV(){return{animate:vd(!0),whileInView:vd(),whileHover:vd(),whileTap:vd(),whileDrag:vd(),whileFocus:vd(),exit:vd()}}function gV(t,e){t.min=e.min,t.max=e.max}function Ca(t,e){gV(t.x,e.x),gV(t.y,e.y)}function yV(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const QQ=1e-4,SEe=1-QQ,EEe=1+QQ,XQ=.01,AEe=0-XQ,TEe=0+XQ;function Ws(t){return t.max-t.min}function CEe(t,e,n){return Math.abs(t-e)<=n}function vV(t,e,n,r=.5){t.origin=r,t.originPoint=nr(e.min,e.max,t.origin),t.scale=Ws(n)/Ws(e),t.translate=nr(n.min,n.max,t.origin)-t.originPoint,(t.scale>=SEe&&t.scale<=EEe||isNaN(t.scale))&&(t.scale=1),(t.translate>=AEe&&t.translate<=TEe||isNaN(t.translate))&&(t.translate=0)}function Vy(t,e,n,r){vV(t.x,e.x,n.x,r?r.originX:void 0),vV(t.y,e.y,n.y,r?r.originY:void 0)}function xV(t,e,n){t.min=n.min+e.min,t.max=t.min+Ws(e)}function PEe(t,e,n){xV(t.x,e.x,n.x),xV(t.y,e.y,n.y)}function bV(t,e,n){t.min=e.min-n.min,t.max=t.min+Ws(e)}function R_(t,e,n){bV(t.x,e.x,n.x),bV(t.y,e.y,n.y)}function wV(t,e,n,r,s){return t-=e,t=k_(t,1/n,r),s!==void 0&&(t=k_(t,1/s,r)),t}function IEe(t,e=0,n=1,r=.5,s,a=t,o=t){if(Wo.test(e)&&(e=parseFloat(e),e=nr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=nr(a.min,a.max,r);t===a&&(l-=e),t.min=wV(t.min,e,n,l,s),t.max=wV(t.max,e,n,l,s)}function _V(t,e,[n,r,s],a,o){IEe(t,e[n],e[r],e[s],e.scale,a,o)}const kEe=["x","scaleX","originX"],REe=["y","scaleY","originY"];function jV(t,e,n,r){_V(t.x,e,kEe,n?n.x:void 0,r?r.x:void 0),_V(t.y,e,REe,n?n.y:void 0,r?r.y:void 0)}function NV(t){return t.translate===0&&t.scale===1}function ZQ(t){return NV(t.x)&&NV(t.y)}function SV(t,e){return t.min===e.min&&t.max===e.max}function OEe(t,e){return SV(t.x,e.x)&&SV(t.y,e.y)}function EV(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function JQ(t,e){return EV(t.x,e.x)&&EV(t.y,e.y)}function AV(t){return Ws(t.x)/Ws(t.y)}function TV(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function _o(t){return[t("x"),t("y")]}function DEe(t,e,n){let r="";const s=t.x.translate/e.x,a=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||a||o)&&(r=`translate3d(${s}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:f,skewX:m,skewY:y}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),m&&(r+=`skewX(${m}deg) `),y&&(r+=`skewY(${y}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const eX=["TopLeft","TopRight","BottomLeft","BottomRight"],MEe=eX.length,CV=t=>typeof t=="string"?parseFloat(t):t,PV=t=>typeof t=="number"||it.test(t);function LEe(t,e,n,r,s,a){s?(t.opacity=nr(0,n.opacity??1,$Ee(r)),t.opacityExit=nr(e.opacity??1,0,FEe(r))):a&&(t.opacity=nr(e.opacity??1,n.opacity??1,r));for(let o=0;o<MEe;o++){const l=`border${eX[o]}Radius`;let c=IV(e,l),u=IV(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||PV(c)===PV(u)?(t[l]=Math.max(nr(CV(c),CV(u),r),0),(Wo.test(u)||Wo.test(c))&&(t[l]+="%")):t[l]=u}(e.rotate||n.rotate)&&(t.rotate=nr(e.rotate||0,n.rotate||0,r))}function IV(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const $Ee=tX(0,.5,KY),FEe=tX(.5,.95,ua);function tX(t,e,n){return r=>r<t?0:r>e?1:n(Dv(t,e,r))}function VEe(t,e,n){const r=Is(t)?t:Zm(t);return r.start(g2("",r,e,n)),r.animation}function Fv(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const BEe=(t,e)=>t.depth-e.depth;class UEe{constructor(){this.children=[],this.isDirty=!1}add(e){t2(this.children,e),this.isDirty=!0}remove(e){A_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(BEe),this.isDirty=!1,this.children.forEach(e)}}function zEe(t,e){const n=qs.now(),r=({timestamp:s})=>{const a=s-n;a>=e&&(Fu(r),t(a-e))};return Mn.setup(r,!0),()=>Fu(r)}function mw(t){return Is(t)?t.get():t}class qEe{constructor(){this.members=[]}add(e){t2(this.members,e);for(let n=this.members.length-1;n>=0;n--){const r=this.members[n];if(r===e||r===this.lead||r===this.prevLead)continue;const s=r.instance;s&&s.isConnected===!1&&r.isPresent!==!1&&!r.snapshot&&A_(this.members,r)}e.scheduleRender()}remove(e){if(A_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s],o=a.instance;if(a.isPresent!==!1&&(!o||o.isConnected!==!1)){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const s=r.options.layoutDependency,a=e.options.layoutDependency;if(!(s!==void 0&&a!==void 0&&s===a)){const c=r.instance;c&&c.isConnected===!1&&!r.snapshot||(e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:l}=e.options;l===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const pw={hasAnimatedSinceResize:!0,hasEverUpdated:!1},HE=["","X","Y","Z"],WEe=1e3;let HEe=0;function KE(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function nX(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=_Q(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Mn,!(s||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&nX(r)}function rX({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},l=e==null?void 0:e()){this.id=HEe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(YEe),this.nodes.forEach(JEe),this.nodes.forEach(eAe),this.nodes.forEach(QEe)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new UEe)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new r2),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=_2(o)&&!G1e(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let d,h=0;const f=()=>this.root.updateBlockedByResize=!1;Mn.read(()=>{h=window.innerWidth}),t(o,()=>{const m=window.innerWidth;m!==h&&(h=m,this.root.updateBlockedByResize=!0,d&&d(),d=zEe(f,250),pw.hasAnimatedSinceResize&&(pw.hasAnimatedSinceResize=!1,this.nodes.forEach(OV)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||u.getDefaultTransition()||iAe,{onLayoutAnimationStart:p,onLayoutAnimationComplete:v}=u.getProps(),b=!this.targetLayout||!JQ(this.targetLayout,m),x=!h&&f;if(this.options.layoutRoot||this.resumeFrom||x||h&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...p2(y,"layout"),onPlay:p,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(d,x)}else h||OV(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Fu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(tAe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&nX(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(kV);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(RV);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(ZEe),this.nodes.forEach(KEe),this.nodes.forEach(GEe)):this.nodes.forEach(RV),this.clearAllSnapshots();const l=qs.now();ls.delta=Jo(0,1e3/60,l-ls.timestamp),ls.timestamp=l,ls.isProcessing=!0,$E.update.process(ls),$E.preRender.process(ls),$E.render.process(ls),ls.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,b2.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(XEe),this.sharedNodes.forEach(nAe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Mn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Mn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ws(this.snapshot.measuredBox.x)&&!Ws(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Lr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!ZQ(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&this.instance&&(l||Ad(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),aAe(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return Lr();const l=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(oAe))){const{scroll:d}=this.root;d&&(qf(l.x,d.offset.x),qf(l.y,d.offset.y))}return l}removeElementScroll(o){var c;const l=Lr();if(Ca(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Ca(l,o),qf(l.x,h.offset.x),qf(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const c=Lr();Ca(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Wf(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Ad(d.latestValues)&&Wf(c,d.latestValues)}return Ad(this.latestValues)&&Wf(c,this.latestValues),c}removeTransform(o){const l=Lr();Ca(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Ad(u.latestValues))continue;sP(u.latestValues)&&u.updateSnapshot();const d=Lr(),h=u.measurePageBox();Ca(d,h),jV(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Ad(this.latestValues)&&jV(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ls.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var m;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!this.layout||!(d||h))return;this.resolvedRelativeTargetAt=ls.timestamp;const f=this.getClosestProjectingParent();f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Lr(),this.targetWithTransforms=Lr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),PEe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ca(this.target,this.layout.layoutBox),VQ(this.target,this.targetDelta)):Ca(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||sP(this.parent.latestValues)||FQ(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,l,c){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Lr(),this.relativeTargetOrigin=Lr(),R_(this.relativeTargetOrigin,l,c),Ca(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var y;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ls.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Ca(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;iEe(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Lr());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(yV(this.prevProjectionDelta.x,this.projectionDelta.x),yV(this.prevProjectionDelta.y,this.projectionDelta.y)),Vy(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!TV(this.projectionDelta.x,this.prevProjectionDelta.x)||!TV(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=zf(),this.projectionDelta=zf(),this.projectionDeltaWithTransform=zf()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=zf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=Lr(),m=c?c.source:void 0,y=this.layout?this.layout.source:void 0,p=m!==y,v=this.getStack(),b=!v||v.members.length<=1,x=!!(p&&!b&&this.options.crossfade===!0&&!this.path.some(sAe));this.animationProgress=0;let w;this.mixTargetDelta=C=>{const S=C/1e3;DV(h.x,o.x,S),DV(h.y,o.y,S),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(R_(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),rAe(this.relativeTarget,this.relativeTargetOrigin,f,S),w&&OEe(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Lr()),Ca(w,this.relativeTarget)),p&&(this.animationValues=d,LEe(d,u,this.latestValues,S,x,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Fu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Mn.update(()=>{pw.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Zm(0)),this.currentAnimation=VEe(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(WEe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&sX(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Lr();const h=Ws(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=Ws(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}Ca(l,c),Wf(l,d),Vy(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new qEe),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&KE("z",o,u,this.animationValues);for(let d=0;d<HE.length;d++)KE(`rotate${HE[d]}`,o,u,this.animationValues),KE(`skew${HE[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=mw(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=mw(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Ad(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=DEe(this.projectionDeltaWithTransform,this.treeScale,d);c&&(h=c(d,h)),o.transform=h;const{x:f,y:m}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${m.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const y in aP){if(d[y]===void 0)continue;const{correct:p,applyTo:v,isCSSVariable:b}=aP[y],x=h==="none"?d[y]:p(d[y],u);if(v){const w=v.length;for(let C=0;C<w;C++)o[v[C]]=x}else b?this.options.visualElement.renderState.vars[y]=x:o[y]=x}this.options.layoutId&&(o.pointerEvents=u===this?mw(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(kV),this.root.sharedNodes.clear()}}}function KEe(t){t.updateLayout()}function GEe(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:a}=t.options,o=e.source!==t.layout.source;a==="size"?_o(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],m=Ws(f);f.min=r[h].min,f.max=f.min+m}):sX(a,e.layoutBox,r)&&_o(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],m=Ws(r[h]);f.max=f.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const l=zf();Vy(l,r,e.layoutBox);const c=zf();o?Vy(c,t.applyTransform(s,!0),e.measuredBox):Vy(c,r,e.layoutBox);const u=!ZQ(l);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const y=Lr();R_(y,e.layoutBox,f.layoutBox);const p=Lr();R_(p,r,m.layoutBox),JQ(y,p)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=p,t.relativeTargetOrigin=y,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function YEe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function QEe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function XEe(t){t.clearSnapshot()}function kV(t){t.clearMeasurements()}function RV(t){t.isLayoutDirty=!1}function ZEe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function OV(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function JEe(t){t.resolveTargetDelta()}function eAe(t){t.calcProjection()}function tAe(t){t.resetSkewAndRotation()}function nAe(t){t.removeLeadSnapshot()}function DV(t,e,n){t.translate=nr(e.translate,0,n),t.scale=nr(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function MV(t,e,n,r){t.min=nr(e.min,n.min,r),t.max=nr(e.max,n.max,r)}function rAe(t,e,n,r){MV(t.x,e.x,n.x,r),MV(t.y,e.y,n.y,r)}function sAe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const iAe={duration:.45,ease:[.4,0,.1,1]},LV=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),$V=LV("applewebkit/")&&!LV("chrome/")?Math.round:ua;function FV(t){t.min=$V(t.min),t.max=$V(t.max)}function aAe(t){FV(t.x),FV(t.y)}function sX(t,e,n){return t==="position"||t==="preserve-aspect"&&!CEe(AV(e),AV(n),.2)}function oAe(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const lAe=rX({attachResizeListener:(t,e)=>Fv(t,"resize",e),measureScroll:()=>{var t,e;return{x:document.documentElement.scrollLeft||((t=document.body)==null?void 0:t.scrollLeft)||0,y:document.documentElement.scrollTop||((e=document.body)==null?void 0:e.scrollTop)||0}},checkIsScrollRoot:()=>!0}),GE={current:void 0},iX=rX({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!GE.current){const t=new lAe({});t.mount(window),t.setOptions({layoutScroll:!0}),GE.current=t}return GE.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),A2=_.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function VV(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function cAe(...t){return e=>{let n=!1;const r=t.map(s=>{const a=VV(s,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():VV(t[s],null)}}}}function uAe(...t){return _.useCallback(cAe(...t),t)}class dAe extends _.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const r=n.offsetParent,s=nP(r)&&r.offsetWidth||0,a=nP(r)&&r.offsetHeight||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=s-o.width-o.left,o.bottom=a-o.height-o.top}return null}componentDidUpdate(){}render(){return this.props.children}}function hAe({children:t,isPresent:e,anchorX:n,anchorY:r,root:s,pop:a}){var f;const o=_.useId(),l=_.useRef(null),c=_.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:u}=_.useContext(A2),d=((f=t.props)==null?void 0:f.ref)??(t==null?void 0:t.ref),h=uAe(l,d);return _.useInsertionEffect(()=>{const{width:m,height:y,top:p,left:v,right:b,bottom:x}=c.current;if(e||a===!1||!l.current||!m||!y)return;const w=n==="left"?`left: ${v}`:`right: ${b}`,C=r==="bottom"?`bottom: ${x}`:`top: ${p}`;l.current.dataset.motionPopId=o;const S=document.createElement("style");u&&(S.nonce=u);const P=s??document.head;return P.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${y}px !important;
            ${w}px !important;
            ${C}px !important;
          }
        `),()=>{P.contains(S)&&P.removeChild(S)}},[e]),i.jsx(dAe,{isPresent:e,childRef:l,sizeRef:c,pop:a,children:a===!1?t:_.cloneElement(t,{ref:h})})}const fAe=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:o,anchorX:l,anchorY:c,root:u})=>{const d=e2(mAe),h=_.useId();let f=!0,m=_.useMemo(()=>(f=!1,{id:h,initial:e,isPresent:n,custom:s,onExitComplete:y=>{d.set(y,!0);for(const p of d.values())if(!p)return;r&&r()},register:y=>(d.set(y,!1),()=>d.delete(y))}),[n,d,r]);return a&&f&&(m={...m}),_.useMemo(()=>{d.forEach((y,p)=>d.set(p,!1))},[n]),_.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),t=i.jsx(hAe,{pop:o==="popLayout",isPresent:n,anchorX:l,anchorY:c,root:u,children:t}),i.jsx(aS.Provider,{value:m,children:t})};function mAe(){return new Map}function aX(t=!0){const e=_.useContext(aS);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,a=_.useId();_.useEffect(()=>{if(t)return s(a)},[t]);const o=_.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,o]:[!0]}const x0=t=>t.key||"";function BV(t){const e=[];return _.Children.forEach(t,n=>{_.isValidElement(n)&&e.push(n)}),e}const oX=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:a="sync",propagate:o=!1,anchorX:l="left",anchorY:c="top",root:u})=>{const[d,h]=aX(o),f=_.useMemo(()=>BV(t),[t]),m=o&&!d?[]:f.map(x0),y=_.useRef(!0),p=_.useRef(f),v=e2(()=>new Map),b=_.useRef(new Set),[x,w]=_.useState(f),[C,S]=_.useState(f);MY(()=>{y.current=!1,p.current=f;for(let g=0;g<C.length;g++){const T=x0(C[g]);m.includes(T)?(v.delete(T),b.current.delete(T)):v.get(T)!==!0&&v.set(T,!1)}},[C,m.length,m.join("-")]);const P=[];if(f!==x){let g=[...f];for(let T=0;T<C.length;T++){const E=C[T],A=x0(E);m.includes(A)||(g.splice(T,0,E),P.push(E))}return a==="wait"&&P.length&&(g=P),S(BV(g)),w(f),null}const{forceRender:j}=_.useContext(JO);return i.jsx(i.Fragment,{children:C.map(g=>{const T=x0(g),E=o&&!d?!1:f===C||m.includes(T),A=()=>{if(b.current.has(T))return;if(b.current.add(T),v.has(T))v.set(T,!0);else return;let I=!0;v.forEach(k=>{k||(I=!1)}),I&&(j==null||j(),S(p.current),o&&(h==null||h()),r&&r())};return i.jsx(fAe,{isPresent:E,initial:!y.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:a,root:u,onExitComplete:E?void 0:A,anchorX:l,anchorY:c,children:g},T)})})},lX=_.createContext({strict:!1}),UV={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let zV=!1;function pAe(){if(zV)return;const t={};for(const e in UV)t[e]={isEnabled:n=>UV[e].some(r=>!!n[r])};MQ(t),zV=!0}function cX(){return pAe(),tEe()}function gAe(t){const e=cX();for(const n in t)e[n]={...e[n],...t[n]};MQ(e)}const yAe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function O_(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||yAe.has(t)}let uX=t=>!O_(t);function vAe(t){typeof t=="function"&&(uX=e=>e.startsWith("on")?!O_(e):t(e))}try{vAe(require("@emotion/is-prop-valid").default)}catch{}function xAe(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(uX(s)||n===!0&&O_(s)||!e&&!O_(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const uS=_.createContext({});function bAe(t,e){if(cS(t)){const{initial:n,animate:r}=t;return{initial:n===!1||$v(n)?n:void 0,animate:$v(r)?r:void 0}}return t.inherit!==!1?e:{}}function wAe(t){const{initial:e,animate:n}=bAe(t,_.useContext(uS));return _.useMemo(()=>({initial:e,animate:n}),[qV(e),qV(n)])}function qV(t){return Array.isArray(t)?t.join(" "):t}const T2=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function dX(t,e,n){for(const r in e)!Is(e[r])&&!zQ(r,n)&&(t[r]=e[r])}function _Ae({transformTemplate:t},e){return _.useMemo(()=>{const n=T2();return S2(n,e,t),Object.assign({},n.vars,n.style)},[e])}function jAe(t,e){const n=t.style||{},r={};return dX(r,n,t),Object.assign(r,_Ae(t,e)),r}function NAe(t,e){const n={},r=jAe(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const hX=()=>({...T2(),attrs:{}});function SAe(t,e,n,r){const s=_.useMemo(()=>{const a=hX();return qQ(a,e,HQ(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};dX(a,t.style,t),s.style={...a,...s.style}}return s}const EAe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function C2(t){return typeof t!="string"||t.includes("-")?!1:!!(EAe.indexOf(t)>-1||/[A-Z]/u.test(t))}function AAe(t,e,n,{latestValues:r},s,a=!1,o){const c=(o??C2(t)?SAe:NAe)(e,r,s,t),u=xAe(e,typeof t=="string",a),d=t!==_.Fragment?{...u,...c,ref:n}:{},{children:h}=e,f=_.useMemo(()=>Is(h)?h.get():h,[h]);return _.createElement(t,{...d,children:f})}function TAe({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:CAe(n,r,s,t),renderState:e()}}function CAe(t,e,n,r){const s={},a=r(t,{});for(const f in a)s[f]=mw(a[f]);let{initial:o,animate:l}=t;const c=cS(t),u=OQ(t);e&&u&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?l:o;if(h&&typeof h!="boolean"&&!lS(h)){const f=Array.isArray(h)?h:[h];for(let m=0;m<f.length;m++){const y=y2(t,f[m]);if(y){const{transitionEnd:p,transition:v,...b}=y;for(const x in b){let w=b[x];if(Array.isArray(w)){const C=d?w.length-1:0;w=w[C]}w!==null&&(s[x]=w)}for(const x in p)s[x]=p[x]}}}return s}const fX=t=>(e,n)=>{const r=_.useContext(uS),s=_.useContext(aS),a=()=>TAe(t,e,r,s);return n?a():e2(a)},PAe=fX({scrapeMotionValuesFromProps:E2,createRenderState:T2}),IAe=fX({scrapeMotionValuesFromProps:KQ,createRenderState:hX}),kAe=Symbol.for("motionComponentSymbol");function RAe(t,e,n){const r=_.useRef(n);_.useInsertionEffect(()=>{r.current=n});const s=_.useRef(null);return _.useCallback(a=>{var l;a&&((l=t.onMount)==null||l.call(t,a)),e&&(a?e.mount(a):e.unmount());const o=r.current;if(typeof o=="function")if(a){const c=o(a);typeof c=="function"&&(s.current=c)}else s.current?(s.current(),s.current=null):o(a);else o&&(o.current=a)},[e])}const mX=_.createContext({});function Ef(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function OAe(t,e,n,r,s,a){var w,C;const{visualElement:o}=_.useContext(uS),l=_.useContext(lX),c=_.useContext(aS),u=_.useContext(A2),d=u.reducedMotion,h=u.skipAnimations,f=_.useRef(null),m=_.useRef(!1);r=r||l.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d,skipAnimations:h,isSVG:a}),m.current&&f.current&&(f.current.manuallyAnimateOnMount=!0));const y=f.current,p=_.useContext(mX);y&&!y.projection&&s&&(y.type==="html"||y.type==="svg")&&DAe(f.current,n,s,p);const v=_.useRef(!1);_.useInsertionEffect(()=>{y&&v.current&&y.update(n,c)});const b=n[wQ],x=_.useRef(!!b&&!((w=window.MotionHandoffIsComplete)!=null&&w.call(window,b))&&((C=window.MotionHasOptimisedAnimation)==null?void 0:C.call(window,b)));return MY(()=>{m.current=!0,y&&(v.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),x.current&&y.animationState&&y.animationState.animateChanges())}),_.useEffect(()=>{y&&(!x.current&&y.animationState&&y.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var S;(S=window.MotionHandoffMarkAsComplete)==null||S.call(window,b)}),x.current=!1),y.enteringChildren=void 0)}),y}function DAe(t,e,n,r){const{layoutId:s,layout:a,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:pX(t.parent)),t.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!o||l&&Ef(l),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:u})}function pX(t){if(t)return t.options.allowProjection!==!1?t.projection:pX(t.parent)}function YE(t,{forwardMotionProps:e=!1,type:n}={},r,s){r&&gAe(r);const a=n?n==="svg":C2(t),o=a?IAe:PAe;function l(u,d){let h;const f={..._.useContext(A2),...u,layoutId:MAe(u)},{isStatic:m}=f,y=wAe(u),p=o(u,m);if(!m&&DY){LAe();const v=$Ae(f);h=v.MeasureLayout,y.visualElement=OAe(t,p,f,s,v.ProjectionNode,a)}return i.jsxs(uS.Provider,{value:y,children:[h&&y.visualElement?i.jsx(h,{visualElement:y.visualElement,...f}):null,AAe(t,u,RAe(p,y.visualElement,d),p,m,e,a)]})}l.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=_.forwardRef(l);return c[kAe]=t,c}function MAe({layoutId:t}){const e=_.useContext(JO).id;return e&&t!==void 0?e+"-"+t:t}function LAe(t,e){_.useContext(lX).strict}function $Ae(t){const e=cX(),{drag:n,layout:r}=e;if(!n&&!r)return{};const s={...n,...r};return{MeasureLayout:n!=null&&n.isEnabled(t)||r!=null&&r.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function FAe(t,e){if(typeof Proxy>"u")return YE;const n=new Map,r=(a,o)=>YE(a,o,t,e),s=(a,o)=>r(a,o);return new Proxy(s,{get:(a,o)=>o==="create"?r:(n.has(o)||n.set(o,YE(o,void 0,t,e)),n.get(o))})}const VAe=(t,e)=>e.isSVG??C2(t)?new vEe(e):new hEe(e,{allowProjection:t!==_.Fragment});class BAe extends ed{constructor(e){super(e),e.animationState||(e.animationState=jEe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();lS(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let UAe=0;class zAe extends ed{constructor(){super(...arguments),this.id=UAe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const qAe={animation:{Feature:BAe},exit:{Feature:zAe}};function gb(t){return{point:{x:t.pageX,y:t.pageY}}}const WAe=t=>e=>w2(e)&&t(e,gb(e));function By(t,e,n,r){return Fv(t,e,WAe(n),r)}const gX=({current:t})=>t?t.ownerDocument.defaultView:null,WV=(t,e)=>Math.abs(t-e);function HAe(t,e){const n=WV(t.x,e.x),r=WV(t.y,e.y);return Math.sqrt(n**2+r**2)}const HV=new Set(["auto","scroll"]);class yX{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:o=3,element:l}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=m=>{this.handleScroll(m.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=XE(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,p=HAe(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!p)return;const{point:v}=m,{timestamp:b}=ls;this.history.push({...v,timestamp:b});const{onStart:x,onMove:w}=this.handlers;y||(x&&x(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,m)},this.handlePointerMove=(m,y)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=QE(y,this.transformPagePoint),Mn.update(this.updatePoint,!0)},this.handlePointerUp=(m,y)=>{this.end();const{onEnd:p,onSessionEnd:v,resumeAnimation:b}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=XE(m.type==="pointercancel"?this.lastMoveEventInfo:QE(y,this.transformPagePoint),this.history);this.startEvent&&p&&p(m,x),v&&v(m,x)},!w2(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=s||window;const c=gb(e),u=QE(c,this.transformPagePoint),{point:d}=u,{timestamp:h}=ls;this.history=[{...d,timestamp:h}];const{onSessionStart:f}=n;f&&f(e,XE(u,this.history)),this.removeListeners=fb(By(this.contextWindow,"pointermove",this.handlePointerMove),By(this.contextWindow,"pointerup",this.handlePointerUp),By(this.contextWindow,"pointercancel",this.handlePointerUp)),l&&this.startScrollTracking(l)}startScrollTracking(e){let n=e.parentElement;for(;n;){const r=getComputedStyle(n);(HV.has(r.overflowX)||HV.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const r=e===window,s=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},a={x:s.x-n.x,y:s.y-n.y};a.x===0&&a.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(e,s),Mn.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Fu(this.updatePoint)}}function QE(t,e){return e?{point:e(t.point)}:t}function KV(t,e){return{x:t.x-e.x,y:t.y-e.y}}function XE({point:t},e){return{point:t,delta:KV(t,vX(e)),offset:KV(t,KAe(e)),velocity:GAe(e,.1)}}function KAe(t){return t[0]}function vX(t){return t[t.length-1]}function GAe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=vX(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>da(e)));)n--;if(!r)return{x:0,y:0};r===t[0]&&t.length>2&&s.timestamp-r.timestamp>da(e)*2&&(r=t[1]);const a=ra(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function YAe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?nr(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?nr(n,t,r.max):Math.min(t,n)),t}function GV(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function QAe(t,{top:e,left:n,bottom:r,right:s}){return{x:GV(t.x,n,s),y:GV(t.y,e,r)}}function YV(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function XAe(t,e){return{x:YV(t.x,e.x),y:YV(t.y,e.y)}}function ZAe(t,e){let n=.5;const r=Ws(t),s=Ws(e);return s>r?n=Dv(e.min,e.max-r,t.min):r>s&&(n=Dv(t.min,t.max-s,e.min)),Jo(0,1,n)}function JAe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const oP=.35;function eTe(t=oP){return t===!1?t=0:t===!0&&(t=oP),{x:QV(t,"left","right"),y:QV(t,"top","bottom")}}function QV(t,e,n){return{min:XV(t,e),max:XV(t,n)}}function XV(t,e){return typeof t=="number"?t:t[e]||0}const tTe=new WeakMap;class nTe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Lr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=h=>{n&&this.snapToCursor(gb(h).point),this.stopAnimation()},o=(h,f)=>{const{drag:m,dragPropagation:y,onDragStart:p}=this.getProps();if(m&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=I1e(m),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),_o(b=>{let x=this.getAxisMotionValue(b).get()||0;if(Wo.test(x)){const{projection:w}=this.visualElement;if(w&&w.layout){const C=w.layout.layoutBox[b];C&&(x=Ws(C)*(parseFloat(x)/100))}}this.originPoint[b]=x}),p&&Mn.update(()=>p(h,f),!1,!0),JC(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:m,dragDirectionLock:y,onDirectionLock:p,onDrag:v}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:b}=f;if(y&&this.currentDirection===null){this.currentDirection=sTe(b),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",f.point,b),this.updateAxis("y",f.point,b),this.visualElement.render(),v&&Mn.update(()=>v(h,f),!1,!0)},c=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>{const{dragSnapToOrigin:h}=this.getProps();(h||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:d}=this.getProps();this.panSession=new yX(e,{onSessionStart:a,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:gX(this.visualElement),element:this.visualElement.current})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!r)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&Mn.postRender(()=>l(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!b0(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=YAe(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,s=this.constraints;e&&Ef(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=QAe(r.layoutBox,e):this.constraints=!1,this.elastic=eTe(n),s!==this.constraints&&!Ef(e)&&r&&this.constraints&&!this.hasMutatedConstraints&&_o(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=JAe(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ef(e))return!1;const r=e.current;Xm(r!==null,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");const{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=aEe(r,s.root,this.visualElement.getTransformPagePoint());let o=XAe(s.layout.layoutBox,a);if(n){const l=n(rEe(o));this.hasMutatedConstraints=!!l,l&&(o=$Q(l))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=_o(d=>{if(!b0(d,n,this.currentDirection))return;let h=c&&c[d]||{};o&&(h={min:0,max:0});const f=s?200:1e6,m=s?40:1e7,y={type:"inertia",velocity:r?e[d]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(d,y)});return Promise.all(u).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return JC(this.visualElement,e),r.start(g2(e,r,0,n,this.visualElement,!1))}stopAnimation(){_o(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){_o(n=>{const{drag:r}=this.getProps();if(!b0(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:l}=s.layout.layoutBox[n],c=a.get()||0;a.set(e[n]-nr(o,l,.5)+c)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ef(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};_o(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();s[o]=ZAe({min:c,max:c},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.constraints=!1,this.resolveConstraints(),_o(o=>{if(!b0(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(nr(c,u,s[o]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;tTe.set(this.visualElement,this);const e=this.visualElement.current,n=By(e,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps(),f=u.target,m=f!==e&&L1e(f);d&&h&&!m&&this.start(u)});let r;const s=()=>{const{dragConstraints:u}=this.getProps();Ef(u)&&u.current&&(this.constraints=this.resolveRefConstraints(),r||(r=rTe(e,u.current,()=>this.scalePositionWithinConstraints())))},{projection:a}=this.visualElement,o=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Mn.read(s);const l=Fv(window,"resize",()=>this.scalePositionWithinConstraints()),c=a.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(_o(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=u[h].translate,f.set(f.get()+u[h].translate))}),this.visualElement.render())});return()=>{l(),n(),o(),c&&c(),r&&r()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:o=oP,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:o,dragMomentum:l}}}function ZV(t){let e=!0;return()=>{if(e){e=!1;return}t()}}function rTe(t,e,n){const r=iV(t,ZV(n)),s=iV(e,ZV(n));return()=>{r(),s()}}function b0(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function sTe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class iTe extends ed{constructor(e){super(e),this.removeGroupControls=ua,this.removeListeners=ua,this.controls=new nTe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ua}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const ZE=t=>(e,n)=>{t&&Mn.update(()=>t(e,n),!1,!0)};class aTe extends ed{constructor(){super(...arguments),this.removePointerDownListener=ua}onPointerDown(e){this.session=new yX(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:gX(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:ZE(e),onStart:ZE(n),onMove:ZE(r),onEnd:(a,o)=>{delete this.session,s&&Mn.postRender(()=>s(a,o))}}}mount(){this.removePointerDownListener=By(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let JE=!1;class oTe extends _.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=e;a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),JE&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),pw.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,{projection:o}=r;return o&&(o.isPresent=a,e.layoutDependency!==n&&o.setOptions({...o.options,layoutDependency:n}),JE=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==a?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||Mn.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),b2.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;JE=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function xX(t){const[e,n]=aX(),r=_.useContext(JO);return i.jsx(oTe,{...t,layoutGroup:r,switchLayoutGroup:_.useContext(mX),isPresent:e,safeToRemove:n})}const lTe={pan:{Feature:aTe},drag:{Feature:iTe,ProjectionNode:iX,MeasureLayout:xX}};function JV(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,a=r[s];a&&Mn.postRender(()=>a(e,gb(e)))}class cTe extends ed{mount(){const{current:e}=this.node;e&&(this.unmount=R1e(e,(n,r)=>(JV(this.node,r,"Start"),s=>JV(this.node,s,"End"))))}unmount(){}}class uTe extends ed{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=fb(Fv(this.node.current,"focus",()=>this.onFocus()),Fv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function eB(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),a=r[s];a&&Mn.postRender(()=>a(e,gb(e)))}class dTe extends ed{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:n,propagate:r}=this.node.props;this.unmount=F1e(e,(s,a)=>(eB(this.node,a,"Start"),(o,{success:l})=>eB(this.node,o,l?"End":"Cancel")),{useGlobalTarget:n,stopPropagation:(r==null?void 0:r.tap)===!1})}unmount(){}}const lP=new WeakMap,eA=new WeakMap,hTe=t=>{const e=lP.get(t.target);e&&e(t)},fTe=t=>{t.forEach(hTe)};function mTe({root:t,...e}){const n=t||document;eA.has(n)||eA.set(n,{});const r=eA.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(fTe,{root:t,...e})),r[s]}function pTe(t,e,n){const r=mTe(e);return lP.set(t,n),r.observe(t),()=>{lP.delete(t),r.unobserve(t)}}const gTe={some:0,all:1};class yTe extends ed{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:gTe[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return pTe(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(vTe(e,n))&&this.startObserver()}unmount(){}}function vTe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const xTe={inView:{Feature:yTe},tap:{Feature:dTe},focus:{Feature:uTe},hover:{Feature:cTe}},bTe={layout:{ProjectionNode:iX,MeasureLayout:xX}},wTe={...qAe,...xTe,...lTe,...bTe},Ur=FAe(wTe,VAe),Cc=t=>{if(t==null)return null;const e=String(t);return e.trim()?e:null},_Te=(t,e)=>({id:t,companyId:String(e.companyId??e.company_id??""),userId:String(e.userId??e.user_id??""),role:e.role??"read_only",status:e.status??"active",createdAt:String(e.createdAt??e.created_at??""),updatedAt:String(e.updatedAt??e.updated_at??"")}),jTe=(t,e)=>({id:t,name:String(e.name??e.companyName??e.company_name??""),organizationType:e.organizationType??e.organization_type??"business",businessType:Cc(e.businessType??e.business_type)??void 0,taxType:Cc(e.taxType??e.tax_type)??void 0,taxClassification:Cc(e.taxClassification??e.tax_classification)??void 0,tpin:Cc(e.tpin)??void 0,phone:Cc(e.phone)??void 0,email:Cc(e.email)??void 0,logoUrl:Cc(e.logoUrl??e.logo_url)??null,createdAt:String(e.createdAt??e.created_at??""),updatedAt:String(e.updatedAt??e.updated_at??"")}),NTe=(t,e)=>({id:t,companyId:String(e.companyId??e.company_id??t),companyName:String(e.companyName??e.company_name??""),isVatRegistered:!!(e.isVatRegistered??e.is_vat_registered??!1),vatRate:e.vatRate===null||e.vatRate===void 0?Number(e.vat_rate??0)||null:Number(e.vatRate),logoUrl:Cc(e.logoUrl??e.logo_url)??null,createdAt:String(e.createdAt??e.created_at??""),updatedAt:String(e.updatedAt??e.updated_at??"")}),Be={async getPrimaryMembershipByUser(t){kn();const e=we(se,Q.COMPANY_USERS),n=[Te(e,he("userId","==",t),he("status","==","active"),Ts(1)),Te(e,he("user_id","==",t),he("status","==","active"),Ts(1)),Te(e,he("userId","==",t),Ts(1)),Te(e,he("user_id","==",t),Ts(1))];for(const r of n){const s=await Ce(r);if(s.empty)continue;const a=s.docs[0];return _Te(a.id,a.data())}return null},async getCompanyById(t){kn();const e=Je(se,Q.COMPANIES,t),n=await bi(e);return n.exists()?jTe(n.id,n.data()):null},async getCompanySettings(t){kn();const e=Je(se,Q.COMPANY_SETTINGS,t),n=await bi(e);return n.exists()?NTe(n.id,n.data()):null},async completeCompanySetup(t){kn();const e=Je(se,Q.COMPANIES,t.companyId);await xr(e,{name:t.name,organizationType:t.organizationType,businessType:t.businessType??null,taxType:t.taxType??null,taxClassification:t.taxClassification??null,address:t.address??null,phone:t.phone??null,email:t.email??null,tpin:t.tpin??null,registrationNumber:t.registrationNumber??null,industryType:t.industryType??null,logoUrl:t.logoUrl??null,updatedAt:Re()},{merge:!0});const n=Je(se,Q.COMPANY_SETTINGS,t.companyId);await xr(n,{companyId:t.companyId,companyName:t.name,logoUrl:t.logoUrl??null,isVatRegistered:!!t.isVatRegistered,vatRate:t.vatRate??null,updatedAt:Re()},{merge:!0})},async updateCompanyLogo(t,e){kn();const n=Je(se,Q.COMPANIES,t);await Kl(n,{logoUrl:e,updatedAt:Re()});const r=Je(se,Q.COMPANY_SETTINGS,t);await xr(r,{companyId:t,logoUrl:e,updatedAt:Re()},{merge:!0})},async updateCompanyBasics(t){kn();const e=Je(se,Q.COMPANIES,t.companyId),n=Je(se,Q.COMPANY_SETTINGS,t.companyId),r={updatedAt:Re()},s={companyId:t.companyId,updatedAt:Re()};typeof t.name=="string"&&(r.name=t.name,s.companyName=t.name),t.logoUrl!==void 0&&(r.logoUrl=t.logoUrl,s.logoUrl=t.logoUrl),await xr(e,r,{merge:!0}),await xr(n,s,{merge:!0})},async listCompanyUsers(t){return kn(),kt("listCompanyUsers",{companyId:t})},async updateUserRole(t){return kn(),kt("updateUserRole",t)},async removeCompanyUser(t){return kn(),kt("removeCompanyUser",t)},async suspendUser(t){return kn(),kt("suspendUser",t)},async reactivateUser(t){return kn(),kt("reactivateUser",t)},async revokeInvitation(t){return kn(),kt("revokeInvitation",t)}},_n={async getPostedJournalLines(t,e,n){kn();const r=we(se,Q.JOURNAL_LINES),s=[he("companyId","==",t),he("isPosted","==",!0),WN("entryDate","desc"),Ts(5e3)];return e&&s.push(he("entryDate",">=",e)),n&&s.push(he("entryDate","<=",n)),(await Ce(Te(r,...s))).docs.map(o=>({id:o.id,...o.data()}))},async postJournalEntry(t){return kt("postJournalEntry",t)},async getGLBalances(t){return kt("getGLBalances",t)},async getTrialBalance(t){return kt("getTrialBalance",t)},async postInvoiceToGL(t){return kt("postInvoiceToGL",{invoiceId:t})},async postBillToGL(t){return kt("postBillToGL",{billId:t})},async postExpenseToGL(t){return kt("postExpenseToGL",{expenseId:t})},async seedDefaultChartOfAccounts(t){return kt("seedDefaultChartOfAccounts",t)},async seedDefaultExpenseCategories(t){return kt("seedDefaultExpenseCategories",t)},async recordExpense(t){return kt("recordExpense",t)},async createBill(t){return kt("createBill",t)},async payBill(t){return kt("payBill",t)},async createInvoice(t){return kt("createInvoice",t)},async recordInvoicePayment(t){return kt("recordInvoicePayment",t)},async createQuotation(t){return kt("createQuotation",t)},async reverseJournalEntry(t){return kt("reverseJournalEntry",t)},async deleteChartOfAccount(t){return kt("deleteChartOfAccount",t)},async updateOverdueBills(t){return kt("updateOverdueBills",t)},async getExpenseReport(t){return kt("getExpenseReport",t)},async getGeneralLedger(t){return kt("getGeneralLedger",t)},async getProfitLossReport(t){return kt("getProfitLossReport",t)},async getBalanceSheetReport(t){return kt("getBalanceSheetReport",t)},async getTrialBalanceReport(t){return kt("getTrialBalanceReport",t)},async getCashFlowReport(t){return kt("getCashFlowReport",t)},async getDashboardLiveMetrics(t){return kt("getDashboardLiveMetrics",t)}},Ao={async getPayrollRuns(t){kn();const e=we(se,Q.PAYROLL_RUNS);return(await Ce(Te(e,he("companyId","==",t),WN("runDate","desc")))).docs.map(r=>({id:r.id,...r.data()}))},async createPayrollDraft(t){return kt("createPayrollDraft",t)},async runPayrollTrial(t){return kt("runPayrollTrial",t)},async processPayroll(t){return kt("processPayroll",t)},async payPayroll(t){return kt("payPayroll",t)},async reversePayroll(t){return kt("reversePayroll",t)},async reversePayrollPayment(t){return kt("reversePayrollPayment",t)},async finalizePayroll(t){return kt("finalizePayroll",t)},async sendPayslipEmail(t){return kt("sendPayslipEmail",t)},async runDepreciation(t){return kt("runDepreciation",t)}},STe={async uploadCompanyLogo(t,e){kn();const n=e.name.split(".").pop()??"png",r=`company-logos/${t}/logo.${n}`,s=K0e(ewe,r);try{await W0e(s,e,{contentType:e.type})}catch(a){throw(typeof a=="object"&&a!==null&&"code"in a?String(a.code):"")==="storage/bucket-not-found"?new Error("Firebase Storage is not enabled for this project. Open Firebase Console > Storage > Get Started."):a}return H0e(s)}},ETe=new Set(Object.values(Q)),ATe=t=>{if(!ETe.has(t))throw new Error(`Dashboard query rejected for unknown collection: ${t}`)},TTe=(t,e)=>{var r;const n=[he("companyId","==",t)];return(r=e.filters)==null||r.forEach(s=>{n.push(he(s.field,s.op,s.value))}),e.orderByField&&n.push(WN(e.orderByField,e.orderDirection??"desc")),typeof e.limitCount=="number"&&e.limitCount>0&&n.push(Ts(e.limitCount)),n},tB=async(t,e)=>{ATe(e.collectionName);const n=TTe(t,e);return(await Ce(Te(we(se,e.collectionName),...n))).docs.map(s=>({id:s.id,...s.data()}))},jr={async getCompanyIdForUser(t){kn();const e=await Be.getPrimaryMembershipByUser(t);if(!(e!=null&&e.companyId))throw new Error("No active company membership found for this user.");return e.companyId},async runQuery(t,e){const n=await this.getCompanyIdForUser(t);return tB(n,e)},async runQueries(t,e){const n=await this.getCompanyIdForUser(t),r=Object.entries(e),s=await Promise.all(r.map(async([a,o])=>{const l=await tB(n,o);return[a,l]}));return Object.fromEntries(s)}},bX=t=>t.toLowerCase().replace(/[_\s-]/g,""),CTe=t=>{const e=new Map;return Object.entries(t).forEach(([n,r])=>{e.set(bX(n),r)}),e},PTe=(t,e)=>{const n=t[e];return n!==void 0?n:CTe(t).get(bX(e))},Fd=(t,e,n=null)=>{for(const r of e){const s=PTe(t,r);if(s!=null)return s}return n},Qe=(t,e,n="")=>{const r=Fd(t,e);return typeof r=="string"?r:n},en=(t,e,n=0)=>{const r=Fd(t,e),s=Number(r);return Number.isFinite(s)?s:n},yy=(t,e,n=!1)=>{const r=Fd(t,e);return typeof r=="boolean"?r:n},ITe=["Initiation","Planning","Design","Execution","Monitoring","Closing"],nB=new Set(["approved","implemented","completed","done"]),wX=new Set(["approved","implemented","completed","done"]),kTe=new Set(["pending","todo","open","in_progress","inprogress"]),RTe=t=>t.trim().toLowerCase().replace(/[\s_-]/g,""),Ba=t=>t?RTe(t):"",ln=t=>{if(!t)return null;const e=t.trim();return e.length?e:null},rB=t=>t.split(/[\s_-]+/).filter(Boolean).map(e=>`${e.slice(0,1).toUpperCase()}${e.slice(1).toLowerCase()}`).join(" "),sB=t=>{if(!t)return new Date(0).toISOString();if(typeof t=="string"){const e=new Date(t);return Number.isNaN(e.getTime())?new Date(0).toISOString():e.toISOString()}if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return new Date(0).toISOString()},iB=t=>{if(!t)return null;const e=new Date(t);return Number.isNaN(e.getTime())?null:e},is=(t,e,n,r="")=>{const s=Qe(t,n,"");if(s)return s;if(e){const a=Qe(e,n,"");if(a)return a}return r},aB=(t,e)=>{const n=Fd(e,["details"],null)??null,r=is(e,n,["companyId","company_id"]),s=is(e,n,["projectId","project_id"]);if(!r||!s)return null;const a=is(e,n,["action","event"],"Activity"),o=is(e,n,["activity","title"],a||"Activity"),l=is(e,n,["description","notes"],""),c=is(e,n,["source","sourceType","source_type","sourceCollection","source_collection","tableName","table_name"],"-"),u=ln(is(e,n,["sourceType","source_type","sourceCollection","source_collection"])),d=ln(is(e,n,["sourceId","source_id","recordId","record_id"])),h=ln(is(e,n,["role","actorRole","actor_role"])),f=ln(is(e,n,["assignedTo","assigned_to","assignee"])),m=ln(is(e,n,["phase","currentPhase","current_phase","stage"])),y=ln(is(e,n,["discipline"])),p=ln(is(e,n,["approvalStatus","approval_status"])),v=ln(is(e,n,["appliedToSection","applied_to_section","section"])),b=ln(is(e,n,["status"])),x=ln(is(e,n,["milestoneName","milestone_name","milestone"])),w=yy(e,["milestoneAchieved","milestone_achieved"],!1)||(n?yy(n,["milestoneAchieved","milestone_achieved"],!1):!1),C=yy(e,["implemented","isImplemented","is_implemented"],!1)||(n?yy(n,["implemented","isImplemented","is_implemented"],!1):!1);return{id:t,companyId:r,projectId:s,activity:o,description:l,source:c,sourceType:u,sourceId:d,role:h,assignedTo:f,phase:m,discipline:y,approvalStatus:p,appliedToSection:v,status:b,milestoneName:x,milestoneAchieved:w,implemented:C,createdBy:ln(is(e,n,["createdBy","created_by","userId","user_id","actorUid","actor_uid"])),createdAt:sB(Fd(e,["createdAt","created_at"])),updatedAt:sB(Fd(e,["updatedAt","updated_at","createdAt","created_at"])),metadata:Fd(e,["metadata"],null)??null}},oB=t=>{const e=Ba(t.status),n=Ba(t.approvalStatus);return nB.has(e)||nB.has(n)||t.implemented||t.milestoneAchieved},OTe=(t,e,n)=>{var a;const r=ln(Qe(t,["currentPhase","current_phase","phase","stage"],""));if(r)return rB(r);const s=(a=e.find(o=>o.phase))==null?void 0:a.phase;return s?rB(s):n>=90?"Closing":n>=65?"Execution":n>=40?"Design":n>=20?"Planning":"Initiation"},DTe=(t,e,n,r)=>{const s=Ba(Qe(t,["status"],"")),a=n+r>=4;if(s==="completed"||e>=100&&a)return"completed";const o=iB(ln(Qe(t,["startDate","start_date"],""))),l=iB(ln(Qe(t,["endDate","end_date"],"")));let c=null;if(o&&l&&l.getTime()>o.getTime()){const u=Date.now();u<=o.getTime()?c=0:u>=l.getTime()?c=100:c=(u-o.getTime())/(l.getTime()-o.getTime())*100}return c!==null&&e+10<c?"behind":c!==null&&e>=c-8||r>0&&r>=n?"on_track":"in_progress"},MTe=(t,e)=>{const n=e.filter(A=>!!(A.status||A.approvalStatus||A.implemented||A.milestoneName||A.milestoneAchieved)),r=n.length?n:e,s=r.filter(oB).length,a=r.length,o=new Set(e.map(A=>ln(A.appliedToSection)).filter(A=>!!A)),l=new Set(e.filter(A=>Ba(A.approvalStatus)==="approved").map(A=>ln(A.appliedToSection)).filter(A=>!!A)),c=e.filter(A=>!!(A.milestoneName||A.milestoneAchieved||/milestone/i.test(A.activity)||/milestone/i.test(A.description))),u=A=>ln(A.milestoneName)||ln(A.appliedToSection)||ln(A.activity)||A.id,d=new Set(c.map(u).filter(A=>!!A)),h=new Set(c.filter(A=>A.milestoneAchieved||oB(A)).map(u).filter(A=>!!A)),f=e.filter(A=>wX.has(Ba(A.status))).length,m=e.filter(A=>kTe.has(Ba(A.status))||Ba(A.approvalStatus)==="pending").length,p=Ba(Qe(t,["status"],""))==="completed",v=a>0?s/a:p?1:0,b=o.size>0?l.size/o.size:0,x=d.size>0?h.size/d.size:0,w=f+m,C=w>0?f/w:0,S=[{ratio:v,weight:.4,enabled:a>0||p},{ratio:b,weight:.2,enabled:o.size>0},{ratio:x,weight:.2,enabled:d.size>0},{ratio:C,weight:.2,enabled:w>0}],P=S.filter(A=>A.enabled).reduce((A,I)=>A+I.weight,0),j=S.filter(A=>A.enabled).reduce((A,I)=>A+I.ratio*I.weight,0);let g=P>0?j/P*100:0;if(p&&(g=100),!p){const A=Math.max(a,w,o.size,d.size);A<=1?g=Math.min(g,20):A===2&&(g=Math.min(g,45))}g=Math.max(0,Math.min(100,Math.round(g)));const T=OTe(t,e,g),E=DTe(t,g,m,f);return{projectId:t.id,currentPhase:T,completion:g,status:E,metrics:{completedActivities:s,totalActivities:a,approvedSections:l.size,totalSections:o.size,milestonesAchieved:h.size,totalMilestones:d.size,pendingCount:m,implementedCount:f}}},LTe=(t,e)=>{const n=new Map;return e.forEach(r=>{var s;n.has(r.projectId)||n.set(r.projectId,[]),(s=n.get(r.projectId))==null||s.push(r)}),new Map(t.map(r=>[r.id,MTe(r,n.get(r.id)??[])]))},Nl={async listByCompany(t,e){const n=[he("companyId","==",t)];return e!=null&&e.limitCount&&e.limitCount>0&&n.push(Ts(e.limitCount)),(await Ce(Te(we(se,Q.PROJECT_ACTIVITY_LOGS),...n))).docs.map(s=>aB(s.id,s.data())).filter(s=>!!s).sort((s,a)=>a.createdAt.localeCompare(s.createdAt))},async listByProject(t,e,n){const r=[he("companyId","==",t),he("projectId","==",e)];return n!=null&&n.limitCount&&n.limitCount>0&&r.push(Ts(n.limitCount)),(await Ce(Te(we(se,Q.PROJECT_ACTIVITY_LOGS),...r))).docs.map(a=>aB(a.id,a.data())).filter(a=>!!a).sort((a,o)=>o.createdAt.localeCompare(a.createdAt))},async create(t){const e=ln(t.activity);e&&await es(we(se,Q.PROJECT_ACTIVITY_LOGS),{companyId:t.companyId,projectId:t.projectId,activity:e,description:ln(t.description)??null,source:ln(t.source)??"Project Workspace",sourceType:ln(t.sourceType)??null,sourceId:ln(t.sourceId)??null,role:ln(t.role)??null,assignedTo:ln(t.assignedTo)??null,phase:ln(t.phase)??null,discipline:ln(t.discipline)??null,approvalStatus:ln(t.approvalStatus)??null,appliedToSection:ln(t.appliedToSection)??null,status:ln(t.status)??"implemented",milestoneName:ln(t.milestoneName)??null,milestoneAchieved:!!t.milestoneAchieved,implemented:t.implemented??!0,createdBy:ln(t.createdBy)??null,metadata:t.metadata??null,createdAt:Re(),updatedAt:Re()})},getProjectHealthStats(t){var a;const e=t.filter(o=>Ba(o.status)==="pending").length,n=t.filter(o=>wX.has(Ba(o.status))).length,r=t.filter(o=>Ba(o.approvalStatus)==="approved").length,s=t.length?Math.round((n+r)/Math.max(t.length,1)*100):0;return{pendingCount:e,implementedCount:n,approvedCount:r,completion:Math.min(100,Math.max(0,s)),lastUpdatedAt:((a=t[0])==null?void 0:a.createdAt)??null,totalItems:t.length}}};function $Te(){const[t,e]=_.useState(!1),[n,r]=_.useState(""),{messages:s,isLoading:a,askAI:o,clearChat:l}=TNe(),c=_.useRef(null),{user:u}=ht(),[d,h]=_.useState(void 0);_.useEffect(()=>{c.current&&(c.current.scrollTop=c.current.scrollHeight)},[s,t]),_.useEffect(()=>{async function m(){if(u){const y=await Be.getPrimaryMembershipByUser(u.id);y&&h(y.companyId)}}m()},[u]);const f=m=>{m.preventDefault(),!(!n.trim()||a)&&(o(n,d),r(""))};return i.jsxs(i.Fragment,{children:[i.jsx(oX,{children:t&&i.jsx(Ur.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},transition:{duration:.2},className:"fixed bottom-20 right-6 z-50 w-[90vw] md:w-[400px] shadow-2xl",children:i.jsxs(X,{className:"border-primary/20 bg-background/95 backdrop-blur-sm h-[500px] flex flex-col",children:[i.jsxs(te,{className:"flex flex-row items-center justify-between p-4 border-b",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"p-1.5 bg-primary/10 rounded-lg",children:i.jsx(ile,{className:"h-4 w-4 text-primary"})}),i.jsxs("div",{children:[i.jsx(ne,{className:"text-sm font-medium",children:"ZedBooks AI"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Financial Assistant"})]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:l,title:"Clear Chat",children:i.jsx(d8,{className:"h-4 w-4 text-muted-foreground"})}),i.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>e(!1),children:i.jsx(Bm,{className:"h-4 w-4"})})]})]}),i.jsx(re,{className:"flex-1 p-0 overflow-hidden relative",children:i.jsxs("div",{ref:c,className:"h-full overflow-y-auto p-4 space-y-4 scroll-smooth",children:[s.map((m,y)=>i.jsx("div",{className:ve("flex w-full",m.role==="user"?"justify-end":"justify-start"),children:i.jsx("div",{className:ve("max-w-[80%] rounded-2xl px-4 py-2 text-sm",m.role==="user"?"bg-primary text-primary-foreground rounded-br-none":"bg-muted text-foreground rounded-bl-none"),children:m.content})},y)),a&&i.jsx("div",{className:"flex justify-start",children:i.jsx("div",{className:"bg-muted rounded-2xl rounded-bl-none px-4 py-2",children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-muted-foreground/40 rounded-full animate-bounce [animation-delay:-0.3s]"}),i.jsx("span",{className:"w-1.5 h-1.5 bg-muted-foreground/40 rounded-full animate-bounce [animation-delay:-0.15s]"}),i.jsx("span",{className:"w-1.5 h-1.5 bg-muted-foreground/40 rounded-full animate-bounce"})]})})})]})}),i.jsx(OY,{className:"p-3 border-t bg-muted/20",children:i.jsxs("form",{onSubmit:f,className:"flex gap-2 w-full",children:[i.jsx(G,{placeholder:"Ask about your finances...",value:n,onChange:m=>r(m.target.value),className:"bg-background focus-visible:ring-offset-0"}),i.jsx(H,{type:"submit",size:"icon",disabled:a||!n.trim(),children:i.jsx(Zk,{className:"h-4 w-4"})})]})})]})})}),i.jsx(Ur.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"fixed bottom-6 right-6 z-50",children:i.jsx(H,{onClick:()=>e(!t),size:"icon",className:ve("h-12 w-12 rounded-full shadow-lg transition-all duration-300",t?"bg-muted text-muted-foreground rotate-90":"bg-primary text-primary-foreground"),children:t?i.jsx(Bm,{className:"h-6 w-6"}):i.jsx(Foe,{className:"h-6 w-6"})})})]})}function Pt({children:t}){return nS(),i.jsx(wt,{children:i.jsx(vY,{children:i.jsxs("div",{className:"flex min-h-screen w-full",children:[i.jsx(ANe,{}),i.jsxs(wY,{className:"flex-1",children:[i.jsxs("header",{className:"sticky top-0 z-40 flex h-14 items-center gap-4 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4 md:hidden",children:[i.jsx(bY,{className:"h-9 w-9",children:i.jsx(ele,{className:"h-5 w-5"})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-7 w-7 rounded-lg bg-primary flex items-center justify-center text-primary-foreground",children:i.jsx("span",{className:"text-xs font-bold",children:"Z"})}),i.jsx("span",{className:"font-semibold text-foreground",children:"ZedBooks"})]})]}),i.jsx("main",{className:"flex flex-col gap-4 p-4 md:p-6 lg:p-8",children:t}),i.jsx(ZO,{}),i.jsx($Te,{})]})]})})})}function It({children:t,allowedRoles:e}){const n=sl(),{hasRole:r,isLoading:s,userRole:a}=wje(e||[]);return s?i.jsx("div",{className:"flex min-h-screen items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Checking permissions..."})]})}):e&&e.length>0?r?i.jsx(i.Fragment,{children:t}):i.jsx(iC,{to:"/dashboard",replace:!0,state:{from:n,unauthorized:!0}}):RG(a,n.pathname)?i.jsx(i.Fragment,{children:t}):i.jsx(iC,{to:"/dashboard",replace:!0,state:{from:n,unauthorized:!0}})}var yb=t=>t.type==="checkbox",Vd=t=>t instanceof Date,zs=t=>t==null;const _X=t=>typeof t=="object";var _r=t=>!zs(t)&&!Array.isArray(t)&&_X(t)&&!Vd(t),jX=t=>_r(t)&&t.target?yb(t.target)?t.target.checked:t.target.value:t,FTe=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,NX=(t,e)=>t.has(FTe(e)),VTe=t=>{const e=t.constructor&&t.constructor.prototype;return _r(e)&&e.hasOwnProperty("isPrototypeOf")},P2=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Mr(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(P2&&(t instanceof Blob||r))&&(n||_r(t)))if(e=n?[]:{},!n&&!VTe(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=Mr(t[s]));else return t;return e}var dS=t=>/^\w*$/.test(t),yr=t=>t===void 0,I2=t=>Array.isArray(t)?t.filter(Boolean):[],k2=t=>I2(t.replace(/["|']|\]/g,"").split(/\.|\[/)),ze=(t,e,n)=>{if(!e||!_r(t))return n;const r=(dS(e)?[e]:k2(e)).reduce((s,a)=>zs(s)?s:s[a],t);return yr(r)||r===t?yr(t[e])?n:t[e]:r},Ci=t=>typeof t=="boolean",bn=(t,e,n)=>{let r=-1;const s=dS(e)?[e]:k2(e),a=s.length,o=a-1;for(;++r<a;){const l=s[r];let c=n;if(r!==o){const u=t[l];c=_r(u)||Array.isArray(u)?u:isNaN(+s[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=c,t=t[l]}};const D_={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ua={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},dl={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},R2=F.createContext(null);R2.displayName="HookFormContext";const hS=()=>F.useContext(R2),BTe=t=>{const{children:e,...n}=t;return F.createElement(R2.Provider,{value:n},e)};var SX=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(s,a,{get:()=>{const o=a;return e._proxyFormState[o]!==Ua.all&&(e._proxyFormState[o]=!r||Ua.all),n&&(n[o]=!0),t[o]}});return s};const O2=typeof window<"u"?F.useLayoutEffect:F.useEffect;function UTe(t){const e=hS(),{control:n=e.control,disabled:r,name:s,exact:a}=t||{},[o,l]=F.useState(n._formState),c=F.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return O2(()=>n._subscribe({name:s,formState:c.current,exact:a,callback:u=>{!r&&l({...n._formState,...u})}}),[s,r,a]),F.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),F.useMemo(()=>SX(o,n,c.current,!1),[o,n])}var ko=t=>typeof t=="string",EX=(t,e,n,r,s)=>ko(t)?(r&&e.watch.add(t),ze(n,t,s)):Array.isArray(t)?t.map(a=>(r&&e.watch.add(a),ze(n,a))):(r&&(e.watchAll=!0),n),cP=t=>zs(t)||!_X(t);function xl(t,e,n=new WeakSet){if(cP(t)||cP(e))return t===e;if(Vd(t)&&Vd(e))return t.getTime()===e.getTime();const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const a of r){const o=t[a];if(!s.includes(a))return!1;if(a!=="ref"){const l=e[a];if(Vd(o)&&Vd(l)||_r(o)&&_r(l)||Array.isArray(o)&&Array.isArray(l)?!xl(o,l,n):o!==l)return!1}}return!0}function zTe(t){const e=hS(),{control:n=e.control,name:r,defaultValue:s,disabled:a,exact:o,compute:l}=t||{},c=F.useRef(s),u=F.useRef(l),d=F.useRef(void 0);u.current=l;const h=F.useMemo(()=>n._getWatch(r,c.current),[n,r]),[f,m]=F.useState(u.current?u.current(h):h);return O2(()=>n._subscribe({name:r,formState:{values:!0},exact:o,callback:y=>{if(!a){const p=EX(r,n._names,y.values||n._formValues,!1,c.current);if(u.current){const v=u.current(p);xl(v,d.current)||(m(v),d.current=v)}else m(p)}}}),[n,a,r,o]),F.useEffect(()=>n._removeUnmounted()),f}function qTe(t){const e=hS(),{name:n,disabled:r,control:s=e.control,shouldUnregister:a,defaultValue:o}=t,l=NX(s._names.array,n),c=F.useMemo(()=>ze(s._formValues,n,ze(s._defaultValues,n,o)),[s,n,o]),u=zTe({control:s,name:n,defaultValue:c,exact:!0}),d=UTe({control:s,name:n,exact:!0}),h=F.useRef(t),f=F.useRef(s.register(n,{...t.rules,value:u,...Ci(t.disabled)?{disabled:t.disabled}:{}}));h.current=t;const m=F.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ze(d.errors,n)},isDirty:{enumerable:!0,get:()=>!!ze(d.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!ze(d.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!ze(d.validatingFields,n)},error:{enumerable:!0,get:()=>ze(d.errors,n)}}),[d,n]),y=F.useCallback(x=>f.current.onChange({target:{value:jX(x),name:n},type:D_.CHANGE}),[n]),p=F.useCallback(()=>f.current.onBlur({target:{value:ze(s._formValues,n),name:n},type:D_.BLUR}),[n,s._formValues]),v=F.useCallback(x=>{const w=ze(s._fields,n);w&&x&&(w._f.ref={focus:()=>x.focus&&x.focus(),select:()=>x.select&&x.select(),setCustomValidity:C=>x.setCustomValidity(C),reportValidity:()=>x.reportValidity()})},[s._fields,n]),b=F.useMemo(()=>({name:n,value:u,...Ci(r)||d.disabled?{disabled:d.disabled||r}:{},onChange:y,onBlur:p,ref:v}),[n,r,d.disabled,y,p,v,u]);return F.useEffect(()=>{const x=s._options.shouldUnregister||a;s.register(n,{...h.current.rules,...Ci(h.current.disabled)?{disabled:h.current.disabled}:{}});const w=(C,S)=>{const P=ze(s._fields,C);P&&P._f&&(P._f.mount=S)};if(w(n,!0),x){const C=Mr(ze(s._options.defaultValues,n));bn(s._defaultValues,n,C),yr(ze(s._formValues,n))&&bn(s._formValues,n,C)}return!l&&s.register(n),()=>{(l?x&&!s._state.action:x)?s.unregister(n):w(n,!1)}},[n,s,l,a]),F.useEffect(()=>{s._setDisabledField({disabled:r,name:n})},[r,n,s]),F.useMemo(()=>({field:b,formState:d,fieldState:m}),[b,d,m])}const WTe=t=>t.render(qTe(t));var AX=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},Uy=t=>Array.isArray(t)?t:[t],lB=()=>{let t=[];return{get observers(){return t},next:s=>{for(const a of t)a.next&&a.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(a=>a!==s)}}),unsubscribe:()=>{t=[]}}},ai=t=>_r(t)&&!Object.keys(t).length,D2=t=>t.type==="file",za=t=>typeof t=="function",M_=t=>{if(!P2)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},TX=t=>t.type==="select-multiple",M2=t=>t.type==="radio",HTe=t=>M2(t)||yb(t),tA=t=>M_(t)&&t.isConnected;function KTe(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=yr(t)?r++:t[e[r++]];return t}function GTe(t){for(const e in t)if(t.hasOwnProperty(e)&&!yr(t[e]))return!1;return!0}function Nr(t,e){const n=Array.isArray(e)?e:dS(e)?[e]:k2(e),r=n.length===1?t:KTe(t,n),s=n.length-1,a=n[s];return r&&delete r[a],s!==0&&(_r(r)&&ai(r)||Array.isArray(r)&&GTe(r))&&Nr(t,n.slice(0,-1)),t}var CX=t=>{for(const e in t)if(za(t[e]))return!0;return!1};function L_(t,e={}){const n=Array.isArray(t);if(_r(t)||n)for(const r in t)Array.isArray(t[r])||_r(t[r])&&!CX(t[r])?(e[r]=Array.isArray(t[r])?[]:{},L_(t[r],e[r])):zs(t[r])||(e[r]=!0);return e}function PX(t,e,n){const r=Array.isArray(t);if(_r(t)||r)for(const s in t)Array.isArray(t[s])||_r(t[s])&&!CX(t[s])?yr(e)||cP(n[s])?n[s]=Array.isArray(t[s])?L_(t[s],[]):{...L_(t[s])}:PX(t[s],zs(e)?{}:e[s],n[s]):n[s]=!xl(t[s],e[s]);return n}var Bg=(t,e)=>PX(t,e,L_(e));const cB={value:!1,isValid:!1},uB={value:!0,isValid:!0};var IX=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!yr(t[0].attributes.value)?yr(t[0].value)||t[0].value===""?uB:{value:t[0].value,isValid:!0}:uB:cB}return cB},kX=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>yr(t)?t:e?t===""?NaN:t&&+t:n&&ko(t)?new Date(t):r?r(t):t;const dB={isValid:!1,value:null};var RX=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,dB):dB;function hB(t){const e=t.ref;return D2(e)?e.files:M2(e)?RX(t.refs).value:TX(e)?[...e.selectedOptions].map(({value:n})=>n):yb(e)?IX(t.refs).value:kX(yr(e.value)?t.ref.value:e.value,t)}var YTe=(t,e,n,r)=>{const s={};for(const a of t){const o=ze(e,a);o&&bn(s,a,o._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},$_=t=>t instanceof RegExp,Ug=t=>yr(t)?t:$_(t)?t.source:_r(t)?$_(t.value)?t.value.source:t.value:t,fB=t=>({isOnSubmit:!t||t===Ua.onSubmit,isOnBlur:t===Ua.onBlur,isOnChange:t===Ua.onChange,isOnAll:t===Ua.all,isOnTouch:t===Ua.onTouched});const mB="AsyncFunction";var QTe=t=>!!t&&!!t.validate&&!!(za(t.validate)&&t.validate.constructor.name===mB||_r(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===mB)),XTe=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),pB=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const zy=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const a=ze(t,s);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(zy(l,e))break}else if(_r(l)&&zy(l,e))break}}};function gB(t,e,n){const r=ze(t,n);if(r||dS(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const a=s.join("."),o=ze(e,a),l=ze(t,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(l&&l.type)return{name:a,error:l};if(l&&l.root&&l.root.type)return{name:`${a}.root`,error:l.root};s.pop()}return{name:n}}var ZTe=(t,e,n,r)=>{n(t);const{name:s,...a}=t;return ai(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(o=>e[o]===(!r||Ua.all))},JTe=(t,e,n)=>!t||!e||t===e||Uy(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),eCe=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,tCe=(t,e)=>!I2(ze(t,e)).length&&Nr(t,e),nCe=(t,e,n)=>{const r=Uy(ze(t,n));return bn(r,"root",e[n]),bn(t,n,r),t},gw=t=>ko(t);function yB(t,e,n="validate"){if(gw(t)||Array.isArray(t)&&t.every(gw)||Ci(t)&&!t)return{type:n,message:gw(t)?t:"",ref:e}}var mf=t=>_r(t)&&!$_(t)?t:{value:t,message:""},vB=async(t,e,n,r,s,a)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:h,max:f,pattern:m,validate:y,name:p,valueAsNumber:v,mount:b}=t._f,x=ze(n,p);if(!b||e.has(p))return{};const w=l?l[0]:o,C=I=>{s&&w.reportValidity&&(w.setCustomValidity(Ci(I)?"":I||""),w.reportValidity())},S={},P=M2(o),j=yb(o),g=P||j,T=(v||D2(o))&&yr(o.value)&&yr(x)||M_(o)&&o.value===""||x===""||Array.isArray(x)&&!x.length,E=AX.bind(null,p,r,S),A=(I,k,L,V=dl.maxLength,B=dl.minLength)=>{const M=I?k:L;S[p]={type:I?V:B,message:M,ref:o,...E(I?V:B,M)}};if(a?!Array.isArray(x)||!x.length:c&&(!g&&(T||zs(x))||Ci(x)&&!x||j&&!IX(l).isValid||P&&!RX(l).isValid)){const{value:I,message:k}=gw(c)?{value:!!c,message:c}:mf(c);if(I&&(S[p]={type:dl.required,message:k,ref:w,...E(dl.required,k)},!r))return C(k),S}if(!T&&(!zs(h)||!zs(f))){let I,k;const L=mf(f),V=mf(h);if(!zs(x)&&!isNaN(x)){const B=o.valueAsNumber||x&&+x;zs(L.value)||(I=B>L.value),zs(V.value)||(k=B<V.value)}else{const B=o.valueAsDate||new Date(x),M=W=>new Date(new Date().toDateString()+" "+W),$=o.type=="time",O=o.type=="week";ko(L.value)&&x&&(I=$?M(x)>M(L.value):O?x>L.value:B>new Date(L.value)),ko(V.value)&&x&&(k=$?M(x)<M(V.value):O?x<V.value:B<new Date(V.value))}if((I||k)&&(A(!!I,L.message,V.message,dl.max,dl.min),!r))return C(S[p].message),S}if((u||d)&&!T&&(ko(x)||a&&Array.isArray(x))){const I=mf(u),k=mf(d),L=!zs(I.value)&&x.length>+I.value,V=!zs(k.value)&&x.length<+k.value;if((L||V)&&(A(L,I.message,k.message),!r))return C(S[p].message),S}if(m&&!T&&ko(x)){const{value:I,message:k}=mf(m);if($_(I)&&!x.match(I)&&(S[p]={type:dl.pattern,message:k,ref:o,...E(dl.pattern,k)},!r))return C(k),S}if(y){if(za(y)){const I=await y(x,n),k=yB(I,w);if(k&&(S[p]={...k,...E(dl.validate,k.message)},!r))return C(k.message),S}else if(_r(y)){let I={};for(const k in y){if(!ai(I)&&!r)break;const L=yB(await y[k](x,n),w,k);L&&(I={...L,...E(k,L.message)},C(L.message),r&&(S[p]=I))}if(!ai(I)&&(S[p]={ref:w,...I},!r))return S}}return C(!0),S};const rCe={mode:Ua.onSubmit,reValidateMode:Ua.onChange,shouldFocusError:!0};function sCe(t={}){let e={...rCe,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:za(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},s=_r(e.defaultValues)||_r(e.values)?Mr(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:Mr(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...d};const f={array:lB(),state:lB()},m=e.criteriaMode===Ua.all,y=K=>oe=>{clearTimeout(u),u=setTimeout(K,oe)},p=async K=>{if(!e.disabled&&(d.isValid||h.isValid||K)){const oe=e.resolver?ai((await j()).errors):await T(r,!0);oe!==n.isValid&&f.state.next({isValid:oe})}},v=(K,oe)=>{!e.disabled&&(d.isValidating||d.validatingFields||h.isValidating||h.validatingFields)&&((K||Array.from(l.mount)).forEach(me=>{me&&(oe?bn(n.validatingFields,me,oe):Nr(n.validatingFields,me))}),f.state.next({validatingFields:n.validatingFields,isValidating:!ai(n.validatingFields)}))},b=(K,oe=[],me,Le,$e=!0,Pe=!0)=>{if(Le&&me&&!e.disabled){if(o.action=!0,Pe&&Array.isArray(ze(r,K))){const Ke=me(ze(r,K),Le.argA,Le.argB);$e&&bn(r,K,Ke)}if(Pe&&Array.isArray(ze(n.errors,K))){const Ke=me(ze(n.errors,K),Le.argA,Le.argB);$e&&bn(n.errors,K,Ke),tCe(n.errors,K)}if((d.touchedFields||h.touchedFields)&&Pe&&Array.isArray(ze(n.touchedFields,K))){const Ke=me(ze(n.touchedFields,K),Le.argA,Le.argB);$e&&bn(n.touchedFields,K,Ke)}(d.dirtyFields||h.dirtyFields)&&(n.dirtyFields=Bg(s,a)),f.state.next({name:K,isDirty:A(K,oe),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else bn(a,K,oe)},x=(K,oe)=>{bn(n.errors,K,oe),f.state.next({errors:n.errors})},w=K=>{n.errors=K,f.state.next({errors:n.errors,isValid:!1})},C=(K,oe,me,Le)=>{const $e=ze(r,K);if($e){const Pe=ze(a,K,yr(me)?ze(s,K):me);yr(Pe)||Le&&Le.defaultChecked||oe?bn(a,K,oe?Pe:hB($e._f)):L(K,Pe),o.mount&&p()}},S=(K,oe,me,Le,$e)=>{let Pe=!1,Ke=!1;const Kt={name:K};if(!e.disabled){if(!me||Le){(d.isDirty||h.isDirty)&&(Ke=n.isDirty,n.isDirty=Kt.isDirty=A(),Pe=Ke!==Kt.isDirty);const dn=xl(ze(s,K),oe);Ke=!!ze(n.dirtyFields,K),dn?Nr(n.dirtyFields,K):bn(n.dirtyFields,K,!0),Kt.dirtyFields=n.dirtyFields,Pe=Pe||(d.dirtyFields||h.dirtyFields)&&Ke!==!dn}if(me){const dn=ze(n.touchedFields,K);dn||(bn(n.touchedFields,K,me),Kt.touchedFields=n.touchedFields,Pe=Pe||(d.touchedFields||h.touchedFields)&&dn!==me)}Pe&&$e&&f.state.next(Kt)}return Pe?Kt:{}},P=(K,oe,me,Le)=>{const $e=ze(n.errors,K),Pe=(d.isValid||h.isValid)&&Ci(oe)&&n.isValid!==oe;if(e.delayError&&me?(c=y(()=>x(K,me)),c(e.delayError)):(clearTimeout(u),c=null,me?bn(n.errors,K,me):Nr(n.errors,K)),(me?!xl($e,me):$e)||!ai(Le)||Pe){const Ke={...Le,...Pe&&Ci(oe)?{isValid:oe}:{},errors:n.errors,name:K};n={...n,...Ke},f.state.next(Ke)}},j=async K=>{v(K,!0);const oe=await e.resolver(a,e.context,YTe(K||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return v(K),oe},g=async K=>{const{errors:oe}=await j(K);if(K)for(const me of K){const Le=ze(oe,me);Le?bn(n.errors,me,Le):Nr(n.errors,me)}else n.errors=oe;return oe},T=async(K,oe,me={valid:!0})=>{for(const Le in K){const $e=K[Le];if($e){const{_f:Pe,...Ke}=$e;if(Pe){const Kt=l.array.has(Pe.name),dn=$e._f&&QTe($e._f);dn&&d.validatingFields&&v([Le],!0);const ys=await vB($e,l.disabled,a,m,e.shouldUseNativeValidation&&!oe,Kt);if(dn&&d.validatingFields&&v([Le]),ys[Pe.name]&&(me.valid=!1,oe))break;!oe&&(ze(ys,Pe.name)?Kt?nCe(n.errors,ys,Pe.name):bn(n.errors,Pe.name,ys[Pe.name]):Nr(n.errors,Pe.name))}!ai(Ke)&&await T(Ke,oe,me)}}return me.valid},E=()=>{for(const K of l.unMount){const oe=ze(r,K);oe&&(oe._f.refs?oe._f.refs.every(me=>!tA(me)):!tA(oe._f.ref))&&Ne(K)}l.unMount=new Set},A=(K,oe)=>!e.disabled&&(K&&oe&&bn(a,K,oe),!xl(W(),s)),I=(K,oe,me)=>EX(K,l,{...o.mount?a:yr(oe)?s:ko(K)?{[K]:oe}:oe},me,oe),k=K=>I2(ze(o.mount?a:s,K,e.shouldUnregister?ze(s,K,[]):[])),L=(K,oe,me={})=>{const Le=ze(r,K);let $e=oe;if(Le){const Pe=Le._f;Pe&&(!Pe.disabled&&bn(a,K,kX(oe,Pe)),$e=M_(Pe.ref)&&zs(oe)?"":oe,TX(Pe.ref)?[...Pe.ref.options].forEach(Ke=>Ke.selected=$e.includes(Ke.value)):Pe.refs?yb(Pe.ref)?Pe.refs.forEach(Ke=>{(!Ke.defaultChecked||!Ke.disabled)&&(Array.isArray($e)?Ke.checked=!!$e.find(Kt=>Kt===Ke.value):Ke.checked=$e===Ke.value||!!$e)}):Pe.refs.forEach(Ke=>Ke.checked=Ke.value===$e):D2(Pe.ref)?Pe.ref.value="":(Pe.ref.value=$e,Pe.ref.type||f.state.next({name:K,values:Mr(a)})))}(me.shouldDirty||me.shouldTouch)&&S(K,$e,me.shouldTouch,me.shouldDirty,!0),me.shouldValidate&&O(K)},V=(K,oe,me)=>{for(const Le in oe){if(!oe.hasOwnProperty(Le))return;const $e=oe[Le],Pe=K+"."+Le,Ke=ze(r,Pe);(l.array.has(K)||_r($e)||Ke&&!Ke._f)&&!Vd($e)?V(Pe,$e,me):L(Pe,$e,me)}},B=(K,oe,me={})=>{const Le=ze(r,K),$e=l.array.has(K),Pe=Mr(oe);bn(a,K,Pe),$e?(f.array.next({name:K,values:Mr(a)}),(d.isDirty||d.dirtyFields||h.isDirty||h.dirtyFields)&&me.shouldDirty&&f.state.next({name:K,dirtyFields:Bg(s,a),isDirty:A(K,Pe)})):Le&&!Le._f&&!zs(Pe)?V(K,Pe,me):L(K,Pe,me),pB(K,l)&&f.state.next({...n,name:K}),f.state.next({name:o.mount?K:void 0,values:Mr(a)})},M=async K=>{o.mount=!0;const oe=K.target;let me=oe.name,Le=!0;const $e=ze(r,me),Pe=dn=>{Le=Number.isNaN(dn)||Vd(dn)&&isNaN(dn.getTime())||xl(dn,ze(a,me,dn))},Ke=fB(e.mode),Kt=fB(e.reValidateMode);if($e){let dn,ys;const Na=oe.type?hB($e._f):jX(K),_i=K.type===D_.BLUR||K.type===D_.FOCUS_OUT,hd=!XTe($e._f)&&!e.resolver&&!ze(n.errors,me)&&!$e._f.deps||eCe(_i,ze(n.touchedFields,me),n.isSubmitted,Kt,Ke),ji=pB(me,l,_i);bn(a,me,Na),_i?($e._f.onBlur&&$e._f.onBlur(K),c&&c(0)):$e._f.onChange&&$e._f.onChange(K);const ti=S(me,Na,_i),dc=!ai(ti)||ji;if(!_i&&f.state.next({name:me,type:K.type,values:Mr(a)}),hd)return(d.isValid||h.isValid)&&(e.mode==="onBlur"?_i&&p():_i||p()),dc&&f.state.next({name:me,...ji?{}:ti});if(!_i&&ji&&f.state.next({...n}),e.resolver){const{errors:ss}=await j([me]);if(Pe(Na),Le){const sf=gB(n.errors,r,me),cl=gB(ss,r,sf.name||me);dn=cl.error,me=cl.name,ys=ai(ss)}}else v([me],!0),dn=(await vB($e,l.disabled,a,m,e.shouldUseNativeValidation))[me],v([me]),Pe(Na),Le&&(dn?ys=!1:(d.isValid||h.isValid)&&(ys=await T(r,!0)));Le&&($e._f.deps&&O($e._f.deps),P(me,ys,dn,ti))}},$=(K,oe)=>{if(ze(n.errors,oe)&&K.focus)return K.focus(),1},O=async(K,oe={})=>{let me,Le;const $e=Uy(K);if(e.resolver){const Pe=await g(yr(K)?K:$e);me=ai(Pe),Le=K?!$e.some(Ke=>ze(Pe,Ke)):me}else K?(Le=(await Promise.all($e.map(async Pe=>{const Ke=ze(r,Pe);return await T(Ke&&Ke._f?{[Pe]:Ke}:Ke)}))).every(Boolean),!(!Le&&!n.isValid)&&p()):Le=me=await T(r);return f.state.next({...!ko(K)||(d.isValid||h.isValid)&&me!==n.isValid?{}:{name:K},...e.resolver||!K?{isValid:me}:{},errors:n.errors}),oe.shouldFocus&&!Le&&zy(r,$,K?$e:l.mount),Le},W=K=>{const oe={...o.mount?a:s};return yr(K)?oe:ko(K)?ze(oe,K):K.map(me=>ze(oe,me))},Z=(K,oe)=>({invalid:!!ze((oe||n).errors,K),isDirty:!!ze((oe||n).dirtyFields,K),error:ze((oe||n).errors,K),isValidating:!!ze(n.validatingFields,K),isTouched:!!ze((oe||n).touchedFields,K)}),ae=K=>{K&&Uy(K).forEach(oe=>Nr(n.errors,oe)),f.state.next({errors:K?n.errors:{}})},Ae=(K,oe,me)=>{const Le=(ze(r,K,{_f:{}})._f||{}).ref,$e=ze(n.errors,K)||{},{ref:Pe,message:Ke,type:Kt,...dn}=$e;bn(n.errors,K,{...dn,...oe,ref:Le}),f.state.next({name:K,errors:n.errors,isValid:!1}),me&&me.shouldFocus&&Le&&Le.focus&&Le.focus()},ie=(K,oe)=>za(K)?f.state.subscribe({next:me=>"values"in me&&K(I(void 0,oe),me)}):I(K,oe,!0),pe=K=>f.state.subscribe({next:oe=>{JTe(K.name,oe.name,K.exact)&&ZTe(oe,K.formState||d,En,K.reRenderRoot)&&K.callback({values:{...a},...n,...oe,defaultValues:s})}}).unsubscribe,Ue=K=>(o.mount=!0,h={...h,...K.formState},pe({...K,formState:h})),Ne=(K,oe={})=>{for(const me of K?Uy(K):l.mount)l.mount.delete(me),l.array.delete(me),oe.keepValue||(Nr(r,me),Nr(a,me)),!oe.keepError&&Nr(n.errors,me),!oe.keepDirty&&Nr(n.dirtyFields,me),!oe.keepTouched&&Nr(n.touchedFields,me),!oe.keepIsValidating&&Nr(n.validatingFields,me),!e.shouldUnregister&&!oe.keepDefaultValue&&Nr(s,me);f.state.next({values:Mr(a)}),f.state.next({...n,...oe.keepDirty?{isDirty:A()}:{}}),!oe.keepIsValid&&p()},nt=({disabled:K,name:oe})=>{(Ci(K)&&o.mount||K||l.disabled.has(oe))&&(K?l.disabled.add(oe):l.disabled.delete(oe))},fe=(K,oe={})=>{let me=ze(r,K);const Le=Ci(oe.disabled)||Ci(e.disabled);return bn(r,K,{...me||{},_f:{...me&&me._f?me._f:{ref:{name:K}},name:K,mount:!0,...oe}}),l.mount.add(K),me?nt({disabled:Ci(oe.disabled)?oe.disabled:e.disabled,name:K}):C(K,!0,oe.value),{...Le?{disabled:oe.disabled||e.disabled}:{},...e.progressive?{required:!!oe.required,min:Ug(oe.min),max:Ug(oe.max),minLength:Ug(oe.minLength),maxLength:Ug(oe.maxLength),pattern:Ug(oe.pattern)}:{},name:K,onChange:M,onBlur:M,ref:$e=>{if($e){fe(K,oe),me=ze(r,K);const Pe=yr($e.value)&&$e.querySelectorAll&&$e.querySelectorAll("input,select,textarea")[0]||$e,Ke=HTe(Pe),Kt=me._f.refs||[];if(Ke?Kt.find(dn=>dn===Pe):Pe===me._f.ref)return;bn(r,K,{_f:{...me._f,...Ke?{refs:[...Kt.filter(tA),Pe,...Array.isArray(ze(s,K))?[{}]:[]],ref:{type:Pe.type,name:K}}:{ref:Pe}}}),C(K,!1,void 0,Pe)}else me=ze(r,K,{}),me._f&&(me._f.mount=!1),(e.shouldUnregister||oe.shouldUnregister)&&!(NX(l.array,K)&&o.action)&&l.unMount.add(K)}}},_e=()=>e.shouldFocusError&&zy(r,$,l.mount),ge=K=>{Ci(K)&&(f.state.next({disabled:K}),zy(r,(oe,me)=>{const Le=ze(r,me);Le&&(oe.disabled=Le._f.disabled||K,Array.isArray(Le._f.refs)&&Le._f.refs.forEach($e=>{$e.disabled=Le._f.disabled||K}))},0,!1))},ce=(K,oe)=>async me=>{let Le;me&&(me.preventDefault&&me.preventDefault(),me.persist&&me.persist());let $e=Mr(a);if(f.state.next({isSubmitting:!0}),e.resolver){const{errors:Pe,values:Ke}=await j();n.errors=Pe,$e=Mr(Ke)}else await T(r);if(l.disabled.size)for(const Pe of l.disabled)Nr($e,Pe);if(Nr(n.errors,"root"),ai(n.errors)){f.state.next({errors:{}});try{await K($e,me)}catch(Pe){Le=Pe}}else oe&&await oe({...n.errors},me),_e(),setTimeout(_e);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ai(n.errors)&&!Le,submitCount:n.submitCount+1,errors:n.errors}),Le)throw Le},He=(K,oe={})=>{ze(r,K)&&(yr(oe.defaultValue)?B(K,Mr(ze(s,K))):(B(K,oe.defaultValue),bn(s,K,Mr(oe.defaultValue))),oe.keepTouched||Nr(n.touchedFields,K),oe.keepDirty||(Nr(n.dirtyFields,K),n.isDirty=oe.defaultValue?A(K,Mr(ze(s,K))):A()),oe.keepError||(Nr(n.errors,K),d.isValid&&p()),f.state.next({...n}))},rt=(K,oe={})=>{const me=K?Mr(K):s,Le=Mr(me),$e=ai(K),Pe=$e?s:Le;if(oe.keepDefaultValues||(s=me),!oe.keepValues){if(oe.keepDirtyValues){const Ke=new Set([...l.mount,...Object.keys(Bg(s,a))]);for(const Kt of Array.from(Ke))ze(n.dirtyFields,Kt)?bn(Pe,Kt,ze(a,Kt)):B(Kt,ze(Pe,Kt))}else{if(P2&&yr(K))for(const Ke of l.mount){const Kt=ze(r,Ke);if(Kt&&Kt._f){const dn=Array.isArray(Kt._f.refs)?Kt._f.refs[0]:Kt._f.ref;if(M_(dn)){const ys=dn.closest("form");if(ys){ys.reset();break}}}}if(oe.keepFieldsRef)for(const Ke of l.mount)B(Ke,ze(Pe,Ke));else r={}}a=e.shouldUnregister?oe.keepDefaultValues?Mr(s):{}:Mr(Pe),f.array.next({values:{...Pe}}),f.state.next({values:{...Pe}})}l={mount:oe.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!oe.keepIsValid||!!oe.keepDirtyValues,o.watch=!!e.shouldUnregister,f.state.next({submitCount:oe.keepSubmitCount?n.submitCount:0,isDirty:$e?!1:oe.keepDirty?n.isDirty:!!(oe.keepDefaultValues&&!xl(K,s)),isSubmitted:oe.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:$e?{}:oe.keepDirtyValues?oe.keepDefaultValues&&a?Bg(s,a):n.dirtyFields:oe.keepDefaultValues&&K?Bg(s,K):oe.keepDirty?n.dirtyFields:{},touchedFields:oe.keepTouched?n.touchedFields:{},errors:oe.keepErrors?n.errors:{},isSubmitSuccessful:oe.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},zt=(K,oe)=>rt(za(K)?K(a):K,oe),nn=(K,oe={})=>{const me=ze(r,K),Le=me&&me._f;if(Le){const $e=Le.refs?Le.refs[0]:Le.ref;$e.focus&&($e.focus(),oe.shouldSelect&&za($e.select)&&$e.select())}},En=K=>{n={...n,...K}},on={control:{register:fe,unregister:Ne,getFieldState:Z,handleSubmit:ce,setError:Ae,_subscribe:pe,_runSchema:j,_focusError:_e,_getWatch:I,_getDirty:A,_setValid:p,_setFieldArray:b,_setDisabledField:nt,_setErrors:w,_getFieldArray:k,_reset:rt,_resetDefaultValues:()=>za(e.defaultValues)&&e.defaultValues().then(K=>{zt(K,e.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:E,_disableForm:ge,_subjects:f,_proxyFormState:d,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(K){o=K},get _defaultValues(){return s},get _names(){return l},set _names(K){l=K},get _formState(){return n},get _options(){return e},set _options(K){e={...e,...K}}},subscribe:Ue,trigger:O,register:fe,handleSubmit:ce,watch:ie,setValue:B,getValues:W,reset:zt,resetField:He,clearErrors:ae,unregister:Ne,setError:Ae,setFocus:nn,getFieldState:Z};return{...on,formControl:on}}function td(t={}){const e=F.useRef(void 0),n=F.useRef(void 0),[r,s]=F.useState({isDirty:!1,isValidating:!1,isLoading:za(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:za(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!za(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...l}=sCe(t);e.current={...l,formState:r}}const a=e.current.control;return a._options=t,O2(()=>{const o=a._subscribe({formState:a._proxyFormState,callback:()=>s({...a._formState}),reRenderRoot:!0});return s(l=>({...l,isReady:!0})),a._formState.isReady=!0,o},[a]),F.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),F.useEffect(()=>{t.mode&&(a._options.mode=t.mode),t.reValidateMode&&(a._options.reValidateMode=t.reValidateMode)},[a,t.mode,t.reValidateMode]),F.useEffect(()=>{t.errors&&(a._setErrors(t.errors),a._focusError())},[a,t.errors]),F.useEffect(()=>{t.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,t.shouldUnregister]),F.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),F.useEffect(()=>{t.values&&!xl(t.values,n.current)?(a._reset(t.values,{keepFieldsRef:!0,...a._options.resetOptions}),n.current=t.values,s(o=>({...o}))):a._resetDefaultValues()},[a,t.values]),F.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),e.current.formState=SX(r,a),e.current}const xB=(t,e,n)=>{if(t&&"reportValidity"in t){const r=ze(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},OX=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?xB(r.ref,n,t):r.refs&&r.refs.forEach(s=>xB(s,n,t))}},iCe=(t,e)=>{e.shouldUseNativeValidation&&OX(t,e);const n={};for(const r in t){const s=ze(e.fields,r),a=Object.assign(t[r]||{},{ref:s&&s.ref});if(aCe(e.names||Object.keys(t),r)){const o=Object.assign({},ze(n,r));bn(o,"root",a),bn(n,r,o)}else bn(n,r,a)}return n},aCe=(t,e)=>t.some(n=>n.startsWith(e+"."));var oCe=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,a=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:a,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(d){return d.errors.forEach(function(h){return t.push(h)})}),e){var c=n[o].types,u=c&&c[r.code];n[o]=AX(o,e,n,s,u?[].concat(u,r.message):r.message)}t.shift()}return n},nd=function(t,e,n){return n===void 0&&(n={}),function(r,s,a){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return a.shouldUseNativeValidation&&OX({},a),{errors:{},values:n.raw?r:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:iCe(oCe(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},hn;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const a={};for(const o of s)a[o]=o;return a},t.getValidEnumValues=s=>{const a=t.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),o={};for(const l of a)o[l]=s[l];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(a){return s[a]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&a.push(o);return a},t.find=(s,a)=>{for(const o of s)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,a=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(hn||(hn={}));var bB;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(bB||(bB={}));const dt=hn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Oc=t=>{switch(typeof t){case"undefined":return dt.undefined;case"string":return dt.string;case"number":return Number.isNaN(t)?dt.nan:dt.number;case"boolean":return dt.boolean;case"function":return dt.function;case"bigint":return dt.bigint;case"symbol":return dt.symbol;case"object":return Array.isArray(t)?dt.array:t===null?dt.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?dt.promise:typeof Map<"u"&&t instanceof Map?dt.map:typeof Set<"u"&&t instanceof Set?dt.set:typeof Date<"u"&&t instanceof Date?dt.date:dt.object;default:return dt.unknown}},Oe=hn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Xl extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(a){return a.message},r={_errors:[]},s=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(n(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return s(this),r}static assert(e){if(!(e instanceof Xl))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,hn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)if(s.path.length>0){const a=s.path[0];n[a]=n[a]||[],n[a].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Xl.create=t=>new Xl(t);const uP=(t,e)=>{let n;switch(t.code){case Oe.invalid_type:t.received===dt.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Oe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,hn.jsonStringifyReplacer)}`;break;case Oe.unrecognized_keys:n=`Unrecognized key(s) in object: ${hn.joinValues(t.keys,", ")}`;break;case Oe.invalid_union:n="Invalid input";break;case Oe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${hn.joinValues(t.options)}`;break;case Oe.invalid_enum_value:n=`Invalid enum value. Expected ${hn.joinValues(t.options)}, received '${t.received}'`;break;case Oe.invalid_arguments:n="Invalid function arguments";break;case Oe.invalid_return_type:n="Invalid function return type";break;case Oe.invalid_date:n="Invalid date";break;case Oe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:hn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Oe.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Oe.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Oe.custom:n="Invalid input";break;case Oe.invalid_intersection_types:n="Intersection results could not be merged";break;case Oe.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Oe.not_finite:n="Number must be finite";break;default:n=e.defaultError,hn.assertNever(t)}return{message:n}};let lCe=uP;function cCe(){return lCe}const uCe=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,a=[...n,...s.path||[]],o={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let l="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:e,defaultError:l}).message;return{...s,path:a,message:l}};function Ye(t,e){const n=cCe(),r=uCe({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===uP?void 0:uP].filter(s=>!!s)});t.common.issues.push(r)}class Ui{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Ot;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const a=await s.key,o=await s.value;r.push({key:a,value:o})}return Ui.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:a,value:o}=s;if(a.status==="aborted"||o.status==="aborted")return Ot;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[a.value]=o.value)}return{status:e.value,value:r}}}const Ot=Object.freeze({status:"aborted"}),vy=t=>({status:"dirty",value:t}),wa=t=>({status:"valid",value:t}),wB=t=>t.status==="aborted",_B=t=>t.status==="dirty",Jm=t=>t.status==="valid",F_=t=>typeof Promise<"u"&&t instanceof Promise;var ft;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ft||(ft={}));class Bu{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const jB=(t,e)=>{if(Jm(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Xl(t.common.issues);return this._error=n,this._error}}};function Gt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,l)=>{const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??r??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??n??l.defaultError}},description:s}}class un{get description(){return this._def.description}_getType(e){return Oc(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Oc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ui,ctx:{common:e.parent.common,data:e.data,parsedType:Oc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(F_(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Oc(e)},s=this._parseSync({data:e,path:r.path,parent:r});return jB(r,s)}"~validate"(e){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Oc(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:n});return Jm(a)?{value:a.value}:{issues:n.common.issues}}catch(a){(s=(r=a==null?void 0:a.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(a=>Jm(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Oc(e)},s=this._parse({data:e,path:r.path,parent:r}),a=await(F_(s)?s:Promise.resolve(s));return jB(r,a)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,a)=>{const o=e(s),l=()=>a.addIssue({code:Oe.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new tp({schema:this,typeName:Dt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ju.create(this,this._def)}nullable(){return np.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ho.create(this)}promise(){return z_.create(this,this._def)}or(e){return B_.create([this,e],this._def)}and(e){return U_.create(this,e,this._def)}transform(e){return new tp({...Gt(this._def),schema:this,typeName:Dt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new mP({...Gt(this._def),innerType:this,defaultValue:n,typeName:Dt.ZodDefault})}brand(){return new RCe({typeName:Dt.ZodBranded,type:this,...Gt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new pP({...Gt(this._def),innerType:this,catchValue:n,typeName:Dt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return L2.create(this,e)}readonly(){return gP.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const dCe=/^c[^\s-]{8,}$/i,hCe=/^[0-9a-z]+$/,fCe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,mCe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,pCe=/^[a-z0-9_-]{21}$/i,gCe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,yCe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,vCe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,xCe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let nA;const bCe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,wCe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,_Ce=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,jCe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,NCe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,SCe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,DX="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ECe=new RegExp(`^${DX}$`);function MX(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function ACe(t){return new RegExp(`^${MX(t)}$`)}function TCe(t){let e=`${DX}T${MX(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function CCe(t,e){return!!((e==="v4"||!e)&&bCe.test(t)||(e==="v6"||!e)&&_Ce.test(t))}function PCe(t,e){if(!gCe.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function ICe(t,e){return!!((e==="v4"||!e)&&wCe.test(t)||(e==="v6"||!e)&&jCe.test(t))}class iu extends un{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==dt.string){const a=this._getOrReturnCtx(e);return Ye(a,{code:Oe.invalid_type,expected:dt.string,received:a.parsedType}),Ot}const r=new Ui;let s;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(s=this._getOrReturnCtx(e,s),Ye(s,{code:Oe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(s=this._getOrReturnCtx(e,s),Ye(s,{code:Oe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,l=e.data.length<a.value;(o||l)&&(s=this._getOrReturnCtx(e,s),o?Ye(s,{code:Oe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&Ye(s,{code:Oe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")vCe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ye(s,{validation:"email",code:Oe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")nA||(nA=new RegExp(xCe,"u")),nA.test(e.data)||(s=this._getOrReturnCtx(e,s),Ye(s,{validation:"emoji",code:Oe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")mCe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ye(s,{validation:"uuid",code:Oe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")pCe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ye(s,{validation:"nanoid",code:Oe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")dCe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ye(s,{validation:"cuid",code:Oe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")hCe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ye(s,{validation:"cuid2",code:Oe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")fCe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ye(s,{validation:"ulid",code:Oe.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Ye(s,{validation:"url",code:Oe.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Ye(s,{validation:"regex",code:Oe.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(e,s),Ye(s,{code:Oe.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(s=this._getOrReturnCtx(e,s),Ye(s,{code:Oe.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(s=this._getOrReturnCtx(e,s),Ye(s,{code:Oe.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?TCe(a).test(e.data)||(s=this._getOrReturnCtx(e,s),Ye(s,{code:Oe.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?ECe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ye(s,{code:Oe.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?ACe(a).test(e.data)||(s=this._getOrReturnCtx(e,s),Ye(s,{code:Oe.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?yCe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ye(s,{validation:"duration",code:Oe.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?CCe(e.data,a.version)||(s=this._getOrReturnCtx(e,s),Ye(s,{validation:"ip",code:Oe.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?PCe(e.data,a.alg)||(s=this._getOrReturnCtx(e,s),Ye(s,{validation:"jwt",code:Oe.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?ICe(e.data,a.version)||(s=this._getOrReturnCtx(e,s),Ye(s,{validation:"cidr",code:Oe.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?NCe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ye(s,{validation:"base64",code:Oe.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?SCe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ye(s,{validation:"base64url",code:Oe.invalid_string,message:a.message}),r.dirty()):hn.assertNever(a);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Oe.invalid_string,...ft.errToObj(r)})}_addCheck(e){return new iu({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ft.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ft.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ft.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ft.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ft.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ft.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ft.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ft.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ft.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ft.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ft.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ft.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ft.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...ft.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ft.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ft.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ft.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ft.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ft.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ft.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ft.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ft.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ft.errToObj(n)})}nonempty(e){return this.min(1,ft.errToObj(e))}trim(){return new iu({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new iu({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new iu({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}iu.create=t=>new iu({checks:[],typeName:Dt.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Gt(t)});function kCe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,a=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return a%o/10**s}class Vv extends un{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==dt.number){const a=this._getOrReturnCtx(e);return Ye(a,{code:Oe.invalid_type,expected:dt.number,received:a.parsedType}),Ot}let r;const s=new Ui;for(const a of this._def.checks)a.kind==="int"?hn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Ye(r,{code:Oe.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Ye(r,{code:Oe.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Ye(r,{code:Oe.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?kCe(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),Ye(r,{code:Oe.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Ye(r,{code:Oe.not_finite,message:a.message}),s.dirty()):hn.assertNever(a);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ft.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ft.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ft.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ft.toString(n))}setLimit(e,n,r,s){return new Vv({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ft.toString(s)}]})}_addCheck(e){return new Vv({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ft.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ft.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ft.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ft.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ft.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ft.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ft.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ft.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ft.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&hn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Vv.create=t=>new Vv({checks:[],typeName:Dt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Gt(t)});class Bv extends un{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==dt.bigint)return this._getInvalidInput(e);let r;const s=new Ui;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Ye(r,{code:Oe.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Ye(r,{code:Oe.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Ye(r,{code:Oe.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):hn.assertNever(a);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Ye(n,{code:Oe.invalid_type,expected:dt.bigint,received:n.parsedType}),Ot}gte(e,n){return this.setLimit("min",e,!0,ft.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ft.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ft.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ft.toString(n))}setLimit(e,n,r,s){return new Bv({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ft.toString(s)}]})}_addCheck(e){return new Bv({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ft.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ft.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ft.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ft.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ft.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Bv.create=t=>new Bv({checks:[],typeName:Dt.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Gt(t)});class dP extends un{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==dt.boolean){const r=this._getOrReturnCtx(e);return Ye(r,{code:Oe.invalid_type,expected:dt.boolean,received:r.parsedType}),Ot}return wa(e.data)}}dP.create=t=>new dP({typeName:Dt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Gt(t)});class V_ extends un{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==dt.date){const a=this._getOrReturnCtx(e);return Ye(a,{code:Oe.invalid_type,expected:dt.date,received:a.parsedType}),Ot}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return Ye(a,{code:Oe.invalid_date}),Ot}const r=new Ui;let s;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(s=this._getOrReturnCtx(e,s),Ye(s,{code:Oe.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(s=this._getOrReturnCtx(e,s),Ye(s,{code:Oe.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):hn.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new V_({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ft.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ft.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}V_.create=t=>new V_({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Dt.ZodDate,...Gt(t)});class NB extends un{_parse(e){if(this._getType(e)!==dt.symbol){const r=this._getOrReturnCtx(e);return Ye(r,{code:Oe.invalid_type,expected:dt.symbol,received:r.parsedType}),Ot}return wa(e.data)}}NB.create=t=>new NB({typeName:Dt.ZodSymbol,...Gt(t)});class SB extends un{_parse(e){if(this._getType(e)!==dt.undefined){const r=this._getOrReturnCtx(e);return Ye(r,{code:Oe.invalid_type,expected:dt.undefined,received:r.parsedType}),Ot}return wa(e.data)}}SB.create=t=>new SB({typeName:Dt.ZodUndefined,...Gt(t)});class EB extends un{_parse(e){if(this._getType(e)!==dt.null){const r=this._getOrReturnCtx(e);return Ye(r,{code:Oe.invalid_type,expected:dt.null,received:r.parsedType}),Ot}return wa(e.data)}}EB.create=t=>new EB({typeName:Dt.ZodNull,...Gt(t)});class AB extends un{constructor(){super(...arguments),this._any=!0}_parse(e){return wa(e.data)}}AB.create=t=>new AB({typeName:Dt.ZodAny,...Gt(t)});class TB extends un{constructor(){super(...arguments),this._unknown=!0}_parse(e){return wa(e.data)}}TB.create=t=>new TB({typeName:Dt.ZodUnknown,...Gt(t)});class Uu extends un{_parse(e){const n=this._getOrReturnCtx(e);return Ye(n,{code:Oe.invalid_type,expected:dt.never,received:n.parsedType}),Ot}}Uu.create=t=>new Uu({typeName:Dt.ZodNever,...Gt(t)});class CB extends un{_parse(e){if(this._getType(e)!==dt.undefined){const r=this._getOrReturnCtx(e);return Ye(r,{code:Oe.invalid_type,expected:dt.void,received:r.parsedType}),Ot}return wa(e.data)}}CB.create=t=>new CB({typeName:Dt.ZodVoid,...Gt(t)});class Ho extends un{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==dt.array)return Ye(n,{code:Oe.invalid_type,expected:dt.array,received:n.parsedType}),Ot;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,l=n.data.length<s.exactLength.value;(o||l)&&(Ye(n,{code:o?Oe.too_big:Oe.too_small,minimum:l?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Ye(n,{code:Oe.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Ye(n,{code:Oe.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>s.type._parseAsync(new Bu(n,o,n.path,l)))).then(o=>Ui.mergeArray(r,o));const a=[...n.data].map((o,l)=>s.type._parseSync(new Bu(n,o,n.path,l)));return Ui.mergeArray(r,a)}get element(){return this._def.type}min(e,n){return new Ho({...this._def,minLength:{value:e,message:ft.toString(n)}})}max(e,n){return new Ho({...this._def,maxLength:{value:e,message:ft.toString(n)}})}length(e,n){return new Ho({...this._def,exactLength:{value:e,message:ft.toString(n)}})}nonempty(e){return this.min(1,e)}}Ho.create=(t,e)=>new Ho({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Dt.ZodArray,...Gt(e)});function Af(t){if(t instanceof lr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ju.create(Af(r))}return new lr({...t._def,shape:()=>e})}else return t instanceof Ho?new Ho({...t._def,type:Af(t.element)}):t instanceof ju?ju.create(Af(t.unwrap())):t instanceof np?np.create(Af(t.unwrap())):t instanceof kh?kh.create(t.items.map(e=>Af(e))):t}class lr extends un{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=hn.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==dt.object){const u=this._getOrReturnCtx(e);return Ye(u,{code:Oe.invalid_type,expected:dt.object,received:u.parsedType}),Ot}const{status:r,ctx:s}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Uu&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const d=a[u],h=s.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Bu(s,h,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof Uu){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(u==="strict")l.length>0&&(Ye(s,{code:Oe.unrecognized_keys,keys:l}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const h=s.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Bu(s,h,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const h=await d.key,f=await d.value;u.push({key:h,value:f,alwaysSet:d.alwaysSet})}return u}).then(u=>Ui.mergeObjectSync(r,u)):Ui.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return ft.errToObj,new lr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var a,o;const s=((o=(a=this._def).errorMap)==null?void 0:o.call(a,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:ft.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new lr({...this._def,unknownKeys:"strip"})}passthrough(){return new lr({...this._def,unknownKeys:"passthrough"})}extend(e){return new lr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new lr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Dt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new lr({...this._def,catchall:e})}pick(e){const n={};for(const r of hn.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new lr({...this._def,shape:()=>n})}omit(e){const n={};for(const r of hn.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new lr({...this._def,shape:()=>n})}deepPartial(){return Af(this)}partial(e){const n={};for(const r of hn.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new lr({...this._def,shape:()=>n})}required(e){const n={};for(const r of hn.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof ju;)a=a._def.innerType;n[r]=a}return new lr({...this._def,shape:()=>n})}keyof(){return LX(hn.objectKeys(this.shape))}}lr.create=(t,e)=>new lr({shape:()=>t,unknownKeys:"strip",catchall:Uu.create(),typeName:Dt.ZodObject,...Gt(e)});lr.strictCreate=(t,e)=>new lr({shape:()=>t,unknownKeys:"strict",catchall:Uu.create(),typeName:Dt.ZodObject,...Gt(e)});lr.lazycreate=(t,e)=>new lr({shape:t,unknownKeys:"strip",catchall:Uu.create(),typeName:Dt.ZodObject,...Gt(e)});class B_ extends un{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new Xl(l.ctx.common.issues));return Ye(n,{code:Oe.invalid_union,unionErrors:o}),Ot}if(n.common.async)return Promise.all(r.map(async a=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let a;const o=[];for(const c of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=c._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!a&&(a={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(c=>new Xl(c));return Ye(n,{code:Oe.invalid_union,unionErrors:l}),Ot}}get options(){return this._def.options}}B_.create=(t,e)=>new B_({options:t,typeName:Dt.ZodUnion,...Gt(e)});function hP(t,e){const n=Oc(t),r=Oc(e);if(t===e)return{valid:!0,data:t};if(n===dt.object&&r===dt.object){const s=hn.objectKeys(e),a=hn.objectKeys(t).filter(l=>s.indexOf(l)!==-1),o={...t,...e};for(const l of a){const c=hP(t[l],e[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(n===dt.array&&r===dt.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let a=0;a<t.length;a++){const o=t[a],l=e[a],c=hP(o,l);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===dt.date&&r===dt.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class U_ extends un{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(a,o)=>{if(wB(a)||wB(o))return Ot;const l=hP(a.value,o.value);return l.valid?((_B(a)||_B(o))&&n.dirty(),{status:n.value,value:l.data}):(Ye(r,{code:Oe.invalid_intersection_types}),Ot)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,o])=>s(a,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}U_.create=(t,e,n)=>new U_({left:t,right:e,typeName:Dt.ZodIntersection,...Gt(n)});class kh extends un{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==dt.array)return Ye(r,{code:Oe.invalid_type,expected:dt.array,received:r.parsedType}),Ot;if(r.data.length<this._def.items.length)return Ye(r,{code:Oe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ot;!this._def.rest&&r.data.length>this._def.items.length&&(Ye(r,{code:Oe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Bu(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(a).then(o=>Ui.mergeArray(n,o)):Ui.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new kh({...this._def,rest:e})}}kh.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new kh({items:t,typeName:Dt.ZodTuple,rest:null,...Gt(e)})};class PB extends un{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==dt.map)return Ye(r,{code:Oe.invalid_type,expected:dt.map,received:r.parsedType}),Ot;const s=this._def.keyType,a=this._def.valueType,o=[...r.data.entries()].map(([l,c],u)=>({key:s._parse(new Bu(r,l,r.path,[u,"key"])),value:a._parse(new Bu(r,c,r.path,[u,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return Ot;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return Ot;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}}}}PB.create=(t,e,n)=>new PB({valueType:e,keyType:t,typeName:Dt.ZodMap,...Gt(n)});class Uv extends un{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==dt.set)return Ye(r,{code:Oe.invalid_type,expected:dt.set,received:r.parsedType}),Ot;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Ye(r,{code:Oe.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Ye(r,{code:Oe.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const a=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return Ot;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const l=[...r.data.values()].map((c,u)=>a._parse(new Bu(r,c,r.path,u)));return r.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(e,n){return new Uv({...this._def,minSize:{value:e,message:ft.toString(n)}})}max(e,n){return new Uv({...this._def,maxSize:{value:e,message:ft.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Uv.create=(t,e)=>new Uv({valueType:t,minSize:null,maxSize:null,typeName:Dt.ZodSet,...Gt(e)});class IB extends un{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}IB.create=(t,e)=>new IB({getter:t,typeName:Dt.ZodLazy,...Gt(e)});class fP extends un{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Ye(n,{received:n.data,code:Oe.invalid_literal,expected:this._def.value}),Ot}return{status:"valid",value:e.data}}get value(){return this._def.value}}fP.create=(t,e)=>new fP({value:t,typeName:Dt.ZodLiteral,...Gt(e)});function LX(t,e){return new ep({values:t,typeName:Dt.ZodEnum,...Gt(e)})}class ep extends un{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Ye(n,{expected:hn.joinValues(r),received:n.parsedType,code:Oe.invalid_type}),Ot}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Ye(n,{received:n.data,code:Oe.invalid_enum_value,options:r}),Ot}return wa(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return ep.create(e,{...this._def,...n})}exclude(e,n=this._def){return ep.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}ep.create=LX;class kB extends un{_parse(e){const n=hn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==dt.string&&r.parsedType!==dt.number){const s=hn.objectValues(n);return Ye(r,{expected:hn.joinValues(s),received:r.parsedType,code:Oe.invalid_type}),Ot}if(this._cache||(this._cache=new Set(hn.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=hn.objectValues(n);return Ye(r,{received:r.data,code:Oe.invalid_enum_value,options:s}),Ot}return wa(e.data)}get enum(){return this._def.values}}kB.create=(t,e)=>new kB({values:t,typeName:Dt.ZodNativeEnum,...Gt(e)});class z_ extends un{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==dt.promise&&n.common.async===!1)return Ye(n,{code:Oe.invalid_type,expected:dt.promise,received:n.parsedType}),Ot;const r=n.parsedType===dt.promise?n.data:Promise.resolve(n.data);return wa(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}z_.create=(t,e)=>new z_({type:t,typeName:Dt.ZodPromise,...Gt(e)});class tp extends un{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Dt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:o=>{Ye(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){const o=s.transform(r.data,a);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return Ot;const c=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return c.status==="aborted"?Ot:c.status==="dirty"||n.value==="dirty"?vy(c.value):c});{if(n.value==="aborted")return Ot;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?Ot:l.status==="dirty"||n.value==="dirty"?vy(l.value):l}}if(s.type==="refinement"){const o=l=>{const c=s.refinement(l,a);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?Ot:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?Ot:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Jm(o))return Ot;const l=s.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Jm(o)?Promise.resolve(s.transform(o.value,a)).then(l=>({status:n.value,value:l})):Ot);hn.assertNever(s)}}tp.create=(t,e,n)=>new tp({schema:t,typeName:Dt.ZodEffects,effect:e,...Gt(n)});tp.createWithPreprocess=(t,e,n)=>new tp({schema:e,effect:{type:"preprocess",transform:t},typeName:Dt.ZodEffects,...Gt(n)});class ju extends un{_parse(e){return this._getType(e)===dt.undefined?wa(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ju.create=(t,e)=>new ju({innerType:t,typeName:Dt.ZodOptional,...Gt(e)});class np extends un{_parse(e){return this._getType(e)===dt.null?wa(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}np.create=(t,e)=>new np({innerType:t,typeName:Dt.ZodNullable,...Gt(e)});class mP extends un{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===dt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}mP.create=(t,e)=>new mP({innerType:t,typeName:Dt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Gt(e)});class pP extends un{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return F_(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Xl(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Xl(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}pP.create=(t,e)=>new pP({innerType:t,typeName:Dt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Gt(e)});class RB extends un{_parse(e){if(this._getType(e)!==dt.nan){const r=this._getOrReturnCtx(e);return Ye(r,{code:Oe.invalid_type,expected:dt.nan,received:r.parsedType}),Ot}return{status:"valid",value:e.data}}}RB.create=t=>new RB({typeName:Dt.ZodNaN,...Gt(t)});class RCe extends un{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class L2 extends un{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Ot:a.status==="dirty"?(n.dirty(),vy(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Ot:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new L2({in:e,out:n,typeName:Dt.ZodPipeline})}}class gP extends un{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Jm(s)&&(s.value=Object.freeze(s.value)),s);return F_(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}gP.create=(t,e)=>new gP({innerType:t,typeName:Dt.ZodReadonly,...Gt(e)});lr.lazycreate;var Dt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Dt||(Dt={}));const We=iu.create,OB=dP.create;Uu.create;Ho.create;const rd=lr.create;lr.strictCreate;B_.create;U_.create;kh.create;const $X=fP.create,FX=ep.create;z_.create;ju.create;np.create;var OCe="Label",VX=_.forwardRef((t,e)=>i.jsx(st.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));VX.displayName=OCe;var BX=VX;const DCe=Wh("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ee=_.forwardRef(({className:t,...e},n)=>i.jsx(BX,{ref:n,className:ve(DCe(),t),...e}));ee.displayName=BX.displayName;function Jp({children:t,title:e,subtitle:n,visualContent:r}){return i.jsxs("div",{className:"min-h-screen w-full grid grid-cols-1 lg:grid-cols-2 overflow-hidden bg-background",children:[i.jsxs("div",{className:"hidden lg:flex relative flex-col justify-between p-12 bg-[#0F172A] text-white overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 z-0",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('/grid-pattern.svg')] opacity-10"}),i.jsx("div",{className:"absolute -left-[20%] -top-[20%] w-[60%] h-[60%] bg-blue-600/20 rounded-full blur-[120px]"}),i.jsx("div",{className:"absolute -right-[20%] -bottom-[20%] w-[60%] h-[60%] bg-indigo-600/20 rounded-full blur-[120px]"})]}),i.jsx("div",{className:"relative z-10",children:i.jsx(Ov,{variant:"full",size:"lg",className:"text-white [&_span]:text-white"})}),i.jsx("div",{className:"relative z-10 flex-1 flex items-center justify-center",children:i.jsx(Ur.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"w-full max-w-md",children:r})}),i.jsx("div",{className:"relative z-10 space-y-4",children:i.jsxs("blockquote",{className:"space-y-2",children:[i.jsx("p",{className:"text-lg font-medium text-slate-200 leading-relaxed",children:`"ZedBooks has completely transformed how we manage our organization's finances. It's not just a ledger; it's peace of mind."`}),i.jsx("footer",{className:"text-sm text-slate-400",children:" Sarah M., Financial Director"})]})})]}),i.jsxs("div",{className:"relative flex flex-col items-center justify-center p-6 sm:p-12 lg:p-24 bg-background",children:[i.jsx("div",{className:"lg:hidden absolute top-6 left-6",children:i.jsx(Ov,{variant:"full",size:"md"})}),i.jsxs(Ur.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},className:"w-full max-w-[440px] space-y-8",children:[i.jsxs("div",{className:"space-y-2 text-center lg:text-left",children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:e}),i.jsx("p",{className:"text-muted-foreground",children:n})]}),i.jsx("div",{className:"bg-card/50 backdrop-blur-sm rounded-xl",children:t})]}),i.jsx("div",{className:"absolute bottom-4 right-4 text-xs text-muted-foreground/50",children:i.jsx(ZO,{})})]})]})}const MCe=()=>i.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-6",children:[i.jsxs(Ur.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.8},className:"absolute top-1/4 -left-12 bg-white/10 backdrop-blur-md border border-white/20 p-4 rounded-xl w-64 shadow-2xl",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("div",{className:"h-8 w-8 rounded-full bg-emerald-500/20 flex items-center justify-center",children:i.jsx(zw,{className:"h-5 w-5 text-emerald-400"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-slate-300",children:"Payroll Status"}),i.jsx("p",{className:"text-sm font-semibold text-white",children:"Processed Successfully"})]})]}),i.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full w-full bg-emerald-500"})})]}),i.jsxs(Ur.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4,duration:.8},className:"bg-slate-900/80 backdrop-blur-xl border border-slate-700/50 p-6 rounded-2xl w-full max-w-sm shadow-2xl relative z-10",children:[i.jsxs("div",{className:"flex justify-between items-end mb-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-400",children:"Total Revenue"}),i.jsx("p",{className:"text-3xl font-bold text-white",children:"K 245,000"})]}),i.jsx("div",{className:"text-emerald-400 text-sm font-medium",children:"+12.5%"})]}),i.jsx("div",{className:"flex items-end gap-2 h-24",children:[40,65,50,80,55,90,75].map((t,e)=>i.jsx("div",{className:"flex-1 bg-blue-500/20 rounded-t-sm relative overflow-hidden group",children:i.jsx(Ur.div,{initial:{height:0},animate:{height:`${t}%`},transition:{delay:.8+e*.1,duration:1},className:"absolute bottom-0 w-full bg-gradient-to-t from-blue-600 to-cyan-400 w-full"})},e))})]})]}),LCe=rd({email:We().email("Invalid email address"),password:We().min(6,"Password must be at least 6 characters")});function DB({onForgotPassword:t,onSignup:e,onLoginSuccess:n}){const[r,s]=_.useState(!1),{register:a,handleSubmit:o,formState:{errors:l}}=td({resolver:nd(LCe)}),c=async u=>{s(!0);try{await Ps.signIn(u.email,u.password),Y.success("Welcome back!"),n()}catch(d){const h=d instanceof Error?d.message:"Failed to log in";Y.error(h)}finally{s(!1)}};return i.jsx(Jp,{title:"Welcome back",subtitle:"Sign in to continue to your dashboard",visualContent:i.jsx(MCe,{}),children:i.jsxs("form",{onSubmit:o(c),className:"space-y-5 p-1",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"email",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(Gu,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{id:"email",type:"email",placeholder:"name@company.com",className:"pl-10",...a("email")})]}),l.email&&i.jsx("p",{className:"text-sm text-destructive",children:l.email.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ee,{htmlFor:"password",children:"Password"}),i.jsx("button",{type:"button",onClick:t,className:"text-sm text-primary hover:underline font-medium",children:"Forgot Password?"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Vm,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{id:"password",type:"password",placeholder:"",className:"pl-10",...a("password")})]}),l.password&&i.jsx("p",{className:"text-sm text-destructive",children:l.password.message})]}),i.jsx(H,{type:"submit",className:"w-full",size:"lg",disabled:r,children:r?i.jsxs(i.Fragment,{children:[i.jsx(mn,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("span",{className:"w-full border-t"})}),i.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:i.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(H,{variant:"outline",disabled:!0,className:"w-full",children:"Google"}),i.jsx(H,{variant:"outline",disabled:!0,className:"w-full",children:"Microsoft"})]}),i.jsxs("div",{className:"text-center text-sm text-muted-foreground mt-6",children:["Don't have an account?"," ",i.jsx("button",{type:"button",onClick:e,className:"text-primary hover:underline font-medium",children:"Sign up"})]})]})})}function $2(t){const e=_.useRef({value:t,previous:t});return _.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var $Ce=[" ","Enter","ArrowUp","ArrowDown"],FCe=[" ","Enter"],Rh="Select",[fS,mS,VCe]=dN(Rh),[eg,Utt]=ps(Rh,[VCe,Vp]),pS=Vp(),[BCe,sd]=eg(Rh),[UCe,zCe]=eg(Rh),UX=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:f,required:m,form:y}=t,p=pS(e),[v,b]=_.useState(null),[x,w]=_.useState(null),[C,S]=_.useState(!1),P=sb(u),[j,g]=oo({prop:r,defaultProp:s??!1,onChange:a,caller:Rh}),[T,E]=oo({prop:o,defaultProp:l,onChange:c,caller:Rh}),A=_.useRef(null),I=v?y||!!v.closest("form"):!0,[k,L]=_.useState(new Set),V=Array.from(k).map(B=>B.props.value).join(";");return i.jsx(dR,{...p,children:i.jsxs(BCe,{required:m,scope:e,trigger:v,onTriggerChange:b,valueNode:x,onValueNodeChange:w,valueNodeHasChildren:C,onValueNodeHasChildrenChange:S,contentId:oa(),value:T,onValueChange:E,open:j,onOpenChange:g,dir:P,triggerPointerDownPosRef:A,disabled:f,children:[i.jsx(fS.Provider,{scope:e,children:i.jsx(UCe,{scope:t.__scopeSelect,onNativeOptionAdd:_.useCallback(B=>{L(M=>new Set(M).add(B))},[]),onNativeOptionRemove:_.useCallback(B=>{L(M=>{const $=new Set(M);return $.delete(B),$})},[]),children:n})}),I?i.jsxs(hZ,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:h,value:T,onChange:B=>E(B.target.value),disabled:f,form:y,children:[T===void 0?i.jsx("option",{value:""}):null,Array.from(k)]},V):null]})})};UX.displayName=Rh;var zX="SelectTrigger",qX=_.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,a=pS(n),o=sd(zX,n),l=o.disabled||r,c=Mt(e,o.onTriggerChange),u=mS(n),d=_.useRef("touch"),[h,f,m]=mZ(p=>{const v=u().filter(w=>!w.disabled),b=v.find(w=>w.value===o.value),x=pZ(v,p,b);x!==void 0&&o.onValueChange(x.value)}),y=p=>{l||(o.onOpenChange(!0),m()),p&&(o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return i.jsx(hR,{asChild:!0,...a,children:i.jsx(st.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":fZ(o.value)?"":void 0,...s,ref:c,onClick:Me(s.onClick,p=>{p.currentTarget.focus(),d.current!=="mouse"&&y(p)}),onPointerDown:Me(s.onPointerDown,p=>{d.current=p.pointerType;const v=p.target;v.hasPointerCapture(p.pointerId)&&v.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(y(p),p.preventDefault())}),onKeyDown:Me(s.onKeyDown,p=>{const v=h.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&f(p.key),!(v&&p.key===" ")&&$Ce.includes(p.key)&&(y(),p.preventDefault())})})})});qX.displayName=zX;var WX="SelectValue",HX=_.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:a,placeholder:o="",...l}=t,c=sd(WX,n),{onValueNodeHasChildrenChange:u}=c,d=a!==void 0,h=Mt(e,c.onValueNodeChange);return fr(()=>{u(d)},[u,d]),i.jsx(st.span,{...l,ref:h,style:{pointerEvents:"none"},children:fZ(c.value)?i.jsx(i.Fragment,{children:o}):a})});HX.displayName=WX;var qCe="SelectIcon",KX=_.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return i.jsx(st.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});KX.displayName=qCe;var WCe="SelectPortal",GX=t=>i.jsx(Dx,{asChild:!0,...t});GX.displayName=WCe;var Oh="SelectContent",YX=_.forwardRef((t,e)=>{const n=sd(Oh,t.__scopeSelect),[r,s]=_.useState();if(fr(()=>{s(new DocumentFragment)},[]),!n.open){const a=r;return a?zh.createPortal(i.jsx(QX,{scope:t.__scopeSelect,children:i.jsx(fS.Slot,{scope:t.__scopeSelect,children:i.jsx("div",{children:t.children})})}),a):null}return i.jsx(XX,{...t,ref:e})});YX.displayName=Oh;var ka=10,[QX,id]=eg(Oh),HCe="SelectContentImpl",KCe=ph("SelectContent.RemoveScroll"),XX=_.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:y,hideWhenDetached:p,avoidCollisions:v,...b}=t,x=sd(Oh,n),[w,C]=_.useState(null),[S,P]=_.useState(null),j=Mt(e,Ne=>C(Ne)),[g,T]=_.useState(null),[E,A]=_.useState(null),I=mS(n),[k,L]=_.useState(!1),V=_.useRef(!1);_.useEffect(()=>{if(w)return CO(w)},[w]),TO();const B=_.useCallback(Ne=>{const[nt,...fe]=I().map(ce=>ce.ref.current),[_e]=fe.slice(-1),ge=document.activeElement;for(const ce of Ne)if(ce===ge||(ce==null||ce.scrollIntoView({block:"nearest"}),ce===nt&&S&&(S.scrollTop=0),ce===_e&&S&&(S.scrollTop=S.scrollHeight),ce==null||ce.focus(),document.activeElement!==ge))return},[I,S]),M=_.useCallback(()=>B([g,w]),[B,g,w]);_.useEffect(()=>{k&&M()},[k,M]);const{onOpenChange:$,triggerPointerDownPosRef:O}=x;_.useEffect(()=>{if(w){let Ne={x:0,y:0};const nt=_e=>{var ge,ce;Ne={x:Math.abs(Math.round(_e.pageX)-(((ge=O.current)==null?void 0:ge.x)??0)),y:Math.abs(Math.round(_e.pageY)-(((ce=O.current)==null?void 0:ce.y)??0))}},fe=_e=>{Ne.x<=10&&Ne.y<=10?_e.preventDefault():w.contains(_e.target)||$(!1),document.removeEventListener("pointermove",nt),O.current=null};return O.current!==null&&(document.addEventListener("pointermove",nt),document.addEventListener("pointerup",fe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",nt),document.removeEventListener("pointerup",fe,{capture:!0})}}},[w,$,O]),_.useEffect(()=>{const Ne=()=>$(!1);return window.addEventListener("blur",Ne),window.addEventListener("resize",Ne),()=>{window.removeEventListener("blur",Ne),window.removeEventListener("resize",Ne)}},[$]);const[W,Z]=mZ(Ne=>{const nt=I().filter(ge=>!ge.disabled),fe=nt.find(ge=>ge.ref.current===document.activeElement),_e=pZ(nt,Ne,fe);_e&&setTimeout(()=>_e.ref.current.focus())}),ae=_.useCallback((Ne,nt,fe)=>{const _e=!V.current&&!fe;(x.value!==void 0&&x.value===nt||_e)&&(T(Ne),_e&&(V.current=!0))},[x.value]),Ae=_.useCallback(()=>w==null?void 0:w.focus(),[w]),ie=_.useCallback((Ne,nt,fe)=>{const _e=!V.current&&!fe;(x.value!==void 0&&x.value===nt||_e)&&A(Ne)},[x.value]),pe=r==="popper"?yP:ZX,Ue=pe===yP?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:y,hideWhenDetached:p,avoidCollisions:v}:{};return i.jsx(QX,{scope:n,content:w,viewport:S,onViewportChange:P,itemRefCallback:ae,selectedItem:g,onItemLeave:Ae,itemTextRefCallback:ie,focusSelectedItem:M,selectedItemText:E,position:r,isPositioned:k,searchRef:W,children:i.jsx(QN,{as:KCe,allowPinchZoom:!0,children:i.jsx(KN,{asChild:!0,trapped:x.open,onMountAutoFocus:Ne=>{Ne.preventDefault()},onUnmountAutoFocus:Me(s,Ne=>{var nt;(nt=x.trigger)==null||nt.focus({preventScroll:!0}),Ne.preventDefault()}),children:i.jsx(Dp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:Ne=>Ne.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:i.jsx(pe,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:Ne=>Ne.preventDefault(),...b,...Ue,onPlaced:()=>L(!0),ref:j,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:Me(b.onKeyDown,Ne=>{const nt=Ne.ctrlKey||Ne.altKey||Ne.metaKey;if(Ne.key==="Tab"&&Ne.preventDefault(),!nt&&Ne.key.length===1&&Z(Ne.key),["ArrowUp","ArrowDown","Home","End"].includes(Ne.key)){let _e=I().filter(ge=>!ge.disabled).map(ge=>ge.ref.current);if(["ArrowUp","End"].includes(Ne.key)&&(_e=_e.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ne.key)){const ge=Ne.target,ce=_e.indexOf(ge);_e=_e.slice(ce+1)}setTimeout(()=>B(_e)),Ne.preventDefault()}})})})})})})});XX.displayName=HCe;var GCe="SelectItemAlignedPosition",ZX=_.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,a=sd(Oh,n),o=id(Oh,n),[l,c]=_.useState(null),[u,d]=_.useState(null),h=Mt(e,j=>d(j)),f=mS(n),m=_.useRef(!1),y=_.useRef(!0),{viewport:p,selectedItem:v,selectedItemText:b,focusSelectedItem:x}=o,w=_.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&p&&v&&b){const j=a.trigger.getBoundingClientRect(),g=u.getBoundingClientRect(),T=a.valueNode.getBoundingClientRect(),E=b.getBoundingClientRect();if(a.dir!=="rtl"){const ge=E.left-g.left,ce=T.left-ge,He=j.left-ce,rt=j.width+He,zt=Math.max(rt,g.width),nn=window.innerWidth-ka,En=FC(ce,[ka,Math.max(ka,nn-zt)]);l.style.minWidth=rt+"px",l.style.left=En+"px"}else{const ge=g.right-E.right,ce=window.innerWidth-T.right-ge,He=window.innerWidth-j.right-ce,rt=j.width+He,zt=Math.max(rt,g.width),nn=window.innerWidth-ka,En=FC(ce,[ka,Math.max(ka,nn-zt)]);l.style.minWidth=rt+"px",l.style.right=En+"px"}const A=f(),I=window.innerHeight-ka*2,k=p.scrollHeight,L=window.getComputedStyle(u),V=parseInt(L.borderTopWidth,10),B=parseInt(L.paddingTop,10),M=parseInt(L.borderBottomWidth,10),$=parseInt(L.paddingBottom,10),O=V+B+k+$+M,W=Math.min(v.offsetHeight*5,O),Z=window.getComputedStyle(p),ae=parseInt(Z.paddingTop,10),Ae=parseInt(Z.paddingBottom,10),ie=j.top+j.height/2-ka,pe=I-ie,Ue=v.offsetHeight/2,Ne=v.offsetTop+Ue,nt=V+B+Ne,fe=O-nt;if(nt<=ie){const ge=A.length>0&&v===A[A.length-1].ref.current;l.style.bottom="0px";const ce=u.clientHeight-p.offsetTop-p.offsetHeight,He=Math.max(pe,Ue+(ge?Ae:0)+ce+M),rt=nt+He;l.style.height=rt+"px"}else{const ge=A.length>0&&v===A[0].ref.current;l.style.top="0px";const He=Math.max(ie,V+p.offsetTop+(ge?ae:0)+Ue)+fe;l.style.height=He+"px",p.scrollTop=nt-ie+p.offsetTop}l.style.margin=`${ka}px 0`,l.style.minHeight=W+"px",l.style.maxHeight=I+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[f,a.trigger,a.valueNode,l,u,p,v,b,a.dir,r]);fr(()=>w(),[w]);const[C,S]=_.useState();fr(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const P=_.useCallback(j=>{j&&y.current===!0&&(w(),x==null||x(),y.current=!1)},[w,x]);return i.jsx(QCe,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:P,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:i.jsx(st.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});ZX.displayName=GCe;var YCe="SelectPopperPosition",yP=_.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=ka,...a}=t,o=pS(n);return i.jsx(fR,{...o,...a,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});yP.displayName=YCe;var[QCe,F2]=eg(Oh,{}),vP="SelectViewport",JX=_.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,a=id(vP,n),o=F2(vP,n),l=Mt(e,a.onViewportChange),c=_.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(fS.Slot,{scope:n,children:i.jsx(st.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Me(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&h){const m=Math.abs(c.current-d.scrollTop);if(m>0){const y=window.innerHeight-ka*2,p=parseFloat(h.style.minHeight),v=parseFloat(h.style.height),b=Math.max(p,v);if(b<y){const x=b+m,w=Math.min(y,x),C=x-w;h.style.height=w+"px",h.style.bottom==="0px"&&(d.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});JX.displayName=vP;var eZ="SelectGroup",[XCe,ZCe]=eg(eZ),JCe=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=oa();return i.jsx(XCe,{scope:n,id:s,children:i.jsx(st.div,{role:"group","aria-labelledby":s,...r,ref:e})})});JCe.displayName=eZ;var tZ="SelectLabel",nZ=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=ZCe(tZ,n);return i.jsx(st.div,{id:s.id,...r,ref:e})});nZ.displayName=tZ;var q_="SelectItem",[ePe,rZ]=eg(q_),sZ=_.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:a,...o}=t,l=sd(q_,n),c=id(q_,n),u=l.value===r,[d,h]=_.useState(a??""),[f,m]=_.useState(!1),y=Mt(e,x=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,x,r,s)}),p=oa(),v=_.useRef("touch"),b=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(ePe,{scope:n,value:r,disabled:s,textId:p,isSelected:u,onItemTextChange:_.useCallback(x=>{h(w=>w||((x==null?void 0:x.textContent)??"").trim())},[]),children:i.jsx(fS.ItemSlot,{scope:n,value:r,disabled:s,textValue:d,children:i.jsx(st.div,{role:"option","aria-labelledby":p,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:y,onFocus:Me(o.onFocus,()=>m(!0)),onBlur:Me(o.onBlur,()=>m(!1)),onClick:Me(o.onClick,()=>{v.current!=="mouse"&&b()}),onPointerUp:Me(o.onPointerUp,()=>{v.current==="mouse"&&b()}),onPointerDown:Me(o.onPointerDown,x=>{v.current=x.pointerType}),onPointerMove:Me(o.onPointerMove,x=>{var w;v.current=x.pointerType,s?(w=c.onItemLeave)==null||w.call(c):v.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Me(o.onPointerLeave,x=>{var w;x.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:Me(o.onKeyDown,x=>{var C;((C=c.searchRef)==null?void 0:C.current)!==""&&x.key===" "||(FCe.includes(x.key)&&b(),x.key===" "&&x.preventDefault())})})})})});sZ.displayName=q_;var xy="SelectItemText",iZ=_.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...a}=t,o=sd(xy,n),l=id(xy,n),c=rZ(xy,n),u=zCe(xy,n),[d,h]=_.useState(null),f=Mt(e,b=>h(b),c.onItemTextChange,b=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,b,c.value,c.disabled)}),m=d==null?void 0:d.textContent,y=_.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:p,onNativeOptionRemove:v}=u;return fr(()=>(p(y),()=>v(y)),[p,v,y]),i.jsxs(i.Fragment,{children:[i.jsx(st.span,{id:c.textId,...a,ref:f}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?zh.createPortal(a.children,o.valueNode):null]})});iZ.displayName=xy;var aZ="SelectItemIndicator",oZ=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return rZ(aZ,n).isSelected?i.jsx(st.span,{"aria-hidden":!0,...r,ref:e}):null});oZ.displayName=aZ;var xP="SelectScrollUpButton",lZ=_.forwardRef((t,e)=>{const n=id(xP,t.__scopeSelect),r=F2(xP,t.__scopeSelect),[s,a]=_.useState(!1),o=Mt(e,r.onScrollButtonChange);return fr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(uZ,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});lZ.displayName=xP;var bP="SelectScrollDownButton",cZ=_.forwardRef((t,e)=>{const n=id(bP,t.__scopeSelect),r=F2(bP,t.__scopeSelect),[s,a]=_.useState(!1),o=Mt(e,r.onScrollButtonChange);return fr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;a(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(uZ,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});cZ.displayName=bP;var uZ=_.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,a=id("SelectScrollButton",n),o=_.useRef(null),l=mS(n),c=_.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return _.useEffect(()=>()=>c(),[c]),fr(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),i.jsx(st.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Me(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Me(s.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Me(s.onPointerLeave,()=>{c()})})}),tPe="SelectSeparator",dZ=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return i.jsx(st.div,{"aria-hidden":!0,...r,ref:e})});dZ.displayName=tPe;var wP="SelectArrow",nPe=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=pS(n),a=sd(wP,n),o=id(wP,n);return a.open&&o.position==="popper"?i.jsx(mR,{...s,...r,ref:e}):null});nPe.displayName=wP;var rPe="SelectBubbleInput",hZ=_.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=_.useRef(null),a=Mt(r,s),o=$2(e);return _.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&d){const h=new Event("change",{bubbles:!0});d.call(l,e),l.dispatchEvent(h)}},[o,e]),i.jsx(st.select,{...n,style:{...Rq,...n.style},ref:a,defaultValue:e})});hZ.displayName=rPe;function fZ(t){return t===""||t===void 0}function mZ(t){const e=hr(t),n=_.useRef(""),r=_.useRef(0),s=_.useCallback(o=>{const l=n.current+o;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),a=_.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function pZ(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=sPe(t,Math.max(a,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function sPe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var iPe=UX,gZ=qX,aPe=HX,oPe=KX,lPe=GX,yZ=YX,cPe=JX,vZ=nZ,xZ=sZ,uPe=iZ,dPe=oZ,bZ=lZ,wZ=cZ,_Z=dZ;const jZ="__lovable_empty__",Tt=({onValueChange:t,...e})=>i.jsx(iPe,{...e,onValueChange:n=>{t==null||t(n===jZ?"":n)}}),Ct=aPe,jt=_.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(gZ,{ref:r,className:ve("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,i.jsx(oPe,{asChild:!0,children:i.jsx(Qk,{className:"h-4 w-4 opacity-50"})})]}));jt.displayName=gZ.displayName;const NZ=_.forwardRef(({className:t,...e},n)=>i.jsx(bZ,{ref:n,className:ve("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(Uoe,{className:"h-4 w-4"})}));NZ.displayName=bZ.displayName;const SZ=_.forwardRef(({className:t,...e},n)=>i.jsx(wZ,{ref:n,className:ve("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(Qk,{className:"h-4 w-4"})}));SZ.displayName=wZ.displayName;const Nt=_.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>i.jsx(lPe,{children:i.jsxs(yZ,{ref:s,className:ve("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[i.jsx(NZ,{}),i.jsx(cPe,{className:ve("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),i.jsx(SZ,{})]})}));Nt.displayName=yZ.displayName;const hPe=_.forwardRef(({className:t,...e},n)=>i.jsx(vZ,{ref:n,className:ve("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));hPe.displayName=vZ.displayName;const be=_.forwardRef(({className:t,children:e,value:n,...r},s)=>i.jsxs(xZ,{ref:s,value:n===""?jZ:n,className:ve("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(dPe,{children:i.jsx($x,{className:"h-4 w-4"})})}),i.jsx(uPe,{children:e})]}));be.displayName=xZ.displayName;const fPe=_.forwardRef(({className:t,...e},n)=>i.jsx(_Z,{ref:n,className:ve("-mx-1 my-1 h-px bg-muted",t),...e}));fPe.displayName=_Z.displayName;const mPe=()=>i.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-8",children:[i.jsxs(Ur.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,duration:.5},className:"absolute top-20 right-10 bg-white p-4 rounded-xl shadow-2xl flex items-center gap-4 z-20",children:[i.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold",children:"+"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-800",children:"New Customer"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Just joined your network"})]})]}),i.jsxs("div",{className:"w-full max-w-sm bg-slate-800/50 backdrop-blur-md border border-slate-700/50 p-6 rounded-2xl relative",children:[i.jsxs("div",{className:"flex justify-between items-start mb-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-white font-semibold",children:"Monthly Growth"}),i.jsx("p",{className:"text-slate-400 text-sm",children:"Revenue vs Expenses"})]}),i.jsxs("div",{className:"bg-emerald-500/20 text-emerald-400 px-2 py-1 rounded text-xs font-bold flex items-center gap-1",children:[i.jsx(t8,{className:"h-3 w-3"})," 24%"]})]}),i.jsx("div",{className:"h-32 flex items-end justify-between gap-2",children:[30,45,35,60,50,75,65,90].map((t,e)=>i.jsx(Ur.div,{initial:{height:0},animate:{height:`${t}%`},transition:{delay:.5+e*.1,duration:.8,ease:"easeOut"},className:"w-full bg-gradient-to-t from-blue-600 to-indigo-400 rounded-t-sm opacity-80 hover:opacity-100 transition-opacity"},e))})]})]}),pPe=rd({organizationName:We().min(1,"Organization name is required"),email:We().email("Invalid email address"),password:We().min(6,"Password must be at least 6 characters"),phone:We().min(10,"Phone number must be at least 10 digits").regex(/^\+?[0-9]+$/,"Invalid phone number"),organizationType:FX(["business","non_profit"]),taxClassification:We().min(1,"Tax classification is required"),tpin:We().regex(/^\d{10}$/,"TPIN must be exactly 10 digits")});function gPe({onLogin:t,onSignupSuccess:e}){const[n,r]=_.useState(!1),{register:s,handleSubmit:a,setValue:o,watch:l,formState:{errors:c}}=td({resolver:nd(pPe),defaultValues:{organizationType:"business",taxClassification:""}}),u=l("organizationType"),d=async h=>{r(!0);try{await Ps.signUp({email:h.email,password:h.password,organizationName:h.organizationName,phone:h.phone,organizationType:h.organizationType,taxClassification:h.taxClassification,tpin:h.tpin}),Y.success("Account created successfully!"),e(h.email)}catch(f){const m=f instanceof Error?f.message:"Failed to create account";Y.error(m)}finally{r(!1)}};return i.jsx(Jp,{title:"Create Account",subtitle:"Start your journey with ZedBooks today",visualContent:i.jsx(mPe,{}),children:i.jsxs("form",{onSubmit:a(d),className:"space-y-4 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"orgName",children:"Organization Name"}),i.jsxs("div",{className:"relative",children:[i.jsx(Lx,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{id:"orgName",placeholder:"e.g. Acme Corp",className:"pl-10",...s("organizationName")})]}),c.organizationName&&i.jsx("p",{className:"text-sm text-destructive",children:c.organizationName.message})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Organization Type"}),i.jsxs(Tt,{onValueChange:h=>{o("organizationType",h),o("taxClassification","")},defaultValue:"business",children:[i.jsx(jt,{children:i.jsx(Ct,{placeholder:"Select type"})}),i.jsxs(Nt,{children:[i.jsx(be,{value:"business",children:"Business"}),i.jsx(be,{value:"non_profit",children:"Non-profit"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Tax Classification"}),i.jsxs(Tt,{onValueChange:h=>o("taxClassification",h),children:[i.jsx(jt,{children:i.jsx(Ct,{placeholder:"Select class"})}),i.jsx(Nt,{children:u==="business"?i.jsxs(i.Fragment,{children:[i.jsx(be,{value:"vat_registered",children:"VAT Registered"}),i.jsx(be,{value:"turnover_tax",children:"Turnover Tax"}),i.jsx(be,{value:"non_vat",children:"Non-VAT"})]}):i.jsxs(i.Fragment,{children:[i.jsx(be,{value:"tax_exempt",children:"Tax Exempt"}),i.jsx(be,{value:"grant_funded",children:"Grant Funded"}),i.jsx(be,{value:"charitable",children:"Charitable"})]})})]}),c.taxClassification&&i.jsx("p",{className:"text-sm text-destructive",children:c.taxClassification.message})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"TPIN (10 digits)"}),i.jsxs("div",{className:"relative",children:[i.jsx(l8,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"1234567890",className:"pl-10",...s("tpin"),onChange:h=>{const f=h.target.value.replace(/\D/g,"").slice(0,10);o("tpin",f)}})]}),c.tpin&&i.jsx("p",{className:"text-sm text-destructive",children:c.tpin.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"email",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(Gu,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{id:"email",type:"email",placeholder:"name@company.com",className:"pl-10",...s("email")})]}),c.email&&i.jsx("p",{className:"text-sm text-destructive",children:c.email.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"phone",children:"Phone"}),i.jsxs("div",{className:"relative",children:[i.jsx(c8,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{id:"phone",placeholder:"+260...",className:"pl-10",...s("phone")})]}),c.phone&&i.jsx("p",{className:"text-sm text-destructive",children:c.phone.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"password",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Vm,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{id:"password",type:"password",placeholder:"",className:"pl-10",...s("password")})]}),c.password&&i.jsx("p",{className:"text-sm text-destructive",children:c.password.message})]}),i.jsx(H,{type:"submit",className:"w-full",size:"lg",disabled:n,children:n?i.jsxs(i.Fragment,{children:[i.jsx(mn,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Account..."]}):"Create Account"}),i.jsxs("div",{className:"text-center text-sm text-muted-foreground mt-4",children:["Already have an account?"," ",i.jsx("button",{type:"button",onClick:t,className:"text-primary hover:underline font-medium",children:"Sign in"})]})]})})}const yPe=()=>i.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-8",children:[i.jsxs(Ur.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8},className:"bg-slate-800/50 backdrop-blur-xl border border-slate-700/50 p-8 rounded-full shadow-2xl relative",children:[i.jsx("div",{className:"absolute inset-0 bg-blue-500/20 rounded-full blur-xl animate-pulse"}),i.jsx(Jk,{className:"h-24 w-24 text-blue-400 relative z-10"})]}),i.jsxs("div",{className:"text-center space-y-2 max-w-xs",children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:"Secure Account Recovery"}),i.jsx("p",{className:"text-sm text-slate-400",children:"We use industry-standard encryption to verify your identity and protect your data."})]})]}),vPe=rd({email:We().email("Invalid email address")});function xPe({onLogin:t}){const[e,n]=_.useState(!1),{register:r,handleSubmit:s,formState:{errors:a},reset:o}=td({resolver:nd(vPe)}),l=async c=>{n(!0);try{await Ps.sendResetPasswordEmail(c.email),Y.success("Reset link sent! Please check your inbox."),o()}catch(u){const d=u instanceof Error?u.message:"Failed to send reset link";Y.error(d)}finally{n(!1)}};return i.jsx(Jp,{title:"Forgot Password?",subtitle:"No worries, we'll send you reset instructions.",visualContent:i.jsx(yPe,{}),children:i.jsxs("form",{onSubmit:s(l),className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"email",children:"Email Address"}),i.jsxs("div",{className:"relative",children:[i.jsx(Gu,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{id:"email",type:"email",placeholder:"name@company.com",className:"pl-10",...r("email")})]}),a.email&&i.jsx("p",{className:"text-sm text-destructive",children:a.email.message})]}),i.jsx(H,{type:"submit",className:"w-full",size:"lg",disabled:e,children:e?i.jsxs(i.Fragment,{children:[i.jsx(mn,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending Link..."]}):"Send Reset Link"}),i.jsx("div",{className:"text-center text-sm",children:i.jsx("button",{type:"button",onClick:t,className:"text-muted-foreground hover:text-primary transition-colors flex items-center justify-center gap-2 mx-auto",children:" Back to Login"})})]})})}const bPe=()=>i.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-8",children:[i.jsxs(Ur.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8},className:"bg-emerald-900/40 backdrop-blur-xl border border-emerald-500/30 p-8 rounded-full shadow-2xl relative",children:[i.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 rounded-full blur-xl animate-pulse"}),i.jsx(Jk,{className:"h-24 w-24 text-emerald-400 relative z-10"})]}),i.jsxs("div",{className:"text-center space-y-2 max-w-xs",children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:"Reset Credentials"}),i.jsx("p",{className:"text-sm text-slate-400",children:"Create a strong password to ensure your organization's data remains secure."})]})]}),wPe=rd({password:We().min(6,"Password must be at least 6 characters"),confirmPassword:We().min(6,"Password must be at least 6 characters")}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function _Pe({actionCode:t,onLogin:e}){const[n,r]=_.useState(!1),{register:s,handleSubmit:a,formState:{errors:o}}=td({resolver:nd(wPe)}),l=async c=>{r(!0);try{await Ape(b_,t,c.password),Y.success("Password updated successfully!"),e()}catch(u){const d=u instanceof Error?u.message:"Failed to update password";Y.error(d)}finally{r(!1)}};return i.jsx(Jp,{title:"Set New Password",subtitle:"Enter your new password below.",visualContent:i.jsx(bPe,{}),children:i.jsxs("form",{onSubmit:a(l),className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"password",children:"New Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Vm,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{id:"password",type:"password",placeholder:"",className:"pl-10",...s("password")})]}),o.password&&i.jsx("p",{className:"text-sm text-destructive",children:o.password.message})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"confirmPassword",children:"Confirm Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Vm,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{id:"confirmPassword",type:"password",placeholder:"",className:"pl-10",...s("confirmPassword")})]}),o.confirmPassword&&i.jsx("p",{className:"text-sm text-destructive",children:o.confirmPassword.message})]}),i.jsx(H,{type:"submit",className:"w-full",size:"lg",disabled:n,children:n?i.jsxs(i.Fragment,{children:[i.jsx(mn,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Password"}),i.jsx("div",{className:"text-center text-sm",children:i.jsx("button",{type:"button",onClick:e,className:"text-muted-foreground hover:text-primary transition-colors flex items-center justify-center gap-2 mx-auto",children:" Back to Login"})})]})})}const jPe=()=>i.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-8",children:[i.jsxs(Ur.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8},className:"bg-blue-900/40 backdrop-blur-xl border border-blue-500/30 p-8 rounded-full shadow-2xl relative",children:[i.jsx("div",{className:"absolute inset-0 bg-blue-500/20 rounded-full blur-xl animate-pulse"}),i.jsx(Gu,{className:"h-24 w-24 text-blue-400 relative z-10"})]}),i.jsxs("div",{className:"text-center space-y-2 max-w-xs",children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:"Check Your Inbox"}),i.jsx("p",{className:"text-sm text-slate-400",children:"We've sent a secure verification link to your email address."})]})]});function NPe({email:t,onLogin:e}){const[n,r]=_.useState(!1),[s,a]=_.useState(0);_.useEffect(()=>{if(s>0){const l=setTimeout(()=>a(s-1),1e3);return()=>clearTimeout(l)}},[s]);const o=async()=>{if(!(s>0)){r(!0);try{await Ps.resendVerificationEmail(),Y.success("Verification email resent!"),a(60)}catch(l){const c=l instanceof Error?l.message:"Failed to resend";Y.error(c)}finally{r(!1)}}};return i.jsx(Jp,{title:"Verify Your Email",subtitle:`We've sent a link to ${t}`,visualContent:i.jsx(jPe,{}),children:i.jsxs("div",{className:"space-y-6 text-center",children:[i.jsx("div",{className:"bg-muted/50 p-4 rounded-lg border border-border text-sm text-muted-foreground text-left",children:i.jsx("p",{children:"Click the link in the email we sent to verify your account. If you don't see it, check your spam folder."})}),i.jsx(H,{onClick:o,disabled:n||s>0,className:"w-full",variant:"outline",children:n?i.jsxs(i.Fragment,{children:[i.jsx(mn,{className:"mr-2 h-4 w-4 animate-spin"}),"Resending..."]}):s>0?i.jsxs(i.Fragment,{children:[i.jsx(d8,{className:"mr-2 h-4 w-4"}),"Resend in ",s,"s"]}):"Resend Verification Email"}),i.jsx("button",{type:"button",onClick:e,className:"text-primary hover:underline font-medium text-sm",children:"Back to Login"})]})})}function SPe(){const t=$n(),[e,n]=_.useState(!0),[r,s]=_.useState("login"),[a,o]=_.useState(""),[l,c]=_.useState(null),[u,d]=_.useState(null),h=_.useCallback(async m=>{try{try{await Ps.ensureCurrentMembership()}catch{}const y=await Be.getPrimaryMembershipByUser(m);if(!y){t("/setup",{replace:!0});return}const p=await Be.getCompanySettings(y.companyId);if(!(p!=null&&p.companyName)){t("/setup",{replace:!0});return}t("/dashboard",{replace:!0})}catch{t("/dashboard",{replace:!0})}},[t]),f=_.useCallback(async m=>{try{await Ps.acceptInvitation(m),Y.success("Invitation accepted. Your company access is configured."),sessionStorage.removeItem("pendingInviteToken")}catch(p){const v=p instanceof Error?p.message:"Unable to accept invitation";Y.error(`Invitation link error: ${v}`)}const y=new URL(window.location.href);y.searchParams.delete("token"),y.searchParams.delete("invite"),window.history.replaceState({},"",y.toString()),d(null)},[]);return _.useEffect(()=>{const m=new URLSearchParams(window.location.search),y=m.get("mode"),p=m.get("oobCode"),v=m.get("token")||m.get("invite"),b=m.get("view");if(v)d(v),sessionStorage.setItem("pendingInviteToken",v);else{const P=sessionStorage.getItem("pendingInviteToken");P&&d(P)}let x=!0;const w=()=>{const P=new URL(window.location.href);["mode","oobCode","apiKey","lang","continueUrl"].forEach(j=>P.searchParams.delete(j)),window.history.replaceState({},"",P.toString())};(async()=>{if(!qo){n(!1);return}if(y==="resetPassword"&&p){try{await Ppe(b_,p),x&&(c(p),s("reset-password"))}catch{Y.error("Invalid or expired password reset link."),s("login")}finally{x&&n(!1)}return}if(y==="verifyEmail"&&p){try{await Tpe(b_,p),Y.success("Email verified successfully. You can now log in."),w(),s("login")}catch{Y.error("Email verification link is invalid or expired."),s("login")}x&&n(!1);return}const P=Ps.getCurrentUser();if(P){const j=v||sessionStorage.getItem("pendingInviteToken");j&&await f(j),await h(P.uid)}else x&&(b==="signup"?s("signup"):b==="login"&&s("login"),n(!1))})();const S=Ps.onAuthStateChanged(async P=>{if(!x)return;if(!P){n(!1);return}const j=v||sessionStorage.getItem("pendingInviteToken");j&&await f(j),setTimeout(()=>{h(P.uid)},500)});return()=>{x=!1,S.unsubscribe()}},[f,h]),e?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:i.jsxs("div",{className:"text-center",children:[i.jsx(mn,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Checking authentication..."})]})}):r==="login"?i.jsx(DB,{onForgotPassword:()=>s("forgot-password"),onSignup:()=>s("signup"),onLoginSuccess:()=>{}}):r==="signup"?i.jsx(gPe,{onLogin:()=>s("login"),onSignupSuccess:m=>{o(m),s("verify-email")}}):r==="forgot-password"?i.jsx(xPe,{onLogin:()=>s("login")}):r==="reset-password"&&l?i.jsx(_Pe,{actionCode:l,onLogin:()=>s("login")}):r==="verify-email"?i.jsx(NPe,{email:a,onLogin:()=>s("login")}):i.jsx(DB,{onForgotPassword:()=>s("forgot-password"),onSignup:()=>s("signup"),onLoginSuccess:()=>{}})}function EPe(){const t=$n(),[e]=NR(),{user:n,isLoading:r}=ht(),s=(e.get("token")||"").trim(),[a,o]=_.useState(!0),[l,c]=_.useState(!1),[u,d]=_.useState(null),[h,f]=_.useState(null);return _.useEffect(()=>{(async()=>{if(!s){f("Invitation token is missing."),o(!1);return}try{const y=await kt("getInvitationByToken",{token:s});d(y)}catch(y){const p=y instanceof Error?y.message:"Invitation is invalid or expired.";f(p)}finally{o(!1)}})()},[s]),_.useEffect(()=>{!r&&n&&(async()=>{if(!(!n||!s)){c(!0);try{await Ps.acceptInvitation(s),Y.success("Invitation accepted. Redirecting to dashboard."),t("/dashboard",{replace:!0})}catch(y){const p=y instanceof Error?y.message:"Failed to accept invitation.";Y.error(p)}finally{c(!1)}}})()},[r,t,s,n]),a||r?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[i.jsx(mn,{className:"h-5 w-5 animate-spin"}),i.jsx("span",{children:"Loading invitation..."})]})}):h||!u?i.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:i.jsxs(X,{className:"w-full max-w-md",children:[i.jsxs(te,{children:[i.jsx(ne,{children:"Invitation Error"}),i.jsx(pt,{children:h||"Invitation not found."})]}),i.jsx(re,{children:i.jsx(H,{onClick:()=>t("/auth"),className:"w-full",children:"Go to Login"})})]})}):n?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[i.jsx(mn,{className:"h-5 w-5 animate-spin"}),i.jsx("span",{children:l?"Accepting invitation...":"Redirecting..."})]})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:i.jsxs(X,{className:"w-full max-w-md",children:[i.jsxs(te,{children:[i.jsx(ne,{children:"Organization Invitation"}),i.jsxs(pt,{children:["You were invited to join ",u.companyName||"this organization"," as ",u.role,"."]})]}),i.jsxs(re,{className:"space-y-2",children:[u.email&&i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Email: ",u.email]}),u.expiresAt&&i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Expires: ",new Date(u.expiresAt).toLocaleString()]}),i.jsxs("div",{className:"pt-4 space-y-2",children:[i.jsx(H,{className:"w-full",onClick:()=>t(`/auth?token=${encodeURIComponent(s)}${u.userExists?"":"&view=signup"}`),children:u.userExists?"Continue to Login":"Create Account to Accept"}),i.jsx(H,{variant:"outline",className:"w-full",onClick:()=>t("/auth"),children:"Cancel"})]})]})]})})}var EZ={exports:{}},AZ={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rp=_;function APe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var TPe=typeof Object.is=="function"?Object.is:APe,CPe=rp.useState,PPe=rp.useEffect,IPe=rp.useLayoutEffect,kPe=rp.useDebugValue;function RPe(t,e){var n=e(),r=CPe({inst:{value:n,getSnapshot:e}}),s=r[0].inst,a=r[1];return IPe(function(){s.value=n,s.getSnapshot=e,rA(s)&&a({inst:s})},[t,n,e]),PPe(function(){return rA(s)&&a({inst:s}),t(function(){rA(s)&&a({inst:s})})},[t]),kPe(n),n}function rA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!TPe(t,n)}catch{return!0}}function OPe(t,e){return e()}var DPe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?OPe:RPe;AZ.useSyncExternalStore=rp.useSyncExternalStore!==void 0?rp.useSyncExternalStore:DPe;EZ.exports=AZ;var MPe=EZ.exports;function LPe(){return MPe.useSyncExternalStore($Pe,()=>!0,()=>!1)}function $Pe(){return()=>{}}var V2="Avatar",[FPe,ztt]=ps(V2),[VPe,TZ]=FPe(V2),CZ=_.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,a]=_.useState("idle");return i.jsx(VPe,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:i.jsx(st.span,{...r,ref:e})})});CZ.displayName=V2;var PZ="AvatarImage",IZ=_.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...a}=t,o=TZ(PZ,n),l=BPe(r,a),c=hr(u=>{s(u),o.onImageLoadingStatusChange(u)});return fr(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?i.jsx(st.img,{...a,ref:e,src:r}):null});IZ.displayName=PZ;var kZ="AvatarFallback",RZ=_.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,a=TZ(kZ,n),[o,l]=_.useState(r===void 0);return _.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&a.imageLoadingStatus!=="loaded"?i.jsx(st.span,{...s,ref:e}):null});RZ.displayName=kZ;function MB(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function BPe(t,{referrerPolicy:e,crossOrigin:n}){const r=LPe(),s=_.useRef(null),a=r?(s.current||(s.current=new window.Image),s.current):null,[o,l]=_.useState(()=>MB(a,t));return fr(()=>{l(MB(a,t))},[a,t]),fr(()=>{const c=h=>()=>{l(h)};if(!a)return;const u=c("loaded"),d=c("error");return a.addEventListener("load",u),a.addEventListener("error",d),e&&(a.referrerPolicy=e),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",u),a.removeEventListener("error",d)}},[a,n,e]),o}var OZ=CZ,DZ=IZ,MZ=RZ;const _P=_.forwardRef(({className:t,...e},n)=>i.jsx(OZ,{ref:n,className:ve("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));_P.displayName=OZ.displayName;const UPe=_.forwardRef(({className:t,...e},n)=>i.jsx(DZ,{ref:n,className:ve("aspect-square h-full w-full",t),...e}));UPe.displayName=DZ.displayName;const jP=_.forwardRef(({className:t,...e},n)=>i.jsx(MZ,{ref:n,className:ve("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));jP.displayName=MZ.displayName;const zPe=Wh("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ve({className:t,variant:e,...n}){return i.jsx("div",{className:ve(zPe({variant:e}),t),...n})}var gS="Switch",[qPe,qtt]=ps(gS),[WPe,HPe]=qPe(gS),LZ=_.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=t,[f,m]=_.useState(null),y=Mt(e,w=>m(w)),p=_.useRef(!1),v=f?d||!!f.closest("form"):!0,[b,x]=oo({prop:s,defaultProp:a??!1,onChange:u,caller:gS});return i.jsxs(WPe,{scope:n,checked:b,disabled:l,children:[i.jsx(st.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":BZ(b),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:y,onClick:Me(t.onClick,w=>{x(C=>!C),v&&(p.current=w.isPropagationStopped(),p.current||w.stopPropagation())})}),v&&i.jsx(VZ,{control:f,bubbles:!p.current,name:r,value:c,checked:b,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});LZ.displayName=gS;var $Z="SwitchThumb",FZ=_.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=HPe($Z,n);return i.jsx(st.span,{"data-state":BZ(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});FZ.displayName=$Z;var KPe="SwitchBubbleInput",VZ=_.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},a)=>{const o=_.useRef(null),l=Mt(o,a),c=$2(n),u=lR(e);return _.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&m){const y=new Event("click",{bubbles:r});m.call(d,n),d.dispatchEvent(y)}},[c,n,r]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});VZ.displayName=KPe;function BZ(t){return t?"checked":"unchecked"}var UZ=LZ,GPe=FZ;const us=_.forwardRef(({className:t,...e},n)=>i.jsx(UZ,{className:ve("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:n,children:i.jsx(GPe,{className:ve("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));us.displayName=UZ.displayName;const YPe=[{min:0,max:5100,rate:0},{min:5100,max:7100,rate:.2},{min:7100,max:9200,rate:.3},{min:9200,max:1/0,rate:.37}],QPe=.05,XPe=1342,ZPe=.01,JPe=250;function zZ(t){let e=0,n=t;for(const r of YPe){if(n<=0)break;const s=Math.min(n,r.max-r.min);e+=s*r.rate,n-=s}return Math.round(e*100)/100}function qZ(t){const e=Math.round(t*QPe*100)/100,n=Math.min(e,XPe);return{employee:n,employer:n}}function WZ(t){const e=Math.round(t*ZPe*100)/100,n=Math.min(e,JPe);return{employee:n,employer:n}}function eIe(t,e=0,n=0,r=0,s=0,a=0){const o=t+e+n+r,l=qZ(o),c=WZ(t),u=zZ(o),d=l.employee+c.employee+u+s+a,h=o-d;return{basicSalary:t,housingAllowance:e,transportAllowance:n,otherAllowances:r,grossSalary:o,paye:u,napsaEmployee:l.employee,napsaEmployer:l.employer,nhimaEmployee:c.employee,nhimaEmployer:c.employer,advancesDeducted:s,totalDeductions:d,netSalary:h}}function ue(t){return`K${t.toLocaleString("en-ZM",{minimumFractionDigits:2,maximumFractionDigits:2})}`}var tIe=Array.isArray,wi=tIe,nIe=typeof Mb=="object"&&Mb&&Mb.Object===Object&&Mb,HZ=nIe,rIe=HZ,sIe=typeof self=="object"&&self&&self.Object===Object&&self,iIe=rIe||sIe||Function("return this")(),ol=iIe,aIe=ol,oIe=aIe.Symbol,vb=oIe,LB=vb,KZ=Object.prototype,lIe=KZ.hasOwnProperty,cIe=KZ.toString,zg=LB?LB.toStringTag:void 0;function uIe(t){var e=lIe.call(t,zg),n=t[zg];try{t[zg]=void 0;var r=!0}catch{}var s=cIe.call(t);return r&&(e?t[zg]=n:delete t[zg]),s}var dIe=uIe,hIe=Object.prototype,fIe=hIe.toString;function mIe(t){return fIe.call(t)}var pIe=mIe,$B=vb,gIe=dIe,yIe=pIe,vIe="[object Null]",xIe="[object Undefined]",FB=$B?$B.toStringTag:void 0;function bIe(t){return t==null?t===void 0?xIe:vIe:FB&&FB in Object(t)?gIe(t):yIe(t)}var ac=bIe;function wIe(t){return t!=null&&typeof t=="object"}var oc=wIe,_Ie=ac,jIe=oc,NIe="[object Symbol]";function SIe(t){return typeof t=="symbol"||jIe(t)&&_Ie(t)==NIe}var tg=SIe,EIe=wi,AIe=tg,TIe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,CIe=/^\w*$/;function PIe(t,e){if(EIe(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||AIe(t)?!0:CIe.test(t)||!TIe.test(t)||e!=null&&t in Object(e)}var B2=PIe;function IIe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var ad=IIe;const ng=xn(ad);var kIe=ac,RIe=ad,OIe="[object AsyncFunction]",DIe="[object Function]",MIe="[object GeneratorFunction]",LIe="[object Proxy]";function $Ie(t){if(!RIe(t))return!1;var e=kIe(t);return e==DIe||e==MIe||e==OIe||e==LIe}var U2=$Ie;const Et=xn(U2);var FIe=ol,VIe=FIe["__core-js_shared__"],BIe=VIe,sA=BIe,VB=function(){var t=/[^.]+$/.exec(sA&&sA.keys&&sA.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function UIe(t){return!!VB&&VB in t}var zIe=UIe,qIe=Function.prototype,WIe=qIe.toString;function HIe(t){if(t!=null){try{return WIe.call(t)}catch{}try{return t+""}catch{}}return""}var GZ=HIe,KIe=U2,GIe=zIe,YIe=ad,QIe=GZ,XIe=/[\\^$.*+?()[\]{}|]/g,ZIe=/^\[object .+?Constructor\]$/,JIe=Function.prototype,eke=Object.prototype,tke=JIe.toString,nke=eke.hasOwnProperty,rke=RegExp("^"+tke.call(nke).replace(XIe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ske(t){if(!YIe(t)||GIe(t))return!1;var e=KIe(t)?rke:ZIe;return e.test(QIe(t))}var ike=ske;function ake(t,e){return t==null?void 0:t[e]}var oke=ake,lke=ike,cke=oke;function uke(t,e){var n=cke(t,e);return lke(n)?n:void 0}var Zh=uke,dke=Zh,hke=dke(Object,"create"),yS=hke,BB=yS;function fke(){this.__data__=BB?BB(null):{},this.size=0}var mke=fke;function pke(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var gke=pke,yke=yS,vke="__lodash_hash_undefined__",xke=Object.prototype,bke=xke.hasOwnProperty;function wke(t){var e=this.__data__;if(yke){var n=e[t];return n===vke?void 0:n}return bke.call(e,t)?e[t]:void 0}var _ke=wke,jke=yS,Nke=Object.prototype,Ske=Nke.hasOwnProperty;function Eke(t){var e=this.__data__;return jke?e[t]!==void 0:Ske.call(e,t)}var Ake=Eke,Tke=yS,Cke="__lodash_hash_undefined__";function Pke(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Tke&&e===void 0?Cke:e,this}var Ike=Pke,kke=mke,Rke=gke,Oke=_ke,Dke=Ake,Mke=Ike;function rg(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}rg.prototype.clear=kke;rg.prototype.delete=Rke;rg.prototype.get=Oke;rg.prototype.has=Dke;rg.prototype.set=Mke;var Lke=rg;function $ke(){this.__data__=[],this.size=0}var Fke=$ke;function Vke(t,e){return t===e||t!==t&&e!==e}var z2=Vke,Bke=z2;function Uke(t,e){for(var n=t.length;n--;)if(Bke(t[n][0],e))return n;return-1}var vS=Uke,zke=vS,qke=Array.prototype,Wke=qke.splice;function Hke(t){var e=this.__data__,n=zke(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Wke.call(e,n,1),--this.size,!0}var Kke=Hke,Gke=vS;function Yke(t){var e=this.__data__,n=Gke(e,t);return n<0?void 0:e[n][1]}var Qke=Yke,Xke=vS;function Zke(t){return Xke(this.__data__,t)>-1}var Jke=Zke,eRe=vS;function tRe(t,e){var n=this.__data__,r=eRe(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var nRe=tRe,rRe=Fke,sRe=Kke,iRe=Qke,aRe=Jke,oRe=nRe;function sg(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}sg.prototype.clear=rRe;sg.prototype.delete=sRe;sg.prototype.get=iRe;sg.prototype.has=aRe;sg.prototype.set=oRe;var xS=sg,lRe=Zh,cRe=ol,uRe=lRe(cRe,"Map"),q2=uRe,UB=Lke,dRe=xS,hRe=q2;function fRe(){this.size=0,this.__data__={hash:new UB,map:new(hRe||dRe),string:new UB}}var mRe=fRe;function pRe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var gRe=pRe,yRe=gRe;function vRe(t,e){var n=t.__data__;return yRe(e)?n[typeof e=="string"?"string":"hash"]:n.map}var bS=vRe,xRe=bS;function bRe(t){var e=xRe(this,t).delete(t);return this.size-=e?1:0,e}var wRe=bRe,_Re=bS;function jRe(t){return _Re(this,t).get(t)}var NRe=jRe,SRe=bS;function ERe(t){return SRe(this,t).has(t)}var ARe=ERe,TRe=bS;function CRe(t,e){var n=TRe(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var PRe=CRe,IRe=mRe,kRe=wRe,RRe=NRe,ORe=ARe,DRe=PRe;function ig(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ig.prototype.clear=IRe;ig.prototype.delete=kRe;ig.prototype.get=RRe;ig.prototype.has=ORe;ig.prototype.set=DRe;var W2=ig,YZ=W2,MRe="Expected a function";function H2(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(MRe);var n=function(){var r=arguments,s=e?e.apply(this,r):r[0],a=n.cache;if(a.has(s))return a.get(s);var o=t.apply(this,r);return n.cache=a.set(s,o)||a,o};return n.cache=new(H2.Cache||YZ),n}H2.Cache=YZ;var QZ=H2;const LRe=xn(QZ);var $Re=QZ,FRe=500;function VRe(t){var e=$Re(t,function(r){return n.size===FRe&&n.clear(),r}),n=e.cache;return e}var BRe=VRe,URe=BRe,zRe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qRe=/\\(\\)?/g,WRe=URe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(zRe,function(n,r,s,a){e.push(s?a.replace(qRe,"$1"):r||n)}),e}),HRe=WRe;function KRe(t,e){for(var n=-1,r=t==null?0:t.length,s=Array(r);++n<r;)s[n]=e(t[n],n,t);return s}var K2=KRe,zB=vb,GRe=K2,YRe=wi,QRe=tg,XRe=1/0,qB=zB?zB.prototype:void 0,WB=qB?qB.toString:void 0;function XZ(t){if(typeof t=="string")return t;if(YRe(t))return GRe(t,XZ)+"";if(QRe(t))return WB?WB.call(t):"";var e=t+"";return e=="0"&&1/t==-XRe?"-0":e}var ZRe=XZ,JRe=ZRe;function eOe(t){return t==null?"":JRe(t)}var ZZ=eOe,tOe=wi,nOe=B2,rOe=HRe,sOe=ZZ;function iOe(t,e){return tOe(t)?t:nOe(t,e)?[t]:rOe(sOe(t))}var JZ=iOe,aOe=tg,oOe=1/0;function lOe(t){if(typeof t=="string"||aOe(t))return t;var e=t+"";return e=="0"&&1/t==-oOe?"-0":e}var wS=lOe,cOe=JZ,uOe=wS;function dOe(t,e){e=cOe(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[uOe(e[n++])];return n&&n==r?t:void 0}var G2=dOe,hOe=G2;function fOe(t,e,n){var r=t==null?void 0:hOe(t,e);return r===void 0?n:r}var eJ=fOe;const Vi=xn(eJ);function mOe(t){return t==null}var pOe=mOe;const Ft=xn(pOe);var gOe=ac,yOe=wi,vOe=oc,xOe="[object String]";function bOe(t){return typeof t=="string"||!yOe(t)&&vOe(t)&&gOe(t)==xOe}var wOe=bOe;const Dh=xn(wOe);var tJ={exports:{}},Sn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y2=Symbol.for("react.element"),Q2=Symbol.for("react.portal"),_S=Symbol.for("react.fragment"),jS=Symbol.for("react.strict_mode"),NS=Symbol.for("react.profiler"),SS=Symbol.for("react.provider"),ES=Symbol.for("react.context"),_Oe=Symbol.for("react.server_context"),AS=Symbol.for("react.forward_ref"),TS=Symbol.for("react.suspense"),CS=Symbol.for("react.suspense_list"),PS=Symbol.for("react.memo"),IS=Symbol.for("react.lazy"),jOe=Symbol.for("react.offscreen"),nJ;nJ=Symbol.for("react.module.reference");function _a(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Y2:switch(t=t.type,t){case _S:case NS:case jS:case TS:case CS:return t;default:switch(t=t&&t.$$typeof,t){case _Oe:case ES:case AS:case IS:case PS:case SS:return t;default:return e}}case Q2:return e}}}Sn.ContextConsumer=ES;Sn.ContextProvider=SS;Sn.Element=Y2;Sn.ForwardRef=AS;Sn.Fragment=_S;Sn.Lazy=IS;Sn.Memo=PS;Sn.Portal=Q2;Sn.Profiler=NS;Sn.StrictMode=jS;Sn.Suspense=TS;Sn.SuspenseList=CS;Sn.isAsyncMode=function(){return!1};Sn.isConcurrentMode=function(){return!1};Sn.isContextConsumer=function(t){return _a(t)===ES};Sn.isContextProvider=function(t){return _a(t)===SS};Sn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Y2};Sn.isForwardRef=function(t){return _a(t)===AS};Sn.isFragment=function(t){return _a(t)===_S};Sn.isLazy=function(t){return _a(t)===IS};Sn.isMemo=function(t){return _a(t)===PS};Sn.isPortal=function(t){return _a(t)===Q2};Sn.isProfiler=function(t){return _a(t)===NS};Sn.isStrictMode=function(t){return _a(t)===jS};Sn.isSuspense=function(t){return _a(t)===TS};Sn.isSuspenseList=function(t){return _a(t)===CS};Sn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===_S||t===NS||t===jS||t===TS||t===CS||t===jOe||typeof t=="object"&&t!==null&&(t.$$typeof===IS||t.$$typeof===PS||t.$$typeof===SS||t.$$typeof===ES||t.$$typeof===AS||t.$$typeof===nJ||t.getModuleId!==void 0)};Sn.typeOf=_a;tJ.exports=Sn;var NOe=tJ.exports,SOe=ac,EOe=oc,AOe="[object Number]";function TOe(t){return typeof t=="number"||EOe(t)&&SOe(t)==AOe}var rJ=TOe;const COe=xn(rJ);var POe=rJ;function IOe(t){return POe(t)&&t!=+t}var kOe=IOe;const ag=xn(kOe);var Hs=function(e){return e===0?0:e>0?1:-1},Bd=function(e){return Dh(e)&&e.indexOf("%")===e.length-1},Ie=function(e){return COe(e)&&!ag(e)},ROe=function(e){return Ft(e)},zr=function(e){return Ie(e)||Dh(e)},OOe=0,og=function(e){var n=++OOe;return"".concat(e||"").concat(n)},Ks=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ie(e)&&!Dh(e))return r;var a;if(Bd(e)){var o=e.indexOf("%");a=n*parseFloat(e.slice(0,o))/100}else a=+e;return ag(a)&&(a=r),s&&a>n&&(a=n),a},zc=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},DOe=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},s=0;s<n;s++)if(!r[e[s]])r[e[s]]=!0;else return!0;return!1},ui=function(e,n){return Ie(e)&&Ie(n)?function(r){return e+r*(n-e)}:function(){return n}};function W_(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Vi(r,e))===n})}var MOe=function(e,n){return Ie(e)&&Ie(n)?e-n:Dh(e)&&Dh(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function mm(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function NP(t){"@babel/helpers - typeof";return NP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NP(t)}var LOe=["viewBox","children"],$Oe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],HB=["points","pathLength"],iA={svg:LOe,polygon:HB,polyline:HB},X2=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],H_=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(_.isValidElement(e)&&(r=e.props),!ng(r))return null;var s={};return Object.keys(r).forEach(function(a){X2.includes(a)&&(s[a]=n||function(o){return r[a](r,o)})}),s},FOe=function(e,n,r){return function(s){return e(n,r,s),null}},Mh=function(e,n,r){if(!ng(e)||NP(e)!=="object")return null;var s=null;return Object.keys(e).forEach(function(a){var o=e[a];X2.includes(a)&&typeof o=="function"&&(s||(s={}),s[a]=FOe(o,n,r))}),s},VOe=["children"],BOe=["children"];function KB(t,e){if(t==null)return{};var n=UOe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function UOe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function SP(t){"@babel/helpers - typeof";return SP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SP(t)}var GB={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},kl=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},YB=null,aA=null,Z2=function t(e){if(e===YB&&Array.isArray(aA))return aA;var n=[];return _.Children.forEach(e,function(r){Ft(r)||(NOe.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),aA=n,YB=e,n};function ha(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(s){return kl(s)}):r=[kl(e)],Z2(t).forEach(function(s){var a=Vi(s,"type.displayName")||Vi(s,"type.name");r.indexOf(a)!==-1&&n.push(s)}),n}function Ti(t,e){var n=ha(t,e);return n&&n[0]}var QB=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,s=n.height;return!(!Ie(r)||r<=0||!Ie(s)||s<=0)},zOe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],qOe=function(e){return e&&e.type&&Dh(e.type)&&zOe.indexOf(e.type)>=0},WOe=function(e){return e&&SP(e)==="object"&&"clipDot"in e},HOe=function(e,n,r,s){var a,o=(a=iA==null?void 0:iA[s])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!Et(e)&&(s&&o.includes(n)||$Oe.includes(n))||r&&X2.includes(n)},vt=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var s=e;if(_.isValidElement(e)&&(s=e.props),!ng(s))return null;var a={};return Object.keys(s).forEach(function(o){var l;HOe((l=s)===null||l===void 0?void 0:l[o],o,n,r)&&(a[o]=s[o])}),a},EP=function t(e,n){if(e===n)return!0;var r=_.Children.count(e);if(r!==_.Children.count(n))return!1;if(r===0)return!0;if(r===1)return XB(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var s=0;s<r;s++){var a=e[s],o=n[s];if(Array.isArray(a)||Array.isArray(o)){if(!t(a,o))return!1}else if(!XB(a,o))return!1}return!0},XB=function(e,n){if(Ft(e)&&Ft(n))return!0;if(!Ft(e)&&!Ft(n)){var r=e.props||{},s=r.children,a=KB(r,VOe),o=n.props||{},l=o.children,c=KB(o,BOe);return s&&l?mm(a,c)&&EP(s,l):!s&&!l?mm(a,c):!1}return!1},ZB=function(e,n){var r=[],s={};return Z2(e).forEach(function(a,o){if(qOe(a))r.push(a);else if(a){var l=kl(a.type),c=n[l]||{},u=c.handler,d=c.once;if(u&&(!d||!s[l])){var h=u(a,l,o);r.push(h),s[l]=!0}}}),r},KOe=function(e){var n=e&&e.type;return n&&GB[n]?GB[n]:null},GOe=function(e,n){return Z2(n).indexOf(e)},YOe=["children","width","height","viewBox","className","style","title","desc"];function AP(){return AP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AP.apply(this,arguments)}function QOe(t,e){if(t==null)return{};var n=XOe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function XOe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function TP(t){var e=t.children,n=t.width,r=t.height,s=t.viewBox,a=t.className,o=t.style,l=t.title,c=t.desc,u=QOe(t,YOe),d=s||{width:n,height:r,x:0,y:0},h=$t("recharts-surface",a);return F.createElement("svg",AP({},vt(u,!0,"svg"),{className:h,width:n,height:r,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),F.createElement("title",null,l),F.createElement("desc",null,c),e)}var ZOe=["children","className"];function CP(){return CP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CP.apply(this,arguments)}function JOe(t,e){if(t==null)return{};var n=e2e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function e2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var sn=F.forwardRef(function(t,e){var n=t.children,r=t.className,s=JOe(t,ZOe),a=$t("recharts-layer",r);return F.createElement("g",CP({className:a},vt(s,!0),{ref:e}),n)}),ro=function(e,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a]};function t2e(t,e,n){var r=-1,s=t.length;e<0&&(e=-e>s?0:s+e),n=n>s?s:n,n<0&&(n+=s),s=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(s);++r<s;)a[r]=t[r+e];return a}var n2e=t2e,r2e=n2e;function s2e(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:r2e(t,e,n)}var i2e=s2e,a2e="\\ud800-\\udfff",o2e="\\u0300-\\u036f",l2e="\\ufe20-\\ufe2f",c2e="\\u20d0-\\u20ff",u2e=o2e+l2e+c2e,d2e="\\ufe0e\\ufe0f",h2e="\\u200d",f2e=RegExp("["+h2e+a2e+u2e+d2e+"]");function m2e(t){return f2e.test(t)}var sJ=m2e;function p2e(t){return t.split("")}var g2e=p2e,iJ="\\ud800-\\udfff",y2e="\\u0300-\\u036f",v2e="\\ufe20-\\ufe2f",x2e="\\u20d0-\\u20ff",b2e=y2e+v2e+x2e,w2e="\\ufe0e\\ufe0f",_2e="["+iJ+"]",PP="["+b2e+"]",IP="\\ud83c[\\udffb-\\udfff]",j2e="(?:"+PP+"|"+IP+")",aJ="[^"+iJ+"]",oJ="(?:\\ud83c[\\udde6-\\uddff]){2}",lJ="[\\ud800-\\udbff][\\udc00-\\udfff]",N2e="\\u200d",cJ=j2e+"?",uJ="["+w2e+"]?",S2e="(?:"+N2e+"(?:"+[aJ,oJ,lJ].join("|")+")"+uJ+cJ+")*",E2e=uJ+cJ+S2e,A2e="(?:"+[aJ+PP+"?",PP,oJ,lJ,_2e].join("|")+")",T2e=RegExp(IP+"(?="+IP+")|"+A2e+E2e,"g");function C2e(t){return t.match(T2e)||[]}var P2e=C2e,I2e=g2e,k2e=sJ,R2e=P2e;function O2e(t){return k2e(t)?R2e(t):I2e(t)}var D2e=O2e,M2e=i2e,L2e=sJ,$2e=D2e,F2e=ZZ;function V2e(t){return function(e){e=F2e(e);var n=L2e(e)?$2e(e):void 0,r=n?n[0]:e.charAt(0),s=n?M2e(n,1).join(""):e.slice(1);return r[t]()+s}}var B2e=V2e,U2e=B2e,z2e=U2e("toUpperCase"),q2e=z2e;const kS=xn(q2e);function Rn(t){return function(){return t}}const dJ=Math.cos,K_=Math.sin,go=Math.sqrt,G_=Math.PI,RS=2*G_,kP=Math.PI,RP=2*kP,Td=1e-6,W2e=RP-Td;function hJ(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function H2e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return hJ;const n=10**e;return function(r){this._+=r[0];for(let s=1,a=r.length;s<a;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}class K2e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?hJ:H2e(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,s){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+s}`}bezierCurveTo(e,n,r,s,a,o){this._append`C${+e},${+n},${+r},${+s},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,r,s,a){if(e=+e,n=+n,r=+r,s=+s,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,c=r-e,u=s-n,d=o-e,h=l-n,f=d*d+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>Td)if(!(Math.abs(h*c-u*d)>Td)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let m=r-o,y=s-l,p=c*c+u*u,v=m*m+y*y,b=Math.sqrt(p),x=Math.sqrt(f),w=a*Math.tan((kP-Math.acos((p+f-v)/(2*b*x)))/2),C=w/x,S=w/b;Math.abs(C-1)>Td&&this._append`L${e+C*d},${n+C*h}`,this._append`A${a},${a},0,0,${+(h*m>d*y)},${this._x1=e+S*c},${this._y1=n+S*u}`}}arc(e,n,r,s,a,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(s),c=r*Math.sin(s),u=e+l,d=n+c,h=1^o,f=o?s-a:a-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Td||Math.abs(this._y1-d)>Td)&&this._append`L${u},${d}`,r&&(f<0&&(f=f%RP+RP),f>W2e?this._append`A${r},${r},0,1,${h},${e-l},${n-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=d}`:f>Td&&this._append`A${r},${r},0,${+(f>=kP)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+s}h${-r}Z`}toString(){return this._}}function J2(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new K2e(e)}function eD(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function fJ(t){this._context=t}fJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function OS(t){return new fJ(t)}function mJ(t){return t[0]}function pJ(t){return t[1]}function gJ(t,e){var n=Rn(!0),r=null,s=OS,a=null,o=J2(l);t=typeof t=="function"?t:t===void 0?mJ:Rn(t),e=typeof e=="function"?e:e===void 0?pJ:Rn(e);function l(c){var u,d=(c=eD(c)).length,h,f=!1,m;for(r==null&&(a=s(m=o())),u=0;u<=d;++u)!(u<d&&n(h=c[u],u,c))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(h,u,c),+e(h,u,c));if(m)return a=null,m+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Rn(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Rn(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Rn(!!c),l):n},l.curve=function(c){return arguments.length?(s=c,r!=null&&(a=s(r)),l):s},l.context=function(c){return arguments.length?(c==null?r=a=null:a=s(r=c),l):r},l}function w0(t,e,n){var r=null,s=Rn(!0),a=null,o=OS,l=null,c=J2(u);t=typeof t=="function"?t:t===void 0?mJ:Rn(+t),e=typeof e=="function"?e:Rn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?pJ:Rn(+n);function u(h){var f,m,y,p=(h=eD(h)).length,v,b=!1,x,w=new Array(p),C=new Array(p);for(a==null&&(l=o(x=c())),f=0;f<=p;++f){if(!(f<p&&s(v=h[f],f,h))===b)if(b=!b)m=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=f-1;y>=m;--y)l.point(w[y],C[y]);l.lineEnd(),l.areaEnd()}b&&(w[f]=+t(v,f,h),C[f]=+e(v,f,h),l.point(r?+r(v,f,h):w[f],n?+n(v,f,h):C[f]))}if(x)return l=null,x+""||null}function d(){return gJ().defined(s).curve(o).context(a)}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:Rn(+h),r=null,u):t},u.x0=function(h){return arguments.length?(t=typeof h=="function"?h:Rn(+h),u):t},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Rn(+h),u):r},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:Rn(+h),n=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:Rn(+h),u):e},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Rn(+h),u):n},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(n)},u.lineX1=function(){return d().x(r).y(e)},u.defined=function(h){return arguments.length?(s=typeof h=="function"?h:Rn(!!h),u):s},u.curve=function(h){return arguments.length?(o=h,a!=null&&(l=o(a)),u):o},u.context=function(h){return arguments.length?(h==null?a=l=null:l=o(a=h),u):a},u}class yJ{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function G2e(t){return new yJ(t,!0)}function Y2e(t){return new yJ(t,!1)}const tD={draw(t,e){const n=go(e/G_);t.moveTo(n,0),t.arc(0,0,n,0,RS)}},Q2e={draw(t,e){const n=go(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},vJ=go(1/3),X2e=vJ*2,Z2e={draw(t,e){const n=go(e/X2e),r=n*vJ;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},J2e={draw(t,e){const n=go(e),r=-n/2;t.rect(r,r,n,n)}},eDe=.8908130915292852,xJ=K_(G_/10)/K_(7*G_/10),tDe=K_(RS/10)*xJ,nDe=-dJ(RS/10)*xJ,rDe={draw(t,e){const n=go(e*eDe),r=tDe*n,s=nDe*n;t.moveTo(0,-n),t.lineTo(r,s);for(let a=1;a<5;++a){const o=RS*a/5,l=dJ(o),c=K_(o);t.lineTo(c*n,-l*n),t.lineTo(l*r-c*s,c*r+l*s)}t.closePath()}},oA=go(3),sDe={draw(t,e){const n=-go(e/(oA*3));t.moveTo(0,n*2),t.lineTo(-oA*n,-n),t.lineTo(oA*n,-n),t.closePath()}},Ki=-.5,Gi=go(3)/2,OP=1/go(12),iDe=(OP/2+1)*3,aDe={draw(t,e){const n=go(e/iDe),r=n/2,s=n*OP,a=r,o=n*OP+n,l=-a,c=o;t.moveTo(r,s),t.lineTo(a,o),t.lineTo(l,c),t.lineTo(Ki*r-Gi*s,Gi*r+Ki*s),t.lineTo(Ki*a-Gi*o,Gi*a+Ki*o),t.lineTo(Ki*l-Gi*c,Gi*l+Ki*c),t.lineTo(Ki*r+Gi*s,Ki*s-Gi*r),t.lineTo(Ki*a+Gi*o,Ki*o-Gi*a),t.lineTo(Ki*l+Gi*c,Ki*c-Gi*l),t.closePath()}};function oDe(t,e){let n=null,r=J2(s);t=typeof t=="function"?t:Rn(t||tD),e=typeof e=="function"?e:Rn(e===void 0?64:+e);function s(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return s.type=function(a){return arguments.length?(t=typeof a=="function"?a:Rn(a),s):t},s.size=function(a){return arguments.length?(e=typeof a=="function"?a:Rn(+a),s):e},s.context=function(a){return arguments.length?(n=a??null,s):n},s}function Y_(){}function Q_(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function bJ(t){this._context=t}bJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Q_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Q_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function lDe(t){return new bJ(t)}function wJ(t){this._context=t}wJ.prototype={areaStart:Y_,areaEnd:Y_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Q_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function cDe(t){return new wJ(t)}function _J(t){this._context=t}_J.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Q_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function uDe(t){return new _J(t)}function jJ(t){this._context=t}jJ.prototype={areaStart:Y_,areaEnd:Y_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function dDe(t){return new jJ(t)}function JB(t){return t<0?-1:1}function e3(t,e,n){var r=t._x1-t._x0,s=e-t._x1,a=(t._y1-t._y0)/(r||s<0&&-0),o=(n-t._y1)/(s||r<0&&-0),l=(a*s+o*r)/(r+s);return(JB(a)+JB(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function t3(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function lA(t,e,n){var r=t._x0,s=t._y0,a=t._x1,o=t._y1,l=(a-r)/3;t._context.bezierCurveTo(r+l,s+l*e,a-l,o-l*n,a,o)}function X_(t){this._context=t}X_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:lA(this,this._t0,t3(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,lA(this,t3(this,n=e3(this,t,e)),n);break;default:lA(this,this._t0,n=e3(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function NJ(t){this._context=new SJ(t)}(NJ.prototype=Object.create(X_.prototype)).point=function(t,e){X_.prototype.point.call(this,e,t)};function SJ(t){this._context=t}SJ.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,s,a){this._context.bezierCurveTo(e,t,r,n,a,s)}};function hDe(t){return new X_(t)}function fDe(t){return new NJ(t)}function EJ(t){this._context=t}EJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=n3(t),s=n3(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],s[0][a],r[1][a],s[1][a],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function n3(t){var e,n=t.length-1,r,s=new Array(n),a=new Array(n),o=new Array(n);for(s[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)s[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(s[n-1]=2,a[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=s[e]/a[e-1],a[e]-=r,o[e]-=r*o[e-1];for(s[n-1]=o[n-1]/a[n-1],e=n-2;e>=0;--e)s[e]=(o[e]-s[e+1])/a[e];for(a[n-1]=(t[n]+s[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-s[e+1];return[s,a]}function mDe(t){return new EJ(t)}function DS(t,e){this._context=t,this._t=e}DS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function pDe(t){return new DS(t,.5)}function gDe(t){return new DS(t,0)}function yDe(t){return new DS(t,1)}function sp(t,e){if((o=t.length)>1)for(var n=1,r,s,a=t[e[0]],o,l=a.length;n<o;++n)for(s=a,a=t[e[n]],r=0;r<l;++r)a[r][1]+=a[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function DP(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function vDe(t,e){return t[e]}function xDe(t){const e=[];return e.key=t,e}function bDe(){var t=Rn([]),e=DP,n=sp,r=vDe;function s(a){var o=Array.from(t.apply(this,arguments),xDe),l,c=o.length,u=-1,d;for(const h of a)for(l=0,++u;l<c;++l)(o[l][u]=[0,+r(h,o[l].key,u,a)]).data=h;for(l=0,d=eD(e(o));l<c;++l)o[d[l]].index=l;return n(o,d),o}return s.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Rn(Array.from(a)),s):t},s.value=function(a){return arguments.length?(r=typeof a=="function"?a:Rn(+a),s):r},s.order=function(a){return arguments.length?(e=a==null?DP:typeof a=="function"?a:Rn(Array.from(a)),s):e},s.offset=function(a){return arguments.length?(n=a??sp,s):n},s}function wDe(t,e){if((r=t.length)>0){for(var n,r,s=0,a=t[0].length,o;s<a;++s){for(o=n=0;n<r;++n)o+=t[n][s][1]||0;if(o)for(n=0;n<r;++n)t[n][s][1]/=o}sp(t,e)}}function _De(t,e){if((s=t.length)>0){for(var n=0,r=t[e[0]],s,a=r.length;n<a;++n){for(var o=0,l=0;o<s;++o)l+=t[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}sp(t,e)}}function jDe(t,e){if(!(!((o=t.length)>0)||!((a=(s=t[e[0]]).length)>0))){for(var n=0,r=1,s,a,o;r<a;++r){for(var l=0,c=0,u=0;l<o;++l){for(var d=t[e[l]],h=d[r][1]||0,f=d[r-1][1]||0,m=(h-f)/2,y=0;y<l;++y){var p=t[e[y]],v=p[r][1]||0,b=p[r-1][1]||0;m+=v-b}c+=h,u+=m*h}s[r-1][1]+=s[r-1][0]=n,c&&(n-=u/c)}s[r-1][1]+=s[r-1][0]=n,sp(t,e)}}function zv(t){"@babel/helpers - typeof";return zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zv(t)}var NDe=["type","size","sizeType"];function MP(){return MP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MP.apply(this,arguments)}function r3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function s3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r3(Object(n),!0).forEach(function(r){SDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SDe(t,e,n){return e=EDe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EDe(t){var e=ADe(t,"string");return zv(e)=="symbol"?e:e+""}function ADe(t,e){if(zv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(zv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TDe(t,e){if(t==null)return{};var n=CDe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function CDe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var AJ={symbolCircle:tD,symbolCross:Q2e,symbolDiamond:Z2e,symbolSquare:J2e,symbolStar:rDe,symbolTriangle:sDe,symbolWye:aDe},PDe=Math.PI/180,IDe=function(e){var n="symbol".concat(kS(e));return AJ[n]||tD},kDe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*PDe;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},RDe=function(e,n){AJ["symbol".concat(kS(e))]=n},nD=function(e){var n=e.type,r=n===void 0?"circle":n,s=e.size,a=s===void 0?64:s,o=e.sizeType,l=o===void 0?"area":o,c=TDe(e,NDe),u=s3(s3({},c),{},{type:r,size:a,sizeType:l}),d=function(){var v=IDe(r),b=oDe().type(v).size(kDe(a,l,r));return b()},h=u.className,f=u.cx,m=u.cy,y=vt(u,!0);return f===+f&&m===+m&&a===+a?F.createElement("path",MP({},y,{className:$t("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(m,")"),d:d()})):null};nD.registerSymbol=RDe;function ip(t){"@babel/helpers - typeof";return ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ip(t)}function LP(){return LP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LP.apply(this,arguments)}function i3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ODe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i3(Object(n),!0).forEach(function(r){qv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DDe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MDe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,CJ(r.key),r)}}function LDe(t,e,n){return e&&MDe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $De(t,e,n){return e=Z_(e),FDe(t,TJ()?Reflect.construct(e,n||[],Z_(t).constructor):e.apply(t,n))}function FDe(t,e){if(e&&(ip(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VDe(t)}function VDe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TJ=function(){return!!t})()}function Z_(t){return Z_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Z_(t)}function BDe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$P(t,e)}function $P(t,e){return $P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},$P(t,e)}function qv(t,e,n){return e=CJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CJ(t){var e=UDe(t,"string");return ip(e)=="symbol"?e:e+""}function UDe(t,e){if(ip(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ip(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yi=32,rD=function(t){function e(){return DDe(this,e),$De(this,e,arguments)}return BDe(e,t),LDe(e,[{key:"renderIcon",value:function(r){var s=this.props.inactiveColor,a=Yi/2,o=Yi/6,l=Yi/3,c=r.inactive?s:r.color;if(r.type==="plainline")return F.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:Yi,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return F.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(Yi,"M").concat(2*l,",").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return F.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Yi/8,"h").concat(Yi,"v").concat(Yi*3/4,"h").concat(-Yi,"z"),className:"recharts-legend-icon"});if(F.isValidElement(r.legendIcon)){var u=ODe({},r);return delete u.legendIcon,F.cloneElement(r.legendIcon,u)}return F.createElement(nD,{fill:c,cx:a,cy:a,size:Yi,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,s=this.props,a=s.payload,o=s.iconSize,l=s.layout,c=s.formatter,u=s.inactiveColor,d={x:0,y:0,width:Yi,height:Yi},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(m,y){var p=m.formatter||c,v=$t(qv(qv({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",m.inactive));if(m.type==="none")return null;var b=Et(m.value)?null:m.value;ro(!Et(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var x=m.inactive?u:m.color;return F.createElement("li",LP({className:v,style:h,key:"legend-item-".concat(y)},Mh(r.props,m,y)),F.createElement(TP,{width:o,height:o,viewBox:d,style:f},r.renderIcon(m)),F.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},p?p(b,m,y):b))})}},{key:"render",value:function(){var r=this.props,s=r.payload,a=r.layout,o=r.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:a==="horizontal"?o:"left"};return F.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(_.PureComponent);qv(rD,"displayName","Legend");qv(rD,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var zDe=xS;function qDe(){this.__data__=new zDe,this.size=0}var WDe=qDe;function HDe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var KDe=HDe;function GDe(t){return this.__data__.get(t)}var YDe=GDe;function QDe(t){return this.__data__.has(t)}var XDe=QDe,ZDe=xS,JDe=q2,eMe=W2,tMe=200;function nMe(t,e){var n=this.__data__;if(n instanceof ZDe){var r=n.__data__;if(!JDe||r.length<tMe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new eMe(r)}return n.set(t,e),this.size=n.size,this}var rMe=nMe,sMe=xS,iMe=WDe,aMe=KDe,oMe=YDe,lMe=XDe,cMe=rMe;function lg(t){var e=this.__data__=new sMe(t);this.size=e.size}lg.prototype.clear=iMe;lg.prototype.delete=aMe;lg.prototype.get=oMe;lg.prototype.has=lMe;lg.prototype.set=cMe;var PJ=lg,uMe="__lodash_hash_undefined__";function dMe(t){return this.__data__.set(t,uMe),this}var hMe=dMe;function fMe(t){return this.__data__.has(t)}var mMe=fMe,pMe=W2,gMe=hMe,yMe=mMe;function J_(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new pMe;++e<n;)this.add(t[e])}J_.prototype.add=J_.prototype.push=gMe;J_.prototype.has=yMe;var IJ=J_;function vMe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var kJ=vMe;function xMe(t,e){return t.has(e)}var RJ=xMe,bMe=IJ,wMe=kJ,_Me=RJ,jMe=1,NMe=2;function SMe(t,e,n,r,s,a){var o=n&jMe,l=t.length,c=e.length;if(l!=c&&!(o&&c>l))return!1;var u=a.get(t),d=a.get(e);if(u&&d)return u==e&&d==t;var h=-1,f=!0,m=n&NMe?new bMe:void 0;for(a.set(t,e),a.set(e,t);++h<l;){var y=t[h],p=e[h];if(r)var v=o?r(p,y,h,e,t,a):r(y,p,h,t,e,a);if(v!==void 0){if(v)continue;f=!1;break}if(m){if(!wMe(e,function(b,x){if(!_Me(m,x)&&(y===b||s(y,b,n,r,a)))return m.push(x)})){f=!1;break}}else if(!(y===p||s(y,p,n,r,a))){f=!1;break}}return a.delete(t),a.delete(e),f}var OJ=SMe,EMe=ol,AMe=EMe.Uint8Array,TMe=AMe;function CMe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,s){n[++e]=[s,r]}),n}var PMe=CMe;function IMe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var sD=IMe,a3=vb,o3=TMe,kMe=z2,RMe=OJ,OMe=PMe,DMe=sD,MMe=1,LMe=2,$Me="[object Boolean]",FMe="[object Date]",VMe="[object Error]",BMe="[object Map]",UMe="[object Number]",zMe="[object RegExp]",qMe="[object Set]",WMe="[object String]",HMe="[object Symbol]",KMe="[object ArrayBuffer]",GMe="[object DataView]",l3=a3?a3.prototype:void 0,cA=l3?l3.valueOf:void 0;function YMe(t,e,n,r,s,a,o){switch(n){case GMe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case KMe:return!(t.byteLength!=e.byteLength||!a(new o3(t),new o3(e)));case $Me:case FMe:case UMe:return kMe(+t,+e);case VMe:return t.name==e.name&&t.message==e.message;case zMe:case WMe:return t==e+"";case BMe:var l=OMe;case qMe:var c=r&MMe;if(l||(l=DMe),t.size!=e.size&&!c)return!1;var u=o.get(t);if(u)return u==e;r|=LMe,o.set(t,e);var d=RMe(l(t),l(e),r,s,a,o);return o.delete(t),d;case HMe:if(cA)return cA.call(t)==cA.call(e)}return!1}var QMe=YMe;function XMe(t,e){for(var n=-1,r=e.length,s=t.length;++n<r;)t[s+n]=e[n];return t}var DJ=XMe,ZMe=DJ,JMe=wi;function eLe(t,e,n){var r=e(t);return JMe(t)?r:ZMe(r,n(t))}var tLe=eLe;function nLe(t,e){for(var n=-1,r=t==null?0:t.length,s=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[s++]=o)}return a}var rLe=nLe;function sLe(){return[]}var iLe=sLe,aLe=rLe,oLe=iLe,lLe=Object.prototype,cLe=lLe.propertyIsEnumerable,c3=Object.getOwnPropertySymbols,uLe=c3?function(t){return t==null?[]:(t=Object(t),aLe(c3(t),function(e){return cLe.call(t,e)}))}:oLe,dLe=uLe;function hLe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var fLe=hLe,mLe=ac,pLe=oc,gLe="[object Arguments]";function yLe(t){return pLe(t)&&mLe(t)==gLe}var vLe=yLe,u3=vLe,xLe=oc,MJ=Object.prototype,bLe=MJ.hasOwnProperty,wLe=MJ.propertyIsEnumerable,_Le=u3(function(){return arguments}())?u3:function(t){return xLe(t)&&bLe.call(t,"callee")&&!wLe.call(t,"callee")},iD=_Le,ej={exports:{}};function jLe(){return!1}var NLe=jLe;ej.exports;(function(t,e){var n=ol,r=NLe,s=e&&!e.nodeType&&e,a=s&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===s,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;t.exports=u})(ej,ej.exports);var LJ=ej.exports,SLe=9007199254740991,ELe=/^(?:0|[1-9]\d*)$/;function ALe(t,e){var n=typeof t;return e=e??SLe,!!e&&(n=="number"||n!="symbol"&&ELe.test(t))&&t>-1&&t%1==0&&t<e}var aD=ALe,TLe=9007199254740991;function CLe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=TLe}var oD=CLe,PLe=ac,ILe=oD,kLe=oc,RLe="[object Arguments]",OLe="[object Array]",DLe="[object Boolean]",MLe="[object Date]",LLe="[object Error]",$Le="[object Function]",FLe="[object Map]",VLe="[object Number]",BLe="[object Object]",ULe="[object RegExp]",zLe="[object Set]",qLe="[object String]",WLe="[object WeakMap]",HLe="[object ArrayBuffer]",KLe="[object DataView]",GLe="[object Float32Array]",YLe="[object Float64Array]",QLe="[object Int8Array]",XLe="[object Int16Array]",ZLe="[object Int32Array]",JLe="[object Uint8Array]",e4e="[object Uint8ClampedArray]",t4e="[object Uint16Array]",n4e="[object Uint32Array]",Un={};Un[GLe]=Un[YLe]=Un[QLe]=Un[XLe]=Un[ZLe]=Un[JLe]=Un[e4e]=Un[t4e]=Un[n4e]=!0;Un[RLe]=Un[OLe]=Un[HLe]=Un[DLe]=Un[KLe]=Un[MLe]=Un[LLe]=Un[$Le]=Un[FLe]=Un[VLe]=Un[BLe]=Un[ULe]=Un[zLe]=Un[qLe]=Un[WLe]=!1;function r4e(t){return kLe(t)&&ILe(t.length)&&!!Un[PLe(t)]}var s4e=r4e;function i4e(t){return function(e){return t(e)}}var $J=i4e,tj={exports:{}};tj.exports;(function(t,e){var n=HZ,r=e&&!e.nodeType&&e,s=r&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===r,o=a&&n.process,l=function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l})(tj,tj.exports);var a4e=tj.exports,o4e=s4e,l4e=$J,d3=a4e,h3=d3&&d3.isTypedArray,c4e=h3?l4e(h3):o4e,FJ=c4e,u4e=fLe,d4e=iD,h4e=wi,f4e=LJ,m4e=aD,p4e=FJ,g4e=Object.prototype,y4e=g4e.hasOwnProperty;function v4e(t,e){var n=h4e(t),r=!n&&d4e(t),s=!n&&!r&&f4e(t),a=!n&&!r&&!s&&p4e(t),o=n||r||s||a,l=o?u4e(t.length,String):[],c=l.length;for(var u in t)(e||y4e.call(t,u))&&!(o&&(u=="length"||s&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||m4e(u,c)))&&l.push(u);return l}var x4e=v4e,b4e=Object.prototype;function w4e(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||b4e;return t===n}var _4e=w4e;function j4e(t,e){return function(n){return t(e(n))}}var VJ=j4e,N4e=VJ,S4e=N4e(Object.keys,Object),E4e=S4e,A4e=_4e,T4e=E4e,C4e=Object.prototype,P4e=C4e.hasOwnProperty;function I4e(t){if(!A4e(t))return T4e(t);var e=[];for(var n in Object(t))P4e.call(t,n)&&n!="constructor"&&e.push(n);return e}var k4e=I4e,R4e=U2,O4e=oD;function D4e(t){return t!=null&&O4e(t.length)&&!R4e(t)}var xb=D4e,M4e=x4e,L4e=k4e,$4e=xb;function F4e(t){return $4e(t)?M4e(t):L4e(t)}var MS=F4e,V4e=tLe,B4e=dLe,U4e=MS;function z4e(t){return V4e(t,U4e,B4e)}var q4e=z4e,f3=q4e,W4e=1,H4e=Object.prototype,K4e=H4e.hasOwnProperty;function G4e(t,e,n,r,s,a){var o=n&W4e,l=f3(t),c=l.length,u=f3(e),d=u.length;if(c!=d&&!o)return!1;for(var h=c;h--;){var f=l[h];if(!(o?f in e:K4e.call(e,f)))return!1}var m=a.get(t),y=a.get(e);if(m&&y)return m==e&&y==t;var p=!0;a.set(t,e),a.set(e,t);for(var v=o;++h<c;){f=l[h];var b=t[f],x=e[f];if(r)var w=o?r(x,b,f,e,t,a):r(b,x,f,t,e,a);if(!(w===void 0?b===x||s(b,x,n,r,a):w)){p=!1;break}v||(v=f=="constructor")}if(p&&!v){var C=t.constructor,S=e.constructor;C!=S&&"constructor"in t&&"constructor"in e&&!(typeof C=="function"&&C instanceof C&&typeof S=="function"&&S instanceof S)&&(p=!1)}return a.delete(t),a.delete(e),p}var Y4e=G4e,Q4e=Zh,X4e=ol,Z4e=Q4e(X4e,"DataView"),J4e=Z4e,e$e=Zh,t$e=ol,n$e=e$e(t$e,"Promise"),r$e=n$e,s$e=Zh,i$e=ol,a$e=s$e(i$e,"Set"),BJ=a$e,o$e=Zh,l$e=ol,c$e=o$e(l$e,"WeakMap"),u$e=c$e,FP=J4e,VP=q2,BP=r$e,UP=BJ,zP=u$e,UJ=ac,cg=GZ,m3="[object Map]",d$e="[object Object]",p3="[object Promise]",g3="[object Set]",y3="[object WeakMap]",v3="[object DataView]",h$e=cg(FP),f$e=cg(VP),m$e=cg(BP),p$e=cg(UP),g$e=cg(zP),Cd=UJ;(FP&&Cd(new FP(new ArrayBuffer(1)))!=v3||VP&&Cd(new VP)!=m3||BP&&Cd(BP.resolve())!=p3||UP&&Cd(new UP)!=g3||zP&&Cd(new zP)!=y3)&&(Cd=function(t){var e=UJ(t),n=e==d$e?t.constructor:void 0,r=n?cg(n):"";if(r)switch(r){case h$e:return v3;case f$e:return m3;case m$e:return p3;case p$e:return g3;case g$e:return y3}return e});var y$e=Cd,uA=PJ,v$e=OJ,x$e=QMe,b$e=Y4e,x3=y$e,b3=wi,w3=LJ,w$e=FJ,_$e=1,_3="[object Arguments]",j3="[object Array]",_0="[object Object]",j$e=Object.prototype,N3=j$e.hasOwnProperty;function N$e(t,e,n,r,s,a){var o=b3(t),l=b3(e),c=o?j3:x3(t),u=l?j3:x3(e);c=c==_3?_0:c,u=u==_3?_0:u;var d=c==_0,h=u==_0,f=c==u;if(f&&w3(t)){if(!w3(e))return!1;o=!0,d=!1}if(f&&!d)return a||(a=new uA),o||w$e(t)?v$e(t,e,n,r,s,a):x$e(t,e,c,n,r,s,a);if(!(n&_$e)){var m=d&&N3.call(t,"__wrapped__"),y=h&&N3.call(e,"__wrapped__");if(m||y){var p=m?t.value():t,v=y?e.value():e;return a||(a=new uA),s(p,v,n,r,a)}}return f?(a||(a=new uA),b$e(t,e,n,r,s,a)):!1}var S$e=N$e,E$e=S$e,S3=oc;function zJ(t,e,n,r,s){return t===e?!0:t==null||e==null||!S3(t)&&!S3(e)?t!==t&&e!==e:E$e(t,e,n,r,zJ,s)}var lD=zJ,A$e=PJ,T$e=lD,C$e=1,P$e=2;function I$e(t,e,n,r){var s=n.length,a=s,o=!r;if(t==null)return!a;for(t=Object(t);s--;){var l=n[s];if(o&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++s<a;){l=n[s];var c=l[0],u=t[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in t))return!1}else{var h=new A$e;if(r)var f=r(u,d,c,t,e,h);if(!(f===void 0?T$e(d,u,C$e|P$e,r,h):f))return!1}}return!0}var k$e=I$e,R$e=ad;function O$e(t){return t===t&&!R$e(t)}var qJ=O$e,D$e=qJ,M$e=MS;function L$e(t){for(var e=M$e(t),n=e.length;n--;){var r=e[n],s=t[r];e[n]=[r,s,D$e(s)]}return e}var $$e=L$e;function F$e(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var WJ=F$e,V$e=k$e,B$e=$$e,U$e=WJ;function z$e(t){var e=B$e(t);return e.length==1&&e[0][2]?U$e(e[0][0],e[0][1]):function(n){return n===t||V$e(n,t,e)}}var q$e=z$e;function W$e(t,e){return t!=null&&e in Object(t)}var H$e=W$e,K$e=JZ,G$e=iD,Y$e=wi,Q$e=aD,X$e=oD,Z$e=wS;function J$e(t,e,n){e=K$e(e,t);for(var r=-1,s=e.length,a=!1;++r<s;){var o=Z$e(e[r]);if(!(a=t!=null&&n(t,o)))break;t=t[o]}return a||++r!=s?a:(s=t==null?0:t.length,!!s&&X$e(s)&&Q$e(o,s)&&(Y$e(t)||G$e(t)))}var eFe=J$e,tFe=H$e,nFe=eFe;function rFe(t,e){return t!=null&&nFe(t,e,tFe)}var sFe=rFe,iFe=lD,aFe=eJ,oFe=sFe,lFe=B2,cFe=qJ,uFe=WJ,dFe=wS,hFe=1,fFe=2;function mFe(t,e){return lFe(t)&&cFe(e)?uFe(dFe(t),e):function(n){var r=aFe(n,t);return r===void 0&&r===e?oFe(n,t):iFe(e,r,hFe|fFe)}}var pFe=mFe;function gFe(t){return t}var ug=gFe;function yFe(t){return function(e){return e==null?void 0:e[t]}}var vFe=yFe,xFe=G2;function bFe(t){return function(e){return xFe(e,t)}}var wFe=bFe,_Fe=vFe,jFe=wFe,NFe=B2,SFe=wS;function EFe(t){return NFe(t)?_Fe(SFe(t)):jFe(t)}var AFe=EFe,TFe=q$e,CFe=pFe,PFe=ug,IFe=wi,kFe=AFe;function RFe(t){return typeof t=="function"?t:t==null?PFe:typeof t=="object"?IFe(t)?CFe(t[0],t[1]):TFe(t):kFe(t)}var ll=RFe;function OFe(t,e,n,r){for(var s=t.length,a=n+(r?1:-1);r?a--:++a<s;)if(e(t[a],a,t))return a;return-1}var HJ=OFe;function DFe(t){return t!==t}var MFe=DFe;function LFe(t,e,n){for(var r=n-1,s=t.length;++r<s;)if(t[r]===e)return r;return-1}var $Fe=LFe,FFe=HJ,VFe=MFe,BFe=$Fe;function UFe(t,e,n){return e===e?BFe(t,e,n):FFe(t,VFe,n)}var zFe=UFe,qFe=zFe;function WFe(t,e){var n=t==null?0:t.length;return!!n&&qFe(t,e,0)>-1}var HFe=WFe;function KFe(t,e,n){for(var r=-1,s=t==null?0:t.length;++r<s;)if(n(e,t[r]))return!0;return!1}var GFe=KFe;function YFe(){}var QFe=YFe,dA=BJ,XFe=QFe,ZFe=sD,JFe=1/0,eVe=dA&&1/ZFe(new dA([,-0]))[1]==JFe?function(t){return new dA(t)}:XFe,tVe=eVe,nVe=IJ,rVe=HFe,sVe=GFe,iVe=RJ,aVe=tVe,oVe=sD,lVe=200;function cVe(t,e,n){var r=-1,s=rVe,a=t.length,o=!0,l=[],c=l;if(n)o=!1,s=sVe;else if(a>=lVe){var u=e?null:aVe(t);if(u)return oVe(u);o=!1,s=iVe,c=new nVe}else c=e?[]:l;e:for(;++r<a;){var d=t[r],h=e?e(d):d;if(d=n||d!==0?d:0,o&&h===h){for(var f=c.length;f--;)if(c[f]===h)continue e;e&&c.push(h),l.push(d)}else s(c,h,n)||(c!==l&&c.push(h),l.push(d))}return l}var uVe=cVe,dVe=ll,hVe=uVe;function fVe(t,e){return t&&t.length?hVe(t,dVe(e)):[]}var mVe=fVe;const E3=xn(mVe);function KJ(t,e,n){return e===!0?E3(t,n):Et(e)?E3(t,e):t}function ap(t){"@babel/helpers - typeof";return ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ap(t)}var pVe=["ref"];function A3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function hl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A3(Object(n),!0).forEach(function(r){LS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gVe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,YJ(r.key),r)}}function yVe(t,e,n){return e&&T3(t.prototype,e),n&&T3(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function vVe(t,e,n){return e=nj(e),xVe(t,GJ()?Reflect.construct(e,n||[],nj(t).constructor):e.apply(t,n))}function xVe(t,e){if(e&&(ap(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bVe(t)}function bVe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GJ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GJ=function(){return!!t})()}function nj(t){return nj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},nj(t)}function wVe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qP(t,e)}function qP(t,e){return qP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},qP(t,e)}function LS(t,e,n){return e=YJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YJ(t){var e=_Ve(t,"string");return ap(e)=="symbol"?e:e+""}function _Ve(t,e){if(ap(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ap(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jVe(t,e){if(t==null)return{};var n=NVe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function NVe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function SVe(t){return t.value}function EVe(t,e){if(F.isValidElement(t))return F.cloneElement(t,e);if(typeof t=="function")return F.createElement(t,e);e.ref;var n=jVe(e,pVe);return F.createElement(rD,n)}var C3=1,pm=function(t){function e(){var n;gVe(this,e);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=vVe(this,e,[].concat(s)),LS(n,"lastBoundingBox",{width:-1,height:-1}),n}return wVe(e,t),yVe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>C3||Math.abs(s.height-this.lastBoundingBox.height)>C3)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,r&&r(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?hl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var s=this.props,a=s.layout,o=s.align,l=s.verticalAlign,c=s.margin,u=s.chartWidth,d=s.chartHeight,h,f;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&a==="vertical"){var m=this.getBBoxSnapshot();h={left:((u||0)-m.width)/2}}else h=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var y=this.getBBoxSnapshot();f={top:((d||0)-y.height)/2}}else f=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return hl(hl({},h),f)}},{key:"render",value:function(){var r=this,s=this.props,a=s.content,o=s.width,l=s.height,c=s.wrapperStyle,u=s.payloadUniqBy,d=s.payload,h=hl(hl({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return F.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(m){r.wrapperNode=m}},EVe(a,hl(hl({},this.props),{},{payload:KJ(d,u,SVe)})))}}],[{key:"getWithHeight",value:function(r,s){var a=hl(hl({},this.defaultProps),r.props),o=a.layout;return o==="vertical"&&Ie(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||s}:null}}])}(_.PureComponent);LS(pm,"displayName","Legend");LS(pm,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var P3=vb,AVe=iD,TVe=wi,I3=P3?P3.isConcatSpreadable:void 0;function CVe(t){return TVe(t)||AVe(t)||!!(I3&&t&&t[I3])}var PVe=CVe,IVe=DJ,kVe=PVe;function QJ(t,e,n,r,s){var a=-1,o=t.length;for(n||(n=kVe),s||(s=[]);++a<o;){var l=t[a];e>0&&n(l)?e>1?QJ(l,e-1,n,r,s):IVe(s,l):r||(s[s.length]=l)}return s}var XJ=QJ;function RVe(t){return function(e,n,r){for(var s=-1,a=Object(e),o=r(e),l=o.length;l--;){var c=o[t?l:++s];if(n(a[c],c,a)===!1)break}return e}}var OVe=RVe,DVe=OVe,MVe=DVe(),LVe=MVe,$Ve=LVe,FVe=MS;function VVe(t,e){return t&&$Ve(t,e,FVe)}var ZJ=VVe,BVe=xb;function UVe(t,e){return function(n,r){if(n==null)return n;if(!BVe(n))return t(n,r);for(var s=n.length,a=e?s:-1,o=Object(n);(e?a--:++a<s)&&r(o[a],a,o)!==!1;);return n}}var zVe=UVe,qVe=ZJ,WVe=zVe,HVe=WVe(qVe),cD=HVe,KVe=cD,GVe=xb;function YVe(t,e){var n=-1,r=GVe(t)?Array(t.length):[];return KVe(t,function(s,a,o){r[++n]=e(s,a,o)}),r}var JJ=YVe;function QVe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var XVe=QVe,k3=tg;function ZVe(t,e){if(t!==e){var n=t!==void 0,r=t===null,s=t===t,a=k3(t),o=e!==void 0,l=e===null,c=e===e,u=k3(e);if(!l&&!u&&!a&&t>e||a&&o&&c&&!l&&!u||r&&o&&c||!n&&c||!s)return 1;if(!r&&!a&&!u&&t<e||u&&n&&s&&!r&&!a||l&&n&&s||!o&&s||!c)return-1}return 0}var JVe=ZVe,eBe=JVe;function tBe(t,e,n){for(var r=-1,s=t.criteria,a=e.criteria,o=s.length,l=n.length;++r<o;){var c=eBe(s[r],a[r]);if(c){if(r>=l)return c;var u=n[r];return c*(u=="desc"?-1:1)}}return t.index-e.index}var nBe=tBe,hA=K2,rBe=G2,sBe=ll,iBe=JJ,aBe=XVe,oBe=$J,lBe=nBe,cBe=ug,uBe=wi;function dBe(t,e,n){e.length?e=hA(e,function(a){return uBe(a)?function(o){return rBe(o,a.length===1?a[0]:a)}:a}):e=[cBe];var r=-1;e=hA(e,oBe(sBe));var s=iBe(t,function(a,o,l){var c=hA(e,function(u){return u(a)});return{criteria:c,index:++r,value:a}});return aBe(s,function(a,o){return lBe(a,o,n)})}var hBe=dBe;function fBe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var mBe=fBe,pBe=mBe,R3=Math.max;function gBe(t,e,n){return e=R3(e===void 0?t.length-1:e,0),function(){for(var r=arguments,s=-1,a=R3(r.length-e,0),o=Array(a);++s<a;)o[s]=r[e+s];s=-1;for(var l=Array(e+1);++s<e;)l[s]=r[s];return l[e]=n(o),pBe(t,this,l)}}var yBe=gBe;function vBe(t){return function(){return t}}var xBe=vBe,bBe=Zh,wBe=function(){try{var t=bBe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),eee=wBe,_Be=xBe,O3=eee,jBe=ug,NBe=O3?function(t,e){return O3(t,"toString",{configurable:!0,enumerable:!1,value:_Be(e),writable:!0})}:jBe,SBe=NBe,EBe=800,ABe=16,TBe=Date.now;function CBe(t){var e=0,n=0;return function(){var r=TBe(),s=ABe-(r-n);if(n=r,s>0){if(++e>=EBe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var PBe=CBe,IBe=SBe,kBe=PBe,RBe=kBe(IBe),OBe=RBe,DBe=ug,MBe=yBe,LBe=OBe;function $Be(t,e){return LBe(MBe(t,e,DBe),t+"")}var FBe=$Be,VBe=z2,BBe=xb,UBe=aD,zBe=ad;function qBe(t,e,n){if(!zBe(n))return!1;var r=typeof e;return(r=="number"?BBe(n)&&UBe(e,n.length):r=="string"&&e in n)?VBe(n[e],t):!1}var $S=qBe,WBe=XJ,HBe=hBe,KBe=FBe,D3=$S,GBe=KBe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&D3(t,e[0],e[1])?e=[]:n>2&&D3(e[0],e[1],e[2])&&(e=[e[0]]),HBe(t,WBe(e,1),[])}),YBe=GBe;const uD=xn(YBe);function Wv(t){"@babel/helpers - typeof";return Wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wv(t)}function WP(){return WP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WP.apply(this,arguments)}function QBe(t,e){return e3e(t)||JBe(t,e)||ZBe(t,e)||XBe()}function XBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZBe(t,e){if(t){if(typeof t=="string")return M3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M3(t,e)}}function M3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function JBe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function e3e(t){if(Array.isArray(t))return t}function L3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function fA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L3(Object(n),!0).forEach(function(r){t3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function t3e(t,e,n){return e=n3e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n3e(t){var e=r3e(t,"string");return Wv(e)=="symbol"?e:e+""}function r3e(t,e){if(Wv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Wv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function s3e(t){return Array.isArray(t)&&zr(t[0])&&zr(t[1])?t.join(" ~ "):t}var i3e=function(e){var n=e.separator,r=n===void 0?" : ":n,s=e.contentStyle,a=s===void 0?{}:s,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,u=c===void 0?{}:c,d=e.payload,h=e.formatter,f=e.itemSorter,m=e.wrapperClassName,y=e.labelClassName,p=e.label,v=e.labelFormatter,b=e.accessibilityLayer,x=b===void 0?!1:b,w=function(){if(d&&d.length){var I={padding:0,margin:0},k=(f?uD(d,f):d).map(function(L,V){if(L.type==="none")return null;var B=fA({display:"block",paddingTop:4,paddingBottom:4,color:L.color||"#000"},l),M=L.formatter||h||s3e,$=L.value,O=L.name,W=$,Z=O;if(M&&W!=null&&Z!=null){var ae=M($,O,L,V,d);if(Array.isArray(ae)){var Ae=QBe(ae,2);W=Ae[0],Z=Ae[1]}else W=ae}return F.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(V),style:B},zr(Z)?F.createElement("span",{className:"recharts-tooltip-item-name"},Z):null,zr(Z)?F.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,F.createElement("span",{className:"recharts-tooltip-item-value"},W),F.createElement("span",{className:"recharts-tooltip-item-unit"},L.unit||""))});return F.createElement("ul",{className:"recharts-tooltip-item-list",style:I},k)}return null},C=fA({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),S=fA({margin:0},u),P=!Ft(p),j=P?p:"",g=$t("recharts-default-tooltip",m),T=$t("recharts-tooltip-label",y);P&&v&&d!==void 0&&d!==null&&(j=v(p,d));var E=x?{role:"status","aria-live":"assertive"}:{};return F.createElement("div",WP({className:g,style:C},E),F.createElement("p",{className:T,style:S},F.isValidElement(j)?j:"".concat(j)),w())};function Hv(t){"@babel/helpers - typeof";return Hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hv(t)}function j0(t,e,n){return e=a3e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a3e(t){var e=o3e(t,"string");return Hv(e)=="symbol"?e:e+""}function o3e(t,e){if(Hv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Hv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qg="recharts-tooltip-wrapper",l3e={visibility:"hidden"};function c3e(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return $t(qg,j0(j0(j0(j0({},"".concat(qg,"-right"),Ie(n)&&e&&Ie(e.x)&&n>=e.x),"".concat(qg,"-left"),Ie(n)&&e&&Ie(e.x)&&n<e.x),"".concat(qg,"-bottom"),Ie(r)&&e&&Ie(e.y)&&r>=e.y),"".concat(qg,"-top"),Ie(r)&&e&&Ie(e.y)&&r<e.y))}function $3(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,s=t.offsetTopLeft,a=t.position,o=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,u=t.viewBoxDimension;if(a&&Ie(a[r]))return a[r];var d=n[r]-l-s,h=n[r]+s;if(e[r])return o[r]?d:h;if(o[r]){var f=d,m=c[r];return f<m?Math.max(h,c[r]):Math.max(d,c[r])}var y=h+l,p=c[r]+u;return y>p?Math.max(d,c[r]):Math.max(h,c[r])}function u3e(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function d3e(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,s=t.position,a=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,u,d,h;return o.height>0&&o.width>0&&n?(d=$3({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:s,reverseDirection:a,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=$3({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:s,reverseDirection:a,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=u3e({translateX:d,translateY:h,useTranslate3d:l})):u=l3e,{cssProperties:u,cssClasses:c3e({translateX:d,translateY:h,coordinate:n})}}function op(t){"@babel/helpers - typeof";return op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},op(t)}function F3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function V3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F3(Object(n),!0).forEach(function(r){KP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function h3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f3e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nee(r.key),r)}}function m3e(t,e,n){return e&&f3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function p3e(t,e,n){return e=rj(e),g3e(t,tee()?Reflect.construct(e,n||[],rj(t).constructor):e.apply(t,n))}function g3e(t,e){if(e&&(op(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y3e(t)}function y3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tee=function(){return!!t})()}function rj(t){return rj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},rj(t)}function v3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HP(t,e)}function HP(t,e){return HP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},HP(t,e)}function KP(t,e,n){return e=nee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nee(t){var e=x3e(t,"string");return op(e)=="symbol"?e:e+""}function x3e(t,e){if(op(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(op(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var B3=1,b3e=function(t){function e(){var n;h3e(this,e);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=p3e(this,e,[].concat(s)),KP(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),KP(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return v3e(e,t),m3e(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>B3||Math.abs(r.height-this.state.lastBoundingBox.height)>B3)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,s=this.props,a=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.children,d=s.coordinate,h=s.hasPayload,f=s.isAnimationActive,m=s.offset,y=s.position,p=s.reverseDirection,v=s.useTranslate3d,b=s.viewBox,x=s.wrapperStyle,w=d3e({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:m,position:y,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:b}),C=w.cssClasses,S=w.cssProperties,P=V3(V3({transition:f&&a?"transform ".concat(l,"ms ").concat(c):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&h?"visible":"hidden",position:"absolute",top:0,left:0},x);return F.createElement("div",{tabIndex:-1,className:C,style:P,ref:function(g){r.wrapperNode=g}},u)}}])}(_.PureComponent),w3e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ko={isSsr:w3e(),get:function(e){return Ko[e]},set:function(e,n){if(typeof e=="string")Ko[e]=n;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(s){Ko[s]=e[s]})}}};function lp(t){"@babel/helpers - typeof";return lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lp(t)}function U3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function z3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U3(Object(n),!0).forEach(function(r){dD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j3e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,see(r.key),r)}}function N3e(t,e,n){return e&&j3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function S3e(t,e,n){return e=sj(e),E3e(t,ree()?Reflect.construct(e,n||[],sj(t).constructor):e.apply(t,n))}function E3e(t,e){if(e&&(lp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A3e(t)}function A3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ree(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ree=function(){return!!t})()}function sj(t){return sj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sj(t)}function T3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GP(t,e)}function GP(t,e){return GP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},GP(t,e)}function dD(t,e,n){return e=see(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function see(t){var e=C3e(t,"string");return lp(e)=="symbol"?e:e+""}function C3e(t,e){if(lp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(lp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function P3e(t){return t.dataKey}function I3e(t,e){return F.isValidElement(t)?F.cloneElement(t,e):typeof t=="function"?F.createElement(t,e):F.createElement(i3e,e)}var La=function(t){function e(){return _3e(this,e),S3e(this,e,arguments)}return T3e(e,t),N3e(e,[{key:"render",value:function(){var r=this,s=this.props,a=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.content,d=s.coordinate,h=s.filterNull,f=s.isAnimationActive,m=s.offset,y=s.payload,p=s.payloadUniqBy,v=s.position,b=s.reverseDirection,x=s.useTranslate3d,w=s.viewBox,C=s.wrapperStyle,S=y??[];h&&S.length&&(S=KJ(y.filter(function(j){return j.value!=null&&(j.hide!==!0||r.props.includeHidden)}),p,P3e));var P=S.length>0;return F.createElement(b3e,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:f,active:a,coordinate:d,hasPayload:P,offset:m,position:v,reverseDirection:b,useTranslate3d:x,viewBox:w,wrapperStyle:C},I3e(u,z3(z3({},this.props),{},{payload:S})))}}])}(_.PureComponent);dD(La,"displayName","Tooltip");dD(La,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ko.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var k3e=ol,R3e=function(){return k3e.Date.now()},O3e=R3e,D3e=/\s/;function M3e(t){for(var e=t.length;e--&&D3e.test(t.charAt(e)););return e}var L3e=M3e,$3e=L3e,F3e=/^\s+/;function V3e(t){return t&&t.slice(0,$3e(t)+1).replace(F3e,"")}var B3e=V3e,U3e=B3e,q3=ad,z3e=tg,W3=NaN,q3e=/^[-+]0x[0-9a-f]+$/i,W3e=/^0b[01]+$/i,H3e=/^0o[0-7]+$/i,K3e=parseInt;function G3e(t){if(typeof t=="number")return t;if(z3e(t))return W3;if(q3(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=q3(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=U3e(t);var n=W3e.test(t);return n||H3e.test(t)?K3e(t.slice(2),n?2:8):q3e.test(t)?W3:+t}var iee=G3e,Y3e=ad,mA=O3e,H3=iee,Q3e="Expected a function",X3e=Math.max,Z3e=Math.min;function J3e(t,e,n){var r,s,a,o,l,c,u=0,d=!1,h=!1,f=!0;if(typeof t!="function")throw new TypeError(Q3e);e=H3(e)||0,Y3e(n)&&(d=!!n.leading,h="maxWait"in n,a=h?X3e(H3(n.maxWait)||0,e):a,f="trailing"in n?!!n.trailing:f);function m(P){var j=r,g=s;return r=s=void 0,u=P,o=t.apply(g,j),o}function y(P){return u=P,l=setTimeout(b,e),d?m(P):o}function p(P){var j=P-c,g=P-u,T=e-j;return h?Z3e(T,a-g):T}function v(P){var j=P-c,g=P-u;return c===void 0||j>=e||j<0||h&&g>=a}function b(){var P=mA();if(v(P))return x(P);l=setTimeout(b,p(P))}function x(P){return l=void 0,f&&r?m(P):(r=s=void 0,o)}function w(){l!==void 0&&clearTimeout(l),u=0,r=c=s=l=void 0}function C(){return l===void 0?o:x(mA())}function S(){var P=mA(),j=v(P);if(r=arguments,s=this,c=P,j){if(l===void 0)return y(c);if(h)return clearTimeout(l),l=setTimeout(b,e),m(c)}return l===void 0&&(l=setTimeout(b,e)),o}return S.cancel=w,S.flush=C,S}var e5e=J3e,t5e=e5e,n5e=ad,r5e="Expected a function";function s5e(t,e,n){var r=!0,s=!0;if(typeof t!="function")throw new TypeError(r5e);return n5e(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),t5e(t,e,{leading:r,maxWait:e,trailing:s})}var i5e=s5e;const aee=xn(i5e);function Kv(t){"@babel/helpers - typeof";return Kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kv(t)}function K3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function N0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K3(Object(n),!0).forEach(function(r){a5e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function a5e(t,e,n){return e=o5e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o5e(t){var e=l5e(t,"string");return Kv(e)=="symbol"?e:e+""}function l5e(t,e){if(Kv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Kv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function c5e(t,e){return f5e(t)||h5e(t,e)||d5e(t,e)||u5e()}function u5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d5e(t,e){if(t){if(typeof t=="string")return G3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G3(t,e)}}function G3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h5e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function f5e(t){if(Array.isArray(t))return t}var pA=_.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,s=r===void 0?{width:-1,height:-1}:r,a=t.width,o=a===void 0?"100%":a,l=t.height,c=l===void 0?"100%":l,u=t.minWidth,d=u===void 0?0:u,h=t.minHeight,f=t.maxHeight,m=t.children,y=t.debounce,p=y===void 0?0:y,v=t.id,b=t.className,x=t.onResize,w=t.style,C=w===void 0?{}:w,S=_.useRef(null),P=_.useRef();P.current=x,_.useImperativeHandle(e,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var j=_.useState({containerWidth:s.width,containerHeight:s.height}),g=c5e(j,2),T=g[0],E=g[1],A=_.useCallback(function(k,L){E(function(V){var B=Math.round(k),M=Math.round(L);return V.containerWidth===B&&V.containerHeight===M?V:{containerWidth:B,containerHeight:M}})},[]);_.useEffect(function(){var k=function(O){var W,Z=O[0].contentRect,ae=Z.width,Ae=Z.height;A(ae,Ae),(W=P.current)===null||W===void 0||W.call(P,ae,Ae)};p>0&&(k=aee(k,p,{trailing:!0,leading:!1}));var L=new ResizeObserver(k),V=S.current.getBoundingClientRect(),B=V.width,M=V.height;return A(B,M),L.observe(S.current),function(){L.disconnect()}},[A,p]);var I=_.useMemo(function(){var k=T.containerWidth,L=T.containerHeight;if(k<0||L<0)return null;ro(Bd(o)||Bd(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),ro(!n||n>0,"The aspect(%s) must be greater than zero.",n);var V=Bd(o)?k:o,B=Bd(c)?L:c;n&&n>0&&(V?B=V/n:B&&(V=B*n),f&&B>f&&(B=f)),ro(V>0||B>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,V,B,o,c,d,h,n);var M=!Array.isArray(m)&&kl(m.type).endsWith("Chart");return F.Children.map(m,function($){return F.isValidElement($)?_.cloneElement($,N0({width:V,height:B},M?{style:N0({height:"100%",width:"100%",maxHeight:B,maxWidth:V},$.props.style)}:{})):$})},[n,m,c,f,h,d,T,o]);return F.createElement("div",{id:v?"".concat(v):void 0,className:$t("recharts-responsive-container",b),style:N0(N0({},C),{},{width:o,height:c,minWidth:d,minHeight:h,maxHeight:f}),ref:S},I)}),FS=function(e){return null};FS.displayName="Cell";function Gv(t){"@babel/helpers - typeof";return Gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gv(t)}function Y3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function YP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y3(Object(n),!0).forEach(function(r){m5e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function m5e(t,e,n){return e=p5e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p5e(t){var e=g5e(t,"string");return Gv(e)=="symbol"?e:e+""}function g5e(t,e){if(Gv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Gv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pf={widthCache:{},cacheCount:0},y5e=2e3,v5e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Q3="recharts_measurement_span";function x5e(t){var e=YP({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var qy=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Ko.isSsr)return{width:0,height:0};var r=x5e(n),s=JSON.stringify({text:e,copyStyle:r});if(pf.widthCache[s])return pf.widthCache[s];try{var a=document.getElementById(Q3);a||(a=document.createElement("span"),a.setAttribute("id",Q3),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=YP(YP({},v5e),r);Object.assign(a.style,o),a.textContent="".concat(e);var l=a.getBoundingClientRect(),c={width:l.width,height:l.height};return pf.widthCache[s]=c,++pf.cacheCount>y5e&&(pf.cacheCount=0,pf.widthCache={}),c}catch{return{width:0,height:0}}},b5e=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Yv(t){"@babel/helpers - typeof";return Yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yv(t)}function ij(t,e){return N5e(t)||j5e(t,e)||_5e(t,e)||w5e()}function w5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _5e(t,e){if(t){if(typeof t=="string")return X3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X3(t,e)}}function X3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function j5e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function N5e(t){if(Array.isArray(t))return t}function S5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A5e(r.key),r)}}function E5e(t,e,n){return e&&Z3(t.prototype,e),n&&Z3(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function A5e(t){var e=T5e(t,"string");return Yv(e)=="symbol"?e:e+""}function T5e(t,e){if(Yv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Yv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var J3=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,e5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,C5e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,P5e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,oee={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},I5e=Object.keys(oee),Hf="NaN";function k5e(t,e){return t*oee[e]}var S0=function(){function t(e,n){S5e(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!C5e.test(n)&&(this.num=NaN,this.unit=""),I5e.includes(n)&&(this.num=k5e(e,n),this.unit="px")}return E5e(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,s=(r=P5e.exec(n))!==null&&r!==void 0?r:[],a=ij(s,3),o=a[1],l=a[2];return new t(parseFloat(o),l??"")}}])}();function lee(t){if(t.includes(Hf))return Hf;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=J3.exec(e))!==null&&n!==void 0?n:[],s=ij(r,4),a=s[1],o=s[2],l=s[3],c=S0.parse(a??""),u=S0.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Hf;e=e.replace(J3,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,f=(h=e5.exec(e))!==null&&h!==void 0?h:[],m=ij(f,4),y=m[1],p=m[2],v=m[3],b=S0.parse(y??""),x=S0.parse(v??""),w=p==="+"?b.add(x):b.subtract(x);if(w.isNaN())return Hf;e=e.replace(e5,w.toString())}return e}var t5=/\(([^()]*)\)/;function R5e(t){for(var e=t;e.includes("(");){var n=t5.exec(e),r=ij(n,2),s=r[1];e=e.replace(t5,lee(s))}return e}function O5e(t){var e=t.replace(/\s+/g,"");return e=R5e(e),e=lee(e),e}function D5e(t){try{return O5e(t)}catch{return Hf}}function gA(t){var e=D5e(t.slice(5,-1));return e===Hf?"":e}var M5e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],L5e=["dx","dy","angle","className","breakAll"];function QP(){return QP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QP.apply(this,arguments)}function n5(t,e){if(t==null)return{};var n=$5e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function $5e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function r5(t,e){return U5e(t)||B5e(t,e)||V5e(t,e)||F5e()}function F5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V5e(t,e){if(t){if(typeof t=="string")return s5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s5(t,e)}}function s5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function B5e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function U5e(t){if(Array.isArray(t))return t}var cee=/[ \f\n\r\t\v\u2028\u2029]+/,uee=function(e){var n=e.children,r=e.breakAll,s=e.style;try{var a=[];Ft(n)||(r?a=n.toString().split(""):a=n.toString().split(cee));var o=a.map(function(c){return{word:c,width:qy(c,s).width}}),l=r?0:qy("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},z5e=function(e,n,r,s,a){var o=e.maxLines,l=e.children,c=e.style,u=e.breakAll,d=Ie(o),h=l,f=function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return V.reduce(function(B,M){var $=M.word,O=M.width,W=B[B.length-1];if(W&&(s==null||a||W.width+O+r<Number(s)))W.words.push($),W.width+=O+r;else{var Z={words:[$],width:O};B.push(Z)}return B},[])},m=f(n),y=function(V){return V.reduce(function(B,M){return B.width>M.width?B:M})};if(!d)return m;for(var p="",v=function(V){var B=h.slice(0,V),M=uee({breakAll:u,style:c,children:B+p}).wordsWithComputedWidth,$=f(M),O=$.length>o||y($).width>Number(s);return[O,$]},b=0,x=h.length-1,w=0,C;b<=x&&w<=h.length-1;){var S=Math.floor((b+x)/2),P=S-1,j=v(P),g=r5(j,2),T=g[0],E=g[1],A=v(S),I=r5(A,1),k=I[0];if(!T&&!k&&(b=S+1),T&&k&&(x=S-1),!T&&k){C=E;break}w++}return C||m},i5=function(e){var n=Ft(e)?[]:e.toString().split(cee);return[{words:n}]},q5e=function(e){var n=e.width,r=e.scaleToFit,s=e.children,a=e.style,o=e.breakAll,l=e.maxLines;if((n||r)&&!Ko.isSsr){var c,u,d=uee({breakAll:o,children:s,style:a});if(d){var h=d.wordsWithComputedWidth,f=d.spaceWidth;c=h,u=f}else return i5(s);return z5e({breakAll:o,children:s,maxLines:l,style:a},c,u,n,r)}return i5(s)},a5="#808080",Lh=function(e){var n=e.x,r=n===void 0?0:n,s=e.y,a=s===void 0?0:s,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,u=c===void 0?"0.71em":c,d=e.scaleToFit,h=d===void 0?!1:d,f=e.textAnchor,m=f===void 0?"start":f,y=e.verticalAnchor,p=y===void 0?"end":y,v=e.fill,b=v===void 0?a5:v,x=n5(e,M5e),w=_.useMemo(function(){return q5e({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:h,style:x.style,width:x.width})},[x.breakAll,x.children,x.maxLines,h,x.style,x.width]),C=x.dx,S=x.dy,P=x.angle,j=x.className,g=x.breakAll,T=n5(x,L5e);if(!zr(r)||!zr(a))return null;var E=r+(Ie(C)?C:0),A=a+(Ie(S)?S:0),I;switch(p){case"start":I=gA("calc(".concat(u,")"));break;case"middle":I=gA("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:I=gA("calc(".concat(w.length-1," * -").concat(l,")"));break}var k=[];if(h){var L=w[0].width,V=x.width;k.push("scale(".concat((Ie(V)?V/L:1)/L,")"))}return P&&k.push("rotate(".concat(P,", ").concat(E,", ").concat(A,")")),k.length&&(T.transform=k.join(" ")),F.createElement("text",QP({},vt(T,!0),{x:E,y:A,className:$t("recharts-text",j),textAnchor:m,fill:b.includes("url")?a5:b}),w.map(function(B,M){var $=B.words.join(g?"":" ");return F.createElement("tspan",{x:E,dy:M===0?I:l,key:"".concat($,"-").concat(M)},$)}))};function Nu(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function W5e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function hD(t){let e,n,r;t.length!==2?(e=Nu,n=(l,c)=>Nu(t(l),c),r=(l,c)=>t(l)-c):(e=t===Nu||t===W5e?t:H5e,n=t,r=t);function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;n(l[h],c)<0?u=h+1:d=h}while(u<d)}return u}function a(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;n(l[h],c)<=0?u=h+1:d=h}while(u<d)}return u}function o(l,c,u=0,d=l.length){const h=s(l,c,u,d-1);return h>u&&r(l[h-1],c)>-r(l[h],c)?h-1:h}return{left:s,center:o,right:a}}function H5e(){return 0}function dee(t){return t===null?NaN:+t}function*K5e(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const G5e=hD(Nu),bb=G5e.right;hD(dee).center;class o5 extends Map{constructor(e,n=X5e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,s]of e)this.set(r,s)}get(e){return super.get(l5(this,e))}has(e){return super.has(l5(this,e))}set(e,n){return super.set(Y5e(this,e),n)}delete(e){return super.delete(Q5e(this,e))}}function l5({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Y5e({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Q5e({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function X5e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Z5e(t=Nu){if(t===Nu)return hee;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function hee(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const J5e=Math.sqrt(50),eUe=Math.sqrt(10),tUe=Math.sqrt(2);function aj(t,e,n){const r=(e-t)/Math.max(0,n),s=Math.floor(Math.log10(r)),a=r/Math.pow(10,s),o=a>=J5e?10:a>=eUe?5:a>=tUe?2:1;let l,c,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,s)*o,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=n&&n<2?aj(t,e,n*2):[l,c,u]}function XP(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[s,a,o]=r?aj(e,t,n):aj(t,e,n);if(!(a>=s))return[];const l=a-s+1,c=new Array(l);if(r)if(o<0)for(let u=0;u<l;++u)c[u]=(a-u)/-o;else for(let u=0;u<l;++u)c[u]=(a-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(s+u)/-o;else for(let u=0;u<l;++u)c[u]=(s+u)*o;return c}function ZP(t,e,n){return e=+e,t=+t,n=+n,aj(t,e,n)[2]}function JP(t,e,n){e=+e,t=+t,n=+n;const r=e<t,s=r?ZP(e,t,n):ZP(t,e,n);return(r?-1:1)*(s<0?1/-s:s)}function c5(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function u5(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function fee(t,e,n=0,r=1/0,s){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(s=s===void 0?hee:Z5e(s);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,d=Math.log(c),h=.5*Math.exp(2*d/3),f=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),m=Math.max(n,Math.floor(e-u*h/c+f)),y=Math.min(r,Math.floor(e+(c-u)*h/c+f));fee(t,e,m,y,s)}const a=t[e];let o=n,l=r;for(Wg(t,n,e),s(t[r],a)>0&&Wg(t,n,r);o<l;){for(Wg(t,o,l),++o,--l;s(t[o],a)<0;)++o;for(;s(t[l],a)>0;)--l}s(t[n],a)===0?Wg(t,n,l):(++l,Wg(t,l,r)),l<=e&&(n=l+1),e<=l&&(r=l-1)}return t}function Wg(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function nUe(t,e,n){if(t=Float64Array.from(K5e(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return u5(t);if(e>=1)return c5(t);var r,s=(r-1)*e,a=Math.floor(s),o=c5(fee(t,a).subarray(0,a+1)),l=u5(t.subarray(a+1));return o+(l-o)*(s-a)}}function rUe(t,e,n=dee){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,s=(r-1)*e,a=Math.floor(s),o=+n(t[a],a,t),l=+n(t[a+1],a+1,t);return o+(l-o)*(s-a)}}function sUe(t,e,n){t=+t,e=+e,n=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(s);++r<s;)a[r]=t+r*n;return a}function ja(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function lc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const eI=Symbol("implicit");function fD(){var t=new o5,e=[],n=[],r=eI;function s(a){let o=t.get(a);if(o===void 0){if(r!==eI)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return s.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new o5;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return s},s.range=function(a){return arguments.length?(n=Array.from(a),s):n.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return fD(e,n).unknown(r)},ja.apply(s,arguments),s}function Qv(){var t=fD().unknown(void 0),e=t.domain,n=t.range,r=0,s=1,a,o,l=!1,c=0,u=0,d=.5;delete t.unknown;function h(){var f=e().length,m=s<r,y=m?s:r,p=m?r:s;a=(p-y)/Math.max(1,f-c+u*2),l&&(a=Math.floor(a)),y+=(p-y-a*(f-c))*d,o=a*(1-c),l&&(y=Math.round(y),o=Math.round(o));var v=sUe(f).map(function(b){return y+a*b});return n(m?v.reverse():v)}return t.domain=function(f){return arguments.length?(e(f),h()):e()},t.range=function(f){return arguments.length?([r,s]=f,r=+r,s=+s,h()):[r,s]},t.rangeRound=function(f){return[r,s]=f,r=+r,s=+s,l=!0,h()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(f){return arguments.length?(l=!!f,h()):l},t.padding=function(f){return arguments.length?(c=Math.min(1,u=+f),h()):c},t.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},t.paddingOuter=function(f){return arguments.length?(u=+f,h()):u},t.align=function(f){return arguments.length?(d=Math.max(0,Math.min(1,f)),h()):d},t.copy=function(){return Qv(e(),[r,s]).round(l).paddingInner(c).paddingOuter(u).align(d)},ja.apply(h(),arguments)}function mee(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return mee(e())},t}function Wy(){return mee(Qv.apply(null,arguments).paddingInner(1))}function mD(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function pee(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function wb(){}var Xv=.7,oj=1/Xv,gm="\\s*([+-]?\\d+)\\s*",Zv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Go="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iUe=/^#([0-9a-f]{3,8})$/,aUe=new RegExp(`^rgb\\(${gm},${gm},${gm}\\)$`),oUe=new RegExp(`^rgb\\(${Go},${Go},${Go}\\)$`),lUe=new RegExp(`^rgba\\(${gm},${gm},${gm},${Zv}\\)$`),cUe=new RegExp(`^rgba\\(${Go},${Go},${Go},${Zv}\\)$`),uUe=new RegExp(`^hsl\\(${Zv},${Go},${Go}\\)$`),dUe=new RegExp(`^hsla\\(${Zv},${Go},${Go},${Zv}\\)$`),d5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};mD(wb,Jv,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:h5,formatHex:h5,formatHex8:hUe,formatHsl:fUe,formatRgb:f5,toString:f5});function h5(){return this.rgb().formatHex()}function hUe(){return this.rgb().formatHex8()}function fUe(){return gee(this).formatHsl()}function f5(){return this.rgb().formatRgb()}function Jv(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=iUe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?m5(e):n===3?new gi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?E0(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?E0(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=aUe.exec(t))?new gi(e[1],e[2],e[3],1):(e=oUe.exec(t))?new gi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=lUe.exec(t))?E0(e[1],e[2],e[3],e[4]):(e=cUe.exec(t))?E0(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=uUe.exec(t))?y5(e[1],e[2]/100,e[3]/100,1):(e=dUe.exec(t))?y5(e[1],e[2]/100,e[3]/100,e[4]):d5.hasOwnProperty(t)?m5(d5[t]):t==="transparent"?new gi(NaN,NaN,NaN,0):null}function m5(t){return new gi(t>>16&255,t>>8&255,t&255,1)}function E0(t,e,n,r){return r<=0&&(t=e=n=NaN),new gi(t,e,n,r)}function mUe(t){return t instanceof wb||(t=Jv(t)),t?(t=t.rgb(),new gi(t.r,t.g,t.b,t.opacity)):new gi}function tI(t,e,n,r){return arguments.length===1?mUe(t):new gi(t,e,n,r??1)}function gi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}mD(gi,tI,pee(wb,{brighter(t){return t=t==null?oj:Math.pow(oj,t),new gi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Xv:Math.pow(Xv,t),new gi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new gi(oh(this.r),oh(this.g),oh(this.b),lj(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:p5,formatHex:p5,formatHex8:pUe,formatRgb:g5,toString:g5}));function p5(){return`#${Ud(this.r)}${Ud(this.g)}${Ud(this.b)}`}function pUe(){return`#${Ud(this.r)}${Ud(this.g)}${Ud(this.b)}${Ud((isNaN(this.opacity)?1:this.opacity)*255)}`}function g5(){const t=lj(this.opacity);return`${t===1?"rgb(":"rgba("}${oh(this.r)}, ${oh(this.g)}, ${oh(this.b)}${t===1?")":`, ${t})`}`}function lj(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function oh(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ud(t){return t=oh(t),(t<16?"0":"")+t.toString(16)}function y5(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new qa(t,e,n,r)}function gee(t){if(t instanceof qa)return new qa(t.h,t.s,t.l,t.opacity);if(t instanceof wb||(t=Jv(t)),!t)return new qa;if(t instanceof qa)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,l=a-s,c=(a+s)/2;return l?(e===a?o=(n-r)/l+(n<r)*6:n===a?o=(r-e)/l+2:o=(e-n)/l+4,l/=c<.5?a+s:2-a-s,o*=60):l=c>0&&c<1?0:o,new qa(o,l,c,t.opacity)}function gUe(t,e,n,r){return arguments.length===1?gee(t):new qa(t,e,n,r??1)}function qa(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}mD(qa,gUe,pee(wb,{brighter(t){return t=t==null?oj:Math.pow(oj,t),new qa(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Xv:Math.pow(Xv,t),new qa(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new gi(yA(t>=240?t-240:t+120,s,r),yA(t,s,r),yA(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new qa(v5(this.h),A0(this.s),A0(this.l),lj(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=lj(this.opacity);return`${t===1?"hsl(":"hsla("}${v5(this.h)}, ${A0(this.s)*100}%, ${A0(this.l)*100}%${t===1?")":`, ${t})`}`}}));function v5(t){return t=(t||0)%360,t<0?t+360:t}function A0(t){return Math.max(0,Math.min(1,t||0))}function yA(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const pD=t=>()=>t;function yUe(t,e){return function(n){return t+n*e}}function vUe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function xUe(t){return(t=+t)==1?yee:function(e,n){return n-e?vUe(e,n,t):pD(isNaN(e)?n:e)}}function yee(t,e){var n=e-t;return n?yUe(t,n):pD(isNaN(t)?e:t)}const x5=function t(e){var n=xUe(e);function r(s,a){var o=n((s=tI(s)).r,(a=tI(a)).r),l=n(s.g,a.g),c=n(s.b,a.b),u=yee(s.opacity,a.opacity);return function(d){return s.r=o(d),s.g=l(d),s.b=c(d),s.opacity=u(d),s+""}}return r.gamma=t,r}(1);function bUe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),s;return function(a){for(s=0;s<n;++s)r[s]=t[s]*(1-a)+e[s]*a;return r}}function wUe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function _Ue(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,s=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)s[o]=dg(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(l){for(o=0;o<r;++o)a[o]=s[o](l);return a}}function jUe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function cj(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function NUe(t,e){var n={},r={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?n[s]=dg(t[s],e[s]):r[s]=e[s];return function(a){for(s in n)r[s]=n[s](a);return r}}var nI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vA=new RegExp(nI.source,"g");function SUe(t){return function(){return t}}function EUe(t){return function(e){return t(e)+""}}function AUe(t,e){var n=nI.lastIndex=vA.lastIndex=0,r,s,a,o=-1,l=[],c=[];for(t=t+"",e=e+"";(r=nI.exec(t))&&(s=vA.exec(e));)(a=s.index)>n&&(a=e.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(r=r[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:cj(r,s)})),n=vA.lastIndex;return n<e.length&&(a=e.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?c[0]?EUe(c[0].x):SUe(e):(e=c.length,function(u){for(var d=0,h;d<e;++d)l[(h=c[d]).i]=h.x(u);return l.join("")})}function dg(t,e){var n=typeof e,r;return e==null||n==="boolean"?pD(e):(n==="number"?cj:n==="string"?(r=Jv(e))?(e=r,x5):AUe:e instanceof Jv?x5:e instanceof Date?jUe:wUe(e)?bUe:Array.isArray(e)?_Ue:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?NUe:cj)(t,e)}function gD(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function TUe(t,e){e===void 0&&(e=t,t=dg);for(var n=0,r=e.length-1,s=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(s,s=e[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[l](o-l)}}function CUe(t){return function(){return t}}function uj(t){return+t}var b5=[0,1];function Gs(t){return t}function rI(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:CUe(isNaN(e)?NaN:.5)}function PUe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function IUe(t,e,n){var r=t[0],s=t[1],a=e[0],o=e[1];return s<r?(r=rI(s,r),a=n(o,a)):(r=rI(r,s),a=n(a,o)),function(l){return a(r(l))}}function kUe(t,e,n){var r=Math.min(t.length,e.length)-1,s=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)s[o]=rI(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(l){var c=bb(t,l,1,r)-1;return a[c](s[c](l))}}function _b(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function VS(){var t=b5,e=b5,n=dg,r,s,a,o=Gs,l,c,u;function d(){var f=Math.min(t.length,e.length);return o!==Gs&&(o=PUe(t[0],t[f-1])),l=f>2?kUe:IUe,c=u=null,h}function h(f){return f==null||isNaN(f=+f)?a:(c||(c=l(t.map(r),e,n)))(r(o(f)))}return h.invert=function(f){return o(s((u||(u=l(e,t.map(r),cj)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,uj),d()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),d()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),n=gD,d()},h.clamp=function(f){return arguments.length?(o=f?!0:Gs,d()):o!==Gs},h.interpolate=function(f){return arguments.length?(n=f,d()):n},h.unknown=function(f){return arguments.length?(a=f,h):a},function(f,m){return r=f,s=m,d()}}function yD(){return VS()(Gs,Gs)}function RUe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function dj(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function cp(t){return t=dj(Math.abs(t)),t?t[1]:NaN}function OUe(t,e){return function(n,r){for(var s=n.length,a=[],o=0,l=t[0],c=0;s>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),a.push(n.substring(s-=l,s+l)),!((c+=l+1)>r));)l=t[o=(o+1)%t.length];return a.reverse().join(e)}}function DUe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var MUe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ex(t){if(!(e=MUe.exec(t)))throw new Error("invalid format: "+t);var e;return new vD({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ex.prototype=vD.prototype;function vD(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}vD.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function LUe(t){e:for(var e=t.length,n=1,r=-1,s;n<e;++n)switch(t[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(s+1):t}var vee;function $Ue(t,e){var n=dj(t,e);if(!n)return t+"";var r=n[0],s=n[1],a=s-(vee=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+dj(t,Math.max(0,e+a-1))[0]}function w5(t,e){var n=dj(t,e);if(!n)return t+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const _5={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:RUe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>w5(t*100,e),r:w5,s:$Ue,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function j5(t){return t}var N5=Array.prototype.map,S5=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function FUe(t){var e=t.grouping===void 0||t.thousands===void 0?j5:OUe(N5.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?j5:DUe(N5.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(h){h=ex(h);var f=h.fill,m=h.align,y=h.sign,p=h.symbol,v=h.zero,b=h.width,x=h.comma,w=h.precision,C=h.trim,S=h.type;S==="n"?(x=!0,S="g"):_5[S]||(w===void 0&&(w=12),C=!0,S="g"),(v||f==="0"&&m==="=")&&(v=!0,f="0",m="=");var P=p==="$"?n:p==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",j=p==="$"?r:/[%p]/.test(S)?o:"",g=_5[S],T=/[defgprs%]/.test(S);w=w===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function E(A){var I=P,k=j,L,V,B;if(S==="c")k=g(A)+k,A="";else{A=+A;var M=A<0||1/A<0;if(A=isNaN(A)?c:g(Math.abs(A),w),C&&(A=LUe(A)),M&&+A==0&&y!=="+"&&(M=!1),I=(M?y==="("?y:l:y==="-"||y==="("?"":y)+I,k=(S==="s"?S5[8+vee/3]:"")+k+(M&&y==="("?")":""),T){for(L=-1,V=A.length;++L<V;)if(B=A.charCodeAt(L),48>B||B>57){k=(B===46?s+A.slice(L+1):A.slice(L))+k,A=A.slice(0,L);break}}}x&&!v&&(A=e(A,1/0));var $=I.length+A.length+k.length,O=$<b?new Array(b-$+1).join(f):"";switch(x&&v&&(A=e(O+A,O.length?b-k.length:1/0),O=""),m){case"<":A=I+A+k+O;break;case"=":A=I+O+A+k;break;case"^":A=O.slice(0,$=O.length>>1)+I+A+k+O.slice($);break;default:A=O+I+A+k;break}return a(A)}return E.toString=function(){return h+""},E}function d(h,f){var m=u((h=ex(h),h.type="f",h)),y=Math.max(-8,Math.min(8,Math.floor(cp(f)/3)))*3,p=Math.pow(10,-y),v=S5[8+y/3];return function(b){return m(p*b)+v}}return{format:u,formatPrefix:d}}var T0,xD,xee;VUe({thousands:",",grouping:[3],currency:["$",""]});function VUe(t){return T0=FUe(t),xD=T0.format,xee=T0.formatPrefix,T0}function BUe(t){return Math.max(0,-cp(Math.abs(t)))}function UUe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(cp(e)/3)))*3-cp(Math.abs(t)))}function zUe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,cp(e)-cp(t))+1}function bee(t,e,n,r){var s=JP(t,e,n),a;switch(r=ex(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=UUe(s,o))&&(r.precision=a),xee(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=zUe(s,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=BUe(s))&&(r.precision=a-(r.type==="%")*2);break}}return xD(r)}function od(t){var e=t.domain;return t.ticks=function(n){var r=e();return XP(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var s=e();return bee(s[0],s[s.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),s=0,a=r.length-1,o=r[s],l=r[a],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=s,s=a,a=u);d-- >0;){if(u=ZP(o,l,n),u===c)return r[s]=o,r[a]=l,e(r);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function hj(){var t=yD();return t.copy=function(){return _b(t,hj())},ja.apply(t,arguments),od(t)}function wee(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,uj),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return wee(t).unknown(e)},t=arguments.length?Array.from(t,uj):[0,1],od(n)}function _ee(t,e){t=t.slice();var n=0,r=t.length-1,s=t[n],a=t[r],o;return a<s&&(o=n,n=r,r=o,o=s,s=a,a=o),t[n]=e.floor(s),t[r]=e.ceil(a),t}function E5(t){return Math.log(t)}function A5(t){return Math.exp(t)}function qUe(t){return-Math.log(-t)}function WUe(t){return-Math.exp(-t)}function HUe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function KUe(t){return t===10?HUe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function GUe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function T5(t){return(e,n)=>-t(-e,n)}function bD(t){const e=t(E5,A5),n=e.domain;let r=10,s,a;function o(){return s=GUe(r),a=KUe(r),n()[0]<0?(s=T5(s),a=T5(a),t(qUe,WUe)):t(E5,A5),e}return e.base=function(l){return arguments.length?(r=+l,o()):r},e.domain=function(l){return arguments.length?(n(l),o()):n()},e.ticks=l=>{const c=n();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let f=s(u),m=s(d),y,p;const v=l==null?10:+l;let b=[];if(!(r%1)&&m-f<v){if(f=Math.floor(f),m=Math.ceil(m),u>0){for(;f<=m;++f)for(y=1;y<r;++y)if(p=f<0?y/a(-f):y*a(f),!(p<u)){if(p>d)break;b.push(p)}}else for(;f<=m;++f)for(y=r-1;y>=1;--y)if(p=f>0?y/a(-f):y*a(f),!(p<u)){if(p>d)break;b.push(p)}b.length*2<v&&(b=XP(u,d,v))}else b=XP(f,m,Math.min(m-f,v)).map(a);return h?b.reverse():b},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=ex(c)).precision==null&&(c.trim=!0),c=xD(c)),l===1/0)return c;const u=Math.max(1,r*l/e.ticks().length);return d=>{let h=d/a(Math.round(s(d)));return h*r<r-.5&&(h*=r),h<=u?c(d):""}},e.nice=()=>n(_ee(n(),{floor:l=>a(Math.floor(s(l))),ceil:l=>a(Math.ceil(s(l)))})),e}function jee(){const t=bD(VS()).domain([1,10]);return t.copy=()=>_b(t,jee()).base(t.base()),ja.apply(t,arguments),t}function C5(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function P5(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function wD(t){var e=1,n=t(C5(e),P5(e));return n.constant=function(r){return arguments.length?t(C5(e=+r),P5(e)):e},od(n)}function Nee(){var t=wD(VS());return t.copy=function(){return _b(t,Nee()).constant(t.constant())},ja.apply(t,arguments)}function I5(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function YUe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function QUe(t){return t<0?-t*t:t*t}function _D(t){var e=t(Gs,Gs),n=1;function r(){return n===1?t(Gs,Gs):n===.5?t(YUe,QUe):t(I5(n),I5(1/n))}return e.exponent=function(s){return arguments.length?(n=+s,r()):n},od(e)}function jD(){var t=_D(VS());return t.copy=function(){return _b(t,jD()).exponent(t.exponent())},ja.apply(t,arguments),t}function XUe(){return jD.apply(null,arguments).exponent(.5)}function k5(t){return Math.sign(t)*t*t}function ZUe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function See(){var t=yD(),e=[0,1],n=!1,r;function s(a){var o=ZUe(t(a));return isNaN(o)?r:n?Math.round(o):o}return s.invert=function(a){return t.invert(k5(a))},s.domain=function(a){return arguments.length?(t.domain(a),s):t.domain()},s.range=function(a){return arguments.length?(t.range((e=Array.from(a,uj)).map(k5)),s):e.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(n=!!a,s):n},s.clamp=function(a){return arguments.length?(t.clamp(a),s):t.clamp()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return See(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},ja.apply(s,arguments),od(s)}function Eee(){var t=[],e=[],n=[],r;function s(){var o=0,l=Math.max(1,e.length);for(n=new Array(l-1);++o<l;)n[o-1]=rUe(t,o/l);return a}function a(o){return o==null||isNaN(o=+o)?r:e[bb(n,o)]}return a.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(Nu),s()},a.range=function(o){return arguments.length?(e=Array.from(o),s()):e.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return Eee().domain(t).range(e).unknown(r)},ja.apply(a,arguments)}function Aee(){var t=0,e=1,n=1,r=[.5],s=[0,1],a;function o(c){return c!=null&&c<=c?s[bb(r,c,0,n)]:a}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(n=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},o.unknown=function(c){return arguments.length&&(a=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return Aee().domain([t,e]).range(s).unknown(a)},ja.apply(od(o),arguments)}function Tee(){var t=[.5],e=[0,1],n,r=1;function s(a){return a!=null&&a<=a?e[bb(t,a,0,r)]:n}return s.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return Tee().domain(t).range(e).unknown(n)},ja.apply(s,arguments)}const xA=new Date,bA=new Date;function Wr(t,e,n,r){function s(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(t(a=new Date(+a)),a),s.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),s.round=a=>{const o=s(a),l=s.ceil(a);return a-o<l-a?o:l},s.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),s.range=(a,o,l)=>{const c=[];if(a=s.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return c;let u;do c.push(u=new Date(+a)),e(a,l),t(a);while(u<a&&a<o);return c},s.filter=a=>Wr(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!a(o););else for(;--l>=0;)for(;e(o,1),!a(o););}),n&&(s.count=(a,o)=>(xA.setTime(+a),bA.setTime(+o),t(xA),t(bA),Math.floor(n(xA,bA))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(r?o=>r(o)%a===0:o=>s.count(0,o)%a===0):s)),s}const fj=Wr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);fj.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Wr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):fj);fj.range;const Sl=1e3,sa=Sl*60,El=sa*60,Zl=El*24,ND=Zl*7,R5=Zl*30,wA=Zl*365,zd=Wr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Sl)},(t,e)=>(e-t)/Sl,t=>t.getUTCSeconds());zd.range;const SD=Wr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Sl)},(t,e)=>{t.setTime(+t+e*sa)},(t,e)=>(e-t)/sa,t=>t.getMinutes());SD.range;const ED=Wr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*sa)},(t,e)=>(e-t)/sa,t=>t.getUTCMinutes());ED.range;const AD=Wr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Sl-t.getMinutes()*sa)},(t,e)=>{t.setTime(+t+e*El)},(t,e)=>(e-t)/El,t=>t.getHours());AD.range;const TD=Wr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*El)},(t,e)=>(e-t)/El,t=>t.getUTCHours());TD.range;const jb=Wr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*sa)/Zl,t=>t.getDate()-1);jb.range;const BS=Wr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Zl,t=>t.getUTCDate()-1);BS.range;const Cee=Wr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Zl,t=>Math.floor(t/Zl));Cee.range;function Jh(t){return Wr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*sa)/ND)}const US=Jh(0),mj=Jh(1),JUe=Jh(2),e6e=Jh(3),up=Jh(4),t6e=Jh(5),n6e=Jh(6);US.range;mj.range;JUe.range;e6e.range;up.range;t6e.range;n6e.range;function ef(t){return Wr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/ND)}const zS=ef(0),pj=ef(1),r6e=ef(2),s6e=ef(3),dp=ef(4),i6e=ef(5),a6e=ef(6);zS.range;pj.range;r6e.range;s6e.range;dp.range;i6e.range;a6e.range;const CD=Wr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());CD.range;const PD=Wr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());PD.range;const Jl=Wr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Jl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Wr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Jl.range;const ec=Wr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ec.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Wr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});ec.range;function Pee(t,e,n,r,s,a){const o=[[zd,1,Sl],[zd,5,5*Sl],[zd,15,15*Sl],[zd,30,30*Sl],[a,1,sa],[a,5,5*sa],[a,15,15*sa],[a,30,30*sa],[s,1,El],[s,3,3*El],[s,6,6*El],[s,12,12*El],[r,1,Zl],[r,2,2*Zl],[n,1,ND],[e,1,R5],[e,3,3*R5],[t,1,wA]];function l(u,d,h){const f=d<u;f&&([u,d]=[d,u]);const m=h&&typeof h.range=="function"?h:c(u,d,h),y=m?m.range(u,+d+1):[];return f?y.reverse():y}function c(u,d,h){const f=Math.abs(d-u)/h,m=hD(([,,v])=>v).right(o,f);if(m===o.length)return t.every(JP(u/wA,d/wA,h));if(m===0)return fj.every(Math.max(JP(u,d,h),1));const[y,p]=o[f/o[m-1][2]<o[m][2]/f?m-1:m];return y.every(p)}return[l,c]}const[o6e,l6e]=Pee(ec,PD,zS,Cee,TD,ED),[c6e,u6e]=Pee(Jl,CD,US,jb,AD,SD);function _A(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function jA(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Hg(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function d6e(t){var e=t.dateTime,n=t.date,r=t.time,s=t.periods,a=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,u=Kg(s),d=Gg(s),h=Kg(a),f=Gg(a),m=Kg(o),y=Gg(o),p=Kg(l),v=Gg(l),b=Kg(c),x=Gg(c),w={a:M,A:$,b:O,B:W,c:null,d:F5,e:F5,f:O6e,g:q6e,G:H6e,H:I6e,I:k6e,j:R6e,L:Iee,m:D6e,M:M6e,p:Z,q:ae,Q:U5,s:z5,S:L6e,u:$6e,U:F6e,V:V6e,w:B6e,W:U6e,x:null,X:null,y:z6e,Y:W6e,Z:K6e,"%":B5},C={a:Ae,A:ie,b:pe,B:Ue,c:null,d:V5,e:V5,f:X6e,g:oze,G:cze,H:G6e,I:Y6e,j:Q6e,L:Ree,m:Z6e,M:J6e,p:Ne,q:nt,Q:U5,s:z5,S:eze,u:tze,U:nze,V:rze,w:sze,W:ize,x:null,X:null,y:aze,Y:lze,Z:uze,"%":B5},S={a:E,A,b:I,B:k,c:L,d:L5,e:L5,f:A6e,g:M5,G:D5,H:$5,I:$5,j:j6e,L:E6e,m:_6e,M:N6e,p:T,q:w6e,Q:C6e,s:P6e,S:S6e,u:g6e,U:y6e,V:v6e,w:p6e,W:x6e,x:V,X:B,y:M5,Y:D5,Z:b6e,"%":T6e};w.x=P(n,w),w.X=P(r,w),w.c=P(e,w),C.x=P(n,C),C.X=P(r,C),C.c=P(e,C);function P(fe,_e){return function(ge){var ce=[],He=-1,rt=0,zt=fe.length,nn,En,Hr;for(ge instanceof Date||(ge=new Date(+ge));++He<zt;)fe.charCodeAt(He)===37&&(ce.push(fe.slice(rt,He)),(En=O5[nn=fe.charAt(++He)])!=null?nn=fe.charAt(++He):En=nn==="e"?" ":"0",(Hr=_e[nn])&&(nn=Hr(ge,En)),ce.push(nn),rt=He+1);return ce.push(fe.slice(rt,He)),ce.join("")}}function j(fe,_e){return function(ge){var ce=Hg(1900,void 0,1),He=g(ce,fe,ge+="",0),rt,zt;if(He!=ge.length)return null;if("Q"in ce)return new Date(ce.Q);if("s"in ce)return new Date(ce.s*1e3+("L"in ce?ce.L:0));if(_e&&!("Z"in ce)&&(ce.Z=0),"p"in ce&&(ce.H=ce.H%12+ce.p*12),ce.m===void 0&&(ce.m="q"in ce?ce.q:0),"V"in ce){if(ce.V<1||ce.V>53)return null;"w"in ce||(ce.w=1),"Z"in ce?(rt=jA(Hg(ce.y,0,1)),zt=rt.getUTCDay(),rt=zt>4||zt===0?pj.ceil(rt):pj(rt),rt=BS.offset(rt,(ce.V-1)*7),ce.y=rt.getUTCFullYear(),ce.m=rt.getUTCMonth(),ce.d=rt.getUTCDate()+(ce.w+6)%7):(rt=_A(Hg(ce.y,0,1)),zt=rt.getDay(),rt=zt>4||zt===0?mj.ceil(rt):mj(rt),rt=jb.offset(rt,(ce.V-1)*7),ce.y=rt.getFullYear(),ce.m=rt.getMonth(),ce.d=rt.getDate()+(ce.w+6)%7)}else("W"in ce||"U"in ce)&&("w"in ce||(ce.w="u"in ce?ce.u%7:"W"in ce?1:0),zt="Z"in ce?jA(Hg(ce.y,0,1)).getUTCDay():_A(Hg(ce.y,0,1)).getDay(),ce.m=0,ce.d="W"in ce?(ce.w+6)%7+ce.W*7-(zt+5)%7:ce.w+ce.U*7-(zt+6)%7);return"Z"in ce?(ce.H+=ce.Z/100|0,ce.M+=ce.Z%100,jA(ce)):_A(ce)}}function g(fe,_e,ge,ce){for(var He=0,rt=_e.length,zt=ge.length,nn,En;He<rt;){if(ce>=zt)return-1;if(nn=_e.charCodeAt(He++),nn===37){if(nn=_e.charAt(He++),En=S[nn in O5?_e.charAt(He++):nn],!En||(ce=En(fe,ge,ce))<0)return-1}else if(nn!=ge.charCodeAt(ce++))return-1}return ce}function T(fe,_e,ge){var ce=u.exec(_e.slice(ge));return ce?(fe.p=d.get(ce[0].toLowerCase()),ge+ce[0].length):-1}function E(fe,_e,ge){var ce=m.exec(_e.slice(ge));return ce?(fe.w=y.get(ce[0].toLowerCase()),ge+ce[0].length):-1}function A(fe,_e,ge){var ce=h.exec(_e.slice(ge));return ce?(fe.w=f.get(ce[0].toLowerCase()),ge+ce[0].length):-1}function I(fe,_e,ge){var ce=b.exec(_e.slice(ge));return ce?(fe.m=x.get(ce[0].toLowerCase()),ge+ce[0].length):-1}function k(fe,_e,ge){var ce=p.exec(_e.slice(ge));return ce?(fe.m=v.get(ce[0].toLowerCase()),ge+ce[0].length):-1}function L(fe,_e,ge){return g(fe,e,_e,ge)}function V(fe,_e,ge){return g(fe,n,_e,ge)}function B(fe,_e,ge){return g(fe,r,_e,ge)}function M(fe){return o[fe.getDay()]}function $(fe){return a[fe.getDay()]}function O(fe){return c[fe.getMonth()]}function W(fe){return l[fe.getMonth()]}function Z(fe){return s[+(fe.getHours()>=12)]}function ae(fe){return 1+~~(fe.getMonth()/3)}function Ae(fe){return o[fe.getUTCDay()]}function ie(fe){return a[fe.getUTCDay()]}function pe(fe){return c[fe.getUTCMonth()]}function Ue(fe){return l[fe.getUTCMonth()]}function Ne(fe){return s[+(fe.getUTCHours()>=12)]}function nt(fe){return 1+~~(fe.getUTCMonth()/3)}return{format:function(fe){var _e=P(fe+="",w);return _e.toString=function(){return fe},_e},parse:function(fe){var _e=j(fe+="",!1);return _e.toString=function(){return fe},_e},utcFormat:function(fe){var _e=P(fe+="",C);return _e.toString=function(){return fe},_e},utcParse:function(fe){var _e=j(fe+="",!0);return _e.toString=function(){return fe},_e}}}var O5={"-":"",_:" ",0:"0"},rs=/^\s*\d+/,h6e=/^%/,f6e=/[\\^$*+?|[\]().{}]/g;function fn(t,e,n){var r=t<0?"-":"",s=(r?-t:t)+"",a=s.length;return r+(a<n?new Array(n-a+1).join(e)+s:s)}function m6e(t){return t.replace(f6e,"\\$&")}function Kg(t){return new RegExp("^(?:"+t.map(m6e).join("|")+")","i")}function Gg(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function p6e(t,e,n){var r=rs.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function g6e(t,e,n){var r=rs.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function y6e(t,e,n){var r=rs.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function v6e(t,e,n){var r=rs.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function x6e(t,e,n){var r=rs.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function D5(t,e,n){var r=rs.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function M5(t,e,n){var r=rs.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function b6e(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function w6e(t,e,n){var r=rs.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function _6e(t,e,n){var r=rs.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function L5(t,e,n){var r=rs.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function j6e(t,e,n){var r=rs.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function $5(t,e,n){var r=rs.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function N6e(t,e,n){var r=rs.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function S6e(t,e,n){var r=rs.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function E6e(t,e,n){var r=rs.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function A6e(t,e,n){var r=rs.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function T6e(t,e,n){var r=h6e.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function C6e(t,e,n){var r=rs.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function P6e(t,e,n){var r=rs.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function F5(t,e){return fn(t.getDate(),e,2)}function I6e(t,e){return fn(t.getHours(),e,2)}function k6e(t,e){return fn(t.getHours()%12||12,e,2)}function R6e(t,e){return fn(1+jb.count(Jl(t),t),e,3)}function Iee(t,e){return fn(t.getMilliseconds(),e,3)}function O6e(t,e){return Iee(t,e)+"000"}function D6e(t,e){return fn(t.getMonth()+1,e,2)}function M6e(t,e){return fn(t.getMinutes(),e,2)}function L6e(t,e){return fn(t.getSeconds(),e,2)}function $6e(t){var e=t.getDay();return e===0?7:e}function F6e(t,e){return fn(US.count(Jl(t)-1,t),e,2)}function kee(t){var e=t.getDay();return e>=4||e===0?up(t):up.ceil(t)}function V6e(t,e){return t=kee(t),fn(up.count(Jl(t),t)+(Jl(t).getDay()===4),e,2)}function B6e(t){return t.getDay()}function U6e(t,e){return fn(mj.count(Jl(t)-1,t),e,2)}function z6e(t,e){return fn(t.getFullYear()%100,e,2)}function q6e(t,e){return t=kee(t),fn(t.getFullYear()%100,e,2)}function W6e(t,e){return fn(t.getFullYear()%1e4,e,4)}function H6e(t,e){var n=t.getDay();return t=n>=4||n===0?up(t):up.ceil(t),fn(t.getFullYear()%1e4,e,4)}function K6e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+fn(e/60|0,"0",2)+fn(e%60,"0",2)}function V5(t,e){return fn(t.getUTCDate(),e,2)}function G6e(t,e){return fn(t.getUTCHours(),e,2)}function Y6e(t,e){return fn(t.getUTCHours()%12||12,e,2)}function Q6e(t,e){return fn(1+BS.count(ec(t),t),e,3)}function Ree(t,e){return fn(t.getUTCMilliseconds(),e,3)}function X6e(t,e){return Ree(t,e)+"000"}function Z6e(t,e){return fn(t.getUTCMonth()+1,e,2)}function J6e(t,e){return fn(t.getUTCMinutes(),e,2)}function eze(t,e){return fn(t.getUTCSeconds(),e,2)}function tze(t){var e=t.getUTCDay();return e===0?7:e}function nze(t,e){return fn(zS.count(ec(t)-1,t),e,2)}function Oee(t){var e=t.getUTCDay();return e>=4||e===0?dp(t):dp.ceil(t)}function rze(t,e){return t=Oee(t),fn(dp.count(ec(t),t)+(ec(t).getUTCDay()===4),e,2)}function sze(t){return t.getUTCDay()}function ize(t,e){return fn(pj.count(ec(t)-1,t),e,2)}function aze(t,e){return fn(t.getUTCFullYear()%100,e,2)}function oze(t,e){return t=Oee(t),fn(t.getUTCFullYear()%100,e,2)}function lze(t,e){return fn(t.getUTCFullYear()%1e4,e,4)}function cze(t,e){var n=t.getUTCDay();return t=n>=4||n===0?dp(t):dp.ceil(t),fn(t.getUTCFullYear()%1e4,e,4)}function uze(){return"+0000"}function B5(){return"%"}function U5(t){return+t}function z5(t){return Math.floor(+t/1e3)}var gf,Dee,Mee;dze({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function dze(t){return gf=d6e(t),Dee=gf.format,gf.parse,Mee=gf.utcFormat,gf.utcParse,gf}function hze(t){return new Date(t)}function fze(t){return t instanceof Date?+t:+new Date(+t)}function ID(t,e,n,r,s,a,o,l,c,u){var d=yD(),h=d.invert,f=d.domain,m=u(".%L"),y=u(":%S"),p=u("%I:%M"),v=u("%I %p"),b=u("%a %d"),x=u("%b %d"),w=u("%B"),C=u("%Y");function S(P){return(c(P)<P?m:l(P)<P?y:o(P)<P?p:a(P)<P?v:r(P)<P?s(P)<P?b:x:n(P)<P?w:C)(P)}return d.invert=function(P){return new Date(h(P))},d.domain=function(P){return arguments.length?f(Array.from(P,fze)):f().map(hze)},d.ticks=function(P){var j=f();return t(j[0],j[j.length-1],P??10)},d.tickFormat=function(P,j){return j==null?S:u(j)},d.nice=function(P){var j=f();return(!P||typeof P.range!="function")&&(P=e(j[0],j[j.length-1],P??10)),P?f(_ee(j,P)):d},d.copy=function(){return _b(d,ID(t,e,n,r,s,a,o,l,c,u))},d}function mze(){return ja.apply(ID(c6e,u6e,Jl,CD,US,jb,AD,SD,zd,Dee).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function pze(){return ja.apply(ID(o6e,l6e,ec,PD,zS,BS,TD,ED,zd,Mee).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function qS(){var t=0,e=1,n,r,s,a,o=Gs,l=!1,c;function u(h){return h==null||isNaN(h=+h)?c:o(s===0?.5:(h=(a(h)-n)*s,l?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,e]=h,n=a(t=+t),r=a(e=+e),s=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(h){return arguments.length?(l=!!h,u):l},u.interpolator=function(h){return arguments.length?(o=h,u):o};function d(h){return function(f){var m,y;return arguments.length?([m,y]=f,o=h(m,y),u):[o(0),o(1)]}}return u.range=d(dg),u.rangeRound=d(gD),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return a=h,n=h(t),r=h(e),s=n===r?0:1/(r-n),u}}function ld(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Lee(){var t=od(qS()(Gs));return t.copy=function(){return ld(t,Lee())},lc.apply(t,arguments)}function $ee(){var t=bD(qS()).domain([1,10]);return t.copy=function(){return ld(t,$ee()).base(t.base())},lc.apply(t,arguments)}function Fee(){var t=wD(qS());return t.copy=function(){return ld(t,Fee()).constant(t.constant())},lc.apply(t,arguments)}function kD(){var t=_D(qS());return t.copy=function(){return ld(t,kD()).exponent(t.exponent())},lc.apply(t,arguments)}function gze(){return kD.apply(null,arguments).exponent(.5)}function Vee(){var t=[],e=Gs;function n(r){if(r!=null&&!isNaN(r=+r))return e((bb(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let s of r)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Nu),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,s)=>e(s/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(s,a)=>nUe(t,a/r))},n.copy=function(){return Vee(e).domain(t)},lc.apply(n,arguments)}function WS(){var t=0,e=.5,n=1,r=1,s,a,o,l,c,u=Gs,d,h=!1,f;function m(p){return isNaN(p=+p)?f:(p=.5+((p=+d(p))-a)*(r*p<r*a?l:c),u(h?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([t,e,n]=p,s=d(t=+t),a=d(e=+e),o=d(n=+n),l=s===a?0:.5/(a-s),c=a===o?0:.5/(o-a),r=a<s?-1:1,m):[t,e,n]},m.clamp=function(p){return arguments.length?(h=!!p,m):h},m.interpolator=function(p){return arguments.length?(u=p,m):u};function y(p){return function(v){var b,x,w;return arguments.length?([b,x,w]=v,u=TUe(p,[b,x,w]),m):[u(0),u(.5),u(1)]}}return m.range=y(dg),m.rangeRound=y(gD),m.unknown=function(p){return arguments.length?(f=p,m):f},function(p){return d=p,s=p(t),a=p(e),o=p(n),l=s===a?0:.5/(a-s),c=a===o?0:.5/(o-a),r=a<s?-1:1,m}}function Bee(){var t=od(WS()(Gs));return t.copy=function(){return ld(t,Bee())},lc.apply(t,arguments)}function Uee(){var t=bD(WS()).domain([.1,1,10]);return t.copy=function(){return ld(t,Uee()).base(t.base())},lc.apply(t,arguments)}function zee(){var t=wD(WS());return t.copy=function(){return ld(t,zee()).constant(t.constant())},lc.apply(t,arguments)}function RD(){var t=_D(WS());return t.copy=function(){return ld(t,RD()).exponent(t.exponent())},lc.apply(t,arguments)}function yze(){return RD.apply(null,arguments).exponent(.5)}const q5=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Qv,scaleDiverging:Bee,scaleDivergingLog:Uee,scaleDivergingPow:RD,scaleDivergingSqrt:yze,scaleDivergingSymlog:zee,scaleIdentity:wee,scaleImplicit:eI,scaleLinear:hj,scaleLog:jee,scaleOrdinal:fD,scalePoint:Wy,scalePow:jD,scaleQuantile:Eee,scaleQuantize:Aee,scaleRadial:See,scaleSequential:Lee,scaleSequentialLog:$ee,scaleSequentialPow:kD,scaleSequentialQuantile:Vee,scaleSequentialSqrt:gze,scaleSequentialSymlog:Fee,scaleSqrt:XUe,scaleSymlog:Nee,scaleThreshold:Tee,scaleTime:mze,scaleUtc:pze,tickFormat:bee},Symbol.toStringTag,{value:"Module"}));var vze=tg;function xze(t,e,n){for(var r=-1,s=t.length;++r<s;){var a=t[r],o=e(a);if(o!=null&&(l===void 0?o===o&&!vze(o):n(o,l)))var l=o,c=a}return c}var HS=xze;function bze(t,e){return t>e}var qee=bze,wze=HS,_ze=qee,jze=ug;function Nze(t){return t&&t.length?wze(t,jze,_ze):void 0}var Sze=Nze;const au=xn(Sze);function Eze(t,e){return t<e}var Wee=Eze,Aze=HS,Tze=Wee,Cze=ug;function Pze(t){return t&&t.length?Aze(t,Cze,Tze):void 0}var Ize=Pze;const KS=xn(Ize);var kze=K2,Rze=ll,Oze=JJ,Dze=wi;function Mze(t,e){var n=Dze(t)?kze:Oze;return n(t,Rze(e))}var Lze=Mze,$ze=XJ,Fze=Lze;function Vze(t,e){return $ze(Fze(t,e),1)}var Bze=Vze;const Uze=xn(Bze);var zze=lD;function qze(t,e){return zze(t,e)}var Wze=qze;const hp=xn(Wze);var hg=1e9,Hze={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},DD,Qn=!0,xa="[DecimalError] ",lh=xa+"Invalid argument: ",OD=xa+"Exponent out of range: ",fg=Math.floor,Pd=Math.pow,Kze=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ki,Qr=1e7,zn=7,Hee=9007199254740991,gj=fg(Hee/zn),tt={};tt.absoluteValue=tt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};tt.comparedTo=tt.cmp=function(t){var e,n,r,s,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,s=t.d.length,e=0,n=r<s?r:s;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===s?0:r>s^a.s<0?1:-1};tt.decimalPlaces=tt.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*zn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};tt.dividedBy=tt.div=function(t){return Rl(this,new this.constructor(t))};tt.dividedToIntegerBy=tt.idiv=function(t){var e=this,n=e.constructor;return Cn(Rl(e,new n(t),0,1),n.precision)};tt.equals=tt.eq=function(t){return!this.cmp(t)};tt.exponent=function(){return Ir(this)};tt.greaterThan=tt.gt=function(t){return this.cmp(t)>0};tt.greaterThanOrEqualTo=tt.gte=function(t){return this.cmp(t)>=0};tt.isInteger=tt.isint=function(){return this.e>this.d.length-2};tt.isNegative=tt.isneg=function(){return this.s<0};tt.isPositive=tt.ispos=function(){return this.s>0};tt.isZero=function(){return this.s===0};tt.lessThan=tt.lt=function(t){return this.cmp(t)<0};tt.lessThanOrEqualTo=tt.lte=function(t){return this.cmp(t)<1};tt.logarithm=tt.log=function(t){var e,n=this,r=n.constructor,s=r.precision,a=s+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(ki))throw Error(xa+"NaN");if(n.s<1)throw Error(xa+(n.s?"NaN":"-Infinity"));return n.eq(ki)?new r(0):(Qn=!1,e=Rl(tx(n,a),tx(t,a),a),Qn=!0,Cn(e,s))};tt.minus=tt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Yee(e,t):Kee(e,(t.s=-t.s,t))};tt.modulo=tt.mod=function(t){var e,n=this,r=n.constructor,s=r.precision;if(t=new r(t),!t.s)throw Error(xa+"NaN");return n.s?(Qn=!1,e=Rl(n,t,0,1).times(t),Qn=!0,n.minus(e)):Cn(new r(n),s)};tt.naturalExponential=tt.exp=function(){return Gee(this)};tt.naturalLogarithm=tt.ln=function(){return tx(this)};tt.negated=tt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};tt.plus=tt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Kee(e,t):Yee(e,(t.s=-t.s,t))};tt.precision=tt.sd=function(t){var e,n,r,s=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(lh+t);if(e=Ir(s)+1,r=s.d.length-1,n=r*zn+1,r=s.d[r],r){for(;r%10==0;r/=10)n--;for(r=s.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};tt.squareRoot=tt.sqrt=function(){var t,e,n,r,s,a,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(xa+"NaN")}for(t=Ir(l),Qn=!1,s=Math.sqrt(+l),s==0||s==1/0?(e=Ro(l.d),(e.length+t)%2==0&&(e+="0"),s=Math.sqrt(e),t=fg((t+1)/2)-(t<0||t%2),s==1/0?e="5e"+t:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(s.toString()),n=c.precision,s=o=n+3;;)if(a=r,r=a.plus(Rl(l,a,o+2)).times(.5),Ro(a.d).slice(0,o)===(e=Ro(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),s==o&&e=="4999"){if(Cn(a,n+1,0),a.times(a).eq(l)){r=a;break}}else if(e!="9999")break;o+=4}return Qn=!0,Cn(r,n)};tt.times=tt.mul=function(t){var e,n,r,s,a,o,l,c,u,d=this,h=d.constructor,f=d.d,m=(t=new h(t)).d;if(!d.s||!t.s)return new h(0);for(t.s*=d.s,n=d.e+t.e,c=f.length,u=m.length,c<u&&(a=f,f=m,m=a,o=c,c=u,u=o),a=[],o=c+u,r=o;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,s=c+r;s>r;)l=a[s]+m[r]*f[s-r-1]+e,a[s--]=l%Qr|0,e=l/Qr|0;a[s]=(a[s]+e)%Qr|0}for(;!a[--o];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,Qn?Cn(t,h.precision):t};tt.toDecimalPlaces=tt.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(el(t,0,hg),e===void 0?e=r.rounding:el(e,0,8),Cn(n,t+Ir(n)+1,e))};tt.toExponential=function(t,e){var n,r=this,s=r.constructor;return t===void 0?n=$h(r,!0):(el(t,0,hg),e===void 0?e=s.rounding:el(e,0,8),r=Cn(new s(r),t+1,e),n=$h(r,!0,t+1)),n};tt.toFixed=function(t,e){var n,r,s=this,a=s.constructor;return t===void 0?$h(s):(el(t,0,hg),e===void 0?e=a.rounding:el(e,0,8),r=Cn(new a(s),t+Ir(s)+1,e),n=$h(r.abs(),!1,t+Ir(r)+1),s.isneg()&&!s.isZero()?"-"+n:n)};tt.toInteger=tt.toint=function(){var t=this,e=t.constructor;return Cn(new e(t),Ir(t)+1,e.rounding)};tt.toNumber=function(){return+this};tt.toPower=tt.pow=function(t){var e,n,r,s,a,o,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(ki);if(l=new c(l),!l.s){if(t.s<1)throw Error(xa+"Infinity");return l}if(l.eq(ki))return l;if(r=c.precision,t.eq(ki))return Cn(l,r);if(e=t.e,n=t.d.length-1,o=e>=n,a=l.s,o){if((n=d<0?-d:d)<=Hee){for(s=new c(ki),e=Math.ceil(r/zn+4),Qn=!1;n%2&&(s=s.times(l),H5(s.d,e)),n=fg(n/2),n!==0;)l=l.times(l),H5(l.d,e);return Qn=!0,t.s<0?new c(ki).div(s):Cn(s,r)}}else if(a<0)throw Error(xa+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,Qn=!1,s=t.times(tx(l,r+u)),Qn=!0,s=Gee(s),s.s=a,s};tt.toPrecision=function(t,e){var n,r,s=this,a=s.constructor;return t===void 0?(n=Ir(s),r=$h(s,n<=a.toExpNeg||n>=a.toExpPos)):(el(t,1,hg),e===void 0?e=a.rounding:el(e,0,8),s=Cn(new a(s),t,e),n=Ir(s),r=$h(s,t<=n||n<=a.toExpNeg,t)),r};tt.toSignificantDigits=tt.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(el(t,1,hg),e===void 0?e=r.rounding:el(e,0,8)),Cn(new r(n),t,e)};tt.toString=tt.valueOf=tt.val=tt.toJSON=tt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ir(t),n=t.constructor;return $h(t,e<=n.toExpNeg||e>=n.toExpPos)};function Kee(t,e){var n,r,s,a,o,l,c,u,d=t.constructor,h=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Qn?Cn(e,h):e;if(c=t.d,u=e.d,o=t.e,s=e.e,c=c.slice(),a=o-s,a){for(a<0?(r=c,a=-a,l=u.length):(r=u,s=o,l=c.length),o=Math.ceil(h/zn),l=o>l?o+1:l+1,a>l&&(a=l,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(l=c.length,a=u.length,l-a<0&&(a=l,r=u,u=c,c=r),n=0;a;)n=(c[--a]=c[a]+u[a]+n)/Qr|0,c[a]%=Qr;for(n&&(c.unshift(n),++s),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=s,Qn?Cn(e,h):e}function el(t,e,n){if(t!==~~t||t<e||t>n)throw Error(lh+t)}function Ro(t){var e,n,r,s=t.length-1,a="",o=t[0];if(s>0){for(a+=o,e=1;e<s;e++)r=t[e]+"",n=zn-r.length,n&&(a+=Dc(n)),a+=r;o=t[e],r=o+"",n=zn-r.length,n&&(a+=Dc(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var Rl=function(){function t(r,s){var a,o=0,l=r.length;for(r=r.slice();l--;)a=r[l]*s+o,r[l]=a%Qr|0,o=a/Qr|0;return o&&r.unshift(o),r}function e(r,s,a,o){var l,c;if(a!=o)c=a>o?1:-1;else for(l=c=0;l<a;l++)if(r[l]!=s[l]){c=r[l]>s[l]?1:-1;break}return c}function n(r,s,a){for(var o=0;a--;)r[a]-=o,o=r[a]<s[a]?1:0,r[a]=o*Qr+r[a]-s[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,a,o){var l,c,u,d,h,f,m,y,p,v,b,x,w,C,S,P,j,g,T=r.constructor,E=r.s==s.s?1:-1,A=r.d,I=s.d;if(!r.s)return new T(r);if(!s.s)throw Error(xa+"Division by zero");for(c=r.e-s.e,j=I.length,S=A.length,m=new T(E),y=m.d=[],u=0;I[u]==(A[u]||0);)++u;if(I[u]>(A[u]||0)&&--c,a==null?x=a=T.precision:o?x=a+(Ir(r)-Ir(s))+1:x=a,x<0)return new T(0);if(x=x/zn+2|0,u=0,j==1)for(d=0,I=I[0],x++;(u<S||d)&&x--;u++)w=d*Qr+(A[u]||0),y[u]=w/I|0,d=w%I|0;else{for(d=Qr/(I[0]+1)|0,d>1&&(I=t(I,d),A=t(A,d),j=I.length,S=A.length),C=j,p=A.slice(0,j),v=p.length;v<j;)p[v++]=0;g=I.slice(),g.unshift(0),P=I[0],I[1]>=Qr/2&&++P;do d=0,l=e(I,p,j,v),l<0?(b=p[0],j!=v&&(b=b*Qr+(p[1]||0)),d=b/P|0,d>1?(d>=Qr&&(d=Qr-1),h=t(I,d),f=h.length,v=p.length,l=e(h,p,f,v),l==1&&(d--,n(h,j<f?g:I,f))):(d==0&&(l=d=1),h=I.slice()),f=h.length,f<v&&h.unshift(0),n(p,h,v),l==-1&&(v=p.length,l=e(I,p,j,v),l<1&&(d++,n(p,j<v?g:I,v))),v=p.length):l===0&&(d++,p=[0]),y[u++]=d,l&&p[0]?p[v++]=A[C]||0:(p=[A[C]],v=1);while((C++<S||p[0]!==void 0)&&x--)}return y[0]||y.shift(),m.e=c,Cn(m,o?a+Ir(m)+1:a)}}();function Gee(t,e){var n,r,s,a,o,l,c=0,u=0,d=t.constructor,h=d.precision;if(Ir(t)>16)throw Error(OD+Ir(t));if(!t.s)return new d(ki);for(e==null?(Qn=!1,l=h):l=e,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(r=Math.log(Pd(2,u))/Math.LN10*2+5|0,l+=r,n=s=a=new d(ki),d.precision=l;;){if(s=Cn(s.times(t),l),n=n.times(++c),o=a.plus(Rl(s,n,l)),Ro(o.d).slice(0,l)===Ro(a.d).slice(0,l)){for(;u--;)a=Cn(a.times(a),l);return d.precision=h,e==null?(Qn=!0,Cn(a,h)):a}a=o}}function Ir(t){for(var e=t.e*zn,n=t.d[0];n>=10;n/=10)e++;return e}function NA(t,e,n){if(e>t.LN10.sd())throw Qn=!0,n&&(t.precision=n),Error(xa+"LN10 precision limit exceeded");return Cn(new t(t.LN10),e)}function Dc(t){for(var e="";t--;)e+="0";return e}function tx(t,e){var n,r,s,a,o,l,c,u,d,h=1,f=10,m=t,y=m.d,p=m.constructor,v=p.precision;if(m.s<1)throw Error(xa+(m.s?"NaN":"-Infinity"));if(m.eq(ki))return new p(0);if(e==null?(Qn=!1,u=v):u=e,m.eq(10))return e==null&&(Qn=!0),NA(p,u);if(u+=f,p.precision=u,n=Ro(y),r=n.charAt(0),a=Ir(m),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(t),n=Ro(m.d),r=n.charAt(0),h++;a=Ir(m),r>1?(m=new p("0."+n),a++):m=new p(r+"."+n.slice(1))}else return c=NA(p,u+2,v).times(a+""),m=tx(new p(r+"."+n.slice(1)),u-f).plus(c),p.precision=v,e==null?(Qn=!0,Cn(m,v)):m;for(l=o=m=Rl(m.minus(ki),m.plus(ki),u),d=Cn(m.times(m),u),s=3;;){if(o=Cn(o.times(d),u),c=l.plus(Rl(o,new p(s),u)),Ro(c.d).slice(0,u)===Ro(l.d).slice(0,u))return l=l.times(2),a!==0&&(l=l.plus(NA(p,u+2,v).times(a+""))),l=Rl(l,new p(h),u),p.precision=v,e==null?(Qn=!0,Cn(l,v)):l;l=c,s+=2}}function W5(t,e){var n,r,s;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(s=e.length;e.charCodeAt(s-1)===48;)--s;if(e=e.slice(r,s),e){if(s-=r,n=n-r-1,t.e=fg(n/zn),t.d=[],r=(n+1)%zn,n<0&&(r+=zn),r<s){for(r&&t.d.push(+e.slice(0,r)),s-=zn;r<s;)t.d.push(+e.slice(r,r+=zn));e=e.slice(r),r=zn-e.length}else r-=s;for(;r--;)e+="0";if(t.d.push(+e),Qn&&(t.e>gj||t.e<-gj))throw Error(OD+n)}else t.s=0,t.e=0,t.d=[0];return t}function Cn(t,e,n){var r,s,a,o,l,c,u,d,h=t.d;for(o=1,a=h[0];a>=10;a/=10)o++;if(r=e-o,r<0)r+=zn,s=e,u=h[d=0];else{if(d=Math.ceil((r+1)/zn),a=h.length,d>=a)return t;for(u=a=h[d],o=1;a>=10;a/=10)o++;r%=zn,s=r-zn+o}if(n!==void 0&&(a=Pd(10,o-s-1),l=u/a%10|0,c=e<0||h[d+1]!==void 0||u%a,c=n<4?(l||c)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?s>0?u/Pd(10,o-s):0:h[d-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return c?(a=Ir(t),h.length=1,e=e-a-1,h[0]=Pd(10,(zn-e%zn)%zn),t.e=fg(-e/zn)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=d,a=1,d--):(h.length=d+1,a=Pd(10,zn-r),h[d]=s>0?(u/Pd(10,o-s)%Pd(10,s)|0)*a:0),c)for(;;)if(d==0){(h[0]+=a)==Qr&&(h[0]=1,++t.e);break}else{if(h[d]+=a,h[d]!=Qr)break;h[d--]=0,a=1}for(r=h.length;h[--r]===0;)h.pop();if(Qn&&(t.e>gj||t.e<-gj))throw Error(OD+Ir(t));return t}function Yee(t,e){var n,r,s,a,o,l,c,u,d,h,f=t.constructor,m=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),Qn?Cn(e,m):e;if(c=t.d,h=e.d,r=e.e,u=t.e,c=c.slice(),o=u-r,o){for(d=o<0,d?(n=c,o=-o,l=h.length):(n=h,r=u,l=c.length),s=Math.max(Math.ceil(m/zn),l)+2,o>s&&(o=s,n.length=1),n.reverse(),s=o;s--;)n.push(0);n.reverse()}else{for(s=c.length,l=h.length,d=s<l,d&&(l=s),s=0;s<l;s++)if(c[s]!=h[s]){d=c[s]<h[s];break}o=0}for(d&&(n=c,c=h,h=n,e.s=-e.s),l=c.length,s=h.length-l;s>0;--s)c[l++]=0;for(s=h.length;s>o;){if(c[--s]<h[s]){for(a=s;a&&c[--a]===0;)c[a]=Qr-1;--c[a],c[s]+=Qr}c[s]-=h[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,Qn?Cn(e,m):e):new f(0)}function $h(t,e,n){var r,s=Ir(t),a=Ro(t.d),o=a.length;return e?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+Dc(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(s<0?"e":"e+")+s):s<0?(a="0."+Dc(-s-1)+a,n&&(r=n-o)>0&&(a+=Dc(r))):s>=o?(a+=Dc(s+1-o),n&&(r=n-s-1)>0&&(a=a+"."+Dc(r))):((r=s+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(s+1===o&&(a+="."),a+=Dc(r))),t.s<0?"-"+a:a}function H5(t,e){if(t.length>e)return t.length=e,!0}function Qee(t){var e,n,r;function s(a){var o=this;if(!(o instanceof s))return new s(a);if(o.constructor=s,a instanceof s){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(lh+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return W5(o,a.toString())}else if(typeof a!="string")throw Error(lh+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,Kze.test(a))W5(o,a);else throw Error(lh+a)}if(s.prototype=tt,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=Qee,s.config=s.set=Gze,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return s.config(t),s}function Gze(t){if(!t||typeof t!="object")throw Error(xa+"Object expected");var e,n,r,s=["precision",1,hg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<s.length;e+=3)if((r=t[n=s[e]])!==void 0)if(fg(r)===r&&r>=s[e+1]&&r<=s[e+2])this[n]=r;else throw Error(lh+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(lh+n+": "+r);return this}var DD=Qee(Hze);ki=new DD(1);const An=DD;function Yze(t){return Jze(t)||Zze(t)||Xze(t)||Qze()}function Qze(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xze(t,e){if(t){if(typeof t=="string")return sI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sI(t,e)}}function Zze(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Jze(t){if(Array.isArray(t))return sI(t)}function sI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var e9e=function(e){return e},Xee={"@@functional/placeholder":!0},Zee=function(e){return e===Xee},K5=function(e){return function n(){return arguments.length===0||arguments.length===1&&Zee(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},t9e=function t(e,n){return e===1?n:K5(function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];var o=s.filter(function(l){return l!==Xee}).length;return o>=e?n.apply(void 0,s):t(e-o,K5(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=s.map(function(h){return Zee(h)?c.shift():h});return n.apply(void 0,Yze(d).concat(c))}))})},GS=function(e){return t9e(e.length,e)},iI=function(e,n){for(var r=[],s=e;s<n;++s)r[s-e]=s;return r},n9e=GS(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),r9e=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return e9e;var s=n.reverse(),a=s[0],o=s.slice(1);return function(){return o.reduce(function(l,c){return c(l)},a.apply(void 0,arguments))}},aI=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},Jee=function(e){var n=null,r=null;return function(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return n&&a.every(function(l,c){return l===n[c]})||(n=a,r=e.apply(void 0,a)),r}};function s9e(t){var e;return t===0?e=1:e=Math.floor(new An(t).abs().log(10).toNumber())+1,e}function i9e(t,e,n){for(var r=new An(t),s=0,a=[];r.lt(e)&&s<1e5;)a.push(r.toNumber()),r=r.add(n),s++;return a}var a9e=GS(function(t,e,n){var r=+t,s=+e;return r+n*(s-r)}),o9e=GS(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),l9e=GS(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const YS={rangeStep:i9e,getDigitCount:s9e,interpolateNumber:a9e,uninterpolateNumber:o9e,uninterpolateTruncation:l9e};function oI(t){return d9e(t)||u9e(t)||ete(t)||c9e()}function c9e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u9e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function d9e(t){if(Array.isArray(t))return lI(t)}function nx(t,e){return m9e(t)||f9e(t,e)||ete(t,e)||h9e()}function h9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ete(t,e){if(t){if(typeof t=="string")return lI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lI(t,e)}}function lI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f9e(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,s=!1,a=void 0;try{for(var o=t[Symbol.iterator](),l;!(r=(l=o.next()).done)&&(n.push(l.value),!(e&&n.length===e));r=!0);}catch(c){s=!0,a=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(s)throw a}}return n}}function m9e(t){if(Array.isArray(t))return t}function tte(t){var e=nx(t,2),n=e[0],r=e[1],s=n,a=r;return n>r&&(s=r,a=n),[s,a]}function nte(t,e,n){if(t.lte(0))return new An(0);var r=YS.getDigitCount(t.toNumber()),s=new An(10).pow(r),a=t.div(s),o=r!==1?.05:.1,l=new An(Math.ceil(a.div(o).toNumber())).add(n).mul(o),c=l.mul(s);return e?c:new An(Math.ceil(c))}function p9e(t,e,n){var r=1,s=new An(t);if(!s.isint()&&n){var a=Math.abs(t);a<1?(r=new An(10).pow(YS.getDigitCount(t)-1),s=new An(Math.floor(s.div(r).toNumber())).mul(r)):a>1&&(s=new An(Math.floor(t)))}else t===0?s=new An(Math.floor((e-1)/2)):n||(s=new An(Math.floor(t)));var o=Math.floor((e-1)/2),l=r9e(n9e(function(c){return s.add(new An(c-o).mul(r)).toNumber()}),iI);return l(0,e)}function rte(t,e,n,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new An(0),tickMin:new An(0),tickMax:new An(0)};var a=nte(new An(e).sub(t).div(n-1),r,s),o;t<=0&&e>=0?o=new An(0):(o=new An(t).add(e).div(2),o=o.sub(new An(o).mod(a)));var l=Math.ceil(o.sub(t).div(a).toNumber()),c=Math.ceil(new An(e).sub(o).div(a).toNumber()),u=l+c+1;return u>n?rte(t,e,n,r,s+1):(u<n&&(c=e>0?c+(n-u):c,l=e>0?l:l+(n-u)),{step:a,tickMin:o.sub(new An(l).mul(a)),tickMax:o.add(new An(c).mul(a))})}function g9e(t){var e=nx(t,2),n=e[0],r=e[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=tte([n,r]),c=nx(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var h=d===1/0?[u].concat(oI(iI(0,s-1).map(function(){return 1/0}))):[].concat(oI(iI(0,s-1).map(function(){return-1/0})),[d]);return n>r?aI(h):h}if(u===d)return p9e(u,s,a);var f=rte(u,d,o,a),m=f.step,y=f.tickMin,p=f.tickMax,v=YS.rangeStep(y,p.add(new An(.1).mul(m)),m);return n>r?aI(v):v}function y9e(t,e){var n=nx(t,2),r=n[0],s=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=tte([r,s]),l=nx(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[r,s];if(c===u)return[c];var d=Math.max(e,2),h=nte(new An(u).sub(c).div(d-1),a,0),f=[].concat(oI(YS.rangeStep(new An(c),new An(u).sub(new An(.99).mul(h)),h)),[u]);return r>s?aI(f):f}var v9e=Jee(g9e),x9e=Jee(y9e),b9e="Invariant failed";function Fh(t,e){throw new Error(b9e)}var w9e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function fp(t){"@babel/helpers - typeof";return fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fp(t)}function yj(){return yj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yj.apply(this,arguments)}function _9e(t,e){return E9e(t)||S9e(t,e)||N9e(t,e)||j9e()}function j9e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N9e(t,e){if(t){if(typeof t=="string")return G5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G5(t,e)}}function G5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function S9e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function E9e(t){if(Array.isArray(t))return t}function A9e(t,e){if(t==null)return{};var n=T9e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function T9e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function C9e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P9e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ate(r.key),r)}}function I9e(t,e,n){return e&&P9e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function k9e(t,e,n){return e=vj(e),R9e(t,ste()?Reflect.construct(e,n||[],vj(t).constructor):e.apply(t,n))}function R9e(t,e){if(e&&(fp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O9e(t)}function O9e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ste(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ste=function(){return!!t})()}function vj(t){return vj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vj(t)}function D9e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cI(t,e)}function cI(t,e){return cI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},cI(t,e)}function ite(t,e,n){return e=ate(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ate(t){var e=M9e(t,"string");return fp(e)=="symbol"?e:e+""}function M9e(t,e){if(fp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(fp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var QS=function(t){function e(){return C9e(this,e),k9e(this,e,arguments)}return D9e(e,t),I9e(e,[{key:"render",value:function(){var r=this.props,s=r.offset,a=r.layout,o=r.width,l=r.dataKey,c=r.data,u=r.dataPointFormatter,d=r.xAxis,h=r.yAxis,f=A9e(r,w9e),m=vt(f,!1);this.props.direction==="x"&&d.type!=="number"&&Fh();var y=c.map(function(p){var v=u(p,l),b=v.x,x=v.y,w=v.value,C=v.errorVal;if(!C)return null;var S=[],P,j;if(Array.isArray(C)){var g=_9e(C,2);P=g[0],j=g[1]}else P=j=C;if(a==="vertical"){var T=d.scale,E=x+s,A=E+o,I=E-o,k=T(w-P),L=T(w+j);S.push({x1:L,y1:A,x2:L,y2:I}),S.push({x1:k,y1:E,x2:L,y2:E}),S.push({x1:k,y1:A,x2:k,y2:I})}else if(a==="horizontal"){var V=h.scale,B=b+s,M=B-o,$=B+o,O=V(w-P),W=V(w+j);S.push({x1:M,y1:W,x2:$,y2:W}),S.push({x1:B,y1:O,x2:B,y2:W}),S.push({x1:M,y1:O,x2:$,y2:O})}return F.createElement(sn,yj({className:"recharts-errorBar",key:"bar-".concat(S.map(function(Z){return"".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2)}))},m),S.map(function(Z){return F.createElement("line",yj({},Z,{key:"line-".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2)}))}))});return F.createElement(sn,{className:"recharts-errorBars"},y)}}])}(F.Component);ite(QS,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});ite(QS,"displayName","ErrorBar");function rx(t){"@babel/helpers - typeof";return rx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rx(t)}function Y5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function xd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y5(Object(n),!0).forEach(function(r){L9e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function L9e(t,e,n){return e=$9e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $9e(t){var e=F9e(t,"string");return rx(e)=="symbol"?e:e+""}function F9e(t,e){if(rx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(rx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ote=function(e){var n=e.children,r=e.formattedGraphicalItems,s=e.legendWidth,a=e.legendContent,o=Ti(n,pm);if(!o)return null;var l=pm.defaultProps,c=l!==void 0?xd(xd({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:a==="children"?u=(r||[]).reduce(function(d,h){var f=h.item,m=h.props,y=m.sectors||m.data||[];return d.concat(y.map(function(p){return{type:o.props.iconType||f.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):u=(r||[]).map(function(d){var h=d.item,f=h.type.defaultProps,m=f!==void 0?xd(xd({},f),h.props):{},y=m.dataKey,p=m.name,v=m.legendType,b=m.hide;return{inactive:b,dataKey:y,type:c.iconType||v||"square",color:MD(h),value:p||y,payload:m}}),xd(xd(xd({},c),pm.getWithHeight(o,s)),{},{payload:u,item:o})};function sx(t){"@babel/helpers - typeof";return sx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sx(t)}function Q5(t){return z9e(t)||U9e(t)||B9e(t)||V9e()}function V9e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B9e(t,e){if(t){if(typeof t=="string")return uI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uI(t,e)}}function U9e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function z9e(t){if(Array.isArray(t))return uI(t)}function uI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function X5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ur(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?X5(Object(n),!0).forEach(function(r){ym(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ym(t,e,n){return e=q9e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q9e(t){var e=W9e(t,"string");return sx(e)=="symbol"?e:e+""}function W9e(t,e){if(sx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(sx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vr(t,e,n){return Ft(t)||Ft(e)?n:zr(e)?Vi(t,e,n):Et(e)?e(t):n}function Hy(t,e,n,r){var s=Uze(t,function(l){return Vr(l,e)});if(n==="number"){var a=s.filter(function(l){return Ie(l)||parseFloat(l)});return a.length?[KS(a),au(a)]:[1/0,-1/0]}var o=r?s.filter(function(l){return!Ft(l)}):s;return o.map(function(l){return zr(l)||l instanceof Date?l:""})}var H9e=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var c=a.range,u=0;u<l;u++){var d=u>0?s[u-1].coordinate:s[l-1].coordinate,h=s[u].coordinate,f=u>=l-1?s[0].coordinate:s[u+1].coordinate,m=void 0;if(Hs(h-d)!==Hs(f-h)){var y=[];if(Hs(f-h)===Hs(c[1]-c[0])){m=f;var p=h+c[1]-c[0];y[0]=Math.min(p,(p+d)/2),y[1]=Math.max(p,(p+d)/2)}else{m=d;var v=f+c[1]-c[0];y[0]=Math.min(h,(v+h)/2),y[1]=Math.max(h,(v+h)/2)}var b=[Math.min(h,(m+h)/2),Math.max(h,(m+h)/2)];if(e>b[0]&&e<=b[1]||e>=y[0]&&e<=y[1]){o=s[u].index;break}}else{var x=Math.min(d,f),w=Math.max(d,f);if(e>(x+h)/2&&e<=(w+h)/2){o=s[u].index;break}}}else for(var C=0;C<l;C++)if(C===0&&e<=(r[C].coordinate+r[C+1].coordinate)/2||C>0&&C<l-1&&e>(r[C].coordinate+r[C-1].coordinate)/2&&e<=(r[C].coordinate+r[C+1].coordinate)/2||C===l-1&&e>(r[C].coordinate+r[C-1].coordinate)/2){o=r[C].index;break}return o},MD=function(e){var n,r=e,s=r.type.displayName,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?ur(ur({},e.type.defaultProps),e.props):e.props,o=a.stroke,l=a.fill,c;switch(s){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},K9e=function(e){var n=e.barSize,r=e.totalSize,s=e.stackGroups,a=s===void 0?{}:s;if(!a)return{};for(var o={},l=Object.keys(a),c=0,u=l.length;c<u;c++)for(var d=a[l[c]].stackGroups,h=Object.keys(d),f=0,m=h.length;f<m;f++){var y=d[h[f]],p=y.items,v=y.cateAxisId,b=p.filter(function(j){return kl(j.type).indexOf("Bar")>=0});if(b&&b.length){var x=b[0].type.defaultProps,w=x!==void 0?ur(ur({},x),b[0].props):b[0].props,C=w.barSize,S=w[v];o[S]||(o[S]=[]);var P=Ft(C)?n:C;o[S].push({item:b[0],stackList:b.slice(1),barSize:Ft(P)?void 0:Ks(P,r,0)})}}return o},G9e=function(e){var n=e.barGap,r=e.barCategoryGap,s=e.bandSize,a=e.sizeList,o=a===void 0?[]:a,l=e.maxBarSize,c=o.length;if(c<1)return null;var u=Ks(n,s,0,!0),d,h=[];if(o[0].barSize===+o[0].barSize){var f=!1,m=s/c,y=o.reduce(function(C,S){return C+S.barSize||0},0);y+=(c-1)*u,y>=s&&(y-=(c-1)*u,u=0),y>=s&&m>0&&(f=!0,m*=.9,y=c*m);var p=(s-y)/2>>0,v={offset:p-u,size:0};d=o.reduce(function(C,S){var P={item:S.item,position:{offset:v.offset+v.size+u,size:f?m:S.barSize}},j=[].concat(Q5(C),[P]);return v=j[j.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(g){j.push({item:g,position:v})}),j},h)}else{var b=Ks(r,s,0,!0);s-2*b-(c-1)*u<=0&&(u=0);var x=(s-2*b-(c-1)*u)/c;x>1&&(x>>=0);var w=l===+l?Math.min(x,l):x;d=o.reduce(function(C,S,P){var j=[].concat(Q5(C),[{item:S.item,position:{offset:b+(x+u)*P+(x-w)/2,size:w}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(g){j.push({item:g,position:j[j.length-1].position})}),j},h)}return d},Y9e=function(e,n,r,s){var a=r.children,o=r.width,l=r.margin,c=o-(l.left||0)-(l.right||0),u=ote({children:a,legendWidth:c});if(u){var d=s||{},h=d.width,f=d.height,m=u.align,y=u.verticalAlign,p=u.layout;if((p==="vertical"||p==="horizontal"&&y==="middle")&&m!=="center"&&Ie(e[m]))return ur(ur({},e),{},ym({},m,e[m]+(h||0)));if((p==="horizontal"||p==="vertical"&&m==="center")&&y!=="middle"&&Ie(e[y]))return ur(ur({},e),{},ym({},y,e[y]+(f||0)))}return e},Q9e=function(e,n,r){return Ft(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},lte=function(e,n,r,s,a){var o=n.props.children,l=ha(o,QS).filter(function(u){return Q9e(s,a,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var h=Vr(d,r);if(Ft(h))return u;var f=Array.isArray(h)?[KS(h),au(h)]:[h,h],m=c.reduce(function(y,p){var v=Vr(d,p,0),b=f[0]-Math.abs(Array.isArray(v)?v[0]:v),x=f[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(b,y[0]),Math.max(x,y[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},X9e=function(e,n,r,s,a){var o=n.map(function(l){return lte(e,l,r,a,s)}).filter(function(l){return!Ft(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},cte=function(e,n,r,s,a){var o=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&lte(e,c,u,s)||Hy(e,u,r,a)});if(r==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,h=u.length;d<h;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},ute=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},dte=function(e,n,r,s){if(s)return e.map(function(c){return c.coordinate});var a,o,l=e.map(function(c){return c.coordinate===n&&(a=!0),c.coordinate===r&&(o=!0),c.coordinate});return a||l.push(n),o||l.push(r),l},Al=function(e,n,r){if(!e)return null;var s=e.scale,a=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?s.bandwidth()/2:2,u=(n||r)&&o==="category"&&s.bandwidth?s.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Hs(l[0]-l[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(h){var f=a?a.indexOf(h):h;return{coordinate:s(f)+u,value:h,offset:u}});return d.filter(function(h){return!ag(h.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(h,f){return{coordinate:s(h)+u,value:h,index:f,offset:u}}):s.ticks&&!r?s.ticks(e.tickCount).map(function(h){return{coordinate:s(h)+u,value:h,offset:u}}):s.domain().map(function(h,f){return{coordinate:s(h)+u,value:a?a[h]:h,index:f,offset:u}})},SA=new WeakMap,C0=function(e,n){if(typeof n!="function")return e;SA.has(e)||SA.set(e,new WeakMap);var r=SA.get(e);if(r.has(n))return r.get(n);var s=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,s),s},hte=function(e,n,r){var s=e.scale,a=e.type,o=e.layout,l=e.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Qv(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:hj(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Wy(),realScaleType:"point"}:a==="category"?{scale:Qv(),realScaleType:"band"}:{scale:hj(),realScaleType:"linear"};if(Dh(s)){var c="scale".concat(kS(s));return{scale:(q5[c]||Wy)(),realScaleType:q5[c]?c:"point"}}return Et(s)?{scale:s}:{scale:Wy(),realScaleType:"point"}},Z5=1e-4,fte=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,s=e.range(),a=Math.min(s[0],s[1])-Z5,o=Math.max(s[0],s[1])+Z5,l=e(n[0]),c=e(n[r-1]);(l<a||l>o||c<a||c>o)&&e.domain([n[0],n[r-1]])}},Z9e=function(e,n){if(!e)return null;for(var r=0,s=e.length;r<s;r++)if(e[r].item===n)return e[r].position;return null},J9e=function(e,n){if(!n||n.length!==2||!Ie(n[0])||!Ie(n[1]))return e;var r=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]),a=[e[0],e[1]];return(!Ie(e[0])||e[0]<r)&&(a[0]=r),(!Ie(e[1])||e[1]>s)&&(a[1]=s),a[0]>s&&(a[0]=s),a[1]<r&&(a[1]=r),a},eqe=function(e){var n=e.length;if(!(n<=0))for(var r=0,s=e[0].length;r<s;++r)for(var a=0,o=0,l=0;l<n;++l){var c=ag(e[l][r][1])?e[l][r][0]:e[l][r][1];c>=0?(e[l][r][0]=a,e[l][r][1]=a+c,a=e[l][r][1]):(e[l][r][0]=o,e[l][r][1]=o+c,o=e[l][r][1])}},tqe=function(e){var n=e.length;if(!(n<=0))for(var r=0,s=e[0].length;r<s;++r)for(var a=0,o=0;o<n;++o){var l=ag(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},nqe={sign:eqe,expand:wDe,none:sp,silhouette:_De,wiggle:jDe,positive:tqe},rqe=function(e,n,r){var s=n.map(function(l){return l.props.dataKey}),a=nqe[r],o=bDe().keys(s).value(function(l,c){return+Vr(l,c,0)}).order(DP).offset(a);return o(e)},sqe=function(e,n,r,s,a,o){if(!e)return null;var l=o?n.reverse():n,c={},u=l.reduce(function(h,f){var m,y=(m=f.type)!==null&&m!==void 0&&m.defaultProps?ur(ur({},f.type.defaultProps),f.props):f.props,p=y.stackId,v=y.hide;if(v)return h;var b=y[r],x=h[b]||{hasStack:!1,stackGroups:{}};if(zr(p)){var w=x.stackGroups[p]||{numericAxisId:r,cateAxisId:s,items:[]};w.items.push(f),x.hasStack=!0,x.stackGroups[p]=w}else x.stackGroups[og("_stackId_")]={numericAxisId:r,cateAxisId:s,items:[f]};return ur(ur({},h),{},ym({},b,x))},c),d={};return Object.keys(u).reduce(function(h,f){var m=u[f];if(m.hasStack){var y={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(p,v){var b=m.stackGroups[v];return ur(ur({},p),{},ym({},v,{numericAxisId:r,cateAxisId:s,items:b.items,stackedData:rqe(e,b.items,a)}))},y)}return ur(ur({},h),{},ym({},f,m))},d)},mte=function(e,n){var r=n.realScaleType,s=n.type,a=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(a&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=v9e(u,a,l);return e.domain([KS(d),au(d)]),{niceTicks:d}}if(a&&s==="number"){var h=e.domain(),f=x9e(h,a,l);return{niceTicks:f}}return null};function J5(t){var e=t.axis,n=t.ticks,r=t.bandSize,s=t.entry,a=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Ft(s[e.dataKey])){var l=W_(n,"value",s[e.dataKey]);if(l)return l.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var c=Vr(s,Ft(o)?e.dataKey:o);return Ft(c)?null:e.scale(c)}var eU=function(e){var n=e.axis,r=e.ticks,s=e.offset,a=e.bandSize,o=e.entry,l=e.index;if(n.type==="category")return r[l]?r[l].coordinate+s:null;var c=Vr(o,n.dataKey,n.domain[l]);return Ft(c)?null:n.scale(c)-a/2+s},iqe=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var s=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return s<=0&&a>=0?0:a<0?a:s}return r[0]},aqe=function(e,n){var r,s=(r=e.type)!==null&&r!==void 0&&r.defaultProps?ur(ur({},e.type.defaultProps),e.props):e.props,a=s.stackId;if(zr(a)){var o=n[a];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},oqe=function(e){return e.reduce(function(n,r){return[KS(r.concat([n[0]]).filter(Ie)),au(r.concat([n[1]]).filter(Ie))]},[1/0,-1/0])},pte=function(e,n,r){return Object.keys(e).reduce(function(s,a){var o=e[a],l=o.stackedData,c=l.reduce(function(u,d){var h=oqe(d.slice(n,r+1));return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},tU=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,nU=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,dI=function(e,n,r){if(Et(e))return e(n,r);if(!Array.isArray(e))return n;var s=[];if(Ie(e[0]))s[0]=r?e[0]:Math.min(e[0],n[0]);else if(tU.test(e[0])){var a=+tU.exec(e[0])[1];s[0]=n[0]-a}else Et(e[0])?s[0]=e[0](n[0]):s[0]=n[0];if(Ie(e[1]))s[1]=r?e[1]:Math.max(e[1],n[1]);else if(nU.test(e[1])){var o=+nU.exec(e[1])[1];s[1]=n[1]+o}else Et(e[1])?s[1]=e[1](n[1]):s[1]=n[1];return s},xj=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!r||s>0)return s}if(e&&n&&n.length>=2){for(var a=uD(n,function(h){return h.coordinate}),o=1/0,l=1,c=a.length;l<c;l++){var u=a[l],d=a[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},rU=function(e,n,r){return!e||!e.length||hp(e,Vi(r,"type.defaultProps.domain"))?n:e},gte=function(e,n){var r=e.type.defaultProps?ur(ur({},e.type.defaultProps),e.props):e.props,s=r.dataKey,a=r.name,o=r.unit,l=r.formatter,c=r.tooltipType,u=r.chartType,d=r.hide;return ur(ur({},vt(e,!1)),{},{dataKey:s,unit:o,formatter:l,name:a||s,color:MD(e),value:Vr(n,s),type:c,payload:n,chartType:u,hide:d})};function ix(t){"@babel/helpers - typeof";return ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ix(t)}function sU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function pl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sU(Object(n),!0).forEach(function(r){yte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yte(t,e,n){return e=lqe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lqe(t){var e=cqe(t,"string");return ix(e)=="symbol"?e:e+""}function cqe(t,e){if(ix(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ix(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uqe(t,e){return mqe(t)||fqe(t,e)||hqe(t,e)||dqe()}function dqe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hqe(t,e){if(t){if(typeof t=="string")return iU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iU(t,e)}}function iU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function fqe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function mqe(t){if(Array.isArray(t))return t}var bj=Math.PI/180,pqe=function(e){return e*180/Math.PI},Ln=function(e,n,r,s){return{x:e+Math.cos(-bj*s)*r,y:n+Math.sin(-bj*s)*r}},vte=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},gqe=function(e,n,r,s,a){var o=e.width,l=e.height,c=e.startAngle,u=e.endAngle,d=Ks(e.cx,o,o/2),h=Ks(e.cy,l,l/2),f=vte(o,l,r),m=Ks(e.innerRadius,f,0),y=Ks(e.outerRadius,f,f*.8),p=Object.keys(n);return p.reduce(function(v,b){var x=n[b],w=x.domain,C=x.reversed,S;if(Ft(x.range))s==="angleAxis"?S=[c,u]:s==="radiusAxis"&&(S=[m,y]),C&&(S=[S[1],S[0]]);else{S=x.range;var P=S,j=uqe(P,2);c=j[0],u=j[1]}var g=hte(x,a),T=g.realScaleType,E=g.scale;E.domain(w).range(S),fte(E);var A=mte(E,pl(pl({},x),{},{realScaleType:T})),I=pl(pl(pl({},x),A),{},{range:S,radius:y,realScaleType:T,scale:E,cx:d,cy:h,innerRadius:m,outerRadius:y,startAngle:c,endAngle:u});return pl(pl({},v),{},yte({},b,I))},{})},yqe=function(e,n){var r=e.x,s=e.y,a=n.x,o=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(s-o,2))},vqe=function(e,n){var r=e.x,s=e.y,a=n.cx,o=n.cy,l=yqe({x:r,y:s},{x:a,y:o});if(l<=0)return{radius:l};var c=(r-a)/l,u=Math.acos(c);return s>o&&(u=2*Math.PI-u),{radius:l,angle:pqe(u),angleInRadian:u}},xqe=function(e){var n=e.startAngle,r=e.endAngle,s=Math.floor(n/360),a=Math.floor(r/360),o=Math.min(s,a);return{startAngle:n-o*360,endAngle:r-o*360}},bqe=function(e,n){var r=n.startAngle,s=n.endAngle,a=Math.floor(r/360),o=Math.floor(s/360),l=Math.min(a,o);return e+l*360},aU=function(e,n){var r=e.x,s=e.y,a=vqe({x:r,y:s},n),o=a.radius,l=a.angle,c=n.innerRadius,u=n.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=xqe(n),h=d.startAngle,f=d.endAngle,m=l,y;if(h<=f){for(;m>f;)m-=360;for(;m<h;)m+=360;y=m>=h&&m<=f}else{for(;m>h;)m-=360;for(;m<f;)m+=360;y=m>=f&&m<=h}return y?pl(pl({},n),{},{radius:o,angle:bqe(m,n)}):null},xte=function(e){return!_.isValidElement(e)&&!Et(e)&&typeof e!="boolean"?e.className:""};function ax(t){"@babel/helpers - typeof";return ax=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ax(t)}var wqe=["offset"];function _qe(t){return Eqe(t)||Sqe(t)||Nqe(t)||jqe()}function jqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nqe(t,e){if(t){if(typeof t=="string")return hI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hI(t,e)}}function Sqe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Eqe(t){if(Array.isArray(t))return hI(t)}function hI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Aqe(t,e){if(t==null)return{};var n=Tqe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Tqe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function oU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Dr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oU(Object(n),!0).forEach(function(r){Cqe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cqe(t,e,n){return e=Pqe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pqe(t){var e=Iqe(t,"string");return ax(e)=="symbol"?e:e+""}function Iqe(t,e){if(ax(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ax(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ox(){return ox=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ox.apply(this,arguments)}var kqe=function(e){var n=e.value,r=e.formatter,s=Ft(e.children)?n:e.children;return Et(r)?r(s):s},Rqe=function(e,n){var r=Hs(n-e),s=Math.min(Math.abs(n-e),360);return r*s},Oqe=function(e,n,r){var s=e.position,a=e.viewBox,o=e.offset,l=e.className,c=a,u=c.cx,d=c.cy,h=c.innerRadius,f=c.outerRadius,m=c.startAngle,y=c.endAngle,p=c.clockWise,v=(h+f)/2,b=Rqe(m,y),x=b>=0?1:-1,w,C;s==="insideStart"?(w=m+x*o,C=p):s==="insideEnd"?(w=y-x*o,C=!p):s==="end"&&(w=y+x*o,C=p),C=b<=0?C:!C;var S=Ln(u,d,v,w),P=Ln(u,d,v,w+(C?1:-1)*359),j="M".concat(S.x,",").concat(S.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(C?0:1,`,
    `).concat(P.x,",").concat(P.y),g=Ft(e.id)?og("recharts-radial-line-"):e.id;return F.createElement("text",ox({},r,{dominantBaseline:"central",className:$t("recharts-radial-bar-label",l)}),F.createElement("defs",null,F.createElement("path",{id:g,d:j})),F.createElement("textPath",{xlinkHref:"#".concat(g)},n))},Dqe=function(e){var n=e.viewBox,r=e.offset,s=e.position,a=n,o=a.cx,l=a.cy,c=a.innerRadius,u=a.outerRadius,d=a.startAngle,h=a.endAngle,f=(d+h)/2;if(s==="outside"){var m=Ln(o,l,u+r,f),y=m.x,p=m.y;return{x:y,y:p,textAnchor:y>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var v=(c+u)/2,b=Ln(o,l,v,f),x=b.x,w=b.y;return{x,y:w,textAnchor:"middle",verticalAnchor:"middle"}},Mqe=function(e){var n=e.viewBox,r=e.parentViewBox,s=e.offset,a=e.position,o=n,l=o.x,c=o.y,u=o.width,d=o.height,h=d>=0?1:-1,f=h*s,m=h>0?"end":"start",y=h>0?"start":"end",p=u>=0?1:-1,v=p*s,b=p>0?"end":"start",x=p>0?"start":"end";if(a==="top"){var w={x:l+u/2,y:c-h*s,textAnchor:"middle",verticalAnchor:m};return Dr(Dr({},w),r?{height:Math.max(c-r.y,0),width:u}:{})}if(a==="bottom"){var C={x:l+u/2,y:c+d+f,textAnchor:"middle",verticalAnchor:y};return Dr(Dr({},C),r?{height:Math.max(r.y+r.height-(c+d),0),width:u}:{})}if(a==="left"){var S={x:l-v,y:c+d/2,textAnchor:b,verticalAnchor:"middle"};return Dr(Dr({},S),r?{width:Math.max(S.x-r.x,0),height:d}:{})}if(a==="right"){var P={x:l+u+v,y:c+d/2,textAnchor:x,verticalAnchor:"middle"};return Dr(Dr({},P),r?{width:Math.max(r.x+r.width-P.x,0),height:d}:{})}var j=r?{width:u,height:d}:{};return a==="insideLeft"?Dr({x:l+v,y:c+d/2,textAnchor:x,verticalAnchor:"middle"},j):a==="insideRight"?Dr({x:l+u-v,y:c+d/2,textAnchor:b,verticalAnchor:"middle"},j):a==="insideTop"?Dr({x:l+u/2,y:c+f,textAnchor:"middle",verticalAnchor:y},j):a==="insideBottom"?Dr({x:l+u/2,y:c+d-f,textAnchor:"middle",verticalAnchor:m},j):a==="insideTopLeft"?Dr({x:l+v,y:c+f,textAnchor:x,verticalAnchor:y},j):a==="insideTopRight"?Dr({x:l+u-v,y:c+f,textAnchor:b,verticalAnchor:y},j):a==="insideBottomLeft"?Dr({x:l+v,y:c+d-f,textAnchor:x,verticalAnchor:m},j):a==="insideBottomRight"?Dr({x:l+u-v,y:c+d-f,textAnchor:b,verticalAnchor:m},j):ng(a)&&(Ie(a.x)||Bd(a.x))&&(Ie(a.y)||Bd(a.y))?Dr({x:l+Ks(a.x,u),y:c+Ks(a.y,d),textAnchor:"end",verticalAnchor:"end"},j):Dr({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},j)},Lqe=function(e){return"cx"in e&&Ie(e.cx)};function Zr(t){var e=t.offset,n=e===void 0?5:e,r=Aqe(t,wqe),s=Dr({offset:n},r),a=s.viewBox,o=s.position,l=s.value,c=s.children,u=s.content,d=s.className,h=d===void 0?"":d,f=s.textBreakAll;if(!a||Ft(l)&&Ft(c)&&!_.isValidElement(u)&&!Et(u))return null;if(_.isValidElement(u))return _.cloneElement(u,s);var m;if(Et(u)){if(m=_.createElement(u,s),_.isValidElement(m))return m}else m=kqe(s);var y=Lqe(a),p=vt(s,!0);if(y&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Oqe(s,m,p);var v=y?Dqe(s):Mqe(s);return F.createElement(Lh,ox({className:$t("recharts-label",h)},p,v,{breakAll:f}),m)}Zr.displayName="Label";var bte=function(e){var n=e.cx,r=e.cy,s=e.angle,a=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,u=e.innerRadius,d=e.outerRadius,h=e.x,f=e.y,m=e.top,y=e.left,p=e.width,v=e.height,b=e.clockWise,x=e.labelViewBox;if(x)return x;if(Ie(p)&&Ie(v)){if(Ie(h)&&Ie(f))return{x:h,y:f,width:p,height:v};if(Ie(m)&&Ie(y))return{x:m,y,width:p,height:v}}return Ie(h)&&Ie(f)?{x:h,y:f,width:0,height:0}:Ie(n)&&Ie(r)?{cx:n,cy:r,startAngle:a||s||0,endAngle:o||s||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:b}:e.viewBox?e.viewBox:{}},$qe=function(e,n){return e?e===!0?F.createElement(Zr,{key:"label-implicit",viewBox:n}):zr(e)?F.createElement(Zr,{key:"label-implicit",viewBox:n,value:e}):_.isValidElement(e)?e.type===Zr?_.cloneElement(e,{key:"label-implicit",viewBox:n}):F.createElement(Zr,{key:"label-implicit",content:e,viewBox:n}):Et(e)?F.createElement(Zr,{key:"label-implicit",content:e,viewBox:n}):ng(e)?F.createElement(Zr,ox({viewBox:n},e,{key:"label-implicit"})):null:null},Fqe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var s=e.children,a=bte(e),o=ha(s,Zr).map(function(c,u){return _.cloneElement(c,{viewBox:n||a,key:"label-".concat(u)})});if(!r)return o;var l=$qe(e.label,n||a);return[l].concat(_qe(o))};Zr.parseViewBox=bte;Zr.renderCallByParent=Fqe;function Vqe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Bqe=Vqe;const Uqe=xn(Bqe);function lx(t){"@babel/helpers - typeof";return lx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lx(t)}var zqe=["valueAccessor"],qqe=["data","dataKey","clockWise","id","textBreakAll"];function Wqe(t){return Yqe(t)||Gqe(t)||Kqe(t)||Hqe()}function Hqe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kqe(t,e){if(t){if(typeof t=="string")return fI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fI(t,e)}}function Gqe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Yqe(t){if(Array.isArray(t))return fI(t)}function fI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wj(){return wj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wj.apply(this,arguments)}function lU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function cU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lU(Object(n),!0).forEach(function(r){Qqe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qqe(t,e,n){return e=Xqe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xqe(t){var e=Zqe(t,"string");return lx(e)=="symbol"?e:e+""}function Zqe(t,e){if(lx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(lx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uU(t,e){if(t==null)return{};var n=Jqe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Jqe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var e8e=function(e){return Array.isArray(e.value)?Uqe(e.value):e.value};function Ol(t){var e=t.valueAccessor,n=e===void 0?e8e:e,r=uU(t,zqe),s=r.data,a=r.dataKey,o=r.clockWise,l=r.id,c=r.textBreakAll,u=uU(r,qqe);return!s||!s.length?null:F.createElement(sn,{className:"recharts-label-list"},s.map(function(d,h){var f=Ft(a)?n(d,h):Vr(d&&d.payload,a),m=Ft(l)?{}:{id:"".concat(l,"-").concat(h)};return F.createElement(Zr,wj({},vt(d,!0),u,m,{parentViewBox:d.parentViewBox,value:f,textBreakAll:c,viewBox:Zr.parseViewBox(Ft(o)?d:cU(cU({},d),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}Ol.displayName="LabelList";function t8e(t,e){return t?t===!0?F.createElement(Ol,{key:"labelList-implicit",data:e}):F.isValidElement(t)||Et(t)?F.createElement(Ol,{key:"labelList-implicit",data:e,content:t}):ng(t)?F.createElement(Ol,wj({data:e},t,{key:"labelList-implicit"})):null:null}function n8e(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,s=ha(r,Ol).map(function(o,l){return _.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!n)return s;var a=t8e(t.label,e);return[a].concat(Wqe(s))}Ol.renderCallByParent=n8e;function cx(t){"@babel/helpers - typeof";return cx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cx(t)}function mI(){return mI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mI.apply(this,arguments)}function dU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function hU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dU(Object(n),!0).forEach(function(r){r8e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function r8e(t,e,n){return e=s8e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s8e(t){var e=i8e(t,"string");return cx(e)=="symbol"?e:e+""}function i8e(t,e){if(cx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(cx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var a8e=function(e,n){var r=Hs(n-e),s=Math.min(Math.abs(n-e),359.999);return r*s},P0=function(e){var n=e.cx,r=e.cy,s=e.radius,a=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,d=c*(l?1:-1)+s,h=Math.asin(c/d)/bj,f=u?a:a+o*h,m=Ln(n,r,d,f),y=Ln(n,r,s,f),p=u?a-o*h:a,v=Ln(n,r,d*Math.cos(h*bj),p);return{center:m,circleTangency:y,lineTangency:v,theta:h}},wte=function(e){var n=e.cx,r=e.cy,s=e.innerRadius,a=e.outerRadius,o=e.startAngle,l=e.endAngle,c=a8e(o,l),u=o+c,d=Ln(n,r,a,o),h=Ln(n,r,a,u),f="M ".concat(d.x,",").concat(d.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(s>0){var m=Ln(n,r,s,o),y=Ln(n,r,s,u);f+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else f+="L ".concat(n,",").concat(r," Z");return f},o8e=function(e){var n=e.cx,r=e.cy,s=e.innerRadius,a=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,h=Hs(d-u),f=P0({cx:n,cy:r,radius:a,angle:u,sign:h,cornerRadius:o,cornerIsExternal:c}),m=f.circleTangency,y=f.lineTangency,p=f.theta,v=P0({cx:n,cy:r,radius:a,angle:d,sign:-h,cornerRadius:o,cornerIsExternal:c}),b=v.circleTangency,x=v.lineTangency,w=v.theta,C=c?Math.abs(u-d):Math.abs(u-d)-p-w;if(C<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):wte({cx:n,cy:r,innerRadius:s,outerRadius:a,startAngle:u,endAngle:d});var S="M ".concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(C>180),",").concat(+(h<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(x.x,",").concat(x.y,`
  `);if(s>0){var P=P0({cx:n,cy:r,radius:s,angle:u,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),j=P.circleTangency,g=P.lineTangency,T=P.theta,E=P0({cx:n,cy:r,radius:s,angle:d,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),A=E.circleTangency,I=E.lineTangency,k=E.theta,L=c?Math.abs(u-d):Math.abs(u-d)-T-k;if(L<0&&o===0)return"".concat(S,"L").concat(n,",").concat(r,"Z");S+="L".concat(I.x,",").concat(I.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(L>180),",").concat(+(h>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(g.x,",").concat(g.y,"Z")}else S+="L".concat(n,",").concat(r,"Z");return S},l8e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},_te=function(e){var n=hU(hU({},l8e),e),r=n.cx,s=n.cy,a=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,h=n.endAngle,f=n.className;if(o<a||d===h)return null;var m=$t("recharts-sector",f),y=o-a,p=Ks(l,y,0,!0),v;return p>0&&Math.abs(d-h)<360?v=o8e({cx:r,cy:s,innerRadius:a,outerRadius:o,cornerRadius:Math.min(p,y/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:h}):v=wte({cx:r,cy:s,innerRadius:a,outerRadius:o,startAngle:d,endAngle:h}),F.createElement("path",mI({},vt(n,!0),{className:m,d:v,role:"img"}))};function ux(t){"@babel/helpers - typeof";return ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ux(t)}function pI(){return pI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pI.apply(this,arguments)}function fU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function mU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fU(Object(n),!0).forEach(function(r){c8e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function c8e(t,e,n){return e=u8e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u8e(t){var e=d8e(t,"string");return ux(e)=="symbol"?e:e+""}function d8e(t,e){if(ux(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ux(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pU={curveBasisClosed:cDe,curveBasisOpen:uDe,curveBasis:lDe,curveBumpX:G2e,curveBumpY:Y2e,curveLinearClosed:dDe,curveLinear:OS,curveMonotoneX:hDe,curveMonotoneY:fDe,curveNatural:mDe,curveStep:pDe,curveStepAfter:yDe,curveStepBefore:gDe},I0=function(e){return e.x===+e.x&&e.y===+e.y},Yg=function(e){return e.x},Qg=function(e){return e.y},h8e=function(e,n){if(Et(e))return e;var r="curve".concat(kS(e));return(r==="curveMonotone"||r==="curveBump")&&n?pU["".concat(r).concat(n==="vertical"?"Y":"X")]:pU[r]||OS},f8e=function(e){var n=e.type,r=n===void 0?"linear":n,s=e.points,a=s===void 0?[]:s,o=e.baseLine,l=e.layout,c=e.connectNulls,u=c===void 0?!1:c,d=h8e(r,l),h=u?a.filter(function(p){return I0(p)}):a,f;if(Array.isArray(o)){var m=u?o.filter(function(p){return I0(p)}):o,y=h.map(function(p,v){return mU(mU({},p),{},{base:m[v]})});return l==="vertical"?f=w0().y(Qg).x1(Yg).x0(function(p){return p.base.x}):f=w0().x(Yg).y1(Qg).y0(function(p){return p.base.y}),f.defined(I0).curve(d),f(y)}return l==="vertical"&&Ie(o)?f=w0().y(Qg).x1(Yg).x0(o):Ie(o)?f=w0().x(Yg).y1(Qg).y0(o):f=gJ().x(Yg).y(Qg),f.defined(I0).curve(d),f(h)},vm=function(e){var n=e.className,r=e.points,s=e.path,a=e.pathRef;if((!r||!r.length)&&!s)return null;var o=r&&r.length?f8e(e):s;return _.createElement("path",pI({},vt(e,!1),H_(e),{className:$t("recharts-curve",n),d:o,ref:a}))},jte={exports:{}},m8e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",p8e=m8e,g8e=p8e;function Nte(){}function Ste(){}Ste.resetWarningCache=Nte;var y8e=function(){function t(r,s,a,o,l,c){if(c!==g8e){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Ste,resetWarningCache:Nte};return n.PropTypes=n,n};jte.exports=y8e();var v8e=jte.exports;const gn=xn(v8e);var x8e=Object.getOwnPropertyNames,b8e=Object.getOwnPropertySymbols,w8e=Object.prototype.hasOwnProperty;function gU(t,e){return function(r,s,a){return t(r,s,a)&&e(r,s,a)}}function k0(t){return function(n,r,s){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,s);var a=s.cache,o=a.get(n),l=a.get(r);if(o&&l)return o===r&&l===n;a.set(n,r),a.set(r,n);var c=t(n,r,s);return a.delete(n),a.delete(r),c}}function yU(t){return x8e(t).concat(b8e(t))}var _8e=Object.hasOwn||function(t,e){return w8e.call(t,e)};function tf(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var j8e="__v",N8e="__o",S8e="_owner",vU=Object.getOwnPropertyDescriptor,xU=Object.keys;function E8e(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function A8e(t,e){return tf(t.getTime(),e.getTime())}function T8e(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function C8e(t,e){return t===e}function bU(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var s=new Array(r),a=t.entries(),o,l,c=0;(o=a.next())&&!o.done;){for(var u=e.entries(),d=!1,h=0;(l=u.next())&&!l.done;){if(s[h]){h++;continue}var f=o.value,m=l.value;if(n.equals(f[0],m[0],c,h,t,e,n)&&n.equals(f[1],m[1],f[0],m[0],t,e,n)){d=s[h]=!0;break}h++}if(!d)return!1;c++}return!0}var P8e=tf;function I8e(t,e,n){var r=xU(t),s=r.length;if(xU(e).length!==s)return!1;for(;s-- >0;)if(!Ete(t,e,n,r[s]))return!1;return!0}function Xg(t,e,n){var r=yU(t),s=r.length;if(yU(e).length!==s)return!1;for(var a,o,l;s-- >0;)if(a=r[s],!Ete(t,e,n,a)||(o=vU(t,a),l=vU(e,a),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function k8e(t,e){return tf(t.valueOf(),e.valueOf())}function R8e(t,e){return t.source===e.source&&t.flags===e.flags}function wU(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var s=new Array(r),a=t.values(),o,l;(o=a.next())&&!o.done;){for(var c=e.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!s[d]&&n.equals(o.value,l.value,o.value,l.value,t,e,n)){u=s[d]=!0;break}d++}if(!u)return!1}return!0}function O8e(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function D8e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function Ete(t,e,n,r){return(r===S8e||r===N8e||r===j8e)&&(t.$$typeof||e.$$typeof)?!0:_8e(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var M8e="[object Arguments]",L8e="[object Boolean]",$8e="[object Date]",F8e="[object Error]",V8e="[object Map]",B8e="[object Number]",U8e="[object Object]",z8e="[object RegExp]",q8e="[object Set]",W8e="[object String]",H8e="[object URL]",K8e=Array.isArray,_U=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,jU=Object.assign,G8e=Object.prototype.toString.call.bind(Object.prototype.toString);function Y8e(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,s=t.areFunctionsEqual,a=t.areMapsEqual,o=t.areNumbersEqual,l=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,d=t.areSetsEqual,h=t.areTypedArraysEqual,f=t.areUrlsEqual;return function(y,p,v){if(y===p)return!0;if(y==null||p==null)return!1;var b=typeof y;if(b!==typeof p)return!1;if(b!=="object")return b==="number"?o(y,p,v):b==="function"?s(y,p,v):!1;var x=y.constructor;if(x!==p.constructor)return!1;if(x===Object)return l(y,p,v);if(K8e(y))return e(y,p,v);if(_U!=null&&_U(y))return h(y,p,v);if(x===Date)return n(y,p,v);if(x===RegExp)return u(y,p,v);if(x===Map)return a(y,p,v);if(x===Set)return d(y,p,v);var w=G8e(y);return w===$8e?n(y,p,v):w===z8e?u(y,p,v):w===V8e?a(y,p,v):w===q8e?d(y,p,v):w===U8e?typeof y.then!="function"&&typeof p.then!="function"&&l(y,p,v):w===H8e?f(y,p,v):w===F8e?r(y,p,v):w===M8e?l(y,p,v):w===L8e||w===B8e||w===W8e?c(y,p,v):!1}}function Q8e(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,s={areArraysEqual:r?Xg:E8e,areDatesEqual:A8e,areErrorsEqual:T8e,areFunctionsEqual:C8e,areMapsEqual:r?gU(bU,Xg):bU,areNumbersEqual:P8e,areObjectsEqual:r?Xg:I8e,arePrimitiveWrappersEqual:k8e,areRegExpsEqual:R8e,areSetsEqual:r?gU(wU,Xg):wU,areTypedArraysEqual:r?Xg:O8e,areUrlsEqual:D8e};if(n&&(s=jU({},s,n(s))),e){var a=k0(s.areArraysEqual),o=k0(s.areMapsEqual),l=k0(s.areObjectsEqual),c=k0(s.areSetsEqual);s=jU({},s,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return s}function X8e(t){return function(e,n,r,s,a,o,l){return t(e,n,l)}}function Z8e(t){var e=t.circular,n=t.comparator,r=t.createState,s=t.equals,a=t.strict;if(r)return function(c,u){var d=r(),h=d.cache,f=h===void 0?e?new WeakMap:void 0:h,m=d.meta;return n(c,u,{cache:f,equals:s,meta:m,strict:a})};if(e)return function(c,u){return n(c,u,{cache:new WeakMap,equals:s,meta:void 0,strict:a})};var o={cache:void 0,equals:s,meta:void 0,strict:a};return function(c,u){return n(c,u,o)}}var J8e=cd();cd({strict:!0});cd({circular:!0});cd({circular:!0,strict:!0});cd({createInternalComparator:function(){return tf}});cd({strict:!0,createInternalComparator:function(){return tf}});cd({circular:!0,createInternalComparator:function(){return tf}});cd({circular:!0,createInternalComparator:function(){return tf},strict:!0});function cd(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,s=t.createState,a=t.strict,o=a===void 0?!1:a,l=Q8e(t),c=Y8e(l),u=r?r(c):X8e(c);return Z8e({circular:n,comparator:c,createState:s,equals:u,strict:o})}function eWe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function NU(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function s(a){n<0&&(n=a),a-n>e?(t(a),n=-1):eWe(s)};requestAnimationFrame(r)}function gI(t){"@babel/helpers - typeof";return gI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gI(t)}function tWe(t){return iWe(t)||sWe(t)||rWe(t)||nWe()}function nWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rWe(t,e){if(t){if(typeof t=="string")return SU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SU(t,e)}}function SU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function sWe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function iWe(t){if(Array.isArray(t))return t}function aWe(){var t={},e=function(){return null},n=!1,r=function s(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var o=a,l=tWe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){NU(s.bind(null,u),c);return}s(c),NU(s.bind(null,u));return}gI(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function dx(t){"@babel/helpers - typeof";return dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dx(t)}function EU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function AU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EU(Object(n),!0).forEach(function(r){Ate(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ate(t,e,n){return e=oWe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oWe(t){var e=lWe(t,"string");return dx(e)==="symbol"?e:String(e)}function lWe(t,e){if(dx(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(dx(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cWe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,s){return r.filter(function(a){return s.includes(a)})})},uWe=function(e){return e},dWe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Ky=function(e,n){return Object.keys(n).reduce(function(r,s){return AU(AU({},r),{},Ate({},s,e(s,n[s])))},{})},TU=function(e,n,r){return e.map(function(s){return"".concat(dWe(s)," ").concat(n,"ms ").concat(r)}).join(",")};function hWe(t,e){return pWe(t)||mWe(t,e)||Tte(t,e)||fWe()}function fWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mWe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function pWe(t){if(Array.isArray(t))return t}function gWe(t){return xWe(t)||vWe(t)||Tte(t)||yWe()}function yWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tte(t,e){if(t){if(typeof t=="string")return yI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yI(t,e)}}function vWe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xWe(t){if(Array.isArray(t))return yI(t)}function yI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var _j=1e-4,Cte=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},Pte=function(e,n){return e.map(function(r,s){return r*Math.pow(n,s)}).reduce(function(r,s){return r+s})},CU=function(e,n){return function(r){var s=Cte(e,n);return Pte(s,r)}},bWe=function(e,n){return function(r){var s=Cte(e,n),a=[].concat(gWe(s.map(function(o,l){return o*l}).slice(1)),[0]);return Pte(a,r)}},PU=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n[0],a=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":s=0,a=0,o=1,l=1;break;case"ease":s=.25,a=.1,o=.25,l=1;break;case"ease-in":s=.42,a=0,o=1,l=1;break;case"ease-out":s=.42,a=0,o=.58,l=1;break;case"ease-in-out":s=0,a=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),d=hWe(u,4);s=d[0],a=d[1],o=d[2],l=d[3]}}}var h=CU(s,o),f=CU(a,l),m=bWe(s,o),y=function(b){return b>1?1:b<0?0:b},p=function(b){for(var x=b>1?1:b,w=x,C=0;C<8;++C){var S=h(w)-x,P=m(w);if(Math.abs(S-x)<_j||P<_j)return f(w);w=y(w-S/P)}return f(w)};return p.isStepper=!1,p},wWe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,s=e.damping,a=s===void 0?8:s,o=e.dt,l=o===void 0?17:o,c=function(d,h,f){var m=-(d-h)*r,y=f*a,p=f+(m-y)*l/1e3,v=f*l/1e3+d;return Math.abs(v-h)<_j&&Math.abs(p)<_j?[h,0]:[v,p]};return c.isStepper=!0,c.dt=l,c},_We=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return PU(s);case"spring":return wWe();default:if(s.split("(")[0]==="cubic-bezier")return PU(s)}return typeof s=="function"?s:null};function hx(t){"@babel/helpers - typeof";return hx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hx(t)}function IU(t){return SWe(t)||NWe(t)||Ite(t)||jWe()}function jWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NWe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function SWe(t){if(Array.isArray(t))return xI(t)}function kU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function as(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kU(Object(n),!0).forEach(function(r){vI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vI(t,e,n){return e=EWe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EWe(t){var e=AWe(t,"string");return hx(e)==="symbol"?e:String(e)}function AWe(t,e){if(hx(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(hx(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TWe(t,e){return IWe(t)||PWe(t,e)||Ite(t,e)||CWe()}function CWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ite(t,e){if(t){if(typeof t=="string")return xI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xI(t,e)}}function xI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function PWe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function IWe(t){if(Array.isArray(t))return t}var jj=function(e,n,r){return e+(n-e)*r},bI=function(e){var n=e.from,r=e.to;return n!==r},kWe=function t(e,n,r){var s=Ky(function(a,o){if(bI(o)){var l=e(o.from,o.to,o.velocity),c=TWe(l,2),u=c[0],d=c[1];return as(as({},o),{},{from:u,velocity:d})}return o},n);return r<1?Ky(function(a,o){return bI(o)?as(as({},o),{},{velocity:jj(o.velocity,s[a].velocity,r),from:jj(o.from,s[a].from,r)}):o},n):t(e,s,r-1)};const RWe=function(t,e,n,r,s){var a=cWe(t,e),o=a.reduce(function(v,b){return as(as({},v),{},vI({},b,[t[b],e[b]]))},{}),l=a.reduce(function(v,b){return as(as({},v),{},vI({},b,{from:t[b],velocity:0,to:e[b]}))},{}),c=-1,u,d,h=function(){return null},f=function(){return Ky(function(b,x){return x.from},l)},m=function(){return!Object.values(l).filter(bI).length},y=function(b){u||(u=b);var x=b-u,w=x/n.dt;l=kWe(n,l,w),s(as(as(as({},t),e),f())),u=b,m()||(c=requestAnimationFrame(h))},p=function(b){d||(d=b);var x=(b-d)/r,w=Ky(function(S,P){return jj.apply(void 0,IU(P).concat([n(x)]))},o);if(s(as(as(as({},t),e),w)),x<1)c=requestAnimationFrame(h);else{var C=Ky(function(S,P){return jj.apply(void 0,IU(P).concat([n(1)]))},o);s(as(as(as({},t),e),C))}};return h=n.isStepper?y:p,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}};function mp(t){"@babel/helpers - typeof";return mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mp(t)}var OWe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function DWe(t,e){if(t==null)return{};var n=MWe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function MWe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function EA(t){return VWe(t)||FWe(t)||$We(t)||LWe()}function LWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $We(t,e){if(t){if(typeof t=="string")return wI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wI(t,e)}}function FWe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function VWe(t){if(Array.isArray(t))return wI(t)}function wI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function RU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Pa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RU(Object(n),!0).forEach(function(r){by(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function by(t,e,n){return e=kte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BWe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UWe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kte(r.key),r)}}function zWe(t,e,n){return e&&UWe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function kte(t){var e=qWe(t,"string");return mp(e)==="symbol"?e:String(e)}function qWe(t,e){if(mp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WWe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_I(t,e)}function _I(t,e){return _I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},_I(t,e)}function HWe(t){var e=KWe();return function(){var r=Nj(t),s;if(e){var a=Nj(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return jI(this,s)}}function jI(t,e){if(e&&(mp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NI(t)}function NI(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KWe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Nj(t){return Nj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Nj(t)}var tl=function(t){WWe(n,t);var e=HWe(n);function n(r,s){var a;BWe(this,n),a=e.call(this,r,s);var o=a.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,h=o.steps,f=o.children,m=o.duration;if(a.handleStyleChange=a.handleStyleChange.bind(NI(a)),a.changeStyle=a.changeStyle.bind(NI(a)),!l||m<=0)return a.state={style:{}},typeof f=="function"&&(a.state={style:d}),jI(a);if(h&&h.length)a.state={style:h[0].style};else if(u){if(typeof f=="function")return a.state={style:u},jI(a);a.state={style:c?by({},c,u):u}}else a.state={style:{}};return a}return zWe(n,[{key:"componentDidMount",value:function(){var s=this.props,a=s.isActive,o=s.canBegin;this.mounted=!0,!(!a||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var a=this.props,o=a.isActive,l=a.canBegin,c=a.attributeName,u=a.shouldReAnimate,d=a.to,h=a.from,f=this.state.style;if(l){if(!o){var m={style:c?by({},c,d):d};this.state&&f&&(c&&f[c]!==d||!c&&f!==d)&&this.setState(m);return}if(!(J8e(s.to,d)&&s.canBegin&&s.isActive)){var y=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=y||u?h:s.to;if(this.state&&f){var v={style:c?by({},c,p):p};(c&&f[c]!==p||!c&&f!==p)&&this.setState(v)}this.runAnimation(Pa(Pa({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var a=this,o=s.from,l=s.to,c=s.duration,u=s.easing,d=s.begin,h=s.onAnimationEnd,f=s.onAnimationStart,m=RWe(o,l,_We(u),c,this.changeStyle),y=function(){a.stopJSAnimation=m()};this.manager.start([f,d,y,c,h])}},{key:"runStepAnimation",value:function(s){var a=this,o=s.steps,l=s.begin,c=s.onAnimationStart,u=o[0],d=u.style,h=u.duration,f=h===void 0?0:h,m=function(p,v,b){if(b===0)return p;var x=v.duration,w=v.easing,C=w===void 0?"ease":w,S=v.style,P=v.properties,j=v.onAnimationEnd,g=b>0?o[b-1]:v,T=P||Object.keys(S);if(typeof C=="function"||C==="spring")return[].concat(EA(p),[a.runJSAnimation.bind(a,{from:g.style,to:S,duration:x,easing:C}),x]);var E=TU(T,x,C),A=Pa(Pa(Pa({},g.style),S),{},{transition:E});return[].concat(EA(p),[A,x,j]).filter(uWe)};return this.manager.start([c].concat(EA(o.reduce(m,[d,Math.max(f,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=aWe());var a=s.begin,o=s.duration,l=s.attributeName,c=s.to,u=s.easing,d=s.onAnimationStart,h=s.onAnimationEnd,f=s.steps,m=s.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(s);return}if(f.length>1){this.runStepAnimation(s);return}var p=l?by({},l,c):c,v=TU(Object.keys(p),o,u);y.start([d,a,Pa(Pa({},p),{},{transition:v}),o,h])}},{key:"render",value:function(){var s=this.props,a=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var c=DWe(s,OWe),u=_.Children.count(a),d=this.state.style;if(typeof a=="function")return a(d);if(!l||u===0||o<=0)return a;var h=function(m){var y=m.props,p=y.style,v=p===void 0?{}:p,b=y.className,x=_.cloneElement(m,Pa(Pa({},c),{},{style:Pa(Pa({},v),d),className:b}));return x};return u===1?h(_.Children.only(a)):F.createElement("div",null,_.Children.map(a,function(f){return h(f)}))}}]),n}(_.PureComponent);tl.displayName="Animate";tl.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};tl.propTypes={from:gn.oneOfType([gn.object,gn.string]),to:gn.oneOfType([gn.object,gn.string]),attributeName:gn.string,duration:gn.number,begin:gn.number,easing:gn.oneOfType([gn.string,gn.func]),steps:gn.arrayOf(gn.shape({duration:gn.number.isRequired,style:gn.object.isRequired,easing:gn.oneOfType([gn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),gn.func]),properties:gn.arrayOf("string"),onAnimationEnd:gn.func})),children:gn.oneOfType([gn.node,gn.func]),isActive:gn.bool,canBegin:gn.bool,onAnimationEnd:gn.func,shouldReAnimate:gn.bool,onAnimationStart:gn.func,onAnimationReStart:gn.func};function fx(t){"@babel/helpers - typeof";return fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fx(t)}function Sj(){return Sj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sj.apply(this,arguments)}function GWe(t,e){return ZWe(t)||XWe(t,e)||QWe(t,e)||YWe()}function YWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QWe(t,e){if(t){if(typeof t=="string")return OU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OU(t,e)}}function OU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function XWe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function ZWe(t){if(Array.isArray(t))return t}function DU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function MU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DU(Object(n),!0).forEach(function(r){JWe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JWe(t,e,n){return e=eHe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eHe(t){var e=tHe(t,"string");return fx(e)=="symbol"?e:e+""}function tHe(t,e){if(fx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(fx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var LU=function(e,n,r,s,a){var o=Math.min(Math.abs(r)/2,Math.abs(s)/2),l=s>=0?1:-1,c=r>=0?1:-1,u=s>=0&&r>=0||s<0&&r<0?1:0,d;if(o>0&&a instanceof Array){for(var h=[0,0,0,0],f=0,m=4;f<m;f++)h[f]=a[f]>o?o:a[f];d="M".concat(e,",").concat(n+l*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(e+c*h[0],",").concat(n)),d+="L ".concat(e+r-c*h[1],",").concat(n),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+l*h[1])),d+="L ".concat(e+r,",").concat(n+s-l*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(e+r-c*h[2],",").concat(n+s)),d+="L ".concat(e+c*h[3],",").concat(n+s),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+s-l*h[3])),d+="Z"}else if(o>0&&a===+a&&a>0){var y=Math.min(o,a);d="M ".concat(e,",").concat(n+l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+c*y,",").concat(n,`
            L `).concat(e+r-c*y,",").concat(n,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+r,",").concat(n+l*y,`
            L `).concat(e+r,",").concat(n+s-l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+r-c*y,",").concat(n+s,`
            L `).concat(e+c*y,",").concat(n+s,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e,",").concat(n+s-l*y," Z")}else d="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(s," h ").concat(-r," Z");return d},nHe=function(e,n){if(!e||!n)return!1;var r=e.x,s=e.y,a=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(a,a+l),d=Math.max(a,a+l),h=Math.min(o,o+c),f=Math.max(o,o+c);return r>=u&&r<=d&&s>=h&&s<=f}return!1},rHe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},LD=function(e){var n=MU(MU({},rHe),e),r=_.useRef(),s=_.useState(-1),a=GWe(s,2),o=a[0],l=a[1];_.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var C=r.current.getTotalLength();C&&l(C)}catch{}},[]);var c=n.x,u=n.y,d=n.width,h=n.height,f=n.radius,m=n.className,y=n.animationEasing,p=n.animationDuration,v=n.animationBegin,b=n.isAnimationActive,x=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||d===0||h===0)return null;var w=$t("recharts-rectangle",m);return x?F.createElement(tl,{canBegin:o>0,from:{width:d,height:h,x:c,y:u},to:{width:d,height:h,x:c,y:u},duration:p,animationEasing:y,isActive:x},function(C){var S=C.width,P=C.height,j=C.x,g=C.y;return F.createElement(tl,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:p,isActive:b,easing:y},F.createElement("path",Sj({},vt(n,!0),{className:w,d:LU(j,g,S,P,f),ref:r})))}):F.createElement("path",Sj({},vt(n,!0),{className:w,d:LU(c,u,d,h,f)}))},sHe=["points","className","baseLinePoints","connectNulls"];function Kf(){return Kf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kf.apply(this,arguments)}function iHe(t,e){if(t==null)return{};var n=aHe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function aHe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function $U(t){return uHe(t)||cHe(t)||lHe(t)||oHe()}function oHe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lHe(t,e){if(t){if(typeof t=="string")return SI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SI(t,e)}}function cHe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function uHe(t){if(Array.isArray(t))return SI(t)}function SI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var FU=function(e){return e&&e.x===+e.x&&e.y===+e.y},dHe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){FU(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),FU(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Gy=function(e,n){var r=dHe(e);n&&(r=[r.reduce(function(a,o){return[].concat($U(a),$U(o))},[])]);var s=r.map(function(a){return a.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return r.length===1?"".concat(s,"Z"):s},hHe=function(e,n,r){var s=Gy(e,r);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(Gy(n.reverse(),r).slice(1))},fHe=function(e){var n=e.points,r=e.className,s=e.baseLinePoints,a=e.connectNulls,o=iHe(e,sHe);if(!n||!n.length)return null;var l=$t("recharts-polygon",r);if(s&&s.length){var c=o.stroke&&o.stroke!=="none",u=hHe(n,s,a);return F.createElement("g",{className:l},F.createElement("path",Kf({},vt(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?F.createElement("path",Kf({},vt(o,!0),{fill:"none",d:Gy(n,a)})):null,c?F.createElement("path",Kf({},vt(o,!0),{fill:"none",d:Gy(s,a)})):null)}var d=Gy(n,a);return F.createElement("path",Kf({},vt(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function EI(){return EI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EI.apply(this,arguments)}var XS=function(e){var n=e.cx,r=e.cy,s=e.r,a=e.className,o=$t("recharts-dot",a);return n===+n&&r===+r&&s===+s?_.createElement("circle",EI({},vt(e,!1),H_(e),{className:o,cx:n,cy:r,r:s})):null};function mx(t){"@babel/helpers - typeof";return mx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mx(t)}var mHe=["x","y","top","left","width","height","className"];function AI(){return AI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AI.apply(this,arguments)}function VU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function pHe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VU(Object(n),!0).forEach(function(r){gHe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gHe(t,e,n){return e=yHe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yHe(t){var e=vHe(t,"string");return mx(e)=="symbol"?e:e+""}function vHe(t,e){if(mx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xHe(t,e){if(t==null)return{};var n=bHe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function bHe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var wHe=function(e,n,r,s,a,o){return"M".concat(e,",").concat(a,"v").concat(s,"M").concat(o,",").concat(n,"h").concat(r)},_He=function(e){var n=e.x,r=n===void 0?0:n,s=e.y,a=s===void 0?0:s,o=e.top,l=o===void 0?0:o,c=e.left,u=c===void 0?0:c,d=e.width,h=d===void 0?0:d,f=e.height,m=f===void 0?0:f,y=e.className,p=xHe(e,mHe),v=pHe({x:r,y:a,top:l,left:u,width:h,height:m},p);return!Ie(r)||!Ie(a)||!Ie(h)||!Ie(m)||!Ie(l)||!Ie(u)?null:F.createElement("path",AI({},vt(v,!0),{className:$t("recharts-cross",y),d:wHe(r,a,h,m,l,u)}))},jHe=HS,NHe=qee,SHe=ll;function EHe(t,e){return t&&t.length?jHe(t,SHe(e),NHe):void 0}var AHe=EHe;const THe=xn(AHe);var CHe=HS,PHe=ll,IHe=Wee;function kHe(t,e){return t&&t.length?CHe(t,PHe(e),IHe):void 0}var RHe=kHe;const OHe=xn(RHe);var DHe=["cx","cy","angle","ticks","axisLine"],MHe=["ticks","tick","angle","tickFormatter","stroke"];function pp(t){"@babel/helpers - typeof";return pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pp(t)}function Yy(){return Yy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yy.apply(this,arguments)}function BU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function bd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BU(Object(n),!0).forEach(function(r){ZS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UU(t,e){if(t==null)return{};var n=LHe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function LHe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function $He(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ote(r.key),r)}}function FHe(t,e,n){return e&&zU(t.prototype,e),n&&zU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function VHe(t,e,n){return e=Ej(e),BHe(t,Rte()?Reflect.construct(e,n||[],Ej(t).constructor):e.apply(t,n))}function BHe(t,e){if(e&&(pp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UHe(t)}function UHe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rte=function(){return!!t})()}function Ej(t){return Ej=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ej(t)}function zHe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TI(t,e)}function TI(t,e){return TI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},TI(t,e)}function ZS(t,e,n){return e=Ote(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ote(t){var e=qHe(t,"string");return pp(e)=="symbol"?e:e+""}function qHe(t,e){if(pp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(pp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var JS=function(t){function e(){return $He(this,e),VHe(this,e,arguments)}return zHe(e,t),FHe(e,[{key:"getTickValueCoord",value:function(r){var s=r.coordinate,a=this.props,o=a.angle,l=a.cx,c=a.cy;return Ln(l,c,s,o)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,s;switch(r){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var r=this.props,s=r.cx,a=r.cy,o=r.angle,l=r.ticks,c=THe(l,function(d){return d.coordinate||0}),u=OHe(l,function(d){return d.coordinate||0});return{cx:s,cy:a,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,a=r.cy,o=r.angle,l=r.ticks,c=r.axisLine,u=UU(r,DHe),d=l.reduce(function(y,p){return[Math.min(y[0],p.coordinate),Math.max(y[1],p.coordinate)]},[1/0,-1/0]),h=Ln(s,a,d[0],o),f=Ln(s,a,d[1],o),m=bd(bd(bd({},vt(u,!1)),{},{fill:"none"},vt(c,!1)),{},{x1:h.x,y1:h.y,x2:f.x,y2:f.y});return F.createElement("line",Yy({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var r=this,s=this.props,a=s.ticks,o=s.tick,l=s.angle,c=s.tickFormatter,u=s.stroke,d=UU(s,MHe),h=this.getTickTextAnchor(),f=vt(d,!1),m=vt(o,!1),y=a.map(function(p,v){var b=r.getTickValueCoord(p),x=bd(bd(bd(bd({textAnchor:h,transform:"rotate(".concat(90-l,", ").concat(b.x,", ").concat(b.y,")")},f),{},{stroke:"none",fill:u},m),{},{index:v},b),{},{payload:p});return F.createElement(sn,Yy({className:$t("recharts-polar-radius-axis-tick",xte(o)),key:"tick-".concat(p.coordinate)},Mh(r.props,p,v)),e.renderTickItem(o,x,c?c(p.value,v):p.value))});return F.createElement(sn,{className:"recharts-polar-radius-axis-ticks"},y)}},{key:"render",value:function(){var r=this.props,s=r.ticks,a=r.axisLine,o=r.tick;return!s||!s.length?null:F.createElement(sn,{className:$t("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),o&&this.renderTicks(),Zr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,s,a){var o;return F.isValidElement(r)?o=F.cloneElement(r,s):Et(r)?o=r(s):o=F.createElement(Lh,Yy({},s,{className:"recharts-polar-radius-axis-tick-value"}),a),o}}])}(_.PureComponent);ZS(JS,"displayName","PolarRadiusAxis");ZS(JS,"axisType","radiusAxis");ZS(JS,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function gp(t){"@babel/helpers - typeof";return gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gp(t)}function kd(){return kd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kd.apply(this,arguments)}function qU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function wd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qU(Object(n),!0).forEach(function(r){e1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WHe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Mte(r.key),r)}}function HHe(t,e,n){return e&&WU(t.prototype,e),n&&WU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function KHe(t,e,n){return e=Aj(e),GHe(t,Dte()?Reflect.construct(e,n||[],Aj(t).constructor):e.apply(t,n))}function GHe(t,e){if(e&&(gp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YHe(t)}function YHe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Dte=function(){return!!t})()}function Aj(t){return Aj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Aj(t)}function QHe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CI(t,e)}function CI(t,e){return CI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},CI(t,e)}function e1(t,e,n){return e=Mte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mte(t){var e=XHe(t,"string");return gp(e)=="symbol"?e:e+""}function XHe(t,e){if(gp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(gp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ZHe=Math.PI/180,HU=1e-5,t1=function(t){function e(){return WHe(this,e),KHe(this,e,arguments)}return QHe(e,t),HHe(e,[{key:"getTickLineCoord",value:function(r){var s=this.props,a=s.cx,o=s.cy,l=s.radius,c=s.orientation,u=s.tickSize,d=u||8,h=Ln(a,o,l,r.coordinate),f=Ln(a,o,l+(c==="inner"?-1:1)*d,r.coordinate);return{x1:h.x,y1:h.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(r){var s=this.props.orientation,a=Math.cos(-r.coordinate*ZHe),o;return a>HU?o=s==="outer"?"start":"end":a<-HU?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,a=r.cy,o=r.radius,l=r.axisLine,c=r.axisLineType,u=wd(wd({},vt(this.props,!1)),{},{fill:"none"},vt(l,!1));if(c==="circle")return F.createElement(XS,kd({className:"recharts-polar-angle-axis-line"},u,{cx:s,cy:a,r:o}));var d=this.props.ticks,h=d.map(function(f){return Ln(s,a,o,f.coordinate)});return F.createElement(fHe,kd({className:"recharts-polar-angle-axis-line"},u,{points:h}))}},{key:"renderTicks",value:function(){var r=this,s=this.props,a=s.ticks,o=s.tick,l=s.tickLine,c=s.tickFormatter,u=s.stroke,d=vt(this.props,!1),h=vt(o,!1),f=wd(wd({},d),{},{fill:"none"},vt(l,!1)),m=a.map(function(y,p){var v=r.getTickLineCoord(y),b=r.getTickTextAnchor(y),x=wd(wd(wd({textAnchor:b},d),{},{stroke:"none",fill:u},h),{},{index:p,payload:y,x:v.x2,y:v.y2});return F.createElement(sn,kd({className:$t("recharts-polar-angle-axis-tick",xte(o)),key:"tick-".concat(y.coordinate)},Mh(r.props,y,p)),l&&F.createElement("line",kd({className:"recharts-polar-angle-axis-tick-line"},f,v)),o&&e.renderTickItem(o,x,c?c(y.value,p):y.value))});return F.createElement(sn,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var r=this.props,s=r.ticks,a=r.radius,o=r.axisLine;return a<=0||!s||!s.length?null:F.createElement(sn,{className:$t("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,s,a){var o;return F.isValidElement(r)?o=F.cloneElement(r,s):Et(r)?o=r(s):o=F.createElement(Lh,kd({},s,{className:"recharts-polar-angle-axis-tick-value"}),a),o}}])}(_.PureComponent);e1(t1,"displayName","PolarAngleAxis");e1(t1,"axisType","angleAxis");e1(t1,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var JHe=VJ,e7e=JHe(Object.getPrototypeOf,Object),t7e=e7e,n7e=ac,r7e=t7e,s7e=oc,i7e="[object Object]",a7e=Function.prototype,o7e=Object.prototype,Lte=a7e.toString,l7e=o7e.hasOwnProperty,c7e=Lte.call(Object);function u7e(t){if(!s7e(t)||n7e(t)!=i7e)return!1;var e=r7e(t);if(e===null)return!0;var n=l7e.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Lte.call(n)==c7e}var d7e=u7e;const h7e=xn(d7e);var f7e=ac,m7e=oc,p7e="[object Boolean]";function g7e(t){return t===!0||t===!1||m7e(t)&&f7e(t)==p7e}var y7e=g7e;const v7e=xn(y7e);function px(t){"@babel/helpers - typeof";return px=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},px(t)}function Tj(){return Tj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tj.apply(this,arguments)}function x7e(t,e){return j7e(t)||_7e(t,e)||w7e(t,e)||b7e()}function b7e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w7e(t,e){if(t){if(typeof t=="string")return KU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KU(t,e)}}function KU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _7e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function j7e(t){if(Array.isArray(t))return t}function GU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function YU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GU(Object(n),!0).forEach(function(r){N7e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function N7e(t,e,n){return e=S7e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S7e(t){var e=E7e(t,"string");return px(e)=="symbol"?e:e+""}function E7e(t,e){if(px(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(px(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var QU=function(e,n,r,s,a){var o=r-s,l;return l="M ".concat(e,",").concat(n),l+="L ".concat(e+r,",").concat(n),l+="L ".concat(e+r-o/2,",").concat(n+a),l+="L ".concat(e+r-o/2-s,",").concat(n+a),l+="L ".concat(e,",").concat(n," Z"),l},A7e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},T7e=function(e){var n=YU(YU({},A7e),e),r=_.useRef(),s=_.useState(-1),a=x7e(s,2),o=a[0],l=a[1];_.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var w=r.current.getTotalLength();w&&l(w)}catch{}},[]);var c=n.x,u=n.y,d=n.upperWidth,h=n.lowerWidth,f=n.height,m=n.className,y=n.animationEasing,p=n.animationDuration,v=n.animationBegin,b=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||f!==+f||d===0&&h===0||f===0)return null;var x=$t("recharts-trapezoid",m);return b?F.createElement(tl,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:u},to:{upperWidth:d,lowerWidth:h,height:f,x:c,y:u},duration:p,animationEasing:y,isActive:b},function(w){var C=w.upperWidth,S=w.lowerWidth,P=w.height,j=w.x,g=w.y;return F.createElement(tl,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:p,easing:y},F.createElement("path",Tj({},vt(n,!0),{className:x,d:QU(j,g,C,S,P),ref:r})))}):F.createElement("g",null,F.createElement("path",Tj({},vt(n,!0),{className:x,d:QU(c,u,d,h,f)})))},C7e=["option","shapeType","propTransformer","activeClassName","isActive"];function gx(t){"@babel/helpers - typeof";return gx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gx(t)}function P7e(t,e){if(t==null)return{};var n=I7e(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function I7e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function XU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Cj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XU(Object(n),!0).forEach(function(r){k7e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function k7e(t,e,n){return e=R7e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R7e(t){var e=O7e(t,"string");return gx(e)=="symbol"?e:e+""}function O7e(t,e){if(gx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(gx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function D7e(t,e){return Cj(Cj({},e),t)}function M7e(t,e){return t==="symbols"}function ZU(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return F.createElement(LD,n);case"trapezoid":return F.createElement(T7e,n);case"sector":return F.createElement(_te,n);case"symbols":if(M7e(e))return F.createElement(nD,n);break;default:return null}}function L7e(t){return _.isValidElement(t)?t.props:t}function $te(t){var e=t.option,n=t.shapeType,r=t.propTransformer,s=r===void 0?D7e:r,a=t.activeClassName,o=a===void 0?"recharts-active-shape":a,l=t.isActive,c=P7e(t,C7e),u;if(_.isValidElement(e))u=_.cloneElement(e,Cj(Cj({},c),L7e(e)));else if(Et(e))u=e(c);else if(h7e(e)&&!v7e(e)){var d=s(e,c);u=F.createElement(ZU,{shapeType:n,elementProps:d})}else{var h=c;u=F.createElement(ZU,{shapeType:n,elementProps:h})}return l?F.createElement(sn,{className:o},u):u}function n1(t,e){return e!=null&&"trapezoids"in t.props}function r1(t,e){return e!=null&&"sectors"in t.props}function yx(t,e){return e!=null&&"points"in t.props}function $7e(t,e){var n,r,s=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,a=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return s&&a}function F7e(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function V7e(t,e){var n=t.x===e.x,r=t.y===e.y,s=t.z===e.z;return n&&r&&s}function B7e(t,e){var n;return n1(t,e)?n=$7e:r1(t,e)?n=F7e:yx(t,e)&&(n=V7e),n}function U7e(t,e){var n;return n1(t,e)?n="trapezoids":r1(t,e)?n="sectors":yx(t,e)&&(n="points"),n}function z7e(t,e){if(n1(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(r1(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return yx(t,e)?e.payload:{}}function q7e(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,s=U7e(n,e),a=z7e(n,e),o=r.filter(function(c,u){var d=hp(a,c),h=n.props[s].filter(function(y){var p=B7e(n,e);return p(y,e)}),f=n.props[s].indexOf(h[h.length-1]),m=u===f;return d&&m}),l=r.indexOf(o[o.length-1]);return l}var yw;function yp(t){"@babel/helpers - typeof";return yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yp(t)}function Gf(){return Gf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gf.apply(this,arguments)}function JU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function In(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JU(Object(n),!0).forEach(function(r){ta(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function W7e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Vte(r.key),r)}}function H7e(t,e,n){return e&&e6(t.prototype,e),n&&e6(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function K7e(t,e,n){return e=Pj(e),G7e(t,Fte()?Reflect.construct(e,n||[],Pj(t).constructor):e.apply(t,n))}function G7e(t,e){if(e&&(yp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y7e(t)}function Y7e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Fte=function(){return!!t})()}function Pj(t){return Pj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Pj(t)}function Q7e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PI(t,e)}function PI(t,e){return PI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},PI(t,e)}function ta(t,e,n){return e=Vte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vte(t){var e=X7e(t,"string");return yp(e)=="symbol"?e:e+""}function X7e(t,e){if(yp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(yp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cc=function(t){function e(n){var r;return W7e(this,e),r=K7e(this,e,[n]),ta(r,"pieRef",null),ta(r,"sectorRefs",[]),ta(r,"id",og("recharts-pie-")),ta(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Et(s)&&s()}),ta(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Et(s)&&s()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return Q7e(e,t),H7e(e,[{key:"isActiveIndex",value:function(r){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(r)!==-1:r===s}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.label,l=a.labelLine,c=a.dataKey,u=a.valueKey,d=vt(this.props,!1),h=vt(o,!1),f=vt(l,!1),m=o&&o.offsetRadius||20,y=r.map(function(p,v){var b=(p.startAngle+p.endAngle)/2,x=Ln(p.cx,p.cy,p.outerRadius+m,b),w=In(In(In(In({},d),p),{},{stroke:"none"},h),{},{index:v,textAnchor:e.getTextAnchor(x.x,p.cx)},x),C=In(In(In(In({},d),p),{},{fill:"none",stroke:p.fill},f),{},{index:v,points:[Ln(p.cx,p.cy,p.outerRadius,b),x]}),S=c;return Ft(c)&&Ft(u)?S="value":Ft(c)&&(S=u),F.createElement(sn,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(v)},l&&e.renderLabelLineItem(l,C,"line"),e.renderLabelItem(o,w,Vr(p,S)))});return F.createElement(sn,{className:"recharts-pie-labels"},y)}},{key:"renderSectorsStatically",value:function(r){var s=this,a=this.props,o=a.activeShape,l=a.blendStroke,c=a.inactiveShape;return r.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var h=s.isActiveIndex(d),f=c&&s.hasActiveIndex()?c:null,m=h?o:f,y=In(In({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return F.createElement(sn,Gf({ref:function(v){v&&!s.sectorRefs.includes(v)&&s.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},Mh(s.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),F.createElement($te,Gf({option:m,isActive:h,shapeType:"sector"},y)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,s=this.props,a=s.sectors,o=s.isAnimationActive,l=s.animationBegin,c=s.animationDuration,u=s.animationEasing,d=s.animationId,h=this.state,f=h.prevSectors,m=h.prevIsAnimationActive;return F.createElement(tl,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(y){var p=y.t,v=[],b=a&&a[0],x=b.startAngle;return a.forEach(function(w,C){var S=f&&f[C],P=C>0?Vi(w,"paddingAngle",0):0;if(S){var j=ui(S.endAngle-S.startAngle,w.endAngle-w.startAngle),g=In(In({},w),{},{startAngle:x+P,endAngle:x+j(p)+P});v.push(g),x=g.endAngle}else{var T=w.endAngle,E=w.startAngle,A=ui(0,T-E),I=A(p),k=In(In({},w),{},{startAngle:x+P,endAngle:x+I+P});v.push(k),x=k.endAngle}}),F.createElement(sn,null,r.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(r){var s=this;r.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var o=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[o].focus(),s.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[l].focus(),s.setState({sectorToFocus:l});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,s=r.sectors,a=r.isAnimationActive,o=this.state.prevSectors;return a&&s&&s.length&&(!o||!hp(o,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,s=this.props,a=s.hide,o=s.sectors,l=s.className,c=s.label,u=s.cx,d=s.cy,h=s.innerRadius,f=s.outerRadius,m=s.isAnimationActive,y=this.state.isAnimationFinished;if(a||!o||!o.length||!Ie(u)||!Ie(d)||!Ie(h)||!Ie(f))return null;var p=$t("recharts-pie",l);return F.createElement(sn,{tabIndex:this.props.rootTabIndex,className:p,ref:function(b){r.pieRef=b}},this.renderSectors(),c&&this.renderLabels(o),Zr.renderCallByParent(this.props,null,!1),(!m||y)&&Ol.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return s.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:r.sectors!==s.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,s){return r>s?"start":r<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,s,a){if(F.isValidElement(r))return F.cloneElement(r,s);if(Et(r))return r(s);var o=$t("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return F.createElement(vm,Gf({},s,{key:a,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(r,s,a){if(F.isValidElement(r))return F.cloneElement(r,s);var o=a;if(Et(r)&&(o=r(s),F.isValidElement(o)))return o;var l=$t("recharts-pie-label-text",typeof r!="boolean"&&!Et(r)?r.className:"");return F.createElement(Lh,Gf({},s,{alignmentBaseline:"middle",className:l}),o)}}])}(_.PureComponent);yw=cc;ta(cc,"displayName","Pie");ta(cc,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Ko.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});ta(cc,"parseDeltaAngle",function(t,e){var n=Hs(e-t),r=Math.min(Math.abs(e-t),360);return n*r});ta(cc,"getRealPieData",function(t){var e=t.data,n=t.children,r=vt(t,!1),s=ha(n,FS);return e&&e.length?e.map(function(a,o){return In(In(In({payload:a},r),a),s&&s[o]&&s[o].props)}):s&&s.length?s.map(function(a){return In(In({},r),a.props)}):[]});ta(cc,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,s=e.width,a=e.height,o=vte(s,a),l=r+Ks(t.cx,s,s/2),c=n+Ks(t.cy,a,a/2),u=Ks(t.innerRadius,o,0),d=Ks(t.outerRadius,o,o*.8),h=t.maxRadius||Math.sqrt(s*s+a*a)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:h}});ta(cc,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?In(In({},e.type.defaultProps),e.props):e.props,s=yw.getRealPieData(r);if(!s||!s.length)return null;var a=r.cornerRadius,o=r.startAngle,l=r.endAngle,c=r.paddingAngle,u=r.dataKey,d=r.nameKey,h=r.valueKey,f=r.tooltipType,m=Math.abs(r.minAngle),y=yw.parseCoordinateOfPie(r,n),p=yw.parseDeltaAngle(o,l),v=Math.abs(p),b=u;Ft(u)&&Ft(h)?(ro(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b="value"):Ft(u)&&(ro(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b=h);var x=s.filter(function(g){return Vr(g,b,0)!==0}).length,w=(v>=360?x:x-1)*c,C=v-x*m-w,S=s.reduce(function(g,T){var E=Vr(T,b,0);return g+(Ie(E)?E:0)},0),P;if(S>0){var j;P=s.map(function(g,T){var E=Vr(g,b,0),A=Vr(g,d,T),I=(Ie(E)?E:0)/S,k;T?k=j.endAngle+Hs(p)*c*(E!==0?1:0):k=o;var L=k+Hs(p)*((E!==0?m:0)+I*C),V=(k+L)/2,B=(y.innerRadius+y.outerRadius)/2,M=[{name:A,value:E,payload:g,dataKey:b,type:f}],$=Ln(y.cx,y.cy,B,V);return j=In(In(In({percent:I,cornerRadius:a,name:A,tooltipPayload:M,midAngle:V,middleRadius:B,tooltipPosition:$},g),y),{},{value:Vr(g,b),startAngle:k,endAngle:L,payload:g,paddingAngle:Hs(p)*c}),j})}return In(In({},y),{},{sectors:P,data:s})});var Z7e=Math.ceil,J7e=Math.max;function eKe(t,e,n,r){for(var s=-1,a=J7e(Z7e((e-t)/(n||1)),0),o=Array(a);a--;)o[r?a:++s]=t,t+=n;return o}var tKe=eKe,nKe=iee,t6=1/0,rKe=17976931348623157e292;function sKe(t){if(!t)return t===0?t:0;if(t=nKe(t),t===t6||t===-t6){var e=t<0?-1:1;return e*rKe}return t===t?t:0}var Bte=sKe,iKe=tKe,aKe=$S,AA=Bte;function oKe(t){return function(e,n,r){return r&&typeof r!="number"&&aKe(e,n,r)&&(n=r=void 0),e=AA(e),n===void 0?(n=e,e=0):n=AA(n),r=r===void 0?e<n?1:-1:AA(r),iKe(e,n,r,t)}}var lKe=oKe,cKe=lKe,uKe=cKe(),dKe=uKe;const Ij=xn(dKe);function vx(t){"@babel/helpers - typeof";return vx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vx(t)}function n6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function r6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n6(Object(n),!0).forEach(function(r){Ute(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ute(t,e,n){return e=hKe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hKe(t){var e=fKe(t,"string");return vx(e)=="symbol"?e:e+""}function fKe(t,e){if(vx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(vx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mKe=["Webkit","Moz","O","ms"],pKe=function(e,n){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),s=mKe.reduce(function(a,o){return r6(r6({},a),{},Ute({},o+r,n))},{});return s[e]=n,s};function vp(t){"@babel/helpers - typeof";return vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vp(t)}function kj(){return kj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kj.apply(this,arguments)}function s6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function TA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s6(Object(n),!0).forEach(function(r){Ei(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gKe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qte(r.key),r)}}function yKe(t,e,n){return e&&i6(t.prototype,e),n&&i6(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function vKe(t,e,n){return e=Rj(e),xKe(t,zte()?Reflect.construct(e,n||[],Rj(t).constructor):e.apply(t,n))}function xKe(t,e){if(e&&(vp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bKe(t)}function bKe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zte=function(){return!!t})()}function Rj(t){return Rj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rj(t)}function wKe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&II(t,e)}function II(t,e){return II=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},II(t,e)}function Ei(t,e,n){return e=qte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qte(t){var e=_Ke(t,"string");return vp(e)=="symbol"?e:e+""}function _Ke(t,e){if(vp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(vp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jKe=function(e){var n=e.data,r=e.startIndex,s=e.endIndex,a=e.x,o=e.width,l=e.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=Wy().domain(Ij(0,c)).range([a,a+o-l]),d=u.domain().map(function(h){return u(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(s),scale:u,scaleValues:d}},a6=function(e){return e.changedTouches&&!!e.changedTouches.length},xp=function(t){function e(n){var r;return gKe(this,e),r=vKe(this,e,[n]),Ei(r,"handleDrag",function(s){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(s):r.state.isSlideMoving&&r.handleSlideDrag(s)}),Ei(r,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&r.handleDrag(s.changedTouches[0])}),Ei(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=r.props,a=s.endIndex,o=s.onDragEnd,l=s.startIndex;o==null||o({endIndex:a,startIndex:l})}),r.detachDragEndListener()}),Ei(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Ei(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Ei(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Ei(r,"handleSlideDragStart",function(s){var a=a6(s)?s.changedTouches[0]:s;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return wKe(e,t),yKe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var s=r.startX,a=r.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,h=Math.min(s,a),f=Math.max(s,a),m=e.getIndexInRange(o,h),y=e.getIndexInRange(o,f);return{startIndex:m-m%c,endIndex:y===d?d:y-y%c}}},{key:"getTextOfTick",value:function(r){var s=this.props,a=s.data,o=s.tickFormatter,l=s.dataKey,c=Vr(a[r],l,r);return Et(o)?o(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var s=this.state,a=s.slideMoveStartX,o=s.startX,l=s.endX,c=this.props,u=c.x,d=c.width,h=c.travellerWidth,f=c.startIndex,m=c.endIndex,y=c.onChange,p=r.pageX-a;p>0?p=Math.min(p,u+d-h-l,u+d-h-o):p<0&&(p=Math.max(p,u-o,u-l));var v=this.getIndex({startX:o+p,endX:l+p});(v.startIndex!==f||v.endIndex!==m)&&y&&y(v),this.setState({startX:o+p,endX:l+p,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,s){var a=a6(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var s=this.state,a=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,c=s.startX,u=this.state[o],d=this.props,h=d.x,f=d.width,m=d.travellerWidth,y=d.onChange,p=d.gap,v=d.data,b={startX:this.state.startX,endX:this.state.endX},x=r.pageX-a;x>0?x=Math.min(x,h+f-m-u):x<0&&(x=Math.max(x,h-u)),b[o]=u+x;var w=this.getIndex(b),C=w.startIndex,S=w.endIndex,P=function(){var g=v.length-1;return o==="startX"&&(l>c?C%p===0:S%p===0)||l<c&&S===g||o==="endX"&&(l>c?S%p===0:C%p===0)||l>c&&S===g};this.setState(Ei(Ei({},o,u+x),"brushMoveStartX",r.pageX),function(){y&&P()&&y(w)})}},{key:"handleTravellerMoveKeyboard",value:function(r,s){var a=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[s],h=l.indexOf(d);if(h!==-1){var f=h+r;if(!(f===-1||f>=l.length)){var m=l[f];s==="startX"&&m>=u||s==="endX"&&m<=c||this.setState(Ei({},s,m),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,s=r.x,a=r.y,o=r.width,l=r.height,c=r.fill,u=r.stroke;return F.createElement("rect",{stroke:u,fill:c,x:s,y:a,width:o,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,s=r.x,a=r.y,o=r.width,l=r.height,c=r.data,u=r.children,d=r.padding,h=_.Children.only(u);return h?F.cloneElement(h,{x:s,y:a,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,s){var a,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,h=c.height,f=c.traveller,m=c.ariaLabel,y=c.data,p=c.startIndex,v=c.endIndex,b=Math.max(r,this.props.x),x=TA(TA({},vt(this.props,!1)),{},{x:b,y:u,width:d,height:h}),w=m||"Min value: ".concat((a=y[p])===null||a===void 0?void 0:a.name,", Max value: ").concat((o=y[v])===null||o===void 0?void 0:o.name);return F.createElement(sn,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),l.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,x))}},{key:"renderSlide",value:function(r,s){var a=this.props,o=a.y,l=a.height,c=a.stroke,u=a.travellerWidth,d=Math.min(r,s)+u,h=Math.max(Math.abs(s-r)-u,0);return F.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:h,height:l})}},{key:"renderText",value:function(){var r=this.props,s=r.startIndex,a=r.endIndex,o=r.y,l=r.height,c=r.travellerWidth,u=r.stroke,d=this.state,h=d.startX,f=d.endX,m=5,y={pointerEvents:"none",fill:u};return F.createElement(sn,{className:"recharts-brush-texts"},F.createElement(Lh,kj({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,f)-m,y:o+l/2},y),this.getTextOfTick(s)),F.createElement(Lh,kj({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,f)+c+m,y:o+l/2},y),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,s=r.data,a=r.className,o=r.children,l=r.x,c=r.y,u=r.width,d=r.height,h=r.alwaysShowText,f=this.state,m=f.startX,y=f.endX,p=f.isTextActive,v=f.isSlideMoving,b=f.isTravellerMoving,x=f.isTravellerFocused;if(!s||!s.length||!Ie(l)||!Ie(c)||!Ie(u)||!Ie(d)||u<=0||d<=0)return null;var w=$t("recharts-brush",a),C=F.Children.count(o)===1,S=pKe("userSelect","none");return F.createElement(sn,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),C&&this.renderPanorama(),this.renderSlide(m,y),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(y,"endX"),(p||v||b||x||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var s=r.x,a=r.y,o=r.width,l=r.height,c=r.stroke,u=Math.floor(a+l/2)-1;return F.createElement(F.Fragment,null,F.createElement("rect",{x:s,y:a,width:o,height:l,fill:c,stroke:"none"}),F.createElement("line",{x1:s+1,y1:u,x2:s+o-1,y2:u,fill:"none",stroke:"#fff"}),F.createElement("line",{x1:s+1,y1:u+2,x2:s+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,s){var a;return F.isValidElement(r)?a=F.cloneElement(r,s):Et(r)?a=r(s):a=e.renderDefaultTraveller(s),a}},{key:"getDerivedStateFromProps",value:function(r,s){var a=r.data,o=r.width,l=r.x,c=r.travellerWidth,u=r.updateId,d=r.startIndex,h=r.endIndex;if(a!==s.prevData||u!==s.prevUpdateId)return TA({prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},a&&a.length?jKe({data:a,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:h}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||c!==s.prevTravellerWidth)){s.scale.range([l,l+o-c]);var f=s.scale.domain().map(function(m){return s.scale(m)});return{prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:s.scale(r.startIndex),endX:s.scale(r.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(r,s){for(var a=r.length,o=0,l=a-1;l-o>1;){var c=Math.floor((o+l)/2);r[c]>s?l=c:o=c}return s>=r[l]?l:o}}])}(_.PureComponent);Ei(xp,"displayName","Brush");Ei(xp,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var NKe=cD;function SKe(t,e){var n;return NKe(t,function(r,s,a){return n=e(r,s,a),!n}),!!n}var EKe=SKe,AKe=kJ,TKe=ll,CKe=EKe,PKe=wi,IKe=$S;function kKe(t,e,n){var r=PKe(t)?AKe:CKe;return n&&IKe(t,e,n)&&(e=void 0),r(t,TKe(e))}var RKe=kKe;const OKe=xn(RKe);var Yo=function(e,n){var r=e.alwaysShow,s=e.ifOverflow;return r&&(s="extendDomain"),s===n},o6=eee;function DKe(t,e,n){e=="__proto__"&&o6?o6(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var MKe=DKe,LKe=MKe,$Ke=ZJ,FKe=ll;function VKe(t,e){var n={};return e=FKe(e),$Ke(t,function(r,s,a){LKe(n,s,e(r,s,a))}),n}var BKe=VKe;const UKe=xn(BKe);function zKe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var qKe=zKe,WKe=cD;function HKe(t,e){var n=!0;return WKe(t,function(r,s,a){return n=!!e(r,s,a),n}),n}var KKe=HKe,GKe=qKe,YKe=KKe,QKe=ll,XKe=wi,ZKe=$S;function JKe(t,e,n){var r=XKe(t)?GKe:YKe;return n&&ZKe(t,e,n)&&(e=void 0),r(t,QKe(e))}var eGe=JKe;const Wte=xn(eGe);var tGe=["x","y"];function xx(t){"@babel/helpers - typeof";return xx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xx(t)}function kI(){return kI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kI.apply(this,arguments)}function l6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Zg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l6(Object(n),!0).forEach(function(r){nGe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nGe(t,e,n){return e=rGe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rGe(t){var e=sGe(t,"string");return xx(e)=="symbol"?e:e+""}function sGe(t,e){if(xx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(xx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iGe(t,e){if(t==null)return{};var n=aGe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function aGe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function oGe(t,e){var n=t.x,r=t.y,s=iGe(t,tGe),a="".concat(n),o=parseInt(a,10),l="".concat(r),c=parseInt(l,10),u="".concat(e.height||s.height),d=parseInt(u,10),h="".concat(e.width||s.width),f=parseInt(h,10);return Zg(Zg(Zg(Zg(Zg({},e),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:f,name:e.name,radius:e.radius})}function c6(t){return F.createElement($te,kI({shapeType:"rectangle",propTransformer:oGe,activeClassName:"recharts-active-bar"},t))}var lGe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,s){if(typeof e=="number")return e;var a=Ie(r)||ROe(r);return a?e(r,s):(a||Fh(),n)}},cGe=["value","background"],Hte;function bp(t){"@babel/helpers - typeof";return bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bp(t)}function uGe(t,e){if(t==null)return{};var n=dGe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function dGe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Oj(){return Oj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oj.apply(this,arguments)}function u6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Er(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u6(Object(n),!0).forEach(function(r){ou(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gte(r.key),r)}}function fGe(t,e,n){return e&&d6(t.prototype,e),n&&d6(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function mGe(t,e,n){return e=Dj(e),pGe(t,Kte()?Reflect.construct(e,n||[],Dj(t).constructor):e.apply(t,n))}function pGe(t,e){if(e&&(bp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gGe(t)}function gGe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kte(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Kte=function(){return!!t})()}function Dj(t){return Dj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dj(t)}function yGe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RI(t,e)}function RI(t,e){return RI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},RI(t,e)}function ou(t,e,n){return e=Gte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gte(t){var e=vGe(t,"string");return bp(e)=="symbol"?e:e+""}function vGe(t,e){if(bp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(bp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nf=function(t){function e(){var n;hGe(this,e);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=mGe(this,e,[].concat(s)),ou(n,"state",{isAnimationFinished:!1}),ou(n,"id",og("recharts-bar-")),ou(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),ou(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return yGe(e,t),fGe(e,[{key:"renderRectanglesStatically",value:function(r){var s=this,a=this.props,o=a.shape,l=a.dataKey,c=a.activeIndex,u=a.activeBar,d=vt(this.props,!1);return r&&r.map(function(h,f){var m=f===c,y=m?u:o,p=Er(Er(Er({},d),h),{},{isActive:m,option:y,index:f,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return F.createElement(sn,Oj({className:"recharts-bar-rectangle"},Mh(s.props,h,f),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(f)}),F.createElement(c6,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,s=this.props,a=s.data,o=s.layout,l=s.isAnimationActive,c=s.animationBegin,u=s.animationDuration,d=s.animationEasing,h=s.animationId,f=this.state.prevData;return F.createElement(tl,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var y=m.t,p=a.map(function(v,b){var x=f&&f[b];if(x){var w=ui(x.x,v.x),C=ui(x.y,v.y),S=ui(x.width,v.width),P=ui(x.height,v.height);return Er(Er({},v),{},{x:w(y),y:C(y),width:S(y),height:P(y)})}if(o==="horizontal"){var j=ui(0,v.height),g=j(y);return Er(Er({},v),{},{y:v.y+v.height-g,height:g})}var T=ui(0,v.width),E=T(y);return Er(Er({},v),{},{width:E})});return F.createElement(sn,null,r.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var r=this.props,s=r.data,a=r.isAnimationActive,o=this.state.prevData;return a&&s&&s.length&&(!o||!hp(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var r=this,s=this.props,a=s.data,o=s.dataKey,l=s.activeIndex,c=vt(this.props.background,!1);return a.map(function(u,d){u.value;var h=u.background,f=uGe(u,cGe);if(!h)return null;var m=Er(Er(Er(Er(Er({},f),{},{fill:"#eee"},h),c),Mh(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return F.createElement(c6,Oj({key:"background-bar-".concat(d),option:r.props.background,isActive:d===l},m))})}},{key:"renderErrorBar",value:function(r,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.data,l=a.xAxis,c=a.yAxis,u=a.layout,d=a.children,h=ha(d,QS);if(!h)return null;var f=u==="vertical"?o[0].height/2:o[0].width/2,m=function(v,b){var x=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:x,errorVal:Vr(v,b)}},y={clipPath:r?"url(#clipPath-".concat(s,")"):null};return F.createElement(sn,y,h.map(function(p){return F.cloneElement(p,{key:"error-bar-".concat(s,"-").concat(p.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:f,dataPointFormatter:m})}))}},{key:"render",value:function(){var r=this.props,s=r.hide,a=r.data,o=r.className,l=r.xAxis,c=r.yAxis,u=r.left,d=r.top,h=r.width,f=r.height,m=r.isAnimationActive,y=r.background,p=r.id;if(s||!a||!a.length)return null;var v=this.state.isAnimationFinished,b=$t("recharts-bar",o),x=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,C=x||w,S=Ft(p)?this.id:p;return F.createElement(sn,{className:b},x||w?F.createElement("defs",null,F.createElement("clipPath",{id:"clipPath-".concat(S)},F.createElement("rect",{x:x?u:u-h/2,y:w?d:d-f/2,width:x?h:h*2,height:w?f:f*2}))):null,F.createElement(sn,{className:"recharts-bar-rectangles",clipPath:C?"url(#clipPath-".concat(S,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(C,S),(!m||v)&&Ol.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:s.curData}:r.data!==s.curData?{curData:r.data}:null}}])}(_.PureComponent);Hte=nf;ou(nf,"displayName","Bar");ou(nf,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ko.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ou(nf,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,s=t.bandSize,a=t.xAxis,o=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,u=t.stackedData,d=t.dataStartIndex,h=t.displayedData,f=t.offset,m=Z9e(r,n);if(!m)return null;var y=e.layout,p=n.type.defaultProps,v=p!==void 0?Er(Er({},p),n.props):n.props,b=v.dataKey,x=v.children,w=v.minPointSize,C=y==="horizontal"?o:a,S=u?C.scale.domain():null,P=iqe({numericAxis:C}),j=ha(x,FS),g=h.map(function(T,E){var A,I,k,L,V,B;u?A=J9e(u[d+E],S):(A=Vr(T,b),Array.isArray(A)||(A=[P,A]));var M=lGe(w,Hte.defaultProps.minPointSize)(A[1],E);if(y==="horizontal"){var $,O=[o.scale(A[0]),o.scale(A[1])],W=O[0],Z=O[1];I=eU({axis:a,ticks:l,bandSize:s,offset:m.offset,entry:T,index:E}),k=($=Z??W)!==null&&$!==void 0?$:void 0,L=m.size;var ae=W-Z;if(V=Number.isNaN(ae)?0:ae,B={x:I,y:o.y,width:L,height:o.height},Math.abs(M)>0&&Math.abs(V)<Math.abs(M)){var Ae=Hs(V||M)*(Math.abs(M)-Math.abs(V));k-=Ae,V+=Ae}}else{var ie=[a.scale(A[0]),a.scale(A[1])],pe=ie[0],Ue=ie[1];if(I=pe,k=eU({axis:o,ticks:c,bandSize:s,offset:m.offset,entry:T,index:E}),L=Ue-pe,V=m.size,B={x:a.x,y:k,width:a.width,height:V},Math.abs(M)>0&&Math.abs(L)<Math.abs(M)){var Ne=Hs(L||M)*(Math.abs(M)-Math.abs(L));L+=Ne}}return Er(Er(Er({},T),{},{x:I,y:k,width:L,height:V,value:u?A:A[1],payload:T,background:B},j&&j[E]&&j[E].props),{},{tooltipPayload:[gte(n,T)],tooltipPosition:{x:I+L/2,y:k+V/2}})});return Er({data:g,layout:y},f)});function bx(t){"@babel/helpers - typeof";return bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bx(t)}function xGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Yte(r.key),r)}}function bGe(t,e,n){return e&&h6(t.prototype,e),n&&h6(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function f6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function $a(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f6(Object(n),!0).forEach(function(r){s1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function s1(t,e,n){return e=Yte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yte(t){var e=wGe(t,"string");return bx(e)=="symbol"?e:e+""}function wGe(t,e){if(bx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(bx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qte=function(e,n,r,s,a){var o=e.width,l=e.height,c=e.layout,u=e.children,d=Object.keys(n),h={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},f=!!Ti(u,nf);return d.reduce(function(m,y){var p=n[y],v=p.orientation,b=p.domain,x=p.padding,w=x===void 0?{}:x,C=p.mirror,S=p.reversed,P="".concat(v).concat(C?"Mirror":""),j,g,T,E,A;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var I=b[1]-b[0],k=1/0,L=p.categoricalDomain.sort(MOe);if(L.forEach(function(ie,pe){pe>0&&(k=Math.min((ie||0)-(L[pe-1]||0),k))}),Number.isFinite(k)){var V=k/I,B=p.layout==="vertical"?r.height:r.width;if(p.padding==="gap"&&(j=V*B/2),p.padding==="no-gap"){var M=Ks(e.barCategoryGap,V*B),$=V*B/2;j=$-M-($-M)/B*M}}}s==="xAxis"?g=[r.left+(w.left||0)+(j||0),r.left+r.width-(w.right||0)-(j||0)]:s==="yAxis"?g=c==="horizontal"?[r.top+r.height-(w.bottom||0),r.top+(w.top||0)]:[r.top+(w.top||0)+(j||0),r.top+r.height-(w.bottom||0)-(j||0)]:g=p.range,S&&(g=[g[1],g[0]]);var O=hte(p,a,f),W=O.scale,Z=O.realScaleType;W.domain(b).range(g),fte(W);var ae=mte(W,$a($a({},p),{},{realScaleType:Z}));s==="xAxis"?(A=v==="top"&&!C||v==="bottom"&&C,T=r.left,E=h[P]-A*p.height):s==="yAxis"&&(A=v==="left"&&!C||v==="right"&&C,T=h[P]-A*p.width,E=r.top);var Ae=$a($a($a({},p),ae),{},{realScaleType:Z,x:T,y:E,scale:W,width:s==="xAxis"?r.width:p.width,height:s==="yAxis"?r.height:p.height});return Ae.bandSize=xj(Ae,ae),!p.hide&&s==="xAxis"?h[P]+=(A?-1:1)*Ae.height:p.hide||(h[P]+=(A?-1:1)*Ae.width),$a($a({},m),{},s1({},y,Ae))},{})},Xte=function(e,n){var r=e.x,s=e.y,a=n.x,o=n.y;return{x:Math.min(r,a),y:Math.min(s,o),width:Math.abs(a-r),height:Math.abs(o-s)}},_Ge=function(e){var n=e.x1,r=e.y1,s=e.x2,a=e.y2;return Xte({x:n,y:r},{x:s,y:a})},Zte=function(){function t(e){xGe(this,t),this.scale=e}return bGe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(s){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),s=r[0],a=r[r.length-1];return s<=a?n>=s&&n<=a:n>=a&&n<=s}}],[{key:"create",value:function(n){return new t(n)}}])}();s1(Zte,"EPS",1e-4);var $D=function(e){var n=Object.keys(e).reduce(function(r,s){return $a($a({},r),{},s1({},s,Zte.create(e[s])))},{});return $a($a({},n),{},{apply:function(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.bandAware,l=a.position;return UKe(s,function(c,u){return n[u].apply(c,{bandAware:o,position:l})})},isInRange:function(s){return Wte(s,function(a,o){return n[o].isInRange(a)})}})};function jGe(t){return(t%180+180)%180}var NGe=function(e){var n=e.width,r=e.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=jGe(s),o=a*Math.PI/180,l=Math.atan(r/n),c=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(c)},SGe=ll,EGe=xb,AGe=MS;function TGe(t){return function(e,n,r){var s=Object(e);if(!EGe(e)){var a=SGe(n);e=AGe(e),n=function(l){return a(s[l],l,s)}}var o=t(e,n,r);return o>-1?s[a?e[o]:o]:void 0}}var CGe=TGe,PGe=Bte;function IGe(t){var e=PGe(t),n=e%1;return e===e?n?e-n:e:0}var kGe=IGe,RGe=HJ,OGe=ll,DGe=kGe,MGe=Math.max;function LGe(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var s=n==null?0:DGe(n);return s<0&&(s=MGe(r+s,0)),RGe(t,OGe(e),s)}var $Ge=LGe,FGe=CGe,VGe=$Ge,BGe=FGe(VGe),UGe=BGe;const zGe=xn(UGe);var qGe=LRe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),FD=_.createContext(void 0),VD=_.createContext(void 0),Jte=_.createContext(void 0),ene=_.createContext({}),tne=_.createContext(void 0),nne=_.createContext(0),rne=_.createContext(0),m6=function(e){var n=e.state,r=n.xAxisMap,s=n.yAxisMap,a=n.offset,o=e.clipPathId,l=e.children,c=e.width,u=e.height,d=qGe(a);return F.createElement(FD.Provider,{value:r},F.createElement(VD.Provider,{value:s},F.createElement(ene.Provider,{value:a},F.createElement(Jte.Provider,{value:d},F.createElement(tne.Provider,{value:o},F.createElement(nne.Provider,{value:u},F.createElement(rne.Provider,{value:c},l)))))))},WGe=function(){return _.useContext(tne)},sne=function(e){var n=_.useContext(FD);n==null&&Fh();var r=n[e];return r==null&&Fh(),r},HGe=function(){var e=_.useContext(FD);return zc(e)},KGe=function(){var e=_.useContext(VD),n=zGe(e,function(r){return Wte(r.domain,Number.isFinite)});return n||zc(e)},ine=function(e){var n=_.useContext(VD);n==null&&Fh();var r=n[e];return r==null&&Fh(),r},GGe=function(){var e=_.useContext(Jte);return e},YGe=function(){return _.useContext(ene)},BD=function(){return _.useContext(rne)},UD=function(){return _.useContext(nne)};function wp(t){"@babel/helpers - typeof";return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wp(t)}function QGe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function XGe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,one(r.key),r)}}function ZGe(t,e,n){return e&&XGe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function JGe(t,e,n){return e=Mj(e),eYe(t,ane()?Reflect.construct(e,n||[],Mj(t).constructor):e.apply(t,n))}function eYe(t,e){if(e&&(wp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tYe(t)}function tYe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ane(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ane=function(){return!!t})()}function Mj(t){return Mj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Mj(t)}function nYe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OI(t,e)}function OI(t,e){return OI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},OI(t,e)}function p6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function g6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p6(Object(n),!0).forEach(function(r){zD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zD(t,e,n){return e=one(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function one(t){var e=rYe(t,"string");return wp(e)=="symbol"?e:e+""}function rYe(t,e){if(wp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(wp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sYe(t,e){return lYe(t)||oYe(t,e)||aYe(t,e)||iYe()}function iYe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aYe(t,e){if(t){if(typeof t=="string")return y6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y6(t,e)}}function y6(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function oYe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function lYe(t){if(Array.isArray(t))return t}function DI(){return DI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DI.apply(this,arguments)}var cYe=function(e,n){var r;return F.isValidElement(e)?r=F.cloneElement(e,n):Et(e)?r=e(n):r=F.createElement("line",DI({},n,{className:"recharts-reference-line-line"})),r},uYe=function(e,n,r,s,a,o,l,c,u){var d=a.x,h=a.y,f=a.width,m=a.height;if(r){var y=u.y,p=e.y.apply(y,{position:o});if(Yo(u,"discard")&&!e.y.isInRange(p))return null;var v=[{x:d+f,y:p},{x:d,y:p}];return c==="left"?v.reverse():v}if(n){var b=u.x,x=e.x.apply(b,{position:o});if(Yo(u,"discard")&&!e.x.isInRange(x))return null;var w=[{x,y:h+m},{x,y:h}];return l==="top"?w.reverse():w}if(s){var C=u.segment,S=C.map(function(P){return e.apply(P,{position:o})});return Yo(u,"discard")&&OKe(S,function(P){return!e.isInRange(P)})?null:S}return null};function dYe(t){var e=t.x,n=t.y,r=t.segment,s=t.xAxisId,a=t.yAxisId,o=t.shape,l=t.className,c=t.alwaysShow,u=WGe(),d=sne(s),h=ine(a),f=GGe();if(!u||!f)return null;ro(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=$D({x:d.scale,y:h.scale}),y=zr(e),p=zr(n),v=r&&r.length===2,b=uYe(m,y,p,v,f,t.position,d.orientation,h.orientation,t);if(!b)return null;var x=sYe(b,2),w=x[0],C=w.x,S=w.y,P=x[1],j=P.x,g=P.y,T=Yo(t,"hidden")?"url(#".concat(u,")"):void 0,E=g6(g6({clipPath:T},vt(t,!0)),{},{x1:C,y1:S,x2:j,y2:g});return F.createElement(sn,{className:$t("recharts-reference-line",l)},cYe(o,E),Zr.renderCallByParent(t,_Ge({x1:C,y1:S,x2:j,y2:g})))}var qD=function(t){function e(){return QGe(this,e),JGe(this,e,arguments)}return nYe(e,t),ZGe(e,[{key:"render",value:function(){return F.createElement(dYe,this.props)}}])}(F.Component);zD(qD,"displayName","ReferenceLine");zD(qD,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function MI(){return MI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MI.apply(this,arguments)}function _p(t){"@babel/helpers - typeof";return _p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_p(t)}function v6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function x6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v6(Object(n),!0).forEach(function(r){i1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hYe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fYe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cne(r.key),r)}}function mYe(t,e,n){return e&&fYe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function pYe(t,e,n){return e=Lj(e),gYe(t,lne()?Reflect.construct(e,n||[],Lj(t).constructor):e.apply(t,n))}function gYe(t,e){if(e&&(_p(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yYe(t)}function yYe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lne=function(){return!!t})()}function Lj(t){return Lj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Lj(t)}function vYe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LI(t,e)}function LI(t,e){return LI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},LI(t,e)}function i1(t,e,n){return e=cne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cne(t){var e=xYe(t,"string");return _p(e)=="symbol"?e:e+""}function xYe(t,e){if(_p(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_p(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bYe=function(e){var n=e.x,r=e.y,s=e.xAxis,a=e.yAxis,o=$D({x:s.scale,y:a.scale}),l=o.apply({x:n,y:r},{bandAware:!0});return Yo(e,"discard")&&!o.isInRange(l)?null:l},a1=function(t){function e(){return hYe(this,e),pYe(this,e,arguments)}return vYe(e,t),mYe(e,[{key:"render",value:function(){var r=this.props,s=r.x,a=r.y,o=r.r,l=r.alwaysShow,c=r.clipPathId,u=zr(s),d=zr(a);if(ro(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var h=bYe(this.props);if(!h)return null;var f=h.x,m=h.y,y=this.props,p=y.shape,v=y.className,b=Yo(this.props,"hidden")?"url(#".concat(c,")"):void 0,x=x6(x6({clipPath:b},vt(this.props,!0)),{},{cx:f,cy:m});return F.createElement(sn,{className:$t("recharts-reference-dot",v)},e.renderDot(p,x),Zr.renderCallByParent(this.props,{x:f-o,y:m-o,width:2*o,height:2*o}))}}])}(F.Component);i1(a1,"displayName","ReferenceDot");i1(a1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});i1(a1,"renderDot",function(t,e){var n;return F.isValidElement(t)?n=F.cloneElement(t,e):Et(t)?n=t(e):n=F.createElement(XS,MI({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function $I(){return $I=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$I.apply(this,arguments)}function jp(t){"@babel/helpers - typeof";return jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jp(t)}function b6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function w6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b6(Object(n),!0).forEach(function(r){o1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wYe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _Ye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dne(r.key),r)}}function jYe(t,e,n){return e&&_Ye(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function NYe(t,e,n){return e=$j(e),SYe(t,une()?Reflect.construct(e,n||[],$j(t).constructor):e.apply(t,n))}function SYe(t,e){if(e&&(jp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EYe(t)}function EYe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function une(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(une=function(){return!!t})()}function $j(t){return $j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$j(t)}function AYe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FI(t,e)}function FI(t,e){return FI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},FI(t,e)}function o1(t,e,n){return e=dne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dne(t){var e=TYe(t,"string");return jp(e)=="symbol"?e:e+""}function TYe(t,e){if(jp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(jp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CYe=function(e,n,r,s,a){var o=a.x1,l=a.x2,c=a.y1,u=a.y2,d=a.xAxis,h=a.yAxis;if(!d||!h)return null;var f=$D({x:d.scale,y:h.scale}),m={x:e?f.x.apply(o,{position:"start"}):f.x.rangeMin,y:r?f.y.apply(c,{position:"start"}):f.y.rangeMin},y={x:n?f.x.apply(l,{position:"end"}):f.x.rangeMax,y:s?f.y.apply(u,{position:"end"}):f.y.rangeMax};return Yo(a,"discard")&&(!f.isInRange(m)||!f.isInRange(y))?null:Xte(m,y)},l1=function(t){function e(){return wYe(this,e),NYe(this,e,arguments)}return AYe(e,t),jYe(e,[{key:"render",value:function(){var r=this.props,s=r.x1,a=r.x2,o=r.y1,l=r.y2,c=r.className,u=r.alwaysShow,d=r.clipPathId;ro(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=zr(s),f=zr(a),m=zr(o),y=zr(l),p=this.props.shape;if(!h&&!f&&!m&&!y&&!p)return null;var v=CYe(h,f,m,y,this.props);if(!v&&!p)return null;var b=Yo(this.props,"hidden")?"url(#".concat(d,")"):void 0;return F.createElement(sn,{className:$t("recharts-reference-area",c)},e.renderRect(p,w6(w6({clipPath:b},vt(this.props,!0)),v)),Zr.renderCallByParent(this.props,v))}}])}(F.Component);o1(l1,"displayName","ReferenceArea");o1(l1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});o1(l1,"renderRect",function(t,e){var n;return F.isValidElement(t)?n=F.cloneElement(t,e):Et(t)?n=t(e):n=F.createElement(LD,$I({},e,{className:"recharts-reference-area-rect"})),n});function hne(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],s=0;s<t.length;s+=e)r.push(t[s]);return r}function PYe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return NGe(r,n)}function IYe(t,e,n){var r=n==="width",s=t.x,a=t.y,o=t.width,l=t.height;return e===1?{start:r?s:a,end:r?s+o:a+l}:{start:r?s+o:a+l,end:r?s:a}}function Fj(t,e,n,r,s){if(t*e<t*r||t*e>t*s)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-s)<=0}function kYe(t,e){return hne(t,e+1)}function RYe(t,e,n,r,s){for(var a=(r||[]).slice(),o=e.start,l=e.end,c=0,u=1,d=o,h=function(){var y=r==null?void 0:r[c];if(y===void 0)return{v:hne(r,u)};var p=c,v,b=function(){return v===void 0&&(v=n(y,p)),v},x=y.coordinate,w=c===0||Fj(t,x,b,d,l);w||(c=0,d=o,u+=1),w&&(d=x+t*(b()/2+s),c+=u)},f;u<=a.length;)if(f=h(),f)return f.v;return[]}function wx(t){"@babel/helpers - typeof";return wx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wx(t)}function _6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function _s(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_6(Object(n),!0).forEach(function(r){OYe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OYe(t,e,n){return e=DYe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DYe(t){var e=MYe(t,"string");return wx(e)=="symbol"?e:e+""}function MYe(t,e){if(wx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(wx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LYe(t,e,n,r,s){for(var a=(r||[]).slice(),o=a.length,l=e.start,c=e.end,u=function(f){var m=a[f],y,p=function(){return y===void 0&&(y=n(m,f)),y};if(f===o-1){var v=t*(m.coordinate+t*p()/2-c);a[f]=m=_s(_s({},m),{},{tickCoord:v>0?m.coordinate-v*t:m.coordinate})}else a[f]=m=_s(_s({},m),{},{tickCoord:m.coordinate});var b=Fj(t,m.tickCoord,p,l,c);b&&(c=m.tickCoord-t*(p()/2+s),a[f]=_s(_s({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return a}function $Ye(t,e,n,r,s,a){var o=(r||[]).slice(),l=o.length,c=e.start,u=e.end;if(a){var d=r[l-1],h=n(d,l-1),f=t*(d.coordinate+t*h/2-u);o[l-1]=d=_s(_s({},d),{},{tickCoord:f>0?d.coordinate-f*t:d.coordinate});var m=Fj(t,d.tickCoord,function(){return h},c,u);m&&(u=d.tickCoord-t*(h/2+s),o[l-1]=_s(_s({},d),{},{isShow:!0}))}for(var y=a?l-1:l,p=function(x){var w=o[x],C,S=function(){return C===void 0&&(C=n(w,x)),C};if(x===0){var P=t*(w.coordinate-t*S()/2-c);o[x]=w=_s(_s({},w),{},{tickCoord:P<0?w.coordinate-P*t:w.coordinate})}else o[x]=w=_s(_s({},w),{},{tickCoord:w.coordinate});var j=Fj(t,w.tickCoord,S,c,u);j&&(c=w.tickCoord+t*(S()/2+s),o[x]=_s(_s({},w),{},{isShow:!0}))},v=0;v<y;v++)p(v);return o}function WD(t,e,n){var r=t.tick,s=t.ticks,a=t.viewBox,o=t.minTickGap,l=t.orientation,c=t.interval,u=t.tickFormatter,d=t.unit,h=t.angle;if(!s||!s.length||!r)return[];if(Ie(c)||Ko.isSsr)return kYe(s,typeof c=="number"&&Ie(c)?c:0);var f=[],m=l==="top"||l==="bottom"?"width":"height",y=d&&m==="width"?qy(d,{fontSize:e,letterSpacing:n}):{width:0,height:0},p=function(w,C){var S=Et(u)?u(w.value,C):w.value;return m==="width"?PYe(qy(S,{fontSize:e,letterSpacing:n}),y,h):qy(S,{fontSize:e,letterSpacing:n})[m]},v=s.length>=2?Hs(s[1].coordinate-s[0].coordinate):1,b=IYe(a,v,m);return c==="equidistantPreserveStart"?RYe(v,b,p,s,o):(c==="preserveStart"||c==="preserveStartEnd"?f=$Ye(v,b,p,s,o,c==="preserveStartEnd"):f=LYe(v,b,p,s,o),f.filter(function(x){return x.isShow}))}var FYe=["viewBox"],VYe=["viewBox"],BYe=["ticks"];function Np(t){"@babel/helpers - typeof";return Np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Np(t)}function Yf(){return Yf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yf.apply(this,arguments)}function j6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Or(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j6(Object(n),!0).forEach(function(r){HD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CA(t,e){if(t==null)return{};var n=UYe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function UYe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function zYe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mne(r.key),r)}}function qYe(t,e,n){return e&&N6(t.prototype,e),n&&N6(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function WYe(t,e,n){return e=Vj(e),HYe(t,fne()?Reflect.construct(e,n||[],Vj(t).constructor):e.apply(t,n))}function HYe(t,e){if(e&&(Np(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KYe(t)}function KYe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fne=function(){return!!t})()}function Vj(t){return Vj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vj(t)}function GYe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VI(t,e)}function VI(t,e){return VI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},VI(t,e)}function HD(t,e,n){return e=mne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mne(t){var e=YYe(t,"string");return Np(e)=="symbol"?e:e+""}function YYe(t,e){if(Np(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Np(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mg=function(t){function e(n){var r;return zYe(this,e),r=WYe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return GYe(e,t),qYe(e,[{key:"shouldComponentUpdate",value:function(r,s){var a=r.viewBox,o=CA(r,FYe),l=this.props,c=l.viewBox,u=CA(l,VYe);return!mm(a,c)||!mm(o,u)||!mm(s,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var s=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var s=this.props,a=s.x,o=s.y,l=s.width,c=s.height,u=s.orientation,d=s.tickSize,h=s.mirror,f=s.tickMargin,m,y,p,v,b,x,w=h?-1:1,C=r.tickSize||d,S=Ie(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":m=y=r.coordinate,v=o+ +!h*c,p=v-w*C,x=p-w*f,b=S;break;case"left":p=v=r.coordinate,y=a+ +!h*l,m=y-w*C,b=m-w*f,x=S;break;case"right":p=v=r.coordinate,y=a+ +h*l,m=y+w*C,b=m+w*f,x=S;break;default:m=y=r.coordinate,v=o+ +h*c,p=v+w*C,x=p+w*f,b=S;break}return{line:{x1:m,y1:p,x2:y,y2:v},tick:{x:b,y:x}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,s=r.orientation,a=r.mirror,o;switch(s){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,s=r.orientation,a=r.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.x,a=r.y,o=r.width,l=r.height,c=r.orientation,u=r.mirror,d=r.axisLine,h=Or(Or(Or({},vt(this.props,!1)),vt(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!u||c==="bottom"&&u);h=Or(Or({},h),{},{x1:s,y1:a+f*l,x2:s+o,y2:a+f*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);h=Or(Or({},h),{},{x1:s+m*o,y1:a,x2:s+m*o,y2:a+l})}return F.createElement("line",Yf({},h,{className:$t("recharts-cartesian-axis-line",Vi(d,"className"))}))}},{key:"renderTicks",value:function(r,s,a){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,h=l.tickFormatter,f=l.unit,m=WD(Or(Or({},this.props),{},{ticks:r}),s,a),y=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),v=vt(this.props,!1),b=vt(d,!1),x=Or(Or({},v),{},{fill:"none"},vt(c,!1)),w=m.map(function(C,S){var P=o.getTickLineCoord(C),j=P.line,g=P.tick,T=Or(Or(Or(Or({textAnchor:y,verticalAnchor:p},v),{},{stroke:"none",fill:u},b),g),{},{index:S,payload:C,visibleTicksCount:m.length,tickFormatter:h});return F.createElement(sn,Yf({className:"recharts-cartesian-axis-tick",key:"tick-".concat(C.value,"-").concat(C.coordinate,"-").concat(C.tickCoord)},Mh(o.props,C,S)),c&&F.createElement("line",Yf({},x,j,{className:$t("recharts-cartesian-axis-tick-line",Vi(c,"className"))})),d&&e.renderTickItem(d,T,"".concat(Et(h)?h(C.value,S):C.value).concat(f||"")))});return F.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var r=this,s=this.props,a=s.axisLine,o=s.width,l=s.height,c=s.ticksGenerator,u=s.className,d=s.hide;if(d)return null;var h=this.props,f=h.ticks,m=CA(h,BYe),y=f;return Et(c)&&(y=f&&f.length>0?c(this.props):c(m)),o<=0||l<=0||!y||!y.length?null:F.createElement(sn,{className:$t("recharts-cartesian-axis",u),ref:function(v){r.layerReference=v}},a&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),Zr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,s,a){var o,l=$t(s.className,"recharts-cartesian-axis-tick-value");return F.isValidElement(r)?o=F.cloneElement(r,Or(Or({},s),{},{className:l})):Et(r)?o=r(Or(Or({},s),{},{className:l})):o=F.createElement(Lh,Yf({},s,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])}(_.Component);HD(mg,"displayName","CartesianAxis");HD(mg,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var QYe=["x1","y1","x2","y2","key"],XYe=["offset"];function Vh(t){"@babel/helpers - typeof";return Vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vh(t)}function S6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Cs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S6(Object(n),!0).forEach(function(r){ZYe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZYe(t,e,n){return e=JYe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JYe(t){var e=eQe(t,"string");return Vh(e)=="symbol"?e:e+""}function eQe(t,e){if(Vh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Vh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qd(){return qd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qd.apply(this,arguments)}function E6(t,e){if(t==null)return{};var n=tQe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function tQe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var nQe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,s=e.x,a=e.y,o=e.width,l=e.height,c=e.ry;return F.createElement("rect",{x:s,y:a,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function pne(t,e){var n;if(F.isValidElement(t))n=F.cloneElement(t,e);else if(Et(t))n=t(e);else{var r=e.x1,s=e.y1,a=e.x2,o=e.y2,l=e.key,c=E6(e,QYe),u=vt(c,!1);u.offset;var d=E6(u,XYe);n=F.createElement("line",qd({},d,{x1:r,y1:s,x2:a,y2:o,fill:"none",key:l}))}return n}function rQe(t){var e=t.x,n=t.width,r=t.horizontal,s=r===void 0?!0:r,a=t.horizontalPoints;if(!s||!a||!a.length)return null;var o=a.map(function(l,c){var u=Cs(Cs({},t),{},{x1:e,y1:l,x2:e+n,y2:l,key:"line-".concat(c),index:c});return pne(s,u)});return F.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function sQe(t){var e=t.y,n=t.height,r=t.vertical,s=r===void 0?!0:r,a=t.verticalPoints;if(!s||!a||!a.length)return null;var o=a.map(function(l,c){var u=Cs(Cs({},t),{},{x1:l,y1:e,x2:l,y2:e+n,key:"line-".concat(c),index:c});return pne(s,u)});return F.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function iQe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,s=t.y,a=t.width,o=t.height,l=t.horizontalPoints,c=t.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var d=l.map(function(f){return Math.round(f+s-s)}).sort(function(f,m){return f-m});s!==d[0]&&d.unshift(0);var h=d.map(function(f,m){var y=!d[m+1],p=y?s+o-f:d[m+1]-f;if(p<=0)return null;var v=m%e.length;return F.createElement("rect",{key:"react-".concat(m),y:f,x:r,height:p,width:a,stroke:"none",fill:e[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return F.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function aQe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,s=t.fillOpacity,a=t.x,o=t.y,l=t.width,c=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(f){return Math.round(f+a-a)}).sort(function(f,m){return f-m});a!==d[0]&&d.unshift(0);var h=d.map(function(f,m){var y=!d[m+1],p=y?a+l-f:d[m+1]-f;if(p<=0)return null;var v=m%r.length;return F.createElement("rect",{key:"react-".concat(m),x:f,y:o,width:p,height:c,stroke:"none",fill:r[v],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return F.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var oQe=function(e,n){var r=e.xAxis,s=e.width,a=e.height,o=e.offset;return dte(WD(Cs(Cs(Cs({},mg.defaultProps),r),{},{ticks:Al(r,!0),viewBox:{x:0,y:0,width:s,height:a}})),o.left,o.left+o.width,n)},lQe=function(e,n){var r=e.yAxis,s=e.width,a=e.height,o=e.offset;return dte(WD(Cs(Cs(Cs({},mg.defaultProps),r),{},{ticks:Al(r,!0),viewBox:{x:0,y:0,width:s,height:a}})),o.top,o.top+o.height,n)},yf={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function gne(t){var e,n,r,s,a,o,l=BD(),c=UD(),u=YGe(),d=Cs(Cs({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:yf.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:yf.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:yf.horizontal,horizontalFill:(s=t.horizontalFill)!==null&&s!==void 0?s:yf.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:yf.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:yf.verticalFill,x:Ie(t.x)?t.x:u.left,y:Ie(t.y)?t.y:u.top,width:Ie(t.width)?t.width:u.width,height:Ie(t.height)?t.height:u.height}),h=d.x,f=d.y,m=d.width,y=d.height,p=d.syncWithTicks,v=d.horizontalValues,b=d.verticalValues,x=HGe(),w=KGe();if(!Ie(m)||m<=0||!Ie(y)||y<=0||!Ie(h)||h!==+h||!Ie(f)||f!==+f)return null;var C=d.verticalCoordinatesGenerator||oQe,S=d.horizontalCoordinatesGenerator||lQe,P=d.horizontalPoints,j=d.verticalPoints;if((!P||!P.length)&&Et(S)){var g=v&&v.length,T=S({yAxis:w?Cs(Cs({},w),{},{ticks:g?v:w.ticks}):void 0,width:l,height:c,offset:u},g?!0:p);ro(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Vh(T),"]")),Array.isArray(T)&&(P=T)}if((!j||!j.length)&&Et(C)){var E=b&&b.length,A=C({xAxis:x?Cs(Cs({},x),{},{ticks:E?b:x.ticks}):void 0,width:l,height:c,offset:u},E?!0:p);ro(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Vh(A),"]")),Array.isArray(A)&&(j=A)}return F.createElement("g",{className:"recharts-cartesian-grid"},F.createElement(nQe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),F.createElement(rQe,qd({},d,{offset:u,horizontalPoints:P,xAxis:x,yAxis:w})),F.createElement(sQe,qd({},d,{offset:u,verticalPoints:j,xAxis:x,yAxis:w})),F.createElement(iQe,qd({},d,{horizontalPoints:P})),F.createElement(aQe,qd({},d,{verticalPoints:j})))}gne.displayName="CartesianGrid";var cQe=["layout","type","stroke","connectNulls","isRange","ref"],uQe=["key"],yne;function Sp(t){"@babel/helpers - typeof";return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sp(t)}function vne(t,e){if(t==null)return{};var n=dQe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function dQe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Wd(){return Wd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wd.apply(this,arguments)}function A6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Pc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A6(Object(n),!0).forEach(function(r){Oo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hQe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bne(r.key),r)}}function fQe(t,e,n){return e&&T6(t.prototype,e),n&&T6(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function mQe(t,e,n){return e=Bj(e),pQe(t,xne()?Reflect.construct(e,n||[],Bj(t).constructor):e.apply(t,n))}function pQe(t,e){if(e&&(Sp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gQe(t)}function gQe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xne=function(){return!!t})()}function Bj(t){return Bj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bj(t)}function yQe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BI(t,e)}function BI(t,e){return BI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},BI(t,e)}function Oo(t,e,n){return e=bne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bne(t){var e=vQe(t,"string");return Sp(e)=="symbol"?e:e+""}function vQe(t,e){if(Sp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Sp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tc=function(t){function e(){var n;hQe(this,e);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=mQe(this,e,[].concat(s)),Oo(n,"state",{isAnimationFinished:!0}),Oo(n,"id",og("recharts-area-")),Oo(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Et(o)&&o()}),Oo(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Et(o)&&o()}),n}return yQe(e,t),fQe(e,[{key:"renderDots",value:function(r,s,a){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,d=c.points,h=c.dataKey,f=vt(this.props,!1),m=vt(u,!0),y=d.map(function(v,b){var x=Pc(Pc(Pc({key:"dot-".concat(b),r:3},f),m),{},{index:b,cx:v.x,cy:v.y,dataKey:h,value:v.value,payload:v.payload,points:d});return e.renderDotItem(u,x)}),p={clipPath:r?"url(#clipPath-".concat(s?"":"dots-").concat(a,")"):null};return F.createElement(sn,Wd({className:"recharts-area-dots"},p),y)}},{key:"renderHorizontalRect",value:function(r){var s=this.props,a=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].x,u=o[o.length-1].x,d=r*Math.abs(c-u),h=au(o.map(function(f){return f.y||0}));return Ie(a)&&typeof a=="number"?h=Math.max(a,h):a&&Array.isArray(a)&&a.length&&(h=Math.max(au(a.map(function(f){return f.y||0})),h)),Ie(h)?F.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(h+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var s=this.props,a=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].y,u=o[o.length-1].y,d=r*Math.abs(c-u),h=au(o.map(function(f){return f.x||0}));return Ie(a)&&typeof a=="number"?h=Math.max(a,h):a&&Array.isArray(a)&&a.length&&(h=Math.max(au(a.map(function(f){return f.x||0})),h)),Ie(h)?F.createElement("rect",{x:0,y:c<u?c:c-d,width:h+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(r){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,s,a,o){var l=this.props,c=l.layout,u=l.type,d=l.stroke,h=l.connectNulls,f=l.isRange;l.ref;var m=vne(l,cQe);return F.createElement(sn,{clipPath:a?"url(#clipPath-".concat(o,")"):null},F.createElement(vm,Wd({},vt(m,!0),{points:r,connectNulls:h,type:u,baseLine:s,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&F.createElement(vm,Wd({},vt(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:r})),d!=="none"&&f&&F.createElement(vm,Wd({},vt(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(r,s){var a=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,h=o.animationDuration,f=o.animationEasing,m=o.animationId,y=this.state,p=y.prevPoints,v=y.prevBaseLine;return F.createElement(tl,{begin:d,duration:h,isActive:u,easing:f,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var x=b.t;if(p){var w=p.length/l.length,C=l.map(function(g,T){var E=Math.floor(T*w);if(p[E]){var A=p[E],I=ui(A.x,g.x),k=ui(A.y,g.y);return Pc(Pc({},g),{},{x:I(x),y:k(x)})}return g}),S;if(Ie(c)&&typeof c=="number"){var P=ui(v,c);S=P(x)}else if(Ft(c)||ag(c)){var j=ui(v,0);S=j(x)}else S=c.map(function(g,T){var E=Math.floor(T*w);if(v[E]){var A=v[E],I=ui(A.x,g.x),k=ui(A.y,g.y);return Pc(Pc({},g),{},{x:I(x),y:k(x)})}return g});return a.renderAreaStatically(C,S,r,s)}return F.createElement(sn,null,F.createElement("defs",null,F.createElement("clipPath",{id:"animationClipPath-".concat(s)},a.renderClipRect(x))),F.createElement(sn,{clipPath:"url(#animationClipPath-".concat(s,")")},a.renderAreaStatically(l,c,r,s)))})}},{key:"renderArea",value:function(r,s){var a=this.props,o=a.points,l=a.baseLine,c=a.isAnimationActive,u=this.state,d=u.prevPoints,h=u.prevBaseLine,f=u.totalLength;return c&&o&&o.length&&(!d&&f>0||!hp(d,o)||!hp(h,l))?this.renderAreaWithAnimation(r,s):this.renderAreaStatically(o,l,r,s)}},{key:"render",value:function(){var r,s=this.props,a=s.hide,o=s.dot,l=s.points,c=s.className,u=s.top,d=s.left,h=s.xAxis,f=s.yAxis,m=s.width,y=s.height,p=s.isAnimationActive,v=s.id;if(a||!l||!l.length)return null;var b=this.state.isAnimationFinished,x=l.length===1,w=$t("recharts-area",c),C=h&&h.allowDataOverflow,S=f&&f.allowDataOverflow,P=C||S,j=Ft(v)?this.id:v,g=(r=vt(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},T=g.r,E=T===void 0?3:T,A=g.strokeWidth,I=A===void 0?2:A,k=WOe(o)?o:{},L=k.clipDot,V=L===void 0?!0:L,B=E*2+I;return F.createElement(sn,{className:w},C||S?F.createElement("defs",null,F.createElement("clipPath",{id:"clipPath-".concat(j)},F.createElement("rect",{x:C?d:d-m/2,y:S?u:u-y/2,width:C?m:m*2,height:S?y:y*2})),!V&&F.createElement("clipPath",{id:"clipPath-dots-".concat(j)},F.createElement("rect",{x:d-B/2,y:u-B/2,width:m+B,height:y+B}))):null,x?null:this.renderArea(P,j),(o||x)&&this.renderDots(P,V,j),(!p||b)&&Ol.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:r.points!==s.curPoints||r.baseLine!==s.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(_.PureComponent);yne=tc;Oo(tc,"displayName","Area");Oo(tc,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Ko.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Oo(tc,"getBaseValue",function(t,e,n,r){var s=t.layout,a=t.baseValue,o=e.props.baseValue,l=o??a;if(Ie(l)&&typeof l=="number")return l;var c=s==="horizontal"?r:n,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),h=Math.min(u[0],u[1]);return l==="dataMin"?h:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});Oo(tc,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,s=t.yAxis,a=t.xAxisTicks,o=t.yAxisTicks,l=t.bandSize,c=t.dataKey,u=t.stackedData,d=t.dataStartIndex,h=t.displayedData,f=t.offset,m=e.layout,y=u&&u.length,p=yne.getBaseValue(e,n,r,s),v=m==="horizontal",b=!1,x=h.map(function(C,S){var P;y?P=u[d+S]:(P=Vr(C,c),Array.isArray(P)?b=!0:P=[p,P]);var j=P[1]==null||y&&Vr(C,c)==null;return v?{x:J5({axis:r,ticks:a,bandSize:l,entry:C,index:S}),y:j?null:s.scale(P[1]),value:P,payload:C}:{x:j?null:r.scale(P[1]),y:J5({axis:s,ticks:o,bandSize:l,entry:C,index:S}),value:P,payload:C}}),w;return y||b?w=x.map(function(C){var S=Array.isArray(C.value)?C.value[0]:null;return v?{x:C.x,y:S!=null&&C.y!=null?s.scale(S):null}:{x:S!=null?r.scale(S):null,y:C.y}}):w=v?s.scale(p):r.scale(p),Pc({points:x,baseLine:w,layout:m,isRange:b},f)});Oo(tc,"renderDotItem",function(t,e){var n;if(F.isValidElement(t))n=F.cloneElement(t,e);else if(Et(t))n=t(e);else{var r=$t("recharts-area-dot",typeof t!="boolean"?t.className:""),s=e.key,a=vne(e,uQe);n=F.createElement(XS,Wd({},a,{key:s,className:r}))}return n});function Ep(t){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ep(t)}function xQe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bQe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jne(r.key),r)}}function wQe(t,e,n){return e&&bQe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _Qe(t,e,n){return e=Uj(e),jQe(t,wne()?Reflect.construct(e,n||[],Uj(t).constructor):e.apply(t,n))}function jQe(t,e){if(e&&(Ep(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NQe(t)}function NQe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wne=function(){return!!t})()}function Uj(t){return Uj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Uj(t)}function SQe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UI(t,e)}function UI(t,e){return UI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},UI(t,e)}function _ne(t,e,n){return e=jne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jne(t){var e=EQe(t,"string");return Ep(e)=="symbol"?e:e+""}function EQe(t,e){if(Ep(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ep(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zI(){return zI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zI.apply(this,arguments)}function AQe(t){var e=t.xAxisId,n=BD(),r=UD(),s=sne(e);return s==null?null:_.createElement(mg,zI({},s,{className:$t("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return Al(o,!0)}}))}var Ap=function(t){function e(){return xQe(this,e),_Qe(this,e,arguments)}return SQe(e,t),wQe(e,[{key:"render",value:function(){return _.createElement(AQe,this.props)}}])}(_.Component);_ne(Ap,"displayName","XAxis");_ne(Ap,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Tp(t){"@babel/helpers - typeof";return Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tp(t)}function TQe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CQe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ene(r.key),r)}}function PQe(t,e,n){return e&&CQe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function IQe(t,e,n){return e=zj(e),kQe(t,Nne()?Reflect.construct(e,n||[],zj(t).constructor):e.apply(t,n))}function kQe(t,e){if(e&&(Tp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RQe(t)}function RQe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nne=function(){return!!t})()}function zj(t){return zj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zj(t)}function OQe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qI(t,e)}function qI(t,e){return qI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},qI(t,e)}function Sne(t,e,n){return e=Ene(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ene(t){var e=DQe(t,"string");return Tp(e)=="symbol"?e:e+""}function DQe(t,e){if(Tp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Tp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WI(){return WI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WI.apply(this,arguments)}var MQe=function(e){var n=e.yAxisId,r=BD(),s=UD(),a=ine(n);return a==null?null:_.createElement(mg,WI({},a,{className:$t("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:s},ticksGenerator:function(l){return Al(l,!0)}}))},Cp=function(t){function e(){return TQe(this,e),IQe(this,e,arguments)}return OQe(e,t),PQe(e,[{key:"render",value:function(){return _.createElement(MQe,this.props)}}])}(_.Component);Sne(Cp,"displayName","YAxis");Sne(Cp,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function C6(t){return VQe(t)||FQe(t)||$Qe(t)||LQe()}function LQe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Qe(t,e){if(t){if(typeof t=="string")return HI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HI(t,e)}}function FQe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function VQe(t){if(Array.isArray(t))return HI(t)}function HI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var KI=function(e,n,r,s,a){var o=ha(e,qD),l=ha(e,a1),c=[].concat(C6(o),C6(l)),u=ha(e,l1),d="".concat(s,"Id"),h=s[0],f=n;if(c.length&&(f=c.reduce(function(p,v){if(v.props[d]===r&&Yo(v.props,"extendDomain")&&Ie(v.props[h])){var b=v.props[h];return[Math.min(p[0],b),Math.max(p[1],b)]}return p},f)),u.length){var m="".concat(h,"1"),y="".concat(h,"2");f=u.reduce(function(p,v){if(v.props[d]===r&&Yo(v.props,"extendDomain")&&Ie(v.props[m])&&Ie(v.props[y])){var b=v.props[m],x=v.props[y];return[Math.min(p[0],b,x),Math.max(p[1],b,x)]}return p},f)}return a&&a.length&&(f=a.reduce(function(p,v){return Ie(v)?[Math.min(p[0],v),Math.max(p[1],v)]:p},f)),f},Ane={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function a(c,u,d,h,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new s(d,h||c,f),y=n?n+u:u;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],m]:c._events[y].push(m):(c._events[y]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)e.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,m=h.length,y=new Array(m);f<m;f++)y[f]=h[f].fn;return y},l.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},l.prototype.emit=function(u,d,h,f,m,y){var p=n?n+u:u;if(!this._events[p])return!1;var v=this._events[p],b=arguments.length,x,w;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),b){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,h),!0;case 4:return v.fn.call(v.context,d,h,f),!0;case 5:return v.fn.call(v.context,d,h,f,m),!0;case 6:return v.fn.call(v.context,d,h,f,m,y),!0}for(w=1,x=new Array(b-1);w<b;w++)x[w-1]=arguments[w];v.fn.apply(v.context,x)}else{var C=v.length,S;for(w=0;w<C;w++)switch(v[w].once&&this.removeListener(u,v[w].fn,void 0,!0),b){case 1:v[w].fn.call(v[w].context);break;case 2:v[w].fn.call(v[w].context,d);break;case 3:v[w].fn.call(v[w].context,d,h);break;case 4:v[w].fn.call(v[w].context,d,h,f);break;default:if(!x)for(S=1,x=new Array(b-1);S<b;S++)x[S-1]=arguments[S];v[w].fn.apply(v[w].context,x)}}return!0},l.prototype.on=function(u,d,h){return a(this,u,d,h,!1)},l.prototype.once=function(u,d,h){return a(this,u,d,h,!0)},l.prototype.removeListener=function(u,d,h,f){var m=n?n+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var y=this._events[m];if(y.fn)y.fn===d&&(!f||y.once)&&(!h||y.context===h)&&o(this,m);else{for(var p=0,v=[],b=y.length;p<b;p++)(y[p].fn!==d||f&&!y[p].once||h&&y[p].context!==h)&&v.push(y[p]);v.length?this._events[m]=v.length===1?v[0]:v:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(Ane);var BQe=Ane.exports;const UQe=xn(BQe);var PA=new UQe,IA="recharts.syncMouseEvents";function _x(t){"@babel/helpers - typeof";return _x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_x(t)}function zQe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qQe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Tne(r.key),r)}}function WQe(t,e,n){return e&&qQe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function kA(t,e,n){return e=Tne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tne(t){var e=HQe(t,"string");return _x(e)=="symbol"?e:e+""}function HQe(t,e){if(_x(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_x(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var KQe=function(){function t(){zQe(this,t),kA(this,"activeIndex",0),kA(this,"coordinateList",[]),kA(this,"layout","horizontal")}return WQe(t,[{key:"setDetails",value:function(n){var r,s=n.coordinateList,a=s===void 0?null:s,o=n.container,l=o===void 0?null:o,c=n.layout,u=c===void 0?null:c,d=n.offset,h=d===void 0?null:d,f=n.mouseHandlerCallback,m=f===void 0?null:f;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),a=s.x,o=s.y,l=s.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,h=a+c+u,f=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:h,pageY:f})}}}])}();function GQe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],s=t==null?void 0:t[1];if(r&&s&&Ie(r)&&Ie(s))return!0}return!1}function YQe(t,e,n,r){var s=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-s:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-s,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function Cne(t){var e=t.cx,n=t.cy,r=t.radius,s=t.startAngle,a=t.endAngle,o=Ln(e,n,r,s),l=Ln(e,n,r,a);return{points:[o,l],cx:e,cy:n,radius:r,startAngle:s,endAngle:a}}function QQe(t,e,n){var r,s,a,o;if(t==="horizontal")r=e.x,a=r,s=n.top,o=n.top+n.height;else if(t==="vertical")s=e.y,o=s,r=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,u=e.innerRadius,d=e.outerRadius,h=e.angle,f=Ln(l,c,u,h),m=Ln(l,c,d,h);r=f.x,s=f.y,a=m.x,o=m.y}else return Cne(e);return[{x:r,y:s},{x:a,y:o}]}function jx(t){"@babel/helpers - typeof";return jx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jx(t)}function P6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function R0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P6(Object(n),!0).forEach(function(r){XQe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function XQe(t,e,n){return e=ZQe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZQe(t){var e=JQe(t,"string");return jx(e)=="symbol"?e:e+""}function JQe(t,e){if(jx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(jx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eXe(t){var e,n,r=t.element,s=t.tooltipEventType,a=t.isActive,o=t.activeCoordinate,l=t.activePayload,c=t.offset,u=t.activeTooltipIndex,d=t.tooltipAxisBandSize,h=t.layout,f=t.chartName,m=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!m||!a||!o||f!=="ScatterChart"&&s!=="axis")return null;var y,p=vm;if(f==="ScatterChart")y=o,p=_He;else if(f==="BarChart")y=YQe(h,o,c,d),p=LD;else if(h==="radial"){var v=Cne(o),b=v.cx,x=v.cy,w=v.radius,C=v.startAngle,S=v.endAngle;y={cx:b,cy:x,startAngle:C,endAngle:S,innerRadius:w,outerRadius:w},p=_te}else y={points:QQe(h,o,c)},p=vm;var P=R0(R0(R0(R0({stroke:"#ccc",pointerEvents:"none"},c),y),vt(m,!1)),{},{payload:l,payloadIndex:u,className:$t("recharts-tooltip-cursor",m.className)});return _.isValidElement(m)?_.cloneElement(m,P):_.createElement(p,P)}var tXe=["item"],nXe=["children","className","width","height","style","compact","title","desc"];function Pp(t){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pp(t)}function Qf(){return Qf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qf.apply(this,arguments)}function I6(t,e){return iXe(t)||sXe(t,e)||Ine(t,e)||rXe()}function rXe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sXe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function iXe(t){if(Array.isArray(t))return t}function k6(t,e){if(t==null)return{};var n=aXe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function aXe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function oXe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lXe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kne(r.key),r)}}function cXe(t,e,n){return e&&lXe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function uXe(t,e,n){return e=qj(e),dXe(t,Pne()?Reflect.construct(e,n||[],qj(t).constructor):e.apply(t,n))}function dXe(t,e){if(e&&(Pp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hXe(t)}function hXe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pne(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Pne=function(){return!!t})()}function qj(t){return qj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qj(t)}function fXe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GI(t,e)}function GI(t,e){return GI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},GI(t,e)}function Ip(t){return gXe(t)||pXe(t)||Ine(t)||mXe()}function mXe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ine(t,e){if(t){if(typeof t=="string")return YI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YI(t,e)}}function pXe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gXe(t){if(Array.isArray(t))return YI(t)}function YI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function R6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ye(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R6(Object(n),!0).forEach(function(r){_t(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _t(t,e,n){return e=kne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kne(t){var e=yXe(t,"string");return Pp(e)=="symbol"?e:e+""}function yXe(t,e){if(Pp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Pp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vXe={xAxis:["bottom","top"],yAxis:["left","right"]},xXe={width:"100%",height:"100%"},Rne={x:0,y:0};function O0(t){return t}var bXe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},wXe=function(e,n,r,s){var a=n.find(function(d){return d&&d.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:s.y};if(e==="vertical")return{x:s.x,y:a.coordinate};if(e==="centric"){var o=a.coordinate,l=s.radius;return ye(ye(ye({},s),Ln(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var c=a.coordinate,u=s.angle;return ye(ye(ye({},s),Ln(s.cx,s.cy,c,u)),{},{angle:u,radius:c})}return Rne},c1=function(e,n){var r=n.graphicalItems,s=n.dataStartIndex,a=n.dataEndIndex,o=(r??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Ip(l),Ip(u)):l},[]);return o.length>0?o:e&&e.length&&Ie(s)&&Ie(a)?e.slice(s,a+1):[]};function One(t){return t==="number"?[0,"auto"]:void 0}var QI=function(e,n,r,s){var a=e.graphicalItems,o=e.tooltipAxis,l=c1(n,e);return r<0||!a||!a.length||r>=l.length?null:a.reduce(function(c,u){var d,h=(d=u.props.data)!==null&&d!==void 0?d:n;h&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(h=h.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(o.dataKey&&!o.allowDuplicatedCategory){var m=h===void 0?l:h;f=W_(m,o.dataKey,s)}else f=h&&h[r]||l[r];return f?[].concat(Ip(c),[gte(u,f)]):c},[])},O6=function(e,n,r,s){var a=s||{x:e.chartX,y:e.chartY},o=bXe(a,r),l=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,d=H9e(o,l,u,c);if(d>=0&&u){var h=u[d]&&u[d].value,f=QI(e,n,d,h),m=wXe(r,l,d,a);return{activeTooltipIndex:d,activeLabel:h,activePayload:f,activeCoordinate:m}}return null},_Xe=function(e,n){var r=n.axes,s=n.graphicalItems,a=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,h=e.children,f=e.stackOffset,m=ute(d,a);return r.reduce(function(y,p){var v,b=p.type.defaultProps!==void 0?ye(ye({},p.type.defaultProps),p.props):p.props,x=b.type,w=b.dataKey,C=b.allowDataOverflow,S=b.allowDuplicatedCategory,P=b.scale,j=b.ticks,g=b.includeHidden,T=b[o];if(y[T])return y;var E=c1(e.data,{graphicalItems:s.filter(function(ae){var Ae,ie=o in ae.props?ae.props[o]:(Ae=ae.type.defaultProps)===null||Ae===void 0?void 0:Ae[o];return ie===T}),dataStartIndex:c,dataEndIndex:u}),A=E.length,I,k,L;GQe(b.domain,C,x)&&(I=dI(b.domain,null,C),m&&(x==="number"||P!=="auto")&&(L=Hy(E,w,"category")));var V=One(x);if(!I||I.length===0){var B,M=(B=b.domain)!==null&&B!==void 0?B:V;if(w){if(I=Hy(E,w,x),x==="category"&&m){var $=DOe(I);S&&$?(k=I,I=Ij(0,A)):S||(I=rU(M,I,p).reduce(function(ae,Ae){return ae.indexOf(Ae)>=0?ae:[].concat(Ip(ae),[Ae])},[]))}else if(x==="category")S?I=I.filter(function(ae){return ae!==""&&!Ft(ae)}):I=rU(M,I,p).reduce(function(ae,Ae){return ae.indexOf(Ae)>=0||Ae===""||Ft(Ae)?ae:[].concat(Ip(ae),[Ae])},[]);else if(x==="number"){var O=X9e(E,s.filter(function(ae){var Ae,ie,pe=o in ae.props?ae.props[o]:(Ae=ae.type.defaultProps)===null||Ae===void 0?void 0:Ae[o],Ue="hide"in ae.props?ae.props.hide:(ie=ae.type.defaultProps)===null||ie===void 0?void 0:ie.hide;return pe===T&&(g||!Ue)}),w,a,d);O&&(I=O)}m&&(x==="number"||P!=="auto")&&(L=Hy(E,w,"category"))}else m?I=Ij(0,A):l&&l[T]&&l[T].hasStack&&x==="number"?I=f==="expand"?[0,1]:pte(l[T].stackGroups,c,u):I=cte(E,s.filter(function(ae){var Ae=o in ae.props?ae.props[o]:ae.type.defaultProps[o],ie="hide"in ae.props?ae.props.hide:ae.type.defaultProps.hide;return Ae===T&&(g||!ie)}),x,d,!0);if(x==="number")I=KI(h,I,T,a,j),M&&(I=dI(M,I,C));else if(x==="category"&&M){var W=M,Z=I.every(function(ae){return W.indexOf(ae)>=0});Z&&(I=W)}}return ye(ye({},y),{},_t({},T,ye(ye({},b),{},{axisType:a,domain:I,categoricalDomain:L,duplicateDomain:k,originalDomain:(v=b.domain)!==null&&v!==void 0?v:V,isCategorical:m,layout:d})))},{})},jXe=function(e,n){var r=n.graphicalItems,s=n.Axis,a=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,h=e.children,f=c1(e.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),m=f.length,y=ute(d,a),p=-1;return r.reduce(function(v,b){var x=b.type.defaultProps!==void 0?ye(ye({},b.type.defaultProps),b.props):b.props,w=x[o],C=One("number");if(!v[w]){p++;var S;return y?S=Ij(0,m):l&&l[w]&&l[w].hasStack?(S=pte(l[w].stackGroups,c,u),S=KI(h,S,w,a)):(S=dI(C,cte(f,r.filter(function(P){var j,g,T=o in P.props?P.props[o]:(j=P.type.defaultProps)===null||j===void 0?void 0:j[o],E="hide"in P.props?P.props.hide:(g=P.type.defaultProps)===null||g===void 0?void 0:g.hide;return T===w&&!E}),"number",d),s.defaultProps.allowDataOverflow),S=KI(h,S,w,a)),ye(ye({},v),{},_t({},w,ye(ye({axisType:a},s.defaultProps),{},{hide:!0,orientation:Vi(vXe,"".concat(a,".").concat(p%2),null),domain:S,originalDomain:C,isCategorical:y,layout:d})))}return v},{})},NXe=function(e,n){var r=n.axisType,s=r===void 0?"xAxis":r,a=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.children,h="".concat(s,"Id"),f=ha(d,a),m={};return f&&f.length?m=_Xe(e,{axes:f,graphicalItems:o,axisType:s,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=jXe(e,{Axis:a,graphicalItems:o,axisType:s,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},SXe=function(e){var n=zc(e),r=Al(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:uD(r,function(s){return s.coordinate}),tooltipAxis:n,tooltipAxisBandSize:xj(n,r)}},D6=function(e){var n=e.children,r=e.defaultShowTooltip,s=Ti(n,xp),a=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(a=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},EXe=function(e){return!e||!e.length?!1:e.some(function(n){var r=kl(n&&n.type);return r&&r.indexOf("Bar")>=0})},M6=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},AXe=function(e,n){var r=e.props,s=e.graphicalItems,a=e.xAxisMap,o=a===void 0?{}:a,l=e.yAxisMap,c=l===void 0?{}:l,u=r.width,d=r.height,h=r.children,f=r.margin||{},m=Ti(h,xp),y=Ti(h,pm),p=Object.keys(c).reduce(function(S,P){var j=c[P],g=j.orientation;return!j.mirror&&!j.hide?ye(ye({},S),{},_t({},g,S[g]+j.width)):S},{left:f.left||0,right:f.right||0}),v=Object.keys(o).reduce(function(S,P){var j=o[P],g=j.orientation;return!j.mirror&&!j.hide?ye(ye({},S),{},_t({},g,Vi(S,"".concat(g))+j.height)):S},{top:f.top||0,bottom:f.bottom||0}),b=ye(ye({},v),p),x=b.bottom;m&&(b.bottom+=m.props.height||xp.defaultProps.height),y&&n&&(b=Y9e(b,s,r,n));var w=u-b.left-b.right,C=d-b.top-b.bottom;return ye(ye({brushBottom:x},b),{},{width:Math.max(w,0),height:Math.max(C,0)})},TXe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},KD=function(e){var n=e.chartName,r=e.GraphicalChild,s=e.defaultTooltipEventType,a=s===void 0?"axis":s,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,h=e.defaultProps,f=function(b,x){var w=x.graphicalItems,C=x.stackGroups,S=x.offset,P=x.updateId,j=x.dataStartIndex,g=x.dataEndIndex,T=b.barSize,E=b.layout,A=b.barGap,I=b.barCategoryGap,k=b.maxBarSize,L=M6(E),V=L.numericAxisName,B=L.cateAxisName,M=EXe(w),$=[];return w.forEach(function(O,W){var Z=c1(b.data,{graphicalItems:[O],dataStartIndex:j,dataEndIndex:g}),ae=O.type.defaultProps!==void 0?ye(ye({},O.type.defaultProps),O.props):O.props,Ae=ae.dataKey,ie=ae.maxBarSize,pe=ae["".concat(V,"Id")],Ue=ae["".concat(B,"Id")],Ne={},nt=c.reduce(function(oe,me){var Le=x["".concat(me.axisType,"Map")],$e=ae["".concat(me.axisType,"Id")];Le&&Le[$e]||me.axisType==="zAxis"||Fh();var Pe=Le[$e];return ye(ye({},oe),{},_t(_t({},me.axisType,Pe),"".concat(me.axisType,"Ticks"),Al(Pe)))},Ne),fe=nt[B],_e=nt["".concat(B,"Ticks")],ge=C&&C[pe]&&C[pe].hasStack&&aqe(O,C[pe].stackGroups),ce=kl(O.type).indexOf("Bar")>=0,He=xj(fe,_e),rt=[],zt=M&&K9e({barSize:T,stackGroups:C,totalSize:TXe(nt,B)});if(ce){var nn,En,Hr=Ft(ie)?k:ie,on=(nn=(En=xj(fe,_e,!0))!==null&&En!==void 0?En:Hr)!==null&&nn!==void 0?nn:0;rt=G9e({barGap:A,barCategoryGap:I,bandSize:on!==He?on:He,sizeList:zt[Ue],maxBarSize:Hr}),on!==He&&(rt=rt.map(function(oe){return ye(ye({},oe),{},{position:ye(ye({},oe.position),{},{offset:oe.position.offset-on/2})})}))}var K=O&&O.type&&O.type.getComposedData;K&&$.push({props:ye(ye({},K(ye(ye({},nt),{},{displayedData:Z,props:b,dataKey:Ae,item:O,bandSize:He,barPosition:rt,offset:S,stackedData:ge,layout:E,dataStartIndex:j,dataEndIndex:g}))),{},_t(_t(_t({key:O.key||"item-".concat(W)},V,nt[V]),B,nt[B]),"animationId",P)),childIndex:GOe(O,b.children),item:O})}),$},m=function(b,x){var w=b.props,C=b.dataStartIndex,S=b.dataEndIndex,P=b.updateId;if(!QB({props:w}))return null;var j=w.children,g=w.layout,T=w.stackOffset,E=w.data,A=w.reverseStackOrder,I=M6(g),k=I.numericAxisName,L=I.cateAxisName,V=ha(j,r),B=sqe(E,V,"".concat(k,"Id"),"".concat(L,"Id"),T,A),M=c.reduce(function(ae,Ae){var ie="".concat(Ae.axisType,"Map");return ye(ye({},ae),{},_t({},ie,NXe(w,ye(ye({},Ae),{},{graphicalItems:V,stackGroups:Ae.axisType===k&&B,dataStartIndex:C,dataEndIndex:S}))))},{}),$=AXe(ye(ye({},M),{},{props:w,graphicalItems:V}),x==null?void 0:x.legendBBox);Object.keys(M).forEach(function(ae){M[ae]=d(w,M[ae],$,ae.replace("Map",""),n)});var O=M["".concat(L,"Map")],W=SXe(O),Z=f(w,ye(ye({},M),{},{dataStartIndex:C,dataEndIndex:S,updateId:P,graphicalItems:V,stackGroups:B,offset:$}));return ye(ye({formattedGraphicalItems:Z,graphicalItems:V,offset:$,stackGroups:B},W),M)},y=function(v){function b(x){var w,C,S;return oXe(this,b),S=uXe(this,b,[x]),_t(S,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),_t(S,"accessibilityManager",new KQe),_t(S,"handleLegendBBoxUpdate",function(P){if(P){var j=S.state,g=j.dataStartIndex,T=j.dataEndIndex,E=j.updateId;S.setState(ye({legendBBox:P},m({props:S.props,dataStartIndex:g,dataEndIndex:T,updateId:E},ye(ye({},S.state),{},{legendBBox:P}))))}}),_t(S,"handleReceiveSyncEvent",function(P,j,g){if(S.props.syncId===P){if(g===S.eventEmitterSymbol&&typeof S.props.syncMethod!="function")return;S.applySyncEvent(j)}}),_t(S,"handleBrushChange",function(P){var j=P.startIndex,g=P.endIndex;if(j!==S.state.dataStartIndex||g!==S.state.dataEndIndex){var T=S.state.updateId;S.setState(function(){return ye({dataStartIndex:j,dataEndIndex:g},m({props:S.props,dataStartIndex:j,dataEndIndex:g,updateId:T},S.state))}),S.triggerSyncEvent({dataStartIndex:j,dataEndIndex:g})}}),_t(S,"handleMouseEnter",function(P){var j=S.getMouseInfo(P);if(j){var g=ye(ye({},j),{},{isTooltipActive:!0});S.setState(g),S.triggerSyncEvent(g);var T=S.props.onMouseEnter;Et(T)&&T(g,P)}}),_t(S,"triggeredAfterMouseMove",function(P){var j=S.getMouseInfo(P),g=j?ye(ye({},j),{},{isTooltipActive:!0}):{isTooltipActive:!1};S.setState(g),S.triggerSyncEvent(g);var T=S.props.onMouseMove;Et(T)&&T(g,P)}),_t(S,"handleItemMouseEnter",function(P){S.setState(function(){return{isTooltipActive:!0,activeItem:P,activePayload:P.tooltipPayload,activeCoordinate:P.tooltipPosition||{x:P.cx,y:P.cy}}})}),_t(S,"handleItemMouseLeave",function(){S.setState(function(){return{isTooltipActive:!1}})}),_t(S,"handleMouseMove",function(P){P.persist(),S.throttleTriggeredAfterMouseMove(P)}),_t(S,"handleMouseLeave",function(P){S.throttleTriggeredAfterMouseMove.cancel();var j={isTooltipActive:!1};S.setState(j),S.triggerSyncEvent(j);var g=S.props.onMouseLeave;Et(g)&&g(j,P)}),_t(S,"handleOuterEvent",function(P){var j=KOe(P),g=Vi(S.props,"".concat(j));if(j&&Et(g)){var T,E;/.*touch.*/i.test(j)?E=S.getMouseInfo(P.changedTouches[0]):E=S.getMouseInfo(P),g((T=E)!==null&&T!==void 0?T:{},P)}}),_t(S,"handleClick",function(P){var j=S.getMouseInfo(P);if(j){var g=ye(ye({},j),{},{isTooltipActive:!0});S.setState(g),S.triggerSyncEvent(g);var T=S.props.onClick;Et(T)&&T(g,P)}}),_t(S,"handleMouseDown",function(P){var j=S.props.onMouseDown;if(Et(j)){var g=S.getMouseInfo(P);j(g,P)}}),_t(S,"handleMouseUp",function(P){var j=S.props.onMouseUp;if(Et(j)){var g=S.getMouseInfo(P);j(g,P)}}),_t(S,"handleTouchMove",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&S.throttleTriggeredAfterMouseMove(P.changedTouches[0])}),_t(S,"handleTouchStart",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&S.handleMouseDown(P.changedTouches[0])}),_t(S,"handleTouchEnd",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&S.handleMouseUp(P.changedTouches[0])}),_t(S,"handleDoubleClick",function(P){var j=S.props.onDoubleClick;if(Et(j)){var g=S.getMouseInfo(P);j(g,P)}}),_t(S,"handleContextMenu",function(P){var j=S.props.onContextMenu;if(Et(j)){var g=S.getMouseInfo(P);j(g,P)}}),_t(S,"triggerSyncEvent",function(P){S.props.syncId!==void 0&&PA.emit(IA,S.props.syncId,P,S.eventEmitterSymbol)}),_t(S,"applySyncEvent",function(P){var j=S.props,g=j.layout,T=j.syncMethod,E=S.state.updateId,A=P.dataStartIndex,I=P.dataEndIndex;if(P.dataStartIndex!==void 0||P.dataEndIndex!==void 0)S.setState(ye({dataStartIndex:A,dataEndIndex:I},m({props:S.props,dataStartIndex:A,dataEndIndex:I,updateId:E},S.state)));else if(P.activeTooltipIndex!==void 0){var k=P.chartX,L=P.chartY,V=P.activeTooltipIndex,B=S.state,M=B.offset,$=B.tooltipTicks;if(!M)return;if(typeof T=="function")V=T($,P);else if(T==="value"){V=-1;for(var O=0;O<$.length;O++)if($[O].value===P.activeLabel){V=O;break}}var W=ye(ye({},M),{},{x:M.left,y:M.top}),Z=Math.min(k,W.x+W.width),ae=Math.min(L,W.y+W.height),Ae=$[V]&&$[V].value,ie=QI(S.state,S.props.data,V),pe=$[V]?{x:g==="horizontal"?$[V].coordinate:Z,y:g==="horizontal"?ae:$[V].coordinate}:Rne;S.setState(ye(ye({},P),{},{activeLabel:Ae,activeCoordinate:pe,activePayload:ie,activeTooltipIndex:V}))}else S.setState(P)}),_t(S,"renderCursor",function(P){var j,g=S.state,T=g.isTooltipActive,E=g.activeCoordinate,A=g.activePayload,I=g.offset,k=g.activeTooltipIndex,L=g.tooltipAxisBandSize,V=S.getTooltipEventType(),B=(j=P.props.active)!==null&&j!==void 0?j:T,M=S.props.layout,$=P.key||"_recharts-cursor";return F.createElement(eXe,{key:$,activeCoordinate:E,activePayload:A,activeTooltipIndex:k,chartName:n,element:P,isActive:B,layout:M,offset:I,tooltipAxisBandSize:L,tooltipEventType:V})}),_t(S,"renderPolarAxis",function(P,j,g){var T=Vi(P,"type.axisType"),E=Vi(S.state,"".concat(T,"Map")),A=P.type.defaultProps,I=A!==void 0?ye(ye({},A),P.props):P.props,k=E&&E[I["".concat(T,"Id")]];return _.cloneElement(P,ye(ye({},k),{},{className:$t(T,k.className),key:P.key||"".concat(j,"-").concat(g),ticks:Al(k,!0)}))}),_t(S,"renderPolarGrid",function(P){var j=P.props,g=j.radialLines,T=j.polarAngles,E=j.polarRadius,A=S.state,I=A.radiusAxisMap,k=A.angleAxisMap,L=zc(I),V=zc(k),B=V.cx,M=V.cy,$=V.innerRadius,O=V.outerRadius;return _.cloneElement(P,{polarAngles:Array.isArray(T)?T:Al(V,!0).map(function(W){return W.coordinate}),polarRadius:Array.isArray(E)?E:Al(L,!0).map(function(W){return W.coordinate}),cx:B,cy:M,innerRadius:$,outerRadius:O,key:P.key||"polar-grid",radialLines:g})}),_t(S,"renderLegend",function(){var P=S.state.formattedGraphicalItems,j=S.props,g=j.children,T=j.width,E=j.height,A=S.props.margin||{},I=T-(A.left||0)-(A.right||0),k=ote({children:g,formattedGraphicalItems:P,legendWidth:I,legendContent:u});if(!k)return null;var L=k.item,V=k6(k,tXe);return _.cloneElement(L,ye(ye({},V),{},{chartWidth:T,chartHeight:E,margin:A,onBBoxUpdate:S.handleLegendBBoxUpdate}))}),_t(S,"renderTooltip",function(){var P,j=S.props,g=j.children,T=j.accessibilityLayer,E=Ti(g,La);if(!E)return null;var A=S.state,I=A.isTooltipActive,k=A.activeCoordinate,L=A.activePayload,V=A.activeLabel,B=A.offset,M=(P=E.props.active)!==null&&P!==void 0?P:I;return _.cloneElement(E,{viewBox:ye(ye({},B),{},{x:B.left,y:B.top}),active:M,label:V,payload:M?L:[],coordinate:k,accessibilityLayer:T})}),_t(S,"renderBrush",function(P){var j=S.props,g=j.margin,T=j.data,E=S.state,A=E.offset,I=E.dataStartIndex,k=E.dataEndIndex,L=E.updateId;return _.cloneElement(P,{key:P.key||"_recharts-brush",onChange:C0(S.handleBrushChange,P.props.onChange),data:T,x:Ie(P.props.x)?P.props.x:A.left,y:Ie(P.props.y)?P.props.y:A.top+A.height+A.brushBottom-(g.bottom||0),width:Ie(P.props.width)?P.props.width:A.width,startIndex:I,endIndex:k,updateId:"brush-".concat(L)})}),_t(S,"renderReferenceElement",function(P,j,g){if(!P)return null;var T=S,E=T.clipPathId,A=S.state,I=A.xAxisMap,k=A.yAxisMap,L=A.offset,V=P.type.defaultProps||{},B=P.props,M=B.xAxisId,$=M===void 0?V.xAxisId:M,O=B.yAxisId,W=O===void 0?V.yAxisId:O;return _.cloneElement(P,{key:P.key||"".concat(j,"-").concat(g),xAxis:I[$],yAxis:k[W],viewBox:{x:L.left,y:L.top,width:L.width,height:L.height},clipPathId:E})}),_t(S,"renderActivePoints",function(P){var j=P.item,g=P.activePoint,T=P.basePoint,E=P.childIndex,A=P.isRange,I=[],k=j.props.key,L=j.item.type.defaultProps!==void 0?ye(ye({},j.item.type.defaultProps),j.item.props):j.item.props,V=L.activeDot,B=L.dataKey,M=ye(ye({index:E,dataKey:B,cx:g.x,cy:g.y,r:4,fill:MD(j.item),strokeWidth:2,stroke:"#fff",payload:g.payload,value:g.value},vt(V,!1)),H_(V));return I.push(b.renderActiveDot(V,M,"".concat(k,"-activePoint-").concat(E))),T?I.push(b.renderActiveDot(V,ye(ye({},M),{},{cx:T.x,cy:T.y}),"".concat(k,"-basePoint-").concat(E))):A&&I.push(null),I}),_t(S,"renderGraphicChild",function(P,j,g){var T=S.filterFormatItem(P,j,g);if(!T)return null;var E=S.getTooltipEventType(),A=S.state,I=A.isTooltipActive,k=A.tooltipAxis,L=A.activeTooltipIndex,V=A.activeLabel,B=S.props.children,M=Ti(B,La),$=T.props,O=$.points,W=$.isRange,Z=$.baseLine,ae=T.item.type.defaultProps!==void 0?ye(ye({},T.item.type.defaultProps),T.item.props):T.item.props,Ae=ae.activeDot,ie=ae.hide,pe=ae.activeBar,Ue=ae.activeShape,Ne=!!(!ie&&I&&M&&(Ae||pe||Ue)),nt={};E!=="axis"&&M&&M.props.trigger==="click"?nt={onClick:C0(S.handleItemMouseEnter,P.props.onClick)}:E!=="axis"&&(nt={onMouseLeave:C0(S.handleItemMouseLeave,P.props.onMouseLeave),onMouseEnter:C0(S.handleItemMouseEnter,P.props.onMouseEnter)});var fe=_.cloneElement(P,ye(ye({},T.props),nt));function _e(me){return typeof k.dataKey=="function"?k.dataKey(me.payload):null}if(Ne)if(L>=0){var ge,ce;if(k.dataKey&&!k.allowDuplicatedCategory){var He=typeof k.dataKey=="function"?_e:"payload.".concat(k.dataKey.toString());ge=W_(O,He,V),ce=W&&Z&&W_(Z,He,V)}else ge=O==null?void 0:O[L],ce=W&&Z&&Z[L];if(Ue||pe){var rt=P.props.activeIndex!==void 0?P.props.activeIndex:L;return[_.cloneElement(P,ye(ye(ye({},T.props),nt),{},{activeIndex:rt})),null,null]}if(!Ft(ge))return[fe].concat(Ip(S.renderActivePoints({item:T,activePoint:ge,basePoint:ce,childIndex:L,isRange:W})))}else{var zt,nn=(zt=S.getItemByXY(S.state.activeCoordinate))!==null&&zt!==void 0?zt:{graphicalItem:fe},En=nn.graphicalItem,Hr=En.item,on=Hr===void 0?P:Hr,K=En.childIndex,oe=ye(ye(ye({},T.props),nt),{},{activeIndex:K});return[_.cloneElement(on,oe),null,null]}return W?[fe,null,null]:[fe,null]}),_t(S,"renderCustomized",function(P,j,g){return _.cloneElement(P,ye(ye({key:"recharts-customized-".concat(g)},S.props),S.state))}),_t(S,"renderMap",{CartesianGrid:{handler:O0,once:!0},ReferenceArea:{handler:S.renderReferenceElement},ReferenceLine:{handler:O0},ReferenceDot:{handler:S.renderReferenceElement},XAxis:{handler:O0},YAxis:{handler:O0},Brush:{handler:S.renderBrush,once:!0},Bar:{handler:S.renderGraphicChild},Line:{handler:S.renderGraphicChild},Area:{handler:S.renderGraphicChild},Radar:{handler:S.renderGraphicChild},RadialBar:{handler:S.renderGraphicChild},Scatter:{handler:S.renderGraphicChild},Pie:{handler:S.renderGraphicChild},Funnel:{handler:S.renderGraphicChild},Tooltip:{handler:S.renderCursor,once:!0},PolarGrid:{handler:S.renderPolarGrid,once:!0},PolarAngleAxis:{handler:S.renderPolarAxis},PolarRadiusAxis:{handler:S.renderPolarAxis},Customized:{handler:S.renderCustomized}}),S.clipPathId="".concat((w=x.id)!==null&&w!==void 0?w:og("recharts"),"-clip"),S.throttleTriggeredAfterMouseMove=aee(S.triggeredAfterMouseMove,(C=x.throttleDelay)!==null&&C!==void 0?C:1e3/60),S.state={},S}return fXe(b,v),cXe(b,[{key:"componentDidMount",value:function(){var w,C;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,C=w.children,S=w.data,P=w.height,j=w.layout,g=Ti(C,La);if(g){var T=g.props.defaultIndex;if(!(typeof T!="number"||T<0||T>this.state.tooltipTicks.length-1)){var E=this.state.tooltipTicks[T]&&this.state.tooltipTicks[T].value,A=QI(this.state,S,T,E),I=this.state.tooltipTicks[T].coordinate,k=(this.state.offset.top+P)/2,L=j==="horizontal",V=L?{x:I,y:k}:{y:I,x:k},B=this.state.formattedGraphicalItems.find(function($){var O=$.item;return O.type.name==="Scatter"});B&&(V=ye(ye({},V),B.props.points[T].tooltipPosition),A=B.props.points[T].tooltipPayload);var M={activeTooltipIndex:T,isTooltipActive:!0,activeLabel:E,activePayload:A,activeCoordinate:V};this.setState(M),this.renderCursor(g),this.accessibilityManager.setIndex(T)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,C){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==C.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var S,P;this.accessibilityManager.setDetails({offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0}})}return null}},{key:"componentDidUpdate",value:function(w){EP([Ti(w.children,La)],[Ti(this.props.children,La)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=Ti(this.props.children,La);if(w&&typeof w.props.shared=="boolean"){var C=w.props.shared?"axis":"item";return l.indexOf(C)>=0?C:a}return a}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var C=this.container,S=C.getBoundingClientRect(),P=b5e(S),j={chartX:Math.round(w.pageX-P.left),chartY:Math.round(w.pageY-P.top)},g=S.width/C.offsetWidth||1,T=this.inRange(j.chartX,j.chartY,g);if(!T)return null;var E=this.state,A=E.xAxisMap,I=E.yAxisMap,k=this.getTooltipEventType(),L=O6(this.state,this.props.data,this.props.layout,T);if(k!=="axis"&&A&&I){var V=zc(A).scale,B=zc(I).scale,M=V&&V.invert?V.invert(j.chartX):null,$=B&&B.invert?B.invert(j.chartY):null;return ye(ye({},j),{},{xValue:M,yValue:$},L)}return L?ye(ye({},j),L):null}},{key:"inRange",value:function(w,C){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,P=this.props.layout,j=w/S,g=C/S;if(P==="horizontal"||P==="vertical"){var T=this.state.offset,E=j>=T.left&&j<=T.left+T.width&&g>=T.top&&g<=T.top+T.height;return E?{x:j,y:g}:null}var A=this.state,I=A.angleAxisMap,k=A.radiusAxisMap;if(I&&k){var L=zc(I);return aU({x:j,y:g},L)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,C=this.getTooltipEventType(),S=Ti(w,La),P={};S&&C==="axis"&&(S.props.trigger==="click"?P={onClick:this.handleClick}:P={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var j=H_(this.props,this.handleOuterEvent);return ye(ye({},j),P)}},{key:"addListener",value:function(){PA.on(IA,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){PA.removeListener(IA,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,C,S){for(var P=this.state.formattedGraphicalItems,j=0,g=P.length;j<g;j++){var T=P[j];if(T.item===w||T.props.key===w.key||C===kl(T.item.type)&&S===T.childIndex)return T}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,C=this.state.offset,S=C.left,P=C.top,j=C.height,g=C.width;return F.createElement("defs",null,F.createElement("clipPath",{id:w},F.createElement("rect",{x:S,y:P,height:j,width:g})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(C,S){var P=I6(S,2),j=P[0],g=P[1];return ye(ye({},C),{},_t({},j,g.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(C,S){var P=I6(S,2),j=P[0],g=P[1];return ye(ye({},C),{},_t({},j,g.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var C;return(C=this.state.xAxisMap)===null||C===void 0||(C=C[w])===null||C===void 0?void 0:C.scale}},{key:"getYScaleByAxisId",value:function(w){var C;return(C=this.state.yAxisMap)===null||C===void 0||(C=C[w])===null||C===void 0?void 0:C.scale}},{key:"getItemByXY",value:function(w){var C=this.state,S=C.formattedGraphicalItems,P=C.activeItem;if(S&&S.length)for(var j=0,g=S.length;j<g;j++){var T=S[j],E=T.props,A=T.item,I=A.type.defaultProps!==void 0?ye(ye({},A.type.defaultProps),A.props):A.props,k=kl(A.type);if(k==="Bar"){var L=(E.data||[]).find(function($){return nHe(w,$)});if(L)return{graphicalItem:T,payload:L}}else if(k==="RadialBar"){var V=(E.data||[]).find(function($){return aU(w,$)});if(V)return{graphicalItem:T,payload:V}}else if(n1(T,P)||r1(T,P)||yx(T,P)){var B=q7e({graphicalItem:T,activeTooltipItem:P,itemData:I.data}),M=I.activeIndex===void 0?B:I.activeIndex;return{graphicalItem:ye(ye({},T),{},{childIndex:M}),payload:yx(T,P)?I.data[B]:T.props.data[B]}}}return null}},{key:"render",value:function(){var w=this;if(!QB(this))return null;var C=this.props,S=C.children,P=C.className,j=C.width,g=C.height,T=C.style,E=C.compact,A=C.title,I=C.desc,k=k6(C,nXe),L=vt(k,!1);if(E)return F.createElement(m6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},F.createElement(TP,Qf({},L,{width:j,height:g,title:A,desc:I}),this.renderClipPath(),ZB(S,this.renderMap)));if(this.props.accessibilityLayer){var V,B;L.tabIndex=(V=this.props.tabIndex)!==null&&V!==void 0?V:0,L.role=(B=this.props.role)!==null&&B!==void 0?B:"application",L.onKeyDown=function($){w.accessibilityManager.keyboardEvent($)},L.onFocus=function(){w.accessibilityManager.focus()}}var M=this.parseEventsOfWrapper();return F.createElement(m6,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},F.createElement("div",Qf({className:$t("recharts-wrapper",P),style:ye({position:"relative",cursor:"default",width:j,height:g},T)},M,{ref:function(O){w.container=O}}),F.createElement(TP,Qf({},L,{width:j,height:g,title:A,desc:I,style:xXe}),this.renderClipPath(),ZB(S,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(_.Component);_t(y,"displayName",n),_t(y,"defaultProps",ye({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),_t(y,"getDerivedStateFromProps",function(v,b){var x=v.dataKey,w=v.data,C=v.children,S=v.width,P=v.height,j=v.layout,g=v.stackOffset,T=v.margin,E=b.dataStartIndex,A=b.dataEndIndex;if(b.updateId===void 0){var I=D6(v);return ye(ye(ye({},I),{},{updateId:0},m(ye(ye({props:v},I),{},{updateId:0}),b)),{},{prevDataKey:x,prevData:w,prevWidth:S,prevHeight:P,prevLayout:j,prevStackOffset:g,prevMargin:T,prevChildren:C})}if(x!==b.prevDataKey||w!==b.prevData||S!==b.prevWidth||P!==b.prevHeight||j!==b.prevLayout||g!==b.prevStackOffset||!mm(T,b.prevMargin)){var k=D6(v),L={chartX:b.chartX,chartY:b.chartY,isTooltipActive:b.isTooltipActive},V=ye(ye({},O6(b,w,j)),{},{updateId:b.updateId+1}),B=ye(ye(ye({},k),L),V);return ye(ye(ye({},B),m(ye({props:v},B),b)),{},{prevDataKey:x,prevData:w,prevWidth:S,prevHeight:P,prevLayout:j,prevStackOffset:g,prevMargin:T,prevChildren:C})}if(!EP(C,b.prevChildren)){var M,$,O,W,Z=Ti(C,xp),ae=Z&&(M=($=Z.props)===null||$===void 0?void 0:$.startIndex)!==null&&M!==void 0?M:E,Ae=Z&&(O=(W=Z.props)===null||W===void 0?void 0:W.endIndex)!==null&&O!==void 0?O:A,ie=ae!==E||Ae!==A,pe=!Ft(w),Ue=pe&&!ie?b.updateId:b.updateId+1;return ye(ye({updateId:Ue},m(ye(ye({props:v},b),{},{updateId:Ue,dataStartIndex:ae,dataEndIndex:Ae}),b)),{},{prevChildren:C,dataStartIndex:ae,dataEndIndex:Ae})}return null}),_t(y,"renderActiveDot",function(v,b,x){var w;return _.isValidElement(v)?w=_.cloneElement(v,b):Et(v)?w=v(b):w=F.createElement(XS,b),F.createElement(sn,{className:"recharts-active-dot",key:x},w)});var p=_.forwardRef(function(b,x){return F.createElement(y,Qf({},b,{ref:x}))});return p.displayName=y.displayName,p},CXe=KD({chartName:"BarChart",GraphicalChild:nf,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Ap},{axisType:"yAxis",AxisComp:Cp}],formatAxisMap:Qte}),PXe=KD({chartName:"PieChart",GraphicalChild:cc,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:t1},{axisType:"radiusAxis",AxisComp:JS}],formatAxisMap:gqe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),IXe=KD({chartName:"AreaChart",GraphicalChild:tc,axisComponents:[{axisType:"xAxis",AxisComp:Ap},{axisType:"yAxis",AxisComp:Cp}],formatAxisMap:Qte});function kXe(){return i.jsxs("div",{className:"space-y-6 p-4 md:p-8 pt-6",children:[i.jsxs("div",{className:"flex flex-col space-y-2",children:[i.jsx(Rc,{className:"h-8 w-[250px]"}),i.jsx(Rc,{className:"h-4 w-[350px]"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((t,e)=>i.jsx(Rc,{className:"h-[120px] rounded-xl"},e))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-7",children:[i.jsx(Rc,{className:"col-span-4 h-[400px] rounded-xl"}),i.jsx(Rc,{className:"col-span-3 h-[400px] rounded-xl"})]}),i.jsx(Rc,{className:"h-[300px] w-full rounded-xl"})]})}const D0=["#0f172a","#334155","#475569","#64748b","#94a3b8"];function RXe(){var l,c,u,d;const{user:t}=ht(),{data:e,isLoading:n}=Ee({queryKey:["admin-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalRevenue:0,pendingInvoices:0,activeEmployees:0,totalEmployees:0,totalPayroll:0,totalExpenses:0,activeProjects:0,totalCustomers:0,departmentData:[],monthlyRevenue:[],projects:[]};const h=await jr.getCompanyIdForUser(t.id),[f,{invoices:m,employees:y,payrollRuns:p,projects:v,customers:b}]=await Promise.all([_n.getDashboardLiveMetrics({companyId:h}),jr.runQueries(t.id,{invoices:{collectionName:Q.INVOICES},employees:{collectionName:Q.EMPLOYEES},payrollRuns:{collectionName:Q.PAYROLL_RUNS},projects:{collectionName:Q.PROJECTS},customers:{collectionName:Q.CUSTOMERS}})]),x=y.reduce((P,j)=>{const g=Qe(j,["department"],"Other");return P[g]||(P[g]=0),P[g]++,P},{}),w=Array.from({length:6}).map((P,j)=>{const g=new Date;g.setDate(1),g.setMonth(g.getMonth()-(5-j));const T=new Date(g.getFullYear(),g.getMonth(),1),E=new Date(g.getFullYear(),g.getMonth()+1,0);return{label:T.toLocaleString("en-US",{month:"short"}),startDate:T.toISOString().slice(0,10),endDate:E.toISOString().slice(0,10)}}),C=await Promise.all(w.map(P=>_n.getProfitLossReport({companyId:h,startDate:P.startDate,endDate:P.endDate}))),S=w.map((P,j)=>{var g,T;return{name:P.label,revenue:((g=C[j])==null?void 0:g.totalIncome)||0,expenses:((T=C[j])==null?void 0:T.totalExpenses)||0}});return{totalRevenue:f.monthlyIncome,pendingInvoices:m.filter(P=>{const j=Qe(P,["status"]).toLowerCase();return!["paid","cancelled","rejected"].includes(j)}).length,activeEmployees:y.filter(P=>Qe(P,["employmentStatus","employment_status"])==="active").length,totalEmployees:y.length,totalPayroll:p.filter(P=>{const j=Qe(P,["status","payrollStatus","payroll_status"]).toLowerCase();return["processed","paid","payment_reversed","approved","final"].includes(j)}).reduce((P,j)=>P+en(j,["totalNet","total_net"]),0),totalExpenses:f.monthlyExpenses,activeProjects:v.filter(P=>Qe(P,["status"])==="active").length,totalCustomers:b.length,departmentData:Object.entries(x).map(([P,j])=>({name:P,value:j})),monthlyRevenue:S,projects:v.slice(0,5)}}}),r=(t==null?void 0:t.displayName)||((l=t==null?void 0:t.email)==null?void 0:l.split("@")[0])||"Admin";if(n)return i.jsx(kXe,{});const a=[{title:"Total Revenue",value:`ZMW ${(e||{totalRevenue:0,pendingInvoices:0,activeEmployees:0,totalEmployees:0,totalPayroll:0,totalExpenses:0,activeProjects:0,totalCustomers:0,departmentData:[],monthlyRevenue:[],projects:[]}).totalRevenue.toLocaleString()}`,icon:Xn,trend:"Current month (GL)",color:"text-green-600",bgColor:"bg-green-100",iconColor:"text-green-600"},{title:"Employees",value:((c=e==null?void 0:e.totalEmployees)==null?void 0:c.toLocaleString())||"0",subtitle:`${(e==null?void 0:e.activeEmployees)||0} active`,icon:di,color:"bg-blue-500",bgColor:"bg-blue-50",iconColor:"text-blue-500"},{title:"Health Index",value:"75%",icon:Xk,color:"bg-green-500",bgColor:"bg-green-50",iconColor:"text-green-500",trend:"+2%"},{title:"Customers",value:((u=e==null?void 0:e.totalCustomers)==null?void 0:u.toLocaleString())||"0",icon:ale,color:"bg-purple-500",bgColor:"bg-purple-50",iconColor:"text-purple-500"}],o=[{name:"Invoice #1234",type:"Payment Due",date:"Today",status:"urgent"},{name:"Payroll Run",type:"Monthly",date:"Friday",status:"scheduled"},{name:"Tax Filing",type:"ZRA Compliance",date:"Next Week",status:"pending"},{name:"Budget Review",type:"Finance",date:"Monday",status:"scheduled"}];return i.jsxs("div",{className:"space-y-6 min-h-screen pb-10",children:[i.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-3 md:gap-4 w-full md:w-auto justify-between md:justify-start",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-foreground",children:["Welcome ",r,","]}),i.jsx("p",{className:"text-xs md:text-base text-muted-foreground",children:"Here's your organization's financial overview."})]}),i.jsx("div",{className:"md:hidden",children:i.jsx(_P,{className:"h-8 w-8 border border-border",children:i.jsx(jP,{className:"bg-primary/10 text-primary font-medium text-xs",children:r.charAt(0).toUpperCase()})})})]}),i.jsxs("div",{className:"flex items-center gap-2 md:gap-4 w-full md:w-auto justify-end",children:[i.jsxs("div",{className:"relative hidden md:block",children:[i.jsx(Ds,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"Search...",className:"pl-10 w-64 rounded-full bg-muted/50 focus:bg-background transition-colors"})]}),i.jsxs(H,{variant:"ghost",size:"icon",className:"relative text-muted-foreground hover:text-foreground",children:[i.jsx($oe,{className:"h-5 w-5"}),i.jsx("span",{className:"absolute top-2 right-2 h-2 w-2 bg-red-500 rounded-full ring-2 ring-background"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(tle,{className:"h-4 w-4 text-muted-foreground"}),i.jsx(us,{}),i.jsx("span",{className:"hidden md:inline text-sm text-muted-foreground",children:"Dark Mode"})]}),i.jsxs("div",{className:"hidden md:flex items-center gap-3 pl-4 border-l",children:[i.jsx(_P,{className:"h-9 w-9 border border-border",children:i.jsx(jP,{className:"bg-primary/10 text-primary font-medium",children:r.charAt(0).toUpperCase()})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:r}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Administrator"})]})]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:a.map((h,f)=>i.jsx(X,{className:"border border-border/50 shadow-sm hover:shadow-md transition-shadow",children:i.jsxs(re,{className:"p-4 md:p-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:`p-2 md:p-3 rounded-xl ${h.bgColor}`,children:i.jsx(h.icon,{className:`h-4 w-4 md:h-5 md:w-5 ${h.iconColor}`})}),h.trend&&i.jsxs(Ve,{className:"bg-green-100 text-green-700 hover:bg-green-200 border-green-200 gap-1 text-xs px-1.5 py-0.5",children:[i.jsx(ga,{className:"h-3 w-3"}),h.trend]})]}),i.jsxs("div",{className:"mt-3 md:mt-4",children:[i.jsx("p",{className:"text-xs md:text-sm font-medium text-muted-foreground",children:h.title}),i.jsx("p",{className:"text-2xl md:text-3xl font-bold mt-1 tracking-tight text-foreground",children:h.value}),h.subtitle&&i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:h.subtitle})]})]})},f))}),i.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[i.jsxs(X,{className:"border border-border/50 shadow-sm",children:[i.jsx(te,{children:i.jsx(ne,{className:"text-lg",children:"Department Distribution"})}),i.jsx(re,{children:i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsxs("div",{className:"relative w-40 h-40",children:[i.jsx(pA,{width:"100%",height:"100%",children:i.jsx(PXe,{children:i.jsx(cc,{data:(d=e==null?void 0:e.departmentData)!=null&&d.length?e.departmentData:[{name:"No Data",value:1}],innerRadius:50,outerRadius:70,paddingAngle:2,dataKey:"value",children:((e==null?void 0:e.departmentData)||[{name:"No Data",value:1}]).map((h,f)=>i.jsx(FS,{fill:D0[f%D0.length]},`cell-${f}`))})})}),i.jsxs("div",{className:"absolute inset-0 flex items-center justify-center flex-col",children:[i.jsx("p",{className:"text-2xl font-bold text-primary",children:(e==null?void 0:e.totalEmployees)||0}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Total"})]})]}),i.jsxs("div",{className:"flex-1 space-y-2",children:[((e==null?void 0:e.departmentData)||[]).slice(0,5).map((h,f)=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:D0[f%D0.length]}}),i.jsx("span",{className:"truncate max-w-[100px] text-muted-foreground",children:h.name})]}),i.jsx("span",{className:"font-medium",children:h.value})]},h.name)),(!(e!=null&&e.departmentData)||e.departmentData.length===0)&&i.jsx("p",{className:"text-sm text-muted-foreground",children:"No employee data"})]})]})})]}),i.jsxs(X,{className:"lg:col-span-2 border border-border/50 shadow-sm",children:[i.jsxs(te,{className:"flex flex-row items-center justify-between",children:[i.jsx(ne,{className:"text-lg",children:"Revenue Overview"}),i.jsxs("div",{className:"flex gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-slate-900"}),i.jsx("span",{className:"text-muted-foreground",children:"Revenue"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-blue-500"}),i.jsx("span",{className:"text-muted-foreground",children:"Expenses"})]})]})]}),i.jsx(re,{children:i.jsx(pA,{width:"100%",height:250,children:i.jsxs(IXe,{data:(e==null?void 0:e.monthlyRevenue)||[],children:[i.jsxs("defs",{children:[i.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"5%",stopColor:"#0f172a",stopOpacity:.1}),i.jsx("stop",{offset:"95%",stopColor:"#0f172a",stopOpacity:0})]}),i.jsxs("linearGradient",{id:"colorExpenses",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.1}),i.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})]}),i.jsx(gne,{strokeDasharray:"3 3",vertical:!1,stroke:"#e2e8f0"}),i.jsx(Ap,{dataKey:"name",axisLine:!1,tickLine:!1,fontSize:12,tick:{fill:"#64748b"}}),i.jsx(Cp,{axisLine:!1,tickLine:!1,fontSize:12,tick:{fill:"#64748b"},tickFormatter:h=>`K${h/1e3}k`}),i.jsx(La,{contentStyle:{borderRadius:"8px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),i.jsx(tc,{type:"monotone",dataKey:"revenue",stroke:"#0f172a",fill:"url(#colorRevenue)",strokeWidth:2}),i.jsx(tc,{type:"monotone",dataKey:"expenses",stroke:"#3b82f6",fill:"url(#colorExpenses)",strokeWidth:2})]})})})]})]}),i.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[i.jsxs(X,{className:"lg:col-span-2 border border-border/50 shadow-sm",children:[i.jsx(te,{children:i.jsxs(ne,{className:"text-lg flex items-center gap-2",children:[i.jsx(Joe,{className:"h-5 w-5 text-primary"}),"Regional Performance"]})}),i.jsx(re,{children:i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsx("div",{className:"space-y-4",children:[{region:"Lusaka",value:42e3,color:"bg-primary"},{region:"Copperbelt",value:28e3,color:"bg-blue-500"},{region:"Southern",value:18e3,color:"bg-indigo-500"},{region:"Eastern",value:12e3,color:"bg-violet-500"}].map(h=>i.jsxs("div",{className:"flex items-center justify-between group",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${h.color}`}),i.jsx("span",{className:"font-medium text-muted-foreground group-hover:text-foreground transition-colors",children:h.region})]}),i.jsx("span",{className:"font-bold tabular-nums",children:ue(h.value)})]},h.region))}),i.jsx("div",{className:"flex items-center justify-center",children:i.jsx(pA,{width:"100%",height:200,children:i.jsxs(CXe,{data:[{name:"Lusaka",value:42},{name:"Copperbelt",value:28},{name:"Southern",value:18},{name:"Eastern",value:12}],children:[i.jsx(Ap,{dataKey:"name",axisLine:!1,tickLine:!1,fontSize:12,tick:{fill:"#64748b"}}),i.jsx(Cp,{hide:!0}),i.jsx(La,{cursor:{fill:"#f1f5f9"},contentStyle:{borderRadius:"8px",border:"1px solid #e2e8f0"}}),i.jsx(nf,{dataKey:"value",fill:"#0f172a",radius:[4,4,0,0],barSize:40})]})})})]})})]}),i.jsxs(X,{className:"border border-border/50 shadow-sm",children:[i.jsx(te,{children:i.jsxs(ne,{className:"text-lg flex items-center gap-2",children:[i.jsx(Fm,{className:"h-5 w-5 text-primary"}),"Upcoming Tasks"]})}),i.jsx(re,{children:i.jsx("div",{className:"space-y-4",children:o.map((h,f)=>i.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg hover:bg-muted/50 transition-colors border border-transparent hover:border-border/50",children:[i.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center ${h.status==="urgent"?"bg-red-50 text-red-600":h.status==="scheduled"?"bg-blue-50 text-blue-600":"bg-slate-50 text-slate-600"}`,children:i.jsx(Ooe,{className:"h-4.5 w-4.5"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium text-sm text-foreground",children:h.name}),i.jsx("p",{className:"text-xs text-muted-foreground",children:h.type})]}),i.jsx(Ve,{variant:h.status==="urgent"?"destructive":"secondary",className:"text-xs font-normal",children:h.date})]},f))})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsx(X,{className:"border border-border/50 shadow-sm hover:border-primary/20 transition-colors",children:i.jsx(re,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Active Projects"}),i.jsx("p",{className:"text-2xl font-bold mt-1",children:(e==null?void 0:e.activeProjects)||0})]}),i.jsx("div",{className:"h-10 w-10 rounded-xl bg-green-50 flex items-center justify-center",children:i.jsx(dr,{className:"h-5 w-5 text-green-600"})})]})})}),i.jsx(X,{className:"border border-border/50 shadow-sm hover:border-primary/20 transition-colors",children:i.jsx(re,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Pending Invoices"}),i.jsx("p",{className:"text-2xl font-bold mt-1",children:(e==null?void 0:e.pendingInvoices)||0})]}),i.jsx("div",{className:"h-10 w-10 rounded-xl bg-amber-50 flex items-center justify-center",children:i.jsx(Xn,{className:"h-5 w-5 text-amber-600"})})]})})}),i.jsx(X,{className:"border border-border/50 shadow-sm hover:border-primary/20 transition-colors",children:i.jsx(re,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Total Payroll"}),i.jsx("p",{className:"text-2xl font-bold mt-1",children:ue((e==null?void 0:e.totalPayroll)||0)})]}),i.jsx("div",{className:"h-10 w-10 rounded-xl bg-blue-50 flex items-center justify-center",children:i.jsx(di,{className:"h-5 w-5 text-blue-600"})})]})})}),i.jsx(X,{className:"border border-border/50 shadow-sm hover:border-primary/20 transition-colors",children:i.jsx(re,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Total Expenses"}),i.jsx("p",{className:"text-2xl font-bold mt-1",children:ue((e==null?void 0:e.totalExpenses)||0)})]}),i.jsx("div",{className:"h-10 w-10 rounded-xl bg-red-50 flex items-center justify-center",children:i.jsx(ga,{className:"h-5 w-5 text-red-600"})})]})})})]})]})}function OXe(){var s;const{user:t}=ht(),{data:e}=Ee({queryKey:["accountant-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalRevenue:0,outstandingReceivables:0,totalExpenses:0,outstandingPayables:0,cashBalance:0,pendingInvoices:0,bankAccounts:[]};const a=await jr.getCompanyIdForUser(t.id),[o,{invoices:l,bankAccounts:c}]=await Promise.all([_n.getDashboardLiveMetrics({companyId:a}),jr.runQueries(t.id,{invoices:{collectionName:Q.INVOICES},bankAccounts:{collectionName:Q.BANK_ACCOUNTS}})]);return{totalRevenue:o.monthlyIncome,outstandingReceivables:o.outstandingAccountsReceivable,totalExpenses:o.monthlyExpenses,outstandingPayables:o.outstandingAccountsPayable,cashBalance:o.bankDefaultBalance,pendingInvoices:l.filter(u=>{const d=Qe(u,["status"]).toLowerCase();return!["paid","cancelled","rejected"].includes(d)}).length,bankAccounts:c}}}),n=[{title:"Total Revenue",value:ue((e==null?void 0:e.totalRevenue)||0),icon:Xn,trend:"up"},{title:"Outstanding Receivables",value:ue((e==null?void 0:e.outstandingReceivables)||0),icon:dr,trend:"neutral"},{title:"Total Expenses",value:ue((e==null?void 0:e.totalExpenses)||0),icon:lo,trend:"down"},{title:"Cash Balance",value:ue((e==null?void 0:e.cashBalance)||0),icon:gh,trend:"up"}],r=((e==null?void 0:e.totalRevenue)||0)-((e==null?void 0:e.totalExpenses)||0);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Accountant Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Financial overview and key metrics"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(a=>i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:a.title}),i.jsx(a.icon,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:a.value}),a.trend==="up"&&i.jsx(ga,{className:"h-3 w-3 text-green-500 inline ml-1"}),a.trend==="down"&&i.jsx(lo,{className:"h-3 w-3 text-red-500 inline ml-1"})]})]},a.title))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"Profit & Loss Summary"})}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Revenue"}),i.jsx("span",{className:"font-medium text-green-600",children:ue((e==null?void 0:e.totalRevenue)||0)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Expenses"}),i.jsxs("span",{className:"font-medium text-red-600",children:["(",ue((e==null?void 0:e.totalExpenses)||0),")"]})]}),i.jsxs("div",{className:"border-t pt-3 flex justify-between",children:[i.jsx("span",{className:"font-semibold",children:"Net Income"}),i.jsx("span",{className:`font-bold ${r>=0?"text-green-600":"text-red-600"}`,children:ue(r)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Outstanding Payables"}),i.jsx("span",{className:"font-medium",children:ue((e==null?void 0:e.outstandingPayables)||0)})]})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(Voe,{className:"h-5 w-5"}),"Bank Accounts"]})}),i.jsx(re,{children:i.jsxs("div",{className:"space-y-3",children:[(s=e==null?void 0:e.bankAccounts)==null?void 0:s.map(a=>i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:Qe(a,["accountName","account_name"],"Bank Account")}),i.jsx("span",{className:"font-medium",children:ue(en(a,["currentBalance","current_balance"]))})]},Qe(a,["accountName","account_name","id"],"bank-account"))),(!(e!=null&&e.bankAccounts)||e.bankAccounts.length===0)&&i.jsx("p",{className:"text-muted-foreground text-sm",children:"No bank accounts configured"})]})})]})]})]})}function DXe(){const{user:t}=ht(),{data:e}=Ee({queryKey:["bookkeeper-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalInvoices:0,paidInvoices:0,unpaidInvoicesAmount:0,totalExpenses:0,unpaidBillsAmount:0,overdueBillsCount:0,overdueBillsAmount:0,vendorCount:0,customerCount:0,recentExpenses:[]};const r=await jr.getCompanyIdForUser(t.id),[s,{invoices:a,expenses:o,bills:l,vendors:c,customers:u}]=await Promise.all([_n.getDashboardLiveMetrics({companyId:r}),jr.runQueries(t.id,{invoices:{collectionName:Q.INVOICES},expenses:{collectionName:Q.EXPENSES},bills:{collectionName:Q.BILLS},vendors:{collectionName:Q.VENDORS},customers:{collectionName:Q.CUSTOMERS}})]),d=new Date().toISOString().split("T")[0],h=l.filter(f=>{const m=Qe(f,["dueDate","due_date"]);return Qe(f,["status"]).toLowerCase()!=="paid"&&!!m&&m<d});return{totalInvoices:a.length,paidInvoices:a.filter(f=>Qe(f,["status"]).toLowerCase()==="paid").length,unpaidInvoicesAmount:s.outstandingAccountsReceivable,totalExpenses:s.monthlyExpenses,unpaidBillsAmount:s.outstandingAccountsPayable,overdueBillsCount:h.length,overdueBillsAmount:h.reduce((f,m)=>f+en(m,["total","amount"]),0),vendorCount:c.length,customerCount:u.length,recentExpenses:o.slice(0,5)}}}),n=[{title:"Invoices Created",value:(e==null?void 0:e.totalInvoices)||0,subtitle:`${(e==null?void 0:e.paidInvoices)||0} paid`,icon:dr,color:"text-primary"},{title:"Unpaid Invoices",value:ue((e==null?void 0:e.unpaidInvoicesAmount)||0),icon:Fx,color:"text-warning"},{title:"Total Expenses",value:ue((e==null?void 0:e.totalExpenses)||0),icon:lo,color:"text-destructive"},{title:"Unpaid Bills",value:ue((e==null?void 0:e.unpaidBillsAmount)||0),icon:gh,color:"text-amber-600"}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Bookkeeper Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Daily transaction overview and data entry tasks"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(r=>i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:r.title}),i.jsx(r.icon,{className:`h-4 w-4 ${r.color}`})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:r.value}),"subtitle"in r&&i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r.subtitle})]})]},r.title))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs(X,{children:[i.jsx(te,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(ga,{className:"h-5 w-5 text-primary"}),"Quick Stats"]})}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Customers"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.customerCount)||0})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Vendors"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.vendorCount)||0})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Overdue Bills"}),i.jsx("span",{className:"font-medium text-destructive",children:(e==null?void 0:e.overdueBillsCount)||0})]})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsxs(ne,{className:"flex items-center gap-2 text-destructive",children:[i.jsx(Xn,{className:"h-5 w-5"}),"Overdue Payments"]})}),i.jsx(re,{children:(e==null?void 0:e.overdueBillsCount)>0?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Bills Overdue"}),i.jsx("span",{className:"font-bold text-destructive",children:e.overdueBillsCount})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Amount"}),i.jsx("span",{className:"font-bold text-destructive",children:ue(e.overdueBillsAmount||0)})]})]}):i.jsx("p",{className:"text-muted-foreground text-sm",children:"No overdue payments"})})]})]})]})}function ts(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function nc(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Dne(t,e){const n=ts(t);if(isNaN(e))return nc(t,NaN);if(!e)return n;const r=n.getDate(),s=nc(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const a=s.getDate();return r>=a?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}const Mne=6048e5,MXe=864e5;let LXe={};function u1(){return LXe}function Nx(t,e){var l,c,u,d;const n=u1(),r=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=ts(t),a=s.getDay(),o=(a<r?7:0)+a-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Wj(t){return Nx(t,{weekStartsOn:1})}function Lne(t){const e=ts(t),n=e.getFullYear(),r=nc(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Wj(r),a=nc(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=Wj(a);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function L6(t){const e=ts(t);return e.setHours(0,0,0,0),e}function $6(t){const e=ts(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function $ne(t,e){const n=L6(t),r=L6(e),s=+n-$6(n),a=+r-$6(r);return Math.round((s-a)/MXe)}function $Xe(t){const e=Lne(t),n=nc(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Wj(n)}function FXe(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function VXe(t){if(!FXe(t)&&typeof t!="number")return!1;const e=ts(t);return!isNaN(Number(e))}function Ns(t,e){const n=ts(t),r=ts(e),s=F6(n,r),a=Math.abs($ne(n,r));n.setDate(n.getDate()-s*a);const o=+(F6(n,r)===-s),l=s*(a-o);return l===0?0:l}function F6(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function Fne(t){const e=ts(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function Vne(t){const e=ts(t);return e.setDate(1),e.setHours(0,0,0,0),e}function BXe(t){const e=ts(t),n=nc(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const UXe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},zXe=(t,e,n)=>{let r;const s=UXe[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function RA(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const qXe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},WXe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},HXe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},KXe={date:RA({formats:qXe,defaultWidth:"full"}),time:RA({formats:WXe,defaultWidth:"full"}),dateTime:RA({formats:HXe,defaultWidth:"full"})},GXe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},YXe=(t,e,n,r)=>GXe[t];function Jg(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):o;s=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[l]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return s[a]}}const QXe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},XXe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ZXe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},JXe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eZe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},tZe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},nZe=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},rZe={ordinalNumber:nZe,era:Jg({values:QXe,defaultWidth:"wide"}),quarter:Jg({values:XXe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Jg({values:ZXe,defaultWidth:"wide"}),day:Jg({values:JXe,defaultWidth:"wide"}),dayPeriod:Jg({values:eZe,defaultWidth:"wide",formattingValues:tZe,defaultFormattingWidth:"wide"})};function ey(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(s);if(!a)return null;const o=a[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?iZe(l,h=>h.test(o)):sZe(l,h=>h.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function sZe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function iZe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function aZe(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(s.length);return{value:o,rest:l}}}const oZe=/^(\d+)(th|st|nd|rd)?/i,lZe=/\d+/i,cZe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},uZe={any:[/^b/i,/^(a|c)/i]},dZe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},hZe={any:[/1/i,/2/i,/3/i,/4/i]},fZe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},mZe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},pZe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},gZe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},yZe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},vZe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},xZe={ordinalNumber:aZe({matchPattern:oZe,parsePattern:lZe,valueCallback:t=>parseInt(t,10)}),era:ey({matchPatterns:cZe,defaultMatchWidth:"wide",parsePatterns:uZe,defaultParseWidth:"any"}),quarter:ey({matchPatterns:dZe,defaultMatchWidth:"wide",parsePatterns:hZe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ey({matchPatterns:fZe,defaultMatchWidth:"wide",parsePatterns:mZe,defaultParseWidth:"any"}),day:ey({matchPatterns:pZe,defaultMatchWidth:"wide",parsePatterns:gZe,defaultParseWidth:"any"}),dayPeriod:ey({matchPatterns:yZe,defaultMatchWidth:"any",parsePatterns:vZe,defaultParseWidth:"any"})},bZe={code:"en-US",formatDistance:zXe,formatLong:KXe,formatRelative:YXe,localize:rZe,match:xZe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function wZe(t){const e=ts(t);return $ne(e,BXe(e))+1}function _Ze(t){const e=ts(t),n=+Wj(e)-+$Xe(e);return Math.round(n/Mne)+1}function Bne(t,e){var d,h,f,m;const n=ts(t),r=n.getFullYear(),s=u1(),a=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=nc(t,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const l=Nx(o,e),c=nc(t,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const u=Nx(c,e);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function jZe(t,e){var l,c,u,d;const n=u1(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=Bne(t,e),a=nc(t,0);return a.setFullYear(s,0,r),a.setHours(0,0,0,0),Nx(a,e)}function NZe(t,e){const n=ts(t),r=+Nx(n,e)-+jZe(n,e);return Math.round(r/Mne)+1}function wn(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const jc={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return wn(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):wn(n+1,2)},d(t,e){return wn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return wn(t.getHours()%12||12,e.length)},H(t,e){return wn(t.getHours(),e.length)},m(t,e){return wn(t.getMinutes(),e.length)},s(t,e){return wn(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return wn(s,e.length)}},vf={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},V6={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return jc.y(t,e)},Y:function(t,e,n,r){const s=Bne(t,r),a=s>0?s:1-s;if(e==="YY"){const o=a%100;return wn(o,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):wn(a,e.length)},R:function(t,e){const n=Lne(t);return wn(n,e.length)},u:function(t,e){const n=t.getFullYear();return wn(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return wn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return wn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return jc.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return wn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=NZe(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):wn(s,e.length)},I:function(t,e,n){const r=_Ze(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):wn(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):jc.d(t,e)},D:function(t,e,n){const r=wZe(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):wn(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return wn(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return wn(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return wn(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=vf.noon:r===0?s=vf.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=vf.evening:r>=12?s=vf.afternoon:r>=4?s=vf.morning:s=vf.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return jc.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):jc.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):wn(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):wn(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):jc.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):jc.s(t,e)},S:function(t,e){return jc.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return U6(r);case"XXXX":case"XX":return Id(r);case"XXXXX":case"XXX":default:return Id(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return U6(r);case"xxxx":case"xx":return Id(r);case"xxxxx":case"xxx":default:return Id(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+B6(r,":");case"OOOO":default:return"GMT"+Id(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+B6(r,":");case"zzzz":default:return"GMT"+Id(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return wn(r,e.length)},T:function(t,e,n){const r=t.getTime();return wn(r,e.length)}};function B6(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),a=r%60;return a===0?n+String(s):n+String(s)+e+wn(a,2)}function U6(t,e){return t%60===0?(t>0?"-":"+")+wn(Math.abs(t)/60,2):Id(t,e)}function Id(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=wn(Math.trunc(r/60),2),a=wn(r%60,2);return n+s+e+a}const z6=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Une=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},SZe=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return z6(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",z6(r,e)).replace("{{time}}",Une(s,e))},EZe={p:Une,P:SZe},AZe=/^D+$/,TZe=/^Y+$/,CZe=["D","DD","YY","YYYY"];function PZe(t){return AZe.test(t)}function IZe(t){return TZe.test(t)}function kZe(t,e,n){const r=RZe(t,e,n);if(console.warn(r),CZe.includes(t))throw new RangeError(r)}function RZe(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const OZe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,DZe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,MZe=/^'([^]*?)'?$/,LZe=/''/g,$Ze=/[a-zA-Z]/;function mt(t,e,n){var d,h,f,m;const r=u1(),s=r.locale??bZe,a=r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=r.weekStartsOn??((m=(f=r.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??0,l=ts(t);if(!VXe(l))throw new RangeError("Invalid time value");let c=e.match(DZe).map(y=>{const p=y[0];if(p==="p"||p==="P"){const v=EZe[p];return v(y,s.formatLong)}return y}).join("").match(OZe).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const p=y[0];if(p==="'")return{isToken:!1,value:FZe(y)};if(V6[p])return{isToken:!0,value:y};if(p.match($Ze))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:y}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:a,weekStartsOn:o,locale:s};return c.map(y=>{if(!y.isToken)return y.value;const p=y.value;(IZe(p)||PZe(p))&&kZe(p,e,String(t));const v=V6[p[0]];return v(l,p,s.localize,u)}).join("")}function FZe(t){const e=t.match(MZe);return e?e[1].replace(LZe,"'"):t}function xf(t){return ts(t).getFullYear()}function zne(t){return+ts(t)<Date.now()}function q6(t,e){return Dne(t,-e)}function VZe(){const{user:t}=ht(),{data:e}=Ee({queryKey:["hr-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalEmployees:0,activeEmployees:0,permanentEmployees:0,contractEmployees:0,departments:0,monthlyPayroll:0,pendingPayroll:0,activeAdvances:0,totalAdvanceBalance:0,hoursLogged:0,pendingTimeEntries:0};const r=mt(new Date,"yyyy-MM"),s=`${r}-01`,a=new Date(parseInt(r.split("-")[0]),parseInt(r.split("-")[1]),0).toISOString().split("T")[0],{employees:o,payrollRuns:l,advances:c,timeEntries:u}=await jr.runQueries(t.id,{employees:{collectionName:Q.EMPLOYEES},payrollRuns:{collectionName:Q.PAYROLL_RUNS,filters:[{field:"runDate",op:">=",value:s},{field:"runDate",op:"<=",value:a}]},advances:{collectionName:Q.ADVANCES},timeEntries:{collectionName:Q.TIME_ENTRIES,filters:[{field:"workDate",op:">=",value:s}]}}),d=new Set(o.map(h=>Qe(h,["department"])).filter(h=>!!h));return{totalEmployees:o.length,activeEmployees:o.filter(h=>Qe(h,["employmentStatus","employment_status"])==="active").length,permanentEmployees:o.filter(h=>Qe(h,["contractType","contract_type"])==="permanent").length,contractEmployees:o.filter(h=>Qe(h,["contractType","contract_type"])==="contract").length,departments:d.size,monthlyPayroll:l.filter(h=>{const f=Qe(h,["status","payrollStatus","payroll_status"]).toLowerCase();return["processed","paid","payment_reversed","approved","final"].includes(f)}).reduce((h,f)=>h+en(f,["totalNet","total_net"]),0),pendingPayroll:l.filter(h=>{const f=Qe(h,["status","payrollStatus","payroll_status"]).toLowerCase();return["draft","pending"].includes(f)}).length,activeAdvances:c.filter(h=>Qe(h,["status"])==="active").length,totalAdvanceBalance:c.filter(h=>Qe(h,["status"])==="active").reduce((h,f)=>h+en(f,["remainingBalance","remaining_balance"]),0),hoursLogged:u.reduce((h,f)=>h+en(f,["hoursWorked","hours_worked"]),0),pendingTimeEntries:u.filter(h=>Qe(h,["status"])==="pending").length}}}),n=[{title:"Active Employees",value:(e==null?void 0:e.activeEmployees)||0,icon:di,color:"text-blue-500"},{title:"Monthly Payroll",value:ue((e==null?void 0:e.monthlyPayroll)||0),icon:Xn,color:"text-green-500"},{title:"Active Advances",value:(e==null?void 0:e.activeAdvances)||0,icon:Fm,color:"text-amber-500"},{title:"Hours Logged",value:`${(e==null?void 0:e.hoursLogged)||0}h`,icon:$i,color:"text-purple-500"}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"HR & Payroll Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Employee and payroll management overview"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(r=>i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:r.title}),i.jsx(r.icon,{className:`h-4 w-4 ${r.color}`})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:r.value})})]},r.title))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"Workforce Breakdown"})}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Employees"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.totalEmployees)||0})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Permanent Staff"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.permanentEmployees)||0})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Contract Staff"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.contractEmployees)||0})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Departments"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.departments)||0})]})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(ks,{className:"h-5 w-5 text-warning"}),"Pending Actions"]})}),i.jsxs(re,{className:"space-y-3",children:[(e==null?void 0:e.pendingPayroll)>0&&i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(ks,{className:"h-5 w-5 text-warning mt-0.5"}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-medium",children:[e.pendingPayroll," Pending Payroll Run(s)"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Awaiting approval"})]})]}),(e==null?void 0:e.pendingTimeEntries)>0&&i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx($i,{className:"h-5 w-5 text-accent mt-0.5"}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-medium",children:[e.pendingTimeEntries," Pending Time Entries"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Need review"})]})]}),i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Xn,{className:"h-5 w-5 text-amber-500 mt-0.5"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Outstanding Advances"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[ue((e==null?void 0:e.totalAdvanceBalance)||0)," remaining"]})]})]})]})]})]})]})}function BZe(){var r;const{user:t}=ht(),{data:e}=Ee({queryKey:["inventory-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalItems:0,lowStockCount:0,lowStockItems:[],totalValue:0,categories:0,recentMovements:0,inMovements:0,outMovements:0};const{items:s,movements:a}=await jr.runQueries(t.id,{items:{collectionName:Q.INVENTORY_ITEMS},movements:{collectionName:Q.STOCK_MOVEMENTS,orderByField:"createdAt",orderDirection:"desc",limitCount:100}}),o=s.filter(u=>{const d=en(u,["quantityOnHand","quantity_on_hand"]),h=en(u,["reorderPoint","reorder_point"]);return d<=h}),l=s.reduce((u,d)=>{const h=en(d,["quantityOnHand","quantity_on_hand"]),f=en(d,["unitCost","unit_cost"]);return u+h*f},0),c=new Set(s.map(u=>Qe(u,["category"])).filter(u=>!!u)).size;return{totalItems:s.length,lowStockCount:o.length,lowStockItems:o.slice(0,5),totalValue:l,categories:c,recentMovements:a.length,inMovements:a.filter(u=>Qe(u,["movementType","movement_type"])==="in").reduce((u,d)=>u+en(d,["quantity"]),0),outMovements:a.filter(u=>Qe(u,["movementType","movement_type"])==="out").reduce((u,d)=>u+en(d,["quantity"]),0)}}}),n=[{title:"Total Items",value:(e==null?void 0:e.totalItems)||0,icon:aa,color:"text-blue-500"},{title:"Low Stock Alerts",value:(e==null?void 0:e.lowStockCount)||0,icon:Oi,color:"text-red-500"},{title:"Total Value",value:ue((e==null?void 0:e.totalValue)||0),icon:Xn,color:"text-green-500"},{title:"Categories",value:(e==null?void 0:e.categories)||0,icon:ga,color:"text-purple-500"}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Inventory Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Stock levels and inventory management overview"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(s=>i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:s.title}),i.jsx(s.icon,{className:`h-4 w-4 ${s.color}`})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:s.value})})]},s.title))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs(X,{children:[i.jsx(te,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(Oi,{className:"h-5 w-5 text-destructive"}),"Low Stock Items"]})}),i.jsx(re,{children:i.jsxs("div",{className:"space-y-3",children:[(r=e==null?void 0:e.lowStockItems)==null?void 0:r.map(s=>i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:Qe(s,["name"],"Unnamed Item")}),i.jsxs("span",{className:"font-medium text-destructive",children:[en(s,["quantityOnHand","quantity_on_hand"])," / ",en(s,["reorderPoint","reorder_point"])]})]},Qe(s,["id","name"],"inventory-item"))),(!(e!=null&&e.lowStockItems)||e.lowStockItems.length===0)&&i.jsx("p",{className:"text-muted-foreground text-sm",children:"No low stock alerts"})]})})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"Recent Activity"})}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Items Received"}),i.jsxs("span",{className:"font-medium text-green-600",children:["+",(e==null?void 0:e.inMovements)||0]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Items Issued"}),i.jsxs("span",{className:"font-medium text-red-600",children:["-",(e==null?void 0:e.outMovements)||0]})]}),i.jsxs("div",{className:"border-t pt-3 flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Recent Movements"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.recentMovements)||0})]})]})]})]})]})}var GD="Progress",YD=100,[UZe,Wtt]=ps(GD),[zZe,qZe]=UZe(GD),qne=_.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=WZe,...o}=t;(s||s===0)&&!W6(s)&&console.error(HZe(`${s}`,"Progress"));const l=W6(s)?s:YD;r!==null&&!H6(r,l)&&console.error(KZe(`${r}`,"Progress"));const c=H6(r,l)?r:null,u=Hj(c)?a(c,l):void 0;return i.jsx(zZe,{scope:n,value:c,max:l,children:i.jsx(st.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Hj(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":Kne(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});qne.displayName=GD;var Wne="ProgressIndicator",Hne=_.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=qZe(Wne,n);return i.jsx(st.div,{"data-state":Kne(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});Hne.displayName=Wne;function WZe(t,e){return`${Math.round(t/e*100)}%`}function Kne(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Hj(t){return typeof t=="number"}function W6(t){return Hj(t)&&!isNaN(t)&&t>0}function H6(t,e){return Hj(t)&&!isNaN(t)&&t<=e&&t>=0}function HZe(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${YD}\`.`}function KZe(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${YD} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Gne=qne,GZe=Hne;const Su=_.forwardRef(({className:t,value:e,...n},r)=>i.jsx(Gne,{ref:r,className:ve("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:i.jsx(GZe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Su.displayName=Gne.displayName;function YZe(){var r;const{user:t}=ht(),{data:e}=Ee({queryKey:["project-manager-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalProjects:0,activeProjects:0,completedProjects:0,totalBudget:0,totalSpent:0,budgetUtilization:0,projectsNearBudget:[],pendingTimeEntries:0,totalHoursLogged:0,topProjects:[]};const{projects:s,timeEntries:a}=await jr.runQueries(t.id,{projects:{collectionName:Q.PROJECTS},projectExpenses:{collectionName:Q.PROJECT_EXPENSES},timeEntries:{collectionName:Q.TIME_ENTRIES}}),o=s.filter(m=>Qe(m,["status"])==="active"),l=s.filter(m=>Qe(m,["status"])==="completed"),c=o.reduce((m,y)=>m+en(y,["budget"]),0),u=o.reduce((m,y)=>m+en(y,["spent"]),0),d=o.filter(m=>{const y=en(m,["budget"]),p=en(m,["spent"]);return y>0&&p/y>=.8}),h=a.filter(m=>Qe(m,["status"])==="pending"),f=a.reduce((m,y)=>m+en(y,["hoursWorked","hours_worked"]),0);return{totalProjects:s.length,activeProjects:o.length,completedProjects:l.length,totalBudget:c,totalSpent:u,budgetUtilization:c>0?u/c*100:0,projectsNearBudget:d,pendingTimeEntries:h.length,totalHoursLogged:f,topProjects:o.slice(0,5)}}}),n=[{title:"Active Projects",value:(e==null?void 0:e.activeProjects)||0,icon:Uw,color:"text-primary"},{title:"Total Budget",value:ue((e==null?void 0:e.totalBudget)||0),icon:Xn,color:"text-green-500"},{title:"Total Spent",value:ue((e==null?void 0:e.totalSpent)||0),icon:ga,color:"text-blue-500"},{title:"Hours Logged",value:((r=e==null?void 0:e.totalHoursLogged)==null?void 0:r.toFixed(1))||"0",icon:$i,color:"text-blue-500"}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Project Manager Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Project portfolio and resource overview"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(s=>i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:s.title}),i.jsx(s.icon,{className:`h-4 w-4 ${s.color}`})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:s.value})})]},s.title))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs(X,{children:[i.jsx(te,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(ga,{className:"h-5 w-5 text-primary"}),"Budget Utilization"]})}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Overall Utilization"}),i.jsxs("span",{className:"font-medium",children:[((e==null?void 0:e.budgetUtilization)||0).toFixed(1),"%"]})]}),i.jsx(Su,{value:(e==null?void 0:e.budgetUtilization)||0,className:"h-2"})]}),i.jsxs("div",{className:"pt-4 space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Budget"}),i.jsx("span",{className:"font-medium",children:ue((e==null?void 0:e.totalBudget)||0)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Spent to Date"}),i.jsx("span",{className:"font-medium text-blue-500",children:ue((e==null?void 0:e.totalSpent)||0)})]}),i.jsxs("div",{className:"flex justify-between border-t pt-3",children:[i.jsx("span",{className:"font-semibold",children:"Remaining"}),i.jsx("span",{className:"font-bold text-green-600",children:ue(((e==null?void 0:e.totalBudget)||0)-((e==null?void 0:e.totalSpent)||0))})]})]})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsxs(ne,{className:"flex items-center gap-2 text-warning",children:[i.jsx(ks,{className:"h-5 w-5"}),"Projects Near Budget Limit"]})}),i.jsx(re,{children:e!=null&&e.projectsNearBudget&&e.projectsNearBudget.length>0?i.jsx("div",{className:"space-y-4",children:e.projectsNearBudget.map(s=>{const a=en(s,["budget"]),o=en(s,["spent"]),l=a>0?o/a*100:0;return i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"font-medium truncate max-w-[200px]",children:Qe(s,["name"],"Unnamed Project")}),i.jsxs("span",{className:l>=100?"text-destructive":"text-warning",children:[l.toFixed(0),"%"]})]}),i.jsx(Su,{value:Math.min(l,100),className:`h-2 ${l>=100?"[&>div]:bg-destructive":"[&>div]:bg-warning"}`}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[i.jsxs("span",{children:[ue(o)," spent"]}),i.jsxs("span",{children:[ue(a)," budget"]})]})]},Qe(s,["id"],"project"))})}):i.jsx("p",{className:"text-muted-foreground text-sm py-4",children:"No projects approaching budget limit"})})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(Uw,{className:"h-5 w-5 text-primary"}),"Active Projects Overview"]})}),i.jsx(re,{children:e!=null&&e.topProjects&&e.topProjects.length>0?i.jsx("div",{className:"space-y-4",children:e.topProjects.map(s=>{const a=en(s,["budget"]),o=en(s,["spent"]),l=a>0?o/a*100:0;return i.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/30",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"font-medium",children:Qe(s,["name"],"Unnamed Project")}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[Qe(s,["donorName","donor_name"],"No donor")," - ",Qe(s,["grantReference","grant_reference"],"No reference")]})]}),i.jsxs("div",{className:"text-right space-y-1",children:[i.jsx("p",{className:"font-medium",children:ue(o)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["of ",ue(a)]})]}),i.jsx("div",{className:"w-20",children:i.jsx(Su,{value:Math.min(l,100),className:"h-2"})})]},Qe(s,["id"],"project"))})}):i.jsx("p",{className:"text-muted-foreground text-sm py-4",children:"No active projects"})})]})]})}const Vt=_.forwardRef(({className:t,...e},n)=>i.jsx("div",{className:"relative w-full overflow-auto",children:i.jsx("table",{ref:n,className:ve("w-full caption-bottom text-sm",t),...e})}));Vt.displayName="Table";const Bt=_.forwardRef(({className:t,...e},n)=>i.jsx("thead",{ref:n,className:ve("[&_tr]:border-b",t),...e}));Bt.displayName="TableHeader";const Ut=_.forwardRef(({className:t,...e},n)=>i.jsx("tbody",{ref:n,className:ve("[&_tr:last-child]:border-0",t),...e}));Ut.displayName="TableBody";const QZe=_.forwardRef(({className:t,...e},n)=>i.jsx("tfoot",{ref:n,className:ve("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));QZe.displayName="TableFooter";const je=_.forwardRef(({className:t,...e},n)=>i.jsx("tr",{ref:n,className:ve("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",t),...e}));je.displayName="TableRow";const q=_.forwardRef(({className:t,...e},n)=>i.jsx("th",{ref:n,className:ve("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));q.displayName="TableHead";const U=_.forwardRef(({className:t,...e},n)=>i.jsx("td",{ref:n,className:ve("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));U.displayName="TableCell";const XZe=_.forwardRef(({className:t,...e},n)=>i.jsx("caption",{ref:n,className:ve("mt-4 text-sm text-muted-foreground",t),...e}));XZe.displayName="TableCaption";const ZZe=(t,e)=>{const n=Qe(t,e),r=n?new Date(n):null;return r&&!Number.isNaN(r.getTime())?r:null};function JZe(){const{user:t}=ht(),{data:e}=Ee({queryKey:["auditor-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{auditLogs:[],payrollRuns:[],expenseRows:[],projects:[]};const p=await jr.getCompanyIdForUser(t.id),v=new Date,b=new Date(v.getFullYear(),v.getMonth(),1).toISOString().slice(0,10),x=v.toISOString().slice(0,10),[w,C]=await Promise.all([_n.getExpenseReport({companyId:p,startDate:b,endDate:x}),jr.runQueries(t.id,{auditLogs:{collectionName:Q.AUDIT_LOGS,orderByField:"createdAt",orderDirection:"desc",limitCount:20},payrollRuns:{collectionName:Q.PAYROLL_RUNS,orderByField:"createdAt",orderDirection:"desc",limitCount:10},projects:{collectionName:Q.PROJECTS,orderByField:"createdAt",orderDirection:"desc"}})]);return{...C,expenseRows:w.rows}}}),n=(e==null?void 0:e.auditLogs)??[],r=(e==null?void 0:e.payrollRuns)??[],s=(e==null?void 0:e.expenseRows)??[],a=(e==null?void 0:e.projects)??[],o=p=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(p),l=r.filter(p=>{const v=Qe(p,["status","payrollStatus","payroll_status"]).toLowerCase();return v==="pending"||v==="draft"}).length,c=r.filter(p=>{const v=Qe(p,["status","payrollStatus","payroll_status"]).toLowerCase();return["approved","final","processed","paid","payment_reversed"].includes(v)}).length,u=s.reduce((p,v)=>p+Number(v.amount||0),0),d=a.filter(p=>en(p,["spent"])>en(p,["budget"])).length,h=n.length,f=s.filter(p=>Number(p.amount||0)>5e3).slice(0,5),m=n.reduce((p,v)=>{const b=Qe(v,["action"]).toUpperCase()||"UNKNOWN";return p[b]=(p[b]||0)+1,p},{}),y=a.filter(p=>{const v=en(p,["budget"]),b=en(p,["spent"]);return(v>0?b/v*100:0)>80});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Auditor Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Compliance monitoring and audit trail overview"})]}),i.jsxs(Ve,{variant:"outline",className:"flex items-center gap-1",children:[i.jsx(vh,{className:"h-3 w-3"}),"Audit Mode"]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Pending Approvals"}),i.jsx(Oi,{className:"h-4 w-4 text-warning"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:l}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Payroll runs awaiting approval"})]})]}),i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Approved Payrolls"}),i.jsx(a8,{className:"h-4 w-4 text-success"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:c}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Successfully processed"})]})]}),i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Projects Over Budget"}),i.jsx(ga,{className:"h-4 w-4 text-destructive"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:d}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Require attention"})]})]}),i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Recent Changes"}),i.jsx(Cu,{className:"h-4 w-4 text-primary"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:h}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Audit log entries (last 20)"})]})]})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[i.jsxs(X,{children:[i.jsx(te,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(Cu,{className:"h-5 w-5"}),"Recent Activity Log"]})}),i.jsx(re,{children:i.jsx(ih,{className:"h-[300px]",children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Action"}),i.jsx(q,{children:"Entity"}),i.jsx(q,{children:"Time"})]})}),i.jsx(Ut,{children:n.length===0?i.jsx(je,{children:i.jsx(U,{colSpan:3,className:"text-center text-muted-foreground",children:"No audit logs found"})}):n.map(p=>{const v=Qe(p,["action"]).toUpperCase(),b=ZZe(p,["createdAt","created_at"]);return i.jsxs(je,{children:[i.jsx(U,{children:i.jsx(Ve,{variant:v==="DELETE"?"destructive":v==="INSERT"?"default":"secondary",children:v||"UNKNOWN"})}),i.jsx(U,{className:"font-medium",children:Qe(p,["tableName","table_name","entity"],"Unknown")}),i.jsx(U,{className:"text-muted-foreground",children:b?mt(b,"MMM dd, HH:mm"):"-"})]},Qe(p,["id"],"audit-log"))})})]})})})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(Xn,{className:"h-5 w-5"}),"High-Value Expense Postings (> ZMW 5,000)"]})}),i.jsx(re,{children:i.jsx(ih,{className:"h-[300px]",children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Description"}),i.jsx(q,{children:"Expense Account"}),i.jsx(q,{className:"text-right",children:"Amount"})]})}),i.jsx(Ut,{children:f.length===0?i.jsx(je,{children:i.jsx(U,{colSpan:3,className:"text-center text-muted-foreground",children:"No high-value expenses found"})}):f.map((p,v)=>i.jsxs(je,{children:[i.jsx(U,{className:"font-medium max-w-[150px] truncate",children:p.description||"Expense"}),i.jsx(U,{children:i.jsx(Ve,{variant:"outline",children:p.expenseAccount||"Expense"})}),i.jsx(U,{className:"text-right font-mono",children:o(Number(p.amount||0))})]},`${p.expenseAccount}-${p.entryDate}-${v}`))})]})})})]})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[i.jsxs(X,{children:[i.jsx(te,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(di,{className:"h-5 w-5"}),"Action Distribution"]})}),i.jsx(re,{children:i.jsxs("div",{className:"space-y-3",children:[Object.entries(m).map(([p,v])=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(Ve,{variant:p==="DELETE"?"destructive":p==="INSERT"?"default":"secondary",children:p})}),i.jsx("span",{className:"font-bold",children:v})]},p)),Object.keys(m).length===0&&i.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No actions recorded"})]})})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(Fm,{className:"h-5 w-5"}),"Project Budget Alerts"]})}),i.jsx(re,{children:i.jsx(ih,{className:"h-[200px]",children:i.jsxs("div",{className:"space-y-3",children:[y.map(p=>{const v=en(p,["budget"]),b=en(p,["spent"]),x=v>0?b/v*100:0;return i.jsxs("div",{className:"flex items-center justify-between p-2 rounded border",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:Qe(p,["name"],"Project")}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Qe(p,["code"],"-")})]}),i.jsxs(Ve,{variant:x>100?"destructive":"secondary",children:[x.toFixed(0),"% used"]})]},Qe(p,["id"],"project"))}),y.length===0&&i.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No budget alerts"})]})})})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"Total Expense Volume"})}),i.jsx(re,{children:i.jsx("p",{className:"text-2xl font-bold",children:o(u)})})]})]})}function eJe(){var s;const{user:t}=ht(),{data:e}=Ee({queryKey:["financial-manager-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalRevenue:0,totalExpenses:0,cashBalance:0,unpaidBills:0,pendingApprovals:0,pendingApprovalsAmount:0,expensesPendingApproval:0,lastPayrollGross:0,lastPayrollNet:0,monthlyProfit:0,bankAccounts:[]};const a=await jr.getCompanyIdForUser(t.id),[o,{expenses:l,bankAccounts:c,payrollRuns:u,approvalRequests:d}]=await Promise.all([_n.getDashboardLiveMetrics({companyId:a}),jr.runQueries(t.id,{invoices:{collectionName:Q.INVOICES},expenses:{collectionName:Q.EXPENSES},bankAccounts:{collectionName:Q.BANK_ACCOUNTS},payrollRuns:{collectionName:Q.PAYROLL_RUNS,orderByField:"createdAt",orderDirection:"desc"},approvalRequests:{collectionName:Q.APPROVAL_REQUESTS}})]),h=d.filter(f=>Qe(f,["status"])==="pending");return{totalRevenue:o.monthlyIncome,totalExpenses:o.monthlyExpenses,cashBalance:o.bankDefaultBalance,unpaidBills:o.outstandingAccountsPayable,pendingApprovals:h.length,pendingApprovalsAmount:h.reduce((f,m)=>f+en(m,["amount"]),0),expensesPendingApproval:l.filter(f=>Qe(f,["approvalStatus","approval_status"])==="pending").length,lastPayrollGross:u[0]?en(u[0],["totalGross","total_gross"]):0,lastPayrollNet:u[0]?en(u[0],["totalNet","total_net"]):0,monthlyProfit:o.monthlyProfit,bankAccounts:c}}}),n=((e==null?void 0:e.totalRevenue)||0)-((e==null?void 0:e.totalExpenses)||0),r=[{title:"Total Revenue",value:ue((e==null?void 0:e.totalRevenue)||0),icon:Xn,color:"text-green-500"},{title:"Total Expenses",value:ue((e==null?void 0:e.totalExpenses)||0),icon:lo,color:"text-destructive"},{title:"Cash Balance",value:ue((e==null?void 0:e.cashBalance)||0),icon:gh,color:"text-primary"},{title:"Pending Approvals",value:(e==null?void 0:e.pendingApprovals)||0,icon:Jk,color:"text-warning"}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Financial Manager Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Oversee all financial operations and approvals"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:r.map(a=>i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:a.title}),i.jsx(a.icon,{className:`h-4 w-4 ${a.color}`})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:a.value})})]},a.title))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[i.jsxs(X,{children:[i.jsx(te,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(ga,{className:"h-5 w-5 text-primary"}),"Profit & Loss"]})}),i.jsxs(re,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Revenue"}),i.jsx("span",{className:"font-medium text-green-600",children:ue((e==null?void 0:e.totalRevenue)||0)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Expenses"}),i.jsxs("span",{className:"font-medium text-destructive",children:["(",ue((e==null?void 0:e.totalExpenses)||0),")"]})]}),i.jsxs("div",{className:"border-t pt-2 flex justify-between",children:[i.jsx("span",{className:"font-semibold",children:"Net Income"}),i.jsx("span",{className:`font-bold ${n>=0?"text-green-600":"text-destructive"}`,children:ue(n)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Monthly Profit (GL)"}),i.jsx("span",{className:"font-medium",children:ue((e==null?void 0:e.monthlyProfit)||0)})]})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(Oi,{className:"h-5 w-5 text-warning"}),"Pending Actions"]})}),i.jsxs(re,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Approval Requests"}),i.jsx(Ve,{variant:e!=null&&e.pendingApprovals?"destructive":"secondary",children:(e==null?void 0:e.pendingApprovals)||0})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Approvals Value"}),i.jsx("span",{className:"font-medium",children:ue((e==null?void 0:e.pendingApprovalsAmount)||0)})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Expenses Pending"}),i.jsx(Ve,{variant:e!=null&&e.expensesPendingApproval?"outline":"secondary",children:(e==null?void 0:e.expensesPendingApproval)||0})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Unpaid Bills"}),i.jsx("span",{className:"font-medium text-destructive",children:ue((e==null?void 0:e.unpaidBills)||0)})]})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(Qo,{className:"h-5 w-5 text-green-500"}),"Payroll Summary"]})}),i.jsxs(re,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Last Gross Payroll"}),i.jsx("span",{className:"font-medium",children:ue((e==null?void 0:e.lastPayrollGross)||0)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Last Net Payroll"}),i.jsx("span",{className:"font-medium",children:ue((e==null?void 0:e.lastPayrollNet)||0)})]}),i.jsxs("div",{className:"border-t pt-2",children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Bank Accounts"}),(s=e==null?void 0:e.bankAccounts)==null?void 0:s.map(a=>i.jsxs("div",{className:"flex justify-between mt-1",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:Qe(a,["accountName","account_name"],"Bank Account")}),i.jsx("span",{className:"text-sm font-medium",children:ue(en(a,["currentBalance","current_balance"]))})]},Qe(a,["accountName","account_name","id"],"bank-account")))]})]})]})]})]})}function tJe(){const{user:t}=ht(),{data:e}=Ee({queryKey:["assistant-accountant-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{draftInvoices:0,pendingInvoices:0,recentExpenses:0,totalExpenses:0,unpaidBills:0,unpaidBillsAmount:0,unpostedJournals:0,totalCustomers:0,totalVendors:0};const r=await jr.getCompanyIdForUser(t.id),s=new Date,a=new Date(s.getFullYear(),s.getMonth(),1).toISOString().slice(0,10),o=s.toISOString().slice(0,10),[l,c,{invoices:u,bills:d,journalEntries:h,customers:f,vendors:m}]=await Promise.all([_n.getDashboardLiveMetrics({companyId:r}),_n.getExpenseReport({companyId:r,startDate:a,endDate:o}),jr.runQueries(t.id,{invoices:{collectionName:Q.INVOICES},bills:{collectionName:Q.BILLS},journalEntries:{collectionName:Q.JOURNAL_ENTRIES},customers:{collectionName:Q.CUSTOMERS},vendors:{collectionName:Q.VENDORS}})]),y=p=>{const v=p.toLowerCase();return["sent","unpaid","partially paid","overdue","pending"].includes(v)};return{draftInvoices:u.filter(p=>Qe(p,["status"]).toLowerCase()==="draft").length,pendingInvoices:u.filter(p=>y(Qe(p,["status"]))).length,recentExpenses:c.rows.length,totalExpenses:l.monthlyExpenses,unpaidBills:d.filter(p=>Qe(p,["status"]).toLowerCase()!=="paid").length,unpaidBillsAmount:l.outstandingAccountsPayable,unpostedJournals:h.filter(p=>!yy(p,["isPosted","is_posted"])).length,totalCustomers:f.length,totalVendors:m.length}}}),n=[{title:"Draft Invoices",value:(e==null?void 0:e.draftInvoices)||0,subtitle:`${(e==null?void 0:e.pendingInvoices)||0} pending`,icon:dr},{title:"Unpaid Bills",value:(e==null?void 0:e.unpaidBills)||0,subtitle:ue((e==null?void 0:e.unpaidBillsAmount)||0),icon:Fx},{title:"Total Expenses",value:ue((e==null?void 0:e.totalExpenses)||0),subtitle:`${(e==null?void 0:e.recentExpenses)||0} records`,icon:lo},{title:"Unposted Journals",value:(e==null?void 0:e.unpostedJournals)||0,subtitle:"Awaiting review",icon:fv}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Assistant Accountant Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Data entry tasks and bookkeeping overview"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(r=>i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:r.title}),i.jsx(r.icon,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:r.value}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r.subtitle})]})]},r.title))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs(X,{children:[i.jsx(te,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(Cu,{className:"h-5 w-5 text-primary"}),"Daily Tasks"]})}),i.jsxs(re,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Record new expenses"}),i.jsxs("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:[(e==null?void 0:e.recentExpenses)||0," total"]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Process draft invoices"}),i.jsxs("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:[(e==null?void 0:e.draftInvoices)||0," drafts"]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Review unposted journals"}),i.jsxs("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:[(e==null?void 0:e.unpostedJournals)||0," unposted"]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Process vendor bills"}),i.jsxs("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:[(e==null?void 0:e.unpaidBills)||0," unpaid"]})]})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(gh,{className:"h-5 w-5 text-primary"}),"Directory"]})}),i.jsxs(re,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Customers"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.totalCustomers)||0})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Vendors"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.totalVendors)||0})]})]})]})]})]})}function nJe(){const{user:t}=ht(),{data:e}=Ee({queryKey:["finance-officer-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{paidInvoices:0,pendingInvoices:0,overdueInvoices:0,totalExpenses:0,pendingExpenses:0,unpaidBills:0,overdueBills:0,cashBalance:0};const r=await jr.getCompanyIdForUser(t.id),[s,{invoices:a,expenses:o,bills:l}]=await Promise.all([_n.getDashboardLiveMetrics({companyId:r}),jr.runQueries(t.id,{invoices:{collectionName:Q.INVOICES},expenses:{collectionName:Q.EXPENSES},bills:{collectionName:Q.BILLS}})]),c=new Date().toISOString().split("T")[0];return{paidInvoices:s.monthlyIncome,pendingInvoices:a.filter(u=>{const d=Qe(u,["status"]).toLowerCase();return!["paid","cancelled","rejected"].includes(d)}).length,overdueInvoices:a.filter(u=>{const d=Qe(u,["dueDate","due_date"]);return Qe(u,["status"]).toLowerCase()!=="paid"&&!!d&&d<c}).length,totalExpenses:s.monthlyExpenses,pendingExpenses:o.filter(u=>Qe(u,["approvalStatus","approval_status"])==="pending").length,unpaidBills:s.outstandingAccountsPayable,overdueBills:l.filter(u=>{const d=Qe(u,["dueDate","due_date"]);return Qe(u,["status"]).toLowerCase()!=="paid"&&!!d&&d<c}).length,cashBalance:s.bankDefaultBalance}}}),n=[{title:"Monthly Revenue",value:ue((e==null?void 0:e.paidInvoices)||0),icon:Xn},{title:"Total Expenses",value:ue((e==null?void 0:e.totalExpenses)||0),icon:lo},{title:"Unpaid Bills",value:ue((e==null?void 0:e.unpaidBills)||0),icon:Fx},{title:"Cash Balance",value:ue((e==null?void 0:e.cashBalance)||0),icon:gh}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Finance Officer Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage invoices, bills, and expenses"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(r=>i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:r.title}),i.jsx(r.icon,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:r.value})})]},r.title))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs(X,{children:[i.jsx(te,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(dr,{className:"h-5 w-5 text-primary"}),"Invoice Status"]})}),i.jsxs(re,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Pending Invoices"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.pendingInvoices)||0})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Overdue Invoices"}),i.jsx("span",{className:"font-medium text-destructive",children:(e==null?void 0:e.overdueInvoices)||0})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Expenses Pending Approval"}),i.jsx("span",{className:"font-medium",children:(e==null?void 0:e.pendingExpenses)||0})]})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(Oi,{className:"h-5 w-5 text-warning"}),"Alerts"]})}),i.jsxs(re,{className:"space-y-3",children:[((e==null?void 0:e.overdueInvoices)||0)>0&&i.jsxs("div",{className:"p-2 bg-destructive/10 rounded text-sm text-destructive",children:[e==null?void 0:e.overdueInvoices," overdue invoice(s) require follow-up"]}),((e==null?void 0:e.overdueBills)||0)>0&&i.jsxs("div",{className:"p-2 bg-warning/10 rounded text-sm text-warning",children:[e==null?void 0:e.overdueBills," overdue bill(s) need payment"]}),((e==null?void 0:e.overdueInvoices)||0)===0&&((e==null?void 0:e.overdueBills)||0)===0&&i.jsx("p",{className:"text-muted-foreground text-sm",children:"No urgent alerts"})]})]})]})]})}function rJe(){var r,s;const{user:t}=ht(),{data:e}=Ee({queryKey:["cashier-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{cashBalance:0,totalBalance:0,cashAccounts:[],recentReconciliations:[],recentReceipts:[],recentPayments:[],todayReceipts:0,todayPayments:0};const a=await jr.getCompanyIdForUser(t.id),o=new Date,l=o.toISOString().slice(0,10),c=new Date(o.getFullYear(),o.getMonth(),1).toISOString().slice(0,10),[u,d,h,{cashReconciliations:f}]=await Promise.all([_n.getDashboardLiveMetrics({companyId:a}),_n.getBalanceSheetReport({companyId:a,asOfDate:l}),_n.getCashFlowReport({companyId:a,startDate:c,endDate:l}),jr.runQueries(t.id,{cashReconciliations:{collectionName:Q.CASH_RECONCILIATIONS,orderByField:"reconciliationDate",orderDirection:"desc",limitCount:5}})]),m=d.assets.filter(b=>{const x=b.accountName.toLowerCase();return x.includes("cash")||x.includes("bank")||x.includes("money")}),y=m.map(b=>({accountName:b.accountName,currentBalance:b.balance})),p=h.rows.filter(b=>b.moneyIn>0).slice(0,5).map(b=>({description:b.description||b.referenceType||"Receipt",amount:b.moneyIn})),v=h.rows.filter(b=>b.moneyOut>0).slice(0,5).map(b=>({description:b.description||b.referenceType||"Payment",amount:b.moneyOut}));return{cashBalance:u.bankDefaultBalance,totalBalance:m.reduce((b,x)=>b+Number(x.balance||0),0),cashAccounts:y,recentReconciliations:f,recentReceipts:p,recentPayments:v,todayReceipts:h.rows.reduce((b,x)=>b+Number(x.moneyIn||0),0),todayPayments:h.rows.reduce((b,x)=>b+Number(x.moneyOut||0),0)}}}),n=[{title:"Cash on Hand",value:ue((e==null?void 0:e.cashBalance)||0),icon:Va,color:"text-green-500"},{title:"Total Balance",value:ue((e==null?void 0:e.totalBalance)||0),icon:n8,color:"text-primary"},{title:"Recent Receipts",value:ue((e==null?void 0:e.todayReceipts)||0),icon:n4,color:"text-green-500"},{title:"Recent Payments",value:ue((e==null?void 0:e.todayPayments)||0),icon:zoe,color:"text-destructive"}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Cashier Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Cash transactions and petty cash management"})]}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(a=>i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:a.title}),i.jsx(a.icon,{className:`h-4 w-4 ${a.color}`})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:a.value})})]},a.title))}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs(X,{children:[i.jsx(te,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(n4,{className:"h-5 w-5 text-green-500"}),"Recent Receipts"]})}),i.jsx(re,{children:i.jsx("div",{className:"space-y-2",children:(r=e==null?void 0:e.recentReceipts)!=null&&r.length?e.recentReceipts.map((a,o)=>i.jsxs("div",{className:"flex justify-between items-center text-sm",children:[i.jsx("span",{className:"text-muted-foreground truncate max-w-[60%]",children:Qe(a,["description"],"Deposit")}),i.jsx("span",{className:"font-medium text-green-600",children:ue(en(a,["amount"]))})]},o)):i.jsx("p",{className:"text-muted-foreground text-sm",children:"No recent receipts"})})})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(Woe,{className:"h-5 w-5 text-primary"}),"Recent Reconciliations"]})}),i.jsx(re,{children:i.jsx("div",{className:"space-y-2",children:(s=e==null?void 0:e.recentReconciliations)!=null&&s.length?e.recentReconciliations.map(a=>i.jsxs("div",{className:"flex justify-between items-center text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:Qe(a,["reconciliationDate","reconciliation_date"],"-")}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium",children:ue(en(a,["closingBalance","closing_balance"]))}),i.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${Qe(a,["status"])==="approved"?"bg-green-100 text-green-700":"bg-muted text-muted-foreground"}`,children:Qe(a,["status"],"pending")})]})]},Qe(a,["id"],"reconciliation"))):i.jsx("p",{className:"text-muted-foreground text-sm",children:"No reconciliations yet"})})})]})]})]})}function sJe(){return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Staff Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Your personal workspace"})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Time Tracking"}),i.jsx($i,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:""}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Log your hours"})]})]}),i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"My Payslips"}),i.jsx(dr,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:""}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"View payslip history"})]})]}),i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Leave Balance"}),i.jsx(Boe,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:""}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Days remaining"})]})]}),i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"My Profile"}),i.jsx(h8,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:""}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"View personal info"})]})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"Welcome"})}),i.jsx(re,{children:i.jsx("p",{className:"text-muted-foreground",children:"Use the sidebar to access time tracking and view your information. Contact your HR manager for any employment-related queries."})})]})]})}function K6(){const{user:t}=ht(),{data:e}=Ee({queryKey:["readonly-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalRevenue:0,totalExpenses:0,invoiceCount:0};const r=await jr.getCompanyIdForUser(t.id),[s,{invoices:a}]=await Promise.all([_n.getDashboardLiveMetrics({companyId:r}),jr.runQueries(t.id,{invoices:{collectionName:Q.INVOICES}})]);return{totalRevenue:s.monthlyIncome,totalExpenses:s.monthlyExpenses,invoiceCount:a.length}}}),n=((e==null?void 0:e.totalRevenue)||0)-((e==null?void 0:e.totalExpenses)||0);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),i.jsxs("p",{className:"text-muted-foreground flex items-center gap-1",children:[i.jsx(Hoe,{className:"h-4 w-4"})," View-only access"]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Total Revenue"}),i.jsx(Xn,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:ue((e==null?void 0:e.totalRevenue)||0)})})]}),i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Total Expenses"}),i.jsx(lo,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:ue((e==null?void 0:e.totalExpenses)||0)})})]}),i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Net Income"}),i.jsx(ga,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:`text-2xl font-bold ${n>=0?"text-green-600":"text-destructive"}`,children:ue(n)})})]}),i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Total Invoices"}),i.jsx(di,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:(e==null?void 0:e.invoiceCount)||0})})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"Read-Only Access"})}),i.jsx(re,{children:i.jsx("p",{className:"text-muted-foreground",children:"You have view-only access to this system. Contact your administrator to request additional permissions."})})]})]})}function iJe(){const{data:t,isLoading:e}=ei();if(e)return i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});switch(t){case"super_admin":case"admin":return i.jsx(RXe,{});case"financial_manager":return i.jsx(eJe,{});case"accountant":return i.jsx(OXe,{});case"assistant_accountant":return i.jsx(tJe,{});case"finance_officer":return i.jsx(nJe,{});case"bookkeeper":return i.jsx(DXe,{});case"cashier":return i.jsx(rJe,{});case"hr_manager":return i.jsx(VZe,{});case"inventory_manager":return i.jsx(BZe,{});case"project_manager":return i.jsx(YZe,{});case"auditor":return i.jsx(JZe,{});case"staff":return i.jsx(sJe,{});case"read_only":return i.jsx(K6,{});default:return i.jsx(K6,{})}}const aJe=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},G6=t=>{if(!t)return"";if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return""};function oJe(){const[t,e]=_.useState(""),{user:n}=ht(),{data:r}=ei(),s=tn(),a=nS(),o=["super_admin","admin","financial_manager","accountant","assistant_accountant"].includes(r||""),{data:l,isLoading:c}=Ee({queryKey:["invoices",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const f=await Be.getPrimaryMembershipByUser(n.id);if(!(f!=null&&f.companyId))return[];const m=we(se,Q.INVOICES),p=(await Ce(Te(m,he("companyId","==",f.companyId)))).docs.map(x=>{const w=x.data();return{id:x.id,invoiceNumber:String(w.invoiceNumber??w.invoice_number??""),invoiceDate:G6(w.invoiceDate??w.invoice_date),dueDate:G6(w.dueDate??w.due_date)||null,customerId:w.customerId??w.customer_id??null,customerName:"-",total:Number(w.totalAmount??w.total_amount??w.total??0),amountPaid:Number(w.amountPaid??w.amount_paid??0),status:String(w.status??"draft"),journal_entry_id:w.journalEntryId??w.journal_entry_id??null}}),v=Array.from(new Set(p.map(x=>x.customerId).filter(Boolean))),b=new Map;if(v.length>0){const x=we(se,Q.CUSTOMERS),w=aJe(v,30);(await Promise.all(w.map(S=>Ce(Te(x,he(to(),"in",S)))))).forEach(S=>{S.docs.forEach(P=>{const j=P.data();b.set(P.id,String(j.name??"-"))})})}return p.map(x=>({...x,customerName:x.customerId&&b.get(x.customerId)||"-"})).sort((x,w)=>String(w.invoiceDate).localeCompare(String(x.invoiceDate)))},enabled:!!n}),u=Xe({mutationFn:async f=>{if(!n)throw new Error("Not authenticated");if(!f.journal_entry_id)throw new Error("Invoice has no posted journal entry to reverse.");if(Number(f.amountPaid||0)>.001)throw new Error("Reverse invoice payment entries first before reversing this invoice.");const m=await Be.getPrimaryMembershipByUser(n.id);if(!(m!=null&&m.companyId))throw new Error("Company context not found");const y=prompt(`Reason for reversing invoice ${f.invoiceNumber} (optional):`)||void 0;return _n.reverseJournalEntry({companyId:m.companyId,journalEntryId:f.journal_entry_id,reason:y})},onSuccess:()=>{s.invalidateQueries({queryKey:["invoices",n==null?void 0:n.id]}),s.invalidateQueries({queryKey:["accounts-receivable"]}),s.invalidateQueries({queryKey:["customers"]}),s.invalidateQueries({queryKey:["bank-accounts"]}),s.invalidateQueries({queryKey:["journal-entries"]}),s.invalidateQueries({queryKey:["financial-reports"]}),s.invalidateQueries({queryKey:["dashboard"]}),Y.success("Invoice journal entry reversed")},onError:f=>{Y.error(`Failed to reverse invoice: ${f.message}`)}}),d=f=>{switch(f){case"paid":return"default";case"sent":return"secondary";case"overdue":return"destructive";case"draft":return"outline";default:return"secondary"}},h=l==null?void 0:l.filter(f=>f.invoiceNumber.toLowerCase().includes(t.toLowerCase())||f.customerName.toLowerCase().includes(t.toLowerCase()));return c?i.jsx("div",{children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Invoices"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage customer invoices and payments"})]}),i.jsx(Ii,{to:"/invoices/new",children:i.jsxs(H,{className:"gap-2",children:[i.jsx(Nn,{className:"h-4 w-4"}),"New Invoice"]})})]}),i.jsxs(X,{children:[i.jsxs(te,{children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ne,{children:"All Invoices"}),!a&&i.jsxs("div",{className:"relative w-64",children:[i.jsx(Ds,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"Search invoices...",value:t,onChange:f=>e(f.target.value),className:"pl-8"})]})]}),a&&i.jsxs("div",{className:"relative mt-4",children:[i.jsx(Ds,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"Search invoices...",value:t,onChange:f=>e(f.target.value),className:"pl-8 w-full"})]})]}),i.jsx(re,{children:a?i.jsxs("div",{className:"space-y-4",children:[h==null?void 0:h.map(f=>i.jsxs("div",{className:"border rounded-lg p-4 space-y-3 bg-card shadow-sm",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold text-foreground",children:f.invoiceNumber}),i.jsx("p",{className:"text-sm text-muted-foreground",children:f.customerName||"-"})]}),i.jsx(Ve,{variant:d(f.status||"draft"),children:f.status})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Date"}),i.jsx("p",{children:f.invoiceDate?mt(new Date(f.invoiceDate),"dd MMM yyyy"):"-"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Due Date"}),i.jsx("p",{children:f.dueDate?mt(new Date(f.dueDate),"dd MMM yyyy"):"-"})]})]}),i.jsxs("div",{className:"pt-2 border-t flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Total Amount"}),i.jsxs("span",{className:"text-lg font-bold text-primary",children:["ZMW ",f.total.toFixed(2)]})]}),f.journal_entry_id&&o&&i.jsx("div",{className:"pt-2",children:i.jsxs(H,{variant:"outline",size:"sm",className:"w-full",disabled:u.isPending||Number(f.amountPaid||0)>.001,onClick:()=>{if(Number(f.amountPaid||0)>.001){Y.error("Reverse invoice payments first before reversing this invoice.");return}confirm("Reverse this invoice posting? This creates an opposite journal entry.")&&u.mutate(f)},children:[i.jsx(Cl,{className:"h-4 w-4 mr-2"}),"Reverse Posting"]})})]},f.id)),(h==null?void 0:h.length)===0&&i.jsx("div",{className:"text-center p-4 text-muted-foreground",children:"No invoices found"})]}):i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Invoice #"}),i.jsx(q,{children:"Date"}),i.jsx(q,{children:"Customer"}),i.jsx(q,{children:"Due Date"}),i.jsx(q,{className:"text-right",children:"Amount"}),i.jsx(q,{children:"Status"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ut,{children:[h==null?void 0:h.map(f=>i.jsxs(je,{children:[i.jsx(U,{className:"font-medium",children:f.invoiceNumber}),i.jsx(U,{children:f.invoiceDate?mt(new Date(f.invoiceDate),"dd MMM yyyy"):"-"}),i.jsx(U,{children:f.customerName||"-"}),i.jsx(U,{children:f.dueDate?mt(new Date(f.dueDate),"dd MMM yyyy"):"-"}),i.jsxs(U,{className:"text-right font-medium",children:["ZMW ",f.total.toFixed(2)]}),i.jsx(U,{children:i.jsx(Ve,{variant:d(f.status||"draft"),children:f.status})}),i.jsx(U,{className:"text-right",children:f.journal_entry_id&&o&&i.jsx(H,{variant:"ghost",size:"icon",disabled:u.isPending||Number(f.amountPaid||0)>.001,onClick:()=>{if(Number(f.amountPaid||0)>.001){Y.error("Reverse invoice payments first before reversing this invoice.");return}confirm("Reverse this invoice posting? This creates an opposite journal entry.")&&u.mutate(f)},title:Number(f.amountPaid||0)>.001?"Reverse payments first":"Reverse invoice posting",children:i.jsx(Cl,{className:"h-4 w-4"})})})]},f.id)),(h==null?void 0:h.length)===0&&i.jsx(je,{children:i.jsx(U,{colSpan:7,className:"text-center text-muted-foreground",children:"No invoices found"})})]})]})})]})]})}const Zn=_.forwardRef(({className:t,...e},n)=>i.jsx("textarea",{className:ve("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));Zn.displayName="Textarea";function ud(){const{user:t,isAuthenticated:e}=ht();return Ee({queryKey:["company-settings",t==null?void 0:t.id],queryFn:async()=>{if(!t||!qo)return null;const n=await Be.getPrimaryMembershipByUser(t.id);return n?Be.getCompanySettings(n.companyId):null},enabled:e&&!!t})}function lJe(t){const e=tn(),{data:n,isLoading:r}=Ee({queryKey:["zra-status",t],queryFn:async()=>null,enabled:!!t}),s=Xe({mutationFn:async o=>kt("zraSmartInvoice",{action:"submit_invoice",invoiceId:o}),onSuccess:o=>{o.success?(Y.success(`Invoice submitted to ZRA: ${o.zra_invoice_number??"Submitted"}`),e.invalidateQueries({queryKey:["invoices"]}),e.invalidateQueries({queryKey:["zra-status"]})):Y.warning(o.message||"Invoice queued for ZRA submission")},onError:o=>{Y.error(o.message||"Failed to submit to ZRA")}}),a=Xe({mutationFn:async()=>kt("zraSmartInvoice",{action:"retry_pending"}),onSuccess:o=>{Y.success(`Processed ${o.processed??0} pending invoices`),e.invalidateQueries({queryKey:["invoices"]}),e.invalidateQueries({queryKey:["zra-status"]})},onError:o=>{Y.error(o.message||"Failed to retry pending invoices")}});return{zraStatus:n,isLoadingStatus:r,submitToZRA:s,retryPending:a,isSubmitting:s.isPending,isRetrying:a.isPending}}function cJe(){const{user:t}=ht(),e=$n(),n=tn(),[r]=NR(),s=r.get("customer"),{data:a}=ud(),{submitToZRA:o,isSubmitting:l}=lJe(),[c,u]=_.useState(s||""),[d,h]=_.useState(`INV-${Date.now()}`),[f,m]=_.useState(new Date().toISOString().split("T")[0]),[y,p]=_.useState(""),[v,b]=_.useState(""),[x,w]=_.useState(""),[C,S]=_.useState(!0);_.useState(!1),_.useState(""),_.useState("A");const[P,j]=_.useState([{id:"1",description:"",quantity:1,rate:0,amount:0}]);Ee({queryKey:["customers",t==null?void 0:t.id],queryFn:async()=>{if(!t)return[];const O=await Be.getPrimaryMembershipByUser(t.id);return O!=null&&O.companyId?(await Ce(Te(we(se,Q.CUSTOMERS),he("companyId","==",O.companyId)))).docs.map(Z=>{const ae=Z.data();return{id:Z.id,name:String(ae.name??"")}}).sort((Z,ae)=>Z.name.localeCompare(ae.name)):[]},enabled:!!t});const{data:g}=Ee({queryKey:["new-invoice-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const O=await Be.getPrimaryMembershipByUser(t.id);return(O==null?void 0:O.companyId)??null},enabled:!!t}),T=(a==null?void 0:a.isVatRegistered)||!1,E=(a==null?void 0:a.vatRate)||16,A=()=>{j([...P,{id:Date.now().toString(),description:"",quantity:1,rate:0,amount:0}])},I=O=>{P.length>1&&j(P.filter(W=>W.id!==O))},k=(O,W,Z)=>{j(P.map(ae=>{if(ae.id===O){const Ae={...ae,[W]:Z};return(W==="quantity"||W==="rate")&&(Ae.amount=Ae.quantity*Ae.rate),Ae}return ae}))},L=P.reduce((O,W)=>O+W.amount,0),V=T?L*(E/100):0,B=L+V,M=Xe({mutationFn:async O=>{if(!g||!t)throw new Error("No company context found");const W=P.filter(Z=>Z.description.trim().length>0).map(Z=>({description:Z.description.trim(),quantity:Z.quantity,unitPrice:Z.rate}));if(W.length===0)throw new Error("At least one invoice line item is required.");return _n.createInvoice({companyId:g,customerId:c||void 0,invoiceNumber:d,invoiceDate:f,dueDate:y||f,status:O==="sent"?"Unpaid":"Draft",notes:[v,x].filter(Boolean).join(`

`)||void 0,taxAmount:V,totalAmount:B,lineItems:W})},onSuccess:async(O,W)=>{if(T&&C&&W==="sent")try{await o.mutateAsync(O.invoiceId)}catch{console.log("ZRA submission queued for retry")}n.invalidateQueries({queryKey:["invoices"]}),n.invalidateQueries({queryKey:["accounts-receivable"]}),n.invalidateQueries({queryKey:["customers"]}),n.invalidateQueries({queryKey:["dashboard"]}),Y.success(W==="sent"?"Invoice sent successfully":"Invoice saved as draft"),e("/invoices")},onError:O=>{Y.error("Failed to save invoice: "+O.message)}}),$=(O=!1)=>{M.mutate(O?"sent":"draft")};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"New Invoice"}),i.jsxs("p",{className:"text-muted-foreground",children:["Create a new invoice for a customer",T&&i.jsxs("span",{className:"ml-2 text-xs bg-primary/10 text-primary px-2 py-0.5 rounded",children:["VAT ",E,"%"]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(H,{variant:"outline",onClick:()=>e("/invoices"),children:"Cancel"}),i.jsxs(H,{variant:"outline",className:"gap-2",onClick:()=>$(!1),disabled:M.isPending,children:[i.jsx(yh,{className:"h-4 w-4"}),"Save Draft"]}),i.jsxs(H,{className:"gap-2",onClick:()=>$(!0),disabled:M.isPending,children:[i.jsx(Zk,{className:"h-4 w-4"}),"Save & Send"]})]})]}),i.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"Invoice Details"})}),i.jsx(re,{className:"space-y-4",children:i.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Due Date"}),i.jsx(G,{type:"date",value:y,onChange:O=>p(O.target.value)})]})})})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"Line Items"})}),i.jsx(re,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-12 text-sm font-medium text-muted-foreground",children:[i.jsx("div",{className:"md:col-span-5",children:"Description"}),i.jsx("div",{className:"md:col-span-2",children:"Qty"}),i.jsx("div",{className:"md:col-span-2",children:"Rate (ZMW)"}),i.jsx("div",{className:"md:col-span-2",children:"Amount"}),i.jsx("div",{className:"md:col-span-1"})]}),P.map(O=>i.jsxs("div",{className:"grid gap-4 md:grid-cols-12 items-start",children:[i.jsx("div",{className:"md:col-span-5",children:i.jsx(Zn,{placeholder:"Description",value:O.description,onChange:W=>k(O.id,"description",W.target.value),rows:2})}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(G,{type:"number",placeholder:"Qty",value:O.quantity,onChange:W=>k(O.id,"quantity",parseFloat(W.target.value)||0),min:"0",step:"0.01"})}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(G,{type:"number",placeholder:"Rate",value:O.rate,onChange:W=>k(O.id,"rate",parseFloat(W.target.value)||0),min:"0",step:"0.01"})}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(G,{value:`ZMW ${O.amount.toFixed(2)}`,disabled:!0,className:"bg-muted"})}),i.jsx("div",{className:"md:col-span-1",children:i.jsx(H,{type:"button",variant:"ghost",size:"icon",onClick:()=>I(O.id),disabled:P.length===1,children:i.jsx(Ms,{className:"h-4 w-4"})})})]},O.id)),i.jsxs(H,{type:"button",variant:"outline",className:"gap-2",onClick:A,children:[i.jsx(Nn,{className:"h-4 w-4"}),"Add Line"]})]})})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"Notes & Terms"})}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"notes",children:"Notes (visible to customer)"}),i.jsx(Zn,{id:"notes",placeholder:"Add any notes or special instructions",rows:3,value:v,onChange:O=>b(O.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"terms",children:"Terms & Conditions"}),i.jsx(Zn,{id:"terms",placeholder:"Payment terms and conditions",rows:3,value:x,onChange:O=>w(O.target.value)})]})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"Summary"})}),i.jsxs(re,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),i.jsxs("span",{className:"font-medium",children:["ZMW ",L.toFixed(2)]})]}),T&&i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsxs("span",{className:"text-muted-foreground",children:["VAT (",E,"%)"]}),i.jsxs("span",{className:"font-medium",children:["ZMW ",V.toFixed(2)]})]}),i.jsxs("div",{className:"border-t pt-3 flex justify-between",children:[i.jsx("span",{className:"font-semibold",children:"Total"}),i.jsxs("span",{className:"text-xl font-bold text-primary",children:["ZMW ",B.toFixed(2)]})]})]})]}),T&&i.jsx(X,{className:"border-primary/20 bg-primary/5",children:i.jsxs(re,{className:"pt-4 space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(a8,{className:"h-4 w-4 text-primary"}),i.jsx("span",{className:"font-medium text-sm",children:"ZRA Smart Invoice"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm",children:"Submit to ZRA on send"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Invoice will be submitted for ZRA approval"})]}),i.jsx(us,{checked:C,onCheckedChange:S})]}),l&&i.jsxs(Ve,{variant:"outline",className:"animate-pulse",children:[i.jsx(ks,{className:"h-3 w-3 mr-1"}),"Submitting to ZRA..."]})]})}),!T&&i.jsx(X,{className:"bg-muted/50",children:i.jsx(re,{className:"pt-4",children:i.jsxs("p",{className:"text-sm text-muted-foreground",children:["VAT is not applied. To enable VAT, go to"," ",i.jsx(H,{variant:"link",className:"p-0 h-auto",onClick:()=>e("/settings"),children:"Settings"})," ","and enable VAT registration."]})})})]})]})]})}function uJe(){const t=$n(),{user:e}=ht(),{data:n}=ei(),r=n==="super_admin"||n==="admin",{data:s,isLoading:a,refetch:o}=Ee({queryKey:["employees",e==null?void 0:e.id],queryFn:async()=>{if(!e)return[];const c=await Be.getPrimaryMembershipByUser(e.id);if(!(c!=null&&c.companyId))return[];const u=we(se,Q.EMPLOYEES),h=(await Ce(Te(u,he("companyId","==",c.companyId)))).docs.map(f=>{const m=f.data();return{id:f.id,employeeNumber:String(m.employeeNumber??m.employee_number??""),fullName:String(m.fullName??m.full_name??""),position:m.position??null,department:m.department??null,basicSalary:Number(m.basicSalary??m.basic_salary??0),employmentStatus:String(m.employmentStatus??m.employment_status??"active")}});return h.sort((f,m)=>f.fullName.localeCompare(m.fullName)),h},enabled:!!e}),l=async c=>{if(!r){Y.error("Only Admin users can delete employee records.");return}if(confirm("Are you sure you want to delete this employee?"))try{await Gl(Je(se,Q.EMPLOYEES,c)),Y.success("Employee deleted successfully"),o()}catch{Y.error("Failed to delete employee")}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Employees"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your employee records"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(H,{variant:"outline",onClick:()=>t("/employees/bulk-upload"),children:[i.jsx(nl,{className:"mr-2 h-4 w-4"}),"Bulk Upload"]}),i.jsxs(H,{onClick:()=>t("/employees/new"),children:[i.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Add Employee"]})]})]}),a?i.jsx("div",{children:"Loading..."}):i.jsx("div",{className:"border rounded-lg",children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Employee #"}),i.jsx(q,{children:"Name"}),i.jsx(q,{children:"Position"}),i.jsx(q,{children:"Department"}),i.jsx(q,{children:"Basic Salary"}),i.jsx(q,{children:"Status"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ut,{children:[s==null?void 0:s.map(c=>i.jsxs(je,{children:[i.jsx(U,{className:"font-medium",children:c.employeeNumber}),i.jsx(U,{children:c.fullName}),i.jsx(U,{children:c.position||"-"}),i.jsx(U,{children:c.department||"-"}),i.jsx(U,{children:ue(c.basicSalary)}),i.jsx(U,{children:i.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${c.employmentStatus==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:c.employmentStatus})}),i.jsxs(U,{className:"text-right",children:[i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>t(`/employees/${c.id}/edit`),children:i.jsx(Mp,{className:"h-4 w-4"})}),r&&i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>l(c.id),children:i.jsx(Ms,{className:"h-4 w-4"})})]})]},c.id)),(s==null?void 0:s.length)===0&&i.jsx(je,{children:i.jsx(U,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No employees found. Add your first employee to get started."})})]})]})})]})}const d1=BTe,Yne=_.createContext({}),lt=({...t})=>i.jsx(Yne.Provider,{value:{name:t.name},children:i.jsx(WTe,{...t})}),h1=()=>{const t=_.useContext(Yne),e=_.useContext(Qne),{getFieldState:n,formState:r}=hS(),s=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:a}=e;return{id:a,name:t.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...s}},Qne=_.createContext({}),at=_.forwardRef(({className:t,...e},n)=>{const r=_.useId();return i.jsx(Qne.Provider,{value:{id:r},children:i.jsx("div",{ref:n,className:ve("space-y-2",t),...e})})});at.displayName="FormItem";const ct=_.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:s}=h1();return i.jsx(ee,{ref:n,className:ve(r&&"text-destructive",t),htmlFor:s,...e})});ct.displayName="FormLabel";const ot=_.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:s,formMessageId:a}=h1();return i.jsx(qh,{ref:e,id:r,"aria-describedby":n?`${s} ${a}`:`${s}`,"aria-invalid":!!n,...t})});ot.displayName="FormControl";const ch=_.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=h1();return i.jsx("p",{ref:n,id:r,className:ve("text-sm text-muted-foreground",t),...e})});ch.displayName="FormDescription";const ut=_.forwardRef(({className:t,children:e,...n},r)=>{const{error:s,formMessageId:a}=h1(),o=s?String(s==null?void 0:s.message):e;return o?i.jsx("p",{ref:r,id:a,className:ve("text-sm font-medium text-destructive",t),...n,children:o}):null});ut.displayName="FormMessage";var f1="Tabs",[dJe,Htt]=ps(f1,[GN]),Xne=GN(),[hJe,QD]=dJe(f1),Zne=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=sb(l),[h,f]=oo({prop:r,onChange:s,defaultProp:a??"",caller:f1});return i.jsx(hJe,{scope:n,baseId:oa(),value:h,onValueChange:f,orientation:o,dir:d,activationMode:c,children:i.jsx(st.div,{dir:d,"data-orientation":o,...u,ref:e})})});Zne.displayName=f1;var Jne="TabsList",ere=_.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,a=QD(Jne,n),o=Xne(n);return i.jsx(AK,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:i.jsx(st.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:e})})});ere.displayName=Jne;var tre="TabsTrigger",nre=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=t,o=QD(tre,n),l=Xne(n),c=ire(o.baseId,r),u=are(o.baseId,r),d=r===o.value;return i.jsx(TK,{asChild:!0,...l,focusable:!s,active:d,children:i.jsx(st.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...a,ref:e,onMouseDown:Me(t.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:Me(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:Me(t.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!s&&h&&o.onValueChange(r)})})})});nre.displayName=tre;var rre="TabsContent",sre=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...o}=t,l=QD(rre,n),c=ire(l.baseId,r),u=are(l.baseId,r),d=r===l.value,h=_.useRef(d);return _.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),i.jsx(gs,{present:s||d,children:({present:f})=>i.jsx(st.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:f&&a})})});sre.displayName=rre;function ire(t,e){return`${t}-trigger-${e}`}function are(t,e){return`${t}-content-${e}`}var fJe=Zne,ore=ere,lre=nre,cre=sre;const m1=fJe,Nb=_.forwardRef(({className:t,...e},n)=>i.jsx(ore,{ref:n,className:ve("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Nb.displayName=ore.displayName;const so=_.forwardRef(({className:t,...e},n)=>i.jsx(lre,{ref:n,className:ve("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...e}));so.displayName=lre.displayName;const io=_.forwardRef(({className:t,...e},n)=>i.jsx(cre,{ref:n,className:ve("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));io.displayName=cre.displayName;function mJe({form:t}){return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(lt,{control:t.control,name:"employee_number",render:({field:e})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Employee No *"}),i.jsx(ot,{children:i.jsx(G,{placeholder:"EMP001",...e})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:t.control,name:"nrc_number",render:({field:e})=>i.jsxs(at,{children:[i.jsx(ct,{children:"NRC/ID Number"}),i.jsx(ot,{children:i.jsx(G,{placeholder:"123456/78/1",...e})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:t.control,name:"tpin",render:({field:e})=>i.jsxs(at,{children:[i.jsx(ct,{children:"TPIN"}),i.jsx(ot,{children:i.jsx(G,{placeholder:"1234567890",maxLength:10,...e})}),i.jsx(ut,{})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(lt,{control:t.control,name:"napsa_number",render:({field:e})=>i.jsxs(at,{children:[i.jsx(ct,{children:"NAPSA No"}),i.jsx(ot,{children:i.jsx(G,{...e})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:t.control,name:"nhima_number",render:({field:e})=>i.jsxs(at,{children:[i.jsx(ct,{children:"NHIMA No"}),i.jsx(ot,{children:i.jsx(G,{...e})}),i.jsx(ut,{})]})})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Personal Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(lt,{control:t.control,name:"full_name",render:({field:e})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Full Name *"}),i.jsx(ot,{children:i.jsx(G,{placeholder:"John Doe",...e})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:t.control,name:"date_of_birth",render:({field:e})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Date of Birth"}),i.jsx(ot,{children:i.jsx(G,{type:"date",...e})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:t.control,name:"gender",render:({field:e})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Gender"}),i.jsxs(Tt,{onValueChange:e.onChange,value:e.value,children:[i.jsx(ot,{children:i.jsx(jt,{children:i.jsx(Ct,{placeholder:"Select gender"})})}),i.jsxs(Nt,{children:[i.jsx(be,{value:"male",children:"Male"}),i.jsx(be,{value:"female",children:"Female"}),i.jsx(be,{value:"other",children:"Other"})]})]}),i.jsx(ut,{})]})}),i.jsx(lt,{control:t.control,name:"nationality",render:({field:e})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Nationality"}),i.jsx(ot,{children:i.jsx(G,{placeholder:"Zambian",...e})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:t.control,name:"marital_status",render:({field:e})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Marital Status"}),i.jsxs(Tt,{onValueChange:e.onChange,value:e.value,children:[i.jsx(ot,{children:i.jsx(jt,{children:i.jsx(Ct,{placeholder:"Select status"})})}),i.jsxs(Nt,{children:[i.jsx(be,{value:"single",children:"Single"}),i.jsx(be,{value:"married",children:"Married"}),i.jsx(be,{value:"divorced",children:"Divorced"}),i.jsx(be,{value:"widowed",children:"Widowed"})]})]}),i.jsx(ut,{})]})}),i.jsx(lt,{control:t.control,name:"phone",render:({field:e})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Phone"}),i.jsx(ot,{children:i.jsx(G,{placeholder:"+260 9X XXX XXXX",...e})}),i.jsx(ut,{})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-4 mt-4",children:[i.jsx(lt,{control:t.control,name:"address",render:({field:e})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Address"}),i.jsx(ot,{children:i.jsx(G,{placeholder:"123 Main Street, Lusaka",...e})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:t.control,name:"email",render:({field:e})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Email (for payslips)"}),i.jsx(ot,{children:i.jsx(G,{type:"email",placeholder:"john.doe@example.com",...e})}),i.jsx(ut,{})]})})]})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Organization"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsx(lt,{control:t.control,name:"department",render:({field:e})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Department"}),i.jsx(ot,{children:i.jsx(G,{placeholder:"Finance",...e})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:t.control,name:"division",render:({field:e})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Division"}),i.jsx(ot,{children:i.jsx(G,{placeholder:"Operations",...e})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:t.control,name:"position",render:({field:e})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Job Title"}),i.jsx(ot,{children:i.jsx(G,{placeholder:"Accountant",...e})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:t.control,name:"job_grade",render:({field:e})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Grade"}),i.jsx(ot,{children:i.jsx(G,{placeholder:"Grade 5",...e})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:t.control,name:"cost_centre",render:({field:e})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Cost Centre"}),i.jsx(ot,{children:i.jsx(G,{placeholder:"CC001",...e})}),i.jsx(ut,{})]})})]})]})]})}const pJe=Wh("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),zu=_.forwardRef(({className:t,variant:e,...n},r)=>i.jsx("div",{ref:r,role:"alert",className:ve(pJe({variant:e}),t),...n}));zu.displayName="Alert";const ure=_.forwardRef(({className:t,...e},n)=>i.jsx("h5",{ref:n,className:ve("mb-1 font-medium leading-none tracking-tight",t),...e}));ure.displayName="AlertTitle";const qu=_.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:ve("text-sm [&_p]:leading-relaxed",t),...e}));qu.displayName="AlertDescription";function gJe({form:t}){const e=t.watch("contract_type"),n=e==="consultant";return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(lt,{control:t.control,name:"contract_type",render:({field:r})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Employment Type *"}),i.jsxs(Tt,{onValueChange:r.onChange,value:r.value,children:[i.jsx(ot,{children:i.jsx(jt,{children:i.jsx(Ct,{placeholder:"Select type"})})}),i.jsxs(Nt,{children:[i.jsx(be,{value:"permanent",children:"Permanent"}),i.jsx(be,{value:"fixed-term",children:"Fixed-Term Contract"}),i.jsx(be,{value:"temporary",children:"Temporary"}),i.jsx(be,{value:"internship",children:"Internship"}),i.jsx(be,{value:"consultant",children:"Consultant"})]})]}),i.jsx(ut,{})]})}),i.jsx(lt,{control:t.control,name:"employment_status",render:({field:r})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Status"}),i.jsxs(Tt,{onValueChange:r.onChange,value:r.value||"active",children:[i.jsx(ot,{children:i.jsx(jt,{children:i.jsx(Ct,{})})}),i.jsxs(Nt,{children:[i.jsx(be,{value:"active",children:"Active"}),i.jsx(be,{value:"inactive",children:"Inactive"}),i.jsx(be,{value:"terminated",children:"Terminated"}),i.jsx(be,{value:"on_leave",children:"On Leave"})]})]}),i.jsx(ut,{})]})})]}),n&&i.jsxs(zu,{children:[i.jsx(ks,{className:"h-4 w-4"}),i.jsxs(qu,{children:[i.jsx("strong",{children:"Consultant:"})," PAYE, NAPSA, and NHIMA will be disabled. Withholding Tax (WHT) will apply based on consultant type."]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(lt,{control:t.control,name:"employment_date",render:({field:r})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Engagement Date *"}),i.jsx(ot,{children:i.jsx(G,{type:"date",...r})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:t.control,name:"contract_end_date",render:({field:r})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Contract End Date"}),i.jsx(ot,{children:i.jsx(G,{type:"date",...r})}),i.jsx(ut,{})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(lt,{control:t.control,name:"currency",render:({field:r})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Currency"}),i.jsxs(Tt,{onValueChange:r.onChange,value:r.value||"ZMW",children:[i.jsx(ot,{children:i.jsx(jt,{children:i.jsx(Ct,{})})}),i.jsxs(Nt,{children:[i.jsx(be,{value:"ZMW",children:"ZMW - Zambian Kwacha"}),i.jsx(be,{value:"USD",children:"USD - US Dollar"}),i.jsx(be,{value:"EUR",children:"EUR - Euro"}),i.jsx(be,{value:"GBP",children:"GBP - British Pound"})]})]}),i.jsx(ut,{})]})}),i.jsx(lt,{control:t.control,name:"pay_point",render:({field:r})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Pay Point"}),i.jsx(ot,{children:i.jsx(G,{placeholder:"Head Office",...r})}),i.jsx(ut,{})]})})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Bank Details"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(lt,{control:t.control,name:"bank_name",render:({field:r})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Bank Name"}),i.jsx(ot,{children:i.jsx(G,{placeholder:"Zanaco",...r})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:t.control,name:"bank_branch",render:({field:r})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Branch"}),i.jsx(ot,{children:i.jsx(G,{placeholder:"Cairo Road",...r})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:t.control,name:"bank_account_number",render:({field:r})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Account Number"}),i.jsx(ot,{children:i.jsx(G,{placeholder:"1234567890",...r})}),i.jsx(ut,{})]})})]})]}),(e==="fixed-term"||e==="consultant")&&i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Contract Options"}),i.jsx(lt,{control:t.control,name:"has_gratuity",render:({field:r})=>i.jsxs(at,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx(ct,{className:"text-base",children:"Attracts Gratuity"}),i.jsx(ch,{children:"Enable if this contract includes gratuity payment at end"})]}),i.jsx(ot,{children:i.jsx(us,{checked:r.value,onCheckedChange:r.onChange})})]})}),t.watch("has_gratuity")&&i.jsx("div",{className:"mt-4",children:i.jsx(lt,{control:t.control,name:"gratuity_rate",render:({field:r})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Gratuity Rate (%)"}),i.jsx(ot,{children:i.jsx(G,{type:"number",step:"0.01",placeholder:"25",...r})}),i.jsx(ch,{children:"Standard rate is 25% of total basic pay earned"}),i.jsx(ut,{})]})})})]})]})}function yJe({form:t}){const e=Number(t.watch("basic_salary"))||0,n=Number(t.watch("housing_allowance"))||0,r=Number(t.watch("transport_allowance"))||0,s=Number(t.watch("other_allowances"))||0,a=e+n+r+s;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(lt,{control:t.control,name:"rate_type",render:({field:o})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Rate Type"}),i.jsxs(Tt,{onValueChange:o.onChange,value:o.value||"monthly",children:[i.jsx(ot,{children:i.jsx(jt,{children:i.jsx(Ct,{})})}),i.jsxs(Nt,{children:[i.jsx(be,{value:"monthly",children:"Monthly"}),i.jsx(be,{value:"daily",children:"Daily"}),i.jsx(be,{value:"hourly",children:"Hourly"})]})]}),i.jsx(ut,{})]})}),i.jsx(lt,{control:t.control,name:"basic_salary",render:({field:o})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Basic Pay (ZMW) *"}),i.jsx(ot,{children:i.jsx(G,{type:"number",step:"0.01",placeholder:"5000.00",...o})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:t.control,name:"pay_rate",render:({field:o})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Pay Rate"}),i.jsx(ot,{children:i.jsx(G,{type:"number",step:"0.01",placeholder:"Rate per period",...o})}),i.jsx(ch,{children:"Optional alternative rate"}),i.jsx(ut,{})]})})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Allowances"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(lt,{control:t.control,name:"housing_allowance",render:({field:o})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Housing Allowance (ZMW)"}),i.jsx(ot,{children:i.jsx(G,{type:"number",step:"0.01",placeholder:"1500.00",...o})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:t.control,name:"transport_allowance",render:({field:o})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Transport Allowance (ZMW)"}),i.jsx(ot,{children:i.jsx(G,{type:"number",step:"0.01",placeholder:"500.00",...o})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:t.control,name:"other_allowances",render:({field:o})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Other Allowances (ZMW)"}),i.jsx(ot,{children:i.jsx(G,{type:"number",step:"0.01",placeholder:"0.00",...o})}),i.jsx(ch,{children:"Meal, medical, or other fixed allowances"}),i.jsx(ut,{})]})})]})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("h3",{className:"text-lg font-medium mb-4",children:"Overtime Rates"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.jsx(lt,{control:t.control,name:"overtime_rate_multiplier",render:({field:o})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Overtime Multiplier"}),i.jsx(ot,{children:i.jsx(G,{type:"number",step:"0.1",placeholder:"1.5",...o})}),i.jsx(ch,{children:"e.g., 1.5 = time and a half"}),i.jsx(ut,{})]})})})]}),i.jsxs(X,{className:"bg-muted/50",children:[i.jsx(te,{children:i.jsx(ne,{className:"text-lg",children:"Pay Summary"})}),i.jsx(re,{children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Basic Salary"}),i.jsx("p",{className:"text-lg font-semibold",children:ue(e)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Housing"}),i.jsx("p",{className:"text-lg font-semibold",children:ue(n)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Transport"}),i.jsx("p",{className:"text-lg font-semibold",children:ue(r)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Gross Salary"}),i.jsx("p",{className:"text-xl font-bold text-primary",children:ue(a)})]})]})})]})]})}const vJe=rd({employee_number:We().min(1,"Employee number is required"),nrc_number:We().optional(),tpin:We().optional(),napsa_number:We().optional(),nhima_number:We().optional(),full_name:We().min(1,"Full name is required"),date_of_birth:We().optional(),gender:We().optional(),nationality:We().optional(),marital_status:We().optional(),phone:We().optional(),address:We().optional(),email:We().email().optional().or($X("")),department:We().optional(),division:We().optional(),position:We().optional(),job_grade:We().optional(),cost_centre:We().optional(),contract_type:We().optional(),employment_status:We().default("active"),employment_date:We().min(1,"Employment date is required"),contract_end_date:We().optional(),currency:We().default("ZMW"),pay_point:We().optional(),bank_name:We().optional(),bank_branch:We().optional(),bank_account_number:We().optional(),has_gratuity:OB().default(!1),gratuity_rate:We().optional(),rate_type:We().default("monthly"),basic_salary:We().min(1,"Basic salary is required"),pay_rate:We().optional(),housing_allowance:We().optional(),transport_allowance:We().optional(),other_allowances:We().optional(),overtime_rate_multiplier:We().optional(),send_invite:OB().default(!1)});function xJe(){const t=$n(),{data:e}=ud(),{user:n}=ht(),[r,s]=_.useState("personal"),[a,o]=_.useState(!1),l=td({resolver:nd(vJe),defaultValues:{employment_status:"active",has_gratuity:!1,send_invite:!1,currency:"ZMW",rate_type:"monthly",nationality:"Zambian"}}),c=async h=>{o(!0);try{if(!n){Y.error("You must be logged in");return}const f=await Be.getPrimaryMembershipByUser(n.id);if(!(f!=null&&f.companyId)){Y.error("No company profile found for your account");return}const m=await es(we(se,Q.EMPLOYEES),{employeeNumber:h.employee_number,nrcNumber:h.nrc_number||null,tpin:h.tpin||null,napsaNumber:h.napsa_number||null,nhimaNumber:h.nhima_number||null,fullName:h.full_name,dateOfBirth:h.date_of_birth||null,gender:h.gender||null,nationality:h.nationality||null,maritalStatus:h.marital_status||null,phone:h.phone||null,address:h.address||null,email:h.email||null,department:h.department||null,division:h.division||null,position:h.position||null,jobGrade:h.job_grade||null,costCentre:h.cost_centre||null,contractType:h.contract_type||null,employmentStatus:h.employment_status||"active",employmentDate:h.employment_date,contractEndDate:h.contract_end_date||null,hasGratuity:h.has_gratuity||!1,gratuityRate:h.gratuity_rate?Number(h.gratuity_rate):0,bankName:h.bank_name||null,bankBranch:h.bank_branch||null,bankAccountNumber:h.bank_account_number||null,basicSalary:Number(h.basic_salary),housingAllowance:h.housing_allowance?Number(h.housing_allowance):0,transportAllowance:h.transport_allowance?Number(h.transport_allowance):0,otherAllowances:h.other_allowances?Number(h.other_allowances):0,userId:n.id,companyId:f.companyId,createdAt:Re(),updatedAt:Re()}),y=h.contract_type==="consultant";if(await xr(Je(se,Q.EMPLOYEE_PAYROLL_PROFILES,`${f.companyId}_${m.id}`),{employeeId:m.id,companyId:f.companyId,rateType:h.rate_type,payRate:h.pay_rate?Number(h.pay_rate):null,overtimeRateMultiplier:h.overtime_rate_multiplier?Number(h.overtime_rate_multiplier):1.5,currency:h.currency,applyPaye:!y,applyNapsa:!y,applyNhima:!y,isConsultant:y,applyWht:y,consultantType:y?"local":null,createdAt:Re(),updatedAt:Re()}),h.send_invite&&h.email)try{await Ps.sendInvitation({inviteeName:h.full_name,email:h.email,role:"staff",loginUrl:`${window.location.origin}/auth`})}catch{const v=(e==null?void 0:e.companyName)||"ZedBooks";Y.warning(`Employee created, but invite setup failed for ${v}`)}Y.success("Employee created successfully"),t(`/employees/${m.id}/payroll-setup`)}catch{Y.error("Failed to create employee")}finally{o(!1)}},u=()=>{r==="personal"?s("engagement"):r==="engagement"&&s("pay")},d=()=>{r==="pay"?s("engagement"):r==="engagement"&&s("personal")};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>t("/employees"),children:[i.jsx(pa,{className:"h-4 w-4 mr-2"}),"Back"]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Add New Employee"}),i.jsx("p",{className:"text-muted-foreground",children:"Complete the onboarding form in 3 steps"})]})]}),i.jsx(d1,{...l,children:i.jsx("form",{onSubmit:l.handleSubmit(c),children:i.jsxs(m1,{value:r,onValueChange:s,className:"space-y-6",children:[i.jsxs(Nb,{className:"grid w-full grid-cols-3",children:[i.jsxs(so,{value:"personal",className:"flex items-center gap-2",children:[i.jsx("span",{className:"hidden sm:inline",children:"1."})," Personal Details"]}),i.jsxs(so,{value:"engagement",className:"flex items-center gap-2",children:[i.jsx("span",{className:"hidden sm:inline",children:"2."})," Engagement"]}),i.jsxs(so,{value:"pay",className:"flex items-center gap-2",children:[i.jsx("span",{className:"hidden sm:inline",children:"3."})," Pay"]})]}),i.jsx(X,{children:i.jsxs(re,{className:"pt-6",children:[i.jsx(io,{value:"personal",className:"mt-0",children:i.jsx(mJe,{form:l})}),i.jsx(io,{value:"engagement",className:"mt-0",children:i.jsx(gJe,{form:l})}),i.jsx(io,{value:"pay",className:"mt-0",children:i.jsx(yJe,{form:l})})]})}),r==="pay"&&i.jsxs(X,{children:[i.jsxs(te,{children:[i.jsx(ne,{children:"Employee Invite"}),i.jsx(pt,{children:"Send login credentials to the employee"})]}),i.jsx(re,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Gu,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx(ee,{children:"Send Invite Email"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Send login credentials to employee's email"})]})]}),i.jsx(us,{checked:l.watch("send_invite"),onCheckedChange:h=>l.setValue("send_invite",h),disabled:!l.watch("email")})]})})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx(H,{type:"button",variant:"outline",onClick:d,disabled:r==="personal",children:"Previous"}),i.jsx("div",{className:"flex gap-2",children:r!=="pay"?i.jsxs(H,{type:"button",onClick:u,children:["Next",i.jsx(s8,{className:"h-4 w-4 ml-1"})]}):i.jsxs(H,{type:"submit",disabled:a,children:[i.jsx(yh,{className:"h-4 w-4 mr-2"}),a?"Saving...":"Save & Setup Payroll"]})})]})]})})})]})}const bJe=rd({full_name:We().min(2,"Name must be at least 2 characters"),employee_number:We().min(1,"Employee number is required"),position:We().optional(),department:We().optional(),email:We().email().optional().or($X("")),phone:We().optional(),basic_salary:We().min(1,"Basic salary is required"),housing_allowance:We().optional(),transport_allowance:We().optional(),other_allowances:We().optional(),employment_date:We().min(1,"Employment date is required"),employment_status:FX(["active","inactive","terminated"]),tpin:We().optional(),napsa_number:We().optional(),nhima_number:We().optional(),bank_name:We().optional(),bank_branch:We().optional(),bank_account_number:We().optional()}),wJe=t=>{if(!t)return"";if(typeof t=="string")return t.slice(0,10);if(t instanceof Date)return t.toISOString().slice(0,10);if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString().slice(0,10)}return""};function _Je(){const t=$n(),{id:e}=Hh(),{user:n}=ht(),{data:r,isLoading:s}=Ee({queryKey:["employee",e,n==null?void 0:n.id],queryFn:async()=>{if(!e||!n)return null;const l=await Be.getPrimaryMembershipByUser(n.id);if(!(l!=null&&l.companyId))return null;const c=Je(se,Q.EMPLOYEES,e),u=await bi(c);if(!u.exists())return null;const d=u.data(),h=d.companyId??d.company_id;return h&&h!==l.companyId?null:{id:u.id,...d}},enabled:!!(e&&n)}),a=td({resolver:nd(bJe)});_.useEffect(()=>{r&&a.reset({full_name:String(r.fullName??r.full_name??""),employee_number:String(r.employeeNumber??r.employee_number??""),position:String(r.position??""),department:String(r.department??""),email:String(r.email??""),phone:String(r.phone??""),basic_salary:String(r.basicSalary??r.basic_salary??""),housing_allowance:String(r.housingAllowance??r.housing_allowance??0),transport_allowance:String(r.transportAllowance??r.transport_allowance??0),other_allowances:String(r.otherAllowances??r.other_allowances??0),employment_date:wJe(r.employmentDate??r.employment_date),employment_status:String(r.employmentStatus??r.employment_status??"active"),tpin:String(r.tpin??""),napsa_number:String(r.napsaNumber??r.napsa_number??""),nhima_number:String(r.nhimaNumber??r.nhima_number??""),bank_name:String(r.bankName??r.bank_name??""),bank_branch:String(r.bankBranch??r.bank_branch??""),bank_account_number:String(r.bankAccountNumber??r.bank_account_number??"")})},[r,a]);const o=async l=>{try{if(!e||!n){Y.error("You must be logged in");return}const c=await Be.getPrimaryMembershipByUser(n.id);if(!(c!=null&&c.companyId)){Y.error("No company profile found for your account");return}await xr(Je(se,Q.EMPLOYEES,e),{companyId:c.companyId,employeeNumber:l.employee_number,fullName:l.full_name,position:l.position||null,department:l.department||null,email:l.email||null,phone:l.phone||null,basicSalary:Number(l.basic_salary),housingAllowance:l.housing_allowance?Number(l.housing_allowance):0,transportAllowance:l.transport_allowance?Number(l.transport_allowance):0,otherAllowances:l.other_allowances?Number(l.other_allowances):0,employmentDate:l.employment_date,employmentStatus:l.employment_status,tpin:l.tpin||null,napsaNumber:l.napsa_number||null,nhimaNumber:l.nhima_number||null,bankName:l.bank_name||null,bankBranch:l.bank_branch||null,bankAccountNumber:l.bank_account_number||null,updatedAt:Re()},{merge:!0}),Y.success("Employee updated successfully"),t("/employees")}catch{Y.error("Failed to update employee")}};return s?i.jsx("div",{children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>t("/employees"),children:[i.jsx(pa,{className:"h-4 w-4 mr-2"}),"Back"]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Edit Employee"}),i.jsx("p",{className:"text-muted-foreground",children:"Update employee information"})]})]}),i.jsx(d1,{...a,children:i.jsxs("form",{onSubmit:a.handleSubmit(o),className:"space-y-6",children:[i.jsxs("div",{className:"border rounded-lg p-6 space-y-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Personal Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(lt,{control:a.control,name:"full_name",render:({field:l})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Full Name *"}),i.jsx(ot,{children:i.jsx(G,{...l})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:a.control,name:"employee_number",render:({field:l})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Employee Number *"}),i.jsx(ot,{children:i.jsx(G,{...l})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:a.control,name:"position",render:({field:l})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Position"}),i.jsx(ot,{children:i.jsx(G,{...l})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:a.control,name:"department",render:({field:l})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Department"}),i.jsx(ot,{children:i.jsx(G,{...l})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:a.control,name:"email",render:({field:l})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Email"}),i.jsx(ot,{children:i.jsx(G,{type:"email",...l})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:a.control,name:"phone",render:({field:l})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Phone"}),i.jsx(ot,{children:i.jsx(G,{...l})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:a.control,name:"employment_date",render:({field:l})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Employment Date *"}),i.jsx(ot,{children:i.jsx(G,{type:"date",...l})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:a.control,name:"employment_status",render:({field:l})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Employment Status *"}),i.jsxs(Tt,{onValueChange:l.onChange,defaultValue:l.value,children:[i.jsx(ot,{children:i.jsx(jt,{children:i.jsx(Ct,{})})}),i.jsxs(Nt,{children:[i.jsx(be,{value:"active",children:"Active"}),i.jsx(be,{value:"inactive",children:"Inactive"}),i.jsx(be,{value:"terminated",children:"Terminated"})]})]}),i.jsx(ut,{})]})})]})]}),i.jsxs("div",{className:"border rounded-lg p-6 space-y-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Salary Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(lt,{control:a.control,name:"basic_salary",render:({field:l})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Basic Salary (ZMW) *"}),i.jsx(ot,{children:i.jsx(G,{type:"number",step:"0.01",...l})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:a.control,name:"housing_allowance",render:({field:l})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Housing Allowance (ZMW)"}),i.jsx(ot,{children:i.jsx(G,{type:"number",step:"0.01",...l})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:a.control,name:"transport_allowance",render:({field:l})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Transport Allowance (ZMW)"}),i.jsx(ot,{children:i.jsx(G,{type:"number",step:"0.01",...l})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:a.control,name:"other_allowances",render:({field:l})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Other Allowances (ZMW)"}),i.jsx(ot,{children:i.jsx(G,{type:"number",step:"0.01",...l})}),i.jsx(ut,{})]})})]})]}),i.jsxs("div",{className:"border rounded-lg p-6 space-y-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Statutory Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(lt,{control:a.control,name:"tpin",render:({field:l})=>i.jsxs(at,{children:[i.jsx(ct,{children:"TPIN"}),i.jsx(ot,{children:i.jsx(G,{...l})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:a.control,name:"napsa_number",render:({field:l})=>i.jsxs(at,{children:[i.jsx(ct,{children:"NAPSA Number"}),i.jsx(ot,{children:i.jsx(G,{...l})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:a.control,name:"nhima_number",render:({field:l})=>i.jsxs(at,{children:[i.jsx(ct,{children:"NHIMA Number"}),i.jsx(ot,{children:i.jsx(G,{...l})}),i.jsx(ut,{})]})})]})]}),i.jsxs("div",{className:"border rounded-lg p-6 space-y-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Bank Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(lt,{control:a.control,name:"bank_name",render:({field:l})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Bank Name"}),i.jsx(ot,{children:i.jsx(G,{...l})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:a.control,name:"bank_branch",render:({field:l})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Branch"}),i.jsx(ot,{children:i.jsx(G,{...l})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:a.control,name:"bank_account_number",render:({field:l})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Account Number"}),i.jsx(ot,{children:i.jsx(G,{...l})}),i.jsx(ut,{})]})})]})]}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx(H,{type:"button",variant:"outline",onClick:()=>t("/employees"),children:"Cancel"}),i.jsx(H,{type:"submit",children:"Update Employee"})]})]})})]})}const jJe=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n};function NJe(){const t=$n(),{user:e}=ht(),[n,r]=_.useState(null),[s,a]=_.useState(!1),o=()=>{const d=["full_name","employee_number","position","department","email","phone","basic_salary","housing_allowance","transport_allowance","other_allowances","employment_date","employment_status","tpin","napsa_number","nhima_number","bank_name","bank_branch","bank_account_number"],h=["John Doe","EMP001","Software Engineer","IT","john@example.com","+260971234567","15000","3000","1000","500","2024-01-01","active","1234567890","NAPSA123","NHIMA123","Zanaco","Cairo Road","1234567890"],f=[d.join(","),h.join(",")].join(`
`),m=new Blob([f],{type:"text/csv"}),y=window.URL.createObjectURL(m),p=document.createElement("a");p.href=y,p.download="employee_template.csv",p.click(),window.URL.revokeObjectURL(y),Y.success("Template downloaded")},l=d=>{d.target.files&&d.target.files[0]&&r(d.target.files[0])},c=d=>{const h=d.split(`
`).filter(m=>m.trim()),f=h[0].split(",").map(m=>m.trim());return h.slice(1).map(m=>{const y=m.split(",").map(v=>v.trim()),p={};return f.forEach((v,b)=>{p[v]=y[b]||null}),p})},u=async()=>{if(!n){Y.error("Please select a file");return}a(!0);try{if(!e)throw new Error("Not authenticated");const d=await Be.getPrimaryMembershipByUser(e.id);if(!(d!=null&&d.companyId))throw new Error("No company profile found for your account");const h=await n.text(),m=c(h).map(v=>({userId:e.id,companyId:d.companyId,fullName:v.full_name||"",employeeNumber:v.employee_number||"",position:v.position||null,department:v.department||null,email:v.email||null,phone:v.phone||null,basicSalary:v.basic_salary?Number(v.basic_salary):0,housingAllowance:v.housing_allowance?Number(v.housing_allowance):0,transportAllowance:v.transport_allowance?Number(v.transport_allowance):0,otherAllowances:v.other_allowances?Number(v.other_allowances):0,employmentDate:v.employment_date||null,employmentStatus:v.employment_status||"active",tpin:v.tpin||null,napsaNumber:v.napsa_number||null,nhimaNumber:v.nhima_number||null,bankName:v.bank_name||null,bankBranch:v.bank_branch||null,bankAccountNumber:v.bank_account_number||null,createdAt:Re(),updatedAt:Re()})),y=we(se,Q.EMPLOYEES),p=jJe(m,400);for(const v of p){const b=Yl(se);v.forEach(x=>{b.set(Je(y),x)}),await b.commit()}Y.success(`Successfully uploaded ${m.length} employees`),t("/employees")}catch{Y.error("Failed to upload employees. Please check your CSV format.")}finally{a(!1)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>t("/employees"),children:[i.jsx(pa,{className:"h-4 w-4 mr-2"}),"Back"]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Bulk Upload Employees"}),i.jsx("p",{className:"text-muted-foreground",children:"Upload multiple employees using a CSV file"})]})]}),i.jsxs("div",{className:"border rounded-lg p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Instructions"}),i.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-muted-foreground",children:[i.jsx("li",{children:"Download the CSV template below"}),i.jsx("li",{children:"Fill in your employee data following the template format"}),i.jsx("li",{children:"Make sure all required fields are filled (full_name, employee_number, basic_salary, employment_date)"}),i.jsx("li",{children:"Save your file as CSV format"}),i.jsx("li",{children:"Upload your completed CSV file"})]})]}),i.jsx("div",{className:"flex gap-4",children:i.jsxs(H,{variant:"outline",onClick:o,children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Download Template"]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Upload CSV File"}),i.jsx(G,{type:"file",accept:".csv",onChange:l,disabled:s})]}),n&&i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Selected file: ",n.name]})]}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx(H,{variant:"outline",onClick:()=>t("/employees"),children:"Cancel"}),i.jsxs(H,{onClick:u,disabled:s||!n,children:[i.jsx(nl,{className:"mr-2 h-4 w-4"}),s?"Uploading...":"Upload Employees"]})]})]})]})}const SJe=t=>{const e=String(t||"").toLowerCase().trim();return e==="final"||e==="approved"?"processed":e==="completed"?"paid":e==="pending_approval"?"pending_approval":["draft","trial","processed","paid","payment_reversed","reversed"].includes(e)?e:"draft"},EJe=t=>t==="pending_approval"?"Pending Approval":t==="trial"?"Trial":t==="processed"?"Posted":t==="paid"?"Paid":t==="payment_reversed"?"Payment Reversed":t==="reversed"?"Reversed":"Draft",AJe=t=>t==="paid"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":t==="payment_reversed"?"bg-rose-100 text-rose-800 dark:bg-rose-900 dark:text-rose-200":t==="processed"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":t==="reversed"?"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200":t==="pending_approval"?"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200":t==="trial"?"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";function TJe(){const t=$n(),{user:e}=ht(),[n,r]=_.useState("all"),{data:s,isLoading:a}=Ee({queryKey:["payrollRuns",e==null?void 0:e.id],queryFn:async()=>{if(!e)return[];const l=await Be.getPrimaryMembershipByUser(e.id);if(!(l!=null&&l.companyId))return[];const c=we(se,Q.PAYROLL_RUNS);return(await Ce(Te(c,he("companyId","==",l.companyId),WN("runDate","desc")))).docs.map(d=>{const h=d.data();return{id:d.id,runDate:String(h.runDate??h.run_date??""),periodStart:String(h.periodStart??h.period_start??""),periodEnd:String(h.periodEnd??h.period_end??""),totalGross:Number(h.totalGross??h.total_gross??0),totalDeductions:Number(h.totalDeductions??h.total_deductions??0),totalNet:Number(h.totalNet??h.total_net??0),status:SJe(h.payrollStatus??h.payroll_status??h.status),payrollNumber:h.payrollNumber??h.payroll_number??null,journalEntryId:h.journalEntryId??h.journal_entry_id??h.glJournalId??h.gl_journal_id??null,paymentJournalEntryId:h.paymentJournalEntryId??h.payment_journal_entry_id??null,reversalReferenceId:h.reversalReferenceId??h.reversal_reference_id??h.reversalJournalEntryId??h.reversal_journal_entry_id??null}}).sort((d,h)=>String(h.runDate).localeCompare(String(d.runDate)))},enabled:!!e}),o=_.useMemo(()=>s?n==="all"?s:s.filter(l=>l.status===n):[],[s,n]);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Payroll"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage payroll runs, posting, payments, and reversals"})]}),i.jsxs(H,{onClick:()=>t("/payroll/new"),children:[i.jsx(Nn,{className:"mr-2 h-4 w-4"}),"New Payroll Run"]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Status"}),i.jsxs(Tt,{value:n,onValueChange:l=>r(l),children:[i.jsx(jt,{className:"w-[220px]",children:i.jsx(Ct,{placeholder:"Filter status"})}),i.jsxs(Nt,{children:[i.jsx(be,{value:"all",children:"All"}),i.jsx(be,{value:"draft",children:"Draft"}),i.jsx(be,{value:"processed",children:"Posted"}),i.jsx(be,{value:"paid",children:"Paid"}),i.jsx(be,{value:"payment_reversed",children:"Payment Reversed"}),i.jsx(be,{value:"reversed",children:"Reversed"})]})]})]}),a?i.jsx("div",{children:"Loading..."}):i.jsx("div",{className:"border rounded-lg overflow-x-auto",children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Run Date"}),i.jsx(q,{children:"Period"}),i.jsx(q,{children:"Total Gross"}),i.jsx(q,{children:"Total Deductions"}),i.jsx(q,{children:"Total Net"}),i.jsx(q,{children:"Status"}),i.jsx(q,{children:"Reversal Reference"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ut,{children:[o.map(l=>i.jsxs(je,{children:[i.jsx(U,{className:"font-medium",children:l.runDate?mt(new Date(l.runDate),"dd MMM yyyy"):"-"}),i.jsxs(U,{children:[l.periodStart?mt(new Date(l.periodStart),"dd MMM"):"-"," -"," ",l.periodEnd?mt(new Date(l.periodEnd),"dd MMM yyyy"):"-"]}),i.jsx(U,{children:ue(l.totalGross)}),i.jsx(U,{children:ue(l.totalDeductions)}),i.jsx(U,{children:ue(l.totalNet)}),i.jsx(U,{children:i.jsx(Ve,{className:AJe(l.status),children:EJe(l.status)})}),i.jsx(U,{className:"font-mono text-xs",children:l.reversalReferenceId||"-"}),i.jsx(U,{className:"text-right",children:l.status==="pending_approval"?i.jsx(H,{variant:"default",size:"sm",onClick:()=>t(`/payroll/${l.id}/approve`),children:"Review & Approve"}):i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>t(`/payroll/${l.id}`),children:"View"})})]},l.id)),o.length===0&&i.jsx(je,{children:i.jsx(U,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No payroll runs found for the selected status."})})]})]})})]})}const Jn=KO,ns=mY,CJe=GO,dre=_.forwardRef(({className:t,...e},n)=>i.jsx(lb,{ref:n,className:ve("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));dre.displayName=lb.displayName;const Hn=_.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(CJe,{children:[i.jsx(dre,{}),i.jsxs(cb,{ref:r,className:ve("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,i.jsxs(sS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[i.jsx(Bm,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Hn.displayName=cb.displayName;const Kn=({className:t,...e})=>i.jsx("div",{className:ve("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Kn.displayName="DialogHeader";const p1=({className:t,...e})=>i.jsx("div",{className:ve("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});p1.displayName="DialogFooter";const Gn=_.forwardRef(({className:t,...e},n)=>i.jsx(ub,{ref:n,className:ve("text-lg font-semibold leading-none tracking-tight",t),...e}));Gn.displayName=ub.displayName;const dd=_.forwardRef(({className:t,...e},n)=>i.jsx(db,{ref:n,className:ve("text-sm text-muted-foreground",t),...e}));dd.displayName=db.displayName;function PJe({employees:t,additions:e,onAddition:n,onRemove:r}){const[s,a]=_.useState(!1),[o,l]=_.useState("earning"),[c,u]=_.useState(""),[d,h]=_.useState(""),[f,m]=_.useState(""),[y,p]=_.useState(""),[v,b]=_.useState(""),[x,w]=_.useState(""),C=()=>{u(""),h(""),m(""),p(""),b(""),w("")},S=()=>{if(!c)return;let j;if(o==="overtime"){const g=Number(v)*Number(x);j={employee_id:c,type:o,name:d||"Overtime",amount:g}}else if(o==="advance"){const g=Number(f),T=Number(y)||1,E=Math.ceil(g/T);j={employee_id:c,type:o,name:d||"Advance",amount:E,total_amount:g,months_to_pay:T,monthly_deduction:E}}else j={employee_id:c,type:o,name:d||(o==="bonus"?"Bonus":"Additional Earning"),amount:Number(f)};n(j),C(),a(!1)},P=j=>{switch(j){case"earning":return i.jsx(Xn,{className:"h-4 w-4"});case"bonus":return i.jsx(r4,{className:"h-4 w-4"});case"overtime":return i.jsx($i,{className:"h-4 w-4"});case"advance":return i.jsx(gh,{className:"h-4 w-4"});default:return null}};return i.jsxs(Jn,{open:s,onOpenChange:a,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(H,{variant:"outline",size:"sm",children:[i.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Add Earnings/Deductions"]})}),i.jsxs(Hn,{className:"max-w-md",children:[i.jsxs(Kn,{children:[i.jsx(Gn,{children:"Add Payroll Items"}),i.jsx(dd,{children:"Assign earnings, bonuses, overtime, or advances to employees"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Type"}),i.jsxs(Tt,{value:o,onValueChange:j=>l(j),children:[i.jsx(jt,{children:i.jsx(Ct,{})}),i.jsxs(Nt,{children:[i.jsx(be,{value:"earning",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Xn,{className:"h-4 w-4"}),"Custom Earning"]})}),i.jsx(be,{value:"bonus",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(r4,{className:"h-4 w-4"}),"Bonus"]})}),i.jsx(be,{value:"overtime",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx($i,{className:"h-4 w-4"}),"Overtime"]})}),i.jsx(be,{value:"advance",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(gh,{className:"h-4 w-4"}),"Advance (Deduction)"]})})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Employee"}),i.jsxs(Tt,{value:c,onValueChange:u,children:[i.jsx(jt,{children:i.jsx(Ct,{placeholder:"Select employee"})}),i.jsx(Nt,{children:t.map(j=>i.jsxs(be,{value:j.id,children:[j.full_name," (",j.employee_number,")"]},j.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Description"}),i.jsx(G,{value:d,onChange:j=>h(j.target.value),placeholder:o==="earning"?"e.g., Commission":o==="bonus"?"e.g., Performance Bonus":o==="overtime"?"e.g., Weekend Overtime":"e.g., Salary Advance"})]}),o==="overtime"?i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Hourly Rate (K)"}),i.jsx(G,{type:"number",value:v,onChange:j=>b(j.target.value),placeholder:"0.00"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Hours Worked"}),i.jsx(G,{type:"number",value:x,onChange:j=>w(j.target.value),placeholder:"0"})]}),v&&x&&i.jsxs("div",{className:"col-span-2 p-3 bg-muted rounded-lg",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Overtime Pay"}),i.jsxs("p",{className:"text-lg font-semibold",children:["K",(Number(v)*Number(x)).toFixed(2)]})]})]}):o==="advance"?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Advance Amount (K)"}),i.jsx(G,{type:"number",value:f,onChange:j=>m(j.target.value),placeholder:"0.00"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Months to Repay"}),i.jsx(G,{type:"number",min:"1",value:y,onChange:j=>p(j.target.value),placeholder:"e.g., 3"})]}),f&&y&&i.jsxs("div",{className:"p-3 bg-muted rounded-lg space-y-1",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Deduction"}),i.jsxs("p",{className:"text-lg font-semibold",children:["K",Math.ceil(Number(f)/Number(y)).toFixed(2)]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["To be deducted from net pay over ",y," month(s)"]})]})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Amount (K)"}),i.jsx(G,{type:"number",value:f,onChange:j=>m(j.target.value),placeholder:"0.00"})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(H,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),i.jsx(H,{onClick:S,disabled:!c,children:"Add to Payroll"})]})]})]}),e.length>0&&i.jsxs("div",{className:"mt-4 border rounded-lg",children:[i.jsx("div",{className:"p-3 border-b bg-muted/50",children:i.jsxs("h4",{className:"font-medium text-sm",children:["Pending Additions (",e.length,")"]})}),i.jsx("div",{className:"divide-y max-h-48 overflow-y-auto",children:e.map(j=>{const g=t.find(T=>T.id===j.employee_id);return i.jsxs("div",{className:"p-3 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[P(j.type),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-sm",children:j.name}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[g==null?void 0:g.full_name,"  K",j.amount.toFixed(2),j.type==="advance"&&` per month for ${j.months_to_pay} months`]})]})]}),i.jsx(H,{variant:"ghost",size:"sm",className:"text-destructive",onClick:()=>r(j.id),children:"Remove"})]},j.id)})})]})]})}const IJe=rd({period_start:We().min(1,"Start date is required"),period_end:We().min(1,"End date is required"),run_date:We().min(1,"Run date is required"),notes:We().optional()});function kJe(){const{user:t}=ht(),e=$n(),[n,r]=_.useState(!1),[s,a]=_.useState([]),o=m=>{a([...s,{...m,id:crypto.randomUUID()}])},l=m=>{a(s.filter(y=>y.id!==m))},c=td({resolver:nd(IJe),defaultValues:{run_date:new Date().toISOString().split("T")[0]}}),{data:u}=Ee({queryKey:["new-payroll-company",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const m=await Be.getPrimaryMembershipByUser(t.id);return(m==null?void 0:m.companyId)??null},enabled:!!t}),{data:d}=Ee({queryKey:["employees",u],queryFn:async()=>{if(!u)return[];const m=we(se,Q.EMPLOYEES),y=await Ce(Te(m,he("companyId","==",u),he("employmentStatus","==","active")));return y.empty?(await Ce(Te(m,he("companyId","==",u),he("employment_status","==","active")))).docs.map(v=>{const b=v.data();return{id:v.id,full_name:String(b.fullName??b.full_name??""),employee_number:String(b.employeeNumber??b.employee_number??""),basic_salary:Number(b.basicSalary??b.basic_salary??0),housing_allowance:Number(b.housingAllowance??b.housing_allowance??0),transport_allowance:Number(b.transportAllowance??b.transport_allowance??0),other_allowances:Number(b.otherAllowances??b.other_allowances??0)}}):y.docs.map(p=>{const v=p.data();return{id:p.id,full_name:String(v.fullName??v.full_name??""),employee_number:String(v.employeeNumber??v.employee_number??""),basic_salary:Number(v.basicSalary??v.basic_salary??0),housing_allowance:Number(v.housingAllowance??v.housing_allowance??0),transport_allowance:Number(v.transportAllowance??v.transport_allowance??0),other_allowances:Number(v.otherAllowances??v.other_allowances??0)}})},enabled:!!u}),{data:h}=Ee({queryKey:["open-payroll-period",u],queryFn:async()=>{if(!u)return null;const m=we(se,Q.FINANCIAL_PERIODS),y=await Ce(Te(m,he("companyId","==",u),he("status","==","open")));if(y.empty)return null;const p=y.docs.map(v=>{const b=v.data();return{id:v.id,startDate:String(b.startDate??b.start_date??""),endDate:String(b.endDate??b.end_date??""),periodName:String(b.periodName??b.period_name??"")}});return p.sort((v,b)=>b.startDate.localeCompare(v.startDate)),p[0]},enabled:!!u}),f=async m=>{if(!d||d.length===0){Y.error("No active employees found");return}r(!0);try{if(!t)throw new Error("Not authenticated");if(!u)throw new Error("Company not found");const p=(await Ce(Te(we(se,Q.ADVANCES),he("companyId","==",u),he("status","in",["pending","partial"])))).docs.map(w=>{const C=w.data();return{id:w.id,employee_id:String(C.employeeId??C.employee_id??""),status:String(C.status??""),date_to_deduct:C.dateToDeduct??C.date_to_deduct??null,monthly_deduction:Number(C.monthlyDeduction??C.monthly_deduction??0)||null,remaining_balance:Number(C.remainingBalance??C.remaining_balance??0)||null,amount:Number(C.amount??0)}}).filter(w=>!w.employee_id||!d.some(C=>C.id===w.employee_id)?!1:w.date_to_deduct?w.date_to_deduct<=m.period_end:!0),v=d.map(w=>{const C=p.filter(j=>j.employee_id===w.id);let S=0;C.forEach(j=>{const g=j.monthly_deduction?Math.min(Number(j.monthly_deduction),Number(j.remaining_balance||j.amount)):Number(j.remaining_balance||j.amount);S+=g});const P=eIe(Number(w.basic_salary),Number(w.housing_allowance||0),Number(w.transport_allowance||0),Number(w.other_allowances||0),S);return{employeeId:w.id,employeeName:w.full_name,grossSalary:P.grossSalary,payeDeduction:P.paye,napsaDeduction:P.napsaEmployee,nhimaDeduction:P.nhimaEmployee,otherDeductions:S,netSalary:P.netSalary,basicSalary:P.basicSalary,housingAllowance:P.housingAllowance,transportAllowance:P.transportAllowance,otherAllowances:P.otherAllowances,advancesDeducted:S}}),b=s.map(w=>({employeeId:w.employee_id,type:w.type,name:w.name,amount:w.amount,totalAmount:w.total_amount,monthsToPay:w.months_to_pay,monthlyDeduction:w.monthly_deduction})),x=await Ao.createPayrollDraft({companyId:u,periodStart:m.period_start,periodEnd:m.period_end,runDate:m.run_date,notes:m.notes||void 0,employees:v.map(w=>({employeeId:w.employeeId,employeeName:w.employeeName,grossSalary:w.grossSalary,payeDeduction:w.payeDeduction,napsaDeduction:w.napsaDeduction,nhimaDeduction:w.nhimaDeduction,otherDeductions:w.otherDeductions,netSalary:w.netSalary,basicSalary:w.basicSalary,housingAllowance:w.housingAllowance,transportAllowance:w.transportAllowance,otherAllowances:w.otherAllowances,advancesDeducted:w.advancesDeducted})),additions:b});Y.success("Payroll draft created successfully"),e(`/payroll/${x.payrollRunId}`)}catch{Y.error("Failed to create payroll run")}finally{r(!1)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>e("/payroll"),children:[i.jsx(pa,{className:"h-4 w-4 mr-2"}),"Back"]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"New Payroll Run"}),i.jsxs("p",{className:"text-muted-foreground",children:["Create a new payroll run for ",(d==null?void 0:d.length)||0," active employees"]})]}),i.jsx(Ve,{variant:"outline",className:"text-lg px-3 py-1",children:"DRAFT"})]}),i.jsxs(zu,{children:[i.jsx(ks,{className:"h-4 w-4"}),i.jsx(ure,{children:"Payroll Workflow"}),i.jsxs(qu,{children:["Payroll follows a strict workflow: ",i.jsx("strong",{children:"Draft -> Processed -> Paid"}),". Draft payrolls can be edited and saved without posting journals. Processing creates the payroll journal entry, and payment creates the settlement journal."]})]}),h&&i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Open financial period: ",h.periodName||`${h.startDate} to ${h.endDate}`]}),i.jsx(d1,{...c,children:i.jsxs("form",{onSubmit:c.handleSubmit(f),className:"space-y-6",children:[i.jsxs(X,{children:[i.jsxs(te,{children:[i.jsx(ne,{children:"Payroll Period"}),i.jsx(pt,{children:"Define the period for this payroll run"})]}),i.jsx(re,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(lt,{control:c.control,name:"period_start",render:({field:m})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Period Start *"}),i.jsx(ot,{children:i.jsx(G,{type:"date",...m})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:c.control,name:"period_end",render:({field:m})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Period End *"}),i.jsx(ot,{children:i.jsx(G,{type:"date",...m})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:c.control,name:"run_date",render:({field:m})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Run Date *"}),i.jsx(ot,{children:i.jsx(G,{type:"date",...m})}),i.jsx(ut,{})]})})]})})]}),i.jsxs(X,{children:[i.jsxs(te,{children:[i.jsx(ne,{children:"Payroll Additions"}),i.jsx(pt,{children:"Add earnings, bonuses, overtime, or advances for this payroll run"})]}),i.jsx(re,{children:i.jsx(PJe,{employees:(d==null?void 0:d.map(m=>({id:m.id,full_name:m.full_name,employee_number:m.employee_number})))||[],additions:s,onAddition:o,onRemove:l})})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"Notes"})}),i.jsx(re,{children:i.jsx(lt,{control:c.control,name:"notes",render:({field:m})=>i.jsxs(at,{children:[i.jsx(ot,{children:i.jsx(Zn,{...m,rows:3,placeholder:"Add any notes for this payroll run..."})}),i.jsx(ut,{})]})})})]}),d&&d.length>0&&i.jsxs(X,{children:[i.jsxs(te,{children:[i.jsx(ne,{children:"Employees to Process"}),i.jsxs(pt,{children:[d.length," active employees will be included"]})]}),i.jsx(re,{children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Basic Salary"}),i.jsx("p",{className:"text-xl font-bold",children:ue(d.reduce((m,y)=>m+Number(y.basic_salary||0),0))})]}),i.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Housing"}),i.jsx("p",{className:"text-xl font-bold",children:ue(d.reduce((m,y)=>m+Number(y.housing_allowance||0),0))})]}),i.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Transport"}),i.jsx("p",{className:"text-xl font-bold",children:ue(d.reduce((m,y)=>m+Number(y.transport_allowance||0),0))})]}),i.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Other Allowances"}),i.jsx("p",{className:"text-xl font-bold",children:ue(d.reduce((m,y)=>m+Number(y.other_allowances||0),0))})]})]})})]}),i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsx(H,{type:"button",variant:"outline",onClick:()=>e("/payroll"),children:"Cancel"}),i.jsxs(H,{type:"submit",disabled:n,children:[i.jsx(yh,{className:"h-4 w-4 mr-2"}),n?"Creating...":"Save as Draft"]})]})]})})]})}var hre="AlertDialog",[RJe,Ktt]=ps(hre,[ZG]),uc=ZG(),fre=t=>{const{__scopeAlertDialog:e,...n}=t,r=uc(e);return i.jsx(KO,{...r,...n,modal:!0})};fre.displayName=hre;var OJe="AlertDialogTrigger",mre=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=uc(n);return i.jsx(mY,{...s,...r,ref:e})});mre.displayName=OJe;var DJe="AlertDialogPortal",pre=t=>{const{__scopeAlertDialog:e,...n}=t,r=uc(e);return i.jsx(GO,{...r,...n})};pre.displayName=DJe;var MJe="AlertDialogOverlay",gre=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=uc(n);return i.jsx(lb,{...s,...r,ref:e})});gre.displayName=MJe;var xm="AlertDialogContent",[LJe,$Je]=RJe(xm),FJe=Cq("AlertDialogContent"),yre=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,a=uc(n),o=_.useRef(null),l=Mt(e,o),c=_.useRef(null);return i.jsx(Wje,{contentName:xm,titleName:vre,docsSlug:"alert-dialog",children:i.jsx(LJe,{scope:n,cancelRef:c,children:i.jsxs(cb,{role:"alertdialog",...a,...s,ref:l,onOpenAutoFocus:Me(s.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[i.jsx(FJe,{children:r}),i.jsx(BJe,{contentRef:o})]})})})});yre.displayName=xm;var vre="AlertDialogTitle",xre=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=uc(n);return i.jsx(ub,{...s,...r,ref:e})});xre.displayName=vre;var bre="AlertDialogDescription",wre=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=uc(n);return i.jsx(db,{...s,...r,ref:e})});wre.displayName=bre;var VJe="AlertDialogAction",_re=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=uc(n);return i.jsx(sS,{...s,...r,ref:e})});_re.displayName=VJe;var jre="AlertDialogCancel",Nre=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=$Je(jre,n),a=uc(n),o=Mt(e,s);return i.jsx(sS,{...a,...r,ref:o})});Nre.displayName=jre;var BJe=({contentRef:t})=>{const e=`\`${xm}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${xm}\` by passing a \`${bre}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${xm}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return _.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},UJe=fre,zJe=mre,qJe=pre,Sre=gre,Ere=yre,Are=_re,Tre=Nre,Cre=xre,Pre=wre;const Do=UJe,lu=zJe,WJe=qJe,Ire=_.forwardRef(({className:t,...e},n)=>i.jsx(Sre,{className:ve("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));Ire.displayName=Sre.displayName;const Ha=_.forwardRef(({className:t,...e},n)=>i.jsxs(WJe,{children:[i.jsx(Ire,{}),i.jsx(Ere,{ref:n,className:ve("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Ha.displayName=Ere.displayName;const Ka=({className:t,...e})=>i.jsx("div",{className:ve("flex flex-col space-y-2 text-center sm:text-left",t),...e});Ka.displayName="AlertDialogHeader";const Ga=({className:t,...e})=>i.jsx("div",{className:ve("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Ga.displayName="AlertDialogFooter";const Ya=_.forwardRef(({className:t,...e},n)=>i.jsx(Cre,{ref:n,className:ve("text-lg font-semibold",t),...e}));Ya.displayName=Cre.displayName;const Qa=_.forwardRef(({className:t,...e},n)=>i.jsx(Pre,{ref:n,className:ve("text-sm text-muted-foreground",t),...e}));Qa.displayName=Pre.displayName;const Xa=_.forwardRef(({className:t,...e},n)=>i.jsx(Are,{ref:n,className:ve(AO(),t),...e}));Xa.displayName=Are.displayName;const Za=_.forwardRef(({className:t,...e},n)=>i.jsx(Tre,{ref:n,className:ve(AO({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));Za.displayName=Tre.displayName;const HJe=t=>{const e=String(t||"").toLowerCase().trim();return e==="approved"?"processed":e==="completed"?"paid":["draft","trial","processed","paid","payment_reversed","reversed","final"].includes(e)?e:"draft"};function KJe(){const{user:t}=ht(),{data:e}=ei(),n=$n(),{id:r}=Hh(),s=tn(),[a,o]=_.useState(""),[l,c]=_.useState(new Date().toISOString().split("T")[0]),[u,d]=_.useState(""),[h,f]=_.useState(""),{data:m,isLoading:y}=Ee({queryKey:["payrollRun",r],queryFn:async()=>{if(!r)return null;const ie=await bi(Je(se,Q.PAYROLL_RUNS,r));if(!ie.exists())return null;const pe=ie.data();return{id:ie.id,company_id:pe.companyId??pe.organizationId??null,run_date:String(pe.runDate??pe.run_date??""),period_start:String(pe.periodStart??pe.period_start??""),period_end:String(pe.periodEnd??pe.period_end??""),payroll_status:HJe(pe.payrollStatus??pe.payroll_status??pe.status??"draft"),status:pe.status??null,payroll_number:pe.payrollNumber??pe.payroll_number??null,total_gross:Number(pe.totalGross??pe.total_gross??0),total_deductions:Number(pe.totalDeductions??pe.total_deductions??0),total_net:Number(pe.totalNet??pe.total_net??0),journal_entry_id:pe.journalEntryId??pe.journal_entry_id??null,payment_journal_entry_id:pe.paymentJournalEntryId??pe.payment_journal_entry_id??null,reversal_journal_entry_id:pe.reversalJournalEntryId??pe.reversal_journal_entry_id??null,payment_reversal_journal_entry_id:pe.paymentReversalJournalEntryId??pe.payment_reversal_journal_entry_id??null,payment_reversal_reason:pe.paymentReversalReason??pe.payment_reversal_reason??null,payment_reversed_by:pe.paymentReversedBy??pe.payment_reversed_by??null,payment_reversed_at:pe.paymentReversedAt??pe.payment_reversed_at??null,reversal_reference_id:pe.reversalReferenceId??pe.reversal_reference_id??null,reversal_reason:pe.reversalReason??pe.reversal_reason??null,reversed_by:pe.reversedBy??pe.reversed_by??null,reversed_at:pe.reversedAt??pe.reversed_at??null,gl_journal_id:pe.glJournalId??pe.gl_journal_id??null}},enabled:!!(t&&r)}),{data:p}=Ee({queryKey:["payrollItems",r],queryFn:async()=>{if(!r)return[];const ie=we(se,Q.PAYROLL_ITEMS);let pe=await Ce(Te(ie,he("payrollRunId","==",r)));pe.empty&&(pe=await Ce(Te(ie,he("payroll_run_id","==",r))));const Ue=pe.docs.map(_e=>({id:_e.id,row:_e.data()})),Ne=Array.from(new Set(Ue.map(({row:_e})=>String(_e.employeeId??_e.employee_id??"")).filter(Boolean))),nt=await Promise.all(Ne.map(async _e=>{const ge=await bi(Je(se,Q.EMPLOYEES,_e));return{employeeDocId:_e,snap:ge}})),fe=new Map;return nt.forEach(({employeeDocId:_e,snap:ge})=>{if(!ge.exists())return;const ce=ge.data();fe.set(_e,{full_name:String(ce.fullName??ce.full_name??""),employee_number:String(ce.employeeNumber??ce.employee_number??""),email:ce.email??null,position:ce.position??null,department:ce.department??null,tpin:ce.tpin??null,napsa_number:ce.napsaNumber??ce.napsa_number??null,nhima_number:ce.nhimaNumber??ce.nhima_number??null,bank_name:ce.bankName??ce.bank_name??null,bank_account_number:ce.bankAccountNumber??ce.bank_account_number??null})}),Ue.map(({id:_e,row:ge})=>{const ce=String(ge.employeeId??ge.employee_id??"");return{id:_e,employee_id:ce,basic_salary:Number(ge.basicSalary??ge.basic_salary??0),housing_allowance:Number(ge.housingAllowance??ge.housing_allowance??0),transport_allowance:Number(ge.transportAllowance??ge.transport_allowance??0),other_allowances:Number(ge.otherAllowances??ge.other_allowances??0),gross_salary:Number(ge.grossSalary??ge.gross_salary??0),advances_deducted:Number(ge.advancesDeducted??ge.advances_deducted??0),net_salary:Number(ge.netSalary??ge.net_salary??0),paye:Number(ge.paye??0),napsa_employee:Number(ge.napsaEmployee??ge.napsa_employee??0),napsa_employer:Number(ge.napsaEmployer??ge.napsa_employer??0),nhima_employee:Number(ge.nhimaEmployee??ge.nhima_employee??0),nhima_employer:Number(ge.nhimaEmployer??ge.nhima_employer??0),total_deductions:Number(ge.totalDeductions??ge.total_deductions??0),employees:fe.get(ce)??null}})},enabled:!!(t&&r)}),{data:v=[]}=Ee({queryKey:["payroll-payment-accounts",m==null?void 0:m.id],queryFn:async()=>m!=null&&m.company_id?(await Ce(Te(we(se,Q.CHART_OF_ACCOUNTS),he("companyId","==",m.company_id),he("accountType","==","Asset"),he("status","==","active")))).docs.map(pe=>{const Ue=pe.data();return{id:pe.id,accountName:String(Ue.accountName??"")}}).filter(pe=>pe.accountName).sort((pe,Ue)=>pe.accountName.localeCompare(Ue.accountName)):[],enabled:!!(m!=null&&m.company_id)}),b=_.useMemo(()=>{if(!v.length)return"";const ie=v.find(pe=>{const Ue=pe.accountName.toLowerCase();return Ue.includes("bank")||Ue.includes("cash")});return(ie==null?void 0:ie.id)||v[0].id},[v]);_.useEffect(()=>{!a&&b&&o(b)},[a,b]);const{data:x}=Ee({queryKey:["payroll-journals",r],queryFn:async()=>{if(!r)return[];const ie=we(se,Q.PAYROLL_JOURNALS);let pe=await Ce(Te(ie,he("payrollRunId","==",r)));pe.empty&&(pe=await Ce(Te(ie,he("payroll_run_id","==",r))));const Ue=pe.docs.map(He=>({id:He.id,row:He.data()})),Ne=new Set(Ue.map(({row:He})=>String(He.journalEntryId??He.journal_entry_id??"")).filter(Boolean));[m==null?void 0:m.journal_entry_id,m==null?void 0:m.payment_journal_entry_id,m==null?void 0:m.reversal_journal_entry_id,m==null?void 0:m.payment_reversal_journal_entry_id].map(He=>String(He||"").trim()).filter(Boolean).forEach(He=>Ne.add(He));const nt=await Promise.all(Array.from(Ne).map(async He=>{const rt=await bi(Je(se,Q.JOURNAL_ENTRIES,He));return{entryId:He,snap:rt}})),fe=new Map;nt.forEach(({entryId:He,snap:rt})=>{if(!rt.exists()){fe.set(He,null);return}const zt=rt.data();fe.set(He,{id:rt.id,reference_number:zt.referenceNumber??zt.reference_number??null,entry_date:String(zt.entryDate??zt.entry_date??""),description:zt.description??null,is_posted:!!(zt.isPosted??zt.is_posted)})});const _e=Ue.map(({id:He,row:rt})=>{const zt=String(rt.journalEntryId??rt.journal_entry_id??"");return{id:He,description:rt.description??null,journal_entries:fe.get(zt)??null}}),ge=new Set(_e.map(He=>{var rt;return((rt=He.journal_entries)==null?void 0:rt.id)||null}).filter(Boolean)),ce=Array.from(Ne).filter(He=>!ge.has(He)).map(He=>({id:`fallback_${He}`,description:"Linked payroll journal",journal_entries:fe.get(He)??null}));return[..._e,...ce]},enabled:!!(m&&["processed","paid","payment_reversed","reversed","final"].includes(String(m.payroll_status||"").toLowerCase()))}),w=()=>{s.invalidateQueries({queryKey:["payrollRun",r]}),s.invalidateQueries({queryKey:["payrollRuns",t==null?void 0:t.id]}),s.invalidateQueries({queryKey:["payrollItems",r]}),s.invalidateQueries({queryKey:["payroll-journals",r]}),s.invalidateQueries({queryKey:["journal-entries"]}),s.invalidateQueries({queryKey:["financial-reports"]}),s.invalidateQueries({queryKey:["dashboard"]})},C=Xe({mutationFn:async()=>{if(!r)throw new Error("Payroll run not found");await Ao.runPayrollTrial({payrollRunId:r})},onSuccess:()=>{w(),Y.success("Trial payroll run completed. Review the calculations before finalizing.")},onError:ie=>{Y.error(ie.message||"Failed to run trial payroll")}}),S=Xe({mutationFn:async()=>{if(!r)throw new Error("Payroll run not found");await Kl(Je(se,Q.PAYROLL_RUNS,r),{payrollStatus:"draft",trialRunAt:null,trialRunBy:null,updatedAt:Re()})},onSuccess:()=>{w(),Y.success("Payroll reverted to draft. You can make changes and re-run trial.")},onError:ie=>{Y.error(ie.message||"Failed to revert payroll")}}),P=Xe({mutationFn:async()=>{if(!r)throw new Error("Payroll run not found");await Ao.finalizePayroll({payrollRunId:r})},onSuccess:()=>{w(),Y.success("Payroll posted to the General Ledger.")},onError:ie=>{Y.error(ie.message||"Failed to finalize payroll")}}),j=Xe({mutationFn:async()=>{if(!r)throw new Error("Payroll run not found");if(!a)throw new Error("Select a payment account before paying salaries.");await Ao.payPayroll({payrollRunId:r,paymentAccountId:a,paymentDate:l})},onSuccess:()=>{w(),Y.success("Payroll payment posted successfully.")},onError:ie=>{Y.error(ie.message||"Failed to pay payroll")}}),g=Xe({mutationFn:async()=>{if(!r)throw new Error("Payroll run not found");const ie=u.trim();if(!ie)throw new Error("Payment reversal reason is required.");await Ao.reversePayrollPayment({payrollRunId:r,reason:ie})},onSuccess:()=>{w(),d(""),Y.success("Payroll payment reversed. You can now reverse the payroll accrual.")},onError:ie=>{Y.error(ie.message||"Failed to reverse payroll payment")}}),T=Xe({mutationFn:async()=>{if(!r)throw new Error("Payroll run not found");const ie=h.trim();if(!ie)throw new Error("Reversal reason is required.");await Ao.reversePayroll({payrollRunId:r,reason:ie})},onSuccess:()=>{w(),f(""),Y.success("Payroll reversed. Original and reversal entries are kept for audit.")},onError:ie=>{Y.error(ie.message||"Failed to reverse payroll")}}),E=()=>{if(!p||!m)return;const ie=["Employee Number","Name","Basic Salary","Housing","Transport","Other Allowances","Gross Salary","Advances Deducted","Net Salary","PAYE (Employer)","NAPSA Employee (Employer)","NAPSA Employer","NHIMA Employee (Employer)","NHIMA Employer"],pe=p.map(_e=>{var ge,ce;return[((ge=_e.employees)==null?void 0:ge.employee_number)??"",((ce=_e.employees)==null?void 0:ce.full_name)??"",_e.basic_salary,_e.housing_allowance,_e.transport_allowance,_e.other_allowances,_e.gross_salary,_e.advances_deducted??0,_e.net_salary,_e.paye,_e.napsa_employee,_e.napsa_employer,_e.nhima_employee,_e.nhima_employer]}),Ue=[ie.join(","),...pe.map(_e=>_e.join(","))].join(`
`),Ne=new Blob([Ue],{type:"text/csv"}),nt=window.URL.createObjectURL(Ne),fe=document.createElement("a");fe.href=nt,fe.download=`payroll_${mt(new Date(m.run_date),"yyyy-MM-dd")}.csv`,fe.click(),Y.success("Payroll exported successfully")},A=ie=>{n(`/payroll/${r}/payslip/${ie}`)},I=async()=>{!p||!m||!window.confirm(`Queue payslip emails for ${p.length} employees?`)||Y.promise(async()=>{for(const pe of p){const Ue=pe.employees;Ue!=null&&Ue.email&&r&&await Ao.sendPayslipEmail({payrollRunId:r,employeeId:pe.employee_id})}},{loading:"Queueing payslip emails...",success:"Payslip emails queued successfully!",error:"Failed to queue some emails."})},k=()=>{if(!p||!m)return;let ie=`PAYSLIPS - ${new Date(m.period_start).toLocaleDateString()} to ${new Date(m.period_end).toLocaleDateString()}
`;ie+="=".repeat(100)+`

`,p.forEach((fe,_e)=>{const ge=fe.employees??{full_name:"Unknown",employee_number:"-",position:null,department:null,tpin:null,napsa_number:null,nhima_number:null,bank_name:null,bank_account_number:null,email:null};ie+=`PAYSLIP ${_e+1}
`,ie+="-".repeat(100)+`
`,ie+=`Employee: ${ge.full_name} (${ge.employee_number})
`,ie+=`Position: ${ge.position||"N/A"}
`,ie+=`Department: ${ge.department||"N/A"}
`,ie+=`TPIN: ${ge.tpin||"N/A"}
`,ie+=`NAPSA: ${ge.napsa_number||"N/A"}
`,ie+=`NHIMA: ${ge.nhima_number||"N/A"}

`,ie+=`EARNINGS:
`,ie+=`  Basic Salary:        K${fe.basic_salary.toFixed(2)}
`,ie+=`  Housing Allowance:   K${fe.housing_allowance.toFixed(2)}
`,ie+=`  Transport Allowance: K${fe.transport_allowance.toFixed(2)}
`,ie+=`  Other Allowances:    K${fe.other_allowances.toFixed(2)}
`,ie+=`  Gross Salary:        K${fe.gross_salary.toFixed(2)}

`,ie+=`DEDUCTIONS:
`,ie+=`  NAPSA (5%):          K${fe.napsa_employee.toFixed(2)}
`,ie+=`  NHIMA (1%):          K${fe.nhima_employee.toFixed(2)}
`,ie+=`  PAYE:                K${fe.paye.toFixed(2)}
`,ie+=`  Total Deductions:    K${fe.total_deductions.toFixed(2)}

`,ie+=`NET PAY:               K${fe.net_salary.toFixed(2)}
`,ie+=`
Bank: ${ge.bank_name||"N/A"}
`,ie+=`Account: ${ge.bank_account_number||"N/A"}
`,ie+=`
`+"=".repeat(100)+`

`});const pe=new Blob([ie],{type:"text/plain"}),Ue=window.URL.createObjectURL(pe),Ne=document.createElement("a");Ne.href=Ue;const nt=new Date(m.period_start).toLocaleDateString("en-GB",{month:"short",year:"numeric"});Ne.download=`Payslips_${nt.replace(" ","_")}.txt`,document.body.appendChild(Ne),Ne.click(),document.body.removeChild(Ne),window.URL.revokeObjectURL(Ue),Y.success("Batch payslips downloaded successfully!")},L=ie=>{switch(ie){case"draft":return i.jsx(Ve,{variant:"outline",className:"border-yellow-500 text-yellow-600",children:"Draft"});case"trial":return i.jsx(Ve,{variant:"secondary",className:"bg-blue-100 text-blue-700",children:"Trial Run"});case"processed":case"final":return i.jsx(Ve,{className:"bg-blue-600",children:"Posted"});case"paid":return i.jsx(Ve,{className:"bg-green-600",children:"Paid"});case"payment_reversed":return i.jsx(Ve,{variant:"outline",className:"border-rose-500 text-rose-600",children:"Payment Reversed"});case"reversed":return i.jsx(Ve,{variant:"outline",className:"border-orange-500 text-orange-600",children:"Reversed"});default:return i.jsx(Ve,{variant:"outline",children:"Unknown"})}},V=m==null?void 0:m.payroll_status,B=["super_admin","admin","hr_manager","financial_manager","accountant"].includes(e||""),M=V==="draft",$=V==="trial",O=V==="processed"||V==="final",W=V==="paid",Z=V==="payment_reversed",ae=V==="reversed",Ae=(O||Z)&&B;return y?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx(mn,{className:"h-8 w-8 animate-spin text-primary"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>n("/payroll"),children:[i.jsx(pa,{className:"h-4 w-4 mr-2"}),"Back"]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Payroll Details"}),L(V),(m==null?void 0:m.payroll_number)&&i.jsx("span",{className:"text-sm text-muted-foreground font-mono",children:m.payroll_number})]}),i.jsx("p",{className:"text-muted-foreground",children:m&&i.jsxs(i.Fragment,{children:[mt(new Date(m.period_start),"dd MMM")," -"," ",mt(new Date(m.period_end),"dd MMM yyyy")]})})]})]}),i.jsxs("div",{className:"flex gap-2 flex-wrap justify-end",children:[M&&i.jsxs(H,{onClick:()=>C.mutate(),disabled:C.isPending,className:"bg-blue-600 hover:bg-blue-700",children:[C.isPending?i.jsx(mn,{className:"h-4 w-4 mr-2 animate-spin"}):i.jsx(u8,{className:"h-4 w-4 mr-2"}),"Run Trial Payroll"]}),$&&i.jsxs(i.Fragment,{children:[i.jsxs(H,{variant:"outline",onClick:()=>S.mutate(),disabled:S.isPending,children:[S.isPending?i.jsx(mn,{className:"h-4 w-4 mr-2 animate-spin"}):i.jsx(Cl,{className:"h-4 w-4 mr-2"}),"Revert to Draft"]}),i.jsxs(Do,{children:[i.jsx(lu,{asChild:!0,children:i.jsxs(H,{className:"bg-green-600 hover:bg-green-700",children:[i.jsx(Qo,{className:"h-4 w-4 mr-2"}),"Post Payroll"]})}),i.jsxs(Ha,{children:[i.jsxs(Ka,{children:[i.jsxs(Ya,{className:"flex items-center gap-2",children:[i.jsx(Oi,{className:"h-5 w-5 text-amber-500"}),"Post Payroll"]}),i.jsxs(Qa,{className:"space-y-2",children:[i.jsx("p",{children:"This action will:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[i.jsx("li",{children:"Post payroll accrual to the General Ledger"}),i.jsx("li",{children:"Create Salary Expense and Salary Payable entries"}),i.jsx("li",{children:"Lock this run for further draft edits"})]}),i.jsx("p",{className:"font-medium mt-4",children:"Are you sure you want to proceed?"})]})]}),i.jsxs(Ga,{children:[i.jsx(Za,{children:"Cancel"}),i.jsxs(Xa,{onClick:()=>P.mutate(),disabled:P.isPending,className:"bg-green-600 hover:bg-green-700",children:[P.isPending?i.jsx(mn,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Post Payroll"]})]})]})]})]}),O&&i.jsxs(Do,{children:[i.jsx(lu,{asChild:!0,children:i.jsxs(H,{className:"bg-green-600 hover:bg-green-700",children:[i.jsx(n8,{className:"h-4 w-4 mr-2"}),"Pay Salaries"]})}),i.jsxs(Ha,{children:[i.jsxs(Ka,{children:[i.jsx(Ya,{children:"Post Payroll Payment"}),i.jsx(Qa,{children:"This creates: Dr Salary Payable and Cr Bank/Cash."})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Payment Account"}),i.jsxs(Tt,{value:a,onValueChange:o,children:[i.jsx(jt,{children:i.jsx(Ct,{placeholder:"Select payment account"})}),i.jsx(Nt,{children:v.map(ie=>i.jsx(be,{value:ie.id,children:ie.accountName},ie.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Payment Date"}),i.jsx(G,{type:"date",value:l,onChange:ie=>c(ie.target.value)})]})]}),i.jsxs(Ga,{children:[i.jsx(Za,{children:"Cancel"}),i.jsxs(Xa,{onClick:()=>j.mutate(),disabled:j.isPending||!a,children:[j.isPending?i.jsx(mn,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Confirm Payment"]})]})]})]}),W&&i.jsxs(i.Fragment,{children:[i.jsx(H,{onClick:I,variant:"outline",children:"Email Payslips"}),i.jsx(H,{onClick:k,variant:"outline",children:"Download All"}),B&&i.jsxs(Do,{children:[i.jsx(lu,{asChild:!0,children:i.jsxs(H,{variant:"outline",className:"border-rose-500 text-rose-600 hover:text-rose-600",children:[i.jsx(Cl,{className:"h-4 w-4 mr-2"}),"Reverse Payment"]})}),i.jsxs(Ha,{children:[i.jsxs(Ka,{children:[i.jsxs(Ya,{className:"flex items-center gap-2",children:[i.jsx(Oi,{className:"h-5 w-5 text-rose-500"}),"Reverse Payroll Payment"]}),i.jsxs(Qa,{className:"space-y-2",children:[i.jsx("p",{children:"Are you sure you want to reverse salary payment? This action cannot be undone."}),i.jsx("p",{children:"The system will post the opposite payment journal and move payroll to payment_reversed."})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Payment Reversal Reason"}),i.jsx(Zn,{value:u,onChange:ie=>d(ie.target.value),rows:3,placeholder:"Explain why payment reversal is required"})]}),i.jsxs(Ga,{children:[i.jsx(Za,{children:"Cancel"}),i.jsxs(Xa,{onClick:()=>g.mutate(),disabled:g.isPending||!u.trim(),className:"bg-rose-600 hover:bg-rose-700",children:[g.isPending?i.jsx(mn,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Confirm Payment Reversal"]})]})]})]})]}),Ae&&i.jsxs(Do,{children:[i.jsx(lu,{asChild:!0,children:i.jsxs(H,{variant:"outline",className:"border-orange-500 text-orange-600 hover:text-orange-600",children:[i.jsx(Cl,{className:"h-4 w-4 mr-2"}),"Reverse Payroll"]})}),i.jsxs(Ha,{children:[i.jsxs(Ka,{children:[i.jsxs(Ya,{className:"flex items-center gap-2",children:[i.jsx(Oi,{className:"h-5 w-5 text-orange-500"}),"Reverse Payroll"]}),i.jsxs(Qa,{className:"space-y-2",children:[i.jsx("p",{children:"Are you sure you want to reverse this payroll? This action cannot be undone."}),i.jsx("p",{children:"The system will create opposite journal entries and keep all original records for audit."})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Reversal Reason"}),i.jsx(Zn,{value:h,onChange:ie=>f(ie.target.value),rows:3,placeholder:"Explain the financial correction reason"})]}),i.jsxs(Ga,{children:[i.jsx(Za,{children:"Cancel"}),i.jsxs(Xa,{onClick:()=>T.mutate(),disabled:T.isPending||!h.trim(),className:"bg-orange-600 hover:bg-orange-700",children:[T.isPending?i.jsx(mn,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Confirm Reversal"]})]})]})]}),i.jsxs(H,{onClick:E,variant:"outline",children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export CSV"]})]})]}),$&&i.jsx(X,{className:"border-blue-200 bg-blue-50",children:i.jsx(re,{className:"py-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Oi,{className:"h-5 w-5 text-blue-600"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-blue-900",children:"Trial Payroll Run"}),i.jsx("p",{className:"text-sm text-blue-700",children:'Review the calculations below. No GL entries have been posted yet. Use "Post Payroll" when ready.'})]})]})})}),(Z||!!(m!=null&&m.payment_reversal_journal_entry_id))&&i.jsxs(X,{className:"border-rose-200 bg-rose-50",children:[i.jsx(te,{className:"pb-2",children:i.jsx(ne,{className:"text-lg",children:"Payment Reversal Audit Trail"})}),i.jsxs(re,{className:"space-y-2 text-sm",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Payment Journal ID:"})," ",i.jsx("span",{className:"font-mono",children:(m==null?void 0:m.payment_journal_entry_id)||"-"})]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Payment Reversal Journal ID:"})," ",i.jsx("span",{className:"font-mono",children:(m==null?void 0:m.payment_reversal_journal_entry_id)||"-"})]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Reason:"})," ",(m==null?void 0:m.payment_reversal_reason)||"-"]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Reversed By:"})," ",(m==null?void 0:m.payment_reversed_by)||"-"]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Reversed At:"})," ",m!=null&&m.payment_reversed_at?mt(new Date(m.payment_reversed_at),"dd MMM yyyy HH:mm"):"-"]})]})]}),ae&&i.jsxs(X,{className:"border-orange-200 bg-orange-50",children:[i.jsx(te,{className:"pb-2",children:i.jsx(ne,{className:"text-lg",children:"Reversal Audit Trail"})}),i.jsxs(re,{className:"space-y-2 text-sm",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Reversal Reference:"})," ",i.jsx("span",{className:"font-mono",children:(m==null?void 0:m.reversal_reference_id)||(m==null?void 0:m.reversal_journal_entry_id)||"-"})]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Reason:"})," ",(m==null?void 0:m.reversal_reason)||"-"]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Reversed By:"})," ",(m==null?void 0:m.reversed_by)||"-"]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Reversed At:"})," ",m!=null&&m.reversed_at?mt(new Date(m.reversed_at),"dd MMM yyyy HH:mm"):"-"]})]})]}),m&&i.jsxs(X,{children:[i.jsx(te,{className:"pb-2",children:i.jsx(ne,{className:"text-lg",children:"Posting References"})}),i.jsxs(re,{className:"grid gap-2 text-sm md:grid-cols-2",children:[i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Journal Entry ID:"})," ",i.jsx("span",{className:"font-mono",children:m.journal_entry_id||"-"})]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Reversal Journal ID:"})," ",i.jsx("span",{className:"font-mono",children:m.reversal_journal_entry_id||"-"})]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Payment Journal ID:"})," ",i.jsx("span",{className:"font-mono",children:m.payment_journal_entry_id||"-"})]}),i.jsxs("p",{children:[i.jsx("span",{className:"font-medium",children:"Payment Reversal Journal ID:"})," ",i.jsx("span",{className:"font-mono",children:m.payment_reversal_journal_entry_id||"-"})]})]})]}),(O||W||Z||ae)&&x&&x.length>0&&i.jsxs(X,{className:"border-green-200 bg-green-50",children:[i.jsx(te,{className:"pb-2",children:i.jsxs(ne,{className:"text-lg flex items-center gap-2",children:[i.jsx(fv,{className:"h-5 w-5 text-green-600"}),"General Ledger Postings"]})}),i.jsxs(re,{children:[i.jsx("div",{className:"space-y-2",children:x.map(ie=>{var pe,Ue,Ne,nt;return i.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:(pe=ie.journal_entries)==null?void 0:pe.reference_number}),i.jsx("p",{className:"text-sm text-muted-foreground",children:ie.description})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm",children:((Ue=ie.journal_entries)==null?void 0:Ue.entry_date)&&mt(new Date(ie.journal_entries.entry_date),"dd MMM yyyy")}),i.jsx(Ve,{variant:"outline",className:String(((Ne=ie.journal_entries)==null?void 0:Ne.description)||"").toLowerCase().includes("reversal")?"text-orange-600 border-orange-600":"text-green-600 border-green-600",children:String(((nt=ie.journal_entries)==null?void 0:nt.description)||"").toLowerCase().includes("reversal")?"Reversal":"Posted"})]})]},ie.id)})}),i.jsx(H,{variant:"link",className:"mt-2 p-0 h-auto text-green-700",onClick:()=>n("/journal-entries"),children:"View all journal entries ->"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(X,{children:i.jsxs(te,{className:"pb-2",children:[i.jsx(pt,{children:"Total Gross"}),i.jsx(ne,{className:"text-2xl",children:ue(Number((m==null?void 0:m.total_gross)||0))})]})}),i.jsx(X,{children:i.jsxs(te,{className:"pb-2",children:[i.jsx(pt,{children:"Total Deductions"}),i.jsx(ne,{className:"text-2xl text-destructive",children:ue(Number((m==null?void 0:m.total_deductions)||0))})]})}),i.jsx(X,{children:i.jsxs(te,{className:"pb-2",children:[i.jsx(pt,{children:"Total Net"}),i.jsx(ne,{className:"text-2xl text-primary",children:ue(Number((m==null?void 0:m.total_net)||0))})]})}),i.jsx(X,{children:i.jsxs(te,{className:"pb-2",children:[i.jsx(pt,{children:"Employees"}),i.jsx(ne,{className:"text-2xl",children:(p==null?void 0:p.length)||0})]})})]}),i.jsxs(X,{children:[i.jsxs(te,{children:[i.jsx(ne,{children:"Payroll Items"}),i.jsx(pt,{children:"Individual employee payroll calculations"})]}),i.jsx(re,{children:i.jsx("div",{className:"border rounded-lg overflow-x-auto",children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Employee"}),i.jsx(q,{className:"text-right",children:"Basic"}),i.jsx(q,{className:"text-right",children:"Allowances"}),i.jsx(q,{className:"text-right",children:"Gross"}),i.jsx(q,{className:"text-right",children:"PAYE"}),i.jsx(q,{className:"text-right",children:"NAPSA"}),i.jsx(q,{className:"text-right",children:"NHIMA"}),i.jsx(q,{className:"text-right",children:"Total Ded."}),i.jsx(q,{className:"text-right",children:"Net Salary"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsx(Ut,{children:p==null?void 0:p.map(ie=>{var pe,Ue;return i.jsxs(je,{children:[i.jsx(U,{children:i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:((pe=ie.employees)==null?void 0:pe.full_name)||"Unknown"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:((Ue=ie.employees)==null?void 0:Ue.employee_number)||"-"})]})}),i.jsx(U,{className:"text-right",children:ue(Number(ie.basic_salary))}),i.jsx(U,{className:"text-right",children:ue(Number(ie.housing_allowance||0)+Number(ie.transport_allowance||0)+Number(ie.other_allowances||0))}),i.jsx(U,{className:"text-right font-medium",children:ue(Number(ie.gross_salary))}),i.jsx(U,{className:"text-right text-destructive",children:ue(Number(ie.paye))}),i.jsx(U,{className:"text-right text-destructive",children:ue(Number(ie.napsa_employee))}),i.jsx(U,{className:"text-right text-destructive",children:ue(Number(ie.nhima_employee))}),i.jsx(U,{className:"text-right text-destructive",children:ue(Number(ie.total_deductions))}),i.jsx(U,{className:"text-right font-medium text-primary",children:ue(Number(ie.net_salary))}),i.jsx(U,{className:"text-right",children:i.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>A(ie.employee_id),children:[i.jsx(dr,{className:"h-4 w-4 mr-2"}),"Payslip"]})})]},ie.id)})})]})})})]})]})}function XD({onUploaded:t}){const[e,n]=_.useState(!1),[r,s]=_.useState(""),a=_.useRef(null),o=tn(),{user:l}=ht(),{data:c}=Ee({queryKey:["company-settings",l==null?void 0:l.id],queryFn:async()=>{if(!l||!qo)return null;const f=await Be.getPrimaryMembershipByUser(l.id);if(!f)return null;const[m,y]=await Promise.all([Be.getCompanyById(f.companyId),Be.getCompanySettings(f.companyId)]);return{companyId:f.companyId,companyName:(y==null?void 0:y.companyName)||(m==null?void 0:m.name)||"My Organization",logoUrl:(y==null?void 0:y.logoUrl)||(m==null?void 0:m.logoUrl)||null}},enabled:!!l}),u=Xe({mutationFn:async({logoUrl:f,companyName:m})=>{if(!c)throw new Error("No company linked to current user.");await Be.updateCompanyBasics({companyId:c.companyId,logoUrl:f,name:m})},onSuccess:()=>{o.invalidateQueries({queryKey:["company-settings"]}),o.invalidateQueries({queryKey:["company"]}),Y.success("Settings updated successfully")},onError:f=>{const m=f instanceof Error?f.message:"Failed to update settings";Y.error(m)}});_.useEffect(()=>{t&&t((c==null?void 0:c.logoUrl)||null)},[t,c==null?void 0:c.logoUrl]),_.useEffect(()=>{s((c==null?void 0:c.companyName)||"")},[c==null?void 0:c.companyName]);const d=async f=>{var y;const m=(y=f.target.files)==null?void 0:y[0];if(m){if(!c){Y.error("No company linked to this user.");return}if(!m.type.startsWith("image/")){Y.error("Please upload an image file");return}if(m.size>5*1024*1024){Y.error("File size must be less than 5MB");return}n(!0);try{const p=await STe.uploadCompanyLogo(c.companyId,m);await u.mutateAsync({logoUrl:p}),t==null||t(p)}catch(p){const v=p instanceof Error?p.message:"Failed to upload logo";Y.error(v)}finally{n(!1)}}},h=()=>{const f=r.trim();!f||!c||f===c.companyName||u.mutate({companyName:f})};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"h-20 w-20 rounded-lg border-2 border-dashed border-border flex items-center justify-center overflow-hidden bg-muted",children:c!=null&&c.logoUrl?i.jsx("img",{src:c.logoUrl,alt:"Company Logo",className:"h-full w-full object-contain"}):i.jsx(Lx,{className:"h-8 w-8 text-muted-foreground"})}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Company Logo"}),i.jsx("input",{ref:a,type:"file",accept:"image/*",onChange:d,className:"hidden"}),i.jsx(H,{variant:"outline",size:"sm",onClick:()=>{var f;return(f=a.current)==null?void 0:f.click()},disabled:e||!c,children:e?i.jsxs(i.Fragment,{children:[i.jsx(mn,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):i.jsxs(i.Fragment,{children:[i.jsx(nl,{className:"h-4 w-4 mr-2"}),"Upload Logo"]})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Company Name"}),i.jsx(G,{value:r,placeholder:"Enter company name",onChange:f=>s(f.target.value),onBlur:h,disabled:!c})]})]})}const ri=t=>Number(t??0),Nc=t=>String(t??"");function GJe(){const{user:t}=ht(),e=$n(),{runId:n,employeeId:r}=Hh(),[s,a]=_.useState(!1),[o,l]=_.useState(!1),{data:c}=ud(),{data:u}=Ee({queryKey:["payrollRun",n],queryFn:async()=>{if(!n)return null;const j=await bi(Je(se,Q.PAYROLL_RUNS,n));if(!j.exists())return null;const g=j.data();return{id:j.id,period_start:Nc(g.periodStart??g.period_start),period_end:Nc(g.periodEnd??g.period_end),run_date:Nc(g.runDate??g.run_date)}},enabled:!!(t&&n)}),{data:d,isLoading:h}=Ee({queryKey:["payrollItem",n,r],queryFn:async()=>{if(!n||!r)return null;const j=we(se,Q.PAYROLL_ITEMS),g=async(k,L)=>{const V=await Ce(Te(j,he(k,"==",n),he(L,"==",r),Ts(1)));return V.empty?null:V.docs[0]},T=await g("payrollRunId","employeeId")??await g("payroll_run_id","employee_id");if(!T)return null;const E=T.data(),A=Nc(E.employeeId??E.employee_id??r);let I=null;if(A){const k=await bi(Je(se,Q.EMPLOYEES,A));if(k.exists()){const L=k.data();I={full_name:Nc(L.fullName??L.full_name),employee_number:Nc(L.employeeNumber??L.employee_number),position:L.position??null,department:L.department??null,tpin:L.tpin??null,napsa_number:L.napsaNumber??L.napsa_number??null,nhima_number:L.nhimaNumber??L.nhima_number??null,bank_name:L.bankName??L.bank_name??null,bank_account_number:L.bankAccountNumber??L.bank_account_number??null,email:L.email??null}}}return{id:T.id,employee_id:A,basic_salary:ri(E.basicSalary??E.basic_salary),housing_allowance:ri(E.housingAllowance??E.housing_allowance),transport_allowance:ri(E.transportAllowance??E.transport_allowance),other_allowances:ri(E.otherAllowances??E.other_allowances),gross_salary:ri(E.grossSalary??E.gross_salary),napsa_employee:ri(E.napsaEmployee??E.napsa_employee),napsa_employer:ri(E.napsaEmployer??E.napsa_employer),nhima_employee:ri(E.nhimaEmployee??E.nhima_employee),nhima_employer:ri(E.nhimaEmployer??E.nhima_employer),paye:ri(E.paye),advances_deducted:ri(E.advancesDeducted??E.advances_deducted),total_deductions:ri(E.totalDeductions??E.total_deductions),net_salary:ri(E.netSalary??E.net_salary),employees:I}},enabled:!!(t&&n&&r)}),{data:f}=Ee({queryKey:["payroll-additions",n,r],queryFn:async()=>{if(!n||!r)return[];const j=we(se,Q.PAYROLL_ADDITIONS);let g=await Ce(Te(j,he("payrollRunId","==",n),he("employeeId","==",r)));return g.empty&&(g=await Ce(Te(j,he("payroll_run_id","==",n),he("employee_id","==",r)))),g.docs.map(T=>{const E=T.data();return{id:T.id,type:Nc(E.type),name:Nc(E.name),amount:ri(E.amount)}})},enabled:!!(t&&n&&r)}),m=()=>{window.print(),Y.success("Print dialog opened")},y=async()=>{if(!(p!=null&&p.email)){Y.error("Employee email not found");return}a(!0);try{if(!n||!r)throw new Error("Invalid payroll context");await Ao.sendPayslipEmail({payrollRunId:n,employeeId:r}),Y.success(`Payslip queued for ${p.email}`)}catch{Y.error("Failed to send payslip email")}finally{a(!1)}};if(h)return i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});const p=d==null?void 0:d.employees,v=(f==null?void 0:f.filter(j=>j.type!=="advance"))||[],b=(f==null?void 0:f.filter(j=>j.type==="advance"))||[],x=v.reduce((j,g)=>j+Number(g.amount),0),w=b.reduce((j,g)=>j+Number(g.amount),0),C=Number(d==null?void 0:d.gross_salary)+x,S=Number(d==null?void 0:d.total_deductions)+w,P=Number(d==null?void 0:d.net_salary)-w;return i.jsxs("div",{className:"space-y-6 max-w-3xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between print:hidden",children:[i.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>e(`/payroll/${n}`),children:[i.jsx(pa,{className:"h-4 w-4 mr-2"}),"Back to Payroll Run"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(Jn,{open:o,onOpenChange:l,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(H,{variant:"outline",size:"sm",children:[i.jsx(qw,{className:"h-4 w-4 mr-2"}),"Company Settings"]})}),i.jsxs(Hn,{children:[i.jsxs(Kn,{children:[i.jsx(Gn,{children:"Company Settings"}),i.jsx(dd,{children:"Upload your company logo and set your company name"})]}),i.jsx(XD,{})]})]}),i.jsx(H,{variant:"outline",onClick:y,disabled:s||!(p!=null&&p.email),children:s?i.jsxs(i.Fragment,{children:[i.jsx(mn,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Gu,{className:"mr-2 h-4 w-4"}),"Email Payslip"]})}),i.jsxs(H,{onClick:m,children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Print / Download"]})]})]}),i.jsxs("div",{id:"payslip-content",className:"bg-card border rounded-lg shadow-lg print:border-0 print:shadow-none",children:[i.jsx("div",{className:"bg-primary text-primary-foreground p-6 rounded-t-lg print:rounded-none",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"bg-primary-foreground/20 p-3 rounded-lg h-16 w-16 flex items-center justify-center overflow-hidden",children:c!=null&&c.logoUrl?i.jsx("img",{src:c.logoUrl,alt:"Company Logo",className:"h-full w-full object-contain"}):i.jsx(Lx,{className:"h-10 w-10"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold",children:(c==null?void 0:c.companyName)||"ZedBooks NGO"}),i.jsx("p",{className:"text-primary-foreground/80 text-sm",children:"Accounting Suite"})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("h2",{className:"text-xl font-bold",children:"PAYSLIP"}),i.jsx("p",{className:"text-primary-foreground/80 text-sm",children:u&&mt(new Date(u.period_start),"MMMM yyyy")})]})]})}),i.jsx("div",{className:"bg-muted/50 px-6 py-3 border-b text-sm",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Pay Period:"}),i.jsxs("span",{className:"font-medium",children:[u&&mt(new Date(u.period_start),"dd MMM yyyy")," - ",u&&mt(new Date(u.period_end),"dd MMM yyyy")]})]})}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-3",children:"Employee Details"}),i.jsx("div",{className:"bg-muted/30 rounded-lg p-4",children:i.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-3 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Name:"}),i.jsx("span",{className:"font-semibold",children:p==null?void 0:p.full_name})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Employee No:"}),i.jsx("span",{className:"font-semibold",children:p==null?void 0:p.employee_number})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Position:"}),i.jsx("span",{className:"font-semibold",children:(p==null?void 0:p.position)||"N/A"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Department:"}),i.jsx("span",{className:"font-semibold",children:(p==null?void 0:p.department)||"N/A"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"TPIN:"}),i.jsx("span",{className:"font-semibold",children:(p==null?void 0:p.tpin)||"N/A"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"NAPSA No:"}),i.jsx("span",{className:"font-semibold",children:(p==null?void 0:p.napsa_number)||"N/A"})]})]})})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-3",children:"Earnings"}),i.jsx("div",{className:"border rounded-lg overflow-hidden",children:i.jsx("table",{className:"w-full text-sm",children:i.jsxs("tbody",{children:[i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"Basic Salary"}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:ue(Number(d==null?void 0:d.basic_salary))})]}),i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"Housing Allowance"}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:ue(Number(d==null?void 0:d.housing_allowance))})]}),i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"Transport Allowance"}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:ue(Number(d==null?void 0:d.transport_allowance))})]}),i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"Other Allowances"}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:ue(Number(d==null?void 0:d.other_allowances))})]}),v.map(j=>i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:j.name}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:ue(Number(j.amount))})]},j.id)),i.jsxs("tr",{className:"bg-primary/5",children:[i.jsx("td",{className:"px-4 py-3 font-semibold",children:"Gross Pay"}),i.jsx("td",{className:"px-4 py-3 text-right font-bold text-primary",children:ue(C)})]})]})})})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-3",children:"Deductions"}),i.jsx("div",{className:"border rounded-lg overflow-hidden",children:i.jsx("table",{className:"w-full text-sm",children:i.jsxs("tbody",{children:[i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"NAPSA (5%)"}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:ue(Number(d==null?void 0:d.napsa_employee))})]}),i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"NHIMA (1%)"}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:ue(Number(d==null?void 0:d.nhima_employee))})]}),i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"PAYE"}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:ue(Number(d==null?void 0:d.paye))})]}),Number(d==null?void 0:d.advances_deducted)>0&&i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"Advances (Previous)"}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:ue(Number(d==null?void 0:d.advances_deducted))})]}),b.map(j=>i.jsxs("tr",{className:"border-b",children:[i.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:j.name}),i.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:ue(Number(j.amount))})]},j.id)),i.jsxs("tr",{className:"bg-destructive/5",children:[i.jsx("td",{className:"px-4 py-3 font-semibold",children:"Total Deductions"}),i.jsx("td",{className:"px-4 py-3 text-right font-bold text-destructive",children:ue(S)})]})]})})})]})]}),i.jsx("div",{className:"bg-primary rounded-lg p-5 text-primary-foreground",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-primary-foreground/80 text-sm",children:"Net Pay"}),i.jsx("p",{className:"text-xs text-primary-foreground/60",children:"Amount payable to employee"})]}),i.jsx("p",{className:"text-3xl font-bold",children:ue(P)})]})}),(p==null?void 0:p.bank_name)&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-3",children:"Payment Details"}),i.jsx("div",{className:"bg-muted/30 rounded-lg p-4",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Bank:"}),i.jsx("span",{className:"font-semibold",children:p.bank_name})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Account Number:"}),i.jsx("span",{className:"font-semibold",children:p.bank_account_number})]})]})})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Employer Contributions (for reference only):"}),i.jsxs("div",{className:"flex gap-6 text-xs text-muted-foreground",children:[i.jsxs("span",{children:["NAPSA: ",ue(Number(d==null?void 0:d.napsa_employer))]}),i.jsxs("span",{children:["NHIMA: ",ue(Number(d==null?void 0:d.nhima_employer))]})]})]})]}),i.jsxs("div",{className:"bg-muted/30 px-6 py-4 rounded-b-lg border-t text-center",children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"This is a computer-generated payslip. Please keep it confidential."}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Generated on ",mt(new Date,"dd MMMM yyyy 'at' HH:mm")]})]})]})]})}function YJe(){const{user:t}=ht(),e=$n(),{id:n}=Hh(),r=tn(),[s,a]=_.useState(!1),{data:o,isLoading:l}=Ee({queryKey:["payrollRun",n],queryFn:async()=>{if(!n)return null;const v=await bi(Je(se,Q.PAYROLL_RUNS,n));if(!v.exists())return null;const b=v.data();return{id:v.id,status:b.status??b.payrollStatus??"draft",period_start:String(b.periodStart??b.period_start??""),period_end:String(b.periodEnd??b.period_end??""),approved_at:b.approvedAt??b.approved_at??null,total_gross:Number(b.totalGross??b.total_gross??0),total_deductions:Number(b.totalDeductions??b.total_deductions??0),total_net:Number(b.totalNet??b.total_net??0),notes:b.notes??null}},enabled:!!(t&&n)}),{data:c}=Ee({queryKey:["payrollItems",n],queryFn:async()=>{if(!n)return[];const v=we(se,Q.PAYROLL_ITEMS);let b=await Ce(Te(v,he("payrollRunId","==",n)));b.empty&&(b=await Ce(Te(v,he("payroll_run_id","==",n))));const x=b.docs.map(P=>({id:P.id,row:P.data()})),w=Array.from(new Set(x.map(({row:P})=>String(P.employeeId??P.employee_id??"")).filter(Boolean))),C=await Promise.all(w.map(async P=>{const j=await bi(Je(se,Q.EMPLOYEES,P));return{employeeDocId:P,snap:j}})),S=new Map;return C.forEach(({employeeDocId:P,snap:j})=>{if(!j.exists())return;const g=j.data();S.set(P,{id:j.id,full_name:String(g.fullName??g.full_name??""),employee_number:String(g.employeeNumber??g.employee_number??""),position:g.position??null,department:g.department??null,email:g.email??null,bank_account_number:g.bankAccountNumber??g.bank_account_number??null})}),x.map(({id:P,row:j})=>{const g=String(j.employeeId??j.employee_id??"");return{id:P,employee_id:g,basic_salary:Number(j.basicSalary??j.basic_salary??0),housing_allowance:Number(j.housingAllowance??j.housing_allowance??0),transport_allowance:Number(j.transportAllowance??j.transport_allowance??0),other_allowances:Number(j.otherAllowances??j.other_allowances??0),gross_salary:Number(j.grossSalary??j.gross_salary??0),napsa_employee:Number(j.napsaEmployee??j.napsa_employee??0),nhima_employee:Number(j.nhimaEmployee??j.nhima_employee??0),paye:Number(j.paye??0),advances_deducted:Number(j.advancesDeducted??j.advances_deducted??0),total_deductions:Number(j.totalDeductions??j.total_deductions??0),net_salary:Number(j.netSalary??j.net_salary??0),employees:S.get(g)??null}})},enabled:!!(t&&n)}),{data:u}=Ee({queryKey:["payrollAdditions",n],queryFn:async()=>{if(!n)return[];const v=we(se,Q.PAYROLL_ADDITIONS);let b=await Ce(Te(v,he("payrollRunId","==",n)));b.empty&&(b=await Ce(Te(v,he("payroll_run_id","==",n))));const x=b.docs.map(P=>({id:P.id,row:P.data()})),w=Array.from(new Set(x.map(({row:P})=>String(P.employeeId??P.employee_id??"")).filter(Boolean))),C=await Promise.all(w.map(async P=>{const j=await bi(Je(se,Q.EMPLOYEES,P));return{employeeDocId:P,snap:j}})),S=new Map;return C.forEach(({employeeDocId:P,snap:j})=>{if(!j.exists())return;const g=j.data();S.set(P,{full_name:String(g.fullName??g.full_name??""),employee_number:String(g.employeeNumber??g.employee_number??"")})}),x.map(({id:P,row:j})=>{const g=String(j.employeeId??j.employee_id??"");return{id:P,type:String(j.type??""),name:String(j.name??""),amount:Number(j.amount??0),employees:S.get(g)??null}})},enabled:!!(t&&n)}),d=Xe({mutationFn:async()=>{if(!n||!t)throw new Error("Not authenticated");await Kl(Je(se,Q.PAYROLL_RUNS,n),{status:"approved",approvedAt:new Date().toISOString(),approvedBy:t.id,updatedAt:Re()})},onSuccess:()=>{r.invalidateQueries({queryKey:["payrollRun",n]}),Y.success("Payroll approved successfully!")},onError:()=>{Y.error("Failed to approve payroll")}}),h=Xe({mutationFn:async()=>{if(!n)throw new Error("Payroll run not found");await Kl(Je(se,Q.PAYROLL_RUNS,n),{status:"draft",updatedAt:Re()})},onSuccess:()=>{r.invalidateQueries({queryKey:["payrollRun",n]}),Y.success("Payroll rejected and returned to draft"),e("/payroll")},onError:()=>{Y.error("Failed to reject payroll")}}),f=async()=>{if(!c||c.length===0){Y.error("No payroll items to email");return}const v=c.filter(w=>{var C;return!!((C=w.employees)!=null&&C.email)});if(v.length===0){Y.error("No employees have email addresses configured");return}a(!0);let b=0,x=0;for(const w of v)try{if(!n)continue;await Ao.sendPayslipEmail({payrollRunId:n,employeeId:w.employee_id}),b++}catch{x++}a(!1),b>0&&Y.success(`Successfully sent ${b} payslip email(s)`),x>0&&Y.error(`Failed to send ${x} email(s)`)};if(l)return i.jsx("div",{children:"Loading..."});if(!o)return i.jsx("div",{children:"Payroll run not found"});const m=o.status==="approved"||o.status==="completed",y=(u==null?void 0:u.reduce((v,b)=>v+(b.type!=="advance"?Number(b.amount):0),0))||0,p=(u==null?void 0:u.reduce((v,b)=>v+(b.type==="advance"?Number(b.amount):0),0))||0;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>e("/payroll"),children:[i.jsx(pa,{className:"h-4 w-4 mr-2"}),"Back"]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Payroll Approval"}),i.jsxs("p",{className:"text-muted-foreground",children:["Review and approve payroll for"," ",mt(new Date(o.period_start),"dd MMM")," -"," ",mt(new Date(o.period_end),"dd MMM yyyy")]})]}),m&&i.jsxs(H,{onClick:f,disabled:s,children:[s?i.jsx(mn,{className:"h-4 w-4 mr-2 animate-spin"}):i.jsx(Gu,{className:"h-4 w-4 mr-2"}),s?"Sending...":"Email All Payslips"]})]}),m&&i.jsxs("div",{className:"bg-green-100 dark:bg-green-900/30 border border-green-200 dark:border-green-800 rounded-lg p-4 flex items-center gap-3",children:[i.jsx(Qo,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-green-800 dark:text-green-200",children:"This payroll has been approved"}),o.approved_at&&i.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400",children:["Approved on ",mt(new Date(o.approved_at),"dd MMM yyyy 'at' HH:mm")]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(X,{children:i.jsxs(te,{className:"pb-2",children:[i.jsx(pt,{children:"Employees"}),i.jsx(ne,{className:"text-2xl",children:(c==null?void 0:c.length)||0})]})}),i.jsx(X,{children:i.jsxs(te,{className:"pb-2",children:[i.jsx(pt,{children:"Total Gross Pay"}),i.jsx(ne,{className:"text-2xl text-primary",children:ue(Number(o.total_gross||0))})]})}),i.jsx(X,{children:i.jsxs(te,{className:"pb-2",children:[i.jsx(pt,{children:"Total Deductions"}),i.jsx(ne,{className:"text-2xl text-destructive",children:ue(Number(o.total_deductions||0))})]})}),i.jsx(X,{className:"bg-primary/5 border-primary/20",children:i.jsxs(te,{className:"pb-2",children:[i.jsx(pt,{children:"Total Net Pay"}),i.jsx(ne,{className:"text-2xl text-primary",children:ue(Number(o.total_net||0))})]})})]}),u&&u.length>0&&i.jsxs(X,{children:[i.jsxs(te,{children:[i.jsx(ne,{children:"Payroll Additions & Advances"}),i.jsx(pt,{children:"Custom earnings, bonuses, overtime, and advance deductions for this payroll run"})]}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Additional Earnings"}),i.jsx("p",{className:"text-xl font-bold text-primary",children:ue(y)})]}),i.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Advance Deductions"}),i.jsx("p",{className:"text-xl font-bold text-destructive",children:ue(p)})]}),i.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Additions"}),i.jsx("p",{className:"text-xl font-bold",children:u.length})]})]}),i.jsx("div",{className:"border rounded-lg",children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Employee"}),i.jsx(q,{children:"Type"}),i.jsx(q,{children:"Name"}),i.jsx(q,{className:"text-right",children:"Amount"})]})}),i.jsx(Ut,{children:u.map(v=>{var b,x;return i.jsxs(je,{children:[i.jsx(U,{children:i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:(b=v.employees)==null?void 0:b.full_name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:(x=v.employees)==null?void 0:x.employee_number})]})}),i.jsx(U,{children:i.jsx(Ve,{variant:v.type==="advance"?"destructive":"default",children:v.type})}),i.jsx(U,{children:v.name}),i.jsxs(U,{className:`text-right font-medium ${v.type==="advance"?"text-destructive":"text-primary"}`,children:[v.type==="advance"?"-":"",ue(Number(v.amount))]})]},v.id)})})]})})]})]}),i.jsxs(X,{children:[i.jsxs(te,{children:[i.jsx(ne,{children:"Employee Breakdown"}),i.jsx(pt,{children:"Review individual payroll calculations"})]}),i.jsx(re,{children:i.jsx("div",{className:"border rounded-lg",children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Employee"}),i.jsx(q,{children:"Department"}),i.jsx(q,{className:"text-right",children:"Gross"}),i.jsx(q,{className:"text-right",children:"PAYE"}),i.jsx(q,{className:"text-right",children:"NAPSA"}),i.jsx(q,{className:"text-right",children:"NHIMA"}),i.jsx(q,{className:"text-right",children:"Advances"}),i.jsx(q,{className:"text-right",children:"Total Deductions"}),i.jsx(q,{className:"text-right",children:"Net Pay"})]})}),i.jsx(Ut,{children:c==null?void 0:c.map(v=>{var b,x,w;return i.jsxs(je,{children:[i.jsx(U,{children:i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:((b=v.employees)==null?void 0:b.full_name)||"Unknown"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:((x=v.employees)==null?void 0:x.employee_number)||"-"})]})}),i.jsx(U,{children:((w=v.employees)==null?void 0:w.department)||"-"}),i.jsx(U,{className:"text-right",children:ue(Number(v.gross_salary))}),i.jsx(U,{className:"text-right",children:ue(Number(v.paye))}),i.jsx(U,{className:"text-right",children:ue(Number(v.napsa_employee))}),i.jsx(U,{className:"text-right",children:ue(Number(v.nhima_employee))}),i.jsx(U,{className:"text-right text-destructive",children:ue(Number(v.advances_deducted||0))}),i.jsx(U,{className:"text-right text-destructive",children:ue(Number(v.total_deductions))}),i.jsx(U,{className:"text-right font-medium",children:ue(Number(v.net_salary))})]},v.id)})})]})})})]}),o.notes&&i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"Notes"})}),i.jsx(re,{children:i.jsx("p",{className:"text-muted-foreground",children:o.notes})})]}),!m&&i.jsxs("div",{className:"flex justify-end gap-4",children:[i.jsxs(Do,{children:[i.jsx(lu,{asChild:!0,children:i.jsxs(H,{variant:"outline",className:"text-destructive border-destructive",children:[i.jsx(i8,{className:"h-4 w-4 mr-2"}),"Reject"]})}),i.jsxs(Ha,{children:[i.jsxs(Ka,{children:[i.jsx(Ya,{children:"Reject Payroll?"}),i.jsx(Qa,{children:"This will return the payroll to draft status for corrections. The payroll will need to be resubmitted for approval."})]}),i.jsxs(Ga,{children:[i.jsx(Za,{children:"Cancel"}),i.jsx(Xa,{onClick:()=>h.mutate(),className:"bg-destructive text-destructive-foreground",children:"Reject Payroll"})]})]})]}),i.jsxs(Do,{children:[i.jsx(lu,{asChild:!0,children:i.jsxs(H,{children:[i.jsx(Qo,{className:"h-4 w-4 mr-2"}),"Approve Payroll"]})}),i.jsxs(Ha,{children:[i.jsxs(Ka,{children:[i.jsx(Ya,{children:"Approve Payroll?"}),i.jsxs(Qa,{children:["By approving this payroll, you confirm that all calculations are correct and payments can proceed.",i.jsx("br",{}),i.jsx("br",{}),i.jsxs("strong",{children:["Total Net Pay: ",ue(Number(o.total_net||0))]})]})]}),i.jsxs(Ga,{children:[i.jsx(Za,{children:"Cancel"}),i.jsx(Xa,{onClick:()=>d.mutate(),children:"Approve Payroll"})]})]})]})]})]})}const QJe=rd({employee_id:We().min(1,"Employee is required"),amount:We().min(1,"Amount is required"),date_given:We().min(1,"Date given is required"),months_to_repay:We().min(1,"Months to repay is required"),reason:We().optional()});function XJe(){const{user:t}=ht(),[e,n]=_.useState(!1),r=tn(),s=td({resolver:nd(QJe),defaultValues:{employee_id:"",amount:"",date_given:mt(new Date,"yyyy-MM-dd"),months_to_repay:"1",reason:""}}),a=s.watch("amount"),o=s.watch("months_to_repay"),l=a&&o?(parseFloat(a)/parseInt(o)).toFixed(2):"0.00",{data:c}=Ee({queryKey:["advances-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const S=await Be.getPrimaryMembershipByUser(t.id);return(S==null?void 0:S.companyId)??null},enabled:!!t}),{data:u}=Ee({queryKey:["employees-active"],queryFn:async()=>{if(!c)return[];const S=we(se,Q.EMPLOYEES);return(await Ce(Te(S,he("companyId","==",c)))).docs.map(j=>{const g=j.data();return{id:j.id,full_name:String(g.fullName??g.full_name??""),employee_number:g.employeeNumber??g.employee_number??null,department:g.department??null,employment_status:String(g.employmentStatus??g.employment_status??"active")}}).filter(j=>j.employment_status==="active").sort((j,g)=>j.full_name.localeCompare(g.full_name))},enabled:!!c}),{data:d,isLoading:h}=Ee({queryKey:["advances",c],queryFn:async()=>{if(!c)return[];const S=we(se,Q.ADVANCES),j=(await Ce(Te(S,he("companyId","==",c)))).docs.map(E=>{var L;const A=E.data(),I=A.dateGiven??A.date_given,k=typeof I=="string"?I:((L=I==null?void 0:I.toDate)==null?void 0:L.call(I).toISOString().slice(0,10))??"";return{id:E.id,employee_id:String(A.employeeId??A.employee_id??""),amount:Number(A.amount??0),date_given:k,reason:A.reason??null,status:String(A.status??"pending"),months_to_repay:Number(A.monthsToRepay??A.months_to_repay??1),monthly_deduction:Number(A.monthlyDeduction??A.monthly_deduction??0),remaining_balance:Number(A.remainingBalance??A.remaining_balance??A.amount??0),months_deducted:Number(A.monthsDeducted??A.months_deducted??0),created_at:String(A.createdAt??A.created_at??"")}}),g=Array.from(new Set(j.map(E=>E.employee_id).filter(Boolean))),T=new Map;if(g.length>0){const E=we(se,Q.EMPLOYEES);(await Ce(Te(E,he(to(),"in",g.slice(0,30))))).docs.forEach(I=>{const k=I.data();T.set(I.id,{full_name:String(k.fullName??k.full_name??""),employee_number:k.employeeNumber??k.employee_number??null,department:k.department??null})})}return j.map(E=>({...E,employees:T.get(E.employee_id)??null})).sort((E,A)=>String(A.created_at).localeCompare(String(E.created_at)))},enabled:!!c}),f=Xe({mutationFn:async S=>{if(!t||!c)throw new Error("Not authenticated");const P=parseFloat(S.amount),j=parseInt(S.months_to_repay),g=P/j;await es(we(se,Q.ADVANCES),{companyId:c,employeeId:S.employee_id,amount:P,dateGiven:S.date_given,reason:S.reason||null,status:"pending",monthsToRepay:j,monthlyDeduction:g,remainingBalance:P,monthsDeducted:0,createdBy:t.id,createdAt:Re(),updatedAt:Re()})},onSuccess:()=>{r.invalidateQueries({queryKey:["advances",c]}),Y.success("Advance recorded successfully"),n(!1),s.reset()},onError:S=>{Y.error("Failed to record advance: "+S.message)}}),m=Xe({mutationFn:async({id:S,status:P})=>{await xr(Je(se,Q.ADVANCES,S),{status:P,updatedAt:Re()},{merge:!0})},onSuccess:()=>{r.invalidateQueries({queryKey:["advances",c]}),Y.success("Advance status updated")},onError:()=>{Y.error("Failed to update status")}}),y=Xe({mutationFn:async S=>{const P=(S.months_deducted||0)+1,j=Number(S.remaining_balance)-Number(S.monthly_deduction),g=P>=S.months_to_repay;await xr(Je(se,Q.ADVANCES,S.id),{monthsDeducted:P,remainingBalance:Math.max(0,j),status:g?"deducted":"pending",updatedAt:Re()},{merge:!0})},onSuccess:()=>{r.invalidateQueries({queryKey:["advances",c]}),Y.success("Deduction recorded")},onError:()=>{Y.error("Failed to record deduction")}}),p=S=>{f.mutate(S)},v=S=>{switch(S){case"pending":return i.jsxs(Ve,{variant:"outline",className:"gap-1",children:[i.jsx($i,{className:"h-3 w-3"})," Pending"]});case"deducted":return i.jsxs(Ve,{variant:"default",className:"gap-1 bg-green-600",children:[i.jsx(Qo,{className:"h-3 w-3"})," Fully Repaid"]});case"cancelled":return i.jsxs(Ve,{variant:"destructive",className:"gap-1",children:[i.jsx(i8,{className:"h-3 w-3"})," Cancelled"]});default:return i.jsx(Ve,{variant:"secondary",children:S})}},b=(d==null?void 0:d.reduce((S,P)=>S+Number(P.amount),0))||0,x=(d==null?void 0:d.filter(S=>S.status==="pending"))||[],w=x.reduce((S,P)=>S+Number(P.remaining_balance||P.amount),0),C=(d==null?void 0:d.filter(S=>S.status==="deducted").reduce((S,P)=>S+Number(P.amount),0))||0;return h?i.jsx("div",{children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Employee Advances"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage salary advances and repayment schedules"})]}),i.jsxs(H,{onClick:()=>n(!0),children:[i.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Record Advance"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(X,{children:i.jsxs(te,{className:"pb-2",children:[i.jsx(pt,{children:"Total Advances"}),i.jsx(ne,{className:"text-2xl",children:(d==null?void 0:d.length)||0})]})}),i.jsx(X,{children:i.jsxs(te,{className:"pb-2",children:[i.jsx(pt,{children:"Total Amount Issued"}),i.jsx(ne,{className:"text-2xl text-primary",children:ue(b)})]})}),i.jsxs(X,{className:"border-amber-200 dark:border-amber-800",children:[i.jsxs(te,{className:"pb-2",children:[i.jsx(pt,{children:"Outstanding Balance"}),i.jsx(ne,{className:"text-2xl text-amber-600",children:ue(w)})]}),i.jsx(re,{children:i.jsxs("p",{className:"text-xs text-muted-foreground",children:[x.length," active advance(s)"]})})]}),i.jsx(X,{className:"border-green-200 dark:border-green-800",children:i.jsxs(te,{className:"pb-2",children:[i.jsx(pt,{children:"Fully Repaid"}),i.jsx(ne,{className:"text-2xl text-green-600",children:ue(C)})]})})]}),i.jsxs(X,{children:[i.jsxs(te,{children:[i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(Va,{className:"h-5 w-5"}),"All Advances"]}),i.jsx(pt,{children:"View and manage employee salary advances with repayment tracking"})]}),i.jsx(re,{children:i.jsx("div",{className:"rounded-lg border",children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Employee"}),i.jsx(q,{className:"text-right",children:"Total Amount"}),i.jsx(q,{children:"Repayment Schedule"}),i.jsx(q,{children:"Progress"}),i.jsx(q,{className:"text-right",children:"Remaining"}),i.jsx(q,{children:"Status"}),i.jsx(q,{children:"Actions"})]})}),i.jsxs(Ut,{children:[d==null?void 0:d.map(S=>{const P=S.employees,j=S.months_deducted||0,g=S.months_to_repay||1,T=S.remaining_balance??S.amount,E=j/g*100;return i.jsxs(je,{children:[i.jsx(U,{children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:P==null?void 0:P.full_name}),i.jsx("div",{className:"text-sm text-muted-foreground",children:P==null?void 0:P.employee_number}),i.jsx("div",{className:"text-xs text-muted-foreground",children:mt(new Date(S.date_given),"dd MMM yyyy")})]})}),i.jsx(U,{className:"text-right font-medium",children:ue(Number(S.amount))}),i.jsx(U,{children:i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[i.jsx(Fm,{className:"h-3 w-3 text-muted-foreground"}),g," month",g>1?"s":""]}),i.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[i.jsx(lo,{className:"h-3 w-3"}),ue(Number(S.monthly_deduction||S.amount)),"/month"]})]})}),i.jsx(U,{children:i.jsxs("div",{className:"space-y-1 min-w-[120px]",children:[i.jsx(Su,{value:E,className:"h-2"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[j," of ",g," payments"]})]})}),i.jsx(U,{className:"text-right font-medium text-amber-600",children:ue(Number(T))}),i.jsx(U,{children:v(S.status)}),i.jsx(U,{children:S.status==="pending"&&i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs(Do,{children:[i.jsx(lu,{asChild:!0,children:i.jsx(H,{size:"sm",variant:"outline",children:"Record Deduction"})}),i.jsxs(Ha,{children:[i.jsxs(Ka,{children:[i.jsx(Ya,{children:"Record Monthly Deduction?"}),i.jsxs(Qa,{children:["This will record a deduction of ",ue(Number(S.monthly_deduction||S.amount))," for ",P==null?void 0:P.full_name,".",i.jsx("br",{}),i.jsx("br",{}),i.jsx("strong",{children:"Current Progress:"})," ",j," of ",g," payments",i.jsx("br",{}),i.jsx("strong",{children:"Remaining after this:"})," ",ue(Math.max(0,Number(T)-Number(S.monthly_deduction||S.amount)))]})]}),i.jsxs(Ga,{children:[i.jsx(Za,{children:"Cancel"}),i.jsx(Xa,{onClick:()=>y.mutate(S),children:"Record Deduction"})]})]})]}),i.jsxs(Do,{children:[i.jsx(lu,{asChild:!0,children:i.jsx(H,{size:"sm",variant:"ghost",className:"text-destructive",children:"Cancel"})}),i.jsxs(Ha,{children:[i.jsxs(Ka,{children:[i.jsx(Ya,{children:"Cancel Advance?"}),i.jsx(Qa,{children:"This will cancel the advance. This action cannot be undone."})]}),i.jsxs(Ga,{children:[i.jsx(Za,{children:"Keep"}),i.jsx(Xa,{className:"bg-destructive text-destructive-foreground",onClick:()=>m.mutate({id:S.id,status:"cancelled"}),children:"Cancel Advance"})]})]})]})]})})]},S.id)}),(d==null?void 0:d.length)===0&&i.jsx(je,{children:i.jsxs(U,{colSpan:7,className:"text-center py-12",children:[i.jsx(Va,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),i.jsx("h3",{className:"text-lg font-medium",children:"No advances recorded"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Start by recording an employee advance"}),i.jsxs(H,{onClick:()=>n(!0),children:[i.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Record Advance"]})]})})]})]})})})]}),i.jsx(Jn,{open:e,onOpenChange:n,children:i.jsxs(Hn,{className:"max-w-md",children:[i.jsxs(Kn,{children:[i.jsx(Gn,{children:"Record Employee Advance"}),i.jsx(dd,{children:"Enter the advance details and repayment schedule"})]}),i.jsx(d1,{...s,children:i.jsxs("form",{onSubmit:s.handleSubmit(p),className:"space-y-4",children:[i.jsx(lt,{control:s.control,name:"employee_id",render:({field:S})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Employee"}),i.jsxs(Tt,{onValueChange:S.onChange,value:S.value,children:[i.jsx(ot,{children:i.jsx(jt,{children:i.jsx(Ct,{placeholder:"Select employee"})})}),i.jsx(Nt,{children:u==null?void 0:u.map(P=>i.jsxs(be,{value:P.id,children:[P.full_name," (",P.employee_number,")"]},P.id))})]}),i.jsx(ut,{})]})}),i.jsx(lt,{control:s.control,name:"amount",render:({field:S})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Total Amount (ZMW)"}),i.jsx(ot,{children:i.jsx(G,{type:"number",step:"0.01",placeholder:"0.00",...S})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:s.control,name:"date_given",render:({field:S})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Date Given"}),i.jsx(ot,{children:i.jsx(G,{type:"date",...S})}),i.jsx(ut,{})]})}),i.jsx(lt,{control:s.control,name:"months_to_repay",render:({field:S})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Months to Repay"}),i.jsxs(Tt,{onValueChange:S.onChange,value:S.value,children:[i.jsx(ot,{children:i.jsx(jt,{children:i.jsx(Ct,{placeholder:"Select months"})})}),i.jsx(Nt,{children:[1,2,3,4,5,6,9,12].map(P=>i.jsxs(be,{value:P.toString(),children:[P," month",P>1?"s":""]},P))})]}),i.jsxs(ch,{children:["Monthly deduction: ",i.jsx("strong",{children:ue(parseFloat(l))})]}),i.jsx(ut,{})]})}),i.jsx(lt,{control:s.control,name:"reason",render:({field:S})=>i.jsxs(at,{children:[i.jsx(ct,{children:"Reason (Optional)"}),i.jsx(ot,{children:i.jsx(Zn,{placeholder:"Enter reason for advance",...S})}),i.jsx(ut,{})]})}),i.jsxs(p1,{children:[i.jsx(H,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),i.jsx(H,{type:"submit",disabled:f.isPending,children:f.isPending?"Recording...":"Record Advance"})]})]})})]})})]})}const Y6=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},ZJe=t=>{if(!t)return"";if(typeof t=="string")return t.slice(0,10);if(t instanceof Date)return t.toISOString().slice(0,10);if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString().slice(0,10)}return""},JJe=t=>{const e=String(t||"").toLowerCase().trim();return e==="approved"?"processed":e==="completed"?"paid":["draft","trial","processed","paid","payment_reversed","reversed","final"].includes(e)?e:"draft"},bf=t=>{const e=Number(t);return Number.isFinite(e)?e:0},eet=t=>t==null?"":String(t).replaceAll('"','""'),OA=(t,e,n)=>{const r=[t,...e].map(l=>l.map(c=>`"${eet(c)}"`).join(",")).join(`
`),s=new Blob([r],{type:"text/csv"}),a=window.URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download=n,o.click(),window.URL.revokeObjectURL(a)};function tet(){var S,P;const{user:t}=ht(),[e,n]=_.useState(mt(new Date,"yyyy-MM")),[r,s]=_.useState(!1),a=Ee({queryKey:["zra-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const j=await Be.getPrimaryMembershipByUser(t.id);return(j==null?void 0:j.companyId)??null},enabled:!!t}),o=a.data??null,l=`${e}-01`,c=`${e}-31`,u=Ee({queryKey:["payroll-runs-zra",o,e],queryFn:async()=>{if(!o)return[];const j=we(se,Q.PAYROLL_RUNS);return(await Ce(Te(j,he("companyId","==",o)))).docs.map(T=>{const E=T.data();return{id:T.id,runDate:ZJe(E.runDate??E.run_date),status:JJe(E.payrollStatus??E.payroll_status??E.status)}}).filter(T=>T.runDate>=l&&T.runDate<=c).sort((T,E)=>E.runDate.localeCompare(T.runDate))},enabled:!!o}),d=Ee({queryKey:["payroll-items-zra",o,e,r?"with-reversed":"without-reversed",(S=u.data)==null?void 0:S.map(j=>j.id).join(",")],queryFn:async()=>{if(!o||!u.data||u.data.length===0)return[];const j=u.data.filter(L=>r||L.status!=="reversed").map(L=>L.id);if(j.length===0)return[];const g=we(se,Q.PAYROLL_ITEMS),T=Y6(j,30),A=(await Promise.all(T.map(L=>Ce(Te(g,he("payrollRunId","in",L)))))).flatMap(L=>L.docs.map(V=>{const B=V.data();return{id:V.id,employeeId:String(B.employeeId??B.employee_id??""),payrollRunId:String(B.payrollRunId??B.payroll_run_id??""),grossSalary:bf(B.grossSalary??B.gross_salary),paye:bf(B.paye),napsaEmployee:bf(B.napsaEmployee??B.napsa_employee),napsaEmployer:bf(B.napsaEmployer??B.napsa_employer),nhimaEmployee:bf(B.nhimaEmployee??B.nhima_employee),nhimaEmployer:bf(B.nhimaEmployer??B.nhima_employer)}})),I=Array.from(new Set(A.map(L=>L.employeeId).filter(Boolean))),k=new Map;if(I.length>0){const L=we(se,Q.EMPLOYEES),V=Y6(I,30);(await Promise.all(V.map(M=>Ce(Te(L,he(to(),"in",M)))))).forEach(M=>{M.docs.forEach($=>{const O=$.data();k.set($.id,{id:$.id,fullName:String(O.fullName??O.full_name??""),employeeNumber:O.employeeNumber??O.employee_number??null,tpin:O.tpin??null,napsaNumber:O.napsaNumber??O.napsa_number??null,nhimaNumber:O.nhimaNumber??O.nhima_number??null})})})}return A.map(L=>({...L,employee:k.get(L.employeeId)??null}))},enabled:!!o&&!!u.data&&(((P=u.data)==null?void 0:P.length)??0)>0}),h=_.useMemo(()=>d.data??[],[d.data]),f=a.isLoading||u.isLoading||d.isLoading,m=_.useMemo(()=>h.reduce((j,g)=>j+g.paye,0),[h]),y=_.useMemo(()=>h.reduce((j,g)=>j+g.napsaEmployee,0),[h]),p=_.useMemo(()=>h.reduce((j,g)=>j+g.napsaEmployer,0),[h]),v=_.useMemo(()=>h.reduce((j,g)=>j+g.nhimaEmployee,0),[h]),b=_.useMemo(()=>h.reduce((j,g)=>j+g.nhimaEmployer,0),[h]),x=()=>{h.length!==0&&OA(["TPIN","Employee Number","Employee Name","Gross Salary","PAYE"],h.map(j=>{var g,T,E;return[((g=j.employee)==null?void 0:g.tpin)||"N/A",((T=j.employee)==null?void 0:T.employeeNumber)||"",((E=j.employee)==null?void 0:E.fullName)||"",j.grossSalary,j.paye]}),`PAYE-Report-${e}.csv`)},w=()=>{h.length!==0&&OA(["NAPSA Number","Employee Number","Employee Name","Gross Salary","NAPSA Employee (5%)","NAPSA Employer (5%)","Total NAPSA"],h.map(j=>{var g,T,E;return[((g=j.employee)==null?void 0:g.napsaNumber)||"N/A",((T=j.employee)==null?void 0:T.employeeNumber)||"",((E=j.employee)==null?void 0:E.fullName)||"",j.grossSalary,j.napsaEmployee,j.napsaEmployer,j.napsaEmployee+j.napsaEmployer]}),`NAPSA-Report-${e}.csv`)},C=()=>{h.length!==0&&OA(["NHIMA Number","Employee Number","Employee Name","Gross Salary","NHIMA Employee (1%)","NHIMA Employer (1%)","Total NHIMA"],h.map(j=>{var g,T,E;return[((g=j.employee)==null?void 0:g.nhimaNumber)||"N/A",((T=j.employee)==null?void 0:T.employeeNumber)||"",((E=j.employee)==null?void 0:E.fullName)||"",j.grossSalary,j.nhimaEmployee,j.nhimaEmployer,j.nhimaEmployee+j.nhimaEmployer]}),`NHIMA-Report-${e}.csv`)};return f?i.jsx("div",{children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"ZRA Compliance Reports"}),i.jsx("p",{className:"text-muted-foreground",children:"Generate statutory compliance reports for ZRA, NAPSA, and NHIMA"})]}),i.jsxs("div",{className:"max-w-xs",children:[i.jsx(ee,{children:"Select Month"}),i.jsx(G,{type:"month",value:e,onChange:j=>n(j.target.value)}),i.jsxs("label",{className:"mt-3 flex items-center gap-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:r,onChange:j=>s(j.target.checked)}),"Include reversed payroll runs"]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{className:"text-sm font-medium",children:"Total PAYE"})}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:ue(m)}),i.jsxs(H,{className:"mt-4 w-full",variant:"outline",onClick:x,disabled:h.length===0,children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export PAYE Report"]})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{className:"text-sm font-medium",children:"Total NAPSA"})}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:ue(y+p)}),i.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Employee: ",ue(y)," | Employer: ",ue(p)]}),i.jsxs(H,{className:"mt-4 w-full",variant:"outline",onClick:w,disabled:h.length===0,children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export NAPSA Report"]})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{className:"text-sm font-medium",children:"Total NHIMA"})}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:ue(v+b)}),i.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Employee: ",ue(v)," | Employer: ",ue(b)]}),i.jsxs(H,{className:"mt-4 w-full",variant:"outline",onClick:C,disabled:h.length===0,children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export NHIMA Report"]})]})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"Employee Details"})}),i.jsx(re,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Employee"}),i.jsx(q,{children:"TPIN"}),i.jsx(q,{children:"NAPSA No."}),i.jsx(q,{children:"NHIMA No."}),i.jsx(q,{children:"Gross"}),i.jsx(q,{children:"PAYE"}),i.jsx(q,{children:"NAPSA"}),i.jsx(q,{children:"NHIMA"})]})}),i.jsxs(Ut,{children:[h.map(j=>{var g,T,E,A,I;return i.jsxs(je,{children:[i.jsx(U,{children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:((g=j.employee)==null?void 0:g.fullName)||"Unknown Employee"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:((T=j.employee)==null?void 0:T.employeeNumber)||"-"})]})}),i.jsx(U,{className:"text-sm",children:((E=j.employee)==null?void 0:E.tpin)||"N/A"}),i.jsx(U,{className:"text-sm",children:((A=j.employee)==null?void 0:A.napsaNumber)||"N/A"}),i.jsx(U,{className:"text-sm",children:((I=j.employee)==null?void 0:I.nhimaNumber)||"N/A"}),i.jsx(U,{children:ue(j.grossSalary)}),i.jsx(U,{children:ue(j.paye)}),i.jsx(U,{children:ue(j.napsaEmployee)}),i.jsx(U,{children:ue(j.nhimaEmployee)})]},j.id)}),h.length===0&&i.jsx(je,{children:i.jsx(U,{colSpan:8,className:"text-center text-muted-foreground",children:"No payroll data found for the selected month"})})]})]})})]})]})}function net(){const t=$n(),[e,n]=_.useState(""),[r,s]=_.useState(""),[a,o]=_.useState(null),l=()=>{const u=Number(r)||0;if(u<=0)return;const d=zZ(u),h=qZ(u),f=WZ(u),m=d+h.employee+f.employee,y=u-m,p=u+h.employer+f.employer;o({paye:d,napsaEmployee:h.employee,napsaEmployer:h.employer,nhimaEmployee:f.employee,nhimaEmployer:f.employer,totalDeductions:m,netSalary:y,employerCost:p})},c=[{gross:5e3,description:"Below first threshold"},{gross:6e3,description:"In second band"},{gross:8e3,description:"In third band"},{gross:12e3,description:"In fourth band"},{gross:45e3,description:"High income example"}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>t("/dashboard"),children:[i.jsx(pa,{className:"h-4 w-4 mr-2"}),"Back"]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Tax Calculator"}),i.jsx("p",{className:"text-muted-foreground",children:"Calculate PAYE, NAPSA, NHIMA, and net salary"})]})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[i.jsxs(X,{children:[i.jsxs(te,{children:[i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(mv,{className:"h-5 w-5"}),"Calculate Taxes"]}),i.jsx(pt,{children:"Enter salary details to see tax breakdown"})]}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"basicSalary",children:"Basic Salary (ZMW)"}),i.jsx(G,{id:"basicSalary",type:"number",step:"0.01",placeholder:"Enter basic salary",value:e,onChange:u=>n(u.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"grossSalary",children:"Gross Salary (ZMW)"}),i.jsx(G,{id:"grossSalary",type:"number",step:"0.01",placeholder:"Enter gross salary",value:r,onChange:u=>s(u.target.value)})]}),i.jsx(H,{onClick:l,className:"w-full",children:"Calculate"}),a&&i.jsxs("div",{className:"mt-6 space-y-4 pt-4 border-t",children:[i.jsx("h3",{className:"font-semibold",children:"Results"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"PAYE Tax:"}),i.jsx("span",{className:"font-medium",children:ue(a.paye)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"NAPSA (Employee):"}),i.jsx("span",{className:"font-medium",children:ue(a.napsaEmployee)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"NHIMA (Employee):"}),i.jsx("span",{className:"font-medium",children:ue(a.nhimaEmployee)})]}),i.jsxs("div",{className:"flex justify-between text-sm font-semibold pt-2 border-t",children:[i.jsx("span",{children:"Total Deductions:"}),i.jsx("span",{children:ue(a.totalDeductions)})]}),i.jsxs("div",{className:"flex justify-between text-lg font-bold pt-2 border-t",children:[i.jsx("span",{children:"Net Salary:"}),i.jsx("span",{className:"text-primary",children:ue(a.netSalary)})]})]}),i.jsxs("div",{className:"mt-4 pt-4 border-t space-y-2",children:[i.jsx("h4",{className:"font-semibold text-sm",children:"Employer Contributions"}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"NAPSA (Employer):"}),i.jsx("span",{className:"font-medium",children:ue(a.napsaEmployer)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"NHIMA (Employer):"}),i.jsx("span",{className:"font-medium",children:ue(a.nhimaEmployer)})]}),i.jsxs("div",{className:"flex justify-between text-sm font-semibold pt-2 border-t",children:[i.jsx("span",{children:"Total Employer Cost:"}),i.jsx("span",{children:ue(a.employerCost)})]})]})]})]})]}),i.jsxs(X,{children:[i.jsxs(te,{children:[i.jsx(ne,{children:"Tax Band Reference"}),i.jsx(pt,{children:"Zambian PAYE tax bands (2025/26)"})]}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"border rounded-lg p-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm font-medium",children:"K0 - K5,100"}),i.jsx("span",{className:"text-sm font-bold",children:"0%"})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"First K5,100 is tax-free"})]}),i.jsxs("div",{className:"border rounded-lg p-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm font-medium",children:"K5,100.01 - K7,100"}),i.jsx("span",{className:"text-sm font-bold",children:"20%"})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Next K2,000 taxed at 20%"})]}),i.jsxs("div",{className:"border rounded-lg p-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm font-medium",children:"K7,100.01 - K9,200"}),i.jsx("span",{className:"text-sm font-bold",children:"30%"})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Next K2,100 taxed at 30%"})]}),i.jsxs("div",{className:"border rounded-lg p-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm font-medium",children:"Above K9,200"}),i.jsx("span",{className:"text-sm font-bold",children:"37%"})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Balance taxed at 37%"})]})]}),i.jsxs("div",{className:"mt-6 pt-4 border-t",children:[i.jsx("h4",{className:"font-semibold text-sm mb-3",children:"Quick Examples"}),i.jsx("div",{className:"space-y-2",children:c.map(u=>i.jsxs(H,{variant:"outline",size:"sm",className:"w-full justify-between",onClick:()=>{n(u.gross.toString()),s(u.gross.toString())},children:[i.jsx("span",{className:"text-xs",children:u.description}),i.jsx("span",{className:"font-semibold",children:ue(u.gross)})]},u.gross))})]}),i.jsxs("div",{className:"mt-4 p-3 bg-muted rounded-lg text-xs space-y-1",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"NAPSA:"})," 5% of gross salary, capped at K1,342.00 (employee & employer)"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"NHIMA:"})," 1% of gross salary, capped at K250.00 (employee & employer)"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"PAYE:"})," Progressive tax on gross salary"]})]})]})]})]})]})}function ret(t){const e=[];let n="",r=!1;for(let s=0;s<t.length;s++){const a=t[s];a==='"'?r&&t[s+1]==='"'?(n+='"',s++):r=!r:a===","&&!r?(e.push(n.trim()),n=""):n+=a}return e.push(n.trim()),e}function set(t){return t.replace(/^\uFEFF/,"").split(/\r?\n/).filter(r=>r.trim()).map(ret)}function iet(t,e){const n={success:!1,data:[],errors:[],totalRows:0,successfulRows:0};if(t.length<2)return n.errors.push("File must contain at least a header row and one data row"),n;const r=t[0].map(l=>l.toLowerCase().trim()),s=t.slice(1);n.totalRows=s.length;const a={};e.forEach(l=>{const c=r.findIndex(u=>u===l.header.toLowerCase()||u===l.key.toLowerCase());c!==-1&&(a[l.key]=c)});const o=e.filter(l=>l.required&&a[l.key]===void 0).map(l=>l.header);return o.length>0?(n.errors.push(`Missing required columns: ${o.join(", ")}`),n):(s.forEach((l,c)=>{try{const u={};let d=!1;e.forEach(h=>{var m;const f=a[h.key];if(f!==void 0&&f<l.length){const y=((m=l[f])==null?void 0:m.trim())||"";if(h.required&&!y){n.errors.push(`Row ${c+2}: Missing required value for ${h.header}`),d=!0;return}u[h.key]=h.transform?h.transform(y):y}else h.required&&(n.errors.push(`Row ${c+2}: Missing required value for ${h.header}`),d=!0)}),d||(n.data.push(u),n.successfulRows++)}catch(u){n.errors.push(`Row ${c+2}: ${u instanceof Error?u.message:"Unknown error"}`)}}),n.success=n.successfulRows>0,n)}function aet(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=s=>{var a;return e((a=s.target)==null?void 0:a.result)},r.onerror=()=>n(new Error("Failed to read file")),r.readAsText(t)})}async function oet(t,e){try{const n=await aet(t),r=set(n);return iet(r,e)}catch(n){return{success:!1,data:[],errors:[n instanceof Error?n.message:"Failed to parse file"],totalRows:0,successfulRows:0}}}const Ss={toNumber:t=>{const e=parseFloat(t.replace(/[^0-9.-]/g,""));return isNaN(e)?0:e},toDate:t=>{if(!t)return"";try{return new Date(t).toISOString().split("T")[0]}catch{return t}},toBoolean:t=>["true","yes","1","y"].includes(t.toLowerCase()),trim:t=>t.trim()};function cet(t){const e=t.map(c=>c.header),n=t.map(c=>c.key.includes("date")?"2025-01-01":c.key.includes("amount")||c.key.includes("price")||c.key.includes("salary")?"1000.00":c.key.includes("email")?"example@email.com":c.key.includes("phone")?"+260971234567":`Example ${c.header}`),r=[e.join(","),n.join(",")].join(`
`),s="\uFEFF",a=new Blob([s+r],{type:"text/csv;charset=utf-8;"}),o=window.URL.createObjectURL(a),l=document.createElement("a");l.href=o,l.download="import-template.csv",l.click(),window.URL.revokeObjectURL(o),Y.success("Template downloaded")}function pg({open:t,onOpenChange:e,title:n,description:r,columns:s,onImport:a,templateName:o="import-template"}){const[l,c]=_.useState("upload"),[u,d]=_.useState(null),[h,f]=_.useState(!1),[m,y]=_.useState(!1),[p,v]=_.useState(null),b=_.useRef(null),x=async P=>{var T;const j=(T=P.target.files)==null?void 0:T[0];if(!j)return;const g=await oet(j,s);d(g),c("preview")},w=async()=>{if(!(!u||u.data.length===0)){f(!0),v(null),c("importing");try{await a(u.data),y(!0),c("complete")}catch(P){v(P instanceof Error?P.message:"Import failed"),c("preview")}finally{f(!1)}}},C=()=>{c("upload"),d(null),y(!1),v(null),b.current&&(b.current.value=""),e(!1)},S=()=>{cet(s)};return i.jsx(Jn,{open:t,onOpenChange:C,children:i.jsxs(Hn,{className:"max-w-2xl",children:[i.jsxs(Kn,{children:[i.jsxs(Gn,{className:"flex items-center gap-2",children:[i.jsx(Koe,{className:"h-5 w-5"}),n]}),r&&i.jsx(dd,{children:r})]}),l==="upload"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>{var P;return(P=b.current)==null?void 0:P.click()},children:[i.jsx(nl,{className:"h-10 w-10 mx-auto text-muted-foreground mb-4"}),i.jsx("p",{className:"text-lg font-medium",children:"Drop your CSV file here"}),i.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"or click to browse"}),i.jsx("input",{ref:b,type:"file",accept:".csv",onChange:x,className:"hidden"})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"Need a template?"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Download our CSV template with the correct headers"})]}),i.jsxs(H,{variant:"outline",size:"sm",onClick:S,children:[i.jsx(Rs,{className:"h-4 w-4 mr-2"}),"Template"]})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[i.jsx("p",{className:"font-medium mb-2",children:"Expected columns:"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:s.map(P=>i.jsxs(Ve,{variant:P.required?"default":"outline",children:[P.header,P.required&&" *"]},P.key))})]})]}),l==="preview"&&u&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Import Preview"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[u.successfulRows," of ",u.totalRows," rows ready to import"]})]}),u.success?i.jsxs(Ve,{variant:"default",className:"bg-success",children:[i.jsx(zw,{className:"h-3 w-3 mr-1"}),"Valid"]}):i.jsxs(Ve,{variant:"destructive",children:[i.jsx(ks,{className:"h-3 w-3 mr-1"}),"Has Errors"]})]}),u.errors.length>0&&i.jsxs(zu,{variant:"destructive",children:[i.jsx(ks,{className:"h-4 w-4"}),i.jsxs(qu,{children:[i.jsxs("p",{className:"font-medium mb-2",children:["Found ",u.errors.length," error(s):"]}),i.jsx(ih,{className:"h-24",children:i.jsxs("ul",{className:"list-disc list-inside text-sm space-y-1",children:[u.errors.slice(0,10).map((P,j)=>i.jsx("li",{children:P},j)),u.errors.length>10&&i.jsxs("li",{children:["...and ",u.errors.length-10," more"]})]})})]})]}),p&&i.jsxs(zu,{variant:"destructive",children:[i.jsx(ks,{className:"h-4 w-4"}),i.jsx(qu,{children:p})]}),u.data.length>0&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium mb-2",children:"Preview (first 5 rows):"}),i.jsx(ih,{className:"h-40 border rounded",children:i.jsx("div",{className:"p-2 text-xs font-mono",children:u.data.slice(0,5).map((P,j)=>i.jsxs("div",{className:"py-1 border-b last:border-0",children:[JSON.stringify(P,null,0).slice(0,100),"..."]},j))})})]})]}),l==="importing"&&i.jsxs("div",{className:"py-8 text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),i.jsx("p",{className:"text-lg font-medium",children:"Importing data..."}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Please wait while we process your data"})]}),l==="complete"&&i.jsxs("div",{className:"py-8 text-center",children:[i.jsx(zw,{className:"h-12 w-12 text-success mx-auto mb-4"}),i.jsx("p",{className:"text-lg font-medium",children:"Import Complete!"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Successfully imported ",(u==null?void 0:u.successfulRows)||0," records"]})]}),i.jsxs(p1,{children:[l==="upload"&&i.jsx(H,{variant:"outline",onClick:C,children:"Cancel"}),l==="preview"&&i.jsxs(i.Fragment,{children:[i.jsx(H,{variant:"outline",onClick:()=>c("upload"),children:"Back"}),i.jsxs(H,{onClick:w,disabled:!(u!=null&&u.success)||u.data.length===0,children:["Import ",(u==null?void 0:u.successfulRows)||0," Records"]})]}),l==="complete"&&i.jsx(H,{onClick:C,children:"Done"})]})]})})}function rf(t,e,n){if(t.length===0){console.warn("No data to export");return}const r=e.map(d=>d.header),s=t.map(d=>e.map(h=>{const f=d[h.key],y=(h.formatter?h.formatter(f):String(f??"")).replace(/"/g,'""');return y.includes(",")||y.includes('"')||y.includes(`
`)?`"${y}"`:y})),a=[r.join(","),...s.map(d=>d.join(","))].join(`
`),o="\uFEFF",l=new Blob([o+a],{type:"text/csv;charset=utf-8;"}),c=window.URL.createObjectURL(l),u=document.createElement("a");u.href=c,u.download=`${n}.csv`,u.click(),window.URL.revokeObjectURL(c)}function uet(t){return(typeof t=="number"?t:parseFloat(String(t))||0).toFixed(2)}function det(t){if(!t)return"";try{return new Date(String(t)).toISOString().split("T")[0]}catch{return String(t)}}const het=[{header:"Name",key:"name",required:!0,transform:Ss.trim},{header:"Email",key:"email",transform:Ss.trim},{header:"Phone",key:"phone",transform:Ss.trim},{header:"Address",key:"address",transform:Ss.trim},{header:"TPIN",key:"tpin",transform:Ss.trim},{header:"Contact Person",key:"contact_person",transform:Ss.trim},{header:"Notes",key:"notes",transform:Ss.trim},{header:"Grant Reference",key:"grant_reference",transform:Ss.trim}],fet=[{header:"Name",key:"name"},{header:"Email",key:"email"},{header:"Phone",key:"phone"},{header:"TPIN",key:"tpin"},{header:"Contact Person",key:"contact_person"},{header:"Address",key:"address"},{header:"Grant Reference",key:"grant_reference"},{header:"Notes",key:"notes"}],met=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n};function pet(){const t=$n(),e=tn(),{user:n}=ht(),{data:r}=ei(),s=r==="super_admin"||r==="admin",[a,o]=_.useState(""),[l,c]=_.useState(!1),[u,d]=_.useState(!1),[h,f]=_.useState(null),[m,y]=_.useState({name:"",email:"",phone:"",address:"",tpin:"",contact_person:"",notes:"",project_id:"",grant_reference:""}),{data:p,isLoading:v}=Ee({queryKey:["customers",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const E=await Be.getPrimaryMembershipByUser(n.id);if(!(E!=null&&E.companyId))return[];const A=we(se,Q.CUSTOMERS);return(await Ce(Te(A,he("companyId","==",E.companyId)))).docs.map(k=>{const L=k.data();return{id:k.id,name:String(L.name??""),email:L.email??null,phone:L.phone??null,address:L.address??null,tpin:L.tpin??null,contact_person:L.contactPerson??L.contact_person??null,notes:L.notes??null,project_id:L.projectId??L.project_id??null,grant_reference:L.grantReference??L.grant_reference??null}}).sort((k,L)=>k.name.localeCompare(L.name))},enabled:!!n}),b=Xe({mutationFn:async E=>{if(!n)throw new Error("You must be logged in");const A=await Be.getPrimaryMembershipByUser(n.id);if(!(A!=null&&A.companyId))throw new Error("No company profile found for your account");await es(we(se,Q.CUSTOMERS),{companyId:A.companyId,userId:n.id,name:E.name,email:E.email||null,phone:E.phone||null,address:E.address||null,tpin:E.tpin||null,contactPerson:E.contact_person||null,notes:E.notes||null,projectId:E.project_id||null,grantReference:E.grant_reference||null,createdAt:Re(),updatedAt:Re()})},onSuccess:()=>{e.invalidateQueries({queryKey:["customers",n==null?void 0:n.id]}),Y.success("Customer created successfully"),C()},onError:E=>{Y.error("Failed to create customer: "+(E instanceof Error?E.message:"Unknown error"))}}),x=Xe({mutationFn:async({id:E,data:A})=>{await xr(Je(se,Q.CUSTOMERS,E),{name:A.name,email:A.email||null,phone:A.phone||null,address:A.address||null,tpin:A.tpin||null,contactPerson:A.contact_person||null,notes:A.notes||null,projectId:A.project_id||null,grantReference:A.grant_reference||null,updatedAt:Re()},{merge:!0})},onSuccess:()=>{e.invalidateQueries({queryKey:["customers",n==null?void 0:n.id]}),Y.success("Customer updated successfully"),C()},onError:E=>{Y.error("Failed to update customer: "+(E instanceof Error?E.message:"Unknown error"))}}),w=Xe({mutationFn:async E=>{if(!s)throw new Error("Only Admin users can delete customers.");await Gl(Je(se,Q.CUSTOMERS,E))},onSuccess:()=>{e.invalidateQueries({queryKey:["customers",n==null?void 0:n.id]}),Y.success("Customer deleted successfully")},onError:E=>{Y.error("Failed to delete customer: "+(E instanceof Error?E.message:"Unknown error"))}}),C=()=>{y({name:"",email:"",phone:"",address:"",tpin:"",contact_person:"",notes:"",project_id:"",grant_reference:""}),f(null),c(!1)},S=E=>{f(E),y({name:E.name,email:E.email||"",phone:E.phone||"",address:E.address||"",tpin:E.tpin||"",contact_person:E.contact_person||"",notes:E.notes||"",project_id:E.project_id||"",grant_reference:E.grant_reference||""}),c(!0)},P=E=>{E.preventDefault(),h?x.mutate({id:h.id,data:m}):b.mutate(m)},j=p==null?void 0:p.filter(E=>{var A,I;return E.name.toLowerCase().includes(a.toLowerCase())||((A=E.email)==null?void 0:A.toLowerCase().includes(a.toLowerCase()))||((I=E.phone)==null?void 0:I.includes(a))}),g=async E=>{if(!n)throw new Error("You must be logged in");const A=await Be.getPrimaryMembershipByUser(n.id);if(!(A!=null&&A.companyId))throw new Error("No company profile found for your account");const I=E.map(V=>({companyId:A.companyId,userId:n.id,name:String(V.name||""),email:V.email||null,phone:V.phone||null,address:V.address||null,tpin:V.tpin||null,contactPerson:V.contact_person||null,notes:V.notes||null,projectId:null,grantReference:V.grant_reference||null,createdAt:Re(),updatedAt:Re()})),k=we(se,Q.CUSTOMERS),L=met(I,400);for(const V of L){const B=Yl(se);V.forEach(M=>{B.set(Je(k),M)}),await B.commit()}e.invalidateQueries({queryKey:["customers",n==null?void 0:n.id]}),Y.success(`Imported ${E.length} customers`)},T=()=>{if(!p||p.length===0){Y.error("No customers to export");return}rf(p,fet,"customers-export"),Y.success("Customers exported")};return v?i.jsx("div",{children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Customers"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your customers and their information"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(H,{variant:"outline",onClick:()=>d(!0),children:[i.jsx(nl,{className:"mr-2 h-4 w-4"}),"Import"]}),i.jsxs(H,{variant:"outline",onClick:T,children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export"]}),i.jsxs(Jn,{open:l,onOpenChange:E=>{c(E),E||C()},children:[i.jsx(ns,{asChild:!0,children:i.jsxs(H,{children:[i.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Add Customer"]})}),i.jsxs(Hn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsx(Kn,{children:i.jsx(Gn,{children:h?"Edit Customer":"Add New Customer"})}),i.jsxs("form",{onSubmit:P,className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"name",children:"Customer Name *"}),i.jsx(G,{id:"name",value:m.name,onChange:E=>y({...m,name:E.target.value}),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"contact_person",children:"Contact Person"}),i.jsx(G,{id:"contact_person",value:m.contact_person,onChange:E=>y({...m,contact_person:E.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"email",children:"Email"}),i.jsx(G,{id:"email",type:"email",value:m.email,onChange:E=>y({...m,email:E.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"phone",children:"Phone"}),i.jsx(G,{id:"phone",value:m.phone,onChange:E=>y({...m,phone:E.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"tpin",children:"TPIN"}),i.jsx(G,{id:"tpin",value:m.tpin,onChange:E=>y({...m,tpin:E.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"project_id",children:"Project Reference"}),i.jsx(G,{id:"project_id",value:m.project_id,onChange:E=>y({...m,project_id:E.target.value}),placeholder:"For NGO project tracking"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"grant_reference",children:"Grant Reference"}),i.jsx(G,{id:"grant_reference",value:m.grant_reference,onChange:E=>y({...m,grant_reference:E.target.value}),placeholder:"For donor/grant tracking"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"address",children:"Address"}),i.jsx(Zn,{id:"address",value:m.address,onChange:E=>y({...m,address:E.target.value}),rows:2})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"notes",children:"Notes"}),i.jsx(Zn,{id:"notes",value:m.notes,onChange:E=>y({...m,notes:E.target.value}),rows:2})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{type:"button",variant:"outline",onClick:C,children:"Cancel"}),i.jsxs(H,{type:"submit",children:[h?"Update":"Create"," Customer"]})]})]})]})]})]})]}),i.jsx(pg,{open:u,onOpenChange:d,title:"Import Customers",description:"Upload a CSV file to import customers in bulk",columns:het,onImport:g}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Ds,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{placeholder:"Search customers...",value:a,onChange:E=>o(E.target.value),className:"pl-10"})]})})}),i.jsx(re,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Name"}),i.jsx(q,{children:"Contact Person"}),i.jsx(q,{children:"Email"}),i.jsx(q,{children:"Phone"}),i.jsx(q,{children:"TPIN"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ut,{children:[j==null?void 0:j.map(E=>i.jsxs(je,{children:[i.jsx(U,{className:"font-medium",children:E.name}),i.jsx(U,{children:E.contact_person||"-"}),i.jsx(U,{children:E.email||"-"}),i.jsx(U,{children:E.phone||"-"}),i.jsx(U,{children:E.tpin||"-"}),i.jsx(U,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>t(`/quotations/new?customer=${E.id}`),title:"Create Quotation",children:i.jsx(Cu,{className:"h-4 w-4"})}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>t(`/invoices/new?customer=${E.id}`),title:"Create Invoice",children:i.jsx(dr,{className:"h-4 w-4"})}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>S(E),children:i.jsx(Mp,{className:"h-4 w-4"})}),s&&i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>w.mutate(E.id),children:i.jsx(Ms,{className:"h-4 w-4"})})]})})]},E.id)),(j==null?void 0:j.length)===0&&i.jsx(je,{children:i.jsx(U,{colSpan:6,className:"text-center text-muted-foreground",children:"No customers found"})})]})]})})]})]})}const get=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},yet=t=>{if(!t)return"";if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return""};function vet(){const t=$n(),e=tn(),{user:n}=ht(),[r,s]=_.useState(""),[a,o]=_.useState(!1),{data:l}=ud(),[c,u]=_.useState({customer_id:"",order_type:"sale",notes:""}),{data:d,isLoading:h}=Ee({queryKey:["sales-orders",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const b=await Be.getPrimaryMembershipByUser(n.id);if(!(b!=null&&b.companyId))return[];const x=we(se,Q.SALES_ORDERS),C=(await Ce(Te(x,he("companyId","==",b.companyId)))).docs.map(j=>{const g=j.data();return{id:j.id,orderNumber:String(g.orderNumber??g.order_number??""),orderDate:yet(g.orderDate??g.order_date),customerId:g.customerId??g.customer_id??null,customerName:"-",orderType:String(g.orderType??g.order_type??"sale"),subtotal:Number(g.subtotal??0),vatAmount:Number(g.vatAmount??g.vat_amount??0),total:Number(g.total??0),status:String(g.status??"pending")}}),S=Array.from(new Set(C.map(j=>j.customerId).filter(Boolean))),P=new Map;if(S.length>0){const j=we(se,Q.CUSTOMERS),g=get(S,30);(await Promise.all(g.map(E=>Ce(Te(j,he(to(),"in",E)))))).forEach(E=>{E.docs.forEach(A=>{const I=A.data();P.set(A.id,String(I.name??"-"))})})}return C.map(j=>({...j,customerName:j.customerId&&P.get(j.customerId)||"-"})).sort((j,g)=>String(g.orderDate).localeCompare(String(j.orderDate)))},enabled:!!n}),{data:f}=Ee({queryKey:["customers",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const b=await Be.getPrimaryMembershipByUser(n.id);if(!(b!=null&&b.companyId))return[];const x=we(se,Q.CUSTOMERS);return(await Ce(Te(x,he("companyId","==",b.companyId)))).docs.map(C=>{const S=C.data();return{id:C.id,name:String(S.name??"")}}).sort((C,S)=>C.name.localeCompare(S.name))},enabled:!!n}),m=Xe({mutationFn:async b=>{if(!n)throw new Error("You must be logged in");const x=await Be.getPrimaryMembershipByUser(n.id);if(!(x!=null&&x.companyId))throw new Error("No company profile found for your account");const w=`SO-${Date.now()}`;await es(we(se,Q.SALES_ORDERS),{companyId:x.companyId,userId:n.id,customerId:b.customer_id||null,orderType:b.order_type,notes:b.notes||null,orderNumber:w,orderDate:new Date().toISOString().slice(0,10),subtotal:0,vatAmount:0,total:0,status:"pending",createdAt:Re(),updatedAt:Re()})},onSuccess:()=>{e.invalidateQueries({queryKey:["sales-orders",n==null?void 0:n.id]}),Y.success("Sales order created successfully"),o(!1),u({customer_id:"",order_type:"sale",notes:""})},onError:b=>{Y.error("Failed to create order: "+(b instanceof Error?b.message:"Unknown error"))}}),y=b=>{switch(b){case"completed":case"accepted":return"default";case"pending":case"draft":return"secondary";case"cancelled":case"rejected":return"destructive";default:return"outline"}},p=b=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(b),v=d==null?void 0:d.filter(b=>b.orderNumber.toLowerCase().includes(r.toLowerCase())||b.customerName.toLowerCase().includes(r.toLowerCase()));return h?i.jsx("div",{children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Sales & Orders"}),i.jsxs("p",{className:"text-muted-foreground",children:["Manage sales transactions and orders",(l==null?void 0:l.isVatRegistered)&&i.jsx("span",{className:"ml-2 text-xs bg-primary/10 text-primary px-2 py-0.5 rounded",children:"VAT Registered (16%)"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(H,{variant:"outline",onClick:()=>t("/quotations/new"),children:[i.jsx(Cu,{className:"mr-2 h-4 w-4"}),"New Quotation"]}),i.jsxs(Jn,{open:a,onOpenChange:o,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(H,{children:[i.jsx(Nn,{className:"mr-2 h-4 w-4"}),"New Order"]})}),i.jsxs(Hn,{children:[i.jsx(Kn,{children:i.jsx(Gn,{children:"Create Sales Order"})}),i.jsxs("form",{onSubmit:b=>{b.preventDefault(),m.mutate(c)},className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"customer",children:"Customer"}),i.jsxs(Tt,{value:c.customer_id,onValueChange:b=>u({...c,customer_id:b}),children:[i.jsx(jt,{children:i.jsx(Ct,{placeholder:"Select customer"})}),i.jsx(Nt,{children:f==null?void 0:f.map(b=>i.jsx(be,{value:b.id,children:b.name},b.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"type",children:"Order Type"}),i.jsxs(Tt,{value:c.order_type,onValueChange:b=>u({...c,order_type:b}),children:[i.jsx(jt,{children:i.jsx(Ct,{})}),i.jsxs(Nt,{children:[i.jsx(be,{value:"sale",children:"Sale"}),i.jsx(be,{value:"estimate",children:"Estimate"}),i.jsx(be,{value:"quote",children:"Quote"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"notes",children:"Notes"}),i.jsx(Zn,{id:"notes",value:c.notes,onChange:b=>u({...c,notes:b.target.value})})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),i.jsx(H,{type:"submit",children:"Create Order"})]})]})]})]})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Ds,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{placeholder:"Search orders...",value:r,onChange:b=>s(b.target.value),className:"pl-10"})]})})}),i.jsx(re,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Order #"}),i.jsx(q,{children:"Date"}),i.jsx(q,{children:"Customer"}),i.jsx(q,{children:"Type"}),i.jsx(q,{className:"text-right",children:"Subtotal"}),(l==null?void 0:l.isVatRegistered)&&i.jsx(q,{className:"text-right",children:"VAT"}),i.jsx(q,{className:"text-right",children:"Total"}),i.jsx(q,{children:"Status"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ut,{children:[v==null?void 0:v.map(b=>i.jsxs(je,{children:[i.jsx(U,{className:"font-medium",children:b.orderNumber}),i.jsx(U,{children:b.orderDate?mt(new Date(b.orderDate),"dd MMM yyyy"):"-"}),i.jsx(U,{children:b.customerName||"-"}),i.jsx(U,{className:"capitalize",children:b.orderType}),i.jsx(U,{className:"text-right",children:p(b.subtotal)}),(l==null?void 0:l.isVatRegistered)&&i.jsx(U,{className:"text-right",children:p(b.vatAmount)}),i.jsx(U,{className:"text-right",children:p(b.total)}),i.jsx(U,{children:i.jsx(Ve,{variant:y(b.status||"pending"),children:b.status})}),i.jsx(U,{className:"text-right",children:i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>t(`/invoices/new?order=${b.id}`),title:"Convert to Invoice",children:i.jsx(dr,{className:"h-4 w-4"})})})]},b.id)),(v==null?void 0:v.length)===0&&i.jsx(je,{children:i.jsx(U,{colSpan:l!=null&&l.isVatRegistered?9:8,className:"text-center text-muted-foreground",children:"No orders found"})})]})]})})]})]})}function xet(){const t=$n(),[e]=NR(),n=e.get("customer"),{user:r}=ht(),{data:s}=ud(),[a,o]=_.useState(n||""),[l,c]=_.useState(`QT-${Date.now()}`),[u,d]=_.useState(new Date().toISOString().split("T")[0]),[h,f]=_.useState(""),[m,y]=_.useState(""),[p,v]=_.useState("This quotation is valid for 30 days from the date of issue."),[b,x]=_.useState([{id:"1",description:"",quantity:1,rate:0,amount:0}]),{data:w}=Ee({queryKey:["customers",r==null?void 0:r.id],queryFn:async()=>{if(!r)return[];const M=await Be.getPrimaryMembershipByUser(r.id);if(!(M!=null&&M.companyId))return[];const $=we(se,Q.CUSTOMERS);return(await Ce(Te($,he("companyId","==",M.companyId)))).docs.map(W=>{const Z=W.data();return{id:W.id,name:String(Z.name??""),email:Z.email?String(Z.email):void 0,address:Z.address?String(Z.address):void 0}}).sort((W,Z)=>W.name.localeCompare(Z.name))},enabled:!!r}),C=(s==null?void 0:s.isVatRegistered)||!1,S=(s==null?void 0:s.vatRate)||16,P=()=>{x([...b,{id:Date.now().toString(),description:"",quantity:1,rate:0,amount:0}])},j=M=>{b.length>1&&x(b.filter($=>$.id!==M))},g=(M,$,O)=>{x(b.map(W=>{if(W.id===M){const Z={...W,[$]:O};return($==="quantity"||$==="rate")&&(Z.amount=Z.quantity*Z.rate),Z}return W}))},T=b.reduce((M,$)=>M+$.amount,0),E=C?T*(S/100):0,A=T+E,I=w==null?void 0:w.find(M=>M.id===a),k=Xe({mutationFn:async M=>{if(!r)throw new Error("You must be logged in");const $=await Be.getPrimaryMembershipByUser(r.id);if(!($!=null&&$.companyId))throw new Error("No company profile found for your account");const O=b.filter(W=>W.description.trim().length>0).map(W=>({description:W.description.trim(),quantity:W.quantity,unitPrice:W.rate}));if(O.length===0)throw new Error("At least one quotation line item is required.");await _n.createQuotation({companyId:$.companyId,customerId:a||void 0,quotationNumber:l,quotationDate:u,validUntil:h||u,status:M==="sent"?"Sent":"Draft",notes:[m,p].filter(Boolean).join(`

`)||void 0,taxAmount:E,totalAmount:A,lineItems:O})},onSuccess:(M,$)=>{Y.success($==="sent"?"Quotation sent successfully":"Quotation saved as draft"),t("/sales-orders")},onError:M=>{Y.error("Failed to save quotation: "+(M instanceof Error?M.message:"Unknown error"))}}),L=()=>{const M=encodeURIComponent(JSON.stringify(b));t(`/invoices/new?customer=${a}&lines=${M}`)},V=(M=!1)=>{if(!a){Y.error("Please select a customer");return}k.mutate(M?"sent":"draft")},B=M=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(M);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"New Quotation"}),i.jsxs("p",{className:"text-muted-foreground",children:["Create a quotation for a customer",C&&i.jsxs("span",{className:"ml-2 text-xs bg-primary/10 text-primary px-2 py-0.5 rounded",children:["VAT ",S,"%"]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(H,{variant:"outline",onClick:()=>t("/sales-orders"),children:"Cancel"}),i.jsxs(H,{variant:"outline",className:"gap-2",onClick:()=>V(!1),disabled:k.isPending,children:[i.jsx(yh,{className:"h-4 w-4"}),"Save Draft"]}),i.jsxs(H,{className:"gap-2",onClick:()=>V(!0),disabled:k.isPending,children:[i.jsx(Zk,{className:"h-4 w-4"}),"Save & Send"]})]})]}),i.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"Quotation Details"})}),i.jsx(re,{className:"space-y-4",children:i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"customer",children:"Customer *"}),i.jsxs(Tt,{value:a,onValueChange:o,children:[i.jsx(jt,{id:"customer",children:i.jsx(Ct,{placeholder:"Select customer"})}),i.jsx(Nt,{children:w==null?void 0:w.map(M=>i.jsx(be,{value:M.id,children:M.name},M.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"quoteNumber",children:"Quotation Number *"}),i.jsx(G,{id:"quoteNumber",value:l,onChange:M=>c(M.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"quoteDate",children:"Quotation Date *"}),i.jsx(G,{id:"quoteDate",type:"date",value:u,onChange:M=>d(M.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"validUntil",children:"Valid Until"}),i.jsx(G,{id:"validUntil",type:"date",value:h,onChange:M=>f(M.target.value)})]})]})})]}),I&&i.jsx(X,{className:"bg-muted/30",children:i.jsx(re,{className:"pt-4",children:i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"font-medium",children:I.name}),I.email&&i.jsx("p",{className:"text-muted-foreground",children:I.email}),I.address&&i.jsx("p",{className:"text-muted-foreground",children:I.address})]})})}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"Line Items"})}),i.jsx(re,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-12 text-sm font-medium text-muted-foreground",children:[i.jsx("div",{className:"md:col-span-5",children:"Description"}),i.jsx("div",{className:"md:col-span-2",children:"Qty"}),i.jsx("div",{className:"md:col-span-2",children:"Rate (ZMW)"}),i.jsx("div",{className:"md:col-span-2",children:"Amount"}),i.jsx("div",{className:"md:col-span-1"})]}),b.map(M=>i.jsxs("div",{className:"grid gap-4 md:grid-cols-12 items-start",children:[i.jsx("div",{className:"md:col-span-5",children:i.jsx(Zn,{placeholder:"Item description",value:M.description,onChange:$=>g(M.id,"description",$.target.value),rows:2})}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(G,{type:"number",placeholder:"Qty",value:M.quantity,onChange:$=>g(M.id,"quantity",parseFloat($.target.value)||0),min:"0",step:"0.01"})}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(G,{type:"number",placeholder:"Rate",value:M.rate,onChange:$=>g(M.id,"rate",parseFloat($.target.value)||0),min:"0",step:"0.01"})}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(G,{value:B(M.amount),disabled:!0,className:"bg-muted"})}),i.jsx("div",{className:"md:col-span-1",children:i.jsx(H,{type:"button",variant:"ghost",size:"icon",onClick:()=>j(M.id),disabled:b.length===1,children:i.jsx(Ms,{className:"h-4 w-4"})})})]},M.id)),i.jsxs(H,{type:"button",variant:"outline",className:"gap-2",onClick:P,children:[i.jsx(Nn,{className:"h-4 w-4"}),"Add Line Item"]})]})})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"Notes & Terms"})}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"notes",children:"Notes (visible to customer)"}),i.jsx(Zn,{id:"notes",placeholder:"Add any notes or special conditions",rows:3,value:m,onChange:M=>y(M.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"terms",children:"Terms & Conditions"}),i.jsx(Zn,{id:"terms",placeholder:"Quotation terms and conditions",rows:3,value:p,onChange:M=>v(M.target.value)})]})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"Summary"})}),i.jsxs(re,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),i.jsx("span",{className:"font-medium",children:B(T)})]}),C&&i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsxs("span",{className:"text-muted-foreground",children:["VAT (",S,"%)"]}),i.jsx("span",{className:"font-medium",children:B(E)})]}),i.jsxs("div",{className:"border-t pt-3 flex justify-between",children:[i.jsx("span",{className:"font-semibold",children:"Total"}),i.jsx("span",{className:"text-xl font-bold text-primary",children:B(A)})]})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"Actions"})}),i.jsx(re,{className:"space-y-2",children:i.jsxs(H,{variant:"outline",className:"w-full gap-2",onClick:L,disabled:!a||b.every(M=>!M.description),children:[i.jsx(dr,{className:"h-4 w-4"}),"Convert to Invoice"]})})]}),!C&&i.jsx(X,{className:"bg-muted/50",children:i.jsx(re,{className:"pt-4",children:i.jsxs("p",{className:"text-sm text-muted-foreground",children:["VAT is not applied. To enable VAT, go to"," ",i.jsx(H,{variant:"link",className:"p-0 h-auto",onClick:()=>t("/settings"),children:"Settings"})," ","and enable VAT registration."]})})})]})]})]})}const bet=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},wet=t=>{if(!t)return"";if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return""};function _et(){const t=$n(),e=tn(),{user:n}=ht(),[r,s]=_.useState(""),{data:a}=ud(),{data:o,isLoading:l}=Ee({queryKey:["estimates",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const f=await Be.getPrimaryMembershipByUser(n.id);if(!(f!=null&&f.companyId))return[];const m=we(se,Q.SALES_ORDERS),p=(await Ce(Te(m,he("companyId","==",f.companyId)))).docs.map(x=>{const w=x.data();return{id:x.id,orderNumber:String(w.orderNumber??w.order_number??""),orderDate:wet(w.orderDate??w.order_date),orderType:String(w.orderType??w.order_type??"sale"),subtotal:Number(w.subtotal??0),vatAmount:Number(w.vatAmount??w.vat_amount??0),total:Number(w.total??0),status:String(w.status??"draft"),customerId:w.customerId??w.customer_id??null,customerName:"-"}}).filter(x=>["quote","estimate"].includes(x.orderType)),v=Array.from(new Set(p.map(x=>x.customerId).filter(Boolean))),b=new Map;if(v.length>0){const x=we(se,Q.CUSTOMERS),w=bet(v,30);(await Promise.all(w.map(S=>Ce(Te(x,he(to(),"in",S)))))).forEach(S=>{S.docs.forEach(P=>{const j=P.data();b.set(P.id,String(j.name??"-"))})})}return p.map(x=>({...x,customerName:x.customerId&&b.get(x.customerId)||"-"})).sort((x,w)=>String(w.orderDate).localeCompare(String(x.orderDate)))},enabled:!!n}),c=Xe({mutationFn:async f=>{await Gl(Je(se,Q.SALES_ORDERS,f))},onSuccess:()=>{e.invalidateQueries({queryKey:["estimates",n==null?void 0:n.id]}),Y.success("Estimate deleted successfully")},onError:f=>{Y.error("Failed to delete estimate: "+(f instanceof Error?f.message:"Unknown error"))}}),u=f=>{switch(f){case"sent":case"accepted":return"default";case"draft":return"secondary";case"rejected":return"destructive";default:return"outline"}},d=f=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(f),h=o==null?void 0:o.filter(f=>f.orderNumber.toLowerCase().includes(r.toLowerCase())||f.customerName.toLowerCase().includes(r.toLowerCase()));return l?i.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Estimates & Quotations"}),i.jsx("p",{className:"text-muted-foreground",children:"Create and manage quotes for your customers"})]}),i.jsxs(H,{onClick:()=>t("/quotations/new"),children:[i.jsx(Nn,{className:"mr-2 h-4 w-4"}),"New Quotation"]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Ds,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{placeholder:"Search estimates...",value:r,onChange:f=>s(f.target.value),className:"pl-10"})]})})}),i.jsx(re,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Quote #"}),i.jsx(q,{children:"Date"}),i.jsx(q,{children:"Customer"}),i.jsx(q,{className:"text-right",children:"Subtotal"}),(a==null?void 0:a.isVatRegistered)&&i.jsx(q,{className:"text-right",children:"VAT"}),i.jsx(q,{className:"text-right",children:"Total"}),i.jsx(q,{children:"Status"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ut,{children:[h==null?void 0:h.map(f=>i.jsxs(je,{children:[i.jsx(U,{className:"font-medium",children:f.orderNumber}),i.jsx(U,{children:f.orderDate?mt(new Date(f.orderDate),"dd MMM yyyy"):"-"}),i.jsx(U,{children:f.customerName||"-"}),i.jsx(U,{className:"text-right",children:d(f.subtotal)}),(a==null?void 0:a.isVatRegistered)&&i.jsx(U,{className:"text-right",children:d(f.vatAmount)}),i.jsx(U,{className:"text-right",children:d(f.total)}),i.jsx(U,{children:i.jsx(Ve,{variant:u(f.status||"draft"),children:f.status})}),i.jsx(U,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>t(`/invoices/new?customer=${f.customerId}`),title:"Convert to Invoice",children:i.jsx(dr,{className:"h-4 w-4"})}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>c.mutate(f.id),title:"Delete",children:i.jsx(Ms,{className:"h-4 w-4"})})]})})]},f.id)),(h==null?void 0:h.length)===0&&i.jsx(je,{children:i.jsx(U,{colSpan:a!=null&&a.isVatRegistered?8:7,className:"text-center text-muted-foreground py-8",children:"No estimates found. Create your first quotation!"})})]})]})})]})]})}const jet=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n};function Net(){const t=$n(),e=tn(),{user:n}=ht(),{data:r}=ei(),s=r==="super_admin"||r==="admin",[a,o]=_.useState(""),[l,c]=_.useState(!1),[u,d]=_.useState(!1),[h,f]=_.useState(null),[m,y]=_.useState({name:"",email:"",phone:"",address:"",tpin:"",contact_person:"",notes:"",bank_name:"",bank_account_number:"",payment_terms:""}),{data:p,isLoading:v}=Ee({queryKey:["vendors",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const A=await Be.getPrimaryMembershipByUser(n.id);if(!(A!=null&&A.companyId))return[];const I=we(se,Q.VENDORS);return(await Ce(Te(I,he("companyId","==",A.companyId)))).docs.map(L=>{const V=L.data();return{id:L.id,name:String(V.name??""),email:V.email??null,phone:V.phone??null,address:V.address??null,tpin:V.tpin??null,contact_person:V.contactPerson??V.contact_person??null,notes:V.notes??null,bank_name:V.bankName??V.bank_name??null,bank_account_number:V.bankAccountNumber??V.bank_account_number??null,payment_terms:V.paymentTerms??V.payment_terms??null}}).sort((L,V)=>L.name.localeCompare(V.name))},enabled:!!n}),b=Xe({mutationFn:async A=>{if(!n)throw new Error("You must be logged in");const I=await Be.getPrimaryMembershipByUser(n.id);if(!(I!=null&&I.companyId))throw new Error("No company profile found for your account");await es(we(se,Q.VENDORS),{companyId:I.companyId,userId:n.id,name:A.name,email:A.email||null,phone:A.phone||null,address:A.address||null,tpin:A.tpin||null,contactPerson:A.contact_person||null,notes:A.notes||null,bankName:A.bank_name||null,bankAccountNumber:A.bank_account_number||null,paymentTerms:A.payment_terms||null,createdAt:Re(),updatedAt:Re()})},onSuccess:()=>{e.invalidateQueries({queryKey:["vendors",n==null?void 0:n.id]}),Y.success("Vendor created successfully"),C()},onError:A=>{Y.error("Failed to create vendor: "+(A instanceof Error?A.message:"Unknown error"))}}),x=Xe({mutationFn:async({id:A,data:I})=>{await xr(Je(se,Q.VENDORS,A),{name:I.name,email:I.email||null,phone:I.phone||null,address:I.address||null,tpin:I.tpin||null,contactPerson:I.contact_person||null,notes:I.notes||null,bankName:I.bank_name||null,bankAccountNumber:I.bank_account_number||null,paymentTerms:I.payment_terms||null,updatedAt:Re()},{merge:!0})},onSuccess:()=>{e.invalidateQueries({queryKey:["vendors",n==null?void 0:n.id]}),Y.success("Vendor updated successfully"),C()},onError:A=>{Y.error("Failed to update vendor: "+(A instanceof Error?A.message:"Unknown error"))}}),w=Xe({mutationFn:async A=>{if(!s)throw new Error("Only Admin users can delete vendors.");await Gl(Je(se,Q.VENDORS,A))},onSuccess:()=>{e.invalidateQueries({queryKey:["vendors",n==null?void 0:n.id]}),Y.success("Vendor deleted successfully")},onError:A=>{Y.error("Failed to delete vendor: "+(A instanceof Error?A.message:"Unknown error"))}}),C=()=>{y({name:"",email:"",phone:"",address:"",tpin:"",contact_person:"",notes:"",bank_name:"",bank_account_number:"",payment_terms:""}),f(null),c(!1)},S=A=>{f(A),y({name:A.name,email:A.email||"",phone:A.phone||"",address:A.address||"",tpin:A.tpin||"",contact_person:A.contact_person||"",notes:A.notes||"",bank_name:A.bank_name||"",bank_account_number:A.bank_account_number||"",payment_terms:A.payment_terms||""}),c(!0)},P=A=>{A.preventDefault(),h?x.mutate({id:h.id,data:m}):b.mutate(m)},j=p==null?void 0:p.filter(A=>{var I,k;return A.name.toLowerCase().includes(a.toLowerCase())||((I=A.email)==null?void 0:I.toLowerCase().includes(a.toLowerCase()))||((k=A.phone)==null?void 0:k.includes(a))}),g=[{key:"name",header:"Vendor Name",required:!0},{key:"email",header:"Email",required:!1},{key:"phone",header:"Phone",required:!1},{key:"address",header:"Address",required:!1},{key:"tpin",header:"TPIN",required:!1},{key:"contact_person",header:"Contact Person",required:!1},{key:"bank_name",header:"Bank Name",required:!1},{key:"bank_account_number",header:"Bank Account",required:!1},{key:"payment_terms",header:"Payment Terms",required:!1}],T=async A=>{if(!n)throw new Error("You must be logged in");const I=await Be.getPrimaryMembershipByUser(n.id);if(!(I!=null&&I.companyId))throw new Error("No company profile found for your account");const k=A.map(B=>({companyId:I.companyId,userId:n.id,name:String(B.name||""),email:B.email||null,phone:B.phone||null,address:B.address||null,tpin:B.tpin||null,contactPerson:B.contact_person||null,bankName:B.bank_name||null,bankAccountNumber:B.bank_account_number||null,paymentTerms:B.payment_terms||null,createdAt:Re(),updatedAt:Re()})),L=we(se,Q.VENDORS),V=jet(k,400);for(const B of V){const M=Yl(se);B.forEach($=>{M.set(Je(L),$)}),await M.commit()}e.invalidateQueries({queryKey:["vendors",n==null?void 0:n.id]})},E=()=>{if(!(j!=null&&j.length))return;rf(j,[{header:"Vendor Name",key:"name"},{header:"Contact Person",key:"contact_person"},{header:"Email",key:"email"},{header:"Phone",key:"phone"},{header:"Address",key:"address"},{header:"TPIN",key:"tpin"},{header:"Bank Name",key:"bank_name"},{header:"Bank Account",key:"bank_account_number"},{header:"Payment Terms",key:"payment_terms"}],"vendors-export")};return v?i.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Vendors"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your suppliers and vendors"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(H,{variant:"outline",onClick:()=>d(!0),children:[i.jsx(nl,{className:"mr-2 h-4 w-4"}),"Import"]}),i.jsxs(H,{variant:"outline",onClick:E,children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export"]}),i.jsxs(Jn,{open:l,onOpenChange:A=>{c(A),A||C()},children:[i.jsx(ns,{asChild:!0,children:i.jsxs(H,{children:[i.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Add Vendor"]})}),i.jsxs(Hn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsx(Kn,{children:i.jsx(Gn,{children:h?"Edit Vendor":"Add New Vendor"})}),i.jsxs("form",{onSubmit:P,className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"name",children:"Vendor Name *"}),i.jsx(G,{id:"name",value:m.name,onChange:A=>y({...m,name:A.target.value}),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"contact_person",children:"Contact Person"}),i.jsx(G,{id:"contact_person",value:m.contact_person,onChange:A=>y({...m,contact_person:A.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"email",children:"Email"}),i.jsx(G,{id:"email",type:"email",value:m.email,onChange:A=>y({...m,email:A.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"phone",children:"Phone"}),i.jsx(G,{id:"phone",value:m.phone,onChange:A=>y({...m,phone:A.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"tpin",children:"TPIN"}),i.jsx(G,{id:"tpin",value:m.tpin,onChange:A=>y({...m,tpin:A.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"payment_terms",children:"Payment Terms"}),i.jsx(G,{id:"payment_terms",value:m.payment_terms,onChange:A=>y({...m,payment_terms:A.target.value}),placeholder:"e.g., Net 30"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"bank_name",children:"Bank Name"}),i.jsx(G,{id:"bank_name",value:m.bank_name,onChange:A=>y({...m,bank_name:A.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"bank_account_number",children:"Bank Account Number"}),i.jsx(G,{id:"bank_account_number",value:m.bank_account_number,onChange:A=>y({...m,bank_account_number:A.target.value})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"address",children:"Address"}),i.jsx(Zn,{id:"address",value:m.address,onChange:A=>y({...m,address:A.target.value}),rows:2})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"notes",children:"Notes"}),i.jsx(Zn,{id:"notes",value:m.notes,onChange:A=>y({...m,notes:A.target.value}),rows:2})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{type:"button",variant:"outline",onClick:C,children:"Cancel"}),i.jsxs(H,{type:"submit",children:[h?"Update":"Create"," Vendor"]})]})]})]})]})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Ds,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{placeholder:"Search vendors...",value:a,onChange:A=>o(A.target.value),className:"pl-10"})]})})}),i.jsx(re,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Name"}),i.jsx(q,{children:"Contact Person"}),i.jsx(q,{children:"Email"}),i.jsx(q,{children:"Phone"}),i.jsx(q,{children:"TPIN"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ut,{children:[j==null?void 0:j.map(A=>i.jsxs(je,{children:[i.jsx(U,{className:"font-medium",children:A.name}),i.jsx(U,{children:A.contact_person||"-"}),i.jsx(U,{children:A.email||"-"}),i.jsx(U,{children:A.phone||"-"}),i.jsx(U,{children:A.tpin||"-"}),i.jsx(U,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>t("/purchase-orders"),title:"Create Purchase Order",children:i.jsx(Cu,{className:"h-4 w-4"})}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>t("/bills"),title:"Create Bill",children:i.jsx(dr,{className:"h-4 w-4"})}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>S(A),children:i.jsx(Mp,{className:"h-4 w-4"})}),s&&i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>w.mutate(A.id),children:i.jsx(Ms,{className:"h-4 w-4"})})]})})]},A.id)),(j==null?void 0:j.length)===0&&i.jsx(je,{children:i.jsx(U,{colSpan:6,className:"text-center text-muted-foreground py-8",children:"No vendors found. Add your first vendor!"})})]})]})})]}),i.jsx(pg,{open:u,onOpenChange:d,onImport:T,columns:g,title:"Import Vendors"})]})}const Eet=["Utilities","Transport","Office Supplies","Rent","Salaries","Marketing","Repairs","Miscellaneous"];function Aet(){const{user:t}=ht(),{data:e}=ei(),n=tn(),[r,s]=_.useState(""),[a,o]=_.useState(!1),{data:l}=ud(),c=["super_admin","admin","financial_manager","accountant","assistant_accountant"].includes(e||""),[u,d]=_.useState({vendor_id:"",bill_number:`BILL-${Date.now()}`,bill_date:new Date().toISOString().split("T")[0],due_date:"",category:"",amount:"",description:""}),{data:h}=Ee({queryKey:["bills-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const k=await Be.getPrimaryMembershipByUser(t.id);return(k==null?void 0:k.companyId)??null},enabled:!!t}),{data:f,isLoading:m}=Ee({queryKey:["bills",h],queryFn:async()=>{if(!h)return[];const[k,L]=await Promise.all([Ce(Te(we(se,Q.BILLS),he("companyId","==",h))),Ce(Te(we(se,Q.VENDORS),he("companyId","==",h)))]),V=new Map;return L.docs.forEach(B=>{const M=B.data();V.set(B.id,String(M.name??""))}),k.docs.map(B=>{const M=B.data(),$=M.vendorId??M.vendor_id??null;return{id:B.id,bill_number:String(M.billNumber??M.bill_number??`BILL-${B.id.slice(0,8).toUpperCase()}`),bill_date:String(M.billDate??M.bill_date??""),due_date:M.dueDate??M.due_date??null,subtotal:Number(M.subtotal??0),vat_amount:Number(M.vatAmount??M.vat_amount??0),total:Number(M.total??0),status:M.status??"pending",description:M.description??null,vendor_id:$,amount_paid:Number(M.amountPaid??M.amount_paid??0),journal_entry_id:M.journalEntryId??M.journal_entry_id??null,vendors:$?{name:V.get($)||"Unknown Vendor"}:null}}).sort((B,M)=>M.bill_date.localeCompare(B.bill_date))},enabled:!!h}),{data:y=[]}=Ee({queryKey:["bill-expense-category-mappings",h],queryFn:async()=>{if(!h)return[];let k=await Ce(Te(we(se,Q.EXPENSE_CATEGORY_MAPPINGS),he("companyId","==",h)));if(k.empty)try{await _n.seedDefaultExpenseCategories({companyId:h}),k=await Ce(Te(we(se,Q.EXPENSE_CATEGORY_MAPPINGS),he("companyId","==",h)))}catch{}const L=k.docs.map(V=>{const B=V.data();return{id:V.id,categoryName:String(B.categoryName??B.category_name??"")}}).filter(V=>V.categoryName).sort((V,B)=>V.categoryName.localeCompare(B.categoryName));return L.length>0?L:Eet.map(V=>({id:`fallback-${V.toLowerCase().replace(/[^a-z0-9]+/g,"-")}`,categoryName:V}))},enabled:!!h}),{data:p=[]}=Ee({queryKey:["bill-payment-accounts",h],queryFn:async()=>h?(await Ce(Te(we(se,Q.CHART_OF_ACCOUNTS),he("companyId","==",h),he("accountType","==","Asset"),he("status","==","active")))).docs.map(L=>{const V=L.data();return{id:L.id,accountName:String(V.accountName??"")}}).filter(L=>L.accountName).sort((L,V)=>L.accountName.localeCompare(V.accountName)):[],enabled:!!h}),v=()=>{if(!p.length)return"";const k=p.find(L=>L.accountName.toLowerCase().includes("bank"))||p.find(L=>L.accountName.toLowerCase().includes("cash"));return(k==null?void 0:k.id)||p[0].id},{data:b}=Ee({queryKey:["vendors",h],queryFn:async()=>h?(await Ce(Te(we(se,Q.VENDORS),he("companyId","==",h)))).docs.map(L=>{const V=L.data();return{id:L.id,name:String(V.name??"")}}).sort((L,V)=>L.name.localeCompare(V.name)):[],enabled:!!h}),x=(l==null?void 0:l.isVatRegistered)||!1,w=(l==null?void 0:l.vatRate)||16,C=parseFloat(u.amount)||0,S=x?C*(w/100):0,P=C+S,j=Xe({mutationFn:async k=>{if(!h||!t)throw new Error("Not authenticated");await _n.createBill({companyId:h,vendorId:k.vendor_id||void 0,amount:P,categoryName:k.category||"Miscellaneous",billDate:k.bill_date,dueDate:k.due_date||k.bill_date,description:k.description||void 0})},onSuccess:()=>{n.invalidateQueries({queryKey:["bills",h]}),n.invalidateQueries({queryKey:["accounts-payable"]}),n.invalidateQueries({queryKey:["vendors"]}),n.invalidateQueries({queryKey:["dashboard"]}),Y.success("Bill created successfully"),o(!1),d({vendor_id:"",bill_number:`BILL-${Date.now()}`,bill_date:new Date().toISOString().split("T")[0],due_date:"",category:"",amount:"",description:""})},onError:k=>{Y.error("Failed to create bill: "+k.message)}}),g=Xe({mutationFn:async k=>{if(!h)throw new Error("Company not found");const L=f==null?void 0:f.find(M=>M.id===k);if(!L)throw new Error("Bill not found");const V=Math.max(Number(L.total)-Number(L.amount_paid||0),0);if(V<=0)throw new Error("Bill is already fully paid");const B=v();if(!B)throw new Error("No active Asset payment account found.");await _n.payBill({companyId:h,billId:k,amount:V,paymentDate:new Date().toISOString().split("T")[0],paymentAccountId:B,notes:"Bill payment recorded from Bills page"})},onSuccess:()=>{n.invalidateQueries({queryKey:["bills",h]}),n.invalidateQueries({queryKey:["accounts-payable"]}),n.invalidateQueries({queryKey:["vendors"]}),n.invalidateQueries({queryKey:["bank-accounts"]}),n.invalidateQueries({queryKey:["dashboard"]}),Y.success("Bill payment recorded")},onError:k=>{Y.error("Failed to update bill: "+k.message)}}),T=Xe({mutationFn:async k=>{if(!h)throw new Error("Company not found");if(!k.journal_entry_id)throw new Error("Bill has no posted journal entry to reverse.");if(Number(k.amount_paid||0)>.001)throw new Error("Reverse bill payment entries first before reversing this bill.");const L=prompt(`Reason for reversing bill ${k.bill_number} (optional):`)||void 0;return _n.reverseJournalEntry({companyId:h,journalEntryId:k.journal_entry_id,reason:L})},onSuccess:()=>{n.invalidateQueries({queryKey:["bills",h]}),n.invalidateQueries({queryKey:["accounts-payable"]}),n.invalidateQueries({queryKey:["vendors"]}),n.invalidateQueries({queryKey:["bank-accounts"]}),n.invalidateQueries({queryKey:["journal-entries"]}),n.invalidateQueries({queryKey:["financial-reports"]}),n.invalidateQueries({queryKey:["dashboard"]}),Y.success("Bill journal entry reversed")},onError:k=>{Y.error("Failed to reverse bill: "+k.message)}}),E=k=>{switch(String(k||"").toLowerCase()){case"paid":return"default";case"unpaid":return"secondary";case"partially paid":return"secondary";case"pending":return"secondary";case"overdue":return"destructive";default:return"outline"}},A=k=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(k),I=f==null?void 0:f.filter(k=>{var L,V;return k.bill_number.toLowerCase().includes(r.toLowerCase())||((V=(L=k.vendors)==null?void 0:L.name)==null?void 0:V.toLowerCase().includes(r.toLowerCase()))});return m?i.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Bills"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage bills and payments to vendors"})]}),i.jsxs(Jn,{open:a,onOpenChange:o,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(H,{children:[i.jsx(Nn,{className:"mr-2 h-4 w-4"}),"New Bill"]})}),i.jsxs(Hn,{className:"max-w-lg",children:[i.jsx(Kn,{children:i.jsx(Gn,{children:"Create New Bill"})}),i.jsxs("form",{onSubmit:k=>{k.preventDefault(),j.mutate(u)},className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"vendor",children:"Vendor *"}),i.jsxs(Tt,{value:u.vendor_id,onValueChange:k=>d({...u,vendor_id:k}),children:[i.jsx(jt,{children:i.jsx(Ct,{placeholder:"Select vendor"})}),i.jsx(Nt,{children:b==null?void 0:b.map(k=>i.jsx(be,{value:k.id,children:k.name},k.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"bill_number",children:"Bill Number"}),i.jsx(G,{id:"bill_number",value:u.bill_number,onChange:k=>d({...u,bill_number:k.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"bill_date",children:"Bill Date *"}),i.jsx(G,{id:"bill_date",type:"date",value:u.bill_date,onChange:k=>d({...u,bill_date:k.target.value}),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"due_date",children:"Due Date"}),i.jsx(G,{id:"due_date",type:"date",value:u.due_date,onChange:k=>d({...u,due_date:k.target.value})})]}),i.jsxs("div",{className:"space-y-2 md:col-span-2",children:[i.jsx(ee,{htmlFor:"category",children:"Category *"}),i.jsxs(Tt,{value:u.category,onValueChange:k=>d({...u,category:k}),children:[i.jsx(jt,{children:i.jsx(Ct,{placeholder:"Select category"})}),i.jsx(Nt,{children:y.map(k=>i.jsx(be,{value:k.categoryName,children:k.categoryName},k.id))})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"amount",children:"Amount (ZMW) *"}),i.jsx(G,{id:"amount",type:"number",step:"0.01",value:u.amount,onChange:k=>d({...u,amount:k.target.value}),required:!0})]}),x&&i.jsxs("div",{className:"rounded-lg bg-muted p-3 space-y-1 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Subtotal:"}),i.jsx("span",{children:A(C)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{children:["VAT (",w,"%):"]}),i.jsx("span",{children:A(S)})]}),i.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[i.jsx("span",{children:"Total:"}),i.jsx("span",{children:A(P)})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"description",children:"Description"}),i.jsx(Zn,{id:"description",value:u.description,onChange:k=>d({...u,description:k.target.value}),rows:2})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),i.jsx(H,{type:"submit",children:"Create Bill"})]})]})]})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Ds,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{placeholder:"Search bills...",value:r,onChange:k=>s(k.target.value),className:"pl-10"})]})})}),i.jsx(re,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Bill #"}),i.jsx(q,{children:"Date"}),i.jsx(q,{children:"Vendor"}),i.jsx(q,{children:"Due Date"}),i.jsx(q,{className:"text-right",children:"Total"}),i.jsx(q,{children:"Status"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ut,{children:[I==null?void 0:I.map(k=>{var L;return i.jsxs(je,{children:[i.jsx(U,{className:"font-medium",children:k.bill_number}),i.jsx(U,{children:mt(new Date(k.bill_date),"dd MMM yyyy")}),i.jsx(U,{children:((L=k.vendors)==null?void 0:L.name)||"-"}),i.jsx(U,{children:k.due_date?mt(new Date(k.due_date),"dd MMM yyyy"):"-"}),i.jsx(U,{className:"text-right",children:A(Number(k.total))}),i.jsx(U,{children:i.jsx(Ve,{variant:E(k.status||"pending"),children:k.status})}),i.jsx(U,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[k.journal_entry_id&&c&&i.jsx(H,{variant:"ghost",size:"icon",disabled:T.isPending||Number(k.amount_paid||0)>.001,onClick:()=>{if(Number(k.amount_paid||0)>.001){Y.error("Reverse bill payments first before reversing this bill.");return}confirm("Reverse this bill posting? This creates an opposite journal entry.")&&T.mutate(k)},title:Number(k.amount_paid||0)>.001?"Reverse payments first":"Reverse bill posting",children:i.jsx(Cl,{className:"h-4 w-4"})}),String(k.status||"").toLowerCase()!=="paid"&&i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>g.mutate(k.id),title:"Mark as Paid",children:i.jsx($x,{className:"h-4 w-4"})}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>{Y.error("Bill deletion is blocked. Use a reversal/credit-note workflow.")},disabled:!0,title:"Bill deletion is blocked",children:i.jsx(Ms,{className:"h-4 w-4"})})]})})]},k.id)}),(I==null?void 0:I.length)===0&&i.jsx(je,{children:i.jsx(U,{colSpan:7,className:"text-center text-muted-foreground py-8",children:"No bills found. Create your first bill!"})})]})]})})]})]})}function Tet(){const{user:t}=ht(),e=$n(),n=tn(),[r,s]=_.useState(""),[a,o]=_.useState(!1),{data:l}=ud(),[c,u]=_.useState({vendor_id:"",order_number:`PO-${Date.now()}`,order_date:new Date().toISOString().split("T")[0],expected_date:"",amount:"",description:""}),{data:d}=Ee({queryKey:["purchase-orders-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const g=await Be.getPrimaryMembershipByUser(t.id);return(g==null?void 0:g.companyId)??null},enabled:!!t}),{data:h,isLoading:f}=Ee({queryKey:["purchase-orders",d],queryFn:async()=>{if(!d)return[];const g=we(se,Q.PURCHASE_ORDERS),E=(await Ce(Te(g,he("companyId","==",d)))).docs.map(k=>{const L=k.data();return{id:k.id,order_number:String(L.orderNumber??L.order_number??""),order_date:String(L.orderDate??L.order_date??""),expected_date:L.expectedDate??L.expected_date??null,subtotal:Number(L.subtotal??0),vat_amount:Number(L.vatAmount??L.vat_amount??0),total:Number(L.total??0),status:L.status??"pending",description:L.description??null,vendor_id:L.vendorId??L.vendor_id??null,vendors:null}}),A=Array.from(new Set(E.map(k=>k.vendor_id).filter(Boolean))),I=new Map;if(A.length>0){const k=we(se,Q.VENDORS);(await Ce(Te(k,he("companyId","==",d)))).docs.forEach(V=>{const B=V.data();I.set(V.id,String(B.name??""))})}return E.map(k=>({...k,vendors:k.vendor_id?{name:I.get(k.vendor_id)||"Unknown Vendor"}:null})).sort((k,L)=>L.order_date.localeCompare(k.order_date))},enabled:!!d}),{data:m}=Ee({queryKey:["vendors",d],queryFn:async()=>{if(!d)return[];const g=we(se,Q.VENDORS);return(await Ce(Te(g,he("companyId","==",d)))).docs.map(E=>{const A=E.data();return{id:E.id,name:String(A.name??"")}}).sort((E,A)=>E.name.localeCompare(A.name))},enabled:!!d}),y=(l==null?void 0:l.isVatRegistered)||!1,p=(l==null?void 0:l.vatRate)||16,v=parseFloat(c.amount)||0,b=y?v*(p/100):0,x=v+b,w=Xe({mutationFn:async g=>{if(!d||!t)throw new Error("No active company context");await es(we(se,Q.PURCHASE_ORDERS),{companyId:d,vendorId:g.vendor_id,orderNumber:g.order_number,orderDate:g.order_date,expectedDate:g.expected_date||null,subtotal:v,vatAmount:b,total:x,status:"pending",description:g.description||null,createdBy:t.id,createdAt:Re(),updatedAt:Re()})},onSuccess:()=>{n.invalidateQueries({queryKey:["purchase-orders",d]}),Y.success("Purchase order created successfully"),o(!1),u({vendor_id:"",order_number:`PO-${Date.now()}`,order_date:new Date().toISOString().split("T")[0],expected_date:"",amount:"",description:""})},onError:g=>{Y.error("Failed to create purchase order: "+g.message)}}),C=Xe({mutationFn:async g=>{await Gl(Je(se,Q.PURCHASE_ORDERS,g))},onSuccess:()=>{n.invalidateQueries({queryKey:["purchase-orders",d]}),Y.success("Purchase order deleted successfully")},onError:g=>{Y.error("Failed to delete purchase order: "+g.message)}}),S=g=>{switch(g){case"received":return"default";case"pending":return"secondary";case"cancelled":return"destructive";default:return"outline"}},P=g=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(g),j=h==null?void 0:h.filter(g=>{var T,E;return g.order_number.toLowerCase().includes(r.toLowerCase())||((E=(T=g.vendors)==null?void 0:T.name)==null?void 0:E.toLowerCase().includes(r.toLowerCase()))});return f?i.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Purchase Orders"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage purchase orders to vendors"})]}),i.jsxs(Jn,{open:a,onOpenChange:o,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(H,{children:[i.jsx(Nn,{className:"mr-2 h-4 w-4"}),"New Purchase Order"]})}),i.jsxs(Hn,{className:"max-w-lg",children:[i.jsx(Kn,{children:i.jsx(Gn,{children:"Create Purchase Order"})}),i.jsxs("form",{onSubmit:g=>{g.preventDefault(),w.mutate(c)},className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"vendor",children:"Vendor *"}),i.jsxs(Tt,{value:c.vendor_id,onValueChange:g=>u({...c,vendor_id:g}),children:[i.jsx(jt,{children:i.jsx(Ct,{placeholder:"Select vendor"})}),i.jsx(Nt,{children:m==null?void 0:m.map(g=>i.jsx(be,{value:g.id,children:g.name},g.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"order_number",children:"PO Number"}),i.jsx(G,{id:"order_number",value:c.order_number,onChange:g=>u({...c,order_number:g.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"order_date",children:"Order Date *"}),i.jsx(G,{id:"order_date",type:"date",value:c.order_date,onChange:g=>u({...c,order_date:g.target.value}),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"expected_date",children:"Expected Delivery"}),i.jsx(G,{id:"expected_date",type:"date",value:c.expected_date,onChange:g=>u({...c,expected_date:g.target.value})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"amount",children:"Amount (ZMW) *"}),i.jsx(G,{id:"amount",type:"number",step:"0.01",value:c.amount,onChange:g=>u({...c,amount:g.target.value}),required:!0})]}),y&&i.jsxs("div",{className:"rounded-lg bg-muted p-3 space-y-1 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Subtotal:"}),i.jsx("span",{children:P(v)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{children:["VAT (",p,"%):"]}),i.jsx("span",{children:P(b)})]}),i.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[i.jsx("span",{children:"Total:"}),i.jsx("span",{children:P(x)})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"description",children:"Description"}),i.jsx(Zn,{id:"description",value:c.description,onChange:g=>u({...c,description:g.target.value}),rows:2})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),i.jsx(H,{type:"submit",children:"Create Order"})]})]})]})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Ds,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{placeholder:"Search purchase orders...",value:r,onChange:g=>s(g.target.value),className:"pl-10"})]})})}),i.jsx(re,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"PO #"}),i.jsx(q,{children:"Date"}),i.jsx(q,{children:"Vendor"}),i.jsx(q,{children:"Expected Delivery"}),i.jsx(q,{className:"text-right",children:"Total"}),i.jsx(q,{children:"Status"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ut,{children:[j==null?void 0:j.map(g=>{var T;return i.jsxs(je,{children:[i.jsx(U,{className:"font-medium",children:g.order_number}),i.jsx(U,{children:mt(new Date(g.order_date),"dd MMM yyyy")}),i.jsx(U,{children:((T=g.vendors)==null?void 0:T.name)||"-"}),i.jsx(U,{children:g.expected_date?mt(new Date(g.expected_date),"dd MMM yyyy"):"-"}),i.jsx(U,{className:"text-right",children:P(Number(g.total))}),i.jsx(U,{children:i.jsx(Ve,{variant:S(g.status||"pending"),children:g.status})}),i.jsx(U,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>e("/bills"),title:"Convert to Bill",children:i.jsx(dr,{className:"h-4 w-4"})}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>C.mutate(g.id),title:"Delete",children:i.jsx(Ms,{className:"h-4 w-4"})})]})})]},g.id)}),(j==null?void 0:j.length)===0&&i.jsx(je,{children:i.jsx(U,{colSpan:7,className:"text-center text-muted-foreground py-8",children:"No purchase orders found. Create your first PO!"})})]})]})})]})]})}const Cet=["Utilities","Transport","Office Supplies","Rent","Salaries","Marketing","Repairs","Miscellaneous"],Pet=[{header:"Description",key:"description",required:!0,transform:Ss.trim},{header:"Category",key:"category",transform:Ss.trim},{header:"Amount",key:"amount",required:!0,transform:Ss.toNumber},{header:"Date",key:"expense_date",required:!0,transform:Ss.toDate},{header:"Vendor",key:"vendor_name",transform:Ss.trim},{header:"Payment Method",key:"payment_method",transform:Ss.trim},{header:"Reference",key:"reference_number",transform:Ss.trim},{header:"Notes",key:"notes",transform:Ss.trim}],Iet=[{header:"Date",key:"expense_date",formatter:det},{header:"Description",key:"description"},{header:"Category",key:"category"},{header:"Vendor",key:"vendor_name"},{header:"Amount",key:"amount",formatter:uet},{header:"Payment Method",key:"payment_method"},{header:"Reference",key:"reference_number"},{header:"Notes",key:"notes"}];function ket(){const{user:t}=ht(),{data:e}=ei(),n=tn(),[r,s]=_.useState(""),[a,o]=_.useState(!1),[l,c]=_.useState(!1),[u,d]=_.useState(null),h=["super_admin","admin","financial_manager","accountant","assistant_accountant"].includes(e||""),[f,m]=_.useState({description:"",category:"",amount:"",expense_date:new Date().toISOString().split("T")[0],vendor_name:"",payment_method:"cash",reference_number:"",notes:""}),{data:y}=Ee({queryKey:["expenses-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const M=await Be.getPrimaryMembershipByUser(t.id);return(M==null?void 0:M.companyId)??null},enabled:!!t}),{data:p,isLoading:v}=Ee({queryKey:["expenses",y],queryFn:async()=>y?(await Ce(Te(we(se,Q.EXPENSES),he("companyId","==",y)))).docs.map($=>{const O=$.data();return{id:$.id,description:String(O.description??""),category:O.category??null,amount:Number(O.amount??0),expense_date:String(O.expenseDate??O.expense_date??new Date().toISOString().slice(0,10)),vendor_name:O.vendorName??O.vendor_name??null,payment_method:O.paymentMethod??O.payment_method??null,reference_number:O.referenceNumber??O.reference_number??null,notes:O.notes??null,journal_entry_id:O.journalEntryId??O.journal_entry_id??null}}).sort(($,O)=>O.expense_date.localeCompare($.expense_date)):[],enabled:!!y}),{data:b=[]}=Ee({queryKey:["expense-category-mappings",y],queryFn:async()=>{if(!y)return[];let M=await Ce(Te(we(se,Q.EXPENSE_CATEGORY_MAPPINGS),he("companyId","==",y)));if(M.empty)try{await _n.seedDefaultExpenseCategories({companyId:y}),M=await Ce(Te(we(se,Q.EXPENSE_CATEGORY_MAPPINGS),he("companyId","==",y)))}catch{}const $=M.docs.map(O=>{const W=O.data();return{id:O.id,categoryName:String(W.categoryName??W.category_name??"")}}).filter(O=>O.categoryName).sort((O,W)=>O.categoryName.localeCompare(W.categoryName));return $.length>0?$:Cet.map(O=>({id:`fallback-${O.toLowerCase().replace(/[^a-z0-9]+/g,"-")}`,categoryName:O}))},enabled:!!y}),{data:x=[]}=Ee({queryKey:["expense-payment-accounts",y],queryFn:async()=>y?(await Ce(Te(we(se,Q.CHART_OF_ACCOUNTS),he("companyId","==",y),he("accountType","==","Asset"),he("status","==","active")))).docs.map($=>{const O=$.data();return{id:$.id,accountName:String(O.accountName??"")}}).filter($=>$.accountName).sort(($,O)=>$.accountName.localeCompare(O.accountName)):[],enabled:!!y}),w=M=>{const $=M.toLowerCase();return $==="mobile_money"?"Mobile Money":$==="cash"?"Cash":$==="credit"?"Credit":"Bank"},C=M=>{if(!x.length)return"";const $=M.toLowerCase(),O=W=>{var Z;return((Z=x.find(ae=>W.some(Ae=>ae.accountName.toLowerCase().includes(Ae))))==null?void 0:Z.id)||""};return $==="cash"?O(["cash"])||x[0].id:$==="mobile_money"?O(["mobile","airtel","mtn"])||x[0].id:O(["bank"])||x[0].id},S=Xe({mutationFn:async M=>{if(!y||!t)throw new Error("Not authenticated");const $=C(M.payment_method);if(!$)throw new Error("No active Asset payment account found in Chart of Accounts.");if(!M.category)throw new Error("Expense category is required.");await _n.recordExpense({companyId:y,amount:Number(M.amount),categoryName:M.category,paymentMethod:w(M.payment_method),paymentAccountId:$,expenseDate:M.expense_date,description:M.description})},onSuccess:()=>{n.invalidateQueries({queryKey:["expenses",y]}),n.invalidateQueries({queryKey:["dashboard"]}),n.invalidateQueries({queryKey:["bank-accounts"]}),Y.success("Expense recorded successfully"),g()},onError:M=>{Y.error("Failed to create expense: "+M.message)}}),P=Xe({mutationFn:async({id:M,data:$})=>(await xr(Je(se,Q.EXPENSES,M),{description:$.description,category:$.category||null,amount:Number($.amount),expenseDate:$.expense_date,vendorName:$.vendor_name||null,paymentMethod:$.payment_method||null,referenceNumber:$.reference_number||null,notes:$.notes||null,updatedAt:Re()},{merge:!0}),M),onSuccess:()=>{n.invalidateQueries({queryKey:["expenses",y]}),Y.success("Expense updated successfully"),g()},onError:M=>{Y.error("Failed to update expense: "+M.message)}}),j=Xe({mutationFn:async M=>{if(!y)throw new Error("Company not found");if(!M.journal_entry_id)throw new Error("Expense has no posted journal entry to reverse.");const $=prompt(`Reason for reversing expense "${M.description}" (optional):`)||void 0;return _n.reverseJournalEntry({companyId:y,journalEntryId:M.journal_entry_id,reason:$})},onSuccess:()=>{n.invalidateQueries({queryKey:["expenses",y]}),n.invalidateQueries({queryKey:["bank-accounts"]}),n.invalidateQueries({queryKey:["journal-entries"]}),n.invalidateQueries({queryKey:["financial-reports"]}),n.invalidateQueries({queryKey:["dashboard"]}),Y.success("Expense journal entry reversed")},onError:M=>{Y.error("Failed to reverse expense: "+M.message)}}),g=()=>{m({description:"",category:"",amount:"",expense_date:new Date().toISOString().split("T")[0],vendor_name:"",payment_method:"cash",reference_number:"",notes:""}),d(null),o(!1)},T=M=>{var $;if(M.journal_entry_id){Y.error("Posted expenses cannot be edited directly.");return}d(M),m({description:M.description||"",category:M.category||"",amount:(($=M.amount)==null?void 0:$.toString())||"",expense_date:M.expense_date||new Date().toISOString().split("T")[0],vendor_name:M.vendor_name||"",payment_method:M.payment_method||"cash",reference_number:M.reference_number||"",notes:M.notes||""}),o(!0)},E=M=>{if(M.preventDefault(),u){if(u.journal_entry_id){Y.error("Posted expenses cannot be edited directly.");return}P.mutate({id:u.id,data:f})}else S.mutate(f)},A=M=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(M),I=M=>({"Office Supplies":"default",Travel:"secondary","Meals & Entertainment":"outline",Utilities:"default",Rent:"secondary"})[M]||"outline",k=p==null?void 0:p.filter(M=>{var $,O,W;return(($=M.description)==null?void 0:$.toLowerCase().includes(r.toLowerCase()))||((O=M.category)==null?void 0:O.toLowerCase().includes(r.toLowerCase()))||((W=M.vendor_name)==null?void 0:W.toLowerCase().includes(r.toLowerCase()))}),L=(p==null?void 0:p.reduce((M,$)=>M+Number($.amount||0),0))||0,V=async M=>{if(!(t!=null&&t.id)||!y)throw new Error("Not authenticated");for(const $ of M){const O=$,W=String(O.payment_method??"cash"),Z=C(W);if(!Z)throw new Error("No active Asset payment account found in Chart of Accounts.");await _n.recordExpense({companyId:y,description:String(O.description??"").trim(),categoryName:O.category?String(O.category).trim():"Miscellaneous",amount:Number(O.amount??0),expenseDate:String(O.expense_date??new Date().toISOString().split("T")[0]),paymentMethod:w(W),paymentAccountId:Z})}n.invalidateQueries({queryKey:["expenses",y]}),n.invalidateQueries({queryKey:["dashboard"]}),n.invalidateQueries({queryKey:["bank-accounts"]}),Y.success(`Imported ${M.length} expenses`)},B=()=>{if(!p||p.length===0){Y.error("No expenses to export");return}rf(p,Iet,"expenses-export"),Y.success("Expenses exported")};return v?i.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Expenses"}),i.jsx("p",{className:"text-muted-foreground",children:"Track and manage business expenses"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(H,{variant:"outline",onClick:()=>c(!0),children:[i.jsx(nl,{className:"mr-2 h-4 w-4"}),"Import"]}),i.jsxs(H,{variant:"outline",onClick:B,children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export"]}),i.jsxs(Jn,{open:a,onOpenChange:M=>{o(M),M||g()},children:[i.jsx(ns,{asChild:!0,children:i.jsxs(H,{children:[i.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Add Expense"]})}),i.jsxs(Hn,{className:"max-w-lg",children:[i.jsx(Kn,{children:i.jsx(Gn,{children:u?"Edit Expense":"Record New Expense"})}),i.jsxs("form",{onSubmit:E,className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2 md:col-span-2",children:[i.jsx(ee,{htmlFor:"description",children:"Description *"}),i.jsx(G,{id:"description",value:f.description,onChange:M=>m({...f,description:M.target.value}),placeholder:"What was this expense for?",required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"category",children:"Category *"}),i.jsxs(Tt,{value:f.category,onValueChange:M=>m({...f,category:M}),children:[i.jsx(jt,{children:i.jsx(Ct,{placeholder:"Select category"})}),i.jsx(Nt,{children:b.map(M=>i.jsx(be,{value:M.categoryName,children:M.categoryName},M.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"amount",children:"Amount (ZMW) *"}),i.jsx(G,{id:"amount",type:"number",step:"0.01",value:f.amount,onChange:M=>m({...f,amount:M.target.value}),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"expense_date",children:"Date *"}),i.jsx(G,{id:"expense_date",type:"date",value:f.expense_date,onChange:M=>m({...f,expense_date:M.target.value}),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"vendor_name",children:"Vendor/Payee"}),i.jsx(G,{id:"vendor_name",value:f.vendor_name,onChange:M=>m({...f,vendor_name:M.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"payment_method",children:"Payment Method"}),i.jsxs(Tt,{value:f.payment_method,onValueChange:M=>m({...f,payment_method:M}),children:[i.jsx(jt,{children:i.jsx(Ct,{})}),i.jsxs(Nt,{children:[i.jsx(be,{value:"cash",children:"Cash"}),i.jsx(be,{value:"bank_transfer",children:"Bank Transfer"}),i.jsx(be,{value:"mobile_money",children:"Mobile Money"}),i.jsx(be,{value:"cheque",children:"Cheque"}),i.jsx(be,{value:"card",children:"Card"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"reference_number",children:"Reference #"}),i.jsx(G,{id:"reference_number",value:f.reference_number,onChange:M=>m({...f,reference_number:M.target.value}),placeholder:"Receipt/Invoice number"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"notes",children:"Notes"}),i.jsx(Zn,{id:"notes",value:f.notes,onChange:M=>m({...f,notes:M.target.value}),rows:2})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{type:"button",variant:"outline",onClick:g,children:"Cancel"}),i.jsxs(H,{type:"submit",children:[u?"Update":"Record"," Expense"]})]})]})]})]})]})]}),i.jsx(pg,{open:l,onOpenChange:c,title:"Import Expenses",description:"Upload a CSV file to import expenses in bulk",columns:Pet,onImport:V}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[i.jsxs(X,{children:[i.jsx(te,{className:"pb-2",children:i.jsx(ne,{className:"text-sm font-medium text-muted-foreground",children:"Total Expenses"})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:A(L)})})]}),i.jsxs(X,{children:[i.jsx(te,{className:"pb-2",children:i.jsx(ne,{className:"text-sm font-medium text-muted-foreground",children:"This Month"})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:A((p==null?void 0:p.filter(M=>{const $=new Date(M.expense_date),O=new Date;return $.getMonth()===O.getMonth()&&$.getFullYear()===O.getFullYear()}).reduce((M,$)=>M+Number($.amount||0),0))||0)})})]}),i.jsxs(X,{children:[i.jsx(te,{className:"pb-2",children:i.jsx(ne,{className:"text-sm font-medium text-muted-foreground",children:"Total Records"})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:(p==null?void 0:p.length)||0})})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Ds,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{placeholder:"Search expenses...",value:r,onChange:M=>s(M.target.value),className:"pl-10"})]})})}),i.jsx(re,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Date"}),i.jsx(q,{children:"Description"}),i.jsx(q,{children:"Category"}),i.jsx(q,{children:"Vendor"}),i.jsx(q,{className:"text-right",children:"Amount"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ut,{children:[k==null?void 0:k.map(M=>i.jsxs(je,{children:[i.jsx(U,{children:mt(new Date(M.expense_date),"dd MMM yyyy")}),i.jsx(U,{className:"font-medium",children:M.description}),i.jsx(U,{children:i.jsx(Ve,{variant:I(M.category||""),children:M.category})}),i.jsx(U,{children:M.vendor_name||"-"}),i.jsx(U,{className:"text-right font-medium",children:A(Number(M.amount))}),i.jsx(U,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[M.journal_entry_id&&h&&i.jsx(H,{variant:"ghost",size:"icon",disabled:j.isPending,onClick:()=>{confirm("Reverse this expense posting? This creates an opposite journal entry.")&&j.mutate(M)},title:"Reverse expense posting",children:i.jsx(Cl,{className:"h-4 w-4"})}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>T(M),disabled:!!M.journal_entry_id,title:M.journal_entry_id?"Posted expenses cannot be edited":"Edit",children:i.jsx(Mp,{className:"h-4 w-4"})}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>{Y.error("Expense deletion is blocked. Use a reversal journal workflow.")},disabled:!0,title:"Expense deletion is blocked",children:i.jsx(Ms,{className:"h-4 w-4"})})]})})]},M.id)),(k==null?void 0:k.length)===0&&i.jsx(je,{children:i.jsx(U,{colSpan:6,className:"text-center text-muted-foreground py-8",children:"No expenses found. Record your first expense!"})})]})]})})]})]})}function Q6(){const t=tn(),{user:e}=ht(),[n,r]=_.useState(""),[s,a]=_.useState(!1),[o,l]=_.useState(16),{data:c}=Ee({queryKey:["primary-membership",e==null?void 0:e.id],queryFn:async()=>e?Be.getPrimaryMembershipByUser(e.id):null,enabled:!!e}),u=c==null?void 0:c.companyId,{data:d,isLoading:h}=Ee({queryKey:["company-settings",u],queryFn:async()=>u?Be.getCompanySettings(u):null,enabled:!!u});_.useEffect(()=>{d&&(r(d.companyName||""),a(!!d.isVatRegistered),l(Number(d.vatRate??16)))},[d]);const f=Xe({mutationFn:async()=>{if(!u)throw new Error("No company linked to your account.");await Be.updateCompanyBasics({companyId:u,name:n}),await xr(Je(se,Q.COMPANY_SETTINGS,u),{companyId:u,companyName:n,isVatRegistered:s,vatRate:s?o:null,updatedAt:Re()},{merge:!0})},onSuccess:()=>{t.invalidateQueries({queryKey:["company-settings",u]}),t.invalidateQueries({queryKey:["company-settings",e==null?void 0:e.id]}),Y.success("Settings saved successfully")},onError:m=>{Y.error("Failed to save settings: "+(m instanceof Error?m.message:"Unknown error"))}});return h?i.jsx("div",{children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Company Settings"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your company information and tax settings"})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[i.jsxs(X,{children:[i.jsxs(te,{children:[i.jsx(ne,{children:"Company Information"}),i.jsx(pt,{children:"Basic company details and branding"})]}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"company-name",children:"Company Name"}),i.jsx(G,{id:"company-name",value:n,onChange:m=>r(m.target.value),placeholder:"Enter company name"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Company Logo"}),i.jsx(XD,{})]})]})]}),i.jsxs(X,{children:[i.jsxs(te,{children:[i.jsx(ne,{children:"VAT / Tax Settings"}),i.jsx(pt,{children:"Configure VAT registration for ZRA compliance"})]}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx(ee,{children:"VAT Registered"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Are you registered for VAT with ZRA?"})]}),i.jsx(us,{checked:s,onCheckedChange:a})]}),s&&i.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[i.jsx(ee,{htmlFor:"vat-rate",children:"VAT Rate (%)"}),i.jsx(G,{id:"vat-rate",type:"number",value:o,onChange:m=>l(Number(m.target.value)),min:0,max:100}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Standard Zambian VAT rate is 16%"})]})]})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx(H,{onClick:()=>f.mutate(),disabled:f.isPending,children:f.isPending?"Saving...":"Save Settings"})})]})}const Ret=()=>{const t=sl();return _.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),i.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),i.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),i.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},Oet=()=>{const{user:t}=ht(),e=tn(),[n,r]=_.useState(""),[s,a]=_.useState(!1),[o,l]=_.useState(!1),[c,u]=_.useState(null),[d,h]=_.useState({name:"",sku:"",category:"",description:"",unit_of_measure:"units",quantity_on_hand:0,reorder_point:0,unit_cost:0,selling_price:0}),[f,m]=_.useState({movement_type:"in",quantity:0,reference_number:"",notes:""}),{data:y}=Ee({queryKey:["inventory-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const g=await Be.getPrimaryMembershipByUser(t.id);return(g==null?void 0:g.companyId)??null},enabled:!!t}),{data:p=[],isLoading:v}=Ee({queryKey:["inventory-items",y],queryFn:async()=>{if(!y)return[];const g=we(se,Q.INVENTORY_ITEMS);return(await Ce(Te(g,he("companyId","==",y)))).docs.map(E=>{const A=E.data();return{id:E.id,name:String(A.name??""),sku:A.sku??null,category:A.category??null,description:A.description??null,unit_of_measure:A.unitOfMeasure??A.unit_of_measure??"units",quantity_on_hand:Number(A.quantityOnHand??A.quantity_on_hand??0),reorder_point:Number(A.reorderPoint??A.reorder_point??0),unit_cost:Number(A.unitCost??A.unit_cost??0),selling_price:Number(A.sellingPrice??A.selling_price??0)}}).sort((E,A)=>E.name.localeCompare(A.name))},enabled:!!y}),b=Xe({mutationFn:async g=>{if(!y||!t)throw new Error("No active company context");await es(we(se,Q.INVENTORY_ITEMS),{companyId:y,name:g.name,sku:g.sku||null,category:g.category||null,description:g.description||null,unitOfMeasure:g.unit_of_measure||"units",quantityOnHand:g.quantity_on_hand,reorderPoint:g.reorder_point,unitCost:g.unit_cost,sellingPrice:g.selling_price,createdBy:t.id,createdAt:Re(),updatedAt:Re()})},onSuccess:()=>{e.invalidateQueries({queryKey:["inventory-items",y]}),Y.success("Item added successfully"),a(!1),h({name:"",sku:"",category:"",description:"",unit_of_measure:"units",quantity_on_hand:0,reorder_point:0,unit_cost:0,selling_price:0})},onError:g=>{Y.error(g.message)}}),x=Xe({mutationFn:async({itemId:g,movementData:T})=>{if(!y||!t)throw new Error("No active company context");const E=p.find(V=>V.id===g);if(!E)throw new Error("Item not found");let A=E.quantity_on_hand;T.movement_type==="in"?A+=T.quantity:T.movement_type==="out"?A-=T.quantity:A=T.quantity;const I=Yl(se),k=Je(we(se,Q.STOCK_MOVEMENTS)),L=Je(se,Q.INVENTORY_ITEMS,g);I.set(k,{companyId:y,inventoryItemId:g,movementType:T.movement_type,quantity:T.quantity,referenceNumber:T.reference_number||null,notes:T.notes||null,createdBy:t.id,createdAt:Re()}),I.update(L,{quantityOnHand:A,updatedAt:Re()}),await I.commit()},onSuccess:()=>{e.invalidateQueries({queryKey:["inventory-items",y]}),Y.success("Stock movement recorded"),l(!1),u(null),m({movement_type:"in",quantity:0,reference_number:"",notes:""})},onError:g=>{Y.error(g.message)}}),w=p.filter(g=>{var T,E;return g.name.toLowerCase().includes(n.toLowerCase())||((T=g.sku)==null?void 0:T.toLowerCase().includes(n.toLowerCase()))||((E=g.category)==null?void 0:E.toLowerCase().includes(n.toLowerCase()))}),C=p.filter(g=>g.quantity_on_hand<=g.reorder_point),S=p.reduce((g,T)=>g+T.quantity_on_hand*T.unit_cost,0),P=g=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(g),j=["Raw Materials","Finished Goods","Supplies","Equipment","Other"];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Inventory"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your stock and inventory items"})]}),i.jsxs(Jn,{open:s,onOpenChange:a,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(H,{children:[i.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Add Item"]})}),i.jsxs(Hn,{className:"max-w-2xl",children:[i.jsx(Kn,{children:i.jsx(Gn,{children:"Add Inventory Item"})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Item Name *"}),i.jsx(G,{value:d.name,onChange:g=>h({...d,name:g.target.value}),placeholder:"Enter item name"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"SKU"}),i.jsx(G,{value:d.sku,onChange:g=>h({...d,sku:g.target.value}),placeholder:"Stock Keeping Unit"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Category"}),i.jsxs(Tt,{value:d.category,onValueChange:g=>h({...d,category:g}),children:[i.jsx(jt,{children:i.jsx(Ct,{placeholder:"Select category"})}),i.jsx(Nt,{children:j.map(g=>i.jsx(be,{value:g,children:g},g))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Unit of Measure"}),i.jsxs(Tt,{value:d.unit_of_measure,onValueChange:g=>h({...d,unit_of_measure:g}),children:[i.jsx(jt,{children:i.jsx(Ct,{})}),i.jsxs(Nt,{children:[i.jsx(be,{value:"units",children:"Units"}),i.jsx(be,{value:"kg",children:"Kilograms"}),i.jsx(be,{value:"liters",children:"Liters"}),i.jsx(be,{value:"meters",children:"Meters"}),i.jsx(be,{value:"pieces",children:"Pieces"}),i.jsx(be,{value:"boxes",children:"Boxes"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Initial Quantity"}),i.jsx(G,{type:"number",value:d.quantity_on_hand,onChange:g=>h({...d,quantity_on_hand:parseFloat(g.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Reorder Point"}),i.jsx(G,{type:"number",value:d.reorder_point,onChange:g=>h({...d,reorder_point:parseFloat(g.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Unit Cost (ZMW)"}),i.jsx(G,{type:"number",step:"0.01",value:d.unit_cost,onChange:g=>h({...d,unit_cost:parseFloat(g.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Selling Price (ZMW)"}),i.jsx(G,{type:"number",step:"0.01",value:d.selling_price,onChange:g=>h({...d,selling_price:parseFloat(g.target.value)||0})})]}),i.jsxs("div",{className:"col-span-2 space-y-2",children:[i.jsx(ee,{children:"Description"}),i.jsx(G,{value:d.description,onChange:g=>h({...d,description:g.target.value}),placeholder:"Item description"})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(H,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),i.jsx(H,{onClick:()=>b.mutate(d),disabled:!d.name,children:"Add Item"})]})]})]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Total Items"}),i.jsx(aa,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:p.length})})]}),i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Total Value"}),i.jsx(aa,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:P(S)})})]}),i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Low Stock Items"}),i.jsx(Oi,{className:"h-4 w-4 text-destructive"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold text-destructive",children:C.length})})]}),i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Categories"}),i.jsx(aa,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:new Set(p.map(g=>g.category).filter(Boolean)).size})})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ne,{children:"Inventory Items"}),i.jsxs("div",{className:"relative w-64",children:[i.jsx(Ds,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"Search items...",value:n,onChange:g=>r(g.target.value),className:"pl-8"})]})]})}),i.jsx(re,{children:v?i.jsx("p",{children:"Loading inventory..."}):w.length===0?i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No inventory items found. Add your first item to get started."}):i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Item Name"}),i.jsx(q,{children:"SKU"}),i.jsx(q,{children:"Category"}),i.jsx(q,{className:"text-right",children:"Qty on Hand"}),i.jsx(q,{className:"text-right",children:"Reorder Point"}),i.jsx(q,{className:"text-right",children:"Unit Cost"}),i.jsx(q,{className:"text-right",children:"Total Value"}),i.jsx(q,{children:"Status"}),i.jsx(q,{children:"Actions"})]})}),i.jsx(Ut,{children:w.map(g=>i.jsxs(je,{children:[i.jsx(U,{className:"font-medium",children:g.name}),i.jsx(U,{children:g.sku||"-"}),i.jsx(U,{children:g.category||"-"}),i.jsxs(U,{className:"text-right",children:[g.quantity_on_hand," ",g.unit_of_measure]}),i.jsx(U,{className:"text-right",children:g.reorder_point}),i.jsx(U,{className:"text-right",children:P(g.unit_cost)}),i.jsx(U,{className:"text-right",children:P(g.quantity_on_hand*g.unit_cost)}),i.jsx(U,{children:g.quantity_on_hand<=g.reorder_point?i.jsx(Ve,{variant:"destructive",children:"Low Stock"}):i.jsx(Ve,{variant:"secondary",children:"In Stock"})}),i.jsx(U,{children:i.jsxs(H,{variant:"outline",size:"sm",onClick:()=>{u(g),l(!0)},children:[i.jsx(Loe,{className:"h-4 w-4 mr-1"}),"Adjust"]})})]},g.id))})]})})]}),i.jsx(Jn,{open:o,onOpenChange:l,children:i.jsxs(Hn,{children:[i.jsx(Kn,{children:i.jsxs(Gn,{children:["Stock Movement - ",c==null?void 0:c.name]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Movement Type"}),i.jsxs(Tt,{value:f.movement_type,onValueChange:g=>m({...f,movement_type:g}),children:[i.jsx(jt,{children:i.jsx(Ct,{})}),i.jsxs(Nt,{children:[i.jsx(be,{value:"in",children:"Stock In (Add)"}),i.jsx(be,{value:"out",children:"Stock Out (Remove)"}),i.jsx(be,{value:"adjustment",children:"Adjustment (Set)"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Quantity"}),i.jsx(G,{type:"number",value:f.quantity,onChange:g=>m({...f,quantity:parseFloat(g.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Reference Number"}),i.jsx(G,{value:f.reference_number,onChange:g=>m({...f,reference_number:g.target.value}),placeholder:"PO#, Invoice#, etc."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Notes"}),i.jsx(G,{value:f.notes,onChange:g=>m({...f,notes:g.target.value}),placeholder:"Reason for adjustment"})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(H,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),i.jsx(H,{onClick:()=>c&&x.mutate({itemId:c.id,movementData:f}),disabled:f.quantity<=0,children:"Record Movement"})]})]})})]})},Det=()=>{const{user:t}=ht(),e=tn(),[n,r]=_.useState(!1),[s,a]=_.useState(!1),[o,l]=_.useState(null),[c,u]=_.useState({account_name:"",account_number:"",bank_name:"",branch:"",account_type:"checking",currency:"ZMW",opening_balance:0}),[d,h]=_.useState({transaction_type:"deposit",amount:0,description:"",reference_number:"",transaction_date:new Date().toISOString().split("T")[0]}),{data:f}=Ee({queryKey:["bank-accounts-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const C=await Be.getPrimaryMembershipByUser(t.id);return(C==null?void 0:C.companyId)??null},enabled:!!t}),{data:m=[],isLoading:y}=Ee({queryKey:["bank-accounts",f],queryFn:async()=>{if(!f)return[];const C=we(se,Q.BANK_ACCOUNTS);return(await Ce(Te(C,he("companyId","==",f)))).docs.map(P=>{const j=P.data();return{id:P.id,account_name:String(j.accountName??j.account_name??""),account_number:j.accountNumber??j.account_number??null,bank_name:String(j.bankName??j.bank_name??""),branch:j.branch??null,account_type:j.accountType??j.account_type??null,currency:j.currency??"ZMW",opening_balance:Number(j.openingBalance??j.opening_balance??0),current_balance:Number(j.currentBalance??j.current_balance??0),is_active:!!(j.isActive??j.is_active??!0)}}).sort((P,j)=>P.account_name.localeCompare(j.account_name))},enabled:!!f}),{data:p=[]}=Ee({queryKey:["bank-transactions",f,o==null?void 0:o.id],queryFn:async()=>{if(!o||!f)return[];const C=we(se,Q.BANK_TRANSACTIONS);return(await Ce(Te(C,he("companyId","==",f),he("bankAccountId","==",o.id)))).docs.map(P=>{var E;const j=P.data(),g=j.transactionDate??j.transaction_date,T=typeof g=="string"?g:((E=g==null?void 0:g.toDate)==null?void 0:E.call(g).toISOString().slice(0,10))??"";return{id:P.id,bank_account_id:String(j.bankAccountId??j.bank_account_id??""),transaction_type:String(j.transactionType??j.transaction_type??""),amount:Number(j.amount??0),description:j.description??null,reference_number:j.referenceNumber??j.reference_number??null,transaction_date:T,is_reconciled:!!(j.isReconciled??j.is_reconciled??!1)}}).sort((P,j)=>j.transaction_date.localeCompare(P.transaction_date))},enabled:!!(o&&f)}),v=Xe({mutationFn:async C=>{if(!f||!t)throw new Error("No active company context");await es(we(se,Q.BANK_ACCOUNTS),{companyId:f,accountName:C.account_name,accountNumber:C.account_number||null,bankName:C.bank_name,branch:C.branch||null,accountType:C.account_type||"checking",currency:C.currency||"ZMW",openingBalance:C.opening_balance,currentBalance:C.opening_balance,isActive:!0,createdBy:t.id,createdAt:Re(),updatedAt:Re()})},onSuccess:()=>{e.invalidateQueries({queryKey:["bank-accounts",f]}),Y.success("Bank account added successfully"),r(!1),u({account_name:"",account_number:"",bank_name:"",branch:"",account_type:"checking",currency:"ZMW",opening_balance:0})},onError:C=>{Y.error(C.message)}}),b=Xe({mutationFn:async C=>{if(!o||!f||!t)throw new Error("No account selected");const S=C.transaction_type==="deposit"?o.current_balance+C.amount:o.current_balance-C.amount,P=Yl(se),j=Je(we(se,Q.BANK_TRANSACTIONS)),g=Je(se,Q.BANK_ACCOUNTS,o.id);P.set(j,{companyId:f,bankAccountId:o.id,transactionType:C.transaction_type,amount:C.amount,description:C.description||null,referenceNumber:C.reference_number||null,transactionDate:C.transaction_date,isReconciled:!1,createdBy:t.id,createdAt:Re(),updatedAt:Re()}),P.update(g,{currentBalance:S,updatedAt:Re()}),await P.commit()},onSuccess:()=>{e.invalidateQueries({queryKey:["bank-accounts",f]}),e.invalidateQueries({queryKey:["bank-transactions",f,o==null?void 0:o.id]}),Y.success("Transaction recorded"),a(!1),h({transaction_type:"deposit",amount:0,description:"",reference_number:"",transaction_date:new Date().toISOString().split("T")[0]})},onError:C=>{Y.error(C.message)}}),x=(C,S="ZMW")=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:S}).format(C),w=m.reduce((C,S)=>C+S.current_balance,0);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Bank Accounts"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your bank accounts and transactions"})]}),i.jsxs(Jn,{open:n,onOpenChange:r,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(H,{children:[i.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Add Account"]})}),i.jsxs(Hn,{children:[i.jsx(Kn,{children:i.jsx(Gn,{children:"Add Bank Account"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Account Name *"}),i.jsx(G,{value:c.account_name,onChange:C=>u({...c,account_name:C.target.value}),placeholder:"e.g., Main Operating Account"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Bank Name *"}),i.jsx(G,{value:c.bank_name,onChange:C=>u({...c,bank_name:C.target.value}),placeholder:"e.g., Zanaco, Stanbic, FNB"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Account Number"}),i.jsx(G,{value:c.account_number,onChange:C=>u({...c,account_number:C.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Branch"}),i.jsx(G,{value:c.branch,onChange:C=>u({...c,branch:C.target.value})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Account Type"}),i.jsxs(Tt,{value:c.account_type,onValueChange:C=>u({...c,account_type:C}),children:[i.jsx(jt,{children:i.jsx(Ct,{})}),i.jsxs(Nt,{children:[i.jsx(be,{value:"checking",children:"Checking"}),i.jsx(be,{value:"savings",children:"Savings"}),i.jsx(be,{value:"money_market",children:"Money Market"}),i.jsx(be,{value:"fixed_deposit",children:"Fixed Deposit"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Currency"}),i.jsxs(Tt,{value:c.currency,onValueChange:C=>u({...c,currency:C}),children:[i.jsx(jt,{children:i.jsx(Ct,{})}),i.jsxs(Nt,{children:[i.jsx(be,{value:"ZMW",children:"ZMW - Zambian Kwacha"}),i.jsx(be,{value:"USD",children:"USD - US Dollar"}),i.jsx(be,{value:"EUR",children:"EUR - Euro"}),i.jsx(be,{value:"GBP",children:"GBP - British Pound"})]})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Opening Balance"}),i.jsx(G,{type:"number",step:"0.01",value:c.opening_balance,onChange:C=>u({...c,opening_balance:parseFloat(C.target.value)||0})})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(H,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),i.jsx(H,{onClick:()=>v.mutate(c),disabled:!c.account_name||!c.bank_name,children:"Add Account"})]})]})]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Total Accounts"}),i.jsx(Va,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:m.length})})]}),i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Total Balance"}),i.jsx(Va,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:x(w)})})]}),i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Active Accounts"}),i.jsx(Va,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:m.filter(C=>C.is_active).length})})]})]}),i.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"Bank Accounts"})}),i.jsx(re,{children:y?i.jsx("p",{children:"Loading accounts..."}):m.length===0?i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No bank accounts found. Add your first account to get started."}):i.jsx("div",{className:"space-y-4",children:m.map(C=>i.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors ${(o==null?void 0:o.id)===C.id?"border-primary bg-primary/5":"hover:bg-muted/50"}`,onClick:()=>l(C),children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:C.account_name}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[C.bank_name," ",C.account_number?`- ${C.account_number}`:""]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-bold",children:x(C.current_balance,C.currency||"ZMW")}),i.jsx(Ve,{variant:C.is_active?"secondary":"outline",children:C.account_type})]})]})},C.id))})})]}),i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between",children:[i.jsx(ne,{children:o?`Transactions - ${o.account_name}`:"Select an Account"}),o&&i.jsxs(Jn,{open:s,onOpenChange:a,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(H,{size:"sm",children:[i.jsx(Nn,{className:"h-4 w-4 mr-1"}),"Add Transaction"]})}),i.jsxs(Hn,{children:[i.jsx(Kn,{children:i.jsx(Gn,{children:"Record Transaction"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Transaction Type"}),i.jsxs(Tt,{value:d.transaction_type,onValueChange:C=>h({...d,transaction_type:C}),children:[i.jsx(jt,{children:i.jsx(Ct,{})}),i.jsxs(Nt,{children:[i.jsx(be,{value:"deposit",children:"Deposit"}),i.jsx(be,{value:"withdrawal",children:"Withdrawal"}),i.jsx(be,{value:"transfer",children:"Transfer"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Amount"}),i.jsx(G,{type:"number",step:"0.01",value:d.amount,onChange:C=>h({...d,amount:parseFloat(C.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Date"}),i.jsx(G,{type:"date",value:d.transaction_date,onChange:C=>h({...d,transaction_date:C.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Description"}),i.jsx(G,{value:d.description,onChange:C=>h({...d,description:C.target.value}),placeholder:"Transaction description"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Reference Number"}),i.jsx(G,{value:d.reference_number,onChange:C=>h({...d,reference_number:C.target.value}),placeholder:"Check#, Transfer#, etc."})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(H,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),i.jsx(H,{onClick:()=>b.mutate(d),disabled:d.amount<=0,children:"Record Transaction"})]})]})]})]}),i.jsx(re,{children:o?p.length===0?i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No transactions recorded for this account"}):i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Date"}),i.jsx(q,{children:"Description"}),i.jsx(q,{className:"text-right",children:"Amount"})]})}),i.jsx(Ut,{children:p.slice(0,10).map(C=>i.jsxs(je,{children:[i.jsx(U,{children:new Date(C.transaction_date).toLocaleDateString()}),i.jsx(U,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[C.transaction_type==="deposit"?i.jsx(Moe,{className:"h-4 w-4 text-green-500"}):i.jsx(t8,{className:"h-4 w-4 text-red-500"}),C.description||C.transaction_type]})}),i.jsxs(U,{className:`text-right font-medium ${C.transaction_type==="deposit"?"text-green-600":"text-red-600"}`,children:[C.transaction_type==="deposit"?"+":"-",x(C.amount)]})]},C.id))})]}):i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Select an account to view transactions"})})]})]})]})};var g1="Checkbox",[Met,Gtt]=ps(g1),[Let,ZD]=Met(g1);function $et(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:a,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:h}=t,[f,m]=oo({prop:n,defaultProp:s??!1,onChange:c,caller:g1}),[y,p]=_.useState(null),[v,b]=_.useState(null),x=_.useRef(!1),w=y?!!o||!!y.closest("form"):!0,C={checked:f,disabled:a,setChecked:m,control:y,setControl:p,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:x,required:u,defaultChecked:Eu(s)?!1:s,isFormControl:w,bubbleInput:v,setBubbleInput:b};return i.jsx(Let,{scope:e,...C,children:Fet(h)?h(C):r})}var kre="CheckboxTrigger",Rre=_.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:a,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:m,bubbleInput:y}=ZD(kre,t),p=Mt(s,d),v=_.useRef(c);return _.useEffect(()=>{const b=a==null?void 0:a.form;if(b){const x=()=>h(v.current);return b.addEventListener("reset",x),()=>b.removeEventListener("reset",x)}},[a,h]),i.jsx(st.button,{type:"button",role:"checkbox","aria-checked":Eu(c)?"mixed":c,"aria-required":u,"data-state":$re(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:p,onKeyDown:Me(e,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:Me(n,b=>{h(x=>Eu(x)?!0:!x),y&&m&&(f.current=b.isPropagationStopped(),f.current||b.stopPropagation())})})});Rre.displayName=kre;var JD=_.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:a,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...h}=t;return i.jsx($et,{__scopeCheckbox:n,checked:s,defaultChecked:a,disabled:l,required:o,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:f})=>i.jsxs(i.Fragment,{children:[i.jsx(Rre,{...h,ref:e,__scopeCheckbox:n}),f&&i.jsx(Lre,{__scopeCheckbox:n})]})})});JD.displayName=g1;var Ore="CheckboxIndicator",Dre=_.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,a=ZD(Ore,n);return i.jsx(gs,{present:r||Eu(a.checked)||a.checked===!0,children:i.jsx(st.span,{"data-state":$re(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});Dre.displayName=Ore;var Mre="CheckboxBubbleInput",Lre=_.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:a,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:h,bubbleInput:f,setBubbleInput:m}=ZD(Mre,t),y=Mt(n,m),p=$2(a),v=lR(r);_.useEffect(()=>{const x=f;if(!x)return;const w=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(w,"checked").set,P=!s.current;if(p!==a&&S){const j=new Event("click",{bubbles:P});x.indeterminate=Eu(a),S.call(x,Eu(a)?!1:a),x.dispatchEvent(j)}},[f,p,a,s]);const b=_.useRef(Eu(a)?!1:a);return i.jsx(st.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??b.current,required:l,disabled:c,name:u,value:d,form:h,...e,tabIndex:-1,ref:y,style:{...e.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Lre.displayName=Mre;function Fet(t){return typeof t=="function"}function Eu(t){return t==="indeterminate"}function $re(t){return Eu(t)?"indeterminate":t?"checked":"unchecked"}const Fre=_.forwardRef(({className:t,...e},n)=>i.jsx(JD,{ref:n,className:ve("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:i.jsx(Dre,{className:ve("flex items-center justify-center text-current"),children:i.jsx($x,{className:"h-4 w-4"})})}));Fre.displayName=JD.displayName;const Vet=()=>{const{user:t}=ht(),e=tn(),[n,r]=_.useState(""),[s,a]=_.useState(0),[o,l]=_.useState(new Date().toISOString().split("T")[0]),[c,u]=_.useState(new Set),{data:d}=Ee({queryKey:["reconciliation-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const C=await Be.getPrimaryMembershipByUser(t.id);return(C==null?void 0:C.companyId)??null},enabled:!!t}),{data:h=[]}=Ee({queryKey:["bank-accounts",d],queryFn:async()=>{if(!d)return[];const C=we(se,Q.BANK_ACCOUNTS);return(await Ce(Te(C,he("companyId","==",d),he("isActive","==",!0)))).docs.map(P=>{const j=P.data();return{id:P.id,account_name:String(j.accountName??j.account_name??""),bank_name:String(j.bankName??j.bank_name??""),current_balance:Number(j.currentBalance??j.current_balance??0)}}).sort((P,j)=>P.account_name.localeCompare(j.account_name))},enabled:!!d}),{data:f=[]}=Ee({queryKey:["unreconciled-transactions",d,n],queryFn:async()=>{if(!n||!d)return[];const C=we(se,Q.BANK_TRANSACTIONS);return(await Ce(Te(C,he("companyId","==",d),he("bankAccountId","==",n),he("isReconciled","==",!1)))).docs.map(P=>{var E;const j=P.data(),g=j.transactionDate??j.transaction_date,T=typeof g=="string"?g:((E=g==null?void 0:g.toDate)==null?void 0:E.call(g).toISOString().slice(0,10))??"";return{id:P.id,transaction_type:String(j.transactionType??j.transaction_type??""),amount:Number(j.amount??0),description:j.description??null,reference_number:j.referenceNumber??j.reference_number??null,transaction_date:T,is_reconciled:!!(j.isReconciled??j.is_reconciled??!1)}}).sort((P,j)=>j.transaction_date.localeCompare(P.transaction_date))},enabled:!!(n&&d)}),m=Xe({mutationFn:async()=>{if(!n||c.size===0||!d||!t)throw new Error("Please select transactions to reconcile");const C=Array.from(c),S=Yl(se);C.forEach(g=>{const T=Je(se,Q.BANK_TRANSACTIONS,g);S.update(T,{isReconciled:!0,reconciledDate:o,updatedAt:Re()})});const P=h.find(g=>g.id===n),j=Je(we(se,Q.RECONCILIATIONS));S.set(j,{companyId:d,bankAccountId:n,reconciliationDate:o,statementBalance:s,bookBalance:(P==null?void 0:P.current_balance)||0,difference:s-((P==null?void 0:P.current_balance)||0),status:"completed",transactionIds:C,reconciledBy:t.id,createdAt:Re(),updatedAt:Re()}),await S.commit()},onSuccess:()=>{e.invalidateQueries({queryKey:["unreconciled-transactions",d,n]}),Y.success("Transactions reconciled successfully"),u(new Set)},onError:C=>{Y.error(C.message)}}),y=h.find(C=>C.id===n),p=f.filter(C=>c.has(C.id)).reduce((C,S)=>S.transaction_type==="deposit"?C+S.amount:C-S.amount,(y==null?void 0:y.current_balance)||0),v=s-p,b=C=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(C),x=C=>{const S=new Set(c);S.has(C)?S.delete(C):S.add(C),u(S)},w=()=>{c.size===f.length?u(new Set):u(new Set(f.map(C=>C.id)))};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Bank Reconciliation"}),i.jsx("p",{className:"text-muted-foreground",children:"Match your bank statement with recorded transactions"})]}),i.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[i.jsxs(X,{className:"lg:col-span-1",children:[i.jsx(te,{children:i.jsx(ne,{children:"Reconciliation Setup"})}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Bank Account"}),i.jsxs(Tt,{value:n,onValueChange:r,children:[i.jsx(jt,{children:i.jsx(Ct,{placeholder:"Select account"})}),i.jsx(Nt,{children:h.map(C=>i.jsxs(be,{value:C.id,children:[C.account_name," (",C.bank_name,")"]},C.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Statement Date"}),i.jsx(G,{type:"date",value:o,onChange:C=>l(C.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Statement Ending Balance"}),i.jsx(G,{type:"number",step:"0.01",value:s,onChange:C=>a(parseFloat(C.target.value)||0),placeholder:"Enter balance from bank statement"})]}),y&&i.jsxs("div",{className:"pt-4 border-t space-y-3",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Book Balance:"}),i.jsx("span",{className:"font-medium",children:b(y.current_balance)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Cleared Balance:"}),i.jsx("span",{className:"font-medium",children:b(p)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Statement Balance:"}),i.jsx("span",{className:"font-medium",children:b(s)})]}),i.jsxs("div",{className:"flex justify-between font-semibold pt-2 border-t",children:[i.jsx("span",{children:"Difference:"}),i.jsx("span",{className:v===0?"text-green-600":"text-red-600",children:b(v)})]}),v===0?i.jsxs("div",{className:"flex items-center gap-2 text-green-600 text-sm",children:[i.jsx(Qo,{className:"h-4 w-4"}),i.jsx("span",{children:"Balanced! Ready to reconcile."})]}):i.jsxs("div",{className:"flex items-center gap-2 text-amber-600 text-sm",children:[i.jsx(ks,{className:"h-4 w-4"}),i.jsx("span",{children:"Difference must be zero to reconcile."})]})]}),i.jsxs(H,{className:"w-full",onClick:()=>m.mutate(),disabled:v!==0||c.size===0,children:[i.jsx(sle,{className:"h-4 w-4 mr-2"}),"Complete Reconciliation"]})]})]}),i.jsxs(X,{className:"lg:col-span-2",children:[i.jsxs(te,{className:"flex flex-row items-center justify-between",children:[i.jsx(ne,{children:"Unreconciled Transactions"}),f.length>0&&i.jsx(H,{variant:"outline",size:"sm",onClick:w,children:c.size===f.length?"Deselect All":"Select All"})]}),i.jsx(re,{children:n?f.length===0?i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No unreconciled transactions for this account"}):i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{className:"w-12",children:"Clear"}),i.jsx(q,{children:"Date"}),i.jsx(q,{children:"Description"}),i.jsx(q,{children:"Reference"}),i.jsx(q,{children:"Type"}),i.jsx(q,{className:"text-right",children:"Amount"})]})}),i.jsx(Ut,{children:f.map(C=>i.jsxs(je,{className:c.has(C.id)?"bg-primary/5":"",children:[i.jsx(U,{children:i.jsx(Fre,{checked:c.has(C.id),onCheckedChange:()=>x(C.id)})}),i.jsx(U,{children:new Date(C.transaction_date).toLocaleDateString()}),i.jsx(U,{children:C.description||"-"}),i.jsx(U,{children:C.reference_number||"-"}),i.jsx(U,{children:i.jsx(Ve,{variant:C.transaction_type==="deposit"?"secondary":"outline",children:C.transaction_type})}),i.jsxs(U,{className:`text-right font-medium ${C.transaction_type==="deposit"?"text-green-600":"text-red-600"}`,children:[C.transaction_type==="deposit"?"+":"-",b(C.amount)]})]},C.id))})]}):i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Select a bank account to view transactions"})})]})]})]})},Bet=()=>{const{user:t}=ht(),e=tn(),[n,r]=_.useState(""),[s,a]=_.useState(!1),[o,l]=_.useState(!1),[c,u]=_.useState({name:"",email:"",phone:"",specialty:"",hourly_rate:0,daily_rate:0,tpin:"",bank_name:"",bank_account_number:""}),[d,h]=_.useState({contractor_id:"",project_name:"",description:"",work_date:new Date().toISOString().split("T")[0],hours_worked:0,hourly_rate:0}),{data:f}=Ee({queryKey:["time-tracking-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const g=await Be.getPrimaryMembershipByUser(t.id);return(g==null?void 0:g.companyId)??null},enabled:!!t}),{data:m=[],isLoading:y}=Ee({queryKey:["contractors",f],queryFn:async()=>{if(!f)return[];const g=we(se,Q.CONTRACTORS);return(await Ce(Te(g,he("companyId","==",f)))).docs.map(E=>{const A=E.data();return{id:E.id,name:String(A.name??""),email:A.email??null,phone:A.phone??null,specialty:A.specialty??null,hourly_rate:Number(A.hourlyRate??A.hourly_rate??0),daily_rate:Number(A.dailyRate??A.daily_rate??0),tpin:A.tpin??null,bank_name:A.bankName??A.bank_name??null,bank_account_number:A.bankAccountNumber??A.bank_account_number??null,is_active:!!(A.isActive??A.is_active??!0)}}).sort((E,A)=>E.name.localeCompare(A.name))},enabled:!!f}),{data:p=[],isLoading:v}=Ee({queryKey:["time-entries",f],queryFn:async()=>{if(!f)return[];const[g,T]=await Promise.all([Ce(Te(we(se,Q.TIME_ENTRIES),he("companyId","==",f))),Ce(Te(we(se,Q.CONTRACTORS),he("companyId","==",f)))]),E=new Map;return T.docs.forEach(A=>{const I=A.data();E.set(A.id,String(I.name??""))}),g.docs.map(A=>{var B;const I=A.data(),k=I.workDate??I.work_date,L=typeof k=="string"?k:((B=k==null?void 0:k.toDate)==null?void 0:B.call(k).toISOString().slice(0,10))??"",V=I.contractorId??I.contractor_id??null;return{id:A.id,contractor_id:V,employee_id:I.employeeId??I.employee_id??null,project_name:I.projectName??I.project_name??null,description:I.description??null,work_date:L,hours_worked:Number(I.hoursWorked??I.hours_worked??0),hourly_rate:Number(I.hourlyRate??I.hourly_rate??0),total_amount:Number(I.totalAmount??I.total_amount??0),status:I.status??"pending",contractor:V?{name:E.get(V)||"-"}:void 0}}).sort((A,I)=>I.work_date.localeCompare(A.work_date))},enabled:!!f}),b=Xe({mutationFn:async g=>{if(!f||!t)throw new Error("No active company context");await es(we(se,Q.CONTRACTORS),{companyId:f,name:g.name,email:g.email||null,phone:g.phone||null,specialty:g.specialty||null,hourlyRate:g.hourly_rate,dailyRate:g.daily_rate,tpin:g.tpin||null,bankName:g.bank_name||null,bankAccountNumber:g.bank_account_number||null,isActive:!0,createdBy:t.id,createdAt:Re(),updatedAt:Re()})},onSuccess:()=>{e.invalidateQueries({queryKey:["contractors",f]}),Y.success("Contractor added successfully"),a(!1),u({name:"",email:"",phone:"",specialty:"",hourly_rate:0,daily_rate:0,tpin:"",bank_name:"",bank_account_number:""})},onError:g=>{Y.error(g.message)}}),x=Xe({mutationFn:async g=>{if(!f||!t)throw new Error("No active company context");const T=g.hours_worked*g.hourly_rate;await es(we(se,Q.TIME_ENTRIES),{companyId:f,contractorId:g.contractor_id||null,projectName:g.project_name||null,description:g.description||null,workDate:g.work_date,hoursWorked:g.hours_worked,hourlyRate:g.hourly_rate,totalAmount:T,status:"pending",createdBy:t.id,createdAt:Re(),updatedAt:Re()})},onSuccess:()=>{e.invalidateQueries({queryKey:["time-entries",f]}),Y.success("Time entry recorded"),l(!1),h({contractor_id:"",project_name:"",description:"",work_date:new Date().toISOString().split("T")[0],hours_worked:0,hourly_rate:0})},onError:g=>{Y.error(g.message)}}),w=Xe({mutationFn:async({id:g,status:T})=>{await xr(Je(se,Q.TIME_ENTRIES,g),{status:T,updatedAt:Re()},{merge:!0})},onSuccess:()=>{e.invalidateQueries({queryKey:["time-entries",f]}),Y.success("Status updated")},onError:g=>{Y.error(g.message)}}),C=m.filter(g=>{var T;return g.name.toLowerCase().includes(n.toLowerCase())||((T=g.specialty)==null?void 0:T.toLowerCase().includes(n.toLowerCase()))}),S=g=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(g),P=p.filter(g=>g.status==="pending").reduce((g,T)=>g+T.total_amount,0),j=p.filter(g=>{const T=new Date(g.work_date),E=new Date;return T.getMonth()===E.getMonth()&&T.getFullYear()===E.getFullYear()}).reduce((g,T)=>g+T.hours_worked,0);return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Time & Contractors"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage contractors and track time entries"})]})}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Active Contractors"}),i.jsx(di,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:m.filter(g=>g.is_active).length})})]}),i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Hours This Month"}),i.jsx($i,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:j.toFixed(1)})})]}),i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Pending Entries"}),i.jsx($i,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:p.filter(g=>g.status==="pending").length})})]}),i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Pending Amount"}),i.jsx($i,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:S(P)})})]})]}),i.jsxs(m1,{defaultValue:"contractors",children:[i.jsxs(Nb,{children:[i.jsx(so,{value:"contractors",children:"Contractors"}),i.jsx(so,{value:"time-entries",children:"Time Entries"})]}),i.jsxs(io,{value:"contractors",className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"relative w-64",children:[i.jsx(Ds,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"Search contractors...",value:n,onChange:g=>r(g.target.value),className:"pl-8"})]}),i.jsxs(Jn,{open:s,onOpenChange:a,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(H,{children:[i.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Add Contractor"]})}),i.jsxs(Hn,{className:"max-w-2xl",children:[i.jsx(Kn,{children:i.jsx(Gn,{children:"Add Contractor"})}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Name *"}),i.jsx(G,{value:c.name,onChange:g=>u({...c,name:g.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Email"}),i.jsx(G,{type:"email",value:c.email,onChange:g=>u({...c,email:g.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Phone"}),i.jsx(G,{value:c.phone,onChange:g=>u({...c,phone:g.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Specialty"}),i.jsx(G,{value:c.specialty,onChange:g=>u({...c,specialty:g.target.value}),placeholder:"e.g., IT Consultant, Trainer"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Hourly Rate (ZMW)"}),i.jsx(G,{type:"number",step:"0.01",value:c.hourly_rate,onChange:g=>u({...c,hourly_rate:parseFloat(g.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Daily Rate (ZMW)"}),i.jsx(G,{type:"number",step:"0.01",value:c.daily_rate,onChange:g=>u({...c,daily_rate:parseFloat(g.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"TPIN"}),i.jsx(G,{value:c.tpin,onChange:g=>u({...c,tpin:g.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Bank Name"}),i.jsx(G,{value:c.bank_name,onChange:g=>u({...c,bank_name:g.target.value})})]}),i.jsxs("div",{className:"col-span-2 space-y-2",children:[i.jsx(ee,{children:"Bank Account Number"}),i.jsx(G,{value:c.bank_account_number,onChange:g=>u({...c,bank_account_number:g.target.value})})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(H,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),i.jsx(H,{onClick:()=>b.mutate(c),disabled:!c.name,children:"Add Contractor"})]})]})]})]}),i.jsx(X,{children:i.jsx(re,{className:"pt-6",children:y?i.jsx("p",{children:"Loading contractors..."}):C.length===0?i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No contractors found."}):i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Name"}),i.jsx(q,{children:"Specialty"}),i.jsx(q,{children:"Contact"}),i.jsx(q,{className:"text-right",children:"Hourly Rate"}),i.jsx(q,{className:"text-right",children:"Daily Rate"}),i.jsx(q,{children:"Status"})]})}),i.jsx(Ut,{children:C.map(g=>i.jsxs(je,{children:[i.jsx(U,{className:"font-medium",children:g.name}),i.jsx(U,{children:g.specialty||"-"}),i.jsx(U,{children:i.jsxs("div",{className:"text-sm",children:[g.email&&i.jsx("div",{children:g.email}),g.phone&&i.jsx("div",{children:g.phone})]})}),i.jsx(U,{className:"text-right",children:S(g.hourly_rate)}),i.jsx(U,{className:"text-right",children:S(g.daily_rate)}),i.jsx(U,{children:i.jsx(Ve,{variant:g.is_active?"secondary":"outline",children:g.is_active?"Active":"Inactive"})})]},g.id))})]})})})]}),i.jsxs(io,{value:"time-entries",className:"space-y-4",children:[i.jsx("div",{className:"flex justify-end",children:i.jsxs(Jn,{open:o,onOpenChange:l,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(H,{children:[i.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Record Time"]})}),i.jsxs(Hn,{children:[i.jsx(Kn,{children:i.jsx(Gn,{children:"Record Time Entry"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Contractor"}),i.jsxs(Tt,{value:d.contractor_id,onValueChange:g=>{const T=m.find(E=>E.id===g);h({...d,contractor_id:g,hourly_rate:(T==null?void 0:T.hourly_rate)||0})},children:[i.jsx(jt,{children:i.jsx(Ct,{placeholder:"Select contractor"})}),i.jsx(Nt,{children:m.filter(g=>g.is_active).map(g=>i.jsx(be,{value:g.id,children:g.name},g.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Project Name"}),i.jsx(G,{value:d.project_name,onChange:g=>h({...d,project_name:g.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Work Date"}),i.jsx(G,{type:"date",value:d.work_date,onChange:g=>h({...d,work_date:g.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Hours Worked"}),i.jsx(G,{type:"number",step:"0.5",value:d.hours_worked,onChange:g=>h({...d,hours_worked:parseFloat(g.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Hourly Rate (ZMW)"}),i.jsx(G,{type:"number",step:"0.01",value:d.hourly_rate,onChange:g=>h({...d,hourly_rate:parseFloat(g.target.value)||0})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Description"}),i.jsx(G,{value:d.description,onChange:g=>h({...d,description:g.target.value}),placeholder:"Work performed"})]}),i.jsx("div",{className:"pt-2 border-t",children:i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Total Amount:"}),i.jsx("span",{className:"font-bold",children:S(d.hours_worked*d.hourly_rate)})]})})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx(H,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),i.jsx(H,{onClick:()=>x.mutate(d),disabled:d.hours_worked<=0,children:"Record Entry"})]})]})]})}),i.jsx(X,{children:i.jsx(re,{className:"pt-6",children:v?i.jsx("p",{children:"Loading time entries..."}):p.length===0?i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No time entries found."}):i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Date"}),i.jsx(q,{children:"Contractor"}),i.jsx(q,{children:"Project"}),i.jsx(q,{className:"text-right",children:"Hours"}),i.jsx(q,{className:"text-right",children:"Rate"}),i.jsx(q,{className:"text-right",children:"Amount"}),i.jsx(q,{children:"Status"}),i.jsx(q,{children:"Actions"})]})}),i.jsx(Ut,{children:p.map(g=>{var T;return i.jsxs(je,{children:[i.jsx(U,{children:new Date(g.work_date).toLocaleDateString()}),i.jsx(U,{children:((T=g.contractor)==null?void 0:T.name)||"-"}),i.jsx(U,{children:g.project_name||"-"}),i.jsx(U,{className:"text-right",children:g.hours_worked}),i.jsx(U,{className:"text-right",children:S(g.hourly_rate)}),i.jsx(U,{className:"text-right font-medium",children:S(g.total_amount)}),i.jsx(U,{children:i.jsx(Ve,{variant:g.status==="paid"?"secondary":g.status==="approved"?"default":"outline",children:g.status})}),i.jsxs(U,{children:[g.status==="pending"&&i.jsx(H,{size:"sm",variant:"outline",onClick:()=>w.mutate({id:g.id,status:"approved"}),children:"Approve"}),g.status==="approved"&&i.jsx(H,{size:"sm",variant:"outline",onClick:()=>w.mutate({id:g.id,status:"paid"}),children:"Mark Paid"})]})]},g.id)})})]})})})]})]})]})},wf={super_admin:{label:"Super Admin",description:"Full system access, can manage all users and settings",color:"bg-red-500"},admin:{label:"Admin",description:"Can manage most settings and users",color:"bg-orange-500"},financial_manager:{label:"Financial Manager",description:"Oversees all financial operations and approvals",color:"bg-rose-500"},accountant:{label:"Accountant",description:"Full access to financial records, reports, and transactions",color:"bg-blue-500"},assistant_accountant:{label:"Assistant Accountant",description:"Assists with bookkeeping and data entry under supervision",color:"bg-sky-500"},finance_officer:{label:"Finance Officer",description:"Can manage invoices, bills, and expenses",color:"bg-cyan-500"},bookkeeper:{label:"Bookkeeper",description:"Can record transactions and reconcile accounts",color:"bg-teal-500"},cashier:{label:"Cashier",description:"Handles cash transactions and petty cash management",color:"bg-emerald-500"},inventory_manager:{label:"Inventory Manager",description:"Can manage inventory and stock movements",color:"bg-green-500"},hr_manager:{label:"HR Manager",description:"Can manage employees and payroll",color:"bg-purple-500"},project_manager:{label:"Project Manager",description:"Can manage projects and grants",color:"bg-indigo-500"},auditor:{label:"Auditor",description:"Read-only access to all financial records for auditing",color:"bg-yellow-500"},staff:{label:"Staff",description:"Basic access for regular employees",color:"bg-slate-500"},read_only:{label:"Read Only",description:"Can only view data, no editing permissions",color:"bg-gray-500"}},DA=["super_admin","admin","financial_manager","accountant","assistant_accountant","finance_officer","bookkeeper","cashier","inventory_manager","hr_manager","project_manager","auditor","staff","read_only"];function Uet(){const{user:t}=ht(),{data:e}=ei(),[n,r]=_.useState(!1),[s,a]=_.useState(""),[o,l]=_.useState(""),[c,u]=_.useState("finance_officer"),[d,h]=_.useState(null),{data:f}=Ee({queryKey:["primary-membership",t==null?void 0:t.uid],queryFn:()=>t?Be.getPrimaryMembershipByUser(t.uid):null,enabled:!!t}),m=f==null?void 0:f.companyId,y=tn(),{data:p,isLoading:v,error:b}=Ee({queryKey:["company-users",m],queryFn:async()=>m?Be.listCompanyUsers(m):[],enabled:!!m}),x=Xe({mutationFn:async({userId:E,newRole:A})=>{if(!m)throw new Error("No company ID found");await Be.updateUserRole({companyId:m,userId:E,newRole:A})},onSuccess:()=>{y.invalidateQueries({queryKey:["company-users",m]}),Y.success("User role updated successfully"),h(null)},onError:E=>{Y.error("Failed to update role: "+(E instanceof Error?E.message:"Unknown error"))}}),w=Xe({mutationFn:async E=>{if(!m)throw new Error("No company ID found");await Be.removeCompanyUser({companyId:m,userId:E})},onSuccess:()=>{y.invalidateQueries({queryKey:["company-users",m]}),Y.success("User removed successfully")},onError:E=>{Y.error("Failed to remove user: "+(E instanceof Error?E.message:"Unknown error"))}}),C=Xe({mutationFn:async({userId:E,action:A})=>{if(!m)throw new Error("No company ID found");A==="suspend"?await Be.suspendUser({companyId:m,userId:E}):await Be.reactivateUser({companyId:m,userId:E})},onSuccess:()=>{y.invalidateQueries({queryKey:["company-users",m]}),Y.success("User status updated successfully")},onError:E=>{Y.error("Failed to update status: "+(E instanceof Error?E.message:"Unknown error"))}}),S=Xe({mutationFn:async E=>{if(!m)throw new Error("No company ID found");await Be.revokeInvitation({companyId:m,invitationId:E})},onSuccess:()=>{y.invalidateQueries({queryKey:["company-users",m]}),Y.success("Invitation revoked")},onError:E=>{Y.error("Failed to revoke: "+(E instanceof Error?E.message:"Unknown error"))}}),P=Xe({mutationFn:async()=>{if(!s)throw new Error("Email is required");if(!m)throw new Error("No company ID found");await Ps.sendInvitation({email:s,role:c,inviteeName:o,companyId:m,loginUrl:`${window.location.origin}/auth`})},onSuccess:()=>{Y.success("Invitation sent successfully"),a(""),l(""),u("finance_officer"),r(!1)},onError:E=>{Y.error("Failed to send invite: "+(E instanceof Error?E.message:"Unknown error"))}}),j=e==="super_admin"||e==="admin",g=E=>{const A=wf[E];return i.jsx(Ve,{className:`${A.color} text-white hover:${A.color}`,children:A.label})},T=E=>E.fullName||E.email||E.userId||"Unknown User";return!t||!m&&!v?i.jsx("div",{className:"flex items-center justify-center py-20",children:i.jsx(mn,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Users & Roles"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage user access and permissions like QuickBooks"})]}),j&&i.jsxs(Jn,{open:n,onOpenChange:r,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(H,{children:[i.jsx(ole,{className:"mr-2 h-4 w-4"}),"Invite User"]})}),i.jsxs(Hn,{children:[i.jsxs(Kn,{children:[i.jsx(Gn,{children:"Invite New User"}),i.jsx(dd,{children:"Send an invitation to a new user with a specific role"})]}),i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"name",children:"Full Name"}),i.jsx(G,{id:"name",type:"text",placeholder:"Jane Doe",value:o,onChange:E=>l(E.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"email",children:"Email Address"}),i.jsx(G,{id:"email",type:"email",placeholder:"user@example.com",value:s,onChange:E=>a(E.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"role",children:"Role"}),i.jsxs(Tt,{value:c,onValueChange:E=>u(E),children:[i.jsx(jt,{children:i.jsx(Ct,{})}),i.jsx(Nt,{children:DA.map(E=>i.jsx(be,{value:E,children:i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("span",{children:wf[E].label})})},E))})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:wf[c].description})]})]}),i.jsxs(p1,{children:[i.jsx(H,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),i.jsx(H,{onClick:()=>P.mutate(),disabled:P.isPending,children:P.isPending?i.jsxs(i.Fragment,{children:[i.jsx(mn,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):"Send Invitation"})]})]})]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Total Users"}),i.jsx(di,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:(p==null?void 0:p.length)||0})})]}),i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Admins"}),i.jsx(vh,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:(p==null?void 0:p.filter(E=>E.role==="super_admin"||E.role==="admin").length)||0})})]}),i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Accountants"}),i.jsx(di,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:(p==null?void 0:p.filter(E=>["accountant","finance_officer","bookkeeper"].includes(E.role)).length)||0})})]}),i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Your Role"}),i.jsx(vh,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:e&&g(e)})]})]}),i.jsxs(X,{children:[i.jsxs(te,{children:[i.jsx(ne,{children:"All Users"}),i.jsx(pt,{children:"Manage user roles and permissions across your organization"})]}),i.jsx(re,{children:v?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx(mn,{className:"h-8 w-8 animate-spin text-primary"})}):b?i.jsx("div",{className:"p-4 text-red-500 text-center",children:"Failed to load users. Please try again."}):i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"User"}),i.jsx(q,{children:"Role"}),i.jsx(q,{children:"Status"}),i.jsx(q,{children:"Added"}),j&&i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ut,{children:[p==null?void 0:p.map(E=>i.jsxs(je,{children:[i.jsx(U,{children:i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"font-medium",children:T(E)}),E.email&&i.jsx("span",{className:"text-sm text-muted-foreground",children:E.email}),E.status==="invited"&&i.jsx("span",{className:"text-xs text-amber-500 font-mono",children:"Invitation Pending"})]})}),i.jsx(U,{children:(d==null?void 0:d.id)===E.id&&E.status!=="invited"?i.jsxs(Tt,{value:d.role,onValueChange:A=>h({...d,role:A}),children:[i.jsx(jt,{className:"w-48",children:i.jsx(Ct,{})}),i.jsx(Nt,{children:DA.map(A=>i.jsx(be,{value:A,children:wf[A].label},A))})]}):i.jsxs("div",{className:"space-y-1",children:[g(E.role),i.jsx("p",{className:"text-xs text-muted-foreground",children:wf[E.role].description})]})}),i.jsx(U,{children:i.jsx(Ve,{variant:E.status==="active"?"default":E.status==="invited"?"outline":"destructive",children:E.status==="invited"?"Pending":E.status})}),i.jsx(U,{children:E.createdAt?new Date(E.createdAt).toLocaleDateString():"-"}),j&&i.jsx(U,{className:"text-right",children:(d==null?void 0:d.id)===E.id?i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{size:"sm",onClick:()=>x.mutate({userId:E.userId,newRole:d.role}),disabled:x.isPending,children:x.isPending?i.jsx(mn,{className:"h-4 w-4 animate-spin"}):"Save"}),i.jsx(H,{size:"sm",variant:"outline",onClick:()=>h(null),children:"Cancel"})]}):i.jsx("div",{className:"flex justify-end gap-2",children:E.status==="invited"?i.jsx(H,{size:"sm",variant:"destructive",onClick:()=>{confirm("Revoke this invitation? The link will no longer work.")&&S.mutate(E.id)},disabled:S.isPending,children:"Revoke"}):i.jsxs(i.Fragment,{children:[i.jsx(H,{size:"sm",variant:"outline",onClick:()=>h(E),children:i.jsx(rle,{className:"h-4 w-4"})}),E.status==="suspended"?i.jsx(H,{size:"sm",variant:"outline",className:"text-green-600 hover:text-green-700 hover:bg-green-50",onClick:()=>C.mutate({userId:E.userId,action:"reactivate"}),disabled:C.isPending,children:"Activate"}):i.jsx(H,{size:"sm",variant:"outline",className:"text-orange-600 hover:text-orange-700 hover:bg-orange-50",onClick:()=>{confirm("Suspend this user? They will lose access immediately.")&&C.mutate({userId:E.userId,action:"suspend"})},disabled:C.isPending||E.role==="super_admin",children:"Suspend"}),i.jsx(H,{size:"sm",variant:"destructive",onClick:()=>{confirm("Permanently remove this user? This cannot be undone.")&&w.mutate(E.userId)},disabled:E.role==="super_admin"||w.isPending,children:i.jsx(Ms,{className:"h-4 w-4"})})]})})})]},E.id)),(!p||p.length===0)&&i.jsx(je,{children:i.jsx(U,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No users found"})})]})]})})]}),i.jsxs(X,{children:[i.jsxs(te,{children:[i.jsx(ne,{children:"Role Permissions Reference"}),i.jsx(pt,{children:"Understanding what each role can access"})]}),i.jsx(re,{children:i.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:DA.map(E=>i.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border",children:[g(E),i.jsx("div",{children:i.jsx("p",{className:"text-sm text-muted-foreground",children:wf[E].description})})]},E))})})]})]})}const X6={in_progress:{label:"In Progress",dotClass:"bg-warning",badgeClass:"border-warning/30 bg-warning/15 text-warning"},behind:{label:"Behind",dotClass:"bg-destructive",badgeClass:"border-destructive/30 bg-destructive/10 text-destructive"},on_track:{label:"On Track",dotClass:"bg-success",badgeClass:"border-success/30 bg-success/10 text-success"},completed:{label:"Completed",dotClass:"bg-sky-600",badgeClass:"border-sky-300 bg-sky-50 text-sky-700"}};function zet(){const{user:t}=ht(),{data:e}=ei(),n=e==="super_admin"||e==="admin",r=tn(),[s,a]=_.useState(!1),[o,l]=_.useState(null),[c,u]=_.useState({name:"",code:"",description:"",status:"active",start_date:"",end_date:"",budget:"",donor_name:"",grant_reference:"",current_phase:"Initiation"}),d=A=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(A),{data:h}=Ee({queryKey:["projects-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const A=await Be.getPrimaryMembershipByUser(t.id);return(A==null?void 0:A.companyId)??null},enabled:!!t}),{data:f=[],isLoading:m}=Ee({queryKey:["projects",h],queryFn:async()=>{if(!h)return[];const A=we(se,Q.PROJECTS);return(await Ce(Te(A,he("companyId","==",h)))).docs.map(k=>{var M;const L=k.data(),V=L.createdAt??L.created_at,B=typeof V=="string"?V:((M=V==null?void 0:V.toDate)==null?void 0:M.call(V).toISOString())??new Date().toISOString();return{id:k.id,name:String(L.name??""),code:L.code??null,description:L.description??null,status:L.status??"active",start_date:L.startDate??L.start_date??null,end_date:L.endDate??L.end_date??null,budget:Number(L.budget??0),spent:Number(L.spent??0),donor_name:L.donorName??L.donor_name??null,grant_reference:L.grantReference??L.grant_reference??null,current_phase:L.currentPhase??L.current_phase??null,created_by:L.createdBy??L.created_by??null,created_at:B}}).sort((k,L)=>L.created_at.localeCompare(k.created_at))},enabled:!!h,refetchInterval:2e4}),{data:y=[]}=Ee({queryKey:["project-activity-logs",h],queryFn:async()=>h?Nl.listByCompany(h,{limitCount:3e3}):[],enabled:!!h,refetchInterval:15e3}),p=_.useMemo(()=>LTe(f,y),[f,y]),v=Xe({mutationFn:async A=>{if(!h||!t)throw new Error("No active company context");const I=await es(we(se,Q.PROJECTS),{companyId:h,name:A.name,code:A.code||null,description:A.description||null,status:A.status,currentPhase:A.current_phase||"Initiation",startDate:A.start_date||null,endDate:A.end_date||null,budget:A.budget?Number.parseFloat(A.budget):0,spent:0,donorName:A.donor_name||null,grantReference:A.grant_reference||null,createdBy:t.id,createdAt:Re(),updatedAt:Re()});await Nl.create({companyId:h,projectId:I.id,activity:"Project Created",description:`${A.name} workspace created`,source:"Projects Dashboard",sourceType:Q.PROJECTS,sourceId:I.id,phase:A.current_phase||"Initiation",status:"pending",approvalStatus:"pending",appliedToSection:"Project Setup",implemented:!1,createdBy:t.id})},onSuccess:()=>{r.invalidateQueries({queryKey:["projects",h]}),r.invalidateQueries({queryKey:["project-activity-logs",h]}),Y.success("Project created successfully"),w()},onError:A=>{Y.error("Failed to create project: "+A.message)}}),b=Xe({mutationFn:async({id:A,data:I})=>{if(!h||!t)throw new Error("No active company context");await xr(Je(se,Q.PROJECTS,A),{name:I.name,code:I.code||null,description:I.description||null,status:I.status,currentPhase:I.current_phase||"Initiation",startDate:I.start_date||null,endDate:I.end_date||null,budget:I.budget?Number.parseFloat(I.budget):0,donorName:I.donor_name||null,grantReference:I.grant_reference||null,updatedAt:Re()},{merge:!0}),await Nl.create({companyId:h,projectId:A,activity:"Project Updated",description:`${I.name} details updated`,source:"Projects Dashboard",sourceType:Q.PROJECTS,sourceId:A,phase:I.current_phase||"Initiation",status:I.status==="completed"?"completed":"implemented",approvalStatus:I.status==="completed"?"approved":null,appliedToSection:"Project Plan",milestoneName:I.status==="completed"?"Project Completion":null,milestoneAchieved:I.status==="completed",implemented:!0,createdBy:t.id})},onSuccess:()=>{r.invalidateQueries({queryKey:["projects",h]}),r.invalidateQueries({queryKey:["project-activity-logs",h]}),Y.success("Project updated successfully"),w()},onError:A=>{Y.error("Failed to update project: "+A.message)}}),x=Xe({mutationFn:async A=>{if(!h||!t)throw new Error("No active company context");if(!n)throw new Error("Only Admin users can delete projects.");await Nl.create({companyId:h,projectId:A.id,activity:"Project Removed",description:`${A.name} was removed from active projects`,source:"Projects Dashboard",sourceType:Q.PROJECTS,sourceId:A.id,phase:A.current_phase,status:"implemented",appliedToSection:"Project Setup",implemented:!0,createdBy:t.id}),await Gl(Je(se,Q.PROJECTS,A.id))},onSuccess:()=>{r.invalidateQueries({queryKey:["projects",h]}),r.invalidateQueries({queryKey:["project-activity-logs",h]}),Y.success("Project deleted successfully")},onError:A=>{Y.error("Failed to delete project: "+A.message)}}),w=()=>{u({name:"",code:"",description:"",status:"active",start_date:"",end_date:"",budget:"",donor_name:"",grant_reference:"",current_phase:"Initiation"}),l(null),a(!1)},C=A=>{var I;l(A),u({name:A.name,code:A.code||"",description:A.description||"",status:A.status||"active",start_date:A.start_date||"",end_date:A.end_date||"",budget:((I=A.budget)==null?void 0:I.toString())||"",donor_name:A.donor_name||"",grant_reference:A.grant_reference||"",current_phase:A.current_phase||"Initiation"}),a(!0)},S=A=>{if(A.preventDefault(),o){b.mutate({id:o.id,data:c});return}v.mutate(c)},P=()=>{if(f.length===0)return;const A=["Project Code","Name","Donor","Grant Reference","Status","Current Phase","Completion","Progress Status","Start Date","End Date","Budget","Spent","Remaining"],I=f.map(M=>{const $=p.get(M.id);return[M.code||"",M.name,M.donor_name||"",M.grant_reference||"",M.status||"",($==null?void 0:$.currentPhase)||M.current_phase||"Initiation",`${($==null?void 0:$.completion)??0}%`,$?X6[$.status].label:"In Progress",M.start_date||"",M.end_date||"",M.budget||0,M.spent||0,(M.budget||0)-(M.spent||0)]}),k=[A,...I].map(M=>M.map($=>`"${String($).replaceAll('"','""')}"`).join(",")).join(`
`),L=new Blob([k],{type:"text/csv"}),V=window.URL.createObjectURL(L),B=document.createElement("a");B.href=V,B.download="projects-grants.csv",B.click(),window.URL.revokeObjectURL(V)},j=f.reduce((A,I)=>A+(I.budget||0),0),g=f.reduce((A,I)=>A+(I.spent||0),0),T=f.filter(A=>A.status==="active").length,E=f.length?Math.round(f.reduce((A,I)=>{var k;return A+(((k=p.get(I.id))==null?void 0:k.completion)||0)},0)/f.length):0;return m?i.jsx("div",{className:"flex h-64 items-center justify-center",children:"Loading..."}):i.jsxs("div",{className:"w-full space-y-6",children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Projects & Grants"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage donor-funded projects and track real-time progression"})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsxs(H,{variant:"outline",onClick:P,disabled:f.length===0,children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export CSV"]}),i.jsxs(Jn,{open:s,onOpenChange:a,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(H,{onClick:()=>{w(),a(!0)},children:[i.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Add Project"]})}),i.jsxs(Hn,{className:"max-w-2xl",children:[i.jsx(Kn,{children:i.jsx(Gn,{children:o?"Edit Project":"Add New Project"})}),i.jsxs("form",{onSubmit:S,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Project Name *"}),i.jsx(G,{value:c.name,onChange:A=>u({...c,name:A.target.value}),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Project Code"}),i.jsx(G,{value:c.code,onChange:A=>u({...c,code:A.target.value}),placeholder:"e.g., PRJ-001"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Description"}),i.jsx(Zn,{value:c.description,onChange:A=>u({...c,description:A.target.value}),rows:3})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Donor Name"}),i.jsx(G,{value:c.donor_name,onChange:A=>u({...c,donor_name:A.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Grant Reference"}),i.jsx(G,{value:c.grant_reference,onChange:A=>u({...c,grant_reference:A.target.value})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Status"}),i.jsxs(Tt,{value:c.status,onValueChange:A=>u({...c,status:A}),children:[i.jsx(jt,{children:i.jsx(Ct,{})}),i.jsxs(Nt,{children:[i.jsx(be,{value:"active",children:"Active"}),i.jsx(be,{value:"completed",children:"Completed"}),i.jsx(be,{value:"on_hold",children:"On Hold"}),i.jsx(be,{value:"cancelled",children:"Cancelled"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Current Phase"}),i.jsxs(Tt,{value:c.current_phase,onValueChange:A=>u({...c,current_phase:A}),children:[i.jsx(jt,{children:i.jsx(Ct,{})}),i.jsx(Nt,{children:ITe.map(A=>i.jsx(be,{value:A,children:A},A))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Budget (ZMW)"}),i.jsx(G,{type:"number",step:"0.01",value:c.budget,onChange:A=>u({...c,budget:A.target.value})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Start Date"}),i.jsx(G,{type:"date",value:c.start_date,onChange:A=>u({...c,start_date:A.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"End Date"}),i.jsx(G,{type:"date",value:c.end_date,onChange:A=>u({...c,end_date:A.target.value})})]})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{type:"button",variant:"outline",onClick:w,children:"Cancel"}),i.jsxs(H,{type:"submit",children:[o?"Update":"Create"," Project"]})]})]})]})]})]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(X,{children:[i.jsx(te,{className:"pb-2",children:i.jsxs(ne,{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx(o8,{className:"h-4 w-4"}),"Total Projects"]})}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:f.length}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[T," active"]})]})]}),i.jsxs(X,{children:[i.jsx(te,{className:"pb-2",children:i.jsxs(ne,{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx(Xn,{className:"h-4 w-4"}),"Average Completion"]})}),i.jsxs(re,{children:[i.jsxs("div",{className:"text-2xl font-bold",children:[E,"%"]}),i.jsx(Su,{value:E,className:"mt-2 h-2"})]})]}),i.jsxs(X,{children:[i.jsx(te,{className:"pb-2",children:i.jsxs(ne,{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx(Xn,{className:"h-4 w-4"}),"Total Budget"]})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:d(j)})})]}),i.jsxs(X,{children:[i.jsx(te,{className:"pb-2",children:i.jsxs(ne,{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx(Xn,{className:"h-4 w-4"}),"Remaining"]})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:d(j-g)})})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"All Projects"})}),i.jsx(re,{children:i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs(Vt,{className:"min-w-[1320px]",children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Code"}),i.jsx(q,{children:"Name"}),i.jsx(q,{children:"Donor"}),i.jsx(q,{children:"Current Phase"}),i.jsx(q,{children:"Progress"}),i.jsx(q,{children:"Indicator"}),i.jsx(q,{children:"Period"}),i.jsx(q,{className:"text-right",children:"Budget"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsx(Ut,{children:f.length===0?i.jsx(je,{children:i.jsx(U,{colSpan:9,className:"py-10 text-center text-muted-foreground",children:"No projects found. Create your first project to get started."})}):f.map(A=>{const I=p.get(A.id)??{completion:0,currentPhase:A.current_phase||"Initiation",status:"in_progress",metrics:{completedActivities:0,totalActivities:0,approvedSections:0,totalSections:0,milestonesAchieved:0,totalMilestones:0,pendingCount:0,implementedCount:0}},k=X6[I.status];return i.jsxs(je,{children:[i.jsx(U,{className:"font-mono",children:A.code||"-"}),i.jsx(U,{children:i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"font-medium",children:A.name}),i.jsx("p",{className:"max-w-[240px] truncate text-xs text-muted-foreground",children:A.description||"No description"})]})}),i.jsx(U,{children:A.donor_name||"-"}),i.jsx(U,{children:i.jsx(Ve,{variant:"outline",className:"font-medium",children:I.currentPhase})}),i.jsx(U,{children:i.jsxs("div",{className:"w-[240px] space-y-1.5",children:[i.jsxs("div",{className:"flex items-center justify-between text-xs",children:[i.jsxs("span",{className:"font-medium",children:[I.completion,"%"]}),i.jsxs("span",{className:"text-muted-foreground",children:[I.metrics.completedActivities,"/",Math.max(I.metrics.totalActivities,I.metrics.completedActivities)," done"]})]}),i.jsx(Su,{value:I.completion,className:"h-2"}),i.jsxs("p",{className:"text-[11px] text-muted-foreground",children:[I.metrics.implementedCount," implemented  ",I.metrics.pendingCount," pending  ",I.metrics.milestonesAchieved,"/",Math.max(I.metrics.totalMilestones,I.metrics.milestonesAchieved)," milestones"]})]})}),i.jsx(U,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`h-2.5 w-2.5 rounded-full ${k.dotClass}`}),i.jsx(Ve,{variant:"outline",className:k.badgeClass,children:k.label})]})}),i.jsx(U,{children:A.start_date&&A.end_date?`${mt(new Date(A.start_date),"MMM yyyy")} - ${mt(new Date(A.end_date),"MMM yyyy")}`:"-"}),i.jsx(U,{className:"text-right",children:d(A.budget||0)}),i.jsx(U,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-1",children:[i.jsx(Ii,{to:`/projects/${A.id}/expenses`,children:i.jsx(H,{variant:"ghost",size:"icon",title:"View Expenses",children:i.jsx(Fx,{className:"h-4 w-4"})})}),i.jsx(Ii,{to:`/projects/${A.id}/activity-log`,children:i.jsx(H,{variant:"ghost",size:"icon",title:"View Activity Log",children:i.jsx(Cu,{className:"h-4 w-4"})})}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>C(A),title:"Edit Project",children:i.jsx(Mp,{className:"h-4 w-4"})}),n&&i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>x.mutate(A),title:"Delete Project",children:i.jsx(Ms,{className:"h-4 w-4"})})]})})]},A.id)})})]})})})]})]})}const Z6=t=>ve("h-9 gap-2 px-3 text-xs sm:text-sm",t?"bg-warning/15 text-warning hover:bg-warning/20":"text-muted-foreground hover:text-foreground");function Vre({projectId:t,projectName:e,subtitle:n,activeTab:r,actions:s}){const a=t?`/projects/${t}/expenses`:"/projects",o=t?`/projects/${t}/activity-log`:"/projects";return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex min-w-0 flex-1 items-start gap-3",children:[i.jsx(Ii,{to:"/projects",children:i.jsx(H,{variant:"ghost",size:"icon",className:"h-9 w-9",children:i.jsx(pa,{className:"h-4 w-4"})})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("h1",{className:"truncate text-2xl font-bold tracking-tight sm:text-3xl",children:e||"Project Workspace"}),n&&i.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:n})]})]}),s&&i.jsx("div",{className:"flex flex-wrap items-center gap-2",children:s})]}),i.jsxs("div",{className:"inline-flex flex-wrap items-center gap-1 rounded-xl border bg-card p-1",children:[i.jsx(Ii,{to:a,children:i.jsxs(H,{type:"button",variant:r==="expenses"?"secondary":"ghost",className:Z6(r==="expenses"),children:[i.jsx(Fx,{className:"h-4 w-4"}),"Expenses"]})}),i.jsx(Ii,{to:o,children:i.jsxs(H,{type:"button",variant:r==="activity-log"?"secondary":"ghost",className:Z6(r==="activity-log"),title:"Project Activity Log",children:[i.jsx(Cu,{className:"h-4 w-4"}),"Activity Log"]})})]})]})}const qet=["Personnel","Equipment","Travel","Supplies","Training","Consultancy","Utilities","Communications","Other"];function Wet(){const{user:t}=ht(),{projectId:e}=Hh(),n=tn(),[r,s]=_.useState(!1),[a,o]=_.useState(null),[l,c]=_.useState({description:"",amount:"",expense_date:new Date().toISOString().split("T")[0],category:"",notes:""}),u=g=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(g),{data:d}=Ee({queryKey:["project-expenses-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const g=await Be.getPrimaryMembershipByUser(t.id);return(g==null?void 0:g.companyId)??null},enabled:!!t}),{data:h}=Ee({queryKey:["project",d,e],queryFn:async()=>{if(!e||!d)return null;const g=await bi(Je(se,Q.PROJECTS,e));if(!g.exists())return null;const T=g.data();return String(T.companyId??"")!==d?null:{id:g.id,name:String(T.name??""),budget:Number(T.budget??0),spent:Number(T.spent??0),status:T.status??null,currentPhase:T.currentPhase??T.current_phase??null}},enabled:!!(e&&d)}),{data:f=[],isLoading:m}=Ee({queryKey:["project-expenses",d,e],queryFn:async()=>{if(!e||!d)return[];const g=we(se,Q.PROJECT_EXPENSES);return(await Ce(Te(g,he("companyId","==",d),he("projectId","==",e)))).docs.map(E=>{var L;const A=E.data(),I=A.expenseDate??A.expense_date,k=typeof I=="string"?I:((L=I==null?void 0:I.toDate)==null?void 0:L.call(I).toISOString().slice(0,10))??new Date().toISOString().slice(0,10);return{id:E.id,description:String(A.description??""),amount:Number(A.amount??0),expense_date:k,category:A.category??null,notes:A.notes??null}}).sort((E,A)=>A.expense_date.localeCompare(E.expense_date))},enabled:!!(e&&d)}),y=async()=>{if(!e||!d)return;const g=we(se,Q.PROJECT_EXPENSES),E=(await Ce(Te(g,he("companyId","==",d),he("projectId","==",e)))).docs.reduce((A,I)=>A+Number(I.data().amount??0),0);await xr(Je(se,Q.PROJECTS,e),{spent:E,updatedAt:Re()},{merge:!0})},p=()=>{n.invalidateQueries({queryKey:["project-expenses",d,e]}),n.invalidateQueries({queryKey:["project",d,e]}),n.invalidateQueries({queryKey:["projects",d]}),n.invalidateQueries({queryKey:["project-activity-log",d,e]}),n.invalidateQueries({queryKey:["project-activity-logs",d]})},v=Xe({mutationFn:async g=>{if(!e||!d||!t)throw new Error("No active company context");const T=Number.parseFloat(g.amount),E=await es(we(se,Q.PROJECT_EXPENSES),{companyId:d,projectId:e,userId:t.id,description:g.description,amount:T,expenseDate:g.expense_date,category:g.category||null,notes:g.notes||null,createdAt:Re(),updatedAt:Re()});await y(),await Nl.create({companyId:d,projectId:e,activity:"Expense Added",description:`${g.description} recorded (${u(T)})`,source:"Project Expenses",sourceType:Q.PROJECT_EXPENSES,sourceId:E.id,phase:h==null?void 0:h.currentPhase,status:"implemented",approvalStatus:"approved",appliedToSection:"Budget & Expenses",implemented:!0,createdBy:t.id,metadata:{category:g.category||null,expenseDate:g.expense_date}})},onSuccess:()=>{p(),Y.success("Expense added successfully"),w()},onError:g=>{Y.error("Failed to add expense: "+g.message)}}),b=Xe({mutationFn:async({expense:g,data:T})=>{if(!d||!e||!t)throw new Error("No active company context");const E=Number.parseFloat(T.amount);await xr(Je(se,Q.PROJECT_EXPENSES,g.id),{description:T.description,amount:E,expenseDate:T.expense_date,category:T.category||null,notes:T.notes||null,updatedAt:Re()},{merge:!0}),await y(),await Nl.create({companyId:d,projectId:e,activity:"Expense Updated",description:`${T.description} updated (${u(E)})`,source:"Project Expenses",sourceType:Q.PROJECT_EXPENSES,sourceId:g.id,phase:h==null?void 0:h.currentPhase,status:"implemented",approvalStatus:"approved",appliedToSection:"Budget & Expenses",implemented:!0,createdBy:t.id,metadata:{previousAmount:g.amount,previousDate:g.expense_date}})},onSuccess:()=>{p(),Y.success("Expense updated successfully"),w()},onError:g=>{Y.error("Failed to update expense: "+g.message)}}),x=Xe({mutationFn:async g=>{if(!d||!e||!t)throw new Error("No active company context");await Gl(Je(se,Q.PROJECT_EXPENSES,g.id)),await y(),await Nl.create({companyId:d,projectId:e,activity:"Expense Removed",description:`${g.description} removed (${u(g.amount)})`,source:"Project Expenses",sourceType:Q.PROJECT_EXPENSES,sourceId:g.id,phase:h==null?void 0:h.currentPhase,status:"implemented",approvalStatus:"approved",appliedToSection:"Budget & Expenses",implemented:!0,createdBy:t.id})},onSuccess:()=>{p(),Y.success("Expense deleted successfully")},onError:g=>{Y.error("Failed to delete expense: "+g.message)}}),w=()=>{c({description:"",amount:"",expense_date:new Date().toISOString().split("T")[0],category:"",notes:""}),o(null),s(!1)},C=g=>{o(g),c({description:g.description,amount:g.amount.toString(),expense_date:g.expense_date,category:g.category||"",notes:g.notes||""}),s(!0)},S=g=>{if(g.preventDefault(),a){b.mutate({expense:a,data:l});return}v.mutate(l)},P=()=>{rf(f,[{header:"Date",key:"expense_date"},{header:"Description",key:"description"},{header:"Category",key:"category"},{header:"Amount",key:"amount"},{header:"Notes",key:"notes"}],`${(h==null?void 0:h.name)||"project"}-expenses`)},j=f.reduce((g,T)=>g+Number(T.amount),0);return m?i.jsx("div",{className:"flex h-64 items-center justify-center",children:"Loading..."}):i.jsxs("div",{className:"w-full space-y-6",children:[i.jsx(Vre,{projectId:e,projectName:h?`${h.name} - Expenses`:"Project Expenses",subtitle:[`Budget: ${u((h==null?void 0:h.budget)||0)}`,`Spent: ${u(j)}`,`Remaining: ${u(((h==null?void 0:h.budget)||0)-j)}`].join(" | "),activeTab:"expenses",actions:i.jsxs(i.Fragment,{children:[i.jsxs(H,{variant:"outline",onClick:P,disabled:f.length===0,children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export"]}),i.jsxs(Jn,{open:r,onOpenChange:s,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(H,{onClick:()=>{w(),s(!0)},children:[i.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Add Expense"]})}),i.jsxs(Hn,{children:[i.jsx(Kn,{children:i.jsx(Gn,{children:a?"Edit Expense":"Add Expense"})}),i.jsxs("form",{onSubmit:S,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Description *"}),i.jsx(G,{value:l.description,onChange:g=>c({...l,description:g.target.value}),required:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Amount (ZMW) *"}),i.jsx(G,{type:"number",step:"0.01",value:l.amount,onChange:g=>c({...l,amount:g.target.value}),required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Date *"}),i.jsx(G,{type:"date",value:l.expense_date,onChange:g=>c({...l,expense_date:g.target.value}),required:!0})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Category"}),i.jsxs(Tt,{value:l.category,onValueChange:g=>c({...l,category:g}),children:[i.jsx(jt,{children:i.jsx(Ct,{placeholder:"Select category"})}),i.jsx(Nt,{children:qet.map(g=>i.jsx(be,{value:g,children:g},g))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Notes"}),i.jsx(Zn,{value:l.notes,onChange:g=>c({...l,notes:g.target.value}),rows:2})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{type:"button",variant:"outline",onClick:w,children:"Cancel"}),i.jsxs(H,{type:"submit",children:[a?"Update":"Add"," Expense"]})]})]})]})]})]})}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[i.jsxs(X,{children:[i.jsx(te,{className:"pb-2",children:i.jsxs(ne,{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx(Xn,{className:"h-4 w-4"}),"Total Budget"]})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:u((h==null?void 0:h.budget)||0)})})]}),i.jsxs(X,{children:[i.jsx(te,{className:"pb-2",children:i.jsxs(ne,{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx(Xn,{className:"h-4 w-4"}),"Total Spent"]})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:u(j)})})]}),i.jsxs(X,{children:[i.jsx(te,{className:"pb-2",children:i.jsxs(ne,{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx(Xn,{className:"h-4 w-4"}),"Remaining"]})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:u(((h==null?void 0:h.budget)||0)-j)})})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"Expense Records"})}),i.jsx(re,{children:i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs(Vt,{className:"min-w-[760px]",children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Date"}),i.jsx(q,{children:"Description"}),i.jsx(q,{children:"Category"}),i.jsx(q,{className:"text-right",children:"Amount"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsx(Ut,{children:f.length===0?i.jsx(je,{children:i.jsx(U,{colSpan:5,className:"py-8 text-center text-muted-foreground",children:"No expenses recorded yet"})}):f.map(g=>i.jsxs(je,{children:[i.jsx(U,{children:mt(new Date(g.expense_date),"dd MMM yyyy")}),i.jsx(U,{className:"max-w-[280px] truncate",children:g.description}),i.jsx(U,{children:g.category||"-"}),i.jsx(U,{className:"text-right",children:u(Number(g.amount))}),i.jsx(U,{className:"text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>C(g),children:i.jsx(Mp,{className:"h-4 w-4"})}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>x.mutate(g),children:i.jsx(Ms,{className:"h-4 w-4"})})]})})]},g.id))})]})})})]})]})}const ty=20,J6={roles:[],assignees:[],phases:[],disciplines:[],approvalStatuses:[],appliedSections:[],statuses:[],startDate:"",endDate:""};function _d({label:t,options:e,selected:n,onChange:r}){const s=(a,o)=>{if(o){r(Array.from(new Set([...n,a])));return}r(n.filter(l=>l!==a))};return i.jsxs(PG,{children:[i.jsx(IG,{asChild:!0,children:i.jsxs(H,{variant:"outline",className:ve("h-9 justify-between gap-2",n.length>0&&"border-warning/40 bg-warning/10 text-warning"),children:[i.jsx("span",{className:"truncate text-left",children:t}),i.jsx("span",{className:"rounded-md bg-muted px-1.5 py-0.5 text-xs text-muted-foreground",children:n.length||"All"})]})}),i.jsxs(LO,{align:"start",className:"max-h-80 w-56 overflow-y-auto",children:[i.jsx($O,{children:t}),n.length>0&&i.jsxs(i.Fragment,{children:[i.jsx(j_,{onSelect:a=>{a.preventDefault(),r([])},children:"Clear selection"}),i.jsx(FO,{})]}),e.length===0?i.jsx(j_,{disabled:!0,children:"No options"}):e.map(a=>i.jsx(kG,{checked:n.includes(a),onCheckedChange:o=>s(a,o),children:a},a))]})]})}const jd=t=>Array.from(new Set(t.filter(e=>!!(e&&e.trim())))).sort((e,n)=>e.localeCompare(n)),Het=t=>t.slice(0,10),ez=t=>{const e=(t||"").toLowerCase();return["approved","completed","implemented","done"].includes(e)?"border-success/30 bg-success/10 text-success":["pending","in_progress","in progress"].includes(e)?"border-warning/30 bg-warning/15 text-warning":["behind","rejected","blocked"].includes(e)?"border-destructive/30 bg-destructive/10 text-destructive":"border-border bg-muted/40 text-muted-foreground"};function Ket(){const{user:t}=ht(),{projectId:e}=Hh(),[n,r]=_.useState(J6),[s,a]=_.useState(""),[o,l]=_.useState(1),[c,u]=_.useState(null),d=g=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(g),{data:h}=Ee({queryKey:["project-activity-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const g=await Be.getPrimaryMembershipByUser(t.id);return(g==null?void 0:g.companyId)??null},enabled:!!t}),{data:f}=Ee({queryKey:["project-summary",h,e],queryFn:async()=>{if(!e||!h)return null;const g=await bi(Je(se,Q.PROJECTS,e));if(!g.exists())return null;const T=g.data();return String(T.companyId??"")!==h?null:{id:g.id,name:String(T.name??"Project"),budget:Number(T.budget??0),spent:Number(T.spent??0)}},enabled:!!(h&&e)}),{data:m=[],isLoading:y}=Ee({queryKey:["project-activity-log",h,e],queryFn:async()=>!h||!e?[]:Nl.listByProject(h,e,{limitCount:3e3}),enabled:!!(h&&e),refetchInterval:15e3}),p=_.useMemo(()=>({roles:jd(m.map(g=>g.role)),assignees:jd(m.map(g=>g.assignedTo)),phases:jd(m.map(g=>g.phase)),disciplines:jd(m.map(g=>g.discipline)),approvalStatuses:jd(m.map(g=>g.approvalStatus)),appliedSections:jd(m.map(g=>g.appliedToSection)),statuses:jd(m.map(g=>g.status))}),[m]),v=_.useMemo(()=>{const g=s.trim().toLowerCase();return m.filter(T=>{const E=Het(T.createdAt);return n.startDate&&E<n.startDate||n.endDate&&E>n.endDate||n.roles.length>0&&!n.roles.includes(T.role||"")||n.assignees.length>0&&!n.assignees.includes(T.assignedTo||"")||n.phases.length>0&&!n.phases.includes(T.phase||"")||n.disciplines.length>0&&!n.disciplines.includes(T.discipline||"")||n.approvalStatuses.length>0&&!n.approvalStatuses.includes(T.approvalStatus||"")||n.appliedSections.length>0&&!n.appliedSections.includes(T.appliedToSection||"")||n.statuses.length>0&&!n.statuses.includes(T.status||"")?!1:g?[T.activity,T.description,T.source,T.role,T.assignedTo,T.phase,T.discipline,T.approvalStatus,T.appliedToSection,T.status].filter(Boolean).map(I=>String(I).toLowerCase()).some(I=>I.includes(g)):!0})},[m,n,s]),b=Math.max(1,Math.ceil(v.length/ty));_.useEffect(()=>{l(g=>Math.min(g,b))},[b]);const x=_.useMemo(()=>{const g=(o-1)*ty;return v.slice(g,g+ty)},[v,o]),w=!!(s||n.roles.length||n.assignees.length||n.phases.length||n.disciplines.length||n.approvalStatuses.length||n.appliedSections.length||n.statuses.length||n.startDate||n.endDate),C=()=>{r(J6),a(""),l(1)},S=[...n.roles.map(g=>({key:`role-${g}`,label:`Role: ${g}`,clear:()=>r(T=>({...T,roles:T.roles.filter(E=>E!==g)}))})),...n.assignees.map(g=>({key:`assigned-${g}`,label:`Assigned: ${g}`,clear:()=>r(T=>({...T,assignees:T.assignees.filter(E=>E!==g)}))})),...n.phases.map(g=>({key:`phase-${g}`,label:`Phase: ${g}`,clear:()=>r(T=>({...T,phases:T.phases.filter(E=>E!==g)}))})),...n.disciplines.map(g=>({key:`discipline-${g}`,label:`Discipline: ${g}`,clear:()=>r(T=>({...T,disciplines:T.disciplines.filter(E=>E!==g)}))})),...n.approvalStatuses.map(g=>({key:`approval-${g}`,label:`Approval: ${g}`,clear:()=>r(T=>({...T,approvalStatuses:T.approvalStatuses.filter(E=>E!==g)}))})),...n.appliedSections.map(g=>({key:`section-${g}`,label:`Section: ${g}`,clear:()=>r(T=>({...T,appliedSections:T.appliedSections.filter(E=>E!==g)}))})),...n.statuses.map(g=>({key:`status-${g}`,label:`Status: ${g}`,clear:()=>r(T=>({...T,statuses:T.statuses.filter(E=>E!==g)}))})),...n.startDate?[{key:"start-date",label:`From: ${n.startDate}`,clear:()=>r(g=>({...g,startDate:""}))}]:[],...n.endDate?[{key:"end-date",label:`To: ${n.endDate}`,clear:()=>r(g=>({...g,endDate:""}))}]:[]],P=Nl.getProjectHealthStats(v),j=(g,T,E="max-w-[220px]")=>{const A=g&&g.trim()?g.trim():"-",I=A!=="-";return i.jsx("button",{type:"button",className:ve("truncate text-left text-sm",E,I?"cursor-pointer hover:text-warning":"cursor-default text-muted-foreground"),onClick:()=>{I&&u({label:T,value:A})},children:A})};return y?i.jsx("div",{className:"flex h-64 items-center justify-center",children:"Loading..."}):i.jsxs("div",{className:"w-full space-y-6",children:[i.jsx(Vre,{projectId:e,projectName:f?`${f.name} - Activity Log`:"Project Activity Log",subtitle:f?`Budget: ${d(f.budget)} | Spent: ${d(f.spent)}`:"Track project activities, approvals, and implementation progress",activeTab:"activity-log",actions:i.jsxs(Ve,{variant:"outline",children:[v.length," records"]})}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(X,{children:[i.jsx(te,{className:"pb-2",children:i.jsx(ne,{className:"text-sm font-medium",children:"Total Entries"})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:v.length})})]}),i.jsxs(X,{children:[i.jsx(te,{className:"pb-2",children:i.jsx(ne,{className:"text-sm font-medium",children:"Implemented"})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:P.implementedCount})})]}),i.jsxs(X,{children:[i.jsx(te,{className:"pb-2",children:i.jsx(ne,{className:"text-sm font-medium",children:"Pending"})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:P.pendingCount})})]}),i.jsxs(X,{children:[i.jsx(te,{className:"pb-2",children:i.jsx(ne,{className:"text-sm font-medium",children:"Completion Signal"})}),i.jsx(re,{children:i.jsxs("div",{className:"text-2xl font-bold",children:[P.completion,"%"]})})]})]}),i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between",children:[i.jsxs(ne,{className:"flex items-center gap-2 text-base",children:[i.jsx(Yoe,{className:"h-4 w-4"}),"Advanced Filters"]}),i.jsx(H,{variant:"outline",onClick:C,disabled:!w,children:"Clear All"})]}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 xl:grid-cols-4",children:[i.jsx("div",{className:"sm:col-span-2 xl:col-span-2",children:i.jsxs("div",{className:"relative",children:[i.jsx(Ds,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{value:s,onChange:g=>{a(g.target.value),l(1)},className:"pl-9",placeholder:"Search activity, description, role, source..."})]})}),i.jsx(_d,{label:"Role",options:p.roles,selected:n.roles,onChange:g=>{r(T=>({...T,roles:g})),l(1)}}),i.jsx(_d,{label:"Assigned To",options:p.assignees,selected:n.assignees,onChange:g=>{r(T=>({...T,assignees:g})),l(1)}}),i.jsx(_d,{label:"Phase",options:p.phases,selected:n.phases,onChange:g=>{r(T=>({...T,phases:g})),l(1)}}),i.jsx(_d,{label:"Discipline",options:p.disciplines,selected:n.disciplines,onChange:g=>{r(T=>({...T,disciplines:g})),l(1)}}),i.jsx(_d,{label:"Approval Status",options:p.approvalStatuses,selected:n.approvalStatuses,onChange:g=>{r(T=>({...T,approvalStatuses:g})),l(1)}}),i.jsx(_d,{label:"Applied To Section",options:p.appliedSections,selected:n.appliedSections,onChange:g=>{r(T=>({...T,appliedSections:g})),l(1)}}),i.jsx(_d,{label:"Status",options:p.statuses,selected:n.statuses,onChange:g=>{r(T=>({...T,statuses:g})),l(1)}}),i.jsx(G,{type:"date",value:n.startDate,onChange:g=>{r(T=>({...T,startDate:g.target.value})),l(1)},placeholder:"Start date"}),i.jsx(G,{type:"date",value:n.endDate,onChange:g=>{r(T=>({...T,endDate:g.target.value})),l(1)},placeholder:"End date"})]}),S.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2",children:S.map(g=>i.jsxs(Ve,{variant:"outline",className:"gap-1 border-warning/40 bg-warning/10 text-warning",children:[g.label,i.jsx("button",{type:"button",onClick:()=>{g.clear(),l(1)},className:"rounded-full p-0.5 hover:bg-warning/20","aria-label":`Clear ${g.label}`,children:i.jsx(Bm,{className:"h-3 w-3"})})]},g.key))})]})]}),i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between",children:[i.jsx(ne,{children:"Project Activity Log"}),i.jsxs(Ve,{variant:"outline",children:["Page ",o," of ",b]})]}),i.jsxs(re,{className:"space-y-4",children:[i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs(Vt,{className:"min-w-[1720px]",children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Date"}),i.jsx(q,{children:"Activity"}),i.jsx(q,{children:"Description"}),i.jsx(q,{children:"Source"}),i.jsx(q,{children:"Role"}),i.jsx(q,{children:"Assigned To"}),i.jsx(q,{children:"Phase"}),i.jsx(q,{children:"Discipline"}),i.jsx(q,{children:"Approval Status"}),i.jsx(q,{children:"Applied To"}),i.jsx(q,{children:"Status"})]})}),i.jsx(Ut,{children:x.length===0?i.jsx(je,{children:i.jsx(U,{colSpan:11,className:"py-10 text-center text-muted-foreground",children:"No activity records matched the selected filters."})}):x.map(g=>i.jsxs(je,{children:[i.jsx(U,{className:"whitespace-nowrap",children:mt(new Date(g.createdAt),"yyyy-MM-dd HH:mm")}),i.jsx(U,{children:j(g.activity,"Activity")}),i.jsx(U,{children:j(g.description||"-","Description","max-w-[300px]")}),i.jsx(U,{children:j(`${g.source}${g.sourceType?` (${g.sourceType})`:""}`,"Source")}),i.jsx(U,{children:j(g.role||"-","Role","max-w-[160px]")}),i.jsx(U,{children:j(g.assignedTo||"-","Assigned To","max-w-[180px]")}),i.jsx(U,{children:j(g.phase||"-","Phase","max-w-[140px]")}),i.jsx(U,{children:j(g.discipline||"-","Discipline","max-w-[160px]")}),i.jsx(U,{children:i.jsx(Ve,{variant:"outline",className:ez(g.approvalStatus),children:g.approvalStatus||"-"})}),i.jsx(U,{children:j(g.appliedToSection||"-","Applied To Section","max-w-[220px]")}),i.jsx(U,{children:i.jsx(Ve,{variant:"outline",className:ez(g.status),children:g.status||"-"})})]},g.id))})]})}),i.jsxs("div",{className:"flex flex-col justify-between gap-3 border-t pt-4 sm:flex-row sm:items-center",children:[i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",v.length===0?0:(o-1)*ty+1,"-",Math.min(o*ty,v.length)," of ",v.length]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(H,{variant:"outline",onClick:()=>l(g=>Math.max(1,g-1)),disabled:o<=1,children:"Previous"}),i.jsx(H,{variant:"outline",onClick:()=>l(g=>Math.min(b,g+1)),disabled:o>=b,children:"Next"})]})]})]})]}),i.jsx(Jn,{open:!!c,onOpenChange:g=>!g&&u(null),children:i.jsxs(Hn,{className:"max-w-3xl",children:[i.jsx(Kn,{children:i.jsx(Gn,{children:(c==null?void 0:c.label)||"Details"})}),i.jsx("div",{className:"max-h-[70vh] overflow-y-auto rounded-md border bg-muted/30 p-4 text-sm leading-relaxed whitespace-pre-wrap",children:c==null?void 0:c.value})]})})]})}const Get=["Agriculture","Construction","Education","Financial Services","Healthcare","Hospitality","Information Technology","Manufacturing","Mining","Non-Profit","Professional Services","Retail","Transportation","Wholesale","Other"],Yet=[{value:"vat_registered",label:"VAT Registered",description:"Turnover > K800k. 16% VAT."},{value:"turnover_tax",label:"Turnover Tax",description:"Turnover < K800k. 4% Tax."},{value:"non_vat",label:"Non-VAT Registered",description:"Not registered for VAT."}],Qet=[{value:"charitable",label:"Registered Charitable Organization"},{value:"faith_based",label:"Faith-Based Organization"},{value:"educational",label:"Educational Non-profit"},{value:"grant_funded",label:"Grant-Funded NGO"}],Xet=()=>i.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-6",children:[i.jsx(Ur.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-indigo-500/10 backdrop-blur-md border border-indigo-500/20 p-8 rounded-full",children:i.jsx(Lx,{className:"h-16 w-16 text-indigo-400"})}),i.jsxs("div",{className:"text-center max-w-xs",children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:"Organization Profile"}),i.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Setting up your digital headquarters."})]})]}),Zet=()=>i.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-6",children:[i.jsx(Ur.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-pink-500/10 backdrop-blur-md border border-pink-500/20 p-8 rounded-full",children:i.jsx(Xk,{className:"h-16 w-16 text-pink-400"})}),i.jsxs("div",{className:"text-center max-w-xs",children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:"Brand Identity"}),i.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Make your invoices and reports stand out."})]})]}),Jet=()=>i.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center space-y-6",children:[i.jsx(Ur.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-emerald-500/10 backdrop-blur-md border border-emerald-500/20 p-8 rounded-full",children:i.jsx(vh,{className:"h-16 w-16 text-emerald-400"})}),i.jsxs("div",{className:"text-center max-w-xs",children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:"Compliance & Tax"}),i.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Ensuring ZRA compliance from day one."})]})]});function ett(){const t=$n(),e=tn(),{user:n}=ht(),[r,s]=_.useState(1),[a,o]=_.useState(null),[l,c]=_.useState({name:"",organizationType:"business",businessType:"sme",address:"",phone:"",email:"",tpin:"",registrationNumber:"",industryType:"",taxType:"non_vat",taxClassification:"",vatRate:"16",turnoverTaxNumber:""}),u=(v,b)=>{c(x=>({...x,[v]:b}))},d=Xe({mutationFn:async()=>{if(!n)throw new Error("Not authenticated");const v=await Be.getPrimaryMembershipByUser(n.id);if(!(v!=null&&v.companyId))throw new Error("No company associated with user");const b=l.organizationType==="business"&&l.taxType==="vat_registered",x=l.organizationType==="business"?l.taxType:l.taxClassification;await Be.completeCompanySetup({companyId:v.companyId,name:l.name,organizationType:l.organizationType,businessType:l.businessType,taxType:l.organizationType==="business"?l.taxType:"tax_exempt",taxClassification:x,address:l.address||void 0,phone:l.phone||void 0,email:l.email||void 0,tpin:l.tpin||void 0,registrationNumber:l.registrationNumber||void 0,industryType:l.industryType||void 0,logoUrl:a,isVatRegistered:b,vatRate:b?parseFloat(l.vatRate):null})},onSuccess:()=>{e.invalidateQueries({queryKey:["company-settings"]}),e.invalidateQueries({queryKey:["company"]}),Y.success("Setup complete!"),t("/dashboard")},onError:v=>Y.error("Setup failed: "+v.message)}),h=()=>{if(r===1){if(!l.name)return!!Y.error("Company Name is required");if(!l.phone)return!!Y.error("Phone is required");if(!l.email)return!!Y.error("Email is required");if(!l.tpin||!/^\d{10}$/.test(l.tpin))return!!Y.error("Valid 10-digit TPIN required")}if(r===2&&!a)return!!Y.error("Logo is required");if(r===3){if(l.organizationType==="business"&&l.taxType==="turnover_tax"&&!l.turnoverTaxNumber)return!!Y.error("Turnover Tax Number required");if(l.organizationType==="non_profit"&&!l.taxClassification)return!!Y.error("Classification required")}return!0},f=()=>{h()&&(r<3?s(r+1):d.mutate())},m=r===1?i.jsx(Xet,{}):r===2?i.jsx(Zet,{}):i.jsx(Jet,{}),y=r===1?"Organization Details":r===2?"Upload Identity":"Tax Configuration",p=`Step ${r} of 3`;return i.jsx(Jp,{title:y,subtitle:p,visualContent:i.jsx(oX,{mode:"wait",children:i.jsx(Ur.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"w-full h-full",children:m},r)}),children:i.jsxs("div",{className:"space-y-6 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar",children:[r===1&&i.jsxs(Ur.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Company Name"}),i.jsxs("div",{className:"relative",children:[i.jsx(Lx,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"Acme Corp",className:"pl-10",value:l.name,onChange:v=>u("name",v.target.value)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Org Type"}),i.jsxs(Tt,{value:l.organizationType,onValueChange:v=>u("organizationType",v),children:[i.jsx(jt,{children:i.jsx(Ct,{})}),i.jsxs(Nt,{children:[i.jsx(be,{value:"business",children:"Business"}),i.jsx(be,{value:"non_profit",children:"Non-Profit"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Business Type"}),i.jsxs(Tt,{value:l.businessType,onValueChange:v=>u("businessType",v),children:[i.jsx(jt,{children:i.jsx(Ct,{})}),i.jsxs(Nt,{children:[i.jsx(be,{value:"sme",children:"SME"}),i.jsx(be,{value:"corporate",children:"Corporate"}),i.jsx(be,{value:"ngo",children:"NGO"}),i.jsx(be,{value:"school",children:"School"})]})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"TPIN (10 Digits)"}),i.jsxs("div",{className:"relative",children:[i.jsx(l8,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"1234567890",className:"pl-10",value:l.tpin,onChange:v=>u("tpin",v.target.value.replace(/\D/g,"").slice(0,10))})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Phone"}),i.jsxs("div",{className:"relative",children:[i.jsx(c8,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"+260...",className:"pl-10",value:l.phone,onChange:v=>u("phone",v.target.value)})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(Gu,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"info@...",className:"pl-10",value:l.email,onChange:v=>u("email",v.target.value)})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Industry"}),i.jsxs(Tt,{value:l.industryType,onValueChange:v=>u("industryType",v),children:[i.jsx(jt,{children:i.jsx(Ct,{placeholder:"Select..."})}),i.jsx(Nt,{children:Get.map(v=>i.jsx(be,{value:v.toLowerCase(),children:v},v))})]})]})]}),r===2&&i.jsxs(Ur.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6 text-center",children:[i.jsx("div",{className:"border-2 border-dashed border-slate-200 rounded-xl p-8 bg-slate-50/50",children:i.jsx(XD,{onUploaded:o})}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload your official organization logo. This will be displayed on all your financial documents."})]}),r===3&&i.jsx(Ur.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:l.organizationType==="business"?i.jsxs("div",{className:"space-y-4",children:[i.jsx(ee,{children:"Select Tax Category"}),i.jsx("div",{className:"grid gap-3",children:Yet.map(v=>i.jsx("div",{onClick:()=>u("taxType",v.value),className:`p-4 rounded-lg border cursor-pointer transition-all ${l.taxType===v.value?"border-primary bg-primary/5 ring-1 ring-primary":"border-border hover:border-primary/50"}`,children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${l.taxType===v.value?"border-primary":"border-slate-400"}`,children:l.taxType===v.value&&i.jsx("div",{className:"w-2.5 h-2.5 bg-primary rounded-full"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-sm",children:v.label}),i.jsx("p",{className:"text-xs text-muted-foreground",children:v.description})]})]})},v.value))}),l.taxType==="vat_registered"&&i.jsxs("div",{className:"space-y-2 pt-2",children:[i.jsx(ee,{children:"VAT Rate (%)"}),i.jsx(G,{type:"number",value:l.vatRate,onChange:v=>u("vatRate",v.target.value)})]}),l.taxType==="turnover_tax"&&i.jsxs("div",{className:"space-y-2 pt-2",children:[i.jsx(ee,{children:"Turnover Tax ID"}),i.jsx(G,{placeholder:"TOT-...",value:l.turnoverTaxNumber,onChange:v=>u("turnoverTaxNumber",v.target.value)})]})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsx(ee,{children:"Non-Profit Classification"}),i.jsxs(Tt,{value:l.taxClassification,onValueChange:v=>u("taxClassification",v),children:[i.jsx(jt,{children:i.jsx(Ct,{placeholder:"Select classification..."})}),i.jsx(Nt,{children:Qet.map(v=>i.jsx(be,{value:v.value,children:v.label},v.value))})]})]})}),i.jsxs("div",{className:"flex justify-between pt-6 border-t mt-6",children:[r>1?i.jsx(H,{variant:"ghost",onClick:()=>s(r-1),children:"Back"}):i.jsx("div",{}),i.jsx(H,{onClick:f,disabled:d.isPending,className:"px-8",children:r<3?i.jsxs(i.Fragment,{children:["Next ",i.jsx(LT,{className:"ml-2 h-4 w-4"})]}):d.isPending?"Completing...":"Complete Setup"})]})]})})}const ttt=[{icon:di,title:"Employee Management",description:"Complete database with role-based access control and history tracking.",className:"border-l-4 border-blue-500"},{icon:Uw,title:"Payroll Processing",description:"Automated calculations for PAYE, NAPSA, and NHIMA with one-click rendering.",className:"border-l-4 border-indigo-500"},{icon:vh,title:"Compliance & Audit",description:"Built-in ZRA compliance rules and detailed audit logs for every action.",className:"border-l-4 border-slate-500"},{icon:r8,title:"Real-time Analytics",description:"Live financial dashboards and customizable reports for better decision making.",className:"border-l-4 border-sky-500"}];function ntt(){const[t,e]=_.useState(null);_.useEffect(()=>{const r=s=>{const a=s;a.preventDefault(),e(a)};return window.addEventListener("beforeinstallprompt",r),()=>{window.removeEventListener("beforeinstallprompt",r)}},[]);const n=()=>{t&&(t.prompt(),t.userChoice.then(r=>{r.outcome==="accepted"&&console.log("User accepted the install prompt"),e(null)}))};return i.jsxs("div",{className:"min-h-screen bg-[#F8FAFC] font-sans text-slate-900 selection:bg-blue-100 selection:text-blue-900 overflow-x-hidden",children:[i.jsx("header",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-slate-200/60",children:i.jsxs("div",{className:"container mx-auto px-4 lg:px-6 flex items-center justify-between h-20",children:[i.jsx(Ii,{to:"/",className:"flex items-center gap-3",children:i.jsx(Ov,{variant:"full",size:"md"})}),i.jsxs("nav",{className:"hidden md:flex items-center gap-8 text-sm font-medium text-slate-600",children:[i.jsx("a",{href:"#features",className:"hover:text-blue-700 transition-colors",children:"Features"}),i.jsx("a",{href:"#pricing",className:"hover:text-blue-700 transition-colors",children:"Pricing"}),i.jsx("a",{href:"#compliance",className:"hover:text-blue-700 transition-colors",children:"Compliance"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Ii,{to:"/auth",children:i.jsx(H,{variant:"ghost",className:"hidden sm:inline-flex text-slate-600 hover:text-blue-700 hover:bg-blue-50",children:"Sign In"})}),i.jsx(Ii,{to:"/auth",children:i.jsx(H,{className:"rounded-full bg-slate-900 hover:bg-slate-800 text-white shadow-lg shadow-slate-900/20 px-6 transition-all hover:scale-105",children:"Get Started"})})]})]})}),i.jsxs("section",{className:"relative pt-20 pb-32 lg:pt-32 lg:pb-48 overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[1000px] h-[600px] bg-blue-100/40 rounded-[100%] blur-[100px] -z-10 pointer-events-none opacity-60"}),i.jsx("div",{className:"absolute top-40 right-0 w-[500px] h-[500px] bg-indigo-100/40 rounded-full blur-[80px] -z-10 pointer-events-none opacity-50"}),i.jsxs("div",{className:"container mx-auto px-4 lg:px-6 relative z-10 text-center",children:[i.jsxs(Ve,{variant:"outline",className:"mb-8 px-4 py-1.5 rounded-full bg-blue-50/50 text-blue-700 border-blue-200 backdrop-blur-sm animate-fade-in-up",children:[i.jsxs("span",{className:"relative flex h-2 w-2 mr-2",children:[i.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"}),i.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-blue-500"})]}),"New: Automated ZRA Tax Submission"]}),i.jsxs("h1",{className:"text-5xl lg:text-7xl font-bold tracking-tight text-slate-900 mb-8 max-w-4xl mx-auto leading-[1.1]",children:["The Financial Operating System for ",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-700 to-indigo-600",children:"Zambian NGOs"})]}),i.jsx("p",{className:"text-xl text-slate-600 mb-12 max-w-2xl mx-auto leading-relaxed",children:"Manage your finances, payroll, and compliance in one unified secure platform. Designed for purpose-driven organizations."}),i.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mb-20",children:[i.jsx(Ii,{to:"/auth",children:i.jsx(H,{size:"lg",className:"h-14 px-10 rounded-full bg-blue-600 hover:bg-blue-700 text-white shadow-xl shadow-blue-600/20 text-lg transition-all hover:scale-105",children:"Start Free Trial"})}),t&&i.jsxs(H,{size:"lg",variant:"outline",onClick:n,className:"h-14 px-10 rounded-full border-slate-200 hover:bg-white hover:text-blue-700 hover:border-blue-200 text-lg shadow-sm transition-all",children:[i.jsx(Rs,{className:"mr-2 h-5 w-5"}),"Install App"]}),!t&&i.jsxs(H,{size:"lg",variant:"outline",className:"h-14 px-10 rounded-full border-slate-200 hover:bg-white hover:text-slate-900 text-lg shadow-sm transition-all opacity-50 cursor-not-allowed",children:[i.jsx(Qoe,{className:"mr-2 h-5 w-5"}),"Web Version"]})]}),i.jsxs("div",{className:"relative max-w-5xl mx-auto",children:[i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl border border-slate-200/60 overflow-hidden backdrop-blur-sm",children:[i.jsxs("div",{className:"h-12 bg-slate-50 border-b border-slate-100 flex items-center px-4 gap-2",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-red-400/80"}),i.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-400/80"}),i.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-400/80"})]}),i.jsx("div",{className:"mx-auto bg-slate-200/50 h-6 w-64 rounded-md text-[10px] flex items-center justify-center text-slate-400 font-mono",children:"app.zedbooks.com/dashboard"})]}),i.jsx("div",{className:"p-1 bg-slate-50/50",children:i.jsxs("div",{className:"grid grid-cols-12 gap-1 p-4 h-[400px] lg:h-[600px] bg-white rounded-xl overflow-hidden relative",children:[i.jsxs("div",{className:"col-span-2 hidden lg:flex flex-col gap-3 border-r border-slate-50 pr-4",children:[i.jsx("div",{className:"h-8 w-full bg-slate-100 rounded-lg"}),i.jsx("div",{className:"h-8 w-3/4 bg-slate-50 rounded-lg"}),i.jsx("div",{className:"h-8 w-full bg-slate-50 rounded-lg"}),i.jsx("div",{className:"h-8 w-5/6 bg-slate-50 rounded-lg"})]}),i.jsxs("div",{className:"col-span-12 lg:col-span-10 flex flex-col gap-6 pl-0 lg:pl-6 pt-2",children:[i.jsxs("div",{className:"flex justify-between items-end",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"h-4 w-32 bg-slate-100 rounded"}),i.jsx("div",{className:"h-8 w-64 bg-slate-900 rounded-lg"})]}),i.jsx("div",{className:"h-10 w-32 bg-blue-600 rounded-lg"})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"h-32 bg-blue-50 rounded-2xl border border-blue-100 p-4 space-y-3",children:[i.jsx("div",{className:"h-8 w-8 bg-blue-200 rounded-lg"}),i.jsx("div",{className:"h-6 w-24 bg-blue-200/50 rounded"})]}),i.jsxs("div",{className:"h-32 bg-slate-50 rounded-2xl border border-slate-100 p-4 space-y-3",children:[i.jsx("div",{className:"h-8 w-8 bg-slate-200 rounded-lg"}),i.jsx("div",{className:"h-6 w-24 bg-slate-200/50 rounded"})]}),i.jsxs("div",{className:"h-32 bg-slate-50 rounded-2xl border border-slate-100 p-4 space-y-3",children:[i.jsx("div",{className:"h-8 w-8 bg-slate-200 rounded-lg"}),i.jsx("div",{className:"h-6 w-24 bg-slate-200/50 rounded"})]})]}),i.jsx("div",{className:"flex-1 bg-slate-50 rounded-2xl border border-slate-100 p-6 flex items-center justify-center",children:i.jsx("div",{className:"text-slate-300 font-medium",children:"Interactive Financial Ledger Mockup"})})]})]})})]}),i.jsxs("div",{className:"absolute -left-12 bottom-20 bg-white p-6 rounded-2xl shadow-xl border border-slate-100 hidden lg:block animate-float",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"h-10 w-10 bg-green-100 rounded-full flex items-center justify-center text-green-600",children:i.jsx(vh,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Compliance Status"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Last checked today"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Ve,{variant:"secondary",className:"bg-green-50 text-green-700",children:"NAPSA Verified"}),i.jsx(Ve,{variant:"secondary",className:"bg-green-50 text-green-700",children:"ZRA Compliant"})]})]}),i.jsxs("div",{className:"absolute -right-8 top-20 bg-white p-5 rounded-2xl shadow-xl border border-slate-100 hidden lg:block animate-float-delayed",children:[i.jsx("p",{className:"text-xs text-slate-500 uppercase font-semibold mb-3",children:"Recent Transactions"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-8 w-8 rounded-full bg-slate-100 flex items-center justify-center text-xs font-bold",children:"JD"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Payroll Run"}),i.jsx("p",{className:"text-xs text-slate-400",children:"Just now"})]}),i.jsx("span",{className:"text-sm font-medium text-slate-900 ml-4",children:"- K45,200"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center text-xs font-bold text-blue-700",children:"IN"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Grant Deposit"}),i.jsx("p",{className:"text-xs text-slate-400",children:"2h ago"})]}),i.jsx("span",{className:"text-sm font-medium text-green-600 ml-4",children:"+ K150,000"})]})]})]})]})]})]}),i.jsx("section",{id:"features",className:"py-24 bg-white relative",children:i.jsxs("div",{className:"container mx-auto px-4 lg:px-6",children:[i.jsxs("div",{className:"text-center mb-16 max-w-2xl mx-auto",children:[i.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-4",children:"Everything you need to run your NGO"}),i.jsx("p",{className:"text-slate-600",children:"Robust features designed specifically for the unique compliance and reporting needs of Zambian non-profits."})]}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:ttt.map((r,s)=>i.jsx(X,{className:`shadow-sm hover:shadow-lg transition-all border-slate-200 bg-white ${r.className}`,children:i.jsxs(re,{className:"p-8",children:[i.jsx("div",{className:"h-12 w-12 rounded-xl bg-slate-50 flex items-center justify-center mb-6",children:i.jsx(r.icon,{className:"h-6 w-6 text-slate-700"})}),i.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-3",children:r.title}),i.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:r.description})]})},s))})]})}),i.jsxs("section",{id:"compliance",className:"py-24 bg-slate-900 text-white overflow-hidden relative",children:[i.jsx("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-blue-600/10 rounded-full blur-[120px] translate-x-1/2 -translate-y-1/2"}),i.jsx("div",{className:"container mx-auto px-4 lg:px-6 relative z-10",children:i.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-4xl font-bold mb-6",children:"Fully Compliant with Zambian Regulation"}),i.jsx("p",{className:"text-slate-300 text-lg mb-8",children:"Stay ahead of regulatory requirements with automated updates for domestic tax laws and labor regulations."}),i.jsx("div",{className:"flex flex-wrap gap-4 mb-8",children:["ZRA Smart Invoice","NAPSA e-Returns","NHIMA Compliant","PACRA Returns"].map(r=>i.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-full bg-slate-800 border border-slate-700 text-sm font-medium text-slate-200",children:[i.jsx($x,{className:"h-4 w-4 text-green-400"}),r]},r))}),i.jsx(Ii,{to:"/auth",children:i.jsx(H,{className:"rounded-full bg-white text-slate-900 hover:bg-slate-100 px-8 h-12 shadow-md",children:"Get Compliant Today"})})]}),i.jsx("div",{className:"relative",children:i.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 p-8 rounded-3xl border border-slate-700 shadow-2xl",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-8 border-b border-slate-700 pb-8",children:[i.jsx("div",{className:"h-14 w-14 bg-blue-600 rounded-2xl flex items-center justify-center",children:i.jsx(vh,{className:"h-8 w-8 text-white"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold",children:"Compliance Monitor"}),i.jsx("p",{className:"text-slate-400 text-sm",children:"Real-time status tracking"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-slate-800/50 border border-slate-700",children:[i.jsx("span",{className:"text-slate-200 font-medium",children:"TPIN Verification"}),i.jsx(Ve,{className:"bg-green-500/20 text-green-400 hover:bg-green-500/20 border-green-500/20",children:"Verified"})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-slate-800/50 border border-slate-700",children:[i.jsx("span",{className:"text-slate-200 font-medium",children:"Tax Clearance"}),i.jsx(Ve,{className:"bg-green-500/20 text-green-400 hover:bg-green-500/20 border-green-500/20",children:"Valid"})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-slate-800/50 border border-slate-700",children:[i.jsx("span",{className:"text-slate-200 font-medium",children:"Annual Returns"}),i.jsx(Ve,{className:"bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/20 border-yellow-500/20",children:"Due in 5 days"})]})]})]})})]})})]}),i.jsx("footer",{className:"py-12 bg-white border-t border-slate-200",children:i.jsxs("div",{className:"container mx-auto px-4 text-center",children:[i.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:i.jsx(Ov,{variant:"full",size:"md",className:"grayscale opacity-70 hover:grayscale-0 hover:opacity-100"})}),i.jsxs("p",{className:"text-slate-500 text-sm",children:[" ",new Date().getFullYear()," Byte & Berry. All rights reserved."]})]})}),i.jsx(ZO,{})]})}function rtt(){const{user:t}=ht(),e=tn(),[n,r]=_.useState(""),[s,a]=_.useState(!1),{data:o}=Ee({queryKey:["donors-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const x=await Be.getPrimaryMembershipByUser(t.id);return(x==null?void 0:x.companyId)??null},enabled:!!t}),{data:l=[],isLoading:c}=Ee({queryKey:["donors-from-projects",o],queryFn:async()=>{if(!o)return[];const x=we(se,Q.PROJECTS),C=(await Ce(Te(x,he("companyId","==",o)))).docs.map(P=>{const j=P.data();return{donor_name:String(j.donorName??j.donor_name??""),grant_reference:j.grantReference??j.grant_reference??null,budget:Number(j.budget??0),spent:Number(j.spent??0),status:String(j.status??"active")}}),S=new Map;return C.forEach(P=>{if(P.donor_name){const j=S.get(P.donor_name)||{grants:0,totalBudget:0,activeGrants:0};S.set(P.donor_name,{grants:j.grants+1,totalBudget:j.totalBudget+(P.budget||0),activeGrants:j.activeGrants+(P.status==="active"?1:0)})}}),Array.from(S.entries()).map(([P,j])=>({name:P,totalGrants:j.grants,totalBudget:j.totalBudget,activeGrants:j.activeGrants}))},enabled:!!o}),{data:u=[]}=Ee({queryKey:["projects-for-donors",o],queryFn:async()=>{if(!o)return[];const x=we(se,Q.PROJECTS);return(await Ce(Te(x,he("companyId","==",o)))).docs.map(C=>{var I;const S=C.data(),P=S.createdAt??S.created_at,j=typeof P=="string"?P:((I=P==null?void 0:P.toDate)==null?void 0:I.call(P).toISOString())??"",g=S.donorName??S.donor_name,T=S.grantReference??S.grant_reference,E=S.startDate??S.start_date,A=S.endDate??S.end_date;return{id:C.id,donor_name:g==null?null:String(g),grant_reference:T==null?null:String(T),start_date:E==null?null:String(E),end_date:A==null?null:String(A),status:String(S.status??"active"),budget:Number(S.budget??0),spent:Number(S.spent??0),name:String(S.name??""),created_at:j}}).sort((C,S)=>String(S.created_at??"").localeCompare(String(C.created_at??"")))},enabled:!!o}),d=x=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(x),h=l.filter(x=>x.name.toLowerCase().includes(n.toLowerCase())),f=l.reduce((x,w)=>x+w.totalBudget,0),m=l.reduce((x,w)=>x+w.activeGrants,0),y=l.reduce((x,w)=>x+w.totalGrants,0),p=()=>{rf(h,[{header:"Donor Name",key:"name"},{header:"Total Grants",key:"totalGrants"},{header:"Active Grants",key:"activeGrants"},{header:"Total Budget (ZMW)",key:"totalBudget"}],"donors-report")},v=[{key:"name",header:"Project Name",required:!0},{key:"donor_name",header:"Donor Name",required:!0},{key:"grant_reference",header:"Grant Reference",required:!1},{key:"budget",header:"Budget (ZMW)",required:!1},{key:"start_date",header:"Start Date",required:!1},{key:"end_date",header:"End Date",required:!1}],b=async x=>{if(!o||!t)throw new Error("No active company context");for(const w of x){const C=typeof w.budget=="number"?w.budget:parseFloat(String(w.budget??0))||0;await es(we(se,Q.PROJECTS),{companyId:o,name:w.name??"",donorName:w.donor_name??"",grantReference:w.grant_reference||null,budget:C,spent:0,startDate:w.start_date||null,endDate:w.end_date||null,status:"active",createdBy:t.id,createdAt:Re(),updatedAt:Re()})}e.invalidateQueries({queryKey:["donors-from-projects",o]}),e.invalidateQueries({queryKey:["projects-for-donors",o]})};return c?i.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Donors & Grants"}),i.jsx("p",{className:"text-muted-foreground",children:"Track donors and their grant contributions"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(H,{variant:"outline",onClick:()=>a(!0),children:[i.jsx(nl,{className:"mr-2 h-4 w-4"}),"Import"]}),i.jsxs(H,{variant:"outline",onClick:p,children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export"]})]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(X,{children:[i.jsx(te,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Xk,{className:"h-4 w-4"}),"Total Donors"]})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:l.length})})]}),i.jsxs(X,{children:[i.jsx(te,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(o8,{className:"h-4 w-4"}),"Total Grants"]})}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold",children:y}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[m," active"]})]})]}),i.jsxs(X,{children:[i.jsx(te,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Xn,{className:"h-4 w-4"}),"Total Funding"]})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:d(f)})})]}),i.jsxs(X,{children:[i.jsx(te,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Xn,{className:"h-4 w-4"}),"Avg. per Donor"]})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:d(l.length>0?f/l.length:0)})})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Ds,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{placeholder:"Search donors...",value:n,onChange:x=>r(x.target.value),className:"pl-10"})]})})}),i.jsx(re,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Donor Name"}),i.jsx(q,{className:"text-right",children:"Total Grants"}),i.jsx(q,{className:"text-right",children:"Active Grants"}),i.jsx(q,{className:"text-right",children:"Total Funding"})]})}),i.jsxs(Ut,{children:[h.map((x,w)=>i.jsxs(je,{children:[i.jsx(U,{className:"font-medium",children:x.name}),i.jsx(U,{className:"text-right",children:x.totalGrants}),i.jsx(U,{className:"text-right",children:i.jsx(Ve,{variant:x.activeGrants>0?"default":"secondary",children:x.activeGrants})}),i.jsx(U,{className:"text-right",children:d(x.totalBudget)})]},w)),h.length===0&&i.jsx(je,{children:i.jsx(U,{colSpan:4,className:"text-center text-muted-foreground py-8",children:"No donors found. Add projects with donor information to see them here."})})]})]})})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"All Grants"})}),i.jsx(re,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Grant Reference"}),i.jsx(q,{children:"Project Name"}),i.jsx(q,{children:"Donor"}),i.jsx(q,{children:"Status"}),i.jsx(q,{className:"text-right",children:"Budget"}),i.jsx(q,{className:"text-right",children:"Spent"})]})}),i.jsx(Ut,{children:u.filter(x=>x.donor_name).map(x=>i.jsxs(je,{children:[i.jsx(U,{className:"font-mono",children:x.grant_reference||"-"}),i.jsx(U,{className:"font-medium",children:x.name}),i.jsx(U,{children:x.donor_name}),i.jsx(U,{children:i.jsx(Ve,{variant:x.status==="active"?"default":"secondary",children:x.status})}),i.jsx(U,{className:"text-right",children:d(x.budget||0)}),i.jsx(U,{className:"text-right",children:d(x.spent||0)})]},x.id))})]})})]}),i.jsx(pg,{open:s,onOpenChange:a,onImport:b,columns:v,title:"Import Grants"})]})}const MA=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},LA=t=>{if(!t)return"";if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString().slice(0,10);if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString().slice(0,10)}return""};function stt(){const{user:t}=ht(),{data:e}=ei(),n=tn(),[r,s]=_.useState(()=>{const E=new Date;return E.setMonth(E.getMonth()-3),E.toISOString().split("T")[0]}),[a,o]=_.useState(new Date().toISOString().split("T")[0]),[l,c]=_.useState(!1),u=["super_admin","admin","financial_manager","accountant","assistant_accountant"].includes(e||""),{data:d=[],isLoading:h,refetch:f}=Ee({queryKey:["accounts-payable",r,a,t==null?void 0:t.id],queryFn:async()=>{if(!t)return[];const E=await Be.getPrimaryMembershipByUser(t.id);if(!(E!=null&&E.companyId))return[];const A=we(se,Q.BILLS),k=(await Ce(Te(A,he("companyId","==",E.companyId)))).docs.map(B=>{const M=B.data();return{id:B.id,bill_number:String(M.billNumber??M.bill_number??`BILL-${B.id.slice(0,8).toUpperCase()}`),bill_date:LA(M.billDate??M.bill_date),due_date:LA(M.dueDate??M.due_date)||null,total:Number(M.total??0),status:String(M.status??"pending"),vendor_id:M.vendorId??M.vendor_id??null,vendors:null}}).filter(B=>B.bill_date>=r&&B.bill_date<=a),L=Array.from(new Set(k.map(B=>B.vendor_id).filter(Boolean))),V=new Map;if(L.length>0){const B=we(se,Q.VENDORS),M=MA(L,30);(await Promise.all(M.map(O=>Ce(Te(B,he(to(),"in",O)))))).forEach(O=>{O.docs.forEach(W=>{const Z=W.data();V.set(W.id,String(Z.name??"-"))})})}return k.map(B=>({...B,vendors:B.vendor_id?{name:V.get(B.vendor_id)||"-"}:null})).sort((B,M)=>String(B.due_date||"").localeCompare(String(M.due_date||"")))},enabled:!!t}),{data:m=[]}=Ee({queryKey:["accounts-payable-payments",r,a,t==null?void 0:t.id],queryFn:async()=>{if(!t)return[];const E=await Be.getPrimaryMembershipByUser(t.id);if(!(E!=null&&E.companyId))return[];const A=we(se,Q.BILL_PAYMENTS),k=(await Ce(Te(A,he("companyId","==",E.companyId)))).docs.map($=>{const O=$.data();return{id:$.id,bill_id:O.billId??O.bill_id??null,amount:Number(O.amount??0),payment_date:LA(O.paymentDate??O.payment_date),notes:O.notes??null,journal_entry_id:O.journalEntryId??O.journal_entry_id??null,is_reversed:!!(O.isReversed??O.is_reversed??!1)}}).filter($=>$.payment_date>=r&&$.payment_date<=a),L=Array.from(new Set(k.map($=>$.bill_id).filter(Boolean))),V=new Map;if(L.length>0){const $=MA(L,30);(await Promise.all($.map(W=>Ce(Te(we(se,Q.BILLS),he(to(),"in",W)))))).forEach(W=>{W.docs.forEach(Z=>{const ae=Z.data();V.set(Z.id,{billNumber:String(ae.billNumber??ae.bill_number??`BILL-${Z.id.slice(0,8).toUpperCase()}`),vendorId:ae.vendorId??ae.vendor_id??null})})})}const B=Array.from(new Set(Array.from(V.values()).map($=>$.vendorId).filter(Boolean))),M=new Map;if(B.length>0){const $=MA(B,30);(await Promise.all($.map(W=>Ce(Te(we(se,Q.VENDORS),he(to(),"in",W)))))).forEach(W=>{W.docs.forEach(Z=>{const ae=Z.data();M.set(Z.id,String(ae.name??"-"))})})}return k.map($=>{const O=$.bill_id?V.get($.bill_id):null,W=(O==null?void 0:O.vendorId)&&M.get(O.vendorId)||"-";return{id:$.id,bill_id:$.bill_id,bill_number:(O==null?void 0:O.billNumber)||"-",vendor_name:W,amount:$.amount,payment_date:$.payment_date,notes:$.notes,journal_entry_id:$.journal_entry_id,is_reversed:$.is_reversed}}).sort(($,O)=>O.payment_date.localeCompare($.payment_date))},enabled:!!t}),y=Xe({mutationFn:async E=>{if(!t)throw new Error("Not authenticated");if(!E.journal_entry_id)throw new Error("Payment has no posted journal entry to reverse.");const A=await Be.getPrimaryMembershipByUser(t.id);if(!(A!=null&&A.companyId))throw new Error("No company profile found for your account");const I=prompt(`Reason for reversing payment for ${E.bill_number} (optional):`)||void 0;return _n.reverseJournalEntry({companyId:A.companyId,journalEntryId:E.journal_entry_id,reason:I})},onSuccess:()=>{n.invalidateQueries({queryKey:["accounts-payable"]}),n.invalidateQueries({queryKey:["accounts-payable-payments"]}),n.invalidateQueries({queryKey:["bills"]}),n.invalidateQueries({queryKey:["vendors"]}),n.invalidateQueries({queryKey:["bank-accounts"]}),n.invalidateQueries({queryKey:["journal-entries"]}),n.invalidateQueries({queryKey:["financial-reports"]}),n.invalidateQueries({queryKey:["dashboard"]}),Y.success("Bill payment journal entry reversed")},onError:E=>{Y.error(`Failed to reverse payment: ${E.message}`)}}),p=E=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(E),v=d.filter(E=>E.status.toLowerCase()!=="paid"),b=v.filter(E=>E.due_date&&zne(new Date(E.due_date))),x=v.filter(E=>{if(!E.due_date)return!1;const A=Ns(new Date(E.due_date),new Date);return A>=0&&A<=7}),w=d.filter(E=>E.status.toLowerCase()==="paid"),C=v.reduce((E,A)=>E+(A.total||0),0),S=b.reduce((E,A)=>E+(A.total||0),0),P=w.reduce((E,A)=>E+(A.total||0),0),j=()=>{rf(d,[{header:"Bill Number",key:"bill_number"},{header:"Bill Date",key:"bill_date"},{header:"Due Date",key:"due_date"},{header:"Amount",key:"total"},{header:"Status",key:"status"}],`accounts-payable-${r}-to-${a}`)},g=[{key:"bill_number",header:"Bill Number",required:!0},{key:"vendor_name",header:"Vendor Name",required:!1},{key:"bill_date",header:"Bill Date (YYYY-MM-DD)",required:!0},{key:"due_date",header:"Due Date (YYYY-MM-DD)",required:!1},{key:"amount",header:"Amount",required:!0},{key:"description",header:"Description",required:!1}],T=async E=>{if(!t)throw new Error("You must be logged in");const A=await Be.getPrimaryMembershipByUser(t.id);if(!(A!=null&&A.companyId))throw new Error("No company profile found for your account");for(const I of E){const k=String(I.bill_date||new Date().toISOString().slice(0,10)),L=I.due_date||k,V=Number(I.amount)||0;await _n.createBill({companyId:A.companyId,amount:V,billDate:k,dueDate:L,categoryName:"Miscellaneous",description:I.description||"Imported bill"})}f(),Y.success("Bills imported successfully")};return h?i.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Accounts Payable"}),i.jsx("p",{className:"text-muted-foreground",children:"Track and manage vendor bills and payments"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(H,{variant:"outline",onClick:()=>c(!0),children:[i.jsx(nl,{className:"mr-2 h-4 w-4"}),"Import"]}),i.jsxs(H,{variant:"outline",onClick:j,children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export"]})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"Report Period"})}),i.jsx(re,{children:i.jsxs("div",{className:"flex gap-4 items-end",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Start Date"}),i.jsx(G,{type:"date",value:r,onChange:E=>s(E.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"End Date"}),i.jsx(G,{type:"date",value:a,onChange:E=>o(E.target.value)})]})]})})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(X,{children:[i.jsx(te,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(dr,{className:"h-4 w-4"}),"Total Bills"]})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:d.length})})]}),i.jsxs(X,{children:[i.jsx(te,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx($i,{className:"h-4 w-4 text-warning"}),"Outstanding"]})}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-warning",children:p(C)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[v.length," bills"]})]})]}),i.jsxs(X,{children:[i.jsx(te,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(ks,{className:"h-4 w-4 text-destructive"}),"Overdue"]})}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-destructive",children:p(S)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[b.length," bills"]})]})]}),i.jsxs(X,{children:[i.jsx(te,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Qo,{className:"h-4 w-4 text-success"}),"Paid"]})}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-success",children:p(P)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.length," bills"]})]})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"Aging Summary"})}),i.jsx(re,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Category"}),i.jsx(q,{className:"text-right",children:"Bills"}),i.jsx(q,{className:"text-right",children:"Amount"})]})}),i.jsxs(Ut,{children:[i.jsxs(je,{children:[i.jsx(U,{children:"Current (not due)"}),i.jsx(U,{className:"text-right",children:v.filter(E=>!E.due_date||Ns(new Date(E.due_date),new Date)>7).length}),i.jsx(U,{className:"text-right",children:p(v.filter(E=>!E.due_date||Ns(new Date(E.due_date),new Date)>7).reduce((E,A)=>E+(A.total||0),0))})]}),i.jsxs(je,{children:[i.jsx(U,{children:"Due within 7 days"}),i.jsx(U,{className:"text-right",children:x.length}),i.jsx(U,{className:"text-right text-warning",children:p(x.reduce((E,A)=>E+(A.total||0),0))})]}),i.jsxs(je,{children:[i.jsx(U,{children:"1-30 days overdue"}),i.jsx(U,{className:"text-right",children:b.filter(E=>Ns(new Date,new Date(E.due_date||""))<=30).length}),i.jsx(U,{className:"text-right text-destructive",children:p(b.filter(E=>Ns(new Date,new Date(E.due_date||""))<=30).reduce((E,A)=>E+(A.total||0),0))})]}),i.jsxs(je,{children:[i.jsx(U,{children:"Over 30 days overdue"}),i.jsx(U,{className:"text-right",children:b.filter(E=>Ns(new Date,new Date(E.due_date||""))>30).length}),i.jsx(U,{className:"text-right text-destructive font-bold",children:p(b.filter(E=>Ns(new Date,new Date(E.due_date||""))>30).reduce((E,A)=>E+(A.total||0),0))})]})]})]})})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"All Bills"})}),i.jsx(re,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Bill #"}),i.jsx(q,{children:"Vendor"}),i.jsx(q,{children:"Bill Date"}),i.jsx(q,{children:"Due Date"}),i.jsx(q,{className:"text-right",children:"Amount"}),i.jsx(q,{children:"Status"}),i.jsx(q,{children:"Days Overdue"})]})}),i.jsx(Ut,{children:d.map(E=>{var I;const A=E.due_date&&E.status.toLowerCase()!=="paid"?Math.max(0,Ns(new Date,new Date(E.due_date))):0;return i.jsxs(je,{children:[i.jsx(U,{className:"font-medium",children:E.bill_number}),i.jsx(U,{children:((I=E.vendors)==null?void 0:I.name)||"-"}),i.jsx(U,{children:mt(new Date(E.bill_date),"dd MMM yyyy")}),i.jsx(U,{children:E.due_date?mt(new Date(E.due_date),"dd MMM yyyy"):"-"}),i.jsx(U,{className:"text-right",children:p(E.total)}),i.jsx(U,{children:i.jsx(Ve,{variant:E.status.toLowerCase()==="paid"?"default":A>0?"destructive":"secondary",children:E.status})}),i.jsx(U,{children:E.status.toLowerCase()==="paid"?"-":A>0?`${A} days`:"Current"})]},E.id)})})]})})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"Bill Payments"})}),i.jsx(re,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Date"}),i.jsx(q,{children:"Bill #"}),i.jsx(q,{children:"Vendor"}),i.jsx(q,{className:"text-right",children:"Amount"}),i.jsx(q,{children:"Notes"}),i.jsx(q,{children:"Status"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ut,{children:[m.map(E=>i.jsxs(je,{children:[i.jsx(U,{children:E.payment_date?mt(new Date(E.payment_date),"dd MMM yyyy"):"-"}),i.jsx(U,{className:"font-medium",children:E.bill_number}),i.jsx(U,{children:E.vendor_name}),i.jsx(U,{className:"text-right",children:p(E.amount)}),i.jsx(U,{children:E.notes||"-"}),i.jsx(U,{children:E.is_reversed?i.jsx(Ve,{variant:"outline",className:"text-orange-600 border-orange-600",children:"Reversed"}):i.jsx(Ve,{variant:"secondary",children:"Posted"})}),i.jsx(U,{className:"text-right",children:E.journal_entry_id&&u&&!E.is_reversed&&i.jsx(H,{variant:"ghost",size:"icon",disabled:y.isPending,onClick:()=>{confirm("Reverse this bill payment entry?")&&y.mutate(E)},title:"Reverse payment entry",children:i.jsx(Cl,{className:"h-4 w-4"})})})]},E.id)),m.length===0&&i.jsx(je,{children:i.jsx(U,{colSpan:7,className:"text-center text-muted-foreground",children:"No payments in selected period"})})]})]})})]}),i.jsx(pg,{open:l,onOpenChange:c,onImport:T,columns:g,title:"Import Bills"})]})}const $A=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},FA=t=>{if(!t)return"";if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString().slice(0,10);if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString().slice(0,10)}return""};function itt(){const{user:t}=ht(),{data:e}=ei(),n=tn(),[r,s]=_.useState(()=>{const E=new Date;return E.setMonth(E.getMonth()-3),E.toISOString().split("T")[0]}),[a,o]=_.useState(new Date().toISOString().split("T")[0]),[l,c]=_.useState(!1),u=["super_admin","admin","financial_manager","accountant","assistant_accountant"].includes(e||""),{data:d=[],isLoading:h,refetch:f}=Ee({queryKey:["accounts-receivable",r,a,t==null?void 0:t.id],queryFn:async()=>{if(!t)return[];const E=await Be.getPrimaryMembershipByUser(t.id);if(!(E!=null&&E.companyId))return[];const A=we(se,Q.INVOICES),k=(await Ce(Te(A,he("companyId","==",E.companyId)))).docs.map(B=>{const M=B.data();return{id:B.id,invoice_number:String(M.invoiceNumber??M.invoice_number??`INV-${B.id.slice(0,8).toUpperCase()}`),invoice_date:FA(M.invoiceDate??M.invoice_date),due_date:FA(M.dueDate??M.due_date)||null,total:Number(M.total??0),status:String(M.status??"draft"),customer_id:M.customerId??M.customer_id??null,customers:null}}).filter(B=>B.invoice_date>=r&&B.invoice_date<=a),L=Array.from(new Set(k.map(B=>B.customer_id).filter(Boolean))),V=new Map;if(L.length>0){const B=we(se,Q.CUSTOMERS),M=$A(L,30);(await Promise.all(M.map(O=>Ce(Te(B,he(to(),"in",O)))))).forEach(O=>{O.docs.forEach(W=>{const Z=W.data();V.set(W.id,String(Z.name??"-"))})})}return k.map(B=>({...B,customers:B.customer_id?{name:V.get(B.customer_id)||"-"}:null})).sort((B,M)=>String(B.due_date||"").localeCompare(String(M.due_date||"")))},enabled:!!t}),{data:m=[]}=Ee({queryKey:["accounts-receivable-payments",r,a,t==null?void 0:t.id],queryFn:async()=>{if(!t)return[];const E=await Be.getPrimaryMembershipByUser(t.id);if(!(E!=null&&E.companyId))return[];const A=we(se,Q.INVOICE_PAYMENTS),k=(await Ce(Te(A,he("companyId","==",E.companyId)))).docs.map($=>{const O=$.data();return{id:$.id,invoice_id:O.invoiceId??O.invoice_id??null,amount:Number(O.amount??0),payment_date:FA(O.paymentDate??O.payment_date),notes:O.notes??null,journal_entry_id:O.journalEntryId??O.journal_entry_id??null,is_reversed:!!(O.isReversed??O.is_reversed??!1)}}).filter($=>$.payment_date>=r&&$.payment_date<=a),L=Array.from(new Set(k.map($=>$.invoice_id).filter(Boolean))),V=new Map;if(L.length>0){const $=$A(L,30);(await Promise.all($.map(W=>Ce(Te(we(se,Q.INVOICES),he(to(),"in",W)))))).forEach(W=>{W.docs.forEach(Z=>{const ae=Z.data();V.set(Z.id,{invoiceNumber:String(ae.invoiceNumber??ae.invoice_number??`INV-${Z.id.slice(0,8).toUpperCase()}`),customerId:ae.customerId??ae.customer_id??null})})})}const B=Array.from(new Set(Array.from(V.values()).map($=>$.customerId).filter(Boolean))),M=new Map;if(B.length>0){const $=$A(B,30);(await Promise.all($.map(W=>Ce(Te(we(se,Q.CUSTOMERS),he(to(),"in",W)))))).forEach(W=>{W.docs.forEach(Z=>{const ae=Z.data();M.set(Z.id,String(ae.name??"-"))})})}return k.map($=>{const O=$.invoice_id?V.get($.invoice_id):null,W=(O==null?void 0:O.customerId)&&M.get(O.customerId)||"-";return{id:$.id,invoice_id:$.invoice_id,invoice_number:(O==null?void 0:O.invoiceNumber)||"-",customer_name:W,amount:$.amount,payment_date:$.payment_date,notes:$.notes,journal_entry_id:$.journal_entry_id,is_reversed:$.is_reversed}}).sort(($,O)=>O.payment_date.localeCompare($.payment_date))},enabled:!!t}),y=Xe({mutationFn:async E=>{if(!t)throw new Error("Not authenticated");if(!E.journal_entry_id)throw new Error("Payment has no posted journal entry to reverse.");const A=await Be.getPrimaryMembershipByUser(t.id);if(!(A!=null&&A.companyId))throw new Error("No company profile found for your account");const I=prompt(`Reason for reversing payment for ${E.invoice_number} (optional):`)||void 0;return _n.reverseJournalEntry({companyId:A.companyId,journalEntryId:E.journal_entry_id,reason:I})},onSuccess:()=>{n.invalidateQueries({queryKey:["accounts-receivable"]}),n.invalidateQueries({queryKey:["accounts-receivable-payments"]}),n.invalidateQueries({queryKey:["invoices"]}),n.invalidateQueries({queryKey:["customers"]}),n.invalidateQueries({queryKey:["bank-accounts"]}),n.invalidateQueries({queryKey:["journal-entries"]}),n.invalidateQueries({queryKey:["financial-reports"]}),n.invalidateQueries({queryKey:["dashboard"]}),Y.success("Invoice payment journal entry reversed")},onError:E=>{Y.error(`Failed to reverse payment: ${E.message}`)}}),p=E=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(E),v=d.filter(E=>E.status.toLowerCase()!=="paid"),b=v.filter(E=>E.due_date&&zne(new Date(E.due_date))),x=v.filter(E=>{if(!E.due_date)return!1;const A=Ns(new Date(E.due_date),new Date);return A>=0&&A<=7}),w=d.filter(E=>E.status.toLowerCase()==="paid"),C=v.reduce((E,A)=>E+(A.total||0),0),S=b.reduce((E,A)=>E+(A.total||0),0),P=w.reduce((E,A)=>E+(A.total||0),0),j=()=>{rf(d,[{header:"Invoice Number",key:"invoice_number"},{header:"Invoice Date",key:"invoice_date"},{header:"Due Date",key:"due_date"},{header:"Amount",key:"total"},{header:"Status",key:"status"}],`accounts-receivable-${r}-to-${a}`)},g=[{key:"invoice_number",header:"Invoice Number",required:!0},{key:"customer_name",header:"Customer Name",required:!1},{key:"invoice_date",header:"Invoice Date (YYYY-MM-DD)",required:!0},{key:"due_date",header:"Due Date (YYYY-MM-DD)",required:!1},{key:"amount",header:"Amount",required:!0},{key:"notes",header:"Notes",required:!1}],T=async E=>{if(!t)throw new Error("You must be logged in");const A=await Be.getPrimaryMembershipByUser(t.id);if(!(A!=null&&A.companyId))throw new Error("No company profile found for your account");for(const I of E){const k=String(I.invoice_date||new Date().toISOString().slice(0,10)),L=I.due_date||k,V=Number(I.amount)||0;await _n.createInvoice({companyId:A.companyId,invoiceNumber:String(I.invoice_number||"").trim()||void 0,invoiceDate:k,dueDate:L,status:"Unpaid",notes:I.notes||void 0,totalAmount:V,lineItems:[{description:I.notes||"Imported invoice",quantity:1,unitPrice:V}]})}f(),Y.success("Invoices imported successfully")};return h?i.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Accounts Receivable"}),i.jsx("p",{className:"text-muted-foreground",children:"Track customer invoices and collections"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(H,{variant:"outline",onClick:()=>c(!0),children:[i.jsx(nl,{className:"mr-2 h-4 w-4"}),"Import"]}),i.jsxs(H,{variant:"outline",onClick:j,children:[i.jsx(Rs,{className:"mr-2 h-4 w-4"}),"Export"]})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"Report Period"})}),i.jsx(re,{children:i.jsxs("div",{className:"flex gap-4 items-end",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Start Date"}),i.jsx(G,{type:"date",value:r,onChange:E=>s(E.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"End Date"}),i.jsx(G,{type:"date",value:a,onChange:E=>o(E.target.value)})]})]})})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(X,{children:[i.jsx(te,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(dr,{className:"h-4 w-4"}),"Total Invoices"]})}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:d.length})})]}),i.jsxs(X,{children:[i.jsx(te,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(ga,{className:"h-4 w-4 text-primary"}),"Receivable"]})}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-primary",children:p(C)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[v.length," invoices"]})]})]}),i.jsxs(X,{children:[i.jsx(te,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(ks,{className:"h-4 w-4 text-destructive"}),"Overdue"]})}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-destructive",children:p(S)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[b.length," invoices"]})]})]}),i.jsxs(X,{children:[i.jsx(te,{className:"pb-2",children:i.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Qo,{className:"h-4 w-4 text-success"}),"Collected"]})}),i.jsxs(re,{children:[i.jsx("div",{className:"text-2xl font-bold text-success",children:p(P)}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.length," invoices"]})]})]})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"Aging Summary"})}),i.jsx(re,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Category"}),i.jsx(q,{className:"text-right",children:"Invoices"}),i.jsx(q,{className:"text-right",children:"Amount"})]})}),i.jsxs(Ut,{children:[i.jsxs(je,{children:[i.jsx(U,{children:"Current (not due)"}),i.jsx(U,{className:"text-right",children:v.filter(E=>!E.due_date||Ns(new Date(E.due_date),new Date)>7).length}),i.jsx(U,{className:"text-right",children:p(v.filter(E=>!E.due_date||Ns(new Date(E.due_date),new Date)>7).reduce((E,A)=>E+(A.total||0),0))})]}),i.jsxs(je,{children:[i.jsx(U,{children:"Due within 7 days"}),i.jsx(U,{className:"text-right",children:x.length}),i.jsx(U,{className:"text-right text-warning",children:p(x.reduce((E,A)=>E+(A.total||0),0))})]}),i.jsxs(je,{children:[i.jsx(U,{children:"1-30 days overdue"}),i.jsx(U,{className:"text-right",children:b.filter(E=>Ns(new Date,new Date(E.due_date||""))<=30).length}),i.jsx(U,{className:"text-right text-destructive",children:p(b.filter(E=>Ns(new Date,new Date(E.due_date||""))<=30).reduce((E,A)=>E+(A.total||0),0))})]}),i.jsxs(je,{children:[i.jsx(U,{children:"Over 30 days overdue"}),i.jsx(U,{className:"text-right",children:b.filter(E=>Ns(new Date,new Date(E.due_date||""))>30).length}),i.jsx(U,{className:"text-right text-destructive font-bold",children:p(b.filter(E=>Ns(new Date,new Date(E.due_date||""))>30).reduce((E,A)=>E+(A.total||0),0))})]})]})]})})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"All Invoices"})}),i.jsx(re,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Invoice #"}),i.jsx(q,{children:"Customer"}),i.jsx(q,{children:"Invoice Date"}),i.jsx(q,{children:"Due Date"}),i.jsx(q,{className:"text-right",children:"Amount"}),i.jsx(q,{children:"Status"}),i.jsx(q,{children:"Days Overdue"})]})}),i.jsx(Ut,{children:d.map(E=>{var I;const A=E.due_date&&E.status.toLowerCase()!=="paid"?Math.max(0,Ns(new Date,new Date(E.due_date))):0;return i.jsxs(je,{children:[i.jsx(U,{className:"font-medium",children:E.invoice_number}),i.jsx(U,{children:((I=E.customers)==null?void 0:I.name)||"-"}),i.jsx(U,{children:mt(new Date(E.invoice_date),"dd MMM yyyy")}),i.jsx(U,{children:E.due_date?mt(new Date(E.due_date),"dd MMM yyyy"):"-"}),i.jsx(U,{className:"text-right",children:p(E.total)}),i.jsx(U,{children:i.jsx(Ve,{variant:E.status.toLowerCase()==="paid"?"default":A>0?"destructive":"secondary",children:E.status})}),i.jsx(U,{children:E.status.toLowerCase()==="paid"?"-":A>0?`${A} days`:"Current"})]},E.id)})})]})})]}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"Invoice Payments"})}),i.jsx(re,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Date"}),i.jsx(q,{children:"Invoice #"}),i.jsx(q,{children:"Customer"}),i.jsx(q,{className:"text-right",children:"Amount"}),i.jsx(q,{children:"Notes"}),i.jsx(q,{children:"Status"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsxs(Ut,{children:[m.map(E=>i.jsxs(je,{children:[i.jsx(U,{children:E.payment_date?mt(new Date(E.payment_date),"dd MMM yyyy"):"-"}),i.jsx(U,{className:"font-medium",children:E.invoice_number}),i.jsx(U,{children:E.customer_name}),i.jsx(U,{className:"text-right",children:p(E.amount)}),i.jsx(U,{children:E.notes||"-"}),i.jsx(U,{children:E.is_reversed?i.jsx(Ve,{variant:"outline",className:"text-orange-600 border-orange-600",children:"Reversed"}):i.jsx(Ve,{variant:"secondary",children:"Posted"})}),i.jsx(U,{className:"text-right",children:E.journal_entry_id&&u&&!E.is_reversed&&i.jsx(H,{variant:"ghost",size:"icon",disabled:y.isPending,onClick:()=>{confirm("Reverse this invoice payment entry?")&&y.mutate(E)},title:"Reverse payment entry",children:i.jsx(Cl,{className:"h-4 w-4"})})})]},E.id)),m.length===0&&i.jsx(je,{children:i.jsx(U,{colSpan:7,className:"text-center text-muted-foreground",children:"No payments in selected period"})})]})]})})]}),i.jsx(pg,{open:l,onOpenChange:c,onImport:T,columns:g,title:"Import Invoices"})]})}function att(){const{user:t}=ht(),e=tn(),[n,r]=_.useState(""),[s,a]=_.useState(!1),[o,l]=_.useState({asset_number:"",name:"",description:"",category_id:"",purchase_date:new Date().toISOString().split("T")[0],purchase_cost:"",residual_value:"0",useful_life_months:"60",depreciation_method:"straight_line",location:"",serial_number:""}),{data:c}=Ee({queryKey:["fixed-assets-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const x=await Be.getPrimaryMembershipByUser(t.id);return(x==null?void 0:x.companyId)??null},enabled:!!t}),{data:u,isLoading:d}=Ee({queryKey:["fixed-assets",c],queryFn:async()=>{if(!c)return[];const x=we(se,Q.FIXED_ASSETS),w=we(se,Q.ASSET_CATEGORIES),[C,S]=await Promise.all([Ce(Te(x,he("companyId","==",c))),Ce(Te(w,he("companyId","==",c)))]),P=new Map;return S.docs.forEach(j=>{const g=j.data();P.set(j.id,{name:String(g.name??""),depreciation_method:g.depreciationMethod??g.depreciation_method??null,useful_life_years:Number(g.usefulLifeYears??g.useful_life_years??0)||null})}),C.docs.map(j=>{var I;const g=j.data(),T=g.createdAt??g.created_at,E=typeof T=="string"?T:((I=T==null?void 0:T.toDate)==null?void 0:I.call(T).toISOString())??"",A=g.categoryId??g.category_id??null;return{id:j.id,user_id:String(g.userId??g.user_id??""),company_id:String(g.companyId??g.company_id??""),asset_number:String(g.assetNumber??g.asset_number??""),name:String(g.name??""),description:g.description??null,category_id:A,purchase_date:String(g.purchaseDate??g.purchase_date??""),purchase_cost:Number(g.purchaseCost??g.purchase_cost??0),residual_value:Number(g.residualValue??g.residual_value??0),useful_life_months:Number(g.usefulLifeMonths??g.useful_life_months??0),depreciation_method:String(g.depreciationMethod??g.depreciation_method??"straight_line"),location:g.location??null,serial_number:g.serialNumber??g.serial_number??null,net_book_value:Number(g.netBookValue??g.net_book_value??g.purchaseCost??g.purchase_cost??0),accumulated_depreciation:Number(g.accumulatedDepreciation??g.accumulated_depreciation??0),status:String(g.status??"active"),is_deleted:!!(g.isDeleted??g.is_deleted??!1),created_at:E,asset_categories:A?P.get(A)??null:null}}).filter(j=>!j.is_deleted).sort((j,g)=>g.created_at.localeCompare(j.created_at))},enabled:!!c}),{data:h}=Ee({queryKey:["asset-categories",c],queryFn:async()=>{if(!c)return[];const x=we(se,Q.ASSET_CATEGORIES);return(await Ce(Te(x,he("companyId","==",c)))).docs.map(C=>{const S=C.data();return{id:C.id,name:String(S.name??"")}}).sort((C,S)=>C.name.localeCompare(S.name))},enabled:!!c}),f=Xe({mutationFn:async()=>{if(!t||!c)throw new Error("Not authenticated");const x=parseFloat(o.purchase_cost),w=parseFloat(o.residual_value)||0,C=parseInt(o.useful_life_months,10),S=C>0?Math.max(0,(x-w)/C):0;await es(we(se,Q.FIXED_ASSETS),{userId:t.id,companyId:c,assetNumber:o.asset_number,name:o.name,description:o.description||null,categoryId:o.category_id||null,purchaseDate:o.purchase_date,purchaseCost:x,residualValue:w,usefulLifeMonths:C,depreciationMethod:o.depreciation_method,location:o.location||null,serialNumber:o.serial_number||null,monthlyDepreciation:S,netBookValue:x,accumulatedDepreciation:0,status:"active",isDeleted:!1,createdAt:Re(),updatedAt:Re()})},onSuccess:()=>{e.invalidateQueries({queryKey:["fixed-assets",c]}),Y.success("Asset created successfully"),a(!1),l({asset_number:"",name:"",description:"",category_id:"",purchase_date:new Date().toISOString().split("T")[0],purchase_cost:"",residual_value:"0",useful_life_months:"60",depreciation_method:"straight_line",location:"",serial_number:""})},onError:x=>{Y.error(x.message||"Failed to create asset")}}),m=u==null?void 0:u.filter(x=>x.name.toLowerCase().includes(n.toLowerCase())||x.asset_number.toLowerCase().includes(n.toLowerCase())),y=(u==null?void 0:u.reduce((x,w)=>x+Number(w.purchase_cost||0),0))||0,p=(u==null?void 0:u.reduce((x,w)=>x+Number(w.accumulated_depreciation||0),0))||0,v=(u==null?void 0:u.reduce((x,w)=>x+Number(w.net_book_value||w.purchase_cost||0),0))||0,b=x=>{switch(x){case"active":return i.jsx(Ve,{className:"bg-green-600",children:"Active"});case"disposed":return i.jsx(Ve,{variant:"destructive",children:"Disposed"});case"fully_depreciated":return i.jsx(Ve,{variant:"secondary",children:"Fully Depreciated"});case"under_maintenance":return i.jsx(Ve,{variant:"outline",className:"text-yellow-600 border-yellow-600",children:"Maintenance"});default:return i.jsx(Ve,{variant:"outline",children:x})}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Fixed Assets"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your organization's fixed assets and depreciation"})]}),i.jsxs(Jn,{open:s,onOpenChange:a,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(H,{children:[i.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Add Asset"]})}),i.jsxs(Hn,{className:"max-w-2xl",children:[i.jsxs(Kn,{children:[i.jsx(Gn,{children:"Add New Fixed Asset"}),i.jsx(dd,{children:"Enter the details of the new asset"})]}),i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Asset Number *"}),i.jsx(G,{value:o.asset_number,onChange:x=>l({...o,asset_number:x.target.value}),placeholder:"FA-001"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Asset Name *"}),i.jsx(G,{value:o.name,onChange:x=>l({...o,name:x.target.value}),placeholder:"Office Computer"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Description"}),i.jsx(Zn,{value:o.description,onChange:x=>l({...o,description:x.target.value}),placeholder:"Asset description..."})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Category"}),i.jsxs(Tt,{value:o.category_id,onValueChange:x=>l({...o,category_id:x}),children:[i.jsx(jt,{children:i.jsx(Ct,{placeholder:"Select category"})}),i.jsx(Nt,{children:h==null?void 0:h.map(x=>i.jsx(be,{value:x.id,children:x.name},x.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Purchase Date *"}),i.jsx(G,{type:"date",value:o.purchase_date,onChange:x=>l({...o,purchase_date:x.target.value})})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Purchase Cost (ZMW) *"}),i.jsx(G,{type:"number",value:o.purchase_cost,onChange:x=>l({...o,purchase_cost:x.target.value}),placeholder:"0.00"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Residual Value (ZMW)"}),i.jsx(G,{type:"number",value:o.residual_value,onChange:x=>l({...o,residual_value:x.target.value}),placeholder:"0.00"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Useful Life (Months)"}),i.jsx(G,{type:"number",value:o.useful_life_months,onChange:x=>l({...o,useful_life_months:x.target.value}),placeholder:"60"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Depreciation Method"}),i.jsxs(Tt,{value:o.depreciation_method,onValueChange:x=>l({...o,depreciation_method:x}),children:[i.jsx(jt,{children:i.jsx(Ct,{})}),i.jsxs(Nt,{children:[i.jsx(be,{value:"straight_line",children:"Straight Line"}),i.jsx(be,{value:"reducing_balance",children:"Reducing Balance"}),i.jsx(be,{value:"units_of_production",children:"Units of Production"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Location"}),i.jsx(G,{value:o.location,onChange:x=>l({...o,location:x.target.value}),placeholder:"Head Office"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Serial Number"}),i.jsx(G,{value:o.serial_number,onChange:x=>l({...o,serial_number:x.target.value}),placeholder:"SN-12345"})]})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),i.jsxs(H,{onClick:()=>f.mutate(),disabled:!o.asset_number||!o.name||!o.purchase_cost||f.isPending,children:[f.isPending?i.jsx(mn,{className:"h-4 w-4 animate-spin mr-2"}):null,"Create Asset"]})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(X,{children:i.jsxs(te,{className:"pb-2",children:[i.jsxs(pt,{className:"flex items-center gap-2",children:[i.jsx(aa,{className:"h-4 w-4"}),"Total Assets"]}),i.jsx(ne,{className:"text-2xl",children:(u==null?void 0:u.length)||0})]})}),i.jsx(X,{children:i.jsxs(te,{className:"pb-2",children:[i.jsx(pt,{children:"Total Asset Value"}),i.jsx(ne,{className:"text-2xl text-primary",children:ue(y)})]})}),i.jsx(X,{children:i.jsxs(te,{className:"pb-2",children:[i.jsxs(pt,{className:"flex items-center gap-2",children:[i.jsx(lo,{className:"h-4 w-4"}),"Accumulated Depreciation"]}),i.jsx(ne,{className:"text-2xl text-destructive",children:ue(p)})]})}),i.jsx(X,{className:"bg-primary/5 border-primary/20",children:i.jsxs(te,{className:"pb-2",children:[i.jsxs(pt,{className:"flex items-center gap-2",children:[i.jsx(mv,{className:"h-4 w-4"}),"Net Book Value"]}),i.jsx(ne,{className:"text-2xl text-primary",children:ue(v)})]})})]}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"relative flex-1 max-w-sm",children:[i.jsx(Ds,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(G,{placeholder:"Search assets...",value:n,onChange:x=>r(x.target.value),className:"pl-9"})]})}),i.jsxs(X,{children:[i.jsx(te,{children:i.jsx(ne,{children:"Asset Register"})}),i.jsx(re,{children:d?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx(mn,{className:"h-8 w-8 animate-spin"})}):m&&m.length>0?i.jsx("div",{className:"border rounded-lg overflow-x-auto",children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Asset #"}),i.jsx(q,{children:"Name"}),i.jsx(q,{children:"Category"}),i.jsx(q,{children:"Purchase Date"}),i.jsx(q,{className:"text-right",children:"Cost"}),i.jsx(q,{className:"text-right",children:"Accum. Dep."}),i.jsx(q,{className:"text-right",children:"NBV"}),i.jsx(q,{children:"Status"})]})}),i.jsx(Ut,{children:m.map(x=>{var w;return i.jsxs(je,{children:[i.jsx(U,{className:"font-mono",children:x.asset_number}),i.jsx(U,{children:i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:x.name}),x.serial_number&&i.jsxs("p",{className:"text-sm text-muted-foreground",children:["SN: ",x.serial_number]})]})}),i.jsx(U,{children:((w=x.asset_categories)==null?void 0:w.name)||"-"}),i.jsx(U,{children:mt(new Date(x.purchase_date),"dd MMM yyyy")}),i.jsx(U,{className:"text-right",children:ue(Number(x.purchase_cost))}),i.jsx(U,{className:"text-right text-destructive",children:ue(Number(x.accumulated_depreciation||0))}),i.jsx(U,{className:"text-right font-medium",children:ue(Number(x.net_book_value||x.purchase_cost))}),i.jsx(U,{children:b(x.status||"active")})]},x.id)})})]})}):i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(aa,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No fixed assets found"}),i.jsx("p",{className:"text-sm",children:"Add your first asset to get started"})]})})]})]})}function ott(){const t=tn(),{user:e}=ht(),n=Xe({mutationFn:async({periodMonth:r,postToGL:s=!0})=>{if(!e)throw new Error("Not authenticated");const a=await Be.getPrimaryMembershipByUser(e.id);if(!(a!=null&&a.companyId))throw new Error("No company found");const o=await Ao.runDepreciation({companyId:a.companyId,periodMonth:r,postToGL:s});return{success:o.success,period:r,assets_processed:o.assetsProcessed,total_depreciation:o.totalDepreciation,posted_to_gl:!!s,results:[]}},onSuccess:r=>{Y.success(`Depreciation completed: ${r.assets_processed} assets, K${r.total_depreciation.toFixed(2)} total`),t.invalidateQueries({queryKey:["asset-depreciation"]}),t.invalidateQueries({queryKey:["fixed-assets"]}),t.invalidateQueries({queryKey:["depreciable-assets"]}),t.invalidateQueries({queryKey:["journal-entries"]})},onError:r=>{Y.error(r.message||"Failed to run depreciation")}});return{runDepreciation:n,isRunning:n.isPending,lastResult:n.data}}function ltt(){const{user:t}=ht(),[e,n]=_.useState(mt(q6(new Date,1),"yyyy-MM")),[r,s]=_.useState(!1),[a,o]=_.useState(!0),{runDepreciation:l,isRunning:c,lastResult:u}=ott(),{data:d}=Ee({queryKey:["asset-depreciation-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const b=await Be.getPrimaryMembershipByUser(t.id);return(b==null?void 0:b.companyId)??null},enabled:!!t}),{data:h,isLoading:f}=Ee({queryKey:["asset-depreciation",d,e],queryFn:async()=>{if(!d)return[];const b=Vne(new Date(e+"-01")),x=Fne(b),w=mt(b,"yyyy-MM-dd"),C=mt(x,"yyyy-MM-dd"),[S,P]=await Promise.all([Ce(Te(we(se,Q.DEPRECIATION_ENTRIES),he("companyId","==",d))),Ce(Te(we(se,Q.FIXED_ASSETS),he("companyId","==",d)))]),j=new Map;return P.docs.forEach(g=>{const T=g.data();j.set(g.id,{asset_number:String(T.assetNumber??T.asset_number??""),name:String(T.name??""),purchase_cost:Number(T.purchaseCost??T.purchase_cost??0),depreciation_method:String(T.depreciationMethod??T.depreciation_method??"straight_line")})}),S.docs.map(g=>{const T=g.data(),E=String(T.periodStart??T.period_start??""),A=String(T.periodEnd??T.period_end??"");return{id:g.id,asset_id:String(T.assetId??T.asset_id??""),depreciation_amount:Number(T.depreciationAmount??T.depreciation_amount??0),accumulated_depreciation:Number(T.accumulatedDepreciation??T.accumulated_depreciation??0),net_book_value:Number(T.netBookValue??T.net_book_value??0),is_posted:!!(T.isPosted??T.is_posted??!1),period_start:E,period_end:A,created_at:String(T.createdAt??T.created_at??""),fixed_assets:j.get(String(T.assetId??T.asset_id??""))??null}}).filter(g=>g.period_start>=w&&g.period_end<=C).sort((g,T)=>String(T.created_at).localeCompare(String(g.created_at)))},enabled:!!d}),{data:m}=Ee({queryKey:["depreciable-assets",d],queryFn:async()=>d?(await Ce(Te(we(se,Q.FIXED_ASSETS),he("companyId","==",d),he("status","==","active")))).docs.map(x=>{const w=x.data();return{id:x.id,status:String(w.status??"active"),is_deleted:!!(w.isDeleted??w.is_deleted??!1)}}).filter(x=>!x.is_deleted):[],enabled:!!d}),y=async()=>{try{await l.mutateAsync({periodMonth:e,postToGL:a}),s(!1)}catch{}},p=(h==null?void 0:h.reduce((b,x)=>b+Number(x.depreciation_amount||0),0))||0,v=Array.from({length:12},(b,x)=>{const w=q6(new Date,x);return{value:mt(w,"yyyy-MM"),label:mt(w,"MMMM yyyy")}});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Asset Depreciation"}),i.jsx("p",{className:"text-muted-foreground",children:"Run and view depreciation calculations"})]}),i.jsxs(H,{onClick:()=>s(!0),children:[i.jsx(u8,{className:"h-4 w-4 mr-2"}),"Run Depreciation"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(X,{children:i.jsxs(te,{className:"pb-2",children:[i.jsxs(pt,{className:"flex items-center gap-2",children:[i.jsx(mv,{className:"h-4 w-4"}),"Active Assets"]}),i.jsx(ne,{className:"text-2xl",children:(m==null?void 0:m.filter(b=>b.status==="active").length)||0})]})}),i.jsx(X,{children:i.jsxs(te,{className:"pb-2",children:[i.jsx(pt,{children:"Records This Period"}),i.jsx(ne,{className:"text-2xl",children:(h==null?void 0:h.length)||0})]})}),i.jsx(X,{children:i.jsxs(te,{className:"pb-2",children:[i.jsxs(pt,{className:"flex items-center gap-2",children:[i.jsx(lo,{className:"h-4 w-4 text-destructive"}),"Total Depreciation"]}),i.jsx(ne,{className:"text-2xl text-destructive",children:ue(p)})]})}),i.jsx(X,{className:"bg-muted/50",children:i.jsxs(te,{className:"pb-2",children:[i.jsx(pt,{children:"Posted to GL"}),i.jsx(ne,{className:"text-2xl text-green-600",children:(h==null?void 0:h.filter(b=>b.is_posted).length)||0})]})})]}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs(Tt,{value:e,onValueChange:n,children:[i.jsx(jt,{className:"w-[200px]",children:i.jsx(Ct,{placeholder:"Select month"})}),i.jsx(Nt,{children:v.map(b=>i.jsx(be,{value:b.value,children:b.label},b.value))})]})}),i.jsxs(X,{children:[i.jsxs(te,{children:[i.jsx(ne,{children:"Depreciation Records"}),i.jsxs(pt,{children:["Monthly depreciation entries for ",mt(new Date(e+"-01"),"MMMM yyyy")]})]}),i.jsx(re,{children:f?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(mn,{className:"h-8 w-8 animate-spin"})}):h&&h.length>0?i.jsx("div",{className:"border rounded-lg overflow-x-auto",children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Asset"}),i.jsx(q,{children:"Method"}),i.jsx(q,{className:"text-right",children:"Depreciation"}),i.jsx(q,{className:"text-right",children:"Accum. Dep."}),i.jsx(q,{className:"text-right",children:"NBV"}),i.jsx(q,{children:"Status"})]})}),i.jsx(Ut,{children:h.map(b=>{var x,w,C,S;return i.jsxs(je,{children:[i.jsx(U,{children:i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:(x=b.fixed_assets)==null?void 0:x.name}),i.jsx("p",{className:"text-sm text-muted-foreground font-mono",children:(w=b.fixed_assets)==null?void 0:w.asset_number})]})}),i.jsx(U,{className:"capitalize",children:(S=(C=b.fixed_assets)==null?void 0:C.depreciation_method)==null?void 0:S.replace("_"," ")}),i.jsx(U,{className:"text-right text-destructive",children:ue(Number(b.depreciation_amount))}),i.jsx(U,{className:"text-right",children:ue(Number(b.accumulated_depreciation))}),i.jsx(U,{className:"text-right font-medium",children:ue(Number(b.net_book_value))}),i.jsx(U,{children:b.is_posted?i.jsxs(Ve,{className:"bg-green-600",children:[i.jsx(Qo,{className:"h-3 w-3 mr-1"}),"Posted"]}):i.jsx(Ve,{variant:"outline",children:"Pending"})})]},b.id)})})]})}):i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(lo,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No depreciation records for this period"}),i.jsx("p",{className:"text-sm",children:"Run depreciation to calculate monthly values"})]})})]}),i.jsx(Do,{open:r,onOpenChange:s,children:i.jsxs(Ha,{children:[i.jsxs(Ka,{children:[i.jsxs(Ya,{className:"flex items-center gap-2",children:[i.jsx(Oi,{className:"h-5 w-5 text-amber-500"}),"Run Monthly Depreciation"]}),i.jsxs(Qa,{className:"space-y-2",children:[i.jsx("p",{children:"This will calculate depreciation for all active fixed assets for:"}),i.jsx("p",{className:"font-medium text-foreground",children:mt(new Date(e+"-01"),"MMMM yyyy")}),i.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm mt-4",children:[i.jsx("li",{children:"Calculate depreciation based on each asset's method"}),i.jsx("li",{children:"Update accumulated depreciation and net book value"}),i.jsx("li",{children:"Create journal entries for the GL"}),i.jsx("li",{children:"Mark fully depreciated assets"})]})]})]}),i.jsx("div",{className:"py-4",children:i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(fv,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"Post to General Ledger"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Create journal entries automatically"})]})]}),i.jsx("input",{type:"checkbox",checked:a,onChange:b=>o(b.target.checked),className:"h-4 w-4"})]})}),i.jsxs(Ga,{children:[i.jsx(Za,{children:"Cancel"}),i.jsxs(Xa,{onClick:y,disabled:c,children:[c&&i.jsx(mn,{className:"h-4 w-4 mr-2 animate-spin"}),"Run Depreciation"]})]})]})}),u&&i.jsx(X,{className:"border-green-500/20 bg-green-500/5",children:i.jsxs(te,{className:"pb-2",children:[i.jsxs(ne,{className:"text-sm flex items-center gap-2",children:[i.jsx(Qo,{className:"h-4 w-4 text-green-600"}),"Last Run: ",u.period]}),i.jsxs(pt,{children:[u.assets_processed," assets processed, K",u.total_depreciation.toFixed(2)," total",u.posted_to_gl&&" (Posted to GL)"]})]})})]})}const Bre=t=>{if(!t)return null;if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return null},Kj=t=>{const e=Bre(t);return e?e.slice(0,10):""},ctt=(t,e)=>({id:t,companyId:String(e.companyId??e.company_id??""),yearName:String(e.yearName??e.year_name??""),startDate:Kj(e.startDate??e.start_date),endDate:Kj(e.endDate??e.end_date),status:String(e.status??"open")}),utt=(t,e)=>({id:t,companyId:String(e.companyId??e.company_id??""),financialYearId:String(e.financialYearId??e.financial_year_id??""),periodNumber:Number(e.periodNumber??e.period_number??0),periodName:String(e.periodName??e.period_name??""),startDate:Kj(e.startDate??e.start_date),endDate:Kj(e.endDate??e.end_date),status:String(e.status??"open"),closedAt:Bre(e.closedAt??e.closed_at),closedBy:e.closedBy??e.closed_by??null});function dtt(){const t=tn(),{user:e}=ht(),[n,r]=_.useState(!1),[s,a]=_.useState(null),[o,l]=_.useState(null),[c,u]=_.useState({year_name:`FY ${xf(new Date)}`,start_date:`${xf(new Date)}-01-01`,end_date:`${xf(new Date)}-12-31`}),d=Ee({queryKey:["financial-periods-company-id",e==null?void 0:e.id],queryFn:async()=>{if(!e)return null;const T=await Be.getPrimaryMembershipByUser(e.id);return(T==null?void 0:T.companyId)??null},enabled:!!e}),h=d.data??null,{data:f,isLoading:m}=Ee({queryKey:["financial-years",h],queryFn:async()=>{if(!h)return[];const T=we(se,Q.FINANCIAL_YEARS);return(await Ce(Te(T,he("companyId","==",h)))).docs.map(A=>ctt(A.id,A.data())).sort((A,I)=>I.startDate.localeCompare(A.startDate))},enabled:!!h});_.useEffect(()=>{!o&&f&&f.length>0&&l(f[0].id)},[f,o]);const{data:y,isLoading:p}=Ee({queryKey:["financial-periods",h,o],queryFn:async()=>{if(!h||!o)return[];const T=we(se,Q.FINANCIAL_PERIODS);return(await Ce(Te(T,he("companyId","==",h),he("financialYearId","==",o)))).docs.map(A=>utt(A.id,A.data())).sort((A,I)=>A.periodNumber-I.periodNumber)},enabled:!!(h&&o)}),v=_.useMemo(()=>(y==null?void 0:y.find(T=>T.id===s))??null,[y,s]),b=Xe({mutationFn:async()=>{if(!e)throw new Error("Not authenticated");if(!h)throw new Error("No company profile found for your account");if(!c.year_name.trim())throw new Error("Year name is required");if(c.start_date>c.end_date)throw new Error("Start date must be before end date");const T=new Date(c.start_date),E=Yl(se),A=Je(we(se,Q.FINANCIAL_YEARS));E.set(A,{companyId:h,yearName:c.year_name.trim(),startDate:c.start_date,endDate:c.end_date,status:"open",createdAt:Re(),updatedAt:Re()});for(let I=0;I<12;I+=1){const k=Dne(Vne(T),I),L=Fne(k),V=Je(we(se,Q.FINANCIAL_PERIODS));E.set(V,{companyId:h,financialYearId:A.id,periodNumber:I+1,periodName:mt(k,"MMMM yyyy"),startDate:mt(k,"yyyy-MM-dd"),endDate:mt(L,"yyyy-MM-dd"),status:"open",closedAt:null,closedBy:null,createdAt:Re(),updatedAt:Re()})}await E.commit()},onSuccess:()=>{t.invalidateQueries({queryKey:["financial-years",h]}),t.invalidateQueries({queryKey:["financial-periods",h]}),Y.success("Financial year created with 12 monthly periods"),r(!1),u({year_name:`FY ${xf(new Date)+1}`,start_date:`${xf(new Date)+1}-01-01`,end_date:`${xf(new Date)+1}-12-31`})},onError:T=>{Y.error(T.message||"Failed to create financial year")}}),x=Xe({mutationFn:async T=>{if(!e)throw new Error("Not authenticated");await Kl(Je(se,Q.FINANCIAL_PERIODS,T.id),{status:"closed",closedAt:Re(),closedBy:e.id,updatedAt:Re()}),await xr(Je(se,Q.PERIOD_LOCKS,`${T.companyId}_${T.id}`),{companyId:T.companyId,periodId:T.id,financialYearId:T.financialYearId,periodName:T.periodName,startDate:T.startDate,endDate:T.endDate,status:"closed",lockedBy:e.id,lockedAt:Re(),updatedAt:Re()},{merge:!0})},onSuccess:()=>{t.invalidateQueries({queryKey:["financial-periods",h,o]}),Y.success("Period closed successfully"),a(null)},onError:T=>{Y.error(T.message||"Failed to close period")}}),w=Xe({mutationFn:async T=>{if(!e)throw new Error("Not authenticated");await Kl(Je(se,Q.FINANCIAL_PERIODS,T.id),{status:"open",closedAt:null,closedBy:null,updatedAt:Re()}),await xr(Je(se,Q.PERIOD_LOCKS,`${T.companyId}_${T.id}`),{companyId:T.companyId,periodId:T.id,status:"open",unlockedBy:e.id,unlockedAt:Re(),updatedAt:Re()},{merge:!0})},onSuccess:()=>{t.invalidateQueries({queryKey:["financial-periods",h,o]}),Y.success("Period reopened")},onError:T=>{Y.error(T.message||"Failed to reopen period")}}),C=T=>{switch(T){case"open":return i.jsx(Ve,{className:"bg-green-600",children:"Open"});case"closed":return i.jsx(Ve,{variant:"secondary",children:"Closed"});default:return i.jsx(Ve,{variant:"outline",children:T})}},S=f==null?void 0:f.find(T=>T.status==="open"),P=(y==null?void 0:y.filter(T=>T.status==="open"))??[],j=(y==null?void 0:y.filter(T=>T.status==="closed"))??[],g=d.isLoading||m;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Financial Periods"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage financial years and accounting periods"})]}),i.jsxs(Jn,{open:n,onOpenChange:r,children:[i.jsx(ns,{asChild:!0,children:i.jsxs(H,{disabled:!h,children:[i.jsx(Nn,{className:"h-4 w-4 mr-2"}),"New Financial Year"]})}),i.jsxs(Hn,{children:[i.jsxs(Kn,{children:[i.jsx(Gn,{children:"Create Financial Year"}),i.jsx(dd,{children:"This creates a new financial year with 12 monthly periods."})]}),i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Year Name"}),i.jsx(G,{value:c.year_name,onChange:T=>u({...c,year_name:T.target.value}),placeholder:"FY 2026"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Start Date"}),i.jsx(G,{type:"date",value:c.start_date,onChange:T=>u({...c,start_date:T.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"End Date"}),i.jsx(G,{type:"date",value:c.end_date,onChange:T=>u({...c,end_date:T.target.value})})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),i.jsxs(H,{onClick:()=>b.mutate(),disabled:!c.year_name||b.isPending,children:[b.isPending&&i.jsx(mn,{className:"h-4 w-4 mr-2 animate-spin"}),"Create Year"]})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx(X,{children:i.jsxs(te,{className:"pb-2",children:[i.jsxs(pt,{className:"flex items-center gap-2",children:[i.jsx(Fm,{className:"h-4 w-4"}),"Current Year"]}),i.jsx(ne,{className:"text-xl",children:(S==null?void 0:S.yearName)||"Not Set"})]})}),i.jsx(X,{children:i.jsxs(te,{className:"pb-2",children:[i.jsx(pt,{children:"Total Years"}),i.jsx(ne,{className:"text-2xl",children:(f==null?void 0:f.length)||0})]})}),i.jsx(X,{children:i.jsxs(te,{className:"pb-2",children:[i.jsxs(pt,{className:"flex items-center gap-2",children:[i.jsx(s4,{className:"h-4 w-4 text-green-600"}),"Open Periods"]}),i.jsx(ne,{className:"text-2xl text-green-600",children:P.length})]})}),i.jsx(X,{children:i.jsxs(te,{className:"pb-2",children:[i.jsxs(pt,{className:"flex items-center gap-2",children:[i.jsx(Vm,{className:"h-4 w-4"}),"Closed Periods"]}),i.jsx(ne,{className:"text-2xl",children:j.length})]})})]}),i.jsxs(X,{children:[i.jsxs(te,{children:[i.jsx(ne,{children:"Financial Years"}),i.jsx(pt,{children:"Select a year to view its periods"})]}),i.jsx(re,{children:g?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(mn,{className:"h-8 w-8 animate-spin"})}):h?f&&f.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:f.map(T=>i.jsx(X,{className:`cursor-pointer transition-colors ${o===T.id?"border-primary ring-1 ring-primary":"hover:border-primary/50"}`,onClick:()=>l(T.id),children:i.jsx(re,{className:"pt-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:T.yearName}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[T.startDate?mt(new Date(T.startDate),"dd MMM yyyy"):"-"," ","-"," ",T.endDate?mt(new Date(T.endDate),"dd MMM yyyy"):"-"]})]}),C(T.status||"open")]})})},T.id))}):i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(Fm,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No financial years found"}),i.jsx("p",{className:"text-sm",children:"Create your first financial year to get started"})]}):i.jsx("div",{className:"text-center py-8 text-muted-foreground",children:i.jsx("p",{children:"No company profile found for your account"})})})]}),o&&i.jsxs(X,{children:[i.jsxs(te,{children:[i.jsx(ne,{children:"Accounting Periods"}),i.jsx(pt,{children:"Manage period status. Closed periods prevent back-dated entries."})]}),i.jsx(re,{children:p?i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(mn,{className:"h-8 w-8 animate-spin"})}):y&&y.length>0?i.jsx("div",{className:"border rounded-lg",children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Period"}),i.jsx(q,{children:"Name"}),i.jsx(q,{children:"Start Date"}),i.jsx(q,{children:"End Date"}),i.jsx(q,{children:"Status"}),i.jsx(q,{children:"Closed At"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsx(Ut,{children:y.map(T=>i.jsxs(je,{children:[i.jsxs(U,{className:"font-mono",children:["P",T.periodNumber]}),i.jsx(U,{className:"font-medium",children:T.periodName}),i.jsx(U,{children:T.startDate?mt(new Date(T.startDate),"dd MMM yyyy"):"-"}),i.jsx(U,{children:T.endDate?mt(new Date(T.endDate),"dd MMM yyyy"):"-"}),i.jsx(U,{children:C(T.status||"open")}),i.jsx(U,{children:T.closedAt?mt(new Date(T.closedAt),"dd MMM yyyy HH:mm"):"-"}),i.jsx(U,{className:"text-right",children:T.status==="open"?i.jsxs(H,{variant:"outline",size:"sm",onClick:()=>a(T.id),children:[i.jsx(Vm,{className:"h-4 w-4 mr-2"}),"Close"]}):i.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>w.mutate(T),disabled:w.isPending,children:[i.jsx(s4,{className:"h-4 w-4 mr-2"}),"Reopen"]})})]},T.id))})]})}):i.jsx("div",{className:"text-center py-8 text-muted-foreground",children:i.jsx("p",{children:"No periods found for this year"})})})]}),i.jsx(Do,{open:!!s,onOpenChange:()=>a(null),children:i.jsxs(Ha,{children:[i.jsxs(Ka,{children:[i.jsxs(Ya,{className:"flex items-center gap-2",children:[i.jsx(Oi,{className:"h-5 w-5 text-amber-500"}),"Close Accounting Period"]}),i.jsxs(Qa,{className:"space-y-2",children:[i.jsx("p",{children:"Closing this period will:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[i.jsx("li",{children:"Prevent new entries dated within this period"}),i.jsx("li",{children:"Block modifications to existing entries in this period"}),i.jsx("li",{children:"Lock payroll postings for this period"})]}),i.jsx("p",{className:"mt-4 font-medium",children:"You can reopen the period later if needed."})]})]}),i.jsxs(Ga,{children:[i.jsx(Za,{children:"Cancel"}),i.jsxs(Xa,{onClick:()=>v&&x.mutate(v),disabled:x.isPending||!v,children:[x.isPending&&i.jsx(mn,{className:"h-4 w-4 mr-2 animate-spin"}),"Close Period"]})]})]})})]})}const tz=[{value:"housing",label:"Housing Allowance"},{value:"transport",label:"Transport Allowance"},{value:"meal",label:"Meal Allowance"},{value:"medical",label:"Medical Allowance"},{value:"phone",label:"Phone Allowance"},{value:"fuel",label:"Fuel Allowance"},{value:"education",label:"Education Allowance"},{value:"custom",label:"Custom Allowance"}];function htt({employeeId:t,employeeName:e,contractType:n,basicSalary:r,onClose:s}){const a=tn(),{user:o}=ht(),l=n==="consultant",[c,u]=_.useState({apply_paye:!l,apply_napsa:!l,apply_nhima:!l,pension_enabled:!1,pension_employee_rate:5,pension_employer_rate:5,is_consultant:l,consultant_type:"local",apply_wht:l,rate_type:"monthly",currency:"ZMW"}),[d,h]=_.useState([]),[f,m]=_.useState({allowance_type:"housing",allowance_name:"Housing Allowance",amount:0,is_taxable:!0}),{data:y}=Ee({queryKey:["employee-payroll-profile",t,o==null?void 0:o.id],enabled:!!o,queryFn:async()=>{if(!o)return null;const S=await Be.getPrimaryMembershipByUser(o.id);if(!(S!=null&&S.companyId))return null;const P=Te(we(se,Q.EMPLOYEE_PAYROLL_PROFILES),he("companyId","==",S.companyId),he("employeeId","==",t),Ts(1)),j=await Ce(P);if(j.empty)return null;const g=j.docs[0];return{id:g.id,...g.data()}}}),{data:p}=Ee({queryKey:["employee-allowances",t,o==null?void 0:o.id],enabled:!!o,queryFn:async()=>{if(!o)return[];const S=await Be.getPrimaryMembershipByUser(o.id);if(!(S!=null&&S.companyId))return[];const P=Te(we(se,Q.EMPLOYEE_ALLOWANCES),he("companyId","==",S.companyId),he("employeeId","==",t),he("isActive","==",!0));return(await Ce(P)).docs.map(g=>({id:g.id,...g.data()}))}});_.useEffect(()=>{y&&u({apply_paye:y.applyPaye??y.apply_paye??!l,apply_napsa:y.applyNapsa??y.apply_napsa??!l,apply_nhima:y.applyNhima??y.apply_nhima??!l,pension_enabled:y.pensionEnabled??y.pension_enabled??!1,pension_employee_rate:Number(y.pensionEmployeeRate??y.pension_employee_rate??5),pension_employer_rate:Number(y.pensionEmployerRate??y.pension_employer_rate??5),is_consultant:y.isConsultant??y.is_consultant??l,consultant_type:y.consultantType??y.consultant_type??"local",apply_wht:y.applyWht??y.apply_wht??l,rate_type:y.rateType??y.rate_type??"monthly",currency:y.currency??"ZMW"})},[y,l]),_.useEffect(()=>{p&&h(p.map(S=>({id:S.id,allowance_type:S.allowanceType??S.allowance_type??"custom",allowance_name:S.allowanceName??S.allowance_name??"Allowance",amount:Number(S.amount??0),is_taxable:S.isTaxable??S.is_taxable??!0})))},[p]);const v=Xe({mutationFn:async()=>{if(!o)throw new Error("Not authenticated");const S=await Be.getPrimaryMembershipByUser(o.id);if(!(S!=null&&S.companyId))throw new Error("No company associated with user");const P=y&&typeof y.id=="string"?String(y.id):t,j={employeeId:t,companyId:S.companyId,applyPaye:c.apply_paye,applyNapsa:c.apply_napsa,applyNhima:c.apply_nhima,pensionEnabled:c.pension_enabled,pensionEmployeeRate:c.pension_employee_rate,pensionEmployerRate:c.pension_employer_rate,isConsultant:c.is_consultant,consultantType:c.consultant_type,applyWht:c.apply_wht,rateType:c.rate_type,currency:c.currency,updatedAt:Re()};if(await xr(Je(se,Q.EMPLOYEE_PAYROLL_PROFILES,P),y?j:{...j,createdAt:Re()},{merge:!0}),p){const g=p.map(A=>String(A.id)).filter(A=>!!A),T=d.filter(A=>A.id).map(A=>String(A.id)),E=g.filter(A=>!T.includes(A));await Promise.all(E.map(A=>Kl(Je(se,Q.EMPLOYEE_ALLOWANCES,A),{isActive:!1,updatedAt:Re()})))}for(const g of d){const T={employeeId:t,companyId:S.companyId,allowanceType:g.allowance_type,allowanceName:g.allowance_name,amount:g.amount,isTaxable:g.is_taxable,isActive:!0,updatedAt:Re()};g.id?await xr(Je(se,Q.EMPLOYEE_ALLOWANCES,String(g.id)),T,{merge:!0}):await es(we(se,Q.EMPLOYEE_ALLOWANCES),{...T,createdAt:Re()})}},onSuccess:()=>{Y.success("Payroll setup saved successfully"),a.invalidateQueries({queryKey:["employee-payroll-profile",t]}),a.invalidateQueries({queryKey:["employee-allowances",t]}),s==null||s()},onError:S=>{Y.error(S instanceof Error?S.message:"Failed to save payroll setup")}}),b=()=>{f.amount>0&&(h([...d,{...f}]),m({allowance_type:"housing",allowance_name:"Housing Allowance",amount:0,is_taxable:!0}))},x=S=>{h(d.filter((P,j)=>j!==S))},w=d.reduce((S,P)=>S+P.amount,0),C=r+w;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Payroll Setup"}),i.jsx("p",{className:"text-muted-foreground",children:e})]}),i.jsx(Ve,{variant:l?"secondary":"default",children:l?"Consultant":"Employee"})]}),i.jsxs(X,{children:[i.jsxs(te,{children:[i.jsx(ne,{children:"Earnings Assignment"}),i.jsx(pt,{children:"Configure allowances for this employee"})]}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[i.jsx("span",{children:"Basic Pay"}),i.jsx("span",{className:"font-semibold",children:ue(r)})]}),d.map((S,P)=>i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:S.allowance_name}),!S.is_taxable&&i.jsx(Ve,{variant:"outline",className:"ml-2 text-xs",children:"Non-taxable"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-semibold",children:ue(S.amount)}),i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>x(P),children:i.jsx(Ms,{className:"h-4 w-4 text-destructive"})})]})]},P)),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 p-3 border rounded-lg bg-muted/50",children:[i.jsxs(Tt,{value:f.allowance_type,onValueChange:S=>{const P=tz.find(j=>j.value===S);m({...f,allowance_type:S,allowance_name:(P==null?void 0:P.label)||S})},children:[i.jsx(jt,{children:i.jsx(Ct,{})}),i.jsx(Nt,{children:tz.map(S=>i.jsx(be,{value:S.value,children:S.label},S.value))})]}),i.jsx(G,{type:"number",step:"0.01",placeholder:"Amount",value:f.amount||"",onChange:S=>m({...f,amount:Number(S.target.value)})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(us,{checked:f.is_taxable,onCheckedChange:S=>m({...f,is_taxable:S})}),i.jsx(ee,{className:"text-sm",children:"Taxable"})]}),i.jsxs(H,{onClick:b,disabled:f.amount<=0,children:[i.jsx(Nn,{className:"h-4 w-4 mr-1"})," Add"]})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 bg-primary/10 rounded-lg font-semibold",children:[i.jsx("span",{children:"Gross Salary"}),i.jsx("span",{className:"text-lg",children:ue(C)})]})]})]}),i.jsxs(X,{children:[i.jsxs(te,{children:[i.jsx(ne,{children:"Statutory Deductions"}),i.jsx(pt,{children:"Configure which deductions apply to this employee"})]}),i.jsxs(re,{className:"space-y-4",children:[l&&i.jsxs(zu,{children:[i.jsx(ks,{className:"h-4 w-4"}),i.jsx(qu,{children:"Consultants are subject to Withholding Tax (WHT) instead of PAYE, NAPSA, and NHIMA."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx(ee,{className:"font-medium",children:"Apply PAYE"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Pay As You Earn tax"})]}),i.jsx(us,{checked:c.apply_paye,onCheckedChange:S=>u({...c,apply_paye:S}),disabled:l})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx(ee,{className:"font-medium",children:"Apply NAPSA"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"5% of gross (max K1,342)"})]}),i.jsx(us,{checked:c.apply_napsa,onCheckedChange:S=>u({...c,apply_napsa:S}),disabled:l})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx(ee,{className:"font-medium",children:"Apply NHIMA"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"1% of basic (max K250)"})]}),i.jsx(us,{checked:c.apply_nhima,onCheckedChange:S=>u({...c,apply_nhima:S}),disabled:l})]})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx(ee,{className:"font-medium",children:"Pension Enabled"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Optional pension contribution"})]}),i.jsx(us,{checked:c.pension_enabled,onCheckedChange:S=>u({...c,pension_enabled:S})})]}),c.pension_enabled&&i.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[i.jsxs("div",{children:[i.jsx(ee,{children:"Employee Rate (%)"}),i.jsx(G,{type:"number",step:"0.1",value:c.pension_employee_rate,onChange:S=>u({...c,pension_employee_rate:Number(S.target.value)})})]}),i.jsxs("div",{children:[i.jsx(ee,{children:"Employer Rate (%)"}),i.jsx(G,{type:"number",step:"0.1",value:c.pension_employer_rate,onChange:S=>u({...c,pension_employer_rate:Number(S.target.value)})})]})]})]}),l&&i.jsxs("div",{className:"border-t pt-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg mb-4",children:[i.jsxs("div",{children:[i.jsx(ee,{className:"font-medium",children:"Apply Withholding Tax (WHT)"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Tax on consultancy payments"})]}),i.jsx(us,{checked:c.apply_wht,onCheckedChange:S=>u({...c,apply_wht:S})})]}),c.apply_wht&&i.jsxs("div",{children:[i.jsx(ee,{children:"Consultant Type"}),i.jsxs(Tt,{value:c.consultant_type,onValueChange:S=>u({...c,consultant_type:S}),children:[i.jsx(jt,{className:"mt-2",children:i.jsx(Ct,{})}),i.jsxs(Nt,{children:[i.jsx(be,{value:"local",children:"Local Consultant (15% WHT)"}),i.jsx(be,{value:"non_resident",children:"Non-Resident (20% WHT - Final Tax)"})]})]})]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{variant:"outline",onClick:s,children:"Cancel"}),i.jsxs(H,{onClick:()=>v.mutate(),disabled:v.isPending,children:[i.jsx(yh,{className:"h-4 w-4 mr-2"}),v.isPending?"Saving...":"Save Payroll Setup"]})]})]})}function ftt(){const{id:t}=Hh(),e=$n(),{user:n}=ht(),{data:r,isLoading:s}=Ee({queryKey:["employee",t,n==null?void 0:n.id],queryFn:async()=>{if(!t||!n)return null;const a=await Be.getPrimaryMembershipByUser(n.id);if(!(a!=null&&a.companyId))return null;const o=Je(se,Q.EMPLOYEES,t),l=await bi(o);if(!l.exists())return null;const c=l.data(),u=c.companyId??c.company_id;return u&&u!==a.companyId?null:{id:l.id,...c}},enabled:!!(t&&n)});return s?i.jsx(dm,{}):r?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>e("/employees"),children:[i.jsx(pa,{className:"h-4 w-4 mr-2"}),"Back to Employees"]})}),i.jsx(htt,{employeeId:String(r.id),employeeName:String(r.fullName??r.full_name??"Employee"),contractType:String(r.contractType??r.contract_type??"")||void 0,basicSalary:Number(r.basicSalary??r.basic_salary??0),onClose:()=>e("/employees")})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx("p",{className:"text-muted-foreground",children:"Employee not found"}),i.jsx(H,{variant:"link",onClick:()=>e("/employees"),children:"Go back to employees"})]})}const mtt=[{band_order:1,min_amount:0,max_amount:5100,rate:0},{band_order:2,min_amount:5100,max_amount:7100,rate:.2},{band_order:3,min_amount:7100,max_amount:9200,rate:.3},{band_order:4,min_amount:9200,max_amount:null,rate:.37}],ptt=[{rate_type:"napsa",employee_rate:.05,employer_rate:.05,cap_amount:1342},{rate_type:"nhima",employee_rate:.01,employer_rate:.01,cap_amount:250},{rate_type:"pension",employee_rate:.05,employer_rate:.05,cap_amount:null},{rate_type:"wht_local",employee_rate:.15,employer_rate:0,cap_amount:null},{rate_type:"wht_nonresident",employee_rate:.2,employer_rate:0,cap_amount:null}],ny=(t,e=0)=>{const n=Number(t);return Number.isFinite(n)?n:e},nz=t=>{if(t==null||t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null};function gtt(){const{user:t}=ht(),e=tn(),[n,r]=_.useState([]),[s,a]=_.useState([]),[o,l]=_.useState(!1),c=Ee({queryKey:["payroll-settings-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const P=await Be.getPrimaryMembershipByUser(t.id);return(P==null?void 0:P.companyId)??null},enabled:!!t}),u=c.data??null,{data:d,isLoading:h}=Ee({queryKey:["paye-tax-bands",u],queryFn:async()=>{if(!u)return[];const P=we(se,Q.PAYE_TAX_BANDS);return(await Ce(Te(P,he("companyId","==",u)))).docs.map(g=>{const T=g.data();return{id:g.id,band_order:ny(T.bandOrder??T.band_order,0),min_amount:ny(T.minAmount??T.min_amount,0),max_amount:nz(T.maxAmount??T.max_amount),rate:ny(T.rate,0),is_active:!!(T.isActive??T.is_active??!0)}}).filter(g=>g.is_active).sort((g,T)=>g.band_order-T.band_order).map(({is_active:g,...T})=>T)},enabled:!!u}),{data:f,isLoading:m}=Ee({queryKey:["statutory-rates",u],queryFn:async()=>{if(!u)return[];const P=we(se,Q.PAYROLL_STATUTORY_RATES);return(await Ce(Te(P,he("companyId","==",u)))).docs.map(g=>{const T=g.data();return{id:g.id,rate_type:String(T.rateType??T.rate_type??""),employee_rate:ny(T.employeeRate??T.employee_rate,0),employer_rate:ny(T.employerRate??T.employer_rate,0),cap_amount:nz(T.capAmount??T.cap_amount),is_active:!!(T.isActive??T.is_active??!0)}}).filter(g=>g.is_active).map(({is_active:g,...T})=>T)},enabled:!!u});_.useEffect(()=>{o||h||m||(d&&d.length>0?r(d):r(mtt),f&&f.length>0?a(f):a(ptt),l(!0))},[o,h,m,d,f]);const y=Xe({mutationFn:async()=>{if(!u)throw new Error("No company context found");const P=we(se,Q.PAYE_TAX_BANDS),j=await Ce(Te(P,he("companyId","==",u))),g=Yl(se);j.docs.forEach(T=>{g.set(T.ref,{isActive:!1,updatedAt:Re()},{merge:!0})}),n.forEach((T,E)=>{const A=Je(we(se,Q.PAYE_TAX_BANDS));g.set(A,{companyId:u,bandOrder:E+1,minAmount:Number(T.min_amount),maxAmount:T.max_amount===null?null:Number(T.max_amount),rate:Number(T.rate),isActive:!0,createdAt:Re(),updatedAt:Re()})}),await g.commit()},onSuccess:()=>{Y.success("PAYE tax bands saved successfully"),e.invalidateQueries({queryKey:["paye-tax-bands",u]})},onError:P=>{Y.error(P.message||"Failed to save tax bands")}}),p=Xe({mutationFn:async()=>{if(!u)throw new Error("No company context found");const P=we(se,Q.PAYROLL_STATUTORY_RATES),j=await Ce(Te(P,he("companyId","==",u))),g=Yl(se);j.docs.forEach(T=>{g.set(T.ref,{isActive:!1,updatedAt:Re()},{merge:!0})}),s.forEach(T=>{const E=Je(we(se,Q.PAYROLL_STATUTORY_RATES));g.set(E,{companyId:u,rateType:T.rate_type,employeeRate:Number(T.employee_rate),employerRate:Number(T.employer_rate),capAmount:T.cap_amount===null?null:Number(T.cap_amount),isActive:!0,createdAt:Re(),updatedAt:Re()})}),await g.commit()},onSuccess:()=>{Y.success("Statutory rates saved successfully"),e.invalidateQueries({queryKey:["statutory-rates",u]})},onError:P=>{Y.error(P.message||"Failed to save statutory rates")}}),v=()=>{const P=n[n.length-1];r([...n,{band_order:n.length+1,min_amount:(P==null?void 0:P.max_amount)||0,max_amount:null,rate:0}])},b=P=>{r(n.filter((j,g)=>g!==P))},x=(P,j,g)=>{const T=[...n];T[P]={...T[P],[j]:g},r(T)},w=(P,j,g)=>{const T=[...s];T[P]={...T[P],[j]:g},a(T)},C=P=>{switch(P){case"napsa":return"NAPSA";case"nhima":return"NHIMA";case"pension":return"Pension";case"wht_local":return"WHT (Local Consultant)";case"wht_nonresident":return"WHT (Non-Resident)";default:return P}},S=c.isLoading||h||m;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Payroll Settings"}),i.jsx("p",{className:"text-muted-foreground",children:"Configure PAYE tax bands and statutory rates"})]}),i.jsx(qw,{className:"h-8 w-8 text-muted-foreground"})]}),i.jsxs(m1,{defaultValue:"paye",className:"space-y-4",children:[i.jsxs(Nb,{children:[i.jsx(so,{value:"paye",children:"PAYE Tax Bands"}),i.jsx(so,{value:"statutory",children:"Statutory Rates"})]}),i.jsx(io,{value:"paye",children:i.jsxs(X,{children:[i.jsxs(te,{children:[i.jsx(ne,{children:"PAYE Tax Bands (Monthly)"}),i.jsx(pt,{children:"Configure the progressive tax bands for Pay As You Earn calculations."})]}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Band"}),i.jsx(q,{children:"Min Amount (ZMW)"}),i.jsx(q,{children:"Max Amount (ZMW)"}),i.jsx(q,{children:"Rate (%)"}),i.jsx(q,{className:"w-16"})]})}),i.jsx(Ut,{children:n.map((P,j)=>i.jsxs(je,{children:[i.jsxs(U,{className:"font-medium",children:["Band ",j+1]}),i.jsx(U,{children:i.jsx(G,{type:"number",step:"0.01",value:P.min_amount,onChange:g=>x(j,"min_amount",Number(g.target.value)),className:"w-32"})}),i.jsx(U,{children:i.jsx(G,{type:"number",step:"0.01",value:P.max_amount??"",onChange:g=>x(j,"max_amount",g.target.value?Number(g.target.value):null),placeholder:"inf",className:"w-32"})}),i.jsx(U,{children:i.jsx(G,{type:"number",step:"0.01",value:P.rate*100,onChange:g=>x(j,"rate",Number(g.target.value)/100),className:"w-24"})}),i.jsx(U,{children:i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>b(j),disabled:n.length<=1,children:i.jsx(Ms,{className:"h-4 w-4 text-destructive"})})})]},j))})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(H,{variant:"outline",onClick:v,disabled:!u||S,children:[i.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Add Band"]}),i.jsxs(H,{onClick:()=>y.mutate(),disabled:y.isPending||!u||S,children:[i.jsx(yh,{className:"h-4 w-4 mr-2"}),y.isPending?"Saving...":"Save Tax Bands"]})]})]})]})}),i.jsx(io,{value:"statutory",children:i.jsxs(X,{children:[i.jsxs(te,{children:[i.jsx(ne,{children:"Statutory Contribution Rates"}),i.jsx(pt,{children:"Configure NAPSA, NHIMA, Pension, and WHT rates."})]}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Contribution Type"}),i.jsx(q,{children:"Employee Rate (%)"}),i.jsx(q,{children:"Employer Rate (%)"}),i.jsx(q,{children:"Cap Amount (ZMW)"})]})}),i.jsx(Ut,{children:s.map((P,j)=>i.jsxs(je,{children:[i.jsx(U,{className:"font-medium",children:C(P.rate_type)}),i.jsx(U,{children:i.jsx(G,{type:"number",step:"0.01",value:P.employee_rate*100,onChange:g=>w(j,"employee_rate",Number(g.target.value)/100),className:"w-24"})}),i.jsx(U,{children:i.jsx(G,{type:"number",step:"0.01",value:P.employer_rate*100,onChange:g=>w(j,"employer_rate",Number(g.target.value)/100),className:"w-24",disabled:P.rate_type.startsWith("wht")})}),i.jsx(U,{children:i.jsx(G,{type:"number",step:"0.01",value:P.cap_amount??"",onChange:g=>w(j,"cap_amount",g.target.value?Number(g.target.value):null),placeholder:"No cap",className:"w-32"})})]},P.rate_type))})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs(H,{onClick:()=>p.mutate(),disabled:p.isPending||!u||S,children:[i.jsx(yh,{className:"h-4 w-4 mr-2"}),p.isPending?"Saving...":"Save Rates"]})})]})]})})]})]})}function rz({icon:t,title:e,description:n,actionLabel:r,onAction:s,className:a}){return i.jsxs("div",{className:ve("flex flex-col items-center justify-center py-12 px-4 text-center",a),children:[i.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-muted",children:t||i.jsx(Goe,{className:"h-8 w-8 text-muted-foreground"})}),i.jsx("h3",{className:"text-lg font-semibold",children:e}),n&&i.jsx("p",{className:"mt-1 text-sm text-muted-foreground max-w-sm",children:n}),r&&s&&i.jsxs(H,{onClick:s,className:"mt-4",children:[i.jsx(Nn,{className:"mr-2 h-4 w-4"}),r]})]})}const ytt={name:"",sku:"",description:"",type:"product",category:"",unit_of_measure:"Unit",selling_price:0,cost_price:0,track_inventory:!1,quantity_on_hand:0,reorder_point:0,is_taxable:!0,tax_rate:16,is_active:!0},VA=t=>{if(!t)return null;if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return null};function vtt(){const{user:t}=ht(),{data:e}=ei(),n=e==="super_admin"||e==="admin",[r,s]=_.useState("catalog"),[a,o]=_.useState(""),[l,c]=_.useState("all"),[u,d]=_.useState(!1),[h,f]=_.useState(!1),[m,y]=_.useState(null),[p,v]=_.useState(null),b=tn(),{data:x}=Ee({queryKey:["products-company",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const O=await Be.getPrimaryMembershipByUser(t.id);return(O==null?void 0:O.companyId)??null},enabled:!!t}),{data:w,isLoading:C}=Ee({queryKey:["products",x],queryFn:async()=>x?(await Ce(Te(we(se,Q.PRODUCTS),he("companyId","==",x)))).docs.map(W=>{const Z=W.data();return{id:W.id,name:String(Z.name??""),sku:Z.sku??null,description:Z.description??null,type:Z.type??"product",category:Z.category??null,unit_of_measure:Z.unitOfMeasure??Z.unit_of_measure??null,selling_price:Number(Z.sellingPrice??Z.selling_price??0),cost_price:Number(Z.costPrice??Z.cost_price??0),track_inventory:!!(Z.trackInventory??Z.track_inventory),quantity_on_hand:Number(Z.quantityOnHand??Z.quantity_on_hand??0),reorder_point:Number(Z.reorderPoint??Z.reorder_point??0),is_taxable:!!(Z.isTaxable??Z.is_taxable),tax_rate:Number(Z.taxRate??Z.tax_rate??16),is_active:Z.isActive===void 0&&Z.is_active===void 0?!0:!!(Z.isActive??Z.is_active),created_at:VA(Z.createdAt??Z.created_at)}}):[],enabled:!!x}),{data:S,isLoading:P}=Ee({queryKey:["priceLists",x],queryFn:async()=>x?(await Ce(Te(we(se,Q.PRICE_LISTS),he("companyId","==",x)))).docs.map(W=>{const Z=W.data();return{id:W.id,name:String(Z.name??""),description:Z.description??null,currency:String(Z.currency??"ZMW"),is_default:!!(Z.isDefault??Z.is_default),is_active:Z.isActive===void 0&&Z.is_active===void 0?!0:!!(Z.isActive??Z.is_active),valid_from:VA(Z.validFrom??Z.valid_from),valid_to:VA(Z.validTo??Z.valid_to)}}):[],enabled:!!x}),j=Xe({mutationFn:async O=>{if(!x)throw new Error("No company found");const W={companyId:x,name:O.name||"",sku:O.sku||null,description:O.description||null,type:O.type||"product",category:O.category||null,unitOfMeasure:O.unit_of_measure||"Unit",sellingPrice:Number(O.selling_price||0),costPrice:Number(O.cost_price||0),trackInventory:!!O.track_inventory,quantityOnHand:Number(O.quantity_on_hand||0),reorderPoint:Number(O.reorder_point||0),isTaxable:!!O.is_taxable,taxRate:Number(O.tax_rate||16),isActive:O.is_active===void 0?!0:!!O.is_active,updatedAt:Re()};O.id?await Kl(Je(se,Q.PRODUCTS,O.id),W):await es(we(se,Q.PRODUCTS),{...W,createdAt:Re()})},onSuccess:()=>{b.invalidateQueries({queryKey:["products"]}),d(!1),y(null),Y.success(m!=null&&m.id?"Product updated":"Product created")},onError:O=>{Y.error("Failed to save product: "+O.message)}}),g=Xe({mutationFn:async O=>{if(!n)throw new Error("Only Admin users can delete products.");await Gl(Je(se,Q.PRODUCTS,O))},onSuccess:()=>{b.invalidateQueries({queryKey:["products"]}),Y.success("Product deleted")},onError:O=>{Y.error("Failed to delete product: "+O.message)}}),T=Xe({mutationFn:async O=>{if(!x)throw new Error("No company found");const W={companyId:x,name:O.name||"",description:O.description||null,currency:O.currency||"ZMW",isDefault:!!O.is_default,isActive:O.is_active===void 0?!0:!!O.is_active,validFrom:O.valid_from||null,validTo:O.valid_to||null,updatedAt:Re()};O.id?await Kl(Je(se,Q.PRICE_LISTS,O.id),W):await es(we(se,Q.PRICE_LISTS),{...W,createdAt:Re()})},onSuccess:()=>{b.invalidateQueries({queryKey:["priceLists"]}),f(!1),v(null),Y.success(p!=null&&p.id?"Price list updated":"Price list created")},onError:O=>{Y.error("Failed to save price list: "+O.message)}}),E=Xe({mutationFn:async O=>{if(!n)throw new Error("Only Admin users can delete price lists.");await Gl(Je(se,Q.PRICE_LISTS,O))},onSuccess:()=>{b.invalidateQueries({queryKey:["priceLists"]}),Y.success("Price list deleted")},onError:O=>{Y.error("Failed to delete price list: "+O.message)}}),A=O=>{y(O),d(!0)},I=()=>{y({...ytt}),d(!0)},k=O=>{v(O),f(!0)},L=()=>{v({name:"",description:"",currency:"ZMW",is_default:!1,is_active:!0}),f(!0)},V=(w==null?void 0:w.filter(O=>O.type==="product").length)||0,B=(w==null?void 0:w.filter(O=>O.type==="service").length)||0,M=(w==null?void 0:w.filter(O=>O.track_inventory&&O.quantity_on_hand<=O.reorder_point).length)||0,$=(w||[]).filter(O=>{const W=`${O.name} ${O.sku||""}`.toLowerCase(),Z=!a||W.includes(a.toLowerCase()),ae=l==="all"||O.type===l;return Z&&ae});return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Products & Services"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your product catalog, inventory, and pricing"})]})}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Total Products"}),i.jsx(aa,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:V})})]}),i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Total Services"}),i.jsx(l4,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:B})})]}),i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Low Stock Items"}),i.jsx(Doe,{className:"h-4 w-4 text-orange-500"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold text-orange-500",children:M})})]}),i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ne,{className:"text-sm font-medium",children:"Price Lists"}),i.jsx(o4,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(re,{children:i.jsx("div",{className:"text-2xl font-bold",children:(S==null?void 0:S.length)||0})})]})]}),i.jsxs(m1,{value:r,onValueChange:s,children:[i.jsxs(Nb,{children:[i.jsx(so,{value:"catalog",children:"Product Catalog"}),i.jsx(so,{value:"pricing",children:"Price Lists"}),i.jsx(so,{value:"inventory",children:"Inventory"})]}),i.jsxs(io,{value:"catalog",className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[i.jsxs("div",{className:"relative flex-1 max-w-sm",children:[i.jsx(Ds,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(G,{placeholder:"Search products...",value:a,onChange:O=>o(O.target.value),className:"pl-10"})]}),i.jsxs(Tt,{value:l,onValueChange:c,children:[i.jsx(jt,{className:"w-[150px]",children:i.jsx(Ct,{placeholder:"Filter by type"})}),i.jsxs(Nt,{children:[i.jsx(be,{value:"all",children:"All Types"}),i.jsx(be,{value:"product",children:"Products"}),i.jsx(be,{value:"service",children:"Services"})]})]})]}),i.jsxs(H,{onClick:I,children:[i.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Add Product/Service"]})]}),C?i.jsx(dm,{message:"Loading products..."}):$.length?i.jsx(X,{children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Name"}),i.jsx(q,{children:"SKU"}),i.jsx(q,{children:"Type"}),i.jsx(q,{children:"Category"}),i.jsx(q,{className:"text-right",children:"Selling Price"}),i.jsx(q,{className:"text-right",children:"Cost Price"}),i.jsx(q,{className:"text-right",children:"Stock"}),i.jsx(q,{children:"Status"}),i.jsx(q,{className:"text-right",children:"Actions"})]})}),i.jsx(Ut,{children:$.map(O=>i.jsxs(je,{children:[i.jsx(U,{className:"font-medium",children:O.name}),i.jsx(U,{children:O.sku||"-"}),i.jsx(U,{children:i.jsxs(Ve,{variant:O.type==="product"?"default":"secondary",children:[O.type==="product"?i.jsx(aa,{className:"h-3 w-3 mr-1"}):i.jsx(l4,{className:"h-3 w-3 mr-1"}),O.type]})}),i.jsx(U,{children:O.category||"-"}),i.jsxs(U,{className:"text-right",children:["K",O.selling_price.toLocaleString()]}),i.jsxs(U,{className:"text-right",children:["K",O.cost_price.toLocaleString()]}),i.jsx(U,{className:"text-right",children:O.track_inventory?i.jsx("span",{className:O.quantity_on_hand<=O.reorder_point?"text-orange-500 font-medium":"",children:O.quantity_on_hand}):"-"}),i.jsx(U,{children:i.jsx(Ve,{variant:O.is_active?"default":"secondary",children:O.is_active?"Active":"Inactive"})}),i.jsx(U,{className:"text-right",children:i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>A(O),children:i.jsx(a4,{className:"h-4 w-4"})}),n&&i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>g.mutate(O.id),children:i.jsx(Ms,{className:"h-4 w-4 text-destructive"})})]})})]},O.id))})]})}):i.jsx(rz,{icon:i.jsx(aa,{className:"h-8 w-8 text-muted-foreground"}),title:"No products or services",description:"Add your first product or service to get started",actionLabel:"Add Product/Service",onAction:I})]}),i.jsxs(io,{value:"pricing",className:"space-y-4",children:[i.jsx("div",{className:"flex items-center justify-end",children:i.jsxs(H,{onClick:L,children:[i.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Create Price List"]})}),P?i.jsx(dm,{message:"Loading price lists..."}):S!=null&&S.length?i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:S.map(O=>i.jsxs(X,{children:[i.jsxs(te,{className:"flex flex-row items-start justify-between space-y-0",children:[i.jsxs("div",{children:[i.jsx(ne,{className:"text-lg",children:O.name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:O.description||"No description"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[O.is_default&&i.jsx(Ve,{variant:"secondary",children:"Default"}),i.jsx(Ve,{variant:O.is_active?"default":"secondary",children:O.is_active?"Active":"Inactive"})]})]}),i.jsxs(re,{children:[i.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground mb-4",children:[i.jsxs("span",{children:["Currency: ",O.currency]}),O.valid_from&&i.jsxs("span",{children:["Valid: ",new Date(O.valid_from).toLocaleDateString(),O.valid_to&&` - ${new Date(O.valid_to).toLocaleDateString()}`]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(H,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>k(O),children:[i.jsx(a4,{className:"h-4 w-4 mr-2"}),"Edit"]}),n&&i.jsx(H,{variant:"outline",size:"sm",onClick:()=>E.mutate(O.id),children:i.jsx(Ms,{className:"h-4 w-4 text-destructive"})})]})]})]},O.id))}):i.jsx(rz,{icon:i.jsx(o4,{className:"h-8 w-8 text-muted-foreground"}),title:"No price lists",description:"Create price lists to offer different pricing tiers",actionLabel:"Create Price List",onAction:L})]}),i.jsx(io,{value:"inventory",className:"space-y-4",children:i.jsxs(X,{children:[i.jsx(te,{children:i.jsxs(ne,{className:"flex items-center gap-2",children:[i.jsx(ga,{className:"h-5 w-5"}),"Inventory Tracking"]})}),i.jsx(re,{children:C?i.jsx(dm,{message:"Loading inventory..."}):i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Product"}),i.jsx(q,{children:"SKU"}),i.jsx(q,{className:"text-right",children:"On Hand"}),i.jsx(q,{className:"text-right",children:"Reorder Point"}),i.jsx(q,{className:"text-right",children:"Unit Cost"}),i.jsx(q,{className:"text-right",children:"Total Value"}),i.jsx(q,{children:"Status"})]})}),i.jsxs(Ut,{children:[w==null?void 0:w.filter(O=>O.track_inventory).map(O=>{const W=O.quantity_on_hand<=O.reorder_point,Z=O.quantity_on_hand*O.cost_price;return i.jsxs(je,{children:[i.jsx(U,{className:"font-medium",children:O.name}),i.jsx(U,{children:O.sku||"-"}),i.jsx(U,{className:"text-right",children:i.jsx("span",{className:W?"text-orange-500 font-medium":"",children:O.quantity_on_hand})}),i.jsx(U,{className:"text-right",children:O.reorder_point}),i.jsxs(U,{className:"text-right",children:["K",O.cost_price.toLocaleString()]}),i.jsxs(U,{className:"text-right font-medium",children:["K",Z.toLocaleString()]}),i.jsx(U,{children:i.jsx(Ve,{variant:W?"destructive":"default",className:W?"bg-orange-500":"",children:W?"Low Stock":"In Stock"})})]},O.id)}),!(w!=null&&w.filter(O=>O.track_inventory).length)&&i.jsx(je,{children:i.jsx(U,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No products with inventory tracking enabled"})})]})]})})]})})]}),i.jsx(Jn,{open:u,onOpenChange:d,children:i.jsxs(Hn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsx(Kn,{children:i.jsxs(Gn,{children:[m!=null&&m.id?"Edit":"New"," Product/Service"]})}),m&&i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"name",children:"Name *"}),i.jsx(G,{id:"name",value:m.name||"",onChange:O=>y({...m,name:O.target.value}),placeholder:"Product name"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"sku",children:"SKU"}),i.jsx(G,{id:"sku",value:m.sku||"",onChange:O=>y({...m,sku:O.target.value}),placeholder:"Stock keeping unit"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"type",children:"Type"}),i.jsxs(Tt,{value:m.type,onValueChange:O=>y({...m,type:O}),children:[i.jsx(jt,{children:i.jsx(Ct,{})}),i.jsxs(Nt,{children:[i.jsx(be,{value:"product",children:"Product"}),i.jsx(be,{value:"service",children:"Service"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"category",children:"Category"}),i.jsx(G,{id:"category",value:m.category||"",onChange:O=>y({...m,category:O.target.value}),placeholder:"Category"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"description",children:"Description"}),i.jsx(Zn,{id:"description",value:m.description||"",onChange:O=>y({...m,description:O.target.value}),placeholder:"Product description",rows:3})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"selling_price",children:"Selling Price (K)"}),i.jsx(G,{id:"selling_price",type:"number",value:m.selling_price||0,onChange:O=>y({...m,selling_price:parseFloat(O.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"cost_price",children:"Cost Price (K)"}),i.jsx(G,{id:"cost_price",type:"number",value:m.cost_price||0,onChange:O=>y({...m,cost_price:parseFloat(O.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"unit_of_measure",children:"Unit of Measure"}),i.jsx(G,{id:"unit_of_measure",value:m.unit_of_measure||"Unit",onChange:O=>y({...m,unit_of_measure:O.target.value})})]})]}),m.type==="product"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(us,{id:"track_inventory",checked:m.track_inventory||!1,onCheckedChange:O=>y({...m,track_inventory:O})}),i.jsx(ee,{htmlFor:"track_inventory",children:"Track Inventory"})]}),m.track_inventory&&i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"quantity_on_hand",children:"Quantity on Hand"}),i.jsx(G,{id:"quantity_on_hand",type:"number",value:m.quantity_on_hand||0,onChange:O=>y({...m,quantity_on_hand:parseFloat(O.target.value)||0})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"reorder_point",children:"Reorder Point"}),i.jsx(G,{id:"reorder_point",type:"number",value:m.reorder_point||0,onChange:O=>y({...m,reorder_point:parseFloat(O.target.value)||0})})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(us,{id:"is_taxable",checked:m.is_taxable||!1,onCheckedChange:O=>y({...m,is_taxable:O})}),i.jsx(ee,{htmlFor:"is_taxable",children:"Taxable (VAT)"})]}),m.is_taxable&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"tax_rate",children:"Tax Rate (%)"}),i.jsx(G,{id:"tax_rate",type:"number",value:m.tax_rate||16,onChange:O=>y({...m,tax_rate:parseFloat(O.target.value)||16})})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(us,{id:"is_active",checked:m.is_active||!1,onCheckedChange:O=>y({...m,is_active:O})}),i.jsx(ee,{htmlFor:"is_active",children:"Active"})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(H,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),i.jsx(H,{onClick:()=>j.mutate(m),disabled:!m.name||j.isPending,children:j.isPending?"Saving...":"Save"})]})]})]})}),i.jsx(Jn,{open:h,onOpenChange:f,children:i.jsxs(Hn,{children:[i.jsx(Kn,{children:i.jsxs(Gn,{children:[p!=null&&p.id?"Edit":"New"," Price List"]})}),p&&i.jsxs("div",{className:"grid gap-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"pl_name",children:"Name *"}),i.jsx(G,{id:"pl_name",value:p.name||"",onChange:O=>v({...p,name:O.target.value}),placeholder:"Price list name"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"pl_description",children:"Description"}),i.jsx(Zn,{id:"pl_description",value:p.description||"",onChange:O=>v({...p,description:O.target.value}),placeholder:"Description",rows:2})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"pl_currency",children:"Currency"}),i.jsxs(Tt,{value:p.currency||"ZMW",onValueChange:O=>v({...p,currency:O}),children:[i.jsx(jt,{children:i.jsx(Ct,{})}),i.jsxs(Nt,{children:[i.jsx(be,{value:"ZMW",children:"ZMW"}),i.jsx(be,{value:"USD",children:"USD"}),i.jsx(be,{value:"EUR",children:"EUR"}),i.jsx(be,{value:"GBP",children:"GBP"})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[i.jsx(us,{id:"pl_is_default",checked:p.is_default||!1,onCheckedChange:O=>v({...p,is_default:O})}),i.jsx(ee,{htmlFor:"pl_is_default",children:"Default Price List"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"pl_valid_from",children:"Valid From"}),i.jsx(G,{id:"pl_valid_from",type:"date",value:p.valid_from||"",onChange:O=>v({...p,valid_from:O.target.value})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"pl_valid_to",children:"Valid To"}),i.jsx(G,{id:"pl_valid_to",type:"date",value:p.valid_to||"",onChange:O=>v({...p,valid_to:O.target.value})})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(us,{id:"pl_is_active",checked:p.is_active||!1,onCheckedChange:O=>v({...p,is_active:O})}),i.jsx(ee,{htmlFor:"pl_is_active",children:"Active"})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(H,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),i.jsx(H,{onClick:()=>T.mutate(p),disabled:!p.name||T.isPending,children:T.isPending?"Saving...":"Save"})]})]})]})})]})}function xtt(){const{user:t}=ht(),e=$n(),n=tn(),[r,s]=_.useState(1),[a,o]=_.useState(new Date().toISOString().split("T")[0]),[l,c]=_.useState([]),[u,d]=_.useState(""),[h,f]=_.useState(""),{data:m=[],isLoading:y}=Ee({queryKey:["chart-of-accounts-opening",t==null?void 0:t.id],queryFn:async()=>{if(!t)return[];const I=await Be.getPrimaryMembershipByUser(t.id);if(!(I!=null&&I.companyId))return[];const k=we(se,Q.CHART_OF_ACCOUNTS);return(await Ce(Te(k,he("companyId","==",I.companyId),he("status","==","active")))).docs.map(V=>{const B=V.data();return{id:V.id,accountCode:String(B.accountCode||""),accountName:String(B.accountName||""),accountType:String(B.accountType||"")}}).sort((V,B)=>V.accountCode.localeCompare(B.accountCode))},enabled:!!t}),{data:p}=Ee({queryKey:["opening-balances-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const I=await Be.getPrimaryMembershipByUser(t.id);return(I==null?void 0:I.companyId)??null},enabled:!!t}),v=Xe({mutationFn:async I=>_n.postJournalEntry(I),onSuccess:()=>{Y.success("Opening balances posted successfully!"),n.invalidateQueries({queryKey:["journal-entries"]}),e("/chart-of-accounts")},onError:I=>{const k=I instanceof Error?I.message:"Failed to post opening balances";Y.error(k)}}),b=()=>{if(!u||!h||parseFloat(h)===0)return;if(l.find(k=>k.accountId===u)){Y.error("This account already has an opening balance");return}c([...l,{accountId:u,balance:parseFloat(h)}]),d(""),f("")},x=I=>{c(l.filter(k=>k.accountId!==I))},w=(I,k)=>{c(l.map(L=>L.accountId===I?{...L,balance:k}:L))},C=I=>{var k;return((k=m.find(L=>L.id===I))==null?void 0:k.accountType)||""},S=l.filter(I=>C(I.accountId)==="Asset").reduce((I,k)=>I+k.balance,0),P=l.filter(I=>C(I.accountId)==="Liability").reduce((I,k)=>I+k.balance,0),j=l.filter(I=>C(I.accountId)==="Equity").reduce((I,k)=>I+k.balance,0),g=S-(P+j),T=Math.abs(g)<.01,E=()=>{if(!p){Y.error("No company context found.");return}if(!T&&!window.confirm(`The accounting equation is not balanced. A journal entry of ${ue(Math.abs(g))} will be auto-posted to Retained Earnings to balance the books. Continue?`))return;const I=l.map(k=>{const L=C(k.accountId),V=m.find(B=>B.id===k.accountId);return L==="Asset"||L==="Expense"?{accountId:k.accountId,debit:Math.abs(k.balance),credit:0,description:`Opening balance for ${V==null?void 0:V.accountName}`}:{accountId:k.accountId,debit:0,credit:Math.abs(k.balance),description:`Opening balance for ${V==null?void 0:V.accountName}`}});if(!T){const k=m.find(L=>L.accountName.toLowerCase().includes("retained earnings")||L.accountCode==="3010");if(k)I.push({accountId:k.id,debit:g<0?Math.abs(g):0,credit:g>0?Math.abs(g):0,description:"Auto-balancing entry for opening balances"});else{Y.error("Retained Earnings account is required to auto-balance opening entries.");return}}v.mutate({companyId:p,entryDate:a,description:"Opening balances",referenceType:"OpeningBalance",sourceType:"opening_balance",lines:I})},A=r/3*100;return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex justify-between items-center",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Opening Balances"}),i.jsx("p",{className:"text-muted-foreground",children:"Enter your initial account balances when migrating from another system"})]})}),i.jsx(Su,{value:A,className:"h-2"}),r===1&&i.jsxs(X,{children:[i.jsxs(te,{children:[i.jsx(ne,{children:"Step 1: Entry Date"}),i.jsx(pt,{children:"Select the date for your opening balances. This is typically your go-live date or the start of your fiscal year."})]}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{htmlFor:"entry-date",children:"Opening Balance Date *"}),i.jsx(G,{id:"entry-date",type:"date",value:a,onChange:I=>o(I.target.value)})]}),i.jsxs(zu,{children:[i.jsx(ks,{className:"h-4 w-4"}),i.jsx(qu,{children:"All opening balances will be posted with this date. Make sure this date is before any other transactions in your system."})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs(H,{onClick:()=>s(2),className:"gap-2",children:["Next: Enter Balances",i.jsx(LT,{className:"h-4 w-4"})]})})]})]}),r===2&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs(X,{children:[i.jsxs(te,{children:[i.jsx(ne,{children:"Step 2: Enter Account Balances"}),i.jsx(pt,{children:"Add opening balances for each account. Enter positive values for all balance types."})]}),i.jsxs(re,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"md:col-span-2 space-y-2",children:[i.jsx(ee,{children:"Account"}),i.jsxs(Tt,{value:u,onValueChange:d,children:[i.jsx(jt,{children:i.jsx(Ct,{placeholder:"Select account"})}),i.jsx(Nt,{children:m.map(I=>i.jsxs(be,{value:I.id,children:[I.accountCode," - ",I.accountName," (",I.accountType,")"]},I.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ee,{children:"Balance"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(G,{type:"number",step:"0.01",placeholder:"0.00",value:h,onChange:I=>f(I.target.value)}),i.jsx(H,{onClick:b,type:"button",children:"Add"})]})]})]}),l.length>0&&i.jsx("div",{className:"border rounded-lg",children:i.jsxs(Vt,{children:[i.jsx(Bt,{children:i.jsxs(je,{children:[i.jsx(q,{children:"Account"}),i.jsx(q,{children:"Type"}),i.jsx(q,{className:"text-right",children:"Balance"}),i.jsx(q,{className:"w-[50px]"})]})}),i.jsx(Ut,{children:l.map(I=>{const k=m.find(L=>L.id===I.accountId);return i.jsxs(je,{children:[i.jsxs(U,{children:[k==null?void 0:k.accountCode," - ",k==null?void 0:k.accountName]}),i.jsx(U,{children:k==null?void 0:k.accountType}),i.jsx(U,{className:"text-right",children:i.jsx(G,{type:"number",step:"0.01",className:"text-right w-32 ml-auto",value:I.balance,onChange:L=>w(I.accountId,parseFloat(L.target.value)||0)})}),i.jsx(U,{children:i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>x(I.accountId),children:"x"})})]},I.accountId)})})]})})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(H,{variant:"outline",onClick:()=>s(1),className:"gap-2",children:[i.jsx(pa,{className:"h-4 w-4"}),"Back"]}),i.jsxs(H,{onClick:()=>s(3),disabled:l.length===0,className:"gap-2",children:["Next: Review",i.jsx(LT,{className:"h-4 w-4"})]})]})]}),r===3&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs(X,{children:[i.jsxs(te,{children:[i.jsx(ne,{children:"Step 3: Review & Post"}),i.jsx(pt,{children:"Review your opening balances and verify the accounting equation"})]}),i.jsxs(re,{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(X,{children:i.jsxs(te,{className:"pb-2",children:[i.jsx(pt,{children:"Total Assets"}),i.jsx(ne,{className:"text-2xl",children:ue(S)})]})}),i.jsx(X,{children:i.jsxs(te,{className:"pb-2",children:[i.jsx(pt,{children:"Total Liabilities"}),i.jsx(ne,{className:"text-2xl",children:ue(P)})]})}),i.jsx(X,{children:i.jsxs(te,{className:"pb-2",children:[i.jsx(pt,{children:"Total Equity"}),i.jsx(ne,{className:"text-2xl",children:ue(j)})]})})]}),i.jsx("div",{className:`p-4 rounded-lg border-2 ${T?"bg-green-50 border-green-500":"bg-amber-50 border-amber-500"}`,children:T?i.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[i.jsx(zw,{className:"h-5 w-5"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Equation is balanced!"}),i.jsx("div",{className:"text-sm",children:"Assets = Liabilities + Equity"})]})]}):i.jsxs("div",{className:"flex items-start gap-2 text-amber-700",children:[i.jsx(ks,{className:"h-5 w-5 mt-0.5"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Equation is not balanced"}),i.jsxs("div",{className:"text-sm",children:["Difference: ",ue(Math.abs(g))]}),i.jsx("div",{className:"text-sm mt-1",children:"This will be automatically balanced to Retained Earnings when posted."})]})]})}),i.jsxs(zu,{children:[i.jsx(ks,{className:"h-4 w-4"}),i.jsxs(qu,{children:["Once posted, these opening balances will create a journal entry dated ",a,". Make sure this is correct before proceeding."]})]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(H,{variant:"outline",onClick:()=>s(2),className:"gap-2",children:[i.jsx(pa,{className:"h-4 w-4"}),"Back"]}),i.jsx(H,{onClick:E,disabled:v.isPending||l.length===0,children:v.isPending?"Posting...":"Post Opening Balances"})]})]})]})}const btt=_.lazy(()=>Ox(()=>import("./FinancialReports-DRTjSkrn.js"),[])),wtt=_.lazy(()=>Ox(()=>import("./PayrollReports-B10i01XZ.js"),[])),_tt=_.lazy(()=>Ox(()=>import("./AuditLogs-BFoEntrh.js"),[])),jtt=_.lazy(()=>Ox(()=>import("./JournalEntries-CLQqMBgH.js"),[])),Ntt=_.lazy(()=>Ox(()=>import("./ChartOfAccounts-378LGvSX.js"),[])),Stt=new Nde({defaultOptions:{queries:{staleTime:1e3*60*5,retry:2,refetchOnWindowFocus:!1},mutations:{retry:1}}}),ry=i.jsx("div",{className:"py-10",children:i.jsx(dm,{message:"Loading page..."})}),Ett=()=>i.jsx(nwe,{children:i.jsx(Cde,{client:Stt,children:i.jsxs(Z8,{children:[i.jsx(zle,{}),i.jsx(wce,{}),i.jsx(Lhe,{basename:"/",children:i.jsx(twe,{children:i.jsxs(Che,{children:[i.jsx(yt,{path:"/",element:i.jsx(ntt,{})}),i.jsx(yt,{path:"/auth",element:i.jsx(SPe,{})}),i.jsx(yt,{path:"/accept-invitation",element:i.jsx(EPe,{})}),i.jsx(yt,{path:"/setup",element:i.jsx(wt,{children:i.jsx(ett,{})})}),i.jsx(yt,{path:"/dashboard",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(iJe,{})})})}),i.jsx(yt,{path:"/invoices",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(oJe,{})})})})}),i.jsx(yt,{path:"/invoices/new",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(cJe,{})})})})}),i.jsx(yt,{path:"/customers",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(pet,{})})})})}),i.jsx(yt,{path:"/estimates",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(_et,{})})})})}),i.jsx(yt,{path:"/quotations/new",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(xet,{})})})})}),i.jsx(yt,{path:"/sales-orders",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(vet,{})})})})}),i.jsx(yt,{path:"/vendors",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(Net,{})})})})}),i.jsx(yt,{path:"/bills",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(Aet,{})})})})}),i.jsx(yt,{path:"/purchase-orders",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(Tet,{})})})})}),i.jsx(yt,{path:"/expenses",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(ket,{})})})})}),i.jsx(yt,{path:"/products",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(vtt,{})})})})}),i.jsx(yt,{path:"/inventory",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(Oet,{})})})})}),i.jsx(yt,{path:"/bank-accounts",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(Det,{})})})})}),i.jsx(yt,{path:"/reconciliation",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(Vet,{})})})})}),i.jsx(yt,{path:"/employees",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(uJe,{})})})})}),i.jsx(yt,{path:"/employees/new",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(xJe,{})})})})}),i.jsx(yt,{path:"/employees/:id/edit",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(_Je,{})})})})}),i.jsx(yt,{path:"/employees/bulk-upload",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(NJe,{})})})})}),i.jsx(yt,{path:"/employees/:id/payroll-setup",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(ftt,{})})})})}),i.jsx(yt,{path:"/payroll",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(TJe,{})})})})}),i.jsx(yt,{path:"/payroll/new",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(kJe,{})})})})}),i.jsx(yt,{path:"/payroll/:id",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(KJe,{})})})})}),i.jsx(yt,{path:"/payroll/:id/approve",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(YJe,{})})})})}),i.jsx(yt,{path:"/payroll/:runId/payslip/:employeeId",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(GJe,{})})})})}),i.jsx(yt,{path:"/advances",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(XJe,{})})})})}),i.jsx(yt,{path:"/time-tracking",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(Bet,{})})})})}),i.jsx(yt,{path:"/projects",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(zet,{})})})})}),i.jsx(yt,{path:"/projects/:projectId/expenses",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(Wet,{})})})})}),i.jsx(yt,{path:"/projects/:projectId/activity-log",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(Ket,{})})})})}),i.jsx(yt,{path:"/donors",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(rtt,{})})})})}),i.jsx(yt,{path:"/accounts-payable",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(stt,{})})})})}),i.jsx(yt,{path:"/accounts-receivable",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(itt,{})})})})}),i.jsx(yt,{path:"/company-settings",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{allowedRoles:["super_admin","admin"],children:i.jsx(Q6,{})})})})}),i.jsx(yt,{path:"/reports",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(_.Suspense,{fallback:ry,children:i.jsx(btt,{})})})})})}),i.jsx(yt,{path:"/payroll-reports",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(_.Suspense,{fallback:ry,children:i.jsx(wtt,{})})})})})}),i.jsx(yt,{path:"/zra-compliance",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(tet,{})})})})}),i.jsx(yt,{path:"/tax-calculator",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(net,{})})})})}),i.jsx(yt,{path:"/payroll-settings",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{allowedRoles:["super_admin","admin"],children:i.jsx(gtt,{})})})})}),i.jsx(yt,{path:"/settings",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(Q6,{})})})})}),i.jsx(yt,{path:"/users",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{allowedRoles:["super_admin","admin"],children:i.jsx(Uet,{})})})})}),i.jsx(yt,{path:"/audit-logs",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{allowedRoles:["super_admin","admin","auditor"],children:i.jsx(_.Suspense,{fallback:ry,children:i.jsx(_tt,{})})})})})}),i.jsx(yt,{path:"/fixed-assets",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(att,{})})})})}),i.jsx(yt,{path:"/asset-depreciation",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(ltt,{})})})})}),i.jsx(yt,{path:"/financial-periods",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{allowedRoles:["super_admin","admin","financial_manager","accountant","assistant_accountant","finance_officer","bookkeeper"],children:i.jsx(dtt,{})})})})}),i.jsx(yt,{path:"/journal-entries",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(_.Suspense,{fallback:ry,children:i.jsx(jtt,{})})})})})}),i.jsx(yt,{path:"/chart-of-accounts",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{children:i.jsx(_.Suspense,{fallback:ry,children:i.jsx(Ntt,{})})})})})}),i.jsx(yt,{path:"/opening-balances",element:i.jsx(wt,{children:i.jsx(Pt,{children:i.jsx(It,{allowedRoles:["super_admin","admin","financial_manager","accountant"],children:i.jsx(xtt,{})})})})}),i.jsx(yt,{path:"*",element:i.jsx(Ret,{})})]})})})]})})});Aq(document.getElementById("root")).render(i.jsx(Ett,{}));export{Ve as $,mt as A,H as B,ks as C,Rs as D,rz as E,dr as F,we as G,Ce as H,G as I,Te as J,he as K,dm as L,to as M,ue as N,Q as O,se as P,Ts as Q,d8 as R,vh as S,m1 as T,Ds as U,Tt as V,jt as W,Ct as X,Nt as Y,be as Z,$i as _,ve as a,tn as a0,Xe as a1,Ms as a2,Nn as a3,Y as a4,pt as a5,Yoe as a6,mn as a7,Cl as a8,Hoe as a9,Jn as aa,Hn as ab,Kn as ac,Gn as ad,ns as ae,Zn as af,p1 as ag,s8 as ah,rle as ai,es as aj,Re as ak,xr as al,Je as am,Ee as b,De as c,Be as d,fv as e,X as f,te as g,ne as h,re as i,i as j,ee as k,Nb as l,so as m,ga as n,r8 as o,io as p,Vt as q,_ as r,Bt as s,je as t,ht as u,q as v,Ut as w,U as x,_n as y,$n as z};
