const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/JournalEntries-9Y3_Oorm.js","assets/filter-DjQRfVqE.js","assets/ChartOfAccounts-PPmFAnVg.js"])))=>i.map(i=>d[i]);
var CX=Object.defineProperty;var _2=t=>{throw TypeError(t)};var PX=(t,e,n)=>e in t?CX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var fx=(t,e,n)=>PX(t,typeof e!="symbol"?e+"":e,n),qN=(t,e,n)=>e.has(t)||_2("Cannot "+n);var Q=(t,e,n)=>(qN(t,e,"read from private field"),n?n.call(t):e.get(t)),mt=(t,e,n)=>e.has(t)?_2("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),qe=(t,e,n,r)=>(qN(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Bt=(t,e,n)=>(qN(t,e,"access private method"),n);var mx=(t,e,n,r)=>({set _(s){qe(t,e,s,n)},get _(){return Q(t,e,r)}});function IX(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var px=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var AB={exports:{}},o_={},TB={exports:{}},Kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mv=Symbol.for("react.element"),kX=Symbol.for("react.portal"),OX=Symbol.for("react.fragment"),RX=Symbol.for("react.strict_mode"),MX=Symbol.for("react.profiler"),DX=Symbol.for("react.provider"),LX=Symbol.for("react.context"),$X=Symbol.for("react.forward_ref"),FX=Symbol.for("react.suspense"),VX=Symbol.for("react.memo"),BX=Symbol.for("react.lazy"),j2=Symbol.iterator;function UX(t){return t===null||typeof t!="object"?null:(t=j2&&t[j2]||t["@@iterator"],typeof t=="function"?t:null)}var CB={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},PB=Object.assign,IB={};function Im(t,e,n){this.props=t,this.context=e,this.refs=IB,this.updater=n||CB}Im.prototype.isReactComponent={};Im.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Im.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function kB(){}kB.prototype=Im.prototype;function vC(t,e,n){this.props=t,this.context=e,this.refs=IB,this.updater=n||CB}var xC=vC.prototype=new kB;xC.constructor=vC;PB(xC,Im.prototype);xC.isPureReactComponent=!0;var N2=Array.isArray,OB=Object.prototype.hasOwnProperty,bC={current:null},RB={key:!0,ref:!0,__self:!0,__source:!0};function MB(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)OB.call(e,r)&&!RB.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:mv,type:t,key:i,ref:o,props:s,_owner:bC.current}}function zX(t,e){return{$$typeof:mv,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function wC(t){return typeof t=="object"&&t!==null&&t.$$typeof===mv}function qX(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var S2=/\/+/g;function WN(t,e){return typeof t=="object"&&t!==null&&t.key!=null?qX(""+t.key):e.toString(36)}function db(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case mv:case kX:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+WN(o,0):r,N2(s)?(n="",t!=null&&(n=t.replace(S2,"$&/")+"/"),db(s,e,n,"",function(u){return u})):s!=null&&(wC(s)&&(s=zX(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(S2,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",N2(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+WN(i,l);o+=db(i,e,n,c,s)}else if(c=UX(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+WN(i,l++),o+=db(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function gx(t,e,n){if(t==null)return t;var r=[],s=0;return db(t,r,"","",function(i){return e.call(n,i,s++)}),r}function WX(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Os={current:null},hb={transition:null},HX={ReactCurrentDispatcher:Os,ReactCurrentBatchConfig:hb,ReactCurrentOwner:bC};function DB(){throw Error("act(...) is not supported in production builds of React.")}Kt.Children={map:gx,forEach:function(t,e,n){gx(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return gx(t,function(){e++}),e},toArray:function(t){return gx(t,function(e){return e})||[]},only:function(t){if(!wC(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Kt.Component=Im;Kt.Fragment=OX;Kt.Profiler=MX;Kt.PureComponent=vC;Kt.StrictMode=RX;Kt.Suspense=FX;Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HX;Kt.act=DB;Kt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=PB({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=bC.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)OB.call(e,c)&&!RB.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:mv,type:t.type,key:s,ref:i,props:r,_owner:o}};Kt.createContext=function(t){return t={$$typeof:LX,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:DX,_context:t},t.Consumer=t};Kt.createElement=MB;Kt.createFactory=function(t){var e=MB.bind(null,t);return e.type=t,e};Kt.createRef=function(){return{current:null}};Kt.forwardRef=function(t){return{$$typeof:$X,render:t}};Kt.isValidElement=wC;Kt.lazy=function(t){return{$$typeof:BX,_payload:{_status:-1,_result:t},_init:WX}};Kt.memo=function(t,e){return{$$typeof:VX,type:t,compare:e===void 0?null:e}};Kt.startTransition=function(t){var e=hb.transition;hb.transition={};try{t()}finally{hb.transition=e}};Kt.unstable_act=DB;Kt.useCallback=function(t,e){return Os.current.useCallback(t,e)};Kt.useContext=function(t){return Os.current.useContext(t)};Kt.useDebugValue=function(){};Kt.useDeferredValue=function(t){return Os.current.useDeferredValue(t)};Kt.useEffect=function(t,e){return Os.current.useEffect(t,e)};Kt.useId=function(){return Os.current.useId()};Kt.useImperativeHandle=function(t,e,n){return Os.current.useImperativeHandle(t,e,n)};Kt.useInsertionEffect=function(t,e){return Os.current.useInsertionEffect(t,e)};Kt.useLayoutEffect=function(t,e){return Os.current.useLayoutEffect(t,e)};Kt.useMemo=function(t,e){return Os.current.useMemo(t,e)};Kt.useReducer=function(t,e,n){return Os.current.useReducer(t,e,n)};Kt.useRef=function(t){return Os.current.useRef(t)};Kt.useState=function(t){return Os.current.useState(t)};Kt.useSyncExternalStore=function(t,e,n){return Os.current.useSyncExternalStore(t,e,n)};Kt.useTransition=function(){return Os.current.useTransition()};Kt.version="18.3.1";TB.exports=Kt;var N=TB.exports;const D=pn(N),_C=IX({__proto__:null,default:D},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KX=N,GX=Symbol.for("react.element"),YX=Symbol.for("react.fragment"),QX=Object.prototype.hasOwnProperty,XX=KX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZX={key:!0,ref:!0,__self:!0,__source:!0};function LB(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)QX.call(e,r)&&!ZX.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:GX,type:t,key:i,ref:o,props:s,_owner:XX.current}}o_.Fragment=YX;o_.jsx=LB;o_.jsxs=LB;AB.exports=o_;var a=AB.exports,$B={exports:{}},Ta={},FB={exports:{}},VB={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,L){var W=F.length;F.push(L);e:for(;0<W;){var ie=W-1>>>1,oe=F[ie];if(0<s(oe,L))F[ie]=L,F[W]=oe,W=ie;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var L=F[0],W=F.pop();if(W!==L){F[0]=W;e:for(var ie=0,oe=F.length,me=oe>>>1;ie<me;){var Ie=2*(ie+1)-1,lt=F[Ie],ut=Ie+1,je=F[ut];if(0>s(lt,W))ut<oe&&0>s(je,lt)?(F[ie]=je,F[ut]=W,ie=ut):(F[ie]=lt,F[Ie]=W,ie=Ie);else if(ut<oe&&0>s(je,W))F[ie]=je,F[ut]=W,ie=ut;else break e}}return L}function s(F,L){var W=F.sortIndex-L.sortIndex;return W!==0?W:F.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,b=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(F){for(var L=n(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=F)r(u),L.sortIndex=L.expirationTime,e(c,L);else break;L=n(u)}}function T(F){if(g=!1,A(F),!b)if(n(c)!==null)b=!0,H(v);else{var L=n(u);L!==null&&M(T,L.startTime-F)}}function v(F,L){b=!1,g&&(g=!1,w(p),p=-1),m=!0;var W=f;try{for(A(L),h=n(c);h!==null&&(!(h.expirationTime>L)||F&&!C());){var ie=h.callback;if(typeof ie=="function"){h.callback=null,f=h.priorityLevel;var oe=ie(h.expirationTime<=L);L=t.unstable_now(),typeof oe=="function"?h.callback=oe:h===n(c)&&r(c),A(L)}else r(c);h=n(c)}if(h!==null)var me=!0;else{var Ie=n(u);Ie!==null&&M(T,Ie.startTime-L),me=!1}return me}finally{h=null,f=W,m=!1}}var S=!1,j=null,p=-1,E=5,P=-1;function C(){return!(t.unstable_now()-P<E)}function I(){if(j!==null){var F=t.unstable_now();P=F;var L=!0;try{L=j(!0,F)}finally{L?O():(S=!1,j=null)}}else S=!1}var O;if(typeof y=="function")O=function(){y(I)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,z=$.port2;$.port1.onmessage=I,O=function(){z.postMessage(null)}}else O=function(){x(I,0)};function H(F){j=F,S||(S=!0,O())}function M(F,L){p=x(function(){F(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){b||m||(b=!0,H(v))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(F){switch(f){case 1:case 2:case 3:var L=3;break;default:L=f}var W=f;f=L;try{return F()}finally{f=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,L){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var W=f;f=F;try{return L()}finally{f=W}},t.unstable_scheduleCallback=function(F,L,W){var ie=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ie+W:ie):W=ie,F){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=W+oe,F={id:d++,callback:L,priorityLevel:F,startTime:W,expirationTime:oe,sortIndex:-1},W>ie?(F.sortIndex=W,e(u,F),n(c)===null&&F===n(u)&&(g?(w(p),p=-1):g=!0,M(T,W-ie))):(F.sortIndex=oe,e(c,F),b||m||(b=!0,H(v))),F},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(F){var L=f;return function(){var W=f;f=L;try{return F.apply(this,arguments)}finally{f=W}}}})(VB);FB.exports=VB;var JX=FB.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eZ=N,Ea=JX;function Ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var BB=new Set,Vg={};function Wd(t,e){Of(t,e),Of(t+"Capture",e)}function Of(t,e){for(Vg[t]=e,t=0;t<e.length;t++)BB.add(e[t])}var rl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),OS=Object.prototype.hasOwnProperty,tZ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E2={},A2={};function nZ(t){return OS.call(A2,t)?!0:OS.call(E2,t)?!1:tZ.test(t)?A2[t]=!0:(E2[t]=!0,!1)}function rZ(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sZ(t,e,n,r){if(e===null||typeof e>"u"||rZ(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rs(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ts={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ts[t]=new Rs(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ts[e]=new Rs(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ts[t]=new Rs(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ts[t]=new Rs(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ts[t]=new Rs(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ts[t]=new Rs(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ts[t]=new Rs(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ts[t]=new Rs(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ts[t]=new Rs(t,5,!1,t.toLowerCase(),null,!1,!1)});var jC=/[\-:]([a-z])/g;function NC(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(jC,NC);ts[e]=new Rs(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(jC,NC);ts[e]=new Rs(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(jC,NC);ts[e]=new Rs(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ts[t]=new Rs(t,1,!1,t.toLowerCase(),null,!1,!1)});ts.xlinkHref=new Rs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ts[t]=new Rs(t,1,!1,t.toLowerCase(),null,!0,!0)});function SC(t,e,n,r){var s=ts.hasOwnProperty(e)?ts[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sZ(e,n,s,r)&&(n=null),r||s===null?nZ(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var bl=eZ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yx=Symbol.for("react.element"),Ch=Symbol.for("react.portal"),Ph=Symbol.for("react.fragment"),EC=Symbol.for("react.strict_mode"),RS=Symbol.for("react.profiler"),UB=Symbol.for("react.provider"),zB=Symbol.for("react.context"),AC=Symbol.for("react.forward_ref"),MS=Symbol.for("react.suspense"),DS=Symbol.for("react.suspense_list"),TC=Symbol.for("react.memo"),Hl=Symbol.for("react.lazy"),qB=Symbol.for("react.offscreen"),T2=Symbol.iterator;function Sp(t){return t===null||typeof t!="object"?null:(t=T2&&t[T2]||t["@@iterator"],typeof t=="function"?t:null)}var Xn=Object.assign,HN;function Jp(t){if(HN===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);HN=e&&e[1]||""}return`
`+HN+t}var KN=!1;function GN(t,e){if(!t||KN)return"";KN=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{KN=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Jp(t):""}function aZ(t){switch(t.tag){case 5:return Jp(t.type);case 16:return Jp("Lazy");case 13:return Jp("Suspense");case 19:return Jp("SuspenseList");case 0:case 2:case 15:return t=GN(t.type,!1),t;case 11:return t=GN(t.type.render,!1),t;case 1:return t=GN(t.type,!0),t;default:return""}}function LS(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ph:return"Fragment";case Ch:return"Portal";case RS:return"Profiler";case EC:return"StrictMode";case MS:return"Suspense";case DS:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zB:return(t.displayName||"Context")+".Consumer";case UB:return(t._context.displayName||"Context")+".Provider";case AC:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case TC:return e=t.displayName||null,e!==null?e:LS(t.type)||"Memo";case Hl:e=t._payload,t=t._init;try{return LS(t(e))}catch{}}return null}function iZ(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return LS(e);case 8:return e===EC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $c(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function WB(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function oZ(t){var e=WB(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function vx(t){t._valueTracker||(t._valueTracker=oZ(t))}function HB(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=WB(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ub(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $S(t,e){var n=e.checked;return Xn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function C2(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=$c(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function KB(t,e){e=e.checked,e!=null&&SC(t,"checked",e,!1)}function FS(t,e){KB(t,e);var n=$c(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?VS(t,e.type,n):e.hasOwnProperty("defaultValue")&&VS(t,e.type,$c(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function P2(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function VS(t,e,n){(e!=="number"||Ub(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var eg=Array.isArray;function Yh(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+$c(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function BS(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ae(91));return Xn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function I2(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ae(92));if(eg(n)){if(1<n.length)throw Error(Ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$c(n)}}function GB(t,e){var n=$c(e.value),r=$c(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function k2(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function YB(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function US(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?YB(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xx,QB=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xx=xx||document.createElement("div"),xx.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xx.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bg(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var mg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lZ=["Webkit","ms","Moz","O"];Object.keys(mg).forEach(function(t){lZ.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),mg[e]=mg[t]})});function XB(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||mg.hasOwnProperty(t)&&mg[t]?(""+e).trim():e+"px"}function ZB(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=XB(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var cZ=Xn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zS(t,e){if(e){if(cZ[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ae(62))}}function qS(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var WS=null;function CC(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var HS=null,Qh=null,Xh=null;function O2(t){if(t=yv(t)){if(typeof HS!="function")throw Error(Ae(280));var e=t.stateNode;e&&(e=h_(e),HS(t.stateNode,t.type,e))}}function JB(t){Qh?Xh?Xh.push(t):Xh=[t]:Qh=t}function e3(){if(Qh){var t=Qh,e=Xh;if(Xh=Qh=null,O2(t),e)for(t=0;t<e.length;t++)O2(e[t])}}function t3(t,e){return t(e)}function n3(){}var YN=!1;function r3(t,e,n){if(YN)return t(e,n);YN=!0;try{return t3(t,e,n)}finally{YN=!1,(Qh!==null||Xh!==null)&&(n3(),e3())}}function Ug(t,e){var n=t.stateNode;if(n===null)return null;var r=h_(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ae(231,e,typeof n));return n}var KS=!1;if(rl)try{var Ep={};Object.defineProperty(Ep,"passive",{get:function(){KS=!0}}),window.addEventListener("test",Ep,Ep),window.removeEventListener("test",Ep,Ep)}catch{KS=!1}function uZ(t,e,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var pg=!1,zb=null,qb=!1,GS=null,dZ={onError:function(t){pg=!0,zb=t}};function hZ(t,e,n,r,s,i,o,l,c){pg=!1,zb=null,uZ.apply(dZ,arguments)}function fZ(t,e,n,r,s,i,o,l,c){if(hZ.apply(this,arguments),pg){if(pg){var u=zb;pg=!1,zb=null}else throw Error(Ae(198));qb||(qb=!0,GS=u)}}function Hd(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function s3(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function R2(t){if(Hd(t)!==t)throw Error(Ae(188))}function mZ(t){var e=t.alternate;if(!e){if(e=Hd(t),e===null)throw Error(Ae(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return R2(s),t;if(i===r)return R2(s),e;i=i.sibling}throw Error(Ae(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(Ae(189))}}if(n.alternate!==r)throw Error(Ae(190))}if(n.tag!==3)throw Error(Ae(188));return n.stateNode.current===n?t:e}function a3(t){return t=mZ(t),t!==null?i3(t):null}function i3(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=i3(t);if(e!==null)return e;t=t.sibling}return null}var o3=Ea.unstable_scheduleCallback,M2=Ea.unstable_cancelCallback,pZ=Ea.unstable_shouldYield,gZ=Ea.unstable_requestPaint,mr=Ea.unstable_now,yZ=Ea.unstable_getCurrentPriorityLevel,PC=Ea.unstable_ImmediatePriority,l3=Ea.unstable_UserBlockingPriority,Wb=Ea.unstable_NormalPriority,vZ=Ea.unstable_LowPriority,c3=Ea.unstable_IdlePriority,l_=null,so=null;function xZ(t){if(so&&typeof so.onCommitFiberRoot=="function")try{so.onCommitFiberRoot(l_,t,void 0,(t.current.flags&128)===128)}catch{}}var Ei=Math.clz32?Math.clz32:_Z,bZ=Math.log,wZ=Math.LN2;function _Z(t){return t>>>=0,t===0?32:31-(bZ(t)/wZ|0)|0}var bx=64,wx=4194304;function tg(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Hb(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=tg(l):(i&=o,i!==0&&(r=tg(i)))}else o=n&~s,o!==0?r=tg(o):i!==0&&(r=tg(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ei(e),s=1<<n,r|=t[n],e&=~s;return r}function jZ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function NZ(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ei(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=jZ(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function YS(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function u3(){var t=bx;return bx<<=1,!(bx&4194240)&&(bx=64),t}function QN(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function pv(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ei(e),t[e]=n}function SZ(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ei(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function IC(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ei(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var vn=0;function d3(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var h3,kC,f3,m3,p3,QS=!1,_x=[],wc=null,_c=null,jc=null,zg=new Map,qg=new Map,Ql=[],EZ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function D2(t,e){switch(t){case"focusin":case"focusout":wc=null;break;case"dragenter":case"dragleave":_c=null;break;case"mouseover":case"mouseout":jc=null;break;case"pointerover":case"pointerout":zg.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qg.delete(e.pointerId)}}function Ap(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=yv(e),e!==null&&kC(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function AZ(t,e,n,r,s){switch(e){case"focusin":return wc=Ap(wc,t,e,n,r,s),!0;case"dragenter":return _c=Ap(_c,t,e,n,r,s),!0;case"mouseover":return jc=Ap(jc,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return zg.set(i,Ap(zg.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,qg.set(i,Ap(qg.get(i)||null,t,e,n,r,s)),!0}return!1}function g3(t){var e=$u(t.target);if(e!==null){var n=Hd(e);if(n!==null){if(e=n.tag,e===13){if(e=s3(n),e!==null){t.blockedOn=e,p3(t.priority,function(){f3(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fb(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=XS(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);WS=r,n.target.dispatchEvent(r),WS=null}else return e=yv(n),e!==null&&kC(e),t.blockedOn=n,!1;e.shift()}return!0}function L2(t,e,n){fb(t)&&n.delete(e)}function TZ(){QS=!1,wc!==null&&fb(wc)&&(wc=null),_c!==null&&fb(_c)&&(_c=null),jc!==null&&fb(jc)&&(jc=null),zg.forEach(L2),qg.forEach(L2)}function Tp(t,e){t.blockedOn===e&&(t.blockedOn=null,QS||(QS=!0,Ea.unstable_scheduleCallback(Ea.unstable_NormalPriority,TZ)))}function Wg(t){function e(s){return Tp(s,t)}if(0<_x.length){Tp(_x[0],t);for(var n=1;n<_x.length;n++){var r=_x[n];r.blockedOn===t&&(r.blockedOn=null)}}for(wc!==null&&Tp(wc,t),_c!==null&&Tp(_c,t),jc!==null&&Tp(jc,t),zg.forEach(e),qg.forEach(e),n=0;n<Ql.length;n++)r=Ql[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ql.length&&(n=Ql[0],n.blockedOn===null);)g3(n),n.blockedOn===null&&Ql.shift()}var Zh=bl.ReactCurrentBatchConfig,Kb=!0;function CZ(t,e,n,r){var s=vn,i=Zh.transition;Zh.transition=null;try{vn=1,OC(t,e,n,r)}finally{vn=s,Zh.transition=i}}function PZ(t,e,n,r){var s=vn,i=Zh.transition;Zh.transition=null;try{vn=4,OC(t,e,n,r)}finally{vn=s,Zh.transition=i}}function OC(t,e,n,r){if(Kb){var s=XS(t,e,n,r);if(s===null)i1(t,e,r,Gb,n),D2(t,r);else if(AZ(s,t,e,n,r))r.stopPropagation();else if(D2(t,r),e&4&&-1<EZ.indexOf(t)){for(;s!==null;){var i=yv(s);if(i!==null&&h3(i),i=XS(t,e,n,r),i===null&&i1(t,e,r,Gb,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else i1(t,e,r,null,n)}}var Gb=null;function XS(t,e,n,r){if(Gb=null,t=CC(r),t=$u(t),t!==null)if(e=Hd(t),e===null)t=null;else if(n=e.tag,n===13){if(t=s3(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Gb=t,null}function y3(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yZ()){case PC:return 1;case l3:return 4;case Wb:case vZ:return 16;case c3:return 536870912;default:return 16}default:return 16}}var mc=null,RC=null,mb=null;function v3(){if(mb)return mb;var t,e=RC,n=e.length,r,s="value"in mc?mc.value:mc.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return mb=s.slice(t,1<r?1-r:void 0)}function pb(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jx(){return!0}function $2(){return!1}function Ca(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?jx:$2,this.isPropagationStopped=$2,this}return Xn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jx)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jx)},persist:function(){},isPersistent:jx}),e}var km={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},MC=Ca(km),gv=Xn({},km,{view:0,detail:0}),IZ=Ca(gv),XN,ZN,Cp,c_=Xn({},gv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:DC,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Cp&&(Cp&&t.type==="mousemove"?(XN=t.screenX-Cp.screenX,ZN=t.screenY-Cp.screenY):ZN=XN=0,Cp=t),XN)},movementY:function(t){return"movementY"in t?t.movementY:ZN}}),F2=Ca(c_),kZ=Xn({},c_,{dataTransfer:0}),OZ=Ca(kZ),RZ=Xn({},gv,{relatedTarget:0}),JN=Ca(RZ),MZ=Xn({},km,{animationName:0,elapsedTime:0,pseudoElement:0}),DZ=Ca(MZ),LZ=Xn({},km,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$Z=Ca(LZ),FZ=Xn({},km,{data:0}),V2=Ca(FZ),VZ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BZ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UZ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zZ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=UZ[t])?!!e[t]:!1}function DC(){return zZ}var qZ=Xn({},gv,{key:function(t){if(t.key){var e=VZ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=pb(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?BZ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:DC,charCode:function(t){return t.type==="keypress"?pb(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?pb(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),WZ=Ca(qZ),HZ=Xn({},c_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),B2=Ca(HZ),KZ=Xn({},gv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:DC}),GZ=Ca(KZ),YZ=Xn({},km,{propertyName:0,elapsedTime:0,pseudoElement:0}),QZ=Ca(YZ),XZ=Xn({},c_,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ZZ=Ca(XZ),JZ=[9,13,27,32],LC=rl&&"CompositionEvent"in window,gg=null;rl&&"documentMode"in document&&(gg=document.documentMode);var eJ=rl&&"TextEvent"in window&&!gg,x3=rl&&(!LC||gg&&8<gg&&11>=gg),U2=" ",z2=!1;function b3(t,e){switch(t){case"keyup":return JZ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function w3(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ih=!1;function tJ(t,e){switch(t){case"compositionend":return w3(e);case"keypress":return e.which!==32?null:(z2=!0,U2);case"textInput":return t=e.data,t===U2&&z2?null:t;default:return null}}function nJ(t,e){if(Ih)return t==="compositionend"||!LC&&b3(t,e)?(t=v3(),mb=RC=mc=null,Ih=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return x3&&e.locale!=="ko"?null:e.data;default:return null}}var rJ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function q2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rJ[t.type]:e==="textarea"}function _3(t,e,n,r){JB(r),e=Yb(e,"onChange"),0<e.length&&(n=new MC("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var yg=null,Hg=null;function sJ(t){O3(t,0)}function u_(t){var e=Rh(t);if(HB(e))return t}function aJ(t,e){if(t==="change")return e}var j3=!1;if(rl){var e1;if(rl){var t1="oninput"in document;if(!t1){var W2=document.createElement("div");W2.setAttribute("oninput","return;"),t1=typeof W2.oninput=="function"}e1=t1}else e1=!1;j3=e1&&(!document.documentMode||9<document.documentMode)}function H2(){yg&&(yg.detachEvent("onpropertychange",N3),Hg=yg=null)}function N3(t){if(t.propertyName==="value"&&u_(Hg)){var e=[];_3(e,Hg,t,CC(t)),r3(sJ,e)}}function iJ(t,e,n){t==="focusin"?(H2(),yg=e,Hg=n,yg.attachEvent("onpropertychange",N3)):t==="focusout"&&H2()}function oJ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return u_(Hg)}function lJ(t,e){if(t==="click")return u_(e)}function cJ(t,e){if(t==="input"||t==="change")return u_(e)}function uJ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pi=typeof Object.is=="function"?Object.is:uJ;function Kg(t,e){if(Pi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!OS.call(e,s)||!Pi(t[s],e[s]))return!1}return!0}function K2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function G2(t,e){var n=K2(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=K2(n)}}function S3(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?S3(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function E3(){for(var t=window,e=Ub();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ub(t.document)}return e}function $C(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function dJ(t){var e=E3(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&S3(n.ownerDocument.documentElement,n)){if(r!==null&&$C(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=G2(n,i);var o=G2(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hJ=rl&&"documentMode"in document&&11>=document.documentMode,kh=null,ZS=null,vg=null,JS=!1;function Y2(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;JS||kh==null||kh!==Ub(r)||(r=kh,"selectionStart"in r&&$C(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vg&&Kg(vg,r)||(vg=r,r=Yb(ZS,"onSelect"),0<r.length&&(e=new MC("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=kh)))}function Nx(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Oh={animationend:Nx("Animation","AnimationEnd"),animationiteration:Nx("Animation","AnimationIteration"),animationstart:Nx("Animation","AnimationStart"),transitionend:Nx("Transition","TransitionEnd")},n1={},A3={};rl&&(A3=document.createElement("div").style,"AnimationEvent"in window||(delete Oh.animationend.animation,delete Oh.animationiteration.animation,delete Oh.animationstart.animation),"TransitionEvent"in window||delete Oh.transitionend.transition);function d_(t){if(n1[t])return n1[t];if(!Oh[t])return t;var e=Oh[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in A3)return n1[t]=e[n];return t}var T3=d_("animationend"),C3=d_("animationiteration"),P3=d_("animationstart"),I3=d_("transitionend"),k3=new Map,Q2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function su(t,e){k3.set(t,e),Wd(e,[t])}for(var r1=0;r1<Q2.length;r1++){var s1=Q2[r1],fJ=s1.toLowerCase(),mJ=s1[0].toUpperCase()+s1.slice(1);su(fJ,"on"+mJ)}su(T3,"onAnimationEnd");su(C3,"onAnimationIteration");su(P3,"onAnimationStart");su("dblclick","onDoubleClick");su("focusin","onFocus");su("focusout","onBlur");su(I3,"onTransitionEnd");Of("onMouseEnter",["mouseout","mouseover"]);Of("onMouseLeave",["mouseout","mouseover"]);Of("onPointerEnter",["pointerout","pointerover"]);Of("onPointerLeave",["pointerout","pointerover"]);Wd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ng="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pJ=new Set("cancel close invalid load scroll toggle".split(" ").concat(ng));function X2(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,fZ(r,e,void 0,t),t.currentTarget=null}function O3(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;X2(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;X2(s,l,u),i=c}}}if(qb)throw t=GS,qb=!1,GS=null,t}function Dn(t,e){var n=e[sE];n===void 0&&(n=e[sE]=new Set);var r=t+"__bubble";n.has(r)||(R3(e,t,2,!1),n.add(r))}function a1(t,e,n){var r=0;e&&(r|=4),R3(n,t,r,e)}var Sx="_reactListening"+Math.random().toString(36).slice(2);function Gg(t){if(!t[Sx]){t[Sx]=!0,BB.forEach(function(n){n!=="selectionchange"&&(pJ.has(n)||a1(n,!1,t),a1(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Sx]||(e[Sx]=!0,a1("selectionchange",!1,e))}}function R3(t,e,n,r){switch(y3(e)){case 1:var s=CZ;break;case 4:s=PZ;break;default:s=OC}n=s.bind(null,e,n,t),s=void 0,!KS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function i1(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=$u(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}r3(function(){var u=i,d=CC(n),h=[];e:{var f=k3.get(t);if(f!==void 0){var m=MC,b=t;switch(t){case"keypress":if(pb(n)===0)break e;case"keydown":case"keyup":m=WZ;break;case"focusin":b="focus",m=JN;break;case"focusout":b="blur",m=JN;break;case"beforeblur":case"afterblur":m=JN;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=F2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=OZ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=GZ;break;case T3:case C3:case P3:m=DZ;break;case I3:m=QZ;break;case"scroll":m=IZ;break;case"wheel":m=ZZ;break;case"copy":case"cut":case"paste":m=$Z;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=B2}var g=(e&4)!==0,x=!g&&t==="scroll",w=g?f!==null?f+"Capture":null:f;g=[];for(var y=u,A;y!==null;){A=y;var T=A.stateNode;if(A.tag===5&&T!==null&&(A=T,w!==null&&(T=Ug(y,w),T!=null&&g.push(Yg(y,T,A)))),x)break;y=y.return}0<g.length&&(f=new m(f,b,null,n,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==WS&&(b=n.relatedTarget||n.fromElement)&&($u(b)||b[sl]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(b=n.relatedTarget||n.toElement,m=u,b=b?$u(b):null,b!==null&&(x=Hd(b),b!==x||b.tag!==5&&b.tag!==6)&&(b=null)):(m=null,b=u),m!==b)){if(g=F2,T="onMouseLeave",w="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(g=B2,T="onPointerLeave",w="onPointerEnter",y="pointer"),x=m==null?f:Rh(m),A=b==null?f:Rh(b),f=new g(T,y+"leave",m,n,d),f.target=x,f.relatedTarget=A,T=null,$u(d)===u&&(g=new g(w,y+"enter",b,n,d),g.target=A,g.relatedTarget=x,T=g),x=T,m&&b)t:{for(g=m,w=b,y=0,A=g;A;A=dh(A))y++;for(A=0,T=w;T;T=dh(T))A++;for(;0<y-A;)g=dh(g),y--;for(;0<A-y;)w=dh(w),A--;for(;y--;){if(g===w||w!==null&&g===w.alternate)break t;g=dh(g),w=dh(w)}g=null}else g=null;m!==null&&Z2(h,f,m,g,!1),b!==null&&x!==null&&Z2(h,x,b,g,!0)}}e:{if(f=u?Rh(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var v=aJ;else if(q2(f))if(j3)v=cJ;else{v=oJ;var S=iJ}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(v=lJ);if(v&&(v=v(t,u))){_3(h,v,n,d);break e}S&&S(t,f,u),t==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&VS(f,"number",f.value)}switch(S=u?Rh(u):window,t){case"focusin":(q2(S)||S.contentEditable==="true")&&(kh=S,ZS=u,vg=null);break;case"focusout":vg=ZS=kh=null;break;case"mousedown":JS=!0;break;case"contextmenu":case"mouseup":case"dragend":JS=!1,Y2(h,n,d);break;case"selectionchange":if(hJ)break;case"keydown":case"keyup":Y2(h,n,d)}var j;if(LC)e:{switch(t){case"compositionstart":var p="onCompositionStart";break e;case"compositionend":p="onCompositionEnd";break e;case"compositionupdate":p="onCompositionUpdate";break e}p=void 0}else Ih?b3(t,n)&&(p="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(p="onCompositionStart");p&&(x3&&n.locale!=="ko"&&(Ih||p!=="onCompositionStart"?p==="onCompositionEnd"&&Ih&&(j=v3()):(mc=d,RC="value"in mc?mc.value:mc.textContent,Ih=!0)),S=Yb(u,p),0<S.length&&(p=new V2(p,t,null,n,d),h.push({event:p,listeners:S}),j?p.data=j:(j=w3(n),j!==null&&(p.data=j)))),(j=eJ?tJ(t,n):nJ(t,n))&&(u=Yb(u,"onBeforeInput"),0<u.length&&(d=new V2("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=j))}O3(h,e)})}function Yg(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yb(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ug(t,n),i!=null&&r.unshift(Yg(t,i,s)),i=Ug(t,e),i!=null&&r.push(Yg(t,i,s))),t=t.return}return r}function dh(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Z2(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Ug(n,i),c!=null&&o.unshift(Yg(n,c,l))):s||(c=Ug(n,i),c!=null&&o.push(Yg(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var gJ=/\r\n?/g,yJ=/\u0000|\uFFFD/g;function J2(t){return(typeof t=="string"?t:""+t).replace(gJ,`
`).replace(yJ,"")}function Ex(t,e,n){if(e=J2(e),J2(t)!==e&&n)throw Error(Ae(425))}function Qb(){}var eE=null,tE=null;function nE(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rE=typeof setTimeout=="function"?setTimeout:void 0,vJ=typeof clearTimeout=="function"?clearTimeout:void 0,eR=typeof Promise=="function"?Promise:void 0,xJ=typeof queueMicrotask=="function"?queueMicrotask:typeof eR<"u"?function(t){return eR.resolve(null).then(t).catch(bJ)}:rE;function bJ(t){setTimeout(function(){throw t})}function o1(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Wg(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Wg(e)}function Nc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function tR(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Om=Math.random().toString(36).slice(2),Xi="__reactFiber$"+Om,Qg="__reactProps$"+Om,sl="__reactContainer$"+Om,sE="__reactEvents$"+Om,wJ="__reactListeners$"+Om,_J="__reactHandles$"+Om;function $u(t){var e=t[Xi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[sl]||n[Xi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=tR(t);t!==null;){if(n=t[Xi])return n;t=tR(t)}return e}t=n,n=t.parentNode}return null}function yv(t){return t=t[Xi]||t[sl],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Rh(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ae(33))}function h_(t){return t[Qg]||null}var aE=[],Mh=-1;function au(t){return{current:t}}function Vn(t){0>Mh||(t.current=aE[Mh],aE[Mh]=null,Mh--)}function kn(t,e){Mh++,aE[Mh]=t.current,t.current=e}var Fc={},vs=au(Fc),Js=au(!1),hd=Fc;function Rf(t,e){var n=t.type.contextTypes;if(!n)return Fc;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ea(t){return t=t.childContextTypes,t!=null}function Xb(){Vn(Js),Vn(vs)}function nR(t,e,n){if(vs.current!==Fc)throw Error(Ae(168));kn(vs,e),kn(Js,n)}function M3(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Ae(108,iZ(t)||"Unknown",s));return Xn({},n,r)}function Zb(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fc,hd=vs.current,kn(vs,t),kn(Js,Js.current),!0}function rR(t,e,n){var r=t.stateNode;if(!r)throw Error(Ae(169));n?(t=M3(t,e,hd),r.__reactInternalMemoizedMergedChildContext=t,Vn(Js),Vn(vs),kn(vs,t)):Vn(Js),kn(Js,n)}var Fo=null,f_=!1,l1=!1;function D3(t){Fo===null?Fo=[t]:Fo.push(t)}function jJ(t){f_=!0,D3(t)}function iu(){if(!l1&&Fo!==null){l1=!0;var t=0,e=vn;try{var n=Fo;for(vn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Fo=null,f_=!1}catch(s){throw Fo!==null&&(Fo=Fo.slice(t+1)),o3(PC,iu),s}finally{vn=e,l1=!1}}return null}var Dh=[],Lh=0,Jb=null,e0=0,La=[],$a=0,fd=null,zo=1,qo="";function Pu(t,e){Dh[Lh++]=e0,Dh[Lh++]=Jb,Jb=t,e0=e}function L3(t,e,n){La[$a++]=zo,La[$a++]=qo,La[$a++]=fd,fd=t;var r=zo;t=qo;var s=32-Ei(r)-1;r&=~(1<<s),n+=1;var i=32-Ei(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,zo=1<<32-Ei(e)+s|n<<s|r,qo=i+t}else zo=1<<i|n<<s|r,qo=t}function FC(t){t.return!==null&&(Pu(t,1),L3(t,1,0))}function VC(t){for(;t===Jb;)Jb=Dh[--Lh],Dh[Lh]=null,e0=Dh[--Lh],Dh[Lh]=null;for(;t===fd;)fd=La[--$a],La[$a]=null,qo=La[--$a],La[$a]=null,zo=La[--$a],La[$a]=null}var va=null,ma=null,Bn=!1,bi=null;function $3(t,e){var n=Ua(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function sR(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,va=t,ma=Nc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,va=t,ma=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fd!==null?{id:zo,overflow:qo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ua(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,va=t,ma=null,!0):!1;default:return!1}}function iE(t){return(t.mode&1)!==0&&(t.flags&128)===0}function oE(t){if(Bn){var e=ma;if(e){var n=e;if(!sR(t,e)){if(iE(t))throw Error(Ae(418));e=Nc(n.nextSibling);var r=va;e&&sR(t,e)?$3(r,n):(t.flags=t.flags&-4097|2,Bn=!1,va=t)}}else{if(iE(t))throw Error(Ae(418));t.flags=t.flags&-4097|2,Bn=!1,va=t}}}function aR(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;va=t}function Ax(t){if(t!==va)return!1;if(!Bn)return aR(t),Bn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!nE(t.type,t.memoizedProps)),e&&(e=ma)){if(iE(t))throw F3(),Error(Ae(418));for(;e;)$3(t,e),e=Nc(e.nextSibling)}if(aR(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ma=Nc(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ma=null}}else ma=va?Nc(t.stateNode.nextSibling):null;return!0}function F3(){for(var t=ma;t;)t=Nc(t.nextSibling)}function Mf(){ma=va=null,Bn=!1}function BC(t){bi===null?bi=[t]:bi.push(t)}var NJ=bl.ReactCurrentBatchConfig;function Pp(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ae(309));var r=n.stateNode}if(!r)throw Error(Ae(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Ae(284));if(!n._owner)throw Error(Ae(290,t))}return t}function Tx(t,e){throw t=Object.prototype.toString.call(e),Error(Ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function iR(t){var e=t._init;return e(t._payload)}function V3(t){function e(w,y){if(t){var A=w.deletions;A===null?(w.deletions=[y],w.flags|=16):A.push(y)}}function n(w,y){if(!t)return null;for(;y!==null;)e(w,y),y=y.sibling;return null}function r(w,y){for(w=new Map;y!==null;)y.key!==null?w.set(y.key,y):w.set(y.index,y),y=y.sibling;return w}function s(w,y){return w=Tc(w,y),w.index=0,w.sibling=null,w}function i(w,y,A){return w.index=A,t?(A=w.alternate,A!==null?(A=A.index,A<y?(w.flags|=2,y):A):(w.flags|=2,y)):(w.flags|=1048576,y)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,y,A,T){return y===null||y.tag!==6?(y=p1(A,w.mode,T),y.return=w,y):(y=s(y,A),y.return=w,y)}function c(w,y,A,T){var v=A.type;return v===Ph?d(w,y,A.props.children,T,A.key):y!==null&&(y.elementType===v||typeof v=="object"&&v!==null&&v.$$typeof===Hl&&iR(v)===y.type)?(T=s(y,A.props),T.ref=Pp(w,y,A),T.return=w,T):(T=_b(A.type,A.key,A.props,null,w.mode,T),T.ref=Pp(w,y,A),T.return=w,T)}function u(w,y,A,T){return y===null||y.tag!==4||y.stateNode.containerInfo!==A.containerInfo||y.stateNode.implementation!==A.implementation?(y=g1(A,w.mode,T),y.return=w,y):(y=s(y,A.children||[]),y.return=w,y)}function d(w,y,A,T,v){return y===null||y.tag!==7?(y=sd(A,w.mode,T,v),y.return=w,y):(y=s(y,A),y.return=w,y)}function h(w,y,A){if(typeof y=="string"&&y!==""||typeof y=="number")return y=p1(""+y,w.mode,A),y.return=w,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case yx:return A=_b(y.type,y.key,y.props,null,w.mode,A),A.ref=Pp(w,null,y),A.return=w,A;case Ch:return y=g1(y,w.mode,A),y.return=w,y;case Hl:var T=y._init;return h(w,T(y._payload),A)}if(eg(y)||Sp(y))return y=sd(y,w.mode,A,null),y.return=w,y;Tx(w,y)}return null}function f(w,y,A,T){var v=y!==null?y.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return v!==null?null:l(w,y,""+A,T);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case yx:return A.key===v?c(w,y,A,T):null;case Ch:return A.key===v?u(w,y,A,T):null;case Hl:return v=A._init,f(w,y,v(A._payload),T)}if(eg(A)||Sp(A))return v!==null?null:d(w,y,A,T,null);Tx(w,A)}return null}function m(w,y,A,T,v){if(typeof T=="string"&&T!==""||typeof T=="number")return w=w.get(A)||null,l(y,w,""+T,v);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case yx:return w=w.get(T.key===null?A:T.key)||null,c(y,w,T,v);case Ch:return w=w.get(T.key===null?A:T.key)||null,u(y,w,T,v);case Hl:var S=T._init;return m(w,y,A,S(T._payload),v)}if(eg(T)||Sp(T))return w=w.get(A)||null,d(y,w,T,v,null);Tx(y,T)}return null}function b(w,y,A,T){for(var v=null,S=null,j=y,p=y=0,E=null;j!==null&&p<A.length;p++){j.index>p?(E=j,j=null):E=j.sibling;var P=f(w,j,A[p],T);if(P===null){j===null&&(j=E);break}t&&j&&P.alternate===null&&e(w,j),y=i(P,y,p),S===null?v=P:S.sibling=P,S=P,j=E}if(p===A.length)return n(w,j),Bn&&Pu(w,p),v;if(j===null){for(;p<A.length;p++)j=h(w,A[p],T),j!==null&&(y=i(j,y,p),S===null?v=j:S.sibling=j,S=j);return Bn&&Pu(w,p),v}for(j=r(w,j);p<A.length;p++)E=m(j,w,p,A[p],T),E!==null&&(t&&E.alternate!==null&&j.delete(E.key===null?p:E.key),y=i(E,y,p),S===null?v=E:S.sibling=E,S=E);return t&&j.forEach(function(C){return e(w,C)}),Bn&&Pu(w,p),v}function g(w,y,A,T){var v=Sp(A);if(typeof v!="function")throw Error(Ae(150));if(A=v.call(A),A==null)throw Error(Ae(151));for(var S=v=null,j=y,p=y=0,E=null,P=A.next();j!==null&&!P.done;p++,P=A.next()){j.index>p?(E=j,j=null):E=j.sibling;var C=f(w,j,P.value,T);if(C===null){j===null&&(j=E);break}t&&j&&C.alternate===null&&e(w,j),y=i(C,y,p),S===null?v=C:S.sibling=C,S=C,j=E}if(P.done)return n(w,j),Bn&&Pu(w,p),v;if(j===null){for(;!P.done;p++,P=A.next())P=h(w,P.value,T),P!==null&&(y=i(P,y,p),S===null?v=P:S.sibling=P,S=P);return Bn&&Pu(w,p),v}for(j=r(w,j);!P.done;p++,P=A.next())P=m(j,w,p,P.value,T),P!==null&&(t&&P.alternate!==null&&j.delete(P.key===null?p:P.key),y=i(P,y,p),S===null?v=P:S.sibling=P,S=P);return t&&j.forEach(function(I){return e(w,I)}),Bn&&Pu(w,p),v}function x(w,y,A,T){if(typeof A=="object"&&A!==null&&A.type===Ph&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case yx:e:{for(var v=A.key,S=y;S!==null;){if(S.key===v){if(v=A.type,v===Ph){if(S.tag===7){n(w,S.sibling),y=s(S,A.props.children),y.return=w,w=y;break e}}else if(S.elementType===v||typeof v=="object"&&v!==null&&v.$$typeof===Hl&&iR(v)===S.type){n(w,S.sibling),y=s(S,A.props),y.ref=Pp(w,S,A),y.return=w,w=y;break e}n(w,S);break}else e(w,S);S=S.sibling}A.type===Ph?(y=sd(A.props.children,w.mode,T,A.key),y.return=w,w=y):(T=_b(A.type,A.key,A.props,null,w.mode,T),T.ref=Pp(w,y,A),T.return=w,w=T)}return o(w);case Ch:e:{for(S=A.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===A.containerInfo&&y.stateNode.implementation===A.implementation){n(w,y.sibling),y=s(y,A.children||[]),y.return=w,w=y;break e}else{n(w,y);break}else e(w,y);y=y.sibling}y=g1(A,w.mode,T),y.return=w,w=y}return o(w);case Hl:return S=A._init,x(w,y,S(A._payload),T)}if(eg(A))return b(w,y,A,T);if(Sp(A))return g(w,y,A,T);Tx(w,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,y!==null&&y.tag===6?(n(w,y.sibling),y=s(y,A),y.return=w,w=y):(n(w,y),y=p1(A,w.mode,T),y.return=w,w=y),o(w)):n(w,y)}return x}var Df=V3(!0),B3=V3(!1),t0=au(null),n0=null,$h=null,UC=null;function zC(){UC=$h=n0=null}function qC(t){var e=t0.current;Vn(t0),t._currentValue=e}function lE(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Jh(t,e){n0=t,UC=$h=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Qs=!0),t.firstContext=null)}function Qa(t){var e=t._currentValue;if(UC!==t)if(t={context:t,memoizedValue:e,next:null},$h===null){if(n0===null)throw Error(Ae(308));$h=t,n0.dependencies={lanes:0,firstContext:t}}else $h=$h.next=t;return e}var Fu=null;function WC(t){Fu===null?Fu=[t]:Fu.push(t)}function U3(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,WC(e)):(n.next=s.next,s.next=n),e.interleaved=n,al(t,r)}function al(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Kl=!1;function HC(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function z3(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Sc(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,rn&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,al(t,n)}return s=r.interleaved,s===null?(e.next=e,WC(r)):(e.next=s.next,s.next=e),r.interleaved=e,al(t,n)}function gb(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,IC(t,n)}}function oR(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function r0(t,e,n,r){var s=t.updateQueue;Kl=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,g=l;switch(f=e,m=n,g.tag){case 1:if(b=g.payload,typeof b=="function"){h=b.call(m,h,f);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=g.payload,f=typeof b=="function"?b.call(m,h,f):b,f==null)break e;h=Xn({},h,f);break e;case 2:Kl=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);pd|=o,t.lanes=o,t.memoizedState=h}}function lR(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Ae(191,s));s.call(r)}}}var vv={},ao=au(vv),Xg=au(vv),Zg=au(vv);function Vu(t){if(t===vv)throw Error(Ae(174));return t}function KC(t,e){switch(kn(Zg,e),kn(Xg,t),kn(ao,vv),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:US(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=US(e,t)}Vn(ao),kn(ao,e)}function Lf(){Vn(ao),Vn(Xg),Vn(Zg)}function q3(t){Vu(Zg.current);var e=Vu(ao.current),n=US(e,t.type);e!==n&&(kn(Xg,t),kn(ao,n))}function GC(t){Xg.current===t&&(Vn(ao),Vn(Xg))}var Kn=au(0);function s0(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var c1=[];function YC(){for(var t=0;t<c1.length;t++)c1[t]._workInProgressVersionPrimary=null;c1.length=0}var yb=bl.ReactCurrentDispatcher,u1=bl.ReactCurrentBatchConfig,md=0,Yn=null,Pr=null,Ur=null,a0=!1,xg=!1,Jg=0,SJ=0;function is(){throw Error(Ae(321))}function QC(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Pi(t[n],e[n]))return!1;return!0}function XC(t,e,n,r,s,i){if(md=i,Yn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,yb.current=t===null||t.memoizedState===null?CJ:PJ,t=n(r,s),xg){i=0;do{if(xg=!1,Jg=0,25<=i)throw Error(Ae(301));i+=1,Ur=Pr=null,e.updateQueue=null,yb.current=IJ,t=n(r,s)}while(xg)}if(yb.current=i0,e=Pr!==null&&Pr.next!==null,md=0,Ur=Pr=Yn=null,a0=!1,e)throw Error(Ae(300));return t}function ZC(){var t=Jg!==0;return Jg=0,t}function Hi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ur===null?Yn.memoizedState=Ur=t:Ur=Ur.next=t,Ur}function Xa(){if(Pr===null){var t=Yn.alternate;t=t!==null?t.memoizedState:null}else t=Pr.next;var e=Ur===null?Yn.memoizedState:Ur.next;if(e!==null)Ur=e,Pr=t;else{if(t===null)throw Error(Ae(310));Pr=t,t={memoizedState:Pr.memoizedState,baseState:Pr.baseState,baseQueue:Pr.baseQueue,queue:Pr.queue,next:null},Ur===null?Yn.memoizedState=Ur=t:Ur=Ur.next=t}return Ur}function ey(t,e){return typeof e=="function"?e(t):e}function d1(t){var e=Xa(),n=e.queue;if(n===null)throw Error(Ae(311));n.lastRenderedReducer=t;var r=Pr,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((md&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,Yn.lanes|=d,pd|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,Pi(r,e.memoizedState)||(Qs=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Yn.lanes|=i,pd|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function h1(t){var e=Xa(),n=e.queue;if(n===null)throw Error(Ae(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Pi(i,e.memoizedState)||(Qs=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function W3(){}function H3(t,e){var n=Yn,r=Xa(),s=e(),i=!Pi(r.memoizedState,s);if(i&&(r.memoizedState=s,Qs=!0),r=r.queue,JC(Y3.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ur!==null&&Ur.memoizedState.tag&1){if(n.flags|=2048,ty(9,G3.bind(null,n,r,s,e),void 0,null),qr===null)throw Error(Ae(349));md&30||K3(n,e,s)}return s}function K3(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Yn.updateQueue,e===null?(e={lastEffect:null,stores:null},Yn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function G3(t,e,n,r){e.value=n,e.getSnapshot=r,Q3(e)&&X3(t)}function Y3(t,e,n){return n(function(){Q3(e)&&X3(t)})}function Q3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Pi(t,n)}catch{return!0}}function X3(t){var e=al(t,1);e!==null&&Ai(e,t,1,-1)}function cR(t){var e=Hi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ey,lastRenderedState:t},e.queue=t,t=t.dispatch=TJ.bind(null,Yn,t),[e.memoizedState,t]}function ty(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Yn.updateQueue,e===null?(e={lastEffect:null,stores:null},Yn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Z3(){return Xa().memoizedState}function vb(t,e,n,r){var s=Hi();Yn.flags|=t,s.memoizedState=ty(1|e,n,void 0,r===void 0?null:r)}function m_(t,e,n,r){var s=Xa();r=r===void 0?null:r;var i=void 0;if(Pr!==null){var o=Pr.memoizedState;if(i=o.destroy,r!==null&&QC(r,o.deps)){s.memoizedState=ty(e,n,i,r);return}}Yn.flags|=t,s.memoizedState=ty(1|e,n,i,r)}function uR(t,e){return vb(8390656,8,t,e)}function JC(t,e){return m_(2048,8,t,e)}function J3(t,e){return m_(4,2,t,e)}function e5(t,e){return m_(4,4,t,e)}function t5(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function n5(t,e,n){return n=n!=null?n.concat([t]):null,m_(4,4,t5.bind(null,e,t),n)}function eP(){}function r5(t,e){var n=Xa();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&QC(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function s5(t,e){var n=Xa();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&QC(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function a5(t,e,n){return md&21?(Pi(n,e)||(n=u3(),Yn.lanes|=n,pd|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Qs=!0),t.memoizedState=n)}function EJ(t,e){var n=vn;vn=n!==0&&4>n?n:4,t(!0);var r=u1.transition;u1.transition={};try{t(!1),e()}finally{vn=n,u1.transition=r}}function i5(){return Xa().memoizedState}function AJ(t,e,n){var r=Ac(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},o5(t))l5(e,n);else if(n=U3(t,e,n,r),n!==null){var s=Is();Ai(n,t,r,s),c5(n,e,r)}}function TJ(t,e,n){var r=Ac(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(o5(t))l5(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Pi(l,o)){var c=e.interleaved;c===null?(s.next=s,WC(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=U3(t,e,s,r),n!==null&&(s=Is(),Ai(n,t,r,s),c5(n,e,r))}}function o5(t){var e=t.alternate;return t===Yn||e!==null&&e===Yn}function l5(t,e){xg=a0=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function c5(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,IC(t,n)}}var i0={readContext:Qa,useCallback:is,useContext:is,useEffect:is,useImperativeHandle:is,useInsertionEffect:is,useLayoutEffect:is,useMemo:is,useReducer:is,useRef:is,useState:is,useDebugValue:is,useDeferredValue:is,useTransition:is,useMutableSource:is,useSyncExternalStore:is,useId:is,unstable_isNewReconciler:!1},CJ={readContext:Qa,useCallback:function(t,e){return Hi().memoizedState=[t,e===void 0?null:e],t},useContext:Qa,useEffect:uR,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,vb(4194308,4,t5.bind(null,e,t),n)},useLayoutEffect:function(t,e){return vb(4194308,4,t,e)},useInsertionEffect:function(t,e){return vb(4,2,t,e)},useMemo:function(t,e){var n=Hi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Hi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=AJ.bind(null,Yn,t),[r.memoizedState,t]},useRef:function(t){var e=Hi();return t={current:t},e.memoizedState=t},useState:cR,useDebugValue:eP,useDeferredValue:function(t){return Hi().memoizedState=t},useTransition:function(){var t=cR(!1),e=t[0];return t=EJ.bind(null,t[1]),Hi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Yn,s=Hi();if(Bn){if(n===void 0)throw Error(Ae(407));n=n()}else{if(n=e(),qr===null)throw Error(Ae(349));md&30||K3(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,uR(Y3.bind(null,r,i,t),[t]),r.flags|=2048,ty(9,G3.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Hi(),e=qr.identifierPrefix;if(Bn){var n=qo,r=zo;n=(r&~(1<<32-Ei(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Jg++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=SJ++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},PJ={readContext:Qa,useCallback:r5,useContext:Qa,useEffect:JC,useImperativeHandle:n5,useInsertionEffect:J3,useLayoutEffect:e5,useMemo:s5,useReducer:d1,useRef:Z3,useState:function(){return d1(ey)},useDebugValue:eP,useDeferredValue:function(t){var e=Xa();return a5(e,Pr.memoizedState,t)},useTransition:function(){var t=d1(ey)[0],e=Xa().memoizedState;return[t,e]},useMutableSource:W3,useSyncExternalStore:H3,useId:i5,unstable_isNewReconciler:!1},IJ={readContext:Qa,useCallback:r5,useContext:Qa,useEffect:JC,useImperativeHandle:n5,useInsertionEffect:J3,useLayoutEffect:e5,useMemo:s5,useReducer:h1,useRef:Z3,useState:function(){return h1(ey)},useDebugValue:eP,useDeferredValue:function(t){var e=Xa();return Pr===null?e.memoizedState=t:a5(e,Pr.memoizedState,t)},useTransition:function(){var t=h1(ey)[0],e=Xa().memoizedState;return[t,e]},useMutableSource:W3,useSyncExternalStore:H3,useId:i5,unstable_isNewReconciler:!1};function mi(t,e){if(t&&t.defaultProps){e=Xn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function cE(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Xn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var p_={isMounted:function(t){return(t=t._reactInternals)?Hd(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Is(),s=Ac(t),i=Qo(r,s);i.payload=e,n!=null&&(i.callback=n),e=Sc(t,i,s),e!==null&&(Ai(e,t,s,r),gb(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Is(),s=Ac(t),i=Qo(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Sc(t,i,s),e!==null&&(Ai(e,t,s,r),gb(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Is(),r=Ac(t),s=Qo(n,r);s.tag=2,e!=null&&(s.callback=e),e=Sc(t,s,r),e!==null&&(Ai(e,t,r,n),gb(e,t,r))}};function dR(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Kg(n,r)||!Kg(s,i):!0}function u5(t,e,n){var r=!1,s=Fc,i=e.contextType;return typeof i=="object"&&i!==null?i=Qa(i):(s=ea(e)?hd:vs.current,r=e.contextTypes,i=(r=r!=null)?Rf(t,s):Fc),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=p_,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function hR(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&p_.enqueueReplaceState(e,e.state,null)}function uE(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},HC(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Qa(i):(i=ea(e)?hd:vs.current,s.context=Rf(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(cE(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&p_.enqueueReplaceState(s,s.state,null),r0(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function $f(t,e){try{var n="",r=e;do n+=aZ(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function f1(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function dE(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var kJ=typeof WeakMap=="function"?WeakMap:Map;function d5(t,e,n){n=Qo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){l0||(l0=!0,wE=r),dE(t,e)},n}function h5(t,e,n){n=Qo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){dE(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){dE(t,e),typeof r!="function"&&(Ec===null?Ec=new Set([this]):Ec.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function fR(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new kJ;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=HJ.bind(null,t,e,n),e.then(t,t))}function mR(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function pR(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qo(-1,1),e.tag=2,Sc(n,e,1))),n.lanes|=1),t)}var OJ=bl.ReactCurrentOwner,Qs=!1;function Ns(t,e,n,r){e.child=t===null?B3(e,null,n,r):Df(e,t.child,n,r)}function gR(t,e,n,r,s){n=n.render;var i=e.ref;return Jh(e,s),r=XC(t,e,n,r,i,s),n=ZC(),t!==null&&!Qs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,il(t,e,s)):(Bn&&n&&FC(e),e.flags|=1,Ns(t,e,r,s),e.child)}function yR(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!lP(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,f5(t,e,i,r,s)):(t=_b(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Kg,n(o,r)&&t.ref===e.ref)return il(t,e,s)}return e.flags|=1,t=Tc(i,r),t.ref=e.ref,t.return=e,e.child=t}function f5(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Kg(i,r)&&t.ref===e.ref)if(Qs=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Qs=!0);else return e.lanes=t.lanes,il(t,e,s)}return hE(t,e,n,r,s)}function m5(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},kn(Vh,ca),ca|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,kn(Vh,ca),ca|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,kn(Vh,ca),ca|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,kn(Vh,ca),ca|=r;return Ns(t,e,s,n),e.child}function p5(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function hE(t,e,n,r,s){var i=ea(n)?hd:vs.current;return i=Rf(e,i),Jh(e,s),n=XC(t,e,n,r,i,s),r=ZC(),t!==null&&!Qs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,il(t,e,s)):(Bn&&r&&FC(e),e.flags|=1,Ns(t,e,n,s),e.child)}function vR(t,e,n,r,s){if(ea(n)){var i=!0;Zb(e)}else i=!1;if(Jh(e,s),e.stateNode===null)xb(t,e),u5(e,n,r),uE(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Qa(u):(u=ea(n)?hd:vs.current,u=Rf(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&hR(e,o,r,u),Kl=!1;var f=e.memoizedState;o.state=f,r0(e,r,o,s),c=e.memoizedState,l!==r||f!==c||Js.current||Kl?(typeof d=="function"&&(cE(e,n,d,r),c=e.memoizedState),(l=Kl||dR(e,n,l,r,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,z3(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:mi(e.type,l),o.props=u,h=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Qa(c):(c=ea(n)?hd:vs.current,c=Rf(e,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&hR(e,o,r,c),Kl=!1,f=e.memoizedState,o.state=f,r0(e,r,o,s);var b=e.memoizedState;l!==h||f!==b||Js.current||Kl?(typeof m=="function"&&(cE(e,n,m,r),b=e.memoizedState),(u=Kl||dR(e,n,u,r,f,b,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return fE(t,e,n,r,i,s)}function fE(t,e,n,r,s,i){p5(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&rR(e,n,!1),il(t,e,i);r=e.stateNode,OJ.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Df(e,t.child,null,i),e.child=Df(e,null,l,i)):Ns(t,e,l,i),e.memoizedState=r.state,s&&rR(e,n,!0),e.child}function g5(t){var e=t.stateNode;e.pendingContext?nR(t,e.pendingContext,e.pendingContext!==e.context):e.context&&nR(t,e.context,!1),KC(t,e.containerInfo)}function xR(t,e,n,r,s){return Mf(),BC(s),e.flags|=256,Ns(t,e,n,r),e.child}var mE={dehydrated:null,treeContext:null,retryLane:0};function pE(t){return{baseLanes:t,cachePool:null,transitions:null}}function y5(t,e,n){var r=e.pendingProps,s=Kn.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),kn(Kn,s&1),t===null)return oE(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=v_(o,r,0,null),t=sd(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=pE(n),e.memoizedState=mE,t):tP(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return RJ(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Tc(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Tc(l,i):(i=sd(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?pE(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=mE,r}return i=t.child,t=i.sibling,r=Tc(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function tP(t,e){return e=v_({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Cx(t,e,n,r){return r!==null&&BC(r),Df(e,t.child,null,n),t=tP(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function RJ(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=f1(Error(Ae(422))),Cx(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=v_({mode:"visible",children:r.children},s,0,null),i=sd(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Df(e,t.child,null,o),e.child.memoizedState=pE(o),e.memoizedState=mE,i);if(!(e.mode&1))return Cx(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Ae(419)),r=f1(i,r,void 0),Cx(t,e,o,r)}if(l=(o&t.childLanes)!==0,Qs||l){if(r=qr,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,al(t,s),Ai(r,t,s,-1))}return oP(),r=f1(Error(Ae(421))),Cx(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=KJ.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,ma=Nc(s.nextSibling),va=e,Bn=!0,bi=null,t!==null&&(La[$a++]=zo,La[$a++]=qo,La[$a++]=fd,zo=t.id,qo=t.overflow,fd=e),e=tP(e,r.children),e.flags|=4096,e)}function bR(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),lE(t.return,e,n)}function m1(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function v5(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ns(t,e,r.children,n),r=Kn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bR(t,n,e);else if(t.tag===19)bR(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(kn(Kn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&s0(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),m1(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&s0(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}m1(e,!0,n,null,i);break;case"together":m1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xb(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function il(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),pd|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ae(153));if(e.child!==null){for(t=e.child,n=Tc(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Tc(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function MJ(t,e,n){switch(e.tag){case 3:g5(e),Mf();break;case 5:q3(e);break;case 1:ea(e.type)&&Zb(e);break;case 4:KC(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;kn(t0,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(kn(Kn,Kn.current&1),e.flags|=128,null):n&e.child.childLanes?y5(t,e,n):(kn(Kn,Kn.current&1),t=il(t,e,n),t!==null?t.sibling:null);kn(Kn,Kn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return v5(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),kn(Kn,Kn.current),r)break;return null;case 22:case 23:return e.lanes=0,m5(t,e,n)}return il(t,e,n)}var x5,gE,b5,w5;x5=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gE=function(){};b5=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Vu(ao.current);var i=null;switch(n){case"input":s=$S(t,s),r=$S(t,r),i=[];break;case"select":s=Xn({},s,{value:void 0}),r=Xn({},r,{value:void 0}),i=[];break;case"textarea":s=BS(t,s),r=BS(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Qb)}zS(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Vg.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Vg.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Dn("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};w5=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ip(t,e){if(!Bn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function os(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function DJ(t,e,n){var r=e.pendingProps;switch(VC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return os(e),null;case 1:return ea(e.type)&&Xb(),os(e),null;case 3:return r=e.stateNode,Lf(),Vn(Js),Vn(vs),YC(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ax(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,bi!==null&&(NE(bi),bi=null))),gE(t,e),os(e),null;case 5:GC(e);var s=Vu(Zg.current);if(n=e.type,t!==null&&e.stateNode!=null)b5(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ae(166));return os(e),null}if(t=Vu(ao.current),Ax(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Xi]=e,r[Qg]=i,t=(e.mode&1)!==0,n){case"dialog":Dn("cancel",r),Dn("close",r);break;case"iframe":case"object":case"embed":Dn("load",r);break;case"video":case"audio":for(s=0;s<ng.length;s++)Dn(ng[s],r);break;case"source":Dn("error",r);break;case"img":case"image":case"link":Dn("error",r),Dn("load",r);break;case"details":Dn("toggle",r);break;case"input":C2(r,i),Dn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Dn("invalid",r);break;case"textarea":I2(r,i),Dn("invalid",r)}zS(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ex(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ex(r.textContent,l,t),s=["children",""+l]):Vg.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Dn("scroll",r)}switch(n){case"input":vx(r),P2(r,i,!0);break;case"textarea":vx(r),k2(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Qb)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=YB(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Xi]=e,t[Qg]=r,x5(t,e,!1,!1),e.stateNode=t;e:{switch(o=qS(n,r),n){case"dialog":Dn("cancel",t),Dn("close",t),s=r;break;case"iframe":case"object":case"embed":Dn("load",t),s=r;break;case"video":case"audio":for(s=0;s<ng.length;s++)Dn(ng[s],t);s=r;break;case"source":Dn("error",t),s=r;break;case"img":case"image":case"link":Dn("error",t),Dn("load",t),s=r;break;case"details":Dn("toggle",t),s=r;break;case"input":C2(t,r),s=$S(t,r),Dn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Xn({},r,{value:void 0}),Dn("invalid",t);break;case"textarea":I2(t,r),s=BS(t,r),Dn("invalid",t);break;default:s=r}zS(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?ZB(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&QB(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Bg(t,c):typeof c=="number"&&Bg(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Vg.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Dn("scroll",t):c!=null&&SC(t,i,c,o))}switch(n){case"input":vx(t),P2(t,r,!1);break;case"textarea":vx(t),k2(t);break;case"option":r.value!=null&&t.setAttribute("value",""+$c(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Yh(t,!!r.multiple,i,!1):r.defaultValue!=null&&Yh(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Qb)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return os(e),null;case 6:if(t&&e.stateNode!=null)w5(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ae(166));if(n=Vu(Zg.current),Vu(ao.current),Ax(e)){if(r=e.stateNode,n=e.memoizedProps,r[Xi]=e,(i=r.nodeValue!==n)&&(t=va,t!==null))switch(t.tag){case 3:Ex(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ex(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xi]=e,e.stateNode=r}return os(e),null;case 13:if(Vn(Kn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Bn&&ma!==null&&e.mode&1&&!(e.flags&128))F3(),Mf(),e.flags|=98560,i=!1;else if(i=Ax(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Ae(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ae(317));i[Xi]=e}else Mf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;os(e),i=!1}else bi!==null&&(NE(bi),bi=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Kn.current&1?Or===0&&(Or=3):oP())),e.updateQueue!==null&&(e.flags|=4),os(e),null);case 4:return Lf(),gE(t,e),t===null&&Gg(e.stateNode.containerInfo),os(e),null;case 10:return qC(e.type._context),os(e),null;case 17:return ea(e.type)&&Xb(),os(e),null;case 19:if(Vn(Kn),i=e.memoizedState,i===null)return os(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ip(i,!1);else{if(Or!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=s0(t),o!==null){for(e.flags|=128,Ip(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return kn(Kn,Kn.current&1|2),e.child}t=t.sibling}i.tail!==null&&mr()>Ff&&(e.flags|=128,r=!0,Ip(i,!1),e.lanes=4194304)}else{if(!r)if(t=s0(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ip(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Bn)return os(e),null}else 2*mr()-i.renderingStartTime>Ff&&n!==1073741824&&(e.flags|=128,r=!0,Ip(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=mr(),e.sibling=null,n=Kn.current,kn(Kn,r?n&1|2:n&1),e):(os(e),null);case 22:case 23:return iP(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ca&1073741824&&(os(e),e.subtreeFlags&6&&(e.flags|=8192)):os(e),null;case 24:return null;case 25:return null}throw Error(Ae(156,e.tag))}function LJ(t,e){switch(VC(e),e.tag){case 1:return ea(e.type)&&Xb(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Lf(),Vn(Js),Vn(vs),YC(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return GC(e),null;case 13:if(Vn(Kn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ae(340));Mf()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Vn(Kn),null;case 4:return Lf(),null;case 10:return qC(e.type._context),null;case 22:case 23:return iP(),null;case 24:return null;default:return null}}var Px=!1,ms=!1,$J=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function Fh(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){rr(t,e,r)}else n.current=null}function yE(t,e,n){try{n()}catch(r){rr(t,e,r)}}var wR=!1;function FJ(t,e){if(eE=Kb,t=E3(),$C(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===n&&++u===s&&(l=o),f===i&&++d===r&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tE={focusedElem:t,selectionRange:n},Kb=!1,Ye=e;Ye!==null;)if(e=Ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ye=t;else for(;Ye!==null;){e=Ye;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var g=b.memoizedProps,x=b.memoizedState,w=e.stateNode,y=w.getSnapshotBeforeUpdate(e.elementType===e.type?g:mi(e.type,g),x);w.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ae(163))}}catch(T){rr(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,Ye=t;break}Ye=e.return}return b=wR,wR=!1,b}function bg(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&yE(e,n,i)}s=s.next}while(s!==r)}}function g_(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function vE(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function _5(t){var e=t.alternate;e!==null&&(t.alternate=null,_5(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xi],delete e[Qg],delete e[sE],delete e[wJ],delete e[_J])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function j5(t){return t.tag===5||t.tag===3||t.tag===4}function _R(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||j5(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Qb));else if(r!==4&&(t=t.child,t!==null))for(xE(t,e,n),t=t.sibling;t!==null;)xE(t,e,n),t=t.sibling}function bE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(bE(t,e,n),t=t.sibling;t!==null;)bE(t,e,n),t=t.sibling}var Qr=null,yi=!1;function Dl(t,e,n){for(n=n.child;n!==null;)N5(t,e,n),n=n.sibling}function N5(t,e,n){if(so&&typeof so.onCommitFiberUnmount=="function")try{so.onCommitFiberUnmount(l_,n)}catch{}switch(n.tag){case 5:ms||Fh(n,e);case 6:var r=Qr,s=yi;Qr=null,Dl(t,e,n),Qr=r,yi=s,Qr!==null&&(yi?(t=Qr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Qr.removeChild(n.stateNode));break;case 18:Qr!==null&&(yi?(t=Qr,n=n.stateNode,t.nodeType===8?o1(t.parentNode,n):t.nodeType===1&&o1(t,n),Wg(t)):o1(Qr,n.stateNode));break;case 4:r=Qr,s=yi,Qr=n.stateNode.containerInfo,yi=!0,Dl(t,e,n),Qr=r,yi=s;break;case 0:case 11:case 14:case 15:if(!ms&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&yE(n,e,o),s=s.next}while(s!==r)}Dl(t,e,n);break;case 1:if(!ms&&(Fh(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){rr(n,e,l)}Dl(t,e,n);break;case 21:Dl(t,e,n);break;case 22:n.mode&1?(ms=(r=ms)||n.memoizedState!==null,Dl(t,e,n),ms=r):Dl(t,e,n);break;default:Dl(t,e,n)}}function jR(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new $J),e.forEach(function(r){var s=GJ.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ui(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Qr=l.stateNode,yi=!1;break e;case 3:Qr=l.stateNode.containerInfo,yi=!0;break e;case 4:Qr=l.stateNode.containerInfo,yi=!0;break e}l=l.return}if(Qr===null)throw Error(Ae(160));N5(i,o,s),Qr=null,yi=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){rr(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)S5(e,t),e=e.sibling}function S5(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ui(e,t),Wi(t),r&4){try{bg(3,t,t.return),g_(3,t)}catch(g){rr(t,t.return,g)}try{bg(5,t,t.return)}catch(g){rr(t,t.return,g)}}break;case 1:ui(e,t),Wi(t),r&512&&n!==null&&Fh(n,n.return);break;case 5:if(ui(e,t),Wi(t),r&512&&n!==null&&Fh(n,n.return),t.flags&32){var s=t.stateNode;try{Bg(s,"")}catch(g){rr(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&KB(s,i),qS(l,o);var u=qS(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?ZB(s,h):d==="dangerouslySetInnerHTML"?QB(s,h):d==="children"?Bg(s,h):SC(s,d,h,u)}switch(l){case"input":FS(s,i);break;case"textarea":GB(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Yh(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Yh(s,!!i.multiple,i.defaultValue,!0):Yh(s,!!i.multiple,i.multiple?[]:"",!1))}s[Qg]=i}catch(g){rr(t,t.return,g)}}break;case 6:if(ui(e,t),Wi(t),r&4){if(t.stateNode===null)throw Error(Ae(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){rr(t,t.return,g)}}break;case 3:if(ui(e,t),Wi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Wg(e.containerInfo)}catch(g){rr(t,t.return,g)}break;case 4:ui(e,t),Wi(t);break;case 13:ui(e,t),Wi(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(sP=mr())),r&4&&jR(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(ms=(u=ms)||d,ui(e,t),ms=u):ui(e,t),Wi(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Ye=t,d=t.child;d!==null;){for(h=Ye=d;Ye!==null;){switch(f=Ye,m=f.child,f.tag){case 0:case 11:case 14:case 15:bg(4,f,f.return);break;case 1:Fh(f,f.return);var b=f.stateNode;if(typeof b.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(g){rr(r,n,g)}}break;case 5:Fh(f,f.return);break;case 22:if(f.memoizedState!==null){SR(h);continue}}m!==null?(m.return=f,Ye=m):SR(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=XB("display",o))}catch(g){rr(t,t.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){rr(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ui(e,t),Wi(t),r&4&&jR(t);break;case 21:break;default:ui(e,t),Wi(t)}}function Wi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(j5(n)){var r=n;break e}n=n.return}throw Error(Ae(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Bg(s,""),r.flags&=-33);var i=_R(t);bE(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=_R(t);xE(t,l,o);break;default:throw Error(Ae(161))}}catch(c){rr(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function VJ(t,e,n){Ye=t,E5(t)}function E5(t,e,n){for(var r=(t.mode&1)!==0;Ye!==null;){var s=Ye,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Px;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||ms;l=Px;var u=ms;if(Px=o,(ms=c)&&!u)for(Ye=s;Ye!==null;)o=Ye,c=o.child,o.tag===22&&o.memoizedState!==null?ER(s):c!==null?(c.return=o,Ye=c):ER(s);for(;i!==null;)Ye=i,E5(i),i=i.sibling;Ye=s,Px=l,ms=u}NR(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ye=i):NR(t)}}function NR(t){for(;Ye!==null;){var e=Ye;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ms||g_(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ms)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:mi(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&lR(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}lR(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Wg(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ae(163))}ms||e.flags&512&&vE(e)}catch(f){rr(e,e.return,f)}}if(e===t){Ye=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ye=n;break}Ye=e.return}}function SR(t){for(;Ye!==null;){var e=Ye;if(e===t){Ye=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ye=n;break}Ye=e.return}}function ER(t){for(;Ye!==null;){var e=Ye;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{g_(4,e)}catch(c){rr(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){rr(e,s,c)}}var i=e.return;try{vE(e)}catch(c){rr(e,i,c)}break;case 5:var o=e.return;try{vE(e)}catch(c){rr(e,o,c)}}}catch(c){rr(e,e.return,c)}if(e===t){Ye=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Ye=l;break}Ye=e.return}}var BJ=Math.ceil,o0=bl.ReactCurrentDispatcher,nP=bl.ReactCurrentOwner,qa=bl.ReactCurrentBatchConfig,rn=0,qr=null,wr=null,es=0,ca=0,Vh=au(0),Or=0,ny=null,pd=0,y_=0,rP=0,wg=null,qs=null,sP=0,Ff=1/0,Lo=null,l0=!1,wE=null,Ec=null,Ix=!1,pc=null,c0=0,_g=0,_E=null,bb=-1,wb=0;function Is(){return rn&6?mr():bb!==-1?bb:bb=mr()}function Ac(t){return t.mode&1?rn&2&&es!==0?es&-es:NJ.transition!==null?(wb===0&&(wb=u3()),wb):(t=vn,t!==0||(t=window.event,t=t===void 0?16:y3(t.type)),t):1}function Ai(t,e,n,r){if(50<_g)throw _g=0,_E=null,Error(Ae(185));pv(t,n,r),(!(rn&2)||t!==qr)&&(t===qr&&(!(rn&2)&&(y_|=n),Or===4&&Xl(t,es)),ta(t,r),n===1&&rn===0&&!(e.mode&1)&&(Ff=mr()+500,f_&&iu()))}function ta(t,e){var n=t.callbackNode;NZ(t,e);var r=Hb(t,t===qr?es:0);if(r===0)n!==null&&M2(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&M2(n),e===1)t.tag===0?jJ(AR.bind(null,t)):D3(AR.bind(null,t)),xJ(function(){!(rn&6)&&iu()}),n=null;else{switch(d3(r)){case 1:n=PC;break;case 4:n=l3;break;case 16:n=Wb;break;case 536870912:n=c3;break;default:n=Wb}n=R5(n,A5.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function A5(t,e){if(bb=-1,wb=0,rn&6)throw Error(Ae(327));var n=t.callbackNode;if(ef()&&t.callbackNode!==n)return null;var r=Hb(t,t===qr?es:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=u0(t,r);else{e=r;var s=rn;rn|=2;var i=C5();(qr!==t||es!==e)&&(Lo=null,Ff=mr()+500,rd(t,e));do try{qJ();break}catch(l){T5(t,l)}while(!0);zC(),o0.current=i,rn=s,wr!==null?e=0:(qr=null,es=0,e=Or)}if(e!==0){if(e===2&&(s=YS(t),s!==0&&(r=s,e=jE(t,s))),e===1)throw n=ny,rd(t,0),Xl(t,r),ta(t,mr()),n;if(e===6)Xl(t,r);else{if(s=t.current.alternate,!(r&30)&&!UJ(s)&&(e=u0(t,r),e===2&&(i=YS(t),i!==0&&(r=i,e=jE(t,i))),e===1))throw n=ny,rd(t,0),Xl(t,r),ta(t,mr()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Ae(345));case 2:Iu(t,qs,Lo);break;case 3:if(Xl(t,r),(r&130023424)===r&&(e=sP+500-mr(),10<e)){if(Hb(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Is(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=rE(Iu.bind(null,t,qs,Lo),e);break}Iu(t,qs,Lo);break;case 4:if(Xl(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ei(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=mr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*BJ(r/1960))-r,10<r){t.timeoutHandle=rE(Iu.bind(null,t,qs,Lo),r);break}Iu(t,qs,Lo);break;case 5:Iu(t,qs,Lo);break;default:throw Error(Ae(329))}}}return ta(t,mr()),t.callbackNode===n?A5.bind(null,t):null}function jE(t,e){var n=wg;return t.current.memoizedState.isDehydrated&&(rd(t,e).flags|=256),t=u0(t,e),t!==2&&(e=qs,qs=n,e!==null&&NE(e)),t}function NE(t){qs===null?qs=t:qs.push.apply(qs,t)}function UJ(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Pi(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xl(t,e){for(e&=~rP,e&=~y_,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ei(e),r=1<<n;t[n]=-1,e&=~r}}function AR(t){if(rn&6)throw Error(Ae(327));ef();var e=Hb(t,0);if(!(e&1))return ta(t,mr()),null;var n=u0(t,e);if(t.tag!==0&&n===2){var r=YS(t);r!==0&&(e=r,n=jE(t,r))}if(n===1)throw n=ny,rd(t,0),Xl(t,e),ta(t,mr()),n;if(n===6)throw Error(Ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Iu(t,qs,Lo),ta(t,mr()),null}function aP(t,e){var n=rn;rn|=1;try{return t(e)}finally{rn=n,rn===0&&(Ff=mr()+500,f_&&iu())}}function gd(t){pc!==null&&pc.tag===0&&!(rn&6)&&ef();var e=rn;rn|=1;var n=qa.transition,r=vn;try{if(qa.transition=null,vn=1,t)return t()}finally{vn=r,qa.transition=n,rn=e,!(rn&6)&&iu()}}function iP(){ca=Vh.current,Vn(Vh)}function rd(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,vJ(n)),wr!==null)for(n=wr.return;n!==null;){var r=n;switch(VC(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xb();break;case 3:Lf(),Vn(Js),Vn(vs),YC();break;case 5:GC(r);break;case 4:Lf();break;case 13:Vn(Kn);break;case 19:Vn(Kn);break;case 10:qC(r.type._context);break;case 22:case 23:iP()}n=n.return}if(qr=t,wr=t=Tc(t.current,null),es=ca=e,Or=0,ny=null,rP=y_=pd=0,qs=wg=null,Fu!==null){for(e=0;e<Fu.length;e++)if(n=Fu[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Fu=null}return t}function T5(t,e){do{var n=wr;try{if(zC(),yb.current=i0,a0){for(var r=Yn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}a0=!1}if(md=0,Ur=Pr=Yn=null,xg=!1,Jg=0,nP.current=null,n===null||n.return===null){Or=1,ny=e,wr=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=es,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=mR(o);if(m!==null){m.flags&=-257,pR(m,o,l,i,e),m.mode&1&&fR(i,u,e),e=m,c=u;var b=e.updateQueue;if(b===null){var g=new Set;g.add(c),e.updateQueue=g}else b.add(c);break e}else{if(!(e&1)){fR(i,u,e),oP();break e}c=Error(Ae(426))}}else if(Bn&&l.mode&1){var x=mR(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),pR(x,o,l,i,e),BC($f(c,l));break e}}i=c=$f(c,l),Or!==4&&(Or=2),wg===null?wg=[i]:wg.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=d5(i,c,e);oR(i,w);break e;case 1:l=c;var y=i.type,A=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Ec===null||!Ec.has(A)))){i.flags|=65536,e&=-e,i.lanes|=e;var T=h5(i,l,e);oR(i,T);break e}}i=i.return}while(i!==null)}I5(n)}catch(v){e=v,wr===n&&n!==null&&(wr=n=n.return);continue}break}while(!0)}function C5(){var t=o0.current;return o0.current=i0,t===null?i0:t}function oP(){(Or===0||Or===3||Or===2)&&(Or=4),qr===null||!(pd&268435455)&&!(y_&268435455)||Xl(qr,es)}function u0(t,e){var n=rn;rn|=2;var r=C5();(qr!==t||es!==e)&&(Lo=null,rd(t,e));do try{zJ();break}catch(s){T5(t,s)}while(!0);if(zC(),rn=n,o0.current=r,wr!==null)throw Error(Ae(261));return qr=null,es=0,Or}function zJ(){for(;wr!==null;)P5(wr)}function qJ(){for(;wr!==null&&!pZ();)P5(wr)}function P5(t){var e=O5(t.alternate,t,ca);t.memoizedProps=t.pendingProps,e===null?I5(t):wr=e,nP.current=null}function I5(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=LJ(n,e),n!==null){n.flags&=32767,wr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Or=6,wr=null;return}}else if(n=DJ(n,e,ca),n!==null){wr=n;return}if(e=e.sibling,e!==null){wr=e;return}wr=e=t}while(e!==null);Or===0&&(Or=5)}function Iu(t,e,n){var r=vn,s=qa.transition;try{qa.transition=null,vn=1,WJ(t,e,n,r)}finally{qa.transition=s,vn=r}return null}function WJ(t,e,n,r){do ef();while(pc!==null);if(rn&6)throw Error(Ae(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ae(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(SZ(t,i),t===qr&&(wr=qr=null,es=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ix||(Ix=!0,R5(Wb,function(){return ef(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=qa.transition,qa.transition=null;var o=vn;vn=1;var l=rn;rn|=4,nP.current=null,FJ(t,n),S5(n,t),dJ(tE),Kb=!!eE,tE=eE=null,t.current=n,VJ(n),gZ(),rn=l,vn=o,qa.transition=i}else t.current=n;if(Ix&&(Ix=!1,pc=t,c0=s),i=t.pendingLanes,i===0&&(Ec=null),xZ(n.stateNode),ta(t,mr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(l0)throw l0=!1,t=wE,wE=null,t;return c0&1&&t.tag!==0&&ef(),i=t.pendingLanes,i&1?t===_E?_g++:(_g=0,_E=t):_g=0,iu(),null}function ef(){if(pc!==null){var t=d3(c0),e=qa.transition,n=vn;try{if(qa.transition=null,vn=16>t?16:t,pc===null)var r=!1;else{if(t=pc,pc=null,c0=0,rn&6)throw Error(Ae(331));var s=rn;for(rn|=4,Ye=t.current;Ye!==null;){var i=Ye,o=i.child;if(Ye.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Ye=u;Ye!==null;){var d=Ye;switch(d.tag){case 0:case 11:case 15:bg(8,d,i)}var h=d.child;if(h!==null)h.return=d,Ye=h;else for(;Ye!==null;){d=Ye;var f=d.sibling,m=d.return;if(_5(d),d===u){Ye=null;break}if(f!==null){f.return=m,Ye=f;break}Ye=m}}}var b=i.alternate;if(b!==null){var g=b.child;if(g!==null){b.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}Ye=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ye=o;else e:for(;Ye!==null;){if(i=Ye,i.flags&2048)switch(i.tag){case 0:case 11:case 15:bg(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,Ye=w;break e}Ye=i.return}}var y=t.current;for(Ye=y;Ye!==null;){o=Ye;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,Ye=A;else e:for(o=y;Ye!==null;){if(l=Ye,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:g_(9,l)}}catch(v){rr(l,l.return,v)}if(l===o){Ye=null;break e}var T=l.sibling;if(T!==null){T.return=l.return,Ye=T;break e}Ye=l.return}}if(rn=s,iu(),so&&typeof so.onPostCommitFiberRoot=="function")try{so.onPostCommitFiberRoot(l_,t)}catch{}r=!0}return r}finally{vn=n,qa.transition=e}}return!1}function TR(t,e,n){e=$f(n,e),e=d5(t,e,1),t=Sc(t,e,1),e=Is(),t!==null&&(pv(t,1,e),ta(t,e))}function rr(t,e,n){if(t.tag===3)TR(t,t,n);else for(;e!==null;){if(e.tag===3){TR(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ec===null||!Ec.has(r))){t=$f(n,t),t=h5(e,t,1),e=Sc(e,t,1),t=Is(),e!==null&&(pv(e,1,t),ta(e,t));break}}e=e.return}}function HJ(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Is(),t.pingedLanes|=t.suspendedLanes&n,qr===t&&(es&n)===n&&(Or===4||Or===3&&(es&130023424)===es&&500>mr()-sP?rd(t,0):rP|=n),ta(t,e)}function k5(t,e){e===0&&(t.mode&1?(e=wx,wx<<=1,!(wx&130023424)&&(wx=4194304)):e=1);var n=Is();t=al(t,e),t!==null&&(pv(t,e,n),ta(t,n))}function KJ(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),k5(t,n)}function GJ(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ae(314))}r!==null&&r.delete(e),k5(t,n)}var O5;O5=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Js.current)Qs=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Qs=!1,MJ(t,e,n);Qs=!!(t.flags&131072)}else Qs=!1,Bn&&e.flags&1048576&&L3(e,e0,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xb(t,e),t=e.pendingProps;var s=Rf(e,vs.current);Jh(e,n),s=XC(null,e,r,t,s,n);var i=ZC();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ea(r)?(i=!0,Zb(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,HC(e),s.updater=p_,e.stateNode=s,s._reactInternals=e,uE(e,r,t,n),e=fE(null,e,r,!0,i,n)):(e.tag=0,Bn&&i&&FC(e),Ns(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(xb(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=QJ(r),t=mi(r,t),s){case 0:e=hE(null,e,r,t,n);break e;case 1:e=vR(null,e,r,t,n);break e;case 11:e=gR(null,e,r,t,n);break e;case 14:e=yR(null,e,r,mi(r.type,t),n);break e}throw Error(Ae(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mi(r,s),hE(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mi(r,s),vR(t,e,r,s,n);case 3:e:{if(g5(e),t===null)throw Error(Ae(387));r=e.pendingProps,i=e.memoizedState,s=i.element,z3(t,e),r0(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=$f(Error(Ae(423)),e),e=xR(t,e,r,n,s);break e}else if(r!==s){s=$f(Error(Ae(424)),e),e=xR(t,e,r,n,s);break e}else for(ma=Nc(e.stateNode.containerInfo.firstChild),va=e,Bn=!0,bi=null,n=B3(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Mf(),r===s){e=il(t,e,n);break e}Ns(t,e,r,n)}e=e.child}return e;case 5:return q3(e),t===null&&oE(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,nE(r,s)?o=null:i!==null&&nE(r,i)&&(e.flags|=32),p5(t,e),Ns(t,e,o,n),e.child;case 6:return t===null&&oE(e),null;case 13:return y5(t,e,n);case 4:return KC(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Df(e,null,r,n):Ns(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mi(r,s),gR(t,e,r,s,n);case 7:return Ns(t,e,e.pendingProps,n),e.child;case 8:return Ns(t,e,e.pendingProps.children,n),e.child;case 12:return Ns(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,kn(t0,r._currentValue),r._currentValue=o,i!==null)if(Pi(i.value,o)){if(i.children===s.children&&!Js.current){e=il(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Qo(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),lE(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ae(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),lE(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ns(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Jh(e,n),s=Qa(s),r=r(s),e.flags|=1,Ns(t,e,r,n),e.child;case 14:return r=e.type,s=mi(r,e.pendingProps),s=mi(r.type,s),yR(t,e,r,s,n);case 15:return f5(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mi(r,s),xb(t,e),e.tag=1,ea(r)?(t=!0,Zb(e)):t=!1,Jh(e,n),u5(e,r,s),uE(e,r,s,n),fE(null,e,r,!0,t,n);case 19:return v5(t,e,n);case 22:return m5(t,e,n)}throw Error(Ae(156,e.tag))};function R5(t,e){return o3(t,e)}function YJ(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ua(t,e,n,r){return new YJ(t,e,n,r)}function lP(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QJ(t){if(typeof t=="function")return lP(t)?1:0;if(t!=null){if(t=t.$$typeof,t===AC)return 11;if(t===TC)return 14}return 2}function Tc(t,e){var n=t.alternate;return n===null?(n=Ua(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function _b(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")lP(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ph:return sd(n.children,s,i,e);case EC:o=8,s|=8;break;case RS:return t=Ua(12,n,e,s|2),t.elementType=RS,t.lanes=i,t;case MS:return t=Ua(13,n,e,s),t.elementType=MS,t.lanes=i,t;case DS:return t=Ua(19,n,e,s),t.elementType=DS,t.lanes=i,t;case qB:return v_(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case UB:o=10;break e;case zB:o=9;break e;case AC:o=11;break e;case TC:o=14;break e;case Hl:o=16,r=null;break e}throw Error(Ae(130,t==null?t:typeof t,""))}return e=Ua(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function sd(t,e,n,r){return t=Ua(7,t,r,e),t.lanes=n,t}function v_(t,e,n,r){return t=Ua(22,t,r,e),t.elementType=qB,t.lanes=n,t.stateNode={isHidden:!1},t}function p1(t,e,n){return t=Ua(6,t,null,e),t.lanes=n,t}function g1(t,e,n){return e=Ua(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function XJ(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=QN(0),this.expirationTimes=QN(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=QN(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function cP(t,e,n,r,s,i,o,l,c){return t=new XJ(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ua(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},HC(i),t}function ZJ(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ch,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function M5(t){if(!t)return Fc;t=t._reactInternals;e:{if(Hd(t)!==t||t.tag!==1)throw Error(Ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ea(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ae(171))}if(t.tag===1){var n=t.type;if(ea(n))return M3(t,n,e)}return e}function D5(t,e,n,r,s,i,o,l,c){return t=cP(n,r,!0,t,s,i,o,l,c),t.context=M5(null),n=t.current,r=Is(),s=Ac(n),i=Qo(r,s),i.callback=e??null,Sc(n,i,s),t.current.lanes=s,pv(t,s,r),ta(t,r),t}function x_(t,e,n,r){var s=e.current,i=Is(),o=Ac(s);return n=M5(n),e.context===null?e.context=n:e.pendingContext=n,e=Qo(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Sc(s,e,o),t!==null&&(Ai(t,s,o,i),gb(t,s,o)),o}function d0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function CR(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function uP(t,e){CR(t,e),(t=t.alternate)&&CR(t,e)}function JJ(){return null}var L5=typeof reportError=="function"?reportError:function(t){console.error(t)};function dP(t){this._internalRoot=t}b_.prototype.render=dP.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ae(409));x_(t,e,null,null)};b_.prototype.unmount=dP.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;gd(function(){x_(null,t,null,null)}),e[sl]=null}};function b_(t){this._internalRoot=t}b_.prototype.unstable_scheduleHydration=function(t){if(t){var e=m3();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ql.length&&e!==0&&e<Ql[n].priority;n++);Ql.splice(n,0,t),n===0&&g3(t)}};function hP(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function w_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function PR(){}function eee(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=d0(o);i.call(u)}}var o=D5(e,r,t,0,null,!1,!1,"",PR);return t._reactRootContainer=o,t[sl]=o.current,Gg(t.nodeType===8?t.parentNode:t),gd(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=d0(c);l.call(u)}}var c=cP(t,0,!1,null,null,!1,!1,"",PR);return t._reactRootContainer=c,t[sl]=c.current,Gg(t.nodeType===8?t.parentNode:t),gd(function(){x_(e,c,n,r)}),c}function __(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=d0(o);l.call(c)}}x_(e,o,t,s)}else o=eee(n,e,t,s,r);return d0(o)}h3=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=tg(e.pendingLanes);n!==0&&(IC(e,n|1),ta(e,mr()),!(rn&6)&&(Ff=mr()+500,iu()))}break;case 13:gd(function(){var r=al(t,1);if(r!==null){var s=Is();Ai(r,t,1,s)}}),uP(t,1)}};kC=function(t){if(t.tag===13){var e=al(t,134217728);if(e!==null){var n=Is();Ai(e,t,134217728,n)}uP(t,134217728)}};f3=function(t){if(t.tag===13){var e=Ac(t),n=al(t,e);if(n!==null){var r=Is();Ai(n,t,e,r)}uP(t,e)}};m3=function(){return vn};p3=function(t,e){var n=vn;try{return vn=t,e()}finally{vn=n}};HS=function(t,e,n){switch(e){case"input":if(FS(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=h_(r);if(!s)throw Error(Ae(90));HB(r),FS(r,s)}}}break;case"textarea":GB(t,n);break;case"select":e=n.value,e!=null&&Yh(t,!!n.multiple,e,!1)}};t3=aP;n3=gd;var tee={usingClientEntryPoint:!1,Events:[yv,Rh,h_,JB,e3,aP]},kp={findFiberByHostInstance:$u,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nee={bundleType:kp.bundleType,version:kp.version,rendererPackageName:kp.rendererPackageName,rendererConfig:kp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bl.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=a3(t),t===null?null:t.stateNode},findFiberByHostInstance:kp.findFiberByHostInstance||JJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kx.isDisabled&&kx.supportsFiber)try{l_=kx.inject(nee),so=kx}catch{}}Ta.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tee;Ta.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hP(e))throw Error(Ae(200));return ZJ(t,e,null,n)};Ta.createRoot=function(t,e){if(!hP(t))throw Error(Ae(299));var n=!1,r="",s=L5;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=cP(t,1,!1,null,null,n,!1,r,s),t[sl]=e.current,Gg(t.nodeType===8?t.parentNode:t),new dP(e)};Ta.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ae(188)):(t=Object.keys(t).join(","),Error(Ae(268,t)));return t=a3(e),t=t===null?null:t.stateNode,t};Ta.flushSync=function(t){return gd(t)};Ta.hydrate=function(t,e,n){if(!w_(e))throw Error(Ae(200));return __(null,t,e,!0,n)};Ta.hydrateRoot=function(t,e,n){if(!hP(t))throw Error(Ae(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=L5;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=D5(e,null,t,1,n??null,s,!1,i,o),t[sl]=e.current,Gg(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new b_(e)};Ta.render=function(t,e,n){if(!w_(e))throw Error(Ae(200));return __(null,t,e,!1,n)};Ta.unmountComponentAtNode=function(t){if(!w_(t))throw Error(Ae(40));return t._reactRootContainer?(gd(function(){__(null,null,t,!1,function(){t._reactRootContainer=null,t[sl]=null})}),!0):!1};Ta.unstable_batchedUpdates=aP;Ta.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!w_(n))throw Error(Ae(200));if(t==null||t._reactInternals===void 0)throw Error(Ae(38));return __(t,e,n,!1,r)};Ta.version="18.3.1-next-f1338f8080-20240426";function $5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($5)}catch(t){console.error(t)}}$5(),$B.exports=Ta;var Kd=$B.exports;const F5=pn(Kd);var V5,IR=Kd;V5=IR.createRoot,IR.hydrateRoot;const ree="modulepreload",see=function(t){return"/Zedbooks/"+t},kR={},xv=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=see(c),c in kR)return;kR[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":ree,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},aee=1,iee=1e6;let y1=0;function oee(){return y1=(y1+1)%Number.MAX_SAFE_INTEGER,y1.toString()}const v1=new Map,OR=t=>{if(v1.has(t))return;const e=setTimeout(()=>{v1.delete(t),jg({type:"REMOVE_TOAST",toastId:t})},iee);v1.set(t,e)},lee=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,aee)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?OR(n):t.toasts.forEach(r=>{OR(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},jb=[];let Nb={toasts:[]};function jg(t){Nb=lee(Nb,t),jb.forEach(e=>{e(Nb)})}function cee({...t}){const e=oee(),n=s=>jg({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>jg({type:"DISMISS_TOAST",toastId:e});return jg({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function uee(){const[t,e]=N.useState(Nb);return N.useEffect(()=>(jb.push(e),()=>{const n=jb.indexOf(e);n>-1&&jb.splice(n,1)}),[t]),{...t,toast:cee,dismiss:n=>jg({type:"DISMISS_TOAST",toastId:n})}}function Pe(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function RR(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function j_(...t){return e=>{let n=!1;const r=t.map(s=>{const i=RR(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():RR(t[s],null)}}}}function Mt(...t){return N.useCallback(j_(...t),t)}function dee(t,e){const n=N.createContext(e),r=i=>{const{children:o,...l}=i,c=N.useMemo(()=>l,Object.values(l));return a.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(i){const o=N.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function rs(t,e=[]){let n=[];function r(i,o){const l=N.createContext(o),c=n.length;n=[...n,o];const u=h=>{var w;const{scope:f,children:m,...b}=h,g=((w=f==null?void 0:f[t])==null?void 0:w[c])||l,x=N.useMemo(()=>b,Object.values(b));return a.jsx(g.Provider,{value:x,children:m})};u.displayName=i+"Provider";function d(h,f){var g;const m=((g=f==null?void 0:f[t])==null?void 0:g[c])||l,b=N.useContext(m);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const s=()=>{const i=n.map(o=>N.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return N.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,hee(s,...e)]}function hee(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...l,...h}},{});return N.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function yd(t){const e=fee(t),n=N.forwardRef((r,s)=>{const{children:i,...o}=r,l=N.Children.toArray(i),c=l.find(mee);if(c){const u=c.props.children,d=l.map(h=>h===c?N.Children.count(u)>1?N.Children.only(null):N.isValidElement(u)?u.props.children:null:h);return a.jsx(e,{...o,ref:s,children:N.isValidElement(u)?N.cloneElement(u,void 0,d):null})}return a.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var Gd=yd("Slot");function fee(t){const e=N.forwardRef((n,r)=>{const{children:s,...i}=n;if(N.isValidElement(s)){const o=gee(s),l=pee(i,s.props);return s.type!==N.Fragment&&(l.ref=r?j_(r,o):o),N.cloneElement(s,l)}return N.Children.count(s)>1?N.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var B5=Symbol("radix.slottable");function U5(t){const e=({children:n})=>a.jsx(a.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=B5,e}function mee(t){return N.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===B5}function pee(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function gee(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function N_(t){const e=t+"CollectionProvider",[n,r]=rs(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:x,children:w}=g,y=D.useRef(null),A=D.useRef(new Map).current;return a.jsx(s,{scope:x,itemMap:A,collectionRef:y,children:w})};o.displayName=e;const l=t+"CollectionSlot",c=yd(l),u=D.forwardRef((g,x)=>{const{scope:w,children:y}=g,A=i(l,w),T=Mt(x,A.collectionRef);return a.jsx(c,{ref:T,children:y})});u.displayName=l;const d=t+"CollectionItemSlot",h="data-radix-collection-item",f=yd(d),m=D.forwardRef((g,x)=>{const{scope:w,children:y,...A}=g,T=D.useRef(null),v=Mt(x,T),S=i(d,w);return D.useEffect(()=>(S.itemMap.set(T,{ref:T,...A}),()=>void S.itemMap.delete(T))),a.jsx(f,{[h]:"",ref:v,children:y})});m.displayName=d;function b(g){const x=i(t+"CollectionConsumer",g);return D.useCallback(()=>{const y=x.collectionRef.current;if(!y)return[];const A=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(x.itemMap.values()).sort((S,j)=>A.indexOf(S.ref.current)-A.indexOf(j.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},b,r]}var yee=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Je=yee.reduce((t,e)=>{const n=yd(`Primitive.${e}`),r=N.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function fP(t,e){t&&Kd.flushSync(()=>t.dispatchEvent(e))}function ir(t){const e=N.useRef(t);return N.useEffect(()=>{e.current=t}),N.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function vee(t,e=globalThis==null?void 0:globalThis.document){const n=ir(t);N.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var xee="DismissableLayer",SE="dismissableLayer.update",bee="dismissableLayer.pointerDownOutside",wee="dismissableLayer.focusOutside",MR,z5=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Rm=N.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=t,u=N.useContext(z5),[d,h]=N.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=N.useState({}),b=Mt(e,j=>h(j)),g=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=g.indexOf(x),y=d?g.indexOf(d):-1,A=u.layersWithOutsidePointerEventsDisabled.size>0,T=y>=w,v=jee(j=>{const p=j.target,E=[...u.branches].some(P=>P.contains(p));!T||E||(s==null||s(j),o==null||o(j),j.defaultPrevented||l==null||l())},f),S=Nee(j=>{const p=j.target;[...u.branches].some(P=>P.contains(p))||(i==null||i(j),o==null||o(j),j.defaultPrevented||l==null||l())},f);return vee(j=>{y===u.layers.size-1&&(r==null||r(j),!j.defaultPrevented&&l&&(j.preventDefault(),l()))},f),N.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(MR=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),DR(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=MR)}},[d,f,n,u]),N.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),DR())},[d,u]),N.useEffect(()=>{const j=()=>m({});return document.addEventListener(SE,j),()=>document.removeEventListener(SE,j)},[]),a.jsx(Je.div,{...c,ref:b,style:{pointerEvents:A?T?"auto":"none":void 0,...t.style},onFocusCapture:Pe(t.onFocusCapture,S.onFocusCapture),onBlurCapture:Pe(t.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Pe(t.onPointerDownCapture,v.onPointerDownCapture)})});Rm.displayName=xee;var _ee="DismissableLayerBranch",q5=N.forwardRef((t,e)=>{const n=N.useContext(z5),r=N.useRef(null),s=Mt(e,r);return N.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),a.jsx(Je.div,{...t,ref:s})});q5.displayName=_ee;function jee(t,e=globalThis==null?void 0:globalThis.document){const n=ir(t),r=N.useRef(!1),s=N.useRef(()=>{});return N.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){W5(bee,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Nee(t,e=globalThis==null?void 0:globalThis.document){const n=ir(t),r=N.useRef(!1);return N.useEffect(()=>{const s=i=>{i.target&&!r.current&&W5(wee,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function DR(){const t=new CustomEvent(SE);document.dispatchEvent(t)}function W5(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?fP(s,i):s.dispatchEvent(i)}var See=Rm,Eee=q5,cr=globalThis!=null&&globalThis.document?N.useLayoutEffect:()=>{},Aee="Portal",bv=N.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=N.useState(!1);cr(()=>i(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?F5.createPortal(a.jsx(Je.div,{...r,ref:e}),o):null});bv.displayName=Aee;function Tee(t,e){return N.useReducer((n,r)=>e[n][r]??n,t)}var ss=t=>{const{present:e,children:n}=t,r=Cee(e),s=typeof n=="function"?n({present:r.isPresent}):N.Children.only(n),i=Mt(r.ref,Pee(s));return typeof n=="function"||r.isPresent?N.cloneElement(s,{ref:i}):null};ss.displayName="Presence";function Cee(t){const[e,n]=N.useState(),r=N.useRef(null),s=N.useRef(t),i=N.useRef("none"),o=t?"mounted":"unmounted",[l,c]=Tee(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const u=Ox(r.current);i.current=l==="mounted"?u:"none"},[l]),cr(()=>{const u=r.current,d=s.current;if(d!==t){const f=i.current,m=Ox(u);t?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),cr(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=m=>{const g=Ox(r.current).includes(m.animationName);if(m.target===e&&g&&(c("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},f=m=>{m.target===e&&(i.current=Ox(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:N.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Ox(t){return(t==null?void 0:t.animationName)||"none"}function Pee(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Iee=_C[" useInsertionEffect ".trim().toString()]||cr;function Ii({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=kee({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:s;{const d=N.useRef(t!==void 0);N.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const u=N.useCallback(d=>{var h;if(l){const f=Oee(d)?d(t):d;f!==t&&((h=o.current)==null||h.call(o,f))}else i(d)},[l,t,i,o]);return[c,u]}function kee({defaultProp:t,onChange:e}){const[n,r]=N.useState(t),s=N.useRef(n),i=N.useRef(e);return Iee(()=>{i.current=e},[e]),N.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function Oee(t){return typeof t=="function"}var H5=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Ree="VisuallyHidden",S_=N.forwardRef((t,e)=>a.jsx(Je.span,{...t,ref:e,style:{...H5,...t.style}}));S_.displayName=Ree;var Mee=S_,mP="ToastProvider",[pP,Dee,Lee]=N_("Toast"),[K5,$qe]=rs("Toast",[Lee]),[$ee,E_]=K5(mP),G5=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[l,c]=N.useState(null),[u,d]=N.useState(0),h=N.useRef(!1),f=N.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${mP}\`. Expected non-empty \`string\`.`),a.jsx(pP.Provider,{scope:e,children:a.jsx($ee,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:N.useCallback(()=>d(m=>m+1),[]),onToastRemove:N.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};G5.displayName=mP;var Y5="ToastViewport",Fee=["F8"],EE="toast.viewportPause",AE="toast.viewportResume",Q5=N.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=Fee,label:s="Notifications ({hotkey})",...i}=t,o=E_(Y5,n),l=Dee(n),c=N.useRef(null),u=N.useRef(null),d=N.useRef(null),h=N.useRef(null),f=Mt(e,h,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=o.toastCount>0;N.useEffect(()=>{const x=w=>{var A;r.length!==0&&r.every(T=>w[T]||w.code===T)&&((A=h.current)==null||A.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),N.useEffect(()=>{const x=c.current,w=h.current;if(b&&x&&w){const y=()=>{if(!o.isClosePausedRef.current){const S=new CustomEvent(EE);w.dispatchEvent(S),o.isClosePausedRef.current=!0}},A=()=>{if(o.isClosePausedRef.current){const S=new CustomEvent(AE);w.dispatchEvent(S),o.isClosePausedRef.current=!1}},T=S=>{!x.contains(S.relatedTarget)&&A()},v=()=>{x.contains(document.activeElement)||A()};return x.addEventListener("focusin",y),x.addEventListener("focusout",T),x.addEventListener("pointermove",y),x.addEventListener("pointerleave",v),window.addEventListener("blur",y),window.addEventListener("focus",A),()=>{x.removeEventListener("focusin",y),x.removeEventListener("focusout",T),x.removeEventListener("pointermove",y),x.removeEventListener("pointerleave",v),window.removeEventListener("blur",y),window.removeEventListener("focus",A)}}},[b,o.isClosePausedRef]);const g=N.useCallback(({tabbingDirection:x})=>{const y=l().map(A=>{const T=A.ref.current,v=[T,...Zee(T)];return x==="forwards"?v:v.reverse()});return(x==="forwards"?y.reverse():y).flat()},[l]);return N.useEffect(()=>{const x=h.current;if(x){const w=y=>{var v,S,j;const A=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!A){const p=document.activeElement,E=y.shiftKey;if(y.target===x&&E){(v=u.current)==null||v.focus();return}const I=g({tabbingDirection:E?"backwards":"forwards"}),O=I.findIndex($=>$===p);x1(I.slice(O+1))?y.preventDefault():E?(S=u.current)==null||S.focus():(j=d.current)==null||j.focus()}};return x.addEventListener("keydown",w),()=>x.removeEventListener("keydown",w)}},[l,g]),a.jsxs(Eee,{ref:c,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&a.jsx(TE,{ref:u,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"forwards"});x1(x)}}),a.jsx(pP.Slot,{scope:n,children:a.jsx(Je.ol,{tabIndex:-1,...i,ref:f})}),b&&a.jsx(TE,{ref:d,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"backwards"});x1(x)}})]})});Q5.displayName=Y5;var X5="ToastFocusProxy",TE=N.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=E_(X5,n);return a.jsx(S_,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&r()}})});TE.displayName=X5;var wv="Toast",Vee="toast.swipeStart",Bee="toast.swipeMove",Uee="toast.swipeCancel",zee="toast.swipeEnd",Z5=N.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[l,c]=Ii({prop:r,defaultProp:s??!0,onChange:i,caller:wv});return a.jsx(ss,{present:n||l,children:a.jsx(Hee,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:ir(t.onPause),onResume:ir(t.onResume),onSwipeStart:Pe(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Pe(t.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Pe(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Pe(t.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});Z5.displayName=wv;var[qee,Wee]=K5(wv,{onClose(){}}),Hee=N.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...b}=t,g=E_(wv,n),[x,w]=N.useState(null),y=Mt(e,$=>w($)),A=N.useRef(null),T=N.useRef(null),v=s||g.duration,S=N.useRef(0),j=N.useRef(v),p=N.useRef(0),{onToastAdd:E,onToastRemove:P}=g,C=ir(()=>{var z;(x==null?void 0:x.contains(document.activeElement))&&((z=g.viewport)==null||z.focus()),o()}),I=N.useCallback($=>{!$||$===1/0||(window.clearTimeout(p.current),S.current=new Date().getTime(),p.current=window.setTimeout(C,$))},[C]);N.useEffect(()=>{const $=g.viewport;if($){const z=()=>{I(j.current),u==null||u()},H=()=>{const M=new Date().getTime()-S.current;j.current=j.current-M,window.clearTimeout(p.current),c==null||c()};return $.addEventListener(EE,H),$.addEventListener(AE,z),()=>{$.removeEventListener(EE,H),$.removeEventListener(AE,z)}}},[g.viewport,v,c,u,I]),N.useEffect(()=>{i&&!g.isClosePausedRef.current&&I(v)},[i,v,g.isClosePausedRef,I]),N.useEffect(()=>(E(),()=>P()),[E,P]);const O=N.useMemo(()=>x?aU(x):null,[x]);return g.viewport?a.jsxs(a.Fragment,{children:[O&&a.jsx(Kee,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:O}),a.jsx(qee,{scope:n,onClose:C,children:Kd.createPortal(a.jsx(pP.ItemSlot,{scope:n,children:a.jsx(See,{asChild:!0,onEscapeKeyDown:Pe(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||C(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(Je.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...b,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Pe(t.onKeyDown,$=>{$.key==="Escape"&&(l==null||l($.nativeEvent),$.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,C()))}),onPointerDown:Pe(t.onPointerDown,$=>{$.button===0&&(A.current={x:$.clientX,y:$.clientY})}),onPointerMove:Pe(t.onPointerMove,$=>{if(!A.current)return;const z=$.clientX-A.current.x,H=$.clientY-A.current.y,M=!!T.current,F=["left","right"].includes(g.swipeDirection),L=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,W=F?L(0,z):0,ie=F?0:L(0,H),oe=$.pointerType==="touch"?10:2,me={x:W,y:ie},Ie={originalEvent:$,delta:me};M?(T.current=me,Rx(Bee,h,Ie,{discrete:!1})):LR(me,g.swipeDirection,oe)?(T.current=me,Rx(Vee,d,Ie,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(z)>oe||Math.abs(H)>oe)&&(A.current=null)}),onPointerUp:Pe(t.onPointerUp,$=>{const z=T.current,H=$.target;if(H.hasPointerCapture($.pointerId)&&H.releasePointerCapture($.pointerId),T.current=null,A.current=null,z){const M=$.currentTarget,F={originalEvent:$,delta:z};LR(z,g.swipeDirection,g.swipeThreshold)?Rx(zee,m,F,{discrete:!0}):Rx(Uee,f,F,{discrete:!0}),M.addEventListener("click",L=>L.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),Kee=t=>{const{__scopeToast:e,children:n,...r}=t,s=E_(wv,e),[i,o]=N.useState(!1),[l,c]=N.useState(!1);return Qee(()=>o(!0)),N.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:a.jsx(bv,{asChild:!0,children:a.jsx(S_,{...r,children:i&&a.jsxs(a.Fragment,{children:[s.label," ",n]})})})},Gee="ToastTitle",J5=N.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(Je.div,{...r,ref:e})});J5.displayName=Gee;var Yee="ToastDescription",eU=N.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(Je.div,{...r,ref:e})});eU.displayName=Yee;var tU="ToastAction",nU=N.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?a.jsx(sU,{altText:n,asChild:!0,children:a.jsx(gP,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${tU}\`. Expected non-empty \`string\`.`),null)});nU.displayName=tU;var rU="ToastClose",gP=N.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=Wee(rU,n);return a.jsx(sU,{asChild:!0,children:a.jsx(Je.button,{type:"button",...r,ref:e,onClick:Pe(t.onClick,s.onClose)})})});gP.displayName=rU;var sU=N.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return a.jsx(Je.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function aU(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),Xee(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...aU(r))}}),e}function Rx(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?fP(s,i):s.dispatchEvent(i)}var LR=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function Qee(t=()=>{}){const e=ir(t);cr(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function Xee(t){return t.nodeType===t.ELEMENT_NODE}function Zee(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function x1(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Jee=G5,iU=Q5,oU=Z5,lU=J5,cU=eU,uU=nU,dU=gP;function hU(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=hU(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Lt(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=hU(t))&&(r&&(r+=" "),r+=e);return r}const $R=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,FR=Lt,Yd=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return FR(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const f=$R(d)||$R(h);return s[u][f]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(b=>{let[g,x]=b;return Array.isArray(x)?x.includes({...i,...l}[g]):{...i,...l}[g]===x})?[...u,h,f]:u},[]);return FR(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ete=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fU=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tte={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nte=N.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>N.createElement("svg",{ref:c,...tte,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:fU("lucide",s),...l},[...o.map(([u,d])=>N.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=(t,e)=>{const n=N.forwardRef(({className:r,...s},i)=>N.createElement(nte,{ref:i,iconNode:e,className:fU(`lucide-${ete(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rte=ke("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ste=ke("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ate=ke("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=ke("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ite=ke("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ote=ke("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lte=ke("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cte=ke("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ute=ke("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=ke("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=ke("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=ke("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dte=ke("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=ke("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hte=ke("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=ke("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=ke("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=ke("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=ke("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=ke("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fte=ke("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=ke("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=ke("CircleArrowDown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mte=ke("CircleArrowUp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=ke("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=ke("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gU=ke("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pte=ke("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gte=ke("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vf=ke("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=ke("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=ke("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=ke("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=ke("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yte=ke("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=ke("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vte=ke("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=ke("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xte=ke("FileX",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vU=ke("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=ke("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bte=ke("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=ke("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wte=ke("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _te=ke("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jte=ke("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=ke("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=ke("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bh=ke("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nte=ke("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=ke("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=ke("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ste=ke("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ete=ke("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=ke("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ate=ke("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tte=ke("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=ke("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cte=ke("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bU=ke("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=ke("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=ke("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=ke("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pte=ke("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=ke("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ite=ke("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=ke("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=ke("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=ke("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kte=ke("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=ke("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=ke("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WR=ke("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ote=ke("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=ke("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=ke("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=ke("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=ke("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=ke("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=ke("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rte=ke("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=ke("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=ke("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=ke("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KR=ke("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=ke("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),xP="-",Mte=t=>{const e=Lte(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(xP);return l[0]===""&&l.length!==1&&l.shift(),_U(l,e)||Dte(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},_U=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?_U(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(xP);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},GR=/^\[(.+)\]$/,Dte=t=>{if(GR.test(t)){const e=GR.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Lte=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return Fte(Object.entries(t.classGroups),n).forEach(([i,o])=>{PE(o,r,i,e)}),r},PE=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:YR(e,s);i.classGroupId=n;return}if(typeof s=="function"){if($te(s)){PE(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{PE(o,YR(e,i),n,r)})})},YR=(t,e)=>{let n=t;return e.split(xP).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},$te=t=>t.isThemeGetter,Fte=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[n,s]}):t,Vte=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},jU="!",Bte=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=l=>{const c=[];let u=0,d=0,h;for(let x=0;x<l.length;x++){let w=l[x];if(u===0){if(w===s&&(r||l.slice(x,x+i)===e)){c.push(l.slice(d,x)),d=x+i;continue}if(w==="/"){h=x;continue}}w==="["?u++:w==="]"&&u--}const f=c.length===0?l:l.substring(d),m=f.startsWith(jU),b=m?f.substring(1):f,g=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:b,maybePostfixModifierPosition:g}};return n?l=>n({className:l,parseClassName:o}):o},Ute=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},zte=t=>({cache:Vte(t.cacheSize),parseClassName:Bte(t),...Mte(t)}),qte=/\s+/,Wte=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(qte);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=n(u);let b=!!m,g=r(b?f.substring(0,m):f);if(!g){if(!b){l=u+(l.length>0?" "+l:l);continue}if(g=r(f),!g){l=u+(l.length>0?" "+l:l);continue}b=!1}const x=Ute(d).join(":"),w=h?x+jU:x,y=w+g;if(i.includes(y))continue;i.push(y);const A=s(g,b);for(let T=0;T<A.length;++T){const v=A[T];i.push(w+v)}l=u+(l.length>0?" "+l:l)}return l};function Hte(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=NU(e))&&(r&&(r+=" "),r+=n);return r}const NU=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=NU(t[r]))&&(n&&(n+=" "),n+=e);return n};function Kte(t,...e){let n,r,s,i=o;function o(c){const u=e.reduce((d,h)=>h(d),t());return n=zte(u),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=Wte(c,n);return s(c,d),d}return function(){return i(Hte.apply(null,arguments))}}const Mn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},SU=/^\[(?:([a-z-]+):)?(.+)\]$/i,Gte=/^\d+\/\d+$/,Yte=new Set(["px","full","screen"]),Qte=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Xte=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Zte=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Jte=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ene=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Oo=t=>tf(t)||Yte.has(t)||Gte.test(t),Ll=t=>Dm(t,"length",lne),tf=t=>!!t&&!Number.isNaN(Number(t)),b1=t=>Dm(t,"number",tf),Op=t=>!!t&&Number.isInteger(Number(t)),tne=t=>t.endsWith("%")&&tf(t.slice(0,-1)),Ft=t=>SU.test(t),$l=t=>Qte.test(t),nne=new Set(["length","size","percentage"]),rne=t=>Dm(t,nne,EU),sne=t=>Dm(t,"position",EU),ane=new Set(["image","url"]),ine=t=>Dm(t,ane,une),one=t=>Dm(t,"",cne),Rp=()=>!0,Dm=(t,e,n)=>{const r=SU.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},lne=t=>Xte.test(t)&&!Zte.test(t),EU=()=>!1,cne=t=>Jte.test(t),une=t=>ene.test(t),dne=()=>{const t=Mn("colors"),e=Mn("spacing"),n=Mn("blur"),r=Mn("brightness"),s=Mn("borderColor"),i=Mn("borderRadius"),o=Mn("borderSpacing"),l=Mn("borderWidth"),c=Mn("contrast"),u=Mn("grayscale"),d=Mn("hueRotate"),h=Mn("invert"),f=Mn("gap"),m=Mn("gradientColorStops"),b=Mn("gradientColorStopPositions"),g=Mn("inset"),x=Mn("margin"),w=Mn("opacity"),y=Mn("padding"),A=Mn("saturate"),T=Mn("scale"),v=Mn("sepia"),S=Mn("skew"),j=Mn("space"),p=Mn("translate"),E=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto",Ft,e],I=()=>[Ft,e],O=()=>["",Oo,Ll],$=()=>["auto",tf,Ft],z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],H=()=>["solid","dashed","dotted","double","none"],M=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],L=()=>["","0",Ft],W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ie=()=>[tf,Ft];return{cacheSize:500,separator:":",theme:{colors:[Rp],spacing:[Oo,Ll],blur:["none","",$l,Ft],brightness:ie(),borderColor:[t],borderRadius:["none","","full",$l,Ft],borderSpacing:I(),borderWidth:O(),contrast:ie(),grayscale:L(),hueRotate:ie(),invert:L(),gap:I(),gradientColorStops:[t],gradientColorStopPositions:[tne,Ll],inset:C(),margin:C(),opacity:ie(),padding:I(),saturate:ie(),scale:ie(),sepia:L(),skew:ie(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",Ft]}],container:["container"],columns:[{columns:[$l]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...z(),Ft]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Op,Ft]}],basis:[{basis:C()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ft]}],grow:[{grow:L()}],shrink:[{shrink:L()}],order:[{order:["first","last","none",Op,Ft]}],"grid-cols":[{"grid-cols":[Rp]}],"col-start-end":[{col:["auto",{span:["full",Op,Ft]},Ft]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[Rp]}],"row-start-end":[{row:["auto",{span:[Op,Ft]},Ft]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ft]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ft]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ft,e]}],"min-w":[{"min-w":[Ft,e,"min","max","fit"]}],"max-w":[{"max-w":[Ft,e,"none","full","min","max","fit","prose",{screen:[$l]},$l]}],h:[{h:[Ft,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ft,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ft,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ft,e,"auto","min","max","fit"]}],"font-size":[{text:["base",$l,Ll]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",b1]}],"font-family":[{font:[Rp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ft]}],"line-clamp":[{"line-clamp":["none",tf,b1]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Oo,Ft]}],"list-image":[{"list-image":["none",Ft]}],"list-style-type":[{list:["none","disc","decimal",Ft]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...H(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Oo,Ll]}],"underline-offset":[{"underline-offset":["auto",Oo,Ft]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ft]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ft]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...z(),sne]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",rne]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ine]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...H(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:H()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...H()]}],"outline-offset":[{"outline-offset":[Oo,Ft]}],"outline-w":[{outline:[Oo,Ll]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[Oo,Ll]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",$l,one]}],"shadow-color":[{shadow:[Rp]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...M(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":M()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",$l,Ft]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[A]}],sepia:[{sepia:[v]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[A]}],"backdrop-sepia":[{"backdrop-sepia":[v]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ft]}],duration:[{duration:ie()}],ease:[{ease:["linear","in","out","in-out",Ft]}],delay:[{delay:ie()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ft]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[T]}],"scale-x":[{"scale-x":[T]}],"scale-y":[{"scale-y":[T]}],rotate:[{rotate:[Op,Ft]}],"translate-x":[{"translate-x":[p]}],"translate-y":[{"translate-y":[p]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ft]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ft]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ft]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Oo,Ll,b1]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},hne=Kte(dne);function pe(...t){return hne(Lt(t))}const fne=Jee,AU=N.forwardRef(({className:t,...e},n)=>a.jsx(iU,{ref:n,className:pe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));AU.displayName=iU.displayName;const mne=Yd("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),TU=N.forwardRef(({className:t,variant:e,...n},r)=>a.jsx(oU,{ref:r,className:pe(mne({variant:e}),t),...n}));TU.displayName=oU.displayName;const pne=N.forwardRef(({className:t,...e},n)=>a.jsx(uU,{ref:n,className:pe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));pne.displayName=uU.displayName;const CU=N.forwardRef(({className:t,...e},n)=>a.jsx(dU,{ref:n,className:pe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:a.jsx(vP,{className:"h-4 w-4"})}));CU.displayName=dU.displayName;const PU=N.forwardRef(({className:t,...e},n)=>a.jsx(lU,{ref:n,className:pe("text-sm font-semibold",t),...e}));PU.displayName=lU.displayName;const IU=N.forwardRef(({className:t,...e},n)=>a.jsx(cU,{ref:n,className:pe("text-sm opacity-90",t),...e}));IU.displayName=cU.displayName;function gne(){const{toasts:t}=uee();return a.jsxs(fne,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return a.jsxs(TU,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[n&&a.jsx(PU,{children:n}),r&&a.jsx(IU,{children:r})]}),s,a.jsx(CU,{})]},e)}),a.jsx(AU,{})]})}var QR=["light","dark"],yne="(prefers-color-scheme: dark)",vne=N.createContext(void 0),xne={setTheme:t=>{},themes:[]},bne=()=>{var t;return(t=N.useContext(vne))!=null?t:xne};N.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let u=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(b=>`'${b}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?QR.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(b,g=!1,x=!0)=>{let w=o?o[b]:b,y=g?b+"|| ''":`'${w}'`,A="";return s&&x&&!g&&QR.includes(b)&&(A+=`d.style.colorScheme = '${b}';`),n==="class"?g||w?A+=`c.add(${y})`:A+="null":w&&(A+=`d[s](n,${y})`),A},m=t?`!function(){${d}${f(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${yne}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${u?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return N.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var wne=t=>{switch(t){case"success":return Nne;case"info":return Ene;case"warning":return Sne;case"error":return Ane;default:return null}},_ne=Array(12).fill(0),jne=({visible:t,className:e})=>D.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},D.createElement("div",{className:"sonner-spinner"},_ne.map((n,r)=>D.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),Nne=D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},D.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Sne=D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},D.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Ene=D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},D.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Ane=D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},D.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Tne=D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},D.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),D.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Cne=()=>{let[t,e]=D.useState(document.hidden);return D.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},IE=1,Pne=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:IE++,i=this.toasts.find(l=>l.id===s),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...t,id:s,title:n}),{...l,...t,id:s,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:s}),s},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),s=n!==void 0,i,o=r.then(async c=>{if(i=["resolve",c],D.isValidElement(c))s=!1,this.create({id:n,type:"default",message:c});else if(kne(c)&&!c.ok){s=!1;let u=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:n,type:"error",message:u,description:d})}else if(e.success!==void 0){s=!1;let u=typeof e.success=="function"?await e.success(c):e.success,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(i=["reject",c],e.error!==void 0){s=!1;let u=typeof e.error=="function"?await e.error(c):e.error,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;s&&(this.dismiss(n),n=void 0),(c=e.finally)==null||c.call(e)}),l=()=>new Promise((c,u)=>o.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||IE++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Us=new Pne,Ine=(t,e)=>{let n=(e==null?void 0:e.id)||IE++;return Us.addToast({title:t,...e,id:n}),n},kne=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",One=Ine,Rne=()=>Us.toasts,Mne=()=>Us.getActiveToasts(),Z=Object.assign(One,{success:Us.success,info:Us.info,warning:Us.warning,error:Us.error,custom:Us.custom,message:Us.message,promise:Us.promise,dismiss:Us.dismiss,loading:Us.loading},{getHistory:Rne,getToasts:Mne});function Dne(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}Dne(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Mx(t){return t.label!==void 0}var Lne=3,$ne="32px",Fne="16px",XR=4e3,Vne=356,Bne=14,Une=20,zne=200;function di(...t){return t.filter(Boolean).join(" ")}function qne(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var Wne=t=>{var e,n,r,s,i,o,l,c,u,d,h;let{invert:f,toast:m,unstyled:b,interacting:g,setHeights:x,visibleToasts:w,heights:y,index:A,toasts:T,expanded:v,removeToast:S,defaultRichColors:j,closeButton:p,style:E,cancelButtonStyle:P,actionButtonStyle:C,className:I="",descriptionClassName:O="",duration:$,position:z,gap:H,loadingIcon:M,expandByDefault:F,classNames:L,icons:W,closeButtonAriaLabel:ie="Close toast",pauseWhenPageIsHidden:oe}=t,[me,Ie]=D.useState(null),[lt,ut]=D.useState(null),[je,ht]=D.useState(!1),[we,Me]=D.useState(!1),[Fe,ue]=D.useState(!1),[Tt,gt]=D.useState(!1),[an,Zt]=D.useState(!1),[wn,Lr]=D.useState(0),[nn,q]=D.useState(0),se=D.useRef(m.duration||$||XR),de=D.useRef(null),Oe=D.useRef(null),Re=A===0,Se=A+1<=w,ze=m.type,Ut=m.dismissible!==!1,on=m.className||"",as=m.descriptionClassName||"",oi=D.useMemo(()=>y.findIndex(bt=>bt.toastId===m.id)||0,[y,m.id]),sa=D.useMemo(()=>{var bt;return(bt=m.closeButton)!=null?bt:p},[m.closeButton,p]),wu=D.useMemo(()=>m.duration||$||XR,[m.duration,$]),aa=D.useRef(0),Ds=D.useRef(0),Tl=D.useRef(0),Gr=D.useRef(null),[lh,ko]=z.split("-"),fp=D.useMemo(()=>y.reduce((bt,dn,En)=>En>=oi?bt:bt+dn.height,0),[y,oi]),Cl=Cne(),rx=m.invert||f,Sr=ze==="loading";Ds.current=D.useMemo(()=>oi*H+fp,[oi,fp]),D.useEffect(()=>{se.current=wu},[wu]),D.useEffect(()=>{ht(!0)},[]),D.useEffect(()=>{let bt=Oe.current;if(bt){let dn=bt.getBoundingClientRect().height;return q(dn),x(En=>[{toastId:m.id,height:dn,position:m.position},...En]),()=>x(En=>En.filter($r=>$r.toastId!==m.id))}},[x,m.id]),D.useLayoutEffect(()=>{if(!je)return;let bt=Oe.current,dn=bt.style.height;bt.style.height="auto";let En=bt.getBoundingClientRect().height;bt.style.height=dn,q(En),x($r=>$r.find(ia=>ia.toastId===m.id)?$r.map(ia=>ia.toastId===m.id?{...ia,height:En}:ia):[{toastId:m.id,height:En,position:m.position},...$r])},[je,m.title,m.description,x,m.id]);let li=D.useCallback(()=>{Me(!0),Lr(Ds.current),x(bt=>bt.filter(dn=>dn.toastId!==m.id)),setTimeout(()=>{S(m)},zne)},[m,S,x,Ds]);D.useEffect(()=>{if(m.promise&&ze==="loading"||m.duration===1/0||m.type==="loading")return;let bt;return v||g||oe&&Cl?(()=>{if(Tl.current<aa.current){let dn=new Date().getTime()-aa.current;se.current=se.current-dn}Tl.current=new Date().getTime()})():se.current!==1/0&&(aa.current=new Date().getTime(),bt=setTimeout(()=>{var dn;(dn=m.onAutoClose)==null||dn.call(m,m),li()},se.current)),()=>clearTimeout(bt)},[v,g,m,ze,oe,Cl,li]),D.useEffect(()=>{m.delete&&li()},[li,m.delete]);function _u(){var bt,dn,En;return W!=null&&W.loading?D.createElement("div",{className:di(L==null?void 0:L.loader,(bt=m==null?void 0:m.classNames)==null?void 0:bt.loader,"sonner-loader"),"data-visible":ze==="loading"},W.loading):M?D.createElement("div",{className:di(L==null?void 0:L.loader,(dn=m==null?void 0:m.classNames)==null?void 0:dn.loader,"sonner-loader"),"data-visible":ze==="loading"},M):D.createElement(jne,{className:di(L==null?void 0:L.loader,(En=m==null?void 0:m.classNames)==null?void 0:En.loader),visible:ze==="loading"})}return D.createElement("li",{tabIndex:0,ref:Oe,className:di(I,on,L==null?void 0:L.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,L==null?void 0:L.default,L==null?void 0:L[ze],(n=m==null?void 0:m.classNames)==null?void 0:n[ze]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:j,"data-styled":!(m.jsx||m.unstyled||b),"data-mounted":je,"data-promise":!!m.promise,"data-swiped":an,"data-removed":we,"data-visible":Se,"data-y-position":lh,"data-x-position":ko,"data-index":A,"data-front":Re,"data-swiping":Fe,"data-dismissible":Ut,"data-type":ze,"data-invert":rx,"data-swipe-out":Tt,"data-swipe-direction":lt,"data-expanded":!!(v||F&&je),style:{"--index":A,"--toasts-before":A,"--z-index":T.length-A,"--offset":`${we?wn:Ds.current}px`,"--initial-height":F?"auto":`${nn}px`,...E,...m.style},onDragEnd:()=>{ue(!1),Ie(null),Gr.current=null},onPointerDown:bt=>{Sr||!Ut||(de.current=new Date,Lr(Ds.current),bt.target.setPointerCapture(bt.pointerId),bt.target.tagName!=="BUTTON"&&(ue(!0),Gr.current={x:bt.clientX,y:bt.clientY}))},onPointerUp:()=>{var bt,dn,En,$r;if(Tt||!Ut)return;Gr.current=null;let ia=Number(((bt=Oe.current)==null?void 0:bt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ui=Number(((dn=Oe.current)==null?void 0:dn.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ia=new Date().getTime()-((En=de.current)==null?void 0:En.getTime()),Ls=me==="x"?ia:Ui,ci=Math.abs(Ls)/Ia;if(Math.abs(Ls)>=Une||ci>.11){Lr(Ds.current),($r=m.onDismiss)==null||$r.call(m,m),ut(me==="x"?ia>0?"right":"left":Ui>0?"down":"up"),li(),gt(!0),Zt(!1);return}ue(!1),Ie(null)},onPointerMove:bt=>{var dn,En,$r,ia;if(!Gr.current||!Ut||((dn=window.getSelection())==null?void 0:dn.toString().length)>0)return;let Ui=bt.clientY-Gr.current.y,Ia=bt.clientX-Gr.current.x,Ls=(En=t.swipeDirections)!=null?En:qne(z);!me&&(Math.abs(Ia)>1||Math.abs(Ui)>1)&&Ie(Math.abs(Ia)>Math.abs(Ui)?"x":"y");let ci={x:0,y:0};me==="y"?(Ls.includes("top")||Ls.includes("bottom"))&&(Ls.includes("top")&&Ui<0||Ls.includes("bottom")&&Ui>0)&&(ci.y=Ui):me==="x"&&(Ls.includes("left")||Ls.includes("right"))&&(Ls.includes("left")&&Ia<0||Ls.includes("right")&&Ia>0)&&(ci.x=Ia),(Math.abs(ci.x)>0||Math.abs(ci.y)>0)&&Zt(!0),($r=Oe.current)==null||$r.style.setProperty("--swipe-amount-x",`${ci.x}px`),(ia=Oe.current)==null||ia.style.setProperty("--swipe-amount-y",`${ci.y}px`)}},sa&&!m.jsx?D.createElement("button",{"aria-label":ie,"data-disabled":Sr,"data-close-button":!0,onClick:Sr||!Ut?()=>{}:()=>{var bt;li(),(bt=m.onDismiss)==null||bt.call(m,m)},className:di(L==null?void 0:L.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(i=W==null?void 0:W.close)!=null?i:Tne):null,m.jsx||N.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:D.createElement(D.Fragment,null,ze||m.icon||m.promise?D.createElement("div",{"data-icon":"",className:di(L==null?void 0:L.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||_u():null,m.type!=="loading"?m.icon||(W==null?void 0:W[ze])||wne(ze):null):null,D.createElement("div",{"data-content":"",className:di(L==null?void 0:L.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},D.createElement("div",{"data-title":"",className:di(L==null?void 0:L.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?D.createElement("div",{"data-description":"",className:di(O,as,L==null?void 0:L.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),N.isValidElement(m.cancel)?m.cancel:m.cancel&&Mx(m.cancel)?D.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||P,onClick:bt=>{var dn,En;Mx(m.cancel)&&Ut&&((En=(dn=m.cancel).onClick)==null||En.call(dn,bt),li())},className:di(L==null?void 0:L.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,N.isValidElement(m.action)?m.action:m.action&&Mx(m.action)?D.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||C,onClick:bt=>{var dn,En;Mx(m.action)&&((En=(dn=m.action).onClick)==null||En.call(dn,bt),!bt.defaultPrevented&&li())},className:di(L==null?void 0:L.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function ZR(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Hne(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",l=i?Fne:$ne;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=l:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var Kne=N.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:f,style:m,visibleToasts:b=Lne,toastOptions:g,dir:x=ZR(),gap:w=Bne,loadingIcon:y,icons:A,containerAriaLabel:T="Notifications",pauseWhenPageIsHidden:v}=t,[S,j]=D.useState([]),p=D.useMemo(()=>Array.from(new Set([r].concat(S.filter(oe=>oe.position).map(oe=>oe.position)))),[S,r]),[E,P]=D.useState([]),[C,I]=D.useState(!1),[O,$]=D.useState(!1),[z,H]=D.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),M=D.useRef(null),F=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),L=D.useRef(null),W=D.useRef(!1),ie=D.useCallback(oe=>{j(me=>{var Ie;return(Ie=me.find(lt=>lt.id===oe.id))!=null&&Ie.delete||Us.dismiss(oe.id),me.filter(({id:lt})=>lt!==oe.id)})},[]);return D.useEffect(()=>Us.subscribe(oe=>{if(oe.dismiss){j(me=>me.map(Ie=>Ie.id===oe.id?{...Ie,delete:!0}:Ie));return}setTimeout(()=>{F5.flushSync(()=>{j(me=>{let Ie=me.findIndex(lt=>lt.id===oe.id);return Ie!==-1?[...me.slice(0,Ie),{...me[Ie],...oe},...me.slice(Ie+1)]:[oe,...me]})})})}),[]),D.useEffect(()=>{if(d!=="system"){H(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?H("dark"):H("light")),typeof window>"u")return;let oe=window.matchMedia("(prefers-color-scheme: dark)");try{oe.addEventListener("change",({matches:me})=>{H(me?"dark":"light")})}catch{oe.addListener(({matches:Ie})=>{try{H(Ie?"dark":"light")}catch(lt){console.error(lt)}})}},[d]),D.useEffect(()=>{S.length<=1&&I(!1)},[S]),D.useEffect(()=>{let oe=me=>{var Ie,lt;s.every(ut=>me[ut]||me.code===ut)&&(I(!0),(Ie=M.current)==null||Ie.focus()),me.code==="Escape"&&(document.activeElement===M.current||(lt=M.current)!=null&&lt.contains(document.activeElement))&&I(!1)};return document.addEventListener("keydown",oe),()=>document.removeEventListener("keydown",oe)},[s]),D.useEffect(()=>{if(M.current)return()=>{L.current&&(L.current.focus({preventScroll:!0}),L.current=null,W.current=!1)}},[M.current]),D.createElement("section",{ref:e,"aria-label":`${T} ${F}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},p.map((oe,me)=>{var Ie;let[lt,ut]=oe.split("-");return S.length?D.createElement("ol",{key:oe,dir:x==="auto"?ZR():x,tabIndex:-1,ref:M,className:l,"data-sonner-toaster":!0,"data-theme":z,"data-y-position":lt,"data-lifted":C&&S.length>1&&!i,"data-x-position":ut,style:{"--front-toast-height":`${((Ie=E[0])==null?void 0:Ie.height)||0}px`,"--width":`${Vne}px`,"--gap":`${w}px`,...m,...Hne(c,u)},onBlur:je=>{W.current&&!je.currentTarget.contains(je.relatedTarget)&&(W.current=!1,L.current&&(L.current.focus({preventScroll:!0}),L.current=null))},onFocus:je=>{je.target instanceof HTMLElement&&je.target.dataset.dismissible==="false"||W.current||(W.current=!0,L.current=je.relatedTarget)},onMouseEnter:()=>I(!0),onMouseMove:()=>I(!0),onMouseLeave:()=>{O||I(!1)},onDragEnd:()=>I(!1),onPointerDown:je=>{je.target instanceof HTMLElement&&je.target.dataset.dismissible==="false"||$(!0)},onPointerUp:()=>$(!1)},S.filter(je=>!je.position&&me===0||je.position===oe).map((je,ht)=>{var we,Me;return D.createElement(Wne,{key:je.id,icons:A,index:ht,toast:je,defaultRichColors:h,duration:(we=g==null?void 0:g.duration)!=null?we:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:n,visibleToasts:b,closeButton:(Me=g==null?void 0:g.closeButton)!=null?Me:o,interacting:O,position:oe,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:ie,toasts:S.filter(Fe=>Fe.position==je.position),heights:E.filter(Fe=>Fe.position==je.position),setHeights:P,expandByDefault:i,gap:w,loadingIcon:y,expanded:C,pauseWhenPageIsHidden:v,swipeDirections:t.swipeDirections})})):null}))});const Gne=({...t})=>{const{theme:e="system"}=bne();return a.jsx(Kne,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var Yne=_C[" useId ".trim().toString()]||(()=>{}),Qne=0;function Ha(t){const[e,n]=N.useState(Yne());return cr(()=>{t||n(r=>r??String(Qne++))},[t]),t||(e?`radix-${e}`:"")}const Xne=["top","right","bottom","left"],Vc=Math.min,ha=Math.max,m0=Math.round,Dx=Math.floor,io=t=>({x:t,y:t}),Zne={left:"right",right:"left",bottom:"top",top:"bottom"},Jne={start:"end",end:"start"};function kE(t,e,n){return ha(t,Vc(e,n))}function ol(t,e){return typeof t=="function"?t(e):t}function ll(t){return t.split("-")[0]}function Lm(t){return t.split("-")[1]}function bP(t){return t==="x"?"y":"x"}function wP(t){return t==="y"?"height":"width"}const ere=new Set(["top","bottom"]);function Ji(t){return ere.has(ll(t))?"y":"x"}function _P(t){return bP(Ji(t))}function tre(t,e,n){n===void 0&&(n=!1);const r=Lm(t),s=_P(t),i=wP(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=p0(o)),[o,p0(o)]}function nre(t){const e=p0(t);return[OE(t),e,OE(e)]}function OE(t){return t.replace(/start|end/g,e=>Jne[e])}const JR=["left","right"],eM=["right","left"],rre=["top","bottom"],sre=["bottom","top"];function are(t,e,n){switch(t){case"top":case"bottom":return n?e?eM:JR:e?JR:eM;case"left":case"right":return e?rre:sre;default:return[]}}function ire(t,e,n,r){const s=Lm(t);let i=are(ll(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(OE)))),i}function p0(t){return t.replace(/left|right|bottom|top/g,e=>Zne[e])}function ore(t){return{top:0,right:0,bottom:0,left:0,...t}}function kU(t){return typeof t!="number"?ore(t):{top:t,right:t,bottom:t,left:t}}function g0(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function tM(t,e,n){let{reference:r,floating:s}=t;const i=Ji(e),o=_P(e),l=wP(o),c=ll(e),u=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[l]/2-s[l]/2;let m;switch(c){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch(Lm(e)){case"start":m[o]-=f*(n&&u?-1:1);break;case"end":m[o]+=f*(n&&u?-1:1);break}return m}const lre=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=tM(u,r,c),f=r,m={},b=0;for(let g=0;g<l.length;g++){const{name:x,fn:w}=l[g],{x:y,y:A,data:T,reset:v}=await w({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:m,rects:u,platform:o,elements:{reference:t,floating:e}});d=y??d,h=A??h,m={...m,[x]:{...m[x],...T}},v&&b<=50&&(b++,typeof v=="object"&&(v.placement&&(f=v.placement),v.rects&&(u=v.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):v.rects),{x:d,y:h}=tM(u,f,c)),g=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:m}};async function ay(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=ol(e,t),b=kU(m),x=l[f?h==="floating"?"reference":"floating":h],w=g0(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(x)))==null||n?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),y=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,A=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),T=await(i.isElement==null?void 0:i.isElement(A))?await(i.getScale==null?void 0:i.getScale(A))||{x:1,y:1}:{x:1,y:1},v=g0(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:A,strategy:c}):y);return{top:(w.top-v.top+b.top)/T.y,bottom:(v.bottom-w.bottom+b.bottom)/T.y,left:(w.left-v.left+b.left)/T.x,right:(v.right-w.right+b.right)/T.x}}const cre=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=ol(t,e)||{};if(u==null)return{};const h=kU(d),f={x:n,y:r},m=_P(s),b=wP(m),g=await o.getDimensions(u),x=m==="y",w=x?"top":"left",y=x?"bottom":"right",A=x?"clientHeight":"clientWidth",T=i.reference[b]+i.reference[m]-f[m]-i.floating[b],v=f[m]-i.reference[m],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let j=S?S[A]:0;(!j||!await(o.isElement==null?void 0:o.isElement(S)))&&(j=l.floating[A]||i.floating[b]);const p=T/2-v/2,E=j/2-g[b]/2-1,P=Vc(h[w],E),C=Vc(h[y],E),I=P,O=j-g[b]-C,$=j/2-g[b]/2+p,z=kE(I,$,O),H=!c.arrow&&Lm(s)!=null&&$!==z&&i.reference[b]/2-($<I?P:C)-g[b]/2<0,M=H?$<I?$-I:$-O:0;return{[m]:f[m]+M,data:{[m]:z,centerOffset:$-z-M,...H&&{alignmentOffset:M}},reset:H}}}),ure=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:g=!0,...x}=ol(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const w=ll(s),y=Ji(l),A=ll(l)===l,T=await(c.isRTL==null?void 0:c.isRTL(u.floating)),v=f||(A||!g?[p0(l)]:nre(l)),S=b!=="none";!f&&S&&v.push(...ire(l,g,b,T));const j=[l,...v],p=await ay(e,x),E=[];let P=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&E.push(p[w]),h){const $=tre(s,o,T);E.push(p[$[0]],p[$[1]])}if(P=[...P,{placement:s,overflows:E}],!E.every($=>$<=0)){var C,I;const $=(((C=i.flip)==null?void 0:C.index)||0)+1,z=j[$];if(z&&(!(h==="alignment"?y!==Ji(z):!1)||P.every(F=>F.overflows[0]>0&&Ji(F.placement)===y)))return{data:{index:$,overflows:P},reset:{placement:z}};let H=(I=P.filter(M=>M.overflows[0]<=0).sort((M,F)=>M.overflows[1]-F.overflows[1])[0])==null?void 0:I.placement;if(!H)switch(m){case"bestFit":{var O;const M=(O=P.filter(F=>{if(S){const L=Ji(F.placement);return L===y||L==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(L=>L>0).reduce((L,W)=>L+W,0)]).sort((F,L)=>F[1]-L[1])[0])==null?void 0:O[0];M&&(H=M);break}case"initialPlacement":H=l;break}if(s!==H)return{reset:{placement:H}}}return{}}}};function nM(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function rM(t){return Xne.some(e=>t[e]>=0)}const dre=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=ol(t,e);switch(r){case"referenceHidden":{const i=await ay(e,{...s,elementContext:"reference"}),o=nM(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:rM(o)}}}case"escaped":{const i=await ay(e,{...s,altBoundary:!0}),o=nM(i,n.floating);return{data:{escapedOffsets:o,escaped:rM(o)}}}default:return{}}}}},OU=new Set(["left","top"]);async function hre(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=ll(n),l=Lm(n),c=Ji(n)==="y",u=OU.has(o)?-1:1,d=i&&c?-1:1,h=ol(e,t);let{mainAxis:f,crossAxis:m,alignmentAxis:b}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof b=="number"&&(m=l==="end"?b*-1:b),c?{x:m*d,y:f*u}:{x:f*u,y:m*d}}const fre=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:l}=e,c=await hre(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},mre=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:x=>{let{x:w,y}=x;return{x:w,y}}},...c}=ol(t,e),u={x:n,y:r},d=await ay(e,c),h=Ji(ll(s)),f=bP(h);let m=u[f],b=u[h];if(i){const x=f==="y"?"top":"left",w=f==="y"?"bottom":"right",y=m+d[x],A=m-d[w];m=kE(y,m,A)}if(o){const x=h==="y"?"top":"left",w=h==="y"?"bottom":"right",y=b+d[x],A=b-d[w];b=kE(y,b,A)}const g=l.fn({...e,[f]:m,[h]:b});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:i,[h]:o}}}}}},pre=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=ol(t,e),d={x:n,y:r},h=Ji(s),f=bP(h);let m=d[f],b=d[h];const g=ol(l,e),x=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const A=f==="y"?"height":"width",T=i.reference[f]-i.floating[A]+x.mainAxis,v=i.reference[f]+i.reference[A]-x.mainAxis;m<T?m=T:m>v&&(m=v)}if(u){var w,y;const A=f==="y"?"width":"height",T=OU.has(ll(s)),v=i.reference[h]-i.floating[A]+(T&&((w=o.offset)==null?void 0:w[h])||0)+(T?0:x.crossAxis),S=i.reference[h]+i.reference[A]+(T?0:((y=o.offset)==null?void 0:y[h])||0)-(T?x.crossAxis:0);b<v?b=v:b>S&&(b=S)}return{[f]:m,[h]:b}}}},gre=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:l}=e,{apply:c=()=>{},...u}=ol(t,e),d=await ay(e,u),h=ll(s),f=Lm(s),m=Ji(s)==="y",{width:b,height:g}=i.floating;let x,w;h==="top"||h==="bottom"?(x=h,w=f===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(w=h,x=f==="end"?"top":"bottom");const y=g-d.top-d.bottom,A=b-d.left-d.right,T=Vc(g-d[x],y),v=Vc(b-d[w],A),S=!e.middlewareData.shift;let j=T,p=v;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(p=A),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(j=y),S&&!f){const P=ha(d.left,0),C=ha(d.right,0),I=ha(d.top,0),O=ha(d.bottom,0);m?p=b-2*(P!==0||C!==0?P+C:ha(d.left,d.right)):j=g-2*(I!==0||O!==0?I+O:ha(d.top,d.bottom))}await c({...e,availableWidth:p,availableHeight:j});const E=await o.getDimensions(l.floating);return b!==E.width||g!==E.height?{reset:{rects:!0}}:{}}}};function P_(){return typeof window<"u"}function $m(t){return RU(t)?(t.nodeName||"").toLowerCase():"#document"}function wa(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Eo(t){var e;return(e=(RU(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function RU(t){return P_()?t instanceof Node||t instanceof wa(t).Node:!1}function Ri(t){return P_()?t instanceof Element||t instanceof wa(t).Element:!1}function xo(t){return P_()?t instanceof HTMLElement||t instanceof wa(t).HTMLElement:!1}function sM(t){return!P_()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof wa(t).ShadowRoot}const yre=new Set(["inline","contents"]);function jv(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Mi(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!yre.has(s)}const vre=new Set(["table","td","th"]);function xre(t){return vre.has($m(t))}const bre=[":popover-open",":modal"];function I_(t){return bre.some(e=>{try{return t.matches(e)}catch{return!1}})}const wre=["transform","translate","scale","rotate","perspective"],_re=["transform","translate","scale","rotate","perspective","filter"],jre=["paint","layout","strict","content"];function jP(t){const e=NP(),n=Ri(t)?Mi(t):t;return wre.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||_re.some(r=>(n.willChange||"").includes(r))||jre.some(r=>(n.contain||"").includes(r))}function Nre(t){let e=Bc(t);for(;xo(e)&&!Bf(e);){if(jP(e))return e;if(I_(e))return null;e=Bc(e)}return null}function NP(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Sre=new Set(["html","body","#document"]);function Bf(t){return Sre.has($m(t))}function Mi(t){return wa(t).getComputedStyle(t)}function k_(t){return Ri(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Bc(t){if($m(t)==="html")return t;const e=t.assignedSlot||t.parentNode||sM(t)&&t.host||Eo(t);return sM(e)?e.host:e}function MU(t){const e=Bc(t);return Bf(e)?t.ownerDocument?t.ownerDocument.body:t.body:xo(e)&&jv(e)?e:MU(e)}function iy(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=MU(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=wa(s);if(i){const l=RE(o);return e.concat(o,o.visualViewport||[],jv(s)?s:[],l&&n?iy(l):[])}return e.concat(s,iy(s,[],n))}function RE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function DU(t){const e=Mi(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=xo(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=m0(n)!==i||m0(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function SP(t){return Ri(t)?t:t.contextElement}function nf(t){const e=SP(t);if(!xo(e))return io(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=DU(e);let o=(i?m0(n.width):n.width)/r,l=(i?m0(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Ere=io(0);function LU(t){const e=wa(t);return!NP()||!e.visualViewport?Ere:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Are(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==wa(t)?!1:e}function _d(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=SP(t);let o=io(1);e&&(r?Ri(r)&&(o=nf(r)):o=nf(t));const l=Are(i,n,r)?LU(i):io(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=wa(i),m=r&&Ri(r)?wa(r):r;let b=f,g=RE(b);for(;g&&r&&m!==b;){const x=nf(g),w=g.getBoundingClientRect(),y=Mi(g),A=w.left+(g.clientLeft+parseFloat(y.paddingLeft))*x.x,T=w.top+(g.clientTop+parseFloat(y.paddingTop))*x.y;c*=x.x,u*=x.y,d*=x.x,h*=x.y,c+=A,u+=T,b=wa(g),g=RE(b)}}return g0({width:d,height:h,x:c,y:u})}function EP(t,e){const n=k_(t).scrollLeft;return e?e.left+n:_d(Eo(t)).left+n}function $U(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:EP(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function Tre(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Eo(r),l=e?I_(e.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=io(1);const d=io(0),h=xo(r);if((h||!h&&!i)&&(($m(r)!=="body"||jv(o))&&(c=k_(r)),xo(r))){const m=_d(r);u=nf(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const f=o&&!h&&!i?$U(o,c,!0):io(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:n.y*u.y-c.scrollTop*u.y+d.y+f.y}}function Cre(t){return Array.from(t.getClientRects())}function Pre(t){const e=Eo(t),n=k_(t),r=t.ownerDocument.body,s=ha(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=ha(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+EP(t);const l=-n.scrollTop;return Mi(r).direction==="rtl"&&(o+=ha(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:l}}function Ire(t,e){const n=wa(t),r=Eo(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const u=NP();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}const kre=new Set(["absolute","fixed"]);function Ore(t,e){const n=_d(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=xo(t)?nf(t):io(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:l,x:c,y:u}}function aM(t,e,n){let r;if(e==="viewport")r=Ire(t,n);else if(e==="document")r=Pre(Eo(t));else if(Ri(e))r=Ore(e,n);else{const s=LU(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return g0(r)}function FU(t,e){const n=Bc(t);return n===e||!Ri(n)||Bf(n)?!1:Mi(n).position==="fixed"||FU(n,e)}function Rre(t,e){const n=e.get(t);if(n)return n;let r=iy(t,[],!1).filter(l=>Ri(l)&&$m(l)!=="body"),s=null;const i=Mi(t).position==="fixed";let o=i?Bc(t):t;for(;Ri(o)&&!Bf(o);){const l=Mi(o),c=jP(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&kre.has(s.position)||jv(o)&&!c&&FU(t,o))?r=r.filter(d=>d!==o):s=l,o=Bc(o)}return e.set(t,r),r}function Mre(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?I_(e)?[]:Rre(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,d)=>{const h=aM(e,d,s);return u.top=ha(h.top,u.top),u.right=Vc(h.right,u.right),u.bottom=Vc(h.bottom,u.bottom),u.left=ha(h.left,u.left),u},aM(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Dre(t){const{width:e,height:n}=DU(t);return{width:e,height:n}}function Lre(t,e,n){const r=xo(e),s=Eo(e),i=n==="fixed",o=_d(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=io(0);function u(){c.x=EP(s)}if(r||!r&&!i)if(($m(e)!=="body"||jv(s))&&(l=k_(e)),r){const m=_d(e,!0,i,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else s&&u();i&&!r&&s&&u();const d=s&&!r&&!i?$U(s,l):io(0),h=o.left+l.scrollLeft-c.x-d.x,f=o.top+l.scrollTop-c.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function w1(t){return Mi(t).position==="static"}function iM(t,e){if(!xo(t)||Mi(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Eo(t)===n&&(n=n.ownerDocument.body),n}function VU(t,e){const n=wa(t);if(I_(t))return n;if(!xo(t)){let s=Bc(t);for(;s&&!Bf(s);){if(Ri(s)&&!w1(s))return s;s=Bc(s)}return n}let r=iM(t,e);for(;r&&xre(r)&&w1(r);)r=iM(r,e);return r&&Bf(r)&&w1(r)&&!jP(r)?n:r||Nre(t)||n}const $re=async function(t){const e=this.getOffsetParent||VU,n=this.getDimensions,r=await n(t.floating);return{reference:Lre(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Fre(t){return Mi(t).direction==="rtl"}const Vre={convertOffsetParentRelativeRectToViewportRelativeRect:Tre,getDocumentElement:Eo,getClippingRect:Mre,getOffsetParent:VU,getElementRects:$re,getClientRects:Cre,getDimensions:Dre,getScale:nf,isElement:Ri,isRTL:Fre};function BU(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Bre(t,e){let n=null,r;const s=Eo(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:d,top:h,width:f,height:m}=u;if(l||e(),!f||!m)return;const b=Dx(h),g=Dx(s.clientWidth-(d+f)),x=Dx(s.clientHeight-(h+m)),w=Dx(d),A={rootMargin:-b+"px "+-g+"px "+-x+"px "+-w+"px",threshold:ha(0,Vc(1,c))||1};let T=!0;function v(S){const j=S[0].intersectionRatio;if(j!==c){if(!T)return o();j?o(!1,j):r=setTimeout(()=>{o(!1,1e-7)},1e3)}j===1&&!BU(u,t.getBoundingClientRect())&&o(),T=!1}try{n=new IntersectionObserver(v,{...A,root:s.ownerDocument})}catch{n=new IntersectionObserver(v,A)}n.observe(t)}return o(!0),i}function Ure(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=SP(t),d=s||i?[...u?iy(u):[],...iy(e)]:[];d.forEach(w=>{s&&w.addEventListener("scroll",n,{passive:!0}),i&&w.addEventListener("resize",n)});const h=u&&l?Bre(u,n):null;let f=-1,m=null;o&&(m=new ResizeObserver(w=>{let[y]=w;y&&y.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var A;(A=m)==null||A.observe(e)})),n()}),u&&!c&&m.observe(u),m.observe(e));let b,g=c?_d(t):null;c&&x();function x(){const w=_d(t);g&&!BU(g,w)&&n(),g=w,b=requestAnimationFrame(x)}return n(),()=>{var w;d.forEach(y=>{s&&y.removeEventListener("scroll",n),i&&y.removeEventListener("resize",n)}),h==null||h(),(w=m)==null||w.disconnect(),m=null,c&&cancelAnimationFrame(b)}}const zre=fre,qre=mre,Wre=ure,Hre=gre,Kre=dre,oM=cre,Gre=pre,Yre=(t,e,n)=>{const r=new Map,s={platform:Vre,...n},i={...s.platform,_c:r};return lre(t,e,{...s,platform:i})};var Qre=typeof document<"u",Xre=function(){},Sb=Qre?N.useLayoutEffect:Xre;function y0(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!y0(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!y0(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function UU(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function lM(t,e){const n=UU(t);return Math.round(e*n)/n}function _1(t){const e=N.useRef(t);return Sb(()=>{e.current=t}),e}function Zre(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,h]=N.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,m]=N.useState(r);y0(f,r)||m(r);const[b,g]=N.useState(null),[x,w]=N.useState(null),y=N.useCallback(F=>{F!==S.current&&(S.current=F,g(F))},[]),A=N.useCallback(F=>{F!==j.current&&(j.current=F,w(F))},[]),T=i||b,v=o||x,S=N.useRef(null),j=N.useRef(null),p=N.useRef(d),E=c!=null,P=_1(c),C=_1(s),I=_1(u),O=N.useCallback(()=>{if(!S.current||!j.current)return;const F={placement:e,strategy:n,middleware:f};C.current&&(F.platform=C.current),Yre(S.current,j.current,F).then(L=>{const W={...L,isPositioned:I.current!==!1};$.current&&!y0(p.current,W)&&(p.current=W,Kd.flushSync(()=>{h(W)}))})},[f,e,n,C,I]);Sb(()=>{u===!1&&p.current.isPositioned&&(p.current.isPositioned=!1,h(F=>({...F,isPositioned:!1})))},[u]);const $=N.useRef(!1);Sb(()=>($.current=!0,()=>{$.current=!1}),[]),Sb(()=>{if(T&&(S.current=T),v&&(j.current=v),T&&v){if(P.current)return P.current(T,v,O);O()}},[T,v,O,P,E]);const z=N.useMemo(()=>({reference:S,floating:j,setReference:y,setFloating:A}),[y,A]),H=N.useMemo(()=>({reference:T,floating:v}),[T,v]),M=N.useMemo(()=>{const F={position:n,left:0,top:0};if(!H.floating)return F;const L=lM(H.floating,d.x),W=lM(H.floating,d.y);return l?{...F,transform:"translate("+L+"px, "+W+"px)",...UU(H.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:L,top:W}},[n,l,H.floating,d.x,d.y]);return N.useMemo(()=>({...d,update:O,refs:z,elements:H,floatingStyles:M}),[d,O,z,H,M])}const Jre=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?oM({element:r.current,padding:s}).fn(n):{}:r?oM({element:r,padding:s}).fn(n):{}}}},ese=(t,e)=>({...zre(t),options:[t,e]}),tse=(t,e)=>({...qre(t),options:[t,e]}),nse=(t,e)=>({...Gre(t),options:[t,e]}),rse=(t,e)=>({...Wre(t),options:[t,e]}),sse=(t,e)=>({...Hre(t),options:[t,e]}),ase=(t,e)=>({...Kre(t),options:[t,e]}),ise=(t,e)=>({...Jre(t),options:[t,e]});var ose="Arrow",zU=N.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return a.jsx(Je.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});zU.displayName=ose;var lse=zU;function AP(t){const[e,n]=N.useState(void 0);return cr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var TP="Popper",[qU,Fm]=rs(TP),[cse,WU]=qU(TP),HU=t=>{const{__scopePopper:e,children:n}=t,[r,s]=N.useState(null);return a.jsx(cse,{scope:e,anchor:r,onAnchorChange:s,children:n})};HU.displayName=TP;var KU="PopperAnchor",GU=N.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=WU(KU,n),o=N.useRef(null),l=Mt(e,o);return N.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:a.jsx(Je.div,{...s,ref:l})});GU.displayName=KU;var CP="PopperContent",[use,dse]=qU(CP),YU=N.forwardRef((t,e)=>{var je,ht,we,Me,Fe,ue;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:b,...g}=t,x=WU(CP,n),[w,y]=N.useState(null),A=Mt(e,Tt=>y(Tt)),[T,v]=N.useState(null),S=AP(T),j=(S==null?void 0:S.width)??0,p=(S==null?void 0:S.height)??0,E=r+(i!=="center"?"-"+i:""),P=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},C=Array.isArray(u)?u:[u],I=C.length>0,O={padding:P,boundary:C.filter(fse),altBoundary:I},{refs:$,floatingStyles:z,placement:H,isPositioned:M,middlewareData:F}=Zre({strategy:"fixed",placement:E,whileElementsMounted:(...Tt)=>Ure(...Tt,{animationFrame:m==="always"}),elements:{reference:x.anchor},middleware:[ese({mainAxis:s+p,alignmentAxis:o}),c&&tse({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?nse():void 0,...O}),c&&rse({...O}),sse({...O,apply:({elements:Tt,rects:gt,availableWidth:an,availableHeight:Zt})=>{const{width:wn,height:Lr}=gt.reference,nn=Tt.floating.style;nn.setProperty("--radix-popper-available-width",`${an}px`),nn.setProperty("--radix-popper-available-height",`${Zt}px`),nn.setProperty("--radix-popper-anchor-width",`${wn}px`),nn.setProperty("--radix-popper-anchor-height",`${Lr}px`)}}),T&&ise({element:T,padding:l}),mse({arrowWidth:j,arrowHeight:p}),f&&ase({strategy:"referenceHidden",...O})]}),[L,W]=ZU(H),ie=ir(b);cr(()=>{M&&(ie==null||ie())},[M,ie]);const oe=(je=F.arrow)==null?void 0:je.x,me=(ht=F.arrow)==null?void 0:ht.y,Ie=((we=F.arrow)==null?void 0:we.centerOffset)!==0,[lt,ut]=N.useState();return cr(()=>{w&&ut(window.getComputedStyle(w).zIndex)},[w]),a.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:M?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:lt,"--radix-popper-transform-origin":[(Me=F.transformOrigin)==null?void 0:Me.x,(Fe=F.transformOrigin)==null?void 0:Fe.y].join(" "),...((ue=F.hide)==null?void 0:ue.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(use,{scope:n,placedSide:L,onArrowChange:v,arrowX:oe,arrowY:me,shouldHideArrow:Ie,children:a.jsx(Je.div,{"data-side":L,"data-align":W,...g,ref:A,style:{...g.style,animation:M?void 0:"none"}})})})});YU.displayName=CP;var QU="PopperArrow",hse={top:"bottom",right:"left",bottom:"top",left:"right"},XU=N.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=dse(QU,r),o=hse[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(lse,{...s,ref:n,style:{...s.style,display:"block"}})})});XU.displayName=QU;function fse(t){return t!==null}var mse=t=>({name:"transformOrigin",options:t,fn(e){var x,w,y;const{placement:n,rects:r,middlewareData:s}=e,o=((x=s.arrow)==null?void 0:x.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,d]=ZU(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((w=s.arrow)==null?void 0:w.x)??0)+l/2,m=(((y=s.arrow)==null?void 0:y.y)??0)+c/2;let b="",g="";return u==="bottom"?(b=o?h:`${f}px`,g=`${-c}px`):u==="top"?(b=o?h:`${f}px`,g=`${r.floating.height+c}px`):u==="right"?(b=`${-c}px`,g=o?h:`${m}px`):u==="left"&&(b=`${r.floating.width+c}px`,g=o?h:`${m}px`),{data:{x:b,y:g}}}});function ZU(t){const[e,n="center"]=t.split("-");return[e,n]}var PP=HU,IP=GU,kP=YU,OP=XU,[O_,Fqe]=rs("Tooltip",[Fm]),R_=Fm(),JU="TooltipProvider",pse=700,ME="tooltip.open",[gse,RP]=O_(JU),e6=t=>{const{__scopeTooltip:e,delayDuration:n=pse,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=N.useRef(!0),l=N.useRef(!1),c=N.useRef(0);return N.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),a.jsx(gse,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:N.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:N.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:N.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};e6.displayName=JU;var oy="Tooltip",[yse,M_]=O_(oy),t6=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=t,c=RP(oy,t.__scopeTooltip),u=R_(e),[d,h]=N.useState(null),f=Ha(),m=N.useRef(0),b=o??c.disableHoverableContent,g=l??c.delayDuration,x=N.useRef(!1),[w,y]=Ii({prop:r,defaultProp:s??!1,onChange:j=>{j?(c.onOpen(),document.dispatchEvent(new CustomEvent(ME))):c.onClose(),i==null||i(j)},caller:oy}),A=N.useMemo(()=>w?x.current?"delayed-open":"instant-open":"closed",[w]),T=N.useCallback(()=>{window.clearTimeout(m.current),m.current=0,x.current=!1,y(!0)},[y]),v=N.useCallback(()=>{window.clearTimeout(m.current),m.current=0,y(!1)},[y]),S=N.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{x.current=!0,y(!0),m.current=0},g)},[g,y]);return N.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),a.jsx(PP,{...u,children:a.jsx(yse,{scope:e,contentId:f,open:w,stateAttribute:A,trigger:d,onTriggerChange:h,onTriggerEnter:N.useCallback(()=>{c.isOpenDelayedRef.current?S():T()},[c.isOpenDelayedRef,S,T]),onTriggerLeave:N.useCallback(()=>{b?v():(window.clearTimeout(m.current),m.current=0)},[v,b]),onOpen:T,onClose:v,disableHoverableContent:b,children:n})})};t6.displayName=oy;var DE="TooltipTrigger",n6=N.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=M_(DE,n),i=RP(DE,n),o=R_(n),l=N.useRef(null),c=Mt(e,l,s.onTriggerChange),u=N.useRef(!1),d=N.useRef(!1),h=N.useCallback(()=>u.current=!1,[]);return N.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),a.jsx(IP,{asChild:!0,...o,children:a.jsx(Je.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:Pe(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Pe(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Pe(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Pe(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:Pe(t.onBlur,s.onClose),onClick:Pe(t.onClick,s.onClose)})})});n6.displayName=DE;var vse="TooltipPortal",[Vqe,xse]=O_(vse,{forceMount:void 0}),Uf="TooltipContent",r6=N.forwardRef((t,e)=>{const n=xse(Uf,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=M_(Uf,t.__scopeTooltip);return a.jsx(ss,{present:r||o.open,children:o.disableHoverableContent?a.jsx(s6,{side:s,...i,ref:e}):a.jsx(bse,{side:s,...i,ref:e})})}),bse=N.forwardRef((t,e)=>{const n=M_(Uf,t.__scopeTooltip),r=RP(Uf,t.__scopeTooltip),s=N.useRef(null),i=Mt(e,s),[o,l]=N.useState(null),{trigger:c,onClose:u}=n,d=s.current,{onPointerInTransitChange:h}=r,f=N.useCallback(()=>{l(null),h(!1)},[h]),m=N.useCallback((b,g)=>{const x=b.currentTarget,w={x:b.clientX,y:b.clientY},y=Sse(w,x.getBoundingClientRect()),A=Ese(w,y),T=Ase(g.getBoundingClientRect()),v=Cse([...A,...T]);l(v),h(!0)},[h]);return N.useEffect(()=>()=>f(),[f]),N.useEffect(()=>{if(c&&d){const b=x=>m(x,d),g=x=>m(x,c);return c.addEventListener("pointerleave",b),d.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",b),d.removeEventListener("pointerleave",g)}}},[c,d,m,f]),N.useEffect(()=>{if(o){const b=g=>{const x=g.target,w={x:g.clientX,y:g.clientY},y=(c==null?void 0:c.contains(x))||(d==null?void 0:d.contains(x)),A=!Tse(w,o);y?f():A&&(f(),u())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,d,o,u,f]),a.jsx(s6,{...t,ref:i})}),[wse,_se]=O_(oy,{isInside:!1}),jse=U5("TooltipContent"),s6=N.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,c=M_(Uf,n),u=R_(n),{onClose:d}=c;return N.useEffect(()=>(document.addEventListener(ME,d),()=>document.removeEventListener(ME,d)),[d]),N.useEffect(()=>{if(c.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),a.jsx(Rm,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:a.jsxs(kP,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(jse,{children:r}),a.jsx(wse,{scope:n,isInside:!0,children:a.jsx(Mee,{id:c.contentId,role:"tooltip",children:s||r})})]})})});r6.displayName=Uf;var a6="TooltipArrow",Nse=N.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=R_(n);return _se(a6,n).isInside?null:a.jsx(OP,{...s,...r,ref:e})});Nse.displayName=a6;function Sse(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Ese(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function Ase(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function Tse(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i],c=e[o],u=l.x,d=l.y,h=c.x,f=c.y;d>r!=f>r&&n<(h-u)*(r-d)/(f-d)+u&&(s=!s)}return s}function Cse(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Pse(e)}function Pse(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var Ise=e6,kse=t6,Ose=n6,i6=r6;const o6=Ise,Rse=kse,Mse=Ose,l6=N.forwardRef(({className:t,sideOffset:e=4,...n},r)=>a.jsx(i6,{ref:r,sideOffset:e,className:pe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));l6.displayName=i6.displayName;var Vm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},jd=typeof window>"u"||"Deno"in globalThis;function Ss(){}function Dse(t,e){return typeof t=="function"?t(e):t}function LE(t){return typeof t=="number"&&t>=0&&t!==1/0}function c6(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Cc(t,e){return typeof t=="function"?t(e):t}function Da(t,e){return typeof t=="function"?t(e):t}function cM(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==MP(o,e.options))return!1}else if(!ly(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function uM(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Nd(e.options.mutationKey)!==Nd(i))return!1}else if(!ly(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function MP(t,e){return((e==null?void 0:e.queryKeyHashFn)||Nd)(t)}function Nd(t){return JSON.stringify(t,(e,n)=>$E(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function ly(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>ly(t[n],e[n])):!1}function u6(t,e){if(t===e)return t;const n=dM(t)&&dM(e);if(n||$E(t)&&$E(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,l=n?[]:{},c=new Set(r);let u=0;for(let d=0;d<o;d++){const h=n?d:i[d];(!n&&c.has(h)||n)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,u++):(l[h]=u6(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&u++)}return s===o&&u===s?t:l}return e}function v0(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function dM(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function $E(t){if(!hM(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!hM(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function hM(t){return Object.prototype.toString.call(t)==="[object Object]"}function Lse(t){return new Promise(e=>{setTimeout(e,t)})}function FE(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?u6(t,e):e}function $se(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function Fse(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var DP=Symbol();function d6(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===DP?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function h6(t,e){return typeof t=="function"?t(...e):!!t}var Gu,sc,wf,yB,Vse=(yB=class extends Vm{constructor(){super();mt(this,Gu);mt(this,sc);mt(this,wf);qe(this,wf,e=>{if(!jd&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Q(this,sc)||this.setEventListener(Q(this,wf))}onUnsubscribe(){var e;this.hasListeners()||((e=Q(this,sc))==null||e.call(this),qe(this,sc,void 0))}setEventListener(e){var n;qe(this,wf,e),(n=Q(this,sc))==null||n.call(this),qe(this,sc,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Q(this,Gu)!==e&&(qe(this,Gu,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Q(this,Gu)=="boolean"?Q(this,Gu):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Gu=new WeakMap,sc=new WeakMap,wf=new WeakMap,yB),LP=new Vse,_f,ac,jf,vB,Bse=(vB=class extends Vm{constructor(){super();mt(this,_f,!0);mt(this,ac);mt(this,jf);qe(this,jf,e=>{if(!jd&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Q(this,ac)||this.setEventListener(Q(this,jf))}onUnsubscribe(){var e;this.hasListeners()||((e=Q(this,ac))==null||e.call(this),qe(this,ac,void 0))}setEventListener(e){var n;qe(this,jf,e),(n=Q(this,ac))==null||n.call(this),qe(this,ac,e(this.setOnline.bind(this)))}setOnline(e){Q(this,_f)!==e&&(qe(this,_f,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Q(this,_f)}},_f=new WeakMap,ac=new WeakMap,jf=new WeakMap,vB),x0=new Bse;function VE(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function Use(t){return Math.min(1e3*2**t,3e4)}function f6(t){return(t??"online")==="online"?x0.isOnline():!0}var m6=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function j1(t){return t instanceof m6}function p6(t){let e=!1,n=0,r=!1,s;const i=VE(),o=g=>{var x;r||(f(new m6(g)),(x=t.abort)==null||x.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>LP.isFocused()&&(t.networkMode==="always"||x0.isOnline())&&t.canRun(),d=()=>f6(t.networkMode)&&t.canRun(),h=g=>{var x;r||(r=!0,(x=t.onSuccess)==null||x.call(t,g),s==null||s(),i.resolve(g))},f=g=>{var x;r||(r=!0,(x=t.onError)==null||x.call(t,g),s==null||s(),i.reject(g))},m=()=>new Promise(g=>{var x;s=w=>{(r||u())&&g(w)},(x=t.onPause)==null||x.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),b=()=>{if(r)return;let g;const x=n===0?t.initialPromise:void 0;try{g=x??t.fn()}catch(w){g=Promise.reject(w)}Promise.resolve(g).then(h).catch(w=>{var S;if(r)return;const y=t.retry??(jd?0:3),A=t.retryDelay??Use,T=typeof A=="function"?A(n,w):A,v=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,w);if(e||!v){f(w);return}n++,(S=t.onFail)==null||S.call(t,n,w),Lse(T).then(()=>u()?void 0:m()).then(()=>{e?f(w):b()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?b():m().then(b),i)}}var zse=t=>setTimeout(t,0);function qse(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=zse;const i=l=>{e?t.push(l):s(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Ir=qse(),Yu,xB,g6=(xB=class{constructor(){mt(this,Yu)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),LE(this.gcTime)&&qe(this,Yu,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(jd?1/0:5*60*1e3))}clearGcTimeout(){Q(this,Yu)&&(clearTimeout(Q(this,Yu)),qe(this,Yu,void 0))}},Yu=new WeakMap,xB),Nf,Qu,Ma,Xu,cs,uv,Zu,pi,Do,bB,Wse=(bB=class extends g6{constructor(n){super();mt(this,pi);mt(this,Nf);mt(this,Qu);mt(this,Ma);mt(this,Xu);mt(this,cs);mt(this,uv);mt(this,Zu);qe(this,Zu,!1),qe(this,uv,n.defaultOptions),this.setOptions(n.options),this.observers=[],qe(this,Xu,n.client),qe(this,Ma,Q(this,Xu).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,qe(this,Nf,Hse(this.options)),this.state=n.state??Q(this,Nf),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=Q(this,cs))==null?void 0:n.promise}setOptions(n){this.options={...Q(this,uv),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Q(this,Ma).remove(this)}setData(n,r){const s=FE(this.state.data,n,this.options);return Bt(this,pi,Do).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Bt(this,pi,Do).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=Q(this,cs))==null?void 0:s.promise;return(i=Q(this,cs))==null||i.cancel(n),r?r.then(Ss).catch(Ss):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Q(this,Nf))}isActive(){return this.observers.some(n=>Da(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===DP||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Cc(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!c6(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=Q(this,cs))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=Q(this,cs))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),Q(this,Ma).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(Q(this,cs)&&(Q(this,Zu)?Q(this,cs).cancel({revert:!0}):Q(this,cs).cancelRetry()),this.scheduleGc()),Q(this,Ma).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Bt(this,pi,Do).call(this,{type:"invalidate"})}fetch(n,r){var d,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Q(this,cs))return Q(this,cs).continueRetry(),Q(this,cs).promise}if(n&&this.setOptions(n),!this.options.queryFn){const m=this.observers.find(b=>b.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(qe(this,Zu,!0),s.signal)})},o=()=>{const m=d6(this.options,r),g=(()=>{const x={client:Q(this,Xu),queryKey:this.queryKey,meta:this.meta};return i(x),x})();return qe(this,Zu,!1),this.options.persister?this.options.persister(m,g,this):m(g)},c=(()=>{const m={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Q(this,Xu),state:this.state,fetchFn:o};return i(m),m})();(d=this.options.behavior)==null||d.onFetch(c,this),qe(this,Qu,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=c.fetchOptions)==null?void 0:h.meta))&&Bt(this,pi,Do).call(this,{type:"fetch",meta:(f=c.fetchOptions)==null?void 0:f.meta});const u=m=>{var b,g,x,w;j1(m)&&m.silent||Bt(this,pi,Do).call(this,{type:"error",error:m}),j1(m)||((g=(b=Q(this,Ma).config).onError)==null||g.call(b,m,this),(w=(x=Q(this,Ma).config).onSettled)==null||w.call(x,this.state.data,m,this)),this.scheduleGc()};return qe(this,cs,p6({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var b,g,x,w;if(m===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(y){u(y);return}(g=(b=Q(this,Ma).config).onSuccess)==null||g.call(b,m,this),(w=(x=Q(this,Ma).config).onSettled)==null||w.call(x,m,this.state.error,this),this.scheduleGc()},onError:u,onFail:(m,b)=>{Bt(this,pi,Do).call(this,{type:"failed",failureCount:m,error:b})},onPause:()=>{Bt(this,pi,Do).call(this,{type:"pause"})},onContinue:()=>{Bt(this,pi,Do).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),Q(this,cs).start()}},Nf=new WeakMap,Qu=new WeakMap,Ma=new WeakMap,Xu=new WeakMap,cs=new WeakMap,uv=new WeakMap,Zu=new WeakMap,pi=new WeakSet,Do=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...y6(s.data,this.options),fetchMeta:n.meta??null};case"success":return qe(this,Qu,void 0),{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return j1(i)&&i.revert&&Q(this,Qu)?{...Q(this,Qu),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Ir.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),Q(this,Ma).notify({query:this,type:"updated",action:n})})},bB);function y6(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:f6(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Hse(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Gi,wB,Kse=(wB=class extends Vm{constructor(e={}){super();mt(this,Gi);this.config=e,qe(this,Gi,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??MP(s,n);let o=this.get(i);return o||(o=new Wse({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){Q(this,Gi).has(e.queryHash)||(Q(this,Gi).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Q(this,Gi).get(e.queryHash);n&&(e.destroy(),n===e&&Q(this,Gi).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ir.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Q(this,Gi).get(e)}getAll(){return[...Q(this,Gi).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>cM(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>cM(e,r)):n}notify(e){Ir.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Ir.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ir.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Gi=new WeakMap,wB),Yi,_s,Ju,Qi,Ul,_B,Gse=(_B=class extends g6{constructor(n){super();mt(this,Qi);mt(this,Yi);mt(this,_s);mt(this,Ju);this.mutationId=n.mutationId,qe(this,_s,n.mutationCache),qe(this,Yi,[]),this.state=n.state||v6(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){Q(this,Yi).includes(n)||(Q(this,Yi).push(n),this.clearGcTimeout(),Q(this,_s).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){qe(this,Yi,Q(this,Yi).filter(r=>r!==n)),this.scheduleGc(),Q(this,_s).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){Q(this,Yi).length||(this.state.status==="pending"?this.scheduleGc():Q(this,_s).remove(this))}continue(){var n;return((n=Q(this,Ju))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var o,l,c,u,d,h,f,m,b,g,x,w,y,A,T,v,S,j,p,E;const r=()=>{Bt(this,Qi,Ul).call(this,{type:"continue"})};qe(this,Ju,p6({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(P,C)=>{Bt(this,Qi,Ul).call(this,{type:"failed",failureCount:P,error:C})},onPause:()=>{Bt(this,Qi,Ul).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Q(this,_s).canRun(this)}));const s=this.state.status==="pending",i=!Q(this,Ju).canStart();try{if(s)r();else{Bt(this,Qi,Ul).call(this,{type:"pending",variables:n,isPaused:i}),await((l=(o=Q(this,_s).config).onMutate)==null?void 0:l.call(o,n,this));const C=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,n));C!==this.state.context&&Bt(this,Qi,Ul).call(this,{type:"pending",context:C,variables:n,isPaused:i})}const P=await Q(this,Ju).start();return await((h=(d=Q(this,_s).config).onSuccess)==null?void 0:h.call(d,P,n,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,P,n,this.state.context)),await((g=(b=Q(this,_s).config).onSettled)==null?void 0:g.call(b,P,null,this.state.variables,this.state.context,this)),await((w=(x=this.options).onSettled)==null?void 0:w.call(x,P,null,n,this.state.context)),Bt(this,Qi,Ul).call(this,{type:"success",data:P}),P}catch(P){try{throw await((A=(y=Q(this,_s).config).onError)==null?void 0:A.call(y,P,n,this.state.context,this)),await((v=(T=this.options).onError)==null?void 0:v.call(T,P,n,this.state.context)),await((j=(S=Q(this,_s).config).onSettled)==null?void 0:j.call(S,void 0,P,this.state.variables,this.state.context,this)),await((E=(p=this.options).onSettled)==null?void 0:E.call(p,void 0,P,n,this.state.context)),P}finally{Bt(this,Qi,Ul).call(this,{type:"error",error:P})}}finally{Q(this,_s).runNext(this)}}},Yi=new WeakMap,_s=new WeakMap,Ju=new WeakMap,Qi=new WeakSet,Ul=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Ir.batch(()=>{Q(this,Yi).forEach(s=>{s.onMutationUpdate(n)}),Q(this,_s).notify({mutation:this,type:"updated",action:n})})},_B);function v6(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Vo,gi,dv,jB,Yse=(jB=class extends Vm{constructor(e={}){super();mt(this,Vo);mt(this,gi);mt(this,dv);this.config=e,qe(this,Vo,new Set),qe(this,gi,new Map),qe(this,dv,0)}build(e,n,r){const s=new Gse({mutationCache:this,mutationId:++mx(this,dv)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){Q(this,Vo).add(e);const n=Lx(e);if(typeof n=="string"){const r=Q(this,gi).get(n);r?r.push(e):Q(this,gi).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Q(this,Vo).delete(e)){const n=Lx(e);if(typeof n=="string"){const r=Q(this,gi).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&Q(this,gi).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Lx(e);if(typeof n=="string"){const r=Q(this,gi).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Lx(e);if(typeof n=="string"){const s=(r=Q(this,gi).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ir.batch(()=>{Q(this,Vo).forEach(e=>{this.notify({type:"removed",mutation:e})}),Q(this,Vo).clear(),Q(this,gi).clear()})}getAll(){return Array.from(Q(this,Vo))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>uM(n,r))}findAll(e={}){return this.getAll().filter(n=>uM(e,n))}notify(e){Ir.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Ir.batch(()=>Promise.all(e.map(n=>n.continue().catch(Ss))))}},Vo=new WeakMap,gi=new WeakMap,dv=new WeakMap,jB);function Lx(t){var e;return(e=t.options.scope)==null?void 0:e.id}function fM(t){return{onFetch:(e,n)=>{var d,h,f,m,b;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((m=e.state.data)==null?void 0:m.pages)||[],o=((b=e.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const x=A=>{Object.defineProperty(A,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},w=d6(e.options,e.fetchOptions),y=async(A,T,v)=>{if(g)return Promise.reject();if(T==null&&A.pages.length)return Promise.resolve(A);const j=(()=>{const C={client:e.client,queryKey:e.queryKey,pageParam:T,direction:v?"backward":"forward",meta:e.options.meta};return x(C),C})(),p=await w(j),{maxPages:E}=e.options,P=v?Fse:$se;return{pages:P(A.pages,p,E),pageParams:P(A.pageParams,T,E)}};if(s&&i.length){const A=s==="backward",T=A?Qse:mM,v={pages:i,pageParams:o},S=T(r,v);l=await y(v,S,A)}else{const A=t??i.length;do{const T=c===0?o[0]??r.initialPageParam:mM(r,l);if(c>0&&T==null)break;l=await y(l,T),c++}while(c<A)}return l};e.options.persister?e.fetchFn=()=>{var g,x;return(x=(g=e.options).persister)==null?void 0:x.call(g,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function mM(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Qse(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var tr,ic,oc,Sf,Ef,lc,Af,Tf,NB,Xse=(NB=class{constructor(t={}){mt(this,tr);mt(this,ic);mt(this,oc);mt(this,Sf);mt(this,Ef);mt(this,lc);mt(this,Af);mt(this,Tf);qe(this,tr,t.queryCache||new Kse),qe(this,ic,t.mutationCache||new Yse),qe(this,oc,t.defaultOptions||{}),qe(this,Sf,new Map),qe(this,Ef,new Map),qe(this,lc,0)}mount(){mx(this,lc)._++,Q(this,lc)===1&&(qe(this,Af,LP.subscribe(async t=>{t&&(await this.resumePausedMutations(),Q(this,tr).onFocus())})),qe(this,Tf,x0.subscribe(async t=>{t&&(await this.resumePausedMutations(),Q(this,tr).onOnline())})))}unmount(){var t,e;mx(this,lc)._--,Q(this,lc)===0&&((t=Q(this,Af))==null||t.call(this),qe(this,Af,void 0),(e=Q(this,Tf))==null||e.call(this),qe(this,Tf,void 0))}isFetching(t){return Q(this,tr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Q(this,ic).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Q(this,tr).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=Q(this,tr).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Cc(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return Q(this,tr).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=Q(this,tr).get(r.queryHash),i=s==null?void 0:s.state.data,o=Dse(e,i);if(o!==void 0)return Q(this,tr).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Ir.batch(()=>Q(this,tr).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Q(this,tr).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Q(this,tr);Ir.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Q(this,tr);return Ir.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Ir.batch(()=>Q(this,tr).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Ss).catch(Ss)}invalidateQueries(t,e={}){return Ir.batch(()=>(Q(this,tr).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Ir.batch(()=>Q(this,tr).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Ss)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Ss)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Q(this,tr).build(this,e);return n.isStaleByTime(Cc(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ss).catch(Ss)}fetchInfiniteQuery(t){return t.behavior=fM(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ss).catch(Ss)}ensureInfiniteQueryData(t){return t.behavior=fM(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return x0.isOnline()?Q(this,ic).resumePausedMutations():Promise.resolve()}getQueryCache(){return Q(this,tr)}getMutationCache(){return Q(this,ic)}getDefaultOptions(){return Q(this,oc)}setDefaultOptions(t){qe(this,oc,t)}setQueryDefaults(t,e){Q(this,Sf).set(Nd(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Q(this,Sf).values()],n={};return e.forEach(r=>{ly(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){Q(this,Ef).set(Nd(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Q(this,Ef).values()],n={};return e.forEach(r=>{ly(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Q(this,oc).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=MP(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===DP&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Q(this,oc).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Q(this,tr).clear(),Q(this,ic).clear()}},tr=new WeakMap,ic=new WeakMap,oc=new WeakMap,Sf=new WeakMap,Ef=new WeakMap,lc=new WeakMap,Af=new WeakMap,Tf=new WeakMap,NB),Fs,Xt,hv,js,ed,Cf,cc,uc,fv,Pf,If,td,nd,dc,kf,fn,rg,BE,UE,zE,qE,WE,HE,KE,x6,SB,Zse=(SB=class extends Vm{constructor(e,n){super();mt(this,fn);mt(this,Fs);mt(this,Xt);mt(this,hv);mt(this,js);mt(this,ed);mt(this,Cf);mt(this,cc);mt(this,uc);mt(this,fv);mt(this,Pf);mt(this,If);mt(this,td);mt(this,nd);mt(this,dc);mt(this,kf,new Set);this.options=n,qe(this,Fs,e),qe(this,uc,null),qe(this,cc,VE()),this.options.experimental_prefetchInRender||Q(this,cc).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Q(this,Xt).addObserver(this),pM(Q(this,Xt),this.options)?Bt(this,fn,rg).call(this):this.updateResult(),Bt(this,fn,qE).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return GE(Q(this,Xt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return GE(Q(this,Xt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Bt(this,fn,WE).call(this),Bt(this,fn,HE).call(this),Q(this,Xt).removeObserver(this)}setOptions(e){const n=this.options,r=Q(this,Xt);if(this.options=Q(this,Fs).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Da(this.options.enabled,Q(this,Xt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Bt(this,fn,KE).call(this),Q(this,Xt).setOptions(this.options),n._defaulted&&!v0(this.options,n)&&Q(this,Fs).getQueryCache().notify({type:"observerOptionsUpdated",query:Q(this,Xt),observer:this});const s=this.hasListeners();s&&gM(Q(this,Xt),r,this.options,n)&&Bt(this,fn,rg).call(this),this.updateResult(),s&&(Q(this,Xt)!==r||Da(this.options.enabled,Q(this,Xt))!==Da(n.enabled,Q(this,Xt))||Cc(this.options.staleTime,Q(this,Xt))!==Cc(n.staleTime,Q(this,Xt)))&&Bt(this,fn,BE).call(this);const i=Bt(this,fn,UE).call(this);s&&(Q(this,Xt)!==r||Da(this.options.enabled,Q(this,Xt))!==Da(n.enabled,Q(this,Xt))||i!==Q(this,dc))&&Bt(this,fn,zE).call(this,i)}getOptimisticResult(e){const n=Q(this,Fs).getQueryCache().build(Q(this,Fs),e),r=this.createResult(n,e);return eae(this,r)&&(qe(this,js,r),qe(this,Cf,this.options),qe(this,ed,Q(this,Xt).state)),r}getCurrentResult(){return Q(this,js)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){Q(this,kf).add(e)}getCurrentQuery(){return Q(this,Xt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=Q(this,Fs).defaultQueryOptions(e),r=Q(this,Fs).getQueryCache().build(Q(this,Fs),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Bt(this,fn,rg).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),Q(this,js)))}createResult(e,n){var E;const r=Q(this,Xt),s=this.options,i=Q(this,js),o=Q(this,ed),l=Q(this,Cf),u=e!==r?e.state:Q(this,hv),{state:d}=e;let h={...d},f=!1,m;if(n._optimisticResults){const P=this.hasListeners(),C=!P&&pM(e,n),I=P&&gM(e,r,n,s);(C||I)&&(h={...h,...y6(d.data,e.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:b,errorUpdatedAt:g,status:x}=h;m=h.data;let w=!1;if(n.placeholderData!==void 0&&m===void 0&&x==="pending"){let P;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(P=i.data,w=!0):P=typeof n.placeholderData=="function"?n.placeholderData((E=Q(this,If))==null?void 0:E.state.data,Q(this,If)):n.placeholderData,P!==void 0&&(x="success",m=FE(i==null?void 0:i.data,P,n),f=!0)}if(n.select&&m!==void 0&&!w)if(i&&m===(o==null?void 0:o.data)&&n.select===Q(this,fv))m=Q(this,Pf);else try{qe(this,fv,n.select),m=n.select(m),m=FE(i==null?void 0:i.data,m,n),qe(this,Pf,m),qe(this,uc,null)}catch(P){qe(this,uc,P)}Q(this,uc)&&(b=Q(this,uc),m=Q(this,Pf),g=Date.now(),x="error");const y=h.fetchStatus==="fetching",A=x==="pending",T=x==="error",v=A&&y,S=m!==void 0,p={status:x,fetchStatus:h.fetchStatus,isPending:A,isSuccess:x==="success",isError:T,isInitialLoading:v,isLoading:v,data:m,dataUpdatedAt:h.dataUpdatedAt,error:b,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:y,isRefetching:y&&!A,isLoadingError:T&&!S,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:T&&S,isStale:$P(e,n),refetch:this.refetch,promise:Q(this,cc),isEnabled:Da(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const P=O=>{p.status==="error"?O.reject(p.error):p.data!==void 0&&O.resolve(p.data)},C=()=>{const O=qe(this,cc,p.promise=VE());P(O)},I=Q(this,cc);switch(I.status){case"pending":e.queryHash===r.queryHash&&P(I);break;case"fulfilled":(p.status==="error"||p.data!==I.value)&&C();break;case"rejected":(p.status!=="error"||p.error!==I.reason)&&C();break}}return p}updateResult(){const e=Q(this,js),n=this.createResult(Q(this,Xt),this.options);if(qe(this,ed,Q(this,Xt).state),qe(this,Cf,this.options),Q(this,ed).data!==void 0&&qe(this,If,Q(this,Xt)),v0(n,e))return;qe(this,js,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!Q(this,kf).size)return!0;const o=new Set(i??Q(this,kf));return this.options.throwOnError&&o.add("error"),Object.keys(Q(this,js)).some(l=>{const c=l;return Q(this,js)[c]!==e[c]&&o.has(c)})};Bt(this,fn,x6).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Bt(this,fn,qE).call(this)}},Fs=new WeakMap,Xt=new WeakMap,hv=new WeakMap,js=new WeakMap,ed=new WeakMap,Cf=new WeakMap,cc=new WeakMap,uc=new WeakMap,fv=new WeakMap,Pf=new WeakMap,If=new WeakMap,td=new WeakMap,nd=new WeakMap,dc=new WeakMap,kf=new WeakMap,fn=new WeakSet,rg=function(e){Bt(this,fn,KE).call(this);let n=Q(this,Xt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Ss)),n},BE=function(){Bt(this,fn,WE).call(this);const e=Cc(this.options.staleTime,Q(this,Xt));if(jd||Q(this,js).isStale||!LE(e))return;const r=c6(Q(this,js).dataUpdatedAt,e)+1;qe(this,td,setTimeout(()=>{Q(this,js).isStale||this.updateResult()},r))},UE=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Q(this,Xt)):this.options.refetchInterval)??!1},zE=function(e){Bt(this,fn,HE).call(this),qe(this,dc,e),!(jd||Da(this.options.enabled,Q(this,Xt))===!1||!LE(Q(this,dc))||Q(this,dc)===0)&&qe(this,nd,setInterval(()=>{(this.options.refetchIntervalInBackground||LP.isFocused())&&Bt(this,fn,rg).call(this)},Q(this,dc)))},qE=function(){Bt(this,fn,BE).call(this),Bt(this,fn,zE).call(this,Bt(this,fn,UE).call(this))},WE=function(){Q(this,td)&&(clearTimeout(Q(this,td)),qe(this,td,void 0))},HE=function(){Q(this,nd)&&(clearInterval(Q(this,nd)),qe(this,nd,void 0))},KE=function(){const e=Q(this,Fs).getQueryCache().build(Q(this,Fs),this.options);if(e===Q(this,Xt))return;const n=Q(this,Xt);qe(this,Xt,e),qe(this,hv,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},x6=function(e){Ir.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(Q(this,js))}),Q(this,Fs).getQueryCache().notify({query:Q(this,Xt),type:"observerResultsUpdated"})})},SB);function Jse(t,e){return Da(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function pM(t,e){return Jse(t,e)||t.state.data!==void 0&&GE(t,e,e.refetchOnMount)}function GE(t,e,n){if(Da(e.enabled,t)!==!1&&Cc(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&$P(t,e)}return!1}function gM(t,e,n,r){return(t!==e||Da(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&$P(t,n)}function $P(t,e){return Da(e.enabled,t)!==!1&&t.isStaleByTime(Cc(e.staleTime,t))}function eae(t,e){return!v0(t.getCurrentResult(),e)}var hc,fc,Vs,Bo,nl,Eb,YE,EB,tae=(EB=class extends Vm{constructor(n,r){super();mt(this,nl);mt(this,hc);mt(this,fc);mt(this,Vs);mt(this,Bo);qe(this,hc,n),this.setOptions(r),this.bindMethods(),Bt(this,nl,Eb).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=Q(this,hc).defaultMutationOptions(n),v0(this.options,r)||Q(this,hc).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Q(this,Vs),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Nd(r.mutationKey)!==Nd(this.options.mutationKey)?this.reset():((s=Q(this,Vs))==null?void 0:s.state.status)==="pending"&&Q(this,Vs).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=Q(this,Vs))==null||n.removeObserver(this)}onMutationUpdate(n){Bt(this,nl,Eb).call(this),Bt(this,nl,YE).call(this,n)}getCurrentResult(){return Q(this,fc)}reset(){var n;(n=Q(this,Vs))==null||n.removeObserver(this),qe(this,Vs,void 0),Bt(this,nl,Eb).call(this),Bt(this,nl,YE).call(this)}mutate(n,r){var s;return qe(this,Bo,r),(s=Q(this,Vs))==null||s.removeObserver(this),qe(this,Vs,Q(this,hc).getMutationCache().build(Q(this,hc),this.options)),Q(this,Vs).addObserver(this),Q(this,Vs).execute(n)}},hc=new WeakMap,fc=new WeakMap,Vs=new WeakMap,Bo=new WeakMap,nl=new WeakSet,Eb=function(){var r;const n=((r=Q(this,Vs))==null?void 0:r.state)??v6();qe(this,fc,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},YE=function(n){Ir.batch(()=>{var r,s,i,o,l,c,u,d;if(Q(this,Bo)&&this.hasListeners()){const h=Q(this,fc).variables,f=Q(this,fc).context;(n==null?void 0:n.type)==="success"?((s=(r=Q(this,Bo)).onSuccess)==null||s.call(r,n.data,h,f),(o=(i=Q(this,Bo)).onSettled)==null||o.call(i,n.data,null,h,f)):(n==null?void 0:n.type)==="error"&&((c=(l=Q(this,Bo)).onError)==null||c.call(l,n.error,h,f),(d=(u=Q(this,Bo)).onSettled)==null||d.call(u,void 0,n.error,h,f))}this.listeners.forEach(h=>{h(Q(this,fc))})})},EB),b6=N.createContext(void 0),un=t=>{const e=N.useContext(b6);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},nae=({client:t,children:e})=>(N.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),a.jsx(b6.Provider,{value:t,children:e})),w6=N.createContext(!1),rae=()=>N.useContext(w6);w6.Provider;function sae(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var aae=N.createContext(sae()),iae=()=>N.useContext(aae),oae=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},lae=t=>{N.useEffect(()=>{t.clearReset()},[t])},cae=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||h6(n,[t.error,r])),uae=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},dae=(t,e)=>t.isLoading&&t.isFetching&&!e,hae=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,yM=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function fae(t,e,n){var h,f,m,b,g;const r=rae(),s=iae(),i=un(),o=i.defaultQueryOptions(t);(f=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o),o._optimisticResults=r?"isRestoring":"optimistic",uae(o),oae(o,s),lae(s);const l=!i.getQueryCache().get(o.queryHash),[c]=N.useState(()=>new e(i,o)),u=c.getOptimisticResult(o),d=!r&&t.subscribed!==!1;if(N.useSyncExternalStore(N.useCallback(x=>{const w=d?c.subscribe(Ir.batchCalls(x)):Ss;return c.updateResult(),w},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),N.useEffect(()=>{c.setOptions(o)},[o,c]),hae(o,u))throw yM(o,c,s);if(cae({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((b=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||b.call(m,o,u),o.experimental_prefetchInRender&&!jd&&dae(u,r)){const x=l?yM(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;x==null||x.catch(Ss).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function Ne(t,e){return fae(t,Zse)}function it(t,e){const n=un(),[r]=N.useState(()=>new tae(n,t));N.useEffect(()=>{r.setOptions(t)},[r,t]);const s=N.useSyncExternalStore(N.useCallback(o=>r.subscribe(Ir.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=N.useCallback((o,l)=>{r.mutate(o,l).catch(Ss)},[r]);if(s.error&&h6(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cy(){return cy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cy.apply(this,arguments)}var gc;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(gc||(gc={}));const vM="popstate";function mae(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return QE("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:b0(s)}return gae(e,n,null,t)}function gr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function _6(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pae(){return Math.random().toString(36).substr(2,8)}function xM(t,e){return{usr:t.state,key:t.key,idx:e}}function QE(t,e,n,r){return n===void 0&&(n=null),cy({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Bm(e):e,{state:n,key:e&&e.key||r||pae()})}function b0(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Bm(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function gae(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=gc.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(cy({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=gc.Pop;let x=d(),w=x==null?null:x-u;u=x,c&&c({action:l,location:g.location,delta:w})}function f(x,w){l=gc.Push;let y=QE(g.location,x,w);u=d()+1;let A=xM(y,u),T=g.createHref(y);try{o.pushState(A,"",T)}catch(v){if(v instanceof DOMException&&v.name==="DataCloneError")throw v;s.location.assign(T)}i&&c&&c({action:l,location:g.location,delta:1})}function m(x,w){l=gc.Replace;let y=QE(g.location,x,w);u=d();let A=xM(y,u),T=g.createHref(y);o.replaceState(A,"",T),i&&c&&c({action:l,location:g.location,delta:0})}function b(x){let w=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof x=="string"?x:b0(x);return y=y.replace(/ $/,"%20"),gr(w,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,w)}let g={get action(){return l},get location(){return t(s,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(vM,h),c=x,()=>{s.removeEventListener(vM,h),c=null}},createHref(x){return e(s,x)},createURL:b,encodeLocation(x){let w=b(x);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:m,go(x){return o.go(x)}};return g}var bM;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(bM||(bM={}));function yae(t,e,n){return n===void 0&&(n="/"),vae(t,e,n,!1)}function vae(t,e,n,r){let s=typeof e=="string"?Bm(e):e,i=FP(s.pathname||"/",n);if(i==null)return null;let o=j6(t);xae(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=Pae(i);l=Tae(o[c],u,r)}return l}function j6(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(gr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Pc([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(gr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),j6(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:Eae(u,i.index),routesMeta:d})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of N6(i.path))s(i,o,c)}),e}function N6(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=N6(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function xae(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Aae(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const bae=/^:[\w-]+$/,wae=3,_ae=2,jae=1,Nae=10,Sae=-2,wM=t=>t==="*";function Eae(t,e){let n=t.split("/"),r=n.length;return n.some(wM)&&(r+=Sae),e&&(r+=_ae),n.filter(s=>!wM(s)).reduce((s,i)=>s+(bae.test(i)?wae:i===""?jae:Nae),r)}function Aae(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Tae(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=_M({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=_M({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Pc([i,h.pathname]),pathnameBase:Rae(Pc([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Pc([i,h.pathnameBase]))}return o}function _M(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Cae(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let g=l[h]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const b=l[h];return m&&!b?u[f]=void 0:u[f]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function Cae(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),_6(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Pae(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _6(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function FP(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Iae(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Bm(t):t;return{pathname:n?n.startsWith("/")?n:kae(n,e):e,search:Mae(r),hash:Dae(s)}}function kae(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function N1(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Oae(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function VP(t,e){let n=Oae(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function BP(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Bm(t):(s=cy({},t),gr(!s.pathname||!s.pathname.includes("?"),N1("?","pathname","search",s)),gr(!s.pathname||!s.pathname.includes("#"),N1("#","pathname","hash",s)),gr(!s.search||!s.search.includes("#"),N1("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?e[h]:"/"}let c=Iae(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Pc=t=>t.join("/").replace(/\/\/+/g,"/"),Rae=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Mae=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Dae=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Lae(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const S6=["post","put","patch","delete"];new Set(S6);const $ae=["get",...S6];new Set($ae);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uy(){return uy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uy.apply(this,arguments)}const UP=N.createContext(null),Fae=N.createContext(null),ou=N.createContext(null),D_=N.createContext(null),wl=N.createContext({outlet:null,matches:[],isDataRoute:!1}),E6=N.createContext(null);function Vae(t,e){let{relative:n}=e===void 0?{}:e;Um()||gr(!1);let{basename:r,navigator:s}=N.useContext(ou),{hash:i,pathname:o,search:l}=T6(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Pc([r,o])),s.createHref({pathname:c,search:l,hash:i})}function Um(){return N.useContext(D_)!=null}function Ao(){return Um()||gr(!1),N.useContext(D_).location}function A6(t){N.useContext(ou).static||N.useLayoutEffect(t)}function Hn(){let{isDataRoute:t}=N.useContext(wl);return t?Jae():Bae()}function Bae(){Um()||gr(!1);let t=N.useContext(UP),{basename:e,future:n,navigator:r}=N.useContext(ou),{matches:s}=N.useContext(wl),{pathname:i}=Ao(),o=JSON.stringify(VP(s,n.v7_relativeSplatPath)),l=N.useRef(!1);return A6(()=>{l.current=!0}),N.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=BP(u,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Pc([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}function zm(){let{matches:t}=N.useContext(wl),e=t[t.length-1];return e?e.params:{}}function T6(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=N.useContext(ou),{matches:s}=N.useContext(wl),{pathname:i}=Ao(),o=JSON.stringify(VP(s,r.v7_relativeSplatPath));return N.useMemo(()=>BP(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function Uae(t,e){return zae(t,e)}function zae(t,e,n,r){Um()||gr(!1);let{navigator:s}=N.useContext(ou),{matches:i}=N.useContext(wl),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Ao(),d;if(e){var h;let x=typeof e=="string"?Bm(e):e;c==="/"||(h=x.pathname)!=null&&h.startsWith(c)||gr(!1),d=x}else d=u;let f=d.pathname||"/",m=f;if(c!=="/"){let x=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(x.length).join("/")}let b=yae(t,{pathname:m}),g=Gae(b&&b.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:Pc([c,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:Pc([c,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,n,r);return e&&g?N.createElement(D_.Provider,{value:{location:uy({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:gc.Pop}},g):g}function qae(){let t=Zae(),e=Lae(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:s},n):null,null)}const Wae=N.createElement(qae,null);class Hae extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?N.createElement(wl.Provider,{value:this.props.routeContext},N.createElement(E6.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Kae(t){let{routeContext:e,match:n,children:r}=t,s=N.useContext(UP);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(wl.Provider,{value:e},r)}function Gae(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||gr(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:m}=n,b=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||b){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,b=!1,g=null,x=null;n&&(m=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||Wae,c&&(u<0&&f===0?(b=!0,x=null):u===f&&(b=!0,x=h.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,f+1)),y=()=>{let A;return m?A=g:b?A=x:h.route.Component?A=N.createElement(h.route.Component,null):h.route.element?A=h.route.element:A=d,N.createElement(Kae,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:A})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?N.createElement(Hae,{location:n.location,revalidation:n.revalidation,component:g,error:m,children:y(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):y()},null)}var C6=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(C6||{}),w0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(w0||{});function Yae(t){let e=N.useContext(UP);return e||gr(!1),e}function Qae(t){let e=N.useContext(Fae);return e||gr(!1),e}function Xae(t){let e=N.useContext(wl);return e||gr(!1),e}function P6(t){let e=Xae(),n=e.matches[e.matches.length-1];return n.route.id||gr(!1),n.route.id}function Zae(){var t;let e=N.useContext(E6),n=Qae(w0.UseRouteError),r=P6(w0.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Jae(){let{router:t}=Yae(C6.UseNavigateStable),e=P6(w0.UseNavigateStable),n=N.useRef(!1);return A6(()=>{n.current=!0}),N.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,uy({fromRouteId:e},i)))},[t,e])}function eie(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function XE(t){let{to:e,replace:n,state:r,relative:s}=t;Um()||gr(!1);let{future:i,static:o}=N.useContext(ou),{matches:l}=N.useContext(wl),{pathname:c}=Ao(),u=Hn(),d=BP(e,VP(l,i.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return N.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:s}),[u,h,s,n,r]),null}function yt(t){gr(!1)}function tie(t){let{basename:e="/",children:n=null,location:r,navigationType:s=gc.Pop,navigator:i,static:o=!1,future:l}=t;Um()&&gr(!1);let c=e.replace(/^\/*/,"/"),u=N.useMemo(()=>({basename:c,navigator:i,static:o,future:uy({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=Bm(r));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:b="default"}=r,g=N.useMemo(()=>{let x=FP(d,c);return x==null?null:{location:{pathname:x,search:h,hash:f,state:m,key:b},navigationType:s}},[c,d,h,f,m,b,s]);return g==null?null:N.createElement(ou.Provider,{value:u},N.createElement(D_.Provider,{children:n,value:g}))}function nie(t){let{children:e,location:n}=t;return Uae(ZE(e),n)}new Promise(()=>{});function ZE(t,e){e===void 0&&(e=[]);let n=[];return N.Children.forEach(t,(r,s)=>{if(!N.isValidElement(r))return;let i=[...e,s];if(r.type===N.Fragment){n.push.apply(n,ZE(r.props.children,i));return}r.type!==yt&&gr(!1),!r.props.index||!r.props.children||gr(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ZE(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function JE(){return JE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JE.apply(this,arguments)}function rie(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function sie(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function aie(t,e){return t.button===0&&(!e||e==="_self")&&!sie(t)}function eA(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function iie(t,e){let n=eA(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const oie=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],lie="6";try{window.__reactRouterVersion=lie}catch{}const cie="startTransition",jM=_C[cie];function uie(t){let{basename:e,children:n,future:r,window:s}=t,i=N.useRef();i.current==null&&(i.current=mae({window:s,v5Compat:!0}));let o=i.current,[l,c]=N.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=N.useCallback(h=>{u&&jM?jM(()=>c(h)):c(h)},[c,u]);return N.useLayoutEffect(()=>o.listen(d),[o,d]),N.useEffect(()=>eie(r),[r]),N.createElement(tie,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const die=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hie=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fa=N.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=e,f=rie(e,oie),{basename:m}=N.useContext(ou),b,g=!1;if(typeof u=="string"&&hie.test(u)&&(b=u,die))try{let A=new URL(window.location.href),T=u.startsWith("//")?new URL(A.protocol+u):new URL(u),v=FP(T.pathname,m);T.origin===A.origin&&v!=null?u=v+T.search+T.hash:g=!0}catch{}let x=Vae(u,{relative:s}),w=fie(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function y(A){r&&r(A),A.defaultPrevented||w(A)}return N.createElement("a",JE({},f,{href:b||x,onClick:g||i?r:y,ref:n,target:c}))});var NM;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(NM||(NM={}));var SM;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(SM||(SM={}));function fie(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,c=Hn(),u=Ao(),d=T6(t,{relative:o});return N.useCallback(h=>{if(aie(h,n)){h.preventDefault();let f=r!==void 0?r:b0(u)===b0(d);c(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,r,s,n,t,i,o,l])}function I6(t){let e=N.useRef(eA(t)),n=N.useRef(!1),r=Ao(),s=N.useMemo(()=>iie(r.search,n.current?null:e.current),[r.search]),i=Hn(),o=N.useCallback((l,c)=>{const u=eA(typeof l=="function"?l(s):l);n.current=!0,i("?"+u,c)},[i,s]);return[s,o]}const mie=()=>{};var EM={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},pie=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},O6={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,d=i>>2,h=(i&3)<<4|l>>4;let f=(l&15)<<2|u>>6,m=u&63;c||(m=64,o||(f=64)),r.push(n[d],n[h],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(k6(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):pie(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||h==null)throw new gie;const f=i<<2|l>>4;if(r.push(f),u!==64){const m=l<<4&240|u>>2;if(r.push(m),h!==64){const b=u<<6&192|h;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class gie extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yie=function(t){const e=k6(t);return O6.encodeByteArray(e,!0)},_0=function(t){return yie(t).replace(/\./g,"")},R6=function(t){try{return O6.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vie(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xie=()=>vie().__FIREBASE_DEFAULTS__,bie=()=>{if(typeof process>"u"||typeof EM>"u")return;const t=EM.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},wie=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&R6(t[1]);return e&&JSON.parse(e)},L_=()=>{try{return mie()||xie()||bie()||wie()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},M6=t=>{var e,n;return(n=(e=L_())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},zP=t=>{const e=M6(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},D6=()=>{var t;return(t=L_())==null?void 0:t.config},L6=t=>{var e;return(e=L_())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ie{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function To(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[_0(JSON.stringify(n)),_0(JSON.stringify(o)),""].join(".")}const Sg={};function jie(){const t={prod:[],emulator:[]};for(const e of Object.keys(Sg))Sg[e]?t.emulator.push(e):t.prod.push(e);return t}function Nie(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let AM=!1;function F_(t,e){if(typeof window>"u"||typeof document>"u"||!To(window.location.host)||Sg[t]===e||Sg[t]||AM)return;Sg[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=jie().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function l(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{AM=!0,o()},f}function d(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=Nie(r),m=n("text"),b=document.getElementById(m)||document.createElement("span"),g=n("learnmore"),x=document.getElementById(g)||document.createElement("a"),w=n("preprendIcon"),y=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const A=f.element;l(A),d(x,g);const T=u();c(y,w),A.append(y,b,x,T),document.body.appendChild(A)}i?(b.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Sie(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bs())}function Eie(){var e;const t=(e=L_())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Aie(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Tie(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Cie(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Pie(){const t=bs();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Iie(){return!Eie()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kie(){try{return typeof indexedDB=="object"}catch{return!1}}function Oie(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rie="FirebaseError";class $i extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Rie,Object.setPrototypeOf(this,$i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nv.prototype.create)}}class Nv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Mie(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new $i(s,l,r)}}function Mie(t,e){return t.replace(Die,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Die=/\{\$([^}]+)}/g;function Lie(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Sd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(TM(i)&&TM(o)){if(!Sd(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function TM(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function sg(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ag(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function $ie(t,e){const n=new Fie(t,e);return n.subscribe.bind(n)}class Fie{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Vie(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=S1),s.error===void 0&&(s.error=S1),s.complete===void 0&&(s.complete=S1);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Vie(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function S1(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(t){return t&&t._delegate?t._delegate:t}class cl{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bie{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new _ie;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zie(e))try{this.getOrInitializeService({instanceIdentifier:ku})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ku){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ku){return this.instances.has(e)}getOptions(e=ku){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Uie(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ku){return this.component?this.component.multipleInstances?e:ku:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Uie(t){return t===ku?void 0:t}function zie(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qie{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Bie(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Gt||(Gt={}));const Wie={debug:Gt.DEBUG,verbose:Gt.VERBOSE,info:Gt.INFO,warn:Gt.WARN,error:Gt.ERROR,silent:Gt.SILENT},Hie=Gt.INFO,Kie={[Gt.DEBUG]:"log",[Gt.VERBOSE]:"log",[Gt.INFO]:"info",[Gt.WARN]:"warn",[Gt.ERROR]:"error"},Gie=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Kie[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qP{constructor(e){this.name=e,this._logLevel=Hie,this._logHandler=Gie,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Wie[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Gt.DEBUG,...e),this._logHandler(this,Gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Gt.VERBOSE,...e),this._logHandler(this,Gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Gt.INFO,...e),this._logHandler(this,Gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Gt.WARN,...e),this._logHandler(this,Gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Gt.ERROR,...e),this._logHandler(this,Gt.ERROR,...e)}}const Yie=(t,e)=>e.some(n=>t instanceof n);let CM,PM;function Qie(){return CM||(CM=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Xie(){return PM||(PM=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const F6=new WeakMap,tA=new WeakMap,V6=new WeakMap,E1=new WeakMap,WP=new WeakMap;function Zie(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ic(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&F6.set(n,t)}).catch(()=>{}),WP.set(e,t),e}function Jie(t){if(tA.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});tA.set(t,e)}let nA={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return tA.get(t);if(e==="objectStoreNames")return t.objectStoreNames||V6.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ic(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eoe(t){nA=t(nA)}function toe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(A1(this),e,...n);return V6.set(r,e.sort?e.sort():[e]),Ic(r)}:Xie().includes(t)?function(...e){return t.apply(A1(this),e),Ic(F6.get(this))}:function(...e){return Ic(t.apply(A1(this),e))}}function noe(t){return typeof t=="function"?toe(t):(t instanceof IDBTransaction&&Jie(t),Yie(t,Qie())?new Proxy(t,nA):t)}function Ic(t){if(t instanceof IDBRequest)return Zie(t);if(E1.has(t))return E1.get(t);const e=noe(t);return e!==t&&(E1.set(t,e),WP.set(e,t)),e}const A1=t=>WP.get(t);function roe(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Ic(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Ic(o.result),c.oldVersion,c.newVersion,Ic(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const soe=["get","getKey","getAll","getAllKeys","count"],aoe=["put","add","delete","clear"],T1=new Map;function IM(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(T1.get(e))return T1.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=aoe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||soe.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return T1.set(e,i),i}eoe(t=>({...t,get:(e,n,r)=>IM(e,n)||t.get(e,n,r),has:(e,n)=>!!IM(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ioe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ooe(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ooe(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rA="@firebase/app",kM="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=new qP("@firebase/app"),loe="@firebase/app-compat",coe="@firebase/analytics-compat",uoe="@firebase/analytics",doe="@firebase/app-check-compat",hoe="@firebase/app-check",foe="@firebase/auth",moe="@firebase/auth-compat",poe="@firebase/database",goe="@firebase/data-connect",yoe="@firebase/database-compat",voe="@firebase/functions",xoe="@firebase/functions-compat",boe="@firebase/installations",woe="@firebase/installations-compat",_oe="@firebase/messaging",joe="@firebase/messaging-compat",Noe="@firebase/performance",Soe="@firebase/performance-compat",Eoe="@firebase/remote-config",Aoe="@firebase/remote-config-compat",Toe="@firebase/storage",Coe="@firebase/storage-compat",Poe="@firebase/firestore",Ioe="@firebase/ai",koe="@firebase/firestore-compat",Ooe="firebase",Roe="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA="[DEFAULT]",Moe={[rA]:"fire-core",[loe]:"fire-core-compat",[uoe]:"fire-analytics",[coe]:"fire-analytics-compat",[hoe]:"fire-app-check",[doe]:"fire-app-check-compat",[foe]:"fire-auth",[moe]:"fire-auth-compat",[poe]:"fire-rtdb",[goe]:"fire-data-connect",[yoe]:"fire-rtdb-compat",[voe]:"fire-fn",[xoe]:"fire-fn-compat",[boe]:"fire-iid",[woe]:"fire-iid-compat",[_oe]:"fire-fcm",[joe]:"fire-fcm-compat",[Noe]:"fire-perf",[Soe]:"fire-perf-compat",[Eoe]:"fire-rc",[Aoe]:"fire-rc-compat",[Toe]:"fire-gcs",[Coe]:"fire-gcs-compat",[Poe]:"fire-fst",[koe]:"fire-fst-compat",[Ioe]:"fire-vertex","fire-js":"fire-js",[Ooe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy=new Map,Doe=new Map,aA=new Map;function OM(t,e){try{t.container.addComponent(e)}catch(n){ul.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Uc(t){const e=t.name;if(aA.has(e))return ul.debug(`There were multiple attempts to register component ${e}.`),!1;aA.set(e,t);for(const n of dy.values())OM(n,t);for(const n of Doe.values())OM(n,t);return!0}function Ev(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Gs(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Loe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kc=new Nv("app","Firebase",Loe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $oe{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new cl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd=Roe;function B6(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:sA,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw kc.create("bad-app-name",{appName:String(s)});if(n||(n=D6()),!n)throw kc.create("no-options");const i=dy.get(s);if(i){if(Sd(n,i.options)&&Sd(r,i.config))return i;throw kc.create("duplicate-app",{appName:s})}const o=new qie(s);for(const c of aA.values())o.addComponent(c);const l=new $oe(n,r,o);return dy.set(s,l),l}function Av(t=sA){const e=dy.get(t);if(!e&&t===sA&&D6())return B6();if(!e)throw kc.create("no-app",{appName:t});return e}function Foe(){return Array.from(dy.values())}function Ka(t,e,n){let r=Moe[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ul.warn(o.join(" "));return}Uc(new cl(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Voe="firebase-heartbeat-database",Boe=1,hy="firebase-heartbeat-store";let C1=null;function U6(){return C1||(C1=roe(Voe,Boe,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(hy)}catch(n){console.warn(n)}}}}).catch(t=>{throw kc.create("idb-open",{originalErrorMessage:t.message})})),C1}async function Uoe(t){try{const n=(await U6()).transaction(hy),r=await n.objectStore(hy).get(z6(t));return await n.done,r}catch(e){if(e instanceof $i)ul.warn(e.message);else{const n=kc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ul.warn(n.message)}}}async function RM(t,e){try{const r=(await U6()).transaction(hy,"readwrite");await r.objectStore(hy).put(e,z6(t)),await r.done}catch(n){if(n instanceof $i)ul.warn(n.message);else{const r=kc.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ul.warn(r.message)}}}function z6(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zoe=1024,qoe=30;class Woe{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Koe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=MM();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>qoe){const o=Goe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ul.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=MM(),{heartbeatsToSend:r,unsentEntries:s}=Hoe(this._heartbeatsCache.heartbeats),i=_0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ul.warn(n),""}}}function MM(){return new Date().toISOString().substring(0,10)}function Hoe(t,e=zoe){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),DM(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),DM(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Koe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kie()?Oie().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Uoe(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return RM(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return RM(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function DM(t){return _0(JSON.stringify({version:2,heartbeats:t})).length}function Goe(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yoe(t){Uc(new cl("platform-logger",e=>new ioe(e),"PRIVATE")),Uc(new cl("heartbeat",e=>new Woe(e),"PRIVATE")),Ka(rA,kM,t),Ka(rA,kM,"esm2020"),Ka("fire-js","")}Yoe("");var Qoe="firebase",Xoe="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ka(Qoe,Xoe,"app");function q6(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Zoe=q6,W6=new Nv("auth","Firebase",q6());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0=new qP("@firebase/auth");function Joe(t,...e){j0.logLevel<=Gt.WARN&&j0.warn(`Auth (${Qd}): ${t}`,...e)}function Ab(t,...e){j0.logLevel<=Gt.ERROR&&j0.error(`Auth (${Qd}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(t,...e){throw HP(t,...e)}function oo(t,...e){return HP(t,...e)}function H6(t,e,n){const r={...Zoe(),[e]:n};return new Nv("auth","Firebase",r).create(e,{appName:t.name})}function Xo(t){return H6(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function HP(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return W6.create(t,...e)}function pt(t,e,...n){if(!t)throw HP(e,...n)}function Wo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ab(e),new Error(e)}function dl(t,e){t||Wo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function ele(){return LM()==="http:"||LM()==="https:"}function LM(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tle(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ele()||Tie()||"connection"in navigator)?navigator.onLine:!0}function nle(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,n){this.shortDelay=e,this.longDelay=n,dl(n>e,"Short delay should be less than long delay!"),this.isMobile=Sie()||Cie()}get(){return tle()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(t,e){dl(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rle={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sle=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ale=new Tv(3e4,6e4);function Fi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Pa(t,e,n,r,s={}){return G6(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Sv({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return Aie()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&To(t.emulatorConfig.host)&&(u.credentials="include"),K6.fetch()(await Y6(t,t.config.apiHost,n,l),u)})}async function G6(t,e,n){t._canInitEmulator=!1;const r={...rle,...e};try{const s=new ole(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw $x(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw $x(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw $x(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw $x(t,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw H6(t,d,u);Ja(t,d)}}catch(s){if(s instanceof $i)throw s;Ja(t,"network-request-failed",{message:String(s)})}}async function Cv(t,e,n,r,s={}){const i=await Pa(t,e,n,r,s);return"mfaPendingCredential"in i&&Ja(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Y6(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?KP(t.config,s):`${t.config.apiScheme}://${s}`;return sle.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function ile(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ole{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(oo(this.auth,"network-request-failed")),ale.get())})}}function $x(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=oo(t,e,r);return s.customData._tokenResponse=n,s}function $M(t){return t!==void 0&&t.enterprise!==void 0}class lle{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ile(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cle(t,e){return Pa(t,"GET","/v2/recaptchaConfig",Fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ule(t,e){return Pa(t,"POST","/v1/accounts:delete",e)}async function N0(t,e){return Pa(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dle(t,e=!1){const n=tn(t),r=await n.getIdToken(e),s=GP(r);pt(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Eg(P1(s.auth_time)),issuedAtTime:Eg(P1(s.iat)),expirationTime:Eg(P1(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function P1(t){return Number(t)*1e3}function GP(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ab("JWT malformed, contained fewer than 3 sections"),null;try{const s=R6(n);return s?JSON.parse(s):(Ab("Failed to decode base64 JWT payload"),null)}catch(s){return Ab("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function FM(t){const e=GP(t);return pt(e,"internal-error"),pt(typeof e.exp<"u","internal-error"),pt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ed(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof $i&&hle(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function hle({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fle{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Eg(this.lastLoginAt),this.creationTime=Eg(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S0(t){var h;const e=t.auth,n=await t.getIdToken(),r=await Ed(t,N0(e,{idToken:n}));pt(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?Q6(s.providerUserInfo):[],o=ple(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new oA(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function mle(t){const e=tn(t);await S0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ple(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Q6(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gle(t,e){const n=await G6(t,{},async()=>{const r=Sv({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await Y6(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&To(t.emulatorConfig.host)&&(c.credentials="include"),K6.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yle(t,e){return Pa(t,"POST","/v2/accounts:revokeToken",Fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pt(e.idToken,"internal-error"),pt(typeof e.idToken<"u","internal-error"),pt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):FM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){pt(e.length!==0,"internal-error");const n=FM(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(pt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await gle(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new rf;return r&&(pt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(pt(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(pt(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new rf,this.toJSON())}_performRefresh(){return Wo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(t,e){pt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Si{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new fle(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new oA(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ed(this,this.stsTokenManager.getToken(this.auth,e));return pt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return dle(this,e)}reload(){return mle(this)}_assign(e){this!==e&&(pt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Si({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){pt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await S0(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gs(this.auth.app))return Promise.reject(Xo(this.auth));const e=await this.getIdToken();return await Ed(this,ule(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:m,providerData:b,stsTokenManager:g}=n;pt(h&&g,e,"internal-error");const x=rf.fromJSON(this.name,g);pt(typeof h=="string",e,"internal-error"),Fl(r,e.name),Fl(s,e.name),pt(typeof f=="boolean",e,"internal-error"),pt(typeof m=="boolean",e,"internal-error"),Fl(i,e.name),Fl(o,e.name),Fl(l,e.name),Fl(c,e.name),Fl(u,e.name),Fl(d,e.name);const w=new Si({uid:h,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:m,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:x,createdAt:u,lastLoginAt:d});return b&&Array.isArray(b)&&(w.providerData=b.map(y=>({...y}))),c&&(w._redirectEventId=c),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new rf;s.updateFromServerResponse(n);const i=new Si({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await S0(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];pt(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Q6(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new rf;l.updateFromIdToken(r);const c=new Si({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new oA(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=new Map;function Ho(t){dl(t instanceof Function,"Expected a class definition");let e=VM.get(t);return e?(dl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,VM.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}X6.type="NONE";const BM=X6;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(t,e,n){return`firebase:${t}:${e}:${n}`}class sf{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Tb(this.userKey,s.apiKey,i),this.fullPersistenceKey=Tb("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await N0(this.auth,{idToken:e}).catch(()=>{});return n?Si._fromGetAccountInfoResponse(this.auth,n,e):null}return Si._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new sf(Ho(BM),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Ho(BM);const o=Tb(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const d=await u._get(o);if(d){let h;if(typeof d=="string"){const f=await N0(e,{idToken:d}).catch(()=>{});if(!f)break;h=await Si._fromGetAccountInfoResponse(e,f,d)}else h=Si._fromJSON(e,d);u!==i&&(l=h),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new sf(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new sf(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(t9(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Z6(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(r9(e))return"Blackberry";if(s9(e))return"Webos";if(J6(e))return"Safari";if((e.includes("chrome/")||e9(e))&&!e.includes("edge/"))return"Chrome";if(n9(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Z6(t=bs()){return/firefox\//i.test(t)}function J6(t=bs()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function e9(t=bs()){return/crios\//i.test(t)}function t9(t=bs()){return/iemobile/i.test(t)}function n9(t=bs()){return/android/i.test(t)}function r9(t=bs()){return/blackberry/i.test(t)}function s9(t=bs()){return/webos/i.test(t)}function YP(t=bs()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function vle(t=bs()){var e;return YP(t)&&!!((e=window.navigator)!=null&&e.standalone)}function xle(){return Pie()&&document.documentMode===10}function a9(t=bs()){return YP(t)||n9(t)||s9(t)||r9(t)||/windows phone/i.test(t)||t9(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i9(t,e=[]){let n;switch(t){case"Browser":n=UM(bs());break;case"Worker":n=`${UM(bs())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Qd}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ble{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wle(t,e={}){return Pa(t,"GET","/v2/passwordPolicy",Fi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _le=6;class jle{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??_le,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nle{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zM(this),this.idTokenSubscription=new zM(this),this.beforeStateQueue=new ble(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=W6,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ho(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await sf.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await N0(this,{idToken:e}),r=await Si._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Gs(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return pt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await S0(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nle()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gs(this.app))return Promise.reject(Xo(this));const n=e?tn(e):null;return n&&pt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&pt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gs(this.app)?Promise.reject(Xo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gs(this.app)?Promise.reject(Xo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ho(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wle(this),n=new jle(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Nv("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await yle(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ho(e)||this._popupRedirectResolver;pt(n,this,"argument-error"),this.redirectPersistenceManager=await sf.create(this,[Ho(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(pt(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=i9(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Gs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Joe(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function _l(t){return tn(t)}class zM{constructor(e){this.auth=e,this.observer=null,this.addObserver=$ie(n=>this.observer=n)}get next(){return pt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let V_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Sle(t){V_=t}function o9(t){return V_.loadJS(t)}function Ele(){return V_.recaptchaEnterpriseScript}function Ale(){return V_.gapiScript}function Tle(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Cle{constructor(){this.enterprise=new Ple}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Ple{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Ile="recaptcha-enterprise",l9="NO_RECAPTCHA";class kle{constructor(e){this.type=Ile,this.auth=_l(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{cle(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new lle(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;$M(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(l9)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Cle().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&$M(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Ele();c.length!==0&&(c+=l),o9(c).then(()=>{s(l,i,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function qM(t,e,n,r=!1,s=!1){const i=new kle(t);let o;if(s)o=l9;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function E0(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await qM(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await qM(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ole(t,e){const n=Ev(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Sd(i,e??{}))return s;Ja(s,"already-initialized")}return n.initialize({options:e})}function Rle(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ho);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Mle(t,e,n){const r=_l(t);pt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=c9(e),{host:o,port:l}=Dle(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){pt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),pt(Sd(u,r.config.emulator)&&Sd(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,To(o)?($_(`${i}//${o}${c}`),F_("Auth",!0)):Lle()}function c9(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Dle(t){const e=c9(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:WM(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:WM(o)}}}function WM(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Lle(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wo("not implemented")}_getIdTokenResponse(e){return Wo("not implemented")}_linkToIdToken(e,n){return Wo("not implemented")}_getReauthenticationResolver(e){return Wo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u9(t,e){return Pa(t,"POST","/v1/accounts:resetPassword",Fi(t,e))}async function $le(t,e){return Pa(t,"POST","/v1/accounts:update",e)}async function Fle(t,e){return Pa(t,"POST","/v1/accounts:signUp",e)}async function Vle(t,e){return Pa(t,"POST","/v1/accounts:update",Fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ble(t,e){return Cv(t,"POST","/v1/accounts:signInWithPassword",Fi(t,e))}async function d9(t,e){return Pa(t,"POST","/v1/accounts:sendOobCode",Fi(t,e))}async function Ule(t,e){return d9(t,e)}async function zle(t,e){return d9(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qle(t,e){return Cv(t,"POST","/v1/accounts:signInWithEmailLink",Fi(t,e))}async function Wle(t,e){return Cv(t,"POST","/v1/accounts:signInWithEmailLink",Fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy extends QP{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new fy(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new fy(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return E0(e,n,"signInWithPassword",Ble);case"emailLink":return qle(e,{email:this._email,oobCode:this._password});default:Ja(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return E0(e,r,"signUpPassword",Fle);case"emailLink":return Wle(e,{idToken:n,email:this._email,oobCode:this._password});default:Ja(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function af(t,e){return Cv(t,"POST","/v1/accounts:signInWithIdp",Fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hle="http://localhost";class Ad extends QP{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ad(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ja("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Ad(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return af(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,af(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,af(e,n)}buildRequest(){const e={requestUri:Hle,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Sv(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kle(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Gle(t){const e=sg(ag(t)).link,n=e?sg(ag(e)).deep_link_id:null,r=sg(ag(t)).deep_link_id;return(r?sg(ag(r)).link:null)||r||n||e||t}class XP{constructor(e){const n=sg(ag(e)),r=n.apiKey??null,s=n.oobCode??null,i=Kle(n.mode??null);pt(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Gle(e);try{return new XP(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(){this.providerId=qm.PROVIDER_ID}static credential(e,n){return fy._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=XP.parseLink(n);return pt(r,"argument-error"),fy._fromEmailAndCode(e,r.code,r.tenantId)}}qm.PROVIDER_ID="password";qm.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qm.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv extends h9{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl extends Pv{constructor(){super("facebook.com")}static credential(e){return Ad._fromParams({providerId:Zl.PROVIDER_ID,signInMethod:Zl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zl.credentialFromTaggedObject(e)}static credentialFromError(e){return Zl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zl.credential(e.oauthAccessToken)}catch{return null}}}Zl.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl extends Pv{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ad._fromParams({providerId:Jl.PROVIDER_ID,signInMethod:Jl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Jl.credentialFromTaggedObject(e)}static credentialFromError(e){return Jl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Jl.credential(n,r)}catch{return null}}}Jl.GOOGLE_SIGN_IN_METHOD="google.com";Jl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec extends Pv{constructor(){super("github.com")}static credential(e){return Ad._fromParams({providerId:ec.PROVIDER_ID,signInMethod:ec.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ec.credentialFromTaggedObject(e)}static credentialFromError(e){return ec.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ec.credential(e.oauthAccessToken)}catch{return null}}}ec.GITHUB_SIGN_IN_METHOD="github.com";ec.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc extends Pv{constructor(){super("twitter.com")}static credential(e,n){return Ad._fromParams({providerId:tc.PROVIDER_ID,signInMethod:tc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return tc.credentialFromTaggedObject(e)}static credentialFromError(e){return tc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return tc.credential(n,r)}catch{return null}}}tc.TWITTER_SIGN_IN_METHOD="twitter.com";tc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yle(t,e){return Cv(t,"POST","/v1/accounts:signUp",Fi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Si._fromIdTokenResponse(e,r,s),o=HM(r);return new Td({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=HM(r);return new Td({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function HM(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0 extends $i{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,A0.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new A0(e,n,r,s)}}function f9(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?A0._fromErrorAndOperation(t,i,e,r):i})}async function Qle(t,e,n=!1){const r=await Ed(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Td._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xle(t,e,n=!1){const{auth:r}=t;if(Gs(r.app))return Promise.reject(Xo(r));const s="reauthenticate";try{const i=await Ed(t,f9(r,s,e,t),n);pt(i.idToken,r,"internal-error");const o=GP(i.idToken);pt(o,r,"internal-error");const{sub:l}=o;return pt(t.uid===l,r,"user-mismatch"),Td._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Ja(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m9(t,e,n=!1){if(Gs(t.app))return Promise.reject(Xo(t));const r="signIn",s=await f9(t,r,e),i=await Td._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Zle(t,e){return m9(_l(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?JP._fromServerResponse(e,n):"totpInfo"in n?eI._fromServerResponse(e,n):Ja(e,"internal-error")}}class JP extends ZP{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new JP(n)}}class eI extends ZP{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new eI(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tI(t){const e=_l(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Jle(t,e,n){const r=_l(t);await E0(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",zle)}async function ece(t,e,n){await u9(tn(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&tI(t),r})}async function tce(t,e){await Vle(tn(t),{oobCode:e})}async function nce(t,e){const n=tn(t),r=await u9(n,{oobCode:e}),s=r.requestType;switch(pt(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":pt(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":pt(r.mfaInfo,n,"internal-error");default:pt(r.email,n,"internal-error")}let i=null;return r.mfaInfo&&(i=ZP._fromServerResponse(_l(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:i},operation:s}}async function rce(t,e){const{data:n}=await nce(tn(t),e);return n.email}async function sce(t,e,n){if(Gs(t.app))return Promise.reject(Xo(t));const r=_l(t),o=await E0(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Yle).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&tI(t),c}),l=await Td._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function ace(t,e,n){return Gs(t.app)?Promise.reject(Xo(t)):Zle(tn(t),qm.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&tI(t),r})}async function KM(t,e){const n=tn(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await Ule(n.auth,s);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ice(t,e){return Pa(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oce(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=tn(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ed(r,ice(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function lce(t,e){return cce(tn(t),null,e)}async function cce(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await Ed(t,$le(r,i));await t._updateTokensIfNecessary(o,!0)}function uce(t,e,n,r){return tn(t).onIdTokenChanged(e,n,r)}function dce(t,e,n){return tn(t).beforeAuthStateChanged(e,n)}function hce(t,e,n,r){return tn(t).onAuthStateChanged(e,n,r)}function fce(t){return tn(t).signOut()}const T0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(T0,"1"),this.storage.removeItem(T0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mce=1e3,pce=10;class g9 extends p9{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=a9(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);xle()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,pce):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},mce)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}g9.type="LOCAL";const gce=g9;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y9 extends p9{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}y9.type="SESSION";const v9=y9;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yce(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new B_(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await yce(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}B_.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vce{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=nI("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(f.data.response);break;default:clearTimeout(d),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(){return window}function xce(t){lo().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x9(){return typeof lo().WorkerGlobalScope<"u"&&typeof lo().importScripts=="function"}async function bce(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wce(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function _ce(){return x9()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9="firebaseLocalStorageDb",jce=1,C0="firebaseLocalStorage",w9="fbase_key";class Iv{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function U_(t,e){return t.transaction([C0],e?"readwrite":"readonly").objectStore(C0)}function Nce(){const t=indexedDB.deleteDatabase(b9);return new Iv(t).toPromise()}function lA(){const t=indexedDB.open(b9,jce);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(C0,{keyPath:w9})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(C0)?e(r):(r.close(),await Nce(),e(await lA()))})})}async function GM(t,e,n){const r=U_(t,!0).put({[w9]:e,value:n});return new Iv(r).toPromise()}async function Sce(t,e){const n=U_(t,!1).get(e),r=await new Iv(n).toPromise();return r===void 0?null:r.value}function YM(t,e){const n=U_(t,!0).delete(e);return new Iv(n).toPromise()}const Ece=800,Ace=3;class _9{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lA(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Ace)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return x9()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=B_._getInstance(_ce()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await bce(),!this.activeServiceWorker)return;this.sender=new vce(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||wce()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await lA();return await GM(e,T0,"1"),await YM(e,T0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>GM(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Sce(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>YM(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=U_(s,!1).getAll();return new Iv(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ece)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_9.type="LOCAL";const Tce=_9;new Tv(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cce(t,e){return e?Ho(e):(pt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI extends QP{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return af(e,this._buildIdpRequest())}_linkToIdToken(e,n){return af(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return af(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Pce(t){return m9(t.auth,new rI(t),t.bypassAuthState)}function Ice(t){const{auth:e,user:n}=t;return pt(n,e,"internal-error"),Xle(n,new rI(t),t.bypassAuthState)}async function kce(t){const{auth:e,user:n}=t;return pt(n,e,"internal-error"),Qle(n,new rI(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j9{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Pce;case"linkViaPopup":case"linkViaRedirect":return kce;case"reauthViaPopup":case"reauthViaRedirect":return Ice;default:Ja(this.auth,"internal-error")}}resolve(e){dl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){dl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oce=new Tv(2e3,1e4);class Uh extends j9{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Uh.currentPopupAction&&Uh.currentPopupAction.cancel(),Uh.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pt(e,this.auth,"internal-error"),e}async onExecution(){dl(this.filter.length===1,"Popup operations only handle one event");const e=nI();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(oo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(oo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Uh.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(oo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Oce.get())};e()}}Uh.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rce="pendingRedirect",Cb=new Map;class Mce extends j9{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Cb.get(this.auth._key());if(!e){try{const r=await Dce(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Cb.set(this.auth._key(),e)}return this.bypassAuthState||Cb.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Dce(t,e){const n=Fce(e),r=$ce(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Lce(t,e){Cb.set(t._key(),e)}function $ce(t){return Ho(t._redirectPersistence)}function Fce(t){return Tb(Rce,t.config.apiKey,t.name)}async function Vce(t,e,n=!1){if(Gs(t.app))return Promise.reject(Xo(t));const r=_l(t),s=Cce(r,e),o=await new Mce(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bce=10*60*1e3;class Uce{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zce(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!N9(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(oo(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Bce&&this.cachedEventUids.clear(),this.cachedEventUids.has(QM(e))}saveEventToCache(e){this.cachedEventUids.add(QM(e)),this.lastProcessedEventTime=Date.now()}}function QM(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function N9({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function zce(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return N9(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qce(t,e={}){return Pa(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wce=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hce=/^https?/;async function Kce(t){if(t.config.emulator)return;const{authorizedDomains:e}=await qce(t);for(const n of e)try{if(Gce(n))return}catch{}Ja(t,"unauthorized-domain")}function Gce(t){const e=iA(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Hce.test(n))return!1;if(Wce.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yce=new Tv(3e4,6e4);function XM(){const t=lo().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Qce(t){return new Promise((e,n)=>{var s,i,o;function r(){XM(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{XM(),n(oo(t,"network-request-failed"))},timeout:Yce.get()})}if((i=(s=lo().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=lo().gapi)!=null&&o.load)r();else{const l=Tle("iframefcb");return lo()[l]=()=>{gapi.load?r():n(oo(t,"network-request-failed"))},o9(`${Ale()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Pb=null,e})}let Pb=null;function Xce(t){return Pb=Pb||Qce(t),Pb}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zce=new Tv(5e3,15e3),Jce="__/auth/iframe",eue="emulator/auth/iframe",tue={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nue=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rue(t){const e=t.config;pt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?KP(e,eue):`https://${t.config.authDomain}/${Jce}`,r={apiKey:e.apiKey,appName:t.name,v:Qd},s=nue.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Sv(r).slice(1)}`}async function sue(t){const e=await Xce(t),n=lo().gapi;return pt(n,t,"internal-error"),e.open({where:document.body,url:rue(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tue,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=oo(t,"network-request-failed"),l=lo().setTimeout(()=>{i(o)},Zce.get());function c(){lo().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aue={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iue=500,oue=600,lue="_blank",cue="http://localhost";class ZM{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uue(t,e,n,r=iue,s=oue){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...aue,width:r.toString(),height:s.toString(),top:i,left:o},u=bs().toLowerCase();n&&(l=e9(u)?lue:n),Z6(u)&&(e=e||cue,c.scrollbars="yes");const d=Object.entries(c).reduce((f,[m,b])=>`${f}${m}=${b},`,"");if(vle(u)&&l!=="_self")return due(e||"",l),new ZM(null);const h=window.open(e||"",l,d);pt(h,t,"popup-blocked");try{h.focus()}catch{}return new ZM(h)}function due(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hue="__/auth/handler",fue="emulator/auth/handler",mue=encodeURIComponent("fac");async function JM(t,e,n,r,s,i){pt(t.config.authDomain,t,"auth-domain-config-required"),pt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Qd,eventId:s};if(e instanceof h9){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Lie(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof Pv){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${mue}=${encodeURIComponent(c)}`:"";return`${pue(t)}?${Sv(l).slice(1)}${u}`}function pue({config:t}){return t.emulator?KP(t,fue):`https://${t.authDomain}/${hue}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="webStorageSupport";class gue{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=v9,this._completeRedirectFn=Vce,this._overrideRedirectResult=Lce}async _openPopup(e,n,r,s){var o;dl((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await JM(e,n,r,iA(),s);return uue(e,i,nI())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await JM(e,n,r,iA(),s);return xce(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(dl(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await sue(e),r=new Uce(e);return n.register("authEvent",s=>(pt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(I1,{type:I1},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[I1];i!==void 0&&n(!!i),Ja(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Kce(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return a9()||J6()||YP()}}const yue=gue;var eD="@firebase/auth",tD="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vue{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){pt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xue(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bue(t){Uc(new cl("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;pt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:i9(t)},u=new Nle(r,s,i,c);return Rle(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Uc(new cl("auth-internal",e=>{const n=_l(e.getProvider("auth").getImmediate());return(r=>new vue(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ka(eD,tD,xue(t)),Ka(eD,tD,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wue=5*60,_ue=L6("authIdTokenMaxAge")||wue;let nD=null;const jue=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>_ue)return;const s=n==null?void 0:n.token;nD!==s&&(nD=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Nue(t=Av()){const e=Ev(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Ole(t,{popupRedirectResolver:yue,persistence:[Tce,gce,v9]}),r=L6("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=jue(i.toString());dce(n,o,()=>o(n.currentUser)),uce(n,l=>o(l))}}const s=M6("auth");return s&&Mle(n,`http://${s}`),n}function Sue(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Sle({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=oo("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Sue().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bue("Browser");var rD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Oc,S9;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,p){function E(){}E.prototype=p.prototype,j.F=p.prototype,j.prototype=new E,j.prototype.constructor=j,j.D=function(P,C,I){for(var O=Array(arguments.length-2),$=2;$<arguments.length;$++)O[$-2]=arguments[$];return p.prototype[C].apply(P,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(j,p,E){E||(E=0);const P=Array(16);if(typeof p=="string")for(var C=0;C<16;++C)P[C]=p.charCodeAt(E++)|p.charCodeAt(E++)<<8|p.charCodeAt(E++)<<16|p.charCodeAt(E++)<<24;else for(C=0;C<16;++C)P[C]=p[E++]|p[E++]<<8|p[E++]<<16|p[E++]<<24;p=j.g[0],E=j.g[1],C=j.g[2];let I=j.g[3],O;O=p+(I^E&(C^I))+P[0]+3614090360&4294967295,p=E+(O<<7&4294967295|O>>>25),O=I+(C^p&(E^C))+P[1]+3905402710&4294967295,I=p+(O<<12&4294967295|O>>>20),O=C+(E^I&(p^E))+P[2]+606105819&4294967295,C=I+(O<<17&4294967295|O>>>15),O=E+(p^C&(I^p))+P[3]+3250441966&4294967295,E=C+(O<<22&4294967295|O>>>10),O=p+(I^E&(C^I))+P[4]+4118548399&4294967295,p=E+(O<<7&4294967295|O>>>25),O=I+(C^p&(E^C))+P[5]+1200080426&4294967295,I=p+(O<<12&4294967295|O>>>20),O=C+(E^I&(p^E))+P[6]+2821735955&4294967295,C=I+(O<<17&4294967295|O>>>15),O=E+(p^C&(I^p))+P[7]+4249261313&4294967295,E=C+(O<<22&4294967295|O>>>10),O=p+(I^E&(C^I))+P[8]+1770035416&4294967295,p=E+(O<<7&4294967295|O>>>25),O=I+(C^p&(E^C))+P[9]+2336552879&4294967295,I=p+(O<<12&4294967295|O>>>20),O=C+(E^I&(p^E))+P[10]+4294925233&4294967295,C=I+(O<<17&4294967295|O>>>15),O=E+(p^C&(I^p))+P[11]+2304563134&4294967295,E=C+(O<<22&4294967295|O>>>10),O=p+(I^E&(C^I))+P[12]+1804603682&4294967295,p=E+(O<<7&4294967295|O>>>25),O=I+(C^p&(E^C))+P[13]+4254626195&4294967295,I=p+(O<<12&4294967295|O>>>20),O=C+(E^I&(p^E))+P[14]+2792965006&4294967295,C=I+(O<<17&4294967295|O>>>15),O=E+(p^C&(I^p))+P[15]+1236535329&4294967295,E=C+(O<<22&4294967295|O>>>10),O=p+(C^I&(E^C))+P[1]+4129170786&4294967295,p=E+(O<<5&4294967295|O>>>27),O=I+(E^C&(p^E))+P[6]+3225465664&4294967295,I=p+(O<<9&4294967295|O>>>23),O=C+(p^E&(I^p))+P[11]+643717713&4294967295,C=I+(O<<14&4294967295|O>>>18),O=E+(I^p&(C^I))+P[0]+3921069994&4294967295,E=C+(O<<20&4294967295|O>>>12),O=p+(C^I&(E^C))+P[5]+3593408605&4294967295,p=E+(O<<5&4294967295|O>>>27),O=I+(E^C&(p^E))+P[10]+38016083&4294967295,I=p+(O<<9&4294967295|O>>>23),O=C+(p^E&(I^p))+P[15]+3634488961&4294967295,C=I+(O<<14&4294967295|O>>>18),O=E+(I^p&(C^I))+P[4]+3889429448&4294967295,E=C+(O<<20&4294967295|O>>>12),O=p+(C^I&(E^C))+P[9]+568446438&4294967295,p=E+(O<<5&4294967295|O>>>27),O=I+(E^C&(p^E))+P[14]+3275163606&4294967295,I=p+(O<<9&4294967295|O>>>23),O=C+(p^E&(I^p))+P[3]+4107603335&4294967295,C=I+(O<<14&4294967295|O>>>18),O=E+(I^p&(C^I))+P[8]+1163531501&4294967295,E=C+(O<<20&4294967295|O>>>12),O=p+(C^I&(E^C))+P[13]+2850285829&4294967295,p=E+(O<<5&4294967295|O>>>27),O=I+(E^C&(p^E))+P[2]+4243563512&4294967295,I=p+(O<<9&4294967295|O>>>23),O=C+(p^E&(I^p))+P[7]+1735328473&4294967295,C=I+(O<<14&4294967295|O>>>18),O=E+(I^p&(C^I))+P[12]+2368359562&4294967295,E=C+(O<<20&4294967295|O>>>12),O=p+(E^C^I)+P[5]+4294588738&4294967295,p=E+(O<<4&4294967295|O>>>28),O=I+(p^E^C)+P[8]+2272392833&4294967295,I=p+(O<<11&4294967295|O>>>21),O=C+(I^p^E)+P[11]+1839030562&4294967295,C=I+(O<<16&4294967295|O>>>16),O=E+(C^I^p)+P[14]+4259657740&4294967295,E=C+(O<<23&4294967295|O>>>9),O=p+(E^C^I)+P[1]+2763975236&4294967295,p=E+(O<<4&4294967295|O>>>28),O=I+(p^E^C)+P[4]+1272893353&4294967295,I=p+(O<<11&4294967295|O>>>21),O=C+(I^p^E)+P[7]+4139469664&4294967295,C=I+(O<<16&4294967295|O>>>16),O=E+(C^I^p)+P[10]+3200236656&4294967295,E=C+(O<<23&4294967295|O>>>9),O=p+(E^C^I)+P[13]+681279174&4294967295,p=E+(O<<4&4294967295|O>>>28),O=I+(p^E^C)+P[0]+3936430074&4294967295,I=p+(O<<11&4294967295|O>>>21),O=C+(I^p^E)+P[3]+3572445317&4294967295,C=I+(O<<16&4294967295|O>>>16),O=E+(C^I^p)+P[6]+76029189&4294967295,E=C+(O<<23&4294967295|O>>>9),O=p+(E^C^I)+P[9]+3654602809&4294967295,p=E+(O<<4&4294967295|O>>>28),O=I+(p^E^C)+P[12]+3873151461&4294967295,I=p+(O<<11&4294967295|O>>>21),O=C+(I^p^E)+P[15]+530742520&4294967295,C=I+(O<<16&4294967295|O>>>16),O=E+(C^I^p)+P[2]+3299628645&4294967295,E=C+(O<<23&4294967295|O>>>9),O=p+(C^(E|~I))+P[0]+4096336452&4294967295,p=E+(O<<6&4294967295|O>>>26),O=I+(E^(p|~C))+P[7]+1126891415&4294967295,I=p+(O<<10&4294967295|O>>>22),O=C+(p^(I|~E))+P[14]+2878612391&4294967295,C=I+(O<<15&4294967295|O>>>17),O=E+(I^(C|~p))+P[5]+4237533241&4294967295,E=C+(O<<21&4294967295|O>>>11),O=p+(C^(E|~I))+P[12]+1700485571&4294967295,p=E+(O<<6&4294967295|O>>>26),O=I+(E^(p|~C))+P[3]+2399980690&4294967295,I=p+(O<<10&4294967295|O>>>22),O=C+(p^(I|~E))+P[10]+4293915773&4294967295,C=I+(O<<15&4294967295|O>>>17),O=E+(I^(C|~p))+P[1]+2240044497&4294967295,E=C+(O<<21&4294967295|O>>>11),O=p+(C^(E|~I))+P[8]+1873313359&4294967295,p=E+(O<<6&4294967295|O>>>26),O=I+(E^(p|~C))+P[15]+4264355552&4294967295,I=p+(O<<10&4294967295|O>>>22),O=C+(p^(I|~E))+P[6]+2734768916&4294967295,C=I+(O<<15&4294967295|O>>>17),O=E+(I^(C|~p))+P[13]+1309151649&4294967295,E=C+(O<<21&4294967295|O>>>11),O=p+(C^(E|~I))+P[4]+4149444226&4294967295,p=E+(O<<6&4294967295|O>>>26),O=I+(E^(p|~C))+P[11]+3174756917&4294967295,I=p+(O<<10&4294967295|O>>>22),O=C+(p^(I|~E))+P[2]+718787259&4294967295,C=I+(O<<15&4294967295|O>>>17),O=E+(I^(C|~p))+P[9]+3951481745&4294967295,j.g[0]=j.g[0]+p&4294967295,j.g[1]=j.g[1]+(C+(O<<21&4294967295|O>>>11))&4294967295,j.g[2]=j.g[2]+C&4294967295,j.g[3]=j.g[3]+I&4294967295}r.prototype.v=function(j,p){p===void 0&&(p=j.length);const E=p-this.blockSize,P=this.C;let C=this.h,I=0;for(;I<p;){if(C==0)for(;I<=E;)s(this,j,I),I+=this.blockSize;if(typeof j=="string"){for(;I<p;)if(P[C++]=j.charCodeAt(I++),C==this.blockSize){s(this,P),C=0;break}}else for(;I<p;)if(P[C++]=j[I++],C==this.blockSize){s(this,P),C=0;break}}this.h=C,this.o+=p},r.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var p=1;p<j.length-8;++p)j[p]=0;p=this.o*8;for(var E=j.length-8;E<j.length;++E)j[E]=p&255,p/=256;for(this.v(j),j=Array(16),p=0,E=0;E<4;++E)for(let P=0;P<32;P+=8)j[p++]=this.g[E]>>>P&255;return j};function i(j,p){var E=l;return Object.prototype.hasOwnProperty.call(E,j)?E[j]:E[j]=p(j)}function o(j,p){this.h=p;const E=[];let P=!0;for(let C=j.length-1;C>=0;C--){const I=j[C]|0;P&&I==p||(E[C]=I,P=!1)}this.g=E}var l={};function c(j){return-128<=j&&j<128?i(j,function(p){return new o([p|0],p<0?-1:0)}):new o([j|0],j<0?-1:0)}function u(j){if(isNaN(j)||!isFinite(j))return h;if(j<0)return x(u(-j));const p=[];let E=1;for(let P=0;j>=E;P++)p[P]=j/E|0,E*=4294967296;return new o(p,0)}function d(j,p){if(j.length==0)throw Error("number format error: empty string");if(p=p||10,p<2||36<p)throw Error("radix out of range: "+p);if(j.charAt(0)=="-")return x(d(j.substring(1),p));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=u(Math.pow(p,8));let P=h;for(let I=0;I<j.length;I+=8){var C=Math.min(8,j.length-I);const O=parseInt(j.substring(I,I+C),p);C<8?(C=u(Math.pow(p,C)),P=P.j(C).add(u(O))):(P=P.j(E),P=P.add(u(O)))}return P}var h=c(0),f=c(1),m=c(16777216);t=o.prototype,t.m=function(){if(g(this))return-x(this).m();let j=0,p=1;for(let E=0;E<this.g.length;E++){const P=this.i(E);j+=(P>=0?P:4294967296+P)*p,p*=4294967296}return j},t.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(b(this))return"0";if(g(this))return"-"+x(this).toString(j);const p=u(Math.pow(j,6));var E=this;let P="";for(;;){const C=T(E,p).g;E=w(E,C.j(p));let I=((E.g.length>0?E.g[0]:E.h)>>>0).toString(j);if(E=C,b(E))return I+P;for(;I.length<6;)I="0"+I;P=I+P}},t.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function b(j){if(j.h!=0)return!1;for(let p=0;p<j.g.length;p++)if(j.g[p]!=0)return!1;return!0}function g(j){return j.h==-1}t.l=function(j){return j=w(this,j),g(j)?-1:b(j)?0:1};function x(j){const p=j.g.length,E=[];for(let P=0;P<p;P++)E[P]=~j.g[P];return new o(E,~j.h).add(f)}t.abs=function(){return g(this)?x(this):this},t.add=function(j){const p=Math.max(this.g.length,j.g.length),E=[];let P=0;for(let C=0;C<=p;C++){let I=P+(this.i(C)&65535)+(j.i(C)&65535),O=(I>>>16)+(this.i(C)>>>16)+(j.i(C)>>>16);P=O>>>16,I&=65535,O&=65535,E[C]=O<<16|I}return new o(E,E[E.length-1]&-2147483648?-1:0)};function w(j,p){return j.add(x(p))}t.j=function(j){if(b(this)||b(j))return h;if(g(this))return g(j)?x(this).j(x(j)):x(x(this).j(j));if(g(j))return x(this.j(x(j)));if(this.l(m)<0&&j.l(m)<0)return u(this.m()*j.m());const p=this.g.length+j.g.length,E=[];for(var P=0;P<2*p;P++)E[P]=0;for(P=0;P<this.g.length;P++)for(let C=0;C<j.g.length;C++){const I=this.i(P)>>>16,O=this.i(P)&65535,$=j.i(C)>>>16,z=j.i(C)&65535;E[2*P+2*C]+=O*z,y(E,2*P+2*C),E[2*P+2*C+1]+=I*z,y(E,2*P+2*C+1),E[2*P+2*C+1]+=O*$,y(E,2*P+2*C+1),E[2*P+2*C+2]+=I*$,y(E,2*P+2*C+2)}for(j=0;j<p;j++)E[j]=E[2*j+1]<<16|E[2*j];for(j=p;j<2*p;j++)E[j]=0;return new o(E,0)};function y(j,p){for(;(j[p]&65535)!=j[p];)j[p+1]+=j[p]>>>16,j[p]&=65535,p++}function A(j,p){this.g=j,this.h=p}function T(j,p){if(b(p))throw Error("division by zero");if(b(j))return new A(h,h);if(g(j))return p=T(x(j),p),new A(x(p.g),x(p.h));if(g(p))return p=T(j,x(p)),new A(x(p.g),p.h);if(j.g.length>30){if(g(j)||g(p))throw Error("slowDivide_ only works with positive integers.");for(var E=f,P=p;P.l(j)<=0;)E=v(E),P=v(P);var C=S(E,1),I=S(P,1);for(P=S(P,2),E=S(E,2);!b(P);){var O=I.add(P);O.l(j)<=0&&(C=C.add(E),I=O),P=S(P,1),E=S(E,1)}return p=w(j,C.j(p)),new A(C,p)}for(C=h;j.l(p)>=0;){for(E=Math.max(1,Math.floor(j.m()/p.m())),P=Math.ceil(Math.log(E)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),I=u(E),O=I.j(p);g(O)||O.l(j)>0;)E-=P,I=u(E),O=I.j(p);b(I)&&(I=f),C=C.add(I),j=w(j,O)}return new A(C,j)}t.B=function(j){return T(this,j).h},t.and=function(j){const p=Math.max(this.g.length,j.g.length),E=[];for(let P=0;P<p;P++)E[P]=this.i(P)&j.i(P);return new o(E,this.h&j.h)},t.or=function(j){const p=Math.max(this.g.length,j.g.length),E=[];for(let P=0;P<p;P++)E[P]=this.i(P)|j.i(P);return new o(E,this.h|j.h)},t.xor=function(j){const p=Math.max(this.g.length,j.g.length),E=[];for(let P=0;P<p;P++)E[P]=this.i(P)^j.i(P);return new o(E,this.h^j.h)};function v(j){const p=j.g.length+1,E=[];for(let P=0;P<p;P++)E[P]=j.i(P)<<1|j.i(P-1)>>>31;return new o(E,j.h)}function S(j,p){const E=p>>5;p%=32;const P=j.g.length-E,C=[];for(let I=0;I<P;I++)C[I]=p>0?j.i(I+E)>>>p|j.i(I+E+1)<<32-p:j.i(I+E);return new o(C,j.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,S9=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Oc=o}).apply(typeof rD<"u"?rD:typeof self<"u"?self:typeof window<"u"?window:{});var Fx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var E9,ig,A9,Ib,cA,T9,C9,P9;(function(){var t,e=Object.defineProperty;function n(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fx=="object"&&Fx];for(var k=0;k<_.length;++k){var R=_[k];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var r=n(this);function s(_,k){if(k)e:{var R=r;_=_.split(".");for(var V=0;V<_.length-1;V++){var ae=_[V];if(!(ae in R))break e;R=R[ae]}_=_[_.length-1],V=R[_],k=k(V),k!=V&&k!=null&&e(R,_,{configurable:!0,writable:!0,value:k})}}s("Symbol.dispose",function(_){return _||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(_){return _||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(_){return _||function(k){var R=[],V;for(V in k)Object.prototype.hasOwnProperty.call(k,V)&&R.push([V,k[V]]);return R}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(_){var k=typeof _;return k=="object"&&_!=null||k=="function"}function c(_,k,R){return _.call.apply(_.bind,arguments)}function u(_,k,R){return u=c,u.apply(null,arguments)}function d(_,k){var R=Array.prototype.slice.call(arguments,1);return function(){var V=R.slice();return V.push.apply(V,arguments),_.apply(this,V)}}function h(_,k){function R(){}R.prototype=k.prototype,_.Z=k.prototype,_.prototype=new R,_.prototype.constructor=_,_.Ob=function(V,ae,ce){for(var Le=Array(arguments.length-2),Vt=2;Vt<arguments.length;Vt++)Le[Vt-2]=arguments[Vt];return k.prototype[ae].apply(V,Le)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?_=>_&&AsyncContext.Snapshot.wrap(_):_=>_;function m(_){const k=_.length;if(k>0){const R=Array(k);for(let V=0;V<k;V++)R[V]=_[V];return R}return[]}function b(_,k){for(let V=1;V<arguments.length;V++){const ae=arguments[V];var R=typeof ae;if(R=R!="object"?R:ae?Array.isArray(ae)?"array":R:"null",R=="array"||R=="object"&&typeof ae.length=="number"){R=_.length||0;const ce=ae.length||0;_.length=R+ce;for(let Le=0;Le<ce;Le++)_[R+Le]=ae[Le]}else _.push(ae)}}class g{constructor(k,R){this.i=k,this.j=R,this.h=0,this.g=null}get(){let k;return this.h>0?(this.h--,k=this.g,this.g=k.next,k.next=null):k=this.i(),k}}function x(_){o.setTimeout(()=>{throw _},0)}function w(){var _=j;let k=null;return _.g&&(k=_.g,_.g=_.g.next,_.g||(_.h=null),k.next=null),k}class y{constructor(){this.h=this.g=null}add(k,R){const V=A.get();V.set(k,R),this.h?this.h.next=V:this.g=V,this.h=V}}var A=new g(()=>new T,_=>_.reset());class T{constructor(){this.next=this.g=this.h=null}set(k,R){this.h=k,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let v,S=!1,j=new y,p=()=>{const _=Promise.resolve(void 0);v=()=>{_.then(E)}};function E(){for(var _;_=w();){try{_.h.call(_.g)}catch(R){x(R)}var k=A;k.j(_),k.h<100&&(k.h++,_.next=k.g,k.g=_)}S=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(_,k){this.type=_,this.g=this.target=k,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var I=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var _=!1,k=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const R=()=>{};o.addEventListener("test",R,k),o.removeEventListener("test",R,k)}catch{}return _}();function O(_){return/^[\s\xa0]*$/.test(_)}function $(_,k){C.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_&&this.init(_,k)}h($,C),$.prototype.init=function(_,k){const R=this.type=_.type,V=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;this.target=_.target||_.srcElement,this.g=k,k=_.relatedTarget,k||(R=="mouseover"?k=_.fromElement:R=="mouseout"&&(k=_.toElement)),this.relatedTarget=k,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=_.pointerType,this.state=_.state,this.i=_,_.defaultPrevented&&$.Z.h.call(this)},$.prototype.h=function(){$.Z.h.call(this);const _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var z="closure_listenable_"+(Math.random()*1e6|0),H=0;function M(_,k,R,V,ae){this.listener=_,this.proxy=null,this.src=k,this.type=R,this.capture=!!V,this.ha=ae,this.key=++H,this.da=this.fa=!1}function F(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function L(_,k,R){for(const V in _)k.call(R,_[V],V,_)}function W(_,k){for(const R in _)k.call(void 0,_[R],R,_)}function ie(_){const k={};for(const R in _)k[R]=_[R];return k}const oe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function me(_,k){let R,V;for(let ae=1;ae<arguments.length;ae++){V=arguments[ae];for(R in V)_[R]=V[R];for(let ce=0;ce<oe.length;ce++)R=oe[ce],Object.prototype.hasOwnProperty.call(V,R)&&(_[R]=V[R])}}function Ie(_){this.src=_,this.g={},this.h=0}Ie.prototype.add=function(_,k,R,V,ae){const ce=_.toString();_=this.g[ce],_||(_=this.g[ce]=[],this.h++);const Le=ut(_,k,V,ae);return Le>-1?(k=_[Le],R||(k.fa=!1)):(k=new M(k,this.src,ce,!!V,ae),k.fa=R,_.push(k)),k};function lt(_,k){const R=k.type;if(R in _.g){var V=_.g[R],ae=Array.prototype.indexOf.call(V,k,void 0),ce;(ce=ae>=0)&&Array.prototype.splice.call(V,ae,1),ce&&(F(k),_.g[R].length==0&&(delete _.g[R],_.h--))}}function ut(_,k,R,V){for(let ae=0;ae<_.length;++ae){const ce=_[ae];if(!ce.da&&ce.listener==k&&ce.capture==!!R&&ce.ha==V)return ae}return-1}var je="closure_lm_"+(Math.random()*1e6|0),ht={};function we(_,k,R,V,ae){if(Array.isArray(k)){for(let ce=0;ce<k.length;ce++)we(_,k[ce],R,V,ae);return null}return R=Lr(R),_&&_[z]?_.J(k,R,l(V)?!!V.capture:!!V,ae):Me(_,k,R,!1,V,ae)}function Me(_,k,R,V,ae,ce){if(!k)throw Error("Invalid event type");const Le=l(ae)?!!ae.capture:!!ae;let Vt=Zt(_);if(Vt||(_[je]=Vt=new Ie(_)),R=Vt.add(k,R,V,Le,ce),R.proxy)return R;if(V=Fe(),R.proxy=V,V.src=_,V.listener=R,_.addEventListener)I||(ae=Le),ae===void 0&&(ae=!1),_.addEventListener(k.toString(),V,ae);else if(_.attachEvent)_.attachEvent(gt(k.toString()),V);else if(_.addListener&&_.removeListener)_.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return R}function Fe(){function _(R){return k.call(_.src,_.listener,R)}const k=an;return _}function ue(_,k,R,V,ae){if(Array.isArray(k))for(var ce=0;ce<k.length;ce++)ue(_,k[ce],R,V,ae);else V=l(V)?!!V.capture:!!V,R=Lr(R),_&&_[z]?(_=_.i,ce=String(k).toString(),ce in _.g&&(k=_.g[ce],R=ut(k,R,V,ae),R>-1&&(F(k[R]),Array.prototype.splice.call(k,R,1),k.length==0&&(delete _.g[ce],_.h--)))):_&&(_=Zt(_))&&(k=_.g[k.toString()],_=-1,k&&(_=ut(k,R,V,ae)),(R=_>-1?k[_]:null)&&Tt(R))}function Tt(_){if(typeof _!="number"&&_&&!_.da){var k=_.src;if(k&&k[z])lt(k.i,_);else{var R=_.type,V=_.proxy;k.removeEventListener?k.removeEventListener(R,V,_.capture):k.detachEvent?k.detachEvent(gt(R),V):k.addListener&&k.removeListener&&k.removeListener(V),(R=Zt(k))?(lt(R,_),R.h==0&&(R.src=null,k[je]=null)):F(_)}}}function gt(_){return _ in ht?ht[_]:ht[_]="on"+_}function an(_,k){if(_.da)_=!0;else{k=new $(k,this);const R=_.listener,V=_.ha||_.src;_.fa&&Tt(_),_=R.call(V,k)}return _}function Zt(_){return _=_[je],_ instanceof Ie?_:null}var wn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Lr(_){return typeof _=="function"?_:(_[wn]||(_[wn]=function(k){return _.handleEvent(k)}),_[wn])}function nn(){P.call(this),this.i=new Ie(this),this.M=this,this.G=null}h(nn,P),nn.prototype[z]=!0,nn.prototype.removeEventListener=function(_,k,R,V){ue(this,_,k,R,V)};function q(_,k){var R,V=_.G;if(V)for(R=[];V;V=V.G)R.push(V);if(_=_.M,V=k.type||k,typeof k=="string")k=new C(k,_);else if(k instanceof C)k.target=k.target||_;else{var ae=k;k=new C(V,_),me(k,ae)}ae=!0;let ce,Le;if(R)for(Le=R.length-1;Le>=0;Le--)ce=k.g=R[Le],ae=se(ce,V,!0,k)&&ae;if(ce=k.g=_,ae=se(ce,V,!0,k)&&ae,ae=se(ce,V,!1,k)&&ae,R)for(Le=0;Le<R.length;Le++)ce=k.g=R[Le],ae=se(ce,V,!1,k)&&ae}nn.prototype.N=function(){if(nn.Z.N.call(this),this.i){var _=this.i;for(const k in _.g){const R=_.g[k];for(let V=0;V<R.length;V++)F(R[V]);delete _.g[k],_.h--}}this.G=null},nn.prototype.J=function(_,k,R,V){return this.i.add(String(_),k,!1,R,V)},nn.prototype.K=function(_,k,R,V){return this.i.add(String(_),k,!0,R,V)};function se(_,k,R,V){if(k=_.i.g[String(k)],!k)return!0;k=k.concat();let ae=!0;for(let ce=0;ce<k.length;++ce){const Le=k[ce];if(Le&&!Le.da&&Le.capture==R){const Vt=Le.listener,Er=Le.ha||Le.src;Le.fa&&lt(_.i,Le),ae=Vt.call(Er,V)!==!1&&ae}}return ae&&!V.defaultPrevented}function de(_,k){if(typeof _!="function")if(_&&typeof _.handleEvent=="function")_=u(_.handleEvent,_);else throw Error("Invalid listener argument");return Number(k)>2147483647?-1:o.setTimeout(_,k||0)}function Oe(_){_.g=de(()=>{_.g=null,_.i&&(_.i=!1,Oe(_))},_.l);const k=_.h;_.h=null,_.m.apply(null,k)}class Re extends P{constructor(k,R){super(),this.m=k,this.l=R,this.h=null,this.i=!1,this.g=null}j(k){this.h=arguments,this.g?this.i=!0:Oe(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Se(_){P.call(this),this.h=_,this.g={}}h(Se,P);var ze=[];function Ut(_){L(_.g,function(k,R){this.g.hasOwnProperty(R)&&Tt(k)},_),_.g={}}Se.prototype.N=function(){Se.Z.N.call(this),Ut(this)},Se.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var on=o.JSON.stringify,as=o.JSON.parse,oi=class{stringify(_){return o.JSON.stringify(_,void 0)}parse(_){return o.JSON.parse(_,void 0)}};function sa(){}function wu(){}var aa={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ds(){C.call(this,"d")}h(Ds,C);function Tl(){C.call(this,"c")}h(Tl,C);var Gr={},lh=null;function ko(){return lh=lh||new nn}Gr.Ia="serverreachability";function fp(_){C.call(this,Gr.Ia,_)}h(fp,C);function Cl(_){const k=ko();q(k,new fp(k))}Gr.STAT_EVENT="statevent";function rx(_,k){C.call(this,Gr.STAT_EVENT,_),this.stat=k}h(rx,C);function Sr(_){const k=ko();q(k,new rx(k,_))}Gr.Ja="timingevent";function li(_,k){C.call(this,Gr.Ja,_),this.size=k}h(li,C);function _u(_,k){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){_()},k)}function bt(){this.g=!0}bt.prototype.ua=function(){this.g=!1};function dn(_,k,R,V,ae,ce){_.info(function(){if(_.g)if(ce){var Le="",Vt=ce.split("&");for(let Nn=0;Nn<Vt.length;Nn++){var Er=Vt[Nn].split("=");if(Er.length>1){const Fr=Er[0];Er=Er[1];const qi=Fr.split("_");Le=qi.length>=2&&qi[1]=="type"?Le+(Fr+"="+Er+"&"):Le+(Fr+"=redacted&")}}}else Le=null;else Le=ce;return"XMLHTTP REQ ("+V+") [attempt "+ae+"]: "+k+`
`+R+`
`+Le})}function En(_,k,R,V,ae,ce,Le){_.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+ae+"]: "+k+`
`+R+`
`+ce+" "+Le})}function $r(_,k,R,V){_.info(function(){return"XMLHTTP TEXT ("+k+"): "+Ui(_,R)+(V?" "+V:"")})}function ia(_,k){_.info(function(){return"TIMEOUT: "+k})}bt.prototype.info=function(){};function Ui(_,k){if(!_.g)return k;if(!k)return null;try{const ce=JSON.parse(k);if(ce){for(_=0;_<ce.length;_++)if(Array.isArray(ce[_])){var R=ce[_];if(!(R.length<2)){var V=R[1];if(Array.isArray(V)&&!(V.length<1)){var ae=V[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(let Le=1;Le<V.length;Le++)V[Le]=""}}}}return on(ce)}catch{return k}}var Ia={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ls={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ci;function PN(){}h(PN,sa),PN.prototype.g=function(){return new XMLHttpRequest},ci=new PN;function mp(_){return encodeURIComponent(String(_))}function dX(_){var k=1;_=_.split(":");const R=[];for(;k>0&&_.length;)R.push(_.shift()),k--;return _.length&&R.push(_.join(":")),R}function Pl(_,k,R,V){this.j=_,this.i=k,this.l=R,this.S=V||1,this.V=new Se(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new FO}function FO(){this.i=null,this.g="",this.h=!1}var VO={},IN={};function kN(_,k,R){_.M=1,_.A=ax(zi(k)),_.u=R,_.R=!0,BO(_,null)}function BO(_,k){_.F=Date.now(),sx(_),_.B=zi(_.A);var R=_.B,V=_.S;Array.isArray(V)||(V=[String(V)]),e2(R.i,"t",V),_.C=0,R=_.j.L,_.h=new FO,_.g=v2(_.j,R?k:null,!_.u),_.P>0&&(_.O=new Re(u(_.Y,_,_.g),_.P)),k=_.V,R=_.g,V=_.ba;var ae="readystatechange";Array.isArray(ae)||(ae&&(ze[0]=ae.toString()),ae=ze);for(let ce=0;ce<ae.length;ce++){const Le=we(R,ae[ce],V||k.handleEvent,!1,k.h||k);if(!Le)break;k.g[Le.key]=Le}k=_.J?ie(_.J):{},_.u?(_.v||(_.v="POST"),k["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.B,_.v,_.u,k)):(_.v="GET",_.g.ea(_.B,_.v,null,k)),Cl(),dn(_.i,_.v,_.B,_.l,_.S,_.u)}Pl.prototype.ba=function(_){_=_.target;const k=this.O;k&&Ol(_)==3?k.j():this.Y(_)},Pl.prototype.Y=function(_){try{if(_==this.g)e:{const Vt=Ol(this.g),Er=this.g.ya(),Nn=this.g.ca();if(!(Vt<3)&&(Vt!=3||this.g&&(this.h.h||this.g.la()||o2(this.g)))){this.K||Vt!=4||Er==7||(Er==8||Nn<=0?Cl(3):Cl(2)),ON(this);var k=this.g.ca();this.X=k;var R=hX(this);if(this.o=k==200,En(this.i,this.v,this.B,this.l,this.S,Vt,k),this.o){if(this.U&&!this.L){t:{if(this.g){var V,ae=this.g;if((V=ae.g?ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(V)){var ce=V;break t}}ce=null}if(_=ce)$r(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,RN(this,_);else{this.o=!1,this.m=3,Sr(12),ju(this),pp(this);break e}}if(this.R){_=!0;let Fr;for(;!this.K&&this.C<R.length;)if(Fr=fX(this,R),Fr==IN){Vt==4&&(this.m=4,Sr(14),_=!1),$r(this.i,this.l,null,"[Incomplete Response]");break}else if(Fr==VO){this.m=4,Sr(15),$r(this.i,this.l,R,"[Invalid Chunk]"),_=!1;break}else $r(this.i,this.l,Fr,null),RN(this,Fr);if(UO(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vt!=4||R.length!=0||this.h.h||(this.m=1,Sr(16),_=!1),this.o=this.o&&_,!_)$r(this.i,this.l,R,"[Invalid Chunked Response]"),ju(this),pp(this);else if(R.length>0&&!this.W){this.W=!0;var Le=this.j;Le.g==this&&Le.aa&&!Le.P&&(Le.j.info("Great, no buffering proxy detected. Bytes received: "+R.length),UN(Le),Le.P=!0,Sr(11))}}else $r(this.i,this.l,R,null),RN(this,R);Vt==4&&ju(this),this.o&&!this.K&&(Vt==4?m2(this.j,this):(this.o=!1,sx(this)))}else AX(this.g),k==400&&R.indexOf("Unknown SID")>0?(this.m=3,Sr(12)):(this.m=0,Sr(13)),ju(this),pp(this)}}}catch{}finally{}};function hX(_){if(!UO(_))return _.g.la();const k=o2(_.g);if(k==="")return"";let R="";const V=k.length,ae=Ol(_.g)==4;if(!_.h.i){if(typeof TextDecoder>"u")return ju(_),pp(_),"";_.h.i=new o.TextDecoder}for(let ce=0;ce<V;ce++)_.h.h=!0,R+=_.h.i.decode(k[ce],{stream:!(ae&&ce==V-1)});return k.length=0,_.h.g+=R,_.C=0,_.h.g}function UO(_){return _.g?_.v=="GET"&&_.M!=2&&_.j.Aa:!1}function fX(_,k){var R=_.C,V=k.indexOf(`
`,R);return V==-1?IN:(R=Number(k.substring(R,V)),isNaN(R)?VO:(V+=1,V+R>k.length?IN:(k=k.slice(V,V+R),_.C=V+R,k)))}Pl.prototype.cancel=function(){this.K=!0,ju(this)};function sx(_){_.T=Date.now()+_.H,zO(_,_.H)}function zO(_,k){if(_.D!=null)throw Error("WatchDog timer not null");_.D=_u(u(_.aa,_),k)}function ON(_){_.D&&(o.clearTimeout(_.D),_.D=null)}Pl.prototype.aa=function(){this.D=null;const _=Date.now();_-this.T>=0?(ia(this.i,this.B),this.M!=2&&(Cl(),Sr(17)),ju(this),this.m=2,pp(this)):zO(this,this.T-_)};function pp(_){_.j.I==0||_.K||m2(_.j,_)}function ju(_){ON(_);var k=_.O;k&&typeof k.dispose=="function"&&k.dispose(),_.O=null,Ut(_.V),_.g&&(k=_.g,_.g=null,k.abort(),k.dispose())}function RN(_,k){try{var R=_.j;if(R.I!=0&&(R.g==_||MN(R.h,_))){if(!_.L&&MN(R.h,_)&&R.I==3){try{var V=R.Ba.g.parse(k)}catch{V=null}if(Array.isArray(V)&&V.length==3){var ae=V;if(ae[0]==0){e:if(!R.v){if(R.g)if(R.g.F+3e3<_.F)ux(R),lx(R);else break e;BN(R),Sr(18)}}else R.xa=ae[1],0<R.xa-R.K&&ae[2]<37500&&R.F&&R.A==0&&!R.C&&(R.C=_u(u(R.Va,R),6e3));HO(R.h)<=1&&R.ta&&(R.ta=void 0)}else Su(R,11)}else if((_.L||R.g==_)&&ux(R),!O(k))for(ae=R.Ba.g.parse(k),k=0;k<ae.length;k++){let Nn=ae[k];const Fr=Nn[0];if(!(Fr<=R.K))if(R.K=Fr,Nn=Nn[1],R.I==2)if(Nn[0]=="c"){R.M=Nn[1],R.ba=Nn[2];const qi=Nn[3];qi!=null&&(R.ka=qi,R.j.info("VER="+R.ka));const Eu=Nn[4];Eu!=null&&(R.za=Eu,R.j.info("SVER="+R.za));const Rl=Nn[5];Rl!=null&&typeof Rl=="number"&&Rl>0&&(V=1.5*Rl,R.O=V,R.j.info("backChannelRequestTimeoutMs_="+V)),V=R;const Ml=_.g;if(Ml){const hx=Ml.g?Ml.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hx){var ce=V.h;ce.g||hx.indexOf("spdy")==-1&&hx.indexOf("quic")==-1&&hx.indexOf("h2")==-1||(ce.j=ce.l,ce.g=new Set,ce.h&&(DN(ce,ce.h),ce.h=null))}if(V.G){const zN=Ml.g?Ml.g.getResponseHeader("X-HTTP-Session-Id"):null;zN&&(V.wa=zN,Rn(V.J,V.G,zN))}}R.I=3,R.l&&R.l.ra(),R.aa&&(R.T=Date.now()-_.F,R.j.info("Handshake RTT: "+R.T+"ms")),V=R;var Le=_;if(V.na=y2(V,V.L?V.ba:null,V.W),Le.L){KO(V.h,Le);var Vt=Le,Er=V.O;Er&&(Vt.H=Er),Vt.D&&(ON(Vt),sx(Vt)),V.g=Le}else h2(V);R.i.length>0&&cx(R)}else Nn[0]!="stop"&&Nn[0]!="close"||Su(R,7);else R.I==3&&(Nn[0]=="stop"||Nn[0]=="close"?Nn[0]=="stop"?Su(R,7):VN(R):Nn[0]!="noop"&&R.l&&R.l.qa(Nn),R.A=0)}}Cl(4)}catch{}}var mX=class{constructor(_,k){this.g=_,this.map=k}};function qO(_){this.l=_||10,o.PerformanceNavigationTiming?(_=o.performance.getEntriesByType("navigation"),_=_.length>0&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function WO(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function HO(_){return _.h?1:_.g?_.g.size:0}function MN(_,k){return _.h?_.h==k:_.g?_.g.has(k):!1}function DN(_,k){_.g?_.g.add(k):_.h=k}function KO(_,k){_.h&&_.h==k?_.h=null:_.g&&_.g.has(k)&&_.g.delete(k)}qO.prototype.cancel=function(){if(this.i=GO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function GO(_){if(_.h!=null)return _.i.concat(_.h.G);if(_.g!=null&&_.g.size!==0){let k=_.i;for(const R of _.g.values())k=k.concat(R.G);return k}return m(_.i)}var YO=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pX(_,k){if(_){_=_.split("&");for(let R=0;R<_.length;R++){const V=_[R].indexOf("=");let ae,ce=null;V>=0?(ae=_[R].substring(0,V),ce=_[R].substring(V+1)):ae=_[R],k(ae,ce?decodeURIComponent(ce.replace(/\+/g," ")):"")}}}function Il(_){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let k;_ instanceof Il?(this.l=_.l,gp(this,_.j),this.o=_.o,this.g=_.g,yp(this,_.u),this.h=_.h,LN(this,t2(_.i)),this.m=_.m):_&&(k=String(_).match(YO))?(this.l=!1,gp(this,k[1]||"",!0),this.o=vp(k[2]||""),this.g=vp(k[3]||"",!0),yp(this,k[4]),this.h=vp(k[5]||"",!0),LN(this,k[6]||"",!0),this.m=vp(k[7]||"")):(this.l=!1,this.i=new bp(null,this.l))}Il.prototype.toString=function(){const _=[];var k=this.j;k&&_.push(xp(k,QO,!0),":");var R=this.g;return(R||k=="file")&&(_.push("//"),(k=this.o)&&_.push(xp(k,QO,!0),"@"),_.push(mp(R).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.u,R!=null&&_.push(":",String(R))),(R=this.h)&&(this.g&&R.charAt(0)!="/"&&_.push("/"),_.push(xp(R,R.charAt(0)=="/"?vX:yX,!0))),(R=this.i.toString())&&_.push("?",R),(R=this.m)&&_.push("#",xp(R,bX)),_.join("")},Il.prototype.resolve=function(_){const k=zi(this);let R=!!_.j;R?gp(k,_.j):R=!!_.o,R?k.o=_.o:R=!!_.g,R?k.g=_.g:R=_.u!=null;var V=_.h;if(R)yp(k,_.u);else if(R=!!_.h){if(V.charAt(0)!="/")if(this.g&&!this.h)V="/"+V;else{var ae=k.h.lastIndexOf("/");ae!=-1&&(V=k.h.slice(0,ae+1)+V)}if(ae=V,ae==".."||ae==".")V="";else if(ae.indexOf("./")!=-1||ae.indexOf("/.")!=-1){V=ae.lastIndexOf("/",0)==0,ae=ae.split("/");const ce=[];for(let Le=0;Le<ae.length;){const Vt=ae[Le++];Vt=="."?V&&Le==ae.length&&ce.push(""):Vt==".."?((ce.length>1||ce.length==1&&ce[0]!="")&&ce.pop(),V&&Le==ae.length&&ce.push("")):(ce.push(Vt),V=!0)}V=ce.join("/")}else V=ae}return R?k.h=V:R=_.i.toString()!=="",R?LN(k,t2(_.i)):R=!!_.m,R&&(k.m=_.m),k};function zi(_){return new Il(_)}function gp(_,k,R){_.j=R?vp(k,!0):k,_.j&&(_.j=_.j.replace(/:$/,""))}function yp(_,k){if(k){if(k=Number(k),isNaN(k)||k<0)throw Error("Bad port number "+k);_.u=k}else _.u=null}function LN(_,k,R){k instanceof bp?(_.i=k,wX(_.i,_.l)):(R||(k=xp(k,xX)),_.i=new bp(k,_.l))}function Rn(_,k,R){_.i.set(k,R)}function ax(_){return Rn(_,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),_}function vp(_,k){return _?k?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function xp(_,k,R){return typeof _=="string"?(_=encodeURI(_).replace(k,gX),R&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function gX(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var QO=/[#\/\?@]/g,yX=/[#\?:]/g,vX=/[#\?]/g,xX=/[#\?@]/g,bX=/#/g;function bp(_,k){this.h=this.g=null,this.i=_||null,this.j=!!k}function Nu(_){_.g||(_.g=new Map,_.h=0,_.i&&pX(_.i,function(k,R){_.add(decodeURIComponent(k.replace(/\+/g," ")),R)}))}t=bp.prototype,t.add=function(_,k){Nu(this),this.i=null,_=ch(this,_);let R=this.g.get(_);return R||this.g.set(_,R=[]),R.push(k),this.h+=1,this};function XO(_,k){Nu(_),k=ch(_,k),_.g.has(k)&&(_.i=null,_.h-=_.g.get(k).length,_.g.delete(k))}function ZO(_,k){return Nu(_),k=ch(_,k),_.g.has(k)}t.forEach=function(_,k){Nu(this),this.g.forEach(function(R,V){R.forEach(function(ae){_.call(k,ae,V,this)},this)},this)};function JO(_,k){Nu(_);let R=[];if(typeof k=="string")ZO(_,k)&&(R=R.concat(_.g.get(ch(_,k))));else for(_=Array.from(_.g.values()),k=0;k<_.length;k++)R=R.concat(_[k]);return R}t.set=function(_,k){return Nu(this),this.i=null,_=ch(this,_),ZO(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[k]),this.h+=1,this},t.get=function(_,k){return _?(_=JO(this,_),_.length>0?String(_[0]):k):k};function e2(_,k,R){XO(_,k),R.length>0&&(_.i=null,_.g.set(ch(_,k),m(R)),_.h+=R.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],k=Array.from(this.g.keys());for(let V=0;V<k.length;V++){var R=k[V];const ae=mp(R);R=JO(this,R);for(let ce=0;ce<R.length;ce++){let Le=ae;R[ce]!==""&&(Le+="="+mp(R[ce])),_.push(Le)}}return this.i=_.join("&")};function t2(_){const k=new bp;return k.i=_.i,_.g&&(k.g=new Map(_.g),k.h=_.h),k}function ch(_,k){return k=String(k),_.j&&(k=k.toLowerCase()),k}function wX(_,k){k&&!_.j&&(Nu(_),_.i=null,_.g.forEach(function(R,V){const ae=V.toLowerCase();V!=ae&&(XO(this,V),e2(this,ae,R))},_)),_.j=k}function _X(_,k){const R=new bt;if(o.Image){const V=new Image;V.onload=d(kl,R,"TestLoadImage: loaded",!0,k,V),V.onerror=d(kl,R,"TestLoadImage: error",!1,k,V),V.onabort=d(kl,R,"TestLoadImage: abort",!1,k,V),V.ontimeout=d(kl,R,"TestLoadImage: timeout",!1,k,V),o.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=_}else k(!1)}function jX(_,k){const R=new bt,V=new AbortController,ae=setTimeout(()=>{V.abort(),kl(R,"TestPingServer: timeout",!1,k)},1e4);fetch(_,{signal:V.signal}).then(ce=>{clearTimeout(ae),ce.ok?kl(R,"TestPingServer: ok",!0,k):kl(R,"TestPingServer: server error",!1,k)}).catch(()=>{clearTimeout(ae),kl(R,"TestPingServer: error",!1,k)})}function kl(_,k,R,V,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),V(R)}catch{}}function NX(){this.g=new oi}function $N(_){this.i=_.Sb||null,this.h=_.ab||!1}h($N,sa),$N.prototype.g=function(){return new ix(this.i,this.h)};function ix(_,k){nn.call(this),this.H=_,this.o=k,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(ix,nn),t=ix.prototype,t.open=function(_,k){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=_,this.D=k,this.readyState=1,_p(this)},t.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const k={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};_&&(k.body=_),(this.H||o).fetch(new Request(this.D,k)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,wp(this)),this.readyState=0},t.Pa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,_p(this)),this.g&&(this.readyState=3,_p(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;n2(this)}else _.text().then(this.Oa.bind(this),this.ga.bind(this))};function n2(_){_.j.read().then(_.Ma.bind(_)).catch(_.ga.bind(_))}t.Ma=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var k=_.value?_.value:new Uint8Array(0);(k=this.B.decode(k,{stream:!_.done}))&&(this.response=this.responseText+=k)}_.done?wp(this):_p(this),this.readyState==3&&n2(this)}},t.Oa=function(_){this.g&&(this.response=this.responseText=_,wp(this))},t.Na=function(_){this.g&&(this.response=_,wp(this))},t.ga=function(){this.g&&wp(this)};function wp(_){_.readyState=4,_.l=null,_.j=null,_.B=null,_p(_)}t.setRequestHeader=function(_,k){this.A.append(_,k)},t.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],k=this.h.entries();for(var R=k.next();!R.done;)R=R.value,_.push(R[0]+": "+R[1]),R=k.next();return _.join(`\r
`)};function _p(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(ix.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function r2(_){let k="";return L(_,function(R,V){k+=V,k+=":",k+=R,k+=`\r
`}),k}function FN(_,k,R){e:{for(V in R){var V=!1;break e}V=!0}V||(R=r2(R),typeof _=="string"?R!=null&&mp(R):Rn(_,k,R))}function er(_){nn.call(this),this.headers=new Map,this.L=_||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(er,nn);var SX=/^https?$/i,EX=["POST","PUT"];t=er.prototype,t.Fa=function(_){this.H=_},t.ea=function(_,k,R,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);k=k?k.toUpperCase():"GET",this.D=_,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ci.g(),this.g.onreadystatechange=f(u(this.Ca,this));try{this.B=!0,this.g.open(k,String(_),!0),this.B=!1}catch(ce){s2(this,ce);return}if(_=R||"",R=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var ae in V)R.set(ae,V[ae]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const ce of V.keys())R.set(ce,V.get(ce));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(R.keys()).find(ce=>ce.toLowerCase()=="content-type"),ae=o.FormData&&_ instanceof o.FormData,!(Array.prototype.indexOf.call(EX,k,void 0)>=0)||V||ae||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ce,Le]of R)this.g.setRequestHeader(ce,Le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(_),this.v=!1}catch(ce){s2(this,ce)}};function s2(_,k){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=k,_.o=5,a2(_),ox(_)}function a2(_){_.A||(_.A=!0,q(_,"complete"),q(_,"error"))}t.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=_||7,q(this,"complete"),q(this,"abort"),ox(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ox(this,!0)),er.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?i2(this):this.Xa())},t.Xa=function(){i2(this)};function i2(_){if(_.h&&typeof i<"u"){if(_.v&&Ol(_)==4)setTimeout(_.Ca.bind(_),0);else if(q(_,"readystatechange"),Ol(_)==4){_.h=!1;try{const ce=_.ca();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var k=!0;break e;default:k=!1}var R;if(!(R=k)){var V;if(V=ce===0){let Le=String(_.D).match(YO)[1]||null;!Le&&o.self&&o.self.location&&(Le=o.self.location.protocol.slice(0,-1)),V=!SX.test(Le?Le.toLowerCase():"")}R=V}if(R)q(_,"complete"),q(_,"success");else{_.o=6;try{var ae=Ol(_)>2?_.g.statusText:""}catch{ae=""}_.l=ae+" ["+_.ca()+"]",a2(_)}}finally{ox(_)}}}}function ox(_,k){if(_.g){_.m&&(clearTimeout(_.m),_.m=null);const R=_.g;_.g=null,k||q(_,"ready");try{R.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ol(_){return _.g?_.g.readyState:0}t.ca=function(){try{return Ol(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(_){if(this.g){var k=this.g.responseText;return _&&k.indexOf(_)==0&&(k=k.substring(_.length)),as(k)}};function o2(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.F){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function AX(_){const k={};_=(_.g&&Ol(_)>=2&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<_.length;V++){if(O(_[V]))continue;var R=dX(_[V]);const ae=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const ce=k[ae]||[];k[ae]=ce,ce.push(R)}W(k,function(V){return V.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function jp(_,k,R){return R&&R.internalChannelParams&&R.internalChannelParams[_]||k}function l2(_){this.za=0,this.i=[],this.j=new bt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=jp("failFast",!1,_),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=jp("baseRetryDelayMs",5e3,_),this.Za=jp("retryDelaySeedMs",1e4,_),this.Ta=jp("forwardChannelMaxRetries",2,_),this.va=jp("forwardChannelRequestTimeoutMs",2e4,_),this.ma=_&&_.xmlHttpFactory||void 0,this.Ua=_&&_.Rb||void 0,this.Aa=_&&_.useFetchStreams||!1,this.O=void 0,this.L=_&&_.supportsCrossDomainXhr||!1,this.M="",this.h=new qO(_&&_.concurrentRequestLimit),this.Ba=new NX,this.S=_&&_.fastHandshake||!1,this.R=_&&_.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=_&&_.Pb||!1,_&&_.ua&&this.j.ua(),_&&_.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&_&&_.detectBufferingProxy||!1,this.ia=void 0,_&&_.longPollingTimeout&&_.longPollingTimeout>0&&(this.ia=_.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=l2.prototype,t.ka=8,t.I=1,t.connect=function(_,k,R,V){Sr(0),this.W=_,this.H=k||{},R&&V!==void 0&&(this.H.OSID=R,this.H.OAID=V),this.F=this.X,this.J=y2(this,null,this.W),cx(this)};function VN(_){if(c2(_),_.I==3){var k=_.V++,R=zi(_.J);if(Rn(R,"SID",_.M),Rn(R,"RID",k),Rn(R,"TYPE","terminate"),Np(_,R),k=new Pl(_,_.j,k),k.M=2,k.A=ax(zi(R)),R=!1,o.navigator&&o.navigator.sendBeacon)try{R=o.navigator.sendBeacon(k.A.toString(),"")}catch{}!R&&o.Image&&(new Image().src=k.A,R=!0),R||(k.g=v2(k.j,null),k.g.ea(k.A)),k.F=Date.now(),sx(k)}g2(_)}function lx(_){_.g&&(UN(_),_.g.cancel(),_.g=null)}function c2(_){lx(_),_.v&&(o.clearTimeout(_.v),_.v=null),ux(_),_.h.cancel(),_.m&&(typeof _.m=="number"&&o.clearTimeout(_.m),_.m=null)}function cx(_){if(!WO(_.h)&&!_.m){_.m=!0;var k=_.Ea;v||p(),S||(v(),S=!0),j.add(k,_),_.D=0}}function TX(_,k){return HO(_.h)>=_.h.j-(_.m?1:0)?!1:_.m?(_.i=k.G.concat(_.i),!0):_.I==1||_.I==2||_.D>=(_.Sa?0:_.Ta)?!1:(_.m=_u(u(_.Ea,_,k),p2(_,_.D)),_.D++,!0)}t.Ea=function(_){if(this.m)if(this.m=null,this.I==1){if(!_){this.V=Math.floor(Math.random()*1e5),_=this.V++;const ae=new Pl(this,this.j,_);let ce=this.o;if(this.U&&(ce?(ce=ie(ce),me(ce,this.U)):ce=this.U),this.u!==null||this.R||(ae.J=ce,ce=null),this.S)e:{for(var k=0,R=0;R<this.i.length;R++){t:{var V=this.i[R];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(k+=V,k>4096){k=R;break e}if(k===4096||R===this.i.length-1){k=R+1;break e}}k=1e3}else k=1e3;k=d2(this,ae,k),R=zi(this.J),Rn(R,"RID",_),Rn(R,"CVER",22),this.G&&Rn(R,"X-HTTP-Session-Id",this.G),Np(this,R),ce&&(this.R?k="headers="+mp(r2(ce))+"&"+k:this.u&&FN(R,this.u,ce)),DN(this.h,ae),this.Ra&&Rn(R,"TYPE","init"),this.S?(Rn(R,"$req",k),Rn(R,"SID","null"),ae.U=!0,kN(ae,R,null)):kN(ae,R,k),this.I=2}}else this.I==3&&(_?u2(this,_):this.i.length==0||WO(this.h)||u2(this))};function u2(_,k){var R;k?R=k.l:R=_.V++;const V=zi(_.J);Rn(V,"SID",_.M),Rn(V,"RID",R),Rn(V,"AID",_.K),Np(_,V),_.u&&_.o&&FN(V,_.u,_.o),R=new Pl(_,_.j,R,_.D+1),_.u===null&&(R.J=_.o),k&&(_.i=k.G.concat(_.i)),k=d2(_,R,1e3),R.H=Math.round(_.va*.5)+Math.round(_.va*.5*Math.random()),DN(_.h,R),kN(R,V,k)}function Np(_,k){_.H&&L(_.H,function(R,V){Rn(k,V,R)}),_.l&&L({},function(R,V){Rn(k,V,R)})}function d2(_,k,R){R=Math.min(_.i.length,R);const V=_.l?u(_.l.Ka,_.l,_):null;e:{var ae=_.i;let Vt=-1;for(;;){const Er=["count="+R];Vt==-1?R>0?(Vt=ae[0].g,Er.push("ofs="+Vt)):Vt=0:Er.push("ofs="+Vt);let Nn=!0;for(let Fr=0;Fr<R;Fr++){var ce=ae[Fr].g;const qi=ae[Fr].map;if(ce-=Vt,ce<0)Vt=Math.max(0,ae[Fr].g-100),Nn=!1;else try{ce="req"+ce+"_"||"";try{var Le=qi instanceof Map?qi:Object.entries(qi);for(const[Eu,Rl]of Le){let Ml=Rl;l(Rl)&&(Ml=on(Rl)),Er.push(ce+Eu+"="+encodeURIComponent(Ml))}}catch(Eu){throw Er.push(ce+"type="+encodeURIComponent("_badmap")),Eu}}catch{V&&V(qi)}}if(Nn){Le=Er.join("&");break e}}Le=void 0}return _=_.i.splice(0,R),k.G=_,Le}function h2(_){if(!_.g&&!_.v){_.Y=1;var k=_.Da;v||p(),S||(v(),S=!0),j.add(k,_),_.A=0}}function BN(_){return _.g||_.v||_.A>=3?!1:(_.Y++,_.v=_u(u(_.Da,_),p2(_,_.A)),_.A++,!0)}t.Da=function(){if(this.v=null,f2(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var _=4*this.T;this.j.info("BP detection timer enabled: "+_),this.B=_u(u(this.Wa,this),_)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Sr(10),lx(this),f2(this))};function UN(_){_.B!=null&&(o.clearTimeout(_.B),_.B=null)}function f2(_){_.g=new Pl(_,_.j,"rpc",_.Y),_.u===null&&(_.g.J=_.o),_.g.P=0;var k=zi(_.na);Rn(k,"RID","rpc"),Rn(k,"SID",_.M),Rn(k,"AID",_.K),Rn(k,"CI",_.F?"0":"1"),!_.F&&_.ia&&Rn(k,"TO",_.ia),Rn(k,"TYPE","xmlhttp"),Np(_,k),_.u&&_.o&&FN(k,_.u,_.o),_.O&&(_.g.H=_.O);var R=_.g;_=_.ba,R.M=1,R.A=ax(zi(k)),R.u=null,R.R=!0,BO(R,_)}t.Va=function(){this.C!=null&&(this.C=null,lx(this),BN(this),Sr(19))};function ux(_){_.C!=null&&(o.clearTimeout(_.C),_.C=null)}function m2(_,k){var R=null;if(_.g==k){ux(_),UN(_),_.g=null;var V=2}else if(MN(_.h,k))R=k.G,KO(_.h,k),V=1;else return;if(_.I!=0){if(k.o)if(V==1){R=k.u?k.u.length:0,k=Date.now()-k.F;var ae=_.D;V=ko(),q(V,new li(V,R)),cx(_)}else h2(_);else if(ae=k.m,ae==3||ae==0&&k.X>0||!(V==1&&TX(_,k)||V==2&&BN(_)))switch(R&&R.length>0&&(k=_.h,k.i=k.i.concat(R)),ae){case 1:Su(_,5);break;case 4:Su(_,10);break;case 3:Su(_,6);break;default:Su(_,2)}}}function p2(_,k){let R=_.Qa+Math.floor(Math.random()*_.Za);return _.isActive()||(R*=2),R*k}function Su(_,k){if(_.j.info("Error code "+k),k==2){var R=u(_.bb,_),V=_.Ua;const ae=!V;V=new Il(V||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||gp(V,"https"),ax(V),ae?_X(V.toString(),R):jX(V.toString(),R)}else Sr(2);_.I=0,_.l&&_.l.pa(k),g2(_),c2(_)}t.bb=function(_){_?(this.j.info("Successfully pinged google.com"),Sr(2)):(this.j.info("Failed to ping google.com"),Sr(1))};function g2(_){if(_.I=0,_.ja=[],_.l){const k=GO(_.h);(k.length!=0||_.i.length!=0)&&(b(_.ja,k),b(_.ja,_.i),_.h.i.length=0,m(_.i),_.i.length=0),_.l.oa()}}function y2(_,k,R){var V=R instanceof Il?zi(R):new Il(R);if(V.g!="")k&&(V.g=k+"."+V.g),yp(V,V.u);else{var ae=o.location;V=ae.protocol,k=k?k+"."+ae.hostname:ae.hostname,ae=+ae.port;const ce=new Il(null);V&&gp(ce,V),k&&(ce.g=k),ae&&yp(ce,ae),R&&(ce.h=R),V=ce}return R=_.G,k=_.wa,R&&k&&Rn(V,R,k),Rn(V,"VER",_.ka),Np(_,V),V}function v2(_,k,R){if(k&&!_.L)throw Error("Can't create secondary domain capable XhrIo object.");return k=_.Aa&&!_.ma?new er(new $N({ab:R})):new er(_.ma),k.Fa(_.L),k}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function x2(){}t=x2.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function dx(){}dx.prototype.g=function(_,k){return new oa(_,k)};function oa(_,k){nn.call(this),this.g=new l2(k),this.l=_,this.h=k&&k.messageUrlParams||null,_=k&&k.messageHeaders||null,k&&k.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=k&&k.initMessageHeaders||null,k&&k.messageContentType&&(_?_["X-WebChannel-Content-Type"]=k.messageContentType:_={"X-WebChannel-Content-Type":k.messageContentType}),k&&k.sa&&(_?_["X-WebChannel-Client-Profile"]=k.sa:_={"X-WebChannel-Client-Profile":k.sa}),this.g.U=_,(_=k&&k.Qb)&&!O(_)&&(this.g.u=_),this.A=k&&k.supportsCrossDomainXhr||!1,this.v=k&&k.sendRawJson||!1,(k=k&&k.httpSessionIdParam)&&!O(k)&&(this.g.G=k,_=this.h,_!==null&&k in _&&(_=this.h,k in _&&delete _[k])),this.j=new uh(this)}h(oa,nn),oa.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},oa.prototype.close=function(){VN(this.g)},oa.prototype.o=function(_){var k=this.g;if(typeof _=="string"){var R={};R.__data__=_,_=R}else this.v&&(R={},R.__data__=on(_),_=R);k.i.push(new mX(k.Ya++,_)),k.I==3&&cx(k)},oa.prototype.N=function(){this.g.l=null,delete this.j,VN(this.g),delete this.g,oa.Z.N.call(this)};function b2(_){Ds.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var k=_.__sm__;if(k){e:{for(const R in k){_=R;break e}_=void 0}(this.i=_)&&(_=this.i,k=k!==null&&_ in k?k[_]:void 0),this.data=k}else this.data=_}h(b2,Ds);function w2(){Tl.call(this),this.status=1}h(w2,Tl);function uh(_){this.g=_}h(uh,x2),uh.prototype.ra=function(){q(this.g,"a")},uh.prototype.qa=function(_){q(this.g,new b2(_))},uh.prototype.pa=function(_){q(this.g,new w2)},uh.prototype.oa=function(){q(this.g,"b")},dx.prototype.createWebChannel=dx.prototype.g,oa.prototype.send=oa.prototype.o,oa.prototype.open=oa.prototype.m,oa.prototype.close=oa.prototype.close,P9=function(){return new dx},C9=function(){return ko()},T9=Gr,cA={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ia.NO_ERROR=0,Ia.TIMEOUT=8,Ia.HTTP_ERROR=6,Ib=Ia,Ls.COMPLETE="complete",A9=Ls,wu.EventType=aa,aa.OPEN="a",aa.CLOSE="b",aa.ERROR="c",aa.MESSAGE="d",nn.prototype.listen=nn.prototype.J,ig=wu,er.prototype.listenOnce=er.prototype.K,er.prototype.getLastError=er.prototype.Ha,er.prototype.getLastErrorCode=er.prototype.ya,er.prototype.getStatus=er.prototype.ca,er.prototype.getResponseJson=er.prototype.La,er.prototype.getResponseText=er.prototype.la,er.prototype.send=er.prototype.ea,er.prototype.setWithCredentials=er.prototype.Fa,E9=er}).apply(typeof Fx<"u"?Fx:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ds.UNAUTHENTICATED=new ds(null),ds.GOOGLE_CREDENTIALS=new ds("google-credentials-uid"),ds.FIRST_PARTY=new ds("first-party-uid"),ds.MOCK_USER=new ds("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wm="12.9.0";function Eue(t){Wm=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd=new qP("@firebase/firestore");function Nh(){return Cd.logLevel}function Ge(t,...e){if(Cd.logLevel<=Gt.DEBUG){const n=e.map(sI);Cd.debug(`Firestore (${Wm}): ${t}`,...n)}}function hl(t,...e){if(Cd.logLevel<=Gt.ERROR){const n=e.map(sI);Cd.error(`Firestore (${Wm}): ${t}`,...n)}}function Pd(t,...e){if(Cd.logLevel<=Gt.WARN){const n=e.map(sI);Cd.warn(`Firestore (${Wm}): ${t}`,...n)}}function sI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,I9(t,r,n)}function I9(t,e,n){let r=`FIRESTORE (${Wm}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw hl(r),new Error(r)}function mn(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||I9(e,s,r)}function Dt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Be extends $i{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Aue{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ds.UNAUTHENTICATED))}shutdown(){}}class Tue{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Cue{constructor(e){this.t=e,this.currentUser=ds.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){mn(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Zo;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Zo,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Zo)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mn(typeof r.accessToken=="string",31837,{l:r}),new k9(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mn(e===null||typeof e=="string",2055,{h:e}),new ds(e)}}class Pue{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ds.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Iue{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Pue(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ds.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kue{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){mn(this.o===void 0,3512);const r=i=>{i.error!=null&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Ge("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new sD(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(mn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new sD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oue(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Oue(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Yt(t,e){return t<e?-1:t>e?1:0}function uA(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return k1(s)===k1(i)?Yt(s,i):k1(s)?1:-1}return Yt(t.length,e.length)}const Rue=55296,Mue=57343;function k1(t){const e=t.charCodeAt(0);return e>=Rue&&e<=Mue}function zf(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="__name__";class Ki{constructor(e,n,r){n===void 0?n=0:n>e.length&&_t(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&_t(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ki.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ki?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Ki.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Yt(e.length,n.length)}static compareSegments(e,n){const r=Ki.isNumericId(e),s=Ki.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ki.extractNumericId(e).compare(Ki.extractNumericId(n)):uA(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Oc.fromString(e.substring(4,e.length-2))}}class In extends Ki{construct(e,n,r){return new In(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Be(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new In(n)}static emptyPath(){return new In([])}}const Due=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jr extends Ki{construct(e,n,r){return new Jr(e,n,r)}static isValidIdentifier(e){return Due.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===dA}static keyField(){return new Jr([dA])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Be(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Be(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Be(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new Be(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jr(n)}static emptyPath(){return new Jr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.path=e}static fromPath(e){return new dt(In.fromString(e))}static fromName(e){return new dt(In.fromString(e).popFirst(5))}static empty(){return new dt(In.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&In.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return In.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new dt(new In(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O9(t,e,n){if(!n)throw new Be(fe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Lue(t,e,n,r){if(e===!0&&r===!0)throw new Be(fe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function aD(t){if(!dt.isDocumentKey(t))throw new Be(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function iD(t){if(dt.isDocumentKey(t))throw new Be(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function R9(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function z_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_t(12329,{type:typeof t})}function ei(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Be(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=z_(t);throw new Be(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function $ue(t,e){if(e<=0)throw new Be(fe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(t,e){const n={typeString:t};return e&&(n.value=e),n}function kv(t,e){if(!R9(t))throw new Be(fe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Be(fe.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD=-62135596800,lD=1e6;class Fn{static now(){return Fn.fromMillis(Date.now())}static fromDate(e){return Fn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*lD);return new Fn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Be(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Be(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<oD)throw new Be(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Be(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lD}_compareTo(e){return this.seconds===e.seconds?Yt(this.nanoseconds,e.nanoseconds):Yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Fn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(kv(e,Fn._jsonSchema))return new Fn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-oD;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Fn._jsonSchemaVersion="firestore/timestamp/1.0",Fn._jsonSchema={type:jr("string",Fn._jsonSchemaVersion),seconds:jr("number"),nanoseconds:jr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{static fromTimestamp(e){return new Pt(e)}static min(){return new Pt(new Fn(0,0))}static max(){return new Pt(new Fn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my=-1;function Fue(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Pt.fromTimestamp(r===1e9?new Fn(n+1,0):new Fn(n,r));return new zc(s,dt.empty(),e)}function Vue(t){return new zc(t.readTime,t.key,my)}class zc{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new zc(Pt.min(),dt.empty(),my)}static max(){return new zc(Pt.max(),dt.empty(),my)}}function Bue(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=dt.comparator(t.documentKey,e.documentKey),n!==0?n:Yt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uue="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zue{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hm(t){if(t.code!==fe.FAILED_PRECONDITION||t.message!==Uue)throw t;Ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_t(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new xe((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof xe?n:xe.resolve(n)}catch(n){return xe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):xe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):xe.reject(n)}static resolve(e){return new xe((n,r)=>{n(e)})}static reject(e){return new xe((n,r)=>{r(e)})}static waitFor(e){return new xe((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=xe.resolve(!1);for(const r of e)n=n.next(s=>s?xe.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new xe((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(d=>{o[u]=d,++l,l===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new xe((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function que(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Km(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}q_.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=-1;function W_(t){return t==null}function P0(t){return t===0&&1/t==-1/0}function Wue(t){return typeof t=="number"&&Number.isInteger(t)&&!P0(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9="";function Hue(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=cD(e)),e=Kue(t.get(n),e);return cD(e)}function Kue(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case M9:n+="";break;default:n+=i}}return n}function cD(t){return t+M9+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function lu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function D9(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n){this.comparator=e,this.root=n||Xr.EMPTY}insert(e,n){return new Zn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xr.BLACK,null,null))}remove(e){return new Zn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vx(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vx(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vx(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vx(this.root,e,this.comparator,!0)}}class Vx{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xr{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Xr.RED,this.left=s??Xr.EMPTY,this.right=i??Xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Xr(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Xr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _t(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _t(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _t(27949);return e+(this.isRed()?0:1)}}Xr.EMPTY=null,Xr.RED=!0,Xr.BLACK=!1;Xr.EMPTY=new class{constructor(){this.size=0}get key(){throw _t(57766)}get value(){throw _t(16141)}get color(){throw _t(16727)}get left(){throw _t(29726)}get right(){throw _t(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Xr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this.comparator=e,this.data=new Zn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new dD(this.data.getIterator())}getIteratorFrom(e){return new dD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Mr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Mr(this.comparator);return n.data=e,n}}class dD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.fields=e,e.sort(Jr.comparator)}static empty(){return new pa([])}unionWith(e){let n=new Mr(Jr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new pa(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zf(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new L9("Invalid base64 string: "+i):i}}(e);return new ns(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ns(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ns.EMPTY_BYTE_STRING=new ns("");const Gue=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qc(t){if(mn(!!t,39018),typeof t=="string"){let e=0;const n=Gue.exec(t);if(mn(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:hr(t.seconds),nanos:hr(t.nanos)}}function hr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wc(t){return typeof t=="string"?ns.fromBase64String(t):ns.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $9="server_timestamp",F9="__type__",V9="__previous_value__",B9="__local_write_time__";function oI(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[F9])==null?void 0:r.stringValue)===$9}function H_(t){const e=t.mapValue.fields[V9];return oI(e)?H_(e):e}function py(t){const e=qc(t.mapValue.fields[B9].timestampValue);return new Fn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yue{constructor(e,n,r,s,i,o,l,c,u,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d,this.apiKey=h}}const I0="(default)";class gy{constructor(e,n){this.projectId=e,this.database=n||I0}static empty(){return new gy("","")}get isDefaultDatabase(){return this.database===I0}isEqual(e){return e instanceof gy&&e.projectId===this.projectId&&e.database===this.database}}function Que(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Be(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gy(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9="__type__",z9="__max__",Bx={mapValue:{fields:{__type__:{stringValue:z9}}}},q9="__vector__",k0="value";function Hc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?oI(t)?4:Zue(t)?9007199254740991:Xue(t)?10:11:_t(28295,{value:t})}function bo(t,e){if(t===e)return!0;const n=Hc(t);if(n!==Hc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return py(t).isEqual(py(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=qc(s.timestampValue),l=qc(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Wc(s.bytesValue).isEqual(Wc(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return hr(s.geoPointValue.latitude)===hr(i.geoPointValue.latitude)&&hr(s.geoPointValue.longitude)===hr(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return hr(s.integerValue)===hr(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=hr(s.doubleValue),l=hr(i.doubleValue);return o===l?P0(o)===P0(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return zf(t.arrayValue.values||[],e.arrayValue.values||[],bo);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(uD(o)!==uD(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!bo(o[c],l[c])))return!1;return!0}(t,e);default:return _t(52216,{left:t})}}function yy(t,e){return(t.values||[]).find(n=>bo(n,e))!==void 0}function qf(t,e){if(t===e)return 0;const n=Hc(t),r=Hc(e);if(n!==r)return Yt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Yt(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=hr(i.integerValue||i.doubleValue),c=hr(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return hD(t.timestampValue,e.timestampValue);case 4:return hD(py(t),py(e));case 5:return uA(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Wc(i),c=Wc(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=Yt(l[u],c[u]);if(d!==0)return d}return Yt(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Yt(hr(i.latitude),hr(o.latitude));return l!==0?l:Yt(hr(i.longitude),hr(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return fD(t.arrayValue,e.arrayValue);case 10:return function(i,o){var f,m,b,g;const l=i.fields||{},c=o.fields||{},u=(f=l[k0])==null?void 0:f.arrayValue,d=(m=c[k0])==null?void 0:m.arrayValue,h=Yt(((b=u==null?void 0:u.values)==null?void 0:b.length)||0,((g=d==null?void 0:d.values)==null?void 0:g.length)||0);return h!==0?h:fD(u,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Bx.mapValue&&o===Bx.mapValue)return 0;if(i===Bx.mapValue)return 1;if(o===Bx.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){const f=uA(c[h],d[h]);if(f!==0)return f;const m=qf(l[c[h]],u[d[h]]);if(m!==0)return m}return Yt(c.length,d.length)}(t.mapValue,e.mapValue);default:throw _t(23264,{he:n})}}function hD(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Yt(t,e);const n=qc(t),r=qc(e),s=Yt(n.seconds,r.seconds);return s!==0?s:Yt(n.nanos,r.nanos)}function fD(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=qf(n[s],r[s]);if(i)return i}return Yt(n.length,r.length)}function Wf(t){return hA(t)}function hA(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=qc(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Wc(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return dt.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=hA(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${hA(n.fields[o])}`;return s+"}"}(t.mapValue):_t(61005,{value:t})}function kb(t){switch(Hc(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=H_(t);return e?16+kb(e):16;case 5:return 2*t.stringValue.length;case 6:return Wc(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+kb(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return lu(r.fields,(i,o)=>{s+=i.length+kb(o)}),s}(t.mapValue);default:throw _t(13486,{value:t})}}function mD(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function fA(t){return!!t&&"integerValue"in t}function lI(t){return!!t&&"arrayValue"in t}function pD(t){return!!t&&"nullValue"in t}function gD(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ob(t){return!!t&&"mapValue"in t}function Xue(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[U9])==null?void 0:r.stringValue)===q9}function Ag(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return lu(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ag(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ag(t.arrayValue.values[n]);return e}return{...t}}function Zue(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===z9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this.value=e}static empty(){return new Ys({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ob(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ag(n)}setAll(e){let n=Jr.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Ag(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ob(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ob(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){lu(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ys(Ag(this.value))}}function W9(t){const e=[];return lu(t.fields,(n,r)=>{const s=new Jr([n]);if(Ob(r)){const i=W9(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new pa(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new ps(e,0,Pt.min(),Pt.min(),Pt.min(),Ys.empty(),0)}static newFoundDocument(e,n,r,s){return new ps(e,1,n,Pt.min(),r,s,0)}static newNoDocument(e,n){return new ps(e,2,n,Pt.min(),Pt.min(),Ys.empty(),0)}static newUnknownDocument(e,n){return new ps(e,3,n,Pt.min(),Pt.min(),Ys.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Pt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ys.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ys.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ps&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ps(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e,n){this.position=e,this.inclusive=n}}function yD(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=dt.comparator(dt.fromName(o.referenceValue),n.key):r=qf(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function vD(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bo(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,n="asc"){this.field=e,this.dir=n}}function Jue(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{}class _r extends H9{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new tde(e,n,r):n==="array-contains"?new sde(e,r):n==="in"?new ade(e,r):n==="not-in"?new ide(e,r):n==="array-contains-any"?new ode(e,r):new _r(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new nde(e,r):new rde(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(qf(n,this.value)):n!==null&&Hc(this.value)===Hc(n)&&this.matchesComparison(qf(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _t(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Di extends H9{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Di(e,n)}matches(e){return K9(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function K9(t){return t.op==="and"}function G9(t){return ede(t)&&K9(t)}function ede(t){for(const e of t.filters)if(e instanceof Di)return!1;return!0}function mA(t){if(t instanceof _r)return t.field.canonicalString()+t.op.toString()+Wf(t.value);if(G9(t))return t.filters.map(e=>mA(e)).join(",");{const e=t.filters.map(n=>mA(n)).join(",");return`${t.op}(${e})`}}function Y9(t,e){return t instanceof _r?function(r,s){return s instanceof _r&&r.op===s.op&&r.field.isEqual(s.field)&&bo(r.value,s.value)}(t,e):t instanceof Di?function(r,s){return s instanceof Di&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&Y9(o,s.filters[l]),!0):!1}(t,e):void _t(19439)}function Q9(t){return t instanceof _r?function(n){return`${n.field.canonicalString()} ${n.op} ${Wf(n.value)}`}(t):t instanceof Di?function(n){return n.op.toString()+" {"+n.getFilters().map(Q9).join(" ,")+"}"}(t):"Filter"}class tde extends _r{constructor(e,n,r){super(e,n,r),this.key=dt.fromName(r.referenceValue)}matches(e){const n=dt.comparator(e.key,this.key);return this.matchesComparison(n)}}class nde extends _r{constructor(e,n){super(e,"in",n),this.keys=X9("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class rde extends _r{constructor(e,n){super(e,"not-in",n),this.keys=X9("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function X9(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>dt.fromName(r.referenceValue))}class sde extends _r{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lI(n)&&yy(n.arrayValue,this.value)}}class ade extends _r{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yy(this.value.arrayValue,n)}}class ide extends _r{constructor(e,n){super(e,"not-in",n)}matches(e){if(yy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!yy(this.value.arrayValue,n)}}class ode extends _r{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>yy(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lde{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function xD(t,e=null,n=[],r=[],s=null,i=null,o=null){return new lde(t,e,n,r,s,i,o)}function cI(t){const e=Dt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>mA(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),W_(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Wf(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Wf(r)).join(",")),e.Te=n}return e.Te}function uI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Jue(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Y9(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vD(t.startAt,e.startAt)&&vD(t.endAt,e.endAt)}function pA(t){return dt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function cde(t,e,n,r,s,i,o,l){return new Gm(t,e,n,r,s,i,o,l)}function dI(t){return new Gm(t)}function bD(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ude(t){return dt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Z9(t){return t.collectionGroup!==null}function Tg(t){const e=Dt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Mr(Jr.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new vy(i,r))}),n.has(Jr.keyField().canonicalString())||e.Ie.push(new vy(Jr.keyField(),r))}return e.Ie}function co(t){const e=Dt(t);return e.Ee||(e.Ee=dde(e,Tg(t))),e.Ee}function dde(t,e){if(t.limitType==="F")return xD(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new vy(s.field,i)});const n=t.endAt?new O0(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new O0(t.startAt.position,t.startAt.inclusive):null;return xD(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function gA(t,e){const n=t.filters.concat([e]);return new Gm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function hde(t,e){const n=t.explicitOrderBy.concat([e]);return new Gm(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function R0(t,e,n){return new Gm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function K_(t,e){return uI(co(t),co(e))&&t.limitType===e.limitType}function J9(t){return`${cI(co(t))}|lt:${t.limitType}`}function Sh(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Q9(s)).join(", ")}]`),W_(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Wf(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Wf(s)).join(",")),`Target(${r})`}(co(t))}; limitType=${t.limitType})`}function G_(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):dt.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Tg(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const u=yD(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,Tg(r),s)||r.endAt&&!function(o,l,c){const u=yD(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,Tg(r),s))}(t,e)}function fde(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ez(t){return(e,n)=>{let r=!1;for(const s of Tg(t)){const i=mde(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function mde(t,e,n){const r=t.field.isKeyField()?dt.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?qf(c,u):_t(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return _t(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){lu(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return D9(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pde=new Zn(dt.comparator);function fl(){return pde}const tz=new Zn(dt.comparator);function og(...t){let e=tz;for(const n of t)e=e.insert(n.key,n);return e}function nz(t){let e=tz;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Bu(){return Cg()}function rz(){return Cg()}function Cg(){return new Xd(t=>t.toString(),(t,e)=>t.isEqual(e))}const gde=new Zn(dt.comparator),yde=new Mr(dt.comparator);function Qt(...t){let e=yde;for(const n of t)e=e.add(n);return e}const vde=new Mr(Yt);function xde(){return vde}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:P0(e)?"-0":e}}function sz(t){return{integerValue:""+t}}function bde(t,e){return Wue(e)?sz(e):hI(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(){this._=void 0}}function wde(t,e,n){return t instanceof xy?function(s,i){const o={fields:{[F9]:{stringValue:$9},[B9]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&oI(i)&&(i=H_(i)),i&&(o.fields[V9]=i),{mapValue:o}}(n,e):t instanceof by?iz(t,e):t instanceof wy?oz(t,e):function(s,i){const o=az(s,i),l=wD(o)+wD(s.Ae);return fA(o)&&fA(s.Ae)?sz(l):hI(s.serializer,l)}(t,e)}function _de(t,e,n){return t instanceof by?iz(t,e):t instanceof wy?oz(t,e):n}function az(t,e){return t instanceof M0?function(r){return fA(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class xy extends Y_{}class by extends Y_{constructor(e){super(),this.elements=e}}function iz(t,e){const n=lz(e);for(const r of t.elements)n.some(s=>bo(s,r))||n.push(r);return{arrayValue:{values:n}}}class wy extends Y_{constructor(e){super(),this.elements=e}}function oz(t,e){let n=lz(e);for(const r of t.elements)n=n.filter(s=>!bo(s,r));return{arrayValue:{values:n}}}class M0 extends Y_{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function wD(t){return hr(t.integerValue||t.doubleValue)}function lz(t){return lI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jde{constructor(e,n){this.field=e,this.transform=n}}function Nde(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof by&&s instanceof by||r instanceof wy&&s instanceof wy?zf(r.elements,s.elements,bo):r instanceof M0&&s instanceof M0?bo(r.Ae,s.Ae):r instanceof xy&&s instanceof xy}(t.transform,e.transform)}class Sde{constructor(e,n){this.version=e,this.transformResults=n}}class ks{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ks}static exists(e){return new ks(void 0,e)}static updateTime(e){return new ks(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rb(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Q_{}function cz(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new X_(t.key,ks.none()):new Ov(t.key,t.data,ks.none());{const n=t.data,r=Ys.empty();let s=new Mr(Jr.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new cu(t.key,r,new pa(s.toArray()),ks.none())}}function Ede(t,e,n){t instanceof Ov?function(s,i,o){const l=s.value.clone(),c=jD(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof cu?function(s,i,o){if(!Rb(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=jD(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(uz(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Pg(t,e,n,r){return t instanceof Ov?function(i,o,l,c){if(!Rb(i.precondition,o))return l;const u=i.value.clone(),d=ND(i.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof cu?function(i,o,l,c){if(!Rb(i.precondition,o))return l;const u=ND(i.fieldTransforms,c,o),d=o.data;return d.setAll(uz(i)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,l){return Rb(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function Ade(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=az(r.transform,s||null);i!=null&&(n===null&&(n=Ys.empty()),n.set(r.field,i))}return n||null}function _D(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&zf(r,s,(i,o)=>Nde(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ov extends Q_{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class cu extends Q_{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function uz(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function jD(t,e,n){const r=new Map;mn(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,_de(o,l,n[s]))}return r}function ND(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,wde(i,o,e))}return r}class X_ extends Q_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Tde extends Q_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cde{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Ede(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Pg(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Pg(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=rz();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=cz(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(Pt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Qt())}isEqual(e){return this.batchId===e.batchId&&zf(this.mutations,e.mutations,(n,r)=>_D(n,r))&&zf(this.baseMutations,e.baseMutations,(n,r)=>_D(n,r))}}class fI{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){mn(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return gde}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new fI(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pde=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ide{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xr,Jt;function kde(t){switch(t){case fe.OK:return _t(64938);case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0;default:return _t(15467,{code:t})}}function dz(t){if(t===void 0)return hl("GRPC error has no .code"),fe.UNKNOWN;switch(t){case xr.OK:return fe.OK;case xr.CANCELLED:return fe.CANCELLED;case xr.UNKNOWN:return fe.UNKNOWN;case xr.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case xr.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case xr.INTERNAL:return fe.INTERNAL;case xr.UNAVAILABLE:return fe.UNAVAILABLE;case xr.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case xr.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case xr.NOT_FOUND:return fe.NOT_FOUND;case xr.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case xr.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case xr.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case xr.ABORTED:return fe.ABORTED;case xr.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case xr.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case xr.DATA_LOSS:return fe.DATA_LOSS;default:return _t(39323,{code:t})}}(Jt=xr||(xr={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ode(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rde=new Oc([4294967295,4294967295],0);function SD(t){const e=Ode().encode(t),n=new S9;return n.update(e),new Uint8Array(n.digest())}function ED(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Oc([n,r],0),new Oc([s,i],0)]}class mI{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new lg(`Invalid padding: ${n}`);if(r<0)throw new lg(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new lg(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new lg(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Oc.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Oc.fromNumber(r)));return s.compare(Rde)===1&&(s=new Oc([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=SD(e),[r,s]=ED(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new mI(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=SD(e),[r,s]=ED(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class lg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Rv.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Z_(Pt.min(),s,new Zn(Yt),fl(),Qt())}}class Rv{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Rv(r,n,Qt(),Qt(),Qt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class hz{constructor(e,n){this.targetId=e,this.Ce=n}}class fz{constructor(e,n,r=ns.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class AD{constructor(){this.ve=0,this.Fe=TD(),this.Me=ns.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Qt(),n=Qt(),r=Qt();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:_t(38017,{changeType:i})}}),new Rv(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=TD()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,mn(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class Mde{constructor(e){this.Ge=e,this.ze=new Map,this.je=fl(),this.He=Ux(),this.Je=Ux(),this.Ze=new Zn(Yt)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:_t(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(pA(i))if(r===0){const o=new dt(i.path);this.et(n,o,ps.newNoDocument(o,Pt.min()))}else mn(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Wc(r).toUint8Array()}catch(c){if(c instanceof L9)return Pd("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new mI(o,s,i)}catch(c){return Pd(c instanceof lg?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&pA(l.target)){const c=new dt(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,ps.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.Ke())}});let r=Qt();this.Je.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Z_(e,n,this.Ze,this.je,r);return this.je=fl(),this.He=Ux(),this.Je=Ux(),this.Ze=new Zn(Yt),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new AD,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Mr(Yt),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Mr(Yt),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ge("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new AD),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ux(){return new Zn(dt.comparator)}function TD(){return new Zn(dt.comparator)}const Dde={asc:"ASCENDING",desc:"DESCENDING"},Lde={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$de={and:"AND",or:"OR"};class Fde{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function yA(t,e){return t.useProto3Json||W_(e)?e:{value:e}}function D0(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mz(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Vde(t,e){return D0(t,e.toTimestamp())}function uo(t){return mn(!!t,49232),Pt.fromTimestamp(function(n){const r=qc(n);return new Fn(r.seconds,r.nanos)}(t))}function pI(t,e){return vA(t,e).canonicalString()}function vA(t,e){const n=function(s){return new In(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function pz(t){const e=In.fromString(t);return mn(bz(e),10190,{key:e.toString()}),e}function xA(t,e){return pI(t.databaseId,e.path)}function O1(t,e){const n=pz(e);if(n.get(1)!==t.databaseId.projectId)throw new Be(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Be(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new dt(yz(n))}function gz(t,e){return pI(t.databaseId,e)}function Bde(t){const e=pz(t);return e.length===4?In.emptyPath():yz(e)}function bA(t){return new In(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yz(t){return mn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function CD(t,e,n){return{name:xA(t,e),fields:n.value.mapValue.fields}}function Ude(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:_t(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,d){return u.useProto3Json?(mn(d===void 0||typeof d=="string",58123),ns.fromBase64String(d||"")):(mn(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ns.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?fe.UNKNOWN:dz(u.code);return new Be(d,u.message||"")}(o);n=new fz(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=O1(t,r.document.name),i=uo(r.document.updateTime),o=r.document.createTime?uo(r.document.createTime):Pt.min(),l=new Ys({mapValue:{fields:r.document.fields}}),c=ps.newFoundDocument(s,i,o,l),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Mb(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=O1(t,r.document),i=r.readTime?uo(r.readTime):Pt.min(),o=ps.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Mb([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=O1(t,r.document),i=r.removedTargetIds||[];n=new Mb([],i,s,null)}else{if(!("filter"in e))return _t(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Ide(s,i),l=r.targetId;n=new hz(l,o)}}return n}function zde(t,e){let n;if(e instanceof Ov)n={update:CD(t,e.key,e.value)};else if(e instanceof X_)n={delete:xA(t,e.key)};else if(e instanceof cu)n={update:CD(t,e.key,e.data),updateMask:Zde(e.fieldMask)};else{if(!(e instanceof Tde))return _t(16599,{dt:e.type});n={verify:xA(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof xy)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof by)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof wy)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof M0)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw _t(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Vde(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:_t(27497)}(t,e.precondition)),n}function qde(t,e){return t&&t.length>0?(mn(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?uo(s.updateTime):uo(i);return o.isEqual(Pt.min())&&(o=uo(i)),new Sde(o,s.transformResults||[])}(n,e))):[]}function Wde(t,e){return{documents:[gz(t,e.path)]}}function Hde(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=gz(t,s);const i=function(u){if(u.length!==0)return xz(Di.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(d=>function(f){return{field:Eh(f.field),direction:Yde(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=yA(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function Kde(t){let e=Bde(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){mn(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const f=vz(h);return f instanceof Di&&G9(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(b){return new vy(Ah(b.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(f))}(n.orderBy));let l=null;n.limit&&(l=function(h){let f;return f=typeof h=="object"?h.value:h,W_(f)?null:f}(n.limit));let c=null;n.startAt&&(c=function(h){const f=!!h.before,m=h.values||[];return new O0(m,f)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const f=!h.before,m=h.values||[];return new O0(m,f)}(n.endAt)),cde(e,s,o,i,l,"F",c,u)}function Gde(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _t(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vz(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ah(n.unaryFilter.field);return _r.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ah(n.unaryFilter.field);return _r.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ah(n.unaryFilter.field);return _r.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ah(n.unaryFilter.field);return _r.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _t(61313);default:return _t(60726)}}(t):t.fieldFilter!==void 0?function(n){return _r.create(Ah(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _t(58110);default:return _t(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Di.create(n.compositeFilter.filters.map(r=>vz(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return _t(1026)}}(n.compositeFilter.op))}(t):_t(30097,{filter:t})}function Yde(t){return Dde[t]}function Qde(t){return Lde[t]}function Xde(t){return $de[t]}function Eh(t){return{fieldPath:t.canonicalString()}}function Ah(t){return Jr.fromServerFormat(t.fieldPath)}function xz(t){return t instanceof _r?function(n){if(n.op==="=="){if(gD(n.value))return{unaryFilter:{field:Eh(n.field),op:"IS_NAN"}};if(pD(n.value))return{unaryFilter:{field:Eh(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(gD(n.value))return{unaryFilter:{field:Eh(n.field),op:"IS_NOT_NAN"}};if(pD(n.value))return{unaryFilter:{field:Eh(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Eh(n.field),op:Qde(n.op),value:n.value}}}(t):t instanceof Di?function(n){const r=n.getFilters().map(s=>xz(s));return r.length===1?r[0]:{compositeFilter:{op:Xde(n.op),filters:r}}}(t):_t(54877,{filter:t})}function Zde(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function bz(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function wz(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n,r,s,i=Pt.min(),o=Pt.min(),l=ns.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new yc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new yc(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jde{constructor(e){this.yt=e}}function ehe(t){const e=Kde({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?R0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class the{constructor(){this.Sn=new nhe}addToCollectionParentIndex(e,n){return this.Sn.add(n),xe.resolve()}getCollectionParents(e,n){return xe.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return xe.resolve()}deleteFieldIndex(e,n){return xe.resolve()}deleteAllFieldIndexes(e){return xe.resolve()}createTargetIndexes(e,n){return xe.resolve()}getDocumentsMatchingTarget(e,n){return xe.resolve(null)}getIndexType(e,n){return xe.resolve(0)}getFieldIndexes(e,n){return xe.resolve([])}getNextCollectionGroupToUpdate(e){return xe.resolve(null)}getMinOffset(e,n){return xe.resolve(zc.min())}getMinOffsetFromCollectionGroup(e,n){return xe.resolve(zc.min())}updateCollectionGroup(e,n,r){return xe.resolve()}updateIndexEntries(e,n){return xe.resolve()}}class nhe{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Mr(In.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Mr(In.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_z=41943040;class zs{static withCacheSize(e){return new zs(e,zs.DEFAULT_COLLECTION_PERCENTILE,zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zs.DEFAULT_COLLECTION_PERCENTILE=10,zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zs.DEFAULT=new zs(_z,zs.DEFAULT_COLLECTION_PERCENTILE,zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zs.DISABLED=new zs(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Hf(0)}static ar(){return new Hf(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID="LruGarbageCollector",rhe=1048576;function kD([t,e],[n,r]){const s=Yt(t,n);return s===0?Yt(e,r):s}class she{constructor(e){this.Pr=e,this.buffer=new Mr(kD),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();kD(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ahe{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ge(ID,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Km(n)?Ge(ID,"Ignoring IndexedDB error during garbage collection: ",n):await Hm(n)}await this.Ar(3e5)})}}class ihe{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return xe.resolve(q_.ce);const r=new she(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ge("LruGarbageCollector","Garbage collection skipped; disabled"),xe.resolve(PD)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),PD):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,o,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,l=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),Nh()<=Gt.DEBUG&&Ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),xe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function ohe(t,e){return new ihe(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lhe{constructor(){this.changes=new Xd(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ps.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?xe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class che{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uhe{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Pg(r.mutation,s,pa.empty(),Fn.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Qt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Qt()){const s=Bu();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=og();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Bu();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Qt()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=fl();const o=Cg(),l=function(){return Cg()}();return n.forEach((c,u)=>{const d=r.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof cu)?i=i.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Pg(d.mutation,u,d.mutation.getFieldMask(),Fn.now())):o.set(u.key,pa.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>l.set(u,new che(d,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Cg();let s=new Zn((o,l)=>o-l),i=Qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=r.get(c)||pa.empty();d=l.applyToLocalView(u,d),r.set(c,d);const h=(s.get(l.batchId)||Qt()).add(c);s=s.insert(l.batchId,h)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,h=rz();d.forEach(f=>{if(!i.has(f)){const m=cz(n.get(f),r.get(f));m!==null&&h.set(f,m),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return xe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return ude(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Z9(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):xe.resolve(Bu());let l=my,c=i;return o.next(u=>xe.forEach(u,(d,h)=>(l<h.largestBatchId&&(l=h.largestBatchId),i.get(d)?xe.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{c=c.insert(d,f)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,Qt())).next(d=>({batchId:l,changes:nz(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new dt(n)).next(r=>{let s=og();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=og();return this.indexManager.getCollectionParents(e,i).next(l=>xe.forEach(l,c=>{const u=function(h,f){return new Gm(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,ps.newInvalidDocument(d)))});let l=og();return o.forEach((c,u)=>{const d=i.get(c);d!==void 0&&Pg(d.mutation,u,pa.empty(),Fn.now()),G_(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dhe{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return xe.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:uo(s.createTime)}}(n)),xe.resolve()}getNamedQuery(e,n){return xe.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:ehe(s.bundledQuery),readTime:uo(s.readTime)}}(n)),xe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hhe{constructor(){this.overlays=new Zn(dt.comparator),this.Lr=new Map}getOverlay(e,n){return xe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Bu();return xe.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.bt(e,n,i)}),xe.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Lr.delete(r)),xe.resolve()}getOverlaysForCollection(e,n,r){const s=Bu(),i=n.length+1,o=new dt(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return xe.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Zn((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=i.get(u.largestBatchId);d===null&&(d=Bu(),i=i.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=Bu(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=s)););return xe.resolve(l)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Pde(n,r));let i=this.Lr.get(n);i===void 0&&(i=Qt(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fhe{constructor(){this.sessionToken=ns.EMPTY_BYTE_STRING}getSessionToken(e){return xe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,xe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(){this.kr=new Mr(Vr.Kr),this.qr=new Mr(Vr.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Vr(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Vr(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new dt(new In([])),r=new Vr(n,e),s=new Vr(n,e+1),i=[];return this.qr.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new dt(new In([])),r=new Vr(n,e),s=new Vr(n,e+1);let i=Qt();return this.qr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Vr(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Vr{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return dt.comparator(e.key,n.key)||Yt(e.Hr,n.Hr)}static Ur(e,n){return Yt(e.Hr,n.Hr)||dt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mhe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Mr(Vr.Kr)}checkEmpty(e){return xe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Cde(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Jr=this.Jr.add(new Vr(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return xe.resolve(o)}lookupMutationBatch(e,n){return xe.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return xe.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(this.mutationQueue.length===0?iI:this.Yn-1)}getAllMutationBatches(e){return xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Vr(n,0),s=new Vr(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],o=>{const l=this.Zr(o.Hr);i.push(l)}),xe.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Mr(Yt);return n.forEach(s=>{const i=new Vr(s,0),o=new Vr(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,o],l=>{r=r.add(l.Hr)})}),xe.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;dt.isDocumentKey(i)||(i=i.child(""));const o=new Vr(new dt(i),0);let l=new Mr(Yt);return this.Jr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Hr)),!0)},o),xe.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){mn(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return xe.forEach(n.mutations,s=>{const i=new Vr(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new Vr(n,0),s=this.Jr.firstAfterOrEqual(r);return xe.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,xe.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class phe{constructor(e){this.ti=e,this.docs=function(){return new Zn(dt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return xe.resolve(r?r.document.mutableCopy():ps.newInvalidDocument(n))}getEntries(e,n){let r=fl();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ps.newInvalidDocument(s))}),xe.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=fl();const o=n.path,l=new dt(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Bue(Vue(d),r)<=0||(s.has(d.key)||G_(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return xe.resolve(i)}getAllFromCollectionGroup(e,n,r,s){_t(9500)}ni(e,n){return xe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ghe(this)}getSize(e){return xe.resolve(this.size)}}class ghe extends lhe{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),xe.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yhe{constructor(e){this.persistence=e,this.ri=new Xd(n=>cI(n),uI),this.lastRemoteSnapshotVersion=Pt.min(),this.highestTargetId=0,this.ii=0,this.si=new gI,this.targetCount=0,this.oi=Hf._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),xe.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Hf(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,xe.resolve()}updateTargetData(e,n){return this.lr(n),xe.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ri.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),xe.waitFor(i).next(()=>s)}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return xe.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),xe.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),xe.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),xe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return xe.resolve(r)}containsKey(e,n){return xe.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jz{constructor(e,n){this._i={},this.overlays={},this.ai=new q_(0),this.ui=!1,this.ui=!0,this.ci=new fhe,this.referenceDelegate=e(this),this.li=new yhe(this),this.indexManager=new the,this.remoteDocumentCache=function(s){return new phe(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new Jde(n),this.Pi=new dhe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new hhe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new mhe(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){Ge("MemoryPersistence","Starting transaction:",e);const s=new vhe(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(i=>this.referenceDelegate.Ii(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return xe.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class vhe extends zue{constructor(e){super(),this.currentSequenceNumber=e}}class yI{constructor(e){this.persistence=e,this.Ri=new gI,this.Ai=null}static Vi(e){return new yI(e)}get di(){if(this.Ai)return this.Ai;throw _t(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),xe.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),xe.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),xe.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.di,r=>{const s=dt.fromPath(r);return this.mi(e,s).next(i=>{i||n.removeEntry(s,Pt.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return xe.or([()=>xe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class L0{constructor(e,n){this.persistence=e,this.fi=new Xd(r=>Hue(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=ohe(this,n)}static Vi(e,n){return new L0(e,n)}Ti(){}Ii(e){return xe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return xe.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(i=>i?xe.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,o=>this.wr(e,o,n).next(l=>{l||(r++,i.removeEntry(o,Pt.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),xe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),xe.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),xe.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),xe.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=kb(e.data.value)),n}wr(e,n,r){return xe.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return xe.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=Qt(),s=Qt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new vI(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xhe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bhe{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return Iie()?8:que(bs())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ps(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new xhe;return this.ys(e,n,o).next(l=>{if(i.result=l,this.As)return this.ws(e,n,o,l.size)})}).next(()=>i.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?(Nh()<=Gt.DEBUG&&Ge("QueryEngine","SDK will not create cache indexes for query:",Sh(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),xe.resolve()):(Nh()<=Gt.DEBUG&&Ge("QueryEngine","Query:",Sh(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Nh()<=Gt.DEBUG&&Ge("QueryEngine","The SDK decides to create cache indexes for query:",Sh(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,co(n))):xe.resolve())}gs(e,n){if(bD(n))return xe.resolve(null);let r=co(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=R0(n,null,"F"),r=co(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Qt(...i);return this.fs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.bs(n,l);return this.Ss(n,u,o,c.readTime)?this.gs(e,R0(n,null,"F")):this.Ds(e,u,n,c)}))})))}ps(e,n,r,s){return bD(n)||s.isEqual(Pt.min())?xe.resolve(null):this.fs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ss(n,o,r,s)?xe.resolve(null):(Nh()<=Gt.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Sh(n)),this.Ds(e,o,n,Fue(s,my)).next(l=>l))})}bs(e,n){let r=new Mr(ez(e));return n.forEach((s,i)=>{G_(e,i)&&(r=r.add(i))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return Nh()<=Gt.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",Sh(n)),this.fs.getDocumentsMatchingQuery(e,n,zc.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI="LocalStore",whe=3e8;class _he{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new Zn(Yt),this.Fs=new Xd(i=>cI(i),uI),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uhe(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function jhe(t,e,n,r){return new _he(t,e,n,r)}async function Nz(t,e){const n=Dt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=Qt();for(const u of s){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of i){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ns:u,removedBatchIds:o,addedBatchIds:l}))})})}function Nhe(t,e){const n=Dt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const h=u.batch,f=h.keys();let m=xe.resolve();return f.forEach(b=>{m=m.next(()=>d.getEntry(c,b)).next(g=>{const x=u.docVersions.get(b);mn(x!==null,48541),g.version.compareTo(x)<0&&(h.applyToRemoteDocument(g,u),g.isValidDocument()&&(g.setReadTime(u.commitVersion),d.addEntry(g)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(c,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Qt();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Sz(t){const e=Dt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function She(t,e){const n=Dt(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const l=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;l.push(n.li.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.li.addMatchingKeys(i,d.addedDocuments,h)));let m=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(ns.EMPTY_BYTE_STRING,Pt.min()).withLastLimboFreeSnapshotVersion(Pt.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(h,m),function(g,x,w){return g.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=whe?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,m,d)&&l.push(n.li.updateTargetData(i,m))});let c=fl(),u=Qt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(Ehe(i,o,e.documentUpdates).next(d=>{c=d.Bs,u=d.Ls})),!r.isEqual(Pt.min())){const d=n.li.getLastRemoteSnapshotVersion(i).next(h=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(d)}return xe.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.vs=s,i))}function Ehe(t,e,n){let r=Qt(),s=Qt();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=fl();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(Pt.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):Ge(xI,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Bs:o,Ls:s}})}function Ahe(t,e){const n=Dt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=iI),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function The(t,e){const n=Dt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(i=>i?(s=i,xe.resolve(s)):n.li.allocateTargetId(r).next(o=>(s=new yc(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function wA(t,e,n){const r=Dt(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Km(o))throw o;Ge(xI,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function OD(t,e,n){const r=Dt(t);let s=Pt.min(),i=Qt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const h=Dt(c),f=h.Fs.get(d);return f!==void 0?xe.resolve(h.vs.get(f)):h.li.getTargetData(u,d)}(r,o,co(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:Pt.min(),n?i:Qt())).next(l=>(Che(r,fde(e),l),{documents:l,ks:i})))}function Che(t,e,n){let r=t.Ms.get(e)||Pt.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ms.set(e,r)}class RD{constructor(){this.activeTargetIds=xde()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Phe{constructor(){this.vo=new RD,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new RD,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ihe{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD="ConnectivityMonitor";class DD{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ge(MD,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ge(MD,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zx=null;function _A(){return zx===null?zx=function(){return 268435456+Math.round(2147483648*Math.random())}():zx++,"0x"+zx.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1="RestConnection",khe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Ohe{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===I0?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=_A(),l=this.Qo(e,n.toUriEncodedString());Ge(R1,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,s,i);const{host:u}=new URL(l),d=To(u);return this.zo(e,l,c,r,d).then(h=>(Ge(R1,`Received RPC '${e}' ${o}: `,h),h),h=>{throw Pd(R1,`RPC '${e}' ${o} failed with error: `,h,"url: ",l,"request:",r),h})}jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wm}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Qo(e,n){const r=khe[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rhe{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="WebChannelConnection",Mp=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class of extends Ohe{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!of.c_){const e=C9();Mp(e,T9.STAT_EVENT,n=>{n.stat===cA.PROXY?Ge(ls,"STAT_EVENT: detected buffering proxy"):n.stat===cA.NOPROXY&&Ge(ls,"STAT_EVENT: detected no buffering proxy")}),of.c_=!0}}zo(e,n,r,s,i){const o=_A();return new Promise((l,c)=>{const u=new E9;u.setWithCredentials(!0),u.listenOnce(A9.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ib.NO_ERROR:const h=u.getResponseJson();Ge(ls,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),l(h);break;case Ib.TIMEOUT:Ge(ls,`RPC '${e}' ${o} timed out`),c(new Be(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Ib.HTTP_ERROR:const f=u.getStatus();if(Ge(ls,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const b=m==null?void 0:m.error;if(b&&b.status&&b.message){const g=function(w){const y=w.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(y)>=0?y:fe.UNKNOWN}(b.status);c(new Be(g,b.message))}else c(new Be(fe.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Be(fe.UNAVAILABLE,"Connection failed."));break;default:_t(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Ge(ls,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);Ge(ls,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",d,r,15)})}T_(e,n,r){const s=_A(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");Ge(ls,`Creating RPC '${e}' stream ${s}: ${u}`,l);const d=o.createWebChannel(u,l);this.I_(d);let h=!1,f=!1;const m=new Rhe({Ho:b=>{f?Ge(ls,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(h||(Ge(ls,`Opening RPC '${e}' stream ${s} transport.`),d.open(),h=!0),Ge(ls,`RPC '${e}' stream ${s} sending:`,b),d.send(b))},Jo:()=>d.close()});return Mp(d,ig.EventType.OPEN,()=>{f||(Ge(ls,`RPC '${e}' stream ${s} transport opened.`),m.i_())}),Mp(d,ig.EventType.CLOSE,()=>{f||(f=!0,Ge(ls,`RPC '${e}' stream ${s} transport closed`),m.o_(),this.E_(d))}),Mp(d,ig.EventType.ERROR,b=>{f||(f=!0,Pd(ls,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),m.o_(new Be(fe.UNAVAILABLE,"The operation could not be completed")))}),Mp(d,ig.EventType.MESSAGE,b=>{var g;if(!f){const x=b.data[0];mn(!!x,16349);const w=x,y=(w==null?void 0:w.error)||((g=w[0])==null?void 0:g.error);if(y){Ge(ls,`RPC '${e}' stream ${s} received error:`,y);const A=y.status;let T=function(j){const p=xr[j];if(p!==void 0)return dz(p)}(A),v=y.message;A==="NOT_FOUND"&&v.includes("database")&&v.includes("does not exist")&&v.includes(this.databaseId.database)&&Pd(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),T===void 0&&(T=fe.INTERNAL,v="Unknown error status: "+A+" with message "+y.message),f=!0,m.o_(new Be(T,v)),d.close()}else Ge(ls,`RPC '${e}' stream ${s} received:`,x),m.__(x)}}),of.u_(),setTimeout(()=>{m.s_()},0),m}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return P9()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mhe(t){return new of(t)}function M1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(t){return new Fde(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */of.c_=!1;class Ez{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Ge("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="PersistentStream";class Az{constructor(e,n,r,s,i,o,l,c){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ez(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===fe.RESOURCE_EXHAUSTED?(hl(n.toString()),hl("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Be(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Ge(LD,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(Ge(LD,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Dhe extends Az{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Ude(this.serializer,e),r=function(i){if(!("targetChange"in i))return Pt.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Pt.min():o.readTime?uo(o.readTime):Pt.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=bA(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=pA(c)?{documents:Wde(i,c)}:{query:Hde(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=mz(i,o.resumeToken);const u=yA(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Pt.min())>0){l.readTime=D0(i,o.snapshotVersion.toTimestamp());const u=yA(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=Gde(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=bA(this.serializer),n.removeTarget=e,this.K_(n)}}class Lhe extends Az{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return mn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,mn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){mn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=qde(e.writeResults,e.commitTime),r=uo(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=bA(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>zde(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $he{}class Fhe extends $he{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Be(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,vA(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Be(fe.UNKNOWN,i.toString())})}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.jo(e,vA(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Be(fe.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function Vhe(t,e,n,r){return new Fhe(t,e,n,r)}class Bhe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(hl(n),this.aa=!1):Ge("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id="RemoteStore";class Uhe{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{Zd(this)&&(Ge(Id,"Restarting streams for network reachability change."),await async function(c){const u=Dt(c);u.Ea.add(4),await Mv(u),u.Va.set("Unknown"),u.Ea.delete(4),await ej(u)}(this))})}),this.Va=new Bhe(r,s)}}async function ej(t){if(Zd(t))for(const e of t.Ra)await e(!0)}async function Mv(t){for(const e of t.Ra)await e(!1)}function Tz(t,e){const n=Dt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),jI(n)?_I(n):Ym(n).O_()&&wI(n,e))}function bI(t,e){const n=Dt(t),r=Ym(n);n.Ia.delete(e),r.O_()&&Cz(n,e),n.Ia.size===0&&(r.O_()?r.L_():Zd(n)&&n.Va.set("Unknown"))}function wI(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ym(t).Z_(e)}function Cz(t,e){t.da.$e(e),Ym(t).X_(e)}function _I(t){t.da=new Mde({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ym(t).start(),t.Va.ua()}function jI(t){return Zd(t)&&!Ym(t).x_()&&t.Ia.size>0}function Zd(t){return Dt(t).Ea.size===0}function Pz(t){t.da=void 0}async function zhe(t){t.Va.set("Online")}async function qhe(t){t.Ia.forEach((e,n)=>{wI(t,e)})}async function Whe(t,e){Pz(t),jI(t)?(t.Va.ha(e),_I(t)):t.Va.set("Unknown")}async function Hhe(t,e,n){if(t.Va.set("Online"),e instanceof fz&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.da.removeTarget(l))}(t,e)}catch(r){Ge(Id,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await $0(t,r)}else if(e instanceof Mb?t.da.Xe(e):e instanceof hz?t.da.st(e):t.da.tt(e),!n.isEqual(Pt.min()))try{const r=await Sz(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.da.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.Ia.get(u);d&&i.Ia.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=i.Ia.get(c);if(!d)return;i.Ia.set(c,d.withResumeToken(ns.EMPTY_BYTE_STRING,d.snapshotVersion)),Cz(i,c);const h=new yc(d.target,c,u,d.sequenceNumber);wI(i,h)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Ge(Id,"Failed to raise snapshot:",r),await $0(t,r)}}async function $0(t,e,n){if(!Km(e))throw e;t.Ea.add(1),await Mv(t),t.Va.set("Offline"),n||(n=()=>Sz(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ge(Id,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ej(t)})}function Iz(t,e){return e().catch(n=>$0(t,n,e))}async function tj(t){const e=Dt(t),n=Kc(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:iI;for(;Khe(e);)try{const s=await Ahe(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,Ghe(e,s)}catch(s){await $0(e,s)}kz(e)&&Oz(e)}function Khe(t){return Zd(t)&&t.Ta.length<10}function Ghe(t,e){t.Ta.push(e);const n=Kc(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function kz(t){return Zd(t)&&!Kc(t).x_()&&t.Ta.length>0}function Oz(t){Kc(t).start()}async function Yhe(t){Kc(t).ra()}async function Qhe(t){const e=Kc(t);for(const n of t.Ta)e.ea(n.mutations)}async function Xhe(t,e,n){const r=t.Ta.shift(),s=fI.from(r,e,n);await Iz(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await tj(t)}async function Zhe(t,e){e&&Kc(t).Y_&&await async function(r,s){if(function(o){return kde(o)&&o!==fe.ABORTED}(s.code)){const i=r.Ta.shift();Kc(r).B_(),await Iz(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await tj(r)}}(t,e),kz(t)&&Oz(t)}async function $D(t,e){const n=Dt(t);n.asyncQueue.verifyOperationInProgress(),Ge(Id,"RemoteStore received new credentials");const r=Zd(n);n.Ea.add(3),await Mv(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ej(n)}async function Jhe(t,e){const n=Dt(t);e?(n.Ea.delete(2),await ej(n)):e||(n.Ea.add(2),await Mv(n),n.Va.set("Unknown"))}function Ym(t){return t.ma||(t.ma=function(n,r,s){const i=Dt(n);return i.sa(),new Dhe(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:zhe.bind(null,t),Yo:qhe.bind(null,t),t_:Whe.bind(null,t),J_:Hhe.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),jI(t)?_I(t):t.Va.set("Unknown")):(await t.ma.stop(),Pz(t))})),t.ma}function Kc(t){return t.fa||(t.fa=function(n,r,s){const i=Dt(n);return i.sa(),new Lhe(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Yhe.bind(null,t),t_:Zhe.bind(null,t),ta:Qhe.bind(null,t),na:Xhe.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await tj(t)):(await t.fa.stop(),t.Ta.length>0&&(Ge(Id,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Zo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new NI(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Be(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function SI(t,e){if(hl("AsyncQueue",`${e}: ${t}`),Km(t))return new Be(fe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{static emptySet(e){return new lf(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||dt.comparator(n.key,r.key):(n,r)=>dt.comparator(n.key,r.key),this.keyedMap=og(),this.sortedSet=new Zn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof lf)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new lf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(){this.ga=new Zn(dt.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):_t(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Kf{constructor(e,n,r,s,i,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Kf(e,n,lf.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&K_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class efe{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class tfe{constructor(){this.queries=VD(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Dt(n),i=s.queries;s.queries=VD(),i.forEach((o,l)=>{for(const c of l.ba)c.onError(r)})})(this,new Be(fe.ABORTED,"Firestore shutting down"))}}function VD(){return new Xd(t=>J9(t),K_)}async function Rz(t,e){const n=Dt(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new efe,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=SI(o,`Initialization of query '${Sh(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&EI(n)}async function Mz(t,e){const n=Dt(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ba.indexOf(e);o>=0&&(i.ba.splice(o,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function nfe(t,e){const n=Dt(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.ba)l.Fa(s)&&(r=!0);o.wa=s}}r&&EI(n)}function rfe(t,e,n){const r=Dt(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function EI(t){t.Ca.forEach(e=>{e.next()})}var jA,BD;(BD=jA||(jA={})).Ma="default",BD.Cache="cache";class Dz{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Kf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Kf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==jA.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{constructor(e){this.key=e}}class $z{constructor(e){this.key=e}}class sfe{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Qt(),this.mutatedKeys=Qt(),this.eu=ez(e),this.tu=new lf(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new FD,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),m=G_(this.query,h)?h:null,b=!!f&&this.mutatedKeys.has(f.key),g=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let x=!1;f&&m?f.data.isEqual(m.data)?b!==g&&(r.track({type:3,doc:m}),x=!0):this.su(f,m)||(r.track({type:2,doc:m}),x=!0,(c&&this.eu(m,c)>0||u&&this.eu(m,u)<0)&&(l=!0)):!f&&m?(r.track({type:0,doc:m}),x=!0):f&&!m&&(r.track({type:1,doc:f}),x=!0,(c||u)&&(l=!0)),x&&(m?(o=o.add(m),i=g?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Ss:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(m,b){const g=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t(20277,{Vt:x})}};return g(m)-g(b)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Ya.size===0&&this.current&&!s?1:0,u=c!==this.Xa;return this.Xa=c,o.length!==0||u?{snapshot:new Kf(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new FD,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Qt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new $z(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new Lz(r))}),n}cu(e){this.Za=e.ks,this.Ya=Qt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Kf.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const AI="SyncEngine";class afe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ife{constructor(e){this.key=e,this.hu=!1}}class ofe{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Xd(l=>J9(l),K_),this.Iu=new Map,this.Eu=new Set,this.Ru=new Zn(dt.comparator),this.Au=new Map,this.Vu=new gI,this.du={},this.mu=new Map,this.fu=Hf.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function lfe(t,e,n=!0){const r=qz(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await Fz(r,e,n,!0),s}async function cfe(t,e){const n=qz(t);await Fz(n,e,!0,!1)}async function Fz(t,e,n,r){const s=await The(t.localStore,co(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await ufe(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Tz(t.remoteStore,s),l}async function ufe(t,e,n,r,s){t.pu=(h,f,m)=>async function(g,x,w,y){let A=x.view.ru(w);A.Ss&&(A=await OD(g.localStore,x.query,!1).then(({documents:j})=>x.view.ru(j,A)));const T=y&&y.targetChanges.get(x.targetId),v=y&&y.targetMismatches.get(x.targetId)!=null,S=x.view.applyChanges(A,g.isPrimaryClient,T,v);return zD(g,x.targetId,S.au),S.snapshot}(t,h,f,m);const i=await OD(t.localStore,e,!0),o=new sfe(e,i.ks),l=o.ru(i.documents),c=Rv.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);zD(t,n,u.au);const d=new afe(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function dfe(t,e,n){const r=Dt(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!K_(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await wA(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&bI(r.remoteStore,s.targetId),NA(r,s.targetId)}).catch(Hm)):(NA(r,s.targetId),await wA(r.localStore,s.targetId,!0))}async function hfe(t,e){const n=Dt(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),bI(n.remoteStore,r.targetId))}async function ffe(t,e,n){const r=bfe(t);try{const s=await function(o,l){const c=Dt(o),u=Fn.now(),d=l.reduce((m,b)=>m.add(b.key),Qt());let h,f;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let b=fl(),g=Qt();return c.xs.getEntries(m,d).next(x=>{b=x,b.forEach((w,y)=>{y.isValidDocument()||(g=g.add(w))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,b)).next(x=>{h=x;const w=[];for(const y of l){const A=Ade(y,h.get(y.key).overlayedDocument);A!=null&&w.push(new cu(y.key,A,W9(A.value.mapValue),ks.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,w,l)}).next(x=>{f=x;const w=x.applyToLocalDocumentSet(h,g);return c.documentOverlayCache.saveOverlays(m,x.batchId,w)})}).then(()=>({batchId:f.batchId,changes:nz(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.du[o.currentUser.toKey()];u||(u=new Zn(Yt)),u=u.insert(l,c),o.du[o.currentUser.toKey()]=u}(r,s.batchId,n),await Dv(r,s.changes),await tj(r.remoteStore)}catch(s){const i=SI(s,"Failed to persist write");n.reject(i)}}async function Vz(t,e){const n=Dt(t);try{const r=await She(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(mn(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?mn(o.hu,14607):s.removedDocuments.size>0&&(mn(o.hu,42227),o.hu=!1))}),await Dv(n,r,e)}catch(r){await Hm(r)}}function UD(t,e,n){const r=Dt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=Dt(o);c.onlineState=l;let u=!1;c.queries.forEach((d,h)=>{for(const f of h.ba)f.va(l)&&(u=!0)}),u&&EI(c)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function mfe(t,e,n){const r=Dt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Zn(dt.comparator);o=o.insert(i,ps.newNoDocument(i,Pt.min()));const l=Qt().add(i),c=new Z_(Pt.min(),new Map,new Zn(Yt),o,l);await Vz(r,c),r.Ru=r.Ru.remove(i),r.Au.delete(e),TI(r)}else await wA(r.localStore,e,!1).then(()=>NA(r,e,n)).catch(Hm)}async function pfe(t,e){const n=Dt(t),r=e.batch.batchId;try{const s=await Nhe(n.localStore,e);Uz(n,r,null),Bz(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Dv(n,s)}catch(s){await Hm(s)}}async function gfe(t,e,n){const r=Dt(t);try{const s=await function(o,l){const c=Dt(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(h=>(mn(h!==null,37113),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);Uz(r,e,n),Bz(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Dv(r,s)}catch(s){await Hm(s)}}function Bz(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Uz(t,e,n){const r=Dt(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function NA(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||zz(t,r)})}function zz(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(bI(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),TI(t))}function zD(t,e,n){for(const r of n)r instanceof Lz?(t.Vu.addReference(r.key,e),yfe(t,r)):r instanceof $z?(Ge(AI,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||zz(t,r.key)):_t(19791,{wu:r})}function yfe(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(Ge(AI,"New document in limbo: "+n),t.Eu.add(r),TI(t))}function TI(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new dt(In.fromString(e)),r=t.fu.next();t.Au.set(r,new ife(n)),t.Ru=t.Ru.insert(n,r),Tz(t.remoteStore,new yc(co(dI(n.path)),r,"TargetPurposeLimboResolution",q_.ce))}}async function Dv(t,e,n){const r=Dt(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){s.push(u);const h=vI.Es(c.targetId,u);i.push(h)}}))}),await Promise.all(o),r.Pu.J_(s),await async function(c,u){const d=Dt(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>xe.forEach(u,f=>xe.forEach(f.Ts,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>xe.forEach(f.Is,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!Km(h))throw h;Ge(xI,"Failed to update sequence numbers: "+h)}for(const h of u){const f=h.targetId;if(!h.fromCache){const m=d.vs.get(f),b=m.snapshotVersion,g=m.withLastLimboFreeSnapshotVersion(b);d.vs=d.vs.insert(f,g)}}}(r.localStore,i))}async function vfe(t,e){const n=Dt(t);if(!n.currentUser.isEqual(e)){Ge(AI,"User change. New user:",e.toKey());const r=await Nz(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new Be(fe.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Dv(n,r.Ns)}}function xfe(t,e){const n=Dt(t),r=n.Au.get(e);if(r&&r.hu)return Qt().add(r.key);{let s=Qt();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function qz(t){const e=Dt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vz.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xfe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mfe.bind(null,e),e.Pu.J_=nfe.bind(null,e.eventManager),e.Pu.yu=rfe.bind(null,e.eventManager),e}function bfe(t){const e=Dt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pfe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gfe.bind(null,e),e}class F0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=J_(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return jhe(this.persistence,new bhe,e.initialUser,this.serializer)}Cu(e){return new jz(yI.Vi,this.serializer)}Du(e){return new Phe}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}F0.provider={build:()=>new F0};class wfe extends F0{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){mn(this.persistence.referenceDelegate instanceof L0,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ahe(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?zs.withCacheSize(this.cacheSizeBytes):zs.DEFAULT;return new jz(r=>L0.Vi(r,n),this.serializer)}}class SA{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>UD(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=vfe.bind(null,this.syncEngine),await Jhe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new tfe}()}createDatastore(e){const n=J_(e.databaseInfo.databaseId),r=Mhe(e.databaseInfo);return Vhe(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new Uhe(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>UD(this.syncEngine,n,0),function(){return DD.v()?new DD:new Ihe}())}createSyncEngine(e,n){return function(s,i,o,l,c,u,d){const h=new ofe(s,i,o,l,c,u);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Dt(s);Ge(Id,"RemoteStore shutting down."),i.Ea.add(5),await Mv(i),i.Aa.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}SA.provider={build:()=>new SA};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wz{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):hl("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc="FirestoreClient";class _fe{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=ds.UNAUTHENTICATED,this.clientId=aI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Ge(Gc,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Ge(Gc,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=SI(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function D1(t,e){t.asyncQueue.verifyOperationInProgress(),Ge(Gc,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Nz(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function qD(t,e){t.asyncQueue.verifyOperationInProgress();const n=await jfe(t);Ge(Gc,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>$D(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>$D(e.remoteStore,s)),t._onlineComponents=e}async function jfe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ge(Gc,"Using user provided OfflineComponentProvider");try{await D1(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===fe.FAILED_PRECONDITION||s.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Pd("Error using user provided cache. Falling back to memory cache: "+n),await D1(t,new F0)}}else Ge(Gc,"Using default OfflineComponentProvider"),await D1(t,new wfe(void 0));return t._offlineComponents}async function Hz(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ge(Gc,"Using user provided OnlineComponentProvider"),await qD(t,t._uninitializedComponentsProvider._online)):(Ge(Gc,"Using default OnlineComponentProvider"),await qD(t,new SA))),t._onlineComponents}function Nfe(t){return Hz(t).then(e=>e.syncEngine)}async function Kz(t){const e=await Hz(t),n=e.eventManager;return n.onListen=lfe.bind(null,e.syncEngine),n.onUnlisten=dfe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=cfe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=hfe.bind(null,e.syncEngine),n}function Sfe(t,e,n={}){const r=new Zo;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const d=new Wz({next:f=>{d.Nu(),o.enqueueAndForget(()=>Mz(i,h));const m=f.docs.has(l);!m&&f.fromCache?u.reject(new Be(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&c&&c.source==="server"?u.reject(new Be(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new Dz(dI(l.path),d,{includeMetadataChanges:!0,Ka:!0});return Rz(i,h)}(await Kz(t),t.asyncQueue,e,n,r)),r.promise}function Efe(t,e,n={}){const r=new Zo;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const d=new Wz({next:f=>{d.Nu(),o.enqueueAndForget(()=>Mz(i,h)),f.fromCache&&c.source==="server"?u.reject(new Be(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new Dz(l,d,{includeMetadataChanges:!0,Ka:!0});return Rz(i,h)}(await Kz(t),t.asyncQueue,e,n,r)),r.promise}function Afe(t,e){const n=new Zo;return t.asyncQueue.enqueueAndForget(async()=>ffe(await Nfe(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gz(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tfe="ComponentProvider",WD=new Map;function Cfe(t,e,n,r,s){return new Yue(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,Gz(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yz="firestore.googleapis.com",HD=!0;class KD{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Be(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Yz,this.ssl=HD}else this.host=e.host,this.ssl=e.ssl??HD;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_z;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rhe)throw new Be(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Lue("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Gz(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Be(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Be(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Be(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nj{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new KD({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Be(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Be(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new KD(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Aue;switch(r.type){case"firstParty":return new Iue(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Be(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=WD.get(n);r&&(Ge(Tfe,"Removing Datastore"),WD.delete(n),r.terminate())}(this),Promise.resolve()}}function Pfe(t,e,n,r={}){var u;t=ei(t,nj);const s=To(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&($_(`https://${l}`),F_("Firestore",!0)),i.host!==Yz&&i.host!==l&&Pd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!Sd(c,o)&&(t._setSettings(c),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=ds.MOCK_USER;else{d=$6(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Be(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new ds(f)}t._authCredentials=new Tue(new k9(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new uu(this.firestore,e,this._query)}}class pr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pr(this.firestore,e,this._key)}toJSON(){return{type:pr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(kv(n,pr._jsonSchema))return new pr(e,r||null,new dt(In.fromString(n.referencePath)))}}pr._jsonSchemaVersion="firestore/documentReference/1.0",pr._jsonSchema={type:jr("string",pr._jsonSchemaVersion),referencePath:jr("string")};class Rc extends uu{constructor(e,n,r){super(e,n,dI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pr(this.firestore,null,new dt(e))}withConverter(e){return new Rc(this.firestore,e,this._path)}}function ve(t,e,...n){if(t=tn(t),O9("collection","path",e),t instanceof nj){const r=In.fromString(e,...n);return iD(r),new Rc(t,null,r)}{if(!(t instanceof pr||t instanceof Rc))throw new Be(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(In.fromString(e,...n));return iD(r),new Rc(t.firestore,null,r)}}function He(t,e,...n){if(t=tn(t),arguments.length===1&&(e=aI.newId()),O9("doc","path",e),t instanceof nj){const r=In.fromString(e,...n);return aD(r),new pr(t,null,new dt(r))}{if(!(t instanceof pr||t instanceof Rc))throw new Be(fe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(In.fromString(e,...n));return aD(r),new pr(t.firestore,t instanceof Rc?t.converter:null,new dt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD="AsyncQueue";class YD{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ez(this,"async_queue_retry"),this._c=()=>{const r=M1();r&&Ge(GD,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=M1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=M1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Zo;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Km(e))throw e;Ge(GD,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,hl("INTERNAL UNHANDLED ERROR: ",QD(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=NI.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&_t(47125,{Pc:QD(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function QD(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class du extends nj{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new YD,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new YD(e),this._firestoreClient=void 0,await e}}}function Ife(t,e){const n=typeof t=="object"?t:Av(),r=typeof t=="string"?t:I0,s=Ev(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=zP("firestore");i&&Pfe(s,...i)}return s}function rj(t){if(t._terminated)throw new Be(fe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||kfe(t),t._firestoreClient}function kfe(t){var r,s,i,o;const e=t._freezeSettings(),n=Cfe(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new _fe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Va(ns.fromBase64String(e))}catch(n){throw new Be(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Va(ns.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Va._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(kv(e,Va._jsonSchema))return Va.fromBase64String(e.bytes)}}Va._jsonSchemaVersion="firestore/bytes/1.0",Va._jsonSchema={type:jr("string",Va._jsonSchemaVersion),bytes:jr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Be(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function Jd(){return new Lv(dA)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Be(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Be(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Yt(this._lat,e._lat)||Yt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ho._jsonSchemaVersion}}static fromJSON(e){if(kv(e,ho._jsonSchema))return new ho(e.latitude,e.longitude)}}ho._jsonSchemaVersion="firestore/geoPoint/1.0",ho._jsonSchema={type:jr("string",ho._jsonSchemaVersion),latitude:jr("number"),longitude:jr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ti._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(kv(e,Ti._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ti(e.vectorValues);throw new Be(fe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ti._jsonSchemaVersion="firestore/vectorValue/1.0",Ti._jsonSchema={type:jr("string",Ti._jsonSchemaVersion),vectorValues:jr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ofe=/^__.*__$/;class Rfe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new cu(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ov(e,this.data,n,this.fieldTransforms)}}class Qz{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new cu(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Xz(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t(40011,{dataSource:t})}}class CI{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new CI({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return V0(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Xz(this.dataSource)&&Ofe.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class Mfe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||J_(e)}createContext(e,n,r,s=!1){return new CI({dataSource:e,methodName:n,targetDoc:r,path:Jr.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $v(t){const e=t._freezeSettings(),n=J_(t._databaseId);return new Mfe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function PI(t,e,n,r,s,i={}){const o=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);kI("Data must be an object, but it was:",o,r);const l=e8(r,o);let c,u;if(i.merge)c=new pa(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const f=kd(e,h,n);if(!o.contains(f))throw new Be(fe.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);r8(d,f)||d.push(f)}c=new pa(d),u=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=o.fieldTransforms;return new Rfe(new Ys(l),c,u)}class aj extends sj{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof aj}}class II extends sj{_toFieldTransform(e){return new jde(e.path,new xy)}isEqual(e){return e instanceof II}}function Zz(t,e,n,r){const s=t.createContext(1,e,n);kI("Data must be an object, but it was:",s,r);const i=[],o=Ys.empty();lu(r,(c,u)=>{const d=n8(e,c,n);u=tn(u);const h=s.childContextForFieldPath(d);if(u instanceof aj)i.push(d);else{const f=Fv(u,h);f!=null&&(i.push(d),o.set(d,f))}});const l=new pa(i);return new Qz(o,l,s.fieldTransforms)}function Jz(t,e,n,r,s,i){const o=t.createContext(1,e,n),l=[kd(e,r,n)],c=[s];if(i.length%2!=0)throw new Be(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)l.push(kd(e,i[f])),c.push(i[f+1]);const u=[],d=Ys.empty();for(let f=l.length-1;f>=0;--f)if(!r8(u,l[f])){const m=l[f];let b=c[f];b=tn(b);const g=o.childContextForFieldPath(m);if(b instanceof aj)u.push(m);else{const x=Fv(b,g);x!=null&&(u.push(m),d.set(m,x))}}const h=new pa(u);return new Qz(d,h,o.fieldTransforms)}function Dfe(t,e,n,r=!1){return Fv(n,t.createContext(r?4:3,e))}function Fv(t,e){if(t8(t=tn(t)))return kI("Unsupported field value:",e,t),e8(t,e);if(t instanceof sj)return function(r,s){if(!Xz(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=Fv(l,s.childContextForArray(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=tn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return bde(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Fn.fromDate(r);return{timestampValue:D0(s.serializer,i)}}if(r instanceof Fn){const i=new Fn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:D0(s.serializer,i)}}if(r instanceof ho)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Va)return{bytesValue:mz(s.serializer,r._byteString)};if(r instanceof pr){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:pI(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ti)return function(o,l){const c=o instanceof Ti?o.toArray():o;return{mapValue:{fields:{[U9]:{stringValue:q9},[k0]:{arrayValue:{values:c.map(d=>{if(typeof d!="number")throw l.createError("VectorValues must only contain numeric values.");return hI(l.serializer,d)})}}}}}}(r,s);if(wz(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${z_(r)}`)}(t,e)}function e8(t,e){const n={};return D9(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lu(t,(r,s)=>{const i=Fv(s,e.childContextForField(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function t8(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Fn||t instanceof ho||t instanceof Va||t instanceof pr||t instanceof sj||t instanceof Ti||wz(t))}function kI(t,e,n){if(!t8(n)||!R9(n)){const r=z_(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function kd(t,e,n){if((e=tn(e))instanceof Lv)return e._internalPath;if(typeof e=="string")return n8(t,e);throw V0("Field path arguments must be of type string or ",t,!1,void 0,n)}const Lfe=new RegExp("[~\\*/\\[\\]]");function n8(t,e,n){if(e.search(Lfe)>=0)throw V0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Lv(...e.split("."))._internalPath}catch{throw V0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function V0(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Be(fe.INVALID_ARGUMENT,l+t+c)}function r8(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $fe{convertValue(e,n="none"){switch(Hc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Wc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _t(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return lu(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[k0].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>hr(o.doubleValue));return new Ti(n)}convertGeoPoint(e){return new ho(hr(e.latitude),hr(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=H_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(py(e));default:return null}}convertTimestamp(e){const n=qc(e);return new Fn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=In.fromString(e);mn(bz(r),9688,{name:e});const s=new gy(r.get(1),r.get(3)),i=new dt(r.popFirst(5));return s.isEqual(n)||hl(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8 extends $fe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Va(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pr(this.firestore,null,n)}}function ye(){return new II("serverTimestamp")}const XD="@firebase/firestore",ZD="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new pr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Ffe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(kd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Ffe extends a8{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vfe(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Be(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class OI{}class RI extends OI{}function Ce(t,e,...n){let r=[];e instanceof OI&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof MI).length,l=i.filter(c=>c instanceof ij).length;if(o>1||o>0&&l>0)throw new Be(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class ij extends RI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ij(e,n,r)}_apply(e){const n=this._parse(e);return i8(e._query,n),new uu(e.firestore,e.converter,gA(e._query,n))}_parse(e){const n=$v(e.firestore);return function(i,o,l,c,u,d,h){let f;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Be(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){e4(h,d);const b=[];for(const g of h)b.push(JD(c,i,g));f={arrayValue:{values:b}}}else f=JD(c,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||e4(h,d),f=Dfe(l,o,h,d==="in"||d==="not-in");return _r.create(u,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ge(t,e,n){const r=e,s=kd("where",t);return ij._create(s,r,n)}class MI extends OI{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new MI(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Di.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)i8(o,c),o=gA(o,c)}(e._query,n),new uu(e.firestore,e.converter,gA(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class DI extends RI{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new DI(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Be(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Be(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vy(i,o)}(e._query,this._field,this._direction);return new uu(e.firestore,e.converter,hde(e._query,n))}}function oj(t,e="asc"){const n=e,r=kd("orderBy",t);return DI._create(r,n)}class LI extends RI{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new LI(e,n,r)}_apply(e){return new uu(e.firestore,e.converter,R0(e._query,this._limit,this._limitType))}}function Ws(t){return $ue("limit",t),LI._create("limit",t,"F")}function JD(t,e,n){if(typeof(n=tn(n))=="string"){if(n==="")throw new Be(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Z9(e)&&n.indexOf("/")!==-1)throw new Be(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(In.fromString(n));if(!dt.isDocumentKey(r))throw new Be(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return mD(t,new dt(r))}if(n instanceof pr)return mD(t,n._key);throw new Be(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${z_(n)}.`)}function e4(t,e){if(!Array.isArray(t)||t.length===0)throw new Be(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function i8(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Be(fe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Be(fe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function $I(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class cg{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class id extends a8{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Db(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(kd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Be(fe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=id._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}id._jsonSchemaVersion="firestore/documentSnapshot/1.0",id._jsonSchema={type:jr("string",id._jsonSchemaVersion),bundleSource:jr("string","DocumentSnapshot"),bundleName:jr("string"),bundle:jr("string")};class Db extends id{data(e={}){return super.data(e)}}class cf{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new cg(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Db(this._firestore,this._userDataWriter,r.key,r,new cg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Be(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new Db(s._firestore,s._userDataWriter,l.doc.key,l.doc,new cg(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Db(s._firestore,s._userDataWriter,l.doc.key,l.doc,new cg(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:Bfe(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Be(fe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=cf._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=aI.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Bfe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cf._jsonSchemaVersion="firestore/querySnapshot/1.0",cf._jsonSchema={type:jr("string",cf._jsonSchemaVersion),bundleSource:jr("string","QuerySnapshot"),bundleName:jr("string"),bundle:jr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ufe{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=$v(e)}set(e,n,r){this._verifyNotCommitted();const s=L1(e,this._firestore),i=$I(s.converter,n,r),o=PI(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,ks.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=L1(e,this._firestore);let o;return o=typeof(n=tn(n))=="string"||n instanceof Lv?Jz(this._dataReader,"WriteBatch.update",i._key,n,r,s):Zz(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,ks.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=L1(e,this._firestore);return this._mutations=this._mutations.concat(new X_(n._key,ks.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Be(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function L1(t,e){if((t=tn(t)).firestore!==e)throw new Be(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _a(t){t=ei(t,pr);const e=ei(t.firestore,du),n=rj(e);return Sfe(n,t._key).then(r=>zfe(e,t,r))}function $e(t){t=ei(t,uu);const e=ei(t.firestore,du),n=rj(e),r=new s8(e);return Vfe(t._query),Efe(n,t._query).then(s=>new cf(e,r,t,s))}function or(t,e,n){t=ei(t,pr);const r=ei(t.firestore,du),s=$I(t.converter,e,n),i=$v(r);return Vv(r,[PI(i,"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ks.none())])}function wo(t,e,n,...r){t=ei(t,pr);const s=ei(t.firestore,du),i=$v(s);let o;return o=typeof(e=tn(e))=="string"||e instanceof Lv?Jz(i,"updateDoc",t._key,e,n,r):Zz(i,"updateDoc",t._key,e),Vv(s,[o.toMutation(t._key,ks.exists(!0))])}function Li(t){return Vv(ei(t.firestore,du),[new X_(t._key,ks.none())])}function jn(t,e){const n=ei(t.firestore,du),r=He(t),s=$I(t.converter,e),i=$v(t.firestore);return Vv(n,[PI(i,"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,ks.exists(!1))]).then(()=>r)}function Vv(t,e){const n=rj(t);return Afe(n,e)}function zfe(t,e,n){const r=n.docs.get(e._key),s=new s8(t);return new id(t,s,e._key,r,new cg(n.hasPendingWrites,n.fromCache),e.converter)}function ml(t){return t=ei(t,du),rj(t),new Ufe(t,e=>Vv(t,e))}(function(e,n=!0){Eue(Qd),Uc(new cl("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new du(new Cue(r.getProvider("auth-internal")),new kue(o,r.getProvider("app-check-internal")),Que(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Ka(XD,ZD,e),Ka(XD,ZD,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qfe="type.googleapis.com/google.protobuf.Int64Value",Wfe="type.googleapis.com/google.protobuf.UInt64Value";function o8(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function B0(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>B0(e));if(typeof t=="function"||typeof t=="object")return o8(t,e=>B0(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Gf(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case qfe:case Wfe:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Gf(e)):typeof t=="function"||typeof t=="object"?o8(t,e=>Gf(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xs extends $i{constructor(e,n,r){super(`${FI}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Xs.prototype)}}function Hfe(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function U0(t,e){let n=Hfe(t),r=n,s;try{const i=e&&e.error;if(i){const o=i.status;if(typeof o=="string"){if(!t4[o])return new Xs("internal","internal");n=t4[o],r=o}const l=i.message;typeof l=="string"&&(r=l),s=i.details,s!==void 0&&(s=Gf(s))}}catch{}return n==="ok"?null:new Xs(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kfe{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Gs(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="us-central1",Gfe=/^data: (.*?)(?:\n|$)/;function Yfe(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Xs("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class Qfe{constructor(e,n,r,s,i=EA,o=(...l)=>fetch(...l)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new Kfe(e,n,r,s),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(i);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=EA}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Xfe(t,e,n){const r=To(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&($_(t.emulatorOrigin+"/backends"),F_("Functions",!0))}function Zfe(t,e,n){const r=s=>eme(t,e,s,{});return r.stream=(s,i)=>nme(t,e,s,i),r}function l8(t){return t.emulatorOrigin&&To(t.emulatorOrigin)?"include":void 0}async function Jfe(t,e,n,r,s){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:l8(s)})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function c8(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function eme(t,e,n,r){const s=t._url(e);return tme(t,s,n,r)}async function tme(t,e,n,r){n=B0(n);const s={data:n},i=await c8(t,r),o=r.timeout||7e4,l=Yfe(o),c=await Promise.race([Jfe(e,s,i,t.fetchImpl,t),l.promise,t.cancelAllRequests]);if(l.cancel(),!c)throw new Xs("cancelled","Firebase Functions instance was deleted.");const u=U0(c.status,c.json);if(u)throw u;if(!c.json)throw new Xs("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new Xs("internal","Response is missing data field.");return{data:Gf(d)}}function nme(t,e,n,r){const s=t._url(e);return rme(t,s,n,r||{})}async function rme(t,e,n,r){var f;n=B0(n);const s={data:n},i=await c8(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let o;try{o=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:i,signal:r==null?void 0:r.signal,credentials:l8(t)})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const g=new Xs("cancelled","Request was cancelled.");return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}const b=U0(0,null);return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}let l,c;const u=new Promise((m,b)=>{l=m,c=b});(f=r==null?void 0:r.signal)==null||f.addEventListener("abort",()=>{const m=new Xs("cancelled","Request was cancelled.");c(m)});const d=o.body.getReader(),h=sme(d,l,c,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const m=h.getReader();return{async next(){const{value:b,done:g}=await m.read();return{value:b,done:g}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:u}}function sme(t,e,n,r){const s=(o,l)=>{const c=o.match(Gfe);if(!c)return;const u=c[1];try{const d=JSON.parse(u);if("result"in d){e(Gf(d.result));return}if("message"in d){l.enqueue(Gf(d.message));return}if("error"in d){const h=U0(0,d);l.error(h),n(h);return}}catch(d){if(d instanceof Xs){l.error(d),n(d);return}}},i=new TextDecoder;return new ReadableStream({start(o){let l="";return c();async function c(){if(r!=null&&r.aborted){const u=new Xs("cancelled","Request was cancelled");return o.error(u),n(u),Promise.resolve()}try{const{value:u,done:d}=await t.read();if(d){l.trim()&&s(l.trim(),o),o.close();return}if(r!=null&&r.aborted){const f=new Xs("cancelled","Request was cancelled");o.error(f),n(f),await t.cancel();return}l+=i.decode(u,{stream:!0});const h=l.split(`
`);l=h.pop()||"";for(const f of h)f.trim()&&s(f.trim(),o);return c()}catch(u){const d=u instanceof Xs?u:U0(0,null);o.error(d),n(d)}}},cancel(){return t.cancel()}})}const n4="@firebase/functions",r4="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ame="auth-internal",ime="app-check-internal",ome="messaging-internal";function lme(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(ame),o=n.getProvider(ome),l=n.getProvider(ime);return new Qfe(s,i,o,l,r)};Uc(new cl(FI,e,"PUBLIC").setMultipleInstances(!0)),Ka(n4,r4,t),Ka(n4,r4,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cme(t=Av(),e=EA){const r=Ev(tn(t),FI).getImmediate({identifier:e}),s=zP("functions");return s&&ume(r,...s),r}function ume(t,e,n){Xfe(tn(t),e,n)}function dme(t,e,n){return Zfe(tn(t),e)}lme();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u8="firebasestorage.googleapis.com",d8="storageBucket",hme=2*60*1e3,fme=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends $i{constructor(e,n,r=0){super($1(e),`Firebase Storage: ${n} (${$1(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return $1(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ur;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ur||(ur={}));function $1(t){return"storage/"+t}function VI(){const t="An unknown error occurred, please check the error payload for server response.";return new dr(ur.UNKNOWN,t)}function mme(t){return new dr(ur.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function pme(t){return new dr(ur.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function gme(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new dr(ur.UNAUTHENTICATED,t)}function yme(){return new dr(ur.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function vme(t){return new dr(ur.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function xme(){return new dr(ur.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bme(){return new dr(ur.CANCELED,"User canceled the upload/download.")}function wme(t){return new dr(ur.INVALID_URL,"Invalid URL '"+t+"'.")}function _me(t){return new dr(ur.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function jme(){return new dr(ur.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+d8+"' property when initializing the app?")}function Nme(){return new dr(ur.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Sme(){return new dr(ur.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Eme(t){return new dr(ur.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function AA(t){return new dr(ur.INVALID_ARGUMENT,t)}function h8(){return new dr(ur.APP_DELETED,"The Firebase app was deleted.")}function Ame(t){return new dr(ur.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ig(t,e){return new dr(ur.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Dp(t){throw new dr(ur.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ga.makeFromUrl(e,n)}catch{return new ga(e,"")}if(r.path==="")return r;throw _me(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(T){T.path.charAt(T.path.length-1)==="/"&&(T.path_=T.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(T){T.path_=decodeURIComponent(T.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${s}/o${f}`,"i"),b={bucket:1,path:3},g=n===u8?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",w=new RegExp(`^https?://${g}/${s}/${x}`,"i"),A=[{regex:l,indices:c,postModify:i},{regex:m,indices:b,postModify:u},{regex:w,indices:{bucket:1,path:2},postModify:u}];for(let T=0;T<A.length;T++){const v=A[T],S=v.regex.exec(e);if(S){const j=S[v.indices.bucket];let p=S[v.indices.path];p||(p=""),r=new ga(j,p),v.postModify(r);break}}if(r==null)throw wme(e);return r}}class Tme{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cme(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function c(){return l===2}let u=!1;function d(...x){u||(u=!0,e.apply(null,x))}function h(x){s=setTimeout(()=>{s=null,t(m,c())},x)}function f(){i&&clearTimeout(i)}function m(x,...w){if(u){f();return}if(x){f(),d.call(null,x,...w);return}if(c()||o){f(),d.call(null,x,...w);return}r<64&&(r*=2);let A;l===1?(l=2,A=0):A=(r+Math.random())*1e3,h(A)}let b=!1;function g(x){b||(b=!0,f(),!u&&(s!==null?(x||(l=2),clearTimeout(s),h(0)):x||(l=1)))}return h(0),i=setTimeout(()=>{o=!0,g(!0)},n),g}function Pme(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ime(t){return t!==void 0}function kme(t){return typeof t=="object"&&!Array.isArray(t)}function BI(t){return typeof t=="string"||t instanceof String}function s4(t){return UI()&&t instanceof Blob}function UI(){return typeof Blob<"u"}function a4(t,e,n,r){if(r<e)throw AA(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw AA(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function f8(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var od;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(od||(od={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ome(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rme{constructor(e,n,r,s,i,o,l,c,u,d,h,f=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,g)=>{this.resolve_=b,this.reject_=g,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new qx(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===od.NO_ERROR,c=i.getStatus();if(!l||Ome(c,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===od.ABORT;r(!1,new qx(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new qx(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());Ime(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=VI();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?h8():bme();o(c)}else{const c=xme();o(c)}};this.canceled_?n(!1,new qx(!1,null,!0)):this.backoffId_=Cme(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Pme(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qx{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Mme(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Dme(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Lme(t,e){e&&(t["X-Firebase-GMPID"]=e)}function $me(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Fme(t,e,n,r,s,i,o=!0,l=!1){const c=f8(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return Lme(d,e),Mme(d,n),Dme(d,i),$me(d,r),new Rme(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vme(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Bme(...t){const e=Vme();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(UI())return new Blob(t);throw new dr(ur.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Ume(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zme(t){if(typeof atob>"u")throw Eme("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class F1{constructor(e,n){this.data=e,this.contentType=n||null}}function qme(t,e){switch(t){case eo.RAW:return new F1(m8(e));case eo.BASE64:case eo.BASE64URL:return new F1(p8(t,e));case eo.DATA_URL:return new F1(Hme(e),Kme(e))}throw VI()}function m8(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Wme(t){let e;try{e=decodeURIComponent(t)}catch{throw Ig(eo.DATA_URL,"Malformed data URL.")}return m8(e)}function p8(t,e){switch(t){case eo.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Ig(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case eo.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Ig(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=zme(e)}catch(s){throw s.message.includes("polyfill")?s:Ig(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class g8{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ig(eo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Gme(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Hme(t){const e=new g8(t);return e.base64?p8(eo.BASE64,e.rest):Wme(e.rest)}function Kme(t){return new g8(t).contentType}function Gme(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,n){let r=0,s="";s4(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(s4(this.data_)){const r=this.data_,s=Ume(r,e,n);return s===null?null:new nc(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new nc(r,!0)}}static getBlob(...e){if(UI()){const n=e.map(r=>r instanceof nc?r.data_:r);return new nc(Bme.apply(null,n))}else{const n=e.map(o=>BI(o)?qme(eo.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[i++]=o[l]}),new nc(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y8(t){let e;try{e=JSON.parse(t)}catch{return null}return kme(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yme(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Qme(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function v8(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xme(t,e){return e}class ws{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||Xme}}let Wx=null;function Zme(t){return!BI(t)||t.length<2?t:v8(t)}function x8(){if(Wx)return Wx;const t=[];t.push(new ws("bucket")),t.push(new ws("generation")),t.push(new ws("metageneration")),t.push(new ws("name","fullPath",!0));function e(i,o){return Zme(o)}const n=new ws("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new ws("size");return s.xform=r,t.push(s),t.push(new ws("timeCreated")),t.push(new ws("updated")),t.push(new ws("md5Hash",null,!0)),t.push(new ws("cacheControl",null,!0)),t.push(new ws("contentDisposition",null,!0)),t.push(new ws("contentEncoding",null,!0)),t.push(new ws("contentLanguage",null,!0)),t.push(new ws("contentType",null,!0)),t.push(new ws("metadata","customMetadata",!0)),Wx=t,Wx}function Jme(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new ga(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function epe(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return Jme(r,t),r}function b8(t,e,n){const r=y8(e);return r===null?null:epe(t,r,n)}function tpe(t,e,n,r){const s=y8(e);if(s===null||!BI(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(u=>{const d=t.bucket,h=t.fullPath,f="/b/"+o(d)+"/o/"+o(h),m=zI(f,n,r),b=f8({alt:"media",token:u});return m+b})[0]}function npe(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class w8{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _8(t){if(!t)throw VI()}function rpe(t,e){function n(r,s){const i=b8(t,s,e);return _8(i!==null),i}return n}function spe(t,e){function n(r,s){const i=b8(t,s,e);return _8(i!==null),tpe(i,s,t.host,t._protocol)}return n}function j8(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=yme():s=gme():n.getStatus()===402?s=pme(t.bucket):n.getStatus()===403?s=vme(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function ape(t){const e=j8(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=mme(t.path)),i.serverResponse=s.serverResponse,i}return n}function ipe(t,e,n){const r=e.fullServerUrl(),s=zI(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new w8(s,i,spe(t,n),o);return l.errorHandler=ape(e),l}function ope(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function lpe(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=ope(null,e)),r}function cpe(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let A="";for(let T=0;T<2;T++)A=A+Math.random().toString().slice(2);return A}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=lpe(e,r,s),d=npe(u,n),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,f=`\r
--`+c+"--",m=nc.getBlob(h,r,f);if(m===null)throw Nme();const b={name:u.fullPath},g=zI(i,t.host,t._protocol),x="POST",w=t.maxUploadRetryTime,y=new w8(g,x,rpe(t,n),w);return y.urlParams=b,y.headers=o,y.body=m.uploadData(),y.errorHandler=j8(e),y}class upe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=od.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=od.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=od.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw Dp("cannot .send() more than once");if(To(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Dp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Dp("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Dp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Dp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class dpe extends upe{initXhr(){this.xhr_.responseType="text"}}function N8(){return new dpe}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,n){this._service=e,n instanceof ga?this._location=n:this._location=ga.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Od(e,n)}get root(){const e=new ga(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return v8(this._location.path)}get storage(){return this._service}get parent(){const e=Yme(this._location.path);if(e===null)return null;const n=new ga(this._location.bucket,e);return new Od(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Ame(e)}}function hpe(t,e,n){t._throwIfRoot("uploadBytes");const r=cpe(t.storage,t._location,x8(),new nc(e,!0),n);return t.storage.makeRequestWithTokens(r,N8).then(s=>({metadata:s,ref:t}))}function fpe(t){t._throwIfRoot("getDownloadURL");const e=ipe(t.storage,t._location,x8());return t.storage.makeRequestWithTokens(e,N8).then(n=>{if(n===null)throw Sme();return n})}function mpe(t,e){const n=Qme(t._location.path,e),r=new ga(t._location.bucket,n);return new Od(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ppe(t){return/^[A-Za-z]+:\/\//.test(t)}function gpe(t,e){return new Od(t,e)}function S8(t,e){if(t instanceof qI){const n=t;if(n._bucket==null)throw jme();const r=new Od(n,n._bucket);return e!=null?S8(r,e):r}else return e!==void 0?mpe(t,e):t}function ype(t,e){if(e&&ppe(e)){if(t instanceof qI)return gpe(t,e);throw AA("To use ref(service, url), the first argument must be a Storage instance.")}else return S8(t,e)}function i4(t,e){const n=e==null?void 0:e[d8];return n==null?null:ga.makeFromBucketSpec(n,t)}function vpe(t,e,n,r={}){t.host=`${e}:${n}`;const s=To(e);s&&($_(`https://${t.host}/b`),F_("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:$6(i,t.app.options.projectId))}class qI{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=u8,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=hme,this._maxUploadRetryTime=fme,this._requests=new Set,s!=null?this._bucket=ga.makeFromBucketSpec(s,this._host):this._bucket=i4(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ga.makeFromBucketSpec(this._url,e):this._bucket=i4(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){a4("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){a4("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Gs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Od(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new Tme(h8());{const o=Fme(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const o4="@firebase/storage",l4="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E8="storage";function xpe(t,e,n){return t=tn(t),hpe(t,e,n)}function bpe(t){return t=tn(t),fpe(t)}function wpe(t,e){return t=tn(t),ype(t,e)}function _pe(t=Av(),e){t=tn(t);const r=Ev(t,E8).getImmediate({identifier:e}),s=zP("storage");return s&&jpe(r,...s),r}function jpe(t,e,n,r={}){vpe(t,e,n,r)}function Npe(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new qI(n,r,s,e,Qd)}function Spe(){Uc(new cl(E8,Npe,"PUBLIC").setMultipleInstances(!0)),Ka(o4,l4,""),Ka(o4,l4,"esm2020")}Spe();const A8={apiKey:"AIzaSyBDWUqW91mg2wvCJ6lAJ1wrBb5az6elfUU",authDomain:"zedbooks-53601.firebaseapp.com",projectId:"zedbooks-53601",storageBucket:"zedbooks-53601.firebasestorage.app",messagingSenderId:"938148277875",appId:"1:938148277875:web:c98c15ac02f3625d20c406"},Epe="us-central1",Ape=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"],fo=Ape.every(t=>{const e=A8[t];return!!e&&!e.includes("PLACEHOLDER")}),Tn=()=>{if(!fo)throw new Error("Firebase is not configured. Set VITE_FIREBASE_* environment variables before running the migrated backend.")},lj=Foe().length?Av():B6(A8),Lb=Nue(lj),te=Ife(lj),Tpe=cme(lj,Epe),Cpe=_pe(lj),Gn=async(t,e)=>(Tn(),(await dme(Tpe,t)(e)).data),hh=()=>Lb,Es={async signIn(t,e){return Tn(),ace(hh(),t,e)},async signUp(t){Tn();const e=await sce(hh(),t.email,t.password);return t.fullName&&await oce(e.user,{displayName:t.fullName}),await KM(e.user),await Gn("bootstrapUserAccount",{...t,uid:e.user.uid}),e},async resendVerificationEmail(){Tn();const t=this.getCurrentUser();if(!t)throw new Error("No authenticated user found.");await KM(t)},async sendResetPasswordEmail(t){Tn(),await Jle(hh(),t)},async updateUserPassword(t){Tn();const e=this.getCurrentUser();if(!e)throw new Error("No authenticated user found.");await lce(e,t)},async logout(){Tn(),await fce(hh())},async getIdToken(t=!1){const e=this.getCurrentUser();return e?e.getIdToken(t):null},getCurrentUser(){return fo?hh().currentUser:null},onAuthStateChanged(t){return fo?{unsubscribe:hce(hh(),t)}:(t(null),{unsubscribe:()=>{}})},async sendInvitation(t){Tn(),await Gn("createInvitation",t)},async acceptInvitation(t){return Tn(),Gn("acceptInvitation",{token:t})},async ensureCurrentMembership(){return Tn(),Gn("ensureCurrentMembership",{})}},T8=N.createContext(void 0),V1=t=>({id:t.uid,uid:t.uid,email:t.email,displayName:t.displayName,phoneNumber:t.phoneNumber,emailVerified:t.emailVerified}),B1=async t=>({userId:t.uid,email:t.email,emailVerified:t.emailVerified,idToken:await t.getIdToken()});function Ppe({children:t}){const[e,n]=N.useState(null),[r,s]=N.useState(null),[i,o]=N.useState(!0),l=N.useCallback(()=>{n(null),s(null)},[]),c=N.useCallback(async()=>{if(!fo){l();return}try{const h=Es.getCurrentUser();if(!h){l();return}await h.reload();const f=Es.getCurrentUser();if(!f){l();return}s(V1(f)),n(await B1(f))}catch(h){l(),console.error("Failed to refresh Firebase session:",h)}},[l]),u=N.useCallback(async()=>{try{fo&&await Es.logout()}catch(h){console.error("Firebase sign out failed:",h)}finally{l(),Z.success("Signed out successfully")}},[l]);N.useEffect(()=>{let h=!0;if(!fo){o(!1);return}const f=Es.getCurrentUser();f?(s(V1(f)),B1(f).then(b=>{h&&n(b)}).finally(()=>{h&&o(!1)})):o(!1);const m=Es.onAuthStateChanged(async b=>{if(h){if(!b){l(),o(!1);return}s(V1(b)),n(await B1(b)),o(!1)}});return()=>{h=!1,m.unsubscribe()}},[l]);const d={session:e,user:r,isLoading:i,isAuthenticated:!!(e&&r),signOut:u,refreshSession:c};return a.jsx(T8.Provider,{value:d,children:t})}function ct(){const t=N.useContext(T8);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const WI=Yd("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),G=N.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?Gd:"button";return a.jsx(o,{className:pe(WI({variant:e,size:n,className:t})),ref:i,...s})});G.displayName="Button";const X=N.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:pe("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));X.displayName="Card";const ee=N.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:pe("flex flex-col space-y-1.5 p-6",t),...e}));ee.displayName="CardHeader";const ne=N.forwardRef(({className:t,...e},n)=>a.jsx("h3",{ref:n,className:pe("text-2xl font-semibold leading-none tracking-tight",t),...e}));ne.displayName="CardTitle";const jt=N.forwardRef(({className:t,...e},n)=>a.jsx("p",{ref:n,className:pe("text-sm text-muted-foreground",t),...e}));jt.displayName="CardDescription";const re=N.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:pe("p-6 pt-0",t),...e}));re.displayName="CardContent";const Ipe=N.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:pe("flex items-center p-6 pt-0",t),...e}));Ipe.displayName="CardFooter";class kpe extends N.Component{constructor(){super(...arguments);fx(this,"state",{hasError:!1,error:null,errorInfo:null});fx(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});fx(this,"handleGoHome",()=>{window.location.href="/"})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r),this.setState({errorInfo:r})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:a.jsxs(X,{className:"w-full max-w-md",children:[a.jsxs(ee,{className:"text-center",children:[a.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-destructive/10",children:a.jsx(Oi,{className:"h-6 w-6 text-destructive"})}),a.jsx(ne,{children:"Something went wrong"}),a.jsx(jt,{children:"An unexpected error occurred. Please try again or return to the home page."})]}),a.jsxs(re,{className:"space-y-4",children:[!1,a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(G,{onClick:this.handleRetry,className:"flex-1",children:[a.jsx(CE,{className:"mr-2 h-4 w-4"}),"Try Again"]}),a.jsxs(G,{onClick:this.handleGoHome,variant:"outline",className:"flex-1",children:[a.jsx(wte,{className:"mr-2 h-4 w-4"}),"Go Home"]})]})]})]})}):this.props.children}}function uf({message:t="Loading...",className:e,size:n="md",fullScreen:r=!1}){const s={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"},i=a.jsxs("div",{className:pe("flex flex-col items-center justify-center gap-3",e),children:[a.jsx(Pn,{className:pe("animate-spin text-primary",s[n])}),t&&a.jsx("p",{className:"text-sm text-muted-foreground animate-pulse",children:t})]});return r?a.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-background/80 backdrop-blur-sm z-50",children:i}):i}var Ope=N.createContext(void 0);function Bv(t){const e=N.useContext(Ope);return t||e||"ltr"}var U1=0;function HI(){N.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??c4()),document.body.insertAdjacentElement("beforeend",t[1]??c4()),U1++,()=>{U1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),U1--}},[])}function c4(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var z1="focusScope.autoFocusOnMount",q1="focusScope.autoFocusOnUnmount",u4={bubbles:!1,cancelable:!0},Rpe="FocusScope",cj=N.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[l,c]=N.useState(null),u=ir(s),d=ir(i),h=N.useRef(null),f=Mt(e,g=>c(g)),m=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(r){let g=function(A){if(m.paused||!l)return;const T=A.target;l.contains(T)?h.current=T:zl(h.current,{select:!0})},x=function(A){if(m.paused||!l)return;const T=A.relatedTarget;T!==null&&(l.contains(T)||zl(h.current,{select:!0}))},w=function(A){if(document.activeElement===document.body)for(const v of A)v.removedNodes.length>0&&zl(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",x);const y=new MutationObserver(w);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",x),y.disconnect()}}},[r,l,m.paused]),N.useEffect(()=>{if(l){h4.add(m);const g=document.activeElement;if(!l.contains(g)){const w=new CustomEvent(z1,u4);l.addEventListener(z1,u),l.dispatchEvent(w),w.defaultPrevented||(Mpe(Vpe(C8(l)),{select:!0}),document.activeElement===g&&zl(l))}return()=>{l.removeEventListener(z1,u),setTimeout(()=>{const w=new CustomEvent(q1,u4);l.addEventListener(q1,d),l.dispatchEvent(w),w.defaultPrevented||zl(g??document.body,{select:!0}),l.removeEventListener(q1,d),h4.remove(m)},0)}}},[l,u,d,m]);const b=N.useCallback(g=>{if(!n&&!r||m.paused)return;const x=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,w=document.activeElement;if(x&&w){const y=g.currentTarget,[A,T]=Dpe(y);A&&T?!g.shiftKey&&w===T?(g.preventDefault(),n&&zl(A,{select:!0})):g.shiftKey&&w===A&&(g.preventDefault(),n&&zl(T,{select:!0})):w===y&&g.preventDefault()}},[n,r,m.paused]);return a.jsx(Je.div,{tabIndex:-1,...o,ref:f,onKeyDown:b})});cj.displayName=Rpe;function Mpe(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(zl(r,{select:e}),document.activeElement!==n)return}function Dpe(t){const e=C8(t),n=d4(e,t),r=d4(e.reverse(),t);return[n,r]}function C8(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function d4(t,e){for(const n of t)if(!Lpe(n,{upTo:e}))return n}function Lpe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function $pe(t){return t instanceof HTMLInputElement&&"select"in t}function zl(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&$pe(t)&&e&&t.select()}}var h4=Fpe();function Fpe(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=f4(t,e),t.unshift(e)},remove(e){var n;t=f4(t,e),(n=t[0])==null||n.resume()}}}function f4(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Vpe(t){return t.filter(e=>e.tagName!=="A")}var W1="rovingFocusGroup.onEntryFocus",Bpe={bubbles:!1,cancelable:!0},Uv="RovingFocusGroup",[TA,P8,Upe]=N_(Uv),[zpe,uj]=rs(Uv,[Upe]),[qpe,Wpe]=zpe(Uv),I8=N.forwardRef((t,e)=>a.jsx(TA.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(TA.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(Hpe,{...t,ref:e})})}));I8.displayName=Uv;var Hpe=N.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,f=N.useRef(null),m=Mt(e,f),b=Bv(i),[g,x]=Ii({prop:o,defaultProp:l??null,onChange:c,caller:Uv}),[w,y]=N.useState(!1),A=ir(u),T=P8(n),v=N.useRef(!1),[S,j]=N.useState(0);return N.useEffect(()=>{const p=f.current;if(p)return p.addEventListener(W1,A),()=>p.removeEventListener(W1,A)},[A]),a.jsx(qpe,{scope:n,orientation:r,dir:b,loop:s,currentTabStopId:g,onItemFocus:N.useCallback(p=>x(p),[x]),onItemShiftTab:N.useCallback(()=>y(!0),[]),onFocusableItemAdd:N.useCallback(()=>j(p=>p+1),[]),onFocusableItemRemove:N.useCallback(()=>j(p=>p-1),[]),children:a.jsx(Je.div,{tabIndex:w||S===0?-1:0,"data-orientation":r,...h,ref:m,style:{outline:"none",...t.style},onMouseDown:Pe(t.onMouseDown,()=>{v.current=!0}),onFocus:Pe(t.onFocus,p=>{const E=!v.current;if(p.target===p.currentTarget&&E&&!w){const P=new CustomEvent(W1,Bpe);if(p.currentTarget.dispatchEvent(P),!P.defaultPrevented){const C=T().filter(H=>H.focusable),I=C.find(H=>H.active),O=C.find(H=>H.id===g),z=[I,O,...C].filter(Boolean).map(H=>H.ref.current);R8(z,d)}}v.current=!1}),onBlur:Pe(t.onBlur,()=>y(!1))})})}),k8="RovingFocusGroupItem",O8=N.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...l}=t,c=Ha(),u=i||c,d=Wpe(k8,n),h=d.currentTabStopId===u,f=P8(n),{onFocusableItemAdd:m,onFocusableItemRemove:b,currentTabStopId:g}=d;return N.useEffect(()=>{if(r)return m(),()=>b()},[r,m,b]),a.jsx(TA.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:a.jsx(Je.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:e,onMouseDown:Pe(t.onMouseDown,x=>{r?d.onItemFocus(u):x.preventDefault()}),onFocus:Pe(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:Pe(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){d.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const w=Ype(x,d.orientation,d.dir);if(w!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let A=f().filter(T=>T.focusable).map(T=>T.ref.current);if(w==="last")A.reverse();else if(w==="prev"||w==="next"){w==="prev"&&A.reverse();const T=A.indexOf(x.currentTarget);A=d.loop?Qpe(A,T+1):A.slice(T+1)}setTimeout(()=>R8(A))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:g!=null}):o})})});O8.displayName=k8;var Kpe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Gpe(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Ype(t,e,n){const r=Gpe(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Kpe[r]}function R8(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Qpe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var M8=I8,D8=O8,Xpe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},fh=new WeakMap,Hx=new WeakMap,Kx={},H1=0,L8=function(t){return t&&(t.host||L8(t.parentNode))},Zpe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=L8(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Jpe=function(t,e,n,r){var s=Zpe(e,Array.isArray(t)?t:[t]);Kx[n]||(Kx[n]=new WeakMap);var i=Kx[n],o=[],l=new Set,c=new Set(s),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(l.has(f))d(f);else try{var m=f.getAttribute(r),b=m!==null&&m!=="false",g=(fh.get(f)||0)+1,x=(i.get(f)||0)+1;fh.set(f,g),i.set(f,x),o.push(f),g===1&&b&&Hx.set(f,!0),x===1&&f.setAttribute(n,"true"),b||f.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",f,w)}})};return d(e),l.clear(),H1++,function(){o.forEach(function(h){var f=fh.get(h)-1,m=i.get(h)-1;fh.set(h,f),i.set(h,m),f||(Hx.has(h)||h.removeAttribute(r),Hx.delete(h)),m||h.removeAttribute(n)}),H1--,H1||(fh=new WeakMap,fh=new WeakMap,Hx=new WeakMap,Kx={})}},KI=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=Xpe(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),Jpe(r,s,n,"aria-hidden")):function(){return null}},Zi=function(){return Zi=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Zi.apply(this,arguments)};function $8(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function ege(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var $b="right-scroll-bar-position",Fb="width-before-scroll-bar",tge="with-scroll-bars-hidden",nge="--removed-body-scroll-bar-size";function K1(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function rge(t,e){var n=N.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var sge=typeof window<"u"?N.useLayoutEffect:N.useEffect,m4=new WeakMap;function age(t,e){var n=rge(null,function(r){return t.forEach(function(s){return K1(s,r)})});return sge(function(){var r=m4.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(l){i.has(l)||K1(l,null)}),i.forEach(function(l){s.has(l)||K1(l,o)})}m4.set(n,t)},[t]),n}function ige(t){return t}function oge(t,e){e===void 0&&(e=ige);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return s}function lge(t){t===void 0&&(t={});var e=oge(null);return e.options=Zi({async:!0,ssr:!1},t),e}var F8=function(t){var e=t.sideCar,n=$8(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return N.createElement(r,Zi({},n))};F8.isSideCarExport=!0;function cge(t,e){return t.useMedium(e),F8}var V8=lge(),G1=function(){},dj=N.forwardRef(function(t,e){var n=N.useRef(null),r=N.useState({onScrollCapture:G1,onWheelCapture:G1,onTouchMoveCapture:G1}),s=r[0],i=r[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,m=t.noRelative,b=t.noIsolation,g=t.inert,x=t.allowPinchZoom,w=t.as,y=w===void 0?"div":w,A=t.gapMode,T=$8(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),v=f,S=age([n,e]),j=Zi(Zi({},T),s);return N.createElement(N.Fragment,null,d&&N.createElement(v,{sideCar:V8,removeScrollBar:u,shards:h,noRelative:m,noIsolation:b,inert:g,setCallbacks:i,allowPinchZoom:!!x,lockRef:n,gapMode:A}),o?N.cloneElement(N.Children.only(l),Zi(Zi({},j),{ref:S})):N.createElement(y,Zi({},j,{className:c,ref:S}),l))});dj.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};dj.classNames={fullWidth:Fb,zeroRight:$b};var uge=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function dge(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=uge();return e&&t.setAttribute("nonce",e),t}function hge(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function fge(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var mge=function(){var t=0,e=null;return{add:function(n){t==0&&(e=dge())&&(hge(e,n),fge(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},pge=function(){var t=mge();return function(e,n){N.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},B8=function(){var t=pge(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},gge={left:0,top:0,right:0,gap:0},Y1=function(t){return parseInt(t||"",10)||0},yge=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Y1(n),Y1(r),Y1(s)]},vge=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return gge;var e=yge(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},xge=B8(),df="data-scroll-locked",bge=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(tge,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(df,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat($b,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Fb,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat($b," .").concat($b,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Fb," .").concat(Fb,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(df,`] {
    `).concat(nge,": ").concat(l,`px;
  }
`)},p4=function(){var t=parseInt(document.body.getAttribute(df)||"0",10);return isFinite(t)?t:0},wge=function(){N.useEffect(function(){return document.body.setAttribute(df,(p4()+1).toString()),function(){var t=p4()-1;t<=0?document.body.removeAttribute(df):document.body.setAttribute(df,t.toString())}},[])},_ge=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;wge();var i=N.useMemo(function(){return vge(s)},[s]);return N.createElement(xge,{styles:bge(i,!e,s,n?"":"!important")})},CA=!1;if(typeof window<"u")try{var Gx=Object.defineProperty({},"passive",{get:function(){return CA=!0,!0}});window.addEventListener("test",Gx,Gx),window.removeEventListener("test",Gx,Gx)}catch{CA=!1}var mh=CA?{passive:!1}:!1,jge=function(t){return t.tagName==="TEXTAREA"},U8=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!jge(t)&&n[e]==="visible")},Nge=function(t){return U8(t,"overflowY")},Sge=function(t){return U8(t,"overflowX")},g4=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=z8(t,r);if(s){var i=q8(t,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Ege=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Age=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},z8=function(t,e){return t==="v"?Nge(e):Sge(e)},q8=function(t,e){return t==="v"?Ege(e):Age(e)},Tge=function(t,e){return t==="h"&&e==="rtl"?-1:1},Cge=function(t,e,n,r,s){var i=Tge(t,window.getComputedStyle(e).direction),o=i*r,l=n.target,c=e.contains(l),u=!1,d=o>0,h=0,f=0;do{if(!l)break;var m=q8(t,l),b=m[0],g=m[1],x=m[2],w=g-x-i*b;(b||w)&&z8(t,l)&&(h+=w,f+=b);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(f)<1||!s))&&(u=!0),u},Yx=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},y4=function(t){return[t.deltaX,t.deltaY]},v4=function(t){return t&&"current"in t?t.current:t},Pge=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Ige=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},kge=0,ph=[];function Oge(t){var e=N.useRef([]),n=N.useRef([0,0]),r=N.useRef(),s=N.useState(kge++)[0],i=N.useState(B8)[0],o=N.useRef(t);N.useEffect(function(){o.current=t},[t]),N.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var g=ege([t.lockRef.current],(t.shards||[]).map(v4),!0).filter(Boolean);return g.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=N.useCallback(function(g,x){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var w=Yx(g),y=n.current,A="deltaX"in g?g.deltaX:y[0]-w[0],T="deltaY"in g?g.deltaY:y[1]-w[1],v,S=g.target,j=Math.abs(A)>Math.abs(T)?"h":"v";if("touches"in g&&j==="h"&&S.type==="range")return!1;var p=g4(j,S);if(!p)return!0;if(p?v=j:(v=j==="v"?"h":"v",p=g4(j,S)),!p)return!1;if(!r.current&&"changedTouches"in g&&(A||T)&&(r.current=v),!v)return!0;var E=r.current||v;return Cge(E,x,g,E==="h"?A:T,!0)},[]),c=N.useCallback(function(g){var x=g;if(!(!ph.length||ph[ph.length-1]!==i)){var w="deltaY"in x?y4(x):Yx(x),y=e.current.filter(function(v){return v.name===x.type&&(v.target===x.target||x.target===v.shadowParent)&&Pge(v.delta,w)})[0];if(y&&y.should){x.cancelable&&x.preventDefault();return}if(!y){var A=(o.current.shards||[]).map(v4).filter(Boolean).filter(function(v){return v.contains(x.target)}),T=A.length>0?l(x,A[0]):!o.current.noIsolation;T&&x.cancelable&&x.preventDefault()}}},[]),u=N.useCallback(function(g,x,w,y){var A={name:g,delta:x,target:w,should:y,shadowParent:Rge(w)};e.current.push(A),setTimeout(function(){e.current=e.current.filter(function(T){return T!==A})},1)},[]),d=N.useCallback(function(g){n.current=Yx(g),r.current=void 0},[]),h=N.useCallback(function(g){u(g.type,y4(g),g.target,l(g,t.lockRef.current))},[]),f=N.useCallback(function(g){u(g.type,Yx(g),g.target,l(g,t.lockRef.current))},[]);N.useEffect(function(){return ph.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,mh),document.addEventListener("touchmove",c,mh),document.addEventListener("touchstart",d,mh),function(){ph=ph.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,mh),document.removeEventListener("touchmove",c,mh),document.removeEventListener("touchstart",d,mh)}},[]);var m=t.removeScrollBar,b=t.inert;return N.createElement(N.Fragment,null,b?N.createElement(i,{styles:Ige(s)}):null,m?N.createElement(_ge,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Rge(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Mge=cge(V8,Oge);var hj=N.forwardRef(function(t,e){return N.createElement(dj,Zi({},t,{ref:e,sideCar:Mge}))});hj.classNames=dj.classNames;var PA=["Enter"," "],Dge=["ArrowDown","PageUp","Home"],W8=["ArrowUp","PageDown","End"],Lge=[...Dge,...W8],$ge={ltr:[...PA,"ArrowRight"],rtl:[...PA,"ArrowLeft"]},Fge={ltr:["ArrowLeft"],rtl:["ArrowRight"]},zv="Menu",[_y,Vge,Bge]=N_(zv),[eh,H8]=rs(zv,[Bge,Fm,uj]),fj=Fm(),K8=uj(),[Uge,th]=eh(zv),[zge,qv]=eh(zv),G8=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=t,l=fj(e),[c,u]=N.useState(null),d=N.useRef(!1),h=ir(i),f=Bv(s);return N.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),a.jsx(PP,{...l,children:a.jsx(Uge,{scope:e,open:n,onOpenChange:h,content:c,onContentChange:u,children:a.jsx(zge,{scope:e,onClose:N.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:f,modal:o,children:r})})})};G8.displayName=zv;var qge="MenuAnchor",GI=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=fj(n);return a.jsx(IP,{...s,...r,ref:e})});GI.displayName=qge;var YI="MenuPortal",[Wge,Y8]=eh(YI,{forceMount:void 0}),Q8=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,i=th(YI,e);return a.jsx(Wge,{scope:e,forceMount:n,children:a.jsx(ss,{present:n||i.open,children:a.jsx(bv,{asChild:!0,container:s,children:r})})})};Q8.displayName=YI;var Ga="MenuContent",[Hge,QI]=eh(Ga),X8=N.forwardRef((t,e)=>{const n=Y8(Ga,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=th(Ga,t.__scopeMenu),o=qv(Ga,t.__scopeMenu);return a.jsx(_y.Provider,{scope:t.__scopeMenu,children:a.jsx(ss,{present:r||i.open,children:a.jsx(_y.Slot,{scope:t.__scopeMenu,children:o.modal?a.jsx(Kge,{...s,ref:e}):a.jsx(Gge,{...s,ref:e})})})})}),Kge=N.forwardRef((t,e)=>{const n=th(Ga,t.__scopeMenu),r=N.useRef(null),s=Mt(e,r);return N.useEffect(()=>{const i=r.current;if(i)return KI(i)},[]),a.jsx(XI,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Pe(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Gge=N.forwardRef((t,e)=>{const n=th(Ga,t.__scopeMenu);return a.jsx(XI,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Yge=yd("MenuContent.ScrollLock"),XI=N.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,disableOutsideScroll:b,...g}=t,x=th(Ga,n),w=qv(Ga,n),y=fj(n),A=K8(n),T=Vge(n),[v,S]=N.useState(null),j=N.useRef(null),p=Mt(e,j,x.onContentChange),E=N.useRef(0),P=N.useRef(""),C=N.useRef(0),I=N.useRef(null),O=N.useRef("right"),$=N.useRef(0),z=b?hj:N.Fragment,H=b?{as:Yge,allowPinchZoom:!0}:void 0,M=L=>{var je,ht;const W=P.current+L,ie=T().filter(we=>!we.disabled),oe=document.activeElement,me=(je=ie.find(we=>we.ref.current===oe))==null?void 0:je.textValue,Ie=ie.map(we=>we.textValue),lt=oye(Ie,W,me),ut=(ht=ie.find(we=>we.textValue===lt))==null?void 0:ht.ref.current;(function we(Me){P.current=Me,window.clearTimeout(E.current),Me!==""&&(E.current=window.setTimeout(()=>we(""),1e3))})(W),ut&&setTimeout(()=>ut.focus())};N.useEffect(()=>()=>window.clearTimeout(E.current),[]),HI();const F=N.useCallback(L=>{var ie,oe;return O.current===((ie=I.current)==null?void 0:ie.side)&&cye(L,(oe=I.current)==null?void 0:oe.area)},[]);return a.jsx(Hge,{scope:n,searchRef:P,onItemEnter:N.useCallback(L=>{F(L)&&L.preventDefault()},[F]),onItemLeave:N.useCallback(L=>{var W;F(L)||((W=j.current)==null||W.focus(),S(null))},[F]),onTriggerLeave:N.useCallback(L=>{F(L)&&L.preventDefault()},[F]),pointerGraceTimerRef:C,onPointerGraceIntentChange:N.useCallback(L=>{I.current=L},[]),children:a.jsx(z,{...H,children:a.jsx(cj,{asChild:!0,trapped:s,onMountAutoFocus:Pe(i,L=>{var W;L.preventDefault(),(W=j.current)==null||W.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:a.jsx(Rm,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,children:a.jsx(M8,{asChild:!0,...A,dir:w.dir,orientation:"vertical",loop:r,currentTabStopId:v,onCurrentTabStopIdChange:S,onEntryFocus:Pe(c,L=>{w.isUsingKeyboardRef.current||L.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx(kP,{role:"menu","aria-orientation":"vertical","data-state":fq(x.open),"data-radix-menu-content":"",dir:w.dir,...y,...g,ref:p,style:{outline:"none",...g.style},onKeyDown:Pe(g.onKeyDown,L=>{const ie=L.target.closest("[data-radix-menu-content]")===L.currentTarget,oe=L.ctrlKey||L.altKey||L.metaKey,me=L.key.length===1;ie&&(L.key==="Tab"&&L.preventDefault(),!oe&&me&&M(L.key));const Ie=j.current;if(L.target!==Ie||!Lge.includes(L.key))return;L.preventDefault();const ut=T().filter(je=>!je.disabled).map(je=>je.ref.current);W8.includes(L.key)&&ut.reverse(),aye(ut)}),onBlur:Pe(t.onBlur,L=>{L.currentTarget.contains(L.target)||(window.clearTimeout(E.current),P.current="")}),onPointerMove:Pe(t.onPointerMove,jy(L=>{const W=L.target,ie=$.current!==L.clientX;if(L.currentTarget.contains(W)&&ie){const oe=L.clientX>$.current?"right":"left";O.current=oe,$.current=L.clientX}}))})})})})})})});X8.displayName=Ga;var Qge="MenuGroup",ZI=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return a.jsx(Je.div,{role:"group",...r,ref:e})});ZI.displayName=Qge;var Xge="MenuLabel",Z8=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return a.jsx(Je.div,{...r,ref:e})});Z8.displayName=Xge;var z0="MenuItem",x4="menu.itemSelect",mj=N.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,i=N.useRef(null),o=qv(z0,t.__scopeMenu),l=QI(z0,t.__scopeMenu),c=Mt(e,i),u=N.useRef(!1),d=()=>{const h=i.current;if(!n&&h){const f=new CustomEvent(x4,{bubbles:!0,cancelable:!0});h.addEventListener(x4,m=>r==null?void 0:r(m),{once:!0}),fP(h,f),f.defaultPrevented?u.current=!1:o.onClose()}};return a.jsx(J8,{...s,ref:c,disabled:n,onClick:Pe(t.onClick,d),onPointerDown:h=>{var f;(f=t.onPointerDown)==null||f.call(t,h),u.current=!0},onPointerUp:Pe(t.onPointerUp,h=>{var f;u.current||(f=h.currentTarget)==null||f.click()}),onKeyDown:Pe(t.onKeyDown,h=>{const f=l.searchRef.current!=="";n||f&&h.key===" "||PA.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});mj.displayName=z0;var J8=N.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=t,o=QI(z0,n),l=K8(n),c=N.useRef(null),u=Mt(e,c),[d,h]=N.useState(!1),[f,m]=N.useState("");return N.useEffect(()=>{const b=c.current;b&&m((b.textContent??"").trim())},[i.children]),a.jsx(_y.ItemSlot,{scope:n,disabled:r,textValue:s??f,children:a.jsx(D8,{asChild:!0,...l,focusable:!r,children:a.jsx(Je.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:Pe(t.onPointerMove,jy(b=>{r?o.onItemLeave(b):(o.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Pe(t.onPointerLeave,jy(b=>o.onItemLeave(b))),onFocus:Pe(t.onFocus,()=>h(!0)),onBlur:Pe(t.onBlur,()=>h(!1))})})})}),Zge="MenuCheckboxItem",eq=N.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return a.jsx(aq,{scope:t.__scopeMenu,checked:n,children:a.jsx(mj,{role:"menuitemcheckbox","aria-checked":q0(n)?"mixed":n,...s,ref:e,"data-state":ek(n),onSelect:Pe(s.onSelect,()=>r==null?void 0:r(q0(n)?!0:!n),{checkForDefaultPrevented:!1})})})});eq.displayName=Zge;var tq="MenuRadioGroup",[Jge,eye]=eh(tq,{value:void 0,onValueChange:()=>{}}),nq=N.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,i=ir(r);return a.jsx(Jge,{scope:t.__scopeMenu,value:n,onValueChange:i,children:a.jsx(ZI,{...s,ref:e})})});nq.displayName=tq;var rq="MenuRadioItem",sq=N.forwardRef((t,e)=>{const{value:n,...r}=t,s=eye(rq,t.__scopeMenu),i=n===s.value;return a.jsx(aq,{scope:t.__scopeMenu,checked:i,children:a.jsx(mj,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":ek(i),onSelect:Pe(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});sq.displayName=rq;var JI="MenuItemIndicator",[aq,tye]=eh(JI,{checked:!1}),iq=N.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,i=tye(JI,n);return a.jsx(ss,{present:r||q0(i.checked)||i.checked===!0,children:a.jsx(Je.span,{...s,ref:e,"data-state":ek(i.checked)})})});iq.displayName=JI;var nye="MenuSeparator",oq=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return a.jsx(Je.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});oq.displayName=nye;var rye="MenuArrow",lq=N.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=fj(n);return a.jsx(OP,{...s,...r,ref:e})});lq.displayName=rye;var sye="MenuSub",[Hqe,cq]=eh(sye),ug="MenuSubTrigger",uq=N.forwardRef((t,e)=>{const n=th(ug,t.__scopeMenu),r=qv(ug,t.__scopeMenu),s=cq(ug,t.__scopeMenu),i=QI(ug,t.__scopeMenu),o=N.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:t.__scopeMenu},d=N.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return N.useEffect(()=>d,[d]),N.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),a.jsx(GI,{asChild:!0,...u,children:a.jsx(J8,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":fq(n.open),...t,ref:j_(e,s.onTriggerChange),onClick:h=>{var f;(f=t.onClick)==null||f.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Pe(t.onPointerMove,jy(h=>{i.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:Pe(t.onPointerLeave,jy(h=>{var m,b;d();const f=(m=n.content)==null?void 0:m.getBoundingClientRect();if(f){const g=(b=n.content)==null?void 0:b.dataset.side,x=g==="right",w=x?-5:5,y=f[x?"left":"right"],A=f[x?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+w,y:h.clientY},{x:y,y:f.top},{x:A,y:f.top},{x:A,y:f.bottom},{x:y,y:f.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Pe(t.onKeyDown,h=>{var m;const f=i.searchRef.current!=="";t.disabled||f&&h.key===" "||$ge[r.dir].includes(h.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),h.preventDefault())})})})});uq.displayName=ug;var dq="MenuSubContent",hq=N.forwardRef((t,e)=>{const n=Y8(Ga,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=th(Ga,t.__scopeMenu),o=qv(Ga,t.__scopeMenu),l=cq(dq,t.__scopeMenu),c=N.useRef(null),u=Mt(e,c);return a.jsx(_y.Provider,{scope:t.__scopeMenu,children:a.jsx(ss,{present:r||i.open,children:a.jsx(_y.Slot,{scope:t.__scopeMenu,children:a.jsx(XI,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Pe(t.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Pe(t.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:Pe(t.onKeyDown,d=>{var m;const h=d.currentTarget.contains(d.target),f=Fge[o.dir].includes(d.key);h&&f&&(i.onOpenChange(!1),(m=l.trigger)==null||m.focus(),d.preventDefault())})})})})})});hq.displayName=dq;function fq(t){return t?"open":"closed"}function q0(t){return t==="indeterminate"}function ek(t){return q0(t)?"indeterminate":t?"checked":"unchecked"}function aye(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function iye(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function oye(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=iye(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function lye(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i],c=e[o],u=l.x,d=l.y,h=c.x,f=c.y;d>r!=f>r&&n<(h-u)*(r-d)/(f-d)+u&&(s=!s)}return s}function cye(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return lye(n,e)}function jy(t){return e=>e.pointerType==="mouse"?t(e):void 0}var uye=G8,dye=GI,hye=Q8,fye=X8,mye=ZI,pye=Z8,gye=mj,yye=eq,vye=nq,xye=sq,bye=iq,wye=oq,_ye=lq,jye=uq,Nye=hq,pj="DropdownMenu",[Sye,Kqe]=rs(pj,[H8]),Ms=H8(),[Eye,mq]=Sye(pj),pq=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:o,modal:l=!0}=t,c=Ms(e),u=N.useRef(null),[d,h]=Ii({prop:s,defaultProp:i??!1,onChange:o,caller:pj});return a.jsx(Eye,{scope:e,triggerId:Ha(),triggerRef:u,contentId:Ha(),open:d,onOpenChange:h,onOpenToggle:N.useCallback(()=>h(f=>!f),[h]),modal:l,children:a.jsx(uye,{...c,open:d,onOpenChange:h,dir:r,modal:l,children:n})})};pq.displayName=pj;var gq="DropdownMenuTrigger",yq=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,i=mq(gq,n),o=Ms(n);return a.jsx(dye,{asChild:!0,...o,children:a.jsx(Je.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:j_(e,i.triggerRef),onPointerDown:Pe(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:Pe(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});yq.displayName=gq;var Aye="DropdownMenuPortal",vq=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Ms(e);return a.jsx(hye,{...r,...n})};vq.displayName=Aye;var xq="DropdownMenuContent",bq=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=mq(xq,n),i=Ms(n),o=N.useRef(!1);return a.jsx(fye,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:Pe(t.onCloseAutoFocus,l=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Pe(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});bq.displayName=xq;var Tye="DropdownMenuGroup",Cye=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ms(n);return a.jsx(mye,{...s,...r,ref:e})});Cye.displayName=Tye;var Pye="DropdownMenuLabel",wq=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ms(n);return a.jsx(pye,{...s,...r,ref:e})});wq.displayName=Pye;var Iye="DropdownMenuItem",_q=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ms(n);return a.jsx(gye,{...s,...r,ref:e})});_q.displayName=Iye;var kye="DropdownMenuCheckboxItem",jq=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ms(n);return a.jsx(yye,{...s,...r,ref:e})});jq.displayName=kye;var Oye="DropdownMenuRadioGroup",Rye=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ms(n);return a.jsx(vye,{...s,...r,ref:e})});Rye.displayName=Oye;var Mye="DropdownMenuRadioItem",Nq=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ms(n);return a.jsx(xye,{...s,...r,ref:e})});Nq.displayName=Mye;var Dye="DropdownMenuItemIndicator",Sq=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ms(n);return a.jsx(bye,{...s,...r,ref:e})});Sq.displayName=Dye;var Lye="DropdownMenuSeparator",Eq=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ms(n);return a.jsx(wye,{...s,...r,ref:e})});Eq.displayName=Lye;var $ye="DropdownMenuArrow",Fye=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ms(n);return a.jsx(_ye,{...s,...r,ref:e})});Fye.displayName=$ye;var Vye="DropdownMenuSubTrigger",Aq=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ms(n);return a.jsx(jye,{...s,...r,ref:e})});Aq.displayName=Vye;var Bye="DropdownMenuSubContent",Tq=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Ms(n);return a.jsx(Nye,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Tq.displayName=Bye;var Uye=pq,zye=yq,qye=vq,Cq=bq,Pq=wq,Iq=_q,kq=jq,Oq=Nq,Rq=Sq,Mq=Eq,Dq=Aq,Lq=Tq;const Wye=Uye,Hye=zye,Kye=N.forwardRef(({className:t,inset:e,children:n,...r},s)=>a.jsxs(Dq,{ref:s,className:pe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",e&&"pl-8",t),...r,children:[n,a.jsx(pU,{className:"ml-auto h-4 w-4"})]}));Kye.displayName=Dq.displayName;const Gye=N.forwardRef(({className:t,...e},n)=>a.jsx(Lq,{ref:n,className:pe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));Gye.displayName=Lq.displayName;const $q=N.forwardRef(({className:t,sideOffset:e=4,...n},r)=>a.jsx(qye,{children:a.jsx(Cq,{ref:r,sideOffset:e,className:pe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));$q.displayName=Cq.displayName;const Fq=N.forwardRef(({className:t,inset:e,...n},r)=>a.jsx(Iq,{ref:r,className:pe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e&&"pl-8",t),...n}));Fq.displayName=Iq.displayName;const Yye=N.forwardRef(({className:t,children:e,checked:n,...r},s)=>a.jsxs(kq,{ref:s,className:pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),checked:n,...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(Rq,{children:a.jsx(_v,{className:"h-4 w-4"})})}),e]}));Yye.displayName=kq.displayName;const Qye=N.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(Oq,{ref:r,className:pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(Rq,{children:a.jsx(pte,{className:"h-2 w-2 fill-current"})})}),e]}));Qye.displayName=Oq.displayName;const Vq=N.forwardRef(({className:t,inset:e,...n},r)=>a.jsx(Pq,{ref:r,className:pe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));Vq.displayName=Pq.displayName;const Bq=N.forwardRef(({className:t,...e},n)=>a.jsx(Mq,{ref:n,className:pe("-mx-1 my-1 h-px bg-muted",t),...e}));Bq.displayName=Mq.displayName;function Xye(){const t=Hn(),{user:e,signOut:n}=ct(),r=async()=>{await n(),t("/auth")};return a.jsxs(Wye,{children:[a.jsx(Hye,{asChild:!0,children:a.jsx(G,{variant:"ghost",size:"icon",className:"rounded-full",children:a.jsx(Ng,{className:"h-5 w-5"})})}),a.jsxs($q,{align:"end",className:"w-56",children:[a.jsx(Vq,{children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-sm",children:"My Account"}),a.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:(e==null?void 0:e.email)||""})]})}),a.jsx(Bq,{}),a.jsxs(Fq,{onClick:r,children:[a.jsx(Nte,{className:"mr-2 h-4 w-4"}),a.jsx("span",{children:"Log out"})]})]})]})}const Y={COMPANIES:"companies",USERS:"users",COMPANY_USERS:"companyUsers",COMPANY_SETTINGS:"companySettings",INVITATIONS:"invitations",USER_ROLES:"userRoles",CHART_OF_ACCOUNTS:"chartOfAccounts",JOURNAL_ENTRIES:"journalEntries",JOURNAL_LINES:"journalLines",INVOICES:"invoices",INVOICE_ITEMS:"invoiceItems",BILLS:"bills",EXPENSES:"expenses",SALES_ORDERS:"salesOrders",PURCHASE_ORDERS:"purchaseOrders",EMPLOYEES:"employees",CONTRACTORS:"contractors",ADVANCES:"advances",TIME_ENTRIES:"timeEntries",EMPLOYEE_ALLOWANCES:"employeeAllowances",EMPLOYEE_PAYROLL_PROFILES:"employeePayrollProfiles",PAYROLL_RUNS:"payrollRuns",PAYROLL_ITEMS:"payrollItems",PAYROLL_ADDITIONS:"payrollAdditions",PAYROLL_JOURNALS:"payrollJournals",PAYE_TAX_BANDS:"payeTaxBands",PAYROLL_STATUTORY_RATES:"payrollStatutoryRates",CUSTOMERS:"customers",VENDORS:"vendors",PROJECTS:"projects",PROJECT_EXPENSES:"projectExpenses",APPROVAL_REQUESTS:"approvalRequests",PRODUCTS:"products",FIXED_ASSETS:"fixedAssets",ASSET_CATEGORIES:"assetCategories",DEPRECIATION_ENTRIES:"depreciationEntries",INVENTORY_ITEMS:"inventoryItems",STOCK_MOVEMENTS:"stockMovements",PRICE_LISTS:"priceLists",PRICE_LIST_ITEMS:"priceListItems",BANK_ACCOUNTS:"bankAccounts",BANK_TRANSACTIONS:"bankTransactions",FINANCIAL_YEARS:"financialYears",FINANCIAL_PERIODS:"financialPeriods",CASH_RECONCILIATIONS:"cashReconciliations",RECONCILIATIONS:"reconciliations",PERIOD_LOCKS:"periodLocks",NOTIFICATIONS:"notifications",AUDIT_LOGS:"auditLogs"},Zye=["super_admin","admin","financial_manager","accountant","bookkeeper","assistant_accountant","finance_officer","hr_manager","project_manager","inventory_manager","cashier","auditor","staff","read_only"],Jye=t=>{if(!t.length)return"read_only";for(const e of Zye)if(t.includes(e))return e;return"read_only"};function gj(){const{user:t,isAuthenticated:e}=ct();return Ne({queryKey:["user-role",t==null?void 0:t.id],queryFn:async()=>{if(!t||!fo)return"read_only";try{const n=new Set,r=ve(te,Y.COMPANY_USERS),s=[Ce(r,ge("userId","==",t.id),ge("status","==","active"),Ws(20)),Ce(r,ge("user_id","==",t.id),ge("status","==","active"),Ws(20)),Ce(r,ge("userId","==",t.id),Ws(20)),Ce(r,ge("user_id","==",t.id),Ws(20))];for(const i of s)if((await $e(i)).docs.forEach(l=>{const c=l.data().role;c&&n.add(c)}),n.size)break;if(!n.size){const i=ve(te,Y.USER_ROLES),o=[Ce(i,ge("userId","==",t.id),Ws(20)),Ce(i,ge("user_id","==",t.id),Ws(20))];for(const l of o)if((await $e(l)).docs.forEach(u=>{const d=u.data().role;d&&n.add(d)}),n.size)break}return n.size?Jye(Array.from(n)):"read_only"}catch{return"read_only"}},enabled:e&&!!t,staleTime:1e3*60*5})}function eve(t){const{data:e,isLoading:n}=gj();return{hasRole:(e?t.includes(e):!1)||e==="super_admin",isLoading:n,userRole:e}}const tve={super_admin:["*"],admin:["*"],financial_manager:["dashboard","invoices","customers","estimates","sales-orders","vendors","bills","purchase-orders","expenses","bank-accounts","reconciliation","reports","settings","chart-of-accounts","journal-entries","accounts-payable","accounts-receivable","payroll","payroll-reports","employees","fixed-assets","asset-depreciation","financial-periods","zra-compliance","tax-calculator"],accountant:["dashboard","invoices","customers","estimates","sales-orders","vendors","bills","purchase-orders","expenses","bank-accounts","reconciliation","reports","settings","chart-of-accounts","journal-entries","accounts-payable","accounts-receivable","fixed-assets","asset-depreciation","financial-periods","tax-calculator"],assistant_accountant:["dashboard","invoices","customers","estimates","sales-orders","vendors","bills","purchase-orders","expenses","chart-of-accounts","accounts-payable","accounts-receivable"],finance_officer:["dashboard","invoices","expenses","bills","bank-accounts","reconciliation","reports","chart-of-accounts","journal-entries","accounts-payable","accounts-receivable"],bookkeeper:["dashboard","invoices","customers","estimates","sales-orders","vendors","bills","purchase-orders","expenses","chart-of-accounts","reconciliation","accounts-payable","accounts-receivable"],cashier:["dashboard","bank-accounts","expenses","reconciliation"],inventory_manager:["dashboard","inventory","products","purchase-orders","vendors"],hr_manager:["dashboard","employees","payroll","advances","payroll-reports","time-tracking"],project_manager:["dashboard","projects","donors","time-tracking","reports"],auditor:["dashboard","reports","payroll-reports","audit-logs","journal-entries","chart-of-accounts"],staff:["dashboard","time-tracking"],read_only:["dashboard"]};function Uq(t,e){if(!t)return!1;if(t==="super_admin"||t==="admin")return!0;const n=tve[t]||[],r=e.replace(/^\//,"").split("/")[0];return n.includes(r)||n.includes("*")}function IA(t,[e,n]){return Math.min(n,Math.max(e,t))}function nve(t,e){return N.useReducer((n,r)=>e[n][r]??n,t)}var tk="ScrollArea",[zq,Gqe]=rs(tk),[rve,ni]=zq(tk),qq=N.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...o}=t,[l,c]=N.useState(null),[u,d]=N.useState(null),[h,f]=N.useState(null),[m,b]=N.useState(null),[g,x]=N.useState(null),[w,y]=N.useState(0),[A,T]=N.useState(0),[v,S]=N.useState(!1),[j,p]=N.useState(!1),E=Mt(e,C=>c(C)),P=Bv(s);return a.jsx(rve,{scope:n,type:r,dir:P,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:f,scrollbarX:m,onScrollbarXChange:b,scrollbarXEnabled:v,onScrollbarXEnabledChange:S,scrollbarY:g,onScrollbarYChange:x,scrollbarYEnabled:j,onScrollbarYEnabledChange:p,onCornerWidthChange:y,onCornerHeightChange:T,children:a.jsx(Je.div,{dir:P,...o,ref:E,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":A+"px",...t.style}})})});qq.displayName=tk;var Wq="ScrollAreaViewport",Hq=N.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=t,o=ni(Wq,n),l=N.useRef(null),c=Mt(e,l,o.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),a.jsx(Je.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:a.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Hq.displayName=Wq;var Co="ScrollAreaScrollbar",nk=N.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=ni(Co,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,l=t.orientation==="horizontal";return N.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),s.type==="hover"?a.jsx(sve,{...r,ref:e,forceMount:n}):s.type==="scroll"?a.jsx(ave,{...r,ref:e,forceMount:n}):s.type==="auto"?a.jsx(Kq,{...r,ref:e,forceMount:n}):s.type==="always"?a.jsx(rk,{...r,ref:e}):null});nk.displayName=Co;var sve=N.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=ni(Co,t.__scopeScrollArea),[i,o]=N.useState(!1);return N.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),a.jsx(ss,{present:n||i,children:a.jsx(Kq,{"data-state":i?"visible":"hidden",...r,ref:e})})}),ave=N.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=ni(Co,t.__scopeScrollArea),i=t.orientation==="horizontal",o=vj(()=>c("SCROLL_END"),100),[l,c]=nve("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return N.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),N.useEffect(()=>{const u=s.viewport,d=i?"scrollLeft":"scrollTop";if(u){let h=u[d];const f=()=>{const m=u[d];h!==m&&(c("SCROLL"),o()),h=m};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[s.viewport,i,c,o]),a.jsx(ss,{present:n||l!=="hidden",children:a.jsx(rk,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Pe(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Pe(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),Kq=N.forwardRef((t,e)=>{const n=ni(Co,t.__scopeScrollArea),{forceMount:r,...s}=t,[i,o]=N.useState(!1),l=t.orientation==="horizontal",c=vj(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?u:d)}},10);return Yf(n.viewport,c),Yf(n.content,c),a.jsx(ss,{present:r||i,children:a.jsx(rk,{"data-state":i?"visible":"hidden",...s,ref:e})})}),rk=N.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=ni(Co,t.__scopeScrollArea),i=N.useRef(null),o=N.useRef(0),[l,c]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=Zq(l.viewport,l.content),d={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:f=>i.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function h(f,m){return dve(f,o.current,l,m)}return n==="horizontal"?a.jsx(ive,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const f=s.viewport.scrollLeft,m=b4(f,l,s.dir);i.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollLeft=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollLeft=h(f,s.dir))}}):n==="vertical"?a.jsx(ove,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const f=s.viewport.scrollTop,m=b4(f,l);i.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollTop=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollTop=h(f))}}):null}),ive=N.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=ni(Co,t.__scopeScrollArea),[o,l]=N.useState(),c=N.useRef(null),u=Mt(e,c,i.onScrollbarXChange);return N.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(Yq,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":yj(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(i.viewport){const f=i.viewport.scrollLeft+d.deltaX;t.onWheelScroll(f),eW(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:H0(o.paddingLeft),paddingEnd:H0(o.paddingRight)}})}})}),ove=N.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=ni(Co,t.__scopeScrollArea),[o,l]=N.useState(),c=N.useRef(null),u=Mt(e,c,i.onScrollbarYChange);return N.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(Yq,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":yj(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(i.viewport){const f=i.viewport.scrollTop+d.deltaY;t.onWheelScroll(f),eW(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:H0(o.paddingTop),paddingEnd:H0(o.paddingBottom)}})}})}),[lve,Gq]=zq(Co),Yq=N.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...f}=t,m=ni(Co,n),[b,g]=N.useState(null),x=Mt(e,E=>g(E)),w=N.useRef(null),y=N.useRef(""),A=m.viewport,T=r.content-r.viewport,v=ir(d),S=ir(c),j=vj(h,10);function p(E){if(w.current){const P=E.clientX-w.current.left,C=E.clientY-w.current.top;u({x:P,y:C})}}return N.useEffect(()=>{const E=P=>{const C=P.target;(b==null?void 0:b.contains(C))&&v(P,T)};return document.addEventListener("wheel",E,{passive:!1}),()=>document.removeEventListener("wheel",E,{passive:!1})},[A,b,T,v]),N.useEffect(S,[r,S]),Yf(b,j),Yf(m.content,j),a.jsx(lve,{scope:n,scrollbar:b,hasThumb:s,onThumbChange:ir(i),onThumbPointerUp:ir(o),onThumbPositionChange:S,onThumbPointerDown:ir(l),children:a.jsx(Je.div,{...f,ref:x,style:{position:"absolute",...f.style},onPointerDown:Pe(t.onPointerDown,E=>{E.button===0&&(E.target.setPointerCapture(E.pointerId),w.current=b.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),p(E))}),onPointerMove:Pe(t.onPointerMove,p),onPointerUp:Pe(t.onPointerUp,E=>{const P=E.target;P.hasPointerCapture(E.pointerId)&&P.releasePointerCapture(E.pointerId),document.body.style.webkitUserSelect=y.current,m.viewport&&(m.viewport.style.scrollBehavior=""),w.current=null})})})}),W0="ScrollAreaThumb",Qq=N.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Gq(W0,t.__scopeScrollArea);return a.jsx(ss,{present:n||s.hasThumb,children:a.jsx(cve,{ref:e,...r})})}),cve=N.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,i=ni(W0,n),o=Gq(W0,n),{onThumbPositionChange:l}=o,c=Mt(e,h=>o.onThumbChange(h)),u=N.useRef(void 0),d=vj(()=>{u.current&&(u.current(),u.current=void 0)},100);return N.useEffect(()=>{const h=i.viewport;if(h){const f=()=>{if(d(),!u.current){const m=hve(h,l);u.current=m,l()}};return l(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[i.viewport,d,l]),a.jsx(Je.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Pe(t.onPointerDownCapture,h=>{const m=h.target.getBoundingClientRect(),b=h.clientX-m.left,g=h.clientY-m.top;o.onThumbPointerDown({x:b,y:g})}),onPointerUp:Pe(t.onPointerUp,o.onThumbPointerUp)})});Qq.displayName=W0;var sk="ScrollAreaCorner",Xq=N.forwardRef((t,e)=>{const n=ni(sk,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?a.jsx(uve,{...t,ref:e}):null});Xq.displayName=sk;var uve=N.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=ni(sk,n),[i,o]=N.useState(0),[l,c]=N.useState(0),u=!!(i&&l);return Yf(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),Yf(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),o(d)}),u?a.jsx(Je.div,{...r,ref:e,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function H0(t){return t?parseInt(t,10):0}function Zq(t,e){const n=t/e;return isNaN(n)?0:n}function yj(t){const e=Zq(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function dve(t,e,n,r="ltr"){const s=yj(n),i=s/2,o=e||i,l=s-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return Jq([c,u],h)(t)}function b4(t,e,n="ltr"){const r=yj(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,o=e.content-e.viewport,l=i-r,c=n==="ltr"?[0,o]:[o*-1,0],u=IA(t,c);return Jq([0,o],[0,l])(u)}function Jq(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function eW(t,e){return t>0&&t<e}var hve=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const i={left:t.scrollLeft,top:t.scrollTop},o=n.left!==i.left,l=n.top!==i.top;(o||l)&&e(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function vj(t,e){const n=ir(t),r=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),N.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Yf(t,e){const n=ir(e);cr(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var tW=qq,fve=Hq,mve=Xq;const ld=N.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(tW,{ref:r,className:pe("relative overflow-hidden",t),...n,children:[a.jsx(fve,{className:"h-full w-full rounded-[inherit]",children:e}),a.jsx(nW,{}),a.jsx(mve,{})]}));ld.displayName=tW.displayName;const nW=N.forwardRef(({className:t,orientation:e="vertical",...n},r)=>a.jsx(nk,{ref:r,orientation:e,className:pe("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:a.jsx(Qq,{className:"relative flex-1 rounded-full bg-border"})}));nW.displayName=nk.displayName;const Q1=768;function rW(){const[t,e]=N.useState(void 0);return N.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Q1-1}px)`),r=()=>{e(window.innerWidth<Q1)};return n.addEventListener("change",r),e(window.innerWidth<Q1),()=>n.removeEventListener("change",r)},[]),!!t}const K=N.forwardRef(({className:t,type:e,...n},r)=>a.jsx("input",{type:e,className:pe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));K.displayName="Input";var pve="Separator",w4="horizontal",gve=["horizontal","vertical"],sW=N.forwardRef((t,e)=>{const{decorative:n,orientation:r=w4,...s}=t,i=yve(r)?r:w4,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return a.jsx(Je.div,{"data-orientation":i,...l,...s,ref:e})});sW.displayName=pve;function yve(t){return gve.includes(t)}var aW=sW;const iW=N.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>a.jsx(aW,{ref:s,decorative:n,orientation:e,className:pe("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));iW.displayName=aW.displayName;var xj="Dialog",[oW,lW]=rs(xj),[vve,Vi]=oW(xj),cW=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,l=N.useRef(null),c=N.useRef(null),[u,d]=Ii({prop:r,defaultProp:s??!1,onChange:i,caller:xj});return a.jsx(vve,{scope:e,triggerRef:l,contentRef:c,contentId:Ha(),titleId:Ha(),descriptionId:Ha(),open:u,onOpenChange:d,onOpenToggle:N.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};cW.displayName=xj;var uW="DialogTrigger",dW=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Vi(uW,n),i=Mt(e,s.triggerRef);return a.jsx(Je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":ok(s.open),...r,ref:i,onClick:Pe(t.onClick,s.onOpenToggle)})});dW.displayName=uW;var ak="DialogPortal",[xve,hW]=oW(ak,{forceMount:void 0}),fW=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Vi(ak,e);return a.jsx(xve,{scope:e,forceMount:n,children:N.Children.map(r,o=>a.jsx(ss,{present:n||i.open,children:a.jsx(bv,{asChild:!0,container:s,children:o})}))})};fW.displayName=ak;var K0="DialogOverlay",mW=N.forwardRef((t,e)=>{const n=hW(K0,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Vi(K0,t.__scopeDialog);return i.modal?a.jsx(ss,{present:r||i.open,children:a.jsx(wve,{...s,ref:e})}):null});mW.displayName=K0;var bve=yd("DialogOverlay.RemoveScroll"),wve=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Vi(K0,n);return a.jsx(hj,{as:bve,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(Je.div,{"data-state":ok(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Rd="DialogContent",pW=N.forwardRef((t,e)=>{const n=hW(Rd,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Vi(Rd,t.__scopeDialog);return a.jsx(ss,{present:r||i.open,children:i.modal?a.jsx(_ve,{...s,ref:e}):a.jsx(jve,{...s,ref:e})})});pW.displayName=Rd;var _ve=N.forwardRef((t,e)=>{const n=Vi(Rd,t.__scopeDialog),r=N.useRef(null),s=Mt(e,n.contentRef,r);return N.useEffect(()=>{const i=r.current;if(i)return KI(i)},[]),a.jsx(gW,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Pe(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Pe(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:Pe(t.onFocusOutside,i=>i.preventDefault())})}),jve=N.forwardRef((t,e)=>{const n=Vi(Rd,t.__scopeDialog),r=N.useRef(!1),s=N.useRef(!1);return a.jsx(gW,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),gW=N.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,l=Vi(Rd,n),c=N.useRef(null),u=Mt(e,c);return HI(),a.jsxs(a.Fragment,{children:[a.jsx(cj,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(Rm,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":ok(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(Sve,{titleId:l.titleId}),a.jsx(Ave,{contentRef:c,descriptionId:l.descriptionId})]})]})}),ik="DialogTitle",yW=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Vi(ik,n);return a.jsx(Je.h2,{id:s.titleId,...r,ref:e})});yW.displayName=ik;var vW="DialogDescription",xW=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Vi(vW,n);return a.jsx(Je.p,{id:s.descriptionId,...r,ref:e})});xW.displayName=vW;var bW="DialogClose",wW=N.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Vi(bW,n);return a.jsx(Je.button,{type:"button",...r,ref:e,onClick:Pe(t.onClick,()=>s.onOpenChange(!1))})});wW.displayName=bW;function ok(t){return t?"open":"closed"}var _W="DialogTitleWarning",[Nve,jW]=dee(_W,{contentName:Rd,titleName:ik,docsSlug:"dialog"}),Sve=({titleId:t})=>{const e=jW(_W),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return N.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Eve="DialogDescriptionWarning",Ave=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${jW(Eve).contentName}}.`;return N.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},lk=cW,NW=dW,ck=fW,Wv=mW,Hv=pW,Kv=yW,Gv=xW,bj=wW;const Tve=lk,Cve=ck,SW=N.forwardRef(({className:t,...e},n)=>a.jsx(Wv,{className:pe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));SW.displayName=Wv.displayName;const Pve=Yd("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),EW=N.forwardRef(({side:t="right",className:e,children:n,...r},s)=>a.jsxs(Cve,{children:[a.jsx(SW,{}),a.jsxs(Hv,{ref:s,className:pe(Pve({side:t}),e),...r,children:[n,a.jsxs(bj,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[a.jsx(vP,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));EW.displayName=Hv.displayName;const Ive=N.forwardRef(({className:t,...e},n)=>a.jsx(Kv,{ref:n,className:pe("text-lg font-semibold text-foreground",t),...e}));Ive.displayName=Kv.displayName;const kve=N.forwardRef(({className:t,...e},n)=>a.jsx(Gv,{ref:n,className:pe("text-sm text-muted-foreground",t),...e}));kve.displayName=Gv.displayName;function _4({className:t,...e}){return a.jsx("div",{className:pe("animate-pulse rounded-md bg-muted",t),...e})}const Ove="sidebar:state",Rve=60*60*24*7,Mve="16rem",Dve="18rem",Lve="3rem",$ve="b",AW=N.createContext(null);function wj(){const t=N.useContext(AW);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}const TW=N.forwardRef(({defaultOpen:t=!0,open:e,onOpenChange:n,className:r,style:s,children:i,...o},l)=>{const c=rW(),[u,d]=N.useState(!1),[h,f]=N.useState(t),m=e??h,b=N.useCallback(y=>{const A=typeof y=="function"?y(m):y;n?n(A):f(A),document.cookie=`${Ove}=${A}; path=/; max-age=${Rve}`},[n,m]),g=N.useCallback(()=>c?d(y=>!y):b(y=>!y),[c,b,d]);N.useEffect(()=>{const y=A=>{A.key===$ve&&(A.metaKey||A.ctrlKey)&&(A.preventDefault(),g())};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[g]);const x=m?"expanded":"collapsed",w=N.useMemo(()=>({state:x,open:m,setOpen:b,isMobile:c,openMobile:u,setOpenMobile:d,toggleSidebar:g}),[x,m,b,c,u,d,g]);return a.jsx(AW.Provider,{value:w,children:a.jsx(o6,{delayDuration:0,children:a.jsx("div",{style:{"--sidebar-width":Mve,"--sidebar-width-icon":Lve,...s},className:pe("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:l,...o,children:i})})})});TW.displayName="SidebarProvider";const CW=N.forwardRef(({side:t="left",variant:e="sidebar",collapsible:n="offcanvas",className:r,children:s,...i},o)=>{const{isMobile:l,state:c,openMobile:u,setOpenMobile:d}=wj();return n==="none"?a.jsx("div",{className:pe("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:o,...i,children:s}):l?a.jsx(Tve,{open:u,onOpenChange:d,...i,children:a.jsx(EW,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":Dve},side:t,children:a.jsx("div",{className:"flex h-full w-full flex-col",children:s})})}):a.jsxs("div",{ref:o,className:"group peer hidden text-sidebar-foreground md:block","data-state":c,"data-collapsible":c==="collapsed"?n:"","data-variant":e,"data-side":t,children:[a.jsx("div",{className:pe("relative h-svh w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),a.jsx("div",{className:pe("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...i,children:a.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:s})})]})});CW.displayName="Sidebar";const PW=N.forwardRef(({className:t,onClick:e,...n},r)=>{const{toggleSidebar:s}=wj();return a.jsxs(G,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:pe("h-7 w-7",t),onClick:i=>{e==null||e(i),s()},...n,children:[a.jsx(Ate,{}),a.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});PW.displayName="SidebarTrigger";const Fve=N.forwardRef(({className:t,...e},n)=>{const{toggleSidebar:r}=wj();return a.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:pe("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] group-data-[side=left]:-right-4 group-data-[side=right]:left-0 hover:after:bg-sidebar-border sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t),...e})});Fve.displayName="SidebarRail";const IW=N.forwardRef(({className:t,...e},n)=>a.jsx("main",{ref:n,className:pe("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",t),...e}));IW.displayName="SidebarInset";const Vve=N.forwardRef(({className:t,...e},n)=>a.jsx(K,{ref:n,"data-sidebar":"input",className:pe("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",t),...e}));Vve.displayName="SidebarInput";const kW=N.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,"data-sidebar":"header",className:pe("flex flex-col gap-2 p-2",t),...e}));kW.displayName="SidebarHeader";const OW=N.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,"data-sidebar":"footer",className:pe("flex flex-col gap-2 p-2",t),...e}));OW.displayName="SidebarFooter";const Bve=N.forwardRef(({className:t,...e},n)=>a.jsx(iW,{ref:n,"data-sidebar":"separator",className:pe("mx-2 w-auto bg-sidebar-border",t),...e}));Bve.displayName="SidebarSeparator";const RW=N.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,"data-sidebar":"content",className:pe("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...e}));RW.displayName="SidebarContent";const MW=N.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,"data-sidebar":"group",className:pe("relative flex w-full min-w-0 flex-col p-2",t),...e}));MW.displayName="SidebarGroup";const Uve=N.forwardRef(({className:t,asChild:e=!1,...n},r)=>{const s=e?Gd:"div";return a.jsx(s,{ref:r,"data-sidebar":"group-label",className:pe("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...n})});Uve.displayName="SidebarGroupLabel";const zve=N.forwardRef(({className:t,asChild:e=!1,...n},r)=>{const s=e?Gd:"button";return a.jsx(s,{ref:r,"data-sidebar":"group-action",className:pe("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",t),...n})});zve.displayName="SidebarGroupAction";const DW=N.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,"data-sidebar":"group-content",className:pe("w-full text-sm",t),...e}));DW.displayName="SidebarGroupContent";const LW=N.forwardRef(({className:t,...e},n)=>a.jsx("ul",{ref:n,"data-sidebar":"menu",className:pe("flex w-full min-w-0 flex-col gap-1",t),...e}));LW.displayName="SidebarMenu";const $W=N.forwardRef(({className:t,...e},n)=>a.jsx("li",{ref:n,"data-sidebar":"menu-item",className:pe("group/menu-item relative",t),...e}));$W.displayName="SidebarMenuItem";const qve=Yd("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),FW=N.forwardRef(({asChild:t=!1,isActive:e=!1,variant:n="default",size:r="default",tooltip:s,className:i,...o},l)=>{const c=t?Gd:"button",{isMobile:u,state:d}=wj(),h=a.jsx(c,{ref:l,"data-sidebar":"menu-button","data-size":r,"data-active":e,className:pe(qve({variant:n,size:r}),i),...o});return s?(typeof s=="string"&&(s={children:s}),a.jsxs(Rse,{children:[a.jsx(Mse,{asChild:!0,children:h}),a.jsx(l6,{side:"right",align:"center",hidden:d!=="collapsed"||u,...s})]})):h});FW.displayName="SidebarMenuButton";const Wve=N.forwardRef(({className:t,asChild:e=!1,showOnHover:n=!1,...r},s)=>{const i=e?Gd:"button";return a.jsx(i,{ref:s,"data-sidebar":"menu-action",className:pe("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform peer-hover/menu-button:text-sidebar-accent-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",t),...r})});Wve.displayName="SidebarMenuAction";const Hve=N.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:pe("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t),...e}));Hve.displayName="SidebarMenuBadge";const Kve=N.forwardRef(({className:t,showIcon:e=!1,...n},r)=>{const s=N.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return a.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:pe("flex h-8 items-center gap-2 rounded-md px-2",t),...n,children:[e&&a.jsx(_4,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),a.jsx(_4,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":s}})]})});Kve.displayName="SidebarMenuSkeleton";const Gve=N.forwardRef(({className:t,...e},n)=>a.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:pe("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",t),...e}));Gve.displayName="SidebarMenuSub";const Yve=N.forwardRef(({...t},e)=>a.jsx("li",{ref:e,...t}));Yve.displayName="SidebarMenuSubItem";const Qve=N.forwardRef(({asChild:t=!1,size:e="md",isActive:n,className:r,...s},i)=>{const o=t?Gd:"a";return a.jsx(o,{ref:i,"data-sidebar":"menu-sub-button","data-size":e,"data-active":n,className:pe("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring aria-disabled:pointer-events-none aria-disabled:opacity-50 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",e==="sm"&&"text-xs",e==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...s})});Qve.displayName="SidebarMenuSubButton";var _j="Collapsible",[Xve,Yqe]=rs(_j),[Zve,uk]=Xve(_j),VW=N.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:i,onOpenChange:o,...l}=t,[c,u]=Ii({prop:r,defaultProp:s??!1,onChange:o,caller:_j});return a.jsx(Zve,{scope:n,disabled:i,contentId:Ha(),open:c,onOpenToggle:N.useCallback(()=>u(d=>!d),[u]),children:a.jsx(Je.div,{"data-state":hk(c),"data-disabled":i?"":void 0,...l,ref:e})})});VW.displayName=_j;var BW="CollapsibleTrigger",UW=N.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,s=uk(BW,n);return a.jsx(Je.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":hk(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:e,onClick:Pe(t.onClick,s.onOpenToggle)})});UW.displayName=BW;var dk="CollapsibleContent",zW=N.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=uk(dk,t.__scopeCollapsible);return a.jsx(ss,{present:n||s.open,children:({present:i})=>a.jsx(Jve,{...r,ref:e,present:i})})});zW.displayName=dk;var Jve=N.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:s,...i}=t,o=uk(dk,n),[l,c]=N.useState(r),u=N.useRef(null),d=Mt(e,u),h=N.useRef(0),f=h.current,m=N.useRef(0),b=m.current,g=o.open||l,x=N.useRef(g),w=N.useRef(void 0);return N.useEffect(()=>{const y=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(y)},[]),cr(()=>{const y=u.current;if(y){w.current=w.current||{transitionDuration:y.style.transitionDuration,animationName:y.style.animationName},y.style.transitionDuration="0s",y.style.animationName="none";const A=y.getBoundingClientRect();h.current=A.height,m.current=A.width,x.current||(y.style.transitionDuration=w.current.transitionDuration,y.style.animationName=w.current.animationName),c(r)}},[o.open,r]),a.jsx(Je.div,{"data-state":hk(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...i,ref:d,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":b?`${b}px`:void 0,...t.style},children:g&&s})});function hk(t){return t?"open":"closed"}var exe=VW;const txe=exe,nxe=UW,rxe=zW;function hf({variant:t="full",size:e="md",className:n}){const r={sm:"h-8 w-8",md:"h-10 w-10",lg:"h-12 w-12",xl:"h-16 w-16"},s={sm:"text-base",md:"text-xl",lg:"text-2xl",xl:"text-3xl"},i={sm:"text-[8px]",md:"text-[10px]",lg:"text-xs",xl:"text-sm"};return a.jsxs("div",{className:pe("flex items-center gap-3",n),children:[a.jsxs("div",{className:pe("relative flex items-center justify-center transition-all duration-300",r[e]),children:[a.jsx("img",{src:"/Zedbooks/logo_new.png",alt:"ZedBooks",className:"h-full w-full object-contain drop-shadow-sm"}),a.jsx("div",{className:"absolute inset-0 bg-blue-500/10 rounded-full blur-xl -z-10 scale-150 opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),t==="full"&&a.jsxs("div",{className:"flex flex-col select-none",children:[a.jsx("span",{className:pe("font-bold text-slate-900 leading-none tracking-tight",s[e]),children:"ZedBooks"}),a.jsx("span",{className:pe("text-slate-500 font-medium uppercase tracking-wider",i[e]),children:"Purpose Ledger"})]})]})}const sxe=[{title:"Overview",items:[{title:"Dashboard",icon:jte,href:"/dashboard"}]},{title:"Sales & Receivables",items:[{title:"Customers",icon:Ks,href:"/customers"},{title:"Invoices",icon:ar,href:"/invoices"},{title:"Accounts Receivable",icon:wi,href:"/accounts-receivable"},{title:"Estimates",icon:ar,href:"/estimates"},{title:"Sales Orders",icon:qR,href:"/sales-orders"}]},{title:"Purchasing & Payables",items:[{title:"Vendors",icon:Ks,href:"/vendors"},{title:"Bills",icon:ar,href:"/bills"},{title:"Accounts Payable",icon:wi,href:"/accounts-payable"},{title:"Purchase Orders",icon:qR,href:"/purchase-orders"},{title:"Expenses",icon:Qn,href:"/expenses"}]},{title:"Inventory & Assets",items:[{title:"Products & Services",icon:Wa,href:"/products"},{title:"Inventory",icon:Wa,href:"/inventory"},{title:"Fixed Assets",icon:Wa,href:"/fixed-assets"},{title:"Depreciation",icon:ry,href:"/asset-depreciation"}]},{title:"Banking",items:[{title:"Bank Accounts",icon:wi,href:"/bank-accounts"},{title:"Reconciliation",icon:wi,href:"/reconciliation"}]},{title:"People",items:[{title:"Employees",icon:Ks,href:"/employees"},{title:"Payroll",icon:Qn,href:"/payroll"},{title:"Advances",icon:wi,href:"/advances"},{title:"Time & Contractors",icon:ba,href:"/time-tracking"}]},{title:"Projects & Grants",items:[{title:"Projects",icon:h0,href:"/projects"},{title:"Donors & Grants",icon:Ks,href:"/donors"}]},{title:"Accounting",items:[{title:"Chart of Accounts",icon:A_,href:"/chart-of-accounts"},{title:"Journal Entries",icon:ar,href:"/journal-entries"},{title:"Financial Periods",icon:ba,href:"/financial-periods"}]},{title:"Reports",items:[{title:"Financial Reports",icon:mU,href:"/reports"},{title:"Payroll Reports",icon:ar,href:"/payroll-reports"},{title:"ZRA Compliance",icon:ar,href:"/zra-compliance"},{title:"Tax Calculator",icon:ry,href:"/tax-calculator"}]},{title:"Administration",items:[{title:"Users & Roles",icon:Ks,href:"/users"},{title:"Audit Logs",icon:ar,href:"/audit-logs"},{title:"Payroll Settings",icon:sy,href:"/payroll-settings"},{title:"Company Settings",icon:sy,href:"/company-settings"}]}];function axe(t,e){return e?e==="super_admin"||e==="admin"?t:t.map(n=>({...n,items:n.items.filter(r=>Uq(e,r.href))})).filter(n=>n.items.length>0):t.map(n=>({...n,items:n.items.filter(r=>r.href==="/dashboard")})).filter(n=>n.items.length>0)}function ixe(){const t=Ao(),{data:e}=gj(),n=axe(sxe,e||null);return a.jsxs(CW,{className:"border-r border-sidebar-border",children:[a.jsx(kW,{className:"border-b border-sidebar-border p-4",children:a.jsx(Fa,{to:"/dashboard",className:"flex items-center gap-3",children:a.jsx(hf,{variant:"full",size:"lg"})})}),a.jsx(RW,{children:a.jsx(ld,{className:"h-full",children:a.jsx("div",{className:"space-y-1 p-2",children:n.map((r,s)=>{const i=r.items.some(o=>t.pathname===o.href);return a.jsx(txe,{defaultOpen:i||s<3,className:"group/collapsible",children:a.jsxs(MW,{className:"p-0",children:[a.jsxs(nxe,{className:"flex w-full items-center justify-between rounded-lg px-3 py-2 text-sm font-medium text-sidebar-foreground/70 hover:bg-sidebar-accent hover:text-sidebar-foreground transition-colors",children:[a.jsx("span",{children:r.title}),a.jsx(yP,{className:"h-4 w-4 transition-transform group-data-[state=open]/collapsible:rotate-180"})]}),a.jsx(rxe,{children:a.jsx(DW,{className:"mt-1",children:a.jsx(LW,{children:r.items.map(o=>{const l=t.pathname===o.href;return a.jsx($W,{children:a.jsx(FW,{asChild:!0,isActive:l,className:pe("ml-2 transition-all",l&&"bg-primary/10 text-primary font-medium border-l-2 border-primary"),children:a.jsxs(Fa,{to:o.href,children:[a.jsx(o.icon,{className:"h-4 w-4"}),a.jsx("span",{children:o.title})]})})},o.href)})})})})]})},r.title)})})})}),a.jsx(OW,{className:"border-t border-sidebar-border p-4",children:a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs(Fa,{to:"/settings",className:"flex items-center gap-2 rounded-lg px-3 py-2 text-sm text-sidebar-foreground hover:bg-sidebar-accent transition-colors",children:[a.jsx(sy,{className:"h-4 w-4"}),a.jsx("span",{children:"Settings"})]}),a.jsx(Xye,{})]})})]})}function Nt({children:t}){const{isAuthenticated:e,isLoading:n}=ct(),r=Ao();return n?a.jsx("div",{className:"flex min-h-screen items-center justify-center",children:a.jsx(uf,{message:"Verifying authentication...",size:"lg"})}):e?a.jsx(a.Fragment,{children:t}):a.jsx(XE,{to:"/auth",state:{from:r},replace:!0})}function zh({className:t}){return a.jsx("a",{href:"https://byteandberry.com/",target:"_blank",rel:"noopener noreferrer",className:pe("fixed bottom-4 right-4 z-50 flex items-center gap-1 text-xs font-medium text-muted-foreground/40 hover:text-primary transition-all duration-200 bg-background/50 hover:bg-background px-2 py-1 rounded-full backdrop-blur-[2px]",t),"aria-label":"Made by Byte & Berry - Visit Website",children:a.jsx("span",{children:"Made by Byte & Berry"})})}function St({children:t}){return rW(),a.jsx(Nt,{children:a.jsx(TW,{children:a.jsxs("div",{className:"flex min-h-screen w-full",children:[a.jsx(ixe,{}),a.jsxs(IW,{className:"flex-1",children:[a.jsxs("header",{className:"sticky top-0 z-40 flex h-14 items-center gap-4 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4 md:hidden",children:[a.jsx(PW,{className:"h-9 w-9",children:a.jsx(Ste,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-7 w-7 rounded-lg bg-primary flex items-center justify-center text-primary-foreground",children:a.jsx("span",{className:"text-xs font-bold",children:"Z"})}),a.jsx("span",{className:"font-semibold text-foreground",children:"ZedBooks"})]})]}),a.jsx("main",{className:"flex flex-col gap-4 p-4 md:p-6 lg:p-8",children:t}),a.jsx(zh,{})]})]})})})}function Ct({children:t,allowedRoles:e}){const n=Ao(),{hasRole:r,isLoading:s,userRole:i}=eve(e||[]);return s?a.jsx("div",{className:"flex min-h-screen items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Checking permissions..."})]})}):e&&e.length>0?r?a.jsx(a.Fragment,{children:t}):a.jsx(XE,{to:"/dashboard",replace:!0,state:{from:n,unauthorized:!0}}):Uq(i,n.pathname)?a.jsx(a.Fragment,{children:t}):a.jsx(XE,{to:"/dashboard",replace:!0,state:{from:n,unauthorized:!0}})}var oxe="Label",qW=N.forwardRef((t,e)=>a.jsx(Je.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));qW.displayName=oxe;var WW=qW;const lxe=Yd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),J=N.forwardRef(({className:t,...e},n)=>a.jsx(WW,{ref:n,className:pe(lxe(),t),...e}));J.displayName=WW.displayName;var jj="Tabs",[cxe,Qqe]=rs(jj,[uj]),HW=uj(),[uxe,fk]=cxe(jj),KW=N.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=Bv(l),[h,f]=Ii({prop:r,onChange:s,defaultProp:i??"",caller:jj});return a.jsx(uxe,{scope:n,baseId:Ha(),value:h,onValueChange:f,orientation:o,dir:d,activationMode:c,children:a.jsx(Je.div,{dir:d,"data-orientation":o,...u,ref:e})})});KW.displayName=jj;var GW="TabsList",YW=N.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=fk(GW,n),o=HW(n);return a.jsx(M8,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:a.jsx(Je.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});YW.displayName=GW;var QW="TabsTrigger",XW=N.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=fk(QW,n),l=HW(n),c=e7(o.baseId,r),u=t7(o.baseId,r),d=r===o.value;return a.jsx(D8,{asChild:!0,...l,focusable:!s,active:d,children:a.jsx(Je.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:Pe(t.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:Pe(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:Pe(t.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!s&&h&&o.onValueChange(r)})})})});XW.displayName=QW;var ZW="TabsContent",JW=N.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,l=fk(ZW,n),c=e7(l.baseId,r),u=t7(l.baseId,r),d=r===l.value,h=N.useRef(d);return N.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),a.jsx(ss,{present:s||d,children:({present:f})=>a.jsx(Je.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:f&&i})})});JW.displayName=ZW;function e7(t,e){return`${t}-trigger-${e}`}function t7(t,e){return`${t}-content-${e}`}var dxe=KW,n7=YW,r7=XW,s7=JW;const Yv=dxe,Qm=N.forwardRef(({className:t,...e},n)=>a.jsx(n7,{ref:n,className:pe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Qm.displayName=n7.displayName;const ja=N.forwardRef(({className:t,...e},n)=>a.jsx(r7,{ref:n,className:pe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...e}));ja.displayName=r7.displayName;const Na=N.forwardRef(({className:t,...e},n)=>a.jsx(s7,{ref:n,className:pe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Na.displayName=s7.displayName;function mk(t){const e=N.useRef({value:t,previous:t});return N.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Nj="Checkbox",[hxe,Xqe]=rs(Nj),[fxe,pk]=hxe(Nj);function mxe(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:i,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:h}=t,[f,m]=Ii({prop:n,defaultProp:s??!1,onChange:c,caller:Nj}),[b,g]=N.useState(null),[x,w]=N.useState(null),y=N.useRef(!1),A=b?!!o||!!b.closest("form"):!0,T={checked:f,disabled:i,setChecked:m,control:b,setControl:g,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:y,required:u,defaultChecked:Mc(s)?!1:s,isFormControl:A,bubbleInput:x,setBubbleInput:w};return a.jsx(fxe,{scope:e,...T,children:pxe(h)?h(T):r})}var a7="CheckboxTrigger",i7=N.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:i,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:m,bubbleInput:b}=pk(a7,t),g=Mt(s,d),x=N.useRef(c);return N.useEffect(()=>{const w=i==null?void 0:i.form;if(w){const y=()=>h(x.current);return w.addEventListener("reset",y),()=>w.removeEventListener("reset",y)}},[i,h]),a.jsx(Je.button,{type:"button",role:"checkbox","aria-checked":Mc(c)?"mixed":c,"aria-required":u,"data-state":d7(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:g,onKeyDown:Pe(e,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:Pe(n,w=>{h(y=>Mc(y)?!0:!y),b&&m&&(f.current=w.isPropagationStopped(),f.current||w.stopPropagation())})})});i7.displayName=a7;var gk=N.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...h}=t;return a.jsx(mxe,{__scopeCheckbox:n,checked:s,defaultChecked:i,disabled:l,required:o,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:f})=>a.jsxs(a.Fragment,{children:[a.jsx(i7,{...h,ref:e,__scopeCheckbox:n}),f&&a.jsx(u7,{__scopeCheckbox:n})]})})});gk.displayName=Nj;var o7="CheckboxIndicator",l7=N.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=pk(o7,n);return a.jsx(ss,{present:r||Mc(i.checked)||i.checked===!0,children:a.jsx(Je.span,{"data-state":d7(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});l7.displayName=o7;var c7="CheckboxBubbleInput",u7=N.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:h,bubbleInput:f,setBubbleInput:m}=pk(c7,t),b=Mt(n,m),g=mk(i),x=AP(r);N.useEffect(()=>{const y=f;if(!y)return;const A=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(A,"checked").set,S=!s.current;if(g!==i&&v){const j=new Event("click",{bubbles:S});y.indeterminate=Mc(i),v.call(y,Mc(i)?!1:i),y.dispatchEvent(j)}},[f,g,i,s]);const w=N.useRef(Mc(i)?!1:i);return a.jsx(Je.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??w.current,required:l,disabled:c,name:u,value:d,form:h,...e,tabIndex:-1,ref:b,style:{...e.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});u7.displayName=c7;function pxe(t){return typeof t=="function"}function Mc(t){return t==="indeterminate"}function d7(t){return Mc(t)?"indeterminate":t?"checked":"unchecked"}const yk=N.forwardRef(({className:t,...e},n)=>a.jsx(gk,{ref:n,className:pe("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:a.jsx(l7,{className:pe("flex items-center justify-center text-current"),children:a.jsx(_v,{className:"h-4 w-4"})})}));yk.displayName=gk.displayName;var gxe=[" ","Enter","ArrowUp","ArrowDown"],yxe=[" ","Enter"],Md="Select",[Sj,Ej,vxe]=N_(Md),[Xm,Zqe]=rs(Md,[vxe,Fm]),Aj=Fm(),[xxe,hu]=Xm(Md),[bxe,wxe]=Xm(Md),h7=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:f,required:m,form:b}=t,g=Aj(e),[x,w]=N.useState(null),[y,A]=N.useState(null),[T,v]=N.useState(!1),S=Bv(u),[j,p]=Ii({prop:r,defaultProp:s??!1,onChange:i,caller:Md}),[E,P]=Ii({prop:o,defaultProp:l,onChange:c,caller:Md}),C=N.useRef(null),I=x?b||!!x.closest("form"):!0,[O,$]=N.useState(new Set),z=Array.from(O).map(H=>H.props.value).join(";");return a.jsx(PP,{...g,children:a.jsxs(xxe,{required:m,scope:e,trigger:x,onTriggerChange:w,valueNode:y,onValueNodeChange:A,valueNodeHasChildren:T,onValueNodeHasChildrenChange:v,contentId:Ha(),value:E,onValueChange:P,open:j,onOpenChange:p,dir:S,triggerPointerDownPosRef:C,disabled:f,children:[a.jsx(Sj.Provider,{scope:e,children:a.jsx(bxe,{scope:t.__scopeSelect,onNativeOptionAdd:N.useCallback(H=>{$(M=>new Set(M).add(H))},[]),onNativeOptionRemove:N.useCallback(H=>{$(M=>{const F=new Set(M);return F.delete(H),F})},[]),children:n})}),I?a.jsxs(D7,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:h,value:E,onChange:H=>P(H.target.value),disabled:f,form:b,children:[E===void 0?a.jsx("option",{value:""}):null,Array.from(O)]},z):null]})})};h7.displayName=Md;var f7="SelectTrigger",m7=N.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=Aj(n),o=hu(f7,n),l=o.disabled||r,c=Mt(e,o.onTriggerChange),u=Ej(n),d=N.useRef("touch"),[h,f,m]=$7(g=>{const x=u().filter(A=>!A.disabled),w=x.find(A=>A.value===o.value),y=F7(x,g,w);y!==void 0&&o.onValueChange(y.value)}),b=g=>{l||(o.onOpenChange(!0),m()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return a.jsx(IP,{asChild:!0,...i,children:a.jsx(Je.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":L7(o.value)?"":void 0,...s,ref:c,onClick:Pe(s.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&b(g)}),onPointerDown:Pe(s.onPointerDown,g=>{d.current=g.pointerType;const x=g.target;x.hasPointerCapture(g.pointerId)&&x.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(b(g),g.preventDefault())}),onKeyDown:Pe(s.onKeyDown,g=>{const x=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(x&&g.key===" ")&&gxe.includes(g.key)&&(b(),g.preventDefault())})})})});m7.displayName=f7;var p7="SelectValue",g7=N.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...l}=t,c=hu(p7,n),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,h=Mt(e,c.onValueNodeChange);return cr(()=>{u(d)},[u,d]),a.jsx(Je.span,{...l,ref:h,style:{pointerEvents:"none"},children:L7(c.value)?a.jsx(a.Fragment,{children:o}):i})});g7.displayName=p7;var _xe="SelectIcon",y7=N.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return a.jsx(Je.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});y7.displayName=_xe;var jxe="SelectPortal",v7=t=>a.jsx(bv,{asChild:!0,...t});v7.displayName=jxe;var Dd="SelectContent",x7=N.forwardRef((t,e)=>{const n=hu(Dd,t.__scopeSelect),[r,s]=N.useState();if(cr(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Kd.createPortal(a.jsx(b7,{scope:t.__scopeSelect,children:a.jsx(Sj.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),i):null}return a.jsx(w7,{...t,ref:e})});x7.displayName=Dd;var fi=10,[b7,fu]=Xm(Dd),Nxe="SelectContentImpl",Sxe=yd("SelectContent.RemoveScroll"),w7=N.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:b,hideWhenDetached:g,avoidCollisions:x,...w}=t,y=hu(Dd,n),[A,T]=N.useState(null),[v,S]=N.useState(null),j=Mt(e,je=>T(je)),[p,E]=N.useState(null),[P,C]=N.useState(null),I=Ej(n),[O,$]=N.useState(!1),z=N.useRef(!1);N.useEffect(()=>{if(A)return KI(A)},[A]),HI();const H=N.useCallback(je=>{const[ht,...we]=I().map(ue=>ue.ref.current),[Me]=we.slice(-1),Fe=document.activeElement;for(const ue of je)if(ue===Fe||(ue==null||ue.scrollIntoView({block:"nearest"}),ue===ht&&v&&(v.scrollTop=0),ue===Me&&v&&(v.scrollTop=v.scrollHeight),ue==null||ue.focus(),document.activeElement!==Fe))return},[I,v]),M=N.useCallback(()=>H([p,A]),[H,p,A]);N.useEffect(()=>{O&&M()},[O,M]);const{onOpenChange:F,triggerPointerDownPosRef:L}=y;N.useEffect(()=>{if(A){let je={x:0,y:0};const ht=Me=>{var Fe,ue;je={x:Math.abs(Math.round(Me.pageX)-(((Fe=L.current)==null?void 0:Fe.x)??0)),y:Math.abs(Math.round(Me.pageY)-(((ue=L.current)==null?void 0:ue.y)??0))}},we=Me=>{je.x<=10&&je.y<=10?Me.preventDefault():A.contains(Me.target)||F(!1),document.removeEventListener("pointermove",ht),L.current=null};return L.current!==null&&(document.addEventListener("pointermove",ht),document.addEventListener("pointerup",we,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ht),document.removeEventListener("pointerup",we,{capture:!0})}}},[A,F,L]),N.useEffect(()=>{const je=()=>F(!1);return window.addEventListener("blur",je),window.addEventListener("resize",je),()=>{window.removeEventListener("blur",je),window.removeEventListener("resize",je)}},[F]);const[W,ie]=$7(je=>{const ht=I().filter(Fe=>!Fe.disabled),we=ht.find(Fe=>Fe.ref.current===document.activeElement),Me=F7(ht,je,we);Me&&setTimeout(()=>Me.ref.current.focus())}),oe=N.useCallback((je,ht,we)=>{const Me=!z.current&&!we;(y.value!==void 0&&y.value===ht||Me)&&(E(je),Me&&(z.current=!0))},[y.value]),me=N.useCallback(()=>A==null?void 0:A.focus(),[A]),Ie=N.useCallback((je,ht,we)=>{const Me=!z.current&&!we;(y.value!==void 0&&y.value===ht||Me)&&C(je)},[y.value]),lt=r==="popper"?kA:_7,ut=lt===kA?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:b,hideWhenDetached:g,avoidCollisions:x}:{};return a.jsx(b7,{scope:n,content:A,viewport:v,onViewportChange:S,itemRefCallback:oe,selectedItem:p,onItemLeave:me,itemTextRefCallback:Ie,focusSelectedItem:M,selectedItemText:P,position:r,isPositioned:O,searchRef:W,children:a.jsx(hj,{as:Sxe,allowPinchZoom:!0,children:a.jsx(cj,{asChild:!0,trapped:y.open,onMountAutoFocus:je=>{je.preventDefault()},onUnmountAutoFocus:Pe(s,je=>{var ht;(ht=y.trigger)==null||ht.focus({preventScroll:!0}),je.preventDefault()}),children:a.jsx(Rm,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:je=>je.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:a.jsx(lt,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:je=>je.preventDefault(),...w,...ut,onPlaced:()=>$(!0),ref:j,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:Pe(w.onKeyDown,je=>{const ht=je.ctrlKey||je.altKey||je.metaKey;if(je.key==="Tab"&&je.preventDefault(),!ht&&je.key.length===1&&ie(je.key),["ArrowUp","ArrowDown","Home","End"].includes(je.key)){let Me=I().filter(Fe=>!Fe.disabled).map(Fe=>Fe.ref.current);if(["ArrowUp","End"].includes(je.key)&&(Me=Me.slice().reverse()),["ArrowUp","ArrowDown"].includes(je.key)){const Fe=je.target,ue=Me.indexOf(Fe);Me=Me.slice(ue+1)}setTimeout(()=>H(Me)),je.preventDefault()}})})})})})})});w7.displayName=Nxe;var Exe="SelectItemAlignedPosition",_7=N.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=hu(Dd,n),o=fu(Dd,n),[l,c]=N.useState(null),[u,d]=N.useState(null),h=Mt(e,j=>d(j)),f=Ej(n),m=N.useRef(!1),b=N.useRef(!0),{viewport:g,selectedItem:x,selectedItemText:w,focusSelectedItem:y}=o,A=N.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&g&&x&&w){const j=i.trigger.getBoundingClientRect(),p=u.getBoundingClientRect(),E=i.valueNode.getBoundingClientRect(),P=w.getBoundingClientRect();if(i.dir!=="rtl"){const Fe=P.left-p.left,ue=E.left-Fe,Tt=j.left-ue,gt=j.width+Tt,an=Math.max(gt,p.width),Zt=window.innerWidth-fi,wn=IA(ue,[fi,Math.max(fi,Zt-an)]);l.style.minWidth=gt+"px",l.style.left=wn+"px"}else{const Fe=p.right-P.right,ue=window.innerWidth-E.right-Fe,Tt=window.innerWidth-j.right-ue,gt=j.width+Tt,an=Math.max(gt,p.width),Zt=window.innerWidth-fi,wn=IA(ue,[fi,Math.max(fi,Zt-an)]);l.style.minWidth=gt+"px",l.style.right=wn+"px"}const C=f(),I=window.innerHeight-fi*2,O=g.scrollHeight,$=window.getComputedStyle(u),z=parseInt($.borderTopWidth,10),H=parseInt($.paddingTop,10),M=parseInt($.borderBottomWidth,10),F=parseInt($.paddingBottom,10),L=z+H+O+F+M,W=Math.min(x.offsetHeight*5,L),ie=window.getComputedStyle(g),oe=parseInt(ie.paddingTop,10),me=parseInt(ie.paddingBottom,10),Ie=j.top+j.height/2-fi,lt=I-Ie,ut=x.offsetHeight/2,je=x.offsetTop+ut,ht=z+H+je,we=L-ht;if(ht<=Ie){const Fe=C.length>0&&x===C[C.length-1].ref.current;l.style.bottom="0px";const ue=u.clientHeight-g.offsetTop-g.offsetHeight,Tt=Math.max(lt,ut+(Fe?me:0)+ue+M),gt=ht+Tt;l.style.height=gt+"px"}else{const Fe=C.length>0&&x===C[0].ref.current;l.style.top="0px";const Tt=Math.max(Ie,z+g.offsetTop+(Fe?oe:0)+ut)+we;l.style.height=Tt+"px",g.scrollTop=ht-Ie+g.offsetTop}l.style.margin=`${fi}px 0`,l.style.minHeight=W+"px",l.style.maxHeight=I+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[f,i.trigger,i.valueNode,l,u,g,x,w,i.dir,r]);cr(()=>A(),[A]);const[T,v]=N.useState();cr(()=>{u&&v(window.getComputedStyle(u).zIndex)},[u]);const S=N.useCallback(j=>{j&&b.current===!0&&(A(),y==null||y(),b.current=!1)},[A,y]);return a.jsx(Txe,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:S,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:T},children:a.jsx(Je.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});_7.displayName=Exe;var Axe="SelectPopperPosition",kA=N.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=fi,...i}=t,o=Aj(n);return a.jsx(kP,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});kA.displayName=Axe;var[Txe,vk]=Xm(Dd,{}),OA="SelectViewport",j7=N.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=fu(OA,n),o=vk(OA,n),l=Mt(e,i.onViewportChange),c=N.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(Sj.Slot,{scope:n,children:a.jsx(Je.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Pe(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&h){const m=Math.abs(c.current-d.scrollTop);if(m>0){const b=window.innerHeight-fi*2,g=parseFloat(h.style.minHeight),x=parseFloat(h.style.height),w=Math.max(g,x);if(w<b){const y=w+m,A=Math.min(b,y),T=y-A;h.style.height=A+"px",h.style.bottom==="0px"&&(d.scrollTop=T>0?T:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});j7.displayName=OA;var N7="SelectGroup",[Cxe,Pxe]=Xm(N7),Ixe=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Ha();return a.jsx(Cxe,{scope:n,id:s,children:a.jsx(Je.div,{role:"group","aria-labelledby":s,...r,ref:e})})});Ixe.displayName=N7;var S7="SelectLabel",E7=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Pxe(S7,n);return a.jsx(Je.div,{id:s.id,...r,ref:e})});E7.displayName=S7;var G0="SelectItem",[kxe,A7]=Xm(G0),T7=N.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,l=hu(G0,n),c=fu(G0,n),u=l.value===r,[d,h]=N.useState(i??""),[f,m]=N.useState(!1),b=Mt(e,y=>{var A;return(A=c.itemRefCallback)==null?void 0:A.call(c,y,r,s)}),g=Ha(),x=N.useRef("touch"),w=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(kxe,{scope:n,value:r,disabled:s,textId:g,isSelected:u,onItemTextChange:N.useCallback(y=>{h(A=>A||((y==null?void 0:y.textContent)??"").trim())},[]),children:a.jsx(Sj.ItemSlot,{scope:n,value:r,disabled:s,textValue:d,children:a.jsx(Je.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:b,onFocus:Pe(o.onFocus,()=>m(!0)),onBlur:Pe(o.onBlur,()=>m(!1)),onClick:Pe(o.onClick,()=>{x.current!=="mouse"&&w()}),onPointerUp:Pe(o.onPointerUp,()=>{x.current==="mouse"&&w()}),onPointerDown:Pe(o.onPointerDown,y=>{x.current=y.pointerType}),onPointerMove:Pe(o.onPointerMove,y=>{var A;x.current=y.pointerType,s?(A=c.onItemLeave)==null||A.call(c):x.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Pe(o.onPointerLeave,y=>{var A;y.currentTarget===document.activeElement&&((A=c.onItemLeave)==null||A.call(c))}),onKeyDown:Pe(o.onKeyDown,y=>{var T;((T=c.searchRef)==null?void 0:T.current)!==""&&y.key===" "||(yxe.includes(y.key)&&w(),y.key===" "&&y.preventDefault())})})})})});T7.displayName=G0;var dg="SelectItemText",C7=N.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=hu(dg,n),l=fu(dg,n),c=A7(dg,n),u=wxe(dg,n),[d,h]=N.useState(null),f=Mt(e,w=>h(w),c.onItemTextChange,w=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,w,c.value,c.disabled)}),m=d==null?void 0:d.textContent,b=N.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:x}=u;return cr(()=>(g(b),()=>x(b)),[g,x,b]),a.jsxs(a.Fragment,{children:[a.jsx(Je.span,{id:c.textId,...i,ref:f}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Kd.createPortal(i.children,o.valueNode):null]})});C7.displayName=dg;var P7="SelectItemIndicator",I7=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return A7(P7,n).isSelected?a.jsx(Je.span,{"aria-hidden":!0,...r,ref:e}):null});I7.displayName=P7;var RA="SelectScrollUpButton",k7=N.forwardRef((t,e)=>{const n=fu(RA,t.__scopeSelect),r=vk(RA,t.__scopeSelect),[s,i]=N.useState(!1),o=Mt(e,r.onScrollButtonChange);return cr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(R7,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});k7.displayName=RA;var MA="SelectScrollDownButton",O7=N.forwardRef((t,e)=>{const n=fu(MA,t.__scopeSelect),r=vk(MA,t.__scopeSelect),[s,i]=N.useState(!1),o=Mt(e,r.onScrollButtonChange);return cr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(R7,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});O7.displayName=MA;var R7=N.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=fu("SelectScrollButton",n),o=N.useRef(null),l=Ej(n),c=N.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return N.useEffect(()=>()=>c(),[c]),cr(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),a.jsx(Je.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Pe(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Pe(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Pe(s.onPointerLeave,()=>{c()})})}),Oxe="SelectSeparator",M7=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return a.jsx(Je.div,{"aria-hidden":!0,...r,ref:e})});M7.displayName=Oxe;var DA="SelectArrow",Rxe=N.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Aj(n),i=hu(DA,n),o=fu(DA,n);return i.open&&o.position==="popper"?a.jsx(OP,{...s,...r,ref:e}):null});Rxe.displayName=DA;var Mxe="SelectBubbleInput",D7=N.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=N.useRef(null),i=Mt(r,s),o=mk(e);return N.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&d){const h=new Event("change",{bubbles:!0});d.call(l,e),l.dispatchEvent(h)}},[o,e]),a.jsx(Je.select,{...n,style:{...H5,...n.style},ref:i,defaultValue:e})});D7.displayName=Mxe;function L7(t){return t===""||t===void 0}function $7(t){const e=ir(t),n=N.useRef(""),r=N.useRef(0),s=N.useCallback(o=>{const l=n.current+o;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=N.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function F7(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=Dxe(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function Dxe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Lxe=h7,V7=m7,$xe=g7,Fxe=y7,Vxe=v7,B7=x7,Bxe=j7,U7=E7,z7=T7,Uxe=C7,zxe=I7,q7=k7,W7=O7,H7=M7;const K7="__lovable_empty__",It=({onValueChange:t,...e})=>a.jsx(Lxe,{...e,onValueChange:n=>{t==null||t(n===K7?"":n)}}),kt=$xe,Et=N.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(V7,{ref:r,className:pe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,a.jsx(Fxe,{asChild:!0,children:a.jsx(yP,{className:"h-4 w-4 opacity-50"})})]}));Et.displayName=V7.displayName;const G7=N.forwardRef(({className:t,...e},n)=>a.jsx(q7,{ref:n,className:pe("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(fte,{className:"h-4 w-4"})}));G7.displayName=q7.displayName;const Y7=N.forwardRef(({className:t,...e},n)=>a.jsx(W7,{ref:n,className:pe("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(yP,{className:"h-4 w-4"})}));Y7.displayName=W7.displayName;const At=N.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>a.jsx(Vxe,{children:a.jsxs(B7,{ref:s,className:pe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[a.jsx(G7,{}),a.jsx(Bxe,{className:pe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(Y7,{})]})}));At.displayName=B7.displayName;const qxe=N.forwardRef(({className:t,...e},n)=>a.jsx(U7,{ref:n,className:pe("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));qxe.displayName=U7.displayName;const be=N.forwardRef(({className:t,children:e,value:n,...r},s)=>a.jsxs(z7,{ref:s,value:n===""?K7:n,className:pe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(zxe,{children:a.jsx(_v,{className:"h-4 w-4"})})}),a.jsx(Uxe,{children:e})]}));be.displayName=z7.displayName;const Wxe=N.forwardRef(({className:t,...e},n)=>a.jsx(H7,{ref:n,className:pe("-mx-1 my-1 h-px bg-muted",t),...e}));Wxe.displayName=H7.displayName;var ln;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),o={};for(const l of i)o[l]=s[l];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(ln||(ln={}));var j4;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(j4||(j4={}));const at=ln.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Gl=t=>{switch(typeof t){case"undefined":return at.undefined;case"string":return at.string;case"number":return Number.isNaN(t)?at.nan:at.number;case"boolean":return at.boolean;case"function":return at.function;case"bigint":return at.bigint;case"symbol":return at.symbol;case"object":return Array.isArray(t)?at.array:t===null?at.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?at.promise:typeof Map<"u"&&t instanceof Map?at.map:typeof Set<"u"&&t instanceof Set?at.set:typeof Date<"u"&&t instanceof Date?at.date:at.object;default:return at.unknown}},Te=ln.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ya extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(n(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return s(this),r}static assert(e){if(!(e instanceof ya))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ln.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];n[i]=n[i]||[],n[i].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ya.create=t=>new ya(t);const LA=(t,e)=>{let n;switch(t.code){case Te.invalid_type:t.received===at.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Te.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ln.jsonStringifyReplacer)}`;break;case Te.unrecognized_keys:n=`Unrecognized key(s) in object: ${ln.joinValues(t.keys,", ")}`;break;case Te.invalid_union:n="Invalid input";break;case Te.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ln.joinValues(t.options)}`;break;case Te.invalid_enum_value:n=`Invalid enum value. Expected ${ln.joinValues(t.options)}, received '${t.received}'`;break;case Te.invalid_arguments:n="Invalid function arguments";break;case Te.invalid_return_type:n="Invalid function return type";break;case Te.invalid_date:n="Invalid date";break;case Te.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ln.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Te.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Te.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Te.custom:n="Invalid input";break;case Te.invalid_intersection_types:n="Intersection results could not be merged";break;case Te.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Te.not_finite:n="Number must be finite";break;default:n=e.defaultError,ln.assertNever(t)}return{message:n}};let Hxe=LA;function Kxe(){return Hxe}const Gxe=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let l="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:e,defaultError:l}).message;return{...s,path:i,message:l}};function We(t,e){const n=Kxe(),r=Gxe({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===LA?void 0:LA].filter(s=>!!s)});t.common.issues.push(r)}class Aa{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Ot;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return Aa.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Ot;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Ot=Object.freeze({status:"aborted"}),hg=t=>({status:"dirty",value:t}),ri=t=>({status:"valid",value:t}),N4=t=>t.status==="aborted",S4=t=>t.status==="dirty",Qf=t=>t.status==="valid",Y0=t=>typeof Promise<"u"&&t instanceof Promise;var ot;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ot||(ot={}));class Yc{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const E4=(t,e)=>{if(Qf(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ya(t.common.issues);return this._error=n,this._error}}};function Ht(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,l)=>{const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??r??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??n??l.defaultError}},description:s}}class sn{get description(){return this._def.description}_getType(e){return Gl(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Gl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Aa,ctx:{common:e.parent.common,data:e.data,parsedType:Gl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Y0(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Gl(e)},s=this._parseSync({data:e,path:r.path,parent:r});return E4(r,s)}"~validate"(e){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Gl(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:n});return Qf(i)?{value:i.value}:{issues:n.common.issues}}catch(i){(s=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(i=>Qf(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Gl(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Y0(s)?s:Promise.resolve(s));return E4(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),l=()=>i.addIssue({code:Te.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Zf({schema:this,typeName:Rt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Dc.create(this,this._def)}nullable(){return Jf.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return mo.create(this)}promise(){return J0.create(this,this._def)}or(e){return X0.create([this,e],this._def)}and(e){return Z0.create(this,e,this._def)}transform(e){return new Zf({...Ht(this._def),schema:this,typeName:Rt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new BA({...Ht(this._def),innerType:this,defaultValue:n,typeName:Rt.ZodDefault})}brand(){return new ybe({typeName:Rt.ZodBranded,type:this,...Ht(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new UA({...Ht(this._def),innerType:this,catchValue:n,typeName:Rt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return xk.create(this,e)}readonly(){return zA.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Yxe=/^c[^\s-]{8,}$/i,Qxe=/^[0-9a-z]+$/,Xxe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Zxe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Jxe=/^[a-z0-9_-]{21}$/i,ebe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,tbe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,nbe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,rbe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let X1;const sbe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,abe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ibe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,obe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,lbe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,cbe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Q7="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ube=new RegExp(`^${Q7}$`);function X7(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function dbe(t){return new RegExp(`^${X7(t)}$`)}function hbe(t){let e=`${Q7}T${X7(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function fbe(t,e){return!!((e==="v4"||!e)&&sbe.test(t)||(e==="v6"||!e)&&ibe.test(t))}function mbe(t,e){if(!ebe.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function pbe(t,e){return!!((e==="v4"||!e)&&abe.test(t)||(e==="v6"||!e)&&obe.test(t))}class vc extends sn{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==at.string){const i=this._getOrReturnCtx(e);return We(i,{code:Te.invalid_type,expected:at.string,received:i.parsedType}),Ot}const r=new Aa;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),We(s,{code:Te.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),We(s,{code:Te.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,l=e.data.length<i.value;(o||l)&&(s=this._getOrReturnCtx(e,s),o?We(s,{code:Te.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&We(s,{code:Te.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")nbe.test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"email",code:Te.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")X1||(X1=new RegExp(rbe,"u")),X1.test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"emoji",code:Te.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")Zxe.test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"uuid",code:Te.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")Jxe.test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"nanoid",code:Te.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")Yxe.test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"cuid",code:Te.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")Qxe.test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"cuid2",code:Te.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")Xxe.test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"ulid",code:Te.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),We(s,{validation:"url",code:Te.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"regex",code:Te.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),We(s,{code:Te.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),We(s,{code:Te.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),We(s,{code:Te.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?hbe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{code:Te.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?ube.test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{code:Te.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?dbe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{code:Te.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?tbe.test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"duration",code:Te.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?fbe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"ip",code:Te.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?mbe(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"jwt",code:Te.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?pbe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"cidr",code:Te.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?lbe.test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"base64",code:Te.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?cbe.test(e.data)||(s=this._getOrReturnCtx(e,s),We(s,{validation:"base64url",code:Te.invalid_string,message:i.message}),r.dirty()):ln.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Te.invalid_string,...ot.errToObj(r)})}_addCheck(e){return new vc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ot.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ot.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ot.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ot.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ot.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ot.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ot.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ot.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ot.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ot.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ot.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ot.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ot.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...ot.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ot.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ot.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ot.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ot.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ot.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ot.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ot.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ot.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ot.errToObj(n)})}nonempty(e){return this.min(1,ot.errToObj(e))}trim(){return new vc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new vc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new vc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}vc.create=t=>new vc({checks:[],typeName:Rt.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Ht(t)});function gbe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}class Ny extends sn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==at.number){const i=this._getOrReturnCtx(e);return We(i,{code:Te.invalid_type,expected:at.number,received:i.parsedType}),Ot}let r;const s=new Aa;for(const i of this._def.checks)i.kind==="int"?ln.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),We(r,{code:Te.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),We(r,{code:Te.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),We(r,{code:Te.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?gbe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),We(r,{code:Te.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),We(r,{code:Te.not_finite,message:i.message}),s.dirty()):ln.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ot.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ot.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ot.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ot.toString(n))}setLimit(e,n,r,s){return new Ny({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ot.toString(s)}]})}_addCheck(e){return new Ny({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ot.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ot.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ot.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ot.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ot.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ot.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ot.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ot.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ot.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ln.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Ny.create=t=>new Ny({checks:[],typeName:Rt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Ht(t)});class Sy extends sn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==at.bigint)return this._getInvalidInput(e);let r;const s=new Aa;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),We(r,{code:Te.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),We(r,{code:Te.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),We(r,{code:Te.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):ln.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return We(n,{code:Te.invalid_type,expected:at.bigint,received:n.parsedType}),Ot}gte(e,n){return this.setLimit("min",e,!0,ot.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ot.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ot.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ot.toString(n))}setLimit(e,n,r,s){return new Sy({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ot.toString(s)}]})}_addCheck(e){return new Sy({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ot.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ot.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ot.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ot.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ot.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Sy.create=t=>new Sy({checks:[],typeName:Rt.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Ht(t)});class $A extends sn{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==at.boolean){const r=this._getOrReturnCtx(e);return We(r,{code:Te.invalid_type,expected:at.boolean,received:r.parsedType}),Ot}return ri(e.data)}}$A.create=t=>new $A({typeName:Rt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Ht(t)});class Q0 extends sn{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==at.date){const i=this._getOrReturnCtx(e);return We(i,{code:Te.invalid_type,expected:at.date,received:i.parsedType}),Ot}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return We(i,{code:Te.invalid_date}),Ot}const r=new Aa;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),We(s,{code:Te.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),We(s,{code:Te.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):ln.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Q0({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ot.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ot.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Q0.create=t=>new Q0({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Rt.ZodDate,...Ht(t)});class A4 extends sn{_parse(e){if(this._getType(e)!==at.symbol){const r=this._getOrReturnCtx(e);return We(r,{code:Te.invalid_type,expected:at.symbol,received:r.parsedType}),Ot}return ri(e.data)}}A4.create=t=>new A4({typeName:Rt.ZodSymbol,...Ht(t)});class T4 extends sn{_parse(e){if(this._getType(e)!==at.undefined){const r=this._getOrReturnCtx(e);return We(r,{code:Te.invalid_type,expected:at.undefined,received:r.parsedType}),Ot}return ri(e.data)}}T4.create=t=>new T4({typeName:Rt.ZodUndefined,...Ht(t)});class C4 extends sn{_parse(e){if(this._getType(e)!==at.null){const r=this._getOrReturnCtx(e);return We(r,{code:Te.invalid_type,expected:at.null,received:r.parsedType}),Ot}return ri(e.data)}}C4.create=t=>new C4({typeName:Rt.ZodNull,...Ht(t)});class P4 extends sn{constructor(){super(...arguments),this._any=!0}_parse(e){return ri(e.data)}}P4.create=t=>new P4({typeName:Rt.ZodAny,...Ht(t)});class I4 extends sn{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ri(e.data)}}I4.create=t=>new I4({typeName:Rt.ZodUnknown,...Ht(t)});class Qc extends sn{_parse(e){const n=this._getOrReturnCtx(e);return We(n,{code:Te.invalid_type,expected:at.never,received:n.parsedType}),Ot}}Qc.create=t=>new Qc({typeName:Rt.ZodNever,...Ht(t)});class k4 extends sn{_parse(e){if(this._getType(e)!==at.undefined){const r=this._getOrReturnCtx(e);return We(r,{code:Te.invalid_type,expected:at.void,received:r.parsedType}),Ot}return ri(e.data)}}k4.create=t=>new k4({typeName:Rt.ZodVoid,...Ht(t)});class mo extends sn{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==at.array)return We(n,{code:Te.invalid_type,expected:at.array,received:n.parsedType}),Ot;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,l=n.data.length<s.exactLength.value;(o||l)&&(We(n,{code:o?Te.too_big:Te.too_small,minimum:l?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(We(n,{code:Te.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(We(n,{code:Te.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>s.type._parseAsync(new Yc(n,o,n.path,l)))).then(o=>Aa.mergeArray(r,o));const i=[...n.data].map((o,l)=>s.type._parseSync(new Yc(n,o,n.path,l)));return Aa.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new mo({...this._def,minLength:{value:e,message:ot.toString(n)}})}max(e,n){return new mo({...this._def,maxLength:{value:e,message:ot.toString(n)}})}length(e,n){return new mo({...this._def,exactLength:{value:e,message:ot.toString(n)}})}nonempty(e){return this.min(1,e)}}mo.create=(t,e)=>new mo({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Rt.ZodArray,...Ht(e)});function Th(t){if(t instanceof nr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Dc.create(Th(r))}return new nr({...t._def,shape:()=>e})}else return t instanceof mo?new mo({...t._def,type:Th(t.element)}):t instanceof Dc?Dc.create(Th(t.unwrap())):t instanceof Jf?Jf.create(Th(t.unwrap())):t instanceof Ld?Ld.create(t.items.map(e=>Th(e))):t}class nr extends sn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ln.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==at.object){const u=this._getOrReturnCtx(e);return We(u,{code:Te.invalid_type,expected:at.object,received:u.parsedType}),Ot}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Qc&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const d=i[u],h=s.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Yc(s,h,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof Qc){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(u==="strict")l.length>0&&(We(s,{code:Te.unrecognized_keys,keys:l}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const h=s.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Yc(s,h,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const h=await d.key,f=await d.value;u.push({key:h,value:f,alwaysSet:d.alwaysSet})}return u}).then(u=>Aa.mergeObjectSync(r,u)):Aa.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return ot.errToObj,new nr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,o;const s=((o=(i=this._def).errorMap)==null?void 0:o.call(i,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:ot.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new nr({...this._def,unknownKeys:"strip"})}passthrough(){return new nr({...this._def,unknownKeys:"passthrough"})}extend(e){return new nr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new nr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Rt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new nr({...this._def,catchall:e})}pick(e){const n={};for(const r of ln.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new nr({...this._def,shape:()=>n})}omit(e){const n={};for(const r of ln.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new nr({...this._def,shape:()=>n})}deepPartial(){return Th(this)}partial(e){const n={};for(const r of ln.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new nr({...this._def,shape:()=>n})}required(e){const n={};for(const r of ln.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Dc;)i=i._def.innerType;n[r]=i}return new nr({...this._def,shape:()=>n})}keyof(){return Z7(ln.objectKeys(this.shape))}}nr.create=(t,e)=>new nr({shape:()=>t,unknownKeys:"strip",catchall:Qc.create(),typeName:Rt.ZodObject,...Ht(e)});nr.strictCreate=(t,e)=>new nr({shape:()=>t,unknownKeys:"strict",catchall:Qc.create(),typeName:Rt.ZodObject,...Ht(e)});nr.lazycreate=(t,e)=>new nr({shape:t,unknownKeys:"strip",catchall:Qc.create(),typeName:Rt.ZodObject,...Ht(e)});class X0 extends sn{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new ya(l.ctx.common.issues));return We(n,{code:Te.invalid_union,unionErrors:o}),Ot}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=c._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(c=>new ya(c));return We(n,{code:Te.invalid_union,unionErrors:l}),Ot}}get options(){return this._def.options}}X0.create=(t,e)=>new X0({options:t,typeName:Rt.ZodUnion,...Ht(e)});function FA(t,e){const n=Gl(t),r=Gl(e);if(t===e)return{valid:!0,data:t};if(n===at.object&&r===at.object){const s=ln.objectKeys(e),i=ln.objectKeys(t).filter(l=>s.indexOf(l)!==-1),o={...t,...e};for(const l of i){const c=FA(t[l],e[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(n===at.array&&r===at.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],l=e[i],c=FA(o,l);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===at.date&&r===at.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Z0 extends sn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(N4(i)||N4(o))return Ot;const l=FA(i.value,o.value);return l.valid?((S4(i)||S4(o))&&n.dirty(),{status:n.value,value:l.data}):(We(r,{code:Te.invalid_intersection_types}),Ot)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Z0.create=(t,e,n)=>new Z0({left:t,right:e,typeName:Rt.ZodIntersection,...Ht(n)});class Ld extends sn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==at.array)return We(r,{code:Te.invalid_type,expected:at.array,received:r.parsedType}),Ot;if(r.data.length<this._def.items.length)return We(r,{code:Te.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ot;!this._def.rest&&r.data.length>this._def.items.length&&(We(r,{code:Te.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Yc(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Aa.mergeArray(n,o)):Aa.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Ld({...this._def,rest:e})}}Ld.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ld({items:t,typeName:Rt.ZodTuple,rest:null,...Ht(e)})};class O4 extends sn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==at.map)return We(r,{code:Te.invalid_type,expected:at.map,received:r.parsedType}),Ot;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([l,c],u)=>({key:s._parse(new Yc(r,l,r.path,[u,"key"])),value:i._parse(new Yc(r,c,r.path,[u,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return Ot;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return Ot;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}}}}O4.create=(t,e,n)=>new O4({valueType:e,keyType:t,typeName:Rt.ZodMap,...Ht(n)});class Ey extends sn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==at.set)return We(r,{code:Te.invalid_type,expected:at.set,received:r.parsedType}),Ot;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(We(r,{code:Te.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(We(r,{code:Te.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return Ot;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const l=[...r.data.values()].map((c,u)=>i._parse(new Yc(r,c,r.path,u)));return r.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(e,n){return new Ey({...this._def,minSize:{value:e,message:ot.toString(n)}})}max(e,n){return new Ey({...this._def,maxSize:{value:e,message:ot.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Ey.create=(t,e)=>new Ey({valueType:t,minSize:null,maxSize:null,typeName:Rt.ZodSet,...Ht(e)});class R4 extends sn{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}R4.create=(t,e)=>new R4({getter:t,typeName:Rt.ZodLazy,...Ht(e)});class VA extends sn{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return We(n,{received:n.data,code:Te.invalid_literal,expected:this._def.value}),Ot}return{status:"valid",value:e.data}}get value(){return this._def.value}}VA.create=(t,e)=>new VA({value:t,typeName:Rt.ZodLiteral,...Ht(e)});function Z7(t,e){return new Xf({values:t,typeName:Rt.ZodEnum,...Ht(e)})}class Xf extends sn{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return We(n,{expected:ln.joinValues(r),received:n.parsedType,code:Te.invalid_type}),Ot}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return We(n,{received:n.data,code:Te.invalid_enum_value,options:r}),Ot}return ri(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Xf.create(e,{...this._def,...n})}exclude(e,n=this._def){return Xf.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Xf.create=Z7;class M4 extends sn{_parse(e){const n=ln.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==at.string&&r.parsedType!==at.number){const s=ln.objectValues(n);return We(r,{expected:ln.joinValues(s),received:r.parsedType,code:Te.invalid_type}),Ot}if(this._cache||(this._cache=new Set(ln.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=ln.objectValues(n);return We(r,{received:r.data,code:Te.invalid_enum_value,options:s}),Ot}return ri(e.data)}get enum(){return this._def.values}}M4.create=(t,e)=>new M4({values:t,typeName:Rt.ZodNativeEnum,...Ht(e)});class J0 extends sn{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==at.promise&&n.common.async===!1)return We(n,{code:Te.invalid_type,expected:at.promise,received:n.parsedType}),Ot;const r=n.parsedType===at.promise?n.data:Promise.resolve(n.data);return ri(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}J0.create=(t,e)=>new J0({type:t,typeName:Rt.ZodPromise,...Ht(e)});class Zf extends sn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Rt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{We(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return Ot;const c=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return c.status==="aborted"?Ot:c.status==="dirty"||n.value==="dirty"?hg(c.value):c});{if(n.value==="aborted")return Ot;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?Ot:l.status==="dirty"||n.value==="dirty"?hg(l.value):l}}if(s.type==="refinement"){const o=l=>{const c=s.refinement(l,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?Ot:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?Ot:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Qf(o))return Ot;const l=s.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Qf(o)?Promise.resolve(s.transform(o.value,i)).then(l=>({status:n.value,value:l})):Ot);ln.assertNever(s)}}Zf.create=(t,e,n)=>new Zf({schema:t,typeName:Rt.ZodEffects,effect:e,...Ht(n)});Zf.createWithPreprocess=(t,e,n)=>new Zf({schema:e,effect:{type:"preprocess",transform:t},typeName:Rt.ZodEffects,...Ht(n)});class Dc extends sn{_parse(e){return this._getType(e)===at.undefined?ri(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Dc.create=(t,e)=>new Dc({innerType:t,typeName:Rt.ZodOptional,...Ht(e)});class Jf extends sn{_parse(e){return this._getType(e)===at.null?ri(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Jf.create=(t,e)=>new Jf({innerType:t,typeName:Rt.ZodNullable,...Ht(e)});class BA extends sn{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===at.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}BA.create=(t,e)=>new BA({innerType:t,typeName:Rt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ht(e)});class UA extends sn{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Y0(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ya(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ya(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}UA.create=(t,e)=>new UA({innerType:t,typeName:Rt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ht(e)});class D4 extends sn{_parse(e){if(this._getType(e)!==at.nan){const r=this._getOrReturnCtx(e);return We(r,{code:Te.invalid_type,expected:at.nan,received:r.parsedType}),Ot}return{status:"valid",value:e.data}}}D4.create=t=>new D4({typeName:Rt.ZodNaN,...Ht(t)});class ybe extends sn{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class xk extends sn{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Ot:i.status==="dirty"?(n.dirty(),hg(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Ot:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new xk({in:e,out:n,typeName:Rt.ZodPipeline})}}class zA extends sn{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Qf(s)&&(s.value=Object.freeze(s.value)),s);return Y0(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}zA.create=(t,e)=>new zA({innerType:t,typeName:Rt.ZodReadonly,...Ht(e)});nr.lazycreate;var Rt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Rt||(Rt={}));const Ue=vc.create,L4=$A.create;Qc.create;mo.create;const mu=nr.create;nr.strictCreate;X0.create;Z0.create;Ld.create;const J7=VA.create,eH=Xf.create;J0.create;Dc.create;Jf.create;const ql=t=>{if(t==null)return null;const e=String(t);return e.trim()?e:null},vbe=(t,e)=>({id:t,companyId:String(e.companyId??e.company_id??""),userId:String(e.userId??e.user_id??""),role:e.role??"read_only",status:e.status??"active",createdAt:String(e.createdAt??e.created_at??""),updatedAt:String(e.updatedAt??e.updated_at??"")}),xbe=(t,e)=>({id:t,name:String(e.name??e.companyName??e.company_name??""),organizationType:e.organizationType??e.organization_type??"business",businessType:ql(e.businessType??e.business_type)??void 0,taxType:ql(e.taxType??e.tax_type)??void 0,taxClassification:ql(e.taxClassification??e.tax_classification)??void 0,tpin:ql(e.tpin)??void 0,phone:ql(e.phone)??void 0,email:ql(e.email)??void 0,logoUrl:ql(e.logoUrl??e.logo_url)??null,createdAt:String(e.createdAt??e.created_at??""),updatedAt:String(e.updatedAt??e.updated_at??"")}),bbe=(t,e)=>({id:t,companyId:String(e.companyId??e.company_id??t),companyName:String(e.companyName??e.company_name??""),isVatRegistered:!!(e.isVatRegistered??e.is_vat_registered??!1),vatRate:e.vatRate===null||e.vatRate===void 0?Number(e.vat_rate??0)||null:Number(e.vatRate),logoUrl:ql(e.logoUrl??e.logo_url)??null,createdAt:String(e.createdAt??e.created_at??""),updatedAt:String(e.updatedAt??e.updated_at??"")}),Ke={async getPrimaryMembershipByUser(t){Tn();const e=ve(te,Y.COMPANY_USERS),n=[Ce(e,ge("userId","==",t),ge("status","==","active"),Ws(1)),Ce(e,ge("user_id","==",t),ge("status","==","active"),Ws(1)),Ce(e,ge("userId","==",t),Ws(1)),Ce(e,ge("user_id","==",t),Ws(1))];for(const r of n){const s=await $e(r);if(s.empty)continue;const i=s.docs[0];return vbe(i.id,i.data())}return null},async getCompanyById(t){Tn();const e=He(te,Y.COMPANIES,t),n=await _a(e);return n.exists()?xbe(n.id,n.data()):null},async getCompanySettings(t){Tn();const e=He(te,Y.COMPANY_SETTINGS,t),n=await _a(e);return n.exists()?bbe(n.id,n.data()):null},async completeCompanySetup(t){Tn();const e=He(te,Y.COMPANIES,t.companyId);await or(e,{name:t.name,organizationType:t.organizationType,businessType:t.businessType??null,taxType:t.taxType??null,taxClassification:t.taxClassification??null,address:t.address??null,phone:t.phone??null,email:t.email??null,tpin:t.tpin??null,registrationNumber:t.registrationNumber??null,industryType:t.industryType??null,logoUrl:t.logoUrl??null,updatedAt:ye()},{merge:!0});const n=He(te,Y.COMPANY_SETTINGS,t.companyId);await or(n,{companyId:t.companyId,companyName:t.name,logoUrl:t.logoUrl??null,isVatRegistered:!!t.isVatRegistered,vatRate:t.vatRate??null,updatedAt:ye()},{merge:!0})},async updateCompanyLogo(t,e){Tn();const n=He(te,Y.COMPANIES,t);await wo(n,{logoUrl:e,updatedAt:ye()});const r=He(te,Y.COMPANY_SETTINGS,t);await or(r,{companyId:t,logoUrl:e,updatedAt:ye()},{merge:!0})},async updateCompanyBasics(t){Tn();const e=He(te,Y.COMPANIES,t.companyId),n=He(te,Y.COMPANY_SETTINGS,t.companyId),r={updatedAt:ye()},s={companyId:t.companyId,updatedAt:ye()};typeof t.name=="string"&&(r.name=t.name,s.companyName=t.name),t.logoUrl!==void 0&&(r.logoUrl=t.logoUrl,s.logoUrl=t.logoUrl),await or(e,r,{merge:!0}),await or(n,s,{merge:!0})},async listCompanyUsers(t){return Tn(),Gn("listCompanyUsers",{companyId:t})},async updateUserRole(t){return Tn(),Gn("updateUserRole",t)},async removeCompanyUser(t){return Tn(),Gn("removeCompanyUser",t)},async suspendUser(t){return Tn(),Gn("suspendUser",t)},async reactivateUser(t){return Tn(),Gn("reactivateUser",t)},async revokeInvitation(t){return Tn(),Gn("revokeInvitation",t)}},wbe={async getPostedJournalLines(t,e,n){Tn();const r=ve(te,Y.JOURNAL_LINES),s=[ge("companyId","==",t),ge("isPosted","==",!0),oj("entryDate","desc"),Ws(5e3)];return e&&s.push(ge("entryDate",">=",e)),n&&s.push(ge("entryDate","<=",n)),(await $e(Ce(r,...s))).docs.map(o=>({id:o.id,...o.data()}))},async postJournalEntry(t){return Gn("postJournalEntry",t)},async getGLBalances(t){return Gn("getGLBalances",t)},async getTrialBalance(t){return Gn("getTrialBalance",t)},async postInvoiceToGL(t){return Gn("postInvoiceToGL",{invoiceId:t})},async postBillToGL(t){return Gn("postBillToGL",{billId:t})},async postExpenseToGL(t){return Gn("postExpenseToGL",{expenseId:t})}},ff={async getPayrollRuns(t){Tn();const e=ve(te,Y.PAYROLL_RUNS);return(await $e(Ce(e,ge("companyId","==",t),oj("runDate","desc")))).docs.map(r=>({id:r.id,...r.data()}))},async createPayrollDraft(t){return Gn("createPayrollDraft",t)},async runPayrollTrial(t){return Gn("runPayrollTrial",t)},async finalizePayroll(t){return Gn("finalizePayroll",t)},async sendPayslipEmail(t){return Gn("sendPayslipEmail",t)},async runDepreciation(t){return Gn("runDepreciation",t)}},_be={async uploadCompanyLogo(t,e){Tn();const n=e.name.split(".").pop()??"png",r=`company-logos/${t}/logo.${n}`,s=wpe(Cpe,r);try{await xpe(s,e,{contentType:e.type})}catch(i){throw(typeof i=="object"&&i!==null&&"code"in i?String(i.code):"")==="storage/bucket-not-found"?new Error("Firebase Storage is not enabled for this project. Open Firebase Console > Storage > Get Started."):i}return bpe(s)}},jbe=(t,e)=>{var r;const n=[ge("companyId","==",t)];return(r=e.filters)==null||r.forEach(s=>{n.push(ge(s.field,s.op,s.value))}),e.orderByField&&n.push(oj(e.orderByField,e.orderDirection??"desc")),typeof e.limitCount=="number"&&e.limitCount>0&&n.push(Ws(e.limitCount)),n},$4=async(t,e)=>{const n=jbe(t,e);return(await $e(Ce(ve(te,e.collectionName),...n))).docs.map(s=>({id:s.id,...s.data()}))},si={async getCompanyIdForUser(t){Tn();const e=await Ke.getPrimaryMembershipByUser(t);if(!(e!=null&&e.companyId))throw new Error("No active company membership found for this user.");return e.companyId},async runQuery(t,e){const n=await this.getCompanyIdForUser(t);return $4(n,e)},async runQueries(t,e){const n=await this.getCompanyIdForUser(t),r=Object.entries(e),s=await Promise.all(r.map(async([i,o])=>{const l=await $4(n,o);return[i,l]}));return Object.fromEntries(s)}},Nbe=mu({email:Ue().email("Invalid email address"),password:Ue().min(6,"Password must be at least 6 characters")}),Sbe=mu({organizationName:Ue().min(1,"Organization name is required"),email:Ue().email("Invalid email address"),password:Ue().min(6,"Password must be at least 6 characters"),phone:Ue().min(10,"Phone number must be at least 10 digits").regex(/^\+?[0-9]+$/,"Invalid phone number format"),organizationType:eH(["business","non_profit"]),taxClassification:Ue().min(1,"Tax classification is required"),tpin:Ue().regex(/^\d{10}$/,"TPIN must be exactly 10 digits")}),Ebe=mu({email:Ue().email("Invalid email address")}),Abe=mu({password:Ue().min(6,"Password must be at least 6 characters"),confirmPassword:Ue().min(6,"Password must be at least 6 characters")}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function Tbe(){const t=Hn(),[e,n]=N.useState(!0),[r,s]=N.useState(!1),[i,o]=N.useState(!1),[l,c]=N.useState("login"),[u,d]=N.useState(!1),[h,f]=N.useState(0),[m,b]=N.useState({email:"",password:""}),[g,x]=N.useState({organizationName:"",email:"",password:"",phone:"",organizationType:"business",taxClassification:"",tpin:""}),[w,y]=N.useState(""),[A,T]=N.useState({password:"",confirmPassword:""}),[v,S]=N.useState(""),[j,p]=N.useState(null),[E,P]=N.useState(null);N.useEffect(()=>{if(h>0){const F=setTimeout(()=>f(h-1),1e3);return()=>clearTimeout(F)}},[h]);const C=N.useCallback(async F=>{try{try{await Es.ensureCurrentMembership()}catch{}const L=await Ke.getPrimaryMembershipByUser(F);if(!L){t("/setup",{replace:!0});return}const W=await Ke.getCompanySettings(L.companyId);if(!(W!=null&&W.companyName)){t("/setup",{replace:!0});return}t("/dashboard",{replace:!0})}catch{t("/dashboard",{replace:!0})}},[t]),I=N.useCallback(async F=>{try{await Es.acceptInvitation(F)}catch(W){const ie=W instanceof Error?W.message:"Unable to accept invitation";Z.error(`Invitation link error: ${ie}`);return}const L=new URL(window.location.href);L.searchParams.delete("invite"),window.history.replaceState({},"",L.toString()),p(null),Z.success("Invitation accepted. Your company access and role are now configured.")},[]);N.useEffect(()=>{const F=new URLSearchParams(window.location.search),L=F.get("mode"),W=F.get("oobCode"),ie=F.get("invite");p(ie);let oe=!0;const me=()=>{const ut=new URL(window.location.href);["mode","oobCode","apiKey","lang","continueUrl"].forEach(je=>ut.searchParams.delete(je)),window.history.replaceState({},"",ut.toString())};(async()=>{if(!fo){n(!1);return}if(L==="resetPassword"&&W){try{await rce(Lb,W),oe&&(P(W),c("reset-password"))}catch{Z.error("Invalid or expired password reset link.")}finally{oe&&n(!1)}return}if(L==="verifyEmail"&&W)try{await tce(Lb,W),Z.success("Email verified successfully. You can now log in."),me()}catch{Z.error("Email verification link is invalid or expired.")}const ut=Es.getCurrentUser();ut?(ie&&await I(ie),await C(ut.uid)):oe&&n(!1)})();const lt=Es.onAuthStateChanged(async ut=>{if(oe){if(!ut){n(!1);return}ie&&await I(ie),setTimeout(()=>{C(ut.uid)},0)}});return()=>{oe=!1,lt.unsubscribe()}},[I,C]);const O=async F=>{F.preventDefault(),s(!0);try{const L=Nbe.parse(m),W=await Es.signIn(L.email,L.password);Z.success("Logged in successfully")}catch(L){if(L instanceof ya)Z.error(L.errors[0].message);else{const W=L instanceof Error?L.message:"Failed to log in";Z.error(W)}}finally{s(!1)}},$=async F=>{F.preventDefault(),s(!0);try{const L=Sbe.parse(g);await Es.signUp({email:L.email,password:L.password,organizationName:L.organizationName,phone:L.phone,organizationType:L.organizationType,taxClassification:L.taxClassification,tpin:L.tpin}),S(L.email),c("verify-email"),Z.success("Verification email sent! Please check your inbox.")}catch(L){if(L instanceof ya)Z.error(L.errors[0].message);else{const W=L instanceof Error?L.message:"Failed to create account";Z.error(W)}}finally{s(!1)}},z=async()=>{if(!(h>0)){o(!0);try{await Es.resendVerificationEmail(),Z.success("Verification email resent!"),f(60)}catch(F){const L=F instanceof Error?F.message:"Failed to resend verification email";Z.error(L)}finally{o(!1)}}},H=async F=>{F.preventDefault(),s(!0);try{const L=Ebe.parse({email:w});await Es.sendResetPasswordEmail(L.email),Z.success("Password reset email sent! Check your inbox."),c("login"),y("")}catch(L){if(L instanceof ya)Z.error(L.errors[0].message);else{const W=L instanceof Error?L.message:"Failed to send reset email";Z.error(W)}}finally{s(!1)}},M=async F=>{F.preventDefault(),s(!0);try{const L=Abe.parse(A);if(!E){Z.error("Invalid password reset session. Request a new reset link.");return}await ece(Lb,E,L.password),Z.success("Password updated successfully!"),c("login"),T({password:"",confirmPassword:""}),P(null)}catch(L){if(L instanceof ya)Z.error(L.errors[0].message);else{const W=L instanceof Error?L.message:"Failed to update password";Z.error(W)}}finally{s(!1)}};return e?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Pn,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Checking authentication..."})]})}):l==="verify-email"?a.jsxs("div",{className:"min-h-screen flex",children:[a.jsxs("div",{className:"hidden lg:flex lg:w-1/2 relative overflow-hidden bg-slate-900",children:[a.jsx("div",{className:"absolute -left-32 -top-32 w-96 h-96 bg-blue-900/20 rounded-full blur-3xl opacity-20"}),a.jsx("div",{className:"absolute left-20 top-1/4 w-64 h-64 bg-indigo-900/20 rounded-full blur-3xl opacity-20"}),a.jsx("div",{className:"absolute -left-16 bottom-1/4 w-80 h-80 bg-slate-800/20 rounded-full blur-3xl opacity-20"}),a.jsx("div",{className:"absolute right-10 bottom-10 w-48 h-48 bg-blue-800/20 rounded-full blur-3xl opacity-20"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-white",children:[a.jsx(hf,{variant:"full",size:"xl",className:"text-white mb-6"}),a.jsx("p",{className:"text-white/60 mt-2 font-medium",children:"Accountability with Purpose"})]})})]}),a.jsx("div",{className:"flex-1 flex items-center justify-center p-8 bg-white",children:a.jsxs("div",{className:"w-full max-w-md text-center",children:[a.jsx("div",{className:"mx-auto w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-6",children:a.jsx(ad,{className:"h-8 w-8 text-primary"})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Verify Your Email"}),a.jsxs("p",{className:"text-gray-500 mb-6",children:["We've sent a verification link to",a.jsx("br",{}),a.jsx("span",{className:"font-medium text-gray-900",children:v})]}),a.jsx("div",{className:"bg-muted p-4 rounded-lg mb-6 border border-border",children:a.jsx("p",{className:"text-sm text-muted-foreground",children:"Click the link in your email to verify your account. Check your spam folder if you don't see it."})}),a.jsx(G,{variant:"outline",className:"w-full mb-4 rounded-md border-input hover:bg-accent",onClick:z,disabled:i||h>0,children:i?a.jsxs(a.Fragment,{children:[a.jsx(Pn,{className:"h-4 w-4 mr-2 animate-spin"}),"Resending..."]}):h>0?a.jsxs(a.Fragment,{children:[a.jsx(CE,{className:"h-4 w-4 mr-2"}),"Resend in ",h,"s"]}):a.jsxs(a.Fragment,{children:[a.jsx(CE,{className:"h-4 w-4 mr-2"}),"Resend Verification Email"]})}),a.jsx(G,{variant:"link",onClick:()=>c("login"),className:"text-gray-500",children:"Back to Login"})]})}),a.jsx(zh,{className:"text-slate-400/40 hover:text-primary"})]}):l==="forgot-password"?a.jsxs("div",{className:"min-h-screen flex",children:[a.jsxs("div",{className:"hidden lg:flex lg:w-1/2 relative overflow-hidden bg-slate-900",children:[a.jsx("div",{className:"absolute -left-32 -top-32 w-96 h-96 bg-blue-900/20 rounded-full blur-3xl opacity-20"}),a.jsx("div",{className:"absolute left-20 top-1/4 w-64 h-64 bg-indigo-900/20 rounded-full blur-3xl opacity-20"}),a.jsx("div",{className:"absolute -left-16 bottom-1/4 w-80 h-80 bg-slate-800/20 rounded-full blur-3xl opacity-20"}),a.jsx("div",{className:"absolute right-10 bottom-10 w-48 h-48 bg-blue-800/20 rounded-full blur-3xl opacity-20"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-white",children:[a.jsx(hf,{variant:"full",size:"xl",className:"text-white mb-6"}),a.jsx("p",{className:"text-white/60 mt-2 font-medium",children:"Accountability with Purpose"})]})})]}),a.jsx("div",{className:"flex-1 flex items-center justify-center p-8 bg-white",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Reset Password"}),a.jsx("p",{className:"text-gray-500",children:"Enter your email to receive a reset link"})]}),a.jsxs("form",{onSubmit:H,className:"space-y-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Ng,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx(K,{type:"email",placeholder:"Email Address",value:w,onChange:F=>y(F.target.value),className:"pl-12 h-11 rounded-md border-input focus:ring-2 focus:ring-primary/20"})]}),a.jsx(G,{type:"submit",className:"w-full h-11 rounded-md bg-primary hover:bg-primary/90 text-primary-foreground font-semibold shadow-sm transition-all",disabled:r,children:r?a.jsx(Pn,{className:"h-5 w-5 animate-spin"}):"Send Reset Link"}),a.jsx(G,{type:"button",variant:"link",onClick:()=>c("login"),className:"w-full text-gray-500",children:"Back to Login"})]})]})}),a.jsx(zh,{className:"text-slate-400/40 hover:text-primary"})]}):l==="reset-password"?a.jsxs("div",{className:"min-h-screen flex",children:[a.jsxs("div",{className:"hidden lg:flex lg:w-1/2 relative overflow-hidden bg-slate-900",children:[a.jsx("div",{className:"absolute -left-32 -top-32 w-96 h-96 bg-blue-900/20 rounded-full blur-3xl opacity-20"}),a.jsx("div",{className:"absolute left-20 top-1/4 w-64 h-64 bg-indigo-900/20 rounded-full blur-3xl opacity-20"}),a.jsx("div",{className:"absolute -left-16 bottom-1/4 w-80 h-80 bg-slate-800/20 rounded-full blur-3xl opacity-20"}),a.jsx("div",{className:"absolute right-10 bottom-10 w-48 h-48 bg-blue-800/20 rounded-full blur-3xl opacity-20"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-white",children:[a.jsx(hf,{variant:"full",size:"xl",className:"text-white mb-6"}),a.jsx("p",{className:"text-white/80 mt-2 font-medium",children:"Accountability with Purpose"})]})})]}),a.jsx("div",{className:"flex-1 flex items-center justify-center p-8 bg-white",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create New Password"}),a.jsx("p",{className:"text-gray-500",children:"Enter your new password below"})]}),a.jsxs("form",{onSubmit:M,className:"space-y-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Bh,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx(K,{type:"password",placeholder:"New Password",value:A.password,onChange:F=>T({...A,password:F.target.value}),className:"pl-12 h-11 rounded-md border-input focus:ring-2 focus:ring-primary/20"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Bh,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx(K,{type:"password",placeholder:"Confirm Password",value:A.confirmPassword,onChange:F=>T({...A,confirmPassword:F.target.value}),className:"pl-12 h-11 rounded-md border-input focus:ring-2 focus:ring-primary/20"})]}),a.jsx(G,{type:"submit",className:"w-full h-11 rounded-md bg-primary hover:bg-primary/90 text-primary-foreground font-semibold shadow-sm transition-all",disabled:r,children:r?a.jsx(Pn,{className:"h-5 w-5 animate-spin"}):"Update Password"})]})]})}),a.jsx(zh,{className:"text-slate-400/40 hover:text-primary"})]}):a.jsxs("div",{className:"min-h-screen flex",children:[a.jsxs("div",{className:"hidden lg:flex lg:w-1/2 relative overflow-hidden bg-slate-900",children:[a.jsx("div",{className:"absolute -left-32 -top-32 w-96 h-96 bg-blue-900/20 rounded-full blur-3xl opacity-20"}),a.jsx("div",{className:"absolute left-20 top-1/4 w-64 h-64 bg-indigo-900/20 rounded-full blur-3xl opacity-20"}),a.jsx("div",{className:"absolute -left-16 bottom-1/4 w-80 h-80 bg-slate-800/20 rounded-full blur-3xl opacity-20"}),a.jsx("div",{className:"absolute right-10 bottom-10 w-48 h-48 bg-blue-800/20 rounded-full blur-3xl opacity-20"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-white",children:[a.jsx("div",{className:"flex items-center justify-center gap-3 mb-4",children:a.jsx("div",{className:"h-16 w-16 rounded-2xl bg-white/5 backdrop-blur-sm flex items-center justify-center border border-white/10",children:a.jsx("img",{src:"/Zedbooks/logo_new.png",alt:"ZedBooks Logo",className:"h-12 w-auto object-contain"})})}),a.jsx("h2",{className:"text-4xl font-bold tracking-tight",children:"ZedBooks"}),a.jsx("p",{className:"text-white/60 mt-2 font-medium",children:"Accountability with Purpose"})]})})]}),a.jsxs("div",{className:"flex-1 flex items-center justify-center p-8 bg-white",children:[a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"lg:hidden flex items-center justify-center gap-2 mb-8",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center",children:a.jsx("img",{src:"/Zedbooks/logo_new.png",alt:"ZedBooks Logo",className:"h-8 w-auto object-contain"})}),a.jsx("span",{className:"text-xl font-bold",children:"ZedBooks"})]}),a.jsxs(Yv,{defaultValue:"login",className:"w-full",children:[a.jsxs(Qm,{className:"grid w-full grid-cols-2 mb-8 rounded-lg bg-muted p-1",children:[a.jsx(ja,{value:"login",className:"rounded-md data-[state=active]:bg-background data-[state=active]:shadow-sm data-[state=active]:text-foreground",children:"Login"}),a.jsx(ja,{value:"signup",className:"rounded-md data-[state=active]:bg-background data-[state=active]:shadow-sm data-[state=active]:text-foreground",children:"Sign Up"})]}),a.jsxs(Na,{value:"login",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),a.jsx("p",{className:"text-gray-500",children:"Sign in to continue to your dashboard"})]}),a.jsxs("form",{onSubmit:O,className:"space-y-5",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Ng,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx(K,{type:"email",placeholder:"Email",value:m.email,onChange:F=>b({...m,email:F.target.value}),className:"pl-12 h-11 rounded-md border-input focus:ring-2 focus:ring-primary/20"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Bh,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx(K,{type:"password",placeholder:"Password",value:m.password,onChange:F=>b({...m,password:F.target.value}),className:"pl-12 h-11 rounded-md border-input focus:ring-2 focus:ring-primary/20"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(yk,{id:"remember",checked:u,onCheckedChange:F=>d(F)}),a.jsx(J,{htmlFor:"remember",className:"text-sm text-gray-600",children:"Remember me"})]}),a.jsx("button",{type:"button",onClick:()=>c("forgot-password"),className:"text-sm text-primary hover:text-primary/80 font-medium",children:"Forgot Password?"})]}),a.jsx(G,{type:"submit",className:"w-full h-11 rounded-md bg-primary hover:bg-primary/90 text-primary-foreground font-semibold shadow-sm transition-all",disabled:r,children:r?a.jsx(Pn,{className:"h-5 w-5 animate-spin"}):"LOGIN"})]})]}),a.jsxs(Na,{value:"signup",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create Account"}),a.jsx("p",{className:"text-gray-500",children:"Start your free trial today"})]}),j&&a.jsxs("div",{className:"mb-4 rounded-lg border border-yellow-200 bg-yellow-50 p-3 text-sm text-yellow-800 flex items-center gap-2",children:[a.jsx(ad,{className:"h-4 w-4"}),"Invitation detected. Sign up with the invited email to join your company workspace."]}),a.jsxs("form",{onSubmit:$,className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(T_,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx(K,{type:"text",placeholder:"Organization Name",value:g.organizationName,onChange:F=>x({...g,organizationName:F.target.value}),className:"pl-12 h-11 rounded-md border-input focus:ring-2 focus:ring-primary/20"})]}),a.jsxs(It,{value:g.organizationType,onValueChange:F=>x({...g,organizationType:F,taxClassification:""}),children:[a.jsx(Et,{className:"h-11 rounded-md border-input focus:ring-2 focus:ring-primary/20 px-4",children:a.jsx(kt,{placeholder:"Organization Type"})}),a.jsxs(At,{children:[a.jsx(be,{value:"business",children:"Business"}),a.jsx(be,{value:"non_profit",children:"Non-profit"})]})]}),a.jsxs(It,{value:g.taxClassification,onValueChange:F=>x({...g,taxClassification:F}),children:[a.jsx(Et,{className:"h-11 rounded-md border-input focus:ring-2 focus:ring-primary/20 px-4",children:a.jsx(kt,{placeholder:g.organizationType==="business"?"Business Tax Type":"Non-profit Tax Classification"})}),a.jsx(At,{children:g.organizationType==="business"?a.jsxs(a.Fragment,{children:[a.jsx(be,{value:"vat_registered",children:"VAT Registered"}),a.jsx(be,{value:"turnover_tax",children:"Turnover Tax"}),a.jsx(be,{value:"non_vat",children:"Non-VAT"})]}):a.jsxs(a.Fragment,{children:[a.jsx(be,{value:"tax_exempt",children:"Tax Exempt"}),a.jsx(be,{value:"grant_funded",children:"Grant Funded"}),a.jsx(be,{value:"charitable",children:"Charitable Organization"})]})})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ad,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx(K,{type:"email",placeholder:"Email Address",value:g.email,onChange:F=>x({...g,email:F.target.value}),className:"pl-12 h-11 rounded-md border-input focus:ring-2 focus:ring-primary/20"})]}),a.jsx("div",{className:"relative",children:a.jsx(K,{type:"text",placeholder:"TPIN (10 digits)",value:g.tpin,onChange:F=>x({...g,tpin:F.target.value.replace(/\D/g,"").slice(0,10)}),className:"h-11 rounded-md border-input focus:ring-2 focus:ring-primary/20 px-4"})}),a.jsxs("div",{className:"relative",children:[a.jsx(Ng,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx(K,{type:"tel",placeholder:"Phone Number (e.g., +260...)",value:g.phone,onChange:F=>x({...g,phone:F.target.value}),className:"pl-12 h-11 rounded-md border-input focus:ring-2 focus:ring-primary/20"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Bh,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx(K,{type:"password",placeholder:"Password",value:g.password,onChange:F=>x({...g,password:F.target.value}),className:"pl-12 h-11 rounded-md border-input focus:ring-2 focus:ring-primary/20"})]}),a.jsx(G,{type:"submit",className:"w-full h-11 rounded-md bg-primary hover:bg-primary/90 text-primary-foreground font-semibold shadow-sm transition-all",disabled:r,children:r?a.jsx(Pn,{className:"h-5 w-5 animate-spin"}):"CREATE ACCOUNT"})]})]})]}),a.jsx("div",{className:"mt-8 text-center",children:a.jsx(Fa,{to:"/",className:"text-sm text-gray-500 hover:text-orange-500",children:"Back to Home"})})]}),a.jsx(zh,{})]})]})}var tH={exports:{}},nH={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var em=N;function Cbe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pbe=typeof Object.is=="function"?Object.is:Cbe,Ibe=em.useState,kbe=em.useEffect,Obe=em.useLayoutEffect,Rbe=em.useDebugValue;function Mbe(t,e){var n=e(),r=Ibe({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Obe(function(){s.value=n,s.getSnapshot=e,Z1(s)&&i({inst:s})},[t,n,e]),kbe(function(){return Z1(s)&&i({inst:s}),t(function(){Z1(s)&&i({inst:s})})},[t]),Rbe(n),n}function Z1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Pbe(t,n)}catch{return!0}}function Dbe(t,e){return e()}var Lbe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Dbe:Mbe;nH.useSyncExternalStore=em.useSyncExternalStore!==void 0?em.useSyncExternalStore:Lbe;tH.exports=nH;var $be=tH.exports;function Fbe(){return $be.useSyncExternalStore(Vbe,()=>!0,()=>!1)}function Vbe(){return()=>{}}var bk="Avatar",[Bbe,Jqe]=rs(bk),[Ube,rH]=Bbe(bk),sH=N.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=N.useState("idle");return a.jsx(Ube,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:a.jsx(Je.span,{...r,ref:e})})});sH.displayName=bk;var aH="AvatarImage",iH=N.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,o=rH(aH,n),l=zbe(r,i),c=ir(u=>{s(u),o.onImageLoadingStatusChange(u)});return cr(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?a.jsx(Je.img,{...i,ref:e,src:r}):null});iH.displayName=aH;var oH="AvatarFallback",lH=N.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=rH(oH,n),[o,l]=N.useState(r===void 0);return N.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&i.imageLoadingStatus!=="loaded"?a.jsx(Je.span,{...s,ref:e}):null});lH.displayName=oH;function F4(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function zbe(t,{referrerPolicy:e,crossOrigin:n}){const r=Fbe(),s=N.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[o,l]=N.useState(()=>F4(i,t));return cr(()=>{l(F4(i,t))},[i,t]),cr(()=>{const c=h=>()=>{l(h)};if(!i)return;const u=c("loaded"),d=c("error");return i.addEventListener("load",u),i.addEventListener("error",d),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",d)}},[i,n,e]),o}var cH=sH,uH=iH,dH=lH;const hH=N.forwardRef(({className:t,...e},n)=>a.jsx(cH,{ref:n,className:pe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));hH.displayName=cH.displayName;const qbe=N.forwardRef(({className:t,...e},n)=>a.jsx(uH,{ref:n,className:pe("aspect-square h-full w-full",t),...e}));qbe.displayName=uH.displayName;const fH=N.forwardRef(({className:t,...e},n)=>a.jsx(dH,{ref:n,className:pe("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));fH.displayName=dH.displayName;const Wbe=Yd("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Xe({className:t,variant:e,...n}){return a.jsx("div",{className:pe(Wbe({variant:e}),t),...n})}var Tj="Switch",[Hbe,eWe]=rs(Tj),[Kbe,Gbe]=Hbe(Tj),mH=N.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=t,[f,m]=N.useState(null),b=Mt(e,A=>m(A)),g=N.useRef(!1),x=f?d||!!f.closest("form"):!0,[w,y]=Ii({prop:s,defaultProp:i??!1,onChange:u,caller:Tj});return a.jsxs(Kbe,{scope:n,checked:w,disabled:l,children:[a.jsx(Je.button,{type:"button",role:"switch","aria-checked":w,"aria-required":o,"data-state":vH(w),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:b,onClick:Pe(t.onClick,A=>{y(T=>!T),x&&(g.current=A.isPropagationStopped(),g.current||A.stopPropagation())})}),x&&a.jsx(yH,{control:f,bubbles:!g.current,name:r,value:c,checked:w,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});mH.displayName=Tj;var pH="SwitchThumb",gH=N.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=Gbe(pH,n);return a.jsx(Je.span,{"data-state":vH(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});gH.displayName=pH;var Ybe="SwitchBubbleInput",yH=N.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},i)=>{const o=N.useRef(null),l=Mt(o,i),c=mk(n),u=AP(e);return N.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&m){const b=new Event("click",{bubbles:r});m.call(d,n),d.dispatchEvent(b)}},[c,n,r]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});yH.displayName=Ybe;function vH(t){return t?"checked":"unchecked"}var xH=mH,Qbe=gH;const Zr=N.forwardRef(({className:t,...e},n)=>a.jsx(xH,{className:pe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:n,children:a.jsx(Qbe,{className:pe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Zr.displayName=xH.displayName;const Xbe=[{min:0,max:5100,rate:0},{min:5100,max:7100,rate:.2},{min:7100,max:9200,rate:.3},{min:9200,max:1/0,rate:.37}],Zbe=.05,Jbe=1342,e0e=.01,t0e=250;function bH(t){let e=0,n=t;for(const r of Xbe){if(n<=0)break;const s=Math.min(n,r.max-r.min);e+=s*r.rate,n-=s}return Math.round(e*100)/100}function wH(t){const e=Math.round(t*Zbe*100)/100,n=Math.min(e,Jbe);return{employee:n,employer:n}}function _H(t){const e=Math.round(t*e0e*100)/100,n=Math.min(e,t0e);return{employee:n,employer:n}}function n0e(t,e=0,n=0,r=0,s=0,i=0){const o=t+e+n+r,l=wH(o),c=_H(t),u=bH(o),d=l.employee+c.employee+u+s+i,h=o-d;return{basicSalary:t,housingAllowance:e,transportAllowance:n,otherAllowances:r,grossSalary:o,paye:u,napsaEmployee:l.employee,napsaEmployer:l.employer,nhimaEmployee:c.employee,nhimaEmployer:c.employer,advancesDeducted:s,totalDeductions:d,netSalary:h}}function le(t){return`K${t.toLocaleString("en-ZM",{minimumFractionDigits:2,maximumFractionDigits:2})}`}var r0e=Array.isArray,ra=r0e,s0e=typeof px=="object"&&px&&px.Object===Object&&px,jH=s0e,a0e=jH,i0e=typeof self=="object"&&self&&self.Object===Object&&self,o0e=a0e||i0e||Function("return this")(),Po=o0e,l0e=Po,c0e=l0e.Symbol,Qv=c0e,V4=Qv,NH=Object.prototype,u0e=NH.hasOwnProperty,d0e=NH.toString,Lp=V4?V4.toStringTag:void 0;function h0e(t){var e=u0e.call(t,Lp),n=t[Lp];try{t[Lp]=void 0;var r=!0}catch{}var s=d0e.call(t);return r&&(e?t[Lp]=n:delete t[Lp]),s}var f0e=h0e,m0e=Object.prototype,p0e=m0e.toString;function g0e(t){return p0e.call(t)}var y0e=g0e,B4=Qv,v0e=f0e,x0e=y0e,b0e="[object Null]",w0e="[object Undefined]",U4=B4?B4.toStringTag:void 0;function _0e(t){return t==null?t===void 0?w0e:b0e:U4&&U4 in Object(t)?v0e(t):x0e(t)}var jl=_0e;function j0e(t){return t!=null&&typeof t=="object"}var Nl=j0e,N0e=jl,S0e=Nl,E0e="[object Symbol]";function A0e(t){return typeof t=="symbol"||S0e(t)&&N0e(t)==E0e}var Zm=A0e,T0e=ra,C0e=Zm,P0e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,I0e=/^\w*$/;function k0e(t,e){if(T0e(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||C0e(t)?!0:I0e.test(t)||!P0e.test(t)||e!=null&&t in Object(e)}var wk=k0e;function O0e(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var pu=O0e;const Jm=pn(pu);var R0e=jl,M0e=pu,D0e="[object AsyncFunction]",L0e="[object Function]",$0e="[object GeneratorFunction]",F0e="[object Proxy]";function V0e(t){if(!M0e(t))return!1;var e=R0e(t);return e==L0e||e==$0e||e==D0e||e==F0e}var _k=V0e;const wt=pn(_k);var B0e=Po,U0e=B0e["__core-js_shared__"],z0e=U0e,J1=z0e,z4=function(){var t=/[^.]+$/.exec(J1&&J1.keys&&J1.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function q0e(t){return!!z4&&z4 in t}var W0e=q0e,H0e=Function.prototype,K0e=H0e.toString;function G0e(t){if(t!=null){try{return K0e.call(t)}catch{}try{return t+""}catch{}}return""}var SH=G0e,Y0e=_k,Q0e=W0e,X0e=pu,Z0e=SH,J0e=/[\\^$.*+?()[\]{}|]/g,ewe=/^\[object .+?Constructor\]$/,twe=Function.prototype,nwe=Object.prototype,rwe=twe.toString,swe=nwe.hasOwnProperty,awe=RegExp("^"+rwe.call(swe).replace(J0e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function iwe(t){if(!X0e(t)||Q0e(t))return!1;var e=Y0e(t)?awe:ewe;return e.test(Z0e(t))}var owe=iwe;function lwe(t,e){return t==null?void 0:t[e]}var cwe=lwe,uwe=owe,dwe=cwe;function hwe(t,e){var n=dwe(t,e);return uwe(n)?n:void 0}var nh=hwe,fwe=nh,mwe=fwe(Object,"create"),Cj=mwe,q4=Cj;function pwe(){this.__data__=q4?q4(null):{},this.size=0}var gwe=pwe;function ywe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var vwe=ywe,xwe=Cj,bwe="__lodash_hash_undefined__",wwe=Object.prototype,_we=wwe.hasOwnProperty;function jwe(t){var e=this.__data__;if(xwe){var n=e[t];return n===bwe?void 0:n}return _we.call(e,t)?e[t]:void 0}var Nwe=jwe,Swe=Cj,Ewe=Object.prototype,Awe=Ewe.hasOwnProperty;function Twe(t){var e=this.__data__;return Swe?e[t]!==void 0:Awe.call(e,t)}var Cwe=Twe,Pwe=Cj,Iwe="__lodash_hash_undefined__";function kwe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Pwe&&e===void 0?Iwe:e,this}var Owe=kwe,Rwe=gwe,Mwe=vwe,Dwe=Nwe,Lwe=Cwe,$we=Owe;function ep(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ep.prototype.clear=Rwe;ep.prototype.delete=Mwe;ep.prototype.get=Dwe;ep.prototype.has=Lwe;ep.prototype.set=$we;var Fwe=ep;function Vwe(){this.__data__=[],this.size=0}var Bwe=Vwe;function Uwe(t,e){return t===e||t!==t&&e!==e}var jk=Uwe,zwe=jk;function qwe(t,e){for(var n=t.length;n--;)if(zwe(t[n][0],e))return n;return-1}var Pj=qwe,Wwe=Pj,Hwe=Array.prototype,Kwe=Hwe.splice;function Gwe(t){var e=this.__data__,n=Wwe(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Kwe.call(e,n,1),--this.size,!0}var Ywe=Gwe,Qwe=Pj;function Xwe(t){var e=this.__data__,n=Qwe(e,t);return n<0?void 0:e[n][1]}var Zwe=Xwe,Jwe=Pj;function e_e(t){return Jwe(this.__data__,t)>-1}var t_e=e_e,n_e=Pj;function r_e(t,e){var n=this.__data__,r=n_e(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var s_e=r_e,a_e=Bwe,i_e=Ywe,o_e=Zwe,l_e=t_e,c_e=s_e;function tp(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}tp.prototype.clear=a_e;tp.prototype.delete=i_e;tp.prototype.get=o_e;tp.prototype.has=l_e;tp.prototype.set=c_e;var Ij=tp,u_e=nh,d_e=Po,h_e=u_e(d_e,"Map"),Nk=h_e,W4=Fwe,f_e=Ij,m_e=Nk;function p_e(){this.size=0,this.__data__={hash:new W4,map:new(m_e||f_e),string:new W4}}var g_e=p_e;function y_e(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var v_e=y_e,x_e=v_e;function b_e(t,e){var n=t.__data__;return x_e(e)?n[typeof e=="string"?"string":"hash"]:n.map}var kj=b_e,w_e=kj;function __e(t){var e=w_e(this,t).delete(t);return this.size-=e?1:0,e}var j_e=__e,N_e=kj;function S_e(t){return N_e(this,t).get(t)}var E_e=S_e,A_e=kj;function T_e(t){return A_e(this,t).has(t)}var C_e=T_e,P_e=kj;function I_e(t,e){var n=P_e(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var k_e=I_e,O_e=g_e,R_e=j_e,M_e=E_e,D_e=C_e,L_e=k_e;function np(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}np.prototype.clear=O_e;np.prototype.delete=R_e;np.prototype.get=M_e;np.prototype.has=D_e;np.prototype.set=L_e;var Sk=np,EH=Sk,$_e="Expected a function";function Ek(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError($_e);var n=function(){var r=arguments,s=e?e.apply(this,r):r[0],i=n.cache;if(i.has(s))return i.get(s);var o=t.apply(this,r);return n.cache=i.set(s,o)||i,o};return n.cache=new(Ek.Cache||EH),n}Ek.Cache=EH;var AH=Ek;const F_e=pn(AH);var V_e=AH,B_e=500;function U_e(t){var e=V_e(t,function(r){return n.size===B_e&&n.clear(),r}),n=e.cache;return e}var z_e=U_e,q_e=z_e,W_e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,H_e=/\\(\\)?/g,K_e=q_e(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(W_e,function(n,r,s,i){e.push(s?i.replace(H_e,"$1"):r||n)}),e}),G_e=K_e;function Y_e(t,e){for(var n=-1,r=t==null?0:t.length,s=Array(r);++n<r;)s[n]=e(t[n],n,t);return s}var Ak=Y_e,H4=Qv,Q_e=Ak,X_e=ra,Z_e=Zm,J_e=1/0,K4=H4?H4.prototype:void 0,G4=K4?K4.toString:void 0;function TH(t){if(typeof t=="string")return t;if(X_e(t))return Q_e(t,TH)+"";if(Z_e(t))return G4?G4.call(t):"";var e=t+"";return e=="0"&&1/t==-J_e?"-0":e}var eje=TH,tje=eje;function nje(t){return t==null?"":tje(t)}var CH=nje,rje=ra,sje=wk,aje=G_e,ije=CH;function oje(t,e){return rje(t)?t:sje(t,e)?[t]:aje(ije(t))}var PH=oje,lje=Zm,cje=1/0;function uje(t){if(typeof t=="string"||lje(t))return t;var e=t+"";return e=="0"&&1/t==-cje?"-0":e}var Oj=uje,dje=PH,hje=Oj;function fje(t,e){e=dje(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[hje(e[n++])];return n&&n==r?t:void 0}var Tk=fje,mje=Tk;function pje(t,e,n){var r=t==null?void 0:mje(t,e);return r===void 0?n:r}var IH=pje;const Sa=pn(IH);function gje(t){return t==null}var yje=gje;const $t=pn(yje);var vje=jl,xje=ra,bje=Nl,wje="[object String]";function _je(t){return typeof t=="string"||!xje(t)&&bje(t)&&vje(t)==wje}var jje=_je;const $d=pn(jje);var kH={exports:{}},bn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ck=Symbol.for("react.element"),Pk=Symbol.for("react.portal"),Rj=Symbol.for("react.fragment"),Mj=Symbol.for("react.strict_mode"),Dj=Symbol.for("react.profiler"),Lj=Symbol.for("react.provider"),$j=Symbol.for("react.context"),Nje=Symbol.for("react.server_context"),Fj=Symbol.for("react.forward_ref"),Vj=Symbol.for("react.suspense"),Bj=Symbol.for("react.suspense_list"),Uj=Symbol.for("react.memo"),zj=Symbol.for("react.lazy"),Sje=Symbol.for("react.offscreen"),OH;OH=Symbol.for("react.module.reference");function ai(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Ck:switch(t=t.type,t){case Rj:case Dj:case Mj:case Vj:case Bj:return t;default:switch(t=t&&t.$$typeof,t){case Nje:case $j:case Fj:case zj:case Uj:case Lj:return t;default:return e}}case Pk:return e}}}bn.ContextConsumer=$j;bn.ContextProvider=Lj;bn.Element=Ck;bn.ForwardRef=Fj;bn.Fragment=Rj;bn.Lazy=zj;bn.Memo=Uj;bn.Portal=Pk;bn.Profiler=Dj;bn.StrictMode=Mj;bn.Suspense=Vj;bn.SuspenseList=Bj;bn.isAsyncMode=function(){return!1};bn.isConcurrentMode=function(){return!1};bn.isContextConsumer=function(t){return ai(t)===$j};bn.isContextProvider=function(t){return ai(t)===Lj};bn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ck};bn.isForwardRef=function(t){return ai(t)===Fj};bn.isFragment=function(t){return ai(t)===Rj};bn.isLazy=function(t){return ai(t)===zj};bn.isMemo=function(t){return ai(t)===Uj};bn.isPortal=function(t){return ai(t)===Pk};bn.isProfiler=function(t){return ai(t)===Dj};bn.isStrictMode=function(t){return ai(t)===Mj};bn.isSuspense=function(t){return ai(t)===Vj};bn.isSuspenseList=function(t){return ai(t)===Bj};bn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Rj||t===Dj||t===Mj||t===Vj||t===Bj||t===Sje||typeof t=="object"&&t!==null&&(t.$$typeof===zj||t.$$typeof===Uj||t.$$typeof===Lj||t.$$typeof===$j||t.$$typeof===Fj||t.$$typeof===OH||t.getModuleId!==void 0)};bn.typeOf=ai;kH.exports=bn;var Eje=kH.exports,Aje=jl,Tje=Nl,Cje="[object Number]";function Pje(t){return typeof t=="number"||Tje(t)&&Aje(t)==Cje}var RH=Pje;const Ije=pn(RH);var kje=RH;function Oje(t){return kje(t)&&t!=+t}var Rje=Oje;const rp=pn(Rje);var Ts=function(e){return e===0?0:e>0?1:-1},Uu=function(e){return $d(e)&&e.indexOf("%")===e.length-1},Ee=function(e){return Ije(e)&&!rp(e)},Mje=function(e){return $t(e)},Rr=function(e){return Ee(e)||$d(e)},Dje=0,sp=function(e){var n=++Dje;return"".concat(e||"").concat(n)},Cs=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ee(e)&&!$d(e))return r;var i;if(Uu(e)){var o=e.indexOf("%");i=n*parseFloat(e.slice(0,o))/100}else i=+e;return rp(i)&&(i=r),s&&i>n&&(i=n),i},rc=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},Lje=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},s=0;s<n;s++)if(!r[e[s]])r[e[s]]=!0;else return!0;return!1},Hs=function(e,n){return Ee(e)&&Ee(n)?function(r){return e+r*(n-e)}:function(){return n}};function ew(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Sa(r,e))===n})}var $je=function(e,n){return Ee(e)&&Ee(n)?e-n:$d(e)&&$d(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function mf(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function qA(t){"@babel/helpers - typeof";return qA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qA(t)}var Fje=["viewBox","children"],Vje=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Y4=["points","pathLength"],eS={svg:Fje,polygon:Y4,polyline:Y4},Ik=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],tw=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(N.isValidElement(e)&&(r=e.props),!Jm(r))return null;var s={};return Object.keys(r).forEach(function(i){Ik.includes(i)&&(s[i]=n||function(o){return r[i](r,o)})}),s},Bje=function(e,n,r){return function(s){return e(n,r,s),null}},Fd=function(e,n,r){if(!Jm(e)||qA(e)!=="object")return null;var s=null;return Object.keys(e).forEach(function(i){var o=e[i];Ik.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=Bje(o,n,r))}),s},Uje=["children"],zje=["children"];function Q4(t,e){if(t==null)return{};var n=qje(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qje(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function WA(t){"@babel/helpers - typeof";return WA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WA(t)}var X4={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Jo=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},Z4=null,tS=null,kk=function t(e){if(e===Z4&&Array.isArray(tS))return tS;var n=[];return N.Children.forEach(e,function(r){$t(r)||(Eje.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),tS=n,Z4=e,n};function Ya(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(s){return Jo(s)}):r=[Jo(e)],kk(t).forEach(function(s){var i=Sa(s,"type.displayName")||Sa(s,"type.name");r.indexOf(i)!==-1&&n.push(s)}),n}function ua(t,e){var n=Ya(t,e);return n&&n[0]}var J4=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,s=n.height;return!(!Ee(r)||r<=0||!Ee(s)||s<=0)},Wje=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Hje=function(e){return e&&e.type&&$d(e.type)&&Wje.indexOf(e.type)>=0},Kje=function(e){return e&&WA(e)==="object"&&"clipDot"in e},Gje=function(e,n,r,s){var i,o=(i=eS==null?void 0:eS[s])!==null&&i!==void 0?i:[];return n.startsWith("data-")||!wt(e)&&(s&&o.includes(n)||Vje.includes(n))||r&&Ik.includes(n)},ft=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var s=e;if(N.isValidElement(e)&&(s=e.props),!Jm(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;Gje((l=s)===null||l===void 0?void 0:l[o],o,n,r)&&(i[o]=s[o])}),i},HA=function t(e,n){if(e===n)return!0;var r=N.Children.count(e);if(r!==N.Children.count(n))return!1;if(r===0)return!0;if(r===1)return eL(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var s=0;s<r;s++){var i=e[s],o=n[s];if(Array.isArray(i)||Array.isArray(o)){if(!t(i,o))return!1}else if(!eL(i,o))return!1}return!0},eL=function(e,n){if($t(e)&&$t(n))return!0;if(!$t(e)&&!$t(n)){var r=e.props||{},s=r.children,i=Q4(r,Uje),o=n.props||{},l=o.children,c=Q4(o,zje);return s&&l?mf(i,c)&&HA(s,l):!s&&!l?mf(i,c):!1}return!1},tL=function(e,n){var r=[],s={};return kk(e).forEach(function(i,o){if(Hje(i))r.push(i);else if(i){var l=Jo(i.type),c=n[l]||{},u=c.handler,d=c.once;if(u&&(!d||!s[l])){var h=u(i,l,o);r.push(h),s[l]=!0}}}),r},Yje=function(e){var n=e&&e.type;return n&&X4[n]?X4[n]:null},Qje=function(e,n){return kk(n).indexOf(e)},Xje=["children","width","height","viewBox","className","style","title","desc"];function KA(){return KA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KA.apply(this,arguments)}function Zje(t,e){if(t==null)return{};var n=Jje(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Jje(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function GA(t){var e=t.children,n=t.width,r=t.height,s=t.viewBox,i=t.className,o=t.style,l=t.title,c=t.desc,u=Zje(t,Xje),d=s||{width:n,height:r,x:0,y:0},h=Lt("recharts-surface",i);return D.createElement("svg",KA({},ft(u,!0,"svg"),{className:h,width:n,height:r,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),D.createElement("title",null,l),D.createElement("desc",null,c),e)}var eNe=["children","className"];function YA(){return YA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YA.apply(this,arguments)}function tNe(t,e){if(t==null)return{};var n=nNe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nNe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var en=D.forwardRef(function(t,e){var n=t.children,r=t.className,s=tNe(t,eNe),i=Lt("recharts-layer",r);return D.createElement("g",YA({className:i},ft(s,!0),{ref:e}),n)}),Ci=function(e,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i]};function rNe(t,e,n){var r=-1,s=t.length;e<0&&(e=-e>s?0:s+e),n=n>s?s:n,n<0&&(n+=s),s=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(s);++r<s;)i[r]=t[r+e];return i}var sNe=rNe,aNe=sNe;function iNe(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:aNe(t,e,n)}var oNe=iNe,lNe="\\ud800-\\udfff",cNe="\\u0300-\\u036f",uNe="\\ufe20-\\ufe2f",dNe="\\u20d0-\\u20ff",hNe=cNe+uNe+dNe,fNe="\\ufe0e\\ufe0f",mNe="\\u200d",pNe=RegExp("["+mNe+lNe+hNe+fNe+"]");function gNe(t){return pNe.test(t)}var MH=gNe;function yNe(t){return t.split("")}var vNe=yNe,DH="\\ud800-\\udfff",xNe="\\u0300-\\u036f",bNe="\\ufe20-\\ufe2f",wNe="\\u20d0-\\u20ff",_Ne=xNe+bNe+wNe,jNe="\\ufe0e\\ufe0f",NNe="["+DH+"]",QA="["+_Ne+"]",XA="\\ud83c[\\udffb-\\udfff]",SNe="(?:"+QA+"|"+XA+")",LH="[^"+DH+"]",$H="(?:\\ud83c[\\udde6-\\uddff]){2}",FH="[\\ud800-\\udbff][\\udc00-\\udfff]",ENe="\\u200d",VH=SNe+"?",BH="["+jNe+"]?",ANe="(?:"+ENe+"(?:"+[LH,$H,FH].join("|")+")"+BH+VH+")*",TNe=BH+VH+ANe,CNe="(?:"+[LH+QA+"?",QA,$H,FH,NNe].join("|")+")",PNe=RegExp(XA+"(?="+XA+")|"+CNe+TNe,"g");function INe(t){return t.match(PNe)||[]}var kNe=INe,ONe=vNe,RNe=MH,MNe=kNe;function DNe(t){return RNe(t)?MNe(t):ONe(t)}var LNe=DNe,$Ne=oNe,FNe=MH,VNe=LNe,BNe=CH;function UNe(t){return function(e){e=BNe(e);var n=FNe(e)?VNe(e):void 0,r=n?n[0]:e.charAt(0),s=n?$Ne(n,1).join(""):e.slice(1);return r[t]()+s}}var zNe=UNe,qNe=zNe,WNe=qNe("toUpperCase"),HNe=WNe;const qj=pn(HNe);function Cn(t){return function(){return t}}const UH=Math.cos,nw=Math.sin,Bi=Math.sqrt,rw=Math.PI,Wj=2*rw,ZA=Math.PI,JA=2*ZA,Ou=1e-6,KNe=JA-Ou;function zH(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function GNe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return zH;const n=10**e;return function(r){this._+=r[0];for(let s=1,i=r.length;s<i;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}class YNe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?zH:GNe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,s){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+s}`}bezierCurveTo(e,n,r,s,i,o){this._append`C${+e},${+n},${+r},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(e,n,r,s,i){if(e=+e,n=+n,r=+r,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=r-e,u=s-n,d=o-e,h=l-n,f=d*d+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>Ou)if(!(Math.abs(h*c-u*d)>Ou)||!i)this._append`L${this._x1=e},${this._y1=n}`;else{let m=r-o,b=s-l,g=c*c+u*u,x=m*m+b*b,w=Math.sqrt(g),y=Math.sqrt(f),A=i*Math.tan((ZA-Math.acos((g+f-x)/(2*w*y)))/2),T=A/y,v=A/w;Math.abs(T-1)>Ou&&this._append`L${e+T*d},${n+T*h}`,this._append`A${i},${i},0,0,${+(h*m>d*b)},${this._x1=e+v*c},${this._y1=n+v*u}`}}arc(e,n,r,s,i,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(s),c=r*Math.sin(s),u=e+l,d=n+c,h=1^o,f=o?s-i:i-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Ou||Math.abs(this._y1-d)>Ou)&&this._append`L${u},${d}`,r&&(f<0&&(f=f%JA+JA),f>KNe?this._append`A${r},${r},0,1,${h},${e-l},${n-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=d}`:f>Ou&&this._append`A${r},${r},0,${+(f>=ZA)},${h},${this._x1=e+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(e,n,r,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+s}h${-r}Z`}toString(){return this._}}function Ok(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new YNe(e)}function Rk(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function qH(t){this._context=t}qH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Hj(t){return new qH(t)}function WH(t){return t[0]}function HH(t){return t[1]}function KH(t,e){var n=Cn(!0),r=null,s=Hj,i=null,o=Ok(l);t=typeof t=="function"?t:t===void 0?WH:Cn(t),e=typeof e=="function"?e:e===void 0?HH:Cn(e);function l(c){var u,d=(c=Rk(c)).length,h,f=!1,m;for(r==null&&(i=s(m=o())),u=0;u<=d;++u)!(u<d&&n(h=c[u],u,c))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+t(h,u,c),+e(h,u,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Cn(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Cn(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Cn(!!c),l):n},l.curve=function(c){return arguments.length?(s=c,r!=null&&(i=s(r)),l):s},l.context=function(c){return arguments.length?(c==null?r=i=null:i=s(r=c),l):r},l}function Qx(t,e,n){var r=null,s=Cn(!0),i=null,o=Hj,l=null,c=Ok(u);t=typeof t=="function"?t:t===void 0?WH:Cn(+t),e=typeof e=="function"?e:Cn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?HH:Cn(+n);function u(h){var f,m,b,g=(h=Rk(h)).length,x,w=!1,y,A=new Array(g),T=new Array(g);for(i==null&&(l=o(y=c())),f=0;f<=g;++f){if(!(f<g&&s(x=h[f],f,h))===w)if(w=!w)m=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=f-1;b>=m;--b)l.point(A[b],T[b]);l.lineEnd(),l.areaEnd()}w&&(A[f]=+t(x,f,h),T[f]=+e(x,f,h),l.point(r?+r(x,f,h):A[f],n?+n(x,f,h):T[f]))}if(y)return l=null,y+""||null}function d(){return KH().defined(s).curve(o).context(i)}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:Cn(+h),r=null,u):t},u.x0=function(h){return arguments.length?(t=typeof h=="function"?h:Cn(+h),u):t},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Cn(+h),u):r},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:Cn(+h),n=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:Cn(+h),u):e},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Cn(+h),u):n},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(n)},u.lineX1=function(){return d().x(r).y(e)},u.defined=function(h){return arguments.length?(s=typeof h=="function"?h:Cn(!!h),u):s},u.curve=function(h){return arguments.length?(o=h,i!=null&&(l=o(i)),u):o},u.context=function(h){return arguments.length?(h==null?i=l=null:l=o(i=h),u):i},u}class GH{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function QNe(t){return new GH(t,!0)}function XNe(t){return new GH(t,!1)}const Mk={draw(t,e){const n=Bi(e/rw);t.moveTo(n,0),t.arc(0,0,n,0,Wj)}},ZNe={draw(t,e){const n=Bi(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},YH=Bi(1/3),JNe=YH*2,e1e={draw(t,e){const n=Bi(e/JNe),r=n*YH;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},t1e={draw(t,e){const n=Bi(e),r=-n/2;t.rect(r,r,n,n)}},n1e=.8908130915292852,QH=nw(rw/10)/nw(7*rw/10),r1e=nw(Wj/10)*QH,s1e=-UH(Wj/10)*QH,a1e={draw(t,e){const n=Bi(e*n1e),r=r1e*n,s=s1e*n;t.moveTo(0,-n),t.lineTo(r,s);for(let i=1;i<5;++i){const o=Wj*i/5,l=UH(o),c=nw(o);t.lineTo(c*n,-l*n),t.lineTo(l*r-c*s,c*r+l*s)}t.closePath()}},nS=Bi(3),i1e={draw(t,e){const n=-Bi(e/(nS*3));t.moveTo(0,n*2),t.lineTo(-nS*n,-n),t.lineTo(nS*n,-n),t.closePath()}},ka=-.5,Oa=Bi(3)/2,eT=1/Bi(12),o1e=(eT/2+1)*3,l1e={draw(t,e){const n=Bi(e/o1e),r=n/2,s=n*eT,i=r,o=n*eT+n,l=-i,c=o;t.moveTo(r,s),t.lineTo(i,o),t.lineTo(l,c),t.lineTo(ka*r-Oa*s,Oa*r+ka*s),t.lineTo(ka*i-Oa*o,Oa*i+ka*o),t.lineTo(ka*l-Oa*c,Oa*l+ka*c),t.lineTo(ka*r+Oa*s,ka*s-Oa*r),t.lineTo(ka*i+Oa*o,ka*o-Oa*i),t.lineTo(ka*l+Oa*c,ka*c-Oa*l),t.closePath()}};function c1e(t,e){let n=null,r=Ok(s);t=typeof t=="function"?t:Cn(t||Mk),e=typeof e=="function"?e:Cn(e===void 0?64:+e);function s(){let i;if(n||(n=i=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return s.type=function(i){return arguments.length?(t=typeof i=="function"?i:Cn(i),s):t},s.size=function(i){return arguments.length?(e=typeof i=="function"?i:Cn(+i),s):e},s.context=function(i){return arguments.length?(n=i??null,s):n},s}function sw(){}function aw(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function XH(t){this._context=t}XH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:aw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:aw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function u1e(t){return new XH(t)}function ZH(t){this._context=t}ZH.prototype={areaStart:sw,areaEnd:sw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:aw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function d1e(t){return new ZH(t)}function JH(t){this._context=t}JH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:aw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function h1e(t){return new JH(t)}function eK(t){this._context=t}eK.prototype={areaStart:sw,areaEnd:sw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function f1e(t){return new eK(t)}function nL(t){return t<0?-1:1}function rL(t,e,n){var r=t._x1-t._x0,s=e-t._x1,i=(t._y1-t._y0)/(r||s<0&&-0),o=(n-t._y1)/(s||r<0&&-0),l=(i*s+o*r)/(r+s);return(nL(i)+nL(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function sL(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function rS(t,e,n){var r=t._x0,s=t._y0,i=t._x1,o=t._y1,l=(i-r)/3;t._context.bezierCurveTo(r+l,s+l*e,i-l,o-l*n,i,o)}function iw(t){this._context=t}iw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:rS(this,this._t0,sL(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,rS(this,sL(this,n=rL(this,t,e)),n);break;default:rS(this,this._t0,n=rL(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function tK(t){this._context=new nK(t)}(tK.prototype=Object.create(iw.prototype)).point=function(t,e){iw.prototype.point.call(this,e,t)};function nK(t){this._context=t}nK.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,s,i){this._context.bezierCurveTo(e,t,r,n,i,s)}};function m1e(t){return new iw(t)}function p1e(t){return new tK(t)}function rK(t){this._context=t}rK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=aL(t),s=aL(e),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],s[0][i],r[1][i],s[1][i],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function aL(t){var e,n=t.length-1,r,s=new Array(n),i=new Array(n),o=new Array(n);for(s[0]=0,i[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)s[e]=1,i[e]=4,o[e]=4*t[e]+2*t[e+1];for(s[n-1]=2,i[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=s[e]/i[e-1],i[e]-=r,o[e]-=r*o[e-1];for(s[n-1]=o[n-1]/i[n-1],e=n-2;e>=0;--e)s[e]=(o[e]-s[e+1])/i[e];for(i[n-1]=(t[n]+s[n-1])/2,e=0;e<n-1;++e)i[e]=2*t[e+1]-s[e+1];return[s,i]}function g1e(t){return new rK(t)}function Kj(t,e){this._context=t,this._t=e}Kj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function y1e(t){return new Kj(t,.5)}function v1e(t){return new Kj(t,0)}function x1e(t){return new Kj(t,1)}function tm(t,e){if((o=t.length)>1)for(var n=1,r,s,i=t[e[0]],o,l=i.length;n<o;++n)for(s=i,i=t[e[n]],r=0;r<l;++r)i[r][1]+=i[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function tT(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function b1e(t,e){return t[e]}function w1e(t){const e=[];return e.key=t,e}function _1e(){var t=Cn([]),e=tT,n=tm,r=b1e;function s(i){var o=Array.from(t.apply(this,arguments),w1e),l,c=o.length,u=-1,d;for(const h of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+r(h,o[l].key,u,i)]).data=h;for(l=0,d=Rk(e(o));l<c;++l)o[d[l]].index=l;return n(o,d),o}return s.keys=function(i){return arguments.length?(t=typeof i=="function"?i:Cn(Array.from(i)),s):t},s.value=function(i){return arguments.length?(r=typeof i=="function"?i:Cn(+i),s):r},s.order=function(i){return arguments.length?(e=i==null?tT:typeof i=="function"?i:Cn(Array.from(i)),s):e},s.offset=function(i){return arguments.length?(n=i??tm,s):n},s}function j1e(t,e){if((r=t.length)>0){for(var n,r,s=0,i=t[0].length,o;s<i;++s){for(o=n=0;n<r;++n)o+=t[n][s][1]||0;if(o)for(n=0;n<r;++n)t[n][s][1]/=o}tm(t,e)}}function N1e(t,e){if((s=t.length)>0){for(var n=0,r=t[e[0]],s,i=r.length;n<i;++n){for(var o=0,l=0;o<s;++o)l+=t[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}tm(t,e)}}function S1e(t,e){if(!(!((o=t.length)>0)||!((i=(s=t[e[0]]).length)>0))){for(var n=0,r=1,s,i,o;r<i;++r){for(var l=0,c=0,u=0;l<o;++l){for(var d=t[e[l]],h=d[r][1]||0,f=d[r-1][1]||0,m=(h-f)/2,b=0;b<l;++b){var g=t[e[b]],x=g[r][1]||0,w=g[r-1][1]||0;m+=x-w}c+=h,u+=m*h}s[r-1][1]+=s[r-1][0]=n,c&&(n-=u/c)}s[r-1][1]+=s[r-1][0]=n,tm(t,e)}}function Ay(t){"@babel/helpers - typeof";return Ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ay(t)}var E1e=["type","size","sizeType"];function nT(){return nT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nT.apply(this,arguments)}function iL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function oL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iL(Object(n),!0).forEach(function(r){A1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function A1e(t,e,n){return e=T1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T1e(t){var e=C1e(t,"string");return Ay(e)=="symbol"?e:e+""}function C1e(t,e){if(Ay(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ay(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function P1e(t,e){if(t==null)return{};var n=I1e(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function I1e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var sK={symbolCircle:Mk,symbolCross:ZNe,symbolDiamond:e1e,symbolSquare:t1e,symbolStar:a1e,symbolTriangle:i1e,symbolWye:l1e},k1e=Math.PI/180,O1e=function(e){var n="symbol".concat(qj(e));return sK[n]||Mk},R1e=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*k1e;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},M1e=function(e,n){sK["symbol".concat(qj(e))]=n},Dk=function(e){var n=e.type,r=n===void 0?"circle":n,s=e.size,i=s===void 0?64:s,o=e.sizeType,l=o===void 0?"area":o,c=P1e(e,E1e),u=oL(oL({},c),{},{type:r,size:i,sizeType:l}),d=function(){var x=O1e(r),w=c1e().type(x).size(R1e(i,l,r));return w()},h=u.className,f=u.cx,m=u.cy,b=ft(u,!0);return f===+f&&m===+m&&i===+i?D.createElement("path",nT({},b,{className:Lt("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(m,")"),d:d()})):null};Dk.registerSymbol=M1e;function nm(t){"@babel/helpers - typeof";return nm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nm(t)}function rT(){return rT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rT.apply(this,arguments)}function lL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function D1e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lL(Object(n),!0).forEach(function(r){Ty(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function L1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $1e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,iK(r.key),r)}}function F1e(t,e,n){return e&&$1e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function V1e(t,e,n){return e=ow(e),B1e(t,aK()?Reflect.construct(e,n||[],ow(t).constructor):e.apply(t,n))}function B1e(t,e){if(e&&(nm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U1e(t)}function U1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aK=function(){return!!t})()}function ow(t){return ow=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ow(t)}function z1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sT(t,e)}function sT(t,e){return sT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},sT(t,e)}function Ty(t,e,n){return e=iK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iK(t){var e=q1e(t,"string");return nm(e)=="symbol"?e:e+""}function q1e(t,e){if(nm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(nm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ra=32,Lk=function(t){function e(){return L1e(this,e),V1e(this,e,arguments)}return z1e(e,t),F1e(e,[{key:"renderIcon",value:function(r){var s=this.props.inactiveColor,i=Ra/2,o=Ra/6,l=Ra/3,c=r.inactive?s:r.color;if(r.type==="plainline")return D.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:i,x2:Ra,y2:i,className:"recharts-legend-icon"});if(r.type==="line")return D.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Ra,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(r.type==="rect")return D.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Ra/8,"h").concat(Ra,"v").concat(Ra*3/4,"h").concat(-Ra,"z"),className:"recharts-legend-icon"});if(D.isValidElement(r.legendIcon)){var u=D1e({},r);return delete u.legendIcon,D.cloneElement(r.legendIcon,u)}return D.createElement(Dk,{fill:c,cx:i,cy:i,size:Ra,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,c=s.formatter,u=s.inactiveColor,d={x:0,y:0,width:Ra,height:Ra},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(m,b){var g=m.formatter||c,x=Lt(Ty(Ty({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",m.inactive));if(m.type==="none")return null;var w=wt(m.value)?null:m.value;Ci(!wt(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=m.inactive?u:m.color;return D.createElement("li",rT({className:x,style:h,key:"legend-item-".concat(b)},Fd(r.props,m,b)),D.createElement(GA,{width:o,height:o,viewBox:d,style:f},r.renderIcon(m)),D.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},g?g(w,m,b):w))})}},{key:"render",value:function(){var r=this.props,s=r.payload,i=r.layout,o=r.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return D.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(N.PureComponent);Ty(Lk,"displayName","Legend");Ty(Lk,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var W1e=Ij;function H1e(){this.__data__=new W1e,this.size=0}var K1e=H1e;function G1e(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var Y1e=G1e;function Q1e(t){return this.__data__.get(t)}var X1e=Q1e;function Z1e(t){return this.__data__.has(t)}var J1e=Z1e,eSe=Ij,tSe=Nk,nSe=Sk,rSe=200;function sSe(t,e){var n=this.__data__;if(n instanceof eSe){var r=n.__data__;if(!tSe||r.length<rSe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new nSe(r)}return n.set(t,e),this.size=n.size,this}var aSe=sSe,iSe=Ij,oSe=K1e,lSe=Y1e,cSe=X1e,uSe=J1e,dSe=aSe;function ap(t){var e=this.__data__=new iSe(t);this.size=e.size}ap.prototype.clear=oSe;ap.prototype.delete=lSe;ap.prototype.get=cSe;ap.prototype.has=uSe;ap.prototype.set=dSe;var oK=ap,hSe="__lodash_hash_undefined__";function fSe(t){return this.__data__.set(t,hSe),this}var mSe=fSe;function pSe(t){return this.__data__.has(t)}var gSe=pSe,ySe=Sk,vSe=mSe,xSe=gSe;function lw(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new ySe;++e<n;)this.add(t[e])}lw.prototype.add=lw.prototype.push=vSe;lw.prototype.has=xSe;var lK=lw;function bSe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var cK=bSe;function wSe(t,e){return t.has(e)}var uK=wSe,_Se=lK,jSe=cK,NSe=uK,SSe=1,ESe=2;function ASe(t,e,n,r,s,i){var o=n&SSe,l=t.length,c=e.length;if(l!=c&&!(o&&c>l))return!1;var u=i.get(t),d=i.get(e);if(u&&d)return u==e&&d==t;var h=-1,f=!0,m=n&ESe?new _Se:void 0;for(i.set(t,e),i.set(e,t);++h<l;){var b=t[h],g=e[h];if(r)var x=o?r(g,b,h,e,t,i):r(b,g,h,t,e,i);if(x!==void 0){if(x)continue;f=!1;break}if(m){if(!jSe(e,function(w,y){if(!NSe(m,y)&&(b===w||s(b,w,n,r,i)))return m.push(y)})){f=!1;break}}else if(!(b===g||s(b,g,n,r,i))){f=!1;break}}return i.delete(t),i.delete(e),f}var dK=ASe,TSe=Po,CSe=TSe.Uint8Array,PSe=CSe;function ISe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,s){n[++e]=[s,r]}),n}var kSe=ISe;function OSe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var $k=OSe,cL=Qv,uL=PSe,RSe=jk,MSe=dK,DSe=kSe,LSe=$k,$Se=1,FSe=2,VSe="[object Boolean]",BSe="[object Date]",USe="[object Error]",zSe="[object Map]",qSe="[object Number]",WSe="[object RegExp]",HSe="[object Set]",KSe="[object String]",GSe="[object Symbol]",YSe="[object ArrayBuffer]",QSe="[object DataView]",dL=cL?cL.prototype:void 0,sS=dL?dL.valueOf:void 0;function XSe(t,e,n,r,s,i,o){switch(n){case QSe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case YSe:return!(t.byteLength!=e.byteLength||!i(new uL(t),new uL(e)));case VSe:case BSe:case qSe:return RSe(+t,+e);case USe:return t.name==e.name&&t.message==e.message;case WSe:case KSe:return t==e+"";case zSe:var l=DSe;case HSe:var c=r&$Se;if(l||(l=LSe),t.size!=e.size&&!c)return!1;var u=o.get(t);if(u)return u==e;r|=FSe,o.set(t,e);var d=MSe(l(t),l(e),r,s,i,o);return o.delete(t),d;case GSe:if(sS)return sS.call(t)==sS.call(e)}return!1}var ZSe=XSe;function JSe(t,e){for(var n=-1,r=e.length,s=t.length;++n<r;)t[s+n]=e[n];return t}var hK=JSe,eEe=hK,tEe=ra;function nEe(t,e,n){var r=e(t);return tEe(t)?r:eEe(r,n(t))}var rEe=nEe;function sEe(t,e){for(var n=-1,r=t==null?0:t.length,s=0,i=[];++n<r;){var o=t[n];e(o,n,t)&&(i[s++]=o)}return i}var aEe=sEe;function iEe(){return[]}var oEe=iEe,lEe=aEe,cEe=oEe,uEe=Object.prototype,dEe=uEe.propertyIsEnumerable,hL=Object.getOwnPropertySymbols,hEe=hL?function(t){return t==null?[]:(t=Object(t),lEe(hL(t),function(e){return dEe.call(t,e)}))}:cEe,fEe=hEe;function mEe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var pEe=mEe,gEe=jl,yEe=Nl,vEe="[object Arguments]";function xEe(t){return yEe(t)&&gEe(t)==vEe}var bEe=xEe,fL=bEe,wEe=Nl,fK=Object.prototype,_Ee=fK.hasOwnProperty,jEe=fK.propertyIsEnumerable,NEe=fL(function(){return arguments}())?fL:function(t){return wEe(t)&&_Ee.call(t,"callee")&&!jEe.call(t,"callee")},Fk=NEe,cw={exports:{}};function SEe(){return!1}var EEe=SEe;cw.exports;(function(t,e){var n=Po,r=EEe,s=e&&!e.nodeType&&e,i=s&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===s,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;t.exports=u})(cw,cw.exports);var mK=cw.exports,AEe=9007199254740991,TEe=/^(?:0|[1-9]\d*)$/;function CEe(t,e){var n=typeof t;return e=e??AEe,!!e&&(n=="number"||n!="symbol"&&TEe.test(t))&&t>-1&&t%1==0&&t<e}var Vk=CEe,PEe=9007199254740991;function IEe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=PEe}var Bk=IEe,kEe=jl,OEe=Bk,REe=Nl,MEe="[object Arguments]",DEe="[object Array]",LEe="[object Boolean]",$Ee="[object Date]",FEe="[object Error]",VEe="[object Function]",BEe="[object Map]",UEe="[object Number]",zEe="[object Object]",qEe="[object RegExp]",WEe="[object Set]",HEe="[object String]",KEe="[object WeakMap]",GEe="[object ArrayBuffer]",YEe="[object DataView]",QEe="[object Float32Array]",XEe="[object Float64Array]",ZEe="[object Int8Array]",JEe="[object Int16Array]",eAe="[object Int32Array]",tAe="[object Uint8Array]",nAe="[object Uint8ClampedArray]",rAe="[object Uint16Array]",sAe="[object Uint32Array]",Ln={};Ln[QEe]=Ln[XEe]=Ln[ZEe]=Ln[JEe]=Ln[eAe]=Ln[tAe]=Ln[nAe]=Ln[rAe]=Ln[sAe]=!0;Ln[MEe]=Ln[DEe]=Ln[GEe]=Ln[LEe]=Ln[YEe]=Ln[$Ee]=Ln[FEe]=Ln[VEe]=Ln[BEe]=Ln[UEe]=Ln[zEe]=Ln[qEe]=Ln[WEe]=Ln[HEe]=Ln[KEe]=!1;function aAe(t){return REe(t)&&OEe(t.length)&&!!Ln[kEe(t)]}var iAe=aAe;function oAe(t){return function(e){return t(e)}}var pK=oAe,uw={exports:{}};uw.exports;(function(t,e){var n=jH,r=e&&!e.nodeType&&e,s=r&&!0&&t&&!t.nodeType&&t,i=s&&s.exports===r,o=i&&n.process,l=function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l})(uw,uw.exports);var lAe=uw.exports,cAe=iAe,uAe=pK,mL=lAe,pL=mL&&mL.isTypedArray,dAe=pL?uAe(pL):cAe,gK=dAe,hAe=pEe,fAe=Fk,mAe=ra,pAe=mK,gAe=Vk,yAe=gK,vAe=Object.prototype,xAe=vAe.hasOwnProperty;function bAe(t,e){var n=mAe(t),r=!n&&fAe(t),s=!n&&!r&&pAe(t),i=!n&&!r&&!s&&yAe(t),o=n||r||s||i,l=o?hAe(t.length,String):[],c=l.length;for(var u in t)(e||xAe.call(t,u))&&!(o&&(u=="length"||s&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||gAe(u,c)))&&l.push(u);return l}var wAe=bAe,_Ae=Object.prototype;function jAe(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||_Ae;return t===n}var NAe=jAe;function SAe(t,e){return function(n){return t(e(n))}}var yK=SAe,EAe=yK,AAe=EAe(Object.keys,Object),TAe=AAe,CAe=NAe,PAe=TAe,IAe=Object.prototype,kAe=IAe.hasOwnProperty;function OAe(t){if(!CAe(t))return PAe(t);var e=[];for(var n in Object(t))kAe.call(t,n)&&n!="constructor"&&e.push(n);return e}var RAe=OAe,MAe=_k,DAe=Bk;function LAe(t){return t!=null&&DAe(t.length)&&!MAe(t)}var Xv=LAe,$Ae=wAe,FAe=RAe,VAe=Xv;function BAe(t){return VAe(t)?$Ae(t):FAe(t)}var Gj=BAe,UAe=rEe,zAe=fEe,qAe=Gj;function WAe(t){return UAe(t,qAe,zAe)}var HAe=WAe,gL=HAe,KAe=1,GAe=Object.prototype,YAe=GAe.hasOwnProperty;function QAe(t,e,n,r,s,i){var o=n&KAe,l=gL(t),c=l.length,u=gL(e),d=u.length;if(c!=d&&!o)return!1;for(var h=c;h--;){var f=l[h];if(!(o?f in e:YAe.call(e,f)))return!1}var m=i.get(t),b=i.get(e);if(m&&b)return m==e&&b==t;var g=!0;i.set(t,e),i.set(e,t);for(var x=o;++h<c;){f=l[h];var w=t[f],y=e[f];if(r)var A=o?r(y,w,f,e,t,i):r(w,y,f,t,e,i);if(!(A===void 0?w===y||s(w,y,n,r,i):A)){g=!1;break}x||(x=f=="constructor")}if(g&&!x){var T=t.constructor,v=e.constructor;T!=v&&"constructor"in t&&"constructor"in e&&!(typeof T=="function"&&T instanceof T&&typeof v=="function"&&v instanceof v)&&(g=!1)}return i.delete(t),i.delete(e),g}var XAe=QAe,ZAe=nh,JAe=Po,eTe=ZAe(JAe,"DataView"),tTe=eTe,nTe=nh,rTe=Po,sTe=nTe(rTe,"Promise"),aTe=sTe,iTe=nh,oTe=Po,lTe=iTe(oTe,"Set"),vK=lTe,cTe=nh,uTe=Po,dTe=cTe(uTe,"WeakMap"),hTe=dTe,aT=tTe,iT=Nk,oT=aTe,lT=vK,cT=hTe,xK=jl,ip=SH,yL="[object Map]",fTe="[object Object]",vL="[object Promise]",xL="[object Set]",bL="[object WeakMap]",wL="[object DataView]",mTe=ip(aT),pTe=ip(iT),gTe=ip(oT),yTe=ip(lT),vTe=ip(cT),Ru=xK;(aT&&Ru(new aT(new ArrayBuffer(1)))!=wL||iT&&Ru(new iT)!=yL||oT&&Ru(oT.resolve())!=vL||lT&&Ru(new lT)!=xL||cT&&Ru(new cT)!=bL)&&(Ru=function(t){var e=xK(t),n=e==fTe?t.constructor:void 0,r=n?ip(n):"";if(r)switch(r){case mTe:return wL;case pTe:return yL;case gTe:return vL;case yTe:return xL;case vTe:return bL}return e});var xTe=Ru,aS=oK,bTe=dK,wTe=ZSe,_Te=XAe,_L=xTe,jL=ra,NL=mK,jTe=gK,NTe=1,SL="[object Arguments]",EL="[object Array]",Xx="[object Object]",STe=Object.prototype,AL=STe.hasOwnProperty;function ETe(t,e,n,r,s,i){var o=jL(t),l=jL(e),c=o?EL:_L(t),u=l?EL:_L(e);c=c==SL?Xx:c,u=u==SL?Xx:u;var d=c==Xx,h=u==Xx,f=c==u;if(f&&NL(t)){if(!NL(e))return!1;o=!0,d=!1}if(f&&!d)return i||(i=new aS),o||jTe(t)?bTe(t,e,n,r,s,i):wTe(t,e,c,n,r,s,i);if(!(n&NTe)){var m=d&&AL.call(t,"__wrapped__"),b=h&&AL.call(e,"__wrapped__");if(m||b){var g=m?t.value():t,x=b?e.value():e;return i||(i=new aS),s(g,x,n,r,i)}}return f?(i||(i=new aS),_Te(t,e,n,r,s,i)):!1}var ATe=ETe,TTe=ATe,TL=Nl;function bK(t,e,n,r,s){return t===e?!0:t==null||e==null||!TL(t)&&!TL(e)?t!==t&&e!==e:TTe(t,e,n,r,bK,s)}var Uk=bK,CTe=oK,PTe=Uk,ITe=1,kTe=2;function OTe(t,e,n,r){var s=n.length,i=s,o=!r;if(t==null)return!i;for(t=Object(t);s--;){var l=n[s];if(o&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++s<i;){l=n[s];var c=l[0],u=t[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in t))return!1}else{var h=new CTe;if(r)var f=r(u,d,c,t,e,h);if(!(f===void 0?PTe(d,u,ITe|kTe,r,h):f))return!1}}return!0}var RTe=OTe,MTe=pu;function DTe(t){return t===t&&!MTe(t)}var wK=DTe,LTe=wK,$Te=Gj;function FTe(t){for(var e=$Te(t),n=e.length;n--;){var r=e[n],s=t[r];e[n]=[r,s,LTe(s)]}return e}var VTe=FTe;function BTe(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var _K=BTe,UTe=RTe,zTe=VTe,qTe=_K;function WTe(t){var e=zTe(t);return e.length==1&&e[0][2]?qTe(e[0][0],e[0][1]):function(n){return n===t||UTe(n,t,e)}}var HTe=WTe;function KTe(t,e){return t!=null&&e in Object(t)}var GTe=KTe,YTe=PH,QTe=Fk,XTe=ra,ZTe=Vk,JTe=Bk,eCe=Oj;function tCe(t,e,n){e=YTe(e,t);for(var r=-1,s=e.length,i=!1;++r<s;){var o=eCe(e[r]);if(!(i=t!=null&&n(t,o)))break;t=t[o]}return i||++r!=s?i:(s=t==null?0:t.length,!!s&&JTe(s)&&ZTe(o,s)&&(XTe(t)||QTe(t)))}var nCe=tCe,rCe=GTe,sCe=nCe;function aCe(t,e){return t!=null&&sCe(t,e,rCe)}var iCe=aCe,oCe=Uk,lCe=IH,cCe=iCe,uCe=wk,dCe=wK,hCe=_K,fCe=Oj,mCe=1,pCe=2;function gCe(t,e){return uCe(t)&&dCe(e)?hCe(fCe(t),e):function(n){var r=lCe(n,t);return r===void 0&&r===e?cCe(n,t):oCe(e,r,mCe|pCe)}}var yCe=gCe;function vCe(t){return t}var op=vCe;function xCe(t){return function(e){return e==null?void 0:e[t]}}var bCe=xCe,wCe=Tk;function _Ce(t){return function(e){return wCe(e,t)}}var jCe=_Ce,NCe=bCe,SCe=jCe,ECe=wk,ACe=Oj;function TCe(t){return ECe(t)?NCe(ACe(t)):SCe(t)}var CCe=TCe,PCe=HTe,ICe=yCe,kCe=op,OCe=ra,RCe=CCe;function MCe(t){return typeof t=="function"?t:t==null?kCe:typeof t=="object"?OCe(t)?ICe(t[0],t[1]):PCe(t):RCe(t)}var Io=MCe;function DCe(t,e,n,r){for(var s=t.length,i=n+(r?1:-1);r?i--:++i<s;)if(e(t[i],i,t))return i;return-1}var jK=DCe;function LCe(t){return t!==t}var $Ce=LCe;function FCe(t,e,n){for(var r=n-1,s=t.length;++r<s;)if(t[r]===e)return r;return-1}var VCe=FCe,BCe=jK,UCe=$Ce,zCe=VCe;function qCe(t,e,n){return e===e?zCe(t,e,n):BCe(t,UCe,n)}var WCe=qCe,HCe=WCe;function KCe(t,e){var n=t==null?0:t.length;return!!n&&HCe(t,e,0)>-1}var GCe=KCe;function YCe(t,e,n){for(var r=-1,s=t==null?0:t.length;++r<s;)if(n(e,t[r]))return!0;return!1}var QCe=YCe;function XCe(){}var ZCe=XCe,iS=vK,JCe=ZCe,ePe=$k,tPe=1/0,nPe=iS&&1/ePe(new iS([,-0]))[1]==tPe?function(t){return new iS(t)}:JCe,rPe=nPe,sPe=lK,aPe=GCe,iPe=QCe,oPe=uK,lPe=rPe,cPe=$k,uPe=200;function dPe(t,e,n){var r=-1,s=aPe,i=t.length,o=!0,l=[],c=l;if(n)o=!1,s=iPe;else if(i>=uPe){var u=e?null:lPe(t);if(u)return cPe(u);o=!1,s=oPe,c=new sPe}else c=e?[]:l;e:for(;++r<i;){var d=t[r],h=e?e(d):d;if(d=n||d!==0?d:0,o&&h===h){for(var f=c.length;f--;)if(c[f]===h)continue e;e&&c.push(h),l.push(d)}else s(c,h,n)||(c!==l&&c.push(h),l.push(d))}return l}var hPe=dPe,fPe=Io,mPe=hPe;function pPe(t,e){return t&&t.length?mPe(t,fPe(e)):[]}var gPe=pPe;const CL=pn(gPe);function NK(t,e,n){return e===!0?CL(t,n):wt(e)?CL(t,e):t}function rm(t){"@babel/helpers - typeof";return rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rm(t)}var yPe=["ref"];function PL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ro(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PL(Object(n),!0).forEach(function(r){Yj(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,EK(r.key),r)}}function xPe(t,e,n){return e&&IL(t.prototype,e),n&&IL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function bPe(t,e,n){return e=dw(e),wPe(t,SK()?Reflect.construct(e,n||[],dw(t).constructor):e.apply(t,n))}function wPe(t,e){if(e&&(rm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Pe(t)}function _Pe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function SK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SK=function(){return!!t})()}function dw(t){return dw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dw(t)}function jPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uT(t,e)}function uT(t,e){return uT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},uT(t,e)}function Yj(t,e,n){return e=EK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EK(t){var e=NPe(t,"string");return rm(e)=="symbol"?e:e+""}function NPe(t,e){if(rm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(rm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function SPe(t,e){if(t==null)return{};var n=EPe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function EPe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function APe(t){return t.value}function TPe(t,e){if(D.isValidElement(t))return D.cloneElement(t,e);if(typeof t=="function")return D.createElement(t,e);e.ref;var n=SPe(e,yPe);return D.createElement(Lk,n)}var kL=1,pf=function(t){function e(){var n;vPe(this,e);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=bPe(this,e,[].concat(s)),Yj(n,"lastBoundingBox",{width:-1,height:-1}),n}return jPe(e,t),xPe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>kL||Math.abs(s.height-this.lastBoundingBox.height)>kL)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,r&&r(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ro({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,c=s.margin,u=s.chartWidth,d=s.chartHeight,h,f;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&i==="vertical"){var m=this.getBBoxSnapshot();h={left:((u||0)-m.width)/2}}else h=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var b=this.getBBoxSnapshot();f={top:((d||0)-b.height)/2}}else f=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Ro(Ro({},h),f)}},{key:"render",value:function(){var r=this,s=this.props,i=s.content,o=s.width,l=s.height,c=s.wrapperStyle,u=s.payloadUniqBy,d=s.payload,h=Ro(Ro({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return D.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(m){r.wrapperNode=m}},TPe(i,Ro(Ro({},this.props),{},{payload:NK(d,u,APe)})))}}],[{key:"getWithHeight",value:function(r,s){var i=Ro(Ro({},this.defaultProps),r.props),o=i.layout;return o==="vertical"&&Ee(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||s}:null}}])}(N.PureComponent);Yj(pf,"displayName","Legend");Yj(pf,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var OL=Qv,CPe=Fk,PPe=ra,RL=OL?OL.isConcatSpreadable:void 0;function IPe(t){return PPe(t)||CPe(t)||!!(RL&&t&&t[RL])}var kPe=IPe,OPe=hK,RPe=kPe;function AK(t,e,n,r,s){var i=-1,o=t.length;for(n||(n=RPe),s||(s=[]);++i<o;){var l=t[i];e>0&&n(l)?e>1?AK(l,e-1,n,r,s):OPe(s,l):r||(s[s.length]=l)}return s}var TK=AK;function MPe(t){return function(e,n,r){for(var s=-1,i=Object(e),o=r(e),l=o.length;l--;){var c=o[t?l:++s];if(n(i[c],c,i)===!1)break}return e}}var DPe=MPe,LPe=DPe,$Pe=LPe(),FPe=$Pe,VPe=FPe,BPe=Gj;function UPe(t,e){return t&&VPe(t,e,BPe)}var CK=UPe,zPe=Xv;function qPe(t,e){return function(n,r){if(n==null)return n;if(!zPe(n))return t(n,r);for(var s=n.length,i=e?s:-1,o=Object(n);(e?i--:++i<s)&&r(o[i],i,o)!==!1;);return n}}var WPe=qPe,HPe=CK,KPe=WPe,GPe=KPe(HPe),zk=GPe,YPe=zk,QPe=Xv;function XPe(t,e){var n=-1,r=QPe(t)?Array(t.length):[];return YPe(t,function(s,i,o){r[++n]=e(s,i,o)}),r}var PK=XPe;function ZPe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var JPe=ZPe,ML=Zm;function eIe(t,e){if(t!==e){var n=t!==void 0,r=t===null,s=t===t,i=ML(t),o=e!==void 0,l=e===null,c=e===e,u=ML(e);if(!l&&!u&&!i&&t>e||i&&o&&c&&!l&&!u||r&&o&&c||!n&&c||!s)return 1;if(!r&&!i&&!u&&t<e||u&&n&&s&&!r&&!i||l&&n&&s||!o&&s||!c)return-1}return 0}var tIe=eIe,nIe=tIe;function rIe(t,e,n){for(var r=-1,s=t.criteria,i=e.criteria,o=s.length,l=n.length;++r<o;){var c=nIe(s[r],i[r]);if(c){if(r>=l)return c;var u=n[r];return c*(u=="desc"?-1:1)}}return t.index-e.index}var sIe=rIe,oS=Ak,aIe=Tk,iIe=Io,oIe=PK,lIe=JPe,cIe=pK,uIe=sIe,dIe=op,hIe=ra;function fIe(t,e,n){e.length?e=oS(e,function(i){return hIe(i)?function(o){return aIe(o,i.length===1?i[0]:i)}:i}):e=[dIe];var r=-1;e=oS(e,cIe(iIe));var s=oIe(t,function(i,o,l){var c=oS(e,function(u){return u(i)});return{criteria:c,index:++r,value:i}});return lIe(s,function(i,o){return uIe(i,o,n)})}var mIe=fIe;function pIe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var gIe=pIe,yIe=gIe,DL=Math.max;function vIe(t,e,n){return e=DL(e===void 0?t.length-1:e,0),function(){for(var r=arguments,s=-1,i=DL(r.length-e,0),o=Array(i);++s<i;)o[s]=r[e+s];s=-1;for(var l=Array(e+1);++s<e;)l[s]=r[s];return l[e]=n(o),yIe(t,this,l)}}var xIe=vIe;function bIe(t){return function(){return t}}var wIe=bIe,_Ie=nh,jIe=function(){try{var t=_Ie(Object,"defineProperty");return t({},"",{}),t}catch{}}(),IK=jIe,NIe=wIe,LL=IK,SIe=op,EIe=LL?function(t,e){return LL(t,"toString",{configurable:!0,enumerable:!1,value:NIe(e),writable:!0})}:SIe,AIe=EIe,TIe=800,CIe=16,PIe=Date.now;function IIe(t){var e=0,n=0;return function(){var r=PIe(),s=CIe-(r-n);if(n=r,s>0){if(++e>=TIe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var kIe=IIe,OIe=AIe,RIe=kIe,MIe=RIe(OIe),DIe=MIe,LIe=op,$Ie=xIe,FIe=DIe;function VIe(t,e){return FIe($Ie(t,e,LIe),t+"")}var BIe=VIe,UIe=jk,zIe=Xv,qIe=Vk,WIe=pu;function HIe(t,e,n){if(!WIe(n))return!1;var r=typeof e;return(r=="number"?zIe(n)&&qIe(e,n.length):r=="string"&&e in n)?UIe(n[e],t):!1}var Qj=HIe,KIe=TK,GIe=mIe,YIe=BIe,$L=Qj,QIe=YIe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&$L(t,e[0],e[1])?e=[]:n>2&&$L(e[0],e[1],e[2])&&(e=[e[0]]),GIe(t,KIe(e,1),[])}),XIe=QIe;const qk=pn(XIe);function Cy(t){"@babel/helpers - typeof";return Cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cy(t)}function dT(){return dT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dT.apply(this,arguments)}function ZIe(t,e){return nke(t)||tke(t,e)||eke(t,e)||JIe()}function JIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eke(t,e){if(t){if(typeof t=="string")return FL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FL(t,e)}}function FL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function tke(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function nke(t){if(Array.isArray(t))return t}function VL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function lS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VL(Object(n),!0).forEach(function(r){rke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rke(t,e,n){return e=ske(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ske(t){var e=ake(t,"string");return Cy(e)=="symbol"?e:e+""}function ake(t,e){if(Cy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Cy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ike(t){return Array.isArray(t)&&Rr(t[0])&&Rr(t[1])?t.join(" ~ "):t}var oke=function(e){var n=e.separator,r=n===void 0?" : ":n,s=e.contentStyle,i=s===void 0?{}:s,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,u=c===void 0?{}:c,d=e.payload,h=e.formatter,f=e.itemSorter,m=e.wrapperClassName,b=e.labelClassName,g=e.label,x=e.labelFormatter,w=e.accessibilityLayer,y=w===void 0?!1:w,A=function(){if(d&&d.length){var I={padding:0,margin:0},O=(f?qk(d,f):d).map(function($,z){if($.type==="none")return null;var H=lS({display:"block",paddingTop:4,paddingBottom:4,color:$.color||"#000"},l),M=$.formatter||h||ike,F=$.value,L=$.name,W=F,ie=L;if(M&&W!=null&&ie!=null){var oe=M(F,L,$,z,d);if(Array.isArray(oe)){var me=ZIe(oe,2);W=me[0],ie=me[1]}else W=oe}return D.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:H},Rr(ie)?D.createElement("span",{className:"recharts-tooltip-item-name"},ie):null,Rr(ie)?D.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,D.createElement("span",{className:"recharts-tooltip-item-value"},W),D.createElement("span",{className:"recharts-tooltip-item-unit"},$.unit||""))});return D.createElement("ul",{className:"recharts-tooltip-item-list",style:I},O)}return null},T=lS({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),v=lS({margin:0},u),S=!$t(g),j=S?g:"",p=Lt("recharts-default-tooltip",m),E=Lt("recharts-tooltip-label",b);S&&x&&d!==void 0&&d!==null&&(j=x(g,d));var P=y?{role:"status","aria-live":"assertive"}:{};return D.createElement("div",dT({className:p,style:T},P),D.createElement("p",{className:E,style:v},D.isValidElement(j)?j:"".concat(j)),A())};function Py(t){"@babel/helpers - typeof";return Py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Py(t)}function Zx(t,e,n){return e=lke(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lke(t){var e=cke(t,"string");return Py(e)=="symbol"?e:e+""}function cke(t,e){if(Py(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Py(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $p="recharts-tooltip-wrapper",uke={visibility:"hidden"};function dke(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return Lt($p,Zx(Zx(Zx(Zx({},"".concat($p,"-right"),Ee(n)&&e&&Ee(e.x)&&n>=e.x),"".concat($p,"-left"),Ee(n)&&e&&Ee(e.x)&&n<e.x),"".concat($p,"-bottom"),Ee(r)&&e&&Ee(e.y)&&r>=e.y),"".concat($p,"-top"),Ee(r)&&e&&Ee(e.y)&&r<e.y))}function BL(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,s=t.offsetTopLeft,i=t.position,o=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,u=t.viewBoxDimension;if(i&&Ee(i[r]))return i[r];var d=n[r]-l-s,h=n[r]+s;if(e[r])return o[r]?d:h;if(o[r]){var f=d,m=c[r];return f<m?Math.max(h,c[r]):Math.max(d,c[r])}var b=h+l,g=c[r]+u;return b>g?Math.max(d,c[r]):Math.max(h,c[r])}function hke(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function fke(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,s=t.position,i=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,u,d,h;return o.height>0&&o.width>0&&n?(d=BL({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=BL({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=hke({translateX:d,translateY:h,useTranslate3d:l})):u=uke,{cssProperties:u,cssClasses:dke({translateX:d,translateY:h,coordinate:n})}}function sm(t){"@babel/helpers - typeof";return sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sm(t)}function UL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function zL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UL(Object(n),!0).forEach(function(r){fT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,OK(r.key),r)}}function gke(t,e,n){return e&&pke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function yke(t,e,n){return e=hw(e),vke(t,kK()?Reflect.construct(e,n||[],hw(t).constructor):e.apply(t,n))}function vke(t,e){if(e&&(sm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xke(t)}function xke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kK=function(){return!!t})()}function hw(t){return hw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hw(t)}function bke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hT(t,e)}function hT(t,e){return hT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},hT(t,e)}function fT(t,e,n){return e=OK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OK(t){var e=wke(t,"string");return sm(e)=="symbol"?e:e+""}function wke(t,e){if(sm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(sm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qL=1,_ke=function(t){function e(){var n;mke(this,e);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=yke(this,e,[].concat(s)),fT(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),fT(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return bke(e,t),gke(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>qL||Math.abs(r.height-this.state.lastBoundingBox.height)>qL)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.children,d=s.coordinate,h=s.hasPayload,f=s.isAnimationActive,m=s.offset,b=s.position,g=s.reverseDirection,x=s.useTranslate3d,w=s.viewBox,y=s.wrapperStyle,A=fke({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:m,position:b,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:w}),T=A.cssClasses,v=A.cssProperties,S=zL(zL({transition:f&&i?"transform ".concat(l,"ms ").concat(c):void 0},v),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&h?"visible":"hidden",position:"absolute",top:0,left:0},y);return D.createElement("div",{tabIndex:-1,className:T,style:S,ref:function(p){r.wrapperNode=p}},u)}}])}(N.PureComponent),jke=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},po={isSsr:jke(),get:function(e){return po[e]},set:function(e,n){if(typeof e=="string")po[e]=n;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(s){po[s]=e[s]})}}};function am(t){"@babel/helpers - typeof";return am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},am(t)}function WL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function HL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WL(Object(n),!0).forEach(function(r){Wk(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ske(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,MK(r.key),r)}}function Eke(t,e,n){return e&&Ske(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ake(t,e,n){return e=fw(e),Tke(t,RK()?Reflect.construct(e,n||[],fw(t).constructor):e.apply(t,n))}function Tke(t,e){if(e&&(am(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cke(t)}function Cke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RK=function(){return!!t})()}function fw(t){return fw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fw(t)}function Pke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mT(t,e)}function mT(t,e){return mT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},mT(t,e)}function Wk(t,e,n){return e=MK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MK(t){var e=Ike(t,"string");return am(e)=="symbol"?e:e+""}function Ike(t,e){if(am(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(am(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kke(t){return t.dataKey}function Oke(t,e){return D.isValidElement(t)?D.cloneElement(t,e):typeof t=="function"?D.createElement(t,e):D.createElement(oke,e)}var vi=function(t){function e(){return Nke(this,e),Ake(this,e,arguments)}return Pke(e,t),Eke(e,[{key:"render",value:function(){var r=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.content,d=s.coordinate,h=s.filterNull,f=s.isAnimationActive,m=s.offset,b=s.payload,g=s.payloadUniqBy,x=s.position,w=s.reverseDirection,y=s.useTranslate3d,A=s.viewBox,T=s.wrapperStyle,v=b??[];h&&v.length&&(v=NK(b.filter(function(j){return j.value!=null&&(j.hide!==!0||r.props.includeHidden)}),g,kke));var S=v.length>0;return D.createElement(_ke,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:f,active:i,coordinate:d,hasPayload:S,offset:m,position:x,reverseDirection:w,useTranslate3d:y,viewBox:A,wrapperStyle:T},Oke(u,HL(HL({},this.props),{},{payload:v})))}}])}(N.PureComponent);Wk(vi,"displayName","Tooltip");Wk(vi,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!po.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Rke=Po,Mke=function(){return Rke.Date.now()},Dke=Mke,Lke=/\s/;function $ke(t){for(var e=t.length;e--&&Lke.test(t.charAt(e)););return e}var Fke=$ke,Vke=Fke,Bke=/^\s+/;function Uke(t){return t&&t.slice(0,Vke(t)+1).replace(Bke,"")}var zke=Uke,qke=zke,KL=pu,Wke=Zm,GL=NaN,Hke=/^[-+]0x[0-9a-f]+$/i,Kke=/^0b[01]+$/i,Gke=/^0o[0-7]+$/i,Yke=parseInt;function Qke(t){if(typeof t=="number")return t;if(Wke(t))return GL;if(KL(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=KL(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=qke(t);var n=Kke.test(t);return n||Gke.test(t)?Yke(t.slice(2),n?2:8):Hke.test(t)?GL:+t}var DK=Qke,Xke=pu,cS=Dke,YL=DK,Zke="Expected a function",Jke=Math.max,eOe=Math.min;function tOe(t,e,n){var r,s,i,o,l,c,u=0,d=!1,h=!1,f=!0;if(typeof t!="function")throw new TypeError(Zke);e=YL(e)||0,Xke(n)&&(d=!!n.leading,h="maxWait"in n,i=h?Jke(YL(n.maxWait)||0,e):i,f="trailing"in n?!!n.trailing:f);function m(S){var j=r,p=s;return r=s=void 0,u=S,o=t.apply(p,j),o}function b(S){return u=S,l=setTimeout(w,e),d?m(S):o}function g(S){var j=S-c,p=S-u,E=e-j;return h?eOe(E,i-p):E}function x(S){var j=S-c,p=S-u;return c===void 0||j>=e||j<0||h&&p>=i}function w(){var S=cS();if(x(S))return y(S);l=setTimeout(w,g(S))}function y(S){return l=void 0,f&&r?m(S):(r=s=void 0,o)}function A(){l!==void 0&&clearTimeout(l),u=0,r=c=s=l=void 0}function T(){return l===void 0?o:y(cS())}function v(){var S=cS(),j=x(S);if(r=arguments,s=this,c=S,j){if(l===void 0)return b(c);if(h)return clearTimeout(l),l=setTimeout(w,e),m(c)}return l===void 0&&(l=setTimeout(w,e)),o}return v.cancel=A,v.flush=T,v}var nOe=tOe,rOe=nOe,sOe=pu,aOe="Expected a function";function iOe(t,e,n){var r=!0,s=!0;if(typeof t!="function")throw new TypeError(aOe);return sOe(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),rOe(t,e,{leading:r,maxWait:e,trailing:s})}var oOe=iOe;const LK=pn(oOe);function Iy(t){"@babel/helpers - typeof";return Iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iy(t)}function QL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Jx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QL(Object(n),!0).forEach(function(r){lOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lOe(t,e,n){return e=cOe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cOe(t){var e=uOe(t,"string");return Iy(e)=="symbol"?e:e+""}function uOe(t,e){if(Iy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Iy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dOe(t,e){return pOe(t)||mOe(t,e)||fOe(t,e)||hOe()}function hOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fOe(t,e){if(t){if(typeof t=="string")return XL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XL(t,e)}}function XL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mOe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function pOe(t){if(Array.isArray(t))return t}var uS=N.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,s=r===void 0?{width:-1,height:-1}:r,i=t.width,o=i===void 0?"100%":i,l=t.height,c=l===void 0?"100%":l,u=t.minWidth,d=u===void 0?0:u,h=t.minHeight,f=t.maxHeight,m=t.children,b=t.debounce,g=b===void 0?0:b,x=t.id,w=t.className,y=t.onResize,A=t.style,T=A===void 0?{}:A,v=N.useRef(null),S=N.useRef();S.current=y,N.useImperativeHandle(e,function(){return Object.defineProperty(v.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),v.current},configurable:!0})});var j=N.useState({containerWidth:s.width,containerHeight:s.height}),p=dOe(j,2),E=p[0],P=p[1],C=N.useCallback(function(O,$){P(function(z){var H=Math.round(O),M=Math.round($);return z.containerWidth===H&&z.containerHeight===M?z:{containerWidth:H,containerHeight:M}})},[]);N.useEffect(function(){var O=function(L){var W,ie=L[0].contentRect,oe=ie.width,me=ie.height;C(oe,me),(W=S.current)===null||W===void 0||W.call(S,oe,me)};g>0&&(O=LK(O,g,{trailing:!0,leading:!1}));var $=new ResizeObserver(O),z=v.current.getBoundingClientRect(),H=z.width,M=z.height;return C(H,M),$.observe(v.current),function(){$.disconnect()}},[C,g]);var I=N.useMemo(function(){var O=E.containerWidth,$=E.containerHeight;if(O<0||$<0)return null;Ci(Uu(o)||Uu(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Ci(!n||n>0,"The aspect(%s) must be greater than zero.",n);var z=Uu(o)?O:o,H=Uu(c)?$:c;n&&n>0&&(z?H=z/n:H&&(z=H*n),f&&H>f&&(H=f)),Ci(z>0||H>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,z,H,o,c,d,h,n);var M=!Array.isArray(m)&&Jo(m.type).endsWith("Chart");return D.Children.map(m,function(F){return D.isValidElement(F)?N.cloneElement(F,Jx({width:z,height:H},M?{style:Jx({height:"100%",width:"100%",maxHeight:H,maxWidth:z},F.props.style)}:{})):F})},[n,m,c,f,h,d,E,o]);return D.createElement("div",{id:x?"".concat(x):void 0,className:Lt("recharts-responsive-container",w),style:Jx(Jx({},T),{},{width:o,height:c,minWidth:d,minHeight:h,maxHeight:f}),ref:v},I)}),Xj=function(e){return null};Xj.displayName="Cell";function ky(t){"@babel/helpers - typeof";return ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ky(t)}function ZL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function pT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZL(Object(n),!0).forEach(function(r){gOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gOe(t,e,n){return e=yOe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yOe(t){var e=vOe(t,"string");return ky(e)=="symbol"?e:e+""}function vOe(t,e){if(ky(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ky(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gh={widthCache:{},cacheCount:0},xOe=2e3,bOe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},JL="recharts_measurement_span";function wOe(t){var e=pT({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var kg=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||po.isSsr)return{width:0,height:0};var r=wOe(n),s=JSON.stringify({text:e,copyStyle:r});if(gh.widthCache[s])return gh.widthCache[s];try{var i=document.getElementById(JL);i||(i=document.createElement("span"),i.setAttribute("id",JL),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=pT(pT({},bOe),r);Object.assign(i.style,o),i.textContent="".concat(e);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return gh.widthCache[s]=c,++gh.cacheCount>xOe&&(gh.cacheCount=0,gh.widthCache={}),c}catch{return{width:0,height:0}}},_Oe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Oy(t){"@babel/helpers - typeof";return Oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oy(t)}function mw(t,e){return EOe(t)||SOe(t,e)||NOe(t,e)||jOe()}function jOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NOe(t,e){if(t){if(typeof t=="string")return e$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e$(t,e)}}function e$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function SOe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function EOe(t){if(Array.isArray(t))return t}function AOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function t$(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,COe(r.key),r)}}function TOe(t,e,n){return e&&t$(t.prototype,e),n&&t$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function COe(t){var e=POe(t,"string");return Oy(e)=="symbol"?e:e+""}function POe(t,e){if(Oy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Oy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var n$=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,r$=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,IOe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,kOe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,$K={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},OOe=Object.keys($K),qh="NaN";function ROe(t,e){return t*$K[e]}var eb=function(){function t(e,n){AOe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!IOe.test(n)&&(this.num=NaN,this.unit=""),OOe.includes(n)&&(this.num=ROe(e,n),this.unit="px")}return TOe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,s=(r=kOe.exec(n))!==null&&r!==void 0?r:[],i=mw(s,3),o=i[1],l=i[2];return new t(parseFloat(o),l??"")}}])}();function FK(t){if(t.includes(qh))return qh;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=n$.exec(e))!==null&&n!==void 0?n:[],s=mw(r,4),i=s[1],o=s[2],l=s[3],c=eb.parse(i??""),u=eb.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return qh;e=e.replace(n$,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,f=(h=r$.exec(e))!==null&&h!==void 0?h:[],m=mw(f,4),b=m[1],g=m[2],x=m[3],w=eb.parse(b??""),y=eb.parse(x??""),A=g==="+"?w.add(y):w.subtract(y);if(A.isNaN())return qh;e=e.replace(r$,A.toString())}return e}var s$=/\(([^()]*)\)/;function MOe(t){for(var e=t;e.includes("(");){var n=s$.exec(e),r=mw(n,2),s=r[1];e=e.replace(s$,FK(s))}return e}function DOe(t){var e=t.replace(/\s+/g,"");return e=MOe(e),e=FK(e),e}function LOe(t){try{return DOe(t)}catch{return qh}}function dS(t){var e=LOe(t.slice(5,-1));return e===qh?"":e}var $Oe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],FOe=["dx","dy","angle","className","breakAll"];function gT(){return gT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gT.apply(this,arguments)}function a$(t,e){if(t==null)return{};var n=VOe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function VOe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function i$(t,e){return qOe(t)||zOe(t,e)||UOe(t,e)||BOe()}function BOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UOe(t,e){if(t){if(typeof t=="string")return o$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o$(t,e)}}function o$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zOe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function qOe(t){if(Array.isArray(t))return t}var VK=/[ \f\n\r\t\v\u2028\u2029]+/,BK=function(e){var n=e.children,r=e.breakAll,s=e.style;try{var i=[];$t(n)||(r?i=n.toString().split(""):i=n.toString().split(VK));var o=i.map(function(c){return{word:c,width:kg(c,s).width}}),l=r?0:kg("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},WOe=function(e,n,r,s,i){var o=e.maxLines,l=e.children,c=e.style,u=e.breakAll,d=Ee(o),h=l,f=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return z.reduce(function(H,M){var F=M.word,L=M.width,W=H[H.length-1];if(W&&(s==null||i||W.width+L+r<Number(s)))W.words.push(F),W.width+=L+r;else{var ie={words:[F],width:L};H.push(ie)}return H},[])},m=f(n),b=function(z){return z.reduce(function(H,M){return H.width>M.width?H:M})};if(!d)return m;for(var g="",x=function(z){var H=h.slice(0,z),M=BK({breakAll:u,style:c,children:H+g}).wordsWithComputedWidth,F=f(M),L=F.length>o||b(F).width>Number(s);return[L,F]},w=0,y=h.length-1,A=0,T;w<=y&&A<=h.length-1;){var v=Math.floor((w+y)/2),S=v-1,j=x(S),p=i$(j,2),E=p[0],P=p[1],C=x(v),I=i$(C,1),O=I[0];if(!E&&!O&&(w=v+1),E&&O&&(y=v-1),!E&&O){T=P;break}A++}return T||m},l$=function(e){var n=$t(e)?[]:e.toString().split(VK);return[{words:n}]},HOe=function(e){var n=e.width,r=e.scaleToFit,s=e.children,i=e.style,o=e.breakAll,l=e.maxLines;if((n||r)&&!po.isSsr){var c,u,d=BK({breakAll:o,children:s,style:i});if(d){var h=d.wordsWithComputedWidth,f=d.spaceWidth;c=h,u=f}else return l$(s);return WOe({breakAll:o,children:s,maxLines:l,style:i},c,u,n,r)}return l$(s)},c$="#808080",Vd=function(e){var n=e.x,r=n===void 0?0:n,s=e.y,i=s===void 0?0:s,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,u=c===void 0?"0.71em":c,d=e.scaleToFit,h=d===void 0?!1:d,f=e.textAnchor,m=f===void 0?"start":f,b=e.verticalAnchor,g=b===void 0?"end":b,x=e.fill,w=x===void 0?c$:x,y=a$(e,$Oe),A=N.useMemo(function(){return HOe({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:h,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,h,y.style,y.width]),T=y.dx,v=y.dy,S=y.angle,j=y.className,p=y.breakAll,E=a$(y,FOe);if(!Rr(r)||!Rr(i))return null;var P=r+(Ee(T)?T:0),C=i+(Ee(v)?v:0),I;switch(g){case"start":I=dS("calc(".concat(u,")"));break;case"middle":I=dS("calc(".concat((A.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:I=dS("calc(".concat(A.length-1," * -").concat(l,")"));break}var O=[];if(h){var $=A[0].width,z=y.width;O.push("scale(".concat((Ee(z)?z/$:1)/$,")"))}return S&&O.push("rotate(".concat(S,", ").concat(P,", ").concat(C,")")),O.length&&(E.transform=O.join(" ")),D.createElement("text",gT({},ft(E,!0),{x:P,y:C,className:Lt("recharts-text",j),textAnchor:m,fill:w.includes("url")?c$:w}),A.map(function(H,M){var F=H.words.join(p?"":" ");return D.createElement("tspan",{x:P,dy:M===0?I:l,key:"".concat(F,"-").concat(M)},F)}))};function Lc(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function KOe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Hk(t){let e,n,r;t.length!==2?(e=Lc,n=(l,c)=>Lc(t(l),c),r=(l,c)=>t(l)-c):(e=t===Lc||t===KOe?t:GOe,n=t,r=t);function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;n(l[h],c)<0?u=h+1:d=h}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;n(l[h],c)<=0?u=h+1:d=h}while(u<d)}return u}function o(l,c,u=0,d=l.length){const h=s(l,c,u,d-1);return h>u&&r(l[h-1],c)>-r(l[h],c)?h-1:h}return{left:s,center:o,right:i}}function GOe(){return 0}function UK(t){return t===null?NaN:+t}function*YOe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const QOe=Hk(Lc),Zv=QOe.right;Hk(UK).center;class u$ extends Map{constructor(e,n=JOe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,s]of e)this.set(r,s)}get(e){return super.get(d$(this,e))}has(e){return super.has(d$(this,e))}set(e,n){return super.set(XOe(this,e),n)}delete(e){return super.delete(ZOe(this,e))}}function d$({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function XOe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function ZOe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function JOe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function e2e(t=Lc){if(t===Lc)return zK;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function zK(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const t2e=Math.sqrt(50),n2e=Math.sqrt(10),r2e=Math.sqrt(2);function pw(t,e,n){const r=(e-t)/Math.max(0,n),s=Math.floor(Math.log10(r)),i=r/Math.pow(10,s),o=i>=t2e?10:i>=n2e?5:i>=r2e?2:1;let l,c,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,s)*o,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=n&&n<2?pw(t,e,n*2):[l,c,u]}function yT(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[s,i,o]=r?pw(e,t,n):pw(t,e,n);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(r)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(s+u)/-o;else for(let u=0;u<l;++u)c[u]=(s+u)*o;return c}function vT(t,e,n){return e=+e,t=+t,n=+n,pw(t,e,n)[2]}function xT(t,e,n){e=+e,t=+t,n=+n;const r=e<t,s=r?vT(e,t,n):vT(t,e,n);return(r?-1:1)*(s<0?1/-s:s)}function h$(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function f$(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function qK(t,e,n=0,r=1/0,s){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(s=s===void 0?zK:e2e(s);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,d=Math.log(c),h=.5*Math.exp(2*d/3),f=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),m=Math.max(n,Math.floor(e-u*h/c+f)),b=Math.min(r,Math.floor(e+(c-u)*h/c+f));qK(t,e,m,b,s)}const i=t[e];let o=n,l=r;for(Fp(t,n,e),s(t[r],i)>0&&Fp(t,n,r);o<l;){for(Fp(t,o,l),++o,--l;s(t[o],i)<0;)++o;for(;s(t[l],i)>0;)--l}s(t[n],i)===0?Fp(t,n,l):(++l,Fp(t,l,r)),l<=e&&(n=l+1),e<=l&&(r=l-1)}return t}function Fp(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function s2e(t,e,n){if(t=Float64Array.from(YOe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return f$(t);if(e>=1)return h$(t);var r,s=(r-1)*e,i=Math.floor(s),o=h$(qK(t,i).subarray(0,i+1)),l=f$(t.subarray(i+1));return o+(l-o)*(s-i)}}function a2e(t,e,n=UK){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,s=(r-1)*e,i=Math.floor(s),o=+n(t[i],i,t),l=+n(t[i+1],i+1,t);return o+(l-o)*(s-i)}}function i2e(t,e,n){t=+t,e=+e,n=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((e-t)/n))|0,i=new Array(s);++r<s;)i[r]=t+r*n;return i}function ii(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Sl(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const bT=Symbol("implicit");function Kk(){var t=new u$,e=[],n=[],r=bT;function s(i){let o=t.get(i);if(o===void 0){if(r!==bT)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return s.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new u$;for(const o of i)t.has(o)||t.set(o,e.push(o)-1);return s},s.range=function(i){return arguments.length?(n=Array.from(i),s):n.slice()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return Kk(e,n).unknown(r)},ii.apply(s,arguments),s}function Ry(){var t=Kk().unknown(void 0),e=t.domain,n=t.range,r=0,s=1,i,o,l=!1,c=0,u=0,d=.5;delete t.unknown;function h(){var f=e().length,m=s<r,b=m?s:r,g=m?r:s;i=(g-b)/Math.max(1,f-c+u*2),l&&(i=Math.floor(i)),b+=(g-b-i*(f-c))*d,o=i*(1-c),l&&(b=Math.round(b),o=Math.round(o));var x=i2e(f).map(function(w){return b+i*w});return n(m?x.reverse():x)}return t.domain=function(f){return arguments.length?(e(f),h()):e()},t.range=function(f){return arguments.length?([r,s]=f,r=+r,s=+s,h()):[r,s]},t.rangeRound=function(f){return[r,s]=f,r=+r,s=+s,l=!0,h()},t.bandwidth=function(){return o},t.step=function(){return i},t.round=function(f){return arguments.length?(l=!!f,h()):l},t.padding=function(f){return arguments.length?(c=Math.min(1,u=+f),h()):c},t.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},t.paddingOuter=function(f){return arguments.length?(u=+f,h()):u},t.align=function(f){return arguments.length?(d=Math.max(0,Math.min(1,f)),h()):d},t.copy=function(){return Ry(e(),[r,s]).round(l).paddingInner(c).paddingOuter(u).align(d)},ii.apply(h(),arguments)}function WK(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return WK(e())},t}function Og(){return WK(Ry.apply(null,arguments).paddingInner(1))}function Gk(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function HK(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Jv(){}var My=.7,gw=1/My,gf="\\s*([+-]?\\d+)\\s*",Dy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",go="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",o2e=/^#([0-9a-f]{3,8})$/,l2e=new RegExp(`^rgb\\(${gf},${gf},${gf}\\)$`),c2e=new RegExp(`^rgb\\(${go},${go},${go}\\)$`),u2e=new RegExp(`^rgba\\(${gf},${gf},${gf},${Dy}\\)$`),d2e=new RegExp(`^rgba\\(${go},${go},${go},${Dy}\\)$`),h2e=new RegExp(`^hsl\\(${Dy},${go},${go}\\)$`),f2e=new RegExp(`^hsla\\(${Dy},${go},${go},${Dy}\\)$`),m$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gk(Jv,Ly,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:p$,formatHex:p$,formatHex8:m2e,formatHsl:p2e,formatRgb:g$,toString:g$});function p$(){return this.rgb().formatHex()}function m2e(){return this.rgb().formatHex8()}function p2e(){return KK(this).formatHsl()}function g$(){return this.rgb().formatRgb()}function Ly(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=o2e.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?y$(e):n===3?new Zs(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?tb(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?tb(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=l2e.exec(t))?new Zs(e[1],e[2],e[3],1):(e=c2e.exec(t))?new Zs(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=u2e.exec(t))?tb(e[1],e[2],e[3],e[4]):(e=d2e.exec(t))?tb(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=h2e.exec(t))?b$(e[1],e[2]/100,e[3]/100,1):(e=f2e.exec(t))?b$(e[1],e[2]/100,e[3]/100,e[4]):m$.hasOwnProperty(t)?y$(m$[t]):t==="transparent"?new Zs(NaN,NaN,NaN,0):null}function y$(t){return new Zs(t>>16&255,t>>8&255,t&255,1)}function tb(t,e,n,r){return r<=0&&(t=e=n=NaN),new Zs(t,e,n,r)}function g2e(t){return t instanceof Jv||(t=Ly(t)),t?(t=t.rgb(),new Zs(t.r,t.g,t.b,t.opacity)):new Zs}function wT(t,e,n,r){return arguments.length===1?g2e(t):new Zs(t,e,n,r??1)}function Zs(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Gk(Zs,wT,HK(Jv,{brighter(t){return t=t==null?gw:Math.pow(gw,t),new Zs(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?My:Math.pow(My,t),new Zs(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Zs(cd(this.r),cd(this.g),cd(this.b),yw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:v$,formatHex:v$,formatHex8:y2e,formatRgb:x$,toString:x$}));function v$(){return`#${zu(this.r)}${zu(this.g)}${zu(this.b)}`}function y2e(){return`#${zu(this.r)}${zu(this.g)}${zu(this.b)}${zu((isNaN(this.opacity)?1:this.opacity)*255)}`}function x$(){const t=yw(this.opacity);return`${t===1?"rgb(":"rgba("}${cd(this.r)}, ${cd(this.g)}, ${cd(this.b)}${t===1?")":`, ${t})`}`}function yw(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function cd(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function zu(t){return t=cd(t),(t<16?"0":"")+t.toString(16)}function b$(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new _i(t,e,n,r)}function KK(t){if(t instanceof _i)return new _i(t.h,t.s,t.l,t.opacity);if(t instanceof Jv||(t=Ly(t)),!t)return new _i;if(t instanceof _i)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),i=Math.max(e,n,r),o=NaN,l=i-s,c=(i+s)/2;return l?(e===i?o=(n-r)/l+(n<r)*6:n===i?o=(r-e)/l+2:o=(e-n)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new _i(o,l,c,t.opacity)}function v2e(t,e,n,r){return arguments.length===1?KK(t):new _i(t,e,n,r??1)}function _i(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Gk(_i,v2e,HK(Jv,{brighter(t){return t=t==null?gw:Math.pow(gw,t),new _i(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?My:Math.pow(My,t),new _i(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new Zs(hS(t>=240?t-240:t+120,s,r),hS(t,s,r),hS(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new _i(w$(this.h),nb(this.s),nb(this.l),yw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=yw(this.opacity);return`${t===1?"hsl(":"hsla("}${w$(this.h)}, ${nb(this.s)*100}%, ${nb(this.l)*100}%${t===1?")":`, ${t})`}`}}));function w$(t){return t=(t||0)%360,t<0?t+360:t}function nb(t){return Math.max(0,Math.min(1,t||0))}function hS(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Yk=t=>()=>t;function x2e(t,e){return function(n){return t+n*e}}function b2e(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function w2e(t){return(t=+t)==1?GK:function(e,n){return n-e?b2e(e,n,t):Yk(isNaN(e)?n:e)}}function GK(t,e){var n=e-t;return n?x2e(t,n):Yk(isNaN(t)?e:t)}const _$=function t(e){var n=w2e(e);function r(s,i){var o=n((s=wT(s)).r,(i=wT(i)).r),l=n(s.g,i.g),c=n(s.b,i.b),u=GK(s.opacity,i.opacity);return function(d){return s.r=o(d),s.g=l(d),s.b=c(d),s.opacity=u(d),s+""}}return r.gamma=t,r}(1);function _2e(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),s;return function(i){for(s=0;s<n;++s)r[s]=t[s]*(1-i)+e[s]*i;return r}}function j2e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function N2e(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,s=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)s[o]=lp(t[o],e[o]);for(;o<n;++o)i[o]=e[o];return function(l){for(o=0;o<r;++o)i[o]=s[o](l);return i}}function S2e(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function vw(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function E2e(t,e){var n={},r={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?n[s]=lp(t[s],e[s]):r[s]=e[s];return function(i){for(s in n)r[s]=n[s](i);return r}}var _T=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fS=new RegExp(_T.source,"g");function A2e(t){return function(){return t}}function T2e(t){return function(e){return t(e)+""}}function C2e(t,e){var n=_T.lastIndex=fS.lastIndex=0,r,s,i,o=-1,l=[],c=[];for(t=t+"",e=e+"";(r=_T.exec(t))&&(s=fS.exec(e));)(i=s.index)>n&&(i=e.slice(n,i),l[o]?l[o]+=i:l[++o]=i),(r=r[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:vw(r,s)})),n=fS.lastIndex;return n<e.length&&(i=e.slice(n),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?T2e(c[0].x):A2e(e):(e=c.length,function(u){for(var d=0,h;d<e;++d)l[(h=c[d]).i]=h.x(u);return l.join("")})}function lp(t,e){var n=typeof e,r;return e==null||n==="boolean"?Yk(e):(n==="number"?vw:n==="string"?(r=Ly(e))?(e=r,_$):C2e:e instanceof Ly?_$:e instanceof Date?S2e:j2e(e)?_2e:Array.isArray(e)?N2e:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?E2e:vw)(t,e)}function Qk(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function P2e(t,e){e===void 0&&(e=t,t=lp);for(var n=0,r=e.length-1,s=e[0],i=new Array(r<0?0:r);n<r;)i[n]=t(s,s=e[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return i[l](o-l)}}function I2e(t){return function(){return t}}function xw(t){return+t}var j$=[0,1];function Ps(t){return t}function jT(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:I2e(isNaN(e)?NaN:.5)}function k2e(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function O2e(t,e,n){var r=t[0],s=t[1],i=e[0],o=e[1];return s<r?(r=jT(s,r),i=n(o,i)):(r=jT(r,s),i=n(i,o)),function(l){return i(r(l))}}function R2e(t,e,n){var r=Math.min(t.length,e.length)-1,s=new Array(r),i=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)s[o]=jT(t[o],t[o+1]),i[o]=n(e[o],e[o+1]);return function(l){var c=Zv(t,l,1,r)-1;return i[c](s[c](l))}}function ex(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Zj(){var t=j$,e=j$,n=lp,r,s,i,o=Ps,l,c,u;function d(){var f=Math.min(t.length,e.length);return o!==Ps&&(o=k2e(t[0],t[f-1])),l=f>2?R2e:O2e,c=u=null,h}function h(f){return f==null||isNaN(f=+f)?i:(c||(c=l(t.map(r),e,n)))(r(o(f)))}return h.invert=function(f){return o(s((u||(u=l(e,t.map(r),vw)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,xw),d()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),d()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),n=Qk,d()},h.clamp=function(f){return arguments.length?(o=f?!0:Ps,d()):o!==Ps},h.interpolate=function(f){return arguments.length?(n=f,d()):n},h.unknown=function(f){return arguments.length?(i=f,h):i},function(f,m){return r=f,s=m,d()}}function Xk(){return Zj()(Ps,Ps)}function M2e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function bw(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function im(t){return t=bw(Math.abs(t)),t?t[1]:NaN}function D2e(t,e){return function(n,r){for(var s=n.length,i=[],o=0,l=t[0],c=0;s>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),i.push(n.substring(s-=l,s+l)),!((c+=l+1)>r));)l=t[o=(o+1)%t.length];return i.reverse().join(e)}}function L2e(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var $2e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $y(t){if(!(e=$2e.exec(t)))throw new Error("invalid format: "+t);var e;return new Zk({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}$y.prototype=Zk.prototype;function Zk(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Zk.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function F2e(t){e:for(var e=t.length,n=1,r=-1,s;n<e;++n)switch(t[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(s+1):t}var YK;function V2e(t,e){var n=bw(t,e);if(!n)return t+"";var r=n[0],s=n[1],i=s-(YK=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+bw(t,Math.max(0,e+i-1))[0]}function N$(t,e){var n=bw(t,e);if(!n)return t+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const S$={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:M2e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>N$(t*100,e),r:N$,s:V2e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function E$(t){return t}var A$=Array.prototype.map,T$=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function B2e(t){var e=t.grouping===void 0||t.thousands===void 0?E$:D2e(A$.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?E$:L2e(A$.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(h){h=$y(h);var f=h.fill,m=h.align,b=h.sign,g=h.symbol,x=h.zero,w=h.width,y=h.comma,A=h.precision,T=h.trim,v=h.type;v==="n"?(y=!0,v="g"):S$[v]||(A===void 0&&(A=12),T=!0,v="g"),(x||f==="0"&&m==="=")&&(x=!0,f="0",m="=");var S=g==="$"?n:g==="#"&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",j=g==="$"?r:/[%p]/.test(v)?o:"",p=S$[v],E=/[defgprs%]/.test(v);A=A===void 0?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function P(C){var I=S,O=j,$,z,H;if(v==="c")O=p(C)+O,C="";else{C=+C;var M=C<0||1/C<0;if(C=isNaN(C)?c:p(Math.abs(C),A),T&&(C=F2e(C)),M&&+C==0&&b!=="+"&&(M=!1),I=(M?b==="("?b:l:b==="-"||b==="("?"":b)+I,O=(v==="s"?T$[8+YK/3]:"")+O+(M&&b==="("?")":""),E){for($=-1,z=C.length;++$<z;)if(H=C.charCodeAt($),48>H||H>57){O=(H===46?s+C.slice($+1):C.slice($))+O,C=C.slice(0,$);break}}}y&&!x&&(C=e(C,1/0));var F=I.length+C.length+O.length,L=F<w?new Array(w-F+1).join(f):"";switch(y&&x&&(C=e(L+C,L.length?w-O.length:1/0),L=""),m){case"<":C=I+C+O+L;break;case"=":C=I+L+C+O;break;case"^":C=L.slice(0,F=L.length>>1)+I+C+O+L.slice(F);break;default:C=L+I+C+O;break}return i(C)}return P.toString=function(){return h+""},P}function d(h,f){var m=u((h=$y(h),h.type="f",h)),b=Math.max(-8,Math.min(8,Math.floor(im(f)/3)))*3,g=Math.pow(10,-b),x=T$[8+b/3];return function(w){return m(g*w)+x}}return{format:u,formatPrefix:d}}var rb,Jk,QK;U2e({thousands:",",grouping:[3],currency:["$",""]});function U2e(t){return rb=B2e(t),Jk=rb.format,QK=rb.formatPrefix,rb}function z2e(t){return Math.max(0,-im(Math.abs(t)))}function q2e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(im(e)/3)))*3-im(Math.abs(t)))}function W2e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,im(e)-im(t))+1}function XK(t,e,n,r){var s=xT(t,e,n),i;switch(r=$y(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(i=q2e(s,o))&&(r.precision=i),QK(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=W2e(s,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=z2e(s))&&(r.precision=i-(r.type==="%")*2);break}}return Jk(r)}function gu(t){var e=t.domain;return t.ticks=function(n){var r=e();return yT(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var s=e();return XK(s[0],s[s.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),s=0,i=r.length-1,o=r[s],l=r[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=s,s=i,i=u);d-- >0;){if(u=vT(o,l,n),u===c)return r[s]=o,r[i]=l,e(r);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function ww(){var t=Xk();return t.copy=function(){return ex(t,ww())},ii.apply(t,arguments),gu(t)}function ZK(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,xw),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return ZK(t).unknown(e)},t=arguments.length?Array.from(t,xw):[0,1],gu(n)}function JK(t,e){t=t.slice();var n=0,r=t.length-1,s=t[n],i=t[r],o;return i<s&&(o=n,n=r,r=o,o=s,s=i,i=o),t[n]=e.floor(s),t[r]=e.ceil(i),t}function C$(t){return Math.log(t)}function P$(t){return Math.exp(t)}function H2e(t){return-Math.log(-t)}function K2e(t){return-Math.exp(-t)}function G2e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Y2e(t){return t===10?G2e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Q2e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function I$(t){return(e,n)=>-t(-e,n)}function eO(t){const e=t(C$,P$),n=e.domain;let r=10,s,i;function o(){return s=Q2e(r),i=Y2e(r),n()[0]<0?(s=I$(s),i=I$(i),t(H2e,K2e)):t(C$,P$),e}return e.base=function(l){return arguments.length?(r=+l,o()):r},e.domain=function(l){return arguments.length?(n(l),o()):n()},e.ticks=l=>{const c=n();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let f=s(u),m=s(d),b,g;const x=l==null?10:+l;let w=[];if(!(r%1)&&m-f<x){if(f=Math.floor(f),m=Math.ceil(m),u>0){for(;f<=m;++f)for(b=1;b<r;++b)if(g=f<0?b/i(-f):b*i(f),!(g<u)){if(g>d)break;w.push(g)}}else for(;f<=m;++f)for(b=r-1;b>=1;--b)if(g=f>0?b/i(-f):b*i(f),!(g<u)){if(g>d)break;w.push(g)}w.length*2<x&&(w=yT(u,d,x))}else w=yT(f,m,Math.min(m-f,x)).map(i);return h?w.reverse():w},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=$y(c)).precision==null&&(c.trim=!0),c=Jk(c)),l===1/0)return c;const u=Math.max(1,r*l/e.ticks().length);return d=>{let h=d/i(Math.round(s(d)));return h*r<r-.5&&(h*=r),h<=u?c(d):""}},e.nice=()=>n(JK(n(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),e}function eG(){const t=eO(Zj()).domain([1,10]);return t.copy=()=>ex(t,eG()).base(t.base()),ii.apply(t,arguments),t}function k$(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function O$(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function tO(t){var e=1,n=t(k$(e),O$(e));return n.constant=function(r){return arguments.length?t(k$(e=+r),O$(e)):e},gu(n)}function tG(){var t=tO(Zj());return t.copy=function(){return ex(t,tG()).constant(t.constant())},ii.apply(t,arguments)}function R$(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function X2e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Z2e(t){return t<0?-t*t:t*t}function nO(t){var e=t(Ps,Ps),n=1;function r(){return n===1?t(Ps,Ps):n===.5?t(X2e,Z2e):t(R$(n),R$(1/n))}return e.exponent=function(s){return arguments.length?(n=+s,r()):n},gu(e)}function rO(){var t=nO(Zj());return t.copy=function(){return ex(t,rO()).exponent(t.exponent())},ii.apply(t,arguments),t}function J2e(){return rO.apply(null,arguments).exponent(.5)}function M$(t){return Math.sign(t)*t*t}function eRe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function nG(){var t=Xk(),e=[0,1],n=!1,r;function s(i){var o=eRe(t(i));return isNaN(o)?r:n?Math.round(o):o}return s.invert=function(i){return t.invert(M$(i))},s.domain=function(i){return arguments.length?(t.domain(i),s):t.domain()},s.range=function(i){return arguments.length?(t.range((e=Array.from(i,xw)).map(M$)),s):e.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(n=!!i,s):n},s.clamp=function(i){return arguments.length?(t.clamp(i),s):t.clamp()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return nG(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},ii.apply(s,arguments),gu(s)}function rG(){var t=[],e=[],n=[],r;function s(){var o=0,l=Math.max(1,e.length);for(n=new Array(l-1);++o<l;)n[o-1]=a2e(t,o/l);return i}function i(o){return o==null||isNaN(o=+o)?r:e[Zv(n,o)]}return i.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},i.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(Lc),s()},i.range=function(o){return arguments.length?(e=Array.from(o),s()):e.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return rG().domain(t).range(e).unknown(r)},ii.apply(i,arguments)}function sG(){var t=0,e=1,n=1,r=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[Zv(r,c,0,n)]:i}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(n=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return sG().domain([t,e]).range(s).unknown(i)},ii.apply(gu(o),arguments)}function aG(){var t=[.5],e=[0,1],n,r=1;function s(i){return i!=null&&i<=i?e[Zv(t,i,0,r)]:n}return s.domain=function(i){return arguments.length?(t=Array.from(i),r=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(i){return arguments.length?(e=Array.from(i),r=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(i){var o=e.indexOf(i);return[t[o-1],t[o]]},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return aG().domain(t).range(e).unknown(n)},ii.apply(s,arguments)}const mS=new Date,pS=new Date;function Dr(t,e,n,r){function s(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(t(i=new Date(+i)),i),s.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(e(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),e(i,l),t(i);while(u<i&&i<o);return c},s.filter=i=>Dr(o=>{if(o>=o)for(;t(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!i(o););else for(;--l>=0;)for(;e(o,1),!i(o););}),n&&(s.count=(i,o)=>(mS.setTime(+i),pS.setTime(+o),t(mS),t(pS),Math.floor(n(mS,pS))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(r?o=>r(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const _w=Dr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);_w.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Dr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):_w);_w.range;const Ko=1e3,za=Ko*60,Go=za*60,pl=Go*24,sO=pl*7,D$=pl*30,gS=pl*365,qu=Dr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ko)},(t,e)=>(e-t)/Ko,t=>t.getUTCSeconds());qu.range;const aO=Dr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ko)},(t,e)=>{t.setTime(+t+e*za)},(t,e)=>(e-t)/za,t=>t.getMinutes());aO.range;const iO=Dr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*za)},(t,e)=>(e-t)/za,t=>t.getUTCMinutes());iO.range;const oO=Dr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ko-t.getMinutes()*za)},(t,e)=>{t.setTime(+t+e*Go)},(t,e)=>(e-t)/Go,t=>t.getHours());oO.range;const lO=Dr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Go)},(t,e)=>(e-t)/Go,t=>t.getUTCHours());lO.range;const tx=Dr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*za)/pl,t=>t.getDate()-1);tx.range;const Jj=Dr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/pl,t=>t.getUTCDate()-1);Jj.range;const iG=Dr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/pl,t=>Math.floor(t/pl));iG.range;function rh(t){return Dr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*za)/sO)}const eN=rh(0),jw=rh(1),tRe=rh(2),nRe=rh(3),om=rh(4),rRe=rh(5),sRe=rh(6);eN.range;jw.range;tRe.range;nRe.range;om.range;rRe.range;sRe.range;function sh(t){return Dr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/sO)}const tN=sh(0),Nw=sh(1),aRe=sh(2),iRe=sh(3),lm=sh(4),oRe=sh(5),lRe=sh(6);tN.range;Nw.range;aRe.range;iRe.range;lm.range;oRe.range;lRe.range;const cO=Dr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());cO.range;const uO=Dr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());uO.range;const gl=Dr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());gl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Dr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});gl.range;const yl=Dr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());yl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Dr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});yl.range;function oG(t,e,n,r,s,i){const o=[[qu,1,Ko],[qu,5,5*Ko],[qu,15,15*Ko],[qu,30,30*Ko],[i,1,za],[i,5,5*za],[i,15,15*za],[i,30,30*za],[s,1,Go],[s,3,3*Go],[s,6,6*Go],[s,12,12*Go],[r,1,pl],[r,2,2*pl],[n,1,sO],[e,1,D$],[e,3,3*D$],[t,1,gS]];function l(u,d,h){const f=d<u;f&&([u,d]=[d,u]);const m=h&&typeof h.range=="function"?h:c(u,d,h),b=m?m.range(u,+d+1):[];return f?b.reverse():b}function c(u,d,h){const f=Math.abs(d-u)/h,m=Hk(([,,x])=>x).right(o,f);if(m===o.length)return t.every(xT(u/gS,d/gS,h));if(m===0)return _w.every(Math.max(xT(u,d,h),1));const[b,g]=o[f/o[m-1][2]<o[m][2]/f?m-1:m];return b.every(g)}return[l,c]}const[cRe,uRe]=oG(yl,uO,tN,iG,lO,iO),[dRe,hRe]=oG(gl,cO,eN,tx,oO,aO);function yS(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function vS(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Vp(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function fRe(t){var e=t.dateTime,n=t.date,r=t.time,s=t.periods,i=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,u=Bp(s),d=Up(s),h=Bp(i),f=Up(i),m=Bp(o),b=Up(o),g=Bp(l),x=Up(l),w=Bp(c),y=Up(c),A={a:M,A:F,b:L,B:W,c:null,d:U$,e:U$,f:DRe,g:HRe,G:GRe,H:ORe,I:RRe,j:MRe,L:lG,m:LRe,M:$Re,p:ie,q:oe,Q:W$,s:H$,S:FRe,u:VRe,U:BRe,V:URe,w:zRe,W:qRe,x:null,X:null,y:WRe,Y:KRe,Z:YRe,"%":q$},T={a:me,A:Ie,b:lt,B:ut,c:null,d:z$,e:z$,f:JRe,g:cMe,G:dMe,H:QRe,I:XRe,j:ZRe,L:uG,m:eMe,M:tMe,p:je,q:ht,Q:W$,s:H$,S:nMe,u:rMe,U:sMe,V:aMe,w:iMe,W:oMe,x:null,X:null,y:lMe,Y:uMe,Z:hMe,"%":q$},v={a:P,A:C,b:I,B:O,c:$,d:V$,e:V$,f:CRe,g:F$,G:$$,H:B$,I:B$,j:SRe,L:TRe,m:NRe,M:ERe,p:E,q:jRe,Q:IRe,s:kRe,S:ARe,u:vRe,U:xRe,V:bRe,w:yRe,W:wRe,x:z,X:H,y:F$,Y:$$,Z:_Re,"%":PRe};A.x=S(n,A),A.X=S(r,A),A.c=S(e,A),T.x=S(n,T),T.X=S(r,T),T.c=S(e,T);function S(we,Me){return function(Fe){var ue=[],Tt=-1,gt=0,an=we.length,Zt,wn,Lr;for(Fe instanceof Date||(Fe=new Date(+Fe));++Tt<an;)we.charCodeAt(Tt)===37&&(ue.push(we.slice(gt,Tt)),(wn=L$[Zt=we.charAt(++Tt)])!=null?Zt=we.charAt(++Tt):wn=Zt==="e"?" ":"0",(Lr=Me[Zt])&&(Zt=Lr(Fe,wn)),ue.push(Zt),gt=Tt+1);return ue.push(we.slice(gt,Tt)),ue.join("")}}function j(we,Me){return function(Fe){var ue=Vp(1900,void 0,1),Tt=p(ue,we,Fe+="",0),gt,an;if(Tt!=Fe.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(ue.s*1e3+("L"in ue?ue.L:0));if(Me&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+ue.p*12),ue.m===void 0&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?(gt=vS(Vp(ue.y,0,1)),an=gt.getUTCDay(),gt=an>4||an===0?Nw.ceil(gt):Nw(gt),gt=Jj.offset(gt,(ue.V-1)*7),ue.y=gt.getUTCFullYear(),ue.m=gt.getUTCMonth(),ue.d=gt.getUTCDate()+(ue.w+6)%7):(gt=yS(Vp(ue.y,0,1)),an=gt.getDay(),gt=an>4||an===0?jw.ceil(gt):jw(gt),gt=tx.offset(gt,(ue.V-1)*7),ue.y=gt.getFullYear(),ue.m=gt.getMonth(),ue.d=gt.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),an="Z"in ue?vS(Vp(ue.y,0,1)).getUTCDay():yS(Vp(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+ue.W*7-(an+5)%7:ue.w+ue.U*7-(an+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,vS(ue)):yS(ue)}}function p(we,Me,Fe,ue){for(var Tt=0,gt=Me.length,an=Fe.length,Zt,wn;Tt<gt;){if(ue>=an)return-1;if(Zt=Me.charCodeAt(Tt++),Zt===37){if(Zt=Me.charAt(Tt++),wn=v[Zt in L$?Me.charAt(Tt++):Zt],!wn||(ue=wn(we,Fe,ue))<0)return-1}else if(Zt!=Fe.charCodeAt(ue++))return-1}return ue}function E(we,Me,Fe){var ue=u.exec(Me.slice(Fe));return ue?(we.p=d.get(ue[0].toLowerCase()),Fe+ue[0].length):-1}function P(we,Me,Fe){var ue=m.exec(Me.slice(Fe));return ue?(we.w=b.get(ue[0].toLowerCase()),Fe+ue[0].length):-1}function C(we,Me,Fe){var ue=h.exec(Me.slice(Fe));return ue?(we.w=f.get(ue[0].toLowerCase()),Fe+ue[0].length):-1}function I(we,Me,Fe){var ue=w.exec(Me.slice(Fe));return ue?(we.m=y.get(ue[0].toLowerCase()),Fe+ue[0].length):-1}function O(we,Me,Fe){var ue=g.exec(Me.slice(Fe));return ue?(we.m=x.get(ue[0].toLowerCase()),Fe+ue[0].length):-1}function $(we,Me,Fe){return p(we,e,Me,Fe)}function z(we,Me,Fe){return p(we,n,Me,Fe)}function H(we,Me,Fe){return p(we,r,Me,Fe)}function M(we){return o[we.getDay()]}function F(we){return i[we.getDay()]}function L(we){return c[we.getMonth()]}function W(we){return l[we.getMonth()]}function ie(we){return s[+(we.getHours()>=12)]}function oe(we){return 1+~~(we.getMonth()/3)}function me(we){return o[we.getUTCDay()]}function Ie(we){return i[we.getUTCDay()]}function lt(we){return c[we.getUTCMonth()]}function ut(we){return l[we.getUTCMonth()]}function je(we){return s[+(we.getUTCHours()>=12)]}function ht(we){return 1+~~(we.getUTCMonth()/3)}return{format:function(we){var Me=S(we+="",A);return Me.toString=function(){return we},Me},parse:function(we){var Me=j(we+="",!1);return Me.toString=function(){return we},Me},utcFormat:function(we){var Me=S(we+="",T);return Me.toString=function(){return we},Me},utcParse:function(we){var Me=j(we+="",!0);return Me.toString=function(){return we},Me}}}var L$={"-":"",_:" ",0:"0"},Kr=/^\s*\d+/,mRe=/^%/,pRe=/[\\^$*+?|[\]().{}]/g;function cn(t,e,n){var r=t<0?"-":"",s=(r?-t:t)+"",i=s.length;return r+(i<n?new Array(n-i+1).join(e)+s:s)}function gRe(t){return t.replace(pRe,"\\$&")}function Bp(t){return new RegExp("^(?:"+t.map(gRe).join("|")+")","i")}function Up(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function yRe(t,e,n){var r=Kr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function vRe(t,e,n){var r=Kr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function xRe(t,e,n){var r=Kr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function bRe(t,e,n){var r=Kr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function wRe(t,e,n){var r=Kr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function $$(t,e,n){var r=Kr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function F$(t,e,n){var r=Kr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function _Re(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function jRe(t,e,n){var r=Kr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function NRe(t,e,n){var r=Kr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function V$(t,e,n){var r=Kr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function SRe(t,e,n){var r=Kr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function B$(t,e,n){var r=Kr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function ERe(t,e,n){var r=Kr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function ARe(t,e,n){var r=Kr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function TRe(t,e,n){var r=Kr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function CRe(t,e,n){var r=Kr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function PRe(t,e,n){var r=mRe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function IRe(t,e,n){var r=Kr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function kRe(t,e,n){var r=Kr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function U$(t,e){return cn(t.getDate(),e,2)}function ORe(t,e){return cn(t.getHours(),e,2)}function RRe(t,e){return cn(t.getHours()%12||12,e,2)}function MRe(t,e){return cn(1+tx.count(gl(t),t),e,3)}function lG(t,e){return cn(t.getMilliseconds(),e,3)}function DRe(t,e){return lG(t,e)+"000"}function LRe(t,e){return cn(t.getMonth()+1,e,2)}function $Re(t,e){return cn(t.getMinutes(),e,2)}function FRe(t,e){return cn(t.getSeconds(),e,2)}function VRe(t){var e=t.getDay();return e===0?7:e}function BRe(t,e){return cn(eN.count(gl(t)-1,t),e,2)}function cG(t){var e=t.getDay();return e>=4||e===0?om(t):om.ceil(t)}function URe(t,e){return t=cG(t),cn(om.count(gl(t),t)+(gl(t).getDay()===4),e,2)}function zRe(t){return t.getDay()}function qRe(t,e){return cn(jw.count(gl(t)-1,t),e,2)}function WRe(t,e){return cn(t.getFullYear()%100,e,2)}function HRe(t,e){return t=cG(t),cn(t.getFullYear()%100,e,2)}function KRe(t,e){return cn(t.getFullYear()%1e4,e,4)}function GRe(t,e){var n=t.getDay();return t=n>=4||n===0?om(t):om.ceil(t),cn(t.getFullYear()%1e4,e,4)}function YRe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+cn(e/60|0,"0",2)+cn(e%60,"0",2)}function z$(t,e){return cn(t.getUTCDate(),e,2)}function QRe(t,e){return cn(t.getUTCHours(),e,2)}function XRe(t,e){return cn(t.getUTCHours()%12||12,e,2)}function ZRe(t,e){return cn(1+Jj.count(yl(t),t),e,3)}function uG(t,e){return cn(t.getUTCMilliseconds(),e,3)}function JRe(t,e){return uG(t,e)+"000"}function eMe(t,e){return cn(t.getUTCMonth()+1,e,2)}function tMe(t,e){return cn(t.getUTCMinutes(),e,2)}function nMe(t,e){return cn(t.getUTCSeconds(),e,2)}function rMe(t){var e=t.getUTCDay();return e===0?7:e}function sMe(t,e){return cn(tN.count(yl(t)-1,t),e,2)}function dG(t){var e=t.getUTCDay();return e>=4||e===0?lm(t):lm.ceil(t)}function aMe(t,e){return t=dG(t),cn(lm.count(yl(t),t)+(yl(t).getUTCDay()===4),e,2)}function iMe(t){return t.getUTCDay()}function oMe(t,e){return cn(Nw.count(yl(t)-1,t),e,2)}function lMe(t,e){return cn(t.getUTCFullYear()%100,e,2)}function cMe(t,e){return t=dG(t),cn(t.getUTCFullYear()%100,e,2)}function uMe(t,e){return cn(t.getUTCFullYear()%1e4,e,4)}function dMe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?lm(t):lm.ceil(t),cn(t.getUTCFullYear()%1e4,e,4)}function hMe(){return"+0000"}function q$(){return"%"}function W$(t){return+t}function H$(t){return Math.floor(+t/1e3)}var yh,hG,fG;fMe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function fMe(t){return yh=fRe(t),hG=yh.format,yh.parse,fG=yh.utcFormat,yh.utcParse,yh}function mMe(t){return new Date(t)}function pMe(t){return t instanceof Date?+t:+new Date(+t)}function dO(t,e,n,r,s,i,o,l,c,u){var d=Xk(),h=d.invert,f=d.domain,m=u(".%L"),b=u(":%S"),g=u("%I:%M"),x=u("%I %p"),w=u("%a %d"),y=u("%b %d"),A=u("%B"),T=u("%Y");function v(S){return(c(S)<S?m:l(S)<S?b:o(S)<S?g:i(S)<S?x:r(S)<S?s(S)<S?w:y:n(S)<S?A:T)(S)}return d.invert=function(S){return new Date(h(S))},d.domain=function(S){return arguments.length?f(Array.from(S,pMe)):f().map(mMe)},d.ticks=function(S){var j=f();return t(j[0],j[j.length-1],S??10)},d.tickFormat=function(S,j){return j==null?v:u(j)},d.nice=function(S){var j=f();return(!S||typeof S.range!="function")&&(S=e(j[0],j[j.length-1],S??10)),S?f(JK(j,S)):d},d.copy=function(){return ex(d,dO(t,e,n,r,s,i,o,l,c,u))},d}function gMe(){return ii.apply(dO(dRe,hRe,gl,cO,eN,tx,oO,aO,qu,hG).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function yMe(){return ii.apply(dO(cRe,uRe,yl,uO,tN,Jj,lO,iO,qu,fG).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function nN(){var t=0,e=1,n,r,s,i,o=Ps,l=!1,c;function u(h){return h==null||isNaN(h=+h)?c:o(s===0?.5:(h=(i(h)-n)*s,l?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,e]=h,n=i(t=+t),r=i(e=+e),s=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(h){return arguments.length?(l=!!h,u):l},u.interpolator=function(h){return arguments.length?(o=h,u):o};function d(h){return function(f){var m,b;return arguments.length?([m,b]=f,o=h(m,b),u):[o(0),o(1)]}}return u.range=d(lp),u.rangeRound=d(Qk),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return i=h,n=h(t),r=h(e),s=n===r?0:1/(r-n),u}}function yu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function mG(){var t=gu(nN()(Ps));return t.copy=function(){return yu(t,mG())},Sl.apply(t,arguments)}function pG(){var t=eO(nN()).domain([1,10]);return t.copy=function(){return yu(t,pG()).base(t.base())},Sl.apply(t,arguments)}function gG(){var t=tO(nN());return t.copy=function(){return yu(t,gG()).constant(t.constant())},Sl.apply(t,arguments)}function hO(){var t=nO(nN());return t.copy=function(){return yu(t,hO()).exponent(t.exponent())},Sl.apply(t,arguments)}function vMe(){return hO.apply(null,arguments).exponent(.5)}function yG(){var t=[],e=Ps;function n(r){if(r!=null&&!isNaN(r=+r))return e((Zv(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let s of r)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Lc),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,s)=>e(s/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(s,i)=>s2e(t,i/r))},n.copy=function(){return yG(e).domain(t)},Sl.apply(n,arguments)}function rN(){var t=0,e=.5,n=1,r=1,s,i,o,l,c,u=Ps,d,h=!1,f;function m(g){return isNaN(g=+g)?f:(g=.5+((g=+d(g))-i)*(r*g<r*i?l:c),u(h?Math.max(0,Math.min(1,g)):g))}m.domain=function(g){return arguments.length?([t,e,n]=g,s=d(t=+t),i=d(e=+e),o=d(n=+n),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),r=i<s?-1:1,m):[t,e,n]},m.clamp=function(g){return arguments.length?(h=!!g,m):h},m.interpolator=function(g){return arguments.length?(u=g,m):u};function b(g){return function(x){var w,y,A;return arguments.length?([w,y,A]=x,u=P2e(g,[w,y,A]),m):[u(0),u(.5),u(1)]}}return m.range=b(lp),m.rangeRound=b(Qk),m.unknown=function(g){return arguments.length?(f=g,m):f},function(g){return d=g,s=g(t),i=g(e),o=g(n),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),r=i<s?-1:1,m}}function vG(){var t=gu(rN()(Ps));return t.copy=function(){return yu(t,vG())},Sl.apply(t,arguments)}function xG(){var t=eO(rN()).domain([.1,1,10]);return t.copy=function(){return yu(t,xG()).base(t.base())},Sl.apply(t,arguments)}function bG(){var t=tO(rN());return t.copy=function(){return yu(t,bG()).constant(t.constant())},Sl.apply(t,arguments)}function fO(){var t=nO(rN());return t.copy=function(){return yu(t,fO()).exponent(t.exponent())},Sl.apply(t,arguments)}function xMe(){return fO.apply(null,arguments).exponent(.5)}const K$=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Ry,scaleDiverging:vG,scaleDivergingLog:xG,scaleDivergingPow:fO,scaleDivergingSqrt:xMe,scaleDivergingSymlog:bG,scaleIdentity:ZK,scaleImplicit:bT,scaleLinear:ww,scaleLog:eG,scaleOrdinal:Kk,scalePoint:Og,scalePow:rO,scaleQuantile:rG,scaleQuantize:sG,scaleRadial:nG,scaleSequential:mG,scaleSequentialLog:pG,scaleSequentialPow:hO,scaleSequentialQuantile:yG,scaleSequentialSqrt:vMe,scaleSequentialSymlog:gG,scaleSqrt:J2e,scaleSymlog:tG,scaleThreshold:aG,scaleTime:gMe,scaleUtc:yMe,tickFormat:XK},Symbol.toStringTag,{value:"Module"}));var bMe=Zm;function wMe(t,e,n){for(var r=-1,s=t.length;++r<s;){var i=t[r],o=e(i);if(o!=null&&(l===void 0?o===o&&!bMe(o):n(o,l)))var l=o,c=i}return c}var sN=wMe;function _Me(t,e){return t>e}var wG=_Me,jMe=sN,NMe=wG,SMe=op;function EMe(t){return t&&t.length?jMe(t,SMe,NMe):void 0}var AMe=EMe;const xc=pn(AMe);function TMe(t,e){return t<e}var _G=TMe,CMe=sN,PMe=_G,IMe=op;function kMe(t){return t&&t.length?CMe(t,IMe,PMe):void 0}var OMe=kMe;const aN=pn(OMe);var RMe=Ak,MMe=Io,DMe=PK,LMe=ra;function $Me(t,e){var n=LMe(t)?RMe:DMe;return n(t,MMe(e))}var FMe=$Me,VMe=TK,BMe=FMe;function UMe(t,e){return VMe(BMe(t,e),1)}var zMe=UMe;const qMe=pn(zMe);var WMe=Uk;function HMe(t,e){return WMe(t,e)}var KMe=HMe;const cm=pn(KMe);var cp=1e9,GMe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},pO,Un=!0,ti="[DecimalError] ",ud=ti+"Invalid argument: ",mO=ti+"Exponent out of range: ",up=Math.floor,Mu=Math.pow,YMe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,fa,Br=1e7,$n=7,jG=9007199254740991,Sw=up(jG/$n),Ze={};Ze.absoluteValue=Ze.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ze.comparedTo=Ze.cmp=function(t){var e,n,r,s,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(r=i.d.length,s=t.d.length,e=0,n=r<s?r:s;e<n;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return r===s?0:r>s^i.s<0?1:-1};Ze.decimalPlaces=Ze.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*$n;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Ze.dividedBy=Ze.div=function(t){return el(this,new this.constructor(t))};Ze.dividedToIntegerBy=Ze.idiv=function(t){var e=this,n=e.constructor;return Sn(el(e,new n(t),0,1),n.precision)};Ze.equals=Ze.eq=function(t){return!this.cmp(t)};Ze.exponent=function(){return Nr(this)};Ze.greaterThan=Ze.gt=function(t){return this.cmp(t)>0};Ze.greaterThanOrEqualTo=Ze.gte=function(t){return this.cmp(t)>=0};Ze.isInteger=Ze.isint=function(){return this.e>this.d.length-2};Ze.isNegative=Ze.isneg=function(){return this.s<0};Ze.isPositive=Ze.ispos=function(){return this.s>0};Ze.isZero=function(){return this.s===0};Ze.lessThan=Ze.lt=function(t){return this.cmp(t)<0};Ze.lessThanOrEqualTo=Ze.lte=function(t){return this.cmp(t)<1};Ze.logarithm=Ze.log=function(t){var e,n=this,r=n.constructor,s=r.precision,i=s+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(fa))throw Error(ti+"NaN");if(n.s<1)throw Error(ti+(n.s?"NaN":"-Infinity"));return n.eq(fa)?new r(0):(Un=!1,e=el(Fy(n,i),Fy(t,i),i),Un=!0,Sn(e,s))};Ze.minus=Ze.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?EG(e,t):NG(e,(t.s=-t.s,t))};Ze.modulo=Ze.mod=function(t){var e,n=this,r=n.constructor,s=r.precision;if(t=new r(t),!t.s)throw Error(ti+"NaN");return n.s?(Un=!1,e=el(n,t,0,1).times(t),Un=!0,n.minus(e)):Sn(new r(n),s)};Ze.naturalExponential=Ze.exp=function(){return SG(this)};Ze.naturalLogarithm=Ze.ln=function(){return Fy(this)};Ze.negated=Ze.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ze.plus=Ze.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?NG(e,t):EG(e,(t.s=-t.s,t))};Ze.precision=Ze.sd=function(t){var e,n,r,s=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ud+t);if(e=Nr(s)+1,r=s.d.length-1,n=r*$n+1,r=s.d[r],r){for(;r%10==0;r/=10)n--;for(r=s.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Ze.squareRoot=Ze.sqrt=function(){var t,e,n,r,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(ti+"NaN")}for(t=Nr(l),Un=!1,s=Math.sqrt(+l),s==0||s==1/0?(e=to(l.d),(e.length+t)%2==0&&(e+="0"),s=Math.sqrt(e),t=up((t+1)/2)-(t<0||t%2),s==1/0?e="5e"+t:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(s.toString()),n=c.precision,s=o=n+3;;)if(i=r,r=i.plus(el(l,i,o+2)).times(.5),to(i.d).slice(0,o)===(e=to(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),s==o&&e=="4999"){if(Sn(i,n+1,0),i.times(i).eq(l)){r=i;break}}else if(e!="9999")break;o+=4}return Un=!0,Sn(r,n)};Ze.times=Ze.mul=function(t){var e,n,r,s,i,o,l,c,u,d=this,h=d.constructor,f=d.d,m=(t=new h(t)).d;if(!d.s||!t.s)return new h(0);for(t.s*=d.s,n=d.e+t.e,c=f.length,u=m.length,c<u&&(i=f,f=m,m=i,o=c,c=u,u=o),i=[],o=c+u,r=o;r--;)i.push(0);for(r=u;--r>=0;){for(e=0,s=c+r;s>r;)l=i[s]+m[r]*f[s-r-1]+e,i[s--]=l%Br|0,e=l/Br|0;i[s]=(i[s]+e)%Br|0}for(;!i[--o];)i.pop();return e?++n:i.shift(),t.d=i,t.e=n,Un?Sn(t,h.precision):t};Ze.toDecimalPlaces=Ze.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(_o(t,0,cp),e===void 0?e=r.rounding:_o(e,0,8),Sn(n,t+Nr(n)+1,e))};Ze.toExponential=function(t,e){var n,r=this,s=r.constructor;return t===void 0?n=Bd(r,!0):(_o(t,0,cp),e===void 0?e=s.rounding:_o(e,0,8),r=Sn(new s(r),t+1,e),n=Bd(r,!0,t+1)),n};Ze.toFixed=function(t,e){var n,r,s=this,i=s.constructor;return t===void 0?Bd(s):(_o(t,0,cp),e===void 0?e=i.rounding:_o(e,0,8),r=Sn(new i(s),t+Nr(s)+1,e),n=Bd(r.abs(),!1,t+Nr(r)+1),s.isneg()&&!s.isZero()?"-"+n:n)};Ze.toInteger=Ze.toint=function(){var t=this,e=t.constructor;return Sn(new e(t),Nr(t)+1,e.rounding)};Ze.toNumber=function(){return+this};Ze.toPower=Ze.pow=function(t){var e,n,r,s,i,o,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(fa);if(l=new c(l),!l.s){if(t.s<1)throw Error(ti+"Infinity");return l}if(l.eq(fa))return l;if(r=c.precision,t.eq(fa))return Sn(l,r);if(e=t.e,n=t.d.length-1,o=e>=n,i=l.s,o){if((n=d<0?-d:d)<=jG){for(s=new c(fa),e=Math.ceil(r/$n+4),Un=!1;n%2&&(s=s.times(l),Y$(s.d,e)),n=up(n/2),n!==0;)l=l.times(l),Y$(l.d,e);return Un=!0,t.s<0?new c(fa).div(s):Sn(s,r)}}else if(i<0)throw Error(ti+"NaN");return i=i<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,Un=!1,s=t.times(Fy(l,r+u)),Un=!0,s=SG(s),s.s=i,s};Ze.toPrecision=function(t,e){var n,r,s=this,i=s.constructor;return t===void 0?(n=Nr(s),r=Bd(s,n<=i.toExpNeg||n>=i.toExpPos)):(_o(t,1,cp),e===void 0?e=i.rounding:_o(e,0,8),s=Sn(new i(s),t,e),n=Nr(s),r=Bd(s,t<=n||n<=i.toExpNeg,t)),r};Ze.toSignificantDigits=Ze.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(_o(t,1,cp),e===void 0?e=r.rounding:_o(e,0,8)),Sn(new r(n),t,e)};Ze.toString=Ze.valueOf=Ze.val=Ze.toJSON=Ze[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Nr(t),n=t.constructor;return Bd(t,e<=n.toExpNeg||e>=n.toExpPos)};function NG(t,e){var n,r,s,i,o,l,c,u,d=t.constructor,h=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Un?Sn(e,h):e;if(c=t.d,u=e.d,o=t.e,s=e.e,c=c.slice(),i=o-s,i){for(i<0?(r=c,i=-i,l=u.length):(r=u,s=o,l=c.length),o=Math.ceil(h/$n),l=o>l?o+1:l+1,i>l&&(i=l,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,r=u,u=c,c=r),n=0;i;)n=(c[--i]=c[i]+u[i]+n)/Br|0,c[i]%=Br;for(n&&(c.unshift(n),++s),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=s,Un?Sn(e,h):e}function _o(t,e,n){if(t!==~~t||t<e||t>n)throw Error(ud+t)}function to(t){var e,n,r,s=t.length-1,i="",o=t[0];if(s>0){for(i+=o,e=1;e<s;e++)r=t[e]+"",n=$n-r.length,n&&(i+=Yl(n)),i+=r;o=t[e],r=o+"",n=$n-r.length,n&&(i+=Yl(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var el=function(){function t(r,s){var i,o=0,l=r.length;for(r=r.slice();l--;)i=r[l]*s+o,r[l]=i%Br|0,o=i/Br|0;return o&&r.unshift(o),r}function e(r,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(r[l]!=s[l]){c=r[l]>s[l]?1:-1;break}return c}function n(r,s,i){for(var o=0;i--;)r[i]-=o,o=r[i]<s[i]?1:0,r[i]=o*Br+r[i]-s[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,i,o){var l,c,u,d,h,f,m,b,g,x,w,y,A,T,v,S,j,p,E=r.constructor,P=r.s==s.s?1:-1,C=r.d,I=s.d;if(!r.s)return new E(r);if(!s.s)throw Error(ti+"Division by zero");for(c=r.e-s.e,j=I.length,v=C.length,m=new E(P),b=m.d=[],u=0;I[u]==(C[u]||0);)++u;if(I[u]>(C[u]||0)&&--c,i==null?y=i=E.precision:o?y=i+(Nr(r)-Nr(s))+1:y=i,y<0)return new E(0);if(y=y/$n+2|0,u=0,j==1)for(d=0,I=I[0],y++;(u<v||d)&&y--;u++)A=d*Br+(C[u]||0),b[u]=A/I|0,d=A%I|0;else{for(d=Br/(I[0]+1)|0,d>1&&(I=t(I,d),C=t(C,d),j=I.length,v=C.length),T=j,g=C.slice(0,j),x=g.length;x<j;)g[x++]=0;p=I.slice(),p.unshift(0),S=I[0],I[1]>=Br/2&&++S;do d=0,l=e(I,g,j,x),l<0?(w=g[0],j!=x&&(w=w*Br+(g[1]||0)),d=w/S|0,d>1?(d>=Br&&(d=Br-1),h=t(I,d),f=h.length,x=g.length,l=e(h,g,f,x),l==1&&(d--,n(h,j<f?p:I,f))):(d==0&&(l=d=1),h=I.slice()),f=h.length,f<x&&h.unshift(0),n(g,h,x),l==-1&&(x=g.length,l=e(I,g,j,x),l<1&&(d++,n(g,j<x?p:I,x))),x=g.length):l===0&&(d++,g=[0]),b[u++]=d,l&&g[0]?g[x++]=C[T]||0:(g=[C[T]],x=1);while((T++<v||g[0]!==void 0)&&y--)}return b[0]||b.shift(),m.e=c,Sn(m,o?i+Nr(m)+1:i)}}();function SG(t,e){var n,r,s,i,o,l,c=0,u=0,d=t.constructor,h=d.precision;if(Nr(t)>16)throw Error(mO+Nr(t));if(!t.s)return new d(fa);for(e==null?(Un=!1,l=h):l=e,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(r=Math.log(Mu(2,u))/Math.LN10*2+5|0,l+=r,n=s=i=new d(fa),d.precision=l;;){if(s=Sn(s.times(t),l),n=n.times(++c),o=i.plus(el(s,n,l)),to(o.d).slice(0,l)===to(i.d).slice(0,l)){for(;u--;)i=Sn(i.times(i),l);return d.precision=h,e==null?(Un=!0,Sn(i,h)):i}i=o}}function Nr(t){for(var e=t.e*$n,n=t.d[0];n>=10;n/=10)e++;return e}function xS(t,e,n){if(e>t.LN10.sd())throw Un=!0,n&&(t.precision=n),Error(ti+"LN10 precision limit exceeded");return Sn(new t(t.LN10),e)}function Yl(t){for(var e="";t--;)e+="0";return e}function Fy(t,e){var n,r,s,i,o,l,c,u,d,h=1,f=10,m=t,b=m.d,g=m.constructor,x=g.precision;if(m.s<1)throw Error(ti+(m.s?"NaN":"-Infinity"));if(m.eq(fa))return new g(0);if(e==null?(Un=!1,u=x):u=e,m.eq(10))return e==null&&(Un=!0),xS(g,u);if(u+=f,g.precision=u,n=to(b),r=n.charAt(0),i=Nr(m),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(t),n=to(m.d),r=n.charAt(0),h++;i=Nr(m),r>1?(m=new g("0."+n),i++):m=new g(r+"."+n.slice(1))}else return c=xS(g,u+2,x).times(i+""),m=Fy(new g(r+"."+n.slice(1)),u-f).plus(c),g.precision=x,e==null?(Un=!0,Sn(m,x)):m;for(l=o=m=el(m.minus(fa),m.plus(fa),u),d=Sn(m.times(m),u),s=3;;){if(o=Sn(o.times(d),u),c=l.plus(el(o,new g(s),u)),to(c.d).slice(0,u)===to(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(xS(g,u+2,x).times(i+""))),l=el(l,new g(h),u),g.precision=x,e==null?(Un=!0,Sn(l,x)):l;l=c,s+=2}}function G$(t,e){var n,r,s;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(s=e.length;e.charCodeAt(s-1)===48;)--s;if(e=e.slice(r,s),e){if(s-=r,n=n-r-1,t.e=up(n/$n),t.d=[],r=(n+1)%$n,n<0&&(r+=$n),r<s){for(r&&t.d.push(+e.slice(0,r)),s-=$n;r<s;)t.d.push(+e.slice(r,r+=$n));e=e.slice(r),r=$n-e.length}else r-=s;for(;r--;)e+="0";if(t.d.push(+e),Un&&(t.e>Sw||t.e<-Sw))throw Error(mO+n)}else t.s=0,t.e=0,t.d=[0];return t}function Sn(t,e,n){var r,s,i,o,l,c,u,d,h=t.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(r=e-o,r<0)r+=$n,s=e,u=h[d=0];else{if(d=Math.ceil((r+1)/$n),i=h.length,d>=i)return t;for(u=i=h[d],o=1;i>=10;i/=10)o++;r%=$n,s=r-$n+o}if(n!==void 0&&(i=Mu(10,o-s-1),l=u/i%10|0,c=e<0||h[d+1]!==void 0||u%i,c=n<4?(l||c)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?s>0?u/Mu(10,o-s):0:h[d-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return c?(i=Nr(t),h.length=1,e=e-i-1,h[0]=Mu(10,($n-e%$n)%$n),t.e=up(-e/$n)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=d,i=1,d--):(h.length=d+1,i=Mu(10,$n-r),h[d]=s>0?(u/Mu(10,o-s)%Mu(10,s)|0)*i:0),c)for(;;)if(d==0){(h[0]+=i)==Br&&(h[0]=1,++t.e);break}else{if(h[d]+=i,h[d]!=Br)break;h[d--]=0,i=1}for(r=h.length;h[--r]===0;)h.pop();if(Un&&(t.e>Sw||t.e<-Sw))throw Error(mO+Nr(t));return t}function EG(t,e){var n,r,s,i,o,l,c,u,d,h,f=t.constructor,m=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),Un?Sn(e,m):e;if(c=t.d,h=e.d,r=e.e,u=t.e,c=c.slice(),o=u-r,o){for(d=o<0,d?(n=c,o=-o,l=h.length):(n=h,r=u,l=c.length),s=Math.max(Math.ceil(m/$n),l)+2,o>s&&(o=s,n.length=1),n.reverse(),s=o;s--;)n.push(0);n.reverse()}else{for(s=c.length,l=h.length,d=s<l,d&&(l=s),s=0;s<l;s++)if(c[s]!=h[s]){d=c[s]<h[s];break}o=0}for(d&&(n=c,c=h,h=n,e.s=-e.s),l=c.length,s=h.length-l;s>0;--s)c[l++]=0;for(s=h.length;s>o;){if(c[--s]<h[s]){for(i=s;i&&c[--i]===0;)c[i]=Br-1;--c[i],c[s]+=Br}c[s]-=h[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,Un?Sn(e,m):e):new f(0)}function Bd(t,e,n){var r,s=Nr(t),i=to(t.d),o=i.length;return e?(n&&(r=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+Yl(r):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Yl(-s-1)+i,n&&(r=n-o)>0&&(i+=Yl(r))):s>=o?(i+=Yl(s+1-o),n&&(r=n-s-1)>0&&(i=i+"."+Yl(r))):((r=s+1)<o&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-o)>0&&(s+1===o&&(i+="."),i+=Yl(r))),t.s<0?"-"+i:i}function Y$(t,e){if(t.length>e)return t.length=e,!0}function AG(t){var e,n,r;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(ud+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return G$(o,i.toString())}else if(typeof i!="string")throw Error(ud+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,YMe.test(i))G$(o,i);else throw Error(ud+i)}if(s.prototype=Ze,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=AG,s.config=s.set=QMe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return s.config(t),s}function QMe(t){if(!t||typeof t!="object")throw Error(ti+"Object expected");var e,n,r,s=["precision",1,cp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<s.length;e+=3)if((r=t[n=s[e]])!==void 0)if(up(r)===r&&r>=s[e+1]&&r<=s[e+2])this[n]=r;else throw Error(ud+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(ud+n+": "+r);return this}var pO=AG(GMe);fa=new pO(1);const _n=pO;function XMe(t){return tDe(t)||eDe(t)||JMe(t)||ZMe()}function ZMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JMe(t,e){if(t){if(typeof t=="string")return NT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NT(t,e)}}function eDe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function tDe(t){if(Array.isArray(t))return NT(t)}function NT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var nDe=function(e){return e},TG={"@@functional/placeholder":!0},CG=function(e){return e===TG},Q$=function(e){return function n(){return arguments.length===0||arguments.length===1&&CG(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},rDe=function t(e,n){return e===1?n:Q$(function(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==TG}).length;return o>=e?n.apply(void 0,s):t(e-o,Q$(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=s.map(function(h){return CG(h)?c.shift():h});return n.apply(void 0,XMe(d).concat(c))}))})},iN=function(e){return rDe(e.length,e)},ST=function(e,n){for(var r=[],s=e;s<n;++s)r[s-e]=s;return r},sDe=iN(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),aDe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return nDe;var s=n.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},ET=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},PG=function(e){var n=null,r=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return n&&i.every(function(l,c){return l===n[c]})||(n=i,r=e.apply(void 0,i)),r}};function iDe(t){var e;return t===0?e=1:e=Math.floor(new _n(t).abs().log(10).toNumber())+1,e}function oDe(t,e,n){for(var r=new _n(t),s=0,i=[];r.lt(e)&&s<1e5;)i.push(r.toNumber()),r=r.add(n),s++;return i}var lDe=iN(function(t,e,n){var r=+t,s=+e;return r+n*(s-r)}),cDe=iN(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),uDe=iN(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const oN={rangeStep:oDe,getDigitCount:iDe,interpolateNumber:lDe,uninterpolateNumber:cDe,uninterpolateTruncation:uDe};function AT(t){return fDe(t)||hDe(t)||IG(t)||dDe()}function dDe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hDe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function fDe(t){if(Array.isArray(t))return TT(t)}function Vy(t,e){return gDe(t)||pDe(t,e)||IG(t,e)||mDe()}function mDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IG(t,e){if(t){if(typeof t=="string")return TT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TT(t,e)}}function TT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function pDe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,s=!1,i=void 0;try{for(var o=t[Symbol.iterator](),l;!(r=(l=o.next()).done)&&(n.push(l.value),!(e&&n.length===e));r=!0);}catch(c){s=!0,i=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(s)throw i}}return n}}function gDe(t){if(Array.isArray(t))return t}function kG(t){var e=Vy(t,2),n=e[0],r=e[1],s=n,i=r;return n>r&&(s=r,i=n),[s,i]}function OG(t,e,n){if(t.lte(0))return new _n(0);var r=oN.getDigitCount(t.toNumber()),s=new _n(10).pow(r),i=t.div(s),o=r!==1?.05:.1,l=new _n(Math.ceil(i.div(o).toNumber())).add(n).mul(o),c=l.mul(s);return e?c:new _n(Math.ceil(c))}function yDe(t,e,n){var r=1,s=new _n(t);if(!s.isint()&&n){var i=Math.abs(t);i<1?(r=new _n(10).pow(oN.getDigitCount(t)-1),s=new _n(Math.floor(s.div(r).toNumber())).mul(r)):i>1&&(s=new _n(Math.floor(t)))}else t===0?s=new _n(Math.floor((e-1)/2)):n||(s=new _n(Math.floor(t)));var o=Math.floor((e-1)/2),l=aDe(sDe(function(c){return s.add(new _n(c-o).mul(r)).toNumber()}),ST);return l(0,e)}function RG(t,e,n,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new _n(0),tickMin:new _n(0),tickMax:new _n(0)};var i=OG(new _n(e).sub(t).div(n-1),r,s),o;t<=0&&e>=0?o=new _n(0):(o=new _n(t).add(e).div(2),o=o.sub(new _n(o).mod(i)));var l=Math.ceil(o.sub(t).div(i).toNumber()),c=Math.ceil(new _n(e).sub(o).div(i).toNumber()),u=l+c+1;return u>n?RG(t,e,n,r,s+1):(u<n&&(c=e>0?c+(n-u):c,l=e>0?l:l+(n-u)),{step:i,tickMin:o.sub(new _n(l).mul(i)),tickMax:o.add(new _n(c).mul(i))})}function vDe(t){var e=Vy(t,2),n=e[0],r=e[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=kG([n,r]),c=Vy(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var h=d===1/0?[u].concat(AT(ST(0,s-1).map(function(){return 1/0}))):[].concat(AT(ST(0,s-1).map(function(){return-1/0})),[d]);return n>r?ET(h):h}if(u===d)return yDe(u,s,i);var f=RG(u,d,o,i),m=f.step,b=f.tickMin,g=f.tickMax,x=oN.rangeStep(b,g.add(new _n(.1).mul(m)),m);return n>r?ET(x):x}function xDe(t,e){var n=Vy(t,2),r=n[0],s=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=kG([r,s]),l=Vy(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[r,s];if(c===u)return[c];var d=Math.max(e,2),h=OG(new _n(u).sub(c).div(d-1),i,0),f=[].concat(AT(oN.rangeStep(new _n(c),new _n(u).sub(new _n(.99).mul(h)),h)),[u]);return r>s?ET(f):f}var bDe=PG(vDe),wDe=PG(xDe),_De="Invariant failed";function Ud(t,e){throw new Error(_De)}var jDe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function um(t){"@babel/helpers - typeof";return um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},um(t)}function Ew(){return Ew=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ew.apply(this,arguments)}function NDe(t,e){return TDe(t)||ADe(t,e)||EDe(t,e)||SDe()}function SDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EDe(t,e){if(t){if(typeof t=="string")return X$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X$(t,e)}}function X$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ADe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function TDe(t){if(Array.isArray(t))return t}function CDe(t,e){if(t==null)return{};var n=PDe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function PDe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function IDe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kDe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,LG(r.key),r)}}function ODe(t,e,n){return e&&kDe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function RDe(t,e,n){return e=Aw(e),MDe(t,MG()?Reflect.construct(e,n||[],Aw(t).constructor):e.apply(t,n))}function MDe(t,e){if(e&&(um(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DDe(t)}function DDe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function MG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MG=function(){return!!t})()}function Aw(t){return Aw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Aw(t)}function LDe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CT(t,e)}function CT(t,e){return CT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},CT(t,e)}function DG(t,e,n){return e=LG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LG(t){var e=$De(t,"string");return um(e)=="symbol"?e:e+""}function $De(t,e){if(um(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(um(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lN=function(t){function e(){return IDe(this,e),RDe(this,e,arguments)}return LDe(e,t),ODe(e,[{key:"render",value:function(){var r=this.props,s=r.offset,i=r.layout,o=r.width,l=r.dataKey,c=r.data,u=r.dataPointFormatter,d=r.xAxis,h=r.yAxis,f=CDe(r,jDe),m=ft(f,!1);this.props.direction==="x"&&d.type!=="number"&&Ud();var b=c.map(function(g){var x=u(g,l),w=x.x,y=x.y,A=x.value,T=x.errorVal;if(!T)return null;var v=[],S,j;if(Array.isArray(T)){var p=NDe(T,2);S=p[0],j=p[1]}else S=j=T;if(i==="vertical"){var E=d.scale,P=y+s,C=P+o,I=P-o,O=E(A-S),$=E(A+j);v.push({x1:$,y1:C,x2:$,y2:I}),v.push({x1:O,y1:P,x2:$,y2:P}),v.push({x1:O,y1:C,x2:O,y2:I})}else if(i==="horizontal"){var z=h.scale,H=w+s,M=H-o,F=H+o,L=z(A-S),W=z(A+j);v.push({x1:M,y1:W,x2:F,y2:W}),v.push({x1:H,y1:L,x2:H,y2:W}),v.push({x1:M,y1:L,x2:F,y2:L})}return D.createElement(en,Ew({className:"recharts-errorBar",key:"bar-".concat(v.map(function(ie){return"".concat(ie.x1,"-").concat(ie.x2,"-").concat(ie.y1,"-").concat(ie.y2)}))},m),v.map(function(ie){return D.createElement("line",Ew({},ie,{key:"line-".concat(ie.x1,"-").concat(ie.x2,"-").concat(ie.y1,"-").concat(ie.y2)}))}))});return D.createElement(en,{className:"recharts-errorBars"},b)}}])}(D.Component);DG(lN,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});DG(lN,"displayName","ErrorBar");function By(t){"@babel/helpers - typeof";return By=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},By(t)}function Z$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Au(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z$(Object(n),!0).forEach(function(r){FDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function FDe(t,e,n){return e=VDe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VDe(t){var e=BDe(t,"string");return By(e)=="symbol"?e:e+""}function BDe(t,e){if(By(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(By(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $G=function(e){var n=e.children,r=e.formattedGraphicalItems,s=e.legendWidth,i=e.legendContent,o=ua(n,pf);if(!o)return null;var l=pf.defaultProps,c=l!==void 0?Au(Au({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(r||[]).reduce(function(d,h){var f=h.item,m=h.props,b=m.sectors||m.data||[];return d.concat(b.map(function(g){return{type:o.props.iconType||f.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):u=(r||[]).map(function(d){var h=d.item,f=h.type.defaultProps,m=f!==void 0?Au(Au({},f),h.props):{},b=m.dataKey,g=m.name,x=m.legendType,w=m.hide;return{inactive:w,dataKey:b,type:c.iconType||x||"square",color:gO(h),value:g||b,payload:m}}),Au(Au(Au({},c),pf.getWithHeight(o,s)),{},{payload:u,item:o})};function Uy(t){"@babel/helpers - typeof";return Uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uy(t)}function J$(t){return WDe(t)||qDe(t)||zDe(t)||UDe()}function UDe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zDe(t,e){if(t){if(typeof t=="string")return PT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PT(t,e)}}function qDe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function WDe(t){if(Array.isArray(t))return PT(t)}function PT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function eF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function sr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eF(Object(n),!0).forEach(function(r){yf(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yf(t,e,n){return e=HDe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HDe(t){var e=KDe(t,"string");return Uy(e)=="symbol"?e:e+""}function KDe(t,e){if(Uy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Uy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kr(t,e,n){return $t(t)||$t(e)?n:Rr(e)?Sa(t,e,n):wt(e)?e(t):n}function Rg(t,e,n,r){var s=qMe(t,function(l){return kr(l,e)});if(n==="number"){var i=s.filter(function(l){return Ee(l)||parseFloat(l)});return i.length?[aN(i),xc(i)]:[1/0,-1/0]}var o=r?s.filter(function(l){return!$t(l)}):s;return o.map(function(l){return Rr(l)||l instanceof Date?l:""})}var GDe=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var d=u>0?s[u-1].coordinate:s[l-1].coordinate,h=s[u].coordinate,f=u>=l-1?s[0].coordinate:s[u+1].coordinate,m=void 0;if(Ts(h-d)!==Ts(f-h)){var b=[];if(Ts(f-h)===Ts(c[1]-c[0])){m=f;var g=h+c[1]-c[0];b[0]=Math.min(g,(g+d)/2),b[1]=Math.max(g,(g+d)/2)}else{m=d;var x=f+c[1]-c[0];b[0]=Math.min(h,(x+h)/2),b[1]=Math.max(h,(x+h)/2)}var w=[Math.min(h,(m+h)/2),Math.max(h,(m+h)/2)];if(e>w[0]&&e<=w[1]||e>=b[0]&&e<=b[1]){o=s[u].index;break}}else{var y=Math.min(d,f),A=Math.max(d,f);if(e>(y+h)/2&&e<=(A+h)/2){o=s[u].index;break}}}else for(var T=0;T<l;T++)if(T===0&&e<=(r[T].coordinate+r[T+1].coordinate)/2||T>0&&T<l-1&&e>(r[T].coordinate+r[T-1].coordinate)/2&&e<=(r[T].coordinate+r[T+1].coordinate)/2||T===l-1&&e>(r[T].coordinate+r[T-1].coordinate)/2){o=r[T].index;break}return o},gO=function(e){var n,r=e,s=r.type.displayName,i=(n=e.type)!==null&&n!==void 0&&n.defaultProps?sr(sr({},e.type.defaultProps),e.props):e.props,o=i.stroke,l=i.fill,c;switch(s){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},YDe=function(e){var n=e.barSize,r=e.totalSize,s=e.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var d=i[l[c]].stackGroups,h=Object.keys(d),f=0,m=h.length;f<m;f++){var b=d[h[f]],g=b.items,x=b.cateAxisId,w=g.filter(function(j){return Jo(j.type).indexOf("Bar")>=0});if(w&&w.length){var y=w[0].type.defaultProps,A=y!==void 0?sr(sr({},y),w[0].props):w[0].props,T=A.barSize,v=A[x];o[v]||(o[v]=[]);var S=$t(T)?n:T;o[v].push({item:w[0],stackList:w.slice(1),barSize:$t(S)?void 0:Cs(S,r,0)})}}return o},QDe=function(e){var n=e.barGap,r=e.barCategoryGap,s=e.bandSize,i=e.sizeList,o=i===void 0?[]:i,l=e.maxBarSize,c=o.length;if(c<1)return null;var u=Cs(n,s,0,!0),d,h=[];if(o[0].barSize===+o[0].barSize){var f=!1,m=s/c,b=o.reduce(function(T,v){return T+v.barSize||0},0);b+=(c-1)*u,b>=s&&(b-=(c-1)*u,u=0),b>=s&&m>0&&(f=!0,m*=.9,b=c*m);var g=(s-b)/2>>0,x={offset:g-u,size:0};d=o.reduce(function(T,v){var S={item:v.item,position:{offset:x.offset+x.size+u,size:f?m:v.barSize}},j=[].concat(J$(T),[S]);return x=j[j.length-1].position,v.stackList&&v.stackList.length&&v.stackList.forEach(function(p){j.push({item:p,position:x})}),j},h)}else{var w=Cs(r,s,0,!0);s-2*w-(c-1)*u<=0&&(u=0);var y=(s-2*w-(c-1)*u)/c;y>1&&(y>>=0);var A=l===+l?Math.min(y,l):y;d=o.reduce(function(T,v,S){var j=[].concat(J$(T),[{item:v.item,position:{offset:w+(y+u)*S+(y-A)/2,size:A}}]);return v.stackList&&v.stackList.length&&v.stackList.forEach(function(p){j.push({item:p,position:j[j.length-1].position})}),j},h)}return d},XDe=function(e,n,r,s){var i=r.children,o=r.width,l=r.margin,c=o-(l.left||0)-(l.right||0),u=$G({children:i,legendWidth:c});if(u){var d=s||{},h=d.width,f=d.height,m=u.align,b=u.verticalAlign,g=u.layout;if((g==="vertical"||g==="horizontal"&&b==="middle")&&m!=="center"&&Ee(e[m]))return sr(sr({},e),{},yf({},m,e[m]+(h||0)));if((g==="horizontal"||g==="vertical"&&m==="center")&&b!=="middle"&&Ee(e[b]))return sr(sr({},e),{},yf({},b,e[b]+(f||0)))}return e},ZDe=function(e,n,r){return $t(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},FG=function(e,n,r,s,i){var o=n.props.children,l=Ya(o,lN).filter(function(u){return ZDe(s,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var h=kr(d,r);if($t(h))return u;var f=Array.isArray(h)?[aN(h),xc(h)]:[h,h],m=c.reduce(function(b,g){var x=kr(d,g,0),w=f[0]-Math.abs(Array.isArray(x)?x[0]:x),y=f[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(w,b[0]),Math.max(y,b[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},JDe=function(e,n,r,s,i){var o=n.map(function(l){return FG(e,l,r,i,s)}).filter(function(l){return!$t(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},VG=function(e,n,r,s,i){var o=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&FG(e,c,u,s)||Rg(e,u,r,i)});if(r==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,h=u.length;d<h;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},BG=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},UG=function(e,n,r,s){if(s)return e.map(function(c){return c.coordinate});var i,o,l=e.map(function(c){return c.coordinate===n&&(i=!0),c.coordinate===r&&(o=!0),c.coordinate});return i||l.push(n),o||l.push(r),l},Yo=function(e,n,r){if(!e)return null;var s=e.scale,i=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?s.bandwidth()/2:2,u=(n||r)&&o==="category"&&s.bandwidth?s.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Ts(l[0]-l[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(h){var f=i?i.indexOf(h):h;return{coordinate:s(f)+u,value:h,offset:u}});return d.filter(function(h){return!rp(h.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(h,f){return{coordinate:s(h)+u,value:h,index:f,offset:u}}):s.ticks&&!r?s.ticks(e.tickCount).map(function(h){return{coordinate:s(h)+u,value:h,offset:u}}):s.domain().map(function(h,f){return{coordinate:s(h)+u,value:i?i[h]:h,index:f,offset:u}})},bS=new WeakMap,sb=function(e,n){if(typeof n!="function")return e;bS.has(e)||bS.set(e,new WeakMap);var r=bS.get(e);if(r.has(n))return r.get(n);var s=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,s),s},zG=function(e,n,r){var s=e.scale,i=e.type,o=e.layout,l=e.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Ry(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:ww(),realScaleType:"linear"}:i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Og(),realScaleType:"point"}:i==="category"?{scale:Ry(),realScaleType:"band"}:{scale:ww(),realScaleType:"linear"};if($d(s)){var c="scale".concat(qj(s));return{scale:(K$[c]||Og)(),realScaleType:K$[c]?c:"point"}}return wt(s)?{scale:s}:{scale:Og(),realScaleType:"point"}},tF=1e-4,qG=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,s=e.range(),i=Math.min(s[0],s[1])-tF,o=Math.max(s[0],s[1])+tF,l=e(n[0]),c=e(n[r-1]);(l<i||l>o||c<i||c>o)&&e.domain([n[0],n[r-1]])}},e4e=function(e,n){if(!e)return null;for(var r=0,s=e.length;r<s;r++)if(e[r].item===n)return e[r].position;return null},t4e=function(e,n){if(!n||n.length!==2||!Ee(n[0])||!Ee(n[1]))return e;var r=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]),i=[e[0],e[1]];return(!Ee(e[0])||e[0]<r)&&(i[0]=r),(!Ee(e[1])||e[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<r&&(i[1]=r),i},n4e=function(e){var n=e.length;if(!(n<=0))for(var r=0,s=e[0].length;r<s;++r)for(var i=0,o=0,l=0;l<n;++l){var c=rp(e[l][r][1])?e[l][r][0]:e[l][r][1];c>=0?(e[l][r][0]=i,e[l][r][1]=i+c,i=e[l][r][1]):(e[l][r][0]=o,e[l][r][1]=o+c,o=e[l][r][1])}},r4e=function(e){var n=e.length;if(!(n<=0))for(var r=0,s=e[0].length;r<s;++r)for(var i=0,o=0;o<n;++o){var l=rp(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=i,e[o][r][1]=i+l,i=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},s4e={sign:n4e,expand:j1e,none:tm,silhouette:N1e,wiggle:S1e,positive:r4e},a4e=function(e,n,r){var s=n.map(function(l){return l.props.dataKey}),i=s4e[r],o=_1e().keys(s).value(function(l,c){return+kr(l,c,0)}).order(tT).offset(i);return o(e)},i4e=function(e,n,r,s,i,o){if(!e)return null;var l=o?n.reverse():n,c={},u=l.reduce(function(h,f){var m,b=(m=f.type)!==null&&m!==void 0&&m.defaultProps?sr(sr({},f.type.defaultProps),f.props):f.props,g=b.stackId,x=b.hide;if(x)return h;var w=b[r],y=h[w]||{hasStack:!1,stackGroups:{}};if(Rr(g)){var A=y.stackGroups[g]||{numericAxisId:r,cateAxisId:s,items:[]};A.items.push(f),y.hasStack=!0,y.stackGroups[g]=A}else y.stackGroups[sp("_stackId_")]={numericAxisId:r,cateAxisId:s,items:[f]};return sr(sr({},h),{},yf({},w,y))},c),d={};return Object.keys(u).reduce(function(h,f){var m=u[f];if(m.hasStack){var b={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(g,x){var w=m.stackGroups[x];return sr(sr({},g),{},yf({},x,{numericAxisId:r,cateAxisId:s,items:w.items,stackedData:a4e(e,w.items,i)}))},b)}return sr(sr({},h),{},yf({},f,m))},d)},WG=function(e,n){var r=n.realScaleType,s=n.type,i=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=bDe(u,i,l);return e.domain([aN(d),xc(d)]),{niceTicks:d}}if(i&&s==="number"){var h=e.domain(),f=wDe(h,i,l);return{niceTicks:f}}return null};function nF(t){var e=t.axis,n=t.ticks,r=t.bandSize,s=t.entry,i=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!$t(s[e.dataKey])){var l=ew(n,"value",s[e.dataKey]);if(l)return l.coordinate+r/2}return n[i]?n[i].coordinate+r/2:null}var c=kr(s,$t(o)?e.dataKey:o);return $t(c)?null:e.scale(c)}var rF=function(e){var n=e.axis,r=e.ticks,s=e.offset,i=e.bandSize,o=e.entry,l=e.index;if(n.type==="category")return r[l]?r[l].coordinate+s:null;var c=kr(o,n.dataKey,n.domain[l]);return $t(c)?null:n.scale(c)-i/2+s},o4e=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var s=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return s<=0&&i>=0?0:i<0?i:s}return r[0]},l4e=function(e,n){var r,s=(r=e.type)!==null&&r!==void 0&&r.defaultProps?sr(sr({},e.type.defaultProps),e.props):e.props,i=s.stackId;if(Rr(i)){var o=n[i];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},c4e=function(e){return e.reduce(function(n,r){return[aN(r.concat([n[0]]).filter(Ee)),xc(r.concat([n[1]]).filter(Ee))]},[1/0,-1/0])},HG=function(e,n,r){return Object.keys(e).reduce(function(s,i){var o=e[i],l=o.stackedData,c=l.reduce(function(u,d){var h=c4e(d.slice(n,r+1));return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},sF=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,aF=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,IT=function(e,n,r){if(wt(e))return e(n,r);if(!Array.isArray(e))return n;var s=[];if(Ee(e[0]))s[0]=r?e[0]:Math.min(e[0],n[0]);else if(sF.test(e[0])){var i=+sF.exec(e[0])[1];s[0]=n[0]-i}else wt(e[0])?s[0]=e[0](n[0]):s[0]=n[0];if(Ee(e[1]))s[1]=r?e[1]:Math.max(e[1],n[1]);else if(aF.test(e[1])){var o=+aF.exec(e[1])[1];s[1]=n[1]+o}else wt(e[1])?s[1]=e[1](n[1]):s[1]=n[1];return s},Tw=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!r||s>0)return s}if(e&&n&&n.length>=2){for(var i=qk(n,function(h){return h.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],d=i[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},iF=function(e,n,r){return!e||!e.length||cm(e,Sa(r,"type.defaultProps.domain"))?n:e},KG=function(e,n){var r=e.type.defaultProps?sr(sr({},e.type.defaultProps),e.props):e.props,s=r.dataKey,i=r.name,o=r.unit,l=r.formatter,c=r.tooltipType,u=r.chartType,d=r.hide;return sr(sr({},ft(e,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:gO(e),value:kr(n,s),type:c,payload:n,chartType:u,hide:d})};function zy(t){"@babel/helpers - typeof";return zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zy(t)}function oF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function $o(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oF(Object(n),!0).forEach(function(r){GG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GG(t,e,n){return e=u4e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u4e(t){var e=d4e(t,"string");return zy(e)=="symbol"?e:e+""}function d4e(t,e){if(zy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(zy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function h4e(t,e){return g4e(t)||p4e(t,e)||m4e(t,e)||f4e()}function f4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m4e(t,e){if(t){if(typeof t=="string")return lF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lF(t,e)}}function lF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p4e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function g4e(t){if(Array.isArray(t))return t}var Cw=Math.PI/180,y4e=function(e){return e*180/Math.PI},On=function(e,n,r,s){return{x:e+Math.cos(-Cw*s)*r,y:n+Math.sin(-Cw*s)*r}},YG=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},v4e=function(e,n,r,s,i){var o=e.width,l=e.height,c=e.startAngle,u=e.endAngle,d=Cs(e.cx,o,o/2),h=Cs(e.cy,l,l/2),f=YG(o,l,r),m=Cs(e.innerRadius,f,0),b=Cs(e.outerRadius,f,f*.8),g=Object.keys(n);return g.reduce(function(x,w){var y=n[w],A=y.domain,T=y.reversed,v;if($t(y.range))s==="angleAxis"?v=[c,u]:s==="radiusAxis"&&(v=[m,b]),T&&(v=[v[1],v[0]]);else{v=y.range;var S=v,j=h4e(S,2);c=j[0],u=j[1]}var p=zG(y,i),E=p.realScaleType,P=p.scale;P.domain(A).range(v),qG(P);var C=WG(P,$o($o({},y),{},{realScaleType:E})),I=$o($o($o({},y),C),{},{range:v,radius:b,realScaleType:E,scale:P,cx:d,cy:h,innerRadius:m,outerRadius:b,startAngle:c,endAngle:u});return $o($o({},x),{},GG({},w,I))},{})},x4e=function(e,n){var r=e.x,s=e.y,i=n.x,o=n.y;return Math.sqrt(Math.pow(r-i,2)+Math.pow(s-o,2))},b4e=function(e,n){var r=e.x,s=e.y,i=n.cx,o=n.cy,l=x4e({x:r,y:s},{x:i,y:o});if(l<=0)return{radius:l};var c=(r-i)/l,u=Math.acos(c);return s>o&&(u=2*Math.PI-u),{radius:l,angle:y4e(u),angleInRadian:u}},w4e=function(e){var n=e.startAngle,r=e.endAngle,s=Math.floor(n/360),i=Math.floor(r/360),o=Math.min(s,i);return{startAngle:n-o*360,endAngle:r-o*360}},_4e=function(e,n){var r=n.startAngle,s=n.endAngle,i=Math.floor(r/360),o=Math.floor(s/360),l=Math.min(i,o);return e+l*360},cF=function(e,n){var r=e.x,s=e.y,i=b4e({x:r,y:s},n),o=i.radius,l=i.angle,c=n.innerRadius,u=n.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=w4e(n),h=d.startAngle,f=d.endAngle,m=l,b;if(h<=f){for(;m>f;)m-=360;for(;m<h;)m+=360;b=m>=h&&m<=f}else{for(;m>h;)m-=360;for(;m<f;)m+=360;b=m>=f&&m<=h}return b?$o($o({},n),{},{radius:o,angle:_4e(m,n)}):null},QG=function(e){return!N.isValidElement(e)&&!wt(e)&&typeof e!="boolean"?e.className:""};function qy(t){"@babel/helpers - typeof";return qy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qy(t)}var j4e=["offset"];function N4e(t){return T4e(t)||A4e(t)||E4e(t)||S4e()}function S4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E4e(t,e){if(t){if(typeof t=="string")return kT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kT(t,e)}}function A4e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function T4e(t){if(Array.isArray(t))return kT(t)}function kT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function C4e(t,e){if(t==null)return{};var n=P4e(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function P4e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function uF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Tr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uF(Object(n),!0).forEach(function(r){I4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function I4e(t,e,n){return e=k4e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k4e(t){var e=O4e(t,"string");return qy(e)=="symbol"?e:e+""}function O4e(t,e){if(qy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wy(){return Wy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wy.apply(this,arguments)}var R4e=function(e){var n=e.value,r=e.formatter,s=$t(e.children)?n:e.children;return wt(r)?r(s):s},M4e=function(e,n){var r=Ts(n-e),s=Math.min(Math.abs(n-e),360);return r*s},D4e=function(e,n,r){var s=e.position,i=e.viewBox,o=e.offset,l=e.className,c=i,u=c.cx,d=c.cy,h=c.innerRadius,f=c.outerRadius,m=c.startAngle,b=c.endAngle,g=c.clockWise,x=(h+f)/2,w=M4e(m,b),y=w>=0?1:-1,A,T;s==="insideStart"?(A=m+y*o,T=g):s==="insideEnd"?(A=b-y*o,T=!g):s==="end"&&(A=b+y*o,T=g),T=w<=0?T:!T;var v=On(u,d,x,A),S=On(u,d,x,A+(T?1:-1)*359),j="M".concat(v.x,",").concat(v.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(T?0:1,`,
    `).concat(S.x,",").concat(S.y),p=$t(e.id)?sp("recharts-radial-line-"):e.id;return D.createElement("text",Wy({},r,{dominantBaseline:"central",className:Lt("recharts-radial-bar-label",l)}),D.createElement("defs",null,D.createElement("path",{id:p,d:j})),D.createElement("textPath",{xlinkHref:"#".concat(p)},n))},L4e=function(e){var n=e.viewBox,r=e.offset,s=e.position,i=n,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,h=i.endAngle,f=(d+h)/2;if(s==="outside"){var m=On(o,l,u+r,f),b=m.x,g=m.y;return{x:b,y:g,textAnchor:b>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var x=(c+u)/2,w=On(o,l,x,f),y=w.x,A=w.y;return{x:y,y:A,textAnchor:"middle",verticalAnchor:"middle"}},$4e=function(e){var n=e.viewBox,r=e.parentViewBox,s=e.offset,i=e.position,o=n,l=o.x,c=o.y,u=o.width,d=o.height,h=d>=0?1:-1,f=h*s,m=h>0?"end":"start",b=h>0?"start":"end",g=u>=0?1:-1,x=g*s,w=g>0?"end":"start",y=g>0?"start":"end";if(i==="top"){var A={x:l+u/2,y:c-h*s,textAnchor:"middle",verticalAnchor:m};return Tr(Tr({},A),r?{height:Math.max(c-r.y,0),width:u}:{})}if(i==="bottom"){var T={x:l+u/2,y:c+d+f,textAnchor:"middle",verticalAnchor:b};return Tr(Tr({},T),r?{height:Math.max(r.y+r.height-(c+d),0),width:u}:{})}if(i==="left"){var v={x:l-x,y:c+d/2,textAnchor:w,verticalAnchor:"middle"};return Tr(Tr({},v),r?{width:Math.max(v.x-r.x,0),height:d}:{})}if(i==="right"){var S={x:l+u+x,y:c+d/2,textAnchor:y,verticalAnchor:"middle"};return Tr(Tr({},S),r?{width:Math.max(r.x+r.width-S.x,0),height:d}:{})}var j=r?{width:u,height:d}:{};return i==="insideLeft"?Tr({x:l+x,y:c+d/2,textAnchor:y,verticalAnchor:"middle"},j):i==="insideRight"?Tr({x:l+u-x,y:c+d/2,textAnchor:w,verticalAnchor:"middle"},j):i==="insideTop"?Tr({x:l+u/2,y:c+f,textAnchor:"middle",verticalAnchor:b},j):i==="insideBottom"?Tr({x:l+u/2,y:c+d-f,textAnchor:"middle",verticalAnchor:m},j):i==="insideTopLeft"?Tr({x:l+x,y:c+f,textAnchor:y,verticalAnchor:b},j):i==="insideTopRight"?Tr({x:l+u-x,y:c+f,textAnchor:w,verticalAnchor:b},j):i==="insideBottomLeft"?Tr({x:l+x,y:c+d-f,textAnchor:y,verticalAnchor:m},j):i==="insideBottomRight"?Tr({x:l+u-x,y:c+d-f,textAnchor:w,verticalAnchor:m},j):Jm(i)&&(Ee(i.x)||Uu(i.x))&&(Ee(i.y)||Uu(i.y))?Tr({x:l+Cs(i.x,u),y:c+Cs(i.y,d),textAnchor:"end",verticalAnchor:"end"},j):Tr({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},j)},F4e=function(e){return"cx"in e&&Ee(e.cx)};function zr(t){var e=t.offset,n=e===void 0?5:e,r=C4e(t,j4e),s=Tr({offset:n},r),i=s.viewBox,o=s.position,l=s.value,c=s.children,u=s.content,d=s.className,h=d===void 0?"":d,f=s.textBreakAll;if(!i||$t(l)&&$t(c)&&!N.isValidElement(u)&&!wt(u))return null;if(N.isValidElement(u))return N.cloneElement(u,s);var m;if(wt(u)){if(m=N.createElement(u,s),N.isValidElement(m))return m}else m=R4e(s);var b=F4e(i),g=ft(s,!0);if(b&&(o==="insideStart"||o==="insideEnd"||o==="end"))return D4e(s,m,g);var x=b?L4e(s):$4e(s);return D.createElement(Vd,Wy({className:Lt("recharts-label",h)},g,x,{breakAll:f}),m)}zr.displayName="Label";var XG=function(e){var n=e.cx,r=e.cy,s=e.angle,i=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,u=e.innerRadius,d=e.outerRadius,h=e.x,f=e.y,m=e.top,b=e.left,g=e.width,x=e.height,w=e.clockWise,y=e.labelViewBox;if(y)return y;if(Ee(g)&&Ee(x)){if(Ee(h)&&Ee(f))return{x:h,y:f,width:g,height:x};if(Ee(m)&&Ee(b))return{x:m,y:b,width:g,height:x}}return Ee(h)&&Ee(f)?{x:h,y:f,width:0,height:0}:Ee(n)&&Ee(r)?{cx:n,cy:r,startAngle:i||s||0,endAngle:o||s||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:w}:e.viewBox?e.viewBox:{}},V4e=function(e,n){return e?e===!0?D.createElement(zr,{key:"label-implicit",viewBox:n}):Rr(e)?D.createElement(zr,{key:"label-implicit",viewBox:n,value:e}):N.isValidElement(e)?e.type===zr?N.cloneElement(e,{key:"label-implicit",viewBox:n}):D.createElement(zr,{key:"label-implicit",content:e,viewBox:n}):wt(e)?D.createElement(zr,{key:"label-implicit",content:e,viewBox:n}):Jm(e)?D.createElement(zr,Wy({viewBox:n},e,{key:"label-implicit"})):null:null},B4e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var s=e.children,i=XG(e),o=Ya(s,zr).map(function(c,u){return N.cloneElement(c,{viewBox:n||i,key:"label-".concat(u)})});if(!r)return o;var l=V4e(e.label,n||i);return[l].concat(N4e(o))};zr.parseViewBox=XG;zr.renderCallByParent=B4e;function U4e(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var z4e=U4e;const q4e=pn(z4e);function Hy(t){"@babel/helpers - typeof";return Hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hy(t)}var W4e=["valueAccessor"],H4e=["data","dataKey","clockWise","id","textBreakAll"];function K4e(t){return X4e(t)||Q4e(t)||Y4e(t)||G4e()}function G4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y4e(t,e){if(t){if(typeof t=="string")return OT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OT(t,e)}}function Q4e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function X4e(t){if(Array.isArray(t))return OT(t)}function OT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Pw(){return Pw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pw.apply(this,arguments)}function dF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function hF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dF(Object(n),!0).forEach(function(r){Z4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Z4e(t,e,n){return e=J4e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J4e(t){var e=eLe(t,"string");return Hy(e)=="symbol"?e:e+""}function eLe(t,e){if(Hy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Hy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fF(t,e){if(t==null)return{};var n=tLe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function tLe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var nLe=function(e){return Array.isArray(e.value)?q4e(e.value):e.value};function tl(t){var e=t.valueAccessor,n=e===void 0?nLe:e,r=fF(t,W4e),s=r.data,i=r.dataKey,o=r.clockWise,l=r.id,c=r.textBreakAll,u=fF(r,H4e);return!s||!s.length?null:D.createElement(en,{className:"recharts-label-list"},s.map(function(d,h){var f=$t(i)?n(d,h):kr(d&&d.payload,i),m=$t(l)?{}:{id:"".concat(l,"-").concat(h)};return D.createElement(zr,Pw({},ft(d,!0),u,m,{parentViewBox:d.parentViewBox,value:f,textBreakAll:c,viewBox:zr.parseViewBox($t(o)?d:hF(hF({},d),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}tl.displayName="LabelList";function rLe(t,e){return t?t===!0?D.createElement(tl,{key:"labelList-implicit",data:e}):D.isValidElement(t)||wt(t)?D.createElement(tl,{key:"labelList-implicit",data:e,content:t}):Jm(t)?D.createElement(tl,Pw({data:e},t,{key:"labelList-implicit"})):null:null}function sLe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,s=Ya(r,tl).map(function(o,l){return N.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!n)return s;var i=rLe(t.label,e);return[i].concat(K4e(s))}tl.renderCallByParent=sLe;function Ky(t){"@babel/helpers - typeof";return Ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ky(t)}function RT(){return RT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RT.apply(this,arguments)}function mF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function pF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mF(Object(n),!0).forEach(function(r){aLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aLe(t,e,n){return e=iLe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iLe(t){var e=oLe(t,"string");return Ky(e)=="symbol"?e:e+""}function oLe(t,e){if(Ky(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ky(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lLe=function(e,n){var r=Ts(n-e),s=Math.min(Math.abs(n-e),359.999);return r*s},ab=function(e){var n=e.cx,r=e.cy,s=e.radius,i=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,d=c*(l?1:-1)+s,h=Math.asin(c/d)/Cw,f=u?i:i+o*h,m=On(n,r,d,f),b=On(n,r,s,f),g=u?i-o*h:i,x=On(n,r,d*Math.cos(h*Cw),g);return{center:m,circleTangency:b,lineTangency:x,theta:h}},ZG=function(e){var n=e.cx,r=e.cy,s=e.innerRadius,i=e.outerRadius,o=e.startAngle,l=e.endAngle,c=lLe(o,l),u=o+c,d=On(n,r,i,o),h=On(n,r,i,u),f="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(s>0){var m=On(n,r,s,o),b=On(n,r,s,u);f+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else f+="L ".concat(n,",").concat(r," Z");return f},cLe=function(e){var n=e.cx,r=e.cy,s=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,h=Ts(d-u),f=ab({cx:n,cy:r,radius:i,angle:u,sign:h,cornerRadius:o,cornerIsExternal:c}),m=f.circleTangency,b=f.lineTangency,g=f.theta,x=ab({cx:n,cy:r,radius:i,angle:d,sign:-h,cornerRadius:o,cornerIsExternal:c}),w=x.circleTangency,y=x.lineTangency,A=x.theta,T=c?Math.abs(u-d):Math.abs(u-d)-g-A;if(T<0)return l?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):ZG({cx:n,cy:r,innerRadius:s,outerRadius:i,startAngle:u,endAngle:d});var v="M ".concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(T>180),",").concat(+(h<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(y.x,",").concat(y.y,`
  `);if(s>0){var S=ab({cx:n,cy:r,radius:s,angle:u,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),j=S.circleTangency,p=S.lineTangency,E=S.theta,P=ab({cx:n,cy:r,radius:s,angle:d,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),C=P.circleTangency,I=P.lineTangency,O=P.theta,$=c?Math.abs(u-d):Math.abs(u-d)-E-O;if($<0&&o===0)return"".concat(v,"L").concat(n,",").concat(r,"Z");v+="L".concat(I.x,",").concat(I.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(C.x,",").concat(C.y,`
      A`).concat(s,",").concat(s,",0,").concat(+($>180),",").concat(+(h>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(p.x,",").concat(p.y,"Z")}else v+="L".concat(n,",").concat(r,"Z");return v},uLe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},JG=function(e){var n=pF(pF({},uLe),e),r=n.cx,s=n.cy,i=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,h=n.endAngle,f=n.className;if(o<i||d===h)return null;var m=Lt("recharts-sector",f),b=o-i,g=Cs(l,b,0,!0),x;return g>0&&Math.abs(d-h)<360?x=cLe({cx:r,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(g,b/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:h}):x=ZG({cx:r,cy:s,innerRadius:i,outerRadius:o,startAngle:d,endAngle:h}),D.createElement("path",RT({},ft(n,!0),{className:m,d:x,role:"img"}))};function Gy(t){"@babel/helpers - typeof";return Gy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gy(t)}function MT(){return MT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MT.apply(this,arguments)}function gF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function yF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gF(Object(n),!0).forEach(function(r){dLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dLe(t,e,n){return e=hLe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hLe(t){var e=fLe(t,"string");return Gy(e)=="symbol"?e:e+""}function fLe(t,e){if(Gy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Gy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vF={curveBasisClosed:d1e,curveBasisOpen:h1e,curveBasis:u1e,curveBumpX:QNe,curveBumpY:XNe,curveLinearClosed:f1e,curveLinear:Hj,curveMonotoneX:m1e,curveMonotoneY:p1e,curveNatural:g1e,curveStep:y1e,curveStepAfter:x1e,curveStepBefore:v1e},ib=function(e){return e.x===+e.x&&e.y===+e.y},zp=function(e){return e.x},qp=function(e){return e.y},mLe=function(e,n){if(wt(e))return e;var r="curve".concat(qj(e));return(r==="curveMonotone"||r==="curveBump")&&n?vF["".concat(r).concat(n==="vertical"?"Y":"X")]:vF[r]||Hj},pLe=function(e){var n=e.type,r=n===void 0?"linear":n,s=e.points,i=s===void 0?[]:s,o=e.baseLine,l=e.layout,c=e.connectNulls,u=c===void 0?!1:c,d=mLe(r,l),h=u?i.filter(function(g){return ib(g)}):i,f;if(Array.isArray(o)){var m=u?o.filter(function(g){return ib(g)}):o,b=h.map(function(g,x){return yF(yF({},g),{},{base:m[x]})});return l==="vertical"?f=Qx().y(qp).x1(zp).x0(function(g){return g.base.x}):f=Qx().x(zp).y1(qp).y0(function(g){return g.base.y}),f.defined(ib).curve(d),f(b)}return l==="vertical"&&Ee(o)?f=Qx().y(qp).x1(zp).x0(o):Ee(o)?f=Qx().x(zp).y1(qp).y0(o):f=KH().x(zp).y(qp),f.defined(ib).curve(d),f(h)},vf=function(e){var n=e.className,r=e.points,s=e.path,i=e.pathRef;if((!r||!r.length)&&!s)return null;var o=r&&r.length?pLe(e):s;return N.createElement("path",MT({},ft(e,!1),tw(e),{className:Lt("recharts-curve",n),d:o,ref:i}))},eY={exports:{}},gLe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",yLe=gLe,vLe=yLe;function tY(){}function nY(){}nY.resetWarningCache=tY;var xLe=function(){function t(r,s,i,o,l,c){if(c!==vLe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:nY,resetWarningCache:tY};return n.PropTypes=n,n};eY.exports=xLe();var bLe=eY.exports;const hn=pn(bLe);var wLe=Object.getOwnPropertyNames,_Le=Object.getOwnPropertySymbols,jLe=Object.prototype.hasOwnProperty;function xF(t,e){return function(r,s,i){return t(r,s,i)&&e(r,s,i)}}function ob(t){return function(n,r,s){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,s);var i=s.cache,o=i.get(n),l=i.get(r);if(o&&l)return o===r&&l===n;i.set(n,r),i.set(r,n);var c=t(n,r,s);return i.delete(n),i.delete(r),c}}function bF(t){return wLe(t).concat(_Le(t))}var NLe=Object.hasOwn||function(t,e){return jLe.call(t,e)};function ah(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var SLe="__v",ELe="__o",ALe="_owner",wF=Object.getOwnPropertyDescriptor,_F=Object.keys;function TLe(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function CLe(t,e){return ah(t.getTime(),e.getTime())}function PLe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function ILe(t,e){return t===e}function jF(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var s=new Array(r),i=t.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var u=e.entries(),d=!1,h=0;(l=u.next())&&!l.done;){if(s[h]){h++;continue}var f=o.value,m=l.value;if(n.equals(f[0],m[0],c,h,t,e,n)&&n.equals(f[1],m[1],f[0],m[0],t,e,n)){d=s[h]=!0;break}h++}if(!d)return!1;c++}return!0}var kLe=ah;function OLe(t,e,n){var r=_F(t),s=r.length;if(_F(e).length!==s)return!1;for(;s-- >0;)if(!rY(t,e,n,r[s]))return!1;return!0}function Wp(t,e,n){var r=bF(t),s=r.length;if(bF(e).length!==s)return!1;for(var i,o,l;s-- >0;)if(i=r[s],!rY(t,e,n,i)||(o=wF(t,i),l=wF(e,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function RLe(t,e){return ah(t.valueOf(),e.valueOf())}function MLe(t,e){return t.source===e.source&&t.flags===e.flags}function NF(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var s=new Array(r),i=t.values(),o,l;(o=i.next())&&!o.done;){for(var c=e.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!s[d]&&n.equals(o.value,l.value,o.value,l.value,t,e,n)){u=s[d]=!0;break}d++}if(!u)return!1}return!0}function DLe(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function LLe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function rY(t,e,n,r){return(r===ALe||r===ELe||r===SLe)&&(t.$$typeof||e.$$typeof)?!0:NLe(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var $Le="[object Arguments]",FLe="[object Boolean]",VLe="[object Date]",BLe="[object Error]",ULe="[object Map]",zLe="[object Number]",qLe="[object Object]",WLe="[object RegExp]",HLe="[object Set]",KLe="[object String]",GLe="[object URL]",YLe=Array.isArray,SF=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,EF=Object.assign,QLe=Object.prototype.toString.call.bind(Object.prototype.toString);function XLe(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,s=t.areFunctionsEqual,i=t.areMapsEqual,o=t.areNumbersEqual,l=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,d=t.areSetsEqual,h=t.areTypedArraysEqual,f=t.areUrlsEqual;return function(b,g,x){if(b===g)return!0;if(b==null||g==null)return!1;var w=typeof b;if(w!==typeof g)return!1;if(w!=="object")return w==="number"?o(b,g,x):w==="function"?s(b,g,x):!1;var y=b.constructor;if(y!==g.constructor)return!1;if(y===Object)return l(b,g,x);if(YLe(b))return e(b,g,x);if(SF!=null&&SF(b))return h(b,g,x);if(y===Date)return n(b,g,x);if(y===RegExp)return u(b,g,x);if(y===Map)return i(b,g,x);if(y===Set)return d(b,g,x);var A=QLe(b);return A===VLe?n(b,g,x):A===WLe?u(b,g,x):A===ULe?i(b,g,x):A===HLe?d(b,g,x):A===qLe?typeof b.then!="function"&&typeof g.then!="function"&&l(b,g,x):A===GLe?f(b,g,x):A===BLe?r(b,g,x):A===$Le?l(b,g,x):A===FLe||A===zLe||A===KLe?c(b,g,x):!1}}function ZLe(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,s={areArraysEqual:r?Wp:TLe,areDatesEqual:CLe,areErrorsEqual:PLe,areFunctionsEqual:ILe,areMapsEqual:r?xF(jF,Wp):jF,areNumbersEqual:kLe,areObjectsEqual:r?Wp:OLe,arePrimitiveWrappersEqual:RLe,areRegExpsEqual:MLe,areSetsEqual:r?xF(NF,Wp):NF,areTypedArraysEqual:r?Wp:DLe,areUrlsEqual:LLe};if(n&&(s=EF({},s,n(s))),e){var i=ob(s.areArraysEqual),o=ob(s.areMapsEqual),l=ob(s.areObjectsEqual),c=ob(s.areSetsEqual);s=EF({},s,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return s}function JLe(t){return function(e,n,r,s,i,o,l){return t(e,n,l)}}function e$e(t){var e=t.circular,n=t.comparator,r=t.createState,s=t.equals,i=t.strict;if(r)return function(c,u){var d=r(),h=d.cache,f=h===void 0?e?new WeakMap:void 0:h,m=d.meta;return n(c,u,{cache:f,equals:s,meta:m,strict:i})};if(e)return function(c,u){return n(c,u,{cache:new WeakMap,equals:s,meta:void 0,strict:i})};var o={cache:void 0,equals:s,meta:void 0,strict:i};return function(c,u){return n(c,u,o)}}var t$e=vu();vu({strict:!0});vu({circular:!0});vu({circular:!0,strict:!0});vu({createInternalComparator:function(){return ah}});vu({strict:!0,createInternalComparator:function(){return ah}});vu({circular:!0,createInternalComparator:function(){return ah}});vu({circular:!0,createInternalComparator:function(){return ah},strict:!0});function vu(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,s=t.createState,i=t.strict,o=i===void 0?!1:i,l=ZLe(t),c=XLe(l),u=r?r(c):JLe(c);return e$e({circular:n,comparator:c,createState:s,equals:u,strict:o})}function n$e(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function AF(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function s(i){n<0&&(n=i),i-n>e?(t(i),n=-1):n$e(s)};requestAnimationFrame(r)}function DT(t){"@babel/helpers - typeof";return DT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DT(t)}function r$e(t){return o$e(t)||i$e(t)||a$e(t)||s$e()}function s$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a$e(t,e){if(t){if(typeof t=="string")return TF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TF(t,e)}}function TF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i$e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function o$e(t){if(Array.isArray(t))return t}function l$e(){var t={},e=function(){return null},n=!1,r=function s(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,l=r$e(o),c=l[0],u=l.slice(1);if(typeof c=="number"){AF(s.bind(null,u),c);return}s(c),AF(s.bind(null,u));return}DT(i)==="object"&&(t=i,e(t)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(i){n=!1,r(i)},subscribe:function(i){return e=i,function(){e=function(){return null}}}}}function Yy(t){"@babel/helpers - typeof";return Yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yy(t)}function CF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function PF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CF(Object(n),!0).forEach(function(r){sY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sY(t,e,n){return e=c$e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c$e(t){var e=u$e(t,"string");return Yy(e)==="symbol"?e:String(e)}function u$e(t,e){if(Yy(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Yy(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var d$e=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,s){return r.filter(function(i){return s.includes(i)})})},h$e=function(e){return e},f$e=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Mg=function(e,n){return Object.keys(n).reduce(function(r,s){return PF(PF({},r),{},sY({},s,e(s,n[s])))},{})},IF=function(e,n,r){return e.map(function(s){return"".concat(f$e(s)," ").concat(n,"ms ").concat(r)}).join(",")};function m$e(t,e){return y$e(t)||g$e(t,e)||aY(t,e)||p$e()}function p$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g$e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function y$e(t){if(Array.isArray(t))return t}function v$e(t){return w$e(t)||b$e(t)||aY(t)||x$e()}function x$e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aY(t,e){if(t){if(typeof t=="string")return LT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LT(t,e)}}function b$e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function w$e(t){if(Array.isArray(t))return LT(t)}function LT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Iw=1e-4,iY=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},oY=function(e,n){return e.map(function(r,s){return r*Math.pow(n,s)}).reduce(function(r,s){return r+s})},kF=function(e,n){return function(r){var s=iY(e,n);return oY(s,r)}},_$e=function(e,n){return function(r){var s=iY(e,n),i=[].concat(v$e(s.map(function(o,l){return o*l}).slice(1)),[0]);return oY(i,r)}},OF=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n[0],i=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),d=m$e(u,4);s=d[0],i=d[1],o=d[2],l=d[3]}}}var h=kF(s,o),f=kF(i,l),m=_$e(s,o),b=function(w){return w>1?1:w<0?0:w},g=function(w){for(var y=w>1?1:w,A=y,T=0;T<8;++T){var v=h(A)-y,S=m(A);if(Math.abs(v-y)<Iw||S<Iw)return f(A);A=b(A-v/S)}return f(A)};return g.isStepper=!1,g},j$e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,s=e.damping,i=s===void 0?8:s,o=e.dt,l=o===void 0?17:o,c=function(d,h,f){var m=-(d-h)*r,b=f*i,g=f+(m-b)*l/1e3,x=f*l/1e3+d;return Math.abs(x-h)<Iw&&Math.abs(g)<Iw?[h,0]:[x,g]};return c.isStepper=!0,c.dt=l,c},N$e=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return OF(s);case"spring":return j$e();default:if(s.split("(")[0]==="cubic-bezier")return OF(s)}return typeof s=="function"?s:null};function Qy(t){"@babel/helpers - typeof";return Qy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qy(t)}function RF(t){return A$e(t)||E$e(t)||lY(t)||S$e()}function S$e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E$e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function A$e(t){if(Array.isArray(t))return FT(t)}function MF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Yr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MF(Object(n),!0).forEach(function(r){$T(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $T(t,e,n){return e=T$e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T$e(t){var e=C$e(t,"string");return Qy(e)==="symbol"?e:String(e)}function C$e(t,e){if(Qy(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Qy(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function P$e(t,e){return O$e(t)||k$e(t,e)||lY(t,e)||I$e()}function I$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lY(t,e){if(t){if(typeof t=="string")return FT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FT(t,e)}}function FT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function k$e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function O$e(t){if(Array.isArray(t))return t}var kw=function(e,n,r){return e+(n-e)*r},VT=function(e){var n=e.from,r=e.to;return n!==r},R$e=function t(e,n,r){var s=Mg(function(i,o){if(VT(o)){var l=e(o.from,o.to,o.velocity),c=P$e(l,2),u=c[0],d=c[1];return Yr(Yr({},o),{},{from:u,velocity:d})}return o},n);return r<1?Mg(function(i,o){return VT(o)?Yr(Yr({},o),{},{velocity:kw(o.velocity,s[i].velocity,r),from:kw(o.from,s[i].from,r)}):o},n):t(e,s,r-1)};const M$e=function(t,e,n,r,s){var i=d$e(t,e),o=i.reduce(function(x,w){return Yr(Yr({},x),{},$T({},w,[t[w],e[w]]))},{}),l=i.reduce(function(x,w){return Yr(Yr({},x),{},$T({},w,{from:t[w],velocity:0,to:e[w]}))},{}),c=-1,u,d,h=function(){return null},f=function(){return Mg(function(w,y){return y.from},l)},m=function(){return!Object.values(l).filter(VT).length},b=function(w){u||(u=w);var y=w-u,A=y/n.dt;l=R$e(n,l,A),s(Yr(Yr(Yr({},t),e),f())),u=w,m()||(c=requestAnimationFrame(h))},g=function(w){d||(d=w);var y=(w-d)/r,A=Mg(function(v,S){return kw.apply(void 0,RF(S).concat([n(y)]))},o);if(s(Yr(Yr(Yr({},t),e),A)),y<1)c=requestAnimationFrame(h);else{var T=Mg(function(v,S){return kw.apply(void 0,RF(S).concat([n(1)]))},o);s(Yr(Yr(Yr({},t),e),T))}};return h=n.isStepper?b:g,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}};function dm(t){"@babel/helpers - typeof";return dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dm(t)}var D$e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function L$e(t,e){if(t==null)return{};var n=$$e(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function $$e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function wS(t){return U$e(t)||B$e(t)||V$e(t)||F$e()}function F$e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V$e(t,e){if(t){if(typeof t=="string")return BT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BT(t,e)}}function B$e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function U$e(t){if(Array.isArray(t))return BT(t)}function BT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function DF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function hi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DF(Object(n),!0).forEach(function(r){fg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fg(t,e,n){return e=cY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function q$e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cY(r.key),r)}}function W$e(t,e,n){return e&&q$e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function cY(t){var e=H$e(t,"string");return dm(e)==="symbol"?e:String(e)}function H$e(t,e){if(dm(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(dm(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function K$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UT(t,e)}function UT(t,e){return UT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},UT(t,e)}function G$e(t){var e=Y$e();return function(){var r=Ow(t),s;if(e){var i=Ow(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return zT(this,s)}}function zT(t,e){if(e&&(dm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qT(t)}function qT(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Y$e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ow(t){return Ow=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ow(t)}var jo=function(t){K$e(n,t);var e=G$e(n);function n(r,s){var i;z$e(this,n),i=e.call(this,r,s);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,h=o.steps,f=o.children,m=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(qT(i)),i.changeStyle=i.changeStyle.bind(qT(i)),!l||m<=0)return i.state={style:{}},typeof f=="function"&&(i.state={style:d}),zT(i);if(h&&h.length)i.state={style:h[0].style};else if(u){if(typeof f=="function")return i.state={style:u},zT(i);i.state={style:c?fg({},c,u):u}}else i.state={style:{}};return i}return W$e(n,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,h=i.from,f=this.state.style;if(l){if(!o){var m={style:c?fg({},c,d):d};this.state&&f&&(c&&f[c]!==d||!c&&f!==d)&&this.setState(m);return}if(!(t$e(s.to,d)&&s.canBegin&&s.isActive)){var b=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=b||u?h:s.to;if(this.state&&f){var x={style:c?fg({},c,g):g};(c&&f[c]!==g||!c&&f!==g)&&this.setState(x)}this.runAnimation(hi(hi({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,c=s.duration,u=s.easing,d=s.begin,h=s.onAnimationEnd,f=s.onAnimationStart,m=M$e(o,l,N$e(u),c,this.changeStyle),b=function(){i.stopJSAnimation=m()};this.manager.start([f,d,b,c,h])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,c=s.onAnimationStart,u=o[0],d=u.style,h=u.duration,f=h===void 0?0:h,m=function(g,x,w){if(w===0)return g;var y=x.duration,A=x.easing,T=A===void 0?"ease":A,v=x.style,S=x.properties,j=x.onAnimationEnd,p=w>0?o[w-1]:x,E=S||Object.keys(v);if(typeof T=="function"||T==="spring")return[].concat(wS(g),[i.runJSAnimation.bind(i,{from:p.style,to:v,duration:y,easing:T}),y]);var P=IF(E,y,T),C=hi(hi(hi({},p.style),v),{},{transition:P});return[].concat(wS(g),[C,y,j]).filter(h$e)};return this.manager.start([c].concat(wS(o.reduce(m,[d,Math.max(f,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=l$e());var i=s.begin,o=s.duration,l=s.attributeName,c=s.to,u=s.easing,d=s.onAnimationStart,h=s.onAnimationEnd,f=s.steps,m=s.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(s);return}if(f.length>1){this.runStepAnimation(s);return}var g=l?fg({},l,c):c,x=IF(Object.keys(g),o,u);b.start([d,i,hi(hi({},g),{},{transition:x}),o,h])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var c=L$e(s,D$e),u=N.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!l||u===0||o<=0)return i;var h=function(m){var b=m.props,g=b.style,x=g===void 0?{}:g,w=b.className,y=N.cloneElement(m,hi(hi({},c),{},{style:hi(hi({},x),d),className:w}));return y};return u===1?h(N.Children.only(i)):D.createElement("div",null,N.Children.map(i,function(f){return h(f)}))}}]),n}(N.PureComponent);jo.displayName="Animate";jo.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};jo.propTypes={from:hn.oneOfType([hn.object,hn.string]),to:hn.oneOfType([hn.object,hn.string]),attributeName:hn.string,duration:hn.number,begin:hn.number,easing:hn.oneOfType([hn.string,hn.func]),steps:hn.arrayOf(hn.shape({duration:hn.number.isRequired,style:hn.object.isRequired,easing:hn.oneOfType([hn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),hn.func]),properties:hn.arrayOf("string"),onAnimationEnd:hn.func})),children:hn.oneOfType([hn.node,hn.func]),isActive:hn.bool,canBegin:hn.bool,onAnimationEnd:hn.func,shouldReAnimate:hn.bool,onAnimationStart:hn.func,onAnimationReStart:hn.func};function Xy(t){"@babel/helpers - typeof";return Xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xy(t)}function Rw(){return Rw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rw.apply(this,arguments)}function Q$e(t,e){return eFe(t)||J$e(t,e)||Z$e(t,e)||X$e()}function X$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z$e(t,e){if(t){if(typeof t=="string")return LF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LF(t,e)}}function LF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function J$e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function eFe(t){if(Array.isArray(t))return t}function $F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function FF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$F(Object(n),!0).forEach(function(r){tFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$F(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tFe(t,e,n){return e=nFe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nFe(t){var e=rFe(t,"string");return Xy(e)=="symbol"?e:e+""}function rFe(t,e){if(Xy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Xy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VF=function(e,n,r,s,i){var o=Math.min(Math.abs(r)/2,Math.abs(s)/2),l=s>=0?1:-1,c=r>=0?1:-1,u=s>=0&&r>=0||s<0&&r<0?1:0,d;if(o>0&&i instanceof Array){for(var h=[0,0,0,0],f=0,m=4;f<m;f++)h[f]=i[f]>o?o:i[f];d="M".concat(e,",").concat(n+l*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(e+c*h[0],",").concat(n)),d+="L ".concat(e+r-c*h[1],",").concat(n),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+l*h[1])),d+="L ".concat(e+r,",").concat(n+s-l*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(e+r-c*h[2],",").concat(n+s)),d+="L ".concat(e+c*h[3],",").concat(n+s),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+s-l*h[3])),d+="Z"}else if(o>0&&i===+i&&i>0){var b=Math.min(o,i);d="M ".concat(e,",").concat(n+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e+c*b,",").concat(n,`
            L `).concat(e+r-c*b,",").concat(n,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e+r,",").concat(n+l*b,`
            L `).concat(e+r,",").concat(n+s-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e+r-c*b,",").concat(n+s,`
            L `).concat(e+c*b,",").concat(n+s,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e,",").concat(n+s-l*b," Z")}else d="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(s," h ").concat(-r," Z");return d},sFe=function(e,n){if(!e||!n)return!1;var r=e.x,s=e.y,i=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),d=Math.max(i,i+l),h=Math.min(o,o+c),f=Math.max(o,o+c);return r>=u&&r<=d&&s>=h&&s<=f}return!1},aFe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},yO=function(e){var n=FF(FF({},aFe),e),r=N.useRef(),s=N.useState(-1),i=Q$e(s,2),o=i[0],l=i[1];N.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var T=r.current.getTotalLength();T&&l(T)}catch{}},[]);var c=n.x,u=n.y,d=n.width,h=n.height,f=n.radius,m=n.className,b=n.animationEasing,g=n.animationDuration,x=n.animationBegin,w=n.isAnimationActive,y=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||d===0||h===0)return null;var A=Lt("recharts-rectangle",m);return y?D.createElement(jo,{canBegin:o>0,from:{width:d,height:h,x:c,y:u},to:{width:d,height:h,x:c,y:u},duration:g,animationEasing:b,isActive:y},function(T){var v=T.width,S=T.height,j=T.x,p=T.y;return D.createElement(jo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:g,isActive:w,easing:b},D.createElement("path",Rw({},ft(n,!0),{className:A,d:VF(j,p,v,S,f),ref:r})))}):D.createElement("path",Rw({},ft(n,!0),{className:A,d:VF(c,u,d,h,f)}))},iFe=["points","className","baseLinePoints","connectNulls"];function Wh(){return Wh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wh.apply(this,arguments)}function oFe(t,e){if(t==null)return{};var n=lFe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function lFe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function BF(t){return hFe(t)||dFe(t)||uFe(t)||cFe()}function cFe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uFe(t,e){if(t){if(typeof t=="string")return WT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WT(t,e)}}function dFe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hFe(t){if(Array.isArray(t))return WT(t)}function WT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var UF=function(e){return e&&e.x===+e.x&&e.y===+e.y},fFe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){UF(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),UF(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Dg=function(e,n){var r=fFe(e);n&&(r=[r.reduce(function(i,o){return[].concat(BF(i),BF(o))},[])]);var s=r.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return r.length===1?"".concat(s,"Z"):s},mFe=function(e,n,r){var s=Dg(e,r);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(Dg(n.reverse(),r).slice(1))},pFe=function(e){var n=e.points,r=e.className,s=e.baseLinePoints,i=e.connectNulls,o=oFe(e,iFe);if(!n||!n.length)return null;var l=Lt("recharts-polygon",r);if(s&&s.length){var c=o.stroke&&o.stroke!=="none",u=mFe(n,s,i);return D.createElement("g",{className:l},D.createElement("path",Wh({},ft(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?D.createElement("path",Wh({},ft(o,!0),{fill:"none",d:Dg(n,i)})):null,c?D.createElement("path",Wh({},ft(o,!0),{fill:"none",d:Dg(s,i)})):null)}var d=Dg(n,i);return D.createElement("path",Wh({},ft(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function HT(){return HT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HT.apply(this,arguments)}var cN=function(e){var n=e.cx,r=e.cy,s=e.r,i=e.className,o=Lt("recharts-dot",i);return n===+n&&r===+r&&s===+s?N.createElement("circle",HT({},ft(e,!1),tw(e),{className:o,cx:n,cy:r,r:s})):null};function Zy(t){"@babel/helpers - typeof";return Zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zy(t)}var gFe=["x","y","top","left","width","height","className"];function KT(){return KT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KT.apply(this,arguments)}function zF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function yFe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zF(Object(n),!0).forEach(function(r){vFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vFe(t,e,n){return e=xFe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xFe(t){var e=bFe(t,"string");return Zy(e)=="symbol"?e:e+""}function bFe(t,e){if(Zy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Zy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wFe(t,e){if(t==null)return{};var n=_Fe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _Fe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var jFe=function(e,n,r,s,i,o){return"M".concat(e,",").concat(i,"v").concat(s,"M").concat(o,",").concat(n,"h").concat(r)},NFe=function(e){var n=e.x,r=n===void 0?0:n,s=e.y,i=s===void 0?0:s,o=e.top,l=o===void 0?0:o,c=e.left,u=c===void 0?0:c,d=e.width,h=d===void 0?0:d,f=e.height,m=f===void 0?0:f,b=e.className,g=wFe(e,gFe),x=yFe({x:r,y:i,top:l,left:u,width:h,height:m},g);return!Ee(r)||!Ee(i)||!Ee(h)||!Ee(m)||!Ee(l)||!Ee(u)?null:D.createElement("path",KT({},ft(x,!0),{className:Lt("recharts-cross",b),d:jFe(r,i,h,m,l,u)}))},SFe=sN,EFe=wG,AFe=Io;function TFe(t,e){return t&&t.length?SFe(t,AFe(e),EFe):void 0}var CFe=TFe;const PFe=pn(CFe);var IFe=sN,kFe=Io,OFe=_G;function RFe(t,e){return t&&t.length?IFe(t,kFe(e),OFe):void 0}var MFe=RFe;const DFe=pn(MFe);var LFe=["cx","cy","angle","ticks","axisLine"],$Fe=["ticks","tick","angle","tickFormatter","stroke"];function hm(t){"@babel/helpers - typeof";return hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hm(t)}function Lg(){return Lg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lg.apply(this,arguments)}function qF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Tu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qF(Object(n),!0).forEach(function(r){uN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WF(t,e){if(t==null)return{};var n=FFe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function FFe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function VFe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dY(r.key),r)}}function BFe(t,e,n){return e&&HF(t.prototype,e),n&&HF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function UFe(t,e,n){return e=Mw(e),zFe(t,uY()?Reflect.construct(e,n||[],Mw(t).constructor):e.apply(t,n))}function zFe(t,e){if(e&&(hm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qFe(t)}function qFe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uY=function(){return!!t})()}function Mw(t){return Mw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Mw(t)}function WFe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GT(t,e)}function GT(t,e){return GT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},GT(t,e)}function uN(t,e,n){return e=dY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dY(t){var e=HFe(t,"string");return hm(e)=="symbol"?e:e+""}function HFe(t,e){if(hm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(hm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dN=function(t){function e(){return VFe(this,e),UFe(this,e,arguments)}return WFe(e,t),BFe(e,[{key:"getTickValueCoord",value:function(r){var s=r.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return On(l,c,s,o)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,s;switch(r){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var r=this.props,s=r.cx,i=r.cy,o=r.angle,l=r.ticks,c=PFe(l,function(d){return d.coordinate||0}),u=DFe(l,function(d){return d.coordinate||0});return{cx:s,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,i=r.cy,o=r.angle,l=r.ticks,c=r.axisLine,u=WF(r,LFe),d=l.reduce(function(b,g){return[Math.min(b[0],g.coordinate),Math.max(b[1],g.coordinate)]},[1/0,-1/0]),h=On(s,i,d[0],o),f=On(s,i,d[1],o),m=Tu(Tu(Tu({},ft(u,!1)),{},{fill:"none"},ft(c,!1)),{},{x1:h.x,y1:h.y,x2:f.x,y2:f.y});return D.createElement("line",Lg({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var r=this,s=this.props,i=s.ticks,o=s.tick,l=s.angle,c=s.tickFormatter,u=s.stroke,d=WF(s,$Fe),h=this.getTickTextAnchor(),f=ft(d,!1),m=ft(o,!1),b=i.map(function(g,x){var w=r.getTickValueCoord(g),y=Tu(Tu(Tu(Tu({textAnchor:h,transform:"rotate(".concat(90-l,", ").concat(w.x,", ").concat(w.y,")")},f),{},{stroke:"none",fill:u},m),{},{index:x},w),{},{payload:g});return D.createElement(en,Lg({className:Lt("recharts-polar-radius-axis-tick",QG(o)),key:"tick-".concat(g.coordinate)},Fd(r.props,g,x)),e.renderTickItem(o,y,c?c(g.value,x):g.value))});return D.createElement(en,{className:"recharts-polar-radius-axis-ticks"},b)}},{key:"render",value:function(){var r=this.props,s=r.ticks,i=r.axisLine,o=r.tick;return!s||!s.length?null:D.createElement(en,{className:Lt("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),zr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,s,i){var o;return D.isValidElement(r)?o=D.cloneElement(r,s):wt(r)?o=r(s):o=D.createElement(Vd,Lg({},s,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(N.PureComponent);uN(dN,"displayName","PolarRadiusAxis");uN(dN,"axisType","radiusAxis");uN(dN,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function fm(t){"@babel/helpers - typeof";return fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fm(t)}function Lu(){return Lu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lu.apply(this,arguments)}function KF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Cu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KF(Object(n),!0).forEach(function(r){hN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KFe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function GF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fY(r.key),r)}}function GFe(t,e,n){return e&&GF(t.prototype,e),n&&GF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function YFe(t,e,n){return e=Dw(e),QFe(t,hY()?Reflect.construct(e,n||[],Dw(t).constructor):e.apply(t,n))}function QFe(t,e){if(e&&(fm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XFe(t)}function XFe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hY=function(){return!!t})()}function Dw(t){return Dw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dw(t)}function ZFe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YT(t,e)}function YT(t,e){return YT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},YT(t,e)}function hN(t,e,n){return e=fY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fY(t){var e=JFe(t,"string");return fm(e)=="symbol"?e:e+""}function JFe(t,e){if(fm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(fm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var eVe=Math.PI/180,YF=1e-5,fN=function(t){function e(){return KFe(this,e),YFe(this,e,arguments)}return ZFe(e,t),GFe(e,[{key:"getTickLineCoord",value:function(r){var s=this.props,i=s.cx,o=s.cy,l=s.radius,c=s.orientation,u=s.tickSize,d=u||8,h=On(i,o,l,r.coordinate),f=On(i,o,l+(c==="inner"?-1:1)*d,r.coordinate);return{x1:h.x,y1:h.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(r){var s=this.props.orientation,i=Math.cos(-r.coordinate*eVe),o;return i>YF?o=s==="outer"?"start":"end":i<-YF?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,i=r.cy,o=r.radius,l=r.axisLine,c=r.axisLineType,u=Cu(Cu({},ft(this.props,!1)),{},{fill:"none"},ft(l,!1));if(c==="circle")return D.createElement(cN,Lu({className:"recharts-polar-angle-axis-line"},u,{cx:s,cy:i,r:o}));var d=this.props.ticks,h=d.map(function(f){return On(s,i,o,f.coordinate)});return D.createElement(pFe,Lu({className:"recharts-polar-angle-axis-line"},u,{points:h}))}},{key:"renderTicks",value:function(){var r=this,s=this.props,i=s.ticks,o=s.tick,l=s.tickLine,c=s.tickFormatter,u=s.stroke,d=ft(this.props,!1),h=ft(o,!1),f=Cu(Cu({},d),{},{fill:"none"},ft(l,!1)),m=i.map(function(b,g){var x=r.getTickLineCoord(b),w=r.getTickTextAnchor(b),y=Cu(Cu(Cu({textAnchor:w},d),{},{stroke:"none",fill:u},h),{},{index:g,payload:b,x:x.x2,y:x.y2});return D.createElement(en,Lu({className:Lt("recharts-polar-angle-axis-tick",QG(o)),key:"tick-".concat(b.coordinate)},Fd(r.props,b,g)),l&&D.createElement("line",Lu({className:"recharts-polar-angle-axis-tick-line"},f,x)),o&&e.renderTickItem(o,y,c?c(b.value,g):b.value))});return D.createElement(en,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var r=this.props,s=r.ticks,i=r.radius,o=r.axisLine;return i<=0||!s||!s.length?null:D.createElement(en,{className:Lt("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,s,i){var o;return D.isValidElement(r)?o=D.cloneElement(r,s):wt(r)?o=r(s):o=D.createElement(Vd,Lu({},s,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(N.PureComponent);hN(fN,"displayName","PolarAngleAxis");hN(fN,"axisType","angleAxis");hN(fN,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var tVe=yK,nVe=tVe(Object.getPrototypeOf,Object),rVe=nVe,sVe=jl,aVe=rVe,iVe=Nl,oVe="[object Object]",lVe=Function.prototype,cVe=Object.prototype,mY=lVe.toString,uVe=cVe.hasOwnProperty,dVe=mY.call(Object);function hVe(t){if(!iVe(t)||sVe(t)!=oVe)return!1;var e=aVe(t);if(e===null)return!0;var n=uVe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&mY.call(n)==dVe}var fVe=hVe;const mVe=pn(fVe);var pVe=jl,gVe=Nl,yVe="[object Boolean]";function vVe(t){return t===!0||t===!1||gVe(t)&&pVe(t)==yVe}var xVe=vVe;const bVe=pn(xVe);function Jy(t){"@babel/helpers - typeof";return Jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jy(t)}function Lw(){return Lw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lw.apply(this,arguments)}function wVe(t,e){return SVe(t)||NVe(t,e)||jVe(t,e)||_Ve()}function _Ve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jVe(t,e){if(t){if(typeof t=="string")return QF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QF(t,e)}}function QF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function NVe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function SVe(t){if(Array.isArray(t))return t}function XF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ZF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XF(Object(n),!0).forEach(function(r){EVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function EVe(t,e,n){return e=AVe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AVe(t){var e=TVe(t,"string");return Jy(e)=="symbol"?e:e+""}function TVe(t,e){if(Jy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Jy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var JF=function(e,n,r,s,i){var o=r-s,l;return l="M ".concat(e,",").concat(n),l+="L ".concat(e+r,",").concat(n),l+="L ".concat(e+r-o/2,",").concat(n+i),l+="L ".concat(e+r-o/2-s,",").concat(n+i),l+="L ".concat(e,",").concat(n," Z"),l},CVe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},PVe=function(e){var n=ZF(ZF({},CVe),e),r=N.useRef(),s=N.useState(-1),i=wVe(s,2),o=i[0],l=i[1];N.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var A=r.current.getTotalLength();A&&l(A)}catch{}},[]);var c=n.x,u=n.y,d=n.upperWidth,h=n.lowerWidth,f=n.height,m=n.className,b=n.animationEasing,g=n.animationDuration,x=n.animationBegin,w=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||f!==+f||d===0&&h===0||f===0)return null;var y=Lt("recharts-trapezoid",m);return w?D.createElement(jo,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:u},to:{upperWidth:d,lowerWidth:h,height:f,x:c,y:u},duration:g,animationEasing:b,isActive:w},function(A){var T=A.upperWidth,v=A.lowerWidth,S=A.height,j=A.x,p=A.y;return D.createElement(jo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:g,easing:b},D.createElement("path",Lw({},ft(n,!0),{className:y,d:JF(j,p,T,v,S),ref:r})))}):D.createElement("g",null,D.createElement("path",Lw({},ft(n,!0),{className:y,d:JF(c,u,d,h,f)})))},IVe=["option","shapeType","propTransformer","activeClassName","isActive"];function ev(t){"@babel/helpers - typeof";return ev=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ev(t)}function kVe(t,e){if(t==null)return{};var n=OVe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function OVe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function eV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function $w(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eV(Object(n),!0).forEach(function(r){RVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RVe(t,e,n){return e=MVe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MVe(t){var e=DVe(t,"string");return ev(e)=="symbol"?e:e+""}function DVe(t,e){if(ev(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ev(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LVe(t,e){return $w($w({},e),t)}function $Ve(t,e){return t==="symbols"}function tV(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return D.createElement(yO,n);case"trapezoid":return D.createElement(PVe,n);case"sector":return D.createElement(JG,n);case"symbols":if($Ve(e))return D.createElement(Dk,n);break;default:return null}}function FVe(t){return N.isValidElement(t)?t.props:t}function pY(t){var e=t.option,n=t.shapeType,r=t.propTransformer,s=r===void 0?LVe:r,i=t.activeClassName,o=i===void 0?"recharts-active-shape":i,l=t.isActive,c=kVe(t,IVe),u;if(N.isValidElement(e))u=N.cloneElement(e,$w($w({},c),FVe(e)));else if(wt(e))u=e(c);else if(mVe(e)&&!bVe(e)){var d=s(e,c);u=D.createElement(tV,{shapeType:n,elementProps:d})}else{var h=c;u=D.createElement(tV,{shapeType:n,elementProps:h})}return l?D.createElement(en,{className:o},u):u}function mN(t,e){return e!=null&&"trapezoids"in t.props}function pN(t,e){return e!=null&&"sectors"in t.props}function tv(t,e){return e!=null&&"points"in t.props}function VVe(t,e){var n,r,s=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,i=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return s&&i}function BVe(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function UVe(t,e){var n=t.x===e.x,r=t.y===e.y,s=t.z===e.z;return n&&r&&s}function zVe(t,e){var n;return mN(t,e)?n=VVe:pN(t,e)?n=BVe:tv(t,e)&&(n=UVe),n}function qVe(t,e){var n;return mN(t,e)?n="trapezoids":pN(t,e)?n="sectors":tv(t,e)&&(n="points"),n}function WVe(t,e){if(mN(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(pN(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return tv(t,e)?e.payload:{}}function HVe(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,s=qVe(n,e),i=WVe(n,e),o=r.filter(function(c,u){var d=cm(i,c),h=n.props[s].filter(function(b){var g=zVe(n,e);return g(b,e)}),f=n.props[s].indexOf(h[h.length-1]),m=u===f;return d&&m}),l=r.indexOf(o[o.length-1]);return l}var Vb;function mm(t){"@babel/helpers - typeof";return mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mm(t)}function Hh(){return Hh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hh.apply(this,arguments)}function nV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function An(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nV(Object(n),!0).forEach(function(r){Ba(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KVe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yY(r.key),r)}}function GVe(t,e,n){return e&&rV(t.prototype,e),n&&rV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function YVe(t,e,n){return e=Fw(e),QVe(t,gY()?Reflect.construct(e,n||[],Fw(t).constructor):e.apply(t,n))}function QVe(t,e){if(e&&(mm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XVe(t)}function XVe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gY=function(){return!!t})()}function Fw(t){return Fw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fw(t)}function ZVe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QT(t,e)}function QT(t,e){return QT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},QT(t,e)}function Ba(t,e,n){return e=yY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yY(t){var e=JVe(t,"string");return mm(e)=="symbol"?e:e+""}function JVe(t,e){if(mm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var El=function(t){function e(n){var r;return KVe(this,e),r=YVe(this,e,[n]),Ba(r,"pieRef",null),Ba(r,"sectorRefs",[]),Ba(r,"id",sp("recharts-pie-")),Ba(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),wt(s)&&s()}),Ba(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),wt(s)&&s()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return ZVe(e,t),GVe(e,[{key:"isActiveIndex",value:function(r){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(r)!==-1:r===s}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,u=i.valueKey,d=ft(this.props,!1),h=ft(o,!1),f=ft(l,!1),m=o&&o.offsetRadius||20,b=r.map(function(g,x){var w=(g.startAngle+g.endAngle)/2,y=On(g.cx,g.cy,g.outerRadius+m,w),A=An(An(An(An({},d),g),{},{stroke:"none"},h),{},{index:x,textAnchor:e.getTextAnchor(y.x,g.cx)},y),T=An(An(An(An({},d),g),{},{fill:"none",stroke:g.fill},f),{},{index:x,points:[On(g.cx,g.cy,g.outerRadius,w),y]}),v=c;return $t(c)&&$t(u)?v="value":$t(c)&&(v=u),D.createElement(en,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(x)},l&&e.renderLabelLineItem(l,T,"line"),e.renderLabelItem(o,A,kr(g,v)))});return D.createElement(en,{className:"recharts-pie-labels"},b)}},{key:"renderSectorsStatically",value:function(r){var s=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return r.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var h=s.isActiveIndex(d),f=c&&s.hasActiveIndex()?c:null,m=h?o:f,b=An(An({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return D.createElement(en,Hh({ref:function(x){x&&!s.sectorRefs.includes(x)&&s.sectorRefs.push(x)},tabIndex:-1,className:"recharts-pie-sector"},Fd(s.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),D.createElement(pY,Hh({option:m,isActive:h,shapeType:"sector"},b)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,s=this.props,i=s.sectors,o=s.isAnimationActive,l=s.animationBegin,c=s.animationDuration,u=s.animationEasing,d=s.animationId,h=this.state,f=h.prevSectors,m=h.prevIsAnimationActive;return D.createElement(jo,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(b){var g=b.t,x=[],w=i&&i[0],y=w.startAngle;return i.forEach(function(A,T){var v=f&&f[T],S=T>0?Sa(A,"paddingAngle",0):0;if(v){var j=Hs(v.endAngle-v.startAngle,A.endAngle-A.startAngle),p=An(An({},A),{},{startAngle:y+S,endAngle:y+j(g)+S});x.push(p),y=p.endAngle}else{var E=A.endAngle,P=A.startAngle,C=Hs(0,E-P),I=C(g),O=An(An({},A),{},{startAngle:y+S,endAngle:y+I+S});x.push(O),y=O.endAngle}}),D.createElement(en,null,r.renderSectorsStatically(x))})}},{key:"attachKeyboardHandlers",value:function(r){var s=this;r.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[o].focus(),s.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[l].focus(),s.setState({sectorToFocus:l});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,s=r.sectors,i=r.isAnimationActive,o=this.state.prevSectors;return i&&s&&s.length&&(!o||!cm(o,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,s=this.props,i=s.hide,o=s.sectors,l=s.className,c=s.label,u=s.cx,d=s.cy,h=s.innerRadius,f=s.outerRadius,m=s.isAnimationActive,b=this.state.isAnimationFinished;if(i||!o||!o.length||!Ee(u)||!Ee(d)||!Ee(h)||!Ee(f))return null;var g=Lt("recharts-pie",l);return D.createElement(en,{tabIndex:this.props.rootTabIndex,className:g,ref:function(w){r.pieRef=w}},this.renderSectors(),c&&this.renderLabels(o),zr.renderCallByParent(this.props,null,!1),(!m||b)&&tl.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return s.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:r.sectors!==s.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,s){return r>s?"start":r<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,s,i){if(D.isValidElement(r))return D.cloneElement(r,s);if(wt(r))return r(s);var o=Lt("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return D.createElement(vf,Hh({},s,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(r,s,i){if(D.isValidElement(r))return D.cloneElement(r,s);var o=i;if(wt(r)&&(o=r(s),D.isValidElement(o)))return o;var l=Lt("recharts-pie-label-text",typeof r!="boolean"&&!wt(r)?r.className:"");return D.createElement(Vd,Hh({},s,{alignmentBaseline:"middle",className:l}),o)}}])}(N.PureComponent);Vb=El;Ba(El,"displayName","Pie");Ba(El,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!po.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Ba(El,"parseDeltaAngle",function(t,e){var n=Ts(e-t),r=Math.min(Math.abs(e-t),360);return n*r});Ba(El,"getRealPieData",function(t){var e=t.data,n=t.children,r=ft(t,!1),s=Ya(n,Xj);return e&&e.length?e.map(function(i,o){return An(An(An({payload:i},r),i),s&&s[o]&&s[o].props)}):s&&s.length?s.map(function(i){return An(An({},r),i.props)}):[]});Ba(El,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,s=e.width,i=e.height,o=YG(s,i),l=r+Cs(t.cx,s,s/2),c=n+Cs(t.cy,i,i/2),u=Cs(t.innerRadius,o,0),d=Cs(t.outerRadius,o,o*.8),h=t.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:h}});Ba(El,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?An(An({},e.type.defaultProps),e.props):e.props,s=Vb.getRealPieData(r);if(!s||!s.length)return null;var i=r.cornerRadius,o=r.startAngle,l=r.endAngle,c=r.paddingAngle,u=r.dataKey,d=r.nameKey,h=r.valueKey,f=r.tooltipType,m=Math.abs(r.minAngle),b=Vb.parseCoordinateOfPie(r,n),g=Vb.parseDeltaAngle(o,l),x=Math.abs(g),w=u;$t(u)&&$t(h)?(Ci(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),w="value"):$t(u)&&(Ci(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),w=h);var y=s.filter(function(p){return kr(p,w,0)!==0}).length,A=(x>=360?y:y-1)*c,T=x-y*m-A,v=s.reduce(function(p,E){var P=kr(E,w,0);return p+(Ee(P)?P:0)},0),S;if(v>0){var j;S=s.map(function(p,E){var P=kr(p,w,0),C=kr(p,d,E),I=(Ee(P)?P:0)/v,O;E?O=j.endAngle+Ts(g)*c*(P!==0?1:0):O=o;var $=O+Ts(g)*((P!==0?m:0)+I*T),z=(O+$)/2,H=(b.innerRadius+b.outerRadius)/2,M=[{name:C,value:P,payload:p,dataKey:w,type:f}],F=On(b.cx,b.cy,H,z);return j=An(An(An({percent:I,cornerRadius:i,name:C,tooltipPayload:M,midAngle:z,middleRadius:H,tooltipPosition:F},p),b),{},{value:kr(p,w),startAngle:O,endAngle:$,payload:p,paddingAngle:Ts(g)*c}),j})}return An(An({},b),{},{sectors:S,data:s})});var eBe=Math.ceil,tBe=Math.max;function nBe(t,e,n,r){for(var s=-1,i=tBe(eBe((e-t)/(n||1)),0),o=Array(i);i--;)o[r?i:++s]=t,t+=n;return o}var rBe=nBe,sBe=DK,sV=1/0,aBe=17976931348623157e292;function iBe(t){if(!t)return t===0?t:0;if(t=sBe(t),t===sV||t===-sV){var e=t<0?-1:1;return e*aBe}return t===t?t:0}var vY=iBe,oBe=rBe,lBe=Qj,_S=vY;function cBe(t){return function(e,n,r){return r&&typeof r!="number"&&lBe(e,n,r)&&(n=r=void 0),e=_S(e),n===void 0?(n=e,e=0):n=_S(n),r=r===void 0?e<n?1:-1:_S(r),oBe(e,n,r,t)}}var uBe=cBe,dBe=uBe,hBe=dBe(),fBe=hBe;const Vw=pn(fBe);function nv(t){"@babel/helpers - typeof";return nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nv(t)}function aV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function iV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aV(Object(n),!0).forEach(function(r){xY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xY(t,e,n){return e=mBe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mBe(t){var e=pBe(t,"string");return nv(e)=="symbol"?e:e+""}function pBe(t,e){if(nv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(nv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gBe=["Webkit","Moz","O","ms"],yBe=function(e,n){var r=e.replace(/(\w)/,function(i){return i.toUpperCase()}),s=gBe.reduce(function(i,o){return iV(iV({},i),{},xY({},o+r,n))},{});return s[e]=n,s};function pm(t){"@babel/helpers - typeof";return pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pm(t)}function Bw(){return Bw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bw.apply(this,arguments)}function oV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function jS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oV(Object(n),!0).forEach(function(r){la(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vBe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wY(r.key),r)}}function xBe(t,e,n){return e&&lV(t.prototype,e),n&&lV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function bBe(t,e,n){return e=Uw(e),wBe(t,bY()?Reflect.construct(e,n||[],Uw(t).constructor):e.apply(t,n))}function wBe(t,e){if(e&&(pm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Be(t)}function _Be(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bY=function(){return!!t})()}function Uw(t){return Uw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Uw(t)}function jBe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XT(t,e)}function XT(t,e){return XT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},XT(t,e)}function la(t,e,n){return e=wY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wY(t){var e=NBe(t,"string");return pm(e)=="symbol"?e:e+""}function NBe(t,e){if(pm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(pm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var SBe=function(e){var n=e.data,r=e.startIndex,s=e.endIndex,i=e.x,o=e.width,l=e.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=Og().domain(Vw(0,c)).range([i,i+o-l]),d=u.domain().map(function(h){return u(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(s),scale:u,scaleValues:d}},cV=function(e){return e.changedTouches&&!!e.changedTouches.length},gm=function(t){function e(n){var r;return vBe(this,e),r=bBe(this,e,[n]),la(r,"handleDrag",function(s){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(s):r.state.isSlideMoving&&r.handleSlideDrag(s)}),la(r,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&r.handleDrag(s.changedTouches[0])}),la(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=r.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o==null||o({endIndex:i,startIndex:l})}),r.detachDragEndListener()}),la(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),la(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),la(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),la(r,"handleSlideDragStart",function(s){var i=cV(s)?s.changedTouches[0]:s;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return jBe(e,t),xBe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var s=r.startX,i=r.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,h=Math.min(s,i),f=Math.max(s,i),m=e.getIndexInRange(o,h),b=e.getIndexInRange(o,f);return{startIndex:m-m%c,endIndex:b===d?d:b-b%c}}},{key:"getTextOfTick",value:function(r){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,c=kr(i[r],l,r);return wt(o)?o(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,c=this.props,u=c.x,d=c.width,h=c.travellerWidth,f=c.startIndex,m=c.endIndex,b=c.onChange,g=r.pageX-i;g>0?g=Math.min(g,u+d-h-l,u+d-h-o):g<0&&(g=Math.max(g,u-o,u-l));var x=this.getIndex({startX:o+g,endX:l+g});(x.startIndex!==f||x.endIndex!==m)&&b&&b(x),this.setState({startX:o+g,endX:l+g,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,s){var i=cV(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,c=s.startX,u=this.state[o],d=this.props,h=d.x,f=d.width,m=d.travellerWidth,b=d.onChange,g=d.gap,x=d.data,w={startX:this.state.startX,endX:this.state.endX},y=r.pageX-i;y>0?y=Math.min(y,h+f-m-u):y<0&&(y=Math.max(y,h-u)),w[o]=u+y;var A=this.getIndex(w),T=A.startIndex,v=A.endIndex,S=function(){var p=x.length-1;return o==="startX"&&(l>c?T%g===0:v%g===0)||l<c&&v===p||o==="endX"&&(l>c?v%g===0:T%g===0)||l>c&&v===p};this.setState(la(la({},o,u+y),"brushMoveStartX",r.pageX),function(){b&&S()&&b(A)})}},{key:"handleTravellerMoveKeyboard",value:function(r,s){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[s],h=l.indexOf(d);if(h!==-1){var f=h+r;if(!(f===-1||f>=l.length)){var m=l[f];s==="startX"&&m>=u||s==="endX"&&m<=c||this.setState(la({},s,m),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,s=r.x,i=r.y,o=r.width,l=r.height,c=r.fill,u=r.stroke;return D.createElement("rect",{stroke:u,fill:c,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,s=r.x,i=r.y,o=r.width,l=r.height,c=r.data,u=r.children,d=r.padding,h=N.Children.only(u);return h?D.cloneElement(h,{x:s,y:i,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,s){var i,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,h=c.height,f=c.traveller,m=c.ariaLabel,b=c.data,g=c.startIndex,x=c.endIndex,w=Math.max(r,this.props.x),y=jS(jS({},ft(this.props,!1)),{},{x:w,y:u,width:d,height:h}),A=m||"Min value: ".concat((i=b[g])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=b[x])===null||o===void 0?void 0:o.name);return D.createElement(en,{tabIndex:0,role:"slider","aria-label":A,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(v){["ArrowLeft","ArrowRight"].includes(v.key)&&(v.preventDefault(),v.stopPropagation(),l.handleTravellerMoveKeyboard(v.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,y))}},{key:"renderSlide",value:function(r,s){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(r,s)+u,h=Math.max(Math.abs(s-r)-u,0);return D.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:h,height:l})}},{key:"renderText",value:function(){var r=this.props,s=r.startIndex,i=r.endIndex,o=r.y,l=r.height,c=r.travellerWidth,u=r.stroke,d=this.state,h=d.startX,f=d.endX,m=5,b={pointerEvents:"none",fill:u};return D.createElement(en,{className:"recharts-brush-texts"},D.createElement(Vd,Bw({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,f)-m,y:o+l/2},b),this.getTextOfTick(s)),D.createElement(Vd,Bw({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,f)+c+m,y:o+l/2},b),this.getTextOfTick(i)))}},{key:"render",value:function(){var r=this.props,s=r.data,i=r.className,o=r.children,l=r.x,c=r.y,u=r.width,d=r.height,h=r.alwaysShowText,f=this.state,m=f.startX,b=f.endX,g=f.isTextActive,x=f.isSlideMoving,w=f.isTravellerMoving,y=f.isTravellerFocused;if(!s||!s.length||!Ee(l)||!Ee(c)||!Ee(u)||!Ee(d)||u<=0||d<=0)return null;var A=Lt("recharts-brush",i),T=D.Children.count(o)===1,v=yBe("userSelect","none");return D.createElement(en,{className:A,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:v},this.renderBackground(),T&&this.renderPanorama(),this.renderSlide(m,b),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(b,"endX"),(g||x||w||y||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var s=r.x,i=r.y,o=r.width,l=r.height,c=r.stroke,u=Math.floor(i+l/2)-1;return D.createElement(D.Fragment,null,D.createElement("rect",{x:s,y:i,width:o,height:l,fill:c,stroke:"none"}),D.createElement("line",{x1:s+1,y1:u,x2:s+o-1,y2:u,fill:"none",stroke:"#fff"}),D.createElement("line",{x1:s+1,y1:u+2,x2:s+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,s){var i;return D.isValidElement(r)?i=D.cloneElement(r,s):wt(r)?i=r(s):i=e.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(r,s){var i=r.data,o=r.width,l=r.x,c=r.travellerWidth,u=r.updateId,d=r.startIndex,h=r.endIndex;if(i!==s.prevData||u!==s.prevUpdateId)return jS({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?SBe({data:i,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:h}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||c!==s.prevTravellerWidth)){s.scale.range([l,l+o-c]);var f=s.scale.domain().map(function(m){return s.scale(m)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:s.scale(r.startIndex),endX:s.scale(r.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(r,s){for(var i=r.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);r[c]>s?l=c:o=c}return s>=r[l]?l:o}}])}(N.PureComponent);la(gm,"displayName","Brush");la(gm,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var EBe=zk;function ABe(t,e){var n;return EBe(t,function(r,s,i){return n=e(r,s,i),!n}),!!n}var TBe=ABe,CBe=cK,PBe=Io,IBe=TBe,kBe=ra,OBe=Qj;function RBe(t,e,n){var r=kBe(t)?CBe:IBe;return n&&OBe(t,e,n)&&(e=void 0),r(t,PBe(e))}var MBe=RBe;const DBe=pn(MBe);var yo=function(e,n){var r=e.alwaysShow,s=e.ifOverflow;return r&&(s="extendDomain"),s===n},uV=IK;function LBe(t,e,n){e=="__proto__"&&uV?uV(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var $Be=LBe,FBe=$Be,VBe=CK,BBe=Io;function UBe(t,e){var n={};return e=BBe(e),VBe(t,function(r,s,i){FBe(n,s,e(r,s,i))}),n}var zBe=UBe;const qBe=pn(zBe);function WBe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var HBe=WBe,KBe=zk;function GBe(t,e){var n=!0;return KBe(t,function(r,s,i){return n=!!e(r,s,i),n}),n}var YBe=GBe,QBe=HBe,XBe=YBe,ZBe=Io,JBe=ra,e3e=Qj;function t3e(t,e,n){var r=JBe(t)?QBe:XBe;return n&&e3e(t,e,n)&&(e=void 0),r(t,ZBe(e))}var n3e=t3e;const _Y=pn(n3e);var r3e=["x","y"];function rv(t){"@babel/helpers - typeof";return rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rv(t)}function ZT(){return ZT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZT.apply(this,arguments)}function dV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Hp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dV(Object(n),!0).forEach(function(r){s3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function s3e(t,e,n){return e=a3e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a3e(t){var e=i3e(t,"string");return rv(e)=="symbol"?e:e+""}function i3e(t,e){if(rv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(rv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function o3e(t,e){if(t==null)return{};var n=l3e(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function l3e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function c3e(t,e){var n=t.x,r=t.y,s=o3e(t,r3e),i="".concat(n),o=parseInt(i,10),l="".concat(r),c=parseInt(l,10),u="".concat(e.height||s.height),d=parseInt(u,10),h="".concat(e.width||s.width),f=parseInt(h,10);return Hp(Hp(Hp(Hp(Hp({},e),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:f,name:e.name,radius:e.radius})}function hV(t){return D.createElement(pY,ZT({shapeType:"rectangle",propTransformer:c3e,activeClassName:"recharts-active-bar"},t))}var u3e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,s){if(typeof e=="number")return e;var i=Ee(r)||Mje(r);return i?e(r,s):(i||Ud(),n)}},d3e=["value","background"],jY;function ym(t){"@babel/helpers - typeof";return ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ym(t)}function h3e(t,e){if(t==null)return{};var n=f3e(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function f3e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function zw(){return zw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zw.apply(this,arguments)}function fV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function br(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fV(Object(n),!0).forEach(function(r){bc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function m3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,SY(r.key),r)}}function p3e(t,e,n){return e&&mV(t.prototype,e),n&&mV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function g3e(t,e,n){return e=qw(e),y3e(t,NY()?Reflect.construct(e,n||[],qw(t).constructor):e.apply(t,n))}function y3e(t,e){if(e&&(ym(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v3e(t)}function v3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NY=function(){return!!t})()}function qw(t){return qw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qw(t)}function x3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JT(t,e)}function JT(t,e){return JT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},JT(t,e)}function bc(t,e,n){return e=SY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SY(t){var e=b3e(t,"string");return ym(e)=="symbol"?e:e+""}function b3e(t,e){if(ym(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ym(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ih=function(t){function e(){var n;m3e(this,e);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=g3e(this,e,[].concat(s)),bc(n,"state",{isAnimationFinished:!1}),bc(n,"id",sp("recharts-bar-")),bc(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),bc(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return x3e(e,t),p3e(e,[{key:"renderRectanglesStatically",value:function(r){var s=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,d=ft(this.props,!1);return r&&r.map(function(h,f){var m=f===c,b=m?u:o,g=br(br(br({},d),h),{},{isActive:m,option:b,index:f,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return D.createElement(en,zw({className:"recharts-bar-rectangle"},Fd(s.props,h,f),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(f)}),D.createElement(hV,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,c=s.animationBegin,u=s.animationDuration,d=s.animationEasing,h=s.animationId,f=this.state.prevData;return D.createElement(jo,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var b=m.t,g=i.map(function(x,w){var y=f&&f[w];if(y){var A=Hs(y.x,x.x),T=Hs(y.y,x.y),v=Hs(y.width,x.width),S=Hs(y.height,x.height);return br(br({},x),{},{x:A(b),y:T(b),width:v(b),height:S(b)})}if(o==="horizontal"){var j=Hs(0,x.height),p=j(b);return br(br({},x),{},{y:x.y+x.height-p,height:p})}var E=Hs(0,x.width),P=E(b);return br(br({},x),{},{width:P})});return D.createElement(en,null,r.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var r=this.props,s=r.data,i=r.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!cm(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var r=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,c=ft(this.props.background,!1);return i.map(function(u,d){u.value;var h=u.background,f=h3e(u,d3e);if(!h)return null;var m=br(br(br(br(br({},f),{},{fill:"#eee"},h),c),Fd(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return D.createElement(hV,zw({key:"background-bar-".concat(d),option:r.props.background,isActive:d===l},m))})}},{key:"renderErrorBar",value:function(r,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,h=Ya(d,lN);if(!h)return null;var f=u==="vertical"?o[0].height/2:o[0].width/2,m=function(x,w){var y=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:y,errorVal:kr(x,w)}},b={clipPath:r?"url(#clipPath-".concat(s,")"):null};return D.createElement(en,b,h.map(function(g){return D.cloneElement(g,{key:"error-bar-".concat(s,"-").concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:f,dataPointFormatter:m})}))}},{key:"render",value:function(){var r=this.props,s=r.hide,i=r.data,o=r.className,l=r.xAxis,c=r.yAxis,u=r.left,d=r.top,h=r.width,f=r.height,m=r.isAnimationActive,b=r.background,g=r.id;if(s||!i||!i.length)return null;var x=this.state.isAnimationFinished,w=Lt("recharts-bar",o),y=l&&l.allowDataOverflow,A=c&&c.allowDataOverflow,T=y||A,v=$t(g)?this.id:g;return D.createElement(en,{className:w},y||A?D.createElement("defs",null,D.createElement("clipPath",{id:"clipPath-".concat(v)},D.createElement("rect",{x:y?u:u-h/2,y:A?d:d-f/2,width:y?h:h*2,height:A?f:f*2}))):null,D.createElement(en,{className:"recharts-bar-rectangles",clipPath:T?"url(#clipPath-".concat(v,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(T,v),(!m||x)&&tl.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:s.curData}:r.data!==s.curData?{curData:r.data}:null}}])}(N.PureComponent);jY=ih;bc(ih,"displayName","Bar");bc(ih,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!po.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});bc(ih,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,s=t.bandSize,i=t.xAxis,o=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,u=t.stackedData,d=t.dataStartIndex,h=t.displayedData,f=t.offset,m=e4e(r,n);if(!m)return null;var b=e.layout,g=n.type.defaultProps,x=g!==void 0?br(br({},g),n.props):n.props,w=x.dataKey,y=x.children,A=x.minPointSize,T=b==="horizontal"?o:i,v=u?T.scale.domain():null,S=o4e({numericAxis:T}),j=Ya(y,Xj),p=h.map(function(E,P){var C,I,O,$,z,H;u?C=t4e(u[d+P],v):(C=kr(E,w),Array.isArray(C)||(C=[S,C]));var M=u3e(A,jY.defaultProps.minPointSize)(C[1],P);if(b==="horizontal"){var F,L=[o.scale(C[0]),o.scale(C[1])],W=L[0],ie=L[1];I=rF({axis:i,ticks:l,bandSize:s,offset:m.offset,entry:E,index:P}),O=(F=ie??W)!==null&&F!==void 0?F:void 0,$=m.size;var oe=W-ie;if(z=Number.isNaN(oe)?0:oe,H={x:I,y:o.y,width:$,height:o.height},Math.abs(M)>0&&Math.abs(z)<Math.abs(M)){var me=Ts(z||M)*(Math.abs(M)-Math.abs(z));O-=me,z+=me}}else{var Ie=[i.scale(C[0]),i.scale(C[1])],lt=Ie[0],ut=Ie[1];if(I=lt,O=rF({axis:o,ticks:c,bandSize:s,offset:m.offset,entry:E,index:P}),$=ut-lt,z=m.size,H={x:i.x,y:O,width:i.width,height:z},Math.abs(M)>0&&Math.abs($)<Math.abs(M)){var je=Ts($||M)*(Math.abs(M)-Math.abs($));$+=je}}return br(br(br({},E),{},{x:I,y:O,width:$,height:z,value:u?C:C[1],payload:E,background:H},j&&j[P]&&j[P].props),{},{tooltipPayload:[KG(n,E)],tooltipPosition:{x:I+$/2,y:O+z/2}})});return br({data:p,layout:b},f)});function sv(t){"@babel/helpers - typeof";return sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sv(t)}function w3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,EY(r.key),r)}}function _3e(t,e,n){return e&&pV(t.prototype,e),n&&pV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function gV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function xi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gV(Object(n),!0).forEach(function(r){gN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gN(t,e,n){return e=EY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EY(t){var e=j3e(t,"string");return sv(e)=="symbol"?e:e+""}function j3e(t,e){if(sv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(sv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var AY=function(e,n,r,s,i){var o=e.width,l=e.height,c=e.layout,u=e.children,d=Object.keys(n),h={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},f=!!ua(u,ih);return d.reduce(function(m,b){var g=n[b],x=g.orientation,w=g.domain,y=g.padding,A=y===void 0?{}:y,T=g.mirror,v=g.reversed,S="".concat(x).concat(T?"Mirror":""),j,p,E,P,C;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var I=w[1]-w[0],O=1/0,$=g.categoricalDomain.sort($je);if($.forEach(function(Ie,lt){lt>0&&(O=Math.min((Ie||0)-($[lt-1]||0),O))}),Number.isFinite(O)){var z=O/I,H=g.layout==="vertical"?r.height:r.width;if(g.padding==="gap"&&(j=z*H/2),g.padding==="no-gap"){var M=Cs(e.barCategoryGap,z*H),F=z*H/2;j=F-M-(F-M)/H*M}}}s==="xAxis"?p=[r.left+(A.left||0)+(j||0),r.left+r.width-(A.right||0)-(j||0)]:s==="yAxis"?p=c==="horizontal"?[r.top+r.height-(A.bottom||0),r.top+(A.top||0)]:[r.top+(A.top||0)+(j||0),r.top+r.height-(A.bottom||0)-(j||0)]:p=g.range,v&&(p=[p[1],p[0]]);var L=zG(g,i,f),W=L.scale,ie=L.realScaleType;W.domain(w).range(p),qG(W);var oe=WG(W,xi(xi({},g),{},{realScaleType:ie}));s==="xAxis"?(C=x==="top"&&!T||x==="bottom"&&T,E=r.left,P=h[S]-C*g.height):s==="yAxis"&&(C=x==="left"&&!T||x==="right"&&T,E=h[S]-C*g.width,P=r.top);var me=xi(xi(xi({},g),oe),{},{realScaleType:ie,x:E,y:P,scale:W,width:s==="xAxis"?r.width:g.width,height:s==="yAxis"?r.height:g.height});return me.bandSize=Tw(me,oe),!g.hide&&s==="xAxis"?h[S]+=(C?-1:1)*me.height:g.hide||(h[S]+=(C?-1:1)*me.width),xi(xi({},m),{},gN({},b,me))},{})},TY=function(e,n){var r=e.x,s=e.y,i=n.x,o=n.y;return{x:Math.min(r,i),y:Math.min(s,o),width:Math.abs(i-r),height:Math.abs(o-s)}},N3e=function(e){var n=e.x1,r=e.y1,s=e.x2,i=e.y2;return TY({x:n,y:r},{x:s,y:i})},CY=function(){function t(e){w3e(this,t),this.scale=e}return _3e(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.bandAware,i=r.position;if(n!==void 0){if(i)switch(i){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(s){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),s=r[0],i=r[r.length-1];return s<=i?n>=s&&n<=i:n>=i&&n<=s}}],[{key:"create",value:function(n){return new t(n)}}])}();gN(CY,"EPS",1e-4);var vO=function(e){var n=Object.keys(e).reduce(function(r,s){return xi(xi({},r),{},gN({},s,CY.create(e[s])))},{});return xi(xi({},n),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return qBe(s,function(c,u){return n[u].apply(c,{bandAware:o,position:l})})},isInRange:function(s){return _Y(s,function(i,o){return n[o].isInRange(i)})}})};function S3e(t){return(t%180+180)%180}var E3e=function(e){var n=e.width,r=e.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=S3e(s),o=i*Math.PI/180,l=Math.atan(r/n),c=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(c)},A3e=Io,T3e=Xv,C3e=Gj;function P3e(t){return function(e,n,r){var s=Object(e);if(!T3e(e)){var i=A3e(n);e=C3e(e),n=function(l){return i(s[l],l,s)}}var o=t(e,n,r);return o>-1?s[i?e[o]:o]:void 0}}var I3e=P3e,k3e=vY;function O3e(t){var e=k3e(t),n=e%1;return e===e?n?e-n:e:0}var R3e=O3e,M3e=jK,D3e=Io,L3e=R3e,$3e=Math.max;function F3e(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var s=n==null?0:L3e(n);return s<0&&(s=$3e(r+s,0)),M3e(t,D3e(e),s)}var V3e=F3e,B3e=I3e,U3e=V3e,z3e=B3e(U3e),q3e=z3e;const W3e=pn(q3e);var H3e=F_e(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),xO=N.createContext(void 0),bO=N.createContext(void 0),PY=N.createContext(void 0),IY=N.createContext({}),kY=N.createContext(void 0),OY=N.createContext(0),RY=N.createContext(0),yV=function(e){var n=e.state,r=n.xAxisMap,s=n.yAxisMap,i=n.offset,o=e.clipPathId,l=e.children,c=e.width,u=e.height,d=H3e(i);return D.createElement(xO.Provider,{value:r},D.createElement(bO.Provider,{value:s},D.createElement(IY.Provider,{value:i},D.createElement(PY.Provider,{value:d},D.createElement(kY.Provider,{value:o},D.createElement(OY.Provider,{value:u},D.createElement(RY.Provider,{value:c},l)))))))},K3e=function(){return N.useContext(kY)},MY=function(e){var n=N.useContext(xO);n==null&&Ud();var r=n[e];return r==null&&Ud(),r},G3e=function(){var e=N.useContext(xO);return rc(e)},Y3e=function(){var e=N.useContext(bO),n=W3e(e,function(r){return _Y(r.domain,Number.isFinite)});return n||rc(e)},DY=function(e){var n=N.useContext(bO);n==null&&Ud();var r=n[e];return r==null&&Ud(),r},Q3e=function(){var e=N.useContext(PY);return e},X3e=function(){return N.useContext(IY)},wO=function(){return N.useContext(RY)},_O=function(){return N.useContext(OY)};function vm(t){"@babel/helpers - typeof";return vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vm(t)}function Z3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J3e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$Y(r.key),r)}}function e5e(t,e,n){return e&&J3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function t5e(t,e,n){return e=Ww(e),n5e(t,LY()?Reflect.construct(e,n||[],Ww(t).constructor):e.apply(t,n))}function n5e(t,e){if(e&&(vm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return r5e(t)}function r5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function LY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LY=function(){return!!t})()}function Ww(t){return Ww=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ww(t)}function s5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eC(t,e)}function eC(t,e){return eC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},eC(t,e)}function vV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function xV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vV(Object(n),!0).forEach(function(r){jO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jO(t,e,n){return e=$Y(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $Y(t){var e=a5e(t,"string");return vm(e)=="symbol"?e:e+""}function a5e(t,e){if(vm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(vm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function i5e(t,e){return u5e(t)||c5e(t,e)||l5e(t,e)||o5e()}function o5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l5e(t,e){if(t){if(typeof t=="string")return bV(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bV(t,e)}}function bV(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c5e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function u5e(t){if(Array.isArray(t))return t}function tC(){return tC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tC.apply(this,arguments)}var d5e=function(e,n){var r;return D.isValidElement(e)?r=D.cloneElement(e,n):wt(e)?r=e(n):r=D.createElement("line",tC({},n,{className:"recharts-reference-line-line"})),r},h5e=function(e,n,r,s,i,o,l,c,u){var d=i.x,h=i.y,f=i.width,m=i.height;if(r){var b=u.y,g=e.y.apply(b,{position:o});if(yo(u,"discard")&&!e.y.isInRange(g))return null;var x=[{x:d+f,y:g},{x:d,y:g}];return c==="left"?x.reverse():x}if(n){var w=u.x,y=e.x.apply(w,{position:o});if(yo(u,"discard")&&!e.x.isInRange(y))return null;var A=[{x:y,y:h+m},{x:y,y:h}];return l==="top"?A.reverse():A}if(s){var T=u.segment,v=T.map(function(S){return e.apply(S,{position:o})});return yo(u,"discard")&&DBe(v,function(S){return!e.isInRange(S)})?null:v}return null};function f5e(t){var e=t.x,n=t.y,r=t.segment,s=t.xAxisId,i=t.yAxisId,o=t.shape,l=t.className,c=t.alwaysShow,u=K3e(),d=MY(s),h=DY(i),f=Q3e();if(!u||!f)return null;Ci(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=vO({x:d.scale,y:h.scale}),b=Rr(e),g=Rr(n),x=r&&r.length===2,w=h5e(m,b,g,x,f,t.position,d.orientation,h.orientation,t);if(!w)return null;var y=i5e(w,2),A=y[0],T=A.x,v=A.y,S=y[1],j=S.x,p=S.y,E=yo(t,"hidden")?"url(#".concat(u,")"):void 0,P=xV(xV({clipPath:E},ft(t,!0)),{},{x1:T,y1:v,x2:j,y2:p});return D.createElement(en,{className:Lt("recharts-reference-line",l)},d5e(o,P),zr.renderCallByParent(t,N3e({x1:T,y1:v,x2:j,y2:p})))}var NO=function(t){function e(){return Z3e(this,e),t5e(this,e,arguments)}return s5e(e,t),e5e(e,[{key:"render",value:function(){return D.createElement(f5e,this.props)}}])}(D.Component);jO(NO,"displayName","ReferenceLine");jO(NO,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function nC(){return nC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nC.apply(this,arguments)}function xm(t){"@babel/helpers - typeof";return xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xm(t)}function wV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function _V(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wV(Object(n),!0).forEach(function(r){yN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function m5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p5e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,VY(r.key),r)}}function g5e(t,e,n){return e&&p5e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function y5e(t,e,n){return e=Hw(e),v5e(t,FY()?Reflect.construct(e,n||[],Hw(t).constructor):e.apply(t,n))}function v5e(t,e){if(e&&(xm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x5e(t)}function x5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function FY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FY=function(){return!!t})()}function Hw(t){return Hw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hw(t)}function b5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rC(t,e)}function rC(t,e){return rC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},rC(t,e)}function yN(t,e,n){return e=VY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VY(t){var e=w5e(t,"string");return xm(e)=="symbol"?e:e+""}function w5e(t,e){if(xm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(xm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _5e=function(e){var n=e.x,r=e.y,s=e.xAxis,i=e.yAxis,o=vO({x:s.scale,y:i.scale}),l=o.apply({x:n,y:r},{bandAware:!0});return yo(e,"discard")&&!o.isInRange(l)?null:l},vN=function(t){function e(){return m5e(this,e),y5e(this,e,arguments)}return b5e(e,t),g5e(e,[{key:"render",value:function(){var r=this.props,s=r.x,i=r.y,o=r.r,l=r.alwaysShow,c=r.clipPathId,u=Rr(s),d=Rr(i);if(Ci(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var h=_5e(this.props);if(!h)return null;var f=h.x,m=h.y,b=this.props,g=b.shape,x=b.className,w=yo(this.props,"hidden")?"url(#".concat(c,")"):void 0,y=_V(_V({clipPath:w},ft(this.props,!0)),{},{cx:f,cy:m});return D.createElement(en,{className:Lt("recharts-reference-dot",x)},e.renderDot(g,y),zr.renderCallByParent(this.props,{x:f-o,y:m-o,width:2*o,height:2*o}))}}])}(D.Component);yN(vN,"displayName","ReferenceDot");yN(vN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});yN(vN,"renderDot",function(t,e){var n;return D.isValidElement(t)?n=D.cloneElement(t,e):wt(t)?n=t(e):n=D.createElement(cN,nC({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function sC(){return sC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sC.apply(this,arguments)}function bm(t){"@babel/helpers - typeof";return bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bm(t)}function jV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function NV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jV(Object(n),!0).forEach(function(r){xN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function j5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N5e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,UY(r.key),r)}}function S5e(t,e,n){return e&&N5e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function E5e(t,e,n){return e=Kw(e),A5e(t,BY()?Reflect.construct(e,n||[],Kw(t).constructor):e.apply(t,n))}function A5e(t,e){if(e&&(bm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T5e(t)}function T5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BY=function(){return!!t})()}function Kw(t){return Kw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kw(t)}function C5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aC(t,e)}function aC(t,e){return aC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},aC(t,e)}function xN(t,e,n){return e=UY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UY(t){var e=P5e(t,"string");return bm(e)=="symbol"?e:e+""}function P5e(t,e){if(bm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(bm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var I5e=function(e,n,r,s,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,d=i.xAxis,h=i.yAxis;if(!d||!h)return null;var f=vO({x:d.scale,y:h.scale}),m={x:e?f.x.apply(o,{position:"start"}):f.x.rangeMin,y:r?f.y.apply(c,{position:"start"}):f.y.rangeMin},b={x:n?f.x.apply(l,{position:"end"}):f.x.rangeMax,y:s?f.y.apply(u,{position:"end"}):f.y.rangeMax};return yo(i,"discard")&&(!f.isInRange(m)||!f.isInRange(b))?null:TY(m,b)},bN=function(t){function e(){return j5e(this,e),E5e(this,e,arguments)}return C5e(e,t),S5e(e,[{key:"render",value:function(){var r=this.props,s=r.x1,i=r.x2,o=r.y1,l=r.y2,c=r.className,u=r.alwaysShow,d=r.clipPathId;Ci(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=Rr(s),f=Rr(i),m=Rr(o),b=Rr(l),g=this.props.shape;if(!h&&!f&&!m&&!b&&!g)return null;var x=I5e(h,f,m,b,this.props);if(!x&&!g)return null;var w=yo(this.props,"hidden")?"url(#".concat(d,")"):void 0;return D.createElement(en,{className:Lt("recharts-reference-area",c)},e.renderRect(g,NV(NV({clipPath:w},ft(this.props,!0)),x)),zr.renderCallByParent(this.props,x))}}])}(D.Component);xN(bN,"displayName","ReferenceArea");xN(bN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});xN(bN,"renderRect",function(t,e){var n;return D.isValidElement(t)?n=D.cloneElement(t,e):wt(t)?n=t(e):n=D.createElement(yO,sC({},e,{className:"recharts-reference-area-rect"})),n});function zY(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],s=0;s<t.length;s+=e)r.push(t[s]);return r}function k5e(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return E3e(r,n)}function O5e(t,e,n){var r=n==="width",s=t.x,i=t.y,o=t.width,l=t.height;return e===1?{start:r?s:i,end:r?s+o:i+l}:{start:r?s+o:i+l,end:r?s:i}}function Gw(t,e,n,r,s){if(t*e<t*r||t*e>t*s)return!1;var i=n();return t*(e-t*i/2-r)>=0&&t*(e+t*i/2-s)<=0}function R5e(t,e){return zY(t,e+1)}function M5e(t,e,n,r,s){for(var i=(r||[]).slice(),o=e.start,l=e.end,c=0,u=1,d=o,h=function(){var b=r==null?void 0:r[c];if(b===void 0)return{v:zY(r,u)};var g=c,x,w=function(){return x===void 0&&(x=n(b,g)),x},y=b.coordinate,A=c===0||Gw(t,y,w,d,l);A||(c=0,d=o,u+=1),A&&(d=y+t*(w()/2+s),c+=u)},f;u<=i.length;)if(f=h(),f)return f.v;return[]}function av(t){"@babel/helpers - typeof";return av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},av(t)}function SV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function us(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SV(Object(n),!0).forEach(function(r){D5e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function D5e(t,e,n){return e=L5e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L5e(t){var e=$5e(t,"string");return av(e)=="symbol"?e:e+""}function $5e(t,e){if(av(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(av(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function F5e(t,e,n,r,s){for(var i=(r||[]).slice(),o=i.length,l=e.start,c=e.end,u=function(f){var m=i[f],b,g=function(){return b===void 0&&(b=n(m,f)),b};if(f===o-1){var x=t*(m.coordinate+t*g()/2-c);i[f]=m=us(us({},m),{},{tickCoord:x>0?m.coordinate-x*t:m.coordinate})}else i[f]=m=us(us({},m),{},{tickCoord:m.coordinate});var w=Gw(t,m.tickCoord,g,l,c);w&&(c=m.tickCoord-t*(g()/2+s),i[f]=us(us({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function V5e(t,e,n,r,s,i){var o=(r||[]).slice(),l=o.length,c=e.start,u=e.end;if(i){var d=r[l-1],h=n(d,l-1),f=t*(d.coordinate+t*h/2-u);o[l-1]=d=us(us({},d),{},{tickCoord:f>0?d.coordinate-f*t:d.coordinate});var m=Gw(t,d.tickCoord,function(){return h},c,u);m&&(u=d.tickCoord-t*(h/2+s),o[l-1]=us(us({},d),{},{isShow:!0}))}for(var b=i?l-1:l,g=function(y){var A=o[y],T,v=function(){return T===void 0&&(T=n(A,y)),T};if(y===0){var S=t*(A.coordinate-t*v()/2-c);o[y]=A=us(us({},A),{},{tickCoord:S<0?A.coordinate-S*t:A.coordinate})}else o[y]=A=us(us({},A),{},{tickCoord:A.coordinate});var j=Gw(t,A.tickCoord,v,c,u);j&&(c=A.tickCoord+t*(v()/2+s),o[y]=us(us({},A),{},{isShow:!0}))},x=0;x<b;x++)g(x);return o}function SO(t,e,n){var r=t.tick,s=t.ticks,i=t.viewBox,o=t.minTickGap,l=t.orientation,c=t.interval,u=t.tickFormatter,d=t.unit,h=t.angle;if(!s||!s.length||!r)return[];if(Ee(c)||po.isSsr)return R5e(s,typeof c=="number"&&Ee(c)?c:0);var f=[],m=l==="top"||l==="bottom"?"width":"height",b=d&&m==="width"?kg(d,{fontSize:e,letterSpacing:n}):{width:0,height:0},g=function(A,T){var v=wt(u)?u(A.value,T):A.value;return m==="width"?k5e(kg(v,{fontSize:e,letterSpacing:n}),b,h):kg(v,{fontSize:e,letterSpacing:n})[m]},x=s.length>=2?Ts(s[1].coordinate-s[0].coordinate):1,w=O5e(i,x,m);return c==="equidistantPreserveStart"?M5e(x,w,g,s,o):(c==="preserveStart"||c==="preserveStartEnd"?f=V5e(x,w,g,s,o,c==="preserveStartEnd"):f=F5e(x,w,g,s,o),f.filter(function(y){return y.isShow}))}var B5e=["viewBox"],U5e=["viewBox"],z5e=["ticks"];function wm(t){"@babel/helpers - typeof";return wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wm(t)}function Kh(){return Kh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kh.apply(this,arguments)}function EV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ar(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EV(Object(n),!0).forEach(function(r){EO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NS(t,e){if(t==null)return{};var n=q5e(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function q5e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function W5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function AV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,WY(r.key),r)}}function H5e(t,e,n){return e&&AV(t.prototype,e),n&&AV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function K5e(t,e,n){return e=Yw(e),G5e(t,qY()?Reflect.construct(e,n||[],Yw(t).constructor):e.apply(t,n))}function G5e(t,e){if(e&&(wm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y5e(t)}function Y5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qY=function(){return!!t})()}function Yw(t){return Yw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yw(t)}function Q5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iC(t,e)}function iC(t,e){return iC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},iC(t,e)}function EO(t,e,n){return e=WY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WY(t){var e=X5e(t,"string");return wm(e)=="symbol"?e:e+""}function X5e(t,e){if(wm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(wm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dp=function(t){function e(n){var r;return W5e(this,e),r=K5e(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return Q5e(e,t),H5e(e,[{key:"shouldComponentUpdate",value:function(r,s){var i=r.viewBox,o=NS(r,B5e),l=this.props,c=l.viewBox,u=NS(l,U5e);return!mf(i,c)||!mf(o,u)||!mf(s,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var s=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var s=this.props,i=s.x,o=s.y,l=s.width,c=s.height,u=s.orientation,d=s.tickSize,h=s.mirror,f=s.tickMargin,m,b,g,x,w,y,A=h?-1:1,T=r.tickSize||d,v=Ee(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":m=b=r.coordinate,x=o+ +!h*c,g=x-A*T,y=g-A*f,w=v;break;case"left":g=x=r.coordinate,b=i+ +!h*l,m=b-A*T,w=m-A*f,y=v;break;case"right":g=x=r.coordinate,b=i+ +h*l,m=b+A*T,w=m+A*f,y=v;break;default:m=b=r.coordinate,x=o+ +h*c,g=x+A*T,y=g+A*f,w=v;break}return{line:{x1:m,y1:g,x2:b,y2:x},tick:{x:w,y}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,s=r.orientation,i=r.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,s=r.orientation,i=r.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.x,i=r.y,o=r.width,l=r.height,c=r.orientation,u=r.mirror,d=r.axisLine,h=Ar(Ar(Ar({},ft(this.props,!1)),ft(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!u||c==="bottom"&&u);h=Ar(Ar({},h),{},{x1:s,y1:i+f*l,x2:s+o,y2:i+f*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);h=Ar(Ar({},h),{},{x1:s+m*o,y1:i,x2:s+m*o,y2:i+l})}return D.createElement("line",Kh({},h,{className:Lt("recharts-cartesian-axis-line",Sa(d,"className"))}))}},{key:"renderTicks",value:function(r,s,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,h=l.tickFormatter,f=l.unit,m=SO(Ar(Ar({},this.props),{},{ticks:r}),s,i),b=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),x=ft(this.props,!1),w=ft(d,!1),y=Ar(Ar({},x),{},{fill:"none"},ft(c,!1)),A=m.map(function(T,v){var S=o.getTickLineCoord(T),j=S.line,p=S.tick,E=Ar(Ar(Ar(Ar({textAnchor:b,verticalAnchor:g},x),{},{stroke:"none",fill:u},w),p),{},{index:v,payload:T,visibleTicksCount:m.length,tickFormatter:h});return D.createElement(en,Kh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(T.value,"-").concat(T.coordinate,"-").concat(T.tickCoord)},Fd(o.props,T,v)),c&&D.createElement("line",Kh({},y,j,{className:Lt("recharts-cartesian-axis-tick-line",Sa(c,"className"))})),d&&e.renderTickItem(d,E,"".concat(wt(h)?h(T.value,v):T.value).concat(f||"")))});return D.createElement("g",{className:"recharts-cartesian-axis-ticks"},A)}},{key:"render",value:function(){var r=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,c=s.ticksGenerator,u=s.className,d=s.hide;if(d)return null;var h=this.props,f=h.ticks,m=NS(h,z5e),b=f;return wt(c)&&(b=f&&f.length>0?c(this.props):c(m)),o<=0||l<=0||!b||!b.length?null:D.createElement(en,{className:Lt("recharts-cartesian-axis",u),ref:function(x){r.layerReference=x}},i&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),zr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,s,i){var o,l=Lt(s.className,"recharts-cartesian-axis-tick-value");return D.isValidElement(r)?o=D.cloneElement(r,Ar(Ar({},s),{},{className:l})):wt(r)?o=r(Ar(Ar({},s),{},{className:l})):o=D.createElement(Vd,Kh({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(N.Component);EO(dp,"displayName","CartesianAxis");EO(dp,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Z5e=["x1","y1","x2","y2","key"],J5e=["offset"];function zd(t){"@babel/helpers - typeof";return zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zd(t)}function TV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function gs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TV(Object(n),!0).forEach(function(r){eUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eUe(t,e,n){return e=tUe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tUe(t){var e=nUe(t,"string");return zd(e)=="symbol"?e:e+""}function nUe(t,e){if(zd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(zd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wu(){return Wu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wu.apply(this,arguments)}function CV(t,e){if(t==null)return{};var n=rUe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rUe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var sUe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,s=e.x,i=e.y,o=e.width,l=e.height,c=e.ry;return D.createElement("rect",{x:s,y:i,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function HY(t,e){var n;if(D.isValidElement(t))n=D.cloneElement(t,e);else if(wt(t))n=t(e);else{var r=e.x1,s=e.y1,i=e.x2,o=e.y2,l=e.key,c=CV(e,Z5e),u=ft(c,!1);u.offset;var d=CV(u,J5e);n=D.createElement("line",Wu({},d,{x1:r,y1:s,x2:i,y2:o,fill:"none",key:l}))}return n}function aUe(t){var e=t.x,n=t.width,r=t.horizontal,s=r===void 0?!0:r,i=t.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var u=gs(gs({},t),{},{x1:e,y1:l,x2:e+n,y2:l,key:"line-".concat(c),index:c});return HY(s,u)});return D.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function iUe(t){var e=t.y,n=t.height,r=t.vertical,s=r===void 0?!0:r,i=t.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var u=gs(gs({},t),{},{x1:l,y1:e,x2:l,y2:e+n,key:"line-".concat(c),index:c});return HY(s,u)});return D.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function oUe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,s=t.y,i=t.width,o=t.height,l=t.horizontalPoints,c=t.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var d=l.map(function(f){return Math.round(f+s-s)}).sort(function(f,m){return f-m});s!==d[0]&&d.unshift(0);var h=d.map(function(f,m){var b=!d[m+1],g=b?s+o-f:d[m+1]-f;if(g<=0)return null;var x=m%e.length;return D.createElement("rect",{key:"react-".concat(m),y:f,x:r,height:g,width:i,stroke:"none",fill:e[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return D.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function lUe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,s=t.fillOpacity,i=t.x,o=t.y,l=t.width,c=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(f){return Math.round(f+i-i)}).sort(function(f,m){return f-m});i!==d[0]&&d.unshift(0);var h=d.map(function(f,m){var b=!d[m+1],g=b?i+l-f:d[m+1]-f;if(g<=0)return null;var x=m%r.length;return D.createElement("rect",{key:"react-".concat(m),x:f,y:o,width:g,height:c,stroke:"none",fill:r[x],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return D.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var cUe=function(e,n){var r=e.xAxis,s=e.width,i=e.height,o=e.offset;return UG(SO(gs(gs(gs({},dp.defaultProps),r),{},{ticks:Yo(r,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,n)},uUe=function(e,n){var r=e.yAxis,s=e.width,i=e.height,o=e.offset;return UG(SO(gs(gs(gs({},dp.defaultProps),r),{},{ticks:Yo(r,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,n)},vh={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function KY(t){var e,n,r,s,i,o,l=wO(),c=_O(),u=X3e(),d=gs(gs({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:vh.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:vh.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:vh.horizontal,horizontalFill:(s=t.horizontalFill)!==null&&s!==void 0?s:vh.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:vh.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:vh.verticalFill,x:Ee(t.x)?t.x:u.left,y:Ee(t.y)?t.y:u.top,width:Ee(t.width)?t.width:u.width,height:Ee(t.height)?t.height:u.height}),h=d.x,f=d.y,m=d.width,b=d.height,g=d.syncWithTicks,x=d.horizontalValues,w=d.verticalValues,y=G3e(),A=Y3e();if(!Ee(m)||m<=0||!Ee(b)||b<=0||!Ee(h)||h!==+h||!Ee(f)||f!==+f)return null;var T=d.verticalCoordinatesGenerator||cUe,v=d.horizontalCoordinatesGenerator||uUe,S=d.horizontalPoints,j=d.verticalPoints;if((!S||!S.length)&&wt(v)){var p=x&&x.length,E=v({yAxis:A?gs(gs({},A),{},{ticks:p?x:A.ticks}):void 0,width:l,height:c,offset:u},p?!0:g);Ci(Array.isArray(E),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(zd(E),"]")),Array.isArray(E)&&(S=E)}if((!j||!j.length)&&wt(T)){var P=w&&w.length,C=T({xAxis:y?gs(gs({},y),{},{ticks:P?w:y.ticks}):void 0,width:l,height:c,offset:u},P?!0:g);Ci(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(zd(C),"]")),Array.isArray(C)&&(j=C)}return D.createElement("g",{className:"recharts-cartesian-grid"},D.createElement(sUe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),D.createElement(aUe,Wu({},d,{offset:u,horizontalPoints:S,xAxis:y,yAxis:A})),D.createElement(iUe,Wu({},d,{offset:u,verticalPoints:j,xAxis:y,yAxis:A})),D.createElement(oUe,Wu({},d,{horizontalPoints:S})),D.createElement(lUe,Wu({},d,{verticalPoints:j})))}KY.displayName="CartesianGrid";var dUe=["layout","type","stroke","connectNulls","isRange","ref"],hUe=["key"],GY;function _m(t){"@babel/helpers - typeof";return _m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_m(t)}function YY(t,e){if(t==null)return{};var n=fUe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fUe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Hu(){return Hu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hu.apply(this,arguments)}function PV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Wl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PV(Object(n),!0).forEach(function(r){no(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mUe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,XY(r.key),r)}}function pUe(t,e,n){return e&&IV(t.prototype,e),n&&IV(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function gUe(t,e,n){return e=Qw(e),yUe(t,QY()?Reflect.construct(e,n||[],Qw(t).constructor):e.apply(t,n))}function yUe(t,e){if(e&&(_m(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vUe(t)}function vUe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function QY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QY=function(){return!!t})()}function Qw(t){return Qw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qw(t)}function xUe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oC(t,e)}function oC(t,e){return oC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},oC(t,e)}function no(t,e,n){return e=XY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XY(t){var e=bUe(t,"string");return _m(e)=="symbol"?e:e+""}function bUe(t,e){if(_m(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_m(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vl=function(t){function e(){var n;mUe(this,e);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return n=gUe(this,e,[].concat(s)),no(n,"state",{isAnimationFinished:!0}),no(n,"id",sp("recharts-area-")),no(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),wt(o)&&o()}),no(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),wt(o)&&o()}),n}return xUe(e,t),pUe(e,[{key:"renderDots",value:function(r,s,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,d=c.points,h=c.dataKey,f=ft(this.props,!1),m=ft(u,!0),b=d.map(function(x,w){var y=Wl(Wl(Wl({key:"dot-".concat(w),r:3},f),m),{},{index:w,cx:x.x,cy:x.y,dataKey:h,value:x.value,payload:x.payload,points:d});return e.renderDotItem(u,y)}),g={clipPath:r?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return D.createElement(en,Hu({className:"recharts-area-dots"},g),b)}},{key:"renderHorizontalRect",value:function(r){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].x,u=o[o.length-1].x,d=r*Math.abs(c-u),h=xc(o.map(function(f){return f.y||0}));return Ee(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(xc(i.map(function(f){return f.y||0})),h)),Ee(h)?D.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(h+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].y,u=o[o.length-1].y,d=r*Math.abs(c-u),h=xc(o.map(function(f){return f.x||0}));return Ee(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(xc(i.map(function(f){return f.x||0})),h)),Ee(h)?D.createElement("rect",{x:0,y:c<u?c:c-d,width:h+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(r){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,s,i,o){var l=this.props,c=l.layout,u=l.type,d=l.stroke,h=l.connectNulls,f=l.isRange;l.ref;var m=YY(l,dUe);return D.createElement(en,{clipPath:i?"url(#clipPath-".concat(o,")"):null},D.createElement(vf,Hu({},ft(m,!0),{points:r,connectNulls:h,type:u,baseLine:s,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&D.createElement(vf,Hu({},ft(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:r})),d!=="none"&&f&&D.createElement(vf,Hu({},ft(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(r,s){var i=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,h=o.animationDuration,f=o.animationEasing,m=o.animationId,b=this.state,g=b.prevPoints,x=b.prevBaseLine;return D.createElement(jo,{begin:d,duration:h,isActive:u,easing:f,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(w){var y=w.t;if(g){var A=g.length/l.length,T=l.map(function(p,E){var P=Math.floor(E*A);if(g[P]){var C=g[P],I=Hs(C.x,p.x),O=Hs(C.y,p.y);return Wl(Wl({},p),{},{x:I(y),y:O(y)})}return p}),v;if(Ee(c)&&typeof c=="number"){var S=Hs(x,c);v=S(y)}else if($t(c)||rp(c)){var j=Hs(x,0);v=j(y)}else v=c.map(function(p,E){var P=Math.floor(E*A);if(x[P]){var C=x[P],I=Hs(C.x,p.x),O=Hs(C.y,p.y);return Wl(Wl({},p),{},{x:I(y),y:O(y)})}return p});return i.renderAreaStatically(T,v,r,s)}return D.createElement(en,null,D.createElement("defs",null,D.createElement("clipPath",{id:"animationClipPath-".concat(s)},i.renderClipRect(y))),D.createElement(en,{clipPath:"url(#animationClipPath-".concat(s,")")},i.renderAreaStatically(l,c,r,s)))})}},{key:"renderArea",value:function(r,s){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,u=this.state,d=u.prevPoints,h=u.prevBaseLine,f=u.totalLength;return c&&o&&o.length&&(!d&&f>0||!cm(d,o)||!cm(h,l))?this.renderAreaWithAnimation(r,s):this.renderAreaStatically(o,l,r,s)}},{key:"render",value:function(){var r,s=this.props,i=s.hide,o=s.dot,l=s.points,c=s.className,u=s.top,d=s.left,h=s.xAxis,f=s.yAxis,m=s.width,b=s.height,g=s.isAnimationActive,x=s.id;if(i||!l||!l.length)return null;var w=this.state.isAnimationFinished,y=l.length===1,A=Lt("recharts-area",c),T=h&&h.allowDataOverflow,v=f&&f.allowDataOverflow,S=T||v,j=$t(x)?this.id:x,p=(r=ft(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},E=p.r,P=E===void 0?3:E,C=p.strokeWidth,I=C===void 0?2:C,O=Kje(o)?o:{},$=O.clipDot,z=$===void 0?!0:$,H=P*2+I;return D.createElement(en,{className:A},T||v?D.createElement("defs",null,D.createElement("clipPath",{id:"clipPath-".concat(j)},D.createElement("rect",{x:T?d:d-m/2,y:v?u:u-b/2,width:T?m:m*2,height:v?b:b*2})),!z&&D.createElement("clipPath",{id:"clipPath-dots-".concat(j)},D.createElement("rect",{x:d-H/2,y:u-H/2,width:m+H,height:b+H}))):null,y?null:this.renderArea(S,j),(o||y)&&this.renderDots(S,z,j),(!g||w)&&tl.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:r.points!==s.curPoints||r.baseLine!==s.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(N.PureComponent);GY=vl;no(vl,"displayName","Area");no(vl,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!po.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});no(vl,"getBaseValue",function(t,e,n,r){var s=t.layout,i=t.baseValue,o=e.props.baseValue,l=o??i;if(Ee(l)&&typeof l=="number")return l;var c=s==="horizontal"?r:n,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),h=Math.min(u[0],u[1]);return l==="dataMin"?h:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});no(vl,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,s=t.yAxis,i=t.xAxisTicks,o=t.yAxisTicks,l=t.bandSize,c=t.dataKey,u=t.stackedData,d=t.dataStartIndex,h=t.displayedData,f=t.offset,m=e.layout,b=u&&u.length,g=GY.getBaseValue(e,n,r,s),x=m==="horizontal",w=!1,y=h.map(function(T,v){var S;b?S=u[d+v]:(S=kr(T,c),Array.isArray(S)?w=!0:S=[g,S]);var j=S[1]==null||b&&kr(T,c)==null;return x?{x:nF({axis:r,ticks:i,bandSize:l,entry:T,index:v}),y:j?null:s.scale(S[1]),value:S,payload:T}:{x:j?null:r.scale(S[1]),y:nF({axis:s,ticks:o,bandSize:l,entry:T,index:v}),value:S,payload:T}}),A;return b||w?A=y.map(function(T){var v=Array.isArray(T.value)?T.value[0]:null;return x?{x:T.x,y:v!=null&&T.y!=null?s.scale(v):null}:{x:v!=null?r.scale(v):null,y:T.y}}):A=x?s.scale(g):r.scale(g),Wl({points:y,baseLine:A,layout:m,isRange:w},f)});no(vl,"renderDotItem",function(t,e){var n;if(D.isValidElement(t))n=D.cloneElement(t,e);else if(wt(t))n=t(e);else{var r=Lt("recharts-area-dot",typeof t!="boolean"?t.className:""),s=e.key,i=YY(e,hUe);n=D.createElement(cN,Hu({},i,{key:s,className:r}))}return n});function jm(t){"@babel/helpers - typeof";return jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jm(t)}function wUe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _Ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,eQ(r.key),r)}}function jUe(t,e,n){return e&&_Ue(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function NUe(t,e,n){return e=Xw(e),SUe(t,ZY()?Reflect.construct(e,n||[],Xw(t).constructor):e.apply(t,n))}function SUe(t,e){if(e&&(jm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EUe(t)}function EUe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZY=function(){return!!t})()}function Xw(t){return Xw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xw(t)}function AUe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lC(t,e)}function lC(t,e){return lC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},lC(t,e)}function JY(t,e,n){return e=eQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eQ(t){var e=TUe(t,"string");return jm(e)=="symbol"?e:e+""}function TUe(t,e){if(jm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(jm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cC(){return cC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cC.apply(this,arguments)}function CUe(t){var e=t.xAxisId,n=wO(),r=_O(),s=MY(e);return s==null?null:N.createElement(dp,cC({},s,{className:Lt("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return Yo(o,!0)}}))}var Nm=function(t){function e(){return wUe(this,e),NUe(this,e,arguments)}return AUe(e,t),jUe(e,[{key:"render",value:function(){return N.createElement(CUe,this.props)}}])}(N.Component);JY(Nm,"displayName","XAxis");JY(Nm,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Sm(t){"@babel/helpers - typeof";return Sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sm(t)}function PUe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IUe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rQ(r.key),r)}}function kUe(t,e,n){return e&&IUe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function OUe(t,e,n){return e=Zw(e),RUe(t,tQ()?Reflect.construct(e,n||[],Zw(t).constructor):e.apply(t,n))}function RUe(t,e){if(e&&(Sm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MUe(t)}function MUe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tQ=function(){return!!t})()}function Zw(t){return Zw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zw(t)}function DUe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uC(t,e)}function uC(t,e){return uC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},uC(t,e)}function nQ(t,e,n){return e=rQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rQ(t){var e=LUe(t,"string");return Sm(e)=="symbol"?e:e+""}function LUe(t,e){if(Sm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Sm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dC(){return dC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dC.apply(this,arguments)}var $Ue=function(e){var n=e.yAxisId,r=wO(),s=_O(),i=DY(n);return i==null?null:N.createElement(dp,dC({},i,{className:Lt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:s},ticksGenerator:function(l){return Yo(l,!0)}}))},Em=function(t){function e(){return PUe(this,e),OUe(this,e,arguments)}return DUe(e,t),kUe(e,[{key:"render",value:function(){return N.createElement($Ue,this.props)}}])}(N.Component);nQ(Em,"displayName","YAxis");nQ(Em,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function kV(t){return UUe(t)||BUe(t)||VUe(t)||FUe()}function FUe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VUe(t,e){if(t){if(typeof t=="string")return hC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hC(t,e)}}function BUe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function UUe(t){if(Array.isArray(t))return hC(t)}function hC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var fC=function(e,n,r,s,i){var o=Ya(e,NO),l=Ya(e,vN),c=[].concat(kV(o),kV(l)),u=Ya(e,bN),d="".concat(s,"Id"),h=s[0],f=n;if(c.length&&(f=c.reduce(function(g,x){if(x.props[d]===r&&yo(x.props,"extendDomain")&&Ee(x.props[h])){var w=x.props[h];return[Math.min(g[0],w),Math.max(g[1],w)]}return g},f)),u.length){var m="".concat(h,"1"),b="".concat(h,"2");f=u.reduce(function(g,x){if(x.props[d]===r&&yo(x.props,"extendDomain")&&Ee(x.props[m])&&Ee(x.props[b])){var w=x.props[m],y=x.props[b];return[Math.min(g[0],w,y),Math.max(g[1],w,y)]}return g},f)}return i&&i.length&&(f=i.reduce(function(g,x){return Ee(x)?[Math.min(g[0],x),Math.max(g[1],x)]:g},f)),f},sQ={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,h,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new s(d,h||c,f),b=n?n+u:u;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],m]:c._events[b].push(m):(c._events[b]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)e.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,m=h.length,b=new Array(m);f<m;f++)b[f]=h[f].fn;return b},l.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},l.prototype.emit=function(u,d,h,f,m,b){var g=n?n+u:u;if(!this._events[g])return!1;var x=this._events[g],w=arguments.length,y,A;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),w){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,h),!0;case 4:return x.fn.call(x.context,d,h,f),!0;case 5:return x.fn.call(x.context,d,h,f,m),!0;case 6:return x.fn.call(x.context,d,h,f,m,b),!0}for(A=1,y=new Array(w-1);A<w;A++)y[A-1]=arguments[A];x.fn.apply(x.context,y)}else{var T=x.length,v;for(A=0;A<T;A++)switch(x[A].once&&this.removeListener(u,x[A].fn,void 0,!0),w){case 1:x[A].fn.call(x[A].context);break;case 2:x[A].fn.call(x[A].context,d);break;case 3:x[A].fn.call(x[A].context,d,h);break;case 4:x[A].fn.call(x[A].context,d,h,f);break;default:if(!y)for(v=1,y=new Array(w-1);v<w;v++)y[v-1]=arguments[v];x[A].fn.apply(x[A].context,y)}}return!0},l.prototype.on=function(u,d,h){return i(this,u,d,h,!1)},l.prototype.once=function(u,d,h){return i(this,u,d,h,!0)},l.prototype.removeListener=function(u,d,h,f){var m=n?n+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var b=this._events[m];if(b.fn)b.fn===d&&(!f||b.once)&&(!h||b.context===h)&&o(this,m);else{for(var g=0,x=[],w=b.length;g<w;g++)(b[g].fn!==d||f&&!b[g].once||h&&b[g].context!==h)&&x.push(b[g]);x.length?this._events[m]=x.length===1?x[0]:x:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(sQ);var zUe=sQ.exports;const qUe=pn(zUe);var SS=new qUe,ES="recharts.syncMouseEvents";function iv(t){"@babel/helpers - typeof";return iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iv(t)}function WUe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HUe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aQ(r.key),r)}}function KUe(t,e,n){return e&&HUe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function AS(t,e,n){return e=aQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aQ(t){var e=GUe(t,"string");return iv(e)=="symbol"?e:e+""}function GUe(t,e){if(iv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(iv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var YUe=function(){function t(){WUe(this,t),AS(this,"activeIndex",0),AS(this,"coordinateList",[]),AS(this,"layout","horizontal")}return KUe(t,[{key:"setDetails",value:function(n){var r,s=n.coordinateList,i=s===void 0?null:s,o=n.container,l=o===void 0?null:o,c=n.layout,u=c===void 0?null:c,d=n.offset,h=d===void 0?null:d,f=n.mouseHandlerCallback,m=f===void 0?null:f;this.coordinateList=(r=i??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,h=i+c+u,f=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:h,pageY:f})}}}])}();function QUe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],s=t==null?void 0:t[1];if(r&&s&&Ee(r)&&Ee(s))return!0}return!1}function XUe(t,e,n,r){var s=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-s:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-s,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function iQ(t){var e=t.cx,n=t.cy,r=t.radius,s=t.startAngle,i=t.endAngle,o=On(e,n,r,s),l=On(e,n,r,i);return{points:[o,l],cx:e,cy:n,radius:r,startAngle:s,endAngle:i}}function ZUe(t,e,n){var r,s,i,o;if(t==="horizontal")r=e.x,i=r,s=n.top,o=n.top+n.height;else if(t==="vertical")s=e.y,o=s,r=n.left,i=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,u=e.innerRadius,d=e.outerRadius,h=e.angle,f=On(l,c,u,h),m=On(l,c,d,h);r=f.x,s=f.y,i=m.x,o=m.y}else return iQ(e);return[{x:r,y:s},{x:i,y:o}]}function ov(t){"@babel/helpers - typeof";return ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ov(t)}function OV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function lb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OV(Object(n),!0).forEach(function(r){JUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JUe(t,e,n){return e=e6e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e6e(t){var e=t6e(t,"string");return ov(e)=="symbol"?e:e+""}function t6e(t,e){if(ov(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ov(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function n6e(t){var e,n,r=t.element,s=t.tooltipEventType,i=t.isActive,o=t.activeCoordinate,l=t.activePayload,c=t.offset,u=t.activeTooltipIndex,d=t.tooltipAxisBandSize,h=t.layout,f=t.chartName,m=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!m||!i||!o||f!=="ScatterChart"&&s!=="axis")return null;var b,g=vf;if(f==="ScatterChart")b=o,g=NFe;else if(f==="BarChart")b=XUe(h,o,c,d),g=yO;else if(h==="radial"){var x=iQ(o),w=x.cx,y=x.cy,A=x.radius,T=x.startAngle,v=x.endAngle;b={cx:w,cy:y,startAngle:T,endAngle:v,innerRadius:A,outerRadius:A},g=JG}else b={points:ZUe(h,o,c)},g=vf;var S=lb(lb(lb(lb({stroke:"#ccc",pointerEvents:"none"},c),b),ft(m,!1)),{},{payload:l,payloadIndex:u,className:Lt("recharts-tooltip-cursor",m.className)});return N.isValidElement(m)?N.cloneElement(m,S):N.createElement(g,S)}var r6e=["item"],s6e=["children","className","width","height","style","compact","title","desc"];function Am(t){"@babel/helpers - typeof";return Am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Am(t)}function Gh(){return Gh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gh.apply(this,arguments)}function RV(t,e){return o6e(t)||i6e(t,e)||lQ(t,e)||a6e()}function a6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i6e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function o6e(t){if(Array.isArray(t))return t}function MV(t,e){if(t==null)return{};var n=l6e(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function l6e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function c6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u6e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cQ(r.key),r)}}function d6e(t,e,n){return e&&u6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function h6e(t,e,n){return e=Jw(e),f6e(t,oQ()?Reflect.construct(e,n||[],Jw(t).constructor):e.apply(t,n))}function f6e(t,e){if(e&&(Am(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m6e(t)}function m6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oQ=function(){return!!t})()}function Jw(t){return Jw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jw(t)}function p6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mC(t,e)}function mC(t,e){return mC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},mC(t,e)}function Tm(t){return v6e(t)||y6e(t)||lQ(t)||g6e()}function g6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lQ(t,e){if(t){if(typeof t=="string")return pC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pC(t,e)}}function y6e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function v6e(t){if(Array.isArray(t))return pC(t)}function pC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function DV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function he(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DV(Object(n),!0).forEach(function(r){xt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xt(t,e,n){return e=cQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cQ(t){var e=x6e(t,"string");return Am(e)=="symbol"?e:e+""}function x6e(t,e){if(Am(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Am(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var b6e={xAxis:["bottom","top"],yAxis:["left","right"]},w6e={width:"100%",height:"100%"},uQ={x:0,y:0};function cb(t){return t}var _6e=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},j6e=function(e,n,r,s){var i=n.find(function(d){return d&&d.index===r});if(i){if(e==="horizontal")return{x:i.coordinate,y:s.y};if(e==="vertical")return{x:s.x,y:i.coordinate};if(e==="centric"){var o=i.coordinate,l=s.radius;return he(he(he({},s),On(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=s.angle;return he(he(he({},s),On(s.cx,s.cy,c,u)),{},{angle:u,radius:c})}return uQ},wN=function(e,n){var r=n.graphicalItems,s=n.dataStartIndex,i=n.dataEndIndex,o=(r??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Tm(l),Tm(u)):l},[]);return o.length>0?o:e&&e.length&&Ee(s)&&Ee(i)?e.slice(s,i+1):[]};function dQ(t){return t==="number"?[0,"auto"]:void 0}var gC=function(e,n,r,s){var i=e.graphicalItems,o=e.tooltipAxis,l=wN(n,e);return r<0||!i||!i.length||r>=l.length?null:i.reduce(function(c,u){var d,h=(d=u.props.data)!==null&&d!==void 0?d:n;h&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(h=h.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(o.dataKey&&!o.allowDuplicatedCategory){var m=h===void 0?l:h;f=ew(m,o.dataKey,s)}else f=h&&h[r]||l[r];return f?[].concat(Tm(c),[KG(u,f)]):c},[])},LV=function(e,n,r,s){var i=s||{x:e.chartX,y:e.chartY},o=_6e(i,r),l=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,d=GDe(o,l,u,c);if(d>=0&&u){var h=u[d]&&u[d].value,f=gC(e,n,d,h),m=j6e(r,l,d,i);return{activeTooltipIndex:d,activeLabel:h,activePayload:f,activeCoordinate:m}}return null},N6e=function(e,n){var r=n.axes,s=n.graphicalItems,i=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,h=e.children,f=e.stackOffset,m=BG(d,i);return r.reduce(function(b,g){var x,w=g.type.defaultProps!==void 0?he(he({},g.type.defaultProps),g.props):g.props,y=w.type,A=w.dataKey,T=w.allowDataOverflow,v=w.allowDuplicatedCategory,S=w.scale,j=w.ticks,p=w.includeHidden,E=w[o];if(b[E])return b;var P=wN(e.data,{graphicalItems:s.filter(function(oe){var me,Ie=o in oe.props?oe.props[o]:(me=oe.type.defaultProps)===null||me===void 0?void 0:me[o];return Ie===E}),dataStartIndex:c,dataEndIndex:u}),C=P.length,I,O,$;QUe(w.domain,T,y)&&(I=IT(w.domain,null,T),m&&(y==="number"||S!=="auto")&&($=Rg(P,A,"category")));var z=dQ(y);if(!I||I.length===0){var H,M=(H=w.domain)!==null&&H!==void 0?H:z;if(A){if(I=Rg(P,A,y),y==="category"&&m){var F=Lje(I);v&&F?(O=I,I=Vw(0,C)):v||(I=iF(M,I,g).reduce(function(oe,me){return oe.indexOf(me)>=0?oe:[].concat(Tm(oe),[me])},[]))}else if(y==="category")v?I=I.filter(function(oe){return oe!==""&&!$t(oe)}):I=iF(M,I,g).reduce(function(oe,me){return oe.indexOf(me)>=0||me===""||$t(me)?oe:[].concat(Tm(oe),[me])},[]);else if(y==="number"){var L=JDe(P,s.filter(function(oe){var me,Ie,lt=o in oe.props?oe.props[o]:(me=oe.type.defaultProps)===null||me===void 0?void 0:me[o],ut="hide"in oe.props?oe.props.hide:(Ie=oe.type.defaultProps)===null||Ie===void 0?void 0:Ie.hide;return lt===E&&(p||!ut)}),A,i,d);L&&(I=L)}m&&(y==="number"||S!=="auto")&&($=Rg(P,A,"category"))}else m?I=Vw(0,C):l&&l[E]&&l[E].hasStack&&y==="number"?I=f==="expand"?[0,1]:HG(l[E].stackGroups,c,u):I=VG(P,s.filter(function(oe){var me=o in oe.props?oe.props[o]:oe.type.defaultProps[o],Ie="hide"in oe.props?oe.props.hide:oe.type.defaultProps.hide;return me===E&&(p||!Ie)}),y,d,!0);if(y==="number")I=fC(h,I,E,i,j),M&&(I=IT(M,I,T));else if(y==="category"&&M){var W=M,ie=I.every(function(oe){return W.indexOf(oe)>=0});ie&&(I=W)}}return he(he({},b),{},xt({},E,he(he({},w),{},{axisType:i,domain:I,categoricalDomain:$,duplicateDomain:O,originalDomain:(x=w.domain)!==null&&x!==void 0?x:z,isCategorical:m,layout:d})))},{})},S6e=function(e,n){var r=n.graphicalItems,s=n.Axis,i=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,h=e.children,f=wN(e.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),m=f.length,b=BG(d,i),g=-1;return r.reduce(function(x,w){var y=w.type.defaultProps!==void 0?he(he({},w.type.defaultProps),w.props):w.props,A=y[o],T=dQ("number");if(!x[A]){g++;var v;return b?v=Vw(0,m):l&&l[A]&&l[A].hasStack?(v=HG(l[A].stackGroups,c,u),v=fC(h,v,A,i)):(v=IT(T,VG(f,r.filter(function(S){var j,p,E=o in S.props?S.props[o]:(j=S.type.defaultProps)===null||j===void 0?void 0:j[o],P="hide"in S.props?S.props.hide:(p=S.type.defaultProps)===null||p===void 0?void 0:p.hide;return E===A&&!P}),"number",d),s.defaultProps.allowDataOverflow),v=fC(h,v,A,i)),he(he({},x),{},xt({},A,he(he({axisType:i},s.defaultProps),{},{hide:!0,orientation:Sa(b6e,"".concat(i,".").concat(g%2),null),domain:v,originalDomain:T,isCategorical:b,layout:d})))}return x},{})},E6e=function(e,n){var r=n.axisType,s=r===void 0?"xAxis":r,i=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.children,h="".concat(s,"Id"),f=Ya(d,i),m={};return f&&f.length?m=N6e(e,{axes:f,graphicalItems:o,axisType:s,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=S6e(e,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},A6e=function(e){var n=rc(e),r=Yo(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:qk(r,function(s){return s.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Tw(n,r)}},$V=function(e){var n=e.children,r=e.defaultShowTooltip,s=ua(n,gm),i=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},T6e=function(e){return!e||!e.length?!1:e.some(function(n){var r=Jo(n&&n.type);return r&&r.indexOf("Bar")>=0})},FV=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},C6e=function(e,n){var r=e.props,s=e.graphicalItems,i=e.xAxisMap,o=i===void 0?{}:i,l=e.yAxisMap,c=l===void 0?{}:l,u=r.width,d=r.height,h=r.children,f=r.margin||{},m=ua(h,gm),b=ua(h,pf),g=Object.keys(c).reduce(function(v,S){var j=c[S],p=j.orientation;return!j.mirror&&!j.hide?he(he({},v),{},xt({},p,v[p]+j.width)):v},{left:f.left||0,right:f.right||0}),x=Object.keys(o).reduce(function(v,S){var j=o[S],p=j.orientation;return!j.mirror&&!j.hide?he(he({},v),{},xt({},p,Sa(v,"".concat(p))+j.height)):v},{top:f.top||0,bottom:f.bottom||0}),w=he(he({},x),g),y=w.bottom;m&&(w.bottom+=m.props.height||gm.defaultProps.height),b&&n&&(w=XDe(w,s,r,n));var A=u-w.left-w.right,T=d-w.top-w.bottom;return he(he({brushBottom:y},w),{},{width:Math.max(A,0),height:Math.max(T,0)})},P6e=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},AO=function(e){var n=e.chartName,r=e.GraphicalChild,s=e.defaultTooltipEventType,i=s===void 0?"axis":s,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,h=e.defaultProps,f=function(w,y){var A=y.graphicalItems,T=y.stackGroups,v=y.offset,S=y.updateId,j=y.dataStartIndex,p=y.dataEndIndex,E=w.barSize,P=w.layout,C=w.barGap,I=w.barCategoryGap,O=w.maxBarSize,$=FV(P),z=$.numericAxisName,H=$.cateAxisName,M=T6e(A),F=[];return A.forEach(function(L,W){var ie=wN(w.data,{graphicalItems:[L],dataStartIndex:j,dataEndIndex:p}),oe=L.type.defaultProps!==void 0?he(he({},L.type.defaultProps),L.props):L.props,me=oe.dataKey,Ie=oe.maxBarSize,lt=oe["".concat(z,"Id")],ut=oe["".concat(H,"Id")],je={},ht=c.reduce(function(se,de){var Oe=y["".concat(de.axisType,"Map")],Re=oe["".concat(de.axisType,"Id")];Oe&&Oe[Re]||de.axisType==="zAxis"||Ud();var Se=Oe[Re];return he(he({},se),{},xt(xt({},de.axisType,Se),"".concat(de.axisType,"Ticks"),Yo(Se)))},je),we=ht[H],Me=ht["".concat(H,"Ticks")],Fe=T&&T[lt]&&T[lt].hasStack&&l4e(L,T[lt].stackGroups),ue=Jo(L.type).indexOf("Bar")>=0,Tt=Tw(we,Me),gt=[],an=M&&YDe({barSize:E,stackGroups:T,totalSize:P6e(ht,H)});if(ue){var Zt,wn,Lr=$t(Ie)?O:Ie,nn=(Zt=(wn=Tw(we,Me,!0))!==null&&wn!==void 0?wn:Lr)!==null&&Zt!==void 0?Zt:0;gt=QDe({barGap:C,barCategoryGap:I,bandSize:nn!==Tt?nn:Tt,sizeList:an[ut],maxBarSize:Lr}),nn!==Tt&&(gt=gt.map(function(se){return he(he({},se),{},{position:he(he({},se.position),{},{offset:se.position.offset-nn/2})})}))}var q=L&&L.type&&L.type.getComposedData;q&&F.push({props:he(he({},q(he(he({},ht),{},{displayedData:ie,props:w,dataKey:me,item:L,bandSize:Tt,barPosition:gt,offset:v,stackedData:Fe,layout:P,dataStartIndex:j,dataEndIndex:p}))),{},xt(xt(xt({key:L.key||"item-".concat(W)},z,ht[z]),H,ht[H]),"animationId",S)),childIndex:Qje(L,w.children),item:L})}),F},m=function(w,y){var A=w.props,T=w.dataStartIndex,v=w.dataEndIndex,S=w.updateId;if(!J4({props:A}))return null;var j=A.children,p=A.layout,E=A.stackOffset,P=A.data,C=A.reverseStackOrder,I=FV(p),O=I.numericAxisName,$=I.cateAxisName,z=Ya(j,r),H=i4e(P,z,"".concat(O,"Id"),"".concat($,"Id"),E,C),M=c.reduce(function(oe,me){var Ie="".concat(me.axisType,"Map");return he(he({},oe),{},xt({},Ie,E6e(A,he(he({},me),{},{graphicalItems:z,stackGroups:me.axisType===O&&H,dataStartIndex:T,dataEndIndex:v}))))},{}),F=C6e(he(he({},M),{},{props:A,graphicalItems:z}),y==null?void 0:y.legendBBox);Object.keys(M).forEach(function(oe){M[oe]=d(A,M[oe],F,oe.replace("Map",""),n)});var L=M["".concat($,"Map")],W=A6e(L),ie=f(A,he(he({},M),{},{dataStartIndex:T,dataEndIndex:v,updateId:S,graphicalItems:z,stackGroups:H,offset:F}));return he(he({formattedGraphicalItems:ie,graphicalItems:z,offset:F,stackGroups:H},W),M)},b=function(x){function w(y){var A,T,v;return c6e(this,w),v=h6e(this,w,[y]),xt(v,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),xt(v,"accessibilityManager",new YUe),xt(v,"handleLegendBBoxUpdate",function(S){if(S){var j=v.state,p=j.dataStartIndex,E=j.dataEndIndex,P=j.updateId;v.setState(he({legendBBox:S},m({props:v.props,dataStartIndex:p,dataEndIndex:E,updateId:P},he(he({},v.state),{},{legendBBox:S}))))}}),xt(v,"handleReceiveSyncEvent",function(S,j,p){if(v.props.syncId===S){if(p===v.eventEmitterSymbol&&typeof v.props.syncMethod!="function")return;v.applySyncEvent(j)}}),xt(v,"handleBrushChange",function(S){var j=S.startIndex,p=S.endIndex;if(j!==v.state.dataStartIndex||p!==v.state.dataEndIndex){var E=v.state.updateId;v.setState(function(){return he({dataStartIndex:j,dataEndIndex:p},m({props:v.props,dataStartIndex:j,dataEndIndex:p,updateId:E},v.state))}),v.triggerSyncEvent({dataStartIndex:j,dataEndIndex:p})}}),xt(v,"handleMouseEnter",function(S){var j=v.getMouseInfo(S);if(j){var p=he(he({},j),{},{isTooltipActive:!0});v.setState(p),v.triggerSyncEvent(p);var E=v.props.onMouseEnter;wt(E)&&E(p,S)}}),xt(v,"triggeredAfterMouseMove",function(S){var j=v.getMouseInfo(S),p=j?he(he({},j),{},{isTooltipActive:!0}):{isTooltipActive:!1};v.setState(p),v.triggerSyncEvent(p);var E=v.props.onMouseMove;wt(E)&&E(p,S)}),xt(v,"handleItemMouseEnter",function(S){v.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),xt(v,"handleItemMouseLeave",function(){v.setState(function(){return{isTooltipActive:!1}})}),xt(v,"handleMouseMove",function(S){S.persist(),v.throttleTriggeredAfterMouseMove(S)}),xt(v,"handleMouseLeave",function(S){v.throttleTriggeredAfterMouseMove.cancel();var j={isTooltipActive:!1};v.setState(j),v.triggerSyncEvent(j);var p=v.props.onMouseLeave;wt(p)&&p(j,S)}),xt(v,"handleOuterEvent",function(S){var j=Yje(S),p=Sa(v.props,"".concat(j));if(j&&wt(p)){var E,P;/.*touch.*/i.test(j)?P=v.getMouseInfo(S.changedTouches[0]):P=v.getMouseInfo(S),p((E=P)!==null&&E!==void 0?E:{},S)}}),xt(v,"handleClick",function(S){var j=v.getMouseInfo(S);if(j){var p=he(he({},j),{},{isTooltipActive:!0});v.setState(p),v.triggerSyncEvent(p);var E=v.props.onClick;wt(E)&&E(p,S)}}),xt(v,"handleMouseDown",function(S){var j=v.props.onMouseDown;if(wt(j)){var p=v.getMouseInfo(S);j(p,S)}}),xt(v,"handleMouseUp",function(S){var j=v.props.onMouseUp;if(wt(j)){var p=v.getMouseInfo(S);j(p,S)}}),xt(v,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&v.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),xt(v,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&v.handleMouseDown(S.changedTouches[0])}),xt(v,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&v.handleMouseUp(S.changedTouches[0])}),xt(v,"handleDoubleClick",function(S){var j=v.props.onDoubleClick;if(wt(j)){var p=v.getMouseInfo(S);j(p,S)}}),xt(v,"handleContextMenu",function(S){var j=v.props.onContextMenu;if(wt(j)){var p=v.getMouseInfo(S);j(p,S)}}),xt(v,"triggerSyncEvent",function(S){v.props.syncId!==void 0&&SS.emit(ES,v.props.syncId,S,v.eventEmitterSymbol)}),xt(v,"applySyncEvent",function(S){var j=v.props,p=j.layout,E=j.syncMethod,P=v.state.updateId,C=S.dataStartIndex,I=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)v.setState(he({dataStartIndex:C,dataEndIndex:I},m({props:v.props,dataStartIndex:C,dataEndIndex:I,updateId:P},v.state)));else if(S.activeTooltipIndex!==void 0){var O=S.chartX,$=S.chartY,z=S.activeTooltipIndex,H=v.state,M=H.offset,F=H.tooltipTicks;if(!M)return;if(typeof E=="function")z=E(F,S);else if(E==="value"){z=-1;for(var L=0;L<F.length;L++)if(F[L].value===S.activeLabel){z=L;break}}var W=he(he({},M),{},{x:M.left,y:M.top}),ie=Math.min(O,W.x+W.width),oe=Math.min($,W.y+W.height),me=F[z]&&F[z].value,Ie=gC(v.state,v.props.data,z),lt=F[z]?{x:p==="horizontal"?F[z].coordinate:ie,y:p==="horizontal"?oe:F[z].coordinate}:uQ;v.setState(he(he({},S),{},{activeLabel:me,activeCoordinate:lt,activePayload:Ie,activeTooltipIndex:z}))}else v.setState(S)}),xt(v,"renderCursor",function(S){var j,p=v.state,E=p.isTooltipActive,P=p.activeCoordinate,C=p.activePayload,I=p.offset,O=p.activeTooltipIndex,$=p.tooltipAxisBandSize,z=v.getTooltipEventType(),H=(j=S.props.active)!==null&&j!==void 0?j:E,M=v.props.layout,F=S.key||"_recharts-cursor";return D.createElement(n6e,{key:F,activeCoordinate:P,activePayload:C,activeTooltipIndex:O,chartName:n,element:S,isActive:H,layout:M,offset:I,tooltipAxisBandSize:$,tooltipEventType:z})}),xt(v,"renderPolarAxis",function(S,j,p){var E=Sa(S,"type.axisType"),P=Sa(v.state,"".concat(E,"Map")),C=S.type.defaultProps,I=C!==void 0?he(he({},C),S.props):S.props,O=P&&P[I["".concat(E,"Id")]];return N.cloneElement(S,he(he({},O),{},{className:Lt(E,O.className),key:S.key||"".concat(j,"-").concat(p),ticks:Yo(O,!0)}))}),xt(v,"renderPolarGrid",function(S){var j=S.props,p=j.radialLines,E=j.polarAngles,P=j.polarRadius,C=v.state,I=C.radiusAxisMap,O=C.angleAxisMap,$=rc(I),z=rc(O),H=z.cx,M=z.cy,F=z.innerRadius,L=z.outerRadius;return N.cloneElement(S,{polarAngles:Array.isArray(E)?E:Yo(z,!0).map(function(W){return W.coordinate}),polarRadius:Array.isArray(P)?P:Yo($,!0).map(function(W){return W.coordinate}),cx:H,cy:M,innerRadius:F,outerRadius:L,key:S.key||"polar-grid",radialLines:p})}),xt(v,"renderLegend",function(){var S=v.state.formattedGraphicalItems,j=v.props,p=j.children,E=j.width,P=j.height,C=v.props.margin||{},I=E-(C.left||0)-(C.right||0),O=$G({children:p,formattedGraphicalItems:S,legendWidth:I,legendContent:u});if(!O)return null;var $=O.item,z=MV(O,r6e);return N.cloneElement($,he(he({},z),{},{chartWidth:E,chartHeight:P,margin:C,onBBoxUpdate:v.handleLegendBBoxUpdate}))}),xt(v,"renderTooltip",function(){var S,j=v.props,p=j.children,E=j.accessibilityLayer,P=ua(p,vi);if(!P)return null;var C=v.state,I=C.isTooltipActive,O=C.activeCoordinate,$=C.activePayload,z=C.activeLabel,H=C.offset,M=(S=P.props.active)!==null&&S!==void 0?S:I;return N.cloneElement(P,{viewBox:he(he({},H),{},{x:H.left,y:H.top}),active:M,label:z,payload:M?$:[],coordinate:O,accessibilityLayer:E})}),xt(v,"renderBrush",function(S){var j=v.props,p=j.margin,E=j.data,P=v.state,C=P.offset,I=P.dataStartIndex,O=P.dataEndIndex,$=P.updateId;return N.cloneElement(S,{key:S.key||"_recharts-brush",onChange:sb(v.handleBrushChange,S.props.onChange),data:E,x:Ee(S.props.x)?S.props.x:C.left,y:Ee(S.props.y)?S.props.y:C.top+C.height+C.brushBottom-(p.bottom||0),width:Ee(S.props.width)?S.props.width:C.width,startIndex:I,endIndex:O,updateId:"brush-".concat($)})}),xt(v,"renderReferenceElement",function(S,j,p){if(!S)return null;var E=v,P=E.clipPathId,C=v.state,I=C.xAxisMap,O=C.yAxisMap,$=C.offset,z=S.type.defaultProps||{},H=S.props,M=H.xAxisId,F=M===void 0?z.xAxisId:M,L=H.yAxisId,W=L===void 0?z.yAxisId:L;return N.cloneElement(S,{key:S.key||"".concat(j,"-").concat(p),xAxis:I[F],yAxis:O[W],viewBox:{x:$.left,y:$.top,width:$.width,height:$.height},clipPathId:P})}),xt(v,"renderActivePoints",function(S){var j=S.item,p=S.activePoint,E=S.basePoint,P=S.childIndex,C=S.isRange,I=[],O=j.props.key,$=j.item.type.defaultProps!==void 0?he(he({},j.item.type.defaultProps),j.item.props):j.item.props,z=$.activeDot,H=$.dataKey,M=he(he({index:P,dataKey:H,cx:p.x,cy:p.y,r:4,fill:gO(j.item),strokeWidth:2,stroke:"#fff",payload:p.payload,value:p.value},ft(z,!1)),tw(z));return I.push(w.renderActiveDot(z,M,"".concat(O,"-activePoint-").concat(P))),E?I.push(w.renderActiveDot(z,he(he({},M),{},{cx:E.x,cy:E.y}),"".concat(O,"-basePoint-").concat(P))):C&&I.push(null),I}),xt(v,"renderGraphicChild",function(S,j,p){var E=v.filterFormatItem(S,j,p);if(!E)return null;var P=v.getTooltipEventType(),C=v.state,I=C.isTooltipActive,O=C.tooltipAxis,$=C.activeTooltipIndex,z=C.activeLabel,H=v.props.children,M=ua(H,vi),F=E.props,L=F.points,W=F.isRange,ie=F.baseLine,oe=E.item.type.defaultProps!==void 0?he(he({},E.item.type.defaultProps),E.item.props):E.item.props,me=oe.activeDot,Ie=oe.hide,lt=oe.activeBar,ut=oe.activeShape,je=!!(!Ie&&I&&M&&(me||lt||ut)),ht={};P!=="axis"&&M&&M.props.trigger==="click"?ht={onClick:sb(v.handleItemMouseEnter,S.props.onClick)}:P!=="axis"&&(ht={onMouseLeave:sb(v.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:sb(v.handleItemMouseEnter,S.props.onMouseEnter)});var we=N.cloneElement(S,he(he({},E.props),ht));function Me(de){return typeof O.dataKey=="function"?O.dataKey(de.payload):null}if(je)if($>=0){var Fe,ue;if(O.dataKey&&!O.allowDuplicatedCategory){var Tt=typeof O.dataKey=="function"?Me:"payload.".concat(O.dataKey.toString());Fe=ew(L,Tt,z),ue=W&&ie&&ew(ie,Tt,z)}else Fe=L==null?void 0:L[$],ue=W&&ie&&ie[$];if(ut||lt){var gt=S.props.activeIndex!==void 0?S.props.activeIndex:$;return[N.cloneElement(S,he(he(he({},E.props),ht),{},{activeIndex:gt})),null,null]}if(!$t(Fe))return[we].concat(Tm(v.renderActivePoints({item:E,activePoint:Fe,basePoint:ue,childIndex:$,isRange:W})))}else{var an,Zt=(an=v.getItemByXY(v.state.activeCoordinate))!==null&&an!==void 0?an:{graphicalItem:we},wn=Zt.graphicalItem,Lr=wn.item,nn=Lr===void 0?S:Lr,q=wn.childIndex,se=he(he(he({},E.props),ht),{},{activeIndex:q});return[N.cloneElement(nn,se),null,null]}return W?[we,null,null]:[we,null]}),xt(v,"renderCustomized",function(S,j,p){return N.cloneElement(S,he(he({key:"recharts-customized-".concat(p)},v.props),v.state))}),xt(v,"renderMap",{CartesianGrid:{handler:cb,once:!0},ReferenceArea:{handler:v.renderReferenceElement},ReferenceLine:{handler:cb},ReferenceDot:{handler:v.renderReferenceElement},XAxis:{handler:cb},YAxis:{handler:cb},Brush:{handler:v.renderBrush,once:!0},Bar:{handler:v.renderGraphicChild},Line:{handler:v.renderGraphicChild},Area:{handler:v.renderGraphicChild},Radar:{handler:v.renderGraphicChild},RadialBar:{handler:v.renderGraphicChild},Scatter:{handler:v.renderGraphicChild},Pie:{handler:v.renderGraphicChild},Funnel:{handler:v.renderGraphicChild},Tooltip:{handler:v.renderCursor,once:!0},PolarGrid:{handler:v.renderPolarGrid,once:!0},PolarAngleAxis:{handler:v.renderPolarAxis},PolarRadiusAxis:{handler:v.renderPolarAxis},Customized:{handler:v.renderCustomized}}),v.clipPathId="".concat((A=y.id)!==null&&A!==void 0?A:sp("recharts"),"-clip"),v.throttleTriggeredAfterMouseMove=LK(v.triggeredAfterMouseMove,(T=y.throttleDelay)!==null&&T!==void 0?T:1e3/60),v.state={},v}return p6e(w,x),d6e(w,[{key:"componentDidMount",value:function(){var A,T;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(A=this.props.margin.left)!==null&&A!==void 0?A:0,top:(T=this.props.margin.top)!==null&&T!==void 0?T:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var A=this.props,T=A.children,v=A.data,S=A.height,j=A.layout,p=ua(T,vi);if(p){var E=p.props.defaultIndex;if(!(typeof E!="number"||E<0||E>this.state.tooltipTicks.length-1)){var P=this.state.tooltipTicks[E]&&this.state.tooltipTicks[E].value,C=gC(this.state,v,E,P),I=this.state.tooltipTicks[E].coordinate,O=(this.state.offset.top+S)/2,$=j==="horizontal",z=$?{x:I,y:O}:{y:I,x:O},H=this.state.formattedGraphicalItems.find(function(F){var L=F.item;return L.type.name==="Scatter"});H&&(z=he(he({},z),H.props.points[E].tooltipPosition),C=H.props.points[E].tooltipPayload);var M={activeTooltipIndex:E,isTooltipActive:!0,activeLabel:P,activePayload:C,activeCoordinate:z};this.setState(M),this.renderCursor(p),this.accessibilityManager.setIndex(E)}}}},{key:"getSnapshotBeforeUpdate",value:function(A,T){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==T.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==A.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==A.margin){var v,S;this.accessibilityManager.setDetails({offset:{left:(v=this.props.margin.left)!==null&&v!==void 0?v:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(A){HA([ua(A.children,vi)],[ua(this.props.children,vi)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var A=ua(this.props.children,vi);if(A&&typeof A.props.shared=="boolean"){var T=A.props.shared?"axis":"item";return l.indexOf(T)>=0?T:i}return i}},{key:"getMouseInfo",value:function(A){if(!this.container)return null;var T=this.container,v=T.getBoundingClientRect(),S=_Oe(v),j={chartX:Math.round(A.pageX-S.left),chartY:Math.round(A.pageY-S.top)},p=v.width/T.offsetWidth||1,E=this.inRange(j.chartX,j.chartY,p);if(!E)return null;var P=this.state,C=P.xAxisMap,I=P.yAxisMap,O=this.getTooltipEventType(),$=LV(this.state,this.props.data,this.props.layout,E);if(O!=="axis"&&C&&I){var z=rc(C).scale,H=rc(I).scale,M=z&&z.invert?z.invert(j.chartX):null,F=H&&H.invert?H.invert(j.chartY):null;return he(he({},j),{},{xValue:M,yValue:F},$)}return $?he(he({},j),$):null}},{key:"inRange",value:function(A,T){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,j=A/v,p=T/v;if(S==="horizontal"||S==="vertical"){var E=this.state.offset,P=j>=E.left&&j<=E.left+E.width&&p>=E.top&&p<=E.top+E.height;return P?{x:j,y:p}:null}var C=this.state,I=C.angleAxisMap,O=C.radiusAxisMap;if(I&&O){var $=rc(I);return cF({x:j,y:p},$)}return null}},{key:"parseEventsOfWrapper",value:function(){var A=this.props.children,T=this.getTooltipEventType(),v=ua(A,vi),S={};v&&T==="axis"&&(v.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var j=tw(this.props,this.handleOuterEvent);return he(he({},j),S)}},{key:"addListener",value:function(){SS.on(ES,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){SS.removeListener(ES,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(A,T,v){for(var S=this.state.formattedGraphicalItems,j=0,p=S.length;j<p;j++){var E=S[j];if(E.item===A||E.props.key===A.key||T===Jo(E.item.type)&&v===E.childIndex)return E}return null}},{key:"renderClipPath",value:function(){var A=this.clipPathId,T=this.state.offset,v=T.left,S=T.top,j=T.height,p=T.width;return D.createElement("defs",null,D.createElement("clipPath",{id:A},D.createElement("rect",{x:v,y:S,height:j,width:p})))}},{key:"getXScales",value:function(){var A=this.state.xAxisMap;return A?Object.entries(A).reduce(function(T,v){var S=RV(v,2),j=S[0],p=S[1];return he(he({},T),{},xt({},j,p.scale))},{}):null}},{key:"getYScales",value:function(){var A=this.state.yAxisMap;return A?Object.entries(A).reduce(function(T,v){var S=RV(v,2),j=S[0],p=S[1];return he(he({},T),{},xt({},j,p.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(A){var T;return(T=this.state.xAxisMap)===null||T===void 0||(T=T[A])===null||T===void 0?void 0:T.scale}},{key:"getYScaleByAxisId",value:function(A){var T;return(T=this.state.yAxisMap)===null||T===void 0||(T=T[A])===null||T===void 0?void 0:T.scale}},{key:"getItemByXY",value:function(A){var T=this.state,v=T.formattedGraphicalItems,S=T.activeItem;if(v&&v.length)for(var j=0,p=v.length;j<p;j++){var E=v[j],P=E.props,C=E.item,I=C.type.defaultProps!==void 0?he(he({},C.type.defaultProps),C.props):C.props,O=Jo(C.type);if(O==="Bar"){var $=(P.data||[]).find(function(F){return sFe(A,F)});if($)return{graphicalItem:E,payload:$}}else if(O==="RadialBar"){var z=(P.data||[]).find(function(F){return cF(A,F)});if(z)return{graphicalItem:E,payload:z}}else if(mN(E,S)||pN(E,S)||tv(E,S)){var H=HVe({graphicalItem:E,activeTooltipItem:S,itemData:I.data}),M=I.activeIndex===void 0?H:I.activeIndex;return{graphicalItem:he(he({},E),{},{childIndex:M}),payload:tv(E,S)?I.data[H]:E.props.data[H]}}}return null}},{key:"render",value:function(){var A=this;if(!J4(this))return null;var T=this.props,v=T.children,S=T.className,j=T.width,p=T.height,E=T.style,P=T.compact,C=T.title,I=T.desc,O=MV(T,s6e),$=ft(O,!1);if(P)return D.createElement(yV,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},D.createElement(GA,Gh({},$,{width:j,height:p,title:C,desc:I}),this.renderClipPath(),tL(v,this.renderMap)));if(this.props.accessibilityLayer){var z,H;$.tabIndex=(z=this.props.tabIndex)!==null&&z!==void 0?z:0,$.role=(H=this.props.role)!==null&&H!==void 0?H:"application",$.onKeyDown=function(F){A.accessibilityManager.keyboardEvent(F)},$.onFocus=function(){A.accessibilityManager.focus()}}var M=this.parseEventsOfWrapper();return D.createElement(yV,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},D.createElement("div",Gh({className:Lt("recharts-wrapper",S),style:he({position:"relative",cursor:"default",width:j,height:p},E)},M,{ref:function(L){A.container=L}}),D.createElement(GA,Gh({},$,{width:j,height:p,title:C,desc:I,style:w6e}),this.renderClipPath(),tL(v,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(N.Component);xt(b,"displayName",n),xt(b,"defaultProps",he({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),xt(b,"getDerivedStateFromProps",function(x,w){var y=x.dataKey,A=x.data,T=x.children,v=x.width,S=x.height,j=x.layout,p=x.stackOffset,E=x.margin,P=w.dataStartIndex,C=w.dataEndIndex;if(w.updateId===void 0){var I=$V(x);return he(he(he({},I),{},{updateId:0},m(he(he({props:x},I),{},{updateId:0}),w)),{},{prevDataKey:y,prevData:A,prevWidth:v,prevHeight:S,prevLayout:j,prevStackOffset:p,prevMargin:E,prevChildren:T})}if(y!==w.prevDataKey||A!==w.prevData||v!==w.prevWidth||S!==w.prevHeight||j!==w.prevLayout||p!==w.prevStackOffset||!mf(E,w.prevMargin)){var O=$V(x),$={chartX:w.chartX,chartY:w.chartY,isTooltipActive:w.isTooltipActive},z=he(he({},LV(w,A,j)),{},{updateId:w.updateId+1}),H=he(he(he({},O),$),z);return he(he(he({},H),m(he({props:x},H),w)),{},{prevDataKey:y,prevData:A,prevWidth:v,prevHeight:S,prevLayout:j,prevStackOffset:p,prevMargin:E,prevChildren:T})}if(!HA(T,w.prevChildren)){var M,F,L,W,ie=ua(T,gm),oe=ie&&(M=(F=ie.props)===null||F===void 0?void 0:F.startIndex)!==null&&M!==void 0?M:P,me=ie&&(L=(W=ie.props)===null||W===void 0?void 0:W.endIndex)!==null&&L!==void 0?L:C,Ie=oe!==P||me!==C,lt=!$t(A),ut=lt&&!Ie?w.updateId:w.updateId+1;return he(he({updateId:ut},m(he(he({props:x},w),{},{updateId:ut,dataStartIndex:oe,dataEndIndex:me}),w)),{},{prevChildren:T,dataStartIndex:oe,dataEndIndex:me})}return null}),xt(b,"renderActiveDot",function(x,w,y){var A;return N.isValidElement(x)?A=N.cloneElement(x,w):wt(x)?A=x(w):A=D.createElement(cN,w),D.createElement(en,{className:"recharts-active-dot",key:y},A)});var g=N.forwardRef(function(w,y){return D.createElement(b,Gh({},w,{ref:y}))});return g.displayName=b.displayName,g},I6e=AO({chartName:"BarChart",GraphicalChild:ih,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Nm},{axisType:"yAxis",AxisComp:Em}],formatAxisMap:AY}),k6e=AO({chartName:"PieChart",GraphicalChild:El,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:fN},{axisType:"radiusAxis",AxisComp:dN}],formatAxisMap:v4e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),O6e=AO({chartName:"AreaChart",GraphicalChild:vl,axisComponents:[{axisType:"xAxis",AxisComp:Nm},{axisType:"yAxis",AxisComp:Em}],formatAxisMap:AY});const hQ=t=>t.toLowerCase().replace(/[_\s-]/g,""),R6e=t=>{const e=new Map;return Object.entries(t).forEach(([n,r])=>{e.set(hQ(n),r)}),e},M6e=(t,e)=>{const n=t[e];return n!==void 0?n:R6e(t).get(hQ(e))},TO=(t,e,n=null)=>{for(const r of e){const s=M6e(t,r);if(s!=null)return s}return n},De=(t,e,n="")=>{const r=TO(t,e);return typeof r=="string"?r:n},Qe=(t,e,n=0)=>{const r=TO(t,e),s=Number(r);return Number.isFinite(s)?s:n},D6e=(t,e,n=!1)=>{const r=TO(t,e);return typeof r=="boolean"?r:n},ub=["#0f172a","#334155","#475569","#64748b","#94a3b8"];function L6e(){var i,o,l,c;const{user:t}=ct(),{data:e}=Ne({queryKey:["admin-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalRevenue:0,pendingInvoices:0,activeEmployees:0,totalEmployees:0,totalPayroll:0,totalExpenses:0,activeProjects:0,totalCustomers:0,departmentData:[],monthlyRevenue:[],projects:[]};const{invoices:u,employees:d,payrollRuns:h,expenses:f,projects:m,customers:b}=await si.runQueries(t.id,{invoices:{collectionName:Y.INVOICES},employees:{collectionName:Y.EMPLOYEES},payrollRuns:{collectionName:Y.PAYROLL_RUNS},expenses:{collectionName:Y.EXPENSES},projects:{collectionName:Y.PROJECTS},customers:{collectionName:Y.CUSTOMERS}}),g=d.reduce((w,y)=>{const A=De(y,["department"],"Other");return w[A]||(w[A]=0),w[A]++,w},{}),x=[{name:"Jan",revenue:12e3,expenses:8e3},{name:"Feb",revenue:15e3,expenses:9500},{name:"Mar",revenue:18e3,expenses:11e3},{name:"Apr",revenue:22e3,expenses:13e3},{name:"May",revenue:25e3,expenses:14500},{name:"Jun",revenue:28e3,expenses:16e3},{name:"Jul",revenue:32e3,expenses:18e3},{name:"Aug",revenue:35e3,expenses:19500},{name:"Sep",revenue:38e3,expenses:21e3},{name:"Oct",revenue:42e3,expenses:23e3},{name:"Nov",revenue:45e3,expenses:25e3},{name:"Dec",revenue:48e3,expenses:27e3}];return{totalRevenue:u.filter(w=>De(w,["status"])==="paid").reduce((w,y)=>w+Qe(y,["total","amount"]),0),pendingInvoices:u.filter(w=>De(w,["status"])==="pending").length,activeEmployees:d.filter(w=>De(w,["employmentStatus","employment_status"])==="active").length,totalEmployees:d.length,totalPayroll:h.filter(w=>De(w,["status","payrollStatus","payroll_status"])==="approved").reduce((w,y)=>w+Qe(y,["totalNet","total_net"]),0),totalExpenses:f.reduce((w,y)=>w+Qe(y,["amount","total"]),0),activeProjects:m.filter(w=>De(w,["status"])==="active").length,totalCustomers:b.length,departmentData:Object.entries(g).map(([w,y])=>({name:w,value:y})),monthlyRevenue:x,projects:m.slice(0,5)}}}),n=(t==null?void 0:t.displayName)||((i=t==null?void 0:t.email)==null?void 0:i.split("@")[0])||"Admin",r=[{title:"Total Revenue",value:le((e==null?void 0:e.totalRevenue)||0),icon:Qn,color:"bg-primary",bgColor:"bg-primary/10",iconColor:"text-primary"},{title:"Employees",value:((o=e==null?void 0:e.totalEmployees)==null?void 0:o.toLocaleString())||"0",subtitle:`${(e==null?void 0:e.activeEmployees)||0} active`,icon:Ks,color:"bg-blue-500",bgColor:"bg-blue-50",iconColor:"text-blue-500"},{title:"Health Index",value:"75%",icon:f0,color:"bg-green-500",bgColor:"bg-green-50",iconColor:"text-green-500",trend:"+2%"},{title:"Customers",value:((l=e==null?void 0:e.totalCustomers)==null?void 0:l.toLocaleString())||"0",icon:Ote,color:"bg-purple-500",bgColor:"bg-purple-50",iconColor:"text-purple-500"}],s=[{name:"Invoice #1234",type:"Payment Due",date:"Today",status:"urgent"},{name:"Payroll Run",type:"Monthly",date:"Friday",status:"scheduled"},{name:"Tax Filing",type:"ZRA Compliance",date:"Next Week",status:"pending"},{name:"Budget Review",type:"Finance",date:"Monday",status:"scheduled"}];return a.jsxs("div",{className:"space-y-6 min-h-screen pb-10",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-foreground",children:["Welcome ",n,","]}),a.jsx("p",{className:"text-muted-foreground",children:"Here's your organization's financial overview."})]})}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"relative hidden md:block",children:[a.jsx(na,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(K,{placeholder:"Search...",className:"pl-10 w-64 rounded-full bg-muted/50 focus:bg-background transition-colors"})]}),a.jsxs(G,{variant:"ghost",size:"icon",className:"relative text-muted-foreground hover:text-foreground",children:[a.jsx(ute,{className:"h-5 w-5"}),a.jsx("span",{className:"absolute top-2 right-2 h-2 w-2 bg-red-500 rounded-full ring-2 ring-background"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ete,{className:"h-4 w-4 text-muted-foreground"}),a.jsx(Zr,{}),a.jsx("span",{className:"text-sm text-muted-foreground",children:"Dark Mode"})]}),a.jsxs("div",{className:"flex items-center gap-3 pl-4 border-l",children:[a.jsx(hH,{className:"h-9 w-9 border border-border",children:a.jsx(fH,{className:"bg-primary/10 text-primary font-medium",children:n.charAt(0).toUpperCase()})}),a.jsxs("div",{className:"hidden md:block",children:[a.jsx("p",{className:"text-sm font-medium",children:n}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Administrator"})]})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:r.map((u,d)=>a.jsx(X,{className:"border border-border/50 shadow-sm hover:shadow-md transition-shadow",children:a.jsxs(re,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:`p-3 rounded-xl ${u.bgColor}`,children:a.jsx(u.icon,{className:`h-5 w-5 ${u.iconColor}`})}),u.trend&&a.jsxs(Xe,{className:"bg-green-100 text-green-700 hover:bg-green-200 border-green-200 gap-1",children:[a.jsx(Za,{className:"h-3 w-3"}),u.trend]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:u.title}),a.jsx("p",{className:"text-3xl font-bold mt-1 tracking-tight text-foreground",children:u.value}),u.subtitle&&a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:u.subtitle})]})]})},d))}),a.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[a.jsxs(X,{className:"border border-border/50 shadow-sm",children:[a.jsx(ee,{children:a.jsx(ne,{className:"text-lg",children:"Department Distribution"})}),a.jsx(re,{children:a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("div",{className:"relative w-40 h-40",children:[a.jsx(uS,{width:"100%",height:"100%",children:a.jsx(k6e,{children:a.jsx(El,{data:(c=e==null?void 0:e.departmentData)!=null&&c.length?e.departmentData:[{name:"No Data",value:1}],innerRadius:50,outerRadius:70,paddingAngle:2,dataKey:"value",children:((e==null?void 0:e.departmentData)||[{name:"No Data",value:1}]).map((u,d)=>a.jsx(Xj,{fill:ub[d%ub.length]},`cell-${d}`))})})}),a.jsxs("div",{className:"absolute inset-0 flex items-center justify-center flex-col",children:[a.jsx("p",{className:"text-2xl font-bold text-primary",children:(e==null?void 0:e.totalEmployees)||0}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Total"})]})]}),a.jsxs("div",{className:"flex-1 space-y-2",children:[((e==null?void 0:e.departmentData)||[]).slice(0,5).map((u,d)=>a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:ub[d%ub.length]}}),a.jsx("span",{className:"truncate max-w-[100px] text-muted-foreground",children:u.name})]}),a.jsx("span",{className:"font-medium",children:u.value})]},u.name)),(!(e!=null&&e.departmentData)||e.departmentData.length===0)&&a.jsx("p",{className:"text-sm text-muted-foreground",children:"No employee data"})]})]})})]}),a.jsxs(X,{className:"lg:col-span-2 border border-border/50 shadow-sm",children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between",children:[a.jsx(ne,{className:"text-lg",children:"Revenue Overview"}),a.jsxs("div",{className:"flex gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-slate-900"}),a.jsx("span",{className:"text-muted-foreground",children:"Revenue"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-blue-500"}),a.jsx("span",{className:"text-muted-foreground",children:"Expenses"})]})]})]}),a.jsx(re,{children:a.jsx(uS,{width:"100%",height:250,children:a.jsxs(O6e,{data:(e==null?void 0:e.monthlyRevenue)||[],children:[a.jsxs("defs",{children:[a.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#0f172a",stopOpacity:.1}),a.jsx("stop",{offset:"95%",stopColor:"#0f172a",stopOpacity:0})]}),a.jsxs("linearGradient",{id:"colorExpenses",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.1}),a.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})]}),a.jsx(KY,{strokeDasharray:"3 3",vertical:!1,stroke:"#e2e8f0"}),a.jsx(Nm,{dataKey:"name",axisLine:!1,tickLine:!1,fontSize:12,tick:{fill:"#64748b"}}),a.jsx(Em,{axisLine:!1,tickLine:!1,fontSize:12,tick:{fill:"#64748b"},tickFormatter:u=>`K${u/1e3}k`}),a.jsx(vi,{contentStyle:{borderRadius:"8px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),a.jsx(vl,{type:"monotone",dataKey:"revenue",stroke:"#0f172a",fill:"url(#colorRevenue)",strokeWidth:2}),a.jsx(vl,{type:"monotone",dataKey:"expenses",stroke:"#3b82f6",fill:"url(#colorExpenses)",strokeWidth:2})]})})})]})]}),a.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[a.jsxs(X,{className:"lg:col-span-2 border border-border/50 shadow-sm",children:[a.jsx(ee,{children:a.jsxs(ne,{className:"text-lg flex items-center gap-2",children:[a.jsx(xU,{className:"h-5 w-5 text-primary"}),"Regional Performance"]})}),a.jsx(re,{children:a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsx("div",{className:"space-y-4",children:[{region:"Lusaka",value:42e3,color:"bg-primary"},{region:"Copperbelt",value:28e3,color:"bg-blue-500"},{region:"Southern",value:18e3,color:"bg-indigo-500"},{region:"Eastern",value:12e3,color:"bg-violet-500"}].map(u=>a.jsxs("div",{className:"flex items-center justify-between group",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${u.color}`}),a.jsx("span",{className:"font-medium text-muted-foreground group-hover:text-foreground transition-colors",children:u.region})]}),a.jsx("span",{className:"font-bold tabular-nums",children:le(u.value)})]},u.region))}),a.jsx("div",{className:"flex items-center justify-center",children:a.jsx(uS,{width:"100%",height:200,children:a.jsxs(I6e,{data:[{name:"Lusaka",value:42},{name:"Copperbelt",value:28},{name:"Southern",value:18},{name:"Eastern",value:12}],children:[a.jsx(Nm,{dataKey:"name",axisLine:!1,tickLine:!1,fontSize:12,tick:{fill:"#64748b"}}),a.jsx(Em,{hide:!0}),a.jsx(vi,{cursor:{fill:"#f1f5f9"},contentStyle:{borderRadius:"8px",border:"1px solid #e2e8f0"}}),a.jsx(ih,{dataKey:"value",fill:"#0f172a",radius:[4,4,0,0],barSize:40})]})})})]})})]}),a.jsxs(X,{className:"border border-border/50 shadow-sm",children:[a.jsx(ee,{children:a.jsxs(ne,{className:"text-lg flex items-center gap-2",children:[a.jsx(vd,{className:"h-5 w-5 text-primary"}),"Upcoming Tasks"]})}),a.jsx(re,{children:a.jsx("div",{className:"space-y-4",children:s.map((u,d)=>a.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg hover:bg-muted/50 transition-colors border border-transparent hover:border-border/50",children:[a.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center ${u.status==="urgent"?"bg-red-50 text-red-600":u.status==="scheduled"?"bg-blue-50 text-blue-600":"bg-slate-50 text-slate-600"}`,children:a.jsx(rte,{className:"h-4.5 w-4.5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-sm text-foreground",children:u.name}),a.jsx("p",{className:"text-xs text-muted-foreground",children:u.type})]}),a.jsx(Xe,{variant:u.status==="urgent"?"destructive":"secondary",className:"text-xs font-normal",children:u.date})]},d))})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsx(X,{className:"border border-border/50 shadow-sm hover:border-primary/20 transition-colors",children:a.jsx(re,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Active Projects"}),a.jsx("p",{className:"text-2xl font-bold mt-1",children:(e==null?void 0:e.activeProjects)||0})]}),a.jsx("div",{className:"h-10 w-10 rounded-xl bg-green-50 flex items-center justify-center",children:a.jsx(ar,{className:"h-5 w-5 text-green-600"})})]})})}),a.jsx(X,{className:"border border-border/50 shadow-sm hover:border-primary/20 transition-colors",children:a.jsx(re,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Pending Invoices"}),a.jsx("p",{className:"text-2xl font-bold mt-1",children:(e==null?void 0:e.pendingInvoices)||0})]}),a.jsx("div",{className:"h-10 w-10 rounded-xl bg-amber-50 flex items-center justify-center",children:a.jsx(Qn,{className:"h-5 w-5 text-amber-600"})})]})})}),a.jsx(X,{className:"border border-border/50 shadow-sm hover:border-primary/20 transition-colors",children:a.jsx(re,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Total Payroll"}),a.jsx("p",{className:"text-2xl font-bold mt-1",children:le((e==null?void 0:e.totalPayroll)||0)})]}),a.jsx("div",{className:"h-10 w-10 rounded-xl bg-blue-50 flex items-center justify-center",children:a.jsx(Ks,{className:"h-5 w-5 text-blue-600"})})]})})}),a.jsx(X,{className:"border border-border/50 shadow-sm hover:border-primary/20 transition-colors",children:a.jsx(re,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:"Total Expenses"}),a.jsx("p",{className:"text-2xl font-bold mt-1",children:le((e==null?void 0:e.totalExpenses)||0)})]}),a.jsx("div",{className:"h-10 w-10 rounded-xl bg-red-50 flex items-center justify-center",children:a.jsx(Za,{className:"h-5 w-5 text-red-600"})})]})})})]})]})}function $6e(){var s;const{user:t}=ct(),{data:e}=Ne({queryKey:["accountant-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalRevenue:0,outstandingReceivables:0,vatCollected:0,totalExpenses:0,unpaidBills:0,cashBalance:0,pendingInvoices:0,bankAccounts:[]};const{invoices:i,expenses:o,bills:l,bankAccounts:c}=await si.runQueries(t.id,{invoices:{collectionName:Y.INVOICES},expenses:{collectionName:Y.EXPENSES},bills:{collectionName:Y.BILLS},bankAccounts:{collectionName:Y.BANK_ACCOUNTS}});return{totalRevenue:i.filter(u=>De(u,["status"])==="paid").reduce((u,d)=>u+Qe(d,["total","grandTotal","amount"]),0),outstandingReceivables:i.filter(u=>De(u,["status"])!=="paid").reduce((u,d)=>u+Qe(d,["total","grandTotal","amount"]),0),vatCollected:i.filter(u=>De(u,["status"])==="paid").reduce((u,d)=>u+Qe(d,["vatAmount","vat_amount"]),0),totalExpenses:o.reduce((u,d)=>u+Qe(d,["amount","total"]),0),unpaidBills:l.filter(u=>De(u,["status"])!=="paid").reduce((u,d)=>u+Qe(d,["total","amount"]),0),cashBalance:c.reduce((u,d)=>u+Qe(d,["currentBalance","current_balance"]),0),pendingInvoices:i.filter(u=>De(u,["status"])==="pending").length,bankAccounts:c}}}),n=[{title:"Total Revenue",value:le((e==null?void 0:e.totalRevenue)||0),icon:Qn,trend:"up"},{title:"Outstanding Receivables",value:le((e==null?void 0:e.outstandingReceivables)||0),icon:ar,trend:"neutral"},{title:"Total Expenses",value:le((e==null?void 0:e.totalExpenses)||0),icon:ki,trend:"down"},{title:"Cash Balance",value:le((e==null?void 0:e.cashBalance)||0),icon:xd,trend:"up"}],r=((e==null?void 0:e.totalRevenue)||0)-((e==null?void 0:e.totalExpenses)||0);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Accountant Dashboard"}),a.jsx("p",{className:"text-muted-foreground",children:"Financial overview and key metrics"})]}),a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(i=>a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:i.title}),a.jsx(i.icon,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(re,{children:[a.jsx("div",{className:"text-2xl font-bold",children:i.value}),i.trend==="up"&&a.jsx(Za,{className:"h-3 w-3 text-green-500 inline ml-1"}),i.trend==="down"&&a.jsx(ki,{className:"h-3 w-3 text-red-500 inline ml-1"})]})]},i.title))}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"Profit & Loss Summary"})}),a.jsxs(re,{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Total Revenue"}),a.jsx("span",{className:"font-medium text-green-600",children:le((e==null?void 0:e.totalRevenue)||0)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Total Expenses"}),a.jsxs("span",{className:"font-medium text-red-600",children:["(",le((e==null?void 0:e.totalExpenses)||0),")"]})]}),a.jsxs("div",{className:"border-t pt-3 flex justify-between",children:[a.jsx("span",{className:"font-semibold",children:"Net Income"}),a.jsx("span",{className:`font-bold ${r>=0?"text-green-600":"text-red-600"}`,children:le(r)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"VAT Collected"}),a.jsx("span",{className:"font-medium",children:le((e==null?void 0:e.vatCollected)||0)})]})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsxs(ne,{className:"flex items-center gap-2",children:[a.jsx(dte,{className:"h-5 w-5"}),"Bank Accounts"]})}),a.jsx(re,{children:a.jsxs("div",{className:"space-y-3",children:[(s=e==null?void 0:e.bankAccounts)==null?void 0:s.map(i=>a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:De(i,["accountName","account_name"],"Bank Account")}),a.jsx("span",{className:"font-medium",children:le(Qe(i,["currentBalance","current_balance"]))})]},De(i,["accountName","account_name","id"],"bank-account"))),(!(e!=null&&e.bankAccounts)||e.bankAccounts.length===0)&&a.jsx("p",{className:"text-muted-foreground text-sm",children:"No bank accounts configured"})]})})]})]})]})}function F6e(){const{user:t}=ct(),{data:e}=Ne({queryKey:["bookkeeper-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalInvoices:0,paidInvoices:0,unpaidInvoicesAmount:0,totalExpenses:0,unpaidBillsAmount:0,overdueBillsCount:0,overdueBillsAmount:0,vendorCount:0,customerCount:0,recentExpenses:[]};const{invoices:r,expenses:s,bills:i,vendors:o,customers:l}=await si.runQueries(t.id,{invoices:{collectionName:Y.INVOICES},expenses:{collectionName:Y.EXPENSES},bills:{collectionName:Y.BILLS},vendors:{collectionName:Y.VENDORS},customers:{collectionName:Y.CUSTOMERS}}),c=new Date().toISOString().split("T")[0],u=i.filter(d=>{const h=De(d,["dueDate","due_date"]);return De(d,["status"])!=="paid"&&!!h&&h<c});return{totalInvoices:r.length,paidInvoices:r.filter(d=>De(d,["status"])==="paid").length,unpaidInvoicesAmount:r.filter(d=>De(d,["status"])!=="paid").reduce((d,h)=>d+Qe(h,["total","amount"]),0),totalExpenses:s.reduce((d,h)=>d+Qe(h,["amount","total"]),0),unpaidBillsAmount:i.filter(d=>De(d,["status"])!=="paid").reduce((d,h)=>d+Qe(h,["total","amount"]),0),overdueBillsCount:u.length,overdueBillsAmount:u.reduce((d,h)=>d+Qe(h,["total","amount"]),0),vendorCount:o.length,customerCount:l.length,recentExpenses:s.slice(0,5)}}}),n=[{title:"Invoices Created",value:(e==null?void 0:e.totalInvoices)||0,subtitle:`${(e==null?void 0:e.paidInvoices)||0} paid`,icon:ar,color:"text-primary"},{title:"Unpaid Invoices",value:le((e==null?void 0:e.unpaidInvoicesAmount)||0),icon:C_,color:"text-warning"},{title:"Total Expenses",value:le((e==null?void 0:e.totalExpenses)||0),icon:ki,color:"text-destructive"},{title:"Unpaid Bills",value:le((e==null?void 0:e.unpaidBillsAmount)||0),icon:xd,color:"text-amber-600"}];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Bookkeeper Dashboard"}),a.jsx("p",{className:"text-muted-foreground",children:"Daily transaction overview and data entry tasks"})]}),a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(r=>a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:r.title}),a.jsx(r.icon,{className:`h-4 w-4 ${r.color}`})]}),a.jsxs(re,{children:[a.jsx("div",{className:"text-2xl font-bold",children:r.value}),"subtitle"in r&&a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r.subtitle})]})]},r.title))}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs(X,{children:[a.jsx(ee,{children:a.jsxs(ne,{className:"flex items-center gap-2",children:[a.jsx(Za,{className:"h-5 w-5 text-primary"}),"Quick Stats"]})}),a.jsxs(re,{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Total Customers"}),a.jsx("span",{className:"font-medium",children:(e==null?void 0:e.customerCount)||0})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Total Vendors"}),a.jsx("span",{className:"font-medium",children:(e==null?void 0:e.vendorCount)||0})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Overdue Bills"}),a.jsx("span",{className:"font-medium text-destructive",children:(e==null?void 0:e.overdueBillsCount)||0})]})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsxs(ne,{className:"flex items-center gap-2 text-destructive",children:[a.jsx(Qn,{className:"h-5 w-5"}),"Overdue Payments"]})}),a.jsx(re,{children:(e==null?void 0:e.overdueBillsCount)>0?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Bills Overdue"}),a.jsx("span",{className:"font-bold text-destructive",children:e.overdueBillsCount})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Total Amount"}),a.jsx("span",{className:"font-bold text-destructive",children:le(e.overdueBillsAmount||0)})]})]}):a.jsx("p",{className:"text-muted-foreground text-sm",children:"No overdue payments"})})]})]})]})}function Wr(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function xl(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function fQ(t,e){const n=Wr(t);if(isNaN(e))return xl(t,NaN);if(!e)return n;const r=n.getDate(),s=xl(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const i=s.getDate();return r>=i?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}const mQ=6048e5,V6e=864e5;let B6e={};function _N(){return B6e}function lv(t,e){var l,c,u,d;const n=_N(),r=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Wr(t),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function e_(t){return lv(t,{weekStartsOn:1})}function pQ(t){const e=Wr(t),n=e.getFullYear(),r=xl(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=e_(r),i=xl(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=e_(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function VV(t){const e=Wr(t);return e.setHours(0,0,0,0),e}function BV(t){const e=Wr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function gQ(t,e){const n=VV(t),r=VV(e),s=+n-BV(n),i=+r-BV(r);return Math.round((s-i)/V6e)}function U6e(t){const e=pQ(t),n=xl(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),e_(n)}function z6e(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function q6e(t){if(!z6e(t)&&typeof t!="number")return!1;const e=Wr(t);return!isNaN(Number(e))}function hs(t,e){const n=Wr(t),r=Wr(e),s=UV(n,r),i=Math.abs(gQ(n,r));n.setDate(n.getDate()-s*i);const o=+(UV(n,r)===-s),l=s*(i-o);return l===0?0:l}function UV(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function yQ(t){const e=Wr(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function vQ(t){const e=Wr(t);return e.setDate(1),e.setHours(0,0,0,0),e}function W6e(t){const e=Wr(t),n=xl(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const H6e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},K6e=(t,e,n)=>{let r;const s=H6e[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function TS(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const G6e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Y6e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Q6e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},X6e={date:TS({formats:G6e,defaultWidth:"full"}),time:TS({formats:Y6e,defaultWidth:"full"}),dateTime:TS({formats:Q6e,defaultWidth:"full"})},Z6e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},J6e=(t,e,n,r)=>Z6e[t];function Kp(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):o;s=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[l]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const e9e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},t9e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},n9e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},r9e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},s9e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},a9e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},i9e=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},o9e={ordinalNumber:i9e,era:Kp({values:e9e,defaultWidth:"wide"}),quarter:Kp({values:t9e,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Kp({values:n9e,defaultWidth:"wide"}),day:Kp({values:r9e,defaultWidth:"wide"}),dayPeriod:Kp({values:s9e,defaultWidth:"wide",formattingValues:a9e,defaultFormattingWidth:"wide"})};function Gp(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?c9e(l,h=>h.test(o)):l9e(l,h=>h.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function l9e(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function c9e(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function u9e(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(s.length);return{value:o,rest:l}}}const d9e=/^(\d+)(th|st|nd|rd)?/i,h9e=/\d+/i,f9e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},m9e={any:[/^b/i,/^(a|c)/i]},p9e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},g9e={any:[/1/i,/2/i,/3/i,/4/i]},y9e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},v9e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},x9e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},b9e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},w9e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},_9e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},j9e={ordinalNumber:u9e({matchPattern:d9e,parsePattern:h9e,valueCallback:t=>parseInt(t,10)}),era:Gp({matchPatterns:f9e,defaultMatchWidth:"wide",parsePatterns:m9e,defaultParseWidth:"any"}),quarter:Gp({matchPatterns:p9e,defaultMatchWidth:"wide",parsePatterns:g9e,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Gp({matchPatterns:y9e,defaultMatchWidth:"wide",parsePatterns:v9e,defaultParseWidth:"any"}),day:Gp({matchPatterns:x9e,defaultMatchWidth:"wide",parsePatterns:b9e,defaultParseWidth:"any"}),dayPeriod:Gp({matchPatterns:w9e,defaultMatchWidth:"any",parsePatterns:_9e,defaultParseWidth:"any"})},N9e={code:"en-US",formatDistance:K6e,formatLong:X6e,formatRelative:J6e,localize:o9e,match:j9e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function S9e(t){const e=Wr(t);return gQ(e,W6e(e))+1}function E9e(t){const e=Wr(t),n=+e_(e)-+U6e(e);return Math.round(n/mQ)+1}function xQ(t,e){var d,h,f,m;const n=Wr(t),r=n.getFullYear(),s=_N(),i=(e==null?void 0:e.firstWeekContainsDate)??((h=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=xl(t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const l=lv(o,e),c=xl(t,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const u=lv(c,e);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function A9e(t,e){var l,c,u,d;const n=_N(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=xQ(t,e),i=xl(t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),lv(i,e)}function T9e(t,e){const n=Wr(t),r=+lv(n,e)-+A9e(n,e);return Math.round(r/mQ)+1}function yn(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Vl={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return yn(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):yn(n+1,2)},d(t,e){return yn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return yn(t.getHours()%12||12,e.length)},H(t,e){return yn(t.getHours(),e.length)},m(t,e){return yn(t.getMinutes(),e.length)},s(t,e){return yn(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return yn(s,e.length)}},xh={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},zV={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Vl.y(t,e)},Y:function(t,e,n,r){const s=xQ(t,r),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return yn(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):yn(i,e.length)},R:function(t,e){const n=pQ(t);return yn(n,e.length)},u:function(t,e){const n=t.getFullYear();return yn(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return yn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return yn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Vl.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return yn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=T9e(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):yn(s,e.length)},I:function(t,e,n){const r=E9e(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):yn(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Vl.d(t,e)},D:function(t,e,n){const r=S9e(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):yn(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return yn(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return yn(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return yn(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=xh.noon:r===0?s=xh.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=xh.evening:r>=12?s=xh.afternoon:r>=4?s=xh.morning:s=xh.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Vl.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Vl.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):yn(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):yn(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Vl.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Vl.s(t,e)},S:function(t,e){return Vl.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return WV(r);case"XXXX":case"XX":return Du(r);case"XXXXX":case"XXX":default:return Du(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return WV(r);case"xxxx":case"xx":return Du(r);case"xxxxx":case"xxx":default:return Du(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+qV(r,":");case"OOOO":default:return"GMT"+Du(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+qV(r,":");case"zzzz":default:return"GMT"+Du(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return yn(r,e.length)},T:function(t,e,n){const r=t.getTime();return yn(r,e.length)}};function qV(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+yn(i,2)}function WV(t,e){return t%60===0?(t>0?"-":"+")+yn(Math.abs(t)/60,2):Du(t,e)}function Du(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=yn(Math.trunc(r/60),2),i=yn(r%60,2);return n+s+e+i}const HV=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},bQ=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},C9e=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return HV(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",HV(r,e)).replace("{{time}}",bQ(s,e))},P9e={p:bQ,P:C9e},I9e=/^D+$/,k9e=/^Y+$/,O9e=["D","DD","YY","YYYY"];function R9e(t){return I9e.test(t)}function M9e(t){return k9e.test(t)}function D9e(t,e,n){const r=L9e(t,e,n);if(console.warn(r),O9e.includes(t))throw new RangeError(r)}function L9e(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const $9e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,F9e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,V9e=/^'([^]*?)'?$/,B9e=/''/g,U9e=/[a-zA-Z]/;function vt(t,e,n){var d,h,f,m;const r=_N(),s=r.locale??N9e,i=r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=r.weekStartsOn??((m=(f=r.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??0,l=Wr(t);if(!q6e(l))throw new RangeError("Invalid time value");let c=e.match(F9e).map(b=>{const g=b[0];if(g==="p"||g==="P"){const x=P9e[g];return x(b,s.formatLong)}return b}).join("").match($9e).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const g=b[0];if(g==="'")return{isToken:!1,value:z9e(b)};if(zV[g])return{isToken:!0,value:b};if(g.match(U9e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:b}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return c.map(b=>{if(!b.isToken)return b.value;const g=b.value;(M9e(g)||R9e(g))&&D9e(g,e,String(t));const x=zV[g[0]];return x(l,g,s.localize,u)}).join("")}function z9e(t){const e=t.match(V9e);return e?e[1].replace(B9e,"'"):t}function bh(t){return Wr(t).getFullYear()}function wQ(t){return+Wr(t)<Date.now()}function KV(t,e){return fQ(t,-e)}function q9e(){const{user:t}=ct(),{data:e}=Ne({queryKey:["hr-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalEmployees:0,activeEmployees:0,permanentEmployees:0,contractEmployees:0,departments:0,monthlyPayroll:0,pendingPayroll:0,activeAdvances:0,totalAdvanceBalance:0,hoursLogged:0,pendingTimeEntries:0};const r=vt(new Date,"yyyy-MM"),s=`${r}-01`,i=new Date(parseInt(r.split("-")[0]),parseInt(r.split("-")[1]),0).toISOString().split("T")[0],{employees:o,payrollRuns:l,advances:c,timeEntries:u}=await si.runQueries(t.id,{employees:{collectionName:Y.EMPLOYEES},payrollRuns:{collectionName:Y.PAYROLL_RUNS,filters:[{field:"runDate",op:">=",value:s},{field:"runDate",op:"<=",value:i}]},advances:{collectionName:Y.ADVANCES},timeEntries:{collectionName:Y.TIME_ENTRIES,filters:[{field:"workDate",op:">=",value:s}]}}),d=new Set(o.map(h=>De(h,["department"])).filter(h=>!!h));return{totalEmployees:o.length,activeEmployees:o.filter(h=>De(h,["employmentStatus","employment_status"])==="active").length,permanentEmployees:o.filter(h=>De(h,["contractType","contract_type"])==="permanent").length,contractEmployees:o.filter(h=>De(h,["contractType","contract_type"])==="contract").length,departments:d.size,monthlyPayroll:l.filter(h=>De(h,["status","payrollStatus","payroll_status"])==="approved").reduce((h,f)=>h+Qe(f,["totalNet","total_net"]),0),pendingPayroll:l.filter(h=>De(h,["status","payrollStatus","payroll_status"])==="pending").length,activeAdvances:c.filter(h=>De(h,["status"])==="active").length,totalAdvanceBalance:c.filter(h=>De(h,["status"])==="active").reduce((h,f)=>h+Qe(f,["remainingBalance","remaining_balance"]),0),hoursLogged:u.reduce((h,f)=>h+Qe(f,["hoursWorked","hours_worked"]),0),pendingTimeEntries:u.filter(h=>De(h,["status"])==="pending").length}}}),n=[{title:"Active Employees",value:(e==null?void 0:e.activeEmployees)||0,icon:Ks,color:"text-blue-500"},{title:"Monthly Payroll",value:le((e==null?void 0:e.monthlyPayroll)||0),icon:Qn,color:"text-green-500"},{title:"Active Advances",value:(e==null?void 0:e.activeAdvances)||0,icon:vd,color:"text-amber-500"},{title:"Hours Logged",value:`${(e==null?void 0:e.hoursLogged)||0}h`,icon:ba,color:"text-purple-500"}];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"HR & Payroll Dashboard"}),a.jsx("p",{className:"text-muted-foreground",children:"Employee and payroll management overview"})]}),a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(r=>a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:r.title}),a.jsx(r.icon,{className:`h-4 w-4 ${r.color}`})]}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:r.value})})]},r.title))}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"Workforce Breakdown"})}),a.jsxs(re,{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Total Employees"}),a.jsx("span",{className:"font-medium",children:(e==null?void 0:e.totalEmployees)||0})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Permanent Staff"}),a.jsx("span",{className:"font-medium",children:(e==null?void 0:e.permanentEmployees)||0})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Contract Staff"}),a.jsx("span",{className:"font-medium",children:(e==null?void 0:e.contractEmployees)||0})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Departments"}),a.jsx("span",{className:"font-medium",children:(e==null?void 0:e.departments)||0})]})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsxs(ne,{className:"flex items-center gap-2",children:[a.jsx(xa,{className:"h-5 w-5 text-warning"}),"Pending Actions"]})}),a.jsxs(re,{className:"space-y-3",children:[(e==null?void 0:e.pendingPayroll)>0&&a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(xa,{className:"h-5 w-5 text-warning mt-0.5"}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium",children:[e.pendingPayroll," Pending Payroll Run(s)"]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Awaiting approval"})]})]}),(e==null?void 0:e.pendingTimeEntries)>0&&a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(ba,{className:"h-5 w-5 text-accent mt-0.5"}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium",children:[e.pendingTimeEntries," Pending Time Entries"]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Need review"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Qn,{className:"h-5 w-5 text-amber-500 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Outstanding Advances"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[le((e==null?void 0:e.totalAdvanceBalance)||0)," remaining"]})]})]})]})]})]})]})}function W9e(){var r;const{user:t}=ct(),{data:e}=Ne({queryKey:["inventory-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalItems:0,lowStockCount:0,lowStockItems:[],totalValue:0,categories:0,recentMovements:0,inMovements:0,outMovements:0};const{items:s,movements:i}=await si.runQueries(t.id,{items:{collectionName:Y.INVENTORY_ITEMS},movements:{collectionName:Y.STOCK_MOVEMENTS,orderByField:"createdAt",orderDirection:"desc",limitCount:100}}),o=s.filter(u=>{const d=Qe(u,["quantityOnHand","quantity_on_hand"]),h=Qe(u,["reorderPoint","reorder_point"]);return d<=h}),l=s.reduce((u,d)=>{const h=Qe(d,["quantityOnHand","quantity_on_hand"]),f=Qe(d,["unitCost","unit_cost"]);return u+h*f},0),c=new Set(s.map(u=>De(u,["category"])).filter(u=>!!u)).size;return{totalItems:s.length,lowStockCount:o.length,lowStockItems:o.slice(0,5),totalValue:l,categories:c,recentMovements:i.length,inMovements:i.filter(u=>De(u,["movementType","movement_type"])==="in").reduce((u,d)=>u+Qe(d,["quantity"]),0),outMovements:i.filter(u=>De(u,["movementType","movement_type"])==="out").reduce((u,d)=>u+Qe(d,["quantity"]),0)}}}),n=[{title:"Total Items",value:(e==null?void 0:e.totalItems)||0,icon:Wa,color:"text-blue-500"},{title:"Low Stock Alerts",value:(e==null?void 0:e.lowStockCount)||0,icon:Oi,color:"text-red-500"},{title:"Total Value",value:le((e==null?void 0:e.totalValue)||0),icon:Qn,color:"text-green-500"},{title:"Categories",value:(e==null?void 0:e.categories)||0,icon:Za,color:"text-purple-500"}];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Inventory Dashboard"}),a.jsx("p",{className:"text-muted-foreground",children:"Stock levels and inventory management overview"})]}),a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(s=>a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:s.title}),a.jsx(s.icon,{className:`h-4 w-4 ${s.color}`})]}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:s.value})})]},s.title))}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs(X,{children:[a.jsx(ee,{children:a.jsxs(ne,{className:"flex items-center gap-2",children:[a.jsx(Oi,{className:"h-5 w-5 text-destructive"}),"Low Stock Items"]})}),a.jsx(re,{children:a.jsxs("div",{className:"space-y-3",children:[(r=e==null?void 0:e.lowStockItems)==null?void 0:r.map(s=>a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:De(s,["name"],"Unnamed Item")}),a.jsxs("span",{className:"font-medium text-destructive",children:[Qe(s,["quantityOnHand","quantity_on_hand"])," / ",Qe(s,["reorderPoint","reorder_point"])]})]},De(s,["id","name"],"inventory-item"))),(!(e!=null&&e.lowStockItems)||e.lowStockItems.length===0)&&a.jsx("p",{className:"text-muted-foreground text-sm",children:"No low stock alerts"})]})})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"Recent Activity"})}),a.jsxs(re,{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Items Received"}),a.jsxs("span",{className:"font-medium text-green-600",children:["+",(e==null?void 0:e.inMovements)||0]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Items Issued"}),a.jsxs("span",{className:"font-medium text-red-600",children:["-",(e==null?void 0:e.outMovements)||0]})]}),a.jsxs("div",{className:"border-t pt-3 flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Recent Movements"}),a.jsx("span",{className:"font-medium",children:(e==null?void 0:e.recentMovements)||0})]})]})]})]})]})}var CO="Progress",PO=100,[H9e,tWe]=rs(CO),[K9e,G9e]=H9e(CO),_Q=N.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:i=Y9e,...o}=t;(s||s===0)&&!GV(s)&&console.error(Q9e(`${s}`,"Progress"));const l=GV(s)?s:PO;r!==null&&!YV(r,l)&&console.error(X9e(`${r}`,"Progress"));const c=YV(r,l)?r:null,u=t_(c)?i(c,l):void 0;return a.jsx(K9e,{scope:n,value:c,max:l,children:a.jsx(Je.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":t_(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":SQ(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});_Q.displayName=CO;var jQ="ProgressIndicator",NQ=N.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=G9e(jQ,n);return a.jsx(Je.div,{"data-state":SQ(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});NQ.displayName=jQ;function Y9e(t,e){return`${Math.round(t/e*100)}%`}function SQ(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function t_(t){return typeof t=="number"}function GV(t){return t_(t)&&!isNaN(t)&&t>0}function YV(t,e){return t_(t)&&!isNaN(t)&&t<=e&&t>=0}function Q9e(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${PO}\`.`}function X9e(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${PO} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var EQ=_Q,Z9e=NQ;const xf=N.forwardRef(({className:t,value:e,...n},r)=>a.jsx(EQ,{ref:r,className:pe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:a.jsx(Z9e,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));xf.displayName=EQ.displayName;function J9e(){var r;const{user:t}=ct(),{data:e}=Ne({queryKey:["project-manager-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalProjects:0,activeProjects:0,completedProjects:0,totalBudget:0,totalSpent:0,budgetUtilization:0,projectsNearBudget:[],pendingTimeEntries:0,totalHoursLogged:0,topProjects:[]};const{projects:s,timeEntries:i}=await si.runQueries(t.id,{projects:{collectionName:Y.PROJECTS},projectExpenses:{collectionName:Y.PROJECT_EXPENSES},timeEntries:{collectionName:Y.TIME_ENTRIES}}),o=s.filter(m=>De(m,["status"])==="active"),l=s.filter(m=>De(m,["status"])==="completed"),c=o.reduce((m,b)=>m+Qe(b,["budget"]),0),u=o.reduce((m,b)=>m+Qe(b,["spent"]),0),d=o.filter(m=>{const b=Qe(m,["budget"]),g=Qe(m,["spent"]);return b>0&&g/b>=.8}),h=i.filter(m=>De(m,["status"])==="pending"),f=i.reduce((m,b)=>m+Qe(b,["hoursWorked","hours_worked"]),0);return{totalProjects:s.length,activeProjects:o.length,completedProjects:l.length,totalBudget:c,totalSpent:u,budgetUtilization:c>0?u/c*100:0,projectsNearBudget:d,pendingTimeEntries:h.length,totalHoursLogged:f,topProjects:o.slice(0,5)}}}),n=[{title:"Active Projects",value:(e==null?void 0:e.activeProjects)||0,icon:h0,color:"text-primary"},{title:"Total Budget",value:le((e==null?void 0:e.totalBudget)||0),icon:Qn,color:"text-green-500"},{title:"Total Spent",value:le((e==null?void 0:e.totalSpent)||0),icon:Za,color:"text-blue-500"},{title:"Hours Logged",value:((r=e==null?void 0:e.totalHoursLogged)==null?void 0:r.toFixed(1))||"0",icon:ba,color:"text-blue-500"}];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Project Manager Dashboard"}),a.jsx("p",{className:"text-muted-foreground",children:"Project portfolio and resource overview"})]}),a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(s=>a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:s.title}),a.jsx(s.icon,{className:`h-4 w-4 ${s.color}`})]}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:s.value})})]},s.title))}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs(X,{children:[a.jsx(ee,{children:a.jsxs(ne,{className:"flex items-center gap-2",children:[a.jsx(Za,{className:"h-5 w-5 text-primary"}),"Budget Utilization"]})}),a.jsxs(re,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Overall Utilization"}),a.jsxs("span",{className:"font-medium",children:[((e==null?void 0:e.budgetUtilization)||0).toFixed(1),"%"]})]}),a.jsx(xf,{value:(e==null?void 0:e.budgetUtilization)||0,className:"h-2"})]}),a.jsxs("div",{className:"pt-4 space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Total Budget"}),a.jsx("span",{className:"font-medium",children:le((e==null?void 0:e.totalBudget)||0)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Spent to Date"}),a.jsx("span",{className:"font-medium text-blue-500",children:le((e==null?void 0:e.totalSpent)||0)})]}),a.jsxs("div",{className:"flex justify-between border-t pt-3",children:[a.jsx("span",{className:"font-semibold",children:"Remaining"}),a.jsx("span",{className:"font-bold text-green-600",children:le(((e==null?void 0:e.totalBudget)||0)-((e==null?void 0:e.totalSpent)||0))})]})]})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsxs(ne,{className:"flex items-center gap-2 text-warning",children:[a.jsx(xa,{className:"h-5 w-5"}),"Projects Near Budget Limit"]})}),a.jsx(re,{children:e!=null&&e.projectsNearBudget&&e.projectsNearBudget.length>0?a.jsx("div",{className:"space-y-4",children:e.projectsNearBudget.map(s=>{const i=Qe(s,["budget"]),o=Qe(s,["spent"]),l=i>0?o/i*100:0;return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"font-medium truncate max-w-[200px]",children:De(s,["name"],"Unnamed Project")}),a.jsxs("span",{className:l>=100?"text-destructive":"text-warning",children:[l.toFixed(0),"%"]})]}),a.jsx(xf,{value:Math.min(l,100),className:`h-2 ${l>=100?"[&>div]:bg-destructive":"[&>div]:bg-warning"}`}),a.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[a.jsxs("span",{children:[le(o)," spent"]}),a.jsxs("span",{children:[le(i)," budget"]})]})]},De(s,["id"],"project"))})}):a.jsx("p",{className:"text-muted-foreground text-sm py-4",children:"No projects approaching budget limit"})})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsxs(ne,{className:"flex items-center gap-2",children:[a.jsx(h0,{className:"h-5 w-5 text-primary"}),"Active Projects Overview"]})}),a.jsx(re,{children:e!=null&&e.topProjects&&e.topProjects.length>0?a.jsx("div",{className:"space-y-4",children:e.topProjects.map(s=>{const i=Qe(s,["budget"]),o=Qe(s,["spent"]),l=i>0?o/i*100:0;return a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/30",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"font-medium",children:De(s,["name"],"Unnamed Project")}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[De(s,["donorName","donor_name"],"No donor")," - ",De(s,["grantReference","grant_reference"],"No reference")]})]}),a.jsxs("div",{className:"text-right space-y-1",children:[a.jsx("p",{className:"font-medium",children:le(o)}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["of ",le(i)]})]}),a.jsx("div",{className:"w-20",children:a.jsx(xf,{value:Math.min(l,100),className:"h-2"})})]},De(s,["id"],"project"))})}):a.jsx("p",{className:"text-muted-foreground text-sm py-4",children:"No active projects"})})]})]})}const zt=N.forwardRef(({className:t,...e},n)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:n,className:pe("w-full caption-bottom text-sm",t),...e})}));zt.displayName="Table";const qt=N.forwardRef(({className:t,...e},n)=>a.jsx("thead",{ref:n,className:pe("[&_tr]:border-b",t),...e}));qt.displayName="TableHeader";const Wt=N.forwardRef(({className:t,...e},n)=>a.jsx("tbody",{ref:n,className:pe("[&_tr:last-child]:border-0",t),...e}));Wt.displayName="TableBody";const eze=N.forwardRef(({className:t,...e},n)=>a.jsx("tfoot",{ref:n,className:pe("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));eze.displayName="TableFooter";const _e=N.forwardRef(({className:t,...e},n)=>a.jsx("tr",{ref:n,className:pe("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",t),...e}));_e.displayName="TableRow";const U=N.forwardRef(({className:t,...e},n)=>a.jsx("th",{ref:n,className:pe("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));U.displayName="TableHead";const B=N.forwardRef(({className:t,...e},n)=>a.jsx("td",{ref:n,className:pe("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));B.displayName="TableCell";const tze=N.forwardRef(({className:t,...e},n)=>a.jsx("caption",{ref:n,className:pe("mt-4 text-sm text-muted-foreground",t),...e}));tze.displayName="TableCaption";const nze=(t,e)=>{const n=De(t,e),r=n?new Date(n):null;return r&&!Number.isNaN(r.getTime())?r:null};function rze(){const{user:t}=ct(),{data:e}=Ne({queryKey:["auditor-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>t?si.runQueries(t.id,{auditLogs:{collectionName:Y.AUDIT_LOGS,orderByField:"createdAt",orderDirection:"desc",limitCount:20},payrollRuns:{collectionName:Y.PAYROLL_RUNS,orderByField:"createdAt",orderDirection:"desc",limitCount:10},expenses:{collectionName:Y.EXPENSES,orderByField:"createdAt",orderDirection:"desc",limitCount:50},projects:{collectionName:Y.PROJECTS,orderByField:"createdAt",orderDirection:"desc"}}):{auditLogs:[],payrollRuns:[],expenses:[],projects:[]}}),n=(e==null?void 0:e.auditLogs)??[],r=(e==null?void 0:e.payrollRuns)??[],s=(e==null?void 0:e.expenses)??[],i=(e==null?void 0:e.projects)??[],o=g=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(g),l=r.filter(g=>{const x=De(g,["status","payrollStatus","payroll_status"]).toLowerCase();return x==="pending"||x==="draft"}).length,c=r.filter(g=>{const x=De(g,["status","payrollStatus","payroll_status"]).toLowerCase();return x==="approved"||x==="final"}).length,u=s.reduce((g,x)=>g+Qe(x,["amount","total"]),0),d=i.filter(g=>Qe(g,["spent"])>Qe(g,["budget"])).length,h=n.length,f=s.filter(g=>Qe(g,["amount","total"])>5e3).slice(0,5),m=n.reduce((g,x)=>{const w=De(x,["action"]).toUpperCase()||"UNKNOWN";return g[w]=(g[w]||0)+1,g},{}),b=i.filter(g=>{const x=Qe(g,["budget"]),w=Qe(g,["spent"]);return(x>0?w/x*100:0)>80});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Auditor Dashboard"}),a.jsx("p",{className:"text-muted-foreground",children:"Compliance monitoring and audit trail overview"})]}),a.jsxs(Xe,{variant:"outline",className:"flex items-center gap-1",children:[a.jsx(wd,{className:"h-3 w-3"}),"Audit Mode"]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Pending Approvals"}),a.jsx(Oi,{className:"h-4 w-4 text-warning"})]}),a.jsxs(re,{children:[a.jsx("div",{className:"text-2xl font-bold",children:l}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Payroll runs awaiting approval"})]})]}),a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Approved Payrolls"}),a.jsx(yU,{className:"h-4 w-4 text-success"})]}),a.jsxs(re,{children:[a.jsx("div",{className:"text-2xl font-bold",children:c}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Successfully processed"})]})]}),a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Projects Over Budget"}),a.jsx(Za,{className:"h-4 w-4 text-destructive"})]}),a.jsxs(re,{children:[a.jsx("div",{className:"text-2xl font-bold",children:d}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Require attention"})]})]}),a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Recent Changes"}),a.jsx(Vf,{className:"h-4 w-4 text-primary"})]}),a.jsxs(re,{children:[a.jsx("div",{className:"text-2xl font-bold",children:h}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Audit log entries (last 20)"})]})]})]}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsxs(X,{children:[a.jsx(ee,{children:a.jsxs(ne,{className:"flex items-center gap-2",children:[a.jsx(Vf,{className:"h-5 w-5"}),"Recent Activity Log"]})}),a.jsx(re,{children:a.jsx(ld,{className:"h-[300px]",children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Action"}),a.jsx(U,{children:"Entity"}),a.jsx(U,{children:"Time"})]})}),a.jsx(Wt,{children:n.length===0?a.jsx(_e,{children:a.jsx(B,{colSpan:3,className:"text-center text-muted-foreground",children:"No audit logs found"})}):n.map(g=>{const x=De(g,["action"]).toUpperCase(),w=nze(g,["createdAt","created_at"]);return a.jsxs(_e,{children:[a.jsx(B,{children:a.jsx(Xe,{variant:x==="DELETE"?"destructive":x==="INSERT"?"default":"secondary",children:x||"UNKNOWN"})}),a.jsx(B,{className:"font-medium",children:De(g,["tableName","table_name","entity"],"Unknown")}),a.jsx(B,{className:"text-muted-foreground",children:w?vt(w,"MMM dd, HH:mm"):"-"})]},De(g,["id"],"audit-log"))})})]})})})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsxs(ne,{className:"flex items-center gap-2",children:[a.jsx(Qn,{className:"h-5 w-5"}),"High-Value Expenses (> ZMW 5,000)"]})}),a.jsx(re,{children:a.jsx(ld,{className:"h-[300px]",children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Description"}),a.jsx(U,{children:"Category"}),a.jsx(U,{className:"text-right",children:"Amount"})]})}),a.jsx(Wt,{children:f.length===0?a.jsx(_e,{children:a.jsx(B,{colSpan:3,className:"text-center text-muted-foreground",children:"No high-value expenses found"})}):f.map(g=>a.jsxs(_e,{children:[a.jsx(B,{className:"font-medium max-w-[150px] truncate",children:De(g,["description"],"Expense")}),a.jsx(B,{children:a.jsx(Xe,{variant:"outline",children:De(g,["category"],"General")})}),a.jsx(B,{className:"text-right font-mono",children:o(Qe(g,["amount","total"]))})]},De(g,["id"],"expense")))})]})})})]})]}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsxs(X,{children:[a.jsx(ee,{children:a.jsxs(ne,{className:"flex items-center gap-2",children:[a.jsx(Ks,{className:"h-5 w-5"}),"Action Distribution"]})}),a.jsx(re,{children:a.jsxs("div",{className:"space-y-3",children:[Object.entries(m).map(([g,x])=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(Xe,{variant:g==="DELETE"?"destructive":g==="INSERT"?"default":"secondary",children:g})}),a.jsx("span",{className:"font-bold",children:x})]},g)),Object.keys(m).length===0&&a.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No actions recorded"})]})})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsxs(ne,{className:"flex items-center gap-2",children:[a.jsx(vd,{className:"h-5 w-5"}),"Project Budget Alerts"]})}),a.jsx(re,{children:a.jsx(ld,{className:"h-[200px]",children:a.jsxs("div",{className:"space-y-3",children:[b.map(g=>{const x=Qe(g,["budget"]),w=Qe(g,["spent"]),y=x>0?w/x*100:0;return a.jsxs("div",{className:"flex items-center justify-between p-2 rounded border",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:De(g,["name"],"Project")}),a.jsx("p",{className:"text-xs text-muted-foreground",children:De(g,["code"],"-")})]}),a.jsxs(Xe,{variant:y>100?"destructive":"secondary",children:[y.toFixed(0),"% used"]})]},De(g,["id"],"project"))}),b.length===0&&a.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No budget alerts"})]})})})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"Total Expense Volume"})}),a.jsx(re,{children:a.jsx("p",{className:"text-2xl font-bold",children:o(u)})})]})]})}function sze(){var s;const{user:t}=ct(),{data:e}=Ne({queryKey:["financial-manager-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalRevenue:0,totalExpenses:0,cashBalance:0,unpaidBills:0,pendingApprovals:0,pendingApprovalsAmount:0,expensesPendingApproval:0,lastPayrollGross:0,lastPayrollNet:0,bankAccounts:[],vatCollected:0};const{invoices:i,expenses:o,bills:l,bankAccounts:c,payrollRuns:u,approvalRequests:d}=await si.runQueries(t.id,{invoices:{collectionName:Y.INVOICES},expenses:{collectionName:Y.EXPENSES},bills:{collectionName:Y.BILLS},bankAccounts:{collectionName:Y.BANK_ACCOUNTS},payrollRuns:{collectionName:Y.PAYROLL_RUNS,orderByField:"createdAt",orderDirection:"desc"},approvalRequests:{collectionName:Y.APPROVAL_REQUESTS}}),h=d.filter(f=>De(f,["status"])==="pending");return{totalRevenue:i.filter(f=>De(f,["status"])==="paid").reduce((f,m)=>f+Qe(m,["total","amount"]),0),totalExpenses:o.reduce((f,m)=>f+Qe(m,["amount","total"]),0),cashBalance:c.reduce((f,m)=>f+Qe(m,["currentBalance","current_balance"]),0),unpaidBills:l.filter(f=>De(f,["status"])!=="paid").reduce((f,m)=>f+Qe(m,["total","amount"]),0),pendingApprovals:h.length,pendingApprovalsAmount:h.reduce((f,m)=>f+Qe(m,["amount"]),0),expensesPendingApproval:o.filter(f=>De(f,["approvalStatus","approval_status"])==="pending").length,lastPayrollGross:u[0]?Qe(u[0],["totalGross","total_gross"]):0,lastPayrollNet:u[0]?Qe(u[0],["totalNet","total_net"]):0,bankAccounts:c,vatCollected:i.filter(f=>De(f,["status"])==="paid").reduce((f,m)=>f+Qe(m,["vatAmount","vat_amount"]),0)}}}),n=((e==null?void 0:e.totalRevenue)||0)-((e==null?void 0:e.totalExpenses)||0),r=[{title:"Total Revenue",value:le((e==null?void 0:e.totalRevenue)||0),icon:Qn,color:"text-green-500"},{title:"Total Expenses",value:le((e==null?void 0:e.totalExpenses)||0),icon:ki,color:"text-destructive"},{title:"Cash Balance",value:le((e==null?void 0:e.cashBalance)||0),icon:xd,color:"text-primary"},{title:"Pending Approvals",value:(e==null?void 0:e.pendingApprovals)||0,icon:kte,color:"text-warning"}];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Financial Manager Dashboard"}),a.jsx("p",{className:"text-muted-foreground",children:"Oversee all financial operations and approvals"})]}),a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:r.map(i=>a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:i.title}),a.jsx(i.icon,{className:`h-4 w-4 ${i.color}`})]}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:i.value})})]},i.title))}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsxs(X,{children:[a.jsx(ee,{children:a.jsxs(ne,{className:"flex items-center gap-2",children:[a.jsx(Za,{className:"h-5 w-5 text-primary"}),"Profit & Loss"]})}),a.jsxs(re,{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Revenue"}),a.jsx("span",{className:"font-medium text-green-600",children:le((e==null?void 0:e.totalRevenue)||0)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Expenses"}),a.jsxs("span",{className:"font-medium text-destructive",children:["(",le((e==null?void 0:e.totalExpenses)||0),")"]})]}),a.jsxs("div",{className:"border-t pt-2 flex justify-between",children:[a.jsx("span",{className:"font-semibold",children:"Net Income"}),a.jsx("span",{className:`font-bold ${n>=0?"text-green-600":"text-destructive"}`,children:le(n)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"VAT Collected"}),a.jsx("span",{className:"font-medium",children:le((e==null?void 0:e.vatCollected)||0)})]})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsxs(ne,{className:"flex items-center gap-2",children:[a.jsx(Oi,{className:"h-5 w-5 text-warning"}),"Pending Actions"]})}),a.jsxs(re,{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Approval Requests"}),a.jsx(Xe,{variant:e!=null&&e.pendingApprovals?"destructive":"secondary",children:(e==null?void 0:e.pendingApprovals)||0})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Approvals Value"}),a.jsx("span",{className:"font-medium",children:le((e==null?void 0:e.pendingApprovalsAmount)||0)})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Expenses Pending"}),a.jsx(Xe,{variant:e!=null&&e.expensesPendingApproval?"outline":"secondary",children:(e==null?void 0:e.expensesPendingApproval)||0})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Unpaid Bills"}),a.jsx("span",{className:"font-medium text-destructive",children:le((e==null?void 0:e.unpaidBills)||0)})]})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsxs(ne,{className:"flex items-center gap-2",children:[a.jsx(vo,{className:"h-5 w-5 text-green-500"}),"Payroll Summary"]})}),a.jsxs(re,{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Last Gross Payroll"}),a.jsx("span",{className:"font-medium",children:le((e==null?void 0:e.lastPayrollGross)||0)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Last Net Payroll"}),a.jsx("span",{className:"font-medium",children:le((e==null?void 0:e.lastPayrollNet)||0)})]}),a.jsxs("div",{className:"border-t pt-2",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Bank Accounts"}),(s=e==null?void 0:e.bankAccounts)==null?void 0:s.map(i=>a.jsxs("div",{className:"flex justify-between mt-1",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:De(i,["accountName","account_name"],"Bank Account")}),a.jsx("span",{className:"text-sm font-medium",children:le(Qe(i,["currentBalance","current_balance"]))})]},De(i,["accountName","account_name","id"],"bank-account")))]})]})]})]})]})}function aze(){const{user:t}=ct(),{data:e}=Ne({queryKey:["assistant-accountant-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{draftInvoices:0,pendingInvoices:0,recentExpenses:0,totalExpenses:0,unpaidBills:0,unpaidBillsAmount:0,unpostedJournals:0,totalCustomers:0,totalVendors:0};const{invoices:r,expenses:s,bills:i,journalEntries:o,customers:l,vendors:c}=await si.runQueries(t.id,{invoices:{collectionName:Y.INVOICES},expenses:{collectionName:Y.EXPENSES},bills:{collectionName:Y.BILLS},journalEntries:{collectionName:Y.JOURNAL_ENTRIES},customers:{collectionName:Y.CUSTOMERS},vendors:{collectionName:Y.VENDORS}});return{draftInvoices:r.filter(u=>De(u,["status"])==="draft").length,pendingInvoices:r.filter(u=>De(u,["status"])==="pending").length,recentExpenses:s.length,totalExpenses:s.reduce((u,d)=>u+Qe(d,["amount","total"]),0),unpaidBills:i.filter(u=>De(u,["status"])!=="paid").length,unpaidBillsAmount:i.filter(u=>De(u,["status"])!=="paid").reduce((u,d)=>u+Qe(d,["total","amount"]),0),unpostedJournals:o.filter(u=>!D6e(u,["isPosted","is_posted"])).length,totalCustomers:l.length,totalVendors:c.length}}}),n=[{title:"Draft Invoices",value:(e==null?void 0:e.draftInvoices)||0,subtitle:`${(e==null?void 0:e.pendingInvoices)||0} pending`,icon:ar},{title:"Unpaid Bills",value:(e==null?void 0:e.unpaidBills)||0,subtitle:le((e==null?void 0:e.unpaidBillsAmount)||0),icon:C_},{title:"Total Expenses",value:le((e==null?void 0:e.totalExpenses)||0),subtitle:`${(e==null?void 0:e.recentExpenses)||0} records`,icon:ki},{title:"Unposted Journals",value:(e==null?void 0:e.unpostedJournals)||0,subtitle:"Awaiting review",icon:A_}];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Assistant Accountant Dashboard"}),a.jsx("p",{className:"text-muted-foreground",children:"Data entry tasks and bookkeeping overview"})]}),a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(r=>a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:r.title}),a.jsx(r.icon,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(re,{children:[a.jsx("div",{className:"text-2xl font-bold",children:r.value}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r.subtitle})]})]},r.title))}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs(X,{children:[a.jsx(ee,{children:a.jsxs(ne,{className:"flex items-center gap-2",children:[a.jsx(Vf,{className:"h-5 w-5 text-primary"}),"Daily Tasks"]})}),a.jsxs(re,{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Record new expenses"}),a.jsxs("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:[(e==null?void 0:e.recentExpenses)||0," total"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Process draft invoices"}),a.jsxs("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:[(e==null?void 0:e.draftInvoices)||0," drafts"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Review unposted journals"}),a.jsxs("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:[(e==null?void 0:e.unpostedJournals)||0," unposted"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Process vendor bills"}),a.jsxs("span",{className:"text-xs bg-muted px-2 py-1 rounded",children:[(e==null?void 0:e.unpaidBills)||0," unpaid"]})]})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsxs(ne,{className:"flex items-center gap-2",children:[a.jsx(xd,{className:"h-5 w-5 text-primary"}),"Directory"]})}),a.jsxs(re,{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Customers"}),a.jsx("span",{className:"font-medium",children:(e==null?void 0:e.totalCustomers)||0})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Vendors"}),a.jsx("span",{className:"font-medium",children:(e==null?void 0:e.totalVendors)||0})]})]})]})]})]})}function ize(){const{user:t}=ct(),{data:e}=Ne({queryKey:["finance-officer-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{paidInvoices:0,pendingInvoices:0,overdueInvoices:0,totalExpenses:0,pendingExpenses:0,unpaidBills:0,overdueBills:0,cashBalance:0};const{invoices:r,expenses:s,bills:i,bankAccounts:o}=await si.runQueries(t.id,{invoices:{collectionName:Y.INVOICES},expenses:{collectionName:Y.EXPENSES},bills:{collectionName:Y.BILLS},bankAccounts:{collectionName:Y.BANK_ACCOUNTS}}),l=new Date().toISOString().split("T")[0];return{paidInvoices:r.filter(c=>De(c,["status"])==="paid").reduce((c,u)=>c+Qe(u,["total","amount"]),0),pendingInvoices:r.filter(c=>De(c,["status"])==="pending").length,overdueInvoices:r.filter(c=>{const u=De(c,["dueDate","due_date"]);return De(c,["status"])!=="paid"&&!!u&&u<l}).length,totalExpenses:s.reduce((c,u)=>c+Qe(u,["amount","total"]),0),pendingExpenses:s.filter(c=>De(c,["approvalStatus","approval_status"])==="pending").length,unpaidBills:i.filter(c=>De(c,["status"])!=="paid").reduce((c,u)=>c+Qe(u,["total","amount"]),0),overdueBills:i.filter(c=>{const u=De(c,["dueDate","due_date"]);return De(c,["status"])!=="paid"&&!!u&&u<l}).length,cashBalance:o.reduce((c,u)=>c+Qe(u,["currentBalance","current_balance"]),0)}}}),n=[{title:"Revenue Collected",value:le((e==null?void 0:e.paidInvoices)||0),icon:Qn},{title:"Total Expenses",value:le((e==null?void 0:e.totalExpenses)||0),icon:ki},{title:"Unpaid Bills",value:le((e==null?void 0:e.unpaidBills)||0),icon:C_},{title:"Cash Balance",value:le((e==null?void 0:e.cashBalance)||0),icon:xd}];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Finance Officer Dashboard"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage invoices, bills, and expenses"})]}),a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(r=>a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:r.title}),a.jsx(r.icon,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:r.value})})]},r.title))}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs(X,{children:[a.jsx(ee,{children:a.jsxs(ne,{className:"flex items-center gap-2",children:[a.jsx(ar,{className:"h-5 w-5 text-primary"}),"Invoice Status"]})}),a.jsxs(re,{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Pending Invoices"}),a.jsx("span",{className:"font-medium",children:(e==null?void 0:e.pendingInvoices)||0})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Overdue Invoices"}),a.jsx("span",{className:"font-medium text-destructive",children:(e==null?void 0:e.overdueInvoices)||0})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Expenses Pending Approval"}),a.jsx("span",{className:"font-medium",children:(e==null?void 0:e.pendingExpenses)||0})]})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsxs(ne,{className:"flex items-center gap-2",children:[a.jsx(Oi,{className:"h-5 w-5 text-warning"}),"Alerts"]})}),a.jsxs(re,{className:"space-y-3",children:[((e==null?void 0:e.overdueInvoices)||0)>0&&a.jsxs("div",{className:"p-2 bg-destructive/10 rounded text-sm text-destructive",children:[e==null?void 0:e.overdueInvoices," overdue invoice(s) require follow-up"]}),((e==null?void 0:e.overdueBills)||0)>0&&a.jsxs("div",{className:"p-2 bg-warning/10 rounded text-sm text-warning",children:[e==null?void 0:e.overdueBills," overdue bill(s) need payment"]}),((e==null?void 0:e.overdueInvoices)||0)===0&&((e==null?void 0:e.overdueBills)||0)===0&&a.jsx("p",{className:"text-muted-foreground text-sm",children:"No urgent alerts"})]})]})]})]})}function oze(){var r,s;const{user:t}=ct(),{data:e}=Ne({queryKey:["cashier-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{cashBalance:0,totalBalance:0,cashAccounts:[],recentReconciliations:[],recentReceipts:[],recentPayments:[],todayReceipts:0,todayPayments:0};const{bankAccounts:i,cashReconciliations:o,bankTransactions:l}=await si.runQueries(t.id,{bankAccounts:{collectionName:Y.BANK_ACCOUNTS},cashReconciliations:{collectionName:Y.CASH_RECONCILIATIONS,orderByField:"reconciliationDate",orderDirection:"desc",limitCount:5},bankTransactions:{collectionName:Y.BANK_TRANSACTIONS,orderByField:"createdAt",orderDirection:"desc",limitCount:10}}),c=i.filter(h=>{const f=De(h,["accountType","account_type"]);return f==="cash"||f==="petty_cash"}),u=l.filter(h=>De(h,["transactionType","transaction_type"])==="deposit"),d=l.filter(h=>De(h,["transactionType","transaction_type"])==="withdrawal");return{cashBalance:c.reduce((h,f)=>h+Qe(f,["currentBalance","current_balance"]),0),totalBalance:i.reduce((h,f)=>h+Qe(f,["currentBalance","current_balance"]),0),cashAccounts:c,recentReconciliations:o,recentReceipts:u,recentPayments:d,todayReceipts:u.reduce((h,f)=>h+Qe(f,["amount"]),0),todayPayments:d.reduce((h,f)=>h+Qe(f,["amount"]),0)}}}),n=[{title:"Cash on Hand",value:le((e==null?void 0:e.cashBalance)||0),icon:wi,color:"text-green-500"},{title:"Total Balance",value:le((e==null?void 0:e.totalBalance)||0),icon:cte,color:"text-primary"},{title:"Recent Receipts",value:le((e==null?void 0:e.todayReceipts)||0),icon:VR,color:"text-green-500"},{title:"Recent Payments",value:le((e==null?void 0:e.todayPayments)||0),icon:mte,color:"text-destructive"}];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Cashier Dashboard"}),a.jsx("p",{className:"text-muted-foreground",children:"Cash transactions and petty cash management"})]}),a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:n.map(i=>a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:i.title}),a.jsx(i.icon,{className:`h-4 w-4 ${i.color}`})]}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:i.value})})]},i.title))}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs(X,{children:[a.jsx(ee,{children:a.jsxs(ne,{className:"flex items-center gap-2",children:[a.jsx(VR,{className:"h-5 w-5 text-green-500"}),"Recent Receipts"]})}),a.jsx(re,{children:a.jsx("div",{className:"space-y-2",children:(r=e==null?void 0:e.recentReceipts)!=null&&r.length?e.recentReceipts.map((i,o)=>a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-muted-foreground truncate max-w-[60%]",children:De(i,["description"],"Deposit")}),a.jsx("span",{className:"font-medium text-green-600",children:le(Qe(i,["amount"]))})]},o)):a.jsx("p",{className:"text-muted-foreground text-sm",children:"No recent receipts"})})})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsxs(ne,{className:"flex items-center gap-2",children:[a.jsx(gte,{className:"h-5 w-5 text-primary"}),"Recent Reconciliations"]})}),a.jsx(re,{children:a.jsx("div",{className:"space-y-2",children:(s=e==null?void 0:e.recentReconciliations)!=null&&s.length?e.recentReconciliations.map(i=>a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:De(i,["reconciliationDate","reconciliation_date"],"-")}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:le(Qe(i,["closingBalance","closing_balance"]))}),a.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${De(i,["status"])==="approved"?"bg-green-100 text-green-700":"bg-muted text-muted-foreground"}`,children:De(i,["status"],"pending")})]})]},De(i,["id"],"reconciliation"))):a.jsx("p",{className:"text-muted-foreground text-sm",children:"No reconciliations yet"})})})]})]})]})}function lze(){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Staff Dashboard"}),a.jsx("p",{className:"text-muted-foreground",children:"Your personal workspace"})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Time Tracking"}),a.jsx(ba,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(re,{children:[a.jsx("div",{className:"text-2xl font-bold",children:""}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Log your hours"})]})]}),a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"My Payslips"}),a.jsx(ar,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(re,{children:[a.jsx("div",{className:"text-2xl font-bold",children:""}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"View payslip history"})]})]}),a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Leave Balance"}),a.jsx(hte,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(re,{children:[a.jsx("div",{className:"text-2xl font-bold",children:""}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Days remaining"})]})]}),a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"My Profile"}),a.jsx(Ng,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(re,{children:[a.jsx("div",{className:"text-2xl font-bold",children:""}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"View personal info"})]})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"Welcome"})}),a.jsx(re,{children:a.jsx("p",{className:"text-muted-foreground",children:"Use the sidebar to access time tracking and view your information. Contact your HR manager for any employment-related queries."})})]})]})}function QV(){const{user:t}=ct(),{data:e}=Ne({queryKey:["readonly-dashboard-stats",t==null?void 0:t.id],enabled:!!t,queryFn:async()=>{if(!t)return{totalRevenue:0,totalExpenses:0,invoiceCount:0};const{invoices:r,expenses:s}=await si.runQueries(t.id,{invoices:{collectionName:Y.INVOICES},expenses:{collectionName:Y.EXPENSES}});return{totalRevenue:r.filter(i=>De(i,["status"])==="paid").reduce((i,o)=>i+Qe(o,["total","grandTotal","amount"]),0),totalExpenses:s.reduce((i,o)=>i+Qe(o,["amount","total"]),0),invoiceCount:r.length}}}),n=((e==null?void 0:e.totalRevenue)||0)-((e==null?void 0:e.totalExpenses)||0);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),a.jsxs("p",{className:"text-muted-foreground flex items-center gap-1",children:[a.jsx(yte,{className:"h-4 w-4"})," View-only access"]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Total Revenue"}),a.jsx(Qn,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:le((e==null?void 0:e.totalRevenue)||0)})})]}),a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Total Expenses"}),a.jsx(ki,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:le((e==null?void 0:e.totalExpenses)||0)})})]}),a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Net Income"}),a.jsx(Za,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(re,{children:a.jsx("div",{className:`text-2xl font-bold ${n>=0?"text-green-600":"text-destructive"}`,children:le(n)})})]}),a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Total Invoices"}),a.jsx(Ks,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:(e==null?void 0:e.invoiceCount)||0})})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"Read-Only Access"})}),a.jsx(re,{children:a.jsx("p",{className:"text-muted-foreground",children:"You have view-only access to this system. Contact your administrator to request additional permissions."})})]})]})}function cze(){const{data:t,isLoading:e}=gj();if(e)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});switch(t){case"super_admin":case"admin":return a.jsx(L6e,{});case"financial_manager":return a.jsx(sze,{});case"accountant":return a.jsx($6e,{});case"assistant_accountant":return a.jsx(aze,{});case"finance_officer":return a.jsx(ize,{});case"bookkeeper":return a.jsx(F6e,{});case"cashier":return a.jsx(oze,{});case"hr_manager":return a.jsx(q9e,{});case"inventory_manager":return a.jsx(W9e,{});case"project_manager":return a.jsx(J9e,{});case"auditor":return a.jsx(rze,{});case"staff":return a.jsx(lze,{});case"read_only":return a.jsx(QV,{});default:return a.jsx(QV,{})}}const uze=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},XV=t=>{if(!t)return"";if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return""};function dze(){const[t,e]=N.useState(""),{user:n}=ct(),{data:r,isLoading:s}=Ne({queryKey:["invoices",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const l=await Ke.getPrimaryMembershipByUser(n.id);if(!(l!=null&&l.companyId))return[];const c=ve(te,Y.INVOICES),d=(await $e(Ce(c,ge("companyId","==",l.companyId)))).docs.map(m=>{const b=m.data();return{id:m.id,invoiceNumber:String(b.invoiceNumber??b.invoice_number??""),invoiceDate:XV(b.invoiceDate??b.invoice_date),dueDate:XV(b.dueDate??b.due_date)||null,customerId:b.customerId??b.customer_id??null,customerName:"-",total:Number(b.total??0),status:String(b.status??"draft")}}),h=Array.from(new Set(d.map(m=>m.customerId).filter(Boolean))),f=new Map;if(h.length>0){const m=ve(te,Y.CUSTOMERS),b=uze(h,30);(await Promise.all(b.map(x=>$e(Ce(m,ge(Jd(),"in",x)))))).forEach(x=>{x.docs.forEach(w=>{const y=w.data();f.set(w.id,String(y.name??"-"))})})}return d.map(m=>({...m,customerName:m.customerId&&f.get(m.customerId)||"-"})).sort((m,b)=>String(b.invoiceDate).localeCompare(String(m.invoiceDate)))},enabled:!!n}),i=l=>{switch(l){case"paid":return"default";case"sent":return"secondary";case"overdue":return"destructive";case"draft":return"outline";default:return"secondary"}},o=r==null?void 0:r.filter(l=>l.invoiceNumber.toLowerCase().includes(t.toLowerCase())||l.customerName.toLowerCase().includes(t.toLowerCase()));return s?a.jsx("div",{children:"Loading..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Invoices"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage customer invoices and payments"})]}),a.jsx(Fa,{to:"/invoices/new",children:a.jsxs(G,{className:"gap-2",children:[a.jsx(xn,{className:"h-4 w-4"}),"New Invoice"]})})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(ne,{children:"All Invoices"}),a.jsxs("div",{className:"relative w-64",children:[a.jsx(na,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),a.jsx(K,{placeholder:"Search invoices...",value:t,onChange:l=>e(l.target.value),className:"pl-8"})]})]})}),a.jsx(re,{children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Invoice #"}),a.jsx(U,{children:"Date"}),a.jsx(U,{children:"Customer"}),a.jsx(U,{children:"Due Date"}),a.jsx(U,{className:"text-right",children:"Amount"}),a.jsx(U,{children:"Status"})]})}),a.jsxs(Wt,{children:[o==null?void 0:o.map(l=>a.jsxs(_e,{children:[a.jsx(B,{className:"font-medium",children:l.invoiceNumber}),a.jsx(B,{children:l.invoiceDate?vt(new Date(l.invoiceDate),"dd MMM yyyy"):"-"}),a.jsx(B,{children:l.customerName||"-"}),a.jsx(B,{children:l.dueDate?vt(new Date(l.dueDate),"dd MMM yyyy"):"-"}),a.jsxs(B,{className:"text-right font-medium",children:["ZMW ",l.total.toFixed(2)]}),a.jsx(B,{children:a.jsx(Xe,{variant:i(l.status||"draft"),children:l.status})})]},l.id)),(o==null?void 0:o.length)===0&&a.jsx(_e,{children:a.jsx(B,{colSpan:6,className:"text-center text-muted-foreground",children:"No invoices found"})})]})]})})]})]})}const lr=N.forwardRef(({className:t,...e},n)=>a.jsx("textarea",{className:pe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));lr.displayName="Textarea";function xu(){const{user:t,isAuthenticated:e}=ct();return Ne({queryKey:["company-settings",t==null?void 0:t.id],queryFn:async()=>{if(!t||!fo)return null;const n=await Ke.getPrimaryMembershipByUser(t.id);return n?Ke.getCompanySettings(n.companyId):null},enabled:e&&!!t})}function hze(t){const e=un(),{data:n,isLoading:r}=Ne({queryKey:["zra-status",t],queryFn:async()=>null,enabled:!!t}),s=it({mutationFn:async o=>Gn("zraSmartInvoice",{action:"submit_invoice",invoiceId:o}),onSuccess:o=>{o.success?(Z.success(`Invoice submitted to ZRA: ${o.zra_invoice_number??"Submitted"}`),e.invalidateQueries({queryKey:["invoices"]}),e.invalidateQueries({queryKey:["zra-status"]})):Z.warning(o.message||"Invoice queued for ZRA submission")},onError:o=>{Z.error(o.message||"Failed to submit to ZRA")}}),i=it({mutationFn:async()=>Gn("zraSmartInvoice",{action:"retry_pending"}),onSuccess:o=>{Z.success(`Processed ${o.processed??0} pending invoices`),e.invalidateQueries({queryKey:["invoices"]}),e.invalidateQueries({queryKey:["zra-status"]})},onError:o=>{Z.error(o.message||"Failed to retry pending invoices")}});return{zraStatus:n,isLoadingStatus:r,submitToZRA:s,retryPending:i,isSubmitting:s.isPending,isRetrying:i.isPending}}function fze(){const{user:t}=ct(),e=Hn(),n=un(),[r]=I6(),s=r.get("customer"),{data:i}=xu(),{submitToZRA:o,isSubmitting:l}=hze(),[c,u]=N.useState(s||""),[d,h]=N.useState(`INV-${Date.now()}`),[f,m]=N.useState(new Date().toISOString().split("T")[0]),[b,g]=N.useState(""),[x,w]=N.useState(""),[y,A]=N.useState(""),[T,v]=N.useState(!0),[S,j]=N.useState([{id:"1",description:"",quantity:1,rate:0,amount:0}]),{data:p}=Ne({queryKey:["customers",t==null?void 0:t.id],queryFn:async()=>{if(!t)return[];const W=await Ke.getPrimaryMembershipByUser(t.id);return W!=null&&W.companyId?(await $e(Ce(ve(te,Y.CUSTOMERS),ge("companyId","==",W.companyId)))).docs.map(oe=>{const me=oe.data();return{id:oe.id,name:String(me.name??"")}}).sort((oe,me)=>oe.name.localeCompare(me.name)):[]},enabled:!!t}),{data:E}=Ne({queryKey:["new-invoice-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const W=await Ke.getPrimaryMembershipByUser(t.id);return(W==null?void 0:W.companyId)??null},enabled:!!t}),P=(i==null?void 0:i.isVatRegistered)||!1,C=(i==null?void 0:i.vatRate)||16,I=()=>{j([...S,{id:Date.now().toString(),description:"",quantity:1,rate:0,amount:0}])},O=W=>{S.length>1&&j(S.filter(ie=>ie.id!==W))},$=(W,ie,oe)=>{j(S.map(me=>{if(me.id===W){const Ie={...me,[ie]:oe};return(ie==="quantity"||ie==="rate")&&(Ie.amount=Ie.quantity*Ie.rate),Ie}return me}))},z=S.reduce((W,ie)=>W+ie.amount,0),H=P?z*(C/100):0,M=z+H,F=it({mutationFn:async W=>{if(!E||!t)throw new Error("No company context found");const ie=await jn(ve(te,Y.INVOICES),{companyId:E,customerId:c||null,invoiceNumber:d,invoiceDate:f,dueDate:b||null,subtotal:z,vatAmount:H,total:M,status:W,notes:x,terms:y,zraStatus:P&&T&&W==="sent"?"pending":null,createdBy:t.id,createdAt:ye(),updatedAt:ye()}),oe=S.filter(me=>me.description).map(me=>({companyId:E,invoiceId:ie.id,description:me.description,quantity:me.quantity,unitPrice:me.rate,amount:me.amount,createdAt:ye()}));return oe.length>0&&await Promise.all(oe.map(me=>jn(ve(te,Y.INVOICE_ITEMS),me))),{id:ie.id,status:W}},onSuccess:async(W,ie)=>{if(P&&T&&ie==="sent")try{await o.mutateAsync(W.id)}catch{console.log("ZRA submission queued for retry")}if(ie==="sent")try{await wbe.postInvoiceToGL(W.id)}catch{}n.invalidateQueries({queryKey:["invoices"]}),Z.success(ie==="sent"?"Invoice sent successfully":"Invoice saved as draft"),e("/invoices")},onError:W=>{Z.error("Failed to save invoice: "+W.message)}}),L=(W=!1)=>{F.mutate(W?"sent":"draft")};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"New Invoice"}),a.jsxs("p",{className:"text-muted-foreground",children:["Create a new invoice for a customer",P&&a.jsxs("span",{className:"ml-2 text-xs bg-primary/10 text-primary px-2 py-0.5 rounded",children:["VAT ",C,"%"]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(G,{variant:"outline",onClick:()=>e("/invoices"),children:"Cancel"}),a.jsxs(G,{variant:"outline",className:"gap-2",onClick:()=>L(!1),disabled:F.isPending,children:[a.jsx(bd,{className:"h-4 w-4"}),"Save Draft"]}),a.jsxs(G,{className:"gap-2",onClick:()=>L(!0),disabled:F.isPending,children:[a.jsx(wU,{className:"h-4 w-4"}),"Save & Send"]})]})]}),a.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"Invoice Details"})}),a.jsx(re,{className:"space-y-4",children:a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"customer",children:"Customer *"}),a.jsxs(It,{value:c,onValueChange:u,children:[a.jsx(Et,{id:"customer",children:a.jsx(kt,{placeholder:"Select customer"})}),a.jsx(At,{children:p==null?void 0:p.map(W=>a.jsx(be,{value:W.id,children:W.name},W.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"invoiceNumber",children:"Invoice Number *"}),a.jsx(K,{id:"invoiceNumber",value:d,onChange:W=>h(W.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"invoiceDate",children:"Invoice Date *"}),a.jsx(K,{id:"invoiceDate",type:"date",value:f,onChange:W=>m(W.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"dueDate",children:"Due Date"}),a.jsx(K,{id:"dueDate",type:"date",value:b,onChange:W=>g(W.target.value)})]})]})})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"Line Items"})}),a.jsx(re,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-4 md:grid-cols-12 text-sm font-medium text-muted-foreground",children:[a.jsx("div",{className:"md:col-span-5",children:"Description"}),a.jsx("div",{className:"md:col-span-2",children:"Qty"}),a.jsx("div",{className:"md:col-span-2",children:"Rate (ZMW)"}),a.jsx("div",{className:"md:col-span-2",children:"Amount"}),a.jsx("div",{className:"md:col-span-1"})]}),S.map(W=>a.jsxs("div",{className:"grid gap-4 md:grid-cols-12 items-start",children:[a.jsx("div",{className:"md:col-span-5",children:a.jsx(lr,{placeholder:"Description",value:W.description,onChange:ie=>$(W.id,"description",ie.target.value),rows:2})}),a.jsx("div",{className:"md:col-span-2",children:a.jsx(K,{type:"number",placeholder:"Qty",value:W.quantity,onChange:ie=>$(W.id,"quantity",parseFloat(ie.target.value)||0),min:"0",step:"0.01"})}),a.jsx("div",{className:"md:col-span-2",children:a.jsx(K,{type:"number",placeholder:"Rate",value:W.rate,onChange:ie=>$(W.id,"rate",parseFloat(ie.target.value)||0),min:"0",step:"0.01"})}),a.jsx("div",{className:"md:col-span-2",children:a.jsx(K,{value:`ZMW ${W.amount.toFixed(2)}`,disabled:!0,className:"bg-muted"})}),a.jsx("div",{className:"md:col-span-1",children:a.jsx(G,{type:"button",variant:"ghost",size:"icon",onClick:()=>O(W.id),disabled:S.length===1,children:a.jsx(xs,{className:"h-4 w-4"})})})]},W.id)),a.jsxs(G,{type:"button",variant:"outline",className:"gap-2",onClick:I,children:[a.jsx(xn,{className:"h-4 w-4"}),"Add Line"]})]})})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"Notes & Terms"})}),a.jsxs(re,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"notes",children:"Notes (visible to customer)"}),a.jsx(lr,{id:"notes",placeholder:"Add any notes or special instructions",rows:3,value:x,onChange:W=>w(W.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"terms",children:"Terms & Conditions"}),a.jsx(lr,{id:"terms",placeholder:"Payment terms and conditions",rows:3,value:y,onChange:W=>A(W.target.value)})]})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"Summary"})}),a.jsxs(re,{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),a.jsxs("span",{className:"font-medium",children:["ZMW ",z.toFixed(2)]})]}),P&&a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsxs("span",{className:"text-muted-foreground",children:["VAT (",C,"%)"]}),a.jsxs("span",{className:"font-medium",children:["ZMW ",H.toFixed(2)]})]}),a.jsxs("div",{className:"border-t pt-3 flex justify-between",children:[a.jsx("span",{className:"font-semibold",children:"Total"}),a.jsxs("span",{className:"text-xl font-bold text-primary",children:["ZMW ",M.toFixed(2)]})]})]})]}),P&&a.jsx(X,{className:"border-primary/20 bg-primary/5",children:a.jsxs(re,{className:"pt-4 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(yU,{className:"h-4 w-4 text-primary"}),a.jsx("span",{className:"font-medium text-sm",children:"ZRA Smart Invoice"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm",children:"Submit to ZRA on send"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Invoice will be submitted for ZRA approval"})]}),a.jsx(Zr,{checked:T,onCheckedChange:v})]}),l&&a.jsxs(Xe,{variant:"outline",className:"animate-pulse",children:[a.jsx(xa,{className:"h-3 w-3 mr-1"}),"Submitting to ZRA..."]})]})}),!P&&a.jsx(X,{className:"bg-muted/50",children:a.jsx(re,{className:"pt-4",children:a.jsxs("p",{className:"text-sm text-muted-foreground",children:["VAT is not applied. To enable VAT, go to"," ",a.jsx(G,{variant:"link",className:"p-0 h-auto",onClick:()=>e("/settings"),children:"Settings"})," ","and enable VAT registration."]})})})]})]})]})}function mze(){const t=Hn(),{user:e}=ct(),{data:n,isLoading:r,refetch:s}=Ne({queryKey:["employees",e==null?void 0:e.id],queryFn:async()=>{if(!e)return[];const o=await Ke.getPrimaryMembershipByUser(e.id);if(!(o!=null&&o.companyId))return[];const l=ve(te,Y.EMPLOYEES),u=(await $e(Ce(l,ge("companyId","==",o.companyId)))).docs.map(d=>{const h=d.data();return{id:d.id,employeeNumber:String(h.employeeNumber??h.employee_number??""),fullName:String(h.fullName??h.full_name??""),position:h.position??null,department:h.department??null,basicSalary:Number(h.basicSalary??h.basic_salary??0),employmentStatus:String(h.employmentStatus??h.employment_status??"active")}});return u.sort((d,h)=>d.fullName.localeCompare(h.fullName)),u},enabled:!!e}),i=async o=>{if(confirm("Are you sure you want to delete this employee?"))try{await Li(He(te,Y.EMPLOYEES,o)),Z.success("Employee deleted successfully"),s()}catch{Z.error("Failed to delete employee")}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Employees"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your employee records"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(G,{variant:"outline",onClick:()=>t("/employees/bulk-upload"),children:[a.jsx(So,{className:"mr-2 h-4 w-4"}),"Bulk Upload"]}),a.jsxs(G,{onClick:()=>t("/employees/new"),children:[a.jsx(xn,{className:"mr-2 h-4 w-4"}),"Add Employee"]})]})]}),r?a.jsx("div",{children:"Loading..."}):a.jsx("div",{className:"border rounded-lg",children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Employee #"}),a.jsx(U,{children:"Name"}),a.jsx(U,{children:"Position"}),a.jsx(U,{children:"Department"}),a.jsx(U,{children:"Basic Salary"}),a.jsx(U,{children:"Status"}),a.jsx(U,{className:"text-right",children:"Actions"})]})}),a.jsxs(Wt,{children:[n==null?void 0:n.map(o=>a.jsxs(_e,{children:[a.jsx(B,{className:"font-medium",children:o.employeeNumber}),a.jsx(B,{children:o.fullName}),a.jsx(B,{children:o.position||"-"}),a.jsx(B,{children:o.department||"-"}),a.jsx(B,{children:le(o.basicSalary)}),a.jsx(B,{children:a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${o.employmentStatus==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:o.employmentStatus})}),a.jsxs(B,{className:"text-right",children:[a.jsx(G,{variant:"ghost",size:"sm",onClick:()=>t(`/employees/${o.id}/edit`),children:a.jsx(Mm,{className:"h-4 w-4"})}),a.jsx(G,{variant:"ghost",size:"sm",onClick:()=>i(o.id),children:a.jsx(xs,{className:"h-4 w-4"})})]})]},o.id)),(n==null?void 0:n.length)===0&&a.jsx(_e,{children:a.jsx(B,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No employees found. Add your first employee to get started."})})]})]})})]})}var nx=t=>t.type==="checkbox",Ku=t=>t instanceof Date,As=t=>t==null;const AQ=t=>typeof t=="object";var yr=t=>!As(t)&&!Array.isArray(t)&&AQ(t)&&!Ku(t),TQ=t=>yr(t)&&t.target?nx(t.target)?t.target.checked:t.target.value:t,pze=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,CQ=(t,e)=>t.has(pze(e)),gze=t=>{const e=t.constructor&&t.constructor.prototype;return yr(e)&&e.hasOwnProperty("isPrototypeOf")},IO=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Cr(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(IO&&(t instanceof Blob||r))&&(n||yr(t)))if(e=n?[]:{},!n&&!gze(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=Cr(t[s]));else return t;return e}var jN=t=>/^\w*$/.test(t),fr=t=>t===void 0,kO=t=>Array.isArray(t)?t.filter(Boolean):[],OO=t=>kO(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Ve=(t,e,n)=>{if(!e||!yr(t))return n;const r=(jN(e)?[e]:OO(e)).reduce((s,i)=>As(s)?s:s[i],t);return fr(r)||r===t?fr(t[e])?n:t[e]:r},da=t=>typeof t=="boolean",gn=(t,e,n)=>{let r=-1;const s=jN(e)?[e]:OO(e),i=s.length,o=i-1;for(;++r<i;){const l=s[r];let c=n;if(r!==o){const u=t[l];c=yr(u)||Array.isArray(u)?u:isNaN(+s[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=c,t=t[l]}};const n_={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ji={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Mo={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},RO=D.createContext(null);RO.displayName="HookFormContext";const NN=()=>D.useContext(RO),yze=t=>{const{children:e,...n}=t;return D.createElement(RO.Provider,{value:n},e)};var PQ=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(s,i,{get:()=>{const o=i;return e._proxyFormState[o]!==ji.all&&(e._proxyFormState[o]=!r||ji.all),n&&(n[o]=!0),t[o]}});return s};const MO=typeof window<"u"?D.useLayoutEffect:D.useEffect;function vze(t){const e=NN(),{control:n=e.control,disabled:r,name:s,exact:i}=t||{},[o,l]=D.useState(n._formState),c=D.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return MO(()=>n._subscribe({name:s,formState:c.current,exact:i,callback:u=>{!r&&l({...n._formState,...u})}}),[s,r,i]),D.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),D.useMemo(()=>PQ(o,n,c.current,!1),[o,n])}var ro=t=>typeof t=="string",IQ=(t,e,n,r,s)=>ro(t)?(r&&e.watch.add(t),Ve(n,t,s)):Array.isArray(t)?t.map(i=>(r&&e.watch.add(i),Ve(n,i))):(r&&(e.watchAll=!0),n),yC=t=>As(t)||!AQ(t);function Uo(t,e,n=new WeakSet){if(yC(t)||yC(e))return t===e;if(Ku(t)&&Ku(e))return t.getTime()===e.getTime();const r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const i of r){const o=t[i];if(!s.includes(i))return!1;if(i!=="ref"){const l=e[i];if(Ku(o)&&Ku(l)||yr(o)&&yr(l)||Array.isArray(o)&&Array.isArray(l)?!Uo(o,l,n):o!==l)return!1}}return!0}function xze(t){const e=NN(),{control:n=e.control,name:r,defaultValue:s,disabled:i,exact:o,compute:l}=t||{},c=D.useRef(s),u=D.useRef(l),d=D.useRef(void 0);u.current=l;const h=D.useMemo(()=>n._getWatch(r,c.current),[n,r]),[f,m]=D.useState(u.current?u.current(h):h);return MO(()=>n._subscribe({name:r,formState:{values:!0},exact:o,callback:b=>{if(!i){const g=IQ(r,n._names,b.values||n._formValues,!1,c.current);if(u.current){const x=u.current(g);Uo(x,d.current)||(m(x),d.current=x)}else m(g)}}}),[n,i,r,o]),D.useEffect(()=>n._removeUnmounted()),f}function bze(t){const e=NN(),{name:n,disabled:r,control:s=e.control,shouldUnregister:i,defaultValue:o}=t,l=CQ(s._names.array,n),c=D.useMemo(()=>Ve(s._formValues,n,Ve(s._defaultValues,n,o)),[s,n,o]),u=xze({control:s,name:n,defaultValue:c,exact:!0}),d=vze({control:s,name:n,exact:!0}),h=D.useRef(t),f=D.useRef(s.register(n,{...t.rules,value:u,...da(t.disabled)?{disabled:t.disabled}:{}}));h.current=t;const m=D.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ve(d.errors,n)},isDirty:{enumerable:!0,get:()=>!!Ve(d.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Ve(d.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Ve(d.validatingFields,n)},error:{enumerable:!0,get:()=>Ve(d.errors,n)}}),[d,n]),b=D.useCallback(y=>f.current.onChange({target:{value:TQ(y),name:n},type:n_.CHANGE}),[n]),g=D.useCallback(()=>f.current.onBlur({target:{value:Ve(s._formValues,n),name:n},type:n_.BLUR}),[n,s._formValues]),x=D.useCallback(y=>{const A=Ve(s._fields,n);A&&y&&(A._f.ref={focus:()=>y.focus&&y.focus(),select:()=>y.select&&y.select(),setCustomValidity:T=>y.setCustomValidity(T),reportValidity:()=>y.reportValidity()})},[s._fields,n]),w=D.useMemo(()=>({name:n,value:u,...da(r)||d.disabled?{disabled:d.disabled||r}:{},onChange:b,onBlur:g,ref:x}),[n,r,d.disabled,b,g,x,u]);return D.useEffect(()=>{const y=s._options.shouldUnregister||i;s.register(n,{...h.current.rules,...da(h.current.disabled)?{disabled:h.current.disabled}:{}});const A=(T,v)=>{const S=Ve(s._fields,T);S&&S._f&&(S._f.mount=v)};if(A(n,!0),y){const T=Cr(Ve(s._options.defaultValues,n));gn(s._defaultValues,n,T),fr(Ve(s._formValues,n))&&gn(s._formValues,n,T)}return!l&&s.register(n),()=>{(l?y&&!s._state.action:y)?s.unregister(n):A(n,!1)}},[n,s,l,i]),D.useEffect(()=>{s._setDisabledField({disabled:r,name:n})},[r,n,s]),D.useMemo(()=>({field:w,formState:d,fieldState:m}),[w,d,m])}const wze=t=>t.render(bze(t));var kQ=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},$g=t=>Array.isArray(t)?t:[t],ZV=()=>{let t=[];return{get observers(){return t},next:s=>{for(const i of t)i.next&&i.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(i=>i!==s)}}),unsubscribe:()=>{t=[]}}},Bs=t=>yr(t)&&!Object.keys(t).length,DO=t=>t.type==="file",Ni=t=>typeof t=="function",r_=t=>{if(!IO)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},OQ=t=>t.type==="select-multiple",LO=t=>t.type==="radio",_ze=t=>LO(t)||nx(t),CS=t=>r_(t)&&t.isConnected;function jze(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=fr(t)?r++:t[e[r++]];return t}function Nze(t){for(const e in t)if(t.hasOwnProperty(e)&&!fr(t[e]))return!1;return!0}function vr(t,e){const n=Array.isArray(e)?e:jN(e)?[e]:OO(e),r=n.length===1?t:jze(t,n),s=n.length-1,i=n[s];return r&&delete r[i],s!==0&&(yr(r)&&Bs(r)||Array.isArray(r)&&Nze(r))&&vr(t,n.slice(0,-1)),t}var RQ=t=>{for(const e in t)if(Ni(t[e]))return!0;return!1};function s_(t,e={}){const n=Array.isArray(t);if(yr(t)||n)for(const r in t)Array.isArray(t[r])||yr(t[r])&&!RQ(t[r])?(e[r]=Array.isArray(t[r])?[]:{},s_(t[r],e[r])):As(t[r])||(e[r]=!0);return e}function MQ(t,e,n){const r=Array.isArray(t);if(yr(t)||r)for(const s in t)Array.isArray(t[s])||yr(t[s])&&!RQ(t[s])?fr(e)||yC(n[s])?n[s]=Array.isArray(t[s])?s_(t[s],[]):{...s_(t[s])}:MQ(t[s],As(e)?{}:e[s],n[s]):n[s]=!Uo(t[s],e[s]);return n}var Yp=(t,e)=>MQ(t,e,s_(e));const JV={value:!1,isValid:!1},eB={value:!0,isValid:!0};var DQ=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!fr(t[0].attributes.value)?fr(t[0].value)||t[0].value===""?eB:{value:t[0].value,isValid:!0}:eB:JV}return JV},LQ=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>fr(t)?t:e?t===""?NaN:t&&+t:n&&ro(t)?new Date(t):r?r(t):t;const tB={isValid:!1,value:null};var $Q=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,tB):tB;function nB(t){const e=t.ref;return DO(e)?e.files:LO(e)?$Q(t.refs).value:OQ(e)?[...e.selectedOptions].map(({value:n})=>n):nx(e)?DQ(t.refs).value:LQ(fr(e.value)?t.ref.value:e.value,t)}var Sze=(t,e,n,r)=>{const s={};for(const i of t){const o=Ve(e,i);o&&gn(s,i,o._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},a_=t=>t instanceof RegExp,Qp=t=>fr(t)?t:a_(t)?t.source:yr(t)?a_(t.value)?t.value.source:t.value:t,rB=t=>({isOnSubmit:!t||t===ji.onSubmit,isOnBlur:t===ji.onBlur,isOnChange:t===ji.onChange,isOnAll:t===ji.all,isOnTouch:t===ji.onTouched});const sB="AsyncFunction";var Eze=t=>!!t&&!!t.validate&&!!(Ni(t.validate)&&t.validate.constructor.name===sB||yr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===sB)),Aze=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),aB=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Fg=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const i=Ve(t,s);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Fg(l,e))break}else if(yr(l)&&Fg(l,e))break}}};function iB(t,e,n){const r=Ve(t,n);if(r||jN(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const i=s.join("."),o=Ve(e,i),l=Ve(t,i);if(o&&!Array.isArray(o)&&n!==i)return{name:n};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};s.pop()}return{name:n}}var Tze=(t,e,n,r)=>{n(t);const{name:s,...i}=t;return Bs(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(o=>e[o]===(!r||ji.all))},Cze=(t,e,n)=>!t||!e||t===e||$g(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),Pze=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,Ize=(t,e)=>!kO(Ve(t,e)).length&&vr(t,e),kze=(t,e,n)=>{const r=$g(Ve(t,n));return gn(r,"root",e[n]),gn(t,n,r),t},Bb=t=>ro(t);function oB(t,e,n="validate"){if(Bb(t)||Array.isArray(t)&&t.every(Bb)||da(t)&&!t)return{type:n,message:Bb(t)?t:"",ref:e}}var wh=t=>yr(t)&&!a_(t)?t:{value:t,message:""},lB=async(t,e,n,r,s,i)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:h,max:f,pattern:m,validate:b,name:g,valueAsNumber:x,mount:w}=t._f,y=Ve(n,g);if(!w||e.has(g))return{};const A=l?l[0]:o,T=I=>{s&&A.reportValidity&&(A.setCustomValidity(da(I)?"":I||""),A.reportValidity())},v={},S=LO(o),j=nx(o),p=S||j,E=(x||DO(o))&&fr(o.value)&&fr(y)||r_(o)&&o.value===""||y===""||Array.isArray(y)&&!y.length,P=kQ.bind(null,g,r,v),C=(I,O,$,z=Mo.maxLength,H=Mo.minLength)=>{const M=I?O:$;v[g]={type:I?z:H,message:M,ref:o,...P(I?z:H,M)}};if(i?!Array.isArray(y)||!y.length:c&&(!p&&(E||As(y))||da(y)&&!y||j&&!DQ(l).isValid||S&&!$Q(l).isValid)){const{value:I,message:O}=Bb(c)?{value:!!c,message:c}:wh(c);if(I&&(v[g]={type:Mo.required,message:O,ref:A,...P(Mo.required,O)},!r))return T(O),v}if(!E&&(!As(h)||!As(f))){let I,O;const $=wh(f),z=wh(h);if(!As(y)&&!isNaN(y)){const H=o.valueAsNumber||y&&+y;As($.value)||(I=H>$.value),As(z.value)||(O=H<z.value)}else{const H=o.valueAsDate||new Date(y),M=W=>new Date(new Date().toDateString()+" "+W),F=o.type=="time",L=o.type=="week";ro($.value)&&y&&(I=F?M(y)>M($.value):L?y>$.value:H>new Date($.value)),ro(z.value)&&y&&(O=F?M(y)<M(z.value):L?y<z.value:H<new Date(z.value))}if((I||O)&&(C(!!I,$.message,z.message,Mo.max,Mo.min),!r))return T(v[g].message),v}if((u||d)&&!E&&(ro(y)||i&&Array.isArray(y))){const I=wh(u),O=wh(d),$=!As(I.value)&&y.length>+I.value,z=!As(O.value)&&y.length<+O.value;if(($||z)&&(C($,I.message,O.message),!r))return T(v[g].message),v}if(m&&!E&&ro(y)){const{value:I,message:O}=wh(m);if(a_(I)&&!y.match(I)&&(v[g]={type:Mo.pattern,message:O,ref:o,...P(Mo.pattern,O)},!r))return T(O),v}if(b){if(Ni(b)){const I=await b(y,n),O=oB(I,A);if(O&&(v[g]={...O,...P(Mo.validate,O.message)},!r))return T(O.message),v}else if(yr(b)){let I={};for(const O in b){if(!Bs(I)&&!r)break;const $=oB(await b[O](y,n),A,O);$&&(I={...$,...P(O,$.message)},T($.message),r&&(v[g]=I))}if(!Bs(I)&&(v[g]={ref:A,...I},!r))return v}}return T(!0),v};const Oze={mode:ji.onSubmit,reValidateMode:ji.onChange,shouldFocusError:!0};function Rze(t={}){let e={...Oze,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ni(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},s=yr(e.defaultValues)||yr(e.values)?Cr(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:Cr(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...d};const f={array:ZV(),state:ZV()},m=e.criteriaMode===ji.all,b=q=>se=>{clearTimeout(u),u=setTimeout(q,se)},g=async q=>{if(!e.disabled&&(d.isValid||h.isValid||q)){const se=e.resolver?Bs((await j()).errors):await E(r,!0);se!==n.isValid&&f.state.next({isValid:se})}},x=(q,se)=>{!e.disabled&&(d.isValidating||d.validatingFields||h.isValidating||h.validatingFields)&&((q||Array.from(l.mount)).forEach(de=>{de&&(se?gn(n.validatingFields,de,se):vr(n.validatingFields,de))}),f.state.next({validatingFields:n.validatingFields,isValidating:!Bs(n.validatingFields)}))},w=(q,se=[],de,Oe,Re=!0,Se=!0)=>{if(Oe&&de&&!e.disabled){if(o.action=!0,Se&&Array.isArray(Ve(r,q))){const ze=de(Ve(r,q),Oe.argA,Oe.argB);Re&&gn(r,q,ze)}if(Se&&Array.isArray(Ve(n.errors,q))){const ze=de(Ve(n.errors,q),Oe.argA,Oe.argB);Re&&gn(n.errors,q,ze),Ize(n.errors,q)}if((d.touchedFields||h.touchedFields)&&Se&&Array.isArray(Ve(n.touchedFields,q))){const ze=de(Ve(n.touchedFields,q),Oe.argA,Oe.argB);Re&&gn(n.touchedFields,q,ze)}(d.dirtyFields||h.dirtyFields)&&(n.dirtyFields=Yp(s,i)),f.state.next({name:q,isDirty:C(q,se),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else gn(i,q,se)},y=(q,se)=>{gn(n.errors,q,se),f.state.next({errors:n.errors})},A=q=>{n.errors=q,f.state.next({errors:n.errors,isValid:!1})},T=(q,se,de,Oe)=>{const Re=Ve(r,q);if(Re){const Se=Ve(i,q,fr(de)?Ve(s,q):de);fr(Se)||Oe&&Oe.defaultChecked||se?gn(i,q,se?Se:nB(Re._f)):$(q,Se),o.mount&&g()}},v=(q,se,de,Oe,Re)=>{let Se=!1,ze=!1;const Ut={name:q};if(!e.disabled){if(!de||Oe){(d.isDirty||h.isDirty)&&(ze=n.isDirty,n.isDirty=Ut.isDirty=C(),Se=ze!==Ut.isDirty);const on=Uo(Ve(s,q),se);ze=!!Ve(n.dirtyFields,q),on?vr(n.dirtyFields,q):gn(n.dirtyFields,q,!0),Ut.dirtyFields=n.dirtyFields,Se=Se||(d.dirtyFields||h.dirtyFields)&&ze!==!on}if(de){const on=Ve(n.touchedFields,q);on||(gn(n.touchedFields,q,de),Ut.touchedFields=n.touchedFields,Se=Se||(d.touchedFields||h.touchedFields)&&on!==de)}Se&&Re&&f.state.next(Ut)}return Se?Ut:{}},S=(q,se,de,Oe)=>{const Re=Ve(n.errors,q),Se=(d.isValid||h.isValid)&&da(se)&&n.isValid!==se;if(e.delayError&&de?(c=b(()=>y(q,de)),c(e.delayError)):(clearTimeout(u),c=null,de?gn(n.errors,q,de):vr(n.errors,q)),(de?!Uo(Re,de):Re)||!Bs(Oe)||Se){const ze={...Oe,...Se&&da(se)?{isValid:se}:{},errors:n.errors,name:q};n={...n,...ze},f.state.next(ze)}},j=async q=>{x(q,!0);const se=await e.resolver(i,e.context,Sze(q||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return x(q),se},p=async q=>{const{errors:se}=await j(q);if(q)for(const de of q){const Oe=Ve(se,de);Oe?gn(n.errors,de,Oe):vr(n.errors,de)}else n.errors=se;return se},E=async(q,se,de={valid:!0})=>{for(const Oe in q){const Re=q[Oe];if(Re){const{_f:Se,...ze}=Re;if(Se){const Ut=l.array.has(Se.name),on=Re._f&&Eze(Re._f);on&&d.validatingFields&&x([Oe],!0);const as=await lB(Re,l.disabled,i,m,e.shouldUseNativeValidation&&!se,Ut);if(on&&d.validatingFields&&x([Oe]),as[Se.name]&&(de.valid=!1,se))break;!se&&(Ve(as,Se.name)?Ut?kze(n.errors,as,Se.name):gn(n.errors,Se.name,as[Se.name]):vr(n.errors,Se.name))}!Bs(ze)&&await E(ze,se,de)}}return de.valid},P=()=>{for(const q of l.unMount){const se=Ve(r,q);se&&(se._f.refs?se._f.refs.every(de=>!CS(de)):!CS(se._f.ref))&&je(q)}l.unMount=new Set},C=(q,se)=>!e.disabled&&(q&&se&&gn(i,q,se),!Uo(W(),s)),I=(q,se,de)=>IQ(q,l,{...o.mount?i:fr(se)?s:ro(q)?{[q]:se}:se},de,se),O=q=>kO(Ve(o.mount?i:s,q,e.shouldUnregister?Ve(s,q,[]):[])),$=(q,se,de={})=>{const Oe=Ve(r,q);let Re=se;if(Oe){const Se=Oe._f;Se&&(!Se.disabled&&gn(i,q,LQ(se,Se)),Re=r_(Se.ref)&&As(se)?"":se,OQ(Se.ref)?[...Se.ref.options].forEach(ze=>ze.selected=Re.includes(ze.value)):Se.refs?nx(Se.ref)?Se.refs.forEach(ze=>{(!ze.defaultChecked||!ze.disabled)&&(Array.isArray(Re)?ze.checked=!!Re.find(Ut=>Ut===ze.value):ze.checked=Re===ze.value||!!Re)}):Se.refs.forEach(ze=>ze.checked=ze.value===Re):DO(Se.ref)?Se.ref.value="":(Se.ref.value=Re,Se.ref.type||f.state.next({name:q,values:Cr(i)})))}(de.shouldDirty||de.shouldTouch)&&v(q,Re,de.shouldTouch,de.shouldDirty,!0),de.shouldValidate&&L(q)},z=(q,se,de)=>{for(const Oe in se){if(!se.hasOwnProperty(Oe))return;const Re=se[Oe],Se=q+"."+Oe,ze=Ve(r,Se);(l.array.has(q)||yr(Re)||ze&&!ze._f)&&!Ku(Re)?z(Se,Re,de):$(Se,Re,de)}},H=(q,se,de={})=>{const Oe=Ve(r,q),Re=l.array.has(q),Se=Cr(se);gn(i,q,Se),Re?(f.array.next({name:q,values:Cr(i)}),(d.isDirty||d.dirtyFields||h.isDirty||h.dirtyFields)&&de.shouldDirty&&f.state.next({name:q,dirtyFields:Yp(s,i),isDirty:C(q,Se)})):Oe&&!Oe._f&&!As(Se)?z(q,Se,de):$(q,Se,de),aB(q,l)&&f.state.next({...n,name:q}),f.state.next({name:o.mount?q:void 0,values:Cr(i)})},M=async q=>{o.mount=!0;const se=q.target;let de=se.name,Oe=!0;const Re=Ve(r,de),Se=on=>{Oe=Number.isNaN(on)||Ku(on)&&isNaN(on.getTime())||Uo(on,Ve(i,de,on))},ze=rB(e.mode),Ut=rB(e.reValidateMode);if(Re){let on,as;const oi=se.type?nB(Re._f):TQ(q),sa=q.type===n_.BLUR||q.type===n_.FOCUS_OUT,wu=!Aze(Re._f)&&!e.resolver&&!Ve(n.errors,de)&&!Re._f.deps||Pze(sa,Ve(n.touchedFields,de),n.isSubmitted,Ut,ze),aa=aB(de,l,sa);gn(i,de,oi),sa?(Re._f.onBlur&&Re._f.onBlur(q),c&&c(0)):Re._f.onChange&&Re._f.onChange(q);const Ds=v(de,oi,sa),Tl=!Bs(Ds)||aa;if(!sa&&f.state.next({name:de,type:q.type,values:Cr(i)}),wu)return(d.isValid||h.isValid)&&(e.mode==="onBlur"?sa&&g():sa||g()),Tl&&f.state.next({name:de,...aa?{}:Ds});if(!sa&&aa&&f.state.next({...n}),e.resolver){const{errors:Gr}=await j([de]);if(Se(oi),Oe){const lh=iB(n.errors,r,de),ko=iB(Gr,r,lh.name||de);on=ko.error,de=ko.name,as=Bs(Gr)}}else x([de],!0),on=(await lB(Re,l.disabled,i,m,e.shouldUseNativeValidation))[de],x([de]),Se(oi),Oe&&(on?as=!1:(d.isValid||h.isValid)&&(as=await E(r,!0)));Oe&&(Re._f.deps&&L(Re._f.deps),S(de,as,on,Ds))}},F=(q,se)=>{if(Ve(n.errors,se)&&q.focus)return q.focus(),1},L=async(q,se={})=>{let de,Oe;const Re=$g(q);if(e.resolver){const Se=await p(fr(q)?q:Re);de=Bs(Se),Oe=q?!Re.some(ze=>Ve(Se,ze)):de}else q?(Oe=(await Promise.all(Re.map(async Se=>{const ze=Ve(r,Se);return await E(ze&&ze._f?{[Se]:ze}:ze)}))).every(Boolean),!(!Oe&&!n.isValid)&&g()):Oe=de=await E(r);return f.state.next({...!ro(q)||(d.isValid||h.isValid)&&de!==n.isValid?{}:{name:q},...e.resolver||!q?{isValid:de}:{},errors:n.errors}),se.shouldFocus&&!Oe&&Fg(r,F,q?Re:l.mount),Oe},W=q=>{const se={...o.mount?i:s};return fr(q)?se:ro(q)?Ve(se,q):q.map(de=>Ve(se,de))},ie=(q,se)=>({invalid:!!Ve((se||n).errors,q),isDirty:!!Ve((se||n).dirtyFields,q),error:Ve((se||n).errors,q),isValidating:!!Ve(n.validatingFields,q),isTouched:!!Ve((se||n).touchedFields,q)}),oe=q=>{q&&$g(q).forEach(se=>vr(n.errors,se)),f.state.next({errors:q?n.errors:{}})},me=(q,se,de)=>{const Oe=(Ve(r,q,{_f:{}})._f||{}).ref,Re=Ve(n.errors,q)||{},{ref:Se,message:ze,type:Ut,...on}=Re;gn(n.errors,q,{...on,...se,ref:Oe}),f.state.next({name:q,errors:n.errors,isValid:!1}),de&&de.shouldFocus&&Oe&&Oe.focus&&Oe.focus()},Ie=(q,se)=>Ni(q)?f.state.subscribe({next:de=>"values"in de&&q(I(void 0,se),de)}):I(q,se,!0),lt=q=>f.state.subscribe({next:se=>{Cze(q.name,se.name,q.exact)&&Tze(se,q.formState||d,wn,q.reRenderRoot)&&q.callback({values:{...i},...n,...se,defaultValues:s})}}).unsubscribe,ut=q=>(o.mount=!0,h={...h,...q.formState},lt({...q,formState:h})),je=(q,se={})=>{for(const de of q?$g(q):l.mount)l.mount.delete(de),l.array.delete(de),se.keepValue||(vr(r,de),vr(i,de)),!se.keepError&&vr(n.errors,de),!se.keepDirty&&vr(n.dirtyFields,de),!se.keepTouched&&vr(n.touchedFields,de),!se.keepIsValidating&&vr(n.validatingFields,de),!e.shouldUnregister&&!se.keepDefaultValue&&vr(s,de);f.state.next({values:Cr(i)}),f.state.next({...n,...se.keepDirty?{isDirty:C()}:{}}),!se.keepIsValid&&g()},ht=({disabled:q,name:se})=>{(da(q)&&o.mount||q||l.disabled.has(se))&&(q?l.disabled.add(se):l.disabled.delete(se))},we=(q,se={})=>{let de=Ve(r,q);const Oe=da(se.disabled)||da(e.disabled);return gn(r,q,{...de||{},_f:{...de&&de._f?de._f:{ref:{name:q}},name:q,mount:!0,...se}}),l.mount.add(q),de?ht({disabled:da(se.disabled)?se.disabled:e.disabled,name:q}):T(q,!0,se.value),{...Oe?{disabled:se.disabled||e.disabled}:{},...e.progressive?{required:!!se.required,min:Qp(se.min),max:Qp(se.max),minLength:Qp(se.minLength),maxLength:Qp(se.maxLength),pattern:Qp(se.pattern)}:{},name:q,onChange:M,onBlur:M,ref:Re=>{if(Re){we(q,se),de=Ve(r,q);const Se=fr(Re.value)&&Re.querySelectorAll&&Re.querySelectorAll("input,select,textarea")[0]||Re,ze=_ze(Se),Ut=de._f.refs||[];if(ze?Ut.find(on=>on===Se):Se===de._f.ref)return;gn(r,q,{_f:{...de._f,...ze?{refs:[...Ut.filter(CS),Se,...Array.isArray(Ve(s,q))?[{}]:[]],ref:{type:Se.type,name:q}}:{ref:Se}}}),T(q,!1,void 0,Se)}else de=Ve(r,q,{}),de._f&&(de._f.mount=!1),(e.shouldUnregister||se.shouldUnregister)&&!(CQ(l.array,q)&&o.action)&&l.unMount.add(q)}}},Me=()=>e.shouldFocusError&&Fg(r,F,l.mount),Fe=q=>{da(q)&&(f.state.next({disabled:q}),Fg(r,(se,de)=>{const Oe=Ve(r,de);Oe&&(se.disabled=Oe._f.disabled||q,Array.isArray(Oe._f.refs)&&Oe._f.refs.forEach(Re=>{Re.disabled=Oe._f.disabled||q}))},0,!1))},ue=(q,se)=>async de=>{let Oe;de&&(de.preventDefault&&de.preventDefault(),de.persist&&de.persist());let Re=Cr(i);if(f.state.next({isSubmitting:!0}),e.resolver){const{errors:Se,values:ze}=await j();n.errors=Se,Re=Cr(ze)}else await E(r);if(l.disabled.size)for(const Se of l.disabled)vr(Re,Se);if(vr(n.errors,"root"),Bs(n.errors)){f.state.next({errors:{}});try{await q(Re,de)}catch(Se){Oe=Se}}else se&&await se({...n.errors},de),Me(),setTimeout(Me);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Bs(n.errors)&&!Oe,submitCount:n.submitCount+1,errors:n.errors}),Oe)throw Oe},Tt=(q,se={})=>{Ve(r,q)&&(fr(se.defaultValue)?H(q,Cr(Ve(s,q))):(H(q,se.defaultValue),gn(s,q,Cr(se.defaultValue))),se.keepTouched||vr(n.touchedFields,q),se.keepDirty||(vr(n.dirtyFields,q),n.isDirty=se.defaultValue?C(q,Cr(Ve(s,q))):C()),se.keepError||(vr(n.errors,q),d.isValid&&g()),f.state.next({...n}))},gt=(q,se={})=>{const de=q?Cr(q):s,Oe=Cr(de),Re=Bs(q),Se=Re?s:Oe;if(se.keepDefaultValues||(s=de),!se.keepValues){if(se.keepDirtyValues){const ze=new Set([...l.mount,...Object.keys(Yp(s,i))]);for(const Ut of Array.from(ze))Ve(n.dirtyFields,Ut)?gn(Se,Ut,Ve(i,Ut)):H(Ut,Ve(Se,Ut))}else{if(IO&&fr(q))for(const ze of l.mount){const Ut=Ve(r,ze);if(Ut&&Ut._f){const on=Array.isArray(Ut._f.refs)?Ut._f.refs[0]:Ut._f.ref;if(r_(on)){const as=on.closest("form");if(as){as.reset();break}}}}if(se.keepFieldsRef)for(const ze of l.mount)H(ze,Ve(Se,ze));else r={}}i=e.shouldUnregister?se.keepDefaultValues?Cr(s):{}:Cr(Se),f.array.next({values:{...Se}}),f.state.next({values:{...Se}})}l={mount:se.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!se.keepIsValid||!!se.keepDirtyValues,o.watch=!!e.shouldUnregister,f.state.next({submitCount:se.keepSubmitCount?n.submitCount:0,isDirty:Re?!1:se.keepDirty?n.isDirty:!!(se.keepDefaultValues&&!Uo(q,s)),isSubmitted:se.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Re?{}:se.keepDirtyValues?se.keepDefaultValues&&i?Yp(s,i):n.dirtyFields:se.keepDefaultValues&&q?Yp(s,q):se.keepDirty?n.dirtyFields:{},touchedFields:se.keepTouched?n.touchedFields:{},errors:se.keepErrors?n.errors:{},isSubmitSuccessful:se.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},an=(q,se)=>gt(Ni(q)?q(i):q,se),Zt=(q,se={})=>{const de=Ve(r,q),Oe=de&&de._f;if(Oe){const Re=Oe.refs?Oe.refs[0]:Oe.ref;Re.focus&&(Re.focus(),se.shouldSelect&&Ni(Re.select)&&Re.select())}},wn=q=>{n={...n,...q}},nn={control:{register:we,unregister:je,getFieldState:ie,handleSubmit:ue,setError:me,_subscribe:lt,_runSchema:j,_focusError:Me,_getWatch:I,_getDirty:C,_setValid:g,_setFieldArray:w,_setDisabledField:ht,_setErrors:A,_getFieldArray:O,_reset:gt,_resetDefaultValues:()=>Ni(e.defaultValues)&&e.defaultValues().then(q=>{an(q,e.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:P,_disableForm:Fe,_subjects:f,_proxyFormState:d,get _fields(){return r},get _formValues(){return i},get _state(){return o},set _state(q){o=q},get _defaultValues(){return s},get _names(){return l},set _names(q){l=q},get _formState(){return n},get _options(){return e},set _options(q){e={...e,...q}}},subscribe:ut,trigger:L,register:we,handleSubmit:ue,watch:Ie,setValue:H,getValues:W,reset:an,resetField:Tt,clearErrors:oe,unregister:je,setError:me,setFocus:Zt,getFieldState:ie};return{...nn,formControl:nn}}function SN(t={}){const e=D.useRef(void 0),n=D.useRef(void 0),[r,s]=D.useState({isDirty:!1,isValidating:!1,isLoading:Ni(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Ni(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!Ni(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...l}=Rze(t);e.current={...l,formState:r}}const i=e.current.control;return i._options=t,MO(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),D.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),D.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),D.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),D.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),D.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==r.isDirty&&i._subjects.state.next({isDirty:o})}},[i,r.isDirty]),D.useEffect(()=>{t.values&&!Uo(t.values,n.current)?(i._reset(t.values,{keepFieldsRef:!0,...i._options.resetOptions}),n.current=t.values,s(o=>({...o}))):i._resetDefaultValues()},[i,t.values]),D.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=PQ(r,i),e.current}const cB=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Ve(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},FQ=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?cB(r.ref,n,t):r.refs&&r.refs.forEach(s=>cB(s,n,t))}},Mze=(t,e)=>{e.shouldUseNativeValidation&&FQ(t,e);const n={};for(const r in t){const s=Ve(e.fields,r),i=Object.assign(t[r]||{},{ref:s&&s.ref});if(Dze(e.names||Object.keys(t),r)){const o=Object.assign({},Ve(n,r));gn(o,"root",i),gn(n,r,o)}else gn(n,r,i)}return n},Dze=(t,e)=>t.some(n=>n.startsWith(e+"."));var Lze=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,i=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:i,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(d){return d.errors.forEach(function(h){return t.push(h)})}),e){var c=n[o].types,u=c&&c[r.code];n[o]=kQ(o,e,n,s,u?[].concat(u,r.message):r.message)}t.shift()}return n},EN=function(t,e,n){return n===void 0&&(n={}),function(r,s,i){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return i.shouldUseNativeValidation&&FQ({},i),{errors:{},values:n.raw?r:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:Mze(Lze(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}};const AN=yze,VQ=N.createContext({}),nt=({...t})=>a.jsx(VQ.Provider,{value:{name:t.name},children:a.jsx(wze,{...t})}),TN=()=>{const t=N.useContext(VQ),e=N.useContext(BQ),{getFieldState:n,formState:r}=NN(),s=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=e;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...s}},BQ=N.createContext({}),et=N.forwardRef(({className:t,...e},n)=>{const r=N.useId();return a.jsx(BQ.Provider,{value:{id:r},children:a.jsx("div",{ref:n,className:pe("space-y-2",t),...e})})});et.displayName="FormItem";const rt=N.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:s}=TN();return a.jsx(J,{ref:n,className:pe(r&&"text-destructive",t),htmlFor:s,...e})});rt.displayName="FormLabel";const tt=N.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:s,formMessageId:i}=TN();return a.jsx(Gd,{ref:e,id:r,"aria-describedby":n?`${s} ${i}`:`${s}`,"aria-invalid":!!n,...t})});tt.displayName="FormControl";const dd=N.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=TN();return a.jsx("p",{ref:n,id:r,className:pe("text-sm text-muted-foreground",t),...e})});dd.displayName="FormDescription";const st=N.forwardRef(({className:t,children:e,...n},r)=>{const{error:s,formMessageId:i}=TN(),o=s?String(s==null?void 0:s.message):e;return o?a.jsx("p",{ref:r,id:i,className:pe("text-sm font-medium text-destructive",t),...n,children:o}):null});st.displayName="FormMessage";function $ze({form:t}){return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(nt,{control:t.control,name:"employee_number",render:({field:e})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Employee No *"}),a.jsx(tt,{children:a.jsx(K,{placeholder:"EMP001",...e})}),a.jsx(st,{})]})}),a.jsx(nt,{control:t.control,name:"nrc_number",render:({field:e})=>a.jsxs(et,{children:[a.jsx(rt,{children:"NRC/ID Number"}),a.jsx(tt,{children:a.jsx(K,{placeholder:"123456/78/1",...e})}),a.jsx(st,{})]})}),a.jsx(nt,{control:t.control,name:"tpin",render:({field:e})=>a.jsxs(et,{children:[a.jsx(rt,{children:"TPIN"}),a.jsx(tt,{children:a.jsx(K,{placeholder:"1234567890",maxLength:10,...e})}),a.jsx(st,{})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(nt,{control:t.control,name:"napsa_number",render:({field:e})=>a.jsxs(et,{children:[a.jsx(rt,{children:"NAPSA No"}),a.jsx(tt,{children:a.jsx(K,{...e})}),a.jsx(st,{})]})}),a.jsx(nt,{control:t.control,name:"nhima_number",render:({field:e})=>a.jsxs(et,{children:[a.jsx(rt,{children:"NHIMA No"}),a.jsx(tt,{children:a.jsx(K,{...e})}),a.jsx(st,{})]})})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Personal Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(nt,{control:t.control,name:"full_name",render:({field:e})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Full Name *"}),a.jsx(tt,{children:a.jsx(K,{placeholder:"John Doe",...e})}),a.jsx(st,{})]})}),a.jsx(nt,{control:t.control,name:"date_of_birth",render:({field:e})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Date of Birth"}),a.jsx(tt,{children:a.jsx(K,{type:"date",...e})}),a.jsx(st,{})]})}),a.jsx(nt,{control:t.control,name:"gender",render:({field:e})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Gender"}),a.jsxs(It,{onValueChange:e.onChange,value:e.value,children:[a.jsx(tt,{children:a.jsx(Et,{children:a.jsx(kt,{placeholder:"Select gender"})})}),a.jsxs(At,{children:[a.jsx(be,{value:"male",children:"Male"}),a.jsx(be,{value:"female",children:"Female"}),a.jsx(be,{value:"other",children:"Other"})]})]}),a.jsx(st,{})]})}),a.jsx(nt,{control:t.control,name:"nationality",render:({field:e})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Nationality"}),a.jsx(tt,{children:a.jsx(K,{placeholder:"Zambian",...e})}),a.jsx(st,{})]})}),a.jsx(nt,{control:t.control,name:"marital_status",render:({field:e})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Marital Status"}),a.jsxs(It,{onValueChange:e.onChange,value:e.value,children:[a.jsx(tt,{children:a.jsx(Et,{children:a.jsx(kt,{placeholder:"Select status"})})}),a.jsxs(At,{children:[a.jsx(be,{value:"single",children:"Single"}),a.jsx(be,{value:"married",children:"Married"}),a.jsx(be,{value:"divorced",children:"Divorced"}),a.jsx(be,{value:"widowed",children:"Widowed"})]})]}),a.jsx(st,{})]})}),a.jsx(nt,{control:t.control,name:"phone",render:({field:e})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Phone"}),a.jsx(tt,{children:a.jsx(K,{placeholder:"+260 9X XXX XXXX",...e})}),a.jsx(st,{})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 mt-4",children:[a.jsx(nt,{control:t.control,name:"address",render:({field:e})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Address"}),a.jsx(tt,{children:a.jsx(K,{placeholder:"123 Main Street, Lusaka",...e})}),a.jsx(st,{})]})}),a.jsx(nt,{control:t.control,name:"email",render:({field:e})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Email (for payslips)"}),a.jsx(tt,{children:a.jsx(K,{type:"email",placeholder:"john.doe@example.com",...e})}),a.jsx(st,{})]})})]})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Organization"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsx(nt,{control:t.control,name:"department",render:({field:e})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Department"}),a.jsx(tt,{children:a.jsx(K,{placeholder:"Finance",...e})}),a.jsx(st,{})]})}),a.jsx(nt,{control:t.control,name:"division",render:({field:e})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Division"}),a.jsx(tt,{children:a.jsx(K,{placeholder:"Operations",...e})}),a.jsx(st,{})]})}),a.jsx(nt,{control:t.control,name:"position",render:({field:e})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Job Title"}),a.jsx(tt,{children:a.jsx(K,{placeholder:"Accountant",...e})}),a.jsx(st,{})]})}),a.jsx(nt,{control:t.control,name:"job_grade",render:({field:e})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Grade"}),a.jsx(tt,{children:a.jsx(K,{placeholder:"Grade 5",...e})}),a.jsx(st,{})]})}),a.jsx(nt,{control:t.control,name:"cost_centre",render:({field:e})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Cost Centre"}),a.jsx(tt,{children:a.jsx(K,{placeholder:"CC001",...e})}),a.jsx(st,{})]})})]})]})]})}const Fze=Yd("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Cm=N.forwardRef(({className:t,variant:e,...n},r)=>a.jsx("div",{ref:r,role:"alert",className:pe(Fze({variant:e}),t),...n}));Cm.displayName="Alert";const UQ=N.forwardRef(({className:t,...e},n)=>a.jsx("h5",{ref:n,className:pe("mb-1 font-medium leading-none tracking-tight",t),...e}));UQ.displayName="AlertTitle";const Pm=N.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:pe("text-sm [&_p]:leading-relaxed",t),...e}));Pm.displayName="AlertDescription";function Vze({form:t}){const e=t.watch("contract_type"),n=e==="consultant";return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(nt,{control:t.control,name:"contract_type",render:({field:r})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Employment Type *"}),a.jsxs(It,{onValueChange:r.onChange,value:r.value,children:[a.jsx(tt,{children:a.jsx(Et,{children:a.jsx(kt,{placeholder:"Select type"})})}),a.jsxs(At,{children:[a.jsx(be,{value:"permanent",children:"Permanent"}),a.jsx(be,{value:"fixed-term",children:"Fixed-Term Contract"}),a.jsx(be,{value:"temporary",children:"Temporary"}),a.jsx(be,{value:"internship",children:"Internship"}),a.jsx(be,{value:"consultant",children:"Consultant"})]})]}),a.jsx(st,{})]})}),a.jsx(nt,{control:t.control,name:"employment_status",render:({field:r})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Status"}),a.jsxs(It,{onValueChange:r.onChange,value:r.value||"active",children:[a.jsx(tt,{children:a.jsx(Et,{children:a.jsx(kt,{})})}),a.jsxs(At,{children:[a.jsx(be,{value:"active",children:"Active"}),a.jsx(be,{value:"inactive",children:"Inactive"}),a.jsx(be,{value:"terminated",children:"Terminated"}),a.jsx(be,{value:"on_leave",children:"On Leave"})]})]}),a.jsx(st,{})]})})]}),n&&a.jsxs(Cm,{children:[a.jsx(xa,{className:"h-4 w-4"}),a.jsxs(Pm,{children:[a.jsx("strong",{children:"Consultant:"})," PAYE, NAPSA, and NHIMA will be disabled. Withholding Tax (WHT) will apply based on consultant type."]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(nt,{control:t.control,name:"employment_date",render:({field:r})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Engagement Date *"}),a.jsx(tt,{children:a.jsx(K,{type:"date",...r})}),a.jsx(st,{})]})}),a.jsx(nt,{control:t.control,name:"contract_end_date",render:({field:r})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Contract End Date"}),a.jsx(tt,{children:a.jsx(K,{type:"date",...r})}),a.jsx(st,{})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(nt,{control:t.control,name:"currency",render:({field:r})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Currency"}),a.jsxs(It,{onValueChange:r.onChange,value:r.value||"ZMW",children:[a.jsx(tt,{children:a.jsx(Et,{children:a.jsx(kt,{})})}),a.jsxs(At,{children:[a.jsx(be,{value:"ZMW",children:"ZMW - Zambian Kwacha"}),a.jsx(be,{value:"USD",children:"USD - US Dollar"}),a.jsx(be,{value:"EUR",children:"EUR - Euro"}),a.jsx(be,{value:"GBP",children:"GBP - British Pound"})]})]}),a.jsx(st,{})]})}),a.jsx(nt,{control:t.control,name:"pay_point",render:({field:r})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Pay Point"}),a.jsx(tt,{children:a.jsx(K,{placeholder:"Head Office",...r})}),a.jsx(st,{})]})})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Bank Details"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(nt,{control:t.control,name:"bank_name",render:({field:r})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Bank Name"}),a.jsx(tt,{children:a.jsx(K,{placeholder:"Zanaco",...r})}),a.jsx(st,{})]})}),a.jsx(nt,{control:t.control,name:"bank_branch",render:({field:r})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Branch"}),a.jsx(tt,{children:a.jsx(K,{placeholder:"Cairo Road",...r})}),a.jsx(st,{})]})}),a.jsx(nt,{control:t.control,name:"bank_account_number",render:({field:r})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Account Number"}),a.jsx(tt,{children:a.jsx(K,{placeholder:"1234567890",...r})}),a.jsx(st,{})]})})]})]}),(e==="fixed-term"||e==="consultant")&&a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Contract Options"}),a.jsx(nt,{control:t.control,name:"has_gratuity",render:({field:r})=>a.jsxs(et,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(rt,{className:"text-base",children:"Attracts Gratuity"}),a.jsx(dd,{children:"Enable if this contract includes gratuity payment at end"})]}),a.jsx(tt,{children:a.jsx(Zr,{checked:r.value,onCheckedChange:r.onChange})})]})}),t.watch("has_gratuity")&&a.jsx("div",{className:"mt-4",children:a.jsx(nt,{control:t.control,name:"gratuity_rate",render:({field:r})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Gratuity Rate (%)"}),a.jsx(tt,{children:a.jsx(K,{type:"number",step:"0.01",placeholder:"25",...r})}),a.jsx(dd,{children:"Standard rate is 25% of total basic pay earned"}),a.jsx(st,{})]})})})]})]})}function Bze({form:t}){const e=Number(t.watch("basic_salary"))||0,n=Number(t.watch("housing_allowance"))||0,r=Number(t.watch("transport_allowance"))||0,s=Number(t.watch("other_allowances"))||0,i=e+n+r+s;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(nt,{control:t.control,name:"rate_type",render:({field:o})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Rate Type"}),a.jsxs(It,{onValueChange:o.onChange,value:o.value||"monthly",children:[a.jsx(tt,{children:a.jsx(Et,{children:a.jsx(kt,{})})}),a.jsxs(At,{children:[a.jsx(be,{value:"monthly",children:"Monthly"}),a.jsx(be,{value:"daily",children:"Daily"}),a.jsx(be,{value:"hourly",children:"Hourly"})]})]}),a.jsx(st,{})]})}),a.jsx(nt,{control:t.control,name:"basic_salary",render:({field:o})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Basic Pay (ZMW) *"}),a.jsx(tt,{children:a.jsx(K,{type:"number",step:"0.01",placeholder:"5000.00",...o})}),a.jsx(st,{})]})}),a.jsx(nt,{control:t.control,name:"pay_rate",render:({field:o})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Pay Rate"}),a.jsx(tt,{children:a.jsx(K,{type:"number",step:"0.01",placeholder:"Rate per period",...o})}),a.jsx(dd,{children:"Optional alternative rate"}),a.jsx(st,{})]})})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Allowances"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(nt,{control:t.control,name:"housing_allowance",render:({field:o})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Housing Allowance (ZMW)"}),a.jsx(tt,{children:a.jsx(K,{type:"number",step:"0.01",placeholder:"1500.00",...o})}),a.jsx(st,{})]})}),a.jsx(nt,{control:t.control,name:"transport_allowance",render:({field:o})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Transport Allowance (ZMW)"}),a.jsx(tt,{children:a.jsx(K,{type:"number",step:"0.01",placeholder:"500.00",...o})}),a.jsx(st,{})]})}),a.jsx(nt,{control:t.control,name:"other_allowances",render:({field:o})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Other Allowances (ZMW)"}),a.jsx(tt,{children:a.jsx(K,{type:"number",step:"0.01",placeholder:"0.00",...o})}),a.jsx(dd,{children:"Meal, medical, or other fixed allowances"}),a.jsx(st,{})]})})]})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Overtime Rates"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.jsx(nt,{control:t.control,name:"overtime_rate_multiplier",render:({field:o})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Overtime Multiplier"}),a.jsx(tt,{children:a.jsx(K,{type:"number",step:"0.1",placeholder:"1.5",...o})}),a.jsx(dd,{children:"e.g., 1.5 = time and a half"}),a.jsx(st,{})]})})})]}),a.jsxs(X,{className:"bg-muted/50",children:[a.jsx(ee,{children:a.jsx(ne,{className:"text-lg",children:"Pay Summary"})}),a.jsx(re,{children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Basic Salary"}),a.jsx("p",{className:"text-lg font-semibold",children:le(e)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Housing"}),a.jsx("p",{className:"text-lg font-semibold",children:le(n)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Transport"}),a.jsx("p",{className:"text-lg font-semibold",children:le(r)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Gross Salary"}),a.jsx("p",{className:"text-xl font-bold text-primary",children:le(i)})]})]})})]})]})}const Uze=mu({employee_number:Ue().min(1,"Employee number is required"),nrc_number:Ue().optional(),tpin:Ue().optional(),napsa_number:Ue().optional(),nhima_number:Ue().optional(),full_name:Ue().min(1,"Full name is required"),date_of_birth:Ue().optional(),gender:Ue().optional(),nationality:Ue().optional(),marital_status:Ue().optional(),phone:Ue().optional(),address:Ue().optional(),email:Ue().email().optional().or(J7("")),department:Ue().optional(),division:Ue().optional(),position:Ue().optional(),job_grade:Ue().optional(),cost_centre:Ue().optional(),contract_type:Ue().optional(),employment_status:Ue().default("active"),employment_date:Ue().min(1,"Employment date is required"),contract_end_date:Ue().optional(),currency:Ue().default("ZMW"),pay_point:Ue().optional(),bank_name:Ue().optional(),bank_branch:Ue().optional(),bank_account_number:Ue().optional(),has_gratuity:L4().default(!1),gratuity_rate:Ue().optional(),rate_type:Ue().default("monthly"),basic_salary:Ue().min(1,"Basic salary is required"),pay_rate:Ue().optional(),housing_allowance:Ue().optional(),transport_allowance:Ue().optional(),other_allowances:Ue().optional(),overtime_rate_multiplier:Ue().optional(),send_invite:L4().default(!1)});function zze(){const t=Hn(),{data:e}=xu(),{user:n}=ct(),[r,s]=N.useState("personal"),[i,o]=N.useState(!1),l=SN({resolver:EN(Uze),defaultValues:{employment_status:"active",has_gratuity:!1,send_invite:!1,currency:"ZMW",rate_type:"monthly",nationality:"Zambian"}}),c=async h=>{o(!0);try{if(!n){Z.error("You must be logged in");return}const f=await Ke.getPrimaryMembershipByUser(n.id);if(!(f!=null&&f.companyId)){Z.error("No company profile found for your account");return}const m=await jn(ve(te,Y.EMPLOYEES),{employeeNumber:h.employee_number,nrcNumber:h.nrc_number||null,tpin:h.tpin||null,napsaNumber:h.napsa_number||null,nhimaNumber:h.nhima_number||null,fullName:h.full_name,dateOfBirth:h.date_of_birth||null,gender:h.gender||null,nationality:h.nationality||null,maritalStatus:h.marital_status||null,phone:h.phone||null,address:h.address||null,email:h.email||null,department:h.department||null,division:h.division||null,position:h.position||null,jobGrade:h.job_grade||null,costCentre:h.cost_centre||null,contractType:h.contract_type||null,employmentStatus:h.employment_status||"active",employmentDate:h.employment_date,contractEndDate:h.contract_end_date||null,hasGratuity:h.has_gratuity||!1,gratuityRate:h.gratuity_rate?Number(h.gratuity_rate):0,bankName:h.bank_name||null,bankBranch:h.bank_branch||null,bankAccountNumber:h.bank_account_number||null,basicSalary:Number(h.basic_salary),housingAllowance:h.housing_allowance?Number(h.housing_allowance):0,transportAllowance:h.transport_allowance?Number(h.transport_allowance):0,otherAllowances:h.other_allowances?Number(h.other_allowances):0,userId:n.id,companyId:f.companyId,createdAt:ye(),updatedAt:ye()}),b=h.contract_type==="consultant";if(await or(He(te,Y.EMPLOYEE_PAYROLL_PROFILES,`${f.companyId}_${m.id}`),{employeeId:m.id,companyId:f.companyId,rateType:h.rate_type,payRate:h.pay_rate?Number(h.pay_rate):null,overtimeRateMultiplier:h.overtime_rate_multiplier?Number(h.overtime_rate_multiplier):1.5,currency:h.currency,applyPaye:!b,applyNapsa:!b,applyNhima:!b,isConsultant:b,applyWht:b,consultantType:b?"local":null,createdAt:ye(),updatedAt:ye()}),h.send_invite&&h.email)try{await Es.sendInvitation({inviteeName:h.full_name,email:h.email,role:"staff",loginUrl:`${window.location.origin}/auth`})}catch{const x=(e==null?void 0:e.companyName)||"ZedBooks";Z.warning(`Employee created, but invite setup failed for ${x}`)}Z.success("Employee created successfully"),t(`/employees/${m.id}/payroll-setup`)}catch{Z.error("Failed to create employee")}finally{o(!1)}},u=()=>{r==="personal"?s("engagement"):r==="engagement"&&s("pay")},d=()=>{r==="pay"?s("engagement"):r==="engagement"&&s("personal")};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(G,{variant:"ghost",size:"sm",onClick:()=>t("/employees"),children:[a.jsx(No,{className:"h-4 w-4 mr-2"}),"Back"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Add New Employee"}),a.jsx("p",{className:"text-muted-foreground",children:"Complete the onboarding form in 3 steps"})]})]}),a.jsx(AN,{...l,children:a.jsx("form",{onSubmit:l.handleSubmit(c),children:a.jsxs(Yv,{value:r,onValueChange:s,className:"space-y-6",children:[a.jsxs(Qm,{className:"grid w-full grid-cols-3",children:[a.jsxs(ja,{value:"personal",className:"flex items-center gap-2",children:[a.jsx("span",{className:"hidden sm:inline",children:"1."})," Personal Details"]}),a.jsxs(ja,{value:"engagement",className:"flex items-center gap-2",children:[a.jsx("span",{className:"hidden sm:inline",children:"2."})," Engagement"]}),a.jsxs(ja,{value:"pay",className:"flex items-center gap-2",children:[a.jsx("span",{className:"hidden sm:inline",children:"3."})," Pay"]})]}),a.jsx(X,{children:a.jsxs(re,{className:"pt-6",children:[a.jsx(Na,{value:"personal",className:"mt-0",children:a.jsx($ze,{form:l})}),a.jsx(Na,{value:"engagement",className:"mt-0",children:a.jsx(Vze,{form:l})}),a.jsx(Na,{value:"pay",className:"mt-0",children:a.jsx(Bze,{form:l})})]})}),r==="pay"&&a.jsxs(X,{children:[a.jsxs(ee,{children:[a.jsx(ne,{children:"Employee Invite"}),a.jsx(jt,{children:"Send login credentials to the employee"})]}),a.jsx(re,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ad,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs("div",{children:[a.jsx(J,{children:"Send Invite Email"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Send login credentials to employee's email"})]})]}),a.jsx(Zr,{checked:l.watch("send_invite"),onCheckedChange:h=>l.setValue("send_invite",h),disabled:!l.watch("email")})]})})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx(G,{type:"button",variant:"outline",onClick:d,disabled:r==="personal",children:"Previous"}),a.jsx("div",{className:"flex gap-2",children:r!=="pay"?a.jsxs(G,{type:"button",onClick:u,children:["Next",a.jsx(pU,{className:"h-4 w-4 ml-1"})]}):a.jsxs(G,{type:"submit",disabled:i,children:[a.jsx(bd,{className:"h-4 w-4 mr-2"}),i?"Saving...":"Save & Setup Payroll"]})})]})]})})})]})}const qze=mu({full_name:Ue().min(2,"Name must be at least 2 characters"),employee_number:Ue().min(1,"Employee number is required"),position:Ue().optional(),department:Ue().optional(),email:Ue().email().optional().or(J7("")),phone:Ue().optional(),basic_salary:Ue().min(1,"Basic salary is required"),housing_allowance:Ue().optional(),transport_allowance:Ue().optional(),other_allowances:Ue().optional(),employment_date:Ue().min(1,"Employment date is required"),employment_status:eH(["active","inactive","terminated"]),tpin:Ue().optional(),napsa_number:Ue().optional(),nhima_number:Ue().optional(),bank_name:Ue().optional(),bank_branch:Ue().optional(),bank_account_number:Ue().optional()}),Wze=t=>{if(!t)return"";if(typeof t=="string")return t.slice(0,10);if(t instanceof Date)return t.toISOString().slice(0,10);if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString().slice(0,10)}return""};function Hze(){const t=Hn(),{id:e}=zm(),{user:n}=ct(),{data:r,isLoading:s}=Ne({queryKey:["employee",e,n==null?void 0:n.id],queryFn:async()=>{if(!e||!n)return null;const l=await Ke.getPrimaryMembershipByUser(n.id);if(!(l!=null&&l.companyId))return null;const c=He(te,Y.EMPLOYEES,e),u=await _a(c);if(!u.exists())return null;const d=u.data(),h=d.companyId??d.company_id;return h&&h!==l.companyId?null:{id:u.id,...d}},enabled:!!(e&&n)}),i=SN({resolver:EN(qze)});N.useEffect(()=>{r&&i.reset({full_name:String(r.fullName??r.full_name??""),employee_number:String(r.employeeNumber??r.employee_number??""),position:String(r.position??""),department:String(r.department??""),email:String(r.email??""),phone:String(r.phone??""),basic_salary:String(r.basicSalary??r.basic_salary??""),housing_allowance:String(r.housingAllowance??r.housing_allowance??0),transport_allowance:String(r.transportAllowance??r.transport_allowance??0),other_allowances:String(r.otherAllowances??r.other_allowances??0),employment_date:Wze(r.employmentDate??r.employment_date),employment_status:String(r.employmentStatus??r.employment_status??"active"),tpin:String(r.tpin??""),napsa_number:String(r.napsaNumber??r.napsa_number??""),nhima_number:String(r.nhimaNumber??r.nhima_number??""),bank_name:String(r.bankName??r.bank_name??""),bank_branch:String(r.bankBranch??r.bank_branch??""),bank_account_number:String(r.bankAccountNumber??r.bank_account_number??"")})},[r,i]);const o=async l=>{try{if(!e||!n){Z.error("You must be logged in");return}const c=await Ke.getPrimaryMembershipByUser(n.id);if(!(c!=null&&c.companyId)){Z.error("No company profile found for your account");return}await or(He(te,Y.EMPLOYEES,e),{companyId:c.companyId,employeeNumber:l.employee_number,fullName:l.full_name,position:l.position||null,department:l.department||null,email:l.email||null,phone:l.phone||null,basicSalary:Number(l.basic_salary),housingAllowance:l.housing_allowance?Number(l.housing_allowance):0,transportAllowance:l.transport_allowance?Number(l.transport_allowance):0,otherAllowances:l.other_allowances?Number(l.other_allowances):0,employmentDate:l.employment_date,employmentStatus:l.employment_status,tpin:l.tpin||null,napsaNumber:l.napsa_number||null,nhimaNumber:l.nhima_number||null,bankName:l.bank_name||null,bankBranch:l.bank_branch||null,bankAccountNumber:l.bank_account_number||null,updatedAt:ye()},{merge:!0}),Z.success("Employee updated successfully"),t("/employees")}catch{Z.error("Failed to update employee")}};return s?a.jsx("div",{children:"Loading..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(G,{variant:"ghost",size:"sm",onClick:()=>t("/employees"),children:[a.jsx(No,{className:"h-4 w-4 mr-2"}),"Back"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Edit Employee"}),a.jsx("p",{className:"text-muted-foreground",children:"Update employee information"})]})]}),a.jsx(AN,{...i,children:a.jsxs("form",{onSubmit:i.handleSubmit(o),className:"space-y-6",children:[a.jsxs("div",{className:"border rounded-lg p-6 space-y-6",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Personal Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(nt,{control:i.control,name:"full_name",render:({field:l})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Full Name *"}),a.jsx(tt,{children:a.jsx(K,{...l})}),a.jsx(st,{})]})}),a.jsx(nt,{control:i.control,name:"employee_number",render:({field:l})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Employee Number *"}),a.jsx(tt,{children:a.jsx(K,{...l})}),a.jsx(st,{})]})}),a.jsx(nt,{control:i.control,name:"position",render:({field:l})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Position"}),a.jsx(tt,{children:a.jsx(K,{...l})}),a.jsx(st,{})]})}),a.jsx(nt,{control:i.control,name:"department",render:({field:l})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Department"}),a.jsx(tt,{children:a.jsx(K,{...l})}),a.jsx(st,{})]})}),a.jsx(nt,{control:i.control,name:"email",render:({field:l})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Email"}),a.jsx(tt,{children:a.jsx(K,{type:"email",...l})}),a.jsx(st,{})]})}),a.jsx(nt,{control:i.control,name:"phone",render:({field:l})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Phone"}),a.jsx(tt,{children:a.jsx(K,{...l})}),a.jsx(st,{})]})}),a.jsx(nt,{control:i.control,name:"employment_date",render:({field:l})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Employment Date *"}),a.jsx(tt,{children:a.jsx(K,{type:"date",...l})}),a.jsx(st,{})]})}),a.jsx(nt,{control:i.control,name:"employment_status",render:({field:l})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Employment Status *"}),a.jsxs(It,{onValueChange:l.onChange,defaultValue:l.value,children:[a.jsx(tt,{children:a.jsx(Et,{children:a.jsx(kt,{})})}),a.jsxs(At,{children:[a.jsx(be,{value:"active",children:"Active"}),a.jsx(be,{value:"inactive",children:"Inactive"}),a.jsx(be,{value:"terminated",children:"Terminated"})]})]}),a.jsx(st,{})]})})]})]}),a.jsxs("div",{className:"border rounded-lg p-6 space-y-6",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Salary Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(nt,{control:i.control,name:"basic_salary",render:({field:l})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Basic Salary (ZMW) *"}),a.jsx(tt,{children:a.jsx(K,{type:"number",step:"0.01",...l})}),a.jsx(st,{})]})}),a.jsx(nt,{control:i.control,name:"housing_allowance",render:({field:l})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Housing Allowance (ZMW)"}),a.jsx(tt,{children:a.jsx(K,{type:"number",step:"0.01",...l})}),a.jsx(st,{})]})}),a.jsx(nt,{control:i.control,name:"transport_allowance",render:({field:l})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Transport Allowance (ZMW)"}),a.jsx(tt,{children:a.jsx(K,{type:"number",step:"0.01",...l})}),a.jsx(st,{})]})}),a.jsx(nt,{control:i.control,name:"other_allowances",render:({field:l})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Other Allowances (ZMW)"}),a.jsx(tt,{children:a.jsx(K,{type:"number",step:"0.01",...l})}),a.jsx(st,{})]})})]})]}),a.jsxs("div",{className:"border rounded-lg p-6 space-y-6",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Statutory Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(nt,{control:i.control,name:"tpin",render:({field:l})=>a.jsxs(et,{children:[a.jsx(rt,{children:"TPIN"}),a.jsx(tt,{children:a.jsx(K,{...l})}),a.jsx(st,{})]})}),a.jsx(nt,{control:i.control,name:"napsa_number",render:({field:l})=>a.jsxs(et,{children:[a.jsx(rt,{children:"NAPSA Number"}),a.jsx(tt,{children:a.jsx(K,{...l})}),a.jsx(st,{})]})}),a.jsx(nt,{control:i.control,name:"nhima_number",render:({field:l})=>a.jsxs(et,{children:[a.jsx(rt,{children:"NHIMA Number"}),a.jsx(tt,{children:a.jsx(K,{...l})}),a.jsx(st,{})]})})]})]}),a.jsxs("div",{className:"border rounded-lg p-6 space-y-6",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Bank Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(nt,{control:i.control,name:"bank_name",render:({field:l})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Bank Name"}),a.jsx(tt,{children:a.jsx(K,{...l})}),a.jsx(st,{})]})}),a.jsx(nt,{control:i.control,name:"bank_branch",render:({field:l})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Branch"}),a.jsx(tt,{children:a.jsx(K,{...l})}),a.jsx(st,{})]})}),a.jsx(nt,{control:i.control,name:"bank_account_number",render:({field:l})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Account Number"}),a.jsx(tt,{children:a.jsx(K,{...l})}),a.jsx(st,{})]})})]})]}),a.jsxs("div",{className:"flex justify-end gap-4",children:[a.jsx(G,{type:"button",variant:"outline",onClick:()=>t("/employees"),children:"Cancel"}),a.jsx(G,{type:"submit",children:"Update Employee"})]})]})})]})}const Kze=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n};function Gze(){const t=Hn(),{user:e}=ct(),[n,r]=N.useState(null),[s,i]=N.useState(!1),o=()=>{const d=["full_name","employee_number","position","department","email","phone","basic_salary","housing_allowance","transport_allowance","other_allowances","employment_date","employment_status","tpin","napsa_number","nhima_number","bank_name","bank_branch","bank_account_number"],h=["John Doe","EMP001","Software Engineer","IT","john@example.com","+260971234567","15000","3000","1000","500","2024-01-01","active","1234567890","NAPSA123","NHIMA123","Zanaco","Cairo Road","1234567890"],f=[d.join(","),h.join(",")].join(`
`),m=new Blob([f],{type:"text/csv"}),b=window.URL.createObjectURL(m),g=document.createElement("a");g.href=b,g.download="employee_template.csv",g.click(),window.URL.revokeObjectURL(b),Z.success("Template downloaded")},l=d=>{d.target.files&&d.target.files[0]&&r(d.target.files[0])},c=d=>{const h=d.split(`
`).filter(m=>m.trim()),f=h[0].split(",").map(m=>m.trim());return h.slice(1).map(m=>{const b=m.split(",").map(x=>x.trim()),g={};return f.forEach((x,w)=>{g[x]=b[w]||null}),g})},u=async()=>{if(!n){Z.error("Please select a file");return}i(!0);try{if(!e)throw new Error("Not authenticated");const d=await Ke.getPrimaryMembershipByUser(e.id);if(!(d!=null&&d.companyId))throw new Error("No company profile found for your account");const h=await n.text(),m=c(h).map(x=>({userId:e.id,companyId:d.companyId,fullName:x.full_name||"",employeeNumber:x.employee_number||"",position:x.position||null,department:x.department||null,email:x.email||null,phone:x.phone||null,basicSalary:x.basic_salary?Number(x.basic_salary):0,housingAllowance:x.housing_allowance?Number(x.housing_allowance):0,transportAllowance:x.transport_allowance?Number(x.transport_allowance):0,otherAllowances:x.other_allowances?Number(x.other_allowances):0,employmentDate:x.employment_date||null,employmentStatus:x.employment_status||"active",tpin:x.tpin||null,napsaNumber:x.napsa_number||null,nhimaNumber:x.nhima_number||null,bankName:x.bank_name||null,bankBranch:x.bank_branch||null,bankAccountNumber:x.bank_account_number||null,createdAt:ye(),updatedAt:ye()})),b=ve(te,Y.EMPLOYEES),g=Kze(m,400);for(const x of g){const w=ml(te);x.forEach(y=>{w.set(He(b),y)}),await w.commit()}Z.success(`Successfully uploaded ${m.length} employees`),t("/employees")}catch{Z.error("Failed to upload employees. Please check your CSV format.")}finally{i(!1)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(G,{variant:"ghost",size:"sm",onClick:()=>t("/employees"),children:[a.jsx(No,{className:"h-4 w-4 mr-2"}),"Back"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Bulk Upload Employees"}),a.jsx("p",{className:"text-muted-foreground",children:"Upload multiple employees using a CSV file"})]})]}),a.jsxs("div",{className:"border rounded-lg p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Instructions"}),a.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-muted-foreground",children:[a.jsx("li",{children:"Download the CSV template below"}),a.jsx("li",{children:"Fill in your employee data following the template format"}),a.jsx("li",{children:"Make sure all required fields are filled (full_name, employee_number, basic_salary, employment_date)"}),a.jsx("li",{children:"Save your file as CSV format"}),a.jsx("li",{children:"Upload your completed CSV file"})]})]}),a.jsx("div",{className:"flex gap-4",children:a.jsxs(G,{variant:"outline",onClick:o,children:[a.jsx(ys,{className:"mr-2 h-4 w-4"}),"Download Template"]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Upload CSV File"}),a.jsx(K,{type:"file",accept:".csv",onChange:l,disabled:s})]}),n&&a.jsxs("div",{className:"text-sm text-muted-foreground",children:["Selected file: ",n.name]})]}),a.jsxs("div",{className:"flex justify-end gap-4",children:[a.jsx(G,{variant:"outline",onClick:()=>t("/employees"),children:"Cancel"}),a.jsxs(G,{onClick:u,disabled:s||!n,children:[a.jsx(So,{className:"mr-2 h-4 w-4"}),s?"Uploading...":"Upload Employees"]})]})]})]})}const Yze=t=>t==="pending_approval"?"Pending Approval":t==="final"?"Final":t,Qze=t=>["completed","approved","final"].includes(t)?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":t==="pending_approval"?"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";function Xze(){const t=Hn(),{user:e}=ct(),{data:n,isLoading:r}=Ne({queryKey:["payrollRuns",e==null?void 0:e.id],queryFn:async()=>{if(!e)return[];const s=await Ke.getPrimaryMembershipByUser(e.id);if(!(s!=null&&s.companyId))return[];const i=ve(te,Y.PAYROLL_RUNS);return(await $e(Ce(i,ge("companyId","==",s.companyId),oj("runDate","desc")))).docs.map(l=>{const c=l.data();return{id:l.id,runDate:String(c.runDate??c.run_date??""),periodStart:String(c.periodStart??c.period_start??""),periodEnd:String(c.periodEnd??c.period_end??""),totalGross:Number(c.totalGross??c.total_gross??0),totalDeductions:Number(c.totalDeductions??c.total_deductions??0),totalNet:Number(c.totalNet??c.total_net??0),status:String(c.status??c.payrollStatus??c.payroll_status??"draft")}})},enabled:!!e});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Payroll"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage payroll runs and employee payments"})]}),a.jsxs(G,{onClick:()=>t("/payroll/new"),children:[a.jsx(xn,{className:"mr-2 h-4 w-4"}),"New Payroll Run"]})]}),r?a.jsx("div",{children:"Loading..."}):a.jsx("div",{className:"border rounded-lg",children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Run Date"}),a.jsx(U,{children:"Period"}),a.jsx(U,{children:"Total Gross"}),a.jsx(U,{children:"Total Deductions"}),a.jsx(U,{children:"Total Net"}),a.jsx(U,{children:"Status"}),a.jsx(U,{className:"text-right",children:"Actions"})]})}),a.jsxs(Wt,{children:[n==null?void 0:n.map(s=>a.jsxs(_e,{children:[a.jsx(B,{className:"font-medium",children:s.runDate?vt(new Date(s.runDate),"dd MMM yyyy"):"-"}),a.jsxs(B,{children:[s.periodStart?vt(new Date(s.periodStart),"dd MMM"):"-"," -"," ",s.periodEnd?vt(new Date(s.periodEnd),"dd MMM yyyy"):"-"]}),a.jsx(B,{children:le(s.totalGross)}),a.jsx(B,{children:le(s.totalDeductions)}),a.jsx(B,{children:le(s.totalNet)}),a.jsx(B,{children:a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${Qze(s.status)}`,children:Yze(s.status)})}),a.jsx(B,{className:"text-right",children:s.status==="pending_approval"?a.jsx(G,{variant:"default",size:"sm",onClick:()=>t(`/payroll/${s.id}/approve`),children:"Review & Approve"}):a.jsx(G,{variant:"ghost",size:"sm",onClick:()=>t(`/payroll/${s.id}`),children:"View"})})]},s.id)),(n==null?void 0:n.length)===0&&a.jsx(_e,{children:a.jsx(B,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No payroll runs found. Create your first payroll run to get started."})})]})]})})]})}const Jn=lk,Hr=NW,Zze=ck,zQ=N.forwardRef(({className:t,...e},n)=>a.jsx(Wv,{ref:n,className:pe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));zQ.displayName=Wv.displayName;const zn=N.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(Zze,{children:[a.jsx(zQ,{}),a.jsxs(Hv,{ref:r,className:pe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,a.jsxs(bj,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[a.jsx(vP,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));zn.displayName=Hv.displayName;const qn=({className:t,...e})=>a.jsx("div",{className:pe("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});qn.displayName="DialogHeader";const CN=({className:t,...e})=>a.jsx("div",{className:pe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});CN.displayName="DialogFooter";const Wn=N.forwardRef(({className:t,...e},n)=>a.jsx(Kv,{ref:n,className:pe("text-lg font-semibold leading-none tracking-tight",t),...e}));Wn.displayName=Kv.displayName;const bu=N.forwardRef(({className:t,...e},n)=>a.jsx(Gv,{ref:n,className:pe("text-sm text-muted-foreground",t),...e}));bu.displayName=Gv.displayName;function Jze({employees:t,additions:e,onAddition:n,onRemove:r}){const[s,i]=N.useState(!1),[o,l]=N.useState("earning"),[c,u]=N.useState(""),[d,h]=N.useState(""),[f,m]=N.useState(""),[b,g]=N.useState(""),[x,w]=N.useState(""),[y,A]=N.useState(""),T=()=>{u(""),h(""),m(""),g(""),w(""),A("")},v=()=>{if(!c)return;let j;if(o==="overtime"){const p=Number(x)*Number(y);j={employee_id:c,type:o,name:d||"Overtime",amount:p}}else if(o==="advance"){const p=Number(f),E=Number(b)||1,P=Math.ceil(p/E);j={employee_id:c,type:o,name:d||"Advance",amount:P,total_amount:p,months_to_pay:E,monthly_deduction:P}}else j={employee_id:c,type:o,name:d||(o==="bonus"?"Bonus":"Additional Earning"),amount:Number(f)};n(j),T(),i(!1)},S=j=>{switch(j){case"earning":return a.jsx(Qn,{className:"h-4 w-4"});case"bonus":return a.jsx(UR,{className:"h-4 w-4"});case"overtime":return a.jsx(ba,{className:"h-4 w-4"});case"advance":return a.jsx(xd,{className:"h-4 w-4"});default:return null}};return a.jsxs(Jn,{open:s,onOpenChange:i,children:[a.jsx(Hr,{asChild:!0,children:a.jsxs(G,{variant:"outline",size:"sm",children:[a.jsx(xn,{className:"h-4 w-4 mr-2"}),"Add Earnings/Deductions"]})}),a.jsxs(zn,{className:"max-w-md",children:[a.jsxs(qn,{children:[a.jsx(Wn,{children:"Add Payroll Items"}),a.jsx(bu,{children:"Assign earnings, bonuses, overtime, or advances to employees"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Type"}),a.jsxs(It,{value:o,onValueChange:j=>l(j),children:[a.jsx(Et,{children:a.jsx(kt,{})}),a.jsxs(At,{children:[a.jsx(be,{value:"earning",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Qn,{className:"h-4 w-4"}),"Custom Earning"]})}),a.jsx(be,{value:"bonus",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(UR,{className:"h-4 w-4"}),"Bonus"]})}),a.jsx(be,{value:"overtime",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ba,{className:"h-4 w-4"}),"Overtime"]})}),a.jsx(be,{value:"advance",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(xd,{className:"h-4 w-4"}),"Advance (Deduction)"]})})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Employee"}),a.jsxs(It,{value:c,onValueChange:u,children:[a.jsx(Et,{children:a.jsx(kt,{placeholder:"Select employee"})}),a.jsx(At,{children:t.map(j=>a.jsxs(be,{value:j.id,children:[j.full_name," (",j.employee_number,")"]},j.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Description"}),a.jsx(K,{value:d,onChange:j=>h(j.target.value),placeholder:o==="earning"?"e.g., Commission":o==="bonus"?"e.g., Performance Bonus":o==="overtime"?"e.g., Weekend Overtime":"e.g., Salary Advance"})]}),o==="overtime"?a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Hourly Rate (K)"}),a.jsx(K,{type:"number",value:x,onChange:j=>w(j.target.value),placeholder:"0.00"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Hours Worked"}),a.jsx(K,{type:"number",value:y,onChange:j=>A(j.target.value),placeholder:"0"})]}),x&&y&&a.jsxs("div",{className:"col-span-2 p-3 bg-muted rounded-lg",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Overtime Pay"}),a.jsxs("p",{className:"text-lg font-semibold",children:["K",(Number(x)*Number(y)).toFixed(2)]})]})]}):o==="advance"?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Advance Amount (K)"}),a.jsx(K,{type:"number",value:f,onChange:j=>m(j.target.value),placeholder:"0.00"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Months to Repay"}),a.jsx(K,{type:"number",min:"1",value:b,onChange:j=>g(j.target.value),placeholder:"e.g., 3"})]}),f&&b&&a.jsxs("div",{className:"p-3 bg-muted rounded-lg space-y-1",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Deduction"}),a.jsxs("p",{className:"text-lg font-semibold",children:["K",Math.ceil(Number(f)/Number(b)).toFixed(2)]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["To be deducted from net pay over ",b," month(s)"]})]})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Amount (K)"}),a.jsx(K,{type:"number",value:f,onChange:j=>m(j.target.value),placeholder:"0.00"})]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[a.jsx(G,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),a.jsx(G,{onClick:v,disabled:!c,children:"Add to Payroll"})]})]})]}),e.length>0&&a.jsxs("div",{className:"mt-4 border rounded-lg",children:[a.jsx("div",{className:"p-3 border-b bg-muted/50",children:a.jsxs("h4",{className:"font-medium text-sm",children:["Pending Additions (",e.length,")"]})}),a.jsx("div",{className:"divide-y max-h-48 overflow-y-auto",children:e.map(j=>{const p=t.find(E=>E.id===j.employee_id);return a.jsxs("div",{className:"p-3 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[S(j.type),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-sm",children:j.name}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[p==null?void 0:p.full_name,"  K",j.amount.toFixed(2),j.type==="advance"&&` per month for ${j.months_to_pay} months`]})]})]}),a.jsx(G,{variant:"ghost",size:"sm",className:"text-destructive",onClick:()=>r(j.id),children:"Remove"})]},j.id)})})]})]})}const e8e=mu({period_start:Ue().min(1,"Start date is required"),period_end:Ue().min(1,"End date is required"),run_date:Ue().min(1,"Run date is required"),notes:Ue().optional()});function t8e(){const{user:t}=ct(),e=Hn(),[n,r]=N.useState(!1),[s,i]=N.useState([]),o=m=>{i([...s,{...m,id:crypto.randomUUID()}])},l=m=>{i(s.filter(b=>b.id!==m))},c=SN({resolver:EN(e8e),defaultValues:{run_date:new Date().toISOString().split("T")[0]}}),{data:u}=Ne({queryKey:["new-payroll-company",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const m=await Ke.getPrimaryMembershipByUser(t.id);return(m==null?void 0:m.companyId)??null},enabled:!!t}),{data:d}=Ne({queryKey:["employees",u],queryFn:async()=>{if(!u)return[];const m=ve(te,Y.EMPLOYEES),b=await $e(Ce(m,ge("companyId","==",u),ge("employmentStatus","==","active")));return b.empty?(await $e(Ce(m,ge("companyId","==",u),ge("employment_status","==","active")))).docs.map(x=>{const w=x.data();return{id:x.id,full_name:String(w.fullName??w.full_name??""),employee_number:String(w.employeeNumber??w.employee_number??""),basic_salary:Number(w.basicSalary??w.basic_salary??0),housing_allowance:Number(w.housingAllowance??w.housing_allowance??0),transport_allowance:Number(w.transportAllowance??w.transport_allowance??0),other_allowances:Number(w.otherAllowances??w.other_allowances??0)}}):b.docs.map(g=>{const x=g.data();return{id:g.id,full_name:String(x.fullName??x.full_name??""),employee_number:String(x.employeeNumber??x.employee_number??""),basic_salary:Number(x.basicSalary??x.basic_salary??0),housing_allowance:Number(x.housingAllowance??x.housing_allowance??0),transport_allowance:Number(x.transportAllowance??x.transport_allowance??0),other_allowances:Number(x.otherAllowances??x.other_allowances??0)}})},enabled:!!u}),{data:h}=Ne({queryKey:["open-payroll-period",u],queryFn:async()=>{if(!u)return null;const m=ve(te,Y.FINANCIAL_PERIODS),b=await $e(Ce(m,ge("companyId","==",u),ge("status","==","open")));if(b.empty)return null;const g=b.docs.map(x=>{const w=x.data();return{id:x.id,startDate:String(w.startDate??w.start_date??""),endDate:String(w.endDate??w.end_date??""),periodName:String(w.periodName??w.period_name??"")}});return g.sort((x,w)=>w.startDate.localeCompare(x.startDate)),g[0]},enabled:!!u}),f=async m=>{if(!d||d.length===0){Z.error("No active employees found");return}r(!0);try{if(!t)throw new Error("Not authenticated");if(!u)throw new Error("Company not found");const b=await $e(Ce(ve(te,Y.PAYROLL_RUNS),ge("companyId","==",u))),x=`PAY-${new Date().getFullYear()}-${String(b.size+1).padStart(4,"0")}`,w=await jn(ve(te,Y.PAYROLL_RUNS),{companyId:u,userId:t.id,periodStart:m.period_start,periodEnd:m.period_end,runDate:m.run_date,notes:m.notes||null,status:"draft",payrollStatus:"draft",payrollNumber:x,totalGross:0,totalDeductions:0,totalNet:0,createdAt:ye(),updatedAt:ye()});let y=0,A=0,T=0;const S=(await $e(Ce(ve(te,Y.ADVANCES),ge("companyId","==",u),ge("status","in",["pending","partial"])))).docs.map(p=>{const E=p.data();return{id:p.id,employee_id:String(E.employeeId??E.employee_id??""),status:String(E.status??""),date_to_deduct:E.dateToDeduct??E.date_to_deduct??null,monthly_deduction:Number(E.monthlyDeduction??E.monthly_deduction??0)||null,remaining_balance:Number(E.remainingBalance??E.remaining_balance??0)||null,amount:Number(E.amount??0)}}).filter(p=>!p.employee_id||!d.some(E=>E.id===p.employee_id)?!1:p.date_to_deduct?p.date_to_deduct<=m.period_end:!0),j=d.map(p=>{const E=S.filter(I=>I.employee_id===p.id);let P=0;E.forEach(I=>{const O=I.monthly_deduction?Math.min(Number(I.monthly_deduction),Number(I.remaining_balance||I.amount)):Number(I.remaining_balance||I.amount);P+=O});const C=n0e(Number(p.basic_salary),Number(p.housing_allowance||0),Number(p.transport_allowance||0),Number(p.other_allowances||0),P);return y+=C.grossSalary,A+=C.totalDeductions,T+=C.netSalary,{companyId:u,payrollRunId:w.id,employeeId:p.id,basicSalary:C.basicSalary,housingAllowance:C.housingAllowance,transportAllowance:C.transportAllowance,otherAllowances:C.otherAllowances,grossSalary:C.grossSalary,paye:C.paye,napsaEmployee:C.napsaEmployee,napsaEmployer:C.napsaEmployer,nhimaEmployee:C.nhimaEmployee,nhimaEmployer:C.nhimaEmployer,advancesDeducted:P,totalDeductions:C.totalDeductions,netSalary:C.netSalary,createdAt:ye(),updatedAt:ye()}});await Promise.all(j.map(p=>jn(ve(te,Y.PAYROLL_ITEMS),p))),s.length>0&&await Promise.all(s.map(p=>jn(ve(te,Y.PAYROLL_ADDITIONS),{companyId:u,payrollRunId:w.id,employeeId:p.employee_id,type:p.type,name:p.name,amount:p.amount,totalAmount:p.total_amount??null,monthsToPay:p.months_to_pay??null,monthlyDeduction:p.monthly_deduction??null,createdAt:ye(),updatedAt:ye()}))),await wo(doc(te,Y.PAYROLL_RUNS,w.id),{totalGross:y,totalDeductions:A,totalNet:T,updatedAt:ye()}),Z.success("Payroll draft created successfully"),e(`/payroll/${w.id}`)}catch{Z.error("Failed to create payroll run")}finally{r(!1)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(G,{variant:"ghost",size:"sm",onClick:()=>e("/payroll"),children:[a.jsx(No,{className:"h-4 w-4 mr-2"}),"Back"]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"New Payroll Run"}),a.jsxs("p",{className:"text-muted-foreground",children:["Create a new payroll run for ",(d==null?void 0:d.length)||0," active employees"]})]}),a.jsx(Xe,{variant:"outline",className:"text-lg px-3 py-1",children:"DRAFT"})]}),a.jsxs(Cm,{children:[a.jsx(xa,{className:"h-4 w-4"}),a.jsx(UQ,{children:"Payroll Workflow"}),a.jsxs(Pm,{children:["Payroll follows a strict workflow: ",a.jsx("strong",{children:"Draft  Trial  Final"}),". Draft payrolls can be edited. Trial payrolls generate a preview with no GL impact. Final payrolls are locked and post journals to the General Ledger."]})]}),h&&a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Open financial period: ",h.periodName||`${h.startDate} to ${h.endDate}`]}),a.jsx(AN,{...c,children:a.jsxs("form",{onSubmit:c.handleSubmit(f),className:"space-y-6",children:[a.jsxs(X,{children:[a.jsxs(ee,{children:[a.jsx(ne,{children:"Payroll Period"}),a.jsx(jt,{children:"Define the period for this payroll run"})]}),a.jsx(re,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(nt,{control:c.control,name:"period_start",render:({field:m})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Period Start *"}),a.jsx(tt,{children:a.jsx(K,{type:"date",...m})}),a.jsx(st,{})]})}),a.jsx(nt,{control:c.control,name:"period_end",render:({field:m})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Period End *"}),a.jsx(tt,{children:a.jsx(K,{type:"date",...m})}),a.jsx(st,{})]})}),a.jsx(nt,{control:c.control,name:"run_date",render:({field:m})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Run Date *"}),a.jsx(tt,{children:a.jsx(K,{type:"date",...m})}),a.jsx(st,{})]})})]})})]}),a.jsxs(X,{children:[a.jsxs(ee,{children:[a.jsx(ne,{children:"Payroll Additions"}),a.jsx(jt,{children:"Add earnings, bonuses, overtime, or advances for this payroll run"})]}),a.jsx(re,{children:a.jsx(Jze,{employees:(d==null?void 0:d.map(m=>({id:m.id,full_name:m.full_name,employee_number:m.employee_number})))||[],additions:s,onAddition:o,onRemove:l})})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"Notes"})}),a.jsx(re,{children:a.jsx(nt,{control:c.control,name:"notes",render:({field:m})=>a.jsxs(et,{children:[a.jsx(tt,{children:a.jsx(lr,{...m,rows:3,placeholder:"Add any notes for this payroll run..."})}),a.jsx(st,{})]})})})]}),d&&d.length>0&&a.jsxs(X,{children:[a.jsxs(ee,{children:[a.jsx(ne,{children:"Employees to Process"}),a.jsxs(jt,{children:[d.length," active employees will be included"]})]}),a.jsx(re,{children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Basic Salary"}),a.jsx("p",{className:"text-xl font-bold",children:le(d.reduce((m,b)=>m+Number(b.basic_salary||0),0))})]}),a.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Housing"}),a.jsx("p",{className:"text-xl font-bold",children:le(d.reduce((m,b)=>m+Number(b.housing_allowance||0),0))})]}),a.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Transport"}),a.jsx("p",{className:"text-xl font-bold",children:le(d.reduce((m,b)=>m+Number(b.transport_allowance||0),0))})]}),a.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Other Allowances"}),a.jsx("p",{className:"text-xl font-bold",children:le(d.reduce((m,b)=>m+Number(b.other_allowances||0),0))})]})]})})]}),a.jsxs("div",{className:"flex justify-end gap-4",children:[a.jsx(G,{type:"button",variant:"outline",onClick:()=>e("/payroll"),children:"Cancel"}),a.jsxs(G,{type:"submit",disabled:n,children:[a.jsx(bd,{className:"h-4 w-4 mr-2"}),n?"Creating...":"Save as Draft"]})]})]})})]})}var qQ="AlertDialog",[n8e,nWe]=rs(qQ,[lW]),Al=lW(),WQ=t=>{const{__scopeAlertDialog:e,...n}=t,r=Al(e);return a.jsx(lk,{...r,...n,modal:!0})};WQ.displayName=qQ;var r8e="AlertDialogTrigger",HQ=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Al(n);return a.jsx(NW,{...s,...r,ref:e})});HQ.displayName=r8e;var s8e="AlertDialogPortal",KQ=t=>{const{__scopeAlertDialog:e,...n}=t,r=Al(e);return a.jsx(ck,{...r,...n})};KQ.displayName=s8e;var a8e="AlertDialogOverlay",GQ=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Al(n);return a.jsx(Wv,{...s,...r,ref:e})});GQ.displayName=a8e;var bf="AlertDialogContent",[i8e,o8e]=n8e(bf),l8e=U5("AlertDialogContent"),YQ=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=Al(n),o=N.useRef(null),l=Mt(e,o),c=N.useRef(null);return a.jsx(Nve,{contentName:bf,titleName:QQ,docsSlug:"alert-dialog",children:a.jsx(i8e,{scope:n,cancelRef:c,children:a.jsxs(Hv,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:Pe(s.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[a.jsx(l8e,{children:r}),a.jsx(u8e,{contentRef:o})]})})})});YQ.displayName=bf;var QQ="AlertDialogTitle",XQ=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Al(n);return a.jsx(Kv,{...s,...r,ref:e})});XQ.displayName=QQ;var ZQ="AlertDialogDescription",JQ=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Al(n);return a.jsx(Gv,{...s,...r,ref:e})});JQ.displayName=ZQ;var c8e="AlertDialogAction",eX=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Al(n);return a.jsx(bj,{...s,...r,ref:e})});eX.displayName=c8e;var tX="AlertDialogCancel",nX=N.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=o8e(tX,n),i=Al(n),o=Mt(e,s);return a.jsx(bj,{...i,...r,ref:o})});nX.displayName=tX;var u8e=({contentRef:t})=>{const e=`\`${bf}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${bf}\` by passing a \`${ZQ}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${bf}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return N.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},d8e=WQ,h8e=HQ,f8e=KQ,rX=GQ,sX=YQ,aX=eX,iX=nX,oX=XQ,lX=JQ;const qd=d8e,cv=h8e,m8e=f8e,cX=N.forwardRef(({className:t,...e},n)=>a.jsx(rX,{className:pe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));cX.displayName=rX.displayName;const Xc=N.forwardRef(({className:t,...e},n)=>a.jsxs(m8e,{children:[a.jsx(cX,{}),a.jsx(sX,{ref:n,className:pe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Xc.displayName=sX.displayName;const Zc=({className:t,...e})=>a.jsx("div",{className:pe("flex flex-col space-y-2 text-center sm:text-left",t),...e});Zc.displayName="AlertDialogHeader";const Jc=({className:t,...e})=>a.jsx("div",{className:pe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Jc.displayName="AlertDialogFooter";const eu=N.forwardRef(({className:t,...e},n)=>a.jsx(oX,{ref:n,className:pe("text-lg font-semibold",t),...e}));eu.displayName=oX.displayName;const tu=N.forwardRef(({className:t,...e},n)=>a.jsx(lX,{ref:n,className:pe("text-sm text-muted-foreground",t),...e}));tu.displayName=lX.displayName;const nu=N.forwardRef(({className:t,...e},n)=>a.jsx(aX,{ref:n,className:pe(WI(),t),...e}));nu.displayName=aX.displayName;const ru=N.forwardRef(({className:t,...e},n)=>a.jsx(iX,{ref:n,className:pe(WI({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));ru.displayName=iX.displayName;function p8e(){const{user:t}=ct(),e=Hn(),{id:n}=zm(),r=un(),{data:s,isLoading:i}=Ne({queryKey:["payrollRun",n],queryFn:async()=>{if(!n)return null;const T=await _a(He(te,Y.PAYROLL_RUNS,n));if(!T.exists())return null;const v=T.data();return{id:T.id,run_date:String(v.runDate??v.run_date??""),period_start:String(v.periodStart??v.period_start??""),period_end:String(v.periodEnd??v.period_end??""),payroll_status:v.payrollStatus??v.payroll_status??v.status??"draft",status:v.status??null,payroll_number:v.payrollNumber??v.payroll_number??null,total_gross:Number(v.totalGross??v.total_gross??0),total_deductions:Number(v.totalDeductions??v.total_deductions??0),total_net:Number(v.totalNet??v.total_net??0),gl_journal_id:v.glJournalId??v.gl_journal_id??null}},enabled:!!(t&&n)}),{data:o}=Ne({queryKey:["payrollItems",n],queryFn:async()=>{if(!n)return[];const T=ve(te,Y.PAYROLL_ITEMS);let v=await $e(Ce(T,ge("payrollRunId","==",n)));v.empty&&(v=await $e(Ce(T,ge("payroll_run_id","==",n))));const S=v.docs.map(P=>({id:P.id,row:P.data()})),j=Array.from(new Set(S.map(({row:P})=>String(P.employeeId??P.employee_id??"")).filter(Boolean))),p=await Promise.all(j.map(async P=>{const C=await _a(He(te,Y.EMPLOYEES,P));return{employeeDocId:P,snap:C}})),E=new Map;return p.forEach(({employeeDocId:P,snap:C})=>{if(!C.exists())return;const I=C.data();E.set(P,{full_name:String(I.fullName??I.full_name??""),employee_number:String(I.employeeNumber??I.employee_number??""),email:I.email??null,position:I.position??null,department:I.department??null,tpin:I.tpin??null,napsa_number:I.napsaNumber??I.napsa_number??null,nhima_number:I.nhimaNumber??I.nhima_number??null,bank_name:I.bankName??I.bank_name??null,bank_account_number:I.bankAccountNumber??I.bank_account_number??null})}),S.map(({id:P,row:C})=>{const I=String(C.employeeId??C.employee_id??"");return{id:P,employee_id:I,basic_salary:Number(C.basicSalary??C.basic_salary??0),housing_allowance:Number(C.housingAllowance??C.housing_allowance??0),transport_allowance:Number(C.transportAllowance??C.transport_allowance??0),other_allowances:Number(C.otherAllowances??C.other_allowances??0),gross_salary:Number(C.grossSalary??C.gross_salary??0),advances_deducted:Number(C.advancesDeducted??C.advances_deducted??0),net_salary:Number(C.netSalary??C.net_salary??0),paye:Number(C.paye??0),napsa_employee:Number(C.napsaEmployee??C.napsa_employee??0),napsa_employer:Number(C.napsaEmployer??C.napsa_employer??0),nhima_employee:Number(C.nhimaEmployee??C.nhima_employee??0),nhima_employer:Number(C.nhimaEmployer??C.nhima_employer??0),total_deductions:Number(C.totalDeductions??C.total_deductions??0),employees:E.get(I)??null}})},enabled:!!(t&&n)}),{data:l}=Ne({queryKey:["payroll-journals",n],queryFn:async()=>{if(!n)return[];const T=ve(te,Y.PAYROLL_JOURNALS);let v=await $e(Ce(T,ge("payrollRunId","==",n)));v.empty&&(v=await $e(Ce(T,ge("payroll_run_id","==",n))));const S=v.docs.map(P=>({id:P.id,row:P.data()})),j=Array.from(new Set(S.map(({row:P})=>String(P.journalEntryId??P.journal_entry_id??"")).filter(Boolean))),p=await Promise.all(j.map(async P=>{const C=await _a(He(te,Y.JOURNAL_ENTRIES,P));return{entryId:P,snap:C}})),E=new Map;return p.forEach(({entryId:P,snap:C})=>{if(!C.exists()){E.set(P,null);return}const I=C.data();E.set(P,{id:C.id,reference_number:I.referenceNumber??I.reference_number??null,entry_date:String(I.entryDate??I.entry_date??""),description:I.description??null,is_posted:!!(I.isPosted??I.is_posted)})}),S.map(({id:P,row:C})=>{const I=String(C.journalEntryId??C.journal_entry_id??"");return{id:P,description:C.description??null,journal_entries:E.get(I)??null}})},enabled:(s==null?void 0:s.payroll_status)==="final"}),c=it({mutationFn:async()=>{if(!n)throw new Error("Payroll run not found");await ff.runPayrollTrial({payrollRunId:n})},onSuccess:()=>{r.invalidateQueries({queryKey:["payrollRun",n]}),Z.success("Trial payroll run completed. Review the calculations before finalizing.")},onError:T=>{Z.error(T.message||"Failed to run trial payroll")}}),u=it({mutationFn:async()=>{if(!n)throw new Error("Payroll run not found");await wo(He(te,Y.PAYROLL_RUNS,n),{payrollStatus:"draft",trialRunAt:null,trialRunBy:null,updatedAt:ye()})},onSuccess:()=>{r.invalidateQueries({queryKey:["payrollRun",n]}),Z.success("Payroll reverted to draft. You can make changes and re-run trial.")},onError:T=>{Z.error(T.message||"Failed to revert payroll")}}),d=it({mutationFn:async()=>{if(!n)throw new Error("Payroll run not found");await ff.finalizePayroll({payrollRunId:n})},onSuccess:()=>{r.invalidateQueries({queryKey:["payrollRun",n]}),r.invalidateQueries({queryKey:["payrollItems",n]}),r.invalidateQueries({queryKey:["payroll-journals",n]}),Z.success("Payroll finalized and posted to General Ledger!")},onError:T=>{Z.error(T.message||"Failed to finalize payroll")}}),h=()=>{if(!o||!s)return;const T=["Employee Number","Name","Basic Salary","Housing","Transport","Other Allowances","Gross Salary","Advances Deducted","Net Salary","PAYE (Employer)","NAPSA Employee (Employer)","NAPSA Employer","NHIMA Employee (Employer)","NHIMA Employer"],v=o.map(P=>{var C,I;return[((C=P.employees)==null?void 0:C.employee_number)??"",((I=P.employees)==null?void 0:I.full_name)??"",P.basic_salary,P.housing_allowance,P.transport_allowance,P.other_allowances,P.gross_salary,P.advances_deducted??0,P.net_salary,P.paye,P.napsa_employee,P.napsa_employer,P.nhima_employee,P.nhima_employer]}),S=[T.join(","),...v.map(P=>P.join(","))].join(`
`),j=new Blob([S],{type:"text/csv"}),p=window.URL.createObjectURL(j),E=document.createElement("a");E.href=p,E.download=`payroll_${vt(new Date(s.run_date),"yyyy-MM-dd")}.csv`,E.click(),Z.success("Payroll exported successfully")},f=T=>{e(`/payroll/${n}/payslip/${T}`)},m=async()=>{!o||!s||!window.confirm(`Queue payslip emails for ${o.length} employees?`)||Z.promise(async()=>{for(const v of o){const S=v.employees;S!=null&&S.email&&n&&await ff.sendPayslipEmail({payrollRunId:n,employeeId:v.employee_id})}},{loading:"Queueing payslip emails...",success:"Payslip emails queued successfully!",error:"Failed to queue some emails."})},b=()=>{if(!o||!s)return;let T=`PAYSLIPS - ${new Date(s.period_start).toLocaleDateString()} to ${new Date(s.period_end).toLocaleDateString()}
`;T+="=".repeat(100)+`

`,o.forEach((E,P)=>{const C=E.employees??{full_name:"Unknown",employee_number:"-",position:null,department:null,tpin:null,napsa_number:null,nhima_number:null,bank_name:null,bank_account_number:null,email:null};T+=`PAYSLIP ${P+1}
`,T+="-".repeat(100)+`
`,T+=`Employee: ${C.full_name} (${C.employee_number})
`,T+=`Position: ${C.position||"N/A"}
`,T+=`Department: ${C.department||"N/A"}
`,T+=`TPIN: ${C.tpin||"N/A"}
`,T+=`NAPSA: ${C.napsa_number||"N/A"}
`,T+=`NHIMA: ${C.nhima_number||"N/A"}

`,T+=`EARNINGS:
`,T+=`  Basic Salary:        K${E.basic_salary.toFixed(2)}
`,T+=`  Housing Allowance:   K${E.housing_allowance.toFixed(2)}
`,T+=`  Transport Allowance: K${E.transport_allowance.toFixed(2)}
`,T+=`  Other Allowances:    K${E.other_allowances.toFixed(2)}
`,T+=`  Gross Salary:        K${E.gross_salary.toFixed(2)}

`,T+=`DEDUCTIONS:
`,T+=`  NAPSA (5%):          K${E.napsa_employee.toFixed(2)}
`,T+=`  NHIMA (1%):          K${E.nhima_employee.toFixed(2)}
`,T+=`  PAYE:                K${E.paye.toFixed(2)}
`,T+=`  Total Deductions:    K${E.total_deductions.toFixed(2)}

`,T+=`NET PAY:               K${E.net_salary.toFixed(2)}
`,T+=`
Bank: ${C.bank_name||"N/A"}
`,T+=`Account: ${C.bank_account_number||"N/A"}
`,T+=`
`+"=".repeat(100)+`

`});const v=new Blob([T],{type:"text/plain"}),S=window.URL.createObjectURL(v),j=document.createElement("a");j.href=S;const p=new Date(s.period_start).toLocaleDateString("en-GB",{month:"short",year:"numeric"});j.download=`Payslips_${p.replace(" ","_")}.txt`,document.body.appendChild(j),j.click(),document.body.removeChild(j),window.URL.revokeObjectURL(S),Z.success("Batch payslips downloaded successfully!")},g=T=>{switch(T){case"draft":return a.jsx(Xe,{variant:"outline",className:"border-yellow-500 text-yellow-600",children:"Draft"});case"trial":return a.jsx(Xe,{variant:"secondary",className:"bg-blue-100 text-blue-700",children:"Trial Run"});case"final":return a.jsx(Xe,{className:"bg-green-600",children:"Finalized"});default:return a.jsx(Xe,{variant:"outline",children:"Unknown"})}},x=s==null?void 0:s.payroll_status,w=x==="draft",y=x==="trial",A=x==="final";return i?a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx(Pn,{className:"h-8 w-8 animate-spin text-primary"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(G,{variant:"ghost",size:"sm",onClick:()=>e("/payroll"),children:[a.jsx(No,{className:"h-4 w-4 mr-2"}),"Back"]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Payroll Details"}),g(x),(s==null?void 0:s.payroll_number)&&a.jsx("span",{className:"text-sm text-muted-foreground font-mono",children:s.payroll_number})]}),a.jsx("p",{className:"text-muted-foreground",children:s&&a.jsxs(a.Fragment,{children:[vt(new Date(s.period_start),"dd MMM")," -"," ",vt(new Date(s.period_end),"dd MMM yyyy")]})})]})]}),a.jsxs("div",{className:"flex gap-2",children:[w&&a.jsxs(G,{onClick:()=>c.mutate(),disabled:c.isPending,className:"bg-blue-600 hover:bg-blue-700",children:[c.isPending?a.jsx(Pn,{className:"h-4 w-4 mr-2 animate-spin"}):a.jsx(bU,{className:"h-4 w-4 mr-2"}),"Run Trial Payroll"]}),y&&a.jsxs(a.Fragment,{children:[a.jsxs(G,{variant:"outline",onClick:()=>u.mutate(),disabled:u.isPending,children:[u.isPending?a.jsx(Pn,{className:"h-4 w-4 mr-2 animate-spin"}):a.jsx(Pte,{className:"h-4 w-4 mr-2"}),"Revert to Draft"]}),a.jsxs(qd,{children:[a.jsx(cv,{asChild:!0,children:a.jsxs(G,{className:"bg-green-600 hover:bg-green-700",children:[a.jsx(vo,{className:"h-4 w-4 mr-2"}),"Finalize Payroll"]})}),a.jsxs(Xc,{children:[a.jsxs(Zc,{children:[a.jsxs(eu,{className:"flex items-center gap-2",children:[a.jsx(Oi,{className:"h-5 w-5 text-amber-500"}),"Finalize Payroll"]}),a.jsxs(tu,{className:"space-y-2",children:[a.jsx("p",{children:"This action will:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[a.jsx("li",{children:"Lock the payroll permanently - no further edits allowed"}),a.jsx("li",{children:"Post journal entries to the General Ledger"}),a.jsx("li",{children:"Create statutory liability accounts (PAYE, NAPSA, NHIMA)"}),a.jsx("li",{children:"Generate payroll number for reference"})]}),a.jsx("p",{className:"font-medium mt-4",children:"Are you sure you want to proceed?"})]})]}),a.jsxs(Jc,{children:[a.jsx(ru,{children:"Cancel"}),a.jsxs(nu,{onClick:()=>d.mutate(),disabled:d.isPending,className:"bg-green-600 hover:bg-green-700",children:[d.isPending?a.jsx(Pn,{className:"h-4 w-4 mr-2 animate-spin"}):null,"Finalize & Post to GL"]})]})]})]})]}),A&&a.jsxs(a.Fragment,{children:[a.jsx(G,{onClick:m,variant:"outline",children:"Email Payslips"}),a.jsx(G,{onClick:b,variant:"outline",children:"Download All"})]}),a.jsxs(G,{onClick:h,variant:"outline",children:[a.jsx(ys,{className:"mr-2 h-4 w-4"}),"Export CSV"]})]})]}),y&&a.jsx(X,{className:"border-blue-200 bg-blue-50",children:a.jsx(re,{className:"py-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Oi,{className:"h-5 w-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-blue-900",children:"Trial Payroll Run"}),a.jsx("p",{className:"text-sm text-blue-700",children:'Review the calculations below. No GL entries have been posted. Click "Finalize Payroll" when ready.'})]})]})})}),A&&l&&l.length>0&&a.jsxs(X,{className:"border-green-200 bg-green-50",children:[a.jsx(ee,{className:"pb-2",children:a.jsxs(ne,{className:"text-lg flex items-center gap-2",children:[a.jsx(A_,{className:"h-5 w-5 text-green-600"}),"General Ledger Postings"]})}),a.jsxs(re,{children:[a.jsx("div",{className:"space-y-2",children:l.map(T=>{var v,S;return a.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:(v=T.journal_entries)==null?void 0:v.reference_number}),a.jsx("p",{className:"text-sm text-muted-foreground",children:T.description})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm",children:((S=T.journal_entries)==null?void 0:S.entry_date)&&vt(new Date(T.journal_entries.entry_date),"dd MMM yyyy")}),a.jsx(Xe,{variant:"outline",className:"text-green-600 border-green-600",children:"Posted"})]})]},T.id)})}),a.jsx(G,{variant:"link",className:"mt-2 p-0 h-auto text-green-700",onClick:()=>e("/journal-entries"),children:"View all journal entries "})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(X,{children:a.jsxs(ee,{className:"pb-2",children:[a.jsx(jt,{children:"Total Gross"}),a.jsx(ne,{className:"text-2xl",children:le(Number((s==null?void 0:s.total_gross)||0))})]})}),a.jsx(X,{children:a.jsxs(ee,{className:"pb-2",children:[a.jsx(jt,{children:"Total Deductions"}),a.jsx(ne,{className:"text-2xl text-destructive",children:le(Number((s==null?void 0:s.total_deductions)||0))})]})}),a.jsx(X,{children:a.jsxs(ee,{className:"pb-2",children:[a.jsx(jt,{children:"Total Net"}),a.jsx(ne,{className:"text-2xl text-primary",children:le(Number((s==null?void 0:s.total_net)||0))})]})}),a.jsx(X,{children:a.jsxs(ee,{className:"pb-2",children:[a.jsx(jt,{children:"Employees"}),a.jsx(ne,{className:"text-2xl",children:(o==null?void 0:o.length)||0})]})})]}),a.jsxs(X,{children:[a.jsxs(ee,{children:[a.jsx(ne,{children:"Payroll Items"}),a.jsx(jt,{children:"Individual employee payroll calculations"})]}),a.jsx(re,{children:a.jsx("div",{className:"border rounded-lg overflow-x-auto",children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Employee"}),a.jsx(U,{className:"text-right",children:"Basic"}),a.jsx(U,{className:"text-right",children:"Allowances"}),a.jsx(U,{className:"text-right",children:"Gross"}),a.jsx(U,{className:"text-right",children:"PAYE"}),a.jsx(U,{className:"text-right",children:"NAPSA"}),a.jsx(U,{className:"text-right",children:"NHIMA"}),a.jsx(U,{className:"text-right",children:"Total Ded."}),a.jsx(U,{className:"text-right",children:"Net Salary"}),a.jsx(U,{className:"text-right",children:"Actions"})]})}),a.jsx(Wt,{children:o==null?void 0:o.map(T=>{var v,S;return a.jsxs(_e,{children:[a.jsx(B,{children:a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:((v=T.employees)==null?void 0:v.full_name)||"Unknown"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:((S=T.employees)==null?void 0:S.employee_number)||"-"})]})}),a.jsx(B,{className:"text-right",children:le(Number(T.basic_salary))}),a.jsx(B,{className:"text-right",children:le(Number(T.housing_allowance||0)+Number(T.transport_allowance||0)+Number(T.other_allowances||0))}),a.jsx(B,{className:"text-right font-medium",children:le(Number(T.gross_salary))}),a.jsx(B,{className:"text-right text-destructive",children:le(Number(T.paye))}),a.jsx(B,{className:"text-right text-destructive",children:le(Number(T.napsa_employee))}),a.jsx(B,{className:"text-right text-destructive",children:le(Number(T.nhima_employee))}),a.jsx(B,{className:"text-right text-destructive",children:le(Number(T.total_deductions))}),a.jsx(B,{className:"text-right font-medium text-primary",children:le(Number(T.net_salary))}),a.jsx(B,{className:"text-right",children:a.jsxs(G,{variant:"ghost",size:"sm",onClick:()=>f(T.employee_id),children:[a.jsx(ar,{className:"h-4 w-4 mr-2"}),"Payslip"]})})]},T.id)})})]})})})]})]})}function $O({onUploaded:t}){const[e,n]=N.useState(!1),[r,s]=N.useState(""),i=N.useRef(null),o=un(),{user:l}=ct(),{data:c}=Ne({queryKey:["company-settings",l==null?void 0:l.id],queryFn:async()=>{if(!l||!fo)return null;const f=await Ke.getPrimaryMembershipByUser(l.id);if(!f)return null;const[m,b]=await Promise.all([Ke.getCompanyById(f.companyId),Ke.getCompanySettings(f.companyId)]);return{companyId:f.companyId,companyName:(b==null?void 0:b.companyName)||(m==null?void 0:m.name)||"My Organization",logoUrl:(b==null?void 0:b.logoUrl)||(m==null?void 0:m.logoUrl)||null}},enabled:!!l}),u=it({mutationFn:async({logoUrl:f,companyName:m})=>{if(!c)throw new Error("No company linked to current user.");await Ke.updateCompanyBasics({companyId:c.companyId,logoUrl:f,name:m})},onSuccess:()=>{o.invalidateQueries({queryKey:["company-settings"]}),o.invalidateQueries({queryKey:["company"]}),Z.success("Settings updated successfully")},onError:f=>{const m=f instanceof Error?f.message:"Failed to update settings";Z.error(m)}});N.useEffect(()=>{t&&t((c==null?void 0:c.logoUrl)||null)},[t,c==null?void 0:c.logoUrl]),N.useEffect(()=>{s((c==null?void 0:c.companyName)||"")},[c==null?void 0:c.companyName]);const d=async f=>{var b;const m=(b=f.target.files)==null?void 0:b[0];if(m){if(!c){Z.error("No company linked to this user.");return}if(!m.type.startsWith("image/")){Z.error("Please upload an image file");return}if(m.size>5*1024*1024){Z.error("File size must be less than 5MB");return}n(!0);try{const g=await _be.uploadCompanyLogo(c.companyId,m);await u.mutateAsync({logoUrl:g}),t==null||t(g)}catch(g){const x=g instanceof Error?g.message:"Failed to upload logo";Z.error(x)}finally{n(!1)}}},h=()=>{const f=r.trim();!f||!c||f===c.companyName||u.mutate({companyName:f})};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"h-20 w-20 rounded-lg border-2 border-dashed border-border flex items-center justify-center overflow-hidden bg-muted",children:c!=null&&c.logoUrl?a.jsx("img",{src:c.logoUrl,alt:"Company Logo",className:"h-full w-full object-contain"}):a.jsx(T_,{className:"h-8 w-8 text-muted-foreground"})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Company Logo"}),a.jsx("input",{ref:i,type:"file",accept:"image/*",onChange:d,className:"hidden"}),a.jsx(G,{variant:"outline",size:"sm",onClick:()=>{var f;return(f=i.current)==null?void 0:f.click()},disabled:e||!c,children:e?a.jsxs(a.Fragment,{children:[a.jsx(Pn,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):a.jsxs(a.Fragment,{children:[a.jsx(So,{className:"h-4 w-4 mr-2"}),"Upload Logo"]})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Company Name"}),a.jsx(K,{value:r,placeholder:"Enter company name",onChange:f=>s(f.target.value),onBlur:h,disabled:!c})]})]})}const $s=t=>Number(t??0),Bl=t=>String(t??"");function g8e(){const{user:t}=ct(),e=Hn(),{runId:n,employeeId:r}=zm(),[s,i]=N.useState(!1),[o,l]=N.useState(!1),{data:c}=xu(),{data:u}=Ne({queryKey:["payrollRun",n],queryFn:async()=>{if(!n)return null;const j=await _a(He(te,Y.PAYROLL_RUNS,n));if(!j.exists())return null;const p=j.data();return{id:j.id,period_start:Bl(p.periodStart??p.period_start),period_end:Bl(p.periodEnd??p.period_end),run_date:Bl(p.runDate??p.run_date)}},enabled:!!(t&&n)}),{data:d,isLoading:h}=Ne({queryKey:["payrollItem",n,r],queryFn:async()=>{if(!n||!r)return null;const j=ve(te,Y.PAYROLL_ITEMS),p=async(O,$)=>{const z=await $e(Ce(j,ge(O,"==",n),ge($,"==",r),Ws(1)));return z.empty?null:z.docs[0]},E=await p("payrollRunId","employeeId")??await p("payroll_run_id","employee_id");if(!E)return null;const P=E.data(),C=Bl(P.employeeId??P.employee_id??r);let I=null;if(C){const O=await _a(He(te,Y.EMPLOYEES,C));if(O.exists()){const $=O.data();I={full_name:Bl($.fullName??$.full_name),employee_number:Bl($.employeeNumber??$.employee_number),position:$.position??null,department:$.department??null,tpin:$.tpin??null,napsa_number:$.napsaNumber??$.napsa_number??null,nhima_number:$.nhimaNumber??$.nhima_number??null,bank_name:$.bankName??$.bank_name??null,bank_account_number:$.bankAccountNumber??$.bank_account_number??null,email:$.email??null}}}return{id:E.id,employee_id:C,basic_salary:$s(P.basicSalary??P.basic_salary),housing_allowance:$s(P.housingAllowance??P.housing_allowance),transport_allowance:$s(P.transportAllowance??P.transport_allowance),other_allowances:$s(P.otherAllowances??P.other_allowances),gross_salary:$s(P.grossSalary??P.gross_salary),napsa_employee:$s(P.napsaEmployee??P.napsa_employee),napsa_employer:$s(P.napsaEmployer??P.napsa_employer),nhima_employee:$s(P.nhimaEmployee??P.nhima_employee),nhima_employer:$s(P.nhimaEmployer??P.nhima_employer),paye:$s(P.paye),advances_deducted:$s(P.advancesDeducted??P.advances_deducted),total_deductions:$s(P.totalDeductions??P.total_deductions),net_salary:$s(P.netSalary??P.net_salary),employees:I}},enabled:!!(t&&n&&r)}),{data:f}=Ne({queryKey:["payroll-additions",n,r],queryFn:async()=>{if(!n||!r)return[];const j=ve(te,Y.PAYROLL_ADDITIONS);let p=await $e(Ce(j,ge("payrollRunId","==",n),ge("employeeId","==",r)));return p.empty&&(p=await $e(Ce(j,ge("payroll_run_id","==",n),ge("employee_id","==",r)))),p.docs.map(E=>{const P=E.data();return{id:E.id,type:Bl(P.type),name:Bl(P.name),amount:$s(P.amount)}})},enabled:!!(t&&n&&r)}),m=()=>{window.print(),Z.success("Print dialog opened")},b=async()=>{if(!(g!=null&&g.email)){Z.error("Employee email not found");return}i(!0);try{if(!n||!r)throw new Error("Invalid payroll context");await ff.sendPayslipEmail({payrollRunId:n,employeeId:r}),Z.success(`Payslip queued for ${g.email}`)}catch{Z.error("Failed to send payslip email")}finally{i(!1)}};if(h)return a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});const g=d==null?void 0:d.employees,x=(f==null?void 0:f.filter(j=>j.type!=="advance"))||[],w=(f==null?void 0:f.filter(j=>j.type==="advance"))||[],y=x.reduce((j,p)=>j+Number(p.amount),0),A=w.reduce((j,p)=>j+Number(p.amount),0),T=Number(d==null?void 0:d.gross_salary)+y,v=Number(d==null?void 0:d.total_deductions)+A,S=Number(d==null?void 0:d.net_salary)-A;return a.jsxs("div",{className:"space-y-6 max-w-3xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between print:hidden",children:[a.jsxs(G,{variant:"ghost",size:"sm",onClick:()=>e(`/payroll/${n}`),children:[a.jsx(No,{className:"h-4 w-4 mr-2"}),"Back to Payroll Run"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Jn,{open:o,onOpenChange:l,children:[a.jsx(Hr,{asChild:!0,children:a.jsxs(G,{variant:"outline",size:"sm",children:[a.jsx(sy,{className:"h-4 w-4 mr-2"}),"Company Settings"]})}),a.jsxs(zn,{children:[a.jsxs(qn,{children:[a.jsx(Wn,{children:"Company Settings"}),a.jsx(bu,{children:"Upload your company logo and set your company name"})]}),a.jsx($O,{})]})]}),a.jsx(G,{variant:"outline",onClick:b,disabled:s||!(g!=null&&g.email),children:s?a.jsxs(a.Fragment,{children:[a.jsx(Pn,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(ad,{className:"mr-2 h-4 w-4"}),"Email Payslip"]})}),a.jsxs(G,{onClick:m,children:[a.jsx(ys,{className:"mr-2 h-4 w-4"}),"Print / Download"]})]})]}),a.jsxs("div",{id:"payslip-content",className:"bg-card border rounded-lg shadow-lg print:border-0 print:shadow-none",children:[a.jsx("div",{className:"bg-primary text-primary-foreground p-6 rounded-t-lg print:rounded-none",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"bg-primary-foreground/20 p-3 rounded-lg h-16 w-16 flex items-center justify-center overflow-hidden",children:c!=null&&c.logoUrl?a.jsx("img",{src:c.logoUrl,alt:"Company Logo",className:"h-full w-full object-contain"}):a.jsx(T_,{className:"h-10 w-10"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:(c==null?void 0:c.companyName)||"ZedBooks NGO"}),a.jsx("p",{className:"text-primary-foreground/80 text-sm",children:"Accounting Suite"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("h2",{className:"text-xl font-bold",children:"PAYSLIP"}),a.jsx("p",{className:"text-primary-foreground/80 text-sm",children:u&&vt(new Date(u.period_start),"MMMM yyyy")})]})]})}),a.jsx("div",{className:"bg-muted/50 px-6 py-3 border-b text-sm",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-muted-foreground",children:"Pay Period:"}),a.jsxs("span",{className:"font-medium",children:[u&&vt(new Date(u.period_start),"dd MMM yyyy")," - ",u&&vt(new Date(u.period_end),"dd MMM yyyy")]})]})}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-3",children:"Employee Details"}),a.jsx("div",{className:"bg-muted/30 rounded-lg p-4",children:a.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-3 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Name:"}),a.jsx("span",{className:"font-semibold",children:g==null?void 0:g.full_name})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Employee No:"}),a.jsx("span",{className:"font-semibold",children:g==null?void 0:g.employee_number})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Position:"}),a.jsx("span",{className:"font-semibold",children:(g==null?void 0:g.position)||"N/A"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Department:"}),a.jsx("span",{className:"font-semibold",children:(g==null?void 0:g.department)||"N/A"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"TPIN:"}),a.jsx("span",{className:"font-semibold",children:(g==null?void 0:g.tpin)||"N/A"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"NAPSA No:"}),a.jsx("span",{className:"font-semibold",children:(g==null?void 0:g.napsa_number)||"N/A"})]})]})})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-3",children:"Earnings"}),a.jsx("div",{className:"border rounded-lg overflow-hidden",children:a.jsx("table",{className:"w-full text-sm",children:a.jsxs("tbody",{children:[a.jsxs("tr",{className:"border-b",children:[a.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"Basic Salary"}),a.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(d==null?void 0:d.basic_salary))})]}),a.jsxs("tr",{className:"border-b",children:[a.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"Housing Allowance"}),a.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(d==null?void 0:d.housing_allowance))})]}),a.jsxs("tr",{className:"border-b",children:[a.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"Transport Allowance"}),a.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(d==null?void 0:d.transport_allowance))})]}),a.jsxs("tr",{className:"border-b",children:[a.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"Other Allowances"}),a.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(d==null?void 0:d.other_allowances))})]}),x.map(j=>a.jsxs("tr",{className:"border-b",children:[a.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:j.name}),a.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(j.amount))})]},j.id)),a.jsxs("tr",{className:"bg-primary/5",children:[a.jsx("td",{className:"px-4 py-3 font-semibold",children:"Gross Pay"}),a.jsx("td",{className:"px-4 py-3 text-right font-bold text-primary",children:le(T)})]})]})})})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-3",children:"Deductions"}),a.jsx("div",{className:"border rounded-lg overflow-hidden",children:a.jsx("table",{className:"w-full text-sm",children:a.jsxs("tbody",{children:[a.jsxs("tr",{className:"border-b",children:[a.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"NAPSA (5%)"}),a.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(d==null?void 0:d.napsa_employee))})]}),a.jsxs("tr",{className:"border-b",children:[a.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"NHIMA (1%)"}),a.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(d==null?void 0:d.nhima_employee))})]}),a.jsxs("tr",{className:"border-b",children:[a.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"PAYE"}),a.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(d==null?void 0:d.paye))})]}),Number(d==null?void 0:d.advances_deducted)>0&&a.jsxs("tr",{className:"border-b",children:[a.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:"Advances (Previous)"}),a.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(d==null?void 0:d.advances_deducted))})]}),w.map(j=>a.jsxs("tr",{className:"border-b",children:[a.jsx("td",{className:"px-4 py-2.5 text-muted-foreground",children:j.name}),a.jsx("td",{className:"px-4 py-2.5 text-right font-medium",children:le(Number(j.amount))})]},j.id)),a.jsxs("tr",{className:"bg-destructive/5",children:[a.jsx("td",{className:"px-4 py-3 font-semibold",children:"Total Deductions"}),a.jsx("td",{className:"px-4 py-3 text-right font-bold text-destructive",children:le(v)})]})]})})})]})]}),a.jsx("div",{className:"bg-primary rounded-lg p-5 text-primary-foreground",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-primary-foreground/80 text-sm",children:"Net Pay"}),a.jsx("p",{className:"text-xs text-primary-foreground/60",children:"Amount payable to employee"})]}),a.jsx("p",{className:"text-3xl font-bold",children:le(S)})]})}),(g==null?void 0:g.bank_name)&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-3",children:"Payment Details"}),a.jsx("div",{className:"bg-muted/30 rounded-lg p-4",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Bank:"}),a.jsx("span",{className:"font-semibold",children:g.bank_name})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-muted-foreground",children:"Account Number:"}),a.jsx("span",{className:"font-semibold",children:g.bank_account_number})]})]})})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Employer Contributions (for reference only):"}),a.jsxs("div",{className:"flex gap-6 text-xs text-muted-foreground",children:[a.jsxs("span",{children:["NAPSA: ",le(Number(d==null?void 0:d.napsa_employer))]}),a.jsxs("span",{children:["NHIMA: ",le(Number(d==null?void 0:d.nhima_employer))]})]})]})]}),a.jsxs("div",{className:"bg-muted/30 px-6 py-4 rounded-b-lg border-t text-center",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"This is a computer-generated payslip. Please keep it confidential."}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Generated on ",vt(new Date,"dd MMMM yyyy 'at' HH:mm")]})]})]})]})}function y8e(){const{user:t}=ct(),e=Hn(),{id:n}=zm(),r=un(),[s,i]=N.useState(!1),{data:o,isLoading:l}=Ne({queryKey:["payrollRun",n],queryFn:async()=>{if(!n)return null;const x=await _a(He(te,Y.PAYROLL_RUNS,n));if(!x.exists())return null;const w=x.data();return{id:x.id,status:w.status??w.payrollStatus??"draft",period_start:String(w.periodStart??w.period_start??""),period_end:String(w.periodEnd??w.period_end??""),approved_at:w.approvedAt??w.approved_at??null,total_gross:Number(w.totalGross??w.total_gross??0),total_deductions:Number(w.totalDeductions??w.total_deductions??0),total_net:Number(w.totalNet??w.total_net??0),notes:w.notes??null}},enabled:!!(t&&n)}),{data:c}=Ne({queryKey:["payrollItems",n],queryFn:async()=>{if(!n)return[];const x=ve(te,Y.PAYROLL_ITEMS);let w=await $e(Ce(x,ge("payrollRunId","==",n)));w.empty&&(w=await $e(Ce(x,ge("payroll_run_id","==",n))));const y=w.docs.map(S=>({id:S.id,row:S.data()})),A=Array.from(new Set(y.map(({row:S})=>String(S.employeeId??S.employee_id??"")).filter(Boolean))),T=await Promise.all(A.map(async S=>{const j=await _a(He(te,Y.EMPLOYEES,S));return{employeeDocId:S,snap:j}})),v=new Map;return T.forEach(({employeeDocId:S,snap:j})=>{if(!j.exists())return;const p=j.data();v.set(S,{id:j.id,full_name:String(p.fullName??p.full_name??""),employee_number:String(p.employeeNumber??p.employee_number??""),position:p.position??null,department:p.department??null,email:p.email??null,bank_account_number:p.bankAccountNumber??p.bank_account_number??null})}),y.map(({id:S,row:j})=>{const p=String(j.employeeId??j.employee_id??"");return{id:S,employee_id:p,basic_salary:Number(j.basicSalary??j.basic_salary??0),housing_allowance:Number(j.housingAllowance??j.housing_allowance??0),transport_allowance:Number(j.transportAllowance??j.transport_allowance??0),other_allowances:Number(j.otherAllowances??j.other_allowances??0),gross_salary:Number(j.grossSalary??j.gross_salary??0),napsa_employee:Number(j.napsaEmployee??j.napsa_employee??0),nhima_employee:Number(j.nhimaEmployee??j.nhima_employee??0),paye:Number(j.paye??0),advances_deducted:Number(j.advancesDeducted??j.advances_deducted??0),total_deductions:Number(j.totalDeductions??j.total_deductions??0),net_salary:Number(j.netSalary??j.net_salary??0),employees:v.get(p)??null}})},enabled:!!(t&&n)}),{data:u}=Ne({queryKey:["payrollAdditions",n],queryFn:async()=>{if(!n)return[];const x=ve(te,Y.PAYROLL_ADDITIONS);let w=await $e(Ce(x,ge("payrollRunId","==",n)));w.empty&&(w=await $e(Ce(x,ge("payroll_run_id","==",n))));const y=w.docs.map(S=>({id:S.id,row:S.data()})),A=Array.from(new Set(y.map(({row:S})=>String(S.employeeId??S.employee_id??"")).filter(Boolean))),T=await Promise.all(A.map(async S=>{const j=await _a(He(te,Y.EMPLOYEES,S));return{employeeDocId:S,snap:j}})),v=new Map;return T.forEach(({employeeDocId:S,snap:j})=>{if(!j.exists())return;const p=j.data();v.set(S,{full_name:String(p.fullName??p.full_name??""),employee_number:String(p.employeeNumber??p.employee_number??"")})}),y.map(({id:S,row:j})=>{const p=String(j.employeeId??j.employee_id??"");return{id:S,type:String(j.type??""),name:String(j.name??""),amount:Number(j.amount??0),employees:v.get(p)??null}})},enabled:!!(t&&n)}),d=it({mutationFn:async()=>{if(!n||!t)throw new Error("Not authenticated");await wo(He(te,Y.PAYROLL_RUNS,n),{status:"approved",approvedAt:new Date().toISOString(),approvedBy:t.id,updatedAt:ye()})},onSuccess:()=>{r.invalidateQueries({queryKey:["payrollRun",n]}),Z.success("Payroll approved successfully!")},onError:()=>{Z.error("Failed to approve payroll")}}),h=it({mutationFn:async()=>{if(!n)throw new Error("Payroll run not found");await wo(He(te,Y.PAYROLL_RUNS,n),{status:"draft",updatedAt:ye()})},onSuccess:()=>{r.invalidateQueries({queryKey:["payrollRun",n]}),Z.success("Payroll rejected and returned to draft"),e("/payroll")},onError:()=>{Z.error("Failed to reject payroll")}}),f=async()=>{if(!c||c.length===0){Z.error("No payroll items to email");return}const x=c.filter(A=>{var T;return!!((T=A.employees)!=null&&T.email)});if(x.length===0){Z.error("No employees have email addresses configured");return}i(!0);let w=0,y=0;for(const A of x)try{if(!n)continue;await ff.sendPayslipEmail({payrollRunId:n,employeeId:A.employee_id}),w++}catch{y++}i(!1),w>0&&Z.success(`Successfully sent ${w} payslip email(s)`),y>0&&Z.error(`Failed to send ${y} email(s)`)};if(l)return a.jsx("div",{children:"Loading..."});if(!o)return a.jsx("div",{children:"Payroll run not found"});const m=o.status==="approved"||o.status==="completed",b=(u==null?void 0:u.reduce((x,w)=>x+(w.type!=="advance"?Number(w.amount):0),0))||0,g=(u==null?void 0:u.reduce((x,w)=>x+(w.type==="advance"?Number(w.amount):0),0))||0;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(G,{variant:"ghost",size:"sm",onClick:()=>e("/payroll"),children:[a.jsx(No,{className:"h-4 w-4 mr-2"}),"Back"]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Payroll Approval"}),a.jsxs("p",{className:"text-muted-foreground",children:["Review and approve payroll for"," ",vt(new Date(o.period_start),"dd MMM")," -"," ",vt(new Date(o.period_end),"dd MMM yyyy")]})]}),m&&a.jsxs(G,{onClick:f,disabled:s,children:[s?a.jsx(Pn,{className:"h-4 w-4 mr-2 animate-spin"}):a.jsx(ad,{className:"h-4 w-4 mr-2"}),s?"Sending...":"Email All Payslips"]})]}),m&&a.jsxs("div",{className:"bg-green-100 dark:bg-green-900/30 border border-green-200 dark:border-green-800 rounded-lg p-4 flex items-center gap-3",children:[a.jsx(vo,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-green-800 dark:text-green-200",children:"This payroll has been approved"}),o.approved_at&&a.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400",children:["Approved on ",vt(new Date(o.approved_at),"dd MMM yyyy 'at' HH:mm")]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(X,{children:a.jsxs(ee,{className:"pb-2",children:[a.jsx(jt,{children:"Employees"}),a.jsx(ne,{className:"text-2xl",children:(c==null?void 0:c.length)||0})]})}),a.jsx(X,{children:a.jsxs(ee,{className:"pb-2",children:[a.jsx(jt,{children:"Total Gross Pay"}),a.jsx(ne,{className:"text-2xl text-primary",children:le(Number(o.total_gross||0))})]})}),a.jsx(X,{children:a.jsxs(ee,{className:"pb-2",children:[a.jsx(jt,{children:"Total Deductions"}),a.jsx(ne,{className:"text-2xl text-destructive",children:le(Number(o.total_deductions||0))})]})}),a.jsx(X,{className:"bg-primary/5 border-primary/20",children:a.jsxs(ee,{className:"pb-2",children:[a.jsx(jt,{children:"Total Net Pay"}),a.jsx(ne,{className:"text-2xl text-primary",children:le(Number(o.total_net||0))})]})})]}),u&&u.length>0&&a.jsxs(X,{children:[a.jsxs(ee,{children:[a.jsx(ne,{children:"Payroll Additions & Advances"}),a.jsx(jt,{children:"Custom earnings, bonuses, overtime, and advance deductions for this payroll run"})]}),a.jsxs(re,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Additional Earnings"}),a.jsx("p",{className:"text-xl font-bold text-primary",children:le(b)})]}),a.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Advance Deductions"}),a.jsx("p",{className:"text-xl font-bold text-destructive",children:le(g)})]}),a.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Additions"}),a.jsx("p",{className:"text-xl font-bold",children:u.length})]})]}),a.jsx("div",{className:"border rounded-lg",children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Employee"}),a.jsx(U,{children:"Type"}),a.jsx(U,{children:"Name"}),a.jsx(U,{className:"text-right",children:"Amount"})]})}),a.jsx(Wt,{children:u.map(x=>{var w,y;return a.jsxs(_e,{children:[a.jsx(B,{children:a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:(w=x.employees)==null?void 0:w.full_name}),a.jsx("p",{className:"text-sm text-muted-foreground",children:(y=x.employees)==null?void 0:y.employee_number})]})}),a.jsx(B,{children:a.jsx(Xe,{variant:x.type==="advance"?"destructive":"default",children:x.type})}),a.jsx(B,{children:x.name}),a.jsxs(B,{className:`text-right font-medium ${x.type==="advance"?"text-destructive":"text-primary"}`,children:[x.type==="advance"?"-":"",le(Number(x.amount))]})]},x.id)})})]})})]})]}),a.jsxs(X,{children:[a.jsxs(ee,{children:[a.jsx(ne,{children:"Employee Breakdown"}),a.jsx(jt,{children:"Review individual payroll calculations"})]}),a.jsx(re,{children:a.jsx("div",{className:"border rounded-lg",children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Employee"}),a.jsx(U,{children:"Department"}),a.jsx(U,{className:"text-right",children:"Gross"}),a.jsx(U,{className:"text-right",children:"PAYE"}),a.jsx(U,{className:"text-right",children:"NAPSA"}),a.jsx(U,{className:"text-right",children:"NHIMA"}),a.jsx(U,{className:"text-right",children:"Advances"}),a.jsx(U,{className:"text-right",children:"Total Deductions"}),a.jsx(U,{className:"text-right",children:"Net Pay"})]})}),a.jsx(Wt,{children:c==null?void 0:c.map(x=>{var w,y,A;return a.jsxs(_e,{children:[a.jsx(B,{children:a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:((w=x.employees)==null?void 0:w.full_name)||"Unknown"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:((y=x.employees)==null?void 0:y.employee_number)||"-"})]})}),a.jsx(B,{children:((A=x.employees)==null?void 0:A.department)||"-"}),a.jsx(B,{className:"text-right",children:le(Number(x.gross_salary))}),a.jsx(B,{className:"text-right",children:le(Number(x.paye))}),a.jsx(B,{className:"text-right",children:le(Number(x.napsa_employee))}),a.jsx(B,{className:"text-right",children:le(Number(x.nhima_employee))}),a.jsx(B,{className:"text-right text-destructive",children:le(Number(x.advances_deducted||0))}),a.jsx(B,{className:"text-right text-destructive",children:le(Number(x.total_deductions))}),a.jsx(B,{className:"text-right font-medium",children:le(Number(x.net_salary))})]},x.id)})})]})})})]}),o.notes&&a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"Notes"})}),a.jsx(re,{children:a.jsx("p",{className:"text-muted-foreground",children:o.notes})})]}),!m&&a.jsxs("div",{className:"flex justify-end gap-4",children:[a.jsxs(qd,{children:[a.jsx(cv,{asChild:!0,children:a.jsxs(G,{variant:"outline",className:"text-destructive border-destructive",children:[a.jsx(gU,{className:"h-4 w-4 mr-2"}),"Reject"]})}),a.jsxs(Xc,{children:[a.jsxs(Zc,{children:[a.jsx(eu,{children:"Reject Payroll?"}),a.jsx(tu,{children:"This will return the payroll to draft status for corrections. The payroll will need to be resubmitted for approval."})]}),a.jsxs(Jc,{children:[a.jsx(ru,{children:"Cancel"}),a.jsx(nu,{onClick:()=>h.mutate(),className:"bg-destructive text-destructive-foreground",children:"Reject Payroll"})]})]})]}),a.jsxs(qd,{children:[a.jsx(cv,{asChild:!0,children:a.jsxs(G,{children:[a.jsx(vo,{className:"h-4 w-4 mr-2"}),"Approve Payroll"]})}),a.jsxs(Xc,{children:[a.jsxs(Zc,{children:[a.jsx(eu,{children:"Approve Payroll?"}),a.jsxs(tu,{children:["By approving this payroll, you confirm that all calculations are correct and payments can proceed.",a.jsx("br",{}),a.jsx("br",{}),a.jsxs("strong",{children:["Total Net Pay: ",le(Number(o.total_net||0))]})]})]}),a.jsxs(Jc,{children:[a.jsx(ru,{children:"Cancel"}),a.jsx(nu,{onClick:()=>d.mutate(),children:"Approve Payroll"})]})]})]})]})]})}const v8e=mu({employee_id:Ue().min(1,"Employee is required"),amount:Ue().min(1,"Amount is required"),date_given:Ue().min(1,"Date given is required"),months_to_repay:Ue().min(1,"Months to repay is required"),reason:Ue().optional()});function x8e(){const{user:t}=ct(),[e,n]=N.useState(!1),r=un(),s=SN({resolver:EN(v8e),defaultValues:{employee_id:"",amount:"",date_given:vt(new Date,"yyyy-MM-dd"),months_to_repay:"1",reason:""}}),i=s.watch("amount"),o=s.watch("months_to_repay"),l=i&&o?(parseFloat(i)/parseInt(o)).toFixed(2):"0.00",{data:c}=Ne({queryKey:["advances-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const v=await Ke.getPrimaryMembershipByUser(t.id);return(v==null?void 0:v.companyId)??null},enabled:!!t}),{data:u}=Ne({queryKey:["employees-active"],queryFn:async()=>{if(!c)return[];const v=ve(te,Y.EMPLOYEES);return(await $e(Ce(v,ge("companyId","==",c)))).docs.map(j=>{const p=j.data();return{id:j.id,full_name:String(p.fullName??p.full_name??""),employee_number:p.employeeNumber??p.employee_number??null,department:p.department??null,employment_status:String(p.employmentStatus??p.employment_status??"active")}}).filter(j=>j.employment_status==="active").sort((j,p)=>j.full_name.localeCompare(p.full_name))},enabled:!!c}),{data:d,isLoading:h}=Ne({queryKey:["advances",c],queryFn:async()=>{if(!c)return[];const v=ve(te,Y.ADVANCES),j=(await $e(Ce(v,ge("companyId","==",c)))).docs.map(P=>{var $;const C=P.data(),I=C.dateGiven??C.date_given,O=typeof I=="string"?I:(($=I==null?void 0:I.toDate)==null?void 0:$.call(I).toISOString().slice(0,10))??"";return{id:P.id,employee_id:String(C.employeeId??C.employee_id??""),amount:Number(C.amount??0),date_given:O,reason:C.reason??null,status:String(C.status??"pending"),months_to_repay:Number(C.monthsToRepay??C.months_to_repay??1),monthly_deduction:Number(C.monthlyDeduction??C.monthly_deduction??0),remaining_balance:Number(C.remainingBalance??C.remaining_balance??C.amount??0),months_deducted:Number(C.monthsDeducted??C.months_deducted??0),created_at:String(C.createdAt??C.created_at??"")}}),p=Array.from(new Set(j.map(P=>P.employee_id).filter(Boolean))),E=new Map;if(p.length>0){const P=ve(te,Y.EMPLOYEES);(await $e(Ce(P,ge(Jd(),"in",p.slice(0,30))))).docs.forEach(I=>{const O=I.data();E.set(I.id,{full_name:String(O.fullName??O.full_name??""),employee_number:O.employeeNumber??O.employee_number??null,department:O.department??null})})}return j.map(P=>({...P,employees:E.get(P.employee_id)??null})).sort((P,C)=>String(C.created_at).localeCompare(String(P.created_at)))},enabled:!!c}),f=it({mutationFn:async v=>{if(!t||!c)throw new Error("Not authenticated");const S=parseFloat(v.amount),j=parseInt(v.months_to_repay),p=S/j;await jn(ve(te,Y.ADVANCES),{companyId:c,employeeId:v.employee_id,amount:S,dateGiven:v.date_given,reason:v.reason||null,status:"pending",monthsToRepay:j,monthlyDeduction:p,remainingBalance:S,monthsDeducted:0,createdBy:t.id,createdAt:ye(),updatedAt:ye()})},onSuccess:()=>{r.invalidateQueries({queryKey:["advances",c]}),Z.success("Advance recorded successfully"),n(!1),s.reset()},onError:v=>{Z.error("Failed to record advance: "+v.message)}}),m=it({mutationFn:async({id:v,status:S})=>{await or(He(te,Y.ADVANCES,v),{status:S,updatedAt:ye()},{merge:!0})},onSuccess:()=>{r.invalidateQueries({queryKey:["advances",c]}),Z.success("Advance status updated")},onError:()=>{Z.error("Failed to update status")}}),b=it({mutationFn:async v=>{const S=(v.months_deducted||0)+1,j=Number(v.remaining_balance)-Number(v.monthly_deduction),p=S>=v.months_to_repay;await or(He(te,Y.ADVANCES,v.id),{monthsDeducted:S,remainingBalance:Math.max(0,j),status:p?"deducted":"pending",updatedAt:ye()},{merge:!0})},onSuccess:()=>{r.invalidateQueries({queryKey:["advances",c]}),Z.success("Deduction recorded")},onError:()=>{Z.error("Failed to record deduction")}}),g=v=>{f.mutate(v)},x=v=>{switch(v){case"pending":return a.jsxs(Xe,{variant:"outline",className:"gap-1",children:[a.jsx(ba,{className:"h-3 w-3"})," Pending"]});case"deducted":return a.jsxs(Xe,{variant:"default",className:"gap-1 bg-green-600",children:[a.jsx(vo,{className:"h-3 w-3"})," Fully Repaid"]});case"cancelled":return a.jsxs(Xe,{variant:"destructive",className:"gap-1",children:[a.jsx(gU,{className:"h-3 w-3"})," Cancelled"]});default:return a.jsx(Xe,{variant:"secondary",children:v})}},w=(d==null?void 0:d.reduce((v,S)=>v+Number(S.amount),0))||0,y=(d==null?void 0:d.filter(v=>v.status==="pending"))||[],A=y.reduce((v,S)=>v+Number(S.remaining_balance||S.amount),0),T=(d==null?void 0:d.filter(v=>v.status==="deducted").reduce((v,S)=>v+Number(S.amount),0))||0;return h?a.jsx("div",{children:"Loading..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Employee Advances"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage salary advances and repayment schedules"})]}),a.jsxs(G,{onClick:()=>n(!0),children:[a.jsx(xn,{className:"mr-2 h-4 w-4"}),"Record Advance"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(X,{children:a.jsxs(ee,{className:"pb-2",children:[a.jsx(jt,{children:"Total Advances"}),a.jsx(ne,{className:"text-2xl",children:(d==null?void 0:d.length)||0})]})}),a.jsx(X,{children:a.jsxs(ee,{className:"pb-2",children:[a.jsx(jt,{children:"Total Amount Issued"}),a.jsx(ne,{className:"text-2xl text-primary",children:le(w)})]})}),a.jsxs(X,{className:"border-amber-200 dark:border-amber-800",children:[a.jsxs(ee,{className:"pb-2",children:[a.jsx(jt,{children:"Outstanding Balance"}),a.jsx(ne,{className:"text-2xl text-amber-600",children:le(A)})]}),a.jsx(re,{children:a.jsxs("p",{className:"text-xs text-muted-foreground",children:[y.length," active advance(s)"]})})]}),a.jsx(X,{className:"border-green-200 dark:border-green-800",children:a.jsxs(ee,{className:"pb-2",children:[a.jsx(jt,{children:"Fully Repaid"}),a.jsx(ne,{className:"text-2xl text-green-600",children:le(T)})]})})]}),a.jsxs(X,{children:[a.jsxs(ee,{children:[a.jsxs(ne,{className:"flex items-center gap-2",children:[a.jsx(wi,{className:"h-5 w-5"}),"All Advances"]}),a.jsx(jt,{children:"View and manage employee salary advances with repayment tracking"})]}),a.jsx(re,{children:a.jsx("div",{className:"rounded-lg border",children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Employee"}),a.jsx(U,{className:"text-right",children:"Total Amount"}),a.jsx(U,{children:"Repayment Schedule"}),a.jsx(U,{children:"Progress"}),a.jsx(U,{className:"text-right",children:"Remaining"}),a.jsx(U,{children:"Status"}),a.jsx(U,{children:"Actions"})]})}),a.jsxs(Wt,{children:[d==null?void 0:d.map(v=>{const S=v.employees,j=v.months_deducted||0,p=v.months_to_repay||1,E=v.remaining_balance??v.amount,P=j/p*100;return a.jsxs(_e,{children:[a.jsx(B,{children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:S==null?void 0:S.full_name}),a.jsx("div",{className:"text-sm text-muted-foreground",children:S==null?void 0:S.employee_number}),a.jsx("div",{className:"text-xs text-muted-foreground",children:vt(new Date(v.date_given),"dd MMM yyyy")})]})}),a.jsx(B,{className:"text-right font-medium",children:le(Number(v.amount))}),a.jsx(B,{children:a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[a.jsx(vd,{className:"h-3 w-3 text-muted-foreground"}),p," month",p>1?"s":""]}),a.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[a.jsx(ki,{className:"h-3 w-3"}),le(Number(v.monthly_deduction||v.amount)),"/month"]})]})}),a.jsx(B,{children:a.jsxs("div",{className:"space-y-1 min-w-[120px]",children:[a.jsx(xf,{value:P,className:"h-2"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[j," of ",p," payments"]})]})}),a.jsx(B,{className:"text-right font-medium text-amber-600",children:le(Number(E))}),a.jsx(B,{children:x(v.status)}),a.jsx(B,{children:v.status==="pending"&&a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs(qd,{children:[a.jsx(cv,{asChild:!0,children:a.jsx(G,{size:"sm",variant:"outline",children:"Record Deduction"})}),a.jsxs(Xc,{children:[a.jsxs(Zc,{children:[a.jsx(eu,{children:"Record Monthly Deduction?"}),a.jsxs(tu,{children:["This will record a deduction of ",le(Number(v.monthly_deduction||v.amount))," for ",S==null?void 0:S.full_name,".",a.jsx("br",{}),a.jsx("br",{}),a.jsx("strong",{children:"Current Progress:"})," ",j," of ",p," payments",a.jsx("br",{}),a.jsx("strong",{children:"Remaining after this:"})," ",le(Math.max(0,Number(E)-Number(v.monthly_deduction||v.amount)))]})]}),a.jsxs(Jc,{children:[a.jsx(ru,{children:"Cancel"}),a.jsx(nu,{onClick:()=>b.mutate(v),children:"Record Deduction"})]})]})]}),a.jsxs(qd,{children:[a.jsx(cv,{asChild:!0,children:a.jsx(G,{size:"sm",variant:"ghost",className:"text-destructive",children:"Cancel"})}),a.jsxs(Xc,{children:[a.jsxs(Zc,{children:[a.jsx(eu,{children:"Cancel Advance?"}),a.jsx(tu,{children:"This will cancel the advance. This action cannot be undone."})]}),a.jsxs(Jc,{children:[a.jsx(ru,{children:"Keep"}),a.jsx(nu,{className:"bg-destructive text-destructive-foreground",onClick:()=>m.mutate({id:v.id,status:"cancelled"}),children:"Cancel Advance"})]})]})]})]})})]},v.id)}),(d==null?void 0:d.length)===0&&a.jsx(_e,{children:a.jsxs(B,{colSpan:7,className:"text-center py-12",children:[a.jsx(wi,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-lg font-medium",children:"No advances recorded"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"Start by recording an employee advance"}),a.jsxs(G,{onClick:()=>n(!0),children:[a.jsx(xn,{className:"h-4 w-4 mr-2"}),"Record Advance"]})]})})]})]})})})]}),a.jsx(Jn,{open:e,onOpenChange:n,children:a.jsxs(zn,{className:"max-w-md",children:[a.jsxs(qn,{children:[a.jsx(Wn,{children:"Record Employee Advance"}),a.jsx(bu,{children:"Enter the advance details and repayment schedule"})]}),a.jsx(AN,{...s,children:a.jsxs("form",{onSubmit:s.handleSubmit(g),className:"space-y-4",children:[a.jsx(nt,{control:s.control,name:"employee_id",render:({field:v})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Employee"}),a.jsxs(It,{onValueChange:v.onChange,value:v.value,children:[a.jsx(tt,{children:a.jsx(Et,{children:a.jsx(kt,{placeholder:"Select employee"})})}),a.jsx(At,{children:u==null?void 0:u.map(S=>a.jsxs(be,{value:S.id,children:[S.full_name," (",S.employee_number,")"]},S.id))})]}),a.jsx(st,{})]})}),a.jsx(nt,{control:s.control,name:"amount",render:({field:v})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Total Amount (ZMW)"}),a.jsx(tt,{children:a.jsx(K,{type:"number",step:"0.01",placeholder:"0.00",...v})}),a.jsx(st,{})]})}),a.jsx(nt,{control:s.control,name:"date_given",render:({field:v})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Date Given"}),a.jsx(tt,{children:a.jsx(K,{type:"date",...v})}),a.jsx(st,{})]})}),a.jsx(nt,{control:s.control,name:"months_to_repay",render:({field:v})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Months to Repay"}),a.jsxs(It,{onValueChange:v.onChange,value:v.value,children:[a.jsx(tt,{children:a.jsx(Et,{children:a.jsx(kt,{placeholder:"Select months"})})}),a.jsx(At,{children:[1,2,3,4,5,6,9,12].map(S=>a.jsxs(be,{value:S.toString(),children:[S," month",S>1?"s":""]},S))})]}),a.jsxs(dd,{children:["Monthly deduction: ",a.jsx("strong",{children:le(parseFloat(l))})]}),a.jsx(st,{})]})}),a.jsx(nt,{control:s.control,name:"reason",render:({field:v})=>a.jsxs(et,{children:[a.jsx(rt,{children:"Reason (Optional)"}),a.jsx(tt,{children:a.jsx(lr,{placeholder:"Enter reason for advance",...v})}),a.jsx(st,{})]})}),a.jsxs(CN,{children:[a.jsx(G,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),a.jsx(G,{type:"submit",disabled:f.isPending,children:f.isPending?"Recording...":"Record Advance"})]})]})})]})})]})}const uB=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},b8e=t=>{if(!t)return"";if(typeof t=="string")return t.slice(0,10);if(t instanceof Date)return t.toISOString().slice(0,10);if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString().slice(0,10)}return""},_h=t=>{const e=Number(t);return Number.isFinite(e)?e:0},w8e=t=>t==null?"":String(t).replaceAll('"','""'),PS=(t,e,n)=>{const r=[t,...e].map(l=>l.map(c=>`"${w8e(c)}"`).join(",")).join(`
`),s=new Blob([r],{type:"text/csv"}),i=window.URL.createObjectURL(s),o=document.createElement("a");o.href=i,o.download=n,o.click(),window.URL.revokeObjectURL(i)};function _8e(){var A,T;const{user:t}=ct(),[e,n]=N.useState(vt(new Date,"yyyy-MM")),r=Ne({queryKey:["zra-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const v=await Ke.getPrimaryMembershipByUser(t.id);return(v==null?void 0:v.companyId)??null},enabled:!!t}),s=r.data??null,i=`${e}-01`,o=`${e}-31`,l=Ne({queryKey:["payroll-runs-zra",s,e],queryFn:async()=>{if(!s)return[];const v=ve(te,Y.PAYROLL_RUNS);return(await $e(Ce(v,ge("companyId","==",s)))).docs.map(j=>{const p=j.data();return{id:j.id,runDate:b8e(p.runDate??p.run_date)}}).filter(j=>j.runDate>=i&&j.runDate<=o).sort((j,p)=>p.runDate.localeCompare(j.runDate))},enabled:!!s}),c=Ne({queryKey:["payroll-items-zra",s,e,(A=l.data)==null?void 0:A.map(v=>v.id).join(",")],queryFn:async()=>{if(!s||!l.data||l.data.length===0)return[];const v=l.data.map(I=>I.id),S=ve(te,Y.PAYROLL_ITEMS),j=uB(v,30),E=(await Promise.all(j.map(I=>$e(Ce(S,ge("payrollRunId","in",I)))))).flatMap(I=>I.docs.map(O=>{const $=O.data();return{id:O.id,employeeId:String($.employeeId??$.employee_id??""),payrollRunId:String($.payrollRunId??$.payroll_run_id??""),grossSalary:_h($.grossSalary??$.gross_salary),paye:_h($.paye),napsaEmployee:_h($.napsaEmployee??$.napsa_employee),napsaEmployer:_h($.napsaEmployer??$.napsa_employer),nhimaEmployee:_h($.nhimaEmployee??$.nhima_employee),nhimaEmployer:_h($.nhimaEmployer??$.nhima_employer)}})),P=Array.from(new Set(E.map(I=>I.employeeId).filter(Boolean))),C=new Map;if(P.length>0){const I=ve(te,Y.EMPLOYEES),O=uB(P,30);(await Promise.all(O.map(z=>$e(Ce(I,ge(Jd(),"in",z)))))).forEach(z=>{z.docs.forEach(H=>{const M=H.data();C.set(H.id,{id:H.id,fullName:String(M.fullName??M.full_name??""),employeeNumber:M.employeeNumber??M.employee_number??null,tpin:M.tpin??null,napsaNumber:M.napsaNumber??M.napsa_number??null,nhimaNumber:M.nhimaNumber??M.nhima_number??null})})})}return E.map(I=>({...I,employee:C.get(I.employeeId)??null}))},enabled:!!s&&!!l.data&&(((T=l.data)==null?void 0:T.length)??0)>0}),u=c.data??[],d=r.isLoading||l.isLoading||c.isLoading,h=N.useMemo(()=>u.reduce((v,S)=>v+S.paye,0),[u]),f=N.useMemo(()=>u.reduce((v,S)=>v+S.napsaEmployee,0),[u]),m=N.useMemo(()=>u.reduce((v,S)=>v+S.napsaEmployer,0),[u]),b=N.useMemo(()=>u.reduce((v,S)=>v+S.nhimaEmployee,0),[u]),g=N.useMemo(()=>u.reduce((v,S)=>v+S.nhimaEmployer,0),[u]),x=()=>{u.length!==0&&PS(["TPIN","Employee Number","Employee Name","Gross Salary","PAYE"],u.map(v=>{var S,j,p;return[((S=v.employee)==null?void 0:S.tpin)||"N/A",((j=v.employee)==null?void 0:j.employeeNumber)||"",((p=v.employee)==null?void 0:p.fullName)||"",v.grossSalary,v.paye]}),`PAYE-Report-${e}.csv`)},w=()=>{u.length!==0&&PS(["NAPSA Number","Employee Number","Employee Name","Gross Salary","NAPSA Employee (5%)","NAPSA Employer (5%)","Total NAPSA"],u.map(v=>{var S,j,p;return[((S=v.employee)==null?void 0:S.napsaNumber)||"N/A",((j=v.employee)==null?void 0:j.employeeNumber)||"",((p=v.employee)==null?void 0:p.fullName)||"",v.grossSalary,v.napsaEmployee,v.napsaEmployer,v.napsaEmployee+v.napsaEmployer]}),`NAPSA-Report-${e}.csv`)},y=()=>{u.length!==0&&PS(["NHIMA Number","Employee Number","Employee Name","Gross Salary","NHIMA Employee (1%)","NHIMA Employer (1%)","Total NHIMA"],u.map(v=>{var S,j,p;return[((S=v.employee)==null?void 0:S.nhimaNumber)||"N/A",((j=v.employee)==null?void 0:j.employeeNumber)||"",((p=v.employee)==null?void 0:p.fullName)||"",v.grossSalary,v.nhimaEmployee,v.nhimaEmployer,v.nhimaEmployee+v.nhimaEmployer]}),`NHIMA-Report-${e}.csv`)};return d?a.jsx("div",{children:"Loading..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"ZRA Compliance Reports"}),a.jsx("p",{className:"text-muted-foreground",children:"Generate statutory compliance reports for ZRA, NAPSA, and NHIMA"})]}),a.jsxs("div",{className:"max-w-xs",children:[a.jsx(J,{children:"Select Month"}),a.jsx(K,{type:"month",value:e,onChange:v=>n(v.target.value)})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{className:"text-sm font-medium",children:"Total PAYE"})}),a.jsxs(re,{children:[a.jsx("div",{className:"text-2xl font-bold",children:le(h)}),a.jsxs(G,{className:"mt-4 w-full",variant:"outline",onClick:x,disabled:u.length===0,children:[a.jsx(ys,{className:"mr-2 h-4 w-4"}),"Export PAYE Report"]})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{className:"text-sm font-medium",children:"Total NAPSA"})}),a.jsxs(re,{children:[a.jsx("div",{className:"text-2xl font-bold",children:le(f+m)}),a.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Employee: ",le(f)," | Employer: ",le(m)]}),a.jsxs(G,{className:"mt-4 w-full",variant:"outline",onClick:w,disabled:u.length===0,children:[a.jsx(ys,{className:"mr-2 h-4 w-4"}),"Export NAPSA Report"]})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{className:"text-sm font-medium",children:"Total NHIMA"})}),a.jsxs(re,{children:[a.jsx("div",{className:"text-2xl font-bold",children:le(b+g)}),a.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Employee: ",le(b)," | Employer: ",le(g)]}),a.jsxs(G,{className:"mt-4 w-full",variant:"outline",onClick:y,disabled:u.length===0,children:[a.jsx(ys,{className:"mr-2 h-4 w-4"}),"Export NHIMA Report"]})]})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"Employee Details"})}),a.jsx(re,{children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Employee"}),a.jsx(U,{children:"TPIN"}),a.jsx(U,{children:"NAPSA No."}),a.jsx(U,{children:"NHIMA No."}),a.jsx(U,{children:"Gross"}),a.jsx(U,{children:"PAYE"}),a.jsx(U,{children:"NAPSA"}),a.jsx(U,{children:"NHIMA"})]})}),a.jsxs(Wt,{children:[u.map(v=>{var S,j,p,E,P;return a.jsxs(_e,{children:[a.jsx(B,{children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:((S=v.employee)==null?void 0:S.fullName)||"Unknown Employee"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:((j=v.employee)==null?void 0:j.employeeNumber)||"-"})]})}),a.jsx(B,{className:"text-sm",children:((p=v.employee)==null?void 0:p.tpin)||"N/A"}),a.jsx(B,{className:"text-sm",children:((E=v.employee)==null?void 0:E.napsaNumber)||"N/A"}),a.jsx(B,{className:"text-sm",children:((P=v.employee)==null?void 0:P.nhimaNumber)||"N/A"}),a.jsx(B,{children:le(v.grossSalary)}),a.jsx(B,{children:le(v.paye)}),a.jsx(B,{children:le(v.napsaEmployee)}),a.jsx(B,{children:le(v.nhimaEmployee)})]},v.id)}),u.length===0&&a.jsx(_e,{children:a.jsx(B,{colSpan:8,className:"text-center text-muted-foreground",children:"No payroll data found for the selected month"})})]})]})})]})]})}function j8e(){const t=Hn(),[e,n]=N.useState(""),[r,s]=N.useState(""),[i,o]=N.useState(null),l=()=>{const u=Number(r)||0;if(u<=0)return;const d=bH(u),h=wH(u),f=_H(u),m=d+h.employee+f.employee,b=u-m,g=u+h.employer+f.employer;o({paye:d,napsaEmployee:h.employee,napsaEmployer:h.employer,nhimaEmployee:f.employee,nhimaEmployer:f.employer,totalDeductions:m,netSalary:b,employerCost:g})},c=[{gross:5e3,description:"Below first threshold"},{gross:6e3,description:"In second band"},{gross:8e3,description:"In third band"},{gross:12e3,description:"In fourth band"},{gross:45e3,description:"High income example"}];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(G,{variant:"ghost",size:"sm",onClick:()=>t("/dashboard"),children:[a.jsx(No,{className:"h-4 w-4 mr-2"}),"Back"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Tax Calculator"}),a.jsx("p",{className:"text-muted-foreground",children:"Calculate PAYE, NAPSA, NHIMA, and net salary"})]})]}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsxs(X,{children:[a.jsxs(ee,{children:[a.jsxs(ne,{className:"flex items-center gap-2",children:[a.jsx(ry,{className:"h-5 w-5"}),"Calculate Taxes"]}),a.jsx(jt,{children:"Enter salary details to see tax breakdown"})]}),a.jsxs(re,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"basicSalary",children:"Basic Salary (ZMW)"}),a.jsx(K,{id:"basicSalary",type:"number",step:"0.01",placeholder:"Enter basic salary",value:e,onChange:u=>n(u.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"grossSalary",children:"Gross Salary (ZMW)"}),a.jsx(K,{id:"grossSalary",type:"number",step:"0.01",placeholder:"Enter gross salary",value:r,onChange:u=>s(u.target.value)})]}),a.jsx(G,{onClick:l,className:"w-full",children:"Calculate"}),i&&a.jsxs("div",{className:"mt-6 space-y-4 pt-4 border-t",children:[a.jsx("h3",{className:"font-semibold",children:"Results"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"PAYE Tax:"}),a.jsx("span",{className:"font-medium",children:le(i.paye)})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"NAPSA (Employee):"}),a.jsx("span",{className:"font-medium",children:le(i.napsaEmployee)})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"NHIMA (Employee):"}),a.jsx("span",{className:"font-medium",children:le(i.nhimaEmployee)})]}),a.jsxs("div",{className:"flex justify-between text-sm font-semibold pt-2 border-t",children:[a.jsx("span",{children:"Total Deductions:"}),a.jsx("span",{children:le(i.totalDeductions)})]}),a.jsxs("div",{className:"flex justify-between text-lg font-bold pt-2 border-t",children:[a.jsx("span",{children:"Net Salary:"}),a.jsx("span",{className:"text-primary",children:le(i.netSalary)})]})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t space-y-2",children:[a.jsx("h4",{className:"font-semibold text-sm",children:"Employer Contributions"}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"NAPSA (Employer):"}),a.jsx("span",{className:"font-medium",children:le(i.napsaEmployer)})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"NHIMA (Employer):"}),a.jsx("span",{className:"font-medium",children:le(i.nhimaEmployer)})]}),a.jsxs("div",{className:"flex justify-between text-sm font-semibold pt-2 border-t",children:[a.jsx("span",{children:"Total Employer Cost:"}),a.jsx("span",{children:le(i.employerCost)})]})]})]})]})]}),a.jsxs(X,{children:[a.jsxs(ee,{children:[a.jsx(ne,{children:"Tax Band Reference"}),a.jsx(jt,{children:"Zambian PAYE tax bands (2025/26)"})]}),a.jsxs(re,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"border rounded-lg p-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-medium",children:"K0 - K5,100"}),a.jsx("span",{className:"text-sm font-bold",children:"0%"})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"First K5,100 is tax-free"})]}),a.jsxs("div",{className:"border rounded-lg p-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-medium",children:"K5,100.01 - K7,100"}),a.jsx("span",{className:"text-sm font-bold",children:"20%"})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Next K2,000 taxed at 20%"})]}),a.jsxs("div",{className:"border rounded-lg p-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-medium",children:"K7,100.01 - K9,200"}),a.jsx("span",{className:"text-sm font-bold",children:"30%"})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Next K2,100 taxed at 30%"})]}),a.jsxs("div",{className:"border rounded-lg p-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-medium",children:"Above K9,200"}),a.jsx("span",{className:"text-sm font-bold",children:"37%"})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Balance taxed at 37%"})]})]}),a.jsxs("div",{className:"mt-6 pt-4 border-t",children:[a.jsx("h4",{className:"font-semibold text-sm mb-3",children:"Quick Examples"}),a.jsx("div",{className:"space-y-2",children:c.map(u=>a.jsxs(G,{variant:"outline",size:"sm",className:"w-full justify-between",onClick:()=>{n(u.gross.toString()),s(u.gross.toString())},children:[a.jsx("span",{className:"text-xs",children:u.description}),a.jsx("span",{className:"font-semibold",children:le(u.gross)})]},u.gross))})]}),a.jsxs("div",{className:"mt-4 p-3 bg-muted rounded-lg text-xs space-y-1",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"NAPSA:"})," 5% of gross salary, capped at K1,342.00 (employee & employer)"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"NHIMA:"})," 1% of gross salary, capped at K250.00 (employee & employer)"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"PAYE:"})," Progressive tax on gross salary"]})]})]})]})]})]})}function N8e(t){const e=[];let n="",r=!1;for(let s=0;s<t.length;s++){const i=t[s];i==='"'?r&&t[s+1]==='"'?(n+='"',s++):r=!r:i===","&&!r?(e.push(n.trim()),n=""):n+=i}return e.push(n.trim()),e}function S8e(t){return t.replace(/^\uFEFF/,"").split(/\r?\n/).filter(r=>r.trim()).map(N8e)}function E8e(t,e){const n={success:!1,data:[],errors:[],totalRows:0,successfulRows:0};if(t.length<2)return n.errors.push("File must contain at least a header row and one data row"),n;const r=t[0].map(l=>l.toLowerCase().trim()),s=t.slice(1);n.totalRows=s.length;const i={};e.forEach(l=>{const c=r.findIndex(u=>u===l.header.toLowerCase()||u===l.key.toLowerCase());c!==-1&&(i[l.key]=c)});const o=e.filter(l=>l.required&&i[l.key]===void 0).map(l=>l.header);return o.length>0?(n.errors.push(`Missing required columns: ${o.join(", ")}`),n):(s.forEach((l,c)=>{try{const u={};let d=!1;e.forEach(h=>{var m;const f=i[h.key];if(f!==void 0&&f<l.length){const b=((m=l[f])==null?void 0:m.trim())||"";if(h.required&&!b){n.errors.push(`Row ${c+2}: Missing required value for ${h.header}`),d=!0;return}u[h.key]=h.transform?h.transform(b):b}else h.required&&(n.errors.push(`Row ${c+2}: Missing required value for ${h.header}`),d=!0)}),d||(n.data.push(u),n.successfulRows++)}catch(u){n.errors.push(`Row ${c+2}: ${u instanceof Error?u.message:"Unknown error"}`)}}),n.success=n.successfulRows>0,n)}function A8e(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=s=>{var i;return e((i=s.target)==null?void 0:i.result)},r.onerror=()=>n(new Error("Failed to read file")),r.readAsText(t)})}async function T8e(t,e){try{const n=await A8e(t),r=S8e(n);return E8e(r,e)}catch(n){return{success:!1,data:[],errors:[n instanceof Error?n.message:"Failed to parse file"],totalRows:0,successfulRows:0}}}const fs={toNumber:t=>{const e=parseFloat(t.replace(/[^0-9.-]/g,""));return isNaN(e)?0:e},toDate:t=>{if(!t)return"";try{return new Date(t).toISOString().split("T")[0]}catch{return t}},toBoolean:t=>["true","yes","1","y"].includes(t.toLowerCase()),trim:t=>t.trim()};function C8e(t){const e=t.map(c=>c.header),n=t.map(c=>c.key.includes("date")?"2025-01-01":c.key.includes("amount")||c.key.includes("price")||c.key.includes("salary")?"1000.00":c.key.includes("email")?"example@email.com":c.key.includes("phone")?"+260971234567":`Example ${c.header}`),r=[e.join(","),n.join(",")].join(`
`),s="\uFEFF",i=new Blob([s+r],{type:"text/csv;charset=utf-8;"}),o=window.URL.createObjectURL(i),l=document.createElement("a");l.href=o,l.download="import-template.csv",l.click(),window.URL.revokeObjectURL(o),Z.success("Template downloaded")}function hp({open:t,onOpenChange:e,title:n,description:r,columns:s,onImport:i,templateName:o="import-template"}){const[l,c]=N.useState("upload"),[u,d]=N.useState(null),[h,f]=N.useState(!1),[m,b]=N.useState(!1),[g,x]=N.useState(null),w=N.useRef(null),y=async S=>{var E;const j=(E=S.target.files)==null?void 0:E[0];if(!j)return;const p=await T8e(j,s);d(p),c("preview")},A=async()=>{if(!(!u||u.data.length===0)){f(!0),x(null),c("importing");try{await i(u.data),b(!0),c("complete")}catch(S){x(S instanceof Error?S.message:"Import failed"),c("preview")}finally{f(!1)}}},T=()=>{c("upload"),d(null),b(!1),x(null),w.current&&(w.current.value=""),e(!1)},v=()=>{C8e(s)};return a.jsx(Jn,{open:t,onOpenChange:T,children:a.jsxs(zn,{className:"max-w-2xl",children:[a.jsxs(qn,{children:[a.jsxs(Wn,{className:"flex items-center gap-2",children:[a.jsx(vte,{className:"h-5 w-5"}),n]}),r&&a.jsx(bu,{children:r})]}),l==="upload"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>{var S;return(S=w.current)==null?void 0:S.click()},children:[a.jsx(So,{className:"h-10 w-10 mx-auto text-muted-foreground mb-4"}),a.jsx("p",{className:"text-lg font-medium",children:"Drop your CSV file here"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"or click to browse"}),a.jsx("input",{ref:w,type:"file",accept:".csv",onChange:y,className:"hidden"})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Need a template?"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Download our CSV template with the correct headers"})]}),a.jsxs(G,{variant:"outline",size:"sm",onClick:v,children:[a.jsx(ys,{className:"h-4 w-4 mr-2"}),"Template"]})]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.jsx("p",{className:"font-medium mb-2",children:"Expected columns:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:s.map(S=>a.jsxs(Xe,{variant:S.required?"default":"outline",children:[S.header,S.required&&" *"]},S.key))})]})]}),l==="preview"&&u&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Import Preview"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[u.successfulRows," of ",u.totalRows," rows ready to import"]})]}),u.success?a.jsxs(Xe,{variant:"default",className:"bg-success",children:[a.jsx(BR,{className:"h-3 w-3 mr-1"}),"Valid"]}):a.jsxs(Xe,{variant:"destructive",children:[a.jsx(xa,{className:"h-3 w-3 mr-1"}),"Has Errors"]})]}),u.errors.length>0&&a.jsxs(Cm,{variant:"destructive",children:[a.jsx(xa,{className:"h-4 w-4"}),a.jsxs(Pm,{children:[a.jsxs("p",{className:"font-medium mb-2",children:["Found ",u.errors.length," error(s):"]}),a.jsx(ld,{className:"h-24",children:a.jsxs("ul",{className:"list-disc list-inside text-sm space-y-1",children:[u.errors.slice(0,10).map((S,j)=>a.jsx("li",{children:S},j)),u.errors.length>10&&a.jsxs("li",{children:["...and ",u.errors.length-10," more"]})]})})]})]}),g&&a.jsxs(Cm,{variant:"destructive",children:[a.jsx(xa,{className:"h-4 w-4"}),a.jsx(Pm,{children:g})]}),u.data.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium mb-2",children:"Preview (first 5 rows):"}),a.jsx(ld,{className:"h-40 border rounded",children:a.jsx("div",{className:"p-2 text-xs font-mono",children:u.data.slice(0,5).map((S,j)=>a.jsxs("div",{className:"py-1 border-b last:border-0",children:[JSON.stringify(S,null,0).slice(0,100),"..."]},j))})})]})]}),l==="importing"&&a.jsxs("div",{className:"py-8 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-lg font-medium",children:"Importing data..."}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Please wait while we process your data"})]}),l==="complete"&&a.jsxs("div",{className:"py-8 text-center",children:[a.jsx(BR,{className:"h-12 w-12 text-success mx-auto mb-4"}),a.jsx("p",{className:"text-lg font-medium",children:"Import Complete!"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Successfully imported ",(u==null?void 0:u.successfulRows)||0," records"]})]}),a.jsxs(CN,{children:[l==="upload"&&a.jsx(G,{variant:"outline",onClick:T,children:"Cancel"}),l==="preview"&&a.jsxs(a.Fragment,{children:[a.jsx(G,{variant:"outline",onClick:()=>c("upload"),children:"Back"}),a.jsxs(G,{onClick:A,disabled:!(u!=null&&u.success)||u.data.length===0,children:["Import ",(u==null?void 0:u.successfulRows)||0," Records"]})]}),l==="complete"&&a.jsx(G,{onClick:T,children:"Done"})]})]})})}function oh(t,e,n){if(t.length===0){console.warn("No data to export");return}const r=e.map(d=>d.header),s=t.map(d=>e.map(h=>{const f=d[h.key],b=(h.formatter?h.formatter(f):String(f??"")).replace(/"/g,'""');return b.includes(",")||b.includes('"')||b.includes(`
`)?`"${b}"`:b})),i=[r.join(","),...s.map(d=>d.join(","))].join(`
`),o="\uFEFF",l=new Blob([o+i],{type:"text/csv;charset=utf-8;"}),c=window.URL.createObjectURL(l),u=document.createElement("a");u.href=c,u.download=`${n}.csv`,u.click(),window.URL.revokeObjectURL(c)}function P8e(t){return(typeof t=="number"?t:parseFloat(String(t))||0).toFixed(2)}function I8e(t){if(!t)return"";try{return new Date(String(t)).toISOString().split("T")[0]}catch{return String(t)}}const k8e=[{header:"Name",key:"name",required:!0,transform:fs.trim},{header:"Email",key:"email",transform:fs.trim},{header:"Phone",key:"phone",transform:fs.trim},{header:"Address",key:"address",transform:fs.trim},{header:"TPIN",key:"tpin",transform:fs.trim},{header:"Contact Person",key:"contact_person",transform:fs.trim},{header:"Notes",key:"notes",transform:fs.trim},{header:"Grant Reference",key:"grant_reference",transform:fs.trim}],O8e=[{header:"Name",key:"name"},{header:"Email",key:"email"},{header:"Phone",key:"phone"},{header:"TPIN",key:"tpin"},{header:"Contact Person",key:"contact_person"},{header:"Address",key:"address"},{header:"Grant Reference",key:"grant_reference"},{header:"Notes",key:"notes"}],R8e=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n};function M8e(){const t=Hn(),e=un(),{user:n}=ct(),[r,s]=N.useState(""),[i,o]=N.useState(!1),[l,c]=N.useState(!1),[u,d]=N.useState(null),[h,f]=N.useState({name:"",email:"",phone:"",address:"",tpin:"",contact_person:"",notes:"",project_id:"",grant_reference:""}),{data:m,isLoading:b}=Ne({queryKey:["customers",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const p=await Ke.getPrimaryMembershipByUser(n.id);if(!(p!=null&&p.companyId))return[];const E=ve(te,Y.CUSTOMERS);return(await $e(Ce(E,ge("companyId","==",p.companyId)))).docs.map(C=>{const I=C.data();return{id:C.id,name:String(I.name??""),email:I.email??null,phone:I.phone??null,address:I.address??null,tpin:I.tpin??null,contact_person:I.contactPerson??I.contact_person??null,notes:I.notes??null,project_id:I.projectId??I.project_id??null,grant_reference:I.grantReference??I.grant_reference??null}}).sort((C,I)=>C.name.localeCompare(I.name))},enabled:!!n}),g=it({mutationFn:async p=>{if(!n)throw new Error("You must be logged in");const E=await Ke.getPrimaryMembershipByUser(n.id);if(!(E!=null&&E.companyId))throw new Error("No company profile found for your account");await jn(ve(te,Y.CUSTOMERS),{companyId:E.companyId,userId:n.id,name:p.name,email:p.email||null,phone:p.phone||null,address:p.address||null,tpin:p.tpin||null,contactPerson:p.contact_person||null,notes:p.notes||null,projectId:p.project_id||null,grantReference:p.grant_reference||null,createdAt:ye(),updatedAt:ye()})},onSuccess:()=>{e.invalidateQueries({queryKey:["customers",n==null?void 0:n.id]}),Z.success("Customer created successfully"),y()},onError:p=>{Z.error("Failed to create customer: "+(p instanceof Error?p.message:"Unknown error"))}}),x=it({mutationFn:async({id:p,data:E})=>{await or(He(te,Y.CUSTOMERS,p),{name:E.name,email:E.email||null,phone:E.phone||null,address:E.address||null,tpin:E.tpin||null,contactPerson:E.contact_person||null,notes:E.notes||null,projectId:E.project_id||null,grantReference:E.grant_reference||null,updatedAt:ye()},{merge:!0})},onSuccess:()=>{e.invalidateQueries({queryKey:["customers",n==null?void 0:n.id]}),Z.success("Customer updated successfully"),y()},onError:p=>{Z.error("Failed to update customer: "+(p instanceof Error?p.message:"Unknown error"))}}),w=it({mutationFn:async p=>{await Li(He(te,Y.CUSTOMERS,p))},onSuccess:()=>{e.invalidateQueries({queryKey:["customers",n==null?void 0:n.id]}),Z.success("Customer deleted successfully")},onError:p=>{Z.error("Failed to delete customer: "+(p instanceof Error?p.message:"Unknown error"))}}),y=()=>{f({name:"",email:"",phone:"",address:"",tpin:"",contact_person:"",notes:"",project_id:"",grant_reference:""}),d(null),o(!1)},A=p=>{d(p),f({name:p.name,email:p.email||"",phone:p.phone||"",address:p.address||"",tpin:p.tpin||"",contact_person:p.contact_person||"",notes:p.notes||"",project_id:p.project_id||"",grant_reference:p.grant_reference||""}),o(!0)},T=p=>{p.preventDefault(),u?x.mutate({id:u.id,data:h}):g.mutate(h)},v=m==null?void 0:m.filter(p=>{var E,P;return p.name.toLowerCase().includes(r.toLowerCase())||((E=p.email)==null?void 0:E.toLowerCase().includes(r.toLowerCase()))||((P=p.phone)==null?void 0:P.includes(r))}),S=async p=>{if(!n)throw new Error("You must be logged in");const E=await Ke.getPrimaryMembershipByUser(n.id);if(!(E!=null&&E.companyId))throw new Error("No company profile found for your account");const P=p.map(O=>({companyId:E.companyId,userId:n.id,name:String(O.name||""),email:O.email||null,phone:O.phone||null,address:O.address||null,tpin:O.tpin||null,contactPerson:O.contact_person||null,notes:O.notes||null,projectId:null,grantReference:O.grant_reference||null,createdAt:ye(),updatedAt:ye()})),C=ve(te,Y.CUSTOMERS),I=R8e(P,400);for(const O of I){const $=ml(te);O.forEach(z=>{$.set(He(C),z)}),await $.commit()}e.invalidateQueries({queryKey:["customers",n==null?void 0:n.id]}),Z.success(`Imported ${p.length} customers`)},j=()=>{if(!m||m.length===0){Z.error("No customers to export");return}oh(m,O8e,"customers-export"),Z.success("Customers exported")};return b?a.jsx("div",{children:"Loading..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Customers"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your customers and their information"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(G,{variant:"outline",onClick:()=>c(!0),children:[a.jsx(So,{className:"mr-2 h-4 w-4"}),"Import"]}),a.jsxs(G,{variant:"outline",onClick:j,children:[a.jsx(ys,{className:"mr-2 h-4 w-4"}),"Export"]}),a.jsxs(Jn,{open:i,onOpenChange:p=>{o(p),p||y()},children:[a.jsx(Hr,{asChild:!0,children:a.jsxs(G,{children:[a.jsx(xn,{className:"mr-2 h-4 w-4"}),"Add Customer"]})}),a.jsxs(zn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsx(qn,{children:a.jsx(Wn,{children:u?"Edit Customer":"Add New Customer"})}),a.jsxs("form",{onSubmit:T,className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"name",children:"Customer Name *"}),a.jsx(K,{id:"name",value:h.name,onChange:p=>f({...h,name:p.target.value}),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"contact_person",children:"Contact Person"}),a.jsx(K,{id:"contact_person",value:h.contact_person,onChange:p=>f({...h,contact_person:p.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"email",children:"Email"}),a.jsx(K,{id:"email",type:"email",value:h.email,onChange:p=>f({...h,email:p.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"phone",children:"Phone"}),a.jsx(K,{id:"phone",value:h.phone,onChange:p=>f({...h,phone:p.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"tpin",children:"TPIN"}),a.jsx(K,{id:"tpin",value:h.tpin,onChange:p=>f({...h,tpin:p.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"project_id",children:"Project Reference"}),a.jsx(K,{id:"project_id",value:h.project_id,onChange:p=>f({...h,project_id:p.target.value}),placeholder:"For NGO project tracking"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"grant_reference",children:"Grant Reference"}),a.jsx(K,{id:"grant_reference",value:h.grant_reference,onChange:p=>f({...h,grant_reference:p.target.value}),placeholder:"For donor/grant tracking"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"address",children:"Address"}),a.jsx(lr,{id:"address",value:h.address,onChange:p=>f({...h,address:p.target.value}),rows:2})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"notes",children:"Notes"}),a.jsx(lr,{id:"notes",value:h.notes,onChange:p=>f({...h,notes:p.target.value}),rows:2})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(G,{type:"button",variant:"outline",onClick:y,children:"Cancel"}),a.jsxs(G,{type:"submit",children:[u?"Update":"Create"," Customer"]})]})]})]})]})]})]}),a.jsx(hp,{open:l,onOpenChange:c,title:"Import Customers",description:"Upload a CSV file to import customers in bulk",columns:k8e,onImport:S}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"relative flex-1",children:[a.jsx(na,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a.jsx(K,{placeholder:"Search customers...",value:r,onChange:p=>s(p.target.value),className:"pl-10"})]})})}),a.jsx(re,{children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Name"}),a.jsx(U,{children:"Contact Person"}),a.jsx(U,{children:"Email"}),a.jsx(U,{children:"Phone"}),a.jsx(U,{children:"TPIN"}),a.jsx(U,{className:"text-right",children:"Actions"})]})}),a.jsxs(Wt,{children:[v==null?void 0:v.map(p=>a.jsxs(_e,{children:[a.jsx(B,{className:"font-medium",children:p.name}),a.jsx(B,{children:p.contact_person||"-"}),a.jsx(B,{children:p.email||"-"}),a.jsx(B,{children:p.phone||"-"}),a.jsx(B,{children:p.tpin||"-"}),a.jsx(B,{className:"text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(G,{variant:"ghost",size:"icon",onClick:()=>t(`/quotations/new?customer=${p.id}`),title:"Create Quotation",children:a.jsx(Vf,{className:"h-4 w-4"})}),a.jsx(G,{variant:"ghost",size:"icon",onClick:()=>t(`/invoices/new?customer=${p.id}`),title:"Create Invoice",children:a.jsx(ar,{className:"h-4 w-4"})}),a.jsx(G,{variant:"ghost",size:"icon",onClick:()=>A(p),children:a.jsx(Mm,{className:"h-4 w-4"})}),a.jsx(G,{variant:"ghost",size:"icon",onClick:()=>w.mutate(p.id),children:a.jsx(xs,{className:"h-4 w-4"})})]})})]},p.id)),(v==null?void 0:v.length)===0&&a.jsx(_e,{children:a.jsx(B,{colSpan:6,className:"text-center text-muted-foreground",children:"No customers found"})})]})]})})]})]})}const D8e=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},L8e=t=>{if(!t)return"";if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return""};function $8e(){const t=Hn(),e=un(),{user:n}=ct(),[r,s]=N.useState(""),[i,o]=N.useState(!1),{data:l}=xu(),[c,u]=N.useState({customer_id:"",order_type:"sale",notes:""}),{data:d,isLoading:h}=Ne({queryKey:["sales-orders",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const w=await Ke.getPrimaryMembershipByUser(n.id);if(!(w!=null&&w.companyId))return[];const y=ve(te,Y.SALES_ORDERS),T=(await $e(Ce(y,ge("companyId","==",w.companyId)))).docs.map(j=>{const p=j.data();return{id:j.id,orderNumber:String(p.orderNumber??p.order_number??""),orderDate:L8e(p.orderDate??p.order_date),customerId:p.customerId??p.customer_id??null,customerName:"-",orderType:String(p.orderType??p.order_type??"sale"),subtotal:Number(p.subtotal??0),vatAmount:Number(p.vatAmount??p.vat_amount??0),total:Number(p.total??0),status:String(p.status??"pending")}}),v=Array.from(new Set(T.map(j=>j.customerId).filter(Boolean))),S=new Map;if(v.length>0){const j=ve(te,Y.CUSTOMERS),p=D8e(v,30);(await Promise.all(p.map(P=>$e(Ce(j,ge(Jd(),"in",P)))))).forEach(P=>{P.docs.forEach(C=>{const I=C.data();S.set(C.id,String(I.name??"-"))})})}return T.map(j=>({...j,customerName:j.customerId&&S.get(j.customerId)||"-"})).sort((j,p)=>String(p.orderDate).localeCompare(String(j.orderDate)))},enabled:!!n}),{data:f}=Ne({queryKey:["customers",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const w=await Ke.getPrimaryMembershipByUser(n.id);if(!(w!=null&&w.companyId))return[];const y=ve(te,Y.CUSTOMERS);return(await $e(Ce(y,ge("companyId","==",w.companyId)))).docs.map(T=>{const v=T.data();return{id:T.id,name:String(v.name??"")}}).sort((T,v)=>T.name.localeCompare(v.name))},enabled:!!n}),m=it({mutationFn:async w=>{if(!n)throw new Error("You must be logged in");const y=await Ke.getPrimaryMembershipByUser(n.id);if(!(y!=null&&y.companyId))throw new Error("No company profile found for your account");const A=`SO-${Date.now()}`;await jn(ve(te,Y.SALES_ORDERS),{companyId:y.companyId,userId:n.id,customerId:w.customer_id||null,orderType:w.order_type,notes:w.notes||null,orderNumber:A,orderDate:new Date().toISOString().slice(0,10),subtotal:0,vatAmount:0,total:0,status:"pending",createdAt:ye(),updatedAt:ye()})},onSuccess:()=>{e.invalidateQueries({queryKey:["sales-orders",n==null?void 0:n.id]}),Z.success("Sales order created successfully"),o(!1),u({customer_id:"",order_type:"sale",notes:""})},onError:w=>{Z.error("Failed to create order: "+(w instanceof Error?w.message:"Unknown error"))}}),b=w=>{switch(w){case"completed":case"accepted":return"default";case"pending":case"draft":return"secondary";case"cancelled":case"rejected":return"destructive";default:return"outline"}},g=w=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(w),x=d==null?void 0:d.filter(w=>w.orderNumber.toLowerCase().includes(r.toLowerCase())||w.customerName.toLowerCase().includes(r.toLowerCase()));return h?a.jsx("div",{children:"Loading..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Sales & Orders"}),a.jsxs("p",{className:"text-muted-foreground",children:["Manage sales transactions and orders",(l==null?void 0:l.isVatRegistered)&&a.jsx("span",{className:"ml-2 text-xs bg-primary/10 text-primary px-2 py-0.5 rounded",children:"VAT Registered (16%)"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(G,{variant:"outline",onClick:()=>t("/quotations/new"),children:[a.jsx(Vf,{className:"mr-2 h-4 w-4"}),"New Quotation"]}),a.jsxs(Jn,{open:i,onOpenChange:o,children:[a.jsx(Hr,{asChild:!0,children:a.jsxs(G,{children:[a.jsx(xn,{className:"mr-2 h-4 w-4"}),"New Order"]})}),a.jsxs(zn,{children:[a.jsx(qn,{children:a.jsx(Wn,{children:"Create Sales Order"})}),a.jsxs("form",{onSubmit:w=>{w.preventDefault(),m.mutate(c)},className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"customer",children:"Customer"}),a.jsxs(It,{value:c.customer_id,onValueChange:w=>u({...c,customer_id:w}),children:[a.jsx(Et,{children:a.jsx(kt,{placeholder:"Select customer"})}),a.jsx(At,{children:f==null?void 0:f.map(w=>a.jsx(be,{value:w.id,children:w.name},w.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"type",children:"Order Type"}),a.jsxs(It,{value:c.order_type,onValueChange:w=>u({...c,order_type:w}),children:[a.jsx(Et,{children:a.jsx(kt,{})}),a.jsxs(At,{children:[a.jsx(be,{value:"sale",children:"Sale"}),a.jsx(be,{value:"estimate",children:"Estimate"}),a.jsx(be,{value:"quote",children:"Quote"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"notes",children:"Notes"}),a.jsx(lr,{id:"notes",value:c.notes,onChange:w=>u({...c,notes:w.target.value})})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(G,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),a.jsx(G,{type:"submit",children:"Create Order"})]})]})]})]})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"relative flex-1",children:[a.jsx(na,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a.jsx(K,{placeholder:"Search orders...",value:r,onChange:w=>s(w.target.value),className:"pl-10"})]})})}),a.jsx(re,{children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Order #"}),a.jsx(U,{children:"Date"}),a.jsx(U,{children:"Customer"}),a.jsx(U,{children:"Type"}),a.jsx(U,{className:"text-right",children:"Subtotal"}),(l==null?void 0:l.isVatRegistered)&&a.jsx(U,{className:"text-right",children:"VAT"}),a.jsx(U,{className:"text-right",children:"Total"}),a.jsx(U,{children:"Status"}),a.jsx(U,{className:"text-right",children:"Actions"})]})}),a.jsxs(Wt,{children:[x==null?void 0:x.map(w=>a.jsxs(_e,{children:[a.jsx(B,{className:"font-medium",children:w.orderNumber}),a.jsx(B,{children:w.orderDate?vt(new Date(w.orderDate),"dd MMM yyyy"):"-"}),a.jsx(B,{children:w.customerName||"-"}),a.jsx(B,{className:"capitalize",children:w.orderType}),a.jsx(B,{className:"text-right",children:g(w.subtotal)}),(l==null?void 0:l.isVatRegistered)&&a.jsx(B,{className:"text-right",children:g(w.vatAmount)}),a.jsx(B,{className:"text-right",children:g(w.total)}),a.jsx(B,{children:a.jsx(Xe,{variant:b(w.status||"pending"),children:w.status})}),a.jsx(B,{className:"text-right",children:a.jsx(G,{variant:"ghost",size:"icon",onClick:()=>t(`/invoices/new?order=${w.id}`),title:"Convert to Invoice",children:a.jsx(ar,{className:"h-4 w-4"})})})]},w.id)),(x==null?void 0:x.length)===0&&a.jsx(_e,{children:a.jsx(B,{colSpan:l!=null&&l.isVatRegistered?9:8,className:"text-center text-muted-foreground",children:"No orders found"})})]})]})})]})]})}function F8e(){const t=Hn(),[e]=I6(),n=e.get("customer"),{user:r}=ct(),{data:s}=xu(),[i,o]=N.useState(n||""),[l,c]=N.useState(`QT-${Date.now()}`),[u,d]=N.useState(new Date().toISOString().split("T")[0]),[h,f]=N.useState(""),[m,b]=N.useState(""),[g,x]=N.useState("This quotation is valid for 30 days from the date of issue."),[w,y]=N.useState([{id:"1",description:"",quantity:1,rate:0,amount:0}]),{data:A}=Ne({queryKey:["customers",r==null?void 0:r.id],queryFn:async()=>{if(!r)return[];const M=await Ke.getPrimaryMembershipByUser(r.id);if(!(M!=null&&M.companyId))return[];const F=ve(te,Y.CUSTOMERS);return(await $e(Ce(F,ge("companyId","==",M.companyId)))).docs.map(W=>{const ie=W.data();return{id:W.id,name:String(ie.name??""),email:ie.email?String(ie.email):void 0,address:ie.address?String(ie.address):void 0}}).sort((W,ie)=>W.name.localeCompare(ie.name))},enabled:!!r}),T=(s==null?void 0:s.isVatRegistered)||!1,v=(s==null?void 0:s.vatRate)||16,S=()=>{y([...w,{id:Date.now().toString(),description:"",quantity:1,rate:0,amount:0}])},j=M=>{w.length>1&&y(w.filter(F=>F.id!==M))},p=(M,F,L)=>{y(w.map(W=>{if(W.id===M){const ie={...W,[F]:L};return(F==="quantity"||F==="rate")&&(ie.amount=ie.quantity*ie.rate),ie}return W}))},E=w.reduce((M,F)=>M+F.amount,0),P=T?E*(v/100):0,C=E+P,I=A==null?void 0:A.find(M=>M.id===i),O=it({mutationFn:async M=>{if(!r)throw new Error("You must be logged in");const F=await Ke.getPrimaryMembershipByUser(r.id);if(!(F!=null&&F.companyId))throw new Error("No company profile found for your account");await jn(ve(te,Y.SALES_ORDERS),{companyId:F.companyId,userId:r.id,customerId:i||null,orderNumber:l,orderDate:u,orderType:"quote",subtotal:E,vatAmount:P,total:C,status:M,notes:m,terms:g,validUntil:h||null,lineItems:w,createdAt:ye(),updatedAt:ye()})},onSuccess:(M,F)=>{Z.success(F==="sent"?"Quotation sent successfully":"Quotation saved as draft"),t("/sales-orders")},onError:M=>{Z.error("Failed to save quotation: "+(M instanceof Error?M.message:"Unknown error"))}}),$=()=>{const M=encodeURIComponent(JSON.stringify(w));t(`/invoices/new?customer=${i}&lines=${M}`)},z=(M=!1)=>{if(!i){Z.error("Please select a customer");return}O.mutate(M?"sent":"draft")},H=M=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(M);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"New Quotation"}),a.jsxs("p",{className:"text-muted-foreground",children:["Create a quotation for a customer",T&&a.jsxs("span",{className:"ml-2 text-xs bg-primary/10 text-primary px-2 py-0.5 rounded",children:["VAT ",v,"%"]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(G,{variant:"outline",onClick:()=>t("/sales-orders"),children:"Cancel"}),a.jsxs(G,{variant:"outline",className:"gap-2",onClick:()=>z(!1),disabled:O.isPending,children:[a.jsx(bd,{className:"h-4 w-4"}),"Save Draft"]}),a.jsxs(G,{className:"gap-2",onClick:()=>z(!0),disabled:O.isPending,children:[a.jsx(wU,{className:"h-4 w-4"}),"Save & Send"]})]})]}),a.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"Quotation Details"})}),a.jsx(re,{className:"space-y-4",children:a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"customer",children:"Customer *"}),a.jsxs(It,{value:i,onValueChange:o,children:[a.jsx(Et,{id:"customer",children:a.jsx(kt,{placeholder:"Select customer"})}),a.jsx(At,{children:A==null?void 0:A.map(M=>a.jsx(be,{value:M.id,children:M.name},M.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"quoteNumber",children:"Quotation Number *"}),a.jsx(K,{id:"quoteNumber",value:l,onChange:M=>c(M.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"quoteDate",children:"Quotation Date *"}),a.jsx(K,{id:"quoteDate",type:"date",value:u,onChange:M=>d(M.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"validUntil",children:"Valid Until"}),a.jsx(K,{id:"validUntil",type:"date",value:h,onChange:M=>f(M.target.value)})]})]})})]}),I&&a.jsx(X,{className:"bg-muted/30",children:a.jsx(re,{className:"pt-4",children:a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"font-medium",children:I.name}),I.email&&a.jsx("p",{className:"text-muted-foreground",children:I.email}),I.address&&a.jsx("p",{className:"text-muted-foreground",children:I.address})]})})}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"Line Items"})}),a.jsx(re,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-4 md:grid-cols-12 text-sm font-medium text-muted-foreground",children:[a.jsx("div",{className:"md:col-span-5",children:"Description"}),a.jsx("div",{className:"md:col-span-2",children:"Qty"}),a.jsx("div",{className:"md:col-span-2",children:"Rate (ZMW)"}),a.jsx("div",{className:"md:col-span-2",children:"Amount"}),a.jsx("div",{className:"md:col-span-1"})]}),w.map(M=>a.jsxs("div",{className:"grid gap-4 md:grid-cols-12 items-start",children:[a.jsx("div",{className:"md:col-span-5",children:a.jsx(lr,{placeholder:"Item description",value:M.description,onChange:F=>p(M.id,"description",F.target.value),rows:2})}),a.jsx("div",{className:"md:col-span-2",children:a.jsx(K,{type:"number",placeholder:"Qty",value:M.quantity,onChange:F=>p(M.id,"quantity",parseFloat(F.target.value)||0),min:"0",step:"0.01"})}),a.jsx("div",{className:"md:col-span-2",children:a.jsx(K,{type:"number",placeholder:"Rate",value:M.rate,onChange:F=>p(M.id,"rate",parseFloat(F.target.value)||0),min:"0",step:"0.01"})}),a.jsx("div",{className:"md:col-span-2",children:a.jsx(K,{value:H(M.amount),disabled:!0,className:"bg-muted"})}),a.jsx("div",{className:"md:col-span-1",children:a.jsx(G,{type:"button",variant:"ghost",size:"icon",onClick:()=>j(M.id),disabled:w.length===1,children:a.jsx(xs,{className:"h-4 w-4"})})})]},M.id)),a.jsxs(G,{type:"button",variant:"outline",className:"gap-2",onClick:S,children:[a.jsx(xn,{className:"h-4 w-4"}),"Add Line Item"]})]})})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"Notes & Terms"})}),a.jsxs(re,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"notes",children:"Notes (visible to customer)"}),a.jsx(lr,{id:"notes",placeholder:"Add any notes or special conditions",rows:3,value:m,onChange:M=>b(M.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"terms",children:"Terms & Conditions"}),a.jsx(lr,{id:"terms",placeholder:"Quotation terms and conditions",rows:3,value:g,onChange:M=>x(M.target.value)})]})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"Summary"})}),a.jsxs(re,{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),a.jsx("span",{className:"font-medium",children:H(E)})]}),T&&a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsxs("span",{className:"text-muted-foreground",children:["VAT (",v,"%)"]}),a.jsx("span",{className:"font-medium",children:H(P)})]}),a.jsxs("div",{className:"border-t pt-3 flex justify-between",children:[a.jsx("span",{className:"font-semibold",children:"Total"}),a.jsx("span",{className:"text-xl font-bold text-primary",children:H(C)})]})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"Actions"})}),a.jsx(re,{className:"space-y-2",children:a.jsxs(G,{variant:"outline",className:"w-full gap-2",onClick:$,disabled:!i||w.every(M=>!M.description),children:[a.jsx(ar,{className:"h-4 w-4"}),"Convert to Invoice"]})})]}),!T&&a.jsx(X,{className:"bg-muted/50",children:a.jsx(re,{className:"pt-4",children:a.jsxs("p",{className:"text-sm text-muted-foreground",children:["VAT is not applied. To enable VAT, go to"," ",a.jsx(G,{variant:"link",className:"p-0 h-auto",onClick:()=>t("/settings"),children:"Settings"})," ","and enable VAT registration."]})})})]})]})]})}const V8e=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},B8e=t=>{if(!t)return"";if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return""};function U8e(){const t=Hn(),e=un(),{user:n}=ct(),[r,s]=N.useState(""),{data:i}=xu(),{data:o,isLoading:l}=Ne({queryKey:["estimates",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const f=await Ke.getPrimaryMembershipByUser(n.id);if(!(f!=null&&f.companyId))return[];const m=ve(te,Y.SALES_ORDERS),g=(await $e(Ce(m,ge("companyId","==",f.companyId)))).docs.map(y=>{const A=y.data();return{id:y.id,orderNumber:String(A.orderNumber??A.order_number??""),orderDate:B8e(A.orderDate??A.order_date),orderType:String(A.orderType??A.order_type??"sale"),subtotal:Number(A.subtotal??0),vatAmount:Number(A.vatAmount??A.vat_amount??0),total:Number(A.total??0),status:String(A.status??"draft"),customerId:A.customerId??A.customer_id??null,customerName:"-"}}).filter(y=>["quote","estimate"].includes(y.orderType)),x=Array.from(new Set(g.map(y=>y.customerId).filter(Boolean))),w=new Map;if(x.length>0){const y=ve(te,Y.CUSTOMERS),A=V8e(x,30);(await Promise.all(A.map(v=>$e(Ce(y,ge(Jd(),"in",v)))))).forEach(v=>{v.docs.forEach(S=>{const j=S.data();w.set(S.id,String(j.name??"-"))})})}return g.map(y=>({...y,customerName:y.customerId&&w.get(y.customerId)||"-"})).sort((y,A)=>String(A.orderDate).localeCompare(String(y.orderDate)))},enabled:!!n}),c=it({mutationFn:async f=>{await Li(He(te,Y.SALES_ORDERS,f))},onSuccess:()=>{e.invalidateQueries({queryKey:["estimates",n==null?void 0:n.id]}),Z.success("Estimate deleted successfully")},onError:f=>{Z.error("Failed to delete estimate: "+(f instanceof Error?f.message:"Unknown error"))}}),u=f=>{switch(f){case"sent":case"accepted":return"default";case"draft":return"secondary";case"rejected":return"destructive";default:return"outline"}},d=f=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(f),h=o==null?void 0:o.filter(f=>f.orderNumber.toLowerCase().includes(r.toLowerCase())||f.customerName.toLowerCase().includes(r.toLowerCase()));return l?a.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Estimates & Quotations"}),a.jsx("p",{className:"text-muted-foreground",children:"Create and manage quotes for your customers"})]}),a.jsxs(G,{onClick:()=>t("/quotations/new"),children:[a.jsx(xn,{className:"mr-2 h-4 w-4"}),"New Quotation"]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"relative flex-1",children:[a.jsx(na,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a.jsx(K,{placeholder:"Search estimates...",value:r,onChange:f=>s(f.target.value),className:"pl-10"})]})})}),a.jsx(re,{children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Quote #"}),a.jsx(U,{children:"Date"}),a.jsx(U,{children:"Customer"}),a.jsx(U,{className:"text-right",children:"Subtotal"}),(i==null?void 0:i.isVatRegistered)&&a.jsx(U,{className:"text-right",children:"VAT"}),a.jsx(U,{className:"text-right",children:"Total"}),a.jsx(U,{children:"Status"}),a.jsx(U,{className:"text-right",children:"Actions"})]})}),a.jsxs(Wt,{children:[h==null?void 0:h.map(f=>a.jsxs(_e,{children:[a.jsx(B,{className:"font-medium",children:f.orderNumber}),a.jsx(B,{children:f.orderDate?vt(new Date(f.orderDate),"dd MMM yyyy"):"-"}),a.jsx(B,{children:f.customerName||"-"}),a.jsx(B,{className:"text-right",children:d(f.subtotal)}),(i==null?void 0:i.isVatRegistered)&&a.jsx(B,{className:"text-right",children:d(f.vatAmount)}),a.jsx(B,{className:"text-right",children:d(f.total)}),a.jsx(B,{children:a.jsx(Xe,{variant:u(f.status||"draft"),children:f.status})}),a.jsx(B,{className:"text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(G,{variant:"ghost",size:"icon",onClick:()=>t(`/invoices/new?customer=${f.customerId}`),title:"Convert to Invoice",children:a.jsx(ar,{className:"h-4 w-4"})}),a.jsx(G,{variant:"ghost",size:"icon",onClick:()=>c.mutate(f.id),title:"Delete",children:a.jsx(xs,{className:"h-4 w-4"})})]})})]},f.id)),(h==null?void 0:h.length)===0&&a.jsx(_e,{children:a.jsx(B,{colSpan:i!=null&&i.isVatRegistered?8:7,className:"text-center text-muted-foreground py-8",children:"No estimates found. Create your first quotation!"})})]})]})})]})]})}const z8e=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n};function q8e(){const t=Hn(),e=un(),{user:n}=ct(),[r,s]=N.useState(""),[i,o]=N.useState(!1),[l,c]=N.useState(!1),[u,d]=N.useState(null),[h,f]=N.useState({name:"",email:"",phone:"",address:"",tpin:"",contact_person:"",notes:"",bank_name:"",bank_account_number:"",payment_terms:""}),{data:m,isLoading:b}=Ne({queryKey:["vendors",n==null?void 0:n.id],queryFn:async()=>{if(!n)return[];const E=await Ke.getPrimaryMembershipByUser(n.id);if(!(E!=null&&E.companyId))return[];const P=ve(te,Y.VENDORS);return(await $e(Ce(P,ge("companyId","==",E.companyId)))).docs.map(I=>{const O=I.data();return{id:I.id,name:String(O.name??""),email:O.email??null,phone:O.phone??null,address:O.address??null,tpin:O.tpin??null,contact_person:O.contactPerson??O.contact_person??null,notes:O.notes??null,bank_name:O.bankName??O.bank_name??null,bank_account_number:O.bankAccountNumber??O.bank_account_number??null,payment_terms:O.paymentTerms??O.payment_terms??null}}).sort((I,O)=>I.name.localeCompare(O.name))},enabled:!!n}),g=it({mutationFn:async E=>{if(!n)throw new Error("You must be logged in");const P=await Ke.getPrimaryMembershipByUser(n.id);if(!(P!=null&&P.companyId))throw new Error("No company profile found for your account");await jn(ve(te,Y.VENDORS),{companyId:P.companyId,userId:n.id,name:E.name,email:E.email||null,phone:E.phone||null,address:E.address||null,tpin:E.tpin||null,contactPerson:E.contact_person||null,notes:E.notes||null,bankName:E.bank_name||null,bankAccountNumber:E.bank_account_number||null,paymentTerms:E.payment_terms||null,createdAt:ye(),updatedAt:ye()})},onSuccess:()=>{e.invalidateQueries({queryKey:["vendors",n==null?void 0:n.id]}),Z.success("Vendor created successfully"),y()},onError:E=>{Z.error("Failed to create vendor: "+(E instanceof Error?E.message:"Unknown error"))}}),x=it({mutationFn:async({id:E,data:P})=>{await or(He(te,Y.VENDORS,E),{name:P.name,email:P.email||null,phone:P.phone||null,address:P.address||null,tpin:P.tpin||null,contactPerson:P.contact_person||null,notes:P.notes||null,bankName:P.bank_name||null,bankAccountNumber:P.bank_account_number||null,paymentTerms:P.payment_terms||null,updatedAt:ye()},{merge:!0})},onSuccess:()=>{e.invalidateQueries({queryKey:["vendors",n==null?void 0:n.id]}),Z.success("Vendor updated successfully"),y()},onError:E=>{Z.error("Failed to update vendor: "+(E instanceof Error?E.message:"Unknown error"))}}),w=it({mutationFn:async E=>{await Li(He(te,Y.VENDORS,E))},onSuccess:()=>{e.invalidateQueries({queryKey:["vendors",n==null?void 0:n.id]}),Z.success("Vendor deleted successfully")},onError:E=>{Z.error("Failed to delete vendor: "+(E instanceof Error?E.message:"Unknown error"))}}),y=()=>{f({name:"",email:"",phone:"",address:"",tpin:"",contact_person:"",notes:"",bank_name:"",bank_account_number:"",payment_terms:""}),d(null),o(!1)},A=E=>{d(E),f({name:E.name,email:E.email||"",phone:E.phone||"",address:E.address||"",tpin:E.tpin||"",contact_person:E.contact_person||"",notes:E.notes||"",bank_name:E.bank_name||"",bank_account_number:E.bank_account_number||"",payment_terms:E.payment_terms||""}),o(!0)},T=E=>{E.preventDefault(),u?x.mutate({id:u.id,data:h}):g.mutate(h)},v=m==null?void 0:m.filter(E=>{var P,C;return E.name.toLowerCase().includes(r.toLowerCase())||((P=E.email)==null?void 0:P.toLowerCase().includes(r.toLowerCase()))||((C=E.phone)==null?void 0:C.includes(r))}),S=[{key:"name",header:"Vendor Name",required:!0},{key:"email",header:"Email",required:!1},{key:"phone",header:"Phone",required:!1},{key:"address",header:"Address",required:!1},{key:"tpin",header:"TPIN",required:!1},{key:"contact_person",header:"Contact Person",required:!1},{key:"bank_name",header:"Bank Name",required:!1},{key:"bank_account_number",header:"Bank Account",required:!1},{key:"payment_terms",header:"Payment Terms",required:!1}],j=async E=>{if(!n)throw new Error("You must be logged in");const P=await Ke.getPrimaryMembershipByUser(n.id);if(!(P!=null&&P.companyId))throw new Error("No company profile found for your account");const C=E.map($=>({companyId:P.companyId,userId:n.id,name:String($.name||""),email:$.email||null,phone:$.phone||null,address:$.address||null,tpin:$.tpin||null,contactPerson:$.contact_person||null,bankName:$.bank_name||null,bankAccountNumber:$.bank_account_number||null,paymentTerms:$.payment_terms||null,createdAt:ye(),updatedAt:ye()})),I=ve(te,Y.VENDORS),O=z8e(C,400);for(const $ of O){const z=ml(te);$.forEach(H=>{z.set(He(I),H)}),await z.commit()}e.invalidateQueries({queryKey:["vendors",n==null?void 0:n.id]})},p=()=>{if(!(v!=null&&v.length))return;oh(v,[{header:"Vendor Name",key:"name"},{header:"Contact Person",key:"contact_person"},{header:"Email",key:"email"},{header:"Phone",key:"phone"},{header:"Address",key:"address"},{header:"TPIN",key:"tpin"},{header:"Bank Name",key:"bank_name"},{header:"Bank Account",key:"bank_account_number"},{header:"Payment Terms",key:"payment_terms"}],"vendors-export")};return b?a.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Vendors"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your suppliers and vendors"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(G,{variant:"outline",onClick:()=>c(!0),children:[a.jsx(So,{className:"mr-2 h-4 w-4"}),"Import"]}),a.jsxs(G,{variant:"outline",onClick:p,children:[a.jsx(ys,{className:"mr-2 h-4 w-4"}),"Export"]}),a.jsxs(Jn,{open:i,onOpenChange:E=>{o(E),E||y()},children:[a.jsx(Hr,{asChild:!0,children:a.jsxs(G,{children:[a.jsx(xn,{className:"mr-2 h-4 w-4"}),"Add Vendor"]})}),a.jsxs(zn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsx(qn,{children:a.jsx(Wn,{children:u?"Edit Vendor":"Add New Vendor"})}),a.jsxs("form",{onSubmit:T,className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"name",children:"Vendor Name *"}),a.jsx(K,{id:"name",value:h.name,onChange:E=>f({...h,name:E.target.value}),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"contact_person",children:"Contact Person"}),a.jsx(K,{id:"contact_person",value:h.contact_person,onChange:E=>f({...h,contact_person:E.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"email",children:"Email"}),a.jsx(K,{id:"email",type:"email",value:h.email,onChange:E=>f({...h,email:E.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"phone",children:"Phone"}),a.jsx(K,{id:"phone",value:h.phone,onChange:E=>f({...h,phone:E.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"tpin",children:"TPIN"}),a.jsx(K,{id:"tpin",value:h.tpin,onChange:E=>f({...h,tpin:E.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"payment_terms",children:"Payment Terms"}),a.jsx(K,{id:"payment_terms",value:h.payment_terms,onChange:E=>f({...h,payment_terms:E.target.value}),placeholder:"e.g., Net 30"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"bank_name",children:"Bank Name"}),a.jsx(K,{id:"bank_name",value:h.bank_name,onChange:E=>f({...h,bank_name:E.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"bank_account_number",children:"Bank Account Number"}),a.jsx(K,{id:"bank_account_number",value:h.bank_account_number,onChange:E=>f({...h,bank_account_number:E.target.value})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"address",children:"Address"}),a.jsx(lr,{id:"address",value:h.address,onChange:E=>f({...h,address:E.target.value}),rows:2})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"notes",children:"Notes"}),a.jsx(lr,{id:"notes",value:h.notes,onChange:E=>f({...h,notes:E.target.value}),rows:2})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(G,{type:"button",variant:"outline",onClick:y,children:"Cancel"}),a.jsxs(G,{type:"submit",children:[u?"Update":"Create"," Vendor"]})]})]})]})]})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"relative flex-1",children:[a.jsx(na,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a.jsx(K,{placeholder:"Search vendors...",value:r,onChange:E=>s(E.target.value),className:"pl-10"})]})})}),a.jsx(re,{children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Name"}),a.jsx(U,{children:"Contact Person"}),a.jsx(U,{children:"Email"}),a.jsx(U,{children:"Phone"}),a.jsx(U,{children:"TPIN"}),a.jsx(U,{className:"text-right",children:"Actions"})]})}),a.jsxs(Wt,{children:[v==null?void 0:v.map(E=>a.jsxs(_e,{children:[a.jsx(B,{className:"font-medium",children:E.name}),a.jsx(B,{children:E.contact_person||"-"}),a.jsx(B,{children:E.email||"-"}),a.jsx(B,{children:E.phone||"-"}),a.jsx(B,{children:E.tpin||"-"}),a.jsx(B,{className:"text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(G,{variant:"ghost",size:"icon",onClick:()=>t("/purchase-orders"),title:"Create Purchase Order",children:a.jsx(Vf,{className:"h-4 w-4"})}),a.jsx(G,{variant:"ghost",size:"icon",onClick:()=>t("/bills"),title:"Create Bill",children:a.jsx(ar,{className:"h-4 w-4"})}),a.jsx(G,{variant:"ghost",size:"icon",onClick:()=>A(E),children:a.jsx(Mm,{className:"h-4 w-4"})}),a.jsx(G,{variant:"ghost",size:"icon",onClick:()=>w.mutate(E.id),children:a.jsx(xs,{className:"h-4 w-4"})})]})})]},E.id)),(v==null?void 0:v.length)===0&&a.jsx(_e,{children:a.jsx(B,{colSpan:6,className:"text-center text-muted-foreground py-8",children:"No vendors found. Add your first vendor!"})})]})]})})]}),a.jsx(hp,{open:l,onOpenChange:c,onImport:j,columns:S,title:"Import Vendors"})]})}function W8e(){const{user:t}=ct(),e=un(),[n,r]=N.useState(""),[s,i]=N.useState(!1),{data:o}=xu(),[l,c]=N.useState({vendor_id:"",bill_number:`BILL-${Date.now()}`,bill_date:new Date().toISOString().split("T")[0],due_date:"",amount:"",description:""}),{data:u}=Ne({queryKey:["bills-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const p=await Ke.getPrimaryMembershipByUser(t.id);return(p==null?void 0:p.companyId)??null},enabled:!!t}),{data:d,isLoading:h}=Ne({queryKey:["bills",u],queryFn:async()=>{if(!u)return[];const[p,E]=await Promise.all([$e(Ce(ve(te,Y.BILLS),ge("companyId","==",u))),$e(Ce(ve(te,Y.VENDORS),ge("companyId","==",u)))]),P=new Map;return E.docs.forEach(C=>{const I=C.data();P.set(C.id,String(I.name??""))}),p.docs.map(C=>{const I=C.data(),O=I.vendorId??I.vendor_id??null;return{id:C.id,bill_number:String(I.billNumber??I.bill_number??""),bill_date:String(I.billDate??I.bill_date??""),due_date:I.dueDate??I.due_date??null,subtotal:Number(I.subtotal??0),vat_amount:Number(I.vatAmount??I.vat_amount??0),total:Number(I.total??0),status:I.status??"pending",description:I.description??null,vendor_id:O,vendors:O?{name:P.get(O)||"Unknown Vendor"}:null}}).sort((C,I)=>I.bill_date.localeCompare(C.bill_date))},enabled:!!u}),{data:f}=Ne({queryKey:["vendors",u],queryFn:async()=>u?(await $e(Ce(ve(te,Y.VENDORS),ge("companyId","==",u)))).docs.map(E=>{const P=E.data();return{id:E.id,name:String(P.name??"")}}).sort((E,P)=>E.name.localeCompare(P.name)):[],enabled:!!u}),m=(o==null?void 0:o.isVatRegistered)||!1,b=(o==null?void 0:o.vatRate)||16,g=parseFloat(l.amount)||0,x=m?g*(b/100):0,w=g+x,y=it({mutationFn:async p=>{if(!u||!t)throw new Error("Not authenticated");await jn(ve(te,Y.BILLS),{companyId:u,vendorId:p.vendor_id||null,billNumber:p.bill_number,billDate:p.bill_date,dueDate:p.due_date||null,description:p.description||null,subtotal:g,vatAmount:x,total:w,status:"pending",createdBy:t.id,createdAt:ye(),updatedAt:ye()})},onSuccess:()=>{e.invalidateQueries({queryKey:["bills",u]}),Z.success("Bill created successfully"),i(!1),c({vendor_id:"",bill_number:`BILL-${Date.now()}`,bill_date:new Date().toISOString().split("T")[0],due_date:"",amount:"",description:""})},onError:p=>{Z.error("Failed to create bill: "+p.message)}}),A=it({mutationFn:async p=>{await or(He(te,Y.BILLS,p),{status:"paid",paidDate:new Date().toISOString(),updatedAt:ye()},{merge:!0})},onSuccess:()=>{e.invalidateQueries({queryKey:["bills",u]}),Z.success("Bill marked as paid")},onError:p=>{Z.error("Failed to update bill: "+p.message)}}),T=it({mutationFn:async p=>{await Li(He(te,Y.BILLS,p))},onSuccess:()=>{e.invalidateQueries({queryKey:["bills",u]}),Z.success("Bill deleted successfully")},onError:p=>{Z.error("Failed to delete bill: "+p.message)}}),v=p=>{switch(p){case"paid":return"default";case"pending":return"secondary";case"overdue":return"destructive";default:return"outline"}},S=p=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(p),j=d==null?void 0:d.filter(p=>{var E,P;return p.bill_number.toLowerCase().includes(n.toLowerCase())||((P=(E=p.vendors)==null?void 0:E.name)==null?void 0:P.toLowerCase().includes(n.toLowerCase()))});return h?a.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Bills"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage bills and payments to vendors"})]}),a.jsxs(Jn,{open:s,onOpenChange:i,children:[a.jsx(Hr,{asChild:!0,children:a.jsxs(G,{children:[a.jsx(xn,{className:"mr-2 h-4 w-4"}),"New Bill"]})}),a.jsxs(zn,{className:"max-w-lg",children:[a.jsx(qn,{children:a.jsx(Wn,{children:"Create New Bill"})}),a.jsxs("form",{onSubmit:p=>{p.preventDefault(),y.mutate(l)},className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"vendor",children:"Vendor *"}),a.jsxs(It,{value:l.vendor_id,onValueChange:p=>c({...l,vendor_id:p}),children:[a.jsx(Et,{children:a.jsx(kt,{placeholder:"Select vendor"})}),a.jsx(At,{children:f==null?void 0:f.map(p=>a.jsx(be,{value:p.id,children:p.name},p.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"bill_number",children:"Bill Number"}),a.jsx(K,{id:"bill_number",value:l.bill_number,onChange:p=>c({...l,bill_number:p.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"bill_date",children:"Bill Date *"}),a.jsx(K,{id:"bill_date",type:"date",value:l.bill_date,onChange:p=>c({...l,bill_date:p.target.value}),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"due_date",children:"Due Date"}),a.jsx(K,{id:"due_date",type:"date",value:l.due_date,onChange:p=>c({...l,due_date:p.target.value})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"amount",children:"Amount (ZMW) *"}),a.jsx(K,{id:"amount",type:"number",step:"0.01",value:l.amount,onChange:p=>c({...l,amount:p.target.value}),required:!0})]}),m&&a.jsxs("div",{className:"rounded-lg bg-muted p-3 space-y-1 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Subtotal:"}),a.jsx("span",{children:S(g)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{children:["VAT (",b,"%):"]}),a.jsx("span",{children:S(x)})]}),a.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[a.jsx("span",{children:"Total:"}),a.jsx("span",{children:S(w)})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"description",children:"Description"}),a.jsx(lr,{id:"description",value:l.description,onChange:p=>c({...l,description:p.target.value}),rows:2})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(G,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),a.jsx(G,{type:"submit",children:"Create Bill"})]})]})]})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"relative flex-1",children:[a.jsx(na,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a.jsx(K,{placeholder:"Search bills...",value:n,onChange:p=>r(p.target.value),className:"pl-10"})]})})}),a.jsx(re,{children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Bill #"}),a.jsx(U,{children:"Date"}),a.jsx(U,{children:"Vendor"}),a.jsx(U,{children:"Due Date"}),a.jsx(U,{className:"text-right",children:"Total"}),a.jsx(U,{children:"Status"}),a.jsx(U,{className:"text-right",children:"Actions"})]})}),a.jsxs(Wt,{children:[j==null?void 0:j.map(p=>{var E;return a.jsxs(_e,{children:[a.jsx(B,{className:"font-medium",children:p.bill_number}),a.jsx(B,{children:vt(new Date(p.bill_date),"dd MMM yyyy")}),a.jsx(B,{children:((E=p.vendors)==null?void 0:E.name)||"-"}),a.jsx(B,{children:p.due_date?vt(new Date(p.due_date),"dd MMM yyyy"):"-"}),a.jsx(B,{className:"text-right",children:S(Number(p.total))}),a.jsx(B,{children:a.jsx(Xe,{variant:v(p.status||"pending"),children:p.status})}),a.jsx(B,{className:"text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[p.status!=="paid"&&a.jsx(G,{variant:"ghost",size:"icon",onClick:()=>A.mutate(p.id),title:"Mark as Paid",children:a.jsx(_v,{className:"h-4 w-4"})}),a.jsx(G,{variant:"ghost",size:"icon",onClick:()=>T.mutate(p.id),title:"Delete",children:a.jsx(xs,{className:"h-4 w-4"})})]})})]},p.id)}),(j==null?void 0:j.length)===0&&a.jsx(_e,{children:a.jsx(B,{colSpan:7,className:"text-center text-muted-foreground py-8",children:"No bills found. Create your first bill!"})})]})]})})]})]})}function H8e(){const{user:t}=ct(),e=Hn(),n=un(),[r,s]=N.useState(""),[i,o]=N.useState(!1),{data:l}=xu(),[c,u]=N.useState({vendor_id:"",order_number:`PO-${Date.now()}`,order_date:new Date().toISOString().split("T")[0],expected_date:"",amount:"",description:""}),{data:d}=Ne({queryKey:["purchase-orders-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const p=await Ke.getPrimaryMembershipByUser(t.id);return(p==null?void 0:p.companyId)??null},enabled:!!t}),{data:h,isLoading:f}=Ne({queryKey:["purchase-orders",d],queryFn:async()=>{if(!d)return[];const p=ve(te,Y.PURCHASE_ORDERS),P=(await $e(Ce(p,ge("companyId","==",d)))).docs.map(O=>{const $=O.data();return{id:O.id,order_number:String($.orderNumber??$.order_number??""),order_date:String($.orderDate??$.order_date??""),expected_date:$.expectedDate??$.expected_date??null,subtotal:Number($.subtotal??0),vat_amount:Number($.vatAmount??$.vat_amount??0),total:Number($.total??0),status:$.status??"pending",description:$.description??null,vendor_id:$.vendorId??$.vendor_id??null,vendors:null}}),C=Array.from(new Set(P.map(O=>O.vendor_id).filter(Boolean))),I=new Map;if(C.length>0){const O=ve(te,Y.VENDORS);(await $e(Ce(O,ge("companyId","==",d)))).docs.forEach(z=>{const H=z.data();I.set(z.id,String(H.name??""))})}return P.map(O=>({...O,vendors:O.vendor_id?{name:I.get(O.vendor_id)||"Unknown Vendor"}:null})).sort((O,$)=>$.order_date.localeCompare(O.order_date))},enabled:!!d}),{data:m}=Ne({queryKey:["vendors",d],queryFn:async()=>{if(!d)return[];const p=ve(te,Y.VENDORS);return(await $e(Ce(p,ge("companyId","==",d)))).docs.map(P=>{const C=P.data();return{id:P.id,name:String(C.name??"")}}).sort((P,C)=>P.name.localeCompare(C.name))},enabled:!!d}),b=(l==null?void 0:l.isVatRegistered)||!1,g=(l==null?void 0:l.vatRate)||16,x=parseFloat(c.amount)||0,w=b?x*(g/100):0,y=x+w,A=it({mutationFn:async p=>{if(!d||!t)throw new Error("No active company context");await jn(ve(te,Y.PURCHASE_ORDERS),{companyId:d,vendorId:p.vendor_id,orderNumber:p.order_number,orderDate:p.order_date,expectedDate:p.expected_date||null,subtotal:x,vatAmount:w,total:y,status:"pending",description:p.description||null,createdBy:t.id,createdAt:ye(),updatedAt:ye()})},onSuccess:()=>{n.invalidateQueries({queryKey:["purchase-orders",d]}),Z.success("Purchase order created successfully"),o(!1),u({vendor_id:"",order_number:`PO-${Date.now()}`,order_date:new Date().toISOString().split("T")[0],expected_date:"",amount:"",description:""})},onError:p=>{Z.error("Failed to create purchase order: "+p.message)}}),T=it({mutationFn:async p=>{await Li(He(te,Y.PURCHASE_ORDERS,p))},onSuccess:()=>{n.invalidateQueries({queryKey:["purchase-orders",d]}),Z.success("Purchase order deleted successfully")},onError:p=>{Z.error("Failed to delete purchase order: "+p.message)}}),v=p=>{switch(p){case"received":return"default";case"pending":return"secondary";case"cancelled":return"destructive";default:return"outline"}},S=p=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(p),j=h==null?void 0:h.filter(p=>{var E,P;return p.order_number.toLowerCase().includes(r.toLowerCase())||((P=(E=p.vendors)==null?void 0:E.name)==null?void 0:P.toLowerCase().includes(r.toLowerCase()))});return f?a.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Purchase Orders"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage purchase orders to vendors"})]}),a.jsxs(Jn,{open:i,onOpenChange:o,children:[a.jsx(Hr,{asChild:!0,children:a.jsxs(G,{children:[a.jsx(xn,{className:"mr-2 h-4 w-4"}),"New Purchase Order"]})}),a.jsxs(zn,{className:"max-w-lg",children:[a.jsx(qn,{children:a.jsx(Wn,{children:"Create Purchase Order"})}),a.jsxs("form",{onSubmit:p=>{p.preventDefault(),A.mutate(c)},className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"vendor",children:"Vendor *"}),a.jsxs(It,{value:c.vendor_id,onValueChange:p=>u({...c,vendor_id:p}),children:[a.jsx(Et,{children:a.jsx(kt,{placeholder:"Select vendor"})}),a.jsx(At,{children:m==null?void 0:m.map(p=>a.jsx(be,{value:p.id,children:p.name},p.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"order_number",children:"PO Number"}),a.jsx(K,{id:"order_number",value:c.order_number,onChange:p=>u({...c,order_number:p.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"order_date",children:"Order Date *"}),a.jsx(K,{id:"order_date",type:"date",value:c.order_date,onChange:p=>u({...c,order_date:p.target.value}),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"expected_date",children:"Expected Delivery"}),a.jsx(K,{id:"expected_date",type:"date",value:c.expected_date,onChange:p=>u({...c,expected_date:p.target.value})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"amount",children:"Amount (ZMW) *"}),a.jsx(K,{id:"amount",type:"number",step:"0.01",value:c.amount,onChange:p=>u({...c,amount:p.target.value}),required:!0})]}),b&&a.jsxs("div",{className:"rounded-lg bg-muted p-3 space-y-1 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Subtotal:"}),a.jsx("span",{children:S(x)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{children:["VAT (",g,"%):"]}),a.jsx("span",{children:S(w)})]}),a.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[a.jsx("span",{children:"Total:"}),a.jsx("span",{children:S(y)})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"description",children:"Description"}),a.jsx(lr,{id:"description",value:c.description,onChange:p=>u({...c,description:p.target.value}),rows:2})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(G,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),a.jsx(G,{type:"submit",children:"Create Order"})]})]})]})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"relative flex-1",children:[a.jsx(na,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a.jsx(K,{placeholder:"Search purchase orders...",value:r,onChange:p=>s(p.target.value),className:"pl-10"})]})})}),a.jsx(re,{children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"PO #"}),a.jsx(U,{children:"Date"}),a.jsx(U,{children:"Vendor"}),a.jsx(U,{children:"Expected Delivery"}),a.jsx(U,{className:"text-right",children:"Total"}),a.jsx(U,{children:"Status"}),a.jsx(U,{className:"text-right",children:"Actions"})]})}),a.jsxs(Wt,{children:[j==null?void 0:j.map(p=>{var E;return a.jsxs(_e,{children:[a.jsx(B,{className:"font-medium",children:p.order_number}),a.jsx(B,{children:vt(new Date(p.order_date),"dd MMM yyyy")}),a.jsx(B,{children:((E=p.vendors)==null?void 0:E.name)||"-"}),a.jsx(B,{children:p.expected_date?vt(new Date(p.expected_date),"dd MMM yyyy"):"-"}),a.jsx(B,{className:"text-right",children:S(Number(p.total))}),a.jsx(B,{children:a.jsx(Xe,{variant:v(p.status||"pending"),children:p.status})}),a.jsx(B,{className:"text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(G,{variant:"ghost",size:"icon",onClick:()=>e("/bills"),title:"Convert to Bill",children:a.jsx(ar,{className:"h-4 w-4"})}),a.jsx(G,{variant:"ghost",size:"icon",onClick:()=>T.mutate(p.id),title:"Delete",children:a.jsx(xs,{className:"h-4 w-4"})})]})})]},p.id)}),(j==null?void 0:j.length)===0&&a.jsx(_e,{children:a.jsx(B,{colSpan:7,className:"text-center text-muted-foreground py-8",children:"No purchase orders found. Create your first PO!"})})]})]})})]})]})}const K8e=["Office Supplies","Travel","Meals & Entertainment","Utilities","Rent","Professional Services","Marketing","Equipment","Software & Subscriptions","Training","Insurance","Maintenance","Other"],G8e=[{header:"Description",key:"description",required:!0,transform:fs.trim},{header:"Category",key:"category",transform:fs.trim},{header:"Amount",key:"amount",required:!0,transform:fs.toNumber},{header:"Date",key:"expense_date",required:!0,transform:fs.toDate},{header:"Vendor",key:"vendor_name",transform:fs.trim},{header:"Payment Method",key:"payment_method",transform:fs.trim},{header:"Reference",key:"reference_number",transform:fs.trim},{header:"Notes",key:"notes",transform:fs.trim}],Y8e=[{header:"Date",key:"expense_date",formatter:I8e},{header:"Description",key:"description"},{header:"Category",key:"category"},{header:"Vendor",key:"vendor_name"},{header:"Amount",key:"amount",formatter:P8e},{header:"Payment Method",key:"payment_method"},{header:"Reference",key:"reference_number"},{header:"Notes",key:"notes"}];function Q8e(){const{user:t}=ct(),e=un(),[n,r]=N.useState(""),[s,i]=N.useState(!1),[o,l]=N.useState(!1),[c,u]=N.useState(null),[d,h]=N.useState({description:"",category:"",amount:"",expense_date:new Date().toISOString().split("T")[0],vendor_name:"",payment_method:"cash",reference_number:"",notes:""}),{data:f}=Ne({queryKey:["expenses-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const C=await Ke.getPrimaryMembershipByUser(t.id);return(C==null?void 0:C.companyId)??null},enabled:!!t}),{data:m,isLoading:b}=Ne({queryKey:["expenses",f],queryFn:async()=>f?(await $e(Ce(ve(te,Y.EXPENSES),ge("companyId","==",f)))).docs.map(I=>{const O=I.data();return{id:I.id,description:String(O.description??""),category:O.category??null,amount:Number(O.amount??0),expense_date:String(O.expenseDate??O.expense_date??new Date().toISOString().slice(0,10)),vendor_name:O.vendorName??O.vendor_name??null,payment_method:O.paymentMethod??O.payment_method??null,reference_number:O.referenceNumber??O.reference_number??null,notes:O.notes??null}}).sort((I,O)=>O.expense_date.localeCompare(I.expense_date)):[],enabled:!!f}),g=it({mutationFn:async C=>{if(!f||!t)throw new Error("Not authenticated");await jn(ve(te,Y.EXPENSES),{companyId:f,description:C.description,category:C.category||null,amount:Number(C.amount),expenseDate:C.expense_date,vendorName:C.vendor_name||null,paymentMethod:C.payment_method||null,referenceNumber:C.reference_number||null,notes:C.notes||null,createdBy:t.id,createdAt:ye(),updatedAt:ye()})},onSuccess:()=>{e.invalidateQueries({queryKey:["expenses",f]}),Z.success("Expense recorded successfully"),y()},onError:C=>{Z.error("Failed to create expense: "+C.message)}}),x=it({mutationFn:async({id:C,data:I})=>{await or(He(te,Y.EXPENSES,C),{description:I.description,category:I.category||null,amount:Number(I.amount),expenseDate:I.expense_date,vendorName:I.vendor_name||null,paymentMethod:I.payment_method||null,referenceNumber:I.reference_number||null,notes:I.notes||null,updatedAt:ye()},{merge:!0})},onSuccess:()=>{e.invalidateQueries({queryKey:["expenses",f]}),Z.success("Expense updated successfully"),y()},onError:C=>{Z.error("Failed to update expense: "+C.message)}}),w=it({mutationFn:async C=>{await Li(He(te,Y.EXPENSES,C))},onSuccess:()=>{e.invalidateQueries({queryKey:["expenses",f]}),Z.success("Expense deleted successfully")},onError:C=>{Z.error("Failed to delete expense: "+C.message)}}),y=()=>{h({description:"",category:"",amount:"",expense_date:new Date().toISOString().split("T")[0],vendor_name:"",payment_method:"cash",reference_number:"",notes:""}),u(null),i(!1)},A=C=>{var I;u(C),h({description:C.description||"",category:C.category||"",amount:((I=C.amount)==null?void 0:I.toString())||"",expense_date:C.expense_date||new Date().toISOString().split("T")[0],vendor_name:C.vendor_name||"",payment_method:C.payment_method||"cash",reference_number:C.reference_number||"",notes:C.notes||""}),i(!0)},T=C=>{C.preventDefault(),c?x.mutate({id:c.id,data:d}):g.mutate(d)},v=C=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(C),S=C=>({"Office Supplies":"default",Travel:"secondary","Meals & Entertainment":"outline",Utilities:"default",Rent:"secondary"})[C]||"outline",j=m==null?void 0:m.filter(C=>{var I,O,$;return((I=C.description)==null?void 0:I.toLowerCase().includes(n.toLowerCase()))||((O=C.category)==null?void 0:O.toLowerCase().includes(n.toLowerCase()))||(($=C.vendor_name)==null?void 0:$.toLowerCase().includes(n.toLowerCase()))}),p=(m==null?void 0:m.reduce((C,I)=>C+Number(I.amount||0),0))||0,E=async C=>{if(!(t!=null&&t.id)||!f)throw new Error("Not authenticated");for(const I of C){const O=I;await jn(ve(te,Y.EXPENSES),{companyId:f,description:String(O.description??"").trim(),category:O.category?String(O.category).trim():null,amount:Number(O.amount??0),expenseDate:String(O.expense_date??new Date().toISOString().split("T")[0]),vendorName:O.vendor_name?String(O.vendor_name):null,paymentMethod:O.payment_method?String(O.payment_method):null,referenceNumber:O.reference_number?String(O.reference_number):null,notes:O.notes?String(O.notes):null,createdBy:t.id,createdAt:ye(),updatedAt:ye()})}e.invalidateQueries({queryKey:["expenses",f]}),Z.success(`Imported ${C.length} expenses`)},P=()=>{if(!m||m.length===0){Z.error("No expenses to export");return}oh(m,Y8e,"expenses-export"),Z.success("Expenses exported")};return b?a.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Expenses"}),a.jsx("p",{className:"text-muted-foreground",children:"Track and manage business expenses"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(G,{variant:"outline",onClick:()=>l(!0),children:[a.jsx(So,{className:"mr-2 h-4 w-4"}),"Import"]}),a.jsxs(G,{variant:"outline",onClick:P,children:[a.jsx(ys,{className:"mr-2 h-4 w-4"}),"Export"]}),a.jsxs(Jn,{open:s,onOpenChange:C=>{i(C),C||y()},children:[a.jsx(Hr,{asChild:!0,children:a.jsxs(G,{children:[a.jsx(xn,{className:"mr-2 h-4 w-4"}),"Add Expense"]})}),a.jsxs(zn,{className:"max-w-lg",children:[a.jsx(qn,{children:a.jsx(Wn,{children:c?"Edit Expense":"Record New Expense"})}),a.jsxs("form",{onSubmit:T,className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2 md:col-span-2",children:[a.jsx(J,{htmlFor:"description",children:"Description *"}),a.jsx(K,{id:"description",value:d.description,onChange:C=>h({...d,description:C.target.value}),placeholder:"What was this expense for?",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"category",children:"Category *"}),a.jsxs(It,{value:d.category,onValueChange:C=>h({...d,category:C}),children:[a.jsx(Et,{children:a.jsx(kt,{placeholder:"Select category"})}),a.jsx(At,{children:K8e.map(C=>a.jsx(be,{value:C,children:C},C))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"amount",children:"Amount (ZMW) *"}),a.jsx(K,{id:"amount",type:"number",step:"0.01",value:d.amount,onChange:C=>h({...d,amount:C.target.value}),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"expense_date",children:"Date *"}),a.jsx(K,{id:"expense_date",type:"date",value:d.expense_date,onChange:C=>h({...d,expense_date:C.target.value}),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"vendor_name",children:"Vendor/Payee"}),a.jsx(K,{id:"vendor_name",value:d.vendor_name,onChange:C=>h({...d,vendor_name:C.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"payment_method",children:"Payment Method"}),a.jsxs(It,{value:d.payment_method,onValueChange:C=>h({...d,payment_method:C}),children:[a.jsx(Et,{children:a.jsx(kt,{})}),a.jsxs(At,{children:[a.jsx(be,{value:"cash",children:"Cash"}),a.jsx(be,{value:"bank_transfer",children:"Bank Transfer"}),a.jsx(be,{value:"mobile_money",children:"Mobile Money"}),a.jsx(be,{value:"cheque",children:"Cheque"}),a.jsx(be,{value:"card",children:"Card"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"reference_number",children:"Reference #"}),a.jsx(K,{id:"reference_number",value:d.reference_number,onChange:C=>h({...d,reference_number:C.target.value}),placeholder:"Receipt/Invoice number"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"notes",children:"Notes"}),a.jsx(lr,{id:"notes",value:d.notes,onChange:C=>h({...d,notes:C.target.value}),rows:2})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(G,{type:"button",variant:"outline",onClick:y,children:"Cancel"}),a.jsxs(G,{type:"submit",children:[c?"Update":"Record"," Expense"]})]})]})]})]})]})]}),a.jsx(hp,{open:o,onOpenChange:l,title:"Import Expenses",description:"Upload a CSV file to import expenses in bulk",columns:G8e,onImport:E}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsxs(X,{children:[a.jsx(ee,{className:"pb-2",children:a.jsx(ne,{className:"text-sm font-medium text-muted-foreground",children:"Total Expenses"})}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:v(p)})})]}),a.jsxs(X,{children:[a.jsx(ee,{className:"pb-2",children:a.jsx(ne,{className:"text-sm font-medium text-muted-foreground",children:"This Month"})}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:v((m==null?void 0:m.filter(C=>{const I=new Date(C.expense_date),O=new Date;return I.getMonth()===O.getMonth()&&I.getFullYear()===O.getFullYear()}).reduce((C,I)=>C+Number(I.amount||0),0))||0)})})]}),a.jsxs(X,{children:[a.jsx(ee,{className:"pb-2",children:a.jsx(ne,{className:"text-sm font-medium text-muted-foreground",children:"Total Records"})}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:(m==null?void 0:m.length)||0})})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"relative flex-1",children:[a.jsx(na,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a.jsx(K,{placeholder:"Search expenses...",value:n,onChange:C=>r(C.target.value),className:"pl-10"})]})})}),a.jsx(re,{children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Date"}),a.jsx(U,{children:"Description"}),a.jsx(U,{children:"Category"}),a.jsx(U,{children:"Vendor"}),a.jsx(U,{className:"text-right",children:"Amount"}),a.jsx(U,{className:"text-right",children:"Actions"})]})}),a.jsxs(Wt,{children:[j==null?void 0:j.map(C=>a.jsxs(_e,{children:[a.jsx(B,{children:vt(new Date(C.expense_date),"dd MMM yyyy")}),a.jsx(B,{className:"font-medium",children:C.description}),a.jsx(B,{children:a.jsx(Xe,{variant:S(C.category||""),children:C.category})}),a.jsx(B,{children:C.vendor_name||"-"}),a.jsx(B,{className:"text-right font-medium",children:v(Number(C.amount))}),a.jsx(B,{className:"text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(G,{variant:"ghost",size:"icon",onClick:()=>A(C),children:a.jsx(Mm,{className:"h-4 w-4"})}),a.jsx(G,{variant:"ghost",size:"icon",onClick:()=>w.mutate(C.id),children:a.jsx(xs,{className:"h-4 w-4"})})]})})]},C.id)),(j==null?void 0:j.length)===0&&a.jsx(_e,{children:a.jsx(B,{colSpan:6,className:"text-center text-muted-foreground py-8",children:"No expenses found. Record your first expense!"})})]})]})})]})]})}function dB(){const t=un(),{user:e}=ct(),[n,r]=N.useState(""),[s,i]=N.useState(!1),[o,l]=N.useState(16),{data:c}=Ne({queryKey:["primary-membership",e==null?void 0:e.id],queryFn:async()=>e?Ke.getPrimaryMembershipByUser(e.id):null,enabled:!!e}),u=c==null?void 0:c.companyId,{data:d,isLoading:h}=Ne({queryKey:["company-settings",u],queryFn:async()=>u?Ke.getCompanySettings(u):null,enabled:!!u});N.useEffect(()=>{d&&(r(d.companyName||""),i(!!d.isVatRegistered),l(Number(d.vatRate??16)))},[d]);const f=it({mutationFn:async()=>{if(!u)throw new Error("No company linked to your account.");await Ke.updateCompanyBasics({companyId:u,name:n}),await or(He(te,Y.COMPANY_SETTINGS,u),{companyId:u,companyName:n,isVatRegistered:s,vatRate:s?o:null,updatedAt:ye()},{merge:!0})},onSuccess:()=>{t.invalidateQueries({queryKey:["company-settings",u]}),t.invalidateQueries({queryKey:["company-settings",e==null?void 0:e.id]}),Z.success("Settings saved successfully")},onError:m=>{Z.error("Failed to save settings: "+(m instanceof Error?m.message:"Unknown error"))}});return h?a.jsx("div",{children:"Loading..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Company Settings"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your company information and tax settings"})]}),a.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[a.jsxs(X,{children:[a.jsxs(ee,{children:[a.jsx(ne,{children:"Company Information"}),a.jsx(jt,{children:"Basic company details and branding"})]}),a.jsxs(re,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"company-name",children:"Company Name"}),a.jsx(K,{id:"company-name",value:n,onChange:m=>r(m.target.value),placeholder:"Enter company name"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Company Logo"}),a.jsx($O,{})]})]})]}),a.jsxs(X,{children:[a.jsxs(ee,{children:[a.jsx(ne,{children:"VAT / Tax Settings"}),a.jsx(jt,{children:"Configure VAT registration for ZRA compliance"})]}),a.jsxs(re,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(J,{children:"VAT Registered"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Are you registered for VAT with ZRA?"})]}),a.jsx(Zr,{checked:s,onCheckedChange:i})]}),s&&a.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[a.jsx(J,{htmlFor:"vat-rate",children:"VAT Rate (%)"}),a.jsx(K,{id:"vat-rate",type:"number",value:o,onChange:m=>l(Number(m.target.value)),min:0,max:100}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Standard Zambian VAT rate is 16%"})]})]})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx(G,{onClick:()=>f.mutate(),disabled:f.isPending,children:f.isPending?"Saving...":"Save Settings"})})]})}const X8e=()=>{const t=Ao();return N.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),a.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),a.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},Z8e=()=>{const{user:t}=ct(),e=un(),[n,r]=N.useState(""),[s,i]=N.useState(!1),[o,l]=N.useState(!1),[c,u]=N.useState(null),[d,h]=N.useState({name:"",sku:"",category:"",description:"",unit_of_measure:"units",quantity_on_hand:0,reorder_point:0,unit_cost:0,selling_price:0}),[f,m]=N.useState({movement_type:"in",quantity:0,reference_number:"",notes:""}),{data:b}=Ne({queryKey:["inventory-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const p=await Ke.getPrimaryMembershipByUser(t.id);return(p==null?void 0:p.companyId)??null},enabled:!!t}),{data:g=[],isLoading:x}=Ne({queryKey:["inventory-items",b],queryFn:async()=>{if(!b)return[];const p=ve(te,Y.INVENTORY_ITEMS);return(await $e(Ce(p,ge("companyId","==",b)))).docs.map(P=>{const C=P.data();return{id:P.id,name:String(C.name??""),sku:C.sku??null,category:C.category??null,description:C.description??null,unit_of_measure:C.unitOfMeasure??C.unit_of_measure??"units",quantity_on_hand:Number(C.quantityOnHand??C.quantity_on_hand??0),reorder_point:Number(C.reorderPoint??C.reorder_point??0),unit_cost:Number(C.unitCost??C.unit_cost??0),selling_price:Number(C.sellingPrice??C.selling_price??0)}}).sort((P,C)=>P.name.localeCompare(C.name))},enabled:!!b}),w=it({mutationFn:async p=>{if(!b||!t)throw new Error("No active company context");await jn(ve(te,Y.INVENTORY_ITEMS),{companyId:b,name:p.name,sku:p.sku||null,category:p.category||null,description:p.description||null,unitOfMeasure:p.unit_of_measure||"units",quantityOnHand:p.quantity_on_hand,reorderPoint:p.reorder_point,unitCost:p.unit_cost,sellingPrice:p.selling_price,createdBy:t.id,createdAt:ye(),updatedAt:ye()})},onSuccess:()=>{e.invalidateQueries({queryKey:["inventory-items",b]}),Z.success("Item added successfully"),i(!1),h({name:"",sku:"",category:"",description:"",unit_of_measure:"units",quantity_on_hand:0,reorder_point:0,unit_cost:0,selling_price:0})},onError:p=>{Z.error(p.message)}}),y=it({mutationFn:async({itemId:p,movementData:E})=>{if(!b||!t)throw new Error("No active company context");const P=g.find(z=>z.id===p);if(!P)throw new Error("Item not found");let C=P.quantity_on_hand;E.movement_type==="in"?C+=E.quantity:E.movement_type==="out"?C-=E.quantity:C=E.quantity;const I=ml(te),O=He(ve(te,Y.STOCK_MOVEMENTS)),$=He(te,Y.INVENTORY_ITEMS,p);I.set(O,{companyId:b,inventoryItemId:p,movementType:E.movement_type,quantity:E.quantity,referenceNumber:E.reference_number||null,notes:E.notes||null,createdBy:t.id,createdAt:ye()}),I.update($,{quantityOnHand:C,updatedAt:ye()}),await I.commit()},onSuccess:()=>{e.invalidateQueries({queryKey:["inventory-items",b]}),Z.success("Stock movement recorded"),l(!1),u(null),m({movement_type:"in",quantity:0,reference_number:"",notes:""})},onError:p=>{Z.error(p.message)}}),A=g.filter(p=>{var E,P;return p.name.toLowerCase().includes(n.toLowerCase())||((E=p.sku)==null?void 0:E.toLowerCase().includes(n.toLowerCase()))||((P=p.category)==null?void 0:P.toLowerCase().includes(n.toLowerCase()))}),T=g.filter(p=>p.quantity_on_hand<=p.reorder_point),v=g.reduce((p,E)=>p+E.quantity_on_hand*E.unit_cost,0),S=p=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(p),j=["Raw Materials","Finished Goods","Supplies","Equipment","Other"];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Inventory"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your stock and inventory items"})]}),a.jsxs(Jn,{open:s,onOpenChange:i,children:[a.jsx(Hr,{asChild:!0,children:a.jsxs(G,{children:[a.jsx(xn,{className:"mr-2 h-4 w-4"}),"Add Item"]})}),a.jsxs(zn,{className:"max-w-2xl",children:[a.jsx(qn,{children:a.jsx(Wn,{children:"Add Inventory Item"})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Item Name *"}),a.jsx(K,{value:d.name,onChange:p=>h({...d,name:p.target.value}),placeholder:"Enter item name"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"SKU"}),a.jsx(K,{value:d.sku,onChange:p=>h({...d,sku:p.target.value}),placeholder:"Stock Keeping Unit"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Category"}),a.jsxs(It,{value:d.category,onValueChange:p=>h({...d,category:p}),children:[a.jsx(Et,{children:a.jsx(kt,{placeholder:"Select category"})}),a.jsx(At,{children:j.map(p=>a.jsx(be,{value:p,children:p},p))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Unit of Measure"}),a.jsxs(It,{value:d.unit_of_measure,onValueChange:p=>h({...d,unit_of_measure:p}),children:[a.jsx(Et,{children:a.jsx(kt,{})}),a.jsxs(At,{children:[a.jsx(be,{value:"units",children:"Units"}),a.jsx(be,{value:"kg",children:"Kilograms"}),a.jsx(be,{value:"liters",children:"Liters"}),a.jsx(be,{value:"meters",children:"Meters"}),a.jsx(be,{value:"pieces",children:"Pieces"}),a.jsx(be,{value:"boxes",children:"Boxes"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Initial Quantity"}),a.jsx(K,{type:"number",value:d.quantity_on_hand,onChange:p=>h({...d,quantity_on_hand:parseFloat(p.target.value)||0})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Reorder Point"}),a.jsx(K,{type:"number",value:d.reorder_point,onChange:p=>h({...d,reorder_point:parseFloat(p.target.value)||0})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Unit Cost (ZMW)"}),a.jsx(K,{type:"number",step:"0.01",value:d.unit_cost,onChange:p=>h({...d,unit_cost:parseFloat(p.target.value)||0})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Selling Price (ZMW)"}),a.jsx(K,{type:"number",step:"0.01",value:d.selling_price,onChange:p=>h({...d,selling_price:parseFloat(p.target.value)||0})})]}),a.jsxs("div",{className:"col-span-2 space-y-2",children:[a.jsx(J,{children:"Description"}),a.jsx(K,{value:d.description,onChange:p=>h({...d,description:p.target.value}),placeholder:"Item description"})]})]}),a.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[a.jsx(G,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),a.jsx(G,{onClick:()=>w.mutate(d),disabled:!d.name,children:"Add Item"})]})]})]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Total Items"}),a.jsx(Wa,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:g.length})})]}),a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Total Value"}),a.jsx(Wa,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:S(v)})})]}),a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Low Stock Items"}),a.jsx(Oi,{className:"h-4 w-4 text-destructive"})]}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold text-destructive",children:T.length})})]}),a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Categories"}),a.jsx(Wa,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:new Set(g.map(p=>p.category).filter(Boolean)).size})})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(ne,{children:"Inventory Items"}),a.jsxs("div",{className:"relative w-64",children:[a.jsx(na,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),a.jsx(K,{placeholder:"Search items...",value:n,onChange:p=>r(p.target.value),className:"pl-8"})]})]})}),a.jsx(re,{children:x?a.jsx("p",{children:"Loading inventory..."}):A.length===0?a.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No inventory items found. Add your first item to get started."}):a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Item Name"}),a.jsx(U,{children:"SKU"}),a.jsx(U,{children:"Category"}),a.jsx(U,{className:"text-right",children:"Qty on Hand"}),a.jsx(U,{className:"text-right",children:"Reorder Point"}),a.jsx(U,{className:"text-right",children:"Unit Cost"}),a.jsx(U,{className:"text-right",children:"Total Value"}),a.jsx(U,{children:"Status"}),a.jsx(U,{children:"Actions"})]})}),a.jsx(Wt,{children:A.map(p=>a.jsxs(_e,{children:[a.jsx(B,{className:"font-medium",children:p.name}),a.jsx(B,{children:p.sku||"-"}),a.jsx(B,{children:p.category||"-"}),a.jsxs(B,{className:"text-right",children:[p.quantity_on_hand," ",p.unit_of_measure]}),a.jsx(B,{className:"text-right",children:p.reorder_point}),a.jsx(B,{className:"text-right",children:S(p.unit_cost)}),a.jsx(B,{className:"text-right",children:S(p.quantity_on_hand*p.unit_cost)}),a.jsx(B,{children:p.quantity_on_hand<=p.reorder_point?a.jsx(Xe,{variant:"destructive",children:"Low Stock"}):a.jsx(Xe,{variant:"secondary",children:"In Stock"})}),a.jsx(B,{children:a.jsxs(G,{variant:"outline",size:"sm",onClick:()=>{u(p),l(!0)},children:[a.jsx(ote,{className:"h-4 w-4 mr-1"}),"Adjust"]})})]},p.id))})]})})]}),a.jsx(Jn,{open:o,onOpenChange:l,children:a.jsxs(zn,{children:[a.jsx(qn,{children:a.jsxs(Wn,{children:["Stock Movement - ",c==null?void 0:c.name]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Movement Type"}),a.jsxs(It,{value:f.movement_type,onValueChange:p=>m({...f,movement_type:p}),children:[a.jsx(Et,{children:a.jsx(kt,{})}),a.jsxs(At,{children:[a.jsx(be,{value:"in",children:"Stock In (Add)"}),a.jsx(be,{value:"out",children:"Stock Out (Remove)"}),a.jsx(be,{value:"adjustment",children:"Adjustment (Set)"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Quantity"}),a.jsx(K,{type:"number",value:f.quantity,onChange:p=>m({...f,quantity:parseFloat(p.target.value)||0})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Reference Number"}),a.jsx(K,{value:f.reference_number,onChange:p=>m({...f,reference_number:p.target.value}),placeholder:"PO#, Invoice#, etc."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Notes"}),a.jsx(K,{value:f.notes,onChange:p=>m({...f,notes:p.target.value}),placeholder:"Reason for adjustment"})]})]}),a.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[a.jsx(G,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),a.jsx(G,{onClick:()=>c&&y.mutate({itemId:c.id,movementData:f}),disabled:f.quantity<=0,children:"Record Movement"})]})]})})]})},J8e=()=>{const{user:t}=ct(),e=un(),[n,r]=N.useState(!1),[s,i]=N.useState(!1),[o,l]=N.useState(null),[c,u]=N.useState({account_name:"",account_number:"",bank_name:"",branch:"",account_type:"checking",currency:"ZMW",opening_balance:0}),[d,h]=N.useState({transaction_type:"deposit",amount:0,description:"",reference_number:"",transaction_date:new Date().toISOString().split("T")[0]}),{data:f}=Ne({queryKey:["bank-accounts-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const T=await Ke.getPrimaryMembershipByUser(t.id);return(T==null?void 0:T.companyId)??null},enabled:!!t}),{data:m=[],isLoading:b}=Ne({queryKey:["bank-accounts",f],queryFn:async()=>{if(!f)return[];const T=ve(te,Y.BANK_ACCOUNTS);return(await $e(Ce(T,ge("companyId","==",f)))).docs.map(S=>{const j=S.data();return{id:S.id,account_name:String(j.accountName??j.account_name??""),account_number:j.accountNumber??j.account_number??null,bank_name:String(j.bankName??j.bank_name??""),branch:j.branch??null,account_type:j.accountType??j.account_type??null,currency:j.currency??"ZMW",opening_balance:Number(j.openingBalance??j.opening_balance??0),current_balance:Number(j.currentBalance??j.current_balance??0),is_active:!!(j.isActive??j.is_active??!0)}}).sort((S,j)=>S.account_name.localeCompare(j.account_name))},enabled:!!f}),{data:g=[]}=Ne({queryKey:["bank-transactions",f,o==null?void 0:o.id],queryFn:async()=>{if(!o||!f)return[];const T=ve(te,Y.BANK_TRANSACTIONS);return(await $e(Ce(T,ge("companyId","==",f),ge("bankAccountId","==",o.id)))).docs.map(S=>{var P;const j=S.data(),p=j.transactionDate??j.transaction_date,E=typeof p=="string"?p:((P=p==null?void 0:p.toDate)==null?void 0:P.call(p).toISOString().slice(0,10))??"";return{id:S.id,bank_account_id:String(j.bankAccountId??j.bank_account_id??""),transaction_type:String(j.transactionType??j.transaction_type??""),amount:Number(j.amount??0),description:j.description??null,reference_number:j.referenceNumber??j.reference_number??null,transaction_date:E,is_reconciled:!!(j.isReconciled??j.is_reconciled??!1)}}).sort((S,j)=>j.transaction_date.localeCompare(S.transaction_date))},enabled:!!(o&&f)}),x=it({mutationFn:async T=>{if(!f||!t)throw new Error("No active company context");await jn(ve(te,Y.BANK_ACCOUNTS),{companyId:f,accountName:T.account_name,accountNumber:T.account_number||null,bankName:T.bank_name,branch:T.branch||null,accountType:T.account_type||"checking",currency:T.currency||"ZMW",openingBalance:T.opening_balance,currentBalance:T.opening_balance,isActive:!0,createdBy:t.id,createdAt:ye(),updatedAt:ye()})},onSuccess:()=>{e.invalidateQueries({queryKey:["bank-accounts",f]}),Z.success("Bank account added successfully"),r(!1),u({account_name:"",account_number:"",bank_name:"",branch:"",account_type:"checking",currency:"ZMW",opening_balance:0})},onError:T=>{Z.error(T.message)}}),w=it({mutationFn:async T=>{if(!o||!f||!t)throw new Error("No account selected");const v=T.transaction_type==="deposit"?o.current_balance+T.amount:o.current_balance-T.amount,S=ml(te),j=He(ve(te,Y.BANK_TRANSACTIONS)),p=He(te,Y.BANK_ACCOUNTS,o.id);S.set(j,{companyId:f,bankAccountId:o.id,transactionType:T.transaction_type,amount:T.amount,description:T.description||null,referenceNumber:T.reference_number||null,transactionDate:T.transaction_date,isReconciled:!1,createdBy:t.id,createdAt:ye(),updatedAt:ye()}),S.update(p,{currentBalance:v,updatedAt:ye()}),await S.commit()},onSuccess:()=>{e.invalidateQueries({queryKey:["bank-accounts",f]}),e.invalidateQueries({queryKey:["bank-transactions",f,o==null?void 0:o.id]}),Z.success("Transaction recorded"),i(!1),h({transaction_type:"deposit",amount:0,description:"",reference_number:"",transaction_date:new Date().toISOString().split("T")[0]})},onError:T=>{Z.error(T.message)}}),y=(T,v="ZMW")=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:v}).format(T),A=m.reduce((T,v)=>T+v.current_balance,0);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Bank Accounts"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your bank accounts and transactions"})]}),a.jsxs(Jn,{open:n,onOpenChange:r,children:[a.jsx(Hr,{asChild:!0,children:a.jsxs(G,{children:[a.jsx(xn,{className:"mr-2 h-4 w-4"}),"Add Account"]})}),a.jsxs(zn,{children:[a.jsx(qn,{children:a.jsx(Wn,{children:"Add Bank Account"})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Account Name *"}),a.jsx(K,{value:c.account_name,onChange:T=>u({...c,account_name:T.target.value}),placeholder:"e.g., Main Operating Account"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Bank Name *"}),a.jsx(K,{value:c.bank_name,onChange:T=>u({...c,bank_name:T.target.value}),placeholder:"e.g., Zanaco, Stanbic, FNB"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Account Number"}),a.jsx(K,{value:c.account_number,onChange:T=>u({...c,account_number:T.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Branch"}),a.jsx(K,{value:c.branch,onChange:T=>u({...c,branch:T.target.value})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Account Type"}),a.jsxs(It,{value:c.account_type,onValueChange:T=>u({...c,account_type:T}),children:[a.jsx(Et,{children:a.jsx(kt,{})}),a.jsxs(At,{children:[a.jsx(be,{value:"checking",children:"Checking"}),a.jsx(be,{value:"savings",children:"Savings"}),a.jsx(be,{value:"money_market",children:"Money Market"}),a.jsx(be,{value:"fixed_deposit",children:"Fixed Deposit"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Currency"}),a.jsxs(It,{value:c.currency,onValueChange:T=>u({...c,currency:T}),children:[a.jsx(Et,{children:a.jsx(kt,{})}),a.jsxs(At,{children:[a.jsx(be,{value:"ZMW",children:"ZMW - Zambian Kwacha"}),a.jsx(be,{value:"USD",children:"USD - US Dollar"}),a.jsx(be,{value:"EUR",children:"EUR - Euro"}),a.jsx(be,{value:"GBP",children:"GBP - British Pound"})]})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Opening Balance"}),a.jsx(K,{type:"number",step:"0.01",value:c.opening_balance,onChange:T=>u({...c,opening_balance:parseFloat(T.target.value)||0})})]})]}),a.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[a.jsx(G,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),a.jsx(G,{onClick:()=>x.mutate(c),disabled:!c.account_name||!c.bank_name,children:"Add Account"})]})]})]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Total Accounts"}),a.jsx(wi,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:m.length})})]}),a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Total Balance"}),a.jsx(wi,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:y(A)})})]}),a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Active Accounts"}),a.jsx(wi,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:m.filter(T=>T.is_active).length})})]})]}),a.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"Bank Accounts"})}),a.jsx(re,{children:b?a.jsx("p",{children:"Loading accounts..."}):m.length===0?a.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No bank accounts found. Add your first account to get started."}):a.jsx("div",{className:"space-y-4",children:m.map(T=>a.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors ${(o==null?void 0:o.id)===T.id?"border-primary bg-primary/5":"hover:bg-muted/50"}`,onClick:()=>l(T),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:T.account_name}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[T.bank_name," ",T.account_number?`- ${T.account_number}`:""]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"font-bold",children:y(T.current_balance,T.currency||"ZMW")}),a.jsx(Xe,{variant:T.is_active?"secondary":"outline",children:T.account_type})]})]})},T.id))})})]}),a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between",children:[a.jsx(ne,{children:o?`Transactions - ${o.account_name}`:"Select an Account"}),o&&a.jsxs(Jn,{open:s,onOpenChange:i,children:[a.jsx(Hr,{asChild:!0,children:a.jsxs(G,{size:"sm",children:[a.jsx(xn,{className:"h-4 w-4 mr-1"}),"Add Transaction"]})}),a.jsxs(zn,{children:[a.jsx(qn,{children:a.jsx(Wn,{children:"Record Transaction"})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Transaction Type"}),a.jsxs(It,{value:d.transaction_type,onValueChange:T=>h({...d,transaction_type:T}),children:[a.jsx(Et,{children:a.jsx(kt,{})}),a.jsxs(At,{children:[a.jsx(be,{value:"deposit",children:"Deposit"}),a.jsx(be,{value:"withdrawal",children:"Withdrawal"}),a.jsx(be,{value:"transfer",children:"Transfer"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Amount"}),a.jsx(K,{type:"number",step:"0.01",value:d.amount,onChange:T=>h({...d,amount:parseFloat(T.target.value)||0})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Date"}),a.jsx(K,{type:"date",value:d.transaction_date,onChange:T=>h({...d,transaction_date:T.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Description"}),a.jsx(K,{value:d.description,onChange:T=>h({...d,description:T.target.value}),placeholder:"Transaction description"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Reference Number"}),a.jsx(K,{value:d.reference_number,onChange:T=>h({...d,reference_number:T.target.value}),placeholder:"Check#, Transfer#, etc."})]})]}),a.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[a.jsx(G,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),a.jsx(G,{onClick:()=>w.mutate(d),disabled:d.amount<=0,children:"Record Transaction"})]})]})]})]}),a.jsx(re,{children:o?g.length===0?a.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No transactions recorded for this account"}):a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Date"}),a.jsx(U,{children:"Description"}),a.jsx(U,{className:"text-right",children:"Amount"})]})}),a.jsx(Wt,{children:g.slice(0,10).map(T=>a.jsxs(_e,{children:[a.jsx(B,{children:new Date(T.transaction_date).toLocaleDateString()}),a.jsx(B,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[T.transaction_type==="deposit"?a.jsx(ate,{className:"h-4 w-4 text-green-500"}):a.jsx(lte,{className:"h-4 w-4 text-red-500"}),T.description||T.transaction_type]})}),a.jsxs(B,{className:`text-right font-medium ${T.transaction_type==="deposit"?"text-green-600":"text-red-600"}`,children:[T.transaction_type==="deposit"?"+":"-",y(T.amount)]})]},T.id))})]}):a.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Select an account to view transactions"})})]})]})]})},eqe=()=>{const{user:t}=ct(),e=un(),[n,r]=N.useState(""),[s,i]=N.useState(0),[o,l]=N.useState(new Date().toISOString().split("T")[0]),[c,u]=N.useState(new Set),{data:d}=Ne({queryKey:["reconciliation-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const T=await Ke.getPrimaryMembershipByUser(t.id);return(T==null?void 0:T.companyId)??null},enabled:!!t}),{data:h=[]}=Ne({queryKey:["bank-accounts",d],queryFn:async()=>{if(!d)return[];const T=ve(te,Y.BANK_ACCOUNTS);return(await $e(Ce(T,ge("companyId","==",d),ge("isActive","==",!0)))).docs.map(S=>{const j=S.data();return{id:S.id,account_name:String(j.accountName??j.account_name??""),bank_name:String(j.bankName??j.bank_name??""),current_balance:Number(j.currentBalance??j.current_balance??0)}}).sort((S,j)=>S.account_name.localeCompare(j.account_name))},enabled:!!d}),{data:f=[]}=Ne({queryKey:["unreconciled-transactions",d,n],queryFn:async()=>{if(!n||!d)return[];const T=ve(te,Y.BANK_TRANSACTIONS);return(await $e(Ce(T,ge("companyId","==",d),ge("bankAccountId","==",n),ge("isReconciled","==",!1)))).docs.map(S=>{var P;const j=S.data(),p=j.transactionDate??j.transaction_date,E=typeof p=="string"?p:((P=p==null?void 0:p.toDate)==null?void 0:P.call(p).toISOString().slice(0,10))??"";return{id:S.id,transaction_type:String(j.transactionType??j.transaction_type??""),amount:Number(j.amount??0),description:j.description??null,reference_number:j.referenceNumber??j.reference_number??null,transaction_date:E,is_reconciled:!!(j.isReconciled??j.is_reconciled??!1)}}).sort((S,j)=>j.transaction_date.localeCompare(S.transaction_date))},enabled:!!(n&&d)}),m=it({mutationFn:async()=>{if(!n||c.size===0||!d||!t)throw new Error("Please select transactions to reconcile");const T=Array.from(c),v=ml(te);T.forEach(p=>{const E=He(te,Y.BANK_TRANSACTIONS,p);v.update(E,{isReconciled:!0,reconciledDate:o,updatedAt:ye()})});const S=h.find(p=>p.id===n),j=He(ve(te,Y.RECONCILIATIONS));v.set(j,{companyId:d,bankAccountId:n,reconciliationDate:o,statementBalance:s,bookBalance:(S==null?void 0:S.current_balance)||0,difference:s-((S==null?void 0:S.current_balance)||0),status:"completed",transactionIds:T,reconciledBy:t.id,createdAt:ye(),updatedAt:ye()}),await v.commit()},onSuccess:()=>{e.invalidateQueries({queryKey:["unreconciled-transactions",d,n]}),Z.success("Transactions reconciled successfully"),u(new Set)},onError:T=>{Z.error(T.message)}}),b=h.find(T=>T.id===n),g=f.filter(T=>c.has(T.id)).reduce((T,v)=>v.transaction_type==="deposit"?T+v.amount:T-v.amount,(b==null?void 0:b.current_balance)||0),x=s-g,w=T=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(T),y=T=>{const v=new Set(c);v.has(T)?v.delete(T):v.add(T),u(v)},A=()=>{c.size===f.length?u(new Set):u(new Set(f.map(T=>T.id)))};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Bank Reconciliation"}),a.jsx("p",{className:"text-muted-foreground",children:"Match your bank statement with recorded transactions"})]}),a.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[a.jsxs(X,{className:"lg:col-span-1",children:[a.jsx(ee,{children:a.jsx(ne,{children:"Reconciliation Setup"})}),a.jsxs(re,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Bank Account"}),a.jsxs(It,{value:n,onValueChange:r,children:[a.jsx(Et,{children:a.jsx(kt,{placeholder:"Select account"})}),a.jsx(At,{children:h.map(T=>a.jsxs(be,{value:T.id,children:[T.account_name," (",T.bank_name,")"]},T.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Statement Date"}),a.jsx(K,{type:"date",value:o,onChange:T=>l(T.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Statement Ending Balance"}),a.jsx(K,{type:"number",step:"0.01",value:s,onChange:T=>i(parseFloat(T.target.value)||0),placeholder:"Enter balance from bank statement"})]}),b&&a.jsxs("div",{className:"pt-4 border-t space-y-3",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Book Balance:"}),a.jsx("span",{className:"font-medium",children:w(b.current_balance)})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Cleared Balance:"}),a.jsx("span",{className:"font-medium",children:w(g)})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Statement Balance:"}),a.jsx("span",{className:"font-medium",children:w(s)})]}),a.jsxs("div",{className:"flex justify-between font-semibold pt-2 border-t",children:[a.jsx("span",{children:"Difference:"}),a.jsx("span",{className:x===0?"text-green-600":"text-red-600",children:w(x)})]}),x===0?a.jsxs("div",{className:"flex items-center gap-2 text-green-600 text-sm",children:[a.jsx(vo,{className:"h-4 w-4"}),a.jsx("span",{children:"Balanced! Ready to reconcile."})]}):a.jsxs("div",{className:"flex items-center gap-2 text-amber-600 text-sm",children:[a.jsx(xa,{className:"h-4 w-4"}),a.jsx("span",{children:"Difference must be zero to reconcile."})]})]}),a.jsxs(G,{className:"w-full",onClick:()=>m.mutate(),disabled:x!==0||c.size===0,children:[a.jsx(Ite,{className:"h-4 w-4 mr-2"}),"Complete Reconciliation"]})]})]}),a.jsxs(X,{className:"lg:col-span-2",children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between",children:[a.jsx(ne,{children:"Unreconciled Transactions"}),f.length>0&&a.jsx(G,{variant:"outline",size:"sm",onClick:A,children:c.size===f.length?"Deselect All":"Select All"})]}),a.jsx(re,{children:n?f.length===0?a.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No unreconciled transactions for this account"}):a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{className:"w-12",children:"Clear"}),a.jsx(U,{children:"Date"}),a.jsx(U,{children:"Description"}),a.jsx(U,{children:"Reference"}),a.jsx(U,{children:"Type"}),a.jsx(U,{className:"text-right",children:"Amount"})]})}),a.jsx(Wt,{children:f.map(T=>a.jsxs(_e,{className:c.has(T.id)?"bg-primary/5":"",children:[a.jsx(B,{children:a.jsx(yk,{checked:c.has(T.id),onCheckedChange:()=>y(T.id)})}),a.jsx(B,{children:new Date(T.transaction_date).toLocaleDateString()}),a.jsx(B,{children:T.description||"-"}),a.jsx(B,{children:T.reference_number||"-"}),a.jsx(B,{children:a.jsx(Xe,{variant:T.transaction_type==="deposit"?"secondary":"outline",children:T.transaction_type})}),a.jsxs(B,{className:`text-right font-medium ${T.transaction_type==="deposit"?"text-green-600":"text-red-600"}`,children:[T.transaction_type==="deposit"?"+":"-",w(T.amount)]})]},T.id))})]}):a.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Select a bank account to view transactions"})})]})]})]})},tqe=()=>{const{user:t}=ct(),e=un(),[n,r]=N.useState(""),[s,i]=N.useState(!1),[o,l]=N.useState(!1),[c,u]=N.useState({name:"",email:"",phone:"",specialty:"",hourly_rate:0,daily_rate:0,tpin:"",bank_name:"",bank_account_number:""}),[d,h]=N.useState({contractor_id:"",project_name:"",description:"",work_date:new Date().toISOString().split("T")[0],hours_worked:0,hourly_rate:0}),{data:f}=Ne({queryKey:["time-tracking-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const p=await Ke.getPrimaryMembershipByUser(t.id);return(p==null?void 0:p.companyId)??null},enabled:!!t}),{data:m=[],isLoading:b}=Ne({queryKey:["contractors",f],queryFn:async()=>{if(!f)return[];const p=ve(te,Y.CONTRACTORS);return(await $e(Ce(p,ge("companyId","==",f)))).docs.map(P=>{const C=P.data();return{id:P.id,name:String(C.name??""),email:C.email??null,phone:C.phone??null,specialty:C.specialty??null,hourly_rate:Number(C.hourlyRate??C.hourly_rate??0),daily_rate:Number(C.dailyRate??C.daily_rate??0),tpin:C.tpin??null,bank_name:C.bankName??C.bank_name??null,bank_account_number:C.bankAccountNumber??C.bank_account_number??null,is_active:!!(C.isActive??C.is_active??!0)}}).sort((P,C)=>P.name.localeCompare(C.name))},enabled:!!f}),{data:g=[],isLoading:x}=Ne({queryKey:["time-entries",f],queryFn:async()=>{if(!f)return[];const[p,E]=await Promise.all([$e(Ce(ve(te,Y.TIME_ENTRIES),ge("companyId","==",f))),$e(Ce(ve(te,Y.CONTRACTORS),ge("companyId","==",f)))]),P=new Map;return E.docs.forEach(C=>{const I=C.data();P.set(C.id,String(I.name??""))}),p.docs.map(C=>{var H;const I=C.data(),O=I.workDate??I.work_date,$=typeof O=="string"?O:((H=O==null?void 0:O.toDate)==null?void 0:H.call(O).toISOString().slice(0,10))??"",z=I.contractorId??I.contractor_id??null;return{id:C.id,contractor_id:z,employee_id:I.employeeId??I.employee_id??null,project_name:I.projectName??I.project_name??null,description:I.description??null,work_date:$,hours_worked:Number(I.hoursWorked??I.hours_worked??0),hourly_rate:Number(I.hourlyRate??I.hourly_rate??0),total_amount:Number(I.totalAmount??I.total_amount??0),status:I.status??"pending",contractor:z?{name:P.get(z)||"-"}:void 0}}).sort((C,I)=>I.work_date.localeCompare(C.work_date))},enabled:!!f}),w=it({mutationFn:async p=>{if(!f||!t)throw new Error("No active company context");await jn(ve(te,Y.CONTRACTORS),{companyId:f,name:p.name,email:p.email||null,phone:p.phone||null,specialty:p.specialty||null,hourlyRate:p.hourly_rate,dailyRate:p.daily_rate,tpin:p.tpin||null,bankName:p.bank_name||null,bankAccountNumber:p.bank_account_number||null,isActive:!0,createdBy:t.id,createdAt:ye(),updatedAt:ye()})},onSuccess:()=>{e.invalidateQueries({queryKey:["contractors",f]}),Z.success("Contractor added successfully"),i(!1),u({name:"",email:"",phone:"",specialty:"",hourly_rate:0,daily_rate:0,tpin:"",bank_name:"",bank_account_number:""})},onError:p=>{Z.error(p.message)}}),y=it({mutationFn:async p=>{if(!f||!t)throw new Error("No active company context");const E=p.hours_worked*p.hourly_rate;await jn(ve(te,Y.TIME_ENTRIES),{companyId:f,contractorId:p.contractor_id||null,projectName:p.project_name||null,description:p.description||null,workDate:p.work_date,hoursWorked:p.hours_worked,hourlyRate:p.hourly_rate,totalAmount:E,status:"pending",createdBy:t.id,createdAt:ye(),updatedAt:ye()})},onSuccess:()=>{e.invalidateQueries({queryKey:["time-entries",f]}),Z.success("Time entry recorded"),l(!1),h({contractor_id:"",project_name:"",description:"",work_date:new Date().toISOString().split("T")[0],hours_worked:0,hourly_rate:0})},onError:p=>{Z.error(p.message)}}),A=it({mutationFn:async({id:p,status:E})=>{await or(He(te,Y.TIME_ENTRIES,p),{status:E,updatedAt:ye()},{merge:!0})},onSuccess:()=>{e.invalidateQueries({queryKey:["time-entries",f]}),Z.success("Status updated")},onError:p=>{Z.error(p.message)}}),T=m.filter(p=>{var E;return p.name.toLowerCase().includes(n.toLowerCase())||((E=p.specialty)==null?void 0:E.toLowerCase().includes(n.toLowerCase()))}),v=p=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(p),S=g.filter(p=>p.status==="pending").reduce((p,E)=>p+E.total_amount,0),j=g.filter(p=>{const E=new Date(p.work_date),P=new Date;return E.getMonth()===P.getMonth()&&E.getFullYear()===P.getFullYear()}).reduce((p,E)=>p+E.hours_worked,0);return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Time & Contractors"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage contractors and track time entries"})]})}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Active Contractors"}),a.jsx(Ks,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:m.filter(p=>p.is_active).length})})]}),a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Hours This Month"}),a.jsx(ba,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:j.toFixed(1)})})]}),a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Pending Entries"}),a.jsx(ba,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:g.filter(p=>p.status==="pending").length})})]}),a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Pending Amount"}),a.jsx(ba,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:v(S)})})]})]}),a.jsxs(Yv,{defaultValue:"contractors",children:[a.jsxs(Qm,{children:[a.jsx(ja,{value:"contractors",children:"Contractors"}),a.jsx(ja,{value:"time-entries",children:"Time Entries"})]}),a.jsxs(Na,{value:"contractors",className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"relative w-64",children:[a.jsx(na,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),a.jsx(K,{placeholder:"Search contractors...",value:n,onChange:p=>r(p.target.value),className:"pl-8"})]}),a.jsxs(Jn,{open:s,onOpenChange:i,children:[a.jsx(Hr,{asChild:!0,children:a.jsxs(G,{children:[a.jsx(xn,{className:"mr-2 h-4 w-4"}),"Add Contractor"]})}),a.jsxs(zn,{className:"max-w-2xl",children:[a.jsx(qn,{children:a.jsx(Wn,{children:"Add Contractor"})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Name *"}),a.jsx(K,{value:c.name,onChange:p=>u({...c,name:p.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Email"}),a.jsx(K,{type:"email",value:c.email,onChange:p=>u({...c,email:p.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Phone"}),a.jsx(K,{value:c.phone,onChange:p=>u({...c,phone:p.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Specialty"}),a.jsx(K,{value:c.specialty,onChange:p=>u({...c,specialty:p.target.value}),placeholder:"e.g., IT Consultant, Trainer"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Hourly Rate (ZMW)"}),a.jsx(K,{type:"number",step:"0.01",value:c.hourly_rate,onChange:p=>u({...c,hourly_rate:parseFloat(p.target.value)||0})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Daily Rate (ZMW)"}),a.jsx(K,{type:"number",step:"0.01",value:c.daily_rate,onChange:p=>u({...c,daily_rate:parseFloat(p.target.value)||0})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"TPIN"}),a.jsx(K,{value:c.tpin,onChange:p=>u({...c,tpin:p.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Bank Name"}),a.jsx(K,{value:c.bank_name,onChange:p=>u({...c,bank_name:p.target.value})})]}),a.jsxs("div",{className:"col-span-2 space-y-2",children:[a.jsx(J,{children:"Bank Account Number"}),a.jsx(K,{value:c.bank_account_number,onChange:p=>u({...c,bank_account_number:p.target.value})})]})]}),a.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[a.jsx(G,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),a.jsx(G,{onClick:()=>w.mutate(c),disabled:!c.name,children:"Add Contractor"})]})]})]})]}),a.jsx(X,{children:a.jsx(re,{className:"pt-6",children:b?a.jsx("p",{children:"Loading contractors..."}):T.length===0?a.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No contractors found."}):a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Name"}),a.jsx(U,{children:"Specialty"}),a.jsx(U,{children:"Contact"}),a.jsx(U,{className:"text-right",children:"Hourly Rate"}),a.jsx(U,{className:"text-right",children:"Daily Rate"}),a.jsx(U,{children:"Status"})]})}),a.jsx(Wt,{children:T.map(p=>a.jsxs(_e,{children:[a.jsx(B,{className:"font-medium",children:p.name}),a.jsx(B,{children:p.specialty||"-"}),a.jsx(B,{children:a.jsxs("div",{className:"text-sm",children:[p.email&&a.jsx("div",{children:p.email}),p.phone&&a.jsx("div",{children:p.phone})]})}),a.jsx(B,{className:"text-right",children:v(p.hourly_rate)}),a.jsx(B,{className:"text-right",children:v(p.daily_rate)}),a.jsx(B,{children:a.jsx(Xe,{variant:p.is_active?"secondary":"outline",children:p.is_active?"Active":"Inactive"})})]},p.id))})]})})})]}),a.jsxs(Na,{value:"time-entries",className:"space-y-4",children:[a.jsx("div",{className:"flex justify-end",children:a.jsxs(Jn,{open:o,onOpenChange:l,children:[a.jsx(Hr,{asChild:!0,children:a.jsxs(G,{children:[a.jsx(xn,{className:"mr-2 h-4 w-4"}),"Record Time"]})}),a.jsxs(zn,{children:[a.jsx(qn,{children:a.jsx(Wn,{children:"Record Time Entry"})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Contractor"}),a.jsxs(It,{value:d.contractor_id,onValueChange:p=>{const E=m.find(P=>P.id===p);h({...d,contractor_id:p,hourly_rate:(E==null?void 0:E.hourly_rate)||0})},children:[a.jsx(Et,{children:a.jsx(kt,{placeholder:"Select contractor"})}),a.jsx(At,{children:m.filter(p=>p.is_active).map(p=>a.jsx(be,{value:p.id,children:p.name},p.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Project Name"}),a.jsx(K,{value:d.project_name,onChange:p=>h({...d,project_name:p.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Work Date"}),a.jsx(K,{type:"date",value:d.work_date,onChange:p=>h({...d,work_date:p.target.value})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Hours Worked"}),a.jsx(K,{type:"number",step:"0.5",value:d.hours_worked,onChange:p=>h({...d,hours_worked:parseFloat(p.target.value)||0})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Hourly Rate (ZMW)"}),a.jsx(K,{type:"number",step:"0.01",value:d.hourly_rate,onChange:p=>h({...d,hourly_rate:parseFloat(p.target.value)||0})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Description"}),a.jsx(K,{value:d.description,onChange:p=>h({...d,description:p.target.value}),placeholder:"Work performed"})]}),a.jsx("div",{className:"pt-2 border-t",children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Total Amount:"}),a.jsx("span",{className:"font-bold",children:v(d.hours_worked*d.hourly_rate)})]})})]}),a.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[a.jsx(G,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),a.jsx(G,{onClick:()=>y.mutate(d),disabled:d.hours_worked<=0,children:"Record Entry"})]})]})]})}),a.jsx(X,{children:a.jsx(re,{className:"pt-6",children:x?a.jsx("p",{children:"Loading time entries..."}):g.length===0?a.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No time entries found."}):a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Date"}),a.jsx(U,{children:"Contractor"}),a.jsx(U,{children:"Project"}),a.jsx(U,{className:"text-right",children:"Hours"}),a.jsx(U,{className:"text-right",children:"Rate"}),a.jsx(U,{className:"text-right",children:"Amount"}),a.jsx(U,{children:"Status"}),a.jsx(U,{children:"Actions"})]})}),a.jsx(Wt,{children:g.map(p=>{var E;return a.jsxs(_e,{children:[a.jsx(B,{children:new Date(p.work_date).toLocaleDateString()}),a.jsx(B,{children:((E=p.contractor)==null?void 0:E.name)||"-"}),a.jsx(B,{children:p.project_name||"-"}),a.jsx(B,{className:"text-right",children:p.hours_worked}),a.jsx(B,{className:"text-right",children:v(p.hourly_rate)}),a.jsx(B,{className:"text-right font-medium",children:v(p.total_amount)}),a.jsx(B,{children:a.jsx(Xe,{variant:p.status==="paid"?"secondary":p.status==="approved"?"default":"outline",children:p.status})}),a.jsxs(B,{children:[p.status==="pending"&&a.jsx(G,{size:"sm",variant:"outline",onClick:()=>A.mutate({id:p.id,status:"approved"}),children:"Approve"}),p.status==="approved"&&a.jsx(G,{size:"sm",variant:"outline",onClick:()=>A.mutate({id:p.id,status:"paid"}),children:"Mark Paid"})]})]},p.id)})})]})})})]})]})]})},jh={super_admin:{label:"Super Admin",description:"Full system access, can manage all users and settings",color:"bg-red-500"},admin:{label:"Admin",description:"Can manage most settings and users",color:"bg-orange-500"},financial_manager:{label:"Financial Manager",description:"Oversees all financial operations and approvals",color:"bg-rose-500"},accountant:{label:"Accountant",description:"Full access to financial records, reports, and transactions",color:"bg-blue-500"},assistant_accountant:{label:"Assistant Accountant",description:"Assists with bookkeeping and data entry under supervision",color:"bg-sky-500"},finance_officer:{label:"Finance Officer",description:"Can manage invoices, bills, and expenses",color:"bg-cyan-500"},bookkeeper:{label:"Bookkeeper",description:"Can record transactions and reconcile accounts",color:"bg-teal-500"},cashier:{label:"Cashier",description:"Handles cash transactions and petty cash management",color:"bg-emerald-500"},inventory_manager:{label:"Inventory Manager",description:"Can manage inventory and stock movements",color:"bg-green-500"},hr_manager:{label:"HR Manager",description:"Can manage employees and payroll",color:"bg-purple-500"},project_manager:{label:"Project Manager",description:"Can manage projects and grants",color:"bg-indigo-500"},auditor:{label:"Auditor",description:"Read-only access to all financial records for auditing",color:"bg-yellow-500"},staff:{label:"Staff",description:"Basic access for regular employees",color:"bg-slate-500"},read_only:{label:"Read Only",description:"Can only view data, no editing permissions",color:"bg-gray-500"}},IS=["super_admin","admin","financial_manager","accountant","assistant_accountant","finance_officer","bookkeeper","cashier","inventory_manager","hr_manager","project_manager","auditor","staff","read_only"];function nqe(){const{user:t}=ct(),{data:e}=gj(),[n,r]=N.useState(!1),[s,i]=N.useState(""),[o,l]=N.useState(""),[c,u]=N.useState("finance_officer"),[d,h]=N.useState(null),{data:f}=Ne({queryKey:["primary-membership",t==null?void 0:t.uid],queryFn:()=>t?Ke.getPrimaryMembershipByUser(t.uid):null,enabled:!!t}),m=f==null?void 0:f.companyId,b=un(),{data:g,isLoading:x,error:w}=Ne({queryKey:["company-users",m],queryFn:async()=>m?Ke.listCompanyUsers(m):[],enabled:!!m}),y=it({mutationFn:async({userId:P,newRole:C})=>{if(!m)throw new Error("No company ID found");await Ke.updateUserRole({companyId:m,userId:P,newRole:C})},onSuccess:()=>{b.invalidateQueries({queryKey:["company-users",m]}),Z.success("User role updated successfully"),h(null)},onError:P=>{Z.error("Failed to update role: "+(P instanceof Error?P.message:"Unknown error"))}}),A=it({mutationFn:async P=>{if(!m)throw new Error("No company ID found");await Ke.removeCompanyUser({companyId:m,userId:P})},onSuccess:()=>{b.invalidateQueries({queryKey:["company-users",m]}),Z.success("User removed successfully")},onError:P=>{Z.error("Failed to remove user: "+(P instanceof Error?P.message:"Unknown error"))}}),T=it({mutationFn:async({userId:P,action:C})=>{if(!m)throw new Error("No company ID found");C==="suspend"?await Ke.suspendUser({companyId:m,userId:P}):await Ke.reactivateUser({companyId:m,userId:P})},onSuccess:()=>{b.invalidateQueries({queryKey:["company-users",m]}),Z.success("User status updated successfully")},onError:P=>{Z.error("Failed to update status: "+(P instanceof Error?P.message:"Unknown error"))}}),v=it({mutationFn:async P=>{if(!m)throw new Error("No company ID found");await Ke.revokeInvitation({companyId:m,invitationId:P})},onSuccess:()=>{b.invalidateQueries({queryKey:["company-users",m]}),Z.success("Invitation revoked")},onError:P=>{Z.error("Failed to revoke: "+(P instanceof Error?P.message:"Unknown error"))}}),S=it({mutationFn:async()=>{if(!s)throw new Error("Email is required");if(!m)throw new Error("No company ID found");await Es.sendInvitation({email:s,role:c,inviteeName:o,companyId:m,loginUrl:`${window.location.origin}/auth`})},onSuccess:()=>{Z.success("Invitation sent successfully"),i(""),l(""),u("finance_officer"),r(!1)},onError:P=>{Z.error("Failed to send invite: "+(P instanceof Error?P.message:"Unknown error"))}}),j=e==="super_admin"||e==="admin",p=P=>{const C=jh[P];return a.jsx(Xe,{className:`${C.color} text-white hover:${C.color}`,children:C.label})},E=P=>P.fullName||P.email||P.userId||"Unknown User";return!t||!m&&!x?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx(Pn,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Users & Roles"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage user access and permissions like QuickBooks"})]}),j&&a.jsxs(Jn,{open:n,onOpenChange:r,children:[a.jsx(Hr,{asChild:!0,children:a.jsxs(G,{children:[a.jsx(Rte,{className:"mr-2 h-4 w-4"}),"Invite User"]})}),a.jsxs(zn,{children:[a.jsxs(qn,{children:[a.jsx(Wn,{children:"Invite New User"}),a.jsx(bu,{children:"Send an invitation to a new user with a specific role"})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"name",children:"Full Name"}),a.jsx(K,{id:"name",type:"text",placeholder:"Jane Doe",value:o,onChange:P=>l(P.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"email",children:"Email Address"}),a.jsx(K,{id:"email",type:"email",placeholder:"user@example.com",value:s,onChange:P=>i(P.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"role",children:"Role"}),a.jsxs(It,{value:c,onValueChange:P=>u(P),children:[a.jsx(Et,{children:a.jsx(kt,{})}),a.jsx(At,{children:IS.map(P=>a.jsx(be,{value:P,children:a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{children:jh[P].label})})},P))})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:jh[c].description})]})]}),a.jsxs(CN,{children:[a.jsx(G,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),a.jsx(G,{onClick:()=>S.mutate(),disabled:S.isPending,children:S.isPending?a.jsxs(a.Fragment,{children:[a.jsx(Pn,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):"Send Invitation"})]})]})]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Total Users"}),a.jsx(Ks,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:(g==null?void 0:g.length)||0})})]}),a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Admins"}),a.jsx(wd,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:(g==null?void 0:g.filter(P=>P.role==="super_admin"||P.role==="admin").length)||0})})]}),a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Accountants"}),a.jsx(Ks,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:(g==null?void 0:g.filter(P=>["accountant","finance_officer","bookkeeper"].includes(P.role)).length)||0})})]}),a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Your Role"}),a.jsx(wd,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(re,{children:e&&p(e)})]})]}),a.jsxs(X,{children:[a.jsxs(ee,{children:[a.jsx(ne,{children:"All Users"}),a.jsx(jt,{children:"Manage user roles and permissions across your organization"})]}),a.jsx(re,{children:x?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(Pn,{className:"h-8 w-8 animate-spin text-primary"})}):w?a.jsx("div",{className:"p-4 text-red-500 text-center",children:"Failed to load users. Please try again."}):a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"User"}),a.jsx(U,{children:"Role"}),a.jsx(U,{children:"Status"}),a.jsx(U,{children:"Added"}),j&&a.jsx(U,{className:"text-right",children:"Actions"})]})}),a.jsxs(Wt,{children:[g==null?void 0:g.map(P=>a.jsxs(_e,{children:[a.jsx(B,{children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-medium",children:E(P)}),P.email&&a.jsx("span",{className:"text-sm text-muted-foreground",children:P.email}),P.status==="invited"&&a.jsx("span",{className:"text-xs text-amber-500 font-mono",children:"Invitation Pending"})]})}),a.jsx(B,{children:(d==null?void 0:d.id)===P.id&&P.status!=="invited"?a.jsxs(It,{value:d.role,onValueChange:C=>h({...d,role:C}),children:[a.jsx(Et,{className:"w-48",children:a.jsx(kt,{})}),a.jsx(At,{children:IS.map(C=>a.jsx(be,{value:C,children:jh[C].label},C))})]}):a.jsxs("div",{className:"space-y-1",children:[p(P.role),a.jsx("p",{className:"text-xs text-muted-foreground",children:jh[P.role].description})]})}),a.jsx(B,{children:a.jsx(Xe,{variant:P.status==="active"?"default":P.status==="invited"?"outline":"destructive",children:P.status==="invited"?"Pending":P.status})}),a.jsx(B,{children:P.createdAt?new Date(P.createdAt).toLocaleDateString():"-"}),j&&a.jsx(B,{className:"text-right",children:(d==null?void 0:d.id)===P.id?a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(G,{size:"sm",onClick:()=>y.mutate({userId:P.userId,newRole:d.role}),disabled:y.isPending,children:y.isPending?a.jsx(Pn,{className:"h-4 w-4 animate-spin"}):"Save"}),a.jsx(G,{size:"sm",variant:"outline",onClick:()=>h(null),children:"Cancel"})]}):a.jsx("div",{className:"flex justify-end gap-2",children:P.status==="invited"?a.jsx(G,{size:"sm",variant:"destructive",onClick:()=>{confirm("Revoke this invitation? The link will no longer work.")&&v.mutate(P.id)},disabled:v.isPending,children:"Revoke"}):a.jsxs(a.Fragment,{children:[a.jsx(G,{size:"sm",variant:"outline",onClick:()=>h(P),children:a.jsx(Tte,{className:"h-4 w-4"})}),P.status==="suspended"?a.jsx(G,{size:"sm",variant:"outline",className:"text-green-600 hover:text-green-700 hover:bg-green-50",onClick:()=>T.mutate({userId:P.userId,action:"reactivate"}),disabled:T.isPending,children:"Activate"}):a.jsx(G,{size:"sm",variant:"outline",className:"text-orange-600 hover:text-orange-700 hover:bg-orange-50",onClick:()=>{confirm("Suspend this user? They will lose access immediately.")&&T.mutate({userId:P.userId,action:"suspend"})},disabled:T.isPending||P.role==="super_admin",children:"Suspend"}),a.jsx(G,{size:"sm",variant:"destructive",onClick:()=>{confirm("Permanently remove this user? This cannot be undone.")&&A.mutate(P.userId)},disabled:P.role==="super_admin"||A.isPending,children:a.jsx(xs,{className:"h-4 w-4"})})]})})})]},P.id)),(!g||g.length===0)&&a.jsx(_e,{children:a.jsx(B,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"No users found"})})]})]})})]}),a.jsxs(X,{children:[a.jsxs(ee,{children:[a.jsx(ne,{children:"Role Permissions Reference"}),a.jsx(jt,{children:"Understanding what each role can access"})]}),a.jsx(re,{children:a.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:IS.map(P=>a.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border",children:[p(P),a.jsx("div",{children:a.jsx("p",{className:"text-sm text-muted-foreground",children:jh[P].description})})]},P))})})]})]})}function rqe(){const{user:t}=ct(),e=un(),[n,r]=N.useState(!1),[s,i]=N.useState(null),[o,l]=N.useState({name:"",code:"",description:"",status:"active",start_date:"",end_date:"",budget:"",donor_name:"",grant_reference:""}),{data:c}=Ne({queryKey:["projects-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const S=await Ke.getPrimaryMembershipByUser(t.id);return(S==null?void 0:S.companyId)??null},enabled:!!t}),{data:u=[],isLoading:d}=Ne({queryKey:["projects",c],queryFn:async()=>{if(!c)return[];const S=ve(te,Y.PROJECTS);return(await $e(Ce(S,ge("companyId","==",c)))).docs.map(p=>{var I;const E=p.data(),P=E.createdAt??E.created_at,C=typeof P=="string"?P:((I=P==null?void 0:P.toDate)==null?void 0:I.call(P).toISOString())??new Date().toISOString();return{id:p.id,name:String(E.name??""),code:E.code??null,description:E.description??null,status:E.status??"active",start_date:E.startDate??E.start_date??null,end_date:E.endDate??E.end_date??null,budget:Number(E.budget??0),spent:Number(E.spent??0),donor_name:E.donorName??E.donor_name??null,grant_reference:E.grantReference??E.grant_reference??null,created_at:C}}).sort((p,E)=>E.created_at.localeCompare(p.created_at))},enabled:!!c}),h=it({mutationFn:async S=>{if(!c||!t)throw new Error("No active company context");await jn(ve(te,Y.PROJECTS),{companyId:c,name:S.name,code:S.code||null,description:S.description||null,status:S.status,startDate:S.start_date||null,endDate:S.end_date||null,budget:S.budget?parseFloat(S.budget):0,spent:0,donorName:S.donor_name||null,grantReference:S.grant_reference||null,createdBy:t.id,createdAt:ye(),updatedAt:ye()})},onSuccess:()=>{e.invalidateQueries({queryKey:["projects",c]}),Z.success("Project created successfully"),b()},onError:S=>{Z.error("Failed to create project: "+S.message)}}),f=it({mutationFn:async({id:S,data:j})=>{await or(He(te,Y.PROJECTS,S),{name:j.name,code:j.code||null,description:j.description||null,status:j.status,startDate:j.start_date||null,endDate:j.end_date||null,budget:j.budget?parseFloat(j.budget):0,donorName:j.donor_name||null,grantReference:j.grant_reference||null,updatedAt:ye()},{merge:!0})},onSuccess:()=>{e.invalidateQueries({queryKey:["projects",c]}),Z.success("Project updated successfully"),b()},onError:S=>{Z.error("Failed to update project: "+S.message)}}),m=it({mutationFn:async S=>{await Li(He(te,Y.PROJECTS,S))},onSuccess:()=>{e.invalidateQueries({queryKey:["projects",c]}),Z.success("Project deleted successfully")},onError:S=>{Z.error("Failed to delete project: "+S.message)}}),b=()=>{l({name:"",code:"",description:"",status:"active",start_date:"",end_date:"",budget:"",donor_name:"",grant_reference:""}),i(null),r(!1)},g=S=>{var j;i(S),l({name:S.name,code:S.code||"",description:S.description||"",status:S.status||"active",start_date:S.start_date||"",end_date:S.end_date||"",budget:((j=S.budget)==null?void 0:j.toString())||"",donor_name:S.donor_name||"",grant_reference:S.grant_reference||""}),r(!0)},x=S=>{S.preventDefault(),s?f.mutate({id:s.id,data:o}):h.mutate(o)},w=()=>{if(u.length===0)return;const S=["Project Code","Name","Donor","Grant Reference","Status","Start Date","End Date","Budget","Spent","Remaining"],j=u.map(I=>[I.code||"",I.name,I.donor_name||"",I.grant_reference||"",I.status||"",I.start_date||"",I.end_date||"",I.budget||0,I.spent||0,(I.budget||0)-(I.spent||0)]),p=[S,...j].map(I=>I.join(",")).join(`
`),E=new Blob([p],{type:"text/csv"}),P=window.URL.createObjectURL(E),C=document.createElement("a");C.href=P,C.download="projects-grants.csv",C.click()},y=S=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(S),A=u.reduce((S,j)=>S+(j.budget||0),0),T=u.reduce((S,j)=>S+(j.spent||0),0),v=u.filter(S=>S.status==="active").length;return d?a.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Projects & Grants"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage donor-funded projects and grants"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(G,{variant:"outline",onClick:w,disabled:u.length===0,children:[a.jsx(ys,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),a.jsxs(Jn,{open:n,onOpenChange:r,children:[a.jsx(Hr,{asChild:!0,children:a.jsxs(G,{onClick:()=>{b(),r(!0)},children:[a.jsx(xn,{className:"h-4 w-4 mr-2"}),"Add Project"]})}),a.jsxs(zn,{className:"max-w-2xl",children:[a.jsx(qn,{children:a.jsx(Wn,{children:s?"Edit Project":"Add New Project"})}),a.jsxs("form",{onSubmit:x,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Project Name *"}),a.jsx(K,{value:o.name,onChange:S=>l({...o,name:S.target.value}),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Project Code"}),a.jsx(K,{value:o.code,onChange:S=>l({...o,code:S.target.value}),placeholder:"e.g., PRJ-001"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Description"}),a.jsx(lr,{value:o.description,onChange:S=>l({...o,description:S.target.value}),rows:3})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Donor Name"}),a.jsx(K,{value:o.donor_name,onChange:S=>l({...o,donor_name:S.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Grant Reference"}),a.jsx(K,{value:o.grant_reference,onChange:S=>l({...o,grant_reference:S.target.value})})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Status"}),a.jsxs(It,{value:o.status,onValueChange:S=>l({...o,status:S}),children:[a.jsx(Et,{children:a.jsx(kt,{})}),a.jsxs(At,{children:[a.jsx(be,{value:"active",children:"Active"}),a.jsx(be,{value:"completed",children:"Completed"}),a.jsx(be,{value:"on_hold",children:"On Hold"}),a.jsx(be,{value:"cancelled",children:"Cancelled"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Start Date"}),a.jsx(K,{type:"date",value:o.start_date,onChange:S=>l({...o,start_date:S.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"End Date"}),a.jsx(K,{type:"date",value:o.end_date,onChange:S=>l({...o,end_date:S.target.value})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Budget (ZMW)"}),a.jsx(K,{type:"number",step:"0.01",value:o.budget,onChange:S=>l({...o,budget:S.target.value})})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(G,{type:"button",variant:"outline",onClick:b,children:"Cancel"}),a.jsxs(G,{type:"submit",children:[s?"Update":"Create"," Project"]})]})]})]})]})]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[a.jsxs(X,{children:[a.jsx(ee,{className:"pb-2",children:a.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(vU,{className:"h-4 w-4"}),"Total Projects"]})}),a.jsxs(re,{children:[a.jsx("div",{className:"text-2xl font-bold",children:u.length}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[v," active"]})]})]}),a.jsxs(X,{children:[a.jsx(ee,{className:"pb-2",children:a.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(Qn,{className:"h-4 w-4"}),"Total Budget"]})}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:y(A)})})]}),a.jsxs(X,{children:[a.jsx(ee,{className:"pb-2",children:a.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(Qn,{className:"h-4 w-4"}),"Total Spent"]})}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:y(T)})})]}),a.jsxs(X,{children:[a.jsx(ee,{className:"pb-2",children:a.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(vd,{className:"h-4 w-4"}),"Remaining"]})}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:y(A-T)})})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"All Projects"})}),a.jsx(re,{children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Code"}),a.jsx(U,{children:"Name"}),a.jsx(U,{children:"Donor"}),a.jsx(U,{children:"Status"}),a.jsx(U,{children:"Period"}),a.jsx(U,{className:"text-right",children:"Budget"}),a.jsx(U,{children:"Utilization"}),a.jsx(U,{className:"text-right",children:"Actions"})]})}),a.jsxs(Wt,{children:[u.map(S=>{const j=S.budget?(S.spent||0)/S.budget*100:0;return a.jsxs(_e,{children:[a.jsx(B,{className:"font-mono",children:S.code||"-"}),a.jsx(B,{className:"font-medium",children:S.name}),a.jsx(B,{children:S.donor_name||"-"}),a.jsx(B,{children:a.jsx(Xe,{variant:S.status==="active"?"default":S.status==="completed"?"secondary":"outline",children:S.status})}),a.jsx(B,{children:S.start_date&&S.end_date?`${vt(new Date(S.start_date),"MMM yyyy")} - ${vt(new Date(S.end_date),"MMM yyyy")}`:"-"}),a.jsx(B,{className:"text-right",children:y(S.budget||0)}),a.jsx(B,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(xf,{value:Math.min(j,100),className:"h-2 w-20"}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:[j.toFixed(0),"%"]})]})}),a.jsx(B,{className:"text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(Fa,{to:`/projects/${S.id}/expenses`,children:a.jsx(G,{variant:"ghost",size:"icon",title:"View Expenses",children:a.jsx(C_,{className:"h-4 w-4"})})}),a.jsx(G,{variant:"ghost",size:"icon",onClick:()=>g(S),children:a.jsx(Mm,{className:"h-4 w-4"})}),a.jsx(G,{variant:"ghost",size:"icon",onClick:()=>m.mutate(S.id),children:a.jsx(xs,{className:"h-4 w-4"})})]})})]},S.id)}),u.length===0&&a.jsx(_e,{children:a.jsx(B,{colSpan:8,className:"text-center text-muted-foreground py-8",children:"No projects found. Create your first project to get started."})})]})]})})]})]})}const sqe=["Personnel","Equipment","Travel","Supplies","Training","Consultancy","Utilities","Communications","Other"];function aqe(){const{user:t}=ct(),{projectId:e}=zm(),n=un(),[r,s]=N.useState(!1),[i,o]=N.useState(null),[l,c]=N.useState({description:"",amount:"",expense_date:new Date().toISOString().split("T")[0],category:"",notes:""}),{data:u}=Ne({queryKey:["project-expenses-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const j=await Ke.getPrimaryMembershipByUser(t.id);return(j==null?void 0:j.companyId)??null},enabled:!!t}),{data:d}=Ne({queryKey:["project",u,e],queryFn:async()=>{if(!e||!u)return null;const j=await _a(He(te,Y.PROJECTS,e));if(!j.exists())return null;const p=j.data();return String(p.companyId??"")!==u?null:{id:j.id,...p,budget:Number(p.budget??0),spent:Number(p.spent??0),name:String(p.name??"")}},enabled:!!(e&&u)}),{data:h=[],isLoading:f}=Ne({queryKey:["project-expenses",u,e],queryFn:async()=>{if(!e||!u)return[];const j=ve(te,Y.PROJECT_EXPENSES);return(await $e(Ce(j,ge("companyId","==",u),ge("projectId","==",e)))).docs.map(E=>{var O;const P=E.data(),C=P.expenseDate??P.expense_date,I=typeof C=="string"?C:((O=C==null?void 0:C.toDate)==null?void 0:O.call(C).toISOString().slice(0,10))??new Date().toISOString().slice(0,10);return{id:E.id,description:String(P.description??""),amount:Number(P.amount??0),expense_date:I,category:P.category??null,notes:P.notes??null}}).sort((E,P)=>P.expense_date.localeCompare(E.expense_date))},enabled:!!(e&&u)}),m=async()=>{if(!e||!u)return;const j=ve(te,Y.PROJECT_EXPENSES),E=(await $e(Ce(j,ge("companyId","==",u),ge("projectId","==",e)))).docs.reduce((P,C)=>P+Number(C.data().amount??0),0);await or(He(te,Y.PROJECTS,e),{spent:E,updatedAt:ye()},{merge:!0})},b=it({mutationFn:async j=>{if(!e||!u||!t)throw new Error("No active company context");await jn(ve(te,Y.PROJECT_EXPENSES),{companyId:u,projectId:e,userId:t.id,description:j.description,amount:parseFloat(j.amount),expenseDate:j.expense_date,category:j.category||null,notes:j.notes||null,createdAt:ye(),updatedAt:ye()}),await m()},onSuccess:()=>{n.invalidateQueries({queryKey:["project-expenses",u,e]}),n.invalidateQueries({queryKey:["project",u,e]}),n.invalidateQueries({queryKey:["projects",u]}),Z.success("Expense added successfully"),w()},onError:j=>{Z.error("Failed to add expense: "+j.message)}}),g=it({mutationFn:async({id:j,data:p})=>{await or(He(te,Y.PROJECT_EXPENSES,j),{description:p.description,amount:parseFloat(p.amount),expenseDate:p.expense_date,category:p.category||null,notes:p.notes||null,updatedAt:ye()},{merge:!0}),await m()},onSuccess:()=>{n.invalidateQueries({queryKey:["project-expenses",u,e]}),n.invalidateQueries({queryKey:["project",u,e]}),n.invalidateQueries({queryKey:["projects",u]}),Z.success("Expense updated successfully"),w()},onError:j=>{Z.error("Failed to update expense: "+j.message)}}),x=it({mutationFn:async j=>{await Li(He(te,Y.PROJECT_EXPENSES,j)),await m()},onSuccess:()=>{n.invalidateQueries({queryKey:["project-expenses",u,e]}),n.invalidateQueries({queryKey:["project",u,e]}),n.invalidateQueries({queryKey:["projects",u]}),Z.success("Expense deleted successfully")},onError:j=>{Z.error("Failed to delete expense: "+j.message)}}),w=()=>{c({description:"",amount:"",expense_date:new Date().toISOString().split("T")[0],category:"",notes:""}),o(null),s(!1)},y=j=>{o(j),c({description:j.description,amount:j.amount.toString(),expense_date:j.expense_date,category:j.category||"",notes:j.notes||""}),s(!0)},A=j=>{j.preventDefault(),i?g.mutate({id:i.id,data:l}):b.mutate(l)},T=()=>{oh(h,[{header:"Date",key:"expense_date"},{header:"Description",key:"description"},{header:"Category",key:"category"},{header:"Amount",key:"amount"},{header:"Notes",key:"notes"}],`${(d==null?void 0:d.name)||"project"}-expenses`)},v=j=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(j),S=h.reduce((j,p)=>j+Number(p.amount),0);return f?a.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Fa,{to:"/projects",children:a.jsx(G,{variant:"ghost",size:"icon",children:a.jsx(No,{className:"h-4 w-4"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h1",{className:"text-3xl font-bold tracking-tight",children:[d==null?void 0:d.name," - Expenses"]}),a.jsxs("p",{className:"text-muted-foreground",children:["Budget: ",v((d==null?void 0:d.budget)||0)," | Spent: ",v(S)," | Remaining: ",v(((d==null?void 0:d.budget)||0)-S)]})]}),a.jsxs(G,{variant:"outline",onClick:T,disabled:h.length===0,children:[a.jsx(ys,{className:"h-4 w-4 mr-2"}),"Export"]}),a.jsxs(Jn,{open:r,onOpenChange:s,children:[a.jsx(Hr,{asChild:!0,children:a.jsxs(G,{onClick:()=>{w(),s(!0)},children:[a.jsx(xn,{className:"h-4 w-4 mr-2"}),"Add Expense"]})}),a.jsxs(zn,{children:[a.jsx(qn,{children:a.jsx(Wn,{children:i?"Edit Expense":"Add Expense"})}),a.jsxs("form",{onSubmit:A,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Description *"}),a.jsx(K,{value:l.description,onChange:j=>c({...l,description:j.target.value}),required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Amount (ZMW) *"}),a.jsx(K,{type:"number",step:"0.01",value:l.amount,onChange:j=>c({...l,amount:j.target.value}),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Date *"}),a.jsx(K,{type:"date",value:l.expense_date,onChange:j=>c({...l,expense_date:j.target.value}),required:!0})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Category"}),a.jsxs(It,{value:l.category,onValueChange:j=>c({...l,category:j}),children:[a.jsx(Et,{children:a.jsx(kt,{placeholder:"Select category"})}),a.jsx(At,{children:sqe.map(j=>a.jsx(be,{value:j,children:j},j))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Notes"}),a.jsx(lr,{value:l.notes,onChange:j=>c({...l,notes:j.target.value}),rows:2})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(G,{type:"button",variant:"outline",onClick:w,children:"Cancel"}),a.jsxs(G,{type:"submit",children:[i?"Update":"Add"," Expense"]})]})]})]})]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsxs(X,{children:[a.jsx(ee,{className:"pb-2",children:a.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(Qn,{className:"h-4 w-4"}),"Total Budget"]})}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:v((d==null?void 0:d.budget)||0)})})]}),a.jsxs(X,{children:[a.jsx(ee,{className:"pb-2",children:a.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(Qn,{className:"h-4 w-4"}),"Total Spent"]})}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:v(S)})})]}),a.jsxs(X,{children:[a.jsx(ee,{className:"pb-2",children:a.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(Qn,{className:"h-4 w-4"}),"Remaining"]})}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:v(((d==null?void 0:d.budget)||0)-S)})})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"Expense Records"})}),a.jsx(re,{children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Date"}),a.jsx(U,{children:"Description"}),a.jsx(U,{children:"Category"}),a.jsx(U,{className:"text-right",children:"Amount"}),a.jsx(U,{className:"text-right",children:"Actions"})]})}),a.jsx(Wt,{children:h.length===0?a.jsx(_e,{children:a.jsx(B,{colSpan:5,className:"text-center text-muted-foreground",children:"No expenses recorded yet"})}):h.map(j=>a.jsxs(_e,{children:[a.jsx(B,{children:vt(new Date(j.expense_date),"dd MMM yyyy")}),a.jsx(B,{children:j.description}),a.jsx(B,{children:j.category||"-"}),a.jsx(B,{className:"text-right",children:v(Number(j.amount))}),a.jsx(B,{className:"text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(G,{variant:"ghost",size:"icon",onClick:()=>y(j),children:a.jsx(Mm,{className:"h-4 w-4"})}),a.jsx(G,{variant:"ghost",size:"icon",onClick:()=>x.mutate(j.id),children:a.jsx(xs,{className:"h-4 w-4"})})]})})]},j.id))})]})})]})]})}const iqe=[{value:"vat_registered",label:"VAT Registered",description:"For businesses with annual turnover above K800,000. 16% VAT applies."},{value:"turnover_tax",label:"Turnover Tax",description:"For businesses with annual turnover below K800,000. 4% turnover tax."},{value:"non_vat",label:"Non-VAT Registered",description:"Not registered for VAT. No VAT charged on sales."}],oqe=[{value:"charitable",label:"Registered Charitable Organization"},{value:"faith_based",label:"Faith-Based Organization"},{value:"educational",label:"Educational Non-profit"},{value:"grant_funded",label:"Grant-Funded NGO"}],lqe=["Agriculture","Construction","Education","Financial Services","Healthcare","Hospitality","Information Technology","Manufacturing","Mining","Non-Profit","Professional Services","Retail","Transportation","Wholesale","Other"];function cqe(){const t=Hn(),e=un(),{user:n}=ct(),[r,s]=N.useState(1),[i,o]=N.useState(null),[l,c]=N.useState({name:"",organizationType:"business",businessType:"sme",address:"",phone:"",email:"",tpin:"",registrationNumber:"",industryType:"",taxType:"non_vat",taxClassification:"",vatRate:"16",turnoverTaxNumber:""}),u=(y,A)=>{c(T=>({...T,[y]:A}))},d=y=>{c(A=>({...A,organizationType:y,taxType:y==="business"?A.taxType==="tax_exempt"?"non_vat":A.taxType:"tax_exempt",taxClassification:y==="business"?"":A.taxClassification,turnoverTaxNumber:y==="business"?A.turnoverTaxNumber:""}))},h=y=>/^\d{10}$/.test(y),f=it({mutationFn:async()=>{if(!n)throw new Error("Not authenticated");const y=await Ke.getPrimaryMembershipByUser(n.id);if(!(y!=null&&y.companyId))throw new Error("No company associated with user");const A=l.organizationType==="business"&&l.taxType==="vat_registered",T=l.organizationType==="business"?l.taxType:l.taxClassification;await Ke.completeCompanySetup({companyId:y.companyId,name:l.name,organizationType:l.organizationType,businessType:l.businessType,taxType:l.organizationType==="business"?l.taxType:"tax_exempt",taxClassification:T,address:l.address||void 0,phone:l.phone||void 0,email:l.email||void 0,tpin:l.tpin||void 0,registrationNumber:l.registrationNumber||void 0,industryType:l.industryType||void 0,logoUrl:i,isVatRegistered:A,vatRate:A?parseFloat(l.vatRate):null})},onSuccess:()=>{e.invalidateQueries({queryKey:["company-settings"]}),e.invalidateQueries({queryKey:["company"]}),Z.success("Company setup complete!"),t("/dashboard")},onError:y=>{Z.error("Setup failed: "+y.message)}}),m=()=>{switch(r){case 1:return l.name?l.phone?l.email?l.tpin?h(l.tpin)?!0:(Z.error("TPIN must be exactly 10 digits"),!1):(Z.error("TPIN is required for ZRA compliance"),!1):(Z.error("Email is required"),!1):(Z.error("Phone number is required"),!1):(Z.error("Please enter your company name"),!1);case 2:return i?!0:(Z.error("Company logo is required"),!1);case 3:return l.organizationType==="business"&&l.taxType==="turnover_tax"&&!l.turnoverTaxNumber?(Z.error("Please enter your Turnover Tax number"),!1):l.organizationType==="non_profit"&&!l.taxClassification?(Z.error("Please select a non-profit tax classification"),!1):!0;default:return!0}},b=()=>{m()&&(r<3?s(r+1):f.mutate())},g=()=>{switch(r){case 1:return a.jsx(T_,{className:"h-5 w-5"});case 2:return a.jsx(f0,{className:"h-5 w-5"});case 3:return a.jsx(wd,{className:"h-5 w-5"});default:return null}},x=()=>{switch(r){case 1:return"Company Information";case 2:return"Company Branding";case 3:return"Tax Registration";default:return""}},w=()=>{switch(r){case 1:return"Enter your organization's registration details";case 2:return"Upload your company logo";case 3:return l.organizationType==="business"?"Configure your business tax registration type":"Select your non-profit tax classification";default:return""}};return a.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 relative overflow-hidden p-4",children:[a.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute -left-[10%] -top-[10%] w-[40%] h-[40%] bg-blue-900/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute -right-[10%] -bottom-[10%] w-[40%] h-[40%] bg-indigo-900/5 rounded-full blur-3xl"})]}),a.jsxs("div",{className:"w-full max-w-xl relative z-10",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-white shadow-sm mb-4 border border-border/50",children:a.jsx(f0,{className:"h-8 w-8 text-primary"})}),a.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Welcome to ZedBooks"}),a.jsx("p",{className:"text-slate-500",children:"Let's set up your organization for ZRA compliance"})]}),a.jsx("div",{className:"flex justify-center mb-6 gap-2",children:[1,2,3].map(y=>a.jsx("div",{className:`h-2 w-16 rounded-full transition-all duration-300 ${y<=r?"bg-primary":"bg-slate-200"}`},y))}),a.jsxs(X,{children:[a.jsxs(ee,{children:[a.jsxs(ne,{className:"flex items-center gap-2",children:[g(),x()]}),a.jsx(jt,{children:w()})]}),a.jsxs(re,{className:"space-y-4",children:[r===1&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Company Name *"}),a.jsx(K,{value:l.name,onChange:y=>u("name",y.target.value),placeholder:"Your Organization Name",autoFocus:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Organization Type *"}),a.jsxs(It,{value:l.organizationType,onValueChange:y=>d(y),children:[a.jsx(Et,{children:a.jsx(kt,{placeholder:"Select organization type"})}),a.jsxs(At,{children:[a.jsx(be,{value:"business",children:"Business"}),a.jsx(be,{value:"non_profit",children:"Non-profit"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Business Type *"}),a.jsxs(It,{value:l.businessType,onValueChange:y=>u("businessType",y),children:[a.jsx(Et,{children:a.jsx(kt,{placeholder:"Select business type"})}),a.jsxs(At,{children:[a.jsx(be,{value:"sme",children:"SME (Small & Medium Enterprise)"}),a.jsx(be,{value:"corporate",children:"Corporate"}),a.jsx(be,{value:"ngo",children:"NGO (Non-Governmental Organization)"}),a.jsx(be,{value:"school",children:"School / Educational Institution"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(J,{className:"flex items-center gap-1",children:[a.jsx(bte,{className:"h-3 w-3"}),"TPIN *"]}),a.jsx(K,{value:l.tpin,onChange:y=>u("tpin",y.target.value.replace(/\D/g,"").slice(0,10)),placeholder:"1234567890",maxLength:10}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"10-digit TPIN from ZRA"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Registration Number"}),a.jsx(K,{value:l.registrationNumber,onChange:y=>u("registrationNumber",y.target.value),placeholder:"e.g., 123456789"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Industry Type"}),a.jsxs(It,{value:l.industryType,onValueChange:y=>u("industryType",y),children:[a.jsx(Et,{children:a.jsx(kt,{placeholder:"Select industry"})}),a.jsx(At,{children:lqe.map(y=>a.jsx(be,{value:y.toLowerCase(),children:y},y))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(J,{className:"flex items-center gap-1",children:[a.jsx(xU,{className:"h-3 w-3"}),"Physical Address"]}),a.jsx(K,{value:l.address,onChange:y=>u("address",y.target.value),placeholder:"Street address, City"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(J,{className:"flex items-center gap-1",children:[a.jsx(Cte,{className:"h-3 w-3"}),"Phone *"]}),a.jsx(K,{value:l.phone,onChange:y=>u("phone",y.target.value),placeholder:"+260 XXX XXX XXX"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(J,{className:"flex items-center gap-1",children:[a.jsx(ad,{className:"h-3 w-3"}),"Email *"]}),a.jsx(K,{type:"email",value:l.email,onChange:y=>u("email",y.target.value),placeholder:"company@example.com"})]})]})]}),r===2&&a.jsxs("div",{className:"space-y-4",children:[a.jsx($O,{onUploaded:o}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Your logo will appear on invoices, payslips, and reports. This is required."})]}),r===3&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(J,{className:"text-base font-medium",children:l.organizationType==="business"?"Tax Registration Type *":"Non-profit Tax Classification *"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:l.organizationType==="business"?"Select your company's tax registration status with ZRA":"Select your non-profit tax classification based on ZRA guidance"}),l.organizationType==="business"?a.jsx("div",{className:"grid gap-3",children:iqe.map(y=>a.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-lg border cursor-pointer transition-colors ${l.taxType===y.value?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>u("taxType",y.value),children:[a.jsx("div",{className:`w-4 h-4 mt-0.5 rounded-full border-2 flex items-center justify-center ${l.taxType===y.value?"border-primary":"border-muted-foreground"}`,children:l.taxType===y.value&&a.jsx("div",{className:"w-2 h-2 rounded-full bg-primary"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium",children:y.label}),a.jsx("p",{className:"text-sm text-muted-foreground",children:y.description})]})]},y.value))}):a.jsxs(It,{value:l.taxClassification,onValueChange:y=>u("taxClassification",y),children:[a.jsx(Et,{children:a.jsx(kt,{placeholder:"Select non-profit classification"})}),a.jsx(At,{children:oqe.map(y=>a.jsx(be,{value:y.value,children:y.label},y.value))})]})]}),l.organizationType==="business"&&l.taxType==="vat_registered"&&a.jsxs("div",{className:"space-y-2 p-4 bg-muted/50 rounded-lg",children:[a.jsx(J,{children:"VAT Rate (%)"}),a.jsx(K,{type:"number",value:l.vatRate,onChange:y=>u("vatRate",y.target.value),placeholder:"16"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Standard VAT rate in Zambia is 16%. This will be applied to all taxable sales."})]}),l.organizationType==="business"&&l.taxType==="turnover_tax"&&a.jsxs("div",{className:"space-y-2 p-4 bg-muted/50 rounded-lg",children:[a.jsx(J,{children:"Turnover Tax Number"}),a.jsx(K,{value:l.turnoverTaxNumber,onChange:y=>u("turnoverTaxNumber",y.target.value),placeholder:"TOT-XXXXXXXX"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Your Turnover Tax registration number from ZRA"})]}),a.jsx("div",{className:"p-4 border rounded-lg bg-amber-500/10 border-amber-500/20",children:a.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-400",children:[a.jsx("strong",{children:"Important:"})," ",l.organizationType==="business"?"Your tax type determines how invoices are processed.":"Your non-profit classification is stored for compliance and reporting.",l.organizationType==="business"&&l.taxType==="vat_registered"&&" VAT invoices will be submitted to ZRA Smart Invoice for approval."]})})]}),a.jsxs("div",{className:"flex justify-between pt-4",children:[r>1?a.jsx(G,{variant:"outline",onClick:()=>s(r-1),children:"Back"}):a.jsx("div",{}),a.jsx(G,{onClick:b,disabled:f.isPending,children:r<3?a.jsxs(a.Fragment,{children:["Next",a.jsx(ite,{className:"ml-2 h-4 w-4"})]}):f.isPending?"Completing Setup...":"Complete Setup"})]})]})]}),a.jsxs("p",{className:"text-center text-sm text-slate-400 mt-6",children:["Step ",r," of 3"]})]})]})}const uqe=[{icon:Ks,title:"Employee Management",description:"Complete database with role-based access control and history tracking.",className:"border-l-4 border-blue-500"},{icon:h0,title:"Payroll Processing",description:"Automated calculations for PAYE, NAPSA, and NHIMA with one-click rendering.",className:"border-l-4 border-indigo-500"},{icon:wd,title:"Compliance & Audit",description:"Built-in ZRA compliance rules and detailed audit logs for every action.",className:"border-l-4 border-slate-500"},{icon:mU,title:"Real-time Analytics",description:"Live financial dashboards and customizable reports for better decision making.",className:"border-l-4 border-sky-500"}];function dqe(){const[t,e]=N.useState(null);N.useEffect(()=>{window.addEventListener("beforeinstallprompt",r=>{r.preventDefault(),e(r)})},[]);const n=()=>{t&&(t.prompt(),t.userChoice.then(r=>{r.outcome==="accepted"&&console.log("User accepted the install prompt"),e(null)}))};return a.jsxs("div",{className:"min-h-screen bg-[#F8FAFC] font-sans text-slate-900 selection:bg-blue-100 selection:text-blue-900 overflow-x-hidden",children:[a.jsx("header",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-slate-200/60",children:a.jsxs("div",{className:"container mx-auto px-4 lg:px-6 flex items-center justify-between h-20",children:[a.jsx(Fa,{to:"/",className:"flex items-center gap-3",children:a.jsx(hf,{variant:"full",size:"md"})}),a.jsxs("nav",{className:"hidden md:flex items-center gap-8 text-sm font-medium text-slate-600",children:[a.jsx("a",{href:"#features",className:"hover:text-blue-700 transition-colors",children:"Features"}),a.jsx("a",{href:"#pricing",className:"hover:text-blue-700 transition-colors",children:"Pricing"}),a.jsx("a",{href:"#compliance",className:"hover:text-blue-700 transition-colors",children:"Compliance"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Fa,{to:"/auth",children:a.jsx(G,{variant:"ghost",className:"hidden sm:inline-flex text-slate-600 hover:text-blue-700 hover:bg-blue-50",children:"Sign In"})}),a.jsx(Fa,{to:"/auth",children:a.jsx(G,{className:"rounded-full bg-slate-900 hover:bg-slate-800 text-white shadow-lg shadow-slate-900/20 px-6 transition-all hover:scale-105",children:"Get Started"})})]})]})}),a.jsxs("section",{className:"relative pt-20 pb-32 lg:pt-32 lg:pb-48 overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[1000px] h-[600px] bg-blue-100/40 rounded-[100%] blur-[100px] -z-10 pointer-events-none opacity-60"}),a.jsx("div",{className:"absolute top-40 right-0 w-[500px] h-[500px] bg-indigo-100/40 rounded-full blur-[80px] -z-10 pointer-events-none opacity-50"}),a.jsxs("div",{className:"container mx-auto px-4 lg:px-6 relative z-10 text-center",children:[a.jsxs(Xe,{variant:"outline",className:"mb-8 px-4 py-1.5 rounded-full bg-blue-50/50 text-blue-700 border-blue-200 backdrop-blur-sm animate-fade-in-up",children:[a.jsxs("span",{className:"relative flex h-2 w-2 mr-2",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-blue-500"})]}),"New: Automated ZRA Tax Submission"]}),a.jsxs("h1",{className:"text-5xl lg:text-7xl font-bold tracking-tight text-slate-900 mb-8 max-w-4xl mx-auto leading-[1.1]",children:["The Financial Operating System for ",a.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-700 to-indigo-600",children:"Zambian NGOs"})]}),a.jsx("p",{className:"text-xl text-slate-600 mb-12 max-w-2xl mx-auto leading-relaxed",children:"Manage your finances, payroll, and compliance in one unified secure platform. Designed for purpose-driven organizations."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mb-20",children:[a.jsx(Fa,{to:"/auth",children:a.jsx(G,{size:"lg",className:"h-14 px-10 rounded-full bg-blue-600 hover:bg-blue-700 text-white shadow-xl shadow-blue-600/20 text-lg transition-all hover:scale-105",children:"Start Free Trial"})}),t&&a.jsxs(G,{size:"lg",variant:"outline",onClick:n,className:"h-14 px-10 rounded-full border-slate-200 hover:bg-white hover:text-blue-700 hover:border-blue-200 text-lg shadow-sm transition-all",children:[a.jsx(ys,{className:"mr-2 h-5 w-5"}),"Install App"]}),!t&&a.jsxs(G,{size:"lg",variant:"outline",className:"h-14 px-10 rounded-full border-slate-200 hover:bg-white hover:text-slate-900 text-lg shadow-sm transition-all opacity-50 cursor-not-allowed",children:[a.jsx(_te,{className:"mr-2 h-5 w-5"}),"Web Version"]})]}),a.jsxs("div",{className:"relative max-w-5xl mx-auto",children:[a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl border border-slate-200/60 overflow-hidden backdrop-blur-sm",children:[a.jsxs("div",{className:"h-12 bg-slate-50 border-b border-slate-100 flex items-center px-4 gap-2",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-red-400/80"}),a.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-400/80"}),a.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-400/80"})]}),a.jsx("div",{className:"mx-auto bg-slate-200/50 h-6 w-64 rounded-md text-[10px] flex items-center justify-center text-slate-400 font-mono",children:"app.zedbooks.com/dashboard"})]}),a.jsx("div",{className:"p-1 bg-slate-50/50",children:a.jsxs("div",{className:"grid grid-cols-12 gap-1 p-4 h-[400px] lg:h-[600px] bg-white rounded-xl overflow-hidden relative",children:[a.jsxs("div",{className:"col-span-2 hidden lg:flex flex-col gap-3 border-r border-slate-50 pr-4",children:[a.jsx("div",{className:"h-8 w-full bg-slate-100 rounded-lg"}),a.jsx("div",{className:"h-8 w-3/4 bg-slate-50 rounded-lg"}),a.jsx("div",{className:"h-8 w-full bg-slate-50 rounded-lg"}),a.jsx("div",{className:"h-8 w-5/6 bg-slate-50 rounded-lg"})]}),a.jsxs("div",{className:"col-span-12 lg:col-span-10 flex flex-col gap-6 pl-0 lg:pl-6 pt-2",children:[a.jsxs("div",{className:"flex justify-between items-end",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-4 w-32 bg-slate-100 rounded"}),a.jsx("div",{className:"h-8 w-64 bg-slate-900 rounded-lg"})]}),a.jsx("div",{className:"h-10 w-32 bg-blue-600 rounded-lg"})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"h-32 bg-blue-50 rounded-2xl border border-blue-100 p-4 space-y-3",children:[a.jsx("div",{className:"h-8 w-8 bg-blue-200 rounded-lg"}),a.jsx("div",{className:"h-6 w-24 bg-blue-200/50 rounded"})]}),a.jsxs("div",{className:"h-32 bg-slate-50 rounded-2xl border border-slate-100 p-4 space-y-3",children:[a.jsx("div",{className:"h-8 w-8 bg-slate-200 rounded-lg"}),a.jsx("div",{className:"h-6 w-24 bg-slate-200/50 rounded"})]}),a.jsxs("div",{className:"h-32 bg-slate-50 rounded-2xl border border-slate-100 p-4 space-y-3",children:[a.jsx("div",{className:"h-8 w-8 bg-slate-200 rounded-lg"}),a.jsx("div",{className:"h-6 w-24 bg-slate-200/50 rounded"})]})]}),a.jsx("div",{className:"flex-1 bg-slate-50 rounded-2xl border border-slate-100 p-6 flex items-center justify-center",children:a.jsx("div",{className:"text-slate-300 font-medium",children:"Interactive Financial Ledger Mockup"})})]})]})})]}),a.jsxs("div",{className:"absolute -left-12 bottom-20 bg-white p-6 rounded-2xl shadow-xl border border-slate-100 hidden lg:block animate-float",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"h-10 w-10 bg-green-100 rounded-full flex items-center justify-center text-green-600",children:a.jsx(wd,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Compliance Status"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Last checked today"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Xe,{variant:"secondary",className:"bg-green-50 text-green-700",children:"NAPSA Verified"}),a.jsx(Xe,{variant:"secondary",className:"bg-green-50 text-green-700",children:"ZRA Compliant"})]})]}),a.jsxs("div",{className:"absolute -right-8 top-20 bg-white p-5 rounded-2xl shadow-xl border border-slate-100 hidden lg:block animate-float-delayed",children:[a.jsx("p",{className:"text-xs text-slate-500 uppercase font-semibold mb-3",children:"Recent Transactions"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-8 w-8 rounded-full bg-slate-100 flex items-center justify-center text-xs font-bold",children:"JD"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Payroll Run"}),a.jsx("p",{className:"text-xs text-slate-400",children:"Just now"})]}),a.jsx("span",{className:"text-sm font-medium text-slate-900 ml-4",children:"- K45,200"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center text-xs font-bold text-blue-700",children:"IN"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Grant Deposit"}),a.jsx("p",{className:"text-xs text-slate-400",children:"2h ago"})]}),a.jsx("span",{className:"text-sm font-medium text-green-600 ml-4",children:"+ K150,000"})]})]})]})]})]})]}),a.jsx("section",{id:"features",className:"py-24 bg-white relative",children:a.jsxs("div",{className:"container mx-auto px-4 lg:px-6",children:[a.jsxs("div",{className:"text-center mb-16 max-w-2xl mx-auto",children:[a.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-4",children:"Everything you need to run your NGO"}),a.jsx("p",{className:"text-slate-600",children:"Robust features designed specifically for the unique compliance and reporting needs of Zambian non-profits."})]}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:uqe.map((r,s)=>a.jsx(X,{className:`shadow-sm hover:shadow-lg transition-all border-slate-200 bg-white ${r.className}`,children:a.jsxs(re,{className:"p-8",children:[a.jsx("div",{className:"h-12 w-12 rounded-xl bg-slate-50 flex items-center justify-center mb-6",children:a.jsx(r.icon,{className:"h-6 w-6 text-slate-700"})}),a.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-3",children:r.title}),a.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:r.description})]})},s))})]})}),a.jsxs("section",{id:"compliance",className:"py-24 bg-slate-900 text-white overflow-hidden relative",children:[a.jsx("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-blue-600/10 rounded-full blur-[120px] translate-x-1/2 -translate-y-1/2"}),a.jsx("div",{className:"container mx-auto px-4 lg:px-6 relative z-10",children:a.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-4xl font-bold mb-6",children:"Fully Compliant with Zambian Regulation"}),a.jsx("p",{className:"text-slate-300 text-lg mb-8",children:"Stay ahead of regulatory requirements with automated updates for domestic tax laws and labor regulations."}),a.jsx("div",{className:"flex flex-wrap gap-4 mb-8",children:["ZRA Smart Invoice","NAPSA e-Returns","NHIMA Compliant","PACRA Returns"].map(r=>a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-full bg-slate-800 border border-slate-700 text-sm font-medium text-slate-200",children:[a.jsx(_v,{className:"h-4 w-4 text-green-400"}),r]},r))}),a.jsx(Fa,{to:"/auth",children:a.jsx(G,{className:"rounded-full bg-white text-slate-900 hover:bg-slate-100 px-8 h-12 shadow-md",children:"Get Compliant Today"})})]}),a.jsx("div",{className:"relative",children:a.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 p-8 rounded-3xl border border-slate-700 shadow-2xl",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-8 border-b border-slate-700 pb-8",children:[a.jsx("div",{className:"h-14 w-14 bg-blue-600 rounded-2xl flex items-center justify-center",children:a.jsx(wd,{className:"h-8 w-8 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold",children:"Compliance Monitor"}),a.jsx("p",{className:"text-slate-400 text-sm",children:"Real-time status tracking"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-slate-800/50 border border-slate-700",children:[a.jsx("span",{className:"text-slate-200 font-medium",children:"TPIN Verification"}),a.jsx(Xe,{className:"bg-green-500/20 text-green-400 hover:bg-green-500/20 border-green-500/20",children:"Verified"})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-slate-800/50 border border-slate-700",children:[a.jsx("span",{className:"text-slate-200 font-medium",children:"Tax Clearance"}),a.jsx(Xe,{className:"bg-green-500/20 text-green-400 hover:bg-green-500/20 border-green-500/20",children:"Valid"})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-slate-800/50 border border-slate-700",children:[a.jsx("span",{className:"text-slate-200 font-medium",children:"Annual Returns"}),a.jsx(Xe,{className:"bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/20 border-yellow-500/20",children:"Due in 5 days"})]})]})]})})]})})]}),a.jsx("footer",{className:"py-12 bg-white border-t border-slate-200",children:a.jsxs("div",{className:"container mx-auto px-4 text-center",children:[a.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:a.jsx(hf,{variant:"full",size:"md",className:"grayscale opacity-70 hover:grayscale-0 hover:opacity-100"})}),a.jsxs("p",{className:"text-slate-500 text-sm",children:[" ",new Date().getFullYear()," Byte & Berry. All rights reserved."]})]})}),a.jsx(zh,{})]})}function hqe(){const{user:t}=ct(),e=un(),[n,r]=N.useState(""),[s,i]=N.useState(!1),{data:o}=Ne({queryKey:["donors-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const y=await Ke.getPrimaryMembershipByUser(t.id);return(y==null?void 0:y.companyId)??null},enabled:!!t}),{data:l=[],isLoading:c}=Ne({queryKey:["donors-from-projects",o],queryFn:async()=>{if(!o)return[];const y=ve(te,Y.PROJECTS),T=(await $e(Ce(y,ge("companyId","==",o)))).docs.map(S=>{const j=S.data();return{donor_name:String(j.donorName??j.donor_name??""),grant_reference:j.grantReference??j.grant_reference??null,budget:Number(j.budget??0),spent:Number(j.spent??0),status:String(j.status??"active")}}),v=new Map;return T.forEach(S=>{if(S.donor_name){const j=v.get(S.donor_name)||{grants:0,totalBudget:0,activeGrants:0};v.set(S.donor_name,{grants:j.grants+1,totalBudget:j.totalBudget+(S.budget||0),activeGrants:j.activeGrants+(S.status==="active"?1:0)})}}),Array.from(v.entries()).map(([S,j])=>({name:S,totalGrants:j.grants,totalBudget:j.totalBudget,activeGrants:j.activeGrants}))},enabled:!!o}),{data:u=[]}=Ne({queryKey:["projects-for-donors",o],queryFn:async()=>{if(!o)return[];const y=ve(te,Y.PROJECTS);return(await $e(Ce(y,ge("companyId","==",o)))).docs.map(T=>{var p;const v=T.data(),S=v.createdAt??v.created_at,j=typeof S=="string"?S:((p=S==null?void 0:S.toDate)==null?void 0:p.call(S).toISOString())??"";return{id:T.id,...v,donor_name:v.donorName??v.donor_name??null,grant_reference:v.grantReference??v.grant_reference??null,start_date:v.startDate??v.start_date??null,end_date:v.endDate??v.end_date??null,created_at:j}}).sort((T,v)=>String(v.created_at??"").localeCompare(String(T.created_at??"")))},enabled:!!o}),d=y=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(y),h=l.filter(y=>y.name.toLowerCase().includes(n.toLowerCase())),f=l.reduce((y,A)=>y+A.totalBudget,0),m=l.reduce((y,A)=>y+A.activeGrants,0),b=l.reduce((y,A)=>y+A.totalGrants,0),g=()=>{oh(h,[{header:"Donor Name",key:"name"},{header:"Total Grants",key:"totalGrants"},{header:"Active Grants",key:"activeGrants"},{header:"Total Budget (ZMW)",key:"totalBudget"}],"donors-report")},x=[{key:"name",header:"Project Name",required:!0},{key:"donor_name",header:"Donor Name",required:!0},{key:"grant_reference",header:"Grant Reference",required:!1},{key:"budget",header:"Budget (ZMW)",required:!1},{key:"start_date",header:"Start Date",required:!1},{key:"end_date",header:"End Date",required:!1}],w=async y=>{if(!o||!t)throw new Error("No active company context");for(const A of y)await jn(ve(te,Y.PROJECTS),{companyId:o,name:A.name,donorName:A.donor_name,grantReference:A.grant_reference||null,budget:parseFloat(A.budget)||0,spent:0,startDate:A.start_date||null,endDate:A.end_date||null,status:"active",createdBy:t.id,createdAt:ye(),updatedAt:ye()});e.invalidateQueries({queryKey:["donors-from-projects",o]}),e.invalidateQueries({queryKey:["projects-for-donors",o]})};return c?a.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Donors & Grants"}),a.jsx("p",{className:"text-muted-foreground",children:"Track donors and their grant contributions"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(G,{variant:"outline",onClick:()=>i(!0),children:[a.jsx(So,{className:"mr-2 h-4 w-4"}),"Import"]}),a.jsxs(G,{variant:"outline",onClick:g,children:[a.jsx(ys,{className:"mr-2 h-4 w-4"}),"Export"]})]})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[a.jsxs(X,{children:[a.jsx(ee,{className:"pb-2",children:a.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(f0,{className:"h-4 w-4"}),"Total Donors"]})}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:l.length})})]}),a.jsxs(X,{children:[a.jsx(ee,{className:"pb-2",children:a.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(vU,{className:"h-4 w-4"}),"Total Grants"]})}),a.jsxs(re,{children:[a.jsx("div",{className:"text-2xl font-bold",children:b}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[m," active"]})]})]}),a.jsxs(X,{children:[a.jsx(ee,{className:"pb-2",children:a.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(Qn,{className:"h-4 w-4"}),"Total Funding"]})}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:d(f)})})]}),a.jsxs(X,{children:[a.jsx(ee,{className:"pb-2",children:a.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(Qn,{className:"h-4 w-4"}),"Avg. per Donor"]})}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:d(l.length>0?f/l.length:0)})})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"relative flex-1",children:[a.jsx(na,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a.jsx(K,{placeholder:"Search donors...",value:n,onChange:y=>r(y.target.value),className:"pl-10"})]})})}),a.jsx(re,{children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Donor Name"}),a.jsx(U,{className:"text-right",children:"Total Grants"}),a.jsx(U,{className:"text-right",children:"Active Grants"}),a.jsx(U,{className:"text-right",children:"Total Funding"})]})}),a.jsxs(Wt,{children:[h.map((y,A)=>a.jsxs(_e,{children:[a.jsx(B,{className:"font-medium",children:y.name}),a.jsx(B,{className:"text-right",children:y.totalGrants}),a.jsx(B,{className:"text-right",children:a.jsx(Xe,{variant:y.activeGrants>0?"default":"secondary",children:y.activeGrants})}),a.jsx(B,{className:"text-right",children:d(y.totalBudget)})]},A)),h.length===0&&a.jsx(_e,{children:a.jsx(B,{colSpan:4,className:"text-center text-muted-foreground py-8",children:"No donors found. Add projects with donor information to see them here."})})]})]})})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"All Grants"})}),a.jsx(re,{children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Grant Reference"}),a.jsx(U,{children:"Project Name"}),a.jsx(U,{children:"Donor"}),a.jsx(U,{children:"Status"}),a.jsx(U,{className:"text-right",children:"Budget"}),a.jsx(U,{className:"text-right",children:"Spent"})]})}),a.jsx(Wt,{children:u.filter(y=>y.donor_name).map(y=>a.jsxs(_e,{children:[a.jsx(B,{className:"font-mono",children:y.grant_reference||"-"}),a.jsx(B,{className:"font-medium",children:y.name}),a.jsx(B,{children:y.donor_name}),a.jsx(B,{children:a.jsx(Xe,{variant:y.status==="active"?"default":"secondary",children:y.status})}),a.jsx(B,{className:"text-right",children:d(y.budget||0)}),a.jsx(B,{className:"text-right",children:d(y.spent||0)})]},y.id))})]})})]}),a.jsx(hp,{open:s,onOpenChange:i,onImport:w,columns:x,title:"Import Grants"})]})}const fqe=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},hB=t=>{if(!t)return"";if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString().slice(0,10);if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString().slice(0,10)}return""};function mqe(){const{user:t}=ct(),[e,n]=N.useState(()=>{const v=new Date;return v.setMonth(v.getMonth()-3),v.toISOString().split("T")[0]}),[r,s]=N.useState(new Date().toISOString().split("T")[0]),[i,o]=N.useState(!1),{data:l=[],isLoading:c,refetch:u}=Ne({queryKey:["accounts-payable",e,r,t==null?void 0:t.id],queryFn:async()=>{if(!t)return[];const v=await Ke.getPrimaryMembershipByUser(t.id);if(!(v!=null&&v.companyId))return[];const S=ve(te,Y.BILLS),p=(await $e(Ce(S,ge("companyId","==",v.companyId)))).docs.map(C=>{const I=C.data();return{id:C.id,bill_number:String(I.billNumber??I.bill_number??""),bill_date:hB(I.billDate??I.bill_date),due_date:hB(I.dueDate??I.due_date)||null,total:Number(I.total??0),status:String(I.status??"pending"),vendor_id:I.vendorId??I.vendor_id??null,vendors:null}}).filter(C=>C.bill_date>=e&&C.bill_date<=r),E=Array.from(new Set(p.map(C=>C.vendor_id).filter(Boolean))),P=new Map;if(E.length>0){const C=ve(te,Y.VENDORS),I=fqe(E,30);(await Promise.all(I.map($=>$e(Ce(C,ge(Jd(),"in",$)))))).forEach($=>{$.docs.forEach(z=>{const H=z.data();P.set(z.id,String(H.name??"-"))})})}return p.map(C=>({...C,vendors:C.vendor_id?{name:P.get(C.vendor_id)||"-"}:null})).sort((C,I)=>String(C.due_date||"").localeCompare(String(I.due_date||"")))},enabled:!!t}),d=v=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(v),h=l.filter(v=>v.status!=="paid"),f=h.filter(v=>v.due_date&&wQ(new Date(v.due_date))),m=h.filter(v=>{if(!v.due_date)return!1;const S=hs(new Date(v.due_date),new Date);return S>=0&&S<=7}),b=l.filter(v=>v.status==="paid"),g=h.reduce((v,S)=>v+(S.total||0),0),x=f.reduce((v,S)=>v+(S.total||0),0),w=b.reduce((v,S)=>v+(S.total||0),0),y=()=>{oh(l,[{header:"Bill Number",key:"bill_number"},{header:"Bill Date",key:"bill_date"},{header:"Due Date",key:"due_date"},{header:"Amount",key:"total"},{header:"Status",key:"status"}],`accounts-payable-${e}-to-${r}`)},A=[{key:"bill_number",header:"Bill Number",required:!0},{key:"vendor_name",header:"Vendor Name",required:!1},{key:"bill_date",header:"Bill Date (YYYY-MM-DD)",required:!0},{key:"due_date",header:"Due Date (YYYY-MM-DD)",required:!1},{key:"amount",header:"Amount",required:!0},{key:"description",header:"Description",required:!1}],T=async v=>{if(!t)throw new Error("You must be logged in");const S=await Ke.getPrimaryMembershipByUser(t.id);if(!(S!=null&&S.companyId))throw new Error("No company profile found for your account");for(const j of v)await jn(ve(te,Y.BILLS),{companyId:S.companyId,userId:t.id,billNumber:String(j.bill_number||""),billDate:String(j.bill_date||""),dueDate:j.due_date||null,subtotal:Number(j.amount)||0,total:Number(j.amount)||0,description:j.description||null,status:"pending",createdAt:ye(),updatedAt:ye()});u(),Z.success("Bills imported successfully")};return c?a.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Accounts Payable"}),a.jsx("p",{className:"text-muted-foreground",children:"Track and manage vendor bills and payments"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(G,{variant:"outline",onClick:()=>o(!0),children:[a.jsx(So,{className:"mr-2 h-4 w-4"}),"Import"]}),a.jsxs(G,{variant:"outline",onClick:y,children:[a.jsx(ys,{className:"mr-2 h-4 w-4"}),"Export"]})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"Report Period"})}),a.jsx(re,{children:a.jsxs("div",{className:"flex gap-4 items-end",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Start Date"}),a.jsx(K,{type:"date",value:e,onChange:v=>n(v.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"End Date"}),a.jsx(K,{type:"date",value:r,onChange:v=>s(v.target.value)})]})]})})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[a.jsxs(X,{children:[a.jsx(ee,{className:"pb-2",children:a.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(ar,{className:"h-4 w-4"}),"Total Bills"]})}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:l.length})})]}),a.jsxs(X,{children:[a.jsx(ee,{className:"pb-2",children:a.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(ba,{className:"h-4 w-4 text-warning"}),"Outstanding"]})}),a.jsxs(re,{children:[a.jsx("div",{className:"text-2xl font-bold text-warning",children:d(g)}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[h.length," bills"]})]})]}),a.jsxs(X,{children:[a.jsx(ee,{className:"pb-2",children:a.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(xa,{className:"h-4 w-4 text-destructive"}),"Overdue"]})}),a.jsxs(re,{children:[a.jsx("div",{className:"text-2xl font-bold text-destructive",children:d(x)}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[f.length," bills"]})]})]}),a.jsxs(X,{children:[a.jsx(ee,{className:"pb-2",children:a.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(vo,{className:"h-4 w-4 text-success"}),"Paid"]})}),a.jsxs(re,{children:[a.jsx("div",{className:"text-2xl font-bold text-success",children:d(w)}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[b.length," bills"]})]})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"Aging Summary"})}),a.jsx(re,{children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Category"}),a.jsx(U,{className:"text-right",children:"Bills"}),a.jsx(U,{className:"text-right",children:"Amount"})]})}),a.jsxs(Wt,{children:[a.jsxs(_e,{children:[a.jsx(B,{children:"Current (not due)"}),a.jsx(B,{className:"text-right",children:h.filter(v=>!v.due_date||hs(new Date(v.due_date),new Date)>7).length}),a.jsx(B,{className:"text-right",children:d(h.filter(v=>!v.due_date||hs(new Date(v.due_date),new Date)>7).reduce((v,S)=>v+(S.total||0),0))})]}),a.jsxs(_e,{children:[a.jsx(B,{children:"Due within 7 days"}),a.jsx(B,{className:"text-right",children:m.length}),a.jsx(B,{className:"text-right text-warning",children:d(m.reduce((v,S)=>v+(S.total||0),0))})]}),a.jsxs(_e,{children:[a.jsx(B,{children:"1-30 days overdue"}),a.jsx(B,{className:"text-right",children:f.filter(v=>hs(new Date,new Date(v.due_date||""))<=30).length}),a.jsx(B,{className:"text-right text-destructive",children:d(f.filter(v=>hs(new Date,new Date(v.due_date||""))<=30).reduce((v,S)=>v+(S.total||0),0))})]}),a.jsxs(_e,{children:[a.jsx(B,{children:"Over 30 days overdue"}),a.jsx(B,{className:"text-right",children:f.filter(v=>hs(new Date,new Date(v.due_date||""))>30).length}),a.jsx(B,{className:"text-right text-destructive font-bold",children:d(f.filter(v=>hs(new Date,new Date(v.due_date||""))>30).reduce((v,S)=>v+(S.total||0),0))})]})]})]})})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"All Bills"})}),a.jsx(re,{children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Bill #"}),a.jsx(U,{children:"Vendor"}),a.jsx(U,{children:"Bill Date"}),a.jsx(U,{children:"Due Date"}),a.jsx(U,{className:"text-right",children:"Amount"}),a.jsx(U,{children:"Status"}),a.jsx(U,{children:"Days Overdue"})]})}),a.jsx(Wt,{children:l.map(v=>{var j;const S=v.due_date&&v.status!=="paid"?Math.max(0,hs(new Date,new Date(v.due_date))):0;return a.jsxs(_e,{children:[a.jsx(B,{className:"font-medium",children:v.bill_number}),a.jsx(B,{children:((j=v.vendors)==null?void 0:j.name)||"-"}),a.jsx(B,{children:vt(new Date(v.bill_date),"dd MMM yyyy")}),a.jsx(B,{children:v.due_date?vt(new Date(v.due_date),"dd MMM yyyy"):"-"}),a.jsx(B,{className:"text-right",children:d(v.total)}),a.jsx(B,{children:a.jsx(Xe,{variant:v.status==="paid"?"default":S>0?"destructive":"secondary",children:v.status})}),a.jsx(B,{children:v.status==="paid"?"-":S>0?`${S} days`:"Current"})]},v.id)})})]})})]}),a.jsx(hp,{open:i,onOpenChange:o,onImport:T,columns:A,title:"Import Bills"})]})}const pqe=(t,e)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},fB=t=>{if(!t)return"";if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString().slice(0,10);if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString().slice(0,10)}return""};function gqe(){const{user:t}=ct(),[e,n]=N.useState(()=>{const v=new Date;return v.setMonth(v.getMonth()-3),v.toISOString().split("T")[0]}),[r,s]=N.useState(new Date().toISOString().split("T")[0]),[i,o]=N.useState(!1),{data:l=[],isLoading:c,refetch:u}=Ne({queryKey:["accounts-receivable",e,r,t==null?void 0:t.id],queryFn:async()=>{if(!t)return[];const v=await Ke.getPrimaryMembershipByUser(t.id);if(!(v!=null&&v.companyId))return[];const S=ve(te,Y.INVOICES),p=(await $e(Ce(S,ge("companyId","==",v.companyId)))).docs.map(C=>{const I=C.data();return{id:C.id,invoice_number:String(I.invoiceNumber??I.invoice_number??""),invoice_date:fB(I.invoiceDate??I.invoice_date),due_date:fB(I.dueDate??I.due_date)||null,total:Number(I.total??0),status:String(I.status??"draft"),customer_id:I.customerId??I.customer_id??null,customers:null}}).filter(C=>C.invoice_date>=e&&C.invoice_date<=r),E=Array.from(new Set(p.map(C=>C.customer_id).filter(Boolean))),P=new Map;if(E.length>0){const C=ve(te,Y.CUSTOMERS),I=pqe(E,30);(await Promise.all(I.map($=>$e(Ce(C,ge(Jd(),"in",$)))))).forEach($=>{$.docs.forEach(z=>{const H=z.data();P.set(z.id,String(H.name??"-"))})})}return p.map(C=>({...C,customers:C.customer_id?{name:P.get(C.customer_id)||"-"}:null})).sort((C,I)=>String(C.due_date||"").localeCompare(String(I.due_date||"")))},enabled:!!t}),d=v=>new Intl.NumberFormat("en-ZM",{style:"currency",currency:"ZMW"}).format(v),h=l.filter(v=>v.status!=="paid"),f=h.filter(v=>v.due_date&&wQ(new Date(v.due_date))),m=h.filter(v=>{if(!v.due_date)return!1;const S=hs(new Date(v.due_date),new Date);return S>=0&&S<=7}),b=l.filter(v=>v.status==="paid"),g=h.reduce((v,S)=>v+(S.total||0),0),x=f.reduce((v,S)=>v+(S.total||0),0),w=b.reduce((v,S)=>v+(S.total||0),0),y=()=>{oh(l,[{header:"Invoice Number",key:"invoice_number"},{header:"Invoice Date",key:"invoice_date"},{header:"Due Date",key:"due_date"},{header:"Amount",key:"total"},{header:"Status",key:"status"}],`accounts-receivable-${e}-to-${r}`)},A=[{key:"invoice_number",header:"Invoice Number",required:!0},{key:"customer_name",header:"Customer Name",required:!1},{key:"invoice_date",header:"Invoice Date (YYYY-MM-DD)",required:!0},{key:"due_date",header:"Due Date (YYYY-MM-DD)",required:!1},{key:"amount",header:"Amount",required:!0},{key:"notes",header:"Notes",required:!1}],T=async v=>{if(!t)throw new Error("You must be logged in");const S=await Ke.getPrimaryMembershipByUser(t.id);if(!(S!=null&&S.companyId))throw new Error("No company profile found for your account");for(const j of v)await jn(ve(te,Y.INVOICES),{companyId:S.companyId,userId:t.id,invoiceNumber:String(j.invoice_number||""),invoiceDate:String(j.invoice_date||""),dueDate:j.due_date||null,subtotal:Number(j.amount)||0,total:Number(j.amount)||0,notes:j.notes||null,status:"sent",createdAt:ye(),updatedAt:ye()});u(),Z.success("Invoices imported successfully")};return c?a.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading..."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Accounts Receivable"}),a.jsx("p",{className:"text-muted-foreground",children:"Track customer invoices and collections"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(G,{variant:"outline",onClick:()=>o(!0),children:[a.jsx(So,{className:"mr-2 h-4 w-4"}),"Import"]}),a.jsxs(G,{variant:"outline",onClick:y,children:[a.jsx(ys,{className:"mr-2 h-4 w-4"}),"Export"]})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"Report Period"})}),a.jsx(re,{children:a.jsxs("div",{className:"flex gap-4 items-end",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Start Date"}),a.jsx(K,{type:"date",value:e,onChange:v=>n(v.target.value)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"End Date"}),a.jsx(K,{type:"date",value:r,onChange:v=>s(v.target.value)})]})]})})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[a.jsxs(X,{children:[a.jsx(ee,{className:"pb-2",children:a.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(ar,{className:"h-4 w-4"}),"Total Invoices"]})}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:l.length})})]}),a.jsxs(X,{children:[a.jsx(ee,{className:"pb-2",children:a.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(Za,{className:"h-4 w-4 text-primary"}),"Receivable"]})}),a.jsxs(re,{children:[a.jsx("div",{className:"text-2xl font-bold text-primary",children:d(g)}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[h.length," invoices"]})]})]}),a.jsxs(X,{children:[a.jsx(ee,{className:"pb-2",children:a.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(xa,{className:"h-4 w-4 text-destructive"}),"Overdue"]})}),a.jsxs(re,{children:[a.jsx("div",{className:"text-2xl font-bold text-destructive",children:d(x)}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[f.length," invoices"]})]})]}),a.jsxs(X,{children:[a.jsx(ee,{className:"pb-2",children:a.jsxs(ne,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(vo,{className:"h-4 w-4 text-success"}),"Collected"]})}),a.jsxs(re,{children:[a.jsx("div",{className:"text-2xl font-bold text-success",children:d(w)}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[b.length," invoices"]})]})]})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"Aging Summary"})}),a.jsx(re,{children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Category"}),a.jsx(U,{className:"text-right",children:"Invoices"}),a.jsx(U,{className:"text-right",children:"Amount"})]})}),a.jsxs(Wt,{children:[a.jsxs(_e,{children:[a.jsx(B,{children:"Current (not due)"}),a.jsx(B,{className:"text-right",children:h.filter(v=>!v.due_date||hs(new Date(v.due_date),new Date)>7).length}),a.jsx(B,{className:"text-right",children:d(h.filter(v=>!v.due_date||hs(new Date(v.due_date),new Date)>7).reduce((v,S)=>v+(S.total||0),0))})]}),a.jsxs(_e,{children:[a.jsx(B,{children:"Due within 7 days"}),a.jsx(B,{className:"text-right",children:m.length}),a.jsx(B,{className:"text-right text-warning",children:d(m.reduce((v,S)=>v+(S.total||0),0))})]}),a.jsxs(_e,{children:[a.jsx(B,{children:"1-30 days overdue"}),a.jsx(B,{className:"text-right",children:f.filter(v=>hs(new Date,new Date(v.due_date||""))<=30).length}),a.jsx(B,{className:"text-right text-destructive",children:d(f.filter(v=>hs(new Date,new Date(v.due_date||""))<=30).reduce((v,S)=>v+(S.total||0),0))})]}),a.jsxs(_e,{children:[a.jsx(B,{children:"Over 30 days overdue"}),a.jsx(B,{className:"text-right",children:f.filter(v=>hs(new Date,new Date(v.due_date||""))>30).length}),a.jsx(B,{className:"text-right text-destructive font-bold",children:d(f.filter(v=>hs(new Date,new Date(v.due_date||""))>30).reduce((v,S)=>v+(S.total||0),0))})]})]})]})})]}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"All Invoices"})}),a.jsx(re,{children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Invoice #"}),a.jsx(U,{children:"Customer"}),a.jsx(U,{children:"Invoice Date"}),a.jsx(U,{children:"Due Date"}),a.jsx(U,{className:"text-right",children:"Amount"}),a.jsx(U,{children:"Status"}),a.jsx(U,{children:"Days Overdue"})]})}),a.jsx(Wt,{children:l.map(v=>{var j;const S=v.due_date&&v.status!=="paid"?Math.max(0,hs(new Date,new Date(v.due_date))):0;return a.jsxs(_e,{children:[a.jsx(B,{className:"font-medium",children:v.invoice_number}),a.jsx(B,{children:((j=v.customers)==null?void 0:j.name)||"-"}),a.jsx(B,{children:vt(new Date(v.invoice_date),"dd MMM yyyy")}),a.jsx(B,{children:v.due_date?vt(new Date(v.due_date),"dd MMM yyyy"):"-"}),a.jsx(B,{className:"text-right",children:d(v.total)}),a.jsx(B,{children:a.jsx(Xe,{variant:v.status==="paid"?"default":S>0?"destructive":"secondary",children:v.status})}),a.jsx(B,{children:v.status==="paid"?"-":S>0?`${S} days`:"Current"})]},v.id)})})]})})]}),a.jsx(hp,{open:i,onOpenChange:o,onImport:T,columns:A,title:"Import Invoices"})]})}function yqe(){const{user:t}=ct(),e=un(),[n,r]=N.useState(""),[s,i]=N.useState(!1),[o,l]=N.useState({asset_number:"",name:"",description:"",category_id:"",purchase_date:new Date().toISOString().split("T")[0],purchase_cost:"",residual_value:"0",useful_life_months:"60",depreciation_method:"straight_line",location:"",serial_number:""}),{data:c}=Ne({queryKey:["fixed-assets-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const y=await Ke.getPrimaryMembershipByUser(t.id);return(y==null?void 0:y.companyId)??null},enabled:!!t}),{data:u,isLoading:d}=Ne({queryKey:["fixed-assets",c],queryFn:async()=>{if(!c)return[];const y=ve(te,Y.FIXED_ASSETS),A=ve(te,Y.ASSET_CATEGORIES),[T,v]=await Promise.all([$e(Ce(y,ge("companyId","==",c))),$e(Ce(A,ge("companyId","==",c)))]),S=new Map;return v.docs.forEach(j=>{const p=j.data();S.set(j.id,{name:String(p.name??""),depreciation_method:p.depreciationMethod??p.depreciation_method??null,useful_life_years:Number(p.usefulLifeYears??p.useful_life_years??0)||null})}),T.docs.map(j=>{var I;const p=j.data(),E=p.createdAt??p.created_at,P=typeof E=="string"?E:((I=E==null?void 0:E.toDate)==null?void 0:I.call(E).toISOString())??"",C=p.categoryId??p.category_id??null;return{id:j.id,user_id:String(p.userId??p.user_id??""),company_id:String(p.companyId??p.company_id??""),asset_number:String(p.assetNumber??p.asset_number??""),name:String(p.name??""),description:p.description??null,category_id:C,purchase_date:String(p.purchaseDate??p.purchase_date??""),purchase_cost:Number(p.purchaseCost??p.purchase_cost??0),residual_value:Number(p.residualValue??p.residual_value??0),useful_life_months:Number(p.usefulLifeMonths??p.useful_life_months??0),depreciation_method:String(p.depreciationMethod??p.depreciation_method??"straight_line"),location:p.location??null,serial_number:p.serialNumber??p.serial_number??null,net_book_value:Number(p.netBookValue??p.net_book_value??p.purchaseCost??p.purchase_cost??0),accumulated_depreciation:Number(p.accumulatedDepreciation??p.accumulated_depreciation??0),status:String(p.status??"active"),is_deleted:!!(p.isDeleted??p.is_deleted??!1),created_at:P,asset_categories:C?S.get(C)??null:null}}).filter(j=>!j.is_deleted).sort((j,p)=>p.created_at.localeCompare(j.created_at))},enabled:!!c}),{data:h}=Ne({queryKey:["asset-categories",c],queryFn:async()=>{if(!c)return[];const y=ve(te,Y.ASSET_CATEGORIES);return(await $e(Ce(y,ge("companyId","==",c)))).docs.map(T=>{const v=T.data();return{id:T.id,name:String(v.name??"")}}).sort((T,v)=>T.name.localeCompare(v.name))},enabled:!!c}),f=it({mutationFn:async()=>{if(!t||!c)throw new Error("Not authenticated");const y=parseFloat(o.purchase_cost),A=parseFloat(o.residual_value)||0,T=parseInt(o.useful_life_months,10),v=T>0?Math.max(0,(y-A)/T):0;await jn(ve(te,Y.FIXED_ASSETS),{userId:t.id,companyId:c,assetNumber:o.asset_number,name:o.name,description:o.description||null,categoryId:o.category_id||null,purchaseDate:o.purchase_date,purchaseCost:y,residualValue:A,usefulLifeMonths:T,depreciationMethod:o.depreciation_method,location:o.location||null,serialNumber:o.serial_number||null,monthlyDepreciation:v,netBookValue:y,accumulatedDepreciation:0,status:"active",isDeleted:!1,createdAt:ye(),updatedAt:ye()})},onSuccess:()=>{e.invalidateQueries({queryKey:["fixed-assets",c]}),Z.success("Asset created successfully"),i(!1),l({asset_number:"",name:"",description:"",category_id:"",purchase_date:new Date().toISOString().split("T")[0],purchase_cost:"",residual_value:"0",useful_life_months:"60",depreciation_method:"straight_line",location:"",serial_number:""})},onError:y=>{Z.error(y.message||"Failed to create asset")}}),m=u==null?void 0:u.filter(y=>y.name.toLowerCase().includes(n.toLowerCase())||y.asset_number.toLowerCase().includes(n.toLowerCase())),b=(u==null?void 0:u.reduce((y,A)=>y+Number(A.purchase_cost||0),0))||0,g=(u==null?void 0:u.reduce((y,A)=>y+Number(A.accumulated_depreciation||0),0))||0,x=(u==null?void 0:u.reduce((y,A)=>y+Number(A.net_book_value||A.purchase_cost||0),0))||0,w=y=>{switch(y){case"active":return a.jsx(Xe,{className:"bg-green-600",children:"Active"});case"disposed":return a.jsx(Xe,{variant:"destructive",children:"Disposed"});case"fully_depreciated":return a.jsx(Xe,{variant:"secondary",children:"Fully Depreciated"});case"under_maintenance":return a.jsx(Xe,{variant:"outline",className:"text-yellow-600 border-yellow-600",children:"Maintenance"});default:return a.jsx(Xe,{variant:"outline",children:y})}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Fixed Assets"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your organization's fixed assets and depreciation"})]}),a.jsxs(Jn,{open:s,onOpenChange:i,children:[a.jsx(Hr,{asChild:!0,children:a.jsxs(G,{children:[a.jsx(xn,{className:"h-4 w-4 mr-2"}),"Add Asset"]})}),a.jsxs(zn,{className:"max-w-2xl",children:[a.jsxs(qn,{children:[a.jsx(Wn,{children:"Add New Fixed Asset"}),a.jsx(bu,{children:"Enter the details of the new asset"})]}),a.jsxs("div",{className:"grid gap-4 py-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Asset Number *"}),a.jsx(K,{value:o.asset_number,onChange:y=>l({...o,asset_number:y.target.value}),placeholder:"FA-001"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Asset Name *"}),a.jsx(K,{value:o.name,onChange:y=>l({...o,name:y.target.value}),placeholder:"Office Computer"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Description"}),a.jsx(lr,{value:o.description,onChange:y=>l({...o,description:y.target.value}),placeholder:"Asset description..."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Category"}),a.jsxs(It,{value:o.category_id,onValueChange:y=>l({...o,category_id:y}),children:[a.jsx(Et,{children:a.jsx(kt,{placeholder:"Select category"})}),a.jsx(At,{children:h==null?void 0:h.map(y=>a.jsx(be,{value:y.id,children:y.name},y.id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Purchase Date *"}),a.jsx(K,{type:"date",value:o.purchase_date,onChange:y=>l({...o,purchase_date:y.target.value})})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Purchase Cost (ZMW) *"}),a.jsx(K,{type:"number",value:o.purchase_cost,onChange:y=>l({...o,purchase_cost:y.target.value}),placeholder:"0.00"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Residual Value (ZMW)"}),a.jsx(K,{type:"number",value:o.residual_value,onChange:y=>l({...o,residual_value:y.target.value}),placeholder:"0.00"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Useful Life (Months)"}),a.jsx(K,{type:"number",value:o.useful_life_months,onChange:y=>l({...o,useful_life_months:y.target.value}),placeholder:"60"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Depreciation Method"}),a.jsxs(It,{value:o.depreciation_method,onValueChange:y=>l({...o,depreciation_method:y}),children:[a.jsx(Et,{children:a.jsx(kt,{})}),a.jsxs(At,{children:[a.jsx(be,{value:"straight_line",children:"Straight Line"}),a.jsx(be,{value:"reducing_balance",children:"Reducing Balance"}),a.jsx(be,{value:"units_of_production",children:"Units of Production"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Location"}),a.jsx(K,{value:o.location,onChange:y=>l({...o,location:y.target.value}),placeholder:"Head Office"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Serial Number"}),a.jsx(K,{value:o.serial_number,onChange:y=>l({...o,serial_number:y.target.value}),placeholder:"SN-12345"})]})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(G,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),a.jsxs(G,{onClick:()=>f.mutate(),disabled:!o.asset_number||!o.name||!o.purchase_cost||f.isPending,children:[f.isPending?a.jsx(Pn,{className:"h-4 w-4 animate-spin mr-2"}):null,"Create Asset"]})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(X,{children:a.jsxs(ee,{className:"pb-2",children:[a.jsxs(jt,{className:"flex items-center gap-2",children:[a.jsx(Wa,{className:"h-4 w-4"}),"Total Assets"]}),a.jsx(ne,{className:"text-2xl",children:(u==null?void 0:u.length)||0})]})}),a.jsx(X,{children:a.jsxs(ee,{className:"pb-2",children:[a.jsx(jt,{children:"Total Asset Value"}),a.jsx(ne,{className:"text-2xl text-primary",children:le(b)})]})}),a.jsx(X,{children:a.jsxs(ee,{className:"pb-2",children:[a.jsxs(jt,{className:"flex items-center gap-2",children:[a.jsx(ki,{className:"h-4 w-4"}),"Accumulated Depreciation"]}),a.jsx(ne,{className:"text-2xl text-destructive",children:le(g)})]})}),a.jsx(X,{className:"bg-primary/5 border-primary/20",children:a.jsxs(ee,{className:"pb-2",children:[a.jsxs(jt,{className:"flex items-center gap-2",children:[a.jsx(ry,{className:"h-4 w-4"}),"Net Book Value"]}),a.jsx(ne,{className:"text-2xl text-primary",children:le(x)})]})})]}),a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"relative flex-1 max-w-sm",children:[a.jsx(na,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(K,{placeholder:"Search assets...",value:n,onChange:y=>r(y.target.value),className:"pl-9"})]})}),a.jsxs(X,{children:[a.jsx(ee,{children:a.jsx(ne,{children:"Asset Register"})}),a.jsx(re,{children:d?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(Pn,{className:"h-8 w-8 animate-spin"})}):m&&m.length>0?a.jsx("div",{className:"border rounded-lg overflow-x-auto",children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Asset #"}),a.jsx(U,{children:"Name"}),a.jsx(U,{children:"Category"}),a.jsx(U,{children:"Purchase Date"}),a.jsx(U,{className:"text-right",children:"Cost"}),a.jsx(U,{className:"text-right",children:"Accum. Dep."}),a.jsx(U,{className:"text-right",children:"NBV"}),a.jsx(U,{children:"Status"})]})}),a.jsx(Wt,{children:m.map(y=>{var A;return a.jsxs(_e,{children:[a.jsx(B,{className:"font-mono",children:y.asset_number}),a.jsx(B,{children:a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:y.name}),y.serial_number&&a.jsxs("p",{className:"text-sm text-muted-foreground",children:["SN: ",y.serial_number]})]})}),a.jsx(B,{children:((A=y.asset_categories)==null?void 0:A.name)||"-"}),a.jsx(B,{children:vt(new Date(y.purchase_date),"dd MMM yyyy")}),a.jsx(B,{className:"text-right",children:le(Number(y.purchase_cost))}),a.jsx(B,{className:"text-right text-destructive",children:le(Number(y.accumulated_depreciation||0))}),a.jsx(B,{className:"text-right font-medium",children:le(Number(y.net_book_value||y.purchase_cost))}),a.jsx(B,{children:w(y.status||"active")})]},y.id)})})]})}):a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(Wa,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"No fixed assets found"}),a.jsx("p",{className:"text-sm",children:"Add your first asset to get started"})]})})]})]})}function vqe(){const t=un(),{user:e}=ct(),n=it({mutationFn:async({periodMonth:r,postToGL:s=!0})=>{if(!e)throw new Error("Not authenticated");const i=await Ke.getPrimaryMembershipByUser(e.id);if(!(i!=null&&i.companyId))throw new Error("No company found");const o=await ff.runDepreciation({companyId:i.companyId,periodMonth:r,postToGL:s});return{success:o.success,period:r,assets_processed:o.assetsProcessed,total_depreciation:o.totalDepreciation,posted_to_gl:!!s,results:[]}},onSuccess:r=>{Z.success(`Depreciation completed: ${r.assets_processed} assets, K${r.total_depreciation.toFixed(2)} total`),t.invalidateQueries({queryKey:["asset-depreciation"]}),t.invalidateQueries({queryKey:["fixed-assets"]}),t.invalidateQueries({queryKey:["depreciable-assets"]}),t.invalidateQueries({queryKey:["journal-entries"]})},onError:r=>{Z.error(r.message||"Failed to run depreciation")}});return{runDepreciation:n,isRunning:n.isPending,lastResult:n.data}}function xqe(){const{user:t}=ct(),[e,n]=N.useState(vt(KV(new Date,1),"yyyy-MM")),[r,s]=N.useState(!1),[i,o]=N.useState(!0),{runDepreciation:l,isRunning:c,lastResult:u}=vqe(),{data:d}=Ne({queryKey:["asset-depreciation-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const w=await Ke.getPrimaryMembershipByUser(t.id);return(w==null?void 0:w.companyId)??null},enabled:!!t}),{data:h,isLoading:f}=Ne({queryKey:["asset-depreciation",d,e],queryFn:async()=>{if(!d)return[];const w=vQ(new Date(e+"-01")),y=yQ(w),A=vt(w,"yyyy-MM-dd"),T=vt(y,"yyyy-MM-dd"),[v,S]=await Promise.all([$e(Ce(ve(te,Y.DEPRECIATION_ENTRIES),ge("companyId","==",d))),$e(Ce(ve(te,Y.FIXED_ASSETS),ge("companyId","==",d)))]),j=new Map;return S.docs.forEach(p=>{const E=p.data();j.set(p.id,{asset_number:String(E.assetNumber??E.asset_number??""),name:String(E.name??""),purchase_cost:Number(E.purchaseCost??E.purchase_cost??0),depreciation_method:String(E.depreciationMethod??E.depreciation_method??"straight_line")})}),v.docs.map(p=>{const E=p.data(),P=String(E.periodStart??E.period_start??""),C=String(E.periodEnd??E.period_end??"");return{id:p.id,asset_id:String(E.assetId??E.asset_id??""),depreciation_amount:Number(E.depreciationAmount??E.depreciation_amount??0),accumulated_depreciation:Number(E.accumulatedDepreciation??E.accumulated_depreciation??0),net_book_value:Number(E.netBookValue??E.net_book_value??0),is_posted:!!(E.isPosted??E.is_posted??!1),period_start:P,period_end:C,created_at:String(E.createdAt??E.created_at??""),fixed_assets:j.get(String(E.assetId??E.asset_id??""))??null}}).filter(p=>p.period_start>=A&&p.period_end<=T).sort((p,E)=>String(E.created_at).localeCompare(String(p.created_at)))},enabled:!!d}),{data:m}=Ne({queryKey:["depreciable-assets",d],queryFn:async()=>d?(await $e(Ce(ve(te,Y.FIXED_ASSETS),ge("companyId","==",d),ge("status","==","active")))).docs.map(y=>{const A=y.data();return{id:y.id,status:String(A.status??"active"),is_deleted:!!(A.isDeleted??A.is_deleted??!1)}}).filter(y=>!y.is_deleted):[],enabled:!!d}),b=async()=>{try{await l.mutateAsync({periodMonth:e,postToGL:i}),s(!1)}catch{}},g=(h==null?void 0:h.reduce((w,y)=>w+Number(y.depreciation_amount||0),0))||0,x=Array.from({length:12},(w,y)=>{const A=KV(new Date,y);return{value:vt(A,"yyyy-MM"),label:vt(A,"MMMM yyyy")}});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Asset Depreciation"}),a.jsx("p",{className:"text-muted-foreground",children:"Run and view depreciation calculations"})]}),a.jsxs(G,{onClick:()=>s(!0),children:[a.jsx(bU,{className:"h-4 w-4 mr-2"}),"Run Depreciation"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(X,{children:a.jsxs(ee,{className:"pb-2",children:[a.jsxs(jt,{className:"flex items-center gap-2",children:[a.jsx(ry,{className:"h-4 w-4"}),"Active Assets"]}),a.jsx(ne,{className:"text-2xl",children:(m==null?void 0:m.filter(w=>w.status==="active").length)||0})]})}),a.jsx(X,{children:a.jsxs(ee,{className:"pb-2",children:[a.jsx(jt,{children:"Records This Period"}),a.jsx(ne,{className:"text-2xl",children:(h==null?void 0:h.length)||0})]})}),a.jsx(X,{children:a.jsxs(ee,{className:"pb-2",children:[a.jsxs(jt,{className:"flex items-center gap-2",children:[a.jsx(ki,{className:"h-4 w-4 text-destructive"}),"Total Depreciation"]}),a.jsx(ne,{className:"text-2xl text-destructive",children:le(g)})]})}),a.jsx(X,{className:"bg-muted/50",children:a.jsxs(ee,{className:"pb-2",children:[a.jsx(jt,{children:"Posted to GL"}),a.jsx(ne,{className:"text-2xl text-green-600",children:(h==null?void 0:h.filter(w=>w.is_posted).length)||0})]})})]}),a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs(It,{value:e,onValueChange:n,children:[a.jsx(Et,{className:"w-[200px]",children:a.jsx(kt,{placeholder:"Select month"})}),a.jsx(At,{children:x.map(w=>a.jsx(be,{value:w.value,children:w.label},w.value))})]})}),a.jsxs(X,{children:[a.jsxs(ee,{children:[a.jsx(ne,{children:"Depreciation Records"}),a.jsxs(jt,{children:["Monthly depreciation entries for ",vt(new Date(e+"-01"),"MMMM yyyy")]})]}),a.jsx(re,{children:f?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx(Pn,{className:"h-8 w-8 animate-spin"})}):h&&h.length>0?a.jsx("div",{className:"border rounded-lg overflow-x-auto",children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Asset"}),a.jsx(U,{children:"Method"}),a.jsx(U,{className:"text-right",children:"Depreciation"}),a.jsx(U,{className:"text-right",children:"Accum. Dep."}),a.jsx(U,{className:"text-right",children:"NBV"}),a.jsx(U,{children:"Status"})]})}),a.jsx(Wt,{children:h.map(w=>{var y,A,T,v;return a.jsxs(_e,{children:[a.jsx(B,{children:a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:(y=w.fixed_assets)==null?void 0:y.name}),a.jsx("p",{className:"text-sm text-muted-foreground font-mono",children:(A=w.fixed_assets)==null?void 0:A.asset_number})]})}),a.jsx(B,{className:"capitalize",children:(v=(T=w.fixed_assets)==null?void 0:T.depreciation_method)==null?void 0:v.replace("_"," ")}),a.jsx(B,{className:"text-right text-destructive",children:le(Number(w.depreciation_amount))}),a.jsx(B,{className:"text-right",children:le(Number(w.accumulated_depreciation))}),a.jsx(B,{className:"text-right font-medium",children:le(Number(w.net_book_value))}),a.jsx(B,{children:w.is_posted?a.jsxs(Xe,{className:"bg-green-600",children:[a.jsx(vo,{className:"h-3 w-3 mr-1"}),"Posted"]}):a.jsx(Xe,{variant:"outline",children:"Pending"})})]},w.id)})})]})}):a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(ki,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"No depreciation records for this period"}),a.jsx("p",{className:"text-sm",children:"Run depreciation to calculate monthly values"})]})})]}),a.jsx(qd,{open:r,onOpenChange:s,children:a.jsxs(Xc,{children:[a.jsxs(Zc,{children:[a.jsxs(eu,{className:"flex items-center gap-2",children:[a.jsx(Oi,{className:"h-5 w-5 text-amber-500"}),"Run Monthly Depreciation"]}),a.jsxs(tu,{className:"space-y-2",children:[a.jsx("p",{children:"This will calculate depreciation for all active fixed assets for:"}),a.jsx("p",{className:"font-medium text-foreground",children:vt(new Date(e+"-01"),"MMMM yyyy")}),a.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm mt-4",children:[a.jsx("li",{children:"Calculate depreciation based on each asset's method"}),a.jsx("li",{children:"Update accumulated depreciation and net book value"}),a.jsx("li",{children:"Create journal entries for the GL"}),a.jsx("li",{children:"Mark fully depreciated assets"})]})]})]}),a.jsx("div",{className:"py-4",children:a.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(A_,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Post to General Ledger"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Create journal entries automatically"})]})]}),a.jsx("input",{type:"checkbox",checked:i,onChange:w=>o(w.target.checked),className:"h-4 w-4"})]})}),a.jsxs(Jc,{children:[a.jsx(ru,{children:"Cancel"}),a.jsxs(nu,{onClick:b,disabled:c,children:[c&&a.jsx(Pn,{className:"h-4 w-4 mr-2 animate-spin"}),"Run Depreciation"]})]})]})}),u&&a.jsx(X,{className:"border-green-500/20 bg-green-500/5",children:a.jsxs(ee,{className:"pb-2",children:[a.jsxs(ne,{className:"text-sm flex items-center gap-2",children:[a.jsx(vo,{className:"h-4 w-4 text-green-600"}),"Last Run: ",u.period]}),a.jsxs(jt,{children:[u.assets_processed," assets processed, K",u.total_depreciation.toFixed(2)," total",u.posted_to_gl&&" (Posted to GL)"]})]})})]})}const uX=t=>{if(!t)return null;if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return null},i_=t=>{const e=uX(t);return e?e.slice(0,10):""},bqe=(t,e)=>({id:t,companyId:String(e.companyId??e.company_id??""),yearName:String(e.yearName??e.year_name??""),startDate:i_(e.startDate??e.start_date),endDate:i_(e.endDate??e.end_date),status:String(e.status??"open")}),wqe=(t,e)=>({id:t,companyId:String(e.companyId??e.company_id??""),financialYearId:String(e.financialYearId??e.financial_year_id??""),periodNumber:Number(e.periodNumber??e.period_number??0),periodName:String(e.periodName??e.period_name??""),startDate:i_(e.startDate??e.start_date),endDate:i_(e.endDate??e.end_date),status:String(e.status??"open"),closedAt:uX(e.closedAt??e.closed_at),closedBy:e.closedBy??e.closed_by??null});function _qe(){const t=un(),{user:e}=ct(),[n,r]=N.useState(!1),[s,i]=N.useState(null),[o,l]=N.useState(null),[c,u]=N.useState({year_name:`FY ${bh(new Date)}`,start_date:`${bh(new Date)}-01-01`,end_date:`${bh(new Date)}-12-31`}),d=Ne({queryKey:["financial-periods-company-id",e==null?void 0:e.id],queryFn:async()=>{if(!e)return null;const E=await Ke.getPrimaryMembershipByUser(e.id);return(E==null?void 0:E.companyId)??null},enabled:!!e}),h=d.data??null,{data:f,isLoading:m}=Ne({queryKey:["financial-years",h],queryFn:async()=>{if(!h)return[];const E=ve(te,Y.FINANCIAL_YEARS);return(await $e(Ce(E,ge("companyId","==",h)))).docs.map(C=>bqe(C.id,C.data())).sort((C,I)=>I.startDate.localeCompare(C.startDate))},enabled:!!h});N.useEffect(()=>{!o&&f&&f.length>0&&l(f[0].id)},[f,o]);const{data:b,isLoading:g}=Ne({queryKey:["financial-periods",h,o],queryFn:async()=>{if(!h||!o)return[];const E=ve(te,Y.FINANCIAL_PERIODS);return(await $e(Ce(E,ge("companyId","==",h),ge("financialYearId","==",o)))).docs.map(C=>wqe(C.id,C.data())).sort((C,I)=>C.periodNumber-I.periodNumber)},enabled:!!(h&&o)}),x=N.useMemo(()=>(b==null?void 0:b.find(E=>E.id===s))??null,[b,s]),w=it({mutationFn:async()=>{if(!e)throw new Error("Not authenticated");if(!h)throw new Error("No company profile found for your account");if(!c.year_name.trim())throw new Error("Year name is required");if(c.start_date>c.end_date)throw new Error("Start date must be before end date");const E=new Date(c.start_date),P=ml(te),C=He(ve(te,Y.FINANCIAL_YEARS));P.set(C,{companyId:h,yearName:c.year_name.trim(),startDate:c.start_date,endDate:c.end_date,status:"open",createdAt:ye(),updatedAt:ye()});for(let I=0;I<12;I+=1){const O=fQ(vQ(E),I),$=yQ(O),z=He(ve(te,Y.FINANCIAL_PERIODS));P.set(z,{companyId:h,financialYearId:C.id,periodNumber:I+1,periodName:vt(O,"MMMM yyyy"),startDate:vt(O,"yyyy-MM-dd"),endDate:vt($,"yyyy-MM-dd"),status:"open",closedAt:null,closedBy:null,createdAt:ye(),updatedAt:ye()})}await P.commit()},onSuccess:()=>{t.invalidateQueries({queryKey:["financial-years",h]}),t.invalidateQueries({queryKey:["financial-periods",h]}),Z.success("Financial year created with 12 monthly periods"),r(!1),u({year_name:`FY ${bh(new Date)+1}`,start_date:`${bh(new Date)+1}-01-01`,end_date:`${bh(new Date)+1}-12-31`})},onError:E=>{Z.error(E.message||"Failed to create financial year")}}),y=it({mutationFn:async E=>{if(!e)throw new Error("Not authenticated");await wo(He(te,Y.FINANCIAL_PERIODS,E.id),{status:"closed",closedAt:ye(),closedBy:e.id,updatedAt:ye()}),await or(He(te,Y.PERIOD_LOCKS,`${E.companyId}_${E.id}`),{companyId:E.companyId,periodId:E.id,financialYearId:E.financialYearId,periodName:E.periodName,startDate:E.startDate,endDate:E.endDate,status:"closed",lockedBy:e.id,lockedAt:ye(),updatedAt:ye()},{merge:!0})},onSuccess:()=>{t.invalidateQueries({queryKey:["financial-periods",h,o]}),Z.success("Period closed successfully"),i(null)},onError:E=>{Z.error(E.message||"Failed to close period")}}),A=it({mutationFn:async E=>{if(!e)throw new Error("Not authenticated");await wo(He(te,Y.FINANCIAL_PERIODS,E.id),{status:"open",closedAt:null,closedBy:null,updatedAt:ye()}),await or(He(te,Y.PERIOD_LOCKS,`${E.companyId}_${E.id}`),{companyId:E.companyId,periodId:E.id,status:"open",unlockedBy:e.id,unlockedAt:ye(),updatedAt:ye()},{merge:!0})},onSuccess:()=>{t.invalidateQueries({queryKey:["financial-periods",h,o]}),Z.success("Period reopened")},onError:E=>{Z.error(E.message||"Failed to reopen period")}}),T=E=>{switch(E){case"open":return a.jsx(Xe,{className:"bg-green-600",children:"Open"});case"closed":return a.jsx(Xe,{variant:"secondary",children:"Closed"});default:return a.jsx(Xe,{variant:"outline",children:E})}},v=f==null?void 0:f.find(E=>E.status==="open"),S=(b==null?void 0:b.filter(E=>E.status==="open"))??[],j=(b==null?void 0:b.filter(E=>E.status==="closed"))??[],p=d.isLoading||m;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Financial Periods"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage financial years and accounting periods"})]}),a.jsxs(Jn,{open:n,onOpenChange:r,children:[a.jsx(Hr,{asChild:!0,children:a.jsxs(G,{disabled:!h,children:[a.jsx(xn,{className:"h-4 w-4 mr-2"}),"New Financial Year"]})}),a.jsxs(zn,{children:[a.jsxs(qn,{children:[a.jsx(Wn,{children:"Create Financial Year"}),a.jsx(bu,{children:"This creates a new financial year with 12 monthly periods."})]}),a.jsxs("div",{className:"grid gap-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Year Name"}),a.jsx(K,{value:c.year_name,onChange:E=>u({...c,year_name:E.target.value}),placeholder:"FY 2026"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"Start Date"}),a.jsx(K,{type:"date",value:c.start_date,onChange:E=>u({...c,start_date:E.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{children:"End Date"}),a.jsx(K,{type:"date",value:c.end_date,onChange:E=>u({...c,end_date:E.target.value})})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(G,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),a.jsxs(G,{onClick:()=>w.mutate(),disabled:!c.year_name||w.isPending,children:[w.isPending&&a.jsx(Pn,{className:"h-4 w-4 mr-2 animate-spin"}),"Create Year"]})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(X,{children:a.jsxs(ee,{className:"pb-2",children:[a.jsxs(jt,{className:"flex items-center gap-2",children:[a.jsx(vd,{className:"h-4 w-4"}),"Current Year"]}),a.jsx(ne,{className:"text-xl",children:(v==null?void 0:v.yearName)||"Not Set"})]})}),a.jsx(X,{children:a.jsxs(ee,{className:"pb-2",children:[a.jsx(jt,{children:"Total Years"}),a.jsx(ne,{className:"text-2xl",children:(f==null?void 0:f.length)||0})]})}),a.jsx(X,{children:a.jsxs(ee,{className:"pb-2",children:[a.jsxs(jt,{className:"flex items-center gap-2",children:[a.jsx(zR,{className:"h-4 w-4 text-green-600"}),"Open Periods"]}),a.jsx(ne,{className:"text-2xl text-green-600",children:S.length})]})}),a.jsx(X,{children:a.jsxs(ee,{className:"pb-2",children:[a.jsxs(jt,{className:"flex items-center gap-2",children:[a.jsx(Bh,{className:"h-4 w-4"}),"Closed Periods"]}),a.jsx(ne,{className:"text-2xl",children:j.length})]})})]}),a.jsxs(X,{children:[a.jsxs(ee,{children:[a.jsx(ne,{children:"Financial Years"}),a.jsx(jt,{children:"Select a year to view its periods"})]}),a.jsx(re,{children:p?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx(Pn,{className:"h-8 w-8 animate-spin"})}):h?f&&f.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:f.map(E=>a.jsx(X,{className:`cursor-pointer transition-colors ${o===E.id?"border-primary ring-1 ring-primary":"hover:border-primary/50"}`,onClick:()=>l(E.id),children:a.jsx(re,{className:"pt-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:E.yearName}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[E.startDate?vt(new Date(E.startDate),"dd MMM yyyy"):"-"," ","-"," ",E.endDate?vt(new Date(E.endDate),"dd MMM yyyy"):"-"]})]}),T(E.status||"open")]})})},E.id))}):a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(vd,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"No financial years found"}),a.jsx("p",{className:"text-sm",children:"Create your first financial year to get started"})]}):a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:a.jsx("p",{children:"No company profile found for your account"})})})]}),o&&a.jsxs(X,{children:[a.jsxs(ee,{children:[a.jsx(ne,{children:"Accounting Periods"}),a.jsx(jt,{children:"Manage period status. Closed periods prevent back-dated entries."})]}),a.jsx(re,{children:g?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx(Pn,{className:"h-8 w-8 animate-spin"})}):b&&b.length>0?a.jsx("div",{className:"border rounded-lg",children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Period"}),a.jsx(U,{children:"Name"}),a.jsx(U,{children:"Start Date"}),a.jsx(U,{children:"End Date"}),a.jsx(U,{children:"Status"}),a.jsx(U,{children:"Closed At"}),a.jsx(U,{className:"text-right",children:"Actions"})]})}),a.jsx(Wt,{children:b.map(E=>a.jsxs(_e,{children:[a.jsxs(B,{className:"font-mono",children:["P",E.periodNumber]}),a.jsx(B,{className:"font-medium",children:E.periodName}),a.jsx(B,{children:E.startDate?vt(new Date(E.startDate),"dd MMM yyyy"):"-"}),a.jsx(B,{children:E.endDate?vt(new Date(E.endDate),"dd MMM yyyy"):"-"}),a.jsx(B,{children:T(E.status||"open")}),a.jsx(B,{children:E.closedAt?vt(new Date(E.closedAt),"dd MMM yyyy HH:mm"):"-"}),a.jsx(B,{className:"text-right",children:E.status==="open"?a.jsxs(G,{variant:"outline",size:"sm",onClick:()=>i(E.id),children:[a.jsx(Bh,{className:"h-4 w-4 mr-2"}),"Close"]}):a.jsxs(G,{variant:"ghost",size:"sm",onClick:()=>A.mutate(E),disabled:A.isPending,children:[a.jsx(zR,{className:"h-4 w-4 mr-2"}),"Reopen"]})})]},E.id))})]})}):a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:a.jsx("p",{children:"No periods found for this year"})})})]}),a.jsx(qd,{open:!!s,onOpenChange:()=>i(null),children:a.jsxs(Xc,{children:[a.jsxs(Zc,{children:[a.jsxs(eu,{className:"flex items-center gap-2",children:[a.jsx(Oi,{className:"h-5 w-5 text-amber-500"}),"Close Accounting Period"]}),a.jsxs(tu,{className:"space-y-2",children:[a.jsx("p",{children:"Closing this period will:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[a.jsx("li",{children:"Prevent new entries dated within this period"}),a.jsx("li",{children:"Block modifications to existing entries in this period"}),a.jsx("li",{children:"Lock payroll postings for this period"})]}),a.jsx("p",{className:"mt-4 font-medium",children:"You can reopen the period later if needed."})]})]}),a.jsxs(Jc,{children:[a.jsx(ru,{children:"Cancel"}),a.jsxs(nu,{onClick:()=>x&&y.mutate(x),disabled:y.isPending||!x,children:[y.isPending&&a.jsx(Pn,{className:"h-4 w-4 mr-2 animate-spin"}),"Close Period"]})]})]})})]})}const mB=[{value:"housing",label:"Housing Allowance"},{value:"transport",label:"Transport Allowance"},{value:"meal",label:"Meal Allowance"},{value:"medical",label:"Medical Allowance"},{value:"phone",label:"Phone Allowance"},{value:"fuel",label:"Fuel Allowance"},{value:"education",label:"Education Allowance"},{value:"custom",label:"Custom Allowance"}];function jqe({employeeId:t,employeeName:e,contractType:n,basicSalary:r,onClose:s}){const i=un(),{user:o}=ct(),l=n==="consultant",[c,u]=N.useState({apply_paye:!l,apply_napsa:!l,apply_nhima:!l,pension_enabled:!1,pension_employee_rate:5,pension_employer_rate:5,is_consultant:l,consultant_type:"local",apply_wht:l,rate_type:"monthly",currency:"ZMW"}),[d,h]=N.useState([]),[f,m]=N.useState({allowance_type:"housing",allowance_name:"Housing Allowance",amount:0,is_taxable:!0}),{data:b}=Ne({queryKey:["employee-payroll-profile",t,o==null?void 0:o.id],enabled:!!o,queryFn:async()=>{if(!o)return null;const v=await Ke.getPrimaryMembershipByUser(o.id);if(!(v!=null&&v.companyId))return null;const S=Ce(ve(te,Y.EMPLOYEE_PAYROLL_PROFILES),ge("companyId","==",v.companyId),ge("employeeId","==",t),Ws(1)),j=await $e(S);if(j.empty)return null;const p=j.docs[0];return{id:p.id,...p.data()}}}),{data:g}=Ne({queryKey:["employee-allowances",t,o==null?void 0:o.id],enabled:!!o,queryFn:async()=>{if(!o)return[];const v=await Ke.getPrimaryMembershipByUser(o.id);if(!(v!=null&&v.companyId))return[];const S=Ce(ve(te,Y.EMPLOYEE_ALLOWANCES),ge("companyId","==",v.companyId),ge("employeeId","==",t),ge("isActive","==",!0));return(await $e(S)).docs.map(p=>({id:p.id,...p.data()}))}});N.useEffect(()=>{b&&u({apply_paye:b.applyPaye??b.apply_paye??!l,apply_napsa:b.applyNapsa??b.apply_napsa??!l,apply_nhima:b.applyNhima??b.apply_nhima??!l,pension_enabled:b.pensionEnabled??b.pension_enabled??!1,pension_employee_rate:Number(b.pensionEmployeeRate??b.pension_employee_rate??5),pension_employer_rate:Number(b.pensionEmployerRate??b.pension_employer_rate??5),is_consultant:b.isConsultant??b.is_consultant??l,consultant_type:b.consultantType??b.consultant_type??"local",apply_wht:b.applyWht??b.apply_wht??l,rate_type:b.rateType??b.rate_type??"monthly",currency:b.currency??"ZMW"})},[b,l]),N.useEffect(()=>{g&&h(g.map(v=>({id:v.id,allowance_type:v.allowanceType??v.allowance_type??"custom",allowance_name:v.allowanceName??v.allowance_name??"Allowance",amount:Number(v.amount??0),is_taxable:v.isTaxable??v.is_taxable??!0})))},[g]);const x=it({mutationFn:async()=>{if(!o)throw new Error("Not authenticated");const v=await Ke.getPrimaryMembershipByUser(o.id);if(!(v!=null&&v.companyId))throw new Error("No company associated with user");const S=b&&typeof b.id=="string"?String(b.id):t,j={employeeId:t,companyId:v.companyId,applyPaye:c.apply_paye,applyNapsa:c.apply_napsa,applyNhima:c.apply_nhima,pensionEnabled:c.pension_enabled,pensionEmployeeRate:c.pension_employee_rate,pensionEmployerRate:c.pension_employer_rate,isConsultant:c.is_consultant,consultantType:c.consultant_type,applyWht:c.apply_wht,rateType:c.rate_type,currency:c.currency,updatedAt:ye()};if(await or(He(te,Y.EMPLOYEE_PAYROLL_PROFILES,S),b?j:{...j,createdAt:ye()},{merge:!0}),g){const p=g.map(C=>String(C.id)).filter(C=>!!C),E=d.filter(C=>C.id).map(C=>String(C.id)),P=p.filter(C=>!E.includes(C));await Promise.all(P.map(C=>wo(He(te,Y.EMPLOYEE_ALLOWANCES,C),{isActive:!1,updatedAt:ye()})))}for(const p of d){const E={employeeId:t,companyId:v.companyId,allowanceType:p.allowance_type,allowanceName:p.allowance_name,amount:p.amount,isTaxable:p.is_taxable,isActive:!0,updatedAt:ye()};p.id?await or(He(te,Y.EMPLOYEE_ALLOWANCES,String(p.id)),E,{merge:!0}):await jn(ve(te,Y.EMPLOYEE_ALLOWANCES),{...E,createdAt:ye()})}},onSuccess:()=>{Z.success("Payroll setup saved successfully"),i.invalidateQueries({queryKey:["employee-payroll-profile",t]}),i.invalidateQueries({queryKey:["employee-allowances",t]}),s==null||s()},onError:v=>{Z.error(v instanceof Error?v.message:"Failed to save payroll setup")}}),w=()=>{f.amount>0&&(h([...d,{...f}]),m({allowance_type:"housing",allowance_name:"Housing Allowance",amount:0,is_taxable:!0}))},y=v=>{h(d.filter((S,j)=>j!==v))},A=d.reduce((v,S)=>v+S.amount,0),T=r+A;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Payroll Setup"}),a.jsx("p",{className:"text-muted-foreground",children:e})]}),a.jsx(Xe,{variant:l?"secondary":"default",children:l?"Consultant":"Employee"})]}),a.jsxs(X,{children:[a.jsxs(ee,{children:[a.jsx(ne,{children:"Earnings Assignment"}),a.jsx(jt,{children:"Configure allowances for this employee"})]}),a.jsxs(re,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[a.jsx("span",{children:"Basic Pay"}),a.jsx("span",{className:"font-semibold",children:le(r)})]}),d.map((v,S)=>a.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:v.allowance_name}),!v.is_taxable&&a.jsx(Xe,{variant:"outline",className:"ml-2 text-xs",children:"Non-taxable"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-semibold",children:le(v.amount)}),a.jsx(G,{variant:"ghost",size:"sm",onClick:()=>y(S),children:a.jsx(xs,{className:"h-4 w-4 text-destructive"})})]})]},S)),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 p-3 border rounded-lg bg-muted/50",children:[a.jsxs(It,{value:f.allowance_type,onValueChange:v=>{const S=mB.find(j=>j.value===v);m({...f,allowance_type:v,allowance_name:(S==null?void 0:S.label)||v})},children:[a.jsx(Et,{children:a.jsx(kt,{})}),a.jsx(At,{children:mB.map(v=>a.jsx(be,{value:v.value,children:v.label},v.value))})]}),a.jsx(K,{type:"number",step:"0.01",placeholder:"Amount",value:f.amount||"",onChange:v=>m({...f,amount:Number(v.target.value)})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Zr,{checked:f.is_taxable,onCheckedChange:v=>m({...f,is_taxable:v})}),a.jsx(J,{className:"text-sm",children:"Taxable"})]}),a.jsxs(G,{onClick:w,disabled:f.amount<=0,children:[a.jsx(xn,{className:"h-4 w-4 mr-1"})," Add"]})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-primary/10 rounded-lg font-semibold",children:[a.jsx("span",{children:"Gross Salary"}),a.jsx("span",{className:"text-lg",children:le(T)})]})]})]}),a.jsxs(X,{children:[a.jsxs(ee,{children:[a.jsx(ne,{children:"Statutory Deductions"}),a.jsx(jt,{children:"Configure which deductions apply to this employee"})]}),a.jsxs(re,{className:"space-y-4",children:[l&&a.jsxs(Cm,{children:[a.jsx(xa,{className:"h-4 w-4"}),a.jsx(Pm,{children:"Consultants are subject to Withholding Tax (WHT) instead of PAYE, NAPSA, and NHIMA."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[a.jsxs("div",{children:[a.jsx(J,{className:"font-medium",children:"Apply PAYE"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Pay As You Earn tax"})]}),a.jsx(Zr,{checked:c.apply_paye,onCheckedChange:v=>u({...c,apply_paye:v}),disabled:l})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[a.jsxs("div",{children:[a.jsx(J,{className:"font-medium",children:"Apply NAPSA"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"5% of gross (max K1,342)"})]}),a.jsx(Zr,{checked:c.apply_napsa,onCheckedChange:v=>u({...c,apply_napsa:v}),disabled:l})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[a.jsxs("div",{children:[a.jsx(J,{className:"font-medium",children:"Apply NHIMA"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"1% of basic (max K250)"})]}),a.jsx(Zr,{checked:c.apply_nhima,onCheckedChange:v=>u({...c,apply_nhima:v}),disabled:l})]})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[a.jsxs("div",{children:[a.jsx(J,{className:"font-medium",children:"Pension Enabled"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Optional pension contribution"})]}),a.jsx(Zr,{checked:c.pension_enabled,onCheckedChange:v=>u({...c,pension_enabled:v})})]}),c.pension_enabled&&a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[a.jsxs("div",{children:[a.jsx(J,{children:"Employee Rate (%)"}),a.jsx(K,{type:"number",step:"0.1",value:c.pension_employee_rate,onChange:v=>u({...c,pension_employee_rate:Number(v.target.value)})})]}),a.jsxs("div",{children:[a.jsx(J,{children:"Employer Rate (%)"}),a.jsx(K,{type:"number",step:"0.1",value:c.pension_employer_rate,onChange:v=>u({...c,pension_employer_rate:Number(v.target.value)})})]})]})]}),l&&a.jsxs("div",{className:"border-t pt-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg mb-4",children:[a.jsxs("div",{children:[a.jsx(J,{className:"font-medium",children:"Apply Withholding Tax (WHT)"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Tax on consultancy payments"})]}),a.jsx(Zr,{checked:c.apply_wht,onCheckedChange:v=>u({...c,apply_wht:v})})]}),c.apply_wht&&a.jsxs("div",{children:[a.jsx(J,{children:"Consultant Type"}),a.jsxs(It,{value:c.consultant_type,onValueChange:v=>u({...c,consultant_type:v}),children:[a.jsx(Et,{className:"mt-2",children:a.jsx(kt,{})}),a.jsxs(At,{children:[a.jsx(be,{value:"local",children:"Local Consultant (15% WHT)"}),a.jsx(be,{value:"non_resident",children:"Non-Resident (20% WHT - Final Tax)"})]})]})]})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(G,{variant:"outline",onClick:s,children:"Cancel"}),a.jsxs(G,{onClick:()=>x.mutate(),disabled:x.isPending,children:[a.jsx(bd,{className:"h-4 w-4 mr-2"}),x.isPending?"Saving...":"Save Payroll Setup"]})]})]})}function Nqe(){const{id:t}=zm(),e=Hn(),{user:n}=ct(),{data:r,isLoading:s}=Ne({queryKey:["employee",t,n==null?void 0:n.id],queryFn:async()=>{if(!t||!n)return null;const i=await Ke.getPrimaryMembershipByUser(n.id);if(!(i!=null&&i.companyId))return null;const o=He(te,Y.EMPLOYEES,t),l=await _a(o);if(!l.exists())return null;const c=l.data(),u=c.companyId??c.company_id;return u&&u!==i.companyId?null:{id:l.id,...c}},enabled:!!(t&&n)});return s?a.jsx(uf,{}):r?a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs(G,{variant:"ghost",size:"sm",onClick:()=>e("/employees"),children:[a.jsx(No,{className:"h-4 w-4 mr-2"}),"Back to Employees"]})}),a.jsx(jqe,{employeeId:String(r.id),employeeName:String(r.fullName??r.full_name??"Employee"),contractType:String(r.contractType??r.contract_type??"")||void 0,basicSalary:Number(r.basicSalary??r.basic_salary??0),onClose:()=>e("/employees")})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-muted-foreground",children:"Employee not found"}),a.jsx(G,{variant:"link",onClick:()=>e("/employees"),children:"Go back to employees"})]})}const Sqe=[{band_order:1,min_amount:0,max_amount:5100,rate:0},{band_order:2,min_amount:5100,max_amount:7100,rate:.2},{band_order:3,min_amount:7100,max_amount:9200,rate:.3},{band_order:4,min_amount:9200,max_amount:null,rate:.37}],Eqe=[{rate_type:"napsa",employee_rate:.05,employer_rate:.05,cap_amount:1342},{rate_type:"nhima",employee_rate:.01,employer_rate:.01,cap_amount:250},{rate_type:"pension",employee_rate:.05,employer_rate:.05,cap_amount:null},{rate_type:"wht_local",employee_rate:.15,employer_rate:0,cap_amount:null},{rate_type:"wht_nonresident",employee_rate:.2,employer_rate:0,cap_amount:null}],Xp=(t,e=0)=>{const n=Number(t);return Number.isFinite(n)?n:e},pB=t=>{if(t==null||t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null};function Aqe(){const{user:t}=ct(),e=un(),[n,r]=N.useState([]),[s,i]=N.useState([]),[o,l]=N.useState(!1),c=Ne({queryKey:["payroll-settings-company-id",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const S=await Ke.getPrimaryMembershipByUser(t.id);return(S==null?void 0:S.companyId)??null},enabled:!!t}),u=c.data??null,{data:d,isLoading:h}=Ne({queryKey:["paye-tax-bands",u],queryFn:async()=>{if(!u)return[];const S=ve(te,Y.PAYE_TAX_BANDS);return(await $e(Ce(S,ge("companyId","==",u)))).docs.map(p=>{const E=p.data();return{id:p.id,band_order:Xp(E.bandOrder??E.band_order,0),min_amount:Xp(E.minAmount??E.min_amount,0),max_amount:pB(E.maxAmount??E.max_amount),rate:Xp(E.rate,0),is_active:!!(E.isActive??E.is_active??!0)}}).filter(p=>p.is_active).sort((p,E)=>p.band_order-E.band_order).map(({is_active:p,...E})=>E)},enabled:!!u}),{data:f,isLoading:m}=Ne({queryKey:["statutory-rates",u],queryFn:async()=>{if(!u)return[];const S=ve(te,Y.PAYROLL_STATUTORY_RATES);return(await $e(Ce(S,ge("companyId","==",u)))).docs.map(p=>{const E=p.data();return{id:p.id,rate_type:String(E.rateType??E.rate_type??""),employee_rate:Xp(E.employeeRate??E.employee_rate,0),employer_rate:Xp(E.employerRate??E.employer_rate,0),cap_amount:pB(E.capAmount??E.cap_amount),is_active:!!(E.isActive??E.is_active??!0)}}).filter(p=>p.is_active).map(({is_active:p,...E})=>E)},enabled:!!u});N.useEffect(()=>{o||h||m||(d&&d.length>0?r(d):r(Sqe),f&&f.length>0?i(f):i(Eqe),l(!0))},[o,h,m,d,f]);const b=it({mutationFn:async()=>{if(!u)throw new Error("No company context found");const S=ve(te,Y.PAYE_TAX_BANDS),j=await $e(Ce(S,ge("companyId","==",u))),p=ml(te);j.docs.forEach(E=>{p.set(E.ref,{isActive:!1,updatedAt:ye()},{merge:!0})}),n.forEach((E,P)=>{const C=He(ve(te,Y.PAYE_TAX_BANDS));p.set(C,{companyId:u,bandOrder:P+1,minAmount:Number(E.min_amount),maxAmount:E.max_amount===null?null:Number(E.max_amount),rate:Number(E.rate),isActive:!0,createdAt:ye(),updatedAt:ye()})}),await p.commit()},onSuccess:()=>{Z.success("PAYE tax bands saved successfully"),e.invalidateQueries({queryKey:["paye-tax-bands",u]})},onError:S=>{Z.error(S.message||"Failed to save tax bands")}}),g=it({mutationFn:async()=>{if(!u)throw new Error("No company context found");const S=ve(te,Y.PAYROLL_STATUTORY_RATES),j=await $e(Ce(S,ge("companyId","==",u))),p=ml(te);j.docs.forEach(E=>{p.set(E.ref,{isActive:!1,updatedAt:ye()},{merge:!0})}),s.forEach(E=>{const P=He(ve(te,Y.PAYROLL_STATUTORY_RATES));p.set(P,{companyId:u,rateType:E.rate_type,employeeRate:Number(E.employee_rate),employerRate:Number(E.employer_rate),capAmount:E.cap_amount===null?null:Number(E.cap_amount),isActive:!0,createdAt:ye(),updatedAt:ye()})}),await p.commit()},onSuccess:()=>{Z.success("Statutory rates saved successfully"),e.invalidateQueries({queryKey:["statutory-rates",u]})},onError:S=>{Z.error(S.message||"Failed to save statutory rates")}}),x=()=>{const S=n[n.length-1];r([...n,{band_order:n.length+1,min_amount:(S==null?void 0:S.max_amount)||0,max_amount:null,rate:0}])},w=S=>{r(n.filter((j,p)=>p!==S))},y=(S,j,p)=>{const E=[...n];E[S]={...E[S],[j]:p},r(E)},A=(S,j,p)=>{const E=[...s];E[S]={...E[S],[j]:p},i(E)},T=S=>{switch(S){case"napsa":return"NAPSA";case"nhima":return"NHIMA";case"pension":return"Pension";case"wht_local":return"WHT (Local Consultant)";case"wht_nonresident":return"WHT (Non-Resident)";default:return S}},v=c.isLoading||h||m;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Payroll Settings"}),a.jsx("p",{className:"text-muted-foreground",children:"Configure PAYE tax bands and statutory rates"})]}),a.jsx(sy,{className:"h-8 w-8 text-muted-foreground"})]}),a.jsxs(Yv,{defaultValue:"paye",className:"space-y-4",children:[a.jsxs(Qm,{children:[a.jsx(ja,{value:"paye",children:"PAYE Tax Bands"}),a.jsx(ja,{value:"statutory",children:"Statutory Rates"})]}),a.jsx(Na,{value:"paye",children:a.jsxs(X,{children:[a.jsxs(ee,{children:[a.jsx(ne,{children:"PAYE Tax Bands (Monthly)"}),a.jsx(jt,{children:"Configure the progressive tax bands for Pay As You Earn calculations."})]}),a.jsxs(re,{className:"space-y-4",children:[a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Band"}),a.jsx(U,{children:"Min Amount (ZMW)"}),a.jsx(U,{children:"Max Amount (ZMW)"}),a.jsx(U,{children:"Rate (%)"}),a.jsx(U,{className:"w-16"})]})}),a.jsx(Wt,{children:n.map((S,j)=>a.jsxs(_e,{children:[a.jsxs(B,{className:"font-medium",children:["Band ",j+1]}),a.jsx(B,{children:a.jsx(K,{type:"number",step:"0.01",value:S.min_amount,onChange:p=>y(j,"min_amount",Number(p.target.value)),className:"w-32"})}),a.jsx(B,{children:a.jsx(K,{type:"number",step:"0.01",value:S.max_amount??"",onChange:p=>y(j,"max_amount",p.target.value?Number(p.target.value):null),placeholder:"inf",className:"w-32"})}),a.jsx(B,{children:a.jsx(K,{type:"number",step:"0.01",value:S.rate*100,onChange:p=>y(j,"rate",Number(p.target.value)/100),className:"w-24"})}),a.jsx(B,{children:a.jsx(G,{variant:"ghost",size:"sm",onClick:()=>w(j),disabled:n.length<=1,children:a.jsx(xs,{className:"h-4 w-4 text-destructive"})})})]},j))})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsxs(G,{variant:"outline",onClick:x,disabled:!u||v,children:[a.jsx(xn,{className:"h-4 w-4 mr-2"}),"Add Band"]}),a.jsxs(G,{onClick:()=>b.mutate(),disabled:b.isPending||!u||v,children:[a.jsx(bd,{className:"h-4 w-4 mr-2"}),b.isPending?"Saving...":"Save Tax Bands"]})]})]})]})}),a.jsx(Na,{value:"statutory",children:a.jsxs(X,{children:[a.jsxs(ee,{children:[a.jsx(ne,{children:"Statutory Contribution Rates"}),a.jsx(jt,{children:"Configure NAPSA, NHIMA, Pension, and WHT rates."})]}),a.jsxs(re,{className:"space-y-4",children:[a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Contribution Type"}),a.jsx(U,{children:"Employee Rate (%)"}),a.jsx(U,{children:"Employer Rate (%)"}),a.jsx(U,{children:"Cap Amount (ZMW)"})]})}),a.jsx(Wt,{children:s.map((S,j)=>a.jsxs(_e,{children:[a.jsx(B,{className:"font-medium",children:T(S.rate_type)}),a.jsx(B,{children:a.jsx(K,{type:"number",step:"0.01",value:S.employee_rate*100,onChange:p=>A(j,"employee_rate",Number(p.target.value)/100),className:"w-24"})}),a.jsx(B,{children:a.jsx(K,{type:"number",step:"0.01",value:S.employer_rate*100,onChange:p=>A(j,"employer_rate",Number(p.target.value)/100),className:"w-24",disabled:S.rate_type.startsWith("wht")})}),a.jsx(B,{children:a.jsx(K,{type:"number",step:"0.01",value:S.cap_amount??"",onChange:p=>A(j,"cap_amount",p.target.value?Number(p.target.value):null),placeholder:"No cap",className:"w-32"})})]},S.rate_type))})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs(G,{onClick:()=>g.mutate(),disabled:g.isPending||!u||v,children:[a.jsx(bd,{className:"h-4 w-4 mr-2"}),g.isPending?"Saving...":"Save Rates"]})})]})]})})]})]})}function gB({icon:t,title:e,description:n,actionLabel:r,onAction:s,className:i}){return a.jsxs("div",{className:pe("flex flex-col items-center justify-center py-12 px-4 text-center",i),children:[a.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-muted",children:t||a.jsx(xte,{className:"h-8 w-8 text-muted-foreground"})}),a.jsx("h3",{className:"text-lg font-semibold",children:e}),n&&a.jsx("p",{className:"mt-1 text-sm text-muted-foreground max-w-sm",children:n}),r&&s&&a.jsxs(G,{onClick:s,className:"mt-4",children:[a.jsx(xn,{className:"mr-2 h-4 w-4"}),r]})]})}const Tqe={name:"",sku:"",description:"",type:"product",category:"",unit_of_measure:"Unit",selling_price:0,cost_price:0,track_inventory:!1,quantity_on_hand:0,reorder_point:0,is_taxable:!0,tax_rate:16,is_active:!0},kS=t=>{if(!t)return null;if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString();if(typeof t=="object"&&t!==null&&"toDate"in t){const e=t;if(typeof e.toDate=="function")return e.toDate().toISOString()}return null};function Cqe(){const{user:t}=ct(),[e,n]=N.useState("catalog"),[r,s]=N.useState(""),[i,o]=N.useState("all"),[l,c]=N.useState(!1),[u,d]=N.useState(!1),[h,f]=N.useState(null),[m,b]=N.useState(null),g=un(),{data:x}=Ne({queryKey:["products-company",t==null?void 0:t.id],queryFn:async()=>{if(!t)return null;const M=await Ke.getPrimaryMembershipByUser(t.id);return(M==null?void 0:M.companyId)??null},enabled:!!t}),{data:w,isLoading:y}=Ne({queryKey:["products",x],queryFn:async()=>x?(await $e(Ce(ve(te,Y.PRODUCTS),ge("companyId","==",x)))).docs.map(F=>{const L=F.data();return{id:F.id,name:String(L.name??""),sku:L.sku??null,description:L.description??null,type:L.type??"product",category:L.category??null,unit_of_measure:L.unitOfMeasure??L.unit_of_measure??null,selling_price:Number(L.sellingPrice??L.selling_price??0),cost_price:Number(L.costPrice??L.cost_price??0),track_inventory:!!(L.trackInventory??L.track_inventory),quantity_on_hand:Number(L.quantityOnHand??L.quantity_on_hand??0),reorder_point:Number(L.reorderPoint??L.reorder_point??0),is_taxable:!!(L.isTaxable??L.is_taxable),tax_rate:Number(L.taxRate??L.tax_rate??16),is_active:L.isActive===void 0&&L.is_active===void 0?!0:!!(L.isActive??L.is_active),created_at:kS(L.createdAt??L.created_at)}}):[],enabled:!!x}),{data:A,isLoading:T}=Ne({queryKey:["priceLists",x],queryFn:async()=>x?(await $e(Ce(ve(te,Y.PRICE_LISTS),ge("companyId","==",x)))).docs.map(F=>{const L=F.data();return{id:F.id,name:String(L.name??""),description:L.description??null,currency:String(L.currency??"ZMW"),is_default:!!(L.isDefault??L.is_default),is_active:L.isActive===void 0&&L.is_active===void 0?!0:!!(L.isActive??L.is_active),valid_from:kS(L.validFrom??L.valid_from),valid_to:kS(L.validTo??L.valid_to)}}):[],enabled:!!x}),v=it({mutationFn:async M=>{if(!x)throw new Error("No company found");const F={companyId:x,name:M.name||"",sku:M.sku||null,description:M.description||null,type:M.type||"product",category:M.category||null,unitOfMeasure:M.unit_of_measure||"Unit",sellingPrice:Number(M.selling_price||0),costPrice:Number(M.cost_price||0),trackInventory:!!M.track_inventory,quantityOnHand:Number(M.quantity_on_hand||0),reorderPoint:Number(M.reorder_point||0),isTaxable:!!M.is_taxable,taxRate:Number(M.tax_rate||16),isActive:M.is_active===void 0?!0:!!M.is_active,updatedAt:ye()};M.id?await wo(He(te,Y.PRODUCTS,M.id),F):await jn(ve(te,Y.PRODUCTS),{...F,createdAt:ye()})},onSuccess:()=>{g.invalidateQueries({queryKey:["products"]}),c(!1),f(null),Z.success(h!=null&&h.id?"Product updated":"Product created")},onError:M=>{Z.error("Failed to save product: "+M.message)}}),S=it({mutationFn:async M=>{await Li(He(te,Y.PRODUCTS,M))},onSuccess:()=>{g.invalidateQueries({queryKey:["products"]}),Z.success("Product deleted")},onError:M=>{Z.error("Failed to delete product: "+M.message)}}),j=it({mutationFn:async M=>{if(!x)throw new Error("No company found");const F={companyId:x,name:M.name||"",description:M.description||null,currency:M.currency||"ZMW",isDefault:!!M.is_default,isActive:M.is_active===void 0?!0:!!M.is_active,validFrom:M.valid_from||null,validTo:M.valid_to||null,updatedAt:ye()};M.id?await wo(He(te,Y.PRICE_LISTS,M.id),F):await jn(ve(te,Y.PRICE_LISTS),{...F,createdAt:ye()})},onSuccess:()=>{g.invalidateQueries({queryKey:["priceLists"]}),d(!1),b(null),Z.success(m!=null&&m.id?"Price list updated":"Price list created")},onError:M=>{Z.error("Failed to save price list: "+M.message)}}),p=it({mutationFn:async M=>{await Li(He(te,Y.PRICE_LISTS,M))},onSuccess:()=>{g.invalidateQueries({queryKey:["priceLists"]}),Z.success("Price list deleted")},onError:M=>{Z.error("Failed to delete price list: "+M.message)}}),E=M=>{f(M),c(!0)},P=()=>{f({...Tqe}),c(!0)},C=M=>{b(M),d(!0)},I=()=>{b({name:"",description:"",currency:"ZMW",is_default:!1,is_active:!0}),d(!0)},O=(w==null?void 0:w.filter(M=>M.type==="product").length)||0,$=(w==null?void 0:w.filter(M=>M.type==="service").length)||0,z=(w==null?void 0:w.filter(M=>M.track_inventory&&M.quantity_on_hand<=M.reorder_point).length)||0,H=(w||[]).filter(M=>{const F=`${M.name} ${M.sku||""}`.toLowerCase(),L=!r||F.includes(r.toLowerCase()),W=i==="all"||M.type===i;return L&&W});return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Products & Services"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your product catalog, inventory, and pricing"})]})}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Total Products"}),a.jsx(Wa,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:O})})]}),a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Total Services"}),a.jsx(KR,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:$})})]}),a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Low Stock Items"}),a.jsx(ste,{className:"h-4 w-4 text-orange-500"})]}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold text-orange-500",children:z})})]}),a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(ne,{className:"text-sm font-medium",children:"Price Lists"}),a.jsx(HR,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(re,{children:a.jsx("div",{className:"text-2xl font-bold",children:(A==null?void 0:A.length)||0})})]})]}),a.jsxs(Yv,{value:e,onValueChange:n,children:[a.jsxs(Qm,{children:[a.jsx(ja,{value:"catalog",children:"Product Catalog"}),a.jsx(ja,{value:"pricing",children:"Price Lists"}),a.jsx(ja,{value:"inventory",children:"Inventory"})]}),a.jsxs(Na,{value:"catalog",className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[a.jsxs("div",{className:"relative flex-1 max-w-sm",children:[a.jsx(na,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a.jsx(K,{placeholder:"Search products...",value:r,onChange:M=>s(M.target.value),className:"pl-10"})]}),a.jsxs(It,{value:i,onValueChange:o,children:[a.jsx(Et,{className:"w-[150px]",children:a.jsx(kt,{placeholder:"Filter by type"})}),a.jsxs(At,{children:[a.jsx(be,{value:"all",children:"All Types"}),a.jsx(be,{value:"product",children:"Products"}),a.jsx(be,{value:"service",children:"Services"})]})]})]}),a.jsxs(G,{onClick:P,children:[a.jsx(xn,{className:"h-4 w-4 mr-2"}),"Add Product/Service"]})]}),y?a.jsx(uf,{message:"Loading products..."}):H.length?a.jsx(X,{children:a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Name"}),a.jsx(U,{children:"SKU"}),a.jsx(U,{children:"Type"}),a.jsx(U,{children:"Category"}),a.jsx(U,{className:"text-right",children:"Selling Price"}),a.jsx(U,{className:"text-right",children:"Cost Price"}),a.jsx(U,{className:"text-right",children:"Stock"}),a.jsx(U,{children:"Status"}),a.jsx(U,{className:"text-right",children:"Actions"})]})}),a.jsx(Wt,{children:H.map(M=>a.jsxs(_e,{children:[a.jsx(B,{className:"font-medium",children:M.name}),a.jsx(B,{children:M.sku||"-"}),a.jsx(B,{children:a.jsxs(Xe,{variant:M.type==="product"?"default":"secondary",children:[M.type==="product"?a.jsx(Wa,{className:"h-3 w-3 mr-1"}):a.jsx(KR,{className:"h-3 w-3 mr-1"}),M.type]})}),a.jsx(B,{children:M.category||"-"}),a.jsxs(B,{className:"text-right",children:["K",M.selling_price.toLocaleString()]}),a.jsxs(B,{className:"text-right",children:["K",M.cost_price.toLocaleString()]}),a.jsx(B,{className:"text-right",children:M.track_inventory?a.jsx("span",{className:M.quantity_on_hand<=M.reorder_point?"text-orange-500 font-medium":"",children:M.quantity_on_hand}):"-"}),a.jsx(B,{children:a.jsx(Xe,{variant:M.is_active?"default":"secondary",children:M.is_active?"Active":"Inactive"})}),a.jsx(B,{className:"text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx(G,{variant:"ghost",size:"icon",onClick:()=>E(M),children:a.jsx(WR,{className:"h-4 w-4"})}),a.jsx(G,{variant:"ghost",size:"icon",onClick:()=>S.mutate(M.id),children:a.jsx(xs,{className:"h-4 w-4 text-destructive"})})]})})]},M.id))})]})}):a.jsx(gB,{icon:a.jsx(Wa,{className:"h-8 w-8 text-muted-foreground"}),title:"No products or services",description:"Add your first product or service to get started",actionLabel:"Add Product/Service",onAction:P})]}),a.jsxs(Na,{value:"pricing",className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-end",children:a.jsxs(G,{onClick:I,children:[a.jsx(xn,{className:"h-4 w-4 mr-2"}),"Create Price List"]})}),T?a.jsx(uf,{message:"Loading price lists..."}):A!=null&&A.length?a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:A.map(M=>a.jsxs(X,{children:[a.jsxs(ee,{className:"flex flex-row items-start justify-between space-y-0",children:[a.jsxs("div",{children:[a.jsx(ne,{className:"text-lg",children:M.name}),a.jsx("p",{className:"text-sm text-muted-foreground",children:M.description||"No description"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[M.is_default&&a.jsx(Xe,{variant:"secondary",children:"Default"}),a.jsx(Xe,{variant:M.is_active?"default":"secondary",children:M.is_active?"Active":"Inactive"})]})]}),a.jsxs(re,{children:[a.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground mb-4",children:[a.jsxs("span",{children:["Currency: ",M.currency]}),M.valid_from&&a.jsxs("span",{children:["Valid: ",new Date(M.valid_from).toLocaleDateString(),M.valid_to&&` - ${new Date(M.valid_to).toLocaleDateString()}`]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(G,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>C(M),children:[a.jsx(WR,{className:"h-4 w-4 mr-2"}),"Edit"]}),a.jsx(G,{variant:"outline",size:"sm",onClick:()=>p.mutate(M.id),children:a.jsx(xs,{className:"h-4 w-4 text-destructive"})})]})]})]},M.id))}):a.jsx(gB,{icon:a.jsx(HR,{className:"h-8 w-8 text-muted-foreground"}),title:"No price lists",description:"Create price lists to offer different pricing tiers",actionLabel:"Create Price List",onAction:I})]}),a.jsx(Na,{value:"inventory",className:"space-y-4",children:a.jsxs(X,{children:[a.jsx(ee,{children:a.jsxs(ne,{className:"flex items-center gap-2",children:[a.jsx(Za,{className:"h-5 w-5"}),"Inventory Tracking"]})}),a.jsx(re,{children:y?a.jsx(uf,{message:"Loading inventory..."}):a.jsxs(zt,{children:[a.jsx(qt,{children:a.jsxs(_e,{children:[a.jsx(U,{children:"Product"}),a.jsx(U,{children:"SKU"}),a.jsx(U,{className:"text-right",children:"On Hand"}),a.jsx(U,{className:"text-right",children:"Reorder Point"}),a.jsx(U,{className:"text-right",children:"Unit Cost"}),a.jsx(U,{className:"text-right",children:"Total Value"}),a.jsx(U,{children:"Status"})]})}),a.jsxs(Wt,{children:[w==null?void 0:w.filter(M=>M.track_inventory).map(M=>{const F=M.quantity_on_hand<=M.reorder_point,L=M.quantity_on_hand*M.cost_price;return a.jsxs(_e,{children:[a.jsx(B,{className:"font-medium",children:M.name}),a.jsx(B,{children:M.sku||"-"}),a.jsx(B,{className:"text-right",children:a.jsx("span",{className:F?"text-orange-500 font-medium":"",children:M.quantity_on_hand})}),a.jsx(B,{className:"text-right",children:M.reorder_point}),a.jsxs(B,{className:"text-right",children:["K",M.cost_price.toLocaleString()]}),a.jsxs(B,{className:"text-right font-medium",children:["K",L.toLocaleString()]}),a.jsx(B,{children:a.jsx(Xe,{variant:F?"destructive":"default",className:F?"bg-orange-500":"",children:F?"Low Stock":"In Stock"})})]},M.id)}),!(w!=null&&w.filter(M=>M.track_inventory).length)&&a.jsx(_e,{children:a.jsx(B,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No products with inventory tracking enabled"})})]})]})})]})})]}),a.jsx(Jn,{open:l,onOpenChange:c,children:a.jsxs(zn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsx(qn,{children:a.jsxs(Wn,{children:[h!=null&&h.id?"Edit":"New"," Product/Service"]})}),h&&a.jsxs("div",{className:"grid gap-4 py-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"name",children:"Name *"}),a.jsx(K,{id:"name",value:h.name||"",onChange:M=>f({...h,name:M.target.value}),placeholder:"Product name"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"sku",children:"SKU"}),a.jsx(K,{id:"sku",value:h.sku||"",onChange:M=>f({...h,sku:M.target.value}),placeholder:"Stock keeping unit"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"type",children:"Type"}),a.jsxs(It,{value:h.type,onValueChange:M=>f({...h,type:M}),children:[a.jsx(Et,{children:a.jsx(kt,{})}),a.jsxs(At,{children:[a.jsx(be,{value:"product",children:"Product"}),a.jsx(be,{value:"service",children:"Service"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"category",children:"Category"}),a.jsx(K,{id:"category",value:h.category||"",onChange:M=>f({...h,category:M.target.value}),placeholder:"Category"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"description",children:"Description"}),a.jsx(lr,{id:"description",value:h.description||"",onChange:M=>f({...h,description:M.target.value}),placeholder:"Product description",rows:3})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"selling_price",children:"Selling Price (K)"}),a.jsx(K,{id:"selling_price",type:"number",value:h.selling_price||0,onChange:M=>f({...h,selling_price:parseFloat(M.target.value)||0})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"cost_price",children:"Cost Price (K)"}),a.jsx(K,{id:"cost_price",type:"number",value:h.cost_price||0,onChange:M=>f({...h,cost_price:parseFloat(M.target.value)||0})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"unit_of_measure",children:"Unit of Measure"}),a.jsx(K,{id:"unit_of_measure",value:h.unit_of_measure||"Unit",onChange:M=>f({...h,unit_of_measure:M.target.value})})]})]}),h.type==="product"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Zr,{id:"track_inventory",checked:h.track_inventory||!1,onCheckedChange:M=>f({...h,track_inventory:M})}),a.jsx(J,{htmlFor:"track_inventory",children:"Track Inventory"})]}),h.track_inventory&&a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"quantity_on_hand",children:"Quantity on Hand"}),a.jsx(K,{id:"quantity_on_hand",type:"number",value:h.quantity_on_hand||0,onChange:M=>f({...h,quantity_on_hand:parseFloat(M.target.value)||0})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"reorder_point",children:"Reorder Point"}),a.jsx(K,{id:"reorder_point",type:"number",value:h.reorder_point||0,onChange:M=>f({...h,reorder_point:parseFloat(M.target.value)||0})})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Zr,{id:"is_taxable",checked:h.is_taxable||!1,onCheckedChange:M=>f({...h,is_taxable:M})}),a.jsx(J,{htmlFor:"is_taxable",children:"Taxable (VAT)"})]}),h.is_taxable&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"tax_rate",children:"Tax Rate (%)"}),a.jsx(K,{id:"tax_rate",type:"number",value:h.tax_rate||16,onChange:M=>f({...h,tax_rate:parseFloat(M.target.value)||16})})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Zr,{id:"is_active",checked:h.is_active||!1,onCheckedChange:M=>f({...h,is_active:M})}),a.jsx(J,{htmlFor:"is_active",children:"Active"})]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[a.jsx(G,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),a.jsx(G,{onClick:()=>v.mutate(h),disabled:!h.name||v.isPending,children:v.isPending?"Saving...":"Save"})]})]})]})}),a.jsx(Jn,{open:u,onOpenChange:d,children:a.jsxs(zn,{children:[a.jsx(qn,{children:a.jsxs(Wn,{children:[m!=null&&m.id?"Edit":"New"," Price List"]})}),m&&a.jsxs("div",{className:"grid gap-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"pl_name",children:"Name *"}),a.jsx(K,{id:"pl_name",value:m.name||"",onChange:M=>b({...m,name:M.target.value}),placeholder:"Price list name"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"pl_description",children:"Description"}),a.jsx(lr,{id:"pl_description",value:m.description||"",onChange:M=>b({...m,description:M.target.value}),placeholder:"Description",rows:2})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"pl_currency",children:"Currency"}),a.jsxs(It,{value:m.currency||"ZMW",onValueChange:M=>b({...m,currency:M}),children:[a.jsx(Et,{children:a.jsx(kt,{})}),a.jsxs(At,{children:[a.jsx(be,{value:"ZMW",children:"ZMW"}),a.jsx(be,{value:"USD",children:"USD"}),a.jsx(be,{value:"EUR",children:"EUR"}),a.jsx(be,{value:"GBP",children:"GBP"})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[a.jsx(Zr,{id:"pl_is_default",checked:m.is_default||!1,onCheckedChange:M=>b({...m,is_default:M})}),a.jsx(J,{htmlFor:"pl_is_default",children:"Default Price List"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"pl_valid_from",children:"Valid From"}),a.jsx(K,{id:"pl_valid_from",type:"date",value:m.valid_from||"",onChange:M=>b({...m,valid_from:M.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(J,{htmlFor:"pl_valid_to",children:"Valid To"}),a.jsx(K,{id:"pl_valid_to",type:"date",value:m.valid_to||"",onChange:M=>b({...m,valid_to:M.target.value})})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Zr,{id:"pl_is_active",checked:m.is_active||!1,onCheckedChange:M=>b({...m,is_active:M})}),a.jsx(J,{htmlFor:"pl_is_active",children:"Active"})]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[a.jsx(G,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),a.jsx(G,{onClick:()=>j.mutate(m),disabled:!m.name||j.isPending,children:j.isPending?"Saving...":"Save"})]})]})]})})]})}const Pqe=N.lazy(()=>xv(()=>import("./FinancialReports-TFV4YhQf.js"),[])),Iqe=N.lazy(()=>xv(()=>import("./PayrollReports-CS77NwIH.js"),[])),kqe=N.lazy(()=>xv(()=>import("./AuditLogs-BMeZidbc.js"),[])),Oqe=N.lazy(()=>xv(()=>import("./JournalEntries-9Y3_Oorm.js"),__vite__mapDeps([0,1]))),Rqe=N.lazy(()=>xv(()=>import("./ChartOfAccounts-PPmFAnVg.js"),__vite__mapDeps([2,1]))),Mqe=new Xse({defaultOptions:{queries:{staleTime:1e3*60*5,retry:2,refetchOnWindowFocus:!1},mutations:{retry:1}}}),Zp=a.jsx("div",{className:"py-10",children:a.jsx(uf,{message:"Loading page..."})}),Dqe=()=>a.jsx(kpe,{children:a.jsx(nae,{client:Mqe,children:a.jsxs(o6,{children:[a.jsx(gne,{}),a.jsx(Gne,{}),a.jsx(uie,{basename:"/Zedbooks/",children:a.jsx(Ppe,{children:a.jsxs(nie,{children:[a.jsx(yt,{path:"/",element:a.jsx(dqe,{})}),a.jsx(yt,{path:"/auth",element:a.jsx(Tbe,{})}),a.jsx(yt,{path:"/setup",element:a.jsx(Nt,{children:a.jsx(cqe,{})})}),a.jsx(yt,{path:"/dashboard",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(cze,{})})})}),a.jsx(yt,{path:"/invoices",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(dze,{})})})})}),a.jsx(yt,{path:"/invoices/new",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(fze,{})})})})}),a.jsx(yt,{path:"/customers",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(M8e,{})})})})}),a.jsx(yt,{path:"/estimates",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(U8e,{})})})})}),a.jsx(yt,{path:"/quotations/new",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(F8e,{})})})})}),a.jsx(yt,{path:"/sales-orders",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx($8e,{})})})})}),a.jsx(yt,{path:"/vendors",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(q8e,{})})})})}),a.jsx(yt,{path:"/bills",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(W8e,{})})})})}),a.jsx(yt,{path:"/purchase-orders",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(H8e,{})})})})}),a.jsx(yt,{path:"/expenses",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(Q8e,{})})})})}),a.jsx(yt,{path:"/products",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(Cqe,{})})})})}),a.jsx(yt,{path:"/inventory",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(Z8e,{})})})})}),a.jsx(yt,{path:"/bank-accounts",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(J8e,{})})})})}),a.jsx(yt,{path:"/reconciliation",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(eqe,{})})})})}),a.jsx(yt,{path:"/employees",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(mze,{})})})})}),a.jsx(yt,{path:"/employees/new",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(zze,{})})})})}),a.jsx(yt,{path:"/employees/:id/edit",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(Hze,{})})})})}),a.jsx(yt,{path:"/employees/bulk-upload",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(Gze,{})})})})}),a.jsx(yt,{path:"/employees/:id/payroll-setup",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(Nqe,{})})})})}),a.jsx(yt,{path:"/payroll",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(Xze,{})})})})}),a.jsx(yt,{path:"/payroll/new",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(t8e,{})})})})}),a.jsx(yt,{path:"/payroll/:id",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(p8e,{})})})})}),a.jsx(yt,{path:"/payroll/:id/approve",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(y8e,{})})})})}),a.jsx(yt,{path:"/payroll/:runId/payslip/:employeeId",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(g8e,{})})})})}),a.jsx(yt,{path:"/advances",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(x8e,{})})})})}),a.jsx(yt,{path:"/time-tracking",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(tqe,{})})})})}),a.jsx(yt,{path:"/projects",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(rqe,{})})})})}),a.jsx(yt,{path:"/projects/:projectId/expenses",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(aqe,{})})})})}),a.jsx(yt,{path:"/donors",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(hqe,{})})})})}),a.jsx(yt,{path:"/accounts-payable",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(mqe,{})})})})}),a.jsx(yt,{path:"/accounts-receivable",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(gqe,{})})})})}),a.jsx(yt,{path:"/company-settings",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{allowedRoles:["super_admin","admin"],children:a.jsx(dB,{})})})})}),a.jsx(yt,{path:"/reports",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(N.Suspense,{fallback:Zp,children:a.jsx(Pqe,{})})})})})}),a.jsx(yt,{path:"/payroll-reports",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(N.Suspense,{fallback:Zp,children:a.jsx(Iqe,{})})})})})}),a.jsx(yt,{path:"/zra-compliance",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(_8e,{})})})})}),a.jsx(yt,{path:"/tax-calculator",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(j8e,{})})})})}),a.jsx(yt,{path:"/payroll-settings",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{allowedRoles:["super_admin","admin"],children:a.jsx(Aqe,{})})})})}),a.jsx(yt,{path:"/settings",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(dB,{})})})})}),a.jsx(yt,{path:"/users",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{allowedRoles:["super_admin","admin"],children:a.jsx(nqe,{})})})})}),a.jsx(yt,{path:"/audit-logs",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{allowedRoles:["super_admin","admin","auditor"],children:a.jsx(N.Suspense,{fallback:Zp,children:a.jsx(kqe,{})})})})})}),a.jsx(yt,{path:"/fixed-assets",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(yqe,{})})})})}),a.jsx(yt,{path:"/asset-depreciation",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(xqe,{})})})})}),a.jsx(yt,{path:"/financial-periods",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{allowedRoles:["super_admin","admin","accountant"],children:a.jsx(_qe,{})})})})}),a.jsx(yt,{path:"/journal-entries",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(N.Suspense,{fallback:Zp,children:a.jsx(Oqe,{})})})})})}),a.jsx(yt,{path:"/chart-of-accounts",element:a.jsx(Nt,{children:a.jsx(St,{children:a.jsx(Ct,{children:a.jsx(N.Suspense,{fallback:Zp,children:a.jsx(Rqe,{})})})})})}),a.jsx(yt,{path:"*",element:a.jsx(X8e,{})})]})})})]})})});V5(document.getElementById("root")).render(a.jsx(Dqe,{}));export{Xe as $,vt as A,G as B,xa as C,ys as D,gB as E,ar as F,ve as G,$e as H,K as I,Ce as J,ge as K,uf as L,Jd as M,le as N,Y as O,te as P,Ws as Q,CE as R,wd as S,Yv as T,na as U,It as V,Et as W,kt as X,At as Y,be as Z,ba as _,pe as a,jt as a0,Pn as a1,yte as a2,Jn as a3,zn as a4,qn as a5,Wn as a6,un as a7,it as a8,Hr as a9,xn as aa,lr as ab,CN as ac,pU as ad,Tte as ae,xs as af,Z as ag,jn as ah,ye as ai,or as aj,He as ak,Li as al,ml as am,Ne as b,ke as c,Ke as d,A_ as e,X as f,ee as g,ne as h,re as i,a as j,J as k,Qm as l,ja as m,Za as n,mU as o,Na as p,zt as q,N as r,qt as s,_e as t,ct as u,U as v,Wt as w,B as x,wbe as y,Hn as z};
